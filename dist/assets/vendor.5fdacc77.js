var Fo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function J5(z){return z&&z.__esModule&&Object.prototype.hasOwnProperty.call(z,"default")?z.default:z}function $g(z){throw new Error('Could not dynamically require "'+z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xh={exports:{}},Yo={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var A_=Object.getOwnPropertySymbols,Q5=Object.prototype.hasOwnProperty,$5=Object.prototype.propertyIsEnumerable;function q5(z){if(z==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(z)}function eA(){try{if(!Object.assign)return!1;var z=new String("abc");if(z[5]="de",Object.getOwnPropertyNames(z)[0]==="5")return!1;for(var W={},e=0;e<10;e++)W["_"+String.fromCharCode(e)]=e;var I=Object.getOwnPropertyNames(W).map(function(u){return W[u]});if(I.join("")!=="0123456789")return!1;var B={};return"abcdefghijklmnopqrst".split("").forEach(function(u){B[u]=u}),Object.keys(Object.assign({},B)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var M_=eA()?Object.assign:function(z,W){for(var e,I=q5(z),B,u=1;u<arguments.length;u++){e=Object(arguments[u]);for(var s in e)Q5.call(e,s)&&(I[s]=e[s]);if(A_){B=A_(e);for(var m=0;m<B.length;m++)$5.call(e,B[m])&&(I[B[m]]=e[B[m]])}}return I};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx=M_,Cp=60103,S_=60106;Yo.Fragment=60107;Yo.StrictMode=60108;Yo.Profiler=60114;var k_=60109,E_=60110,C_=60112;Yo.Suspense=60113;var L_=60115,P_=60116;if(typeof Symbol=="function"&&Symbol.for){var Oc=Symbol.for;Cp=Oc("react.element"),S_=Oc("react.portal"),Yo.Fragment=Oc("react.fragment"),Yo.StrictMode=Oc("react.strict_mode"),Yo.Profiler=Oc("react.profiler"),k_=Oc("react.provider"),E_=Oc("react.context"),C_=Oc("react.forward_ref"),Yo.Suspense=Oc("react.suspense"),L_=Oc("react.memo"),P_=Oc("react.lazy")}var R_=typeof Symbol=="function"&&Symbol.iterator;function tA(z){return z===null||typeof z!="object"?null:(z=R_&&z[R_]||z["@@iterator"],typeof z=="function"?z:null)}function Yd(z){for(var W="https://reactjs.org/docs/error-decoder.html?invariant="+z,e=1;e<arguments.length;e++)W+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+z+"; visit "+W+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I_={};function Lp(z,W,e){this.props=z,this.context=W,this.refs=I_,this.updater=e||D_}Lp.prototype.isReactComponent={};Lp.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error(Yd(85));this.updater.enqueueSetState(this,z,W,"setState")};Lp.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function z_(){}z_.prototype=Lp.prototype;function Ax(z,W,e){this.props=z,this.context=W,this.refs=I_,this.updater=e||D_}var Mx=Ax.prototype=new z_;Mx.constructor=Ax;Tx(Mx,Lp.prototype);Mx.isPureReactComponent=!0;var Sx={current:null},F_=Object.prototype.hasOwnProperty,O_={key:!0,ref:!0,__self:!0,__source:!0};function N_(z,W,e){var I,B={},u=null,s=null;if(W!=null)for(I in W.ref!==void 0&&(s=W.ref),W.key!==void 0&&(u=""+W.key),W)F_.call(W,I)&&!O_.hasOwnProperty(I)&&(B[I]=W[I]);var m=arguments.length-2;if(m===1)B.children=e;else if(1<m){for(var x=Array(m),t=0;t<m;t++)x[t]=arguments[t+2];B.children=x}if(z&&z.defaultProps)for(I in m=z.defaultProps,m)B[I]===void 0&&(B[I]=m[I]);return{$$typeof:Cp,type:z,key:u,ref:s,props:B,_owner:Sx.current}}function rA(z,W){return{$$typeof:Cp,type:z.type,key:W,ref:z.ref,props:z.props,_owner:z._owner}}function kx(z){return typeof z=="object"&&z!==null&&z.$$typeof===Cp}function nA(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(e){return W[e]})}var B_=/\/+/g;function Ex(z,W){return typeof z=="object"&&z!==null&&z.key!=null?nA(""+z.key):W.toString(36)}function qg(z,W,e,I,B){var u=typeof z;(u==="undefined"||u==="boolean")&&(z=null);var s=!1;if(z===null)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(z.$$typeof){case Cp:case S_:s=!0}}if(s)return s=z,B=B(s),z=I===""?"."+Ex(s,0):I,Array.isArray(B)?(e="",z!=null&&(e=z.replace(B_,"$&/")+"/"),qg(B,W,e,"",function(t){return t})):B!=null&&(kx(B)&&(B=rA(B,e+(!B.key||s&&s.key===B.key?"":(""+B.key).replace(B_,"$&/")+"/")+z)),W.push(B)),1;if(s=0,I=I===""?".":I+":",Array.isArray(z))for(var m=0;m<z.length;m++){u=z[m];var x=I+Ex(u,m);s+=qg(u,W,e,x,B)}else if(x=tA(z),typeof x=="function")for(z=x.call(z),m=0;!(u=z.next()).done;)u=u.value,x=I+Ex(u,m++),s+=qg(u,W,e,x,B);else if(u==="object")throw W=""+z,Error(Yd(31,W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W));return s}function ey(z,W,e){if(z==null)return z;var I=[],B=0;return qg(z,I,"","",function(u){return W.call(e,u,B++)}),I}function aA(z){if(z._status===-1){var W=z._result;W=W(),z._status=0,z._result=W,W.then(function(e){z._status===0&&(e=e.default,z._status=1,z._result=e)},function(e){z._status===0&&(z._status=2,z._result=e)})}if(z._status===1)return z._result;throw z._result}var U_={current:null};function bh(){var z=U_.current;if(z===null)throw Error(Yd(321));return z}var iA={ReactCurrentDispatcher:U_,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Sx,IsSomeRendererActing:{current:!1},assign:Tx};Yo.Children={map:ey,forEach:function(z,W,e){ey(z,function(){W.apply(this,arguments)},e)},count:function(z){var W=0;return ey(z,function(){W++}),W},toArray:function(z){return ey(z,function(W){return W})||[]},only:function(z){if(!kx(z))throw Error(Yd(143));return z}};Yo.Component=Lp;Yo.PureComponent=Ax;Yo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iA;Yo.cloneElement=function(z,W,e){if(z==null)throw Error(Yd(267,z));var I=Tx({},z.props),B=z.key,u=z.ref,s=z._owner;if(W!=null){if(W.ref!==void 0&&(u=W.ref,s=Sx.current),W.key!==void 0&&(B=""+W.key),z.type&&z.type.defaultProps)var m=z.type.defaultProps;for(x in W)F_.call(W,x)&&!O_.hasOwnProperty(x)&&(I[x]=W[x]===void 0&&m!==void 0?m[x]:W[x])}var x=arguments.length-2;if(x===1)I.children=e;else if(1<x){m=Array(x);for(var t=0;t<x;t++)m[t]=arguments[t+2];I.children=m}return{$$typeof:Cp,type:z.type,key:B,ref:u,props:I,_owner:s}};Yo.createContext=function(z,W){return W===void 0&&(W=null),z={$$typeof:E_,_calculateChangedBits:W,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider={$$typeof:k_,_context:z},z.Consumer=z};Yo.createElement=N_;Yo.createFactory=function(z){var W=N_.bind(null,z);return W.type=z,W};Yo.createRef=function(){return{current:null}};Yo.forwardRef=function(z){return{$$typeof:C_,render:z}};Yo.isValidElement=kx;Yo.lazy=function(z){return{$$typeof:P_,_payload:{_status:-1,_result:z},_init:aA}};Yo.memo=function(z,W){return{$$typeof:L_,type:z,compare:W===void 0?null:W}};Yo.useCallback=function(z,W){return bh().useCallback(z,W)};Yo.useContext=function(z,W){return bh().useContext(z,W)};Yo.useDebugValue=function(){};Yo.useEffect=function(z,W){return bh().useEffect(z,W)};Yo.useImperativeHandle=function(z,W,e){return bh().useImperativeHandle(z,W,e)};Yo.useLayoutEffect=function(z,W){return bh().useLayoutEffect(z,W)};Yo.useMemo=function(z,W){return bh().useMemo(z,W)};Yo.useReducer=function(z,W,e){return bh().useReducer(z,W,e)};Yo.useRef=function(z){return bh().useRef(z)};Yo.useState=function(z){return bh().useState(z)};Yo.version="17.0.2";xh.exports=Yo;var vf=xh.exports,H_={exports:{}},wc={},V_={exports:{}},G_={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(z){var W,e,I,B;if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;z.unstable_now=function(){return u.now()}}else{var s=Date,m=s.now();z.unstable_now=function(){return s.now()-m}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var x=null,t=null,i=function(){if(x!==null)try{var R=z.unstable_now();x(!0,R),x=null}catch(U){throw setTimeout(i,0),U}};W=function(R){x!==null?setTimeout(W,0,R):(x=R,setTimeout(i,0))},e=function(R,U){t=setTimeout(R,U)},I=function(){clearTimeout(t)},z.unstable_shouldYield=function(){return!1},B=z.unstable_forceFrameRate=function(){}}else{var a=window.setTimeout,r=window.clearTimeout;if(typeof console!="undefined"){var n=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof n!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var f=!1,l=null,o=-1,c=5,v=0;z.unstable_shouldYield=function(){return z.unstable_now()>=v},B=function(){},z.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):c=0<R?Math.floor(1e3/R):5};var d=new MessageChannel,p=d.port2;d.port1.onmessage=function(){if(l!==null){var R=z.unstable_now();v=R+c;try{l(!0,R)?p.postMessage(null):(f=!1,l=null)}catch(U){throw p.postMessage(null),U}}else f=!1},W=function(R){l=R,f||(f=!0,p.postMessage(null))},e=function(R,U){o=a(function(){R(z.unstable_now())},U)},I=function(){r(o),o=-1}}function y(R,U){var N=R.length;R.push(U);e:for(;;){var X=N-1>>>1,j=R[X];if(j!==void 0&&0<b(j,U))R[X]=U,R[N]=j,N=X;else break e}}function g(R){return R=R[0],R===void 0?null:R}function A(R){var U=R[0];if(U!==void 0){var N=R.pop();if(N!==U){R[0]=N;e:for(var X=0,j=R.length;X<j;){var ee=2*(X+1)-1,q=R[ee],G=ee+1,J=R[G];if(q!==void 0&&0>b(q,N))J!==void 0&&0>b(J,q)?(R[X]=J,R[G]=N,X=G):(R[X]=q,R[ee]=N,X=ee);else if(J!==void 0&&0>b(J,N))R[X]=J,R[G]=N,X=G;else break e}}return U}return null}function b(R,U){var N=R.sortIndex-U.sortIndex;return N!==0?N:R.id-U.id}var M=[],w=[],T=1,_=null,h=3,L=!1,S=!1,k=!1;function P(R){for(var U=g(w);U!==null;){if(U.callback===null)A(w);else if(U.startTime<=R)A(w),U.sortIndex=U.expirationTime,y(M,U);else break;U=g(w)}}function O(R){if(k=!1,P(R),!S)if(g(M)!==null)S=!0,W(F);else{var U=g(w);U!==null&&e(O,U.startTime-R)}}function F(R,U){S=!1,k&&(k=!1,I()),L=!0;var N=h;try{for(P(U),_=g(M);_!==null&&(!(_.expirationTime>U)||R&&!z.unstable_shouldYield());){var X=_.callback;if(typeof X=="function"){_.callback=null,h=_.priorityLevel;var j=X(_.expirationTime<=U);U=z.unstable_now(),typeof j=="function"?_.callback=j:_===g(M)&&A(M),P(U)}else A(M);_=g(M)}if(_!==null)var ee=!0;else{var q=g(w);q!==null&&e(O,q.startTime-U),ee=!1}return ee}finally{_=null,h=N,L=!1}}var D=B;z.unstable_IdlePriority=5,z.unstable_ImmediatePriority=1,z.unstable_LowPriority=4,z.unstable_NormalPriority=3,z.unstable_Profiling=null,z.unstable_UserBlockingPriority=2,z.unstable_cancelCallback=function(R){R.callback=null},z.unstable_continueExecution=function(){S||L||(S=!0,W(F))},z.unstable_getCurrentPriorityLevel=function(){return h},z.unstable_getFirstCallbackNode=function(){return g(M)},z.unstable_next=function(R){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var N=h;h=U;try{return R()}finally{h=N}},z.unstable_pauseExecution=function(){},z.unstable_requestPaint=D,z.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var N=h;h=R;try{return U()}finally{h=N}},z.unstable_scheduleCallback=function(R,U,N){var X=z.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?X+N:X):N=X,R){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=N+j,R={id:T++,callback:U,priorityLevel:R,startTime:N,expirationTime:j,sortIndex:-1},N>X?(R.sortIndex=N,y(w,R),g(M)===null&&R===g(w)&&(k?I():k=!0,e(O,N-X))):(R.sortIndex=j,y(M,R),S||L||(S=!0,W(F))),R},z.unstable_wrapCallback=function(R){var U=h;return function(){var N=h;h=U;try{return R.apply(this,arguments)}finally{h=N}}}})(G_);V_.exports=G_;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty=xh.exports,Ys=M_,_u=V_.exports;function Ka(z){for(var W="https://reactjs.org/docs/error-decoder.html?invariant="+z,e=1;e<arguments.length;e++)W+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+z+"; visit "+W+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!ty)throw Error(Ka(227));var W_=new Set,Xd={};function Nv(z,W){Pp(z,W),Pp(z+"Capture",W)}function Pp(z,W){for(Xd[z]=W,z=0;z<W.length;z++)W_.add(W[z])}var _h=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),oA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y_=Object.prototype.hasOwnProperty,X_={},Z_={};function sA(z){return Y_.call(Z_,z)?!0:Y_.call(X_,z)?!1:oA.test(z)?Z_[z]=!0:(X_[z]=!0,!1)}function lA(z,W,e,I){if(e!==null&&e.type===0)return!1;switch(typeof W){case"function":case"symbol":return!0;case"boolean":return I?!1:e!==null?!e.acceptsBooleans:(z=z.toLowerCase().slice(0,5),z!=="data-"&&z!=="aria-");default:return!1}}function uA(z,W,e,I){if(W===null||typeof W=="undefined"||lA(z,W,e,I))return!0;if(I)return!1;if(e!==null)switch(e.type){case 3:return!W;case 4:return W===!1;case 5:return isNaN(W);case 6:return isNaN(W)||1>W}return!1}function pf(z,W,e,I,B,u,s){this.acceptsBooleans=W===2||W===3||W===4,this.attributeName=I,this.attributeNamespace=B,this.mustUseProperty=e,this.propertyName=z,this.type=W,this.sanitizeURL=u,this.removeEmptyString=s}var Ru={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(z){Ru[z]=new pf(z,0,!1,z,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(z){var W=z[0];Ru[W]=new pf(W,1,!1,z[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(z){Ru[z]=new pf(z,2,!1,z.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(z){Ru[z]=new pf(z,2,!1,z,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(z){Ru[z]=new pf(z,3,!1,z.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(z){Ru[z]=new pf(z,3,!0,z,null,!1,!1)});["capture","download"].forEach(function(z){Ru[z]=new pf(z,4,!1,z,null,!1,!1)});["cols","rows","size","span"].forEach(function(z){Ru[z]=new pf(z,6,!1,z,null,!1,!1)});["rowSpan","start"].forEach(function(z){Ru[z]=new pf(z,5,!1,z.toLowerCase(),null,!1,!1)});var Cx=/[\-:]([a-z])/g;function Lx(z){return z[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(z){var W=z.replace(Cx,Lx);Ru[W]=new pf(W,1,!1,z,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(z){var W=z.replace(Cx,Lx);Ru[W]=new pf(W,1,!1,z,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(z){var W=z.replace(Cx,Lx);Ru[W]=new pf(W,1,!1,z,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(z){Ru[z]=new pf(z,1,!1,z.toLowerCase(),null,!1,!1)});Ru.xlinkHref=new pf("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(z){Ru[z]=new pf(z,1,!1,z.toLowerCase(),null,!0,!0)});function Px(z,W,e,I){var B=Ru.hasOwnProperty(W)?Ru[W]:null,u=B!==null?B.type===0:I?!1:!(!(2<W.length)||W[0]!=="o"&&W[0]!=="O"||W[1]!=="n"&&W[1]!=="N");u||(uA(W,e,B,I)&&(e=null),I||B===null?sA(W)&&(e===null?z.removeAttribute(W):z.setAttribute(W,""+e)):B.mustUseProperty?z[B.propertyName]=e===null?B.type===3?!1:"":e:(W=B.attributeName,I=B.attributeNamespace,e===null?z.removeAttribute(W):(B=B.type,e=B===3||B===4&&e===!0?"":""+e,I?z.setAttributeNS(I,W,e):z.setAttribute(W,e))))}var Bv=ty.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zd=60103,Uv=60106,ev=60107,Rx=60108,jd=60114,Dx=60109,Ix=60110,ry=60112,Kd=60113,ny=60120,ay=60115,zx=60116,Fx=60121,Ox=60128,j_=60129,Nx=60130,Bx=60131;if(typeof Symbol=="function"&&Symbol.for){var wu=Symbol.for;Zd=wu("react.element"),Uv=wu("react.portal"),ev=wu("react.fragment"),Rx=wu("react.strict_mode"),jd=wu("react.profiler"),Dx=wu("react.provider"),Ix=wu("react.context"),ry=wu("react.forward_ref"),Kd=wu("react.suspense"),ny=wu("react.suspense_list"),ay=wu("react.memo"),zx=wu("react.lazy"),Fx=wu("react.block"),wu("react.scope"),Ox=wu("react.opaque.id"),j_=wu("react.debug_trace_mode"),Nx=wu("react.offscreen"),Bx=wu("react.legacy_hidden")}var K_=typeof Symbol=="function"&&Symbol.iterator;function Jd(z){return z===null||typeof z!="object"?null:(z=K_&&z[K_]||z["@@iterator"],typeof z=="function"?z:null)}var Ux;function Qd(z){if(Ux===void 0)try{throw Error()}catch(e){var W=e.stack.trim().match(/\n( *(at )?)/);Ux=W&&W[1]||""}return`
`+Ux+z}var Hx=!1;function iy(z,W){if(!z||Hx)return"";Hx=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(W)if(W=function(){throw Error()},Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(x){var I=x}Reflect.construct(z,[],W)}else{try{W.call()}catch(x){I=x}z.call(W.prototype)}else{try{throw Error()}catch(x){I=x}z()}}catch(x){if(x&&I&&typeof x.stack=="string"){for(var B=x.stack.split(`
`),u=I.stack.split(`
`),s=B.length-1,m=u.length-1;1<=s&&0<=m&&B[s]!==u[m];)m--;for(;1<=s&&0<=m;s--,m--)if(B[s]!==u[m]){if(s!==1||m!==1)do if(s--,m--,0>m||B[s]!==u[m])return`
`+B[s].replace(" at new "," at ");while(1<=s&&0<=m);break}}}finally{Hx=!1,Error.prepareStackTrace=e}return(z=z?z.displayName||z.name:"")?Qd(z):""}function fA(z){switch(z.tag){case 5:return Qd(z.type);case 16:return Qd("Lazy");case 13:return Qd("Suspense");case 19:return Qd("SuspenseList");case 0:case 2:case 15:return z=iy(z.type,!1),z;case 11:return z=iy(z.type.render,!1),z;case 22:return z=iy(z.type._render,!1),z;case 1:return z=iy(z.type,!0),z;default:return""}}function Rp(z){if(z==null)return null;if(typeof z=="function")return z.displayName||z.name||null;if(typeof z=="string")return z;switch(z){case ev:return"Fragment";case Uv:return"Portal";case jd:return"Profiler";case Rx:return"StrictMode";case Kd:return"Suspense";case ny:return"SuspenseList"}if(typeof z=="object")switch(z.$$typeof){case Ix:return(z.displayName||"Context")+".Consumer";case Dx:return(z._context.displayName||"Context")+".Provider";case ry:var W=z.render;return W=W.displayName||W.name||"",z.displayName||(W!==""?"ForwardRef("+W+")":"ForwardRef");case ay:return Rp(z.type);case Fx:return Rp(z._render);case zx:W=z._payload,z=z._init;try{return Rp(z(W))}catch{}}return null}function tv(z){switch(typeof z){case"boolean":case"number":case"object":case"string":case"undefined":return z;default:return""}}function J_(z){var W=z.type;return(z=z.nodeName)&&z.toLowerCase()==="input"&&(W==="checkbox"||W==="radio")}function cA(z){var W=J_(z)?"checked":"value",e=Object.getOwnPropertyDescriptor(z.constructor.prototype,W),I=""+z[W];if(!z.hasOwnProperty(W)&&typeof e!="undefined"&&typeof e.get=="function"&&typeof e.set=="function"){var B=e.get,u=e.set;return Object.defineProperty(z,W,{configurable:!0,get:function(){return B.call(this)},set:function(s){I=""+s,u.call(this,s)}}),Object.defineProperty(z,W,{enumerable:e.enumerable}),{getValue:function(){return I},setValue:function(s){I=""+s},stopTracking:function(){z._valueTracker=null,delete z[W]}}}}function oy(z){z._valueTracker||(z._valueTracker=cA(z))}function Q_(z){if(!z)return!1;var W=z._valueTracker;if(!W)return!0;var e=W.getValue(),I="";return z&&(I=J_(z)?z.checked?"true":"false":z.value),z=I,z!==e?(W.setValue(z),!0):!1}function sy(z){if(z=z||(typeof document!="undefined"?document:void 0),typeof z=="undefined")return null;try{return z.activeElement||z.body}catch{return z.body}}function Vx(z,W){var e=W.checked;return Ys({},W,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e!=null?e:z._wrapperState.initialChecked})}function $_(z,W){var e=W.defaultValue==null?"":W.defaultValue,I=W.checked!=null?W.checked:W.defaultChecked;e=tv(W.value!=null?W.value:e),z._wrapperState={initialChecked:I,initialValue:e,controlled:W.type==="checkbox"||W.type==="radio"?W.checked!=null:W.value!=null}}function q_(z,W){W=W.checked,W!=null&&Px(z,"checked",W,!1)}function Gx(z,W){q_(z,W);var e=tv(W.value),I=W.type;if(e!=null)I==="number"?(e===0&&z.value===""||z.value!=e)&&(z.value=""+e):z.value!==""+e&&(z.value=""+e);else if(I==="submit"||I==="reset"){z.removeAttribute("value");return}W.hasOwnProperty("value")?Wx(z,W.type,e):W.hasOwnProperty("defaultValue")&&Wx(z,W.type,tv(W.defaultValue)),W.checked==null&&W.defaultChecked!=null&&(z.defaultChecked=!!W.defaultChecked)}function ew(z,W,e){if(W.hasOwnProperty("value")||W.hasOwnProperty("defaultValue")){var I=W.type;if(!(I!=="submit"&&I!=="reset"||W.value!==void 0&&W.value!==null))return;W=""+z._wrapperState.initialValue,e||W===z.value||(z.value=W),z.defaultValue=W}e=z.name,e!==""&&(z.name=""),z.defaultChecked=!!z._wrapperState.initialChecked,e!==""&&(z.name=e)}function Wx(z,W,e){(W!=="number"||sy(z.ownerDocument)!==z)&&(e==null?z.defaultValue=""+z._wrapperState.initialValue:z.defaultValue!==""+e&&(z.defaultValue=""+e))}function hA(z){var W="";return ty.Children.forEach(z,function(e){e!=null&&(W+=e)}),W}function Yx(z,W){return z=Ys({children:void 0},W),(W=hA(W.children))&&(z.children=W),z}function Dp(z,W,e,I){if(z=z.options,W){W={};for(var B=0;B<e.length;B++)W["$"+e[B]]=!0;for(e=0;e<z.length;e++)B=W.hasOwnProperty("$"+z[e].value),z[e].selected!==B&&(z[e].selected=B),B&&I&&(z[e].defaultSelected=!0)}else{for(e=""+tv(e),W=null,B=0;B<z.length;B++){if(z[B].value===e){z[B].selected=!0,I&&(z[B].defaultSelected=!0);return}W!==null||z[B].disabled||(W=z[B])}W!==null&&(W.selected=!0)}}function Xx(z,W){if(W.dangerouslySetInnerHTML!=null)throw Error(Ka(91));return Ys({},W,{value:void 0,defaultValue:void 0,children:""+z._wrapperState.initialValue})}function tw(z,W){var e=W.value;if(e==null){if(e=W.children,W=W.defaultValue,e!=null){if(W!=null)throw Error(Ka(92));if(Array.isArray(e)){if(!(1>=e.length))throw Error(Ka(93));e=e[0]}W=e}W==null&&(W=""),e=W}z._wrapperState={initialValue:tv(e)}}function rw(z,W){var e=tv(W.value),I=tv(W.defaultValue);e!=null&&(e=""+e,e!==z.value&&(z.value=e),W.defaultValue==null&&z.defaultValue!==e&&(z.defaultValue=e)),I!=null&&(z.defaultValue=""+I)}function nw(z){var W=z.textContent;W===z._wrapperState.initialValue&&W!==""&&W!==null&&(z.value=W)}var Zx={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function aw(z){switch(z){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jx(z,W){return z==null||z==="http://www.w3.org/1999/xhtml"?aw(W):z==="http://www.w3.org/2000/svg"&&W==="foreignObject"?"http://www.w3.org/1999/xhtml":z}var ly,iw=function(z){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(W,e,I,B){MSApp.execUnsafeLocalFunction(function(){return z(W,e,I,B)})}:z}(function(z,W){if(z.namespaceURI!==Zx.svg||"innerHTML"in z)z.innerHTML=W;else{for(ly=ly||document.createElement("div"),ly.innerHTML="<svg>"+W.valueOf().toString()+"</svg>",W=ly.firstChild;z.firstChild;)z.removeChild(z.firstChild);for(;W.firstChild;)z.appendChild(W.firstChild)}});function $d(z,W){if(W){var e=z.firstChild;if(e&&e===z.lastChild&&e.nodeType===3){e.nodeValue=W;return}}z.textContent=W}var qd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vA=["Webkit","ms","Moz","O"];Object.keys(qd).forEach(function(z){vA.forEach(function(W){W=W+z.charAt(0).toUpperCase()+z.substring(1),qd[W]=qd[z]})});function ow(z,W,e){return W==null||typeof W=="boolean"||W===""?"":e||typeof W!="number"||W===0||qd.hasOwnProperty(z)&&qd[z]?(""+W).trim():W+"px"}function sw(z,W){z=z.style;for(var e in W)if(W.hasOwnProperty(e)){var I=e.indexOf("--")===0,B=ow(e,W[e],I);e==="float"&&(e="cssFloat"),I?z.setProperty(e,B):z[e]=B}}var pA=Ys({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kx(z,W){if(W){if(pA[z]&&(W.children!=null||W.dangerouslySetInnerHTML!=null))throw Error(Ka(137,z));if(W.dangerouslySetInnerHTML!=null){if(W.children!=null)throw Error(Ka(60));if(!(typeof W.dangerouslySetInnerHTML=="object"&&"__html"in W.dangerouslySetInnerHTML))throw Error(Ka(61))}if(W.style!=null&&typeof W.style!="object")throw Error(Ka(62))}}function Jx(z,W){if(z.indexOf("-")===-1)return typeof W.is=="string";switch(z){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Qx(z){return z=z.target||z.srcElement||window,z.correspondingUseElement&&(z=z.correspondingUseElement),z.nodeType===3?z.parentNode:z}var $x=null,Ip=null,zp=null;function lw(z){if(z=m0(z)){if(typeof $x!="function")throw Error(Ka(280));var W=z.stateNode;W&&(W=Sy(W),$x(z.stateNode,z.type,W))}}function uw(z){Ip?zp?zp.push(z):zp=[z]:Ip=z}function fw(){if(Ip){var z=Ip,W=zp;if(zp=Ip=null,lw(z),W)for(z=0;z<W.length;z++)lw(W[z])}}function qx(z,W){return z(W)}function cw(z,W,e,I,B){return z(W,e,I,B)}function eb(){}var hw=qx,Hv=!1,tb=!1;function rb(){(Ip!==null||zp!==null)&&(eb(),fw())}function dA(z,W,e){if(tb)return z(W,e);tb=!0;try{return hw(z,W,e)}finally{tb=!1,rb()}}function e0(z,W){var e=z.stateNode;if(e===null)return null;var I=Sy(e);if(I===null)return null;e=I[W];e:switch(W){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(z=z.type,I=!(z==="button"||z==="input"||z==="select"||z==="textarea")),z=!I;break e;default:z=!1}if(z)return null;if(e&&typeof e!="function")throw Error(Ka(231,W,typeof e));return e}var nb=!1;if(_h)try{var t0={};Object.defineProperty(t0,"passive",{get:function(){nb=!0}}),window.addEventListener("test",t0,t0),window.removeEventListener("test",t0,t0)}catch{nb=!1}function gA(z,W,e,I,B,u,s,m,x){var t=Array.prototype.slice.call(arguments,3);try{W.apply(e,t)}catch(i){this.onError(i)}}var r0=!1,uy=null,fy=!1,ab=null,yA={onError:function(z){r0=!0,uy=z}};function mA(z,W,e,I,B,u,s,m,x){r0=!1,uy=null,gA.apply(yA,arguments)}function xA(z,W,e,I,B,u,s,m,x){if(mA.apply(this,arguments),r0){if(r0){var t=uy;r0=!1,uy=null}else throw Error(Ka(198));fy||(fy=!0,ab=t)}}function Vv(z){var W=z,e=z;if(z.alternate)for(;W.return;)W=W.return;else{z=W;do W=z,(W.flags&1026)!=0&&(e=W.return),z=W.return;while(z)}return W.tag===3?e:null}function vw(z){if(z.tag===13){var W=z.memoizedState;if(W===null&&(z=z.alternate,z!==null&&(W=z.memoizedState)),W!==null)return W.dehydrated}return null}function pw(z){if(Vv(z)!==z)throw Error(Ka(188))}function bA(z){var W=z.alternate;if(!W){if(W=Vv(z),W===null)throw Error(Ka(188));return W!==z?null:z}for(var e=z,I=W;;){var B=e.return;if(B===null)break;var u=B.alternate;if(u===null){if(I=B.return,I!==null){e=I;continue}break}if(B.child===u.child){for(u=B.child;u;){if(u===e)return pw(B),z;if(u===I)return pw(B),W;u=u.sibling}throw Error(Ka(188))}if(e.return!==I.return)e=B,I=u;else{for(var s=!1,m=B.child;m;){if(m===e){s=!0,e=B,I=u;break}if(m===I){s=!0,I=B,e=u;break}m=m.sibling}if(!s){for(m=u.child;m;){if(m===e){s=!0,e=u,I=B;break}if(m===I){s=!0,I=u,e=B;break}m=m.sibling}if(!s)throw Error(Ka(189))}}if(e.alternate!==I)throw Error(Ka(190))}if(e.tag!==3)throw Error(Ka(188));return e.stateNode.current===e?z:W}function dw(z){if(z=bA(z),!z)return null;for(var W=z;;){if(W.tag===5||W.tag===6)return W;if(W.child)W.child.return=W,W=W.child;else{if(W===z)break;for(;!W.sibling;){if(!W.return||W.return===z)return null;W=W.return}W.sibling.return=W.return,W=W.sibling}}return null}function gw(z,W){for(var e=z.alternate;W!==null;){if(W===z||W===e)return!0;W=W.return}return!1}var yw,ib,mw,xw,ob=!1,Qc=[],rv=null,nv=null,av=null,n0=new Map,a0=new Map,i0=[],bw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sb(z,W,e,I,B){return{blockedOn:z,domEventName:W,eventSystemFlags:e|16,nativeEvent:B,targetContainers:[I]}}function _w(z,W){switch(z){case"focusin":case"focusout":rv=null;break;case"dragenter":case"dragleave":nv=null;break;case"mouseover":case"mouseout":av=null;break;case"pointerover":case"pointerout":n0.delete(W.pointerId);break;case"gotpointercapture":case"lostpointercapture":a0.delete(W.pointerId)}}function o0(z,W,e,I,B,u){return z===null||z.nativeEvent!==u?(z=sb(W,e,I,B,u),W!==null&&(W=m0(W),W!==null&&ib(W)),z):(z.eventSystemFlags|=I,W=z.targetContainers,B!==null&&W.indexOf(B)===-1&&W.push(B),z)}function _A(z,W,e,I,B){switch(W){case"focusin":return rv=o0(rv,z,W,e,I,B),!0;case"dragenter":return nv=o0(nv,z,W,e,I,B),!0;case"mouseover":return av=o0(av,z,W,e,I,B),!0;case"pointerover":var u=B.pointerId;return n0.set(u,o0(n0.get(u)||null,z,W,e,I,B)),!0;case"gotpointercapture":return u=B.pointerId,a0.set(u,o0(a0.get(u)||null,z,W,e,I,B)),!0}return!1}function wA(z){var W=Gv(z.target);if(W!==null){var e=Vv(W);if(e!==null){if(W=e.tag,W===13){if(W=vw(e),W!==null){z.blockedOn=W,xw(z.lanePriority,function(){_u.unstable_runWithPriority(z.priority,function(){mw(e)})});return}}else if(W===3&&e.stateNode.hydrate){z.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}z.blockedOn=null}function cy(z){if(z.blockedOn!==null)return!1;for(var W=z.targetContainers;0<W.length;){var e=vb(z.domEventName,z.eventSystemFlags,W[0],z.nativeEvent);if(e!==null)return W=m0(e),W!==null&&ib(W),z.blockedOn=e,!1;W.shift()}return!0}function ww(z,W,e){cy(z)&&e.delete(W)}function TA(){for(ob=!1;0<Qc.length;){var z=Qc[0];if(z.blockedOn!==null){z=m0(z.blockedOn),z!==null&&yw(z);break}for(var W=z.targetContainers;0<W.length;){var e=vb(z.domEventName,z.eventSystemFlags,W[0],z.nativeEvent);if(e!==null){z.blockedOn=e;break}W.shift()}z.blockedOn===null&&Qc.shift()}rv!==null&&cy(rv)&&(rv=null),nv!==null&&cy(nv)&&(nv=null),av!==null&&cy(av)&&(av=null),n0.forEach(ww),a0.forEach(ww)}function s0(z,W){z.blockedOn===W&&(z.blockedOn=null,ob||(ob=!0,_u.unstable_scheduleCallback(_u.unstable_NormalPriority,TA)))}function Tw(z){function W(B){return s0(B,z)}if(0<Qc.length){s0(Qc[0],z);for(var e=1;e<Qc.length;e++){var I=Qc[e];I.blockedOn===z&&(I.blockedOn=null)}}for(rv!==null&&s0(rv,z),nv!==null&&s0(nv,z),av!==null&&s0(av,z),n0.forEach(W),a0.forEach(W),e=0;e<i0.length;e++)I=i0[e],I.blockedOn===z&&(I.blockedOn=null);for(;0<i0.length&&(e=i0[0],e.blockedOn===null);)wA(e),e.blockedOn===null&&i0.shift()}function hy(z,W){var e={};return e[z.toLowerCase()]=W.toLowerCase(),e["Webkit"+z]="webkit"+W,e["Moz"+z]="moz"+W,e}var Fp={animationend:hy("Animation","AnimationEnd"),animationiteration:hy("Animation","AnimationIteration"),animationstart:hy("Animation","AnimationStart"),transitionend:hy("Transition","TransitionEnd")},lb={},Aw={};_h&&(Aw=document.createElement("div").style,"AnimationEvent"in window||(delete Fp.animationend.animation,delete Fp.animationiteration.animation,delete Fp.animationstart.animation),"TransitionEvent"in window||delete Fp.transitionend.transition);function vy(z){if(lb[z])return lb[z];if(!Fp[z])return z;var W=Fp[z],e;for(e in W)if(W.hasOwnProperty(e)&&e in Aw)return lb[z]=W[e];return z}var Mw=vy("animationend"),Sw=vy("animationiteration"),kw=vy("animationstart"),Ew=vy("transitionend"),Cw=new Map,ub=new Map,AA=["abort","abort",Mw,"animationEnd",Sw,"animationIteration",kw,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ew,"transitionEnd","waiting","waiting"];function fb(z,W){for(var e=0;e<z.length;e+=2){var I=z[e],B=z[e+1];B="on"+(B[0].toUpperCase()+B.slice(1)),ub.set(I,W),Cw.set(I,B),Nv(B,[I])}}var MA=_u.unstable_now;MA();var ks=8;function Op(z){if((1&z)!=0)return ks=15,1;if((2&z)!=0)return ks=14,2;if((4&z)!=0)return ks=13,4;var W=24&z;return W!==0?(ks=12,W):(z&32)!=0?(ks=11,32):(W=192&z,W!==0?(ks=10,W):(z&256)!=0?(ks=9,256):(W=3584&z,W!==0?(ks=8,W):(z&4096)!=0?(ks=7,4096):(W=4186112&z,W!==0?(ks=6,W):(W=62914560&z,W!==0?(ks=5,W):z&67108864?(ks=4,67108864):(z&134217728)!=0?(ks=3,134217728):(W=805306368&z,W!==0?(ks=2,W):(1073741824&z)!=0?(ks=1,1073741824):(ks=8,z))))))}function SA(z){switch(z){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function kA(z){switch(z){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ka(358,z))}}function l0(z,W){var e=z.pendingLanes;if(e===0)return ks=0;var I=0,B=0,u=z.expiredLanes,s=z.suspendedLanes,m=z.pingedLanes;if(u!==0)I=u,B=ks=15;else if(u=e&134217727,u!==0){var x=u&~s;x!==0?(I=Op(x),B=ks):(m&=u,m!==0&&(I=Op(m),B=ks))}else u=e&~s,u!==0?(I=Op(u),B=ks):m!==0&&(I=Op(m),B=ks);if(I===0)return 0;if(I=31-iv(I),I=e&((0>I?0:1<<I)<<1)-1,W!==0&&W!==I&&(W&s)==0){if(Op(W),B<=ks)return W;ks=B}if(W=z.entangledLanes,W!==0)for(z=z.entanglements,W&=I;0<W;)e=31-iv(W),B=1<<e,I|=z[e],W&=~B;return I}function Lw(z){return z=z.pendingLanes&-1073741825,z!==0?z:z&1073741824?1073741824:0}function py(z,W){switch(z){case 15:return 1;case 14:return 2;case 12:return z=Np(24&~W),z===0?py(10,W):z;case 10:return z=Np(192&~W),z===0?py(8,W):z;case 8:return z=Np(3584&~W),z===0&&(z=Np(4186112&~W),z===0&&(z=512)),z;case 2:return W=Np(805306368&~W),W===0&&(W=268435456),W}throw Error(Ka(358,z))}function Np(z){return z&-z}function cb(z){for(var W=[],e=0;31>e;e++)W.push(z);return W}function dy(z,W,e){z.pendingLanes|=W;var I=W-1;z.suspendedLanes&=I,z.pingedLanes&=I,z=z.eventTimes,W=31-iv(W),z[W]=e}var iv=Math.clz32?Math.clz32:LA,EA=Math.log,CA=Math.LN2;function LA(z){return z===0?32:31-(EA(z)/CA|0)|0}var PA=_u.unstable_UserBlockingPriority,RA=_u.unstable_runWithPriority,gy=!0;function DA(z,W,e,I){Hv||eb();var B=hb,u=Hv;Hv=!0;try{cw(B,z,W,e,I)}finally{(Hv=u)||rb()}}function IA(z,W,e,I){RA(PA,hb.bind(null,z,W,e,I))}function hb(z,W,e,I){if(gy){var B;if((B=(W&4)==0)&&0<Qc.length&&-1<bw.indexOf(z))z=sb(null,z,W,e,I),Qc.push(z);else{var u=vb(z,W,e,I);if(u===null)B&&_w(z,I);else{if(B){if(-1<bw.indexOf(z)){z=sb(u,z,W,e,I),Qc.push(z);return}if(_A(u,z,W,e,I))return;_w(z,I)}o3(z,W,I,null,e)}}}}function vb(z,W,e,I){var B=Qx(I);if(B=Gv(B),B!==null){var u=Vv(B);if(u===null)B=null;else{var s=u.tag;if(s===13){if(B=vw(u),B!==null)return B;B=null}else if(s===3){if(u.stateNode.hydrate)return u.tag===3?u.stateNode.containerInfo:null;B=null}else u!==B&&(B=null)}}return o3(z,W,I,B,e),null}var ov=null,pb=null,yy=null;function Pw(){if(yy)return yy;var z,W=pb,e=W.length,I,B="value"in ov?ov.value:ov.textContent,u=B.length;for(z=0;z<e&&W[z]===B[z];z++);var s=e-z;for(I=1;I<=s&&W[e-I]===B[u-I];I++);return yy=B.slice(z,1<I?1-I:void 0)}function my(z){var W=z.keyCode;return"charCode"in z?(z=z.charCode,z===0&&W===13&&(z=13)):z=W,z===10&&(z=13),32<=z||z===13?z:0}function xy(){return!0}function Rw(){return!1}function nc(z){function W(e,I,B,u,s){this._reactName=e,this._targetInst=B,this.type=I,this.nativeEvent=u,this.target=s,this.currentTarget=null;for(var m in z)z.hasOwnProperty(m)&&(e=z[m],this[m]=e?e(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?xy:Rw,this.isPropagationStopped=Rw,this}return Ys(W.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=xy)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=xy)},persist:function(){},isPersistent:xy}),W}var Bp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(z){return z.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},db=nc(Bp),u0=Ys({},Bp,{view:0,detail:0}),zA=nc(u0),gb,yb,f0,by=Ys({},u0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xb,button:0,buttons:0,relatedTarget:function(z){return z.relatedTarget===void 0?z.fromElement===z.srcElement?z.toElement:z.fromElement:z.relatedTarget},movementX:function(z){return"movementX"in z?z.movementX:(z!==f0&&(f0&&z.type==="mousemove"?(gb=z.screenX-f0.screenX,yb=z.screenY-f0.screenY):yb=gb=0,f0=z),gb)},movementY:function(z){return"movementY"in z?z.movementY:yb}}),Dw=nc(by),FA=Ys({},by,{dataTransfer:0}),OA=nc(FA),NA=Ys({},u0,{relatedTarget:0}),mb=nc(NA),BA=Ys({},Bp,{animationName:0,elapsedTime:0,pseudoElement:0}),UA=nc(BA),HA=Ys({},Bp,{clipboardData:function(z){return"clipboardData"in z?z.clipboardData:window.clipboardData}}),VA=nc(HA),GA=Ys({},Bp,{data:0}),Iw=nc(GA),WA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZA(z){var W=this.nativeEvent;return W.getModifierState?W.getModifierState(z):(z=XA[z])?!!W[z]:!1}function xb(){return ZA}var jA=Ys({},u0,{key:function(z){if(z.key){var W=WA[z.key]||z.key;if(W!=="Unidentified")return W}return z.type==="keypress"?(z=my(z),z===13?"Enter":String.fromCharCode(z)):z.type==="keydown"||z.type==="keyup"?YA[z.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xb,charCode:function(z){return z.type==="keypress"?my(z):0},keyCode:function(z){return z.type==="keydown"||z.type==="keyup"?z.keyCode:0},which:function(z){return z.type==="keypress"?my(z):z.type==="keydown"||z.type==="keyup"?z.keyCode:0}}),KA=nc(jA),JA=Ys({},by,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zw=nc(JA),QA=Ys({},u0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xb}),$A=nc(QA),qA=Ys({},Bp,{propertyName:0,elapsedTime:0,pseudoElement:0}),eM=nc(qA),tM=Ys({},by,{deltaX:function(z){return"deltaX"in z?z.deltaX:"wheelDeltaX"in z?-z.wheelDeltaX:0},deltaY:function(z){return"deltaY"in z?z.deltaY:"wheelDeltaY"in z?-z.wheelDeltaY:"wheelDelta"in z?-z.wheelDelta:0},deltaZ:0,deltaMode:0}),rM=nc(tM),nM=[9,13,27,32],bb=_h&&"CompositionEvent"in window,c0=null;_h&&"documentMode"in document&&(c0=document.documentMode);var aM=_h&&"TextEvent"in window&&!c0,Fw=_h&&(!bb||c0&&8<c0&&11>=c0),Ow=String.fromCharCode(32),Nw=!1;function Bw(z,W){switch(z){case"keyup":return nM.indexOf(W.keyCode)!==-1;case"keydown":return W.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uw(z){return z=z.detail,typeof z=="object"&&"data"in z?z.data:null}var Up=!1;function iM(z,W){switch(z){case"compositionend":return Uw(W);case"keypress":return W.which!==32?null:(Nw=!0,Ow);case"textInput":return z=W.data,z===Ow&&Nw?null:z;default:return null}}function oM(z,W){if(Up)return z==="compositionend"||!bb&&Bw(z,W)?(z=Pw(),yy=pb=ov=null,Up=!1,z):null;switch(z){case"paste":return null;case"keypress":if(!(W.ctrlKey||W.altKey||W.metaKey)||W.ctrlKey&&W.altKey){if(W.char&&1<W.char.length)return W.char;if(W.which)return String.fromCharCode(W.which)}return null;case"compositionend":return Fw&&W.locale!=="ko"?null:W.data;default:return null}}var sM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hw(z){var W=z&&z.nodeName&&z.nodeName.toLowerCase();return W==="input"?!!sM[z.type]:W==="textarea"}function Vw(z,W,e,I){uw(I),W=wy(W,"onChange"),0<W.length&&(e=new db("onChange","change",null,e,I),z.push({event:e,listeners:W}))}var h0=null,v0=null;function lM(z){t3(z,0)}function _y(z){var W=Yp(z);if(Q_(W))return z}function uM(z,W){if(z==="change")return W}var Gw=!1;if(_h){var _b;if(_h){var wb="oninput"in document;if(!wb){var Ww=document.createElement("div");Ww.setAttribute("oninput","return;"),wb=typeof Ww.oninput=="function"}_b=wb}else _b=!1;Gw=_b&&(!document.documentMode||9<document.documentMode)}function Yw(){h0&&(h0.detachEvent("onpropertychange",Xw),v0=h0=null)}function Xw(z){if(z.propertyName==="value"&&_y(v0)){var W=[];if(Vw(W,v0,z,Qx(z)),z=lM,Hv)z(W);else{Hv=!0;try{qx(z,W)}finally{Hv=!1,rb()}}}}function fM(z,W,e){z==="focusin"?(Yw(),h0=W,v0=e,h0.attachEvent("onpropertychange",Xw)):z==="focusout"&&Yw()}function cM(z){if(z==="selectionchange"||z==="keyup"||z==="keydown")return _y(v0)}function hM(z,W){if(z==="click")return _y(W)}function vM(z,W){if(z==="input"||z==="change")return _y(W)}function pM(z,W){return z===W&&(z!==0||1/z==1/W)||z!==z&&W!==W}var Tc=typeof Object.is=="function"?Object.is:pM,dM=Object.prototype.hasOwnProperty;function p0(z,W){if(Tc(z,W))return!0;if(typeof z!="object"||z===null||typeof W!="object"||W===null)return!1;var e=Object.keys(z),I=Object.keys(W);if(e.length!==I.length)return!1;for(I=0;I<e.length;I++)if(!dM.call(W,e[I])||!Tc(z[e[I]],W[e[I]]))return!1;return!0}function Zw(z){for(;z&&z.firstChild;)z=z.firstChild;return z}function jw(z,W){var e=Zw(z);z=0;for(var I;e;){if(e.nodeType===3){if(I=z+e.textContent.length,z<=W&&I>=W)return{node:e,offset:W-z};z=I}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=Zw(e)}}function Kw(z,W){return z&&W?z===W?!0:z&&z.nodeType===3?!1:W&&W.nodeType===3?Kw(z,W.parentNode):"contains"in z?z.contains(W):z.compareDocumentPosition?!!(z.compareDocumentPosition(W)&16):!1:!1}function Jw(){for(var z=window,W=sy();W instanceof z.HTMLIFrameElement;){try{var e=typeof W.contentWindow.location.href=="string"}catch{e=!1}if(e)z=W.contentWindow;else break;W=sy(z.document)}return W}function Tb(z){var W=z&&z.nodeName&&z.nodeName.toLowerCase();return W&&(W==="input"&&(z.type==="text"||z.type==="search"||z.type==="tel"||z.type==="url"||z.type==="password")||W==="textarea"||z.contentEditable==="true")}var gM=_h&&"documentMode"in document&&11>=document.documentMode,Hp=null,Ab=null,d0=null,Mb=!1;function Qw(z,W,e){var I=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Mb||Hp==null||Hp!==sy(I)||(I=Hp,"selectionStart"in I&&Tb(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),d0&&p0(d0,I)||(d0=I,I=wy(Ab,"onSelect"),0<I.length&&(W=new db("onSelect","select",null,W,e),z.push({event:W,listeners:I}),W.target=Hp)))}fb("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);fb("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);fb(AA,2);for(var $w="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sb=0;Sb<$w.length;Sb++)ub.set($w[Sb],0);Pp("onMouseEnter",["mouseout","mouseover"]);Pp("onMouseLeave",["mouseout","mouseover"]);Pp("onPointerEnter",["pointerout","pointerover"]);Pp("onPointerLeave",["pointerout","pointerover"]);Nv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var g0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("cancel close invalid load scroll toggle".split(" ").concat(g0));function e3(z,W,e){var I=z.type||"unknown-event";z.currentTarget=e,xA(I,W,void 0,z),z.currentTarget=null}function t3(z,W){W=(W&4)!=0;for(var e=0;e<z.length;e++){var I=z[e],B=I.event;I=I.listeners;e:{var u=void 0;if(W)for(var s=I.length-1;0<=s;s--){var m=I[s],x=m.instance,t=m.currentTarget;if(m=m.listener,x!==u&&B.isPropagationStopped())break e;e3(B,m,t),u=x}else for(s=0;s<I.length;s++){if(m=I[s],x=m.instance,t=m.currentTarget,m=m.listener,x!==u&&B.isPropagationStopped())break e;e3(B,m,t),u=x}}}if(fy)throw z=ab,fy=!1,ab=null,z}function Bs(z,W){var e=h3(W),I=z+"__bubble";e.has(I)||(i3(W,z,2,!1),e.add(I))}var r3="_reactListening"+Math.random().toString(36).slice(2);function n3(z){z[r3]||(z[r3]=!0,W_.forEach(function(W){qw.has(W)||a3(W,!1,z,null),a3(W,!0,z,null)}))}function a3(z,W,e,I){var B=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,u=e;if(z==="selectionchange"&&e.nodeType!==9&&(u=e.ownerDocument),I!==null&&!W&&qw.has(z)){if(z!=="scroll")return;B|=2,u=I}var s=h3(u),m=z+"__"+(W?"capture":"bubble");s.has(m)||(W&&(B|=4),i3(u,z,B,W),s.add(m))}function i3(z,W,e,I){var B=ub.get(W);switch(B===void 0?2:B){case 0:B=DA;break;case 1:B=IA;break;default:B=hb}e=B.bind(null,W,e,z),B=void 0,!nb||W!=="touchstart"&&W!=="touchmove"&&W!=="wheel"||(B=!0),I?B!==void 0?z.addEventListener(W,e,{capture:!0,passive:B}):z.addEventListener(W,e,!0):B!==void 0?z.addEventListener(W,e,{passive:B}):z.addEventListener(W,e,!1)}function o3(z,W,e,I,B){var u=I;if((W&1)==0&&(W&2)==0&&I!==null)e:for(;;){if(I===null)return;var s=I.tag;if(s===3||s===4){var m=I.stateNode.containerInfo;if(m===B||m.nodeType===8&&m.parentNode===B)break;if(s===4)for(s=I.return;s!==null;){var x=s.tag;if((x===3||x===4)&&(x=s.stateNode.containerInfo,x===B||x.nodeType===8&&x.parentNode===B))return;s=s.return}for(;m!==null;){if(s=Gv(m),s===null)return;if(x=s.tag,x===5||x===6){I=u=s;continue e}m=m.parentNode}}I=I.return}dA(function(){var t=u,i=Qx(e),a=[];e:{var r=Cw.get(z);if(r!==void 0){var n=db,f=z;switch(z){case"keypress":if(my(e)===0)break e;case"keydown":case"keyup":n=KA;break;case"focusin":f="focus",n=mb;break;case"focusout":f="blur",n=mb;break;case"beforeblur":case"afterblur":n=mb;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":n=Dw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":n=OA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":n=$A;break;case Mw:case Sw:case kw:n=UA;break;case Ew:n=eM;break;case"scroll":n=zA;break;case"wheel":n=rM;break;case"copy":case"cut":case"paste":n=VA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":n=zw}var l=(W&4)!=0,o=!l&&z==="scroll",c=l?r!==null?r+"Capture":null:r;l=[];for(var v=t,d;v!==null;){d=v;var p=d.stateNode;if(d.tag===5&&p!==null&&(d=p,c!==null&&(p=e0(v,c),p!=null&&l.push(y0(v,p,d)))),o)break;v=v.return}0<l.length&&(r=new n(r,f,null,e,i),a.push({event:r,listeners:l}))}}if((W&7)==0){e:{if(r=z==="mouseover"||z==="pointerover",n=z==="mouseout"||z==="pointerout",r&&(W&16)==0&&(f=e.relatedTarget||e.fromElement)&&(Gv(f)||f[Wp]))break e;if((n||r)&&(r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window,n?(f=e.relatedTarget||e.toElement,n=t,f=f?Gv(f):null,f!==null&&(o=Vv(f),f!==o||f.tag!==5&&f.tag!==6)&&(f=null)):(n=null,f=t),n!==f)){if(l=Dw,p="onMouseLeave",c="onMouseEnter",v="mouse",(z==="pointerout"||z==="pointerover")&&(l=zw,p="onPointerLeave",c="onPointerEnter",v="pointer"),o=n==null?r:Yp(n),d=f==null?r:Yp(f),r=new l(p,v+"leave",n,e,i),r.target=o,r.relatedTarget=d,p=null,Gv(i)===t&&(l=new l(c,v+"enter",f,e,i),l.target=d,l.relatedTarget=o,p=l),o=p,n&&f)t:{for(l=n,c=f,v=0,d=l;d;d=Vp(d))v++;for(d=0,p=c;p;p=Vp(p))d++;for(;0<v-d;)l=Vp(l),v--;for(;0<d-v;)c=Vp(c),d--;for(;v--;){if(l===c||c!==null&&l===c.alternate)break t;l=Vp(l),c=Vp(c)}l=null}else l=null;n!==null&&s3(a,r,n,l,!1),f!==null&&o!==null&&s3(a,o,f,l,!0)}}e:{if(r=t?Yp(t):window,n=r.nodeName&&r.nodeName.toLowerCase(),n==="select"||n==="input"&&r.type==="file")var y=uM;else if(Hw(r))if(Gw)y=vM;else{y=cM;var g=fM}else(n=r.nodeName)&&n.toLowerCase()==="input"&&(r.type==="checkbox"||r.type==="radio")&&(y=hM);if(y&&(y=y(z,t))){Vw(a,y,e,i);break e}g&&g(z,r,t),z==="focusout"&&(g=r._wrapperState)&&g.controlled&&r.type==="number"&&Wx(r,"number",r.value)}switch(g=t?Yp(t):window,z){case"focusin":(Hw(g)||g.contentEditable==="true")&&(Hp=g,Ab=t,d0=null);break;case"focusout":d0=Ab=Hp=null;break;case"mousedown":Mb=!0;break;case"contextmenu":case"mouseup":case"dragend":Mb=!1,Qw(a,e,i);break;case"selectionchange":if(gM)break;case"keydown":case"keyup":Qw(a,e,i)}var A;if(bb)e:{switch(z){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Up?Bw(z,e)&&(b="onCompositionEnd"):z==="keydown"&&e.keyCode===229&&(b="onCompositionStart");b&&(Fw&&e.locale!=="ko"&&(Up||b!=="onCompositionStart"?b==="onCompositionEnd"&&Up&&(A=Pw()):(ov=i,pb="value"in ov?ov.value:ov.textContent,Up=!0)),g=wy(t,b),0<g.length&&(b=new Iw(b,z,null,e,i),a.push({event:b,listeners:g}),A?b.data=A:(A=Uw(e),A!==null&&(b.data=A)))),(A=aM?iM(z,e):oM(z,e))&&(t=wy(t,"onBeforeInput"),0<t.length&&(i=new Iw("onBeforeInput","beforeinput",null,e,i),a.push({event:i,listeners:t}),i.data=A))}t3(a,W)})}function y0(z,W,e){return{instance:z,listener:W,currentTarget:e}}function wy(z,W){for(var e=W+"Capture",I=[];z!==null;){var B=z,u=B.stateNode;B.tag===5&&u!==null&&(B=u,u=e0(z,e),u!=null&&I.unshift(y0(z,u,B)),u=e0(z,W),u!=null&&I.push(y0(z,u,B))),z=z.return}return I}function Vp(z){if(z===null)return null;do z=z.return;while(z&&z.tag!==5);return z||null}function s3(z,W,e,I,B){for(var u=W._reactName,s=[];e!==null&&e!==I;){var m=e,x=m.alternate,t=m.stateNode;if(x!==null&&x===I)break;m.tag===5&&t!==null&&(m=t,B?(x=e0(e,u),x!=null&&s.unshift(y0(e,x,m))):B||(x=e0(e,u),x!=null&&s.push(y0(e,x,m)))),e=e.return}s.length!==0&&z.push({event:W,listeners:s})}function Ty(){}var kb=null,Eb=null;function l3(z,W){switch(z){case"button":case"input":case"select":case"textarea":return!!W.autoFocus}return!1}function Cb(z,W){return z==="textarea"||z==="option"||z==="noscript"||typeof W.children=="string"||typeof W.children=="number"||typeof W.dangerouslySetInnerHTML=="object"&&W.dangerouslySetInnerHTML!==null&&W.dangerouslySetInnerHTML.__html!=null}var u3=typeof setTimeout=="function"?setTimeout:void 0,yM=typeof clearTimeout=="function"?clearTimeout:void 0;function Lb(z){z.nodeType===1?z.textContent="":z.nodeType===9&&(z=z.body,z!=null&&(z.textContent=""))}function Gp(z){for(;z!=null;z=z.nextSibling){var W=z.nodeType;if(W===1||W===3)break}return z}function f3(z){z=z.previousSibling;for(var W=0;z;){if(z.nodeType===8){var e=z.data;if(e==="$"||e==="$!"||e==="$?"){if(W===0)return z;W--}else e==="/$"&&W++}z=z.previousSibling}return null}var Pb=0;function mM(z){return{$$typeof:Ox,toString:z,valueOf:z}}var Ay=Math.random().toString(36).slice(2),sv="__reactFiber$"+Ay,My="__reactProps$"+Ay,Wp="__reactContainer$"+Ay,c3="__reactEvents$"+Ay;function Gv(z){var W=z[sv];if(W)return W;for(var e=z.parentNode;e;){if(W=e[Wp]||e[sv]){if(e=W.alternate,W.child!==null||e!==null&&e.child!==null)for(z=f3(z);z!==null;){if(e=z[sv])return e;z=f3(z)}return W}z=e,e=z.parentNode}return null}function m0(z){return z=z[sv]||z[Wp],!z||z.tag!==5&&z.tag!==6&&z.tag!==13&&z.tag!==3?null:z}function Yp(z){if(z.tag===5||z.tag===6)return z.stateNode;throw Error(Ka(33))}function Sy(z){return z[My]||null}function h3(z){var W=z[c3];return W===void 0&&(W=z[c3]=new Set),W}var Rb=[],Xp=-1;function lv(z){return{current:z}}function Us(z){0>Xp||(z.current=Rb[Xp],Rb[Xp]=null,Xp--)}function ul(z,W){Xp++,Rb[Xp]=z.current,z.current=W}var uv={},Ku=lv(uv),Cf=lv(!1),Wv=uv;function Zp(z,W){var e=z.type.contextTypes;if(!e)return uv;var I=z.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===W)return I.__reactInternalMemoizedMaskedChildContext;var B={},u;for(u in e)B[u]=W[u];return I&&(z=z.stateNode,z.__reactInternalMemoizedUnmaskedChildContext=W,z.__reactInternalMemoizedMaskedChildContext=B),B}function Lf(z){return z=z.childContextTypes,z!=null}function ky(){Us(Cf),Us(Ku)}function v3(z,W,e){if(Ku.current!==uv)throw Error(Ka(168));ul(Ku,W),ul(Cf,e)}function p3(z,W,e){var I=z.stateNode;if(z=W.childContextTypes,typeof I.getChildContext!="function")return e;I=I.getChildContext();for(var B in I)if(!(B in z))throw Error(Ka(108,Rp(W)||"Unknown",B));return Ys({},e,I)}function Ey(z){return z=(z=z.stateNode)&&z.__reactInternalMemoizedMergedChildContext||uv,Wv=Ku.current,ul(Ku,z),ul(Cf,Cf.current),!0}function d3(z,W,e){var I=z.stateNode;if(!I)throw Error(Ka(169));e?(z=p3(z,W,Wv),I.__reactInternalMemoizedMergedChildContext=z,Us(Cf),Us(Ku),ul(Ku,z)):Us(Cf),ul(Cf,e)}var Db=null,Yv=null,xM=_u.unstable_runWithPriority,Ib=_u.unstable_scheduleCallback,zb=_u.unstable_cancelCallback,bM=_u.unstable_shouldYield,g3=_u.unstable_requestPaint,Fb=_u.unstable_now,_M=_u.unstable_getCurrentPriorityLevel,Cy=_u.unstable_ImmediatePriority,y3=_u.unstable_UserBlockingPriority,m3=_u.unstable_NormalPriority,x3=_u.unstable_LowPriority,b3=_u.unstable_IdlePriority,Ob={},wM=g3!==void 0?g3:function(){},wh=null,Ly=null,Nb=!1,_3=Fb(),Ju=1e4>_3?Fb:function(){return Fb()-_3};function jp(){switch(_M()){case Cy:return 99;case y3:return 98;case m3:return 97;case x3:return 96;case b3:return 95;default:throw Error(Ka(332))}}function w3(z){switch(z){case 99:return Cy;case 98:return y3;case 97:return m3;case 96:return x3;case 95:return b3;default:throw Error(Ka(332))}}function Xv(z,W){return z=w3(z),xM(z,W)}function x0(z,W,e){return z=w3(z),Ib(z,W,e)}function $c(){if(Ly!==null){var z=Ly;Ly=null,zb(z)}T3()}function T3(){if(!Nb&&wh!==null){Nb=!0;var z=0;try{var W=wh;Xv(99,function(){for(;z<W.length;z++){var e=W[z];do e=e(!0);while(e!==null)}}),wh=null}catch(e){throw wh!==null&&(wh=wh.slice(z+1)),Ib(Cy,$c),e}finally{Nb=!1}}}var TM=Bv.ReactCurrentBatchConfig;function Nc(z,W){if(z&&z.defaultProps){W=Ys({},W),z=z.defaultProps;for(var e in z)W[e]===void 0&&(W[e]=z[e]);return W}return W}var Py=lv(null),Ry=null,Kp=null,Dy=null;function Bb(){Dy=Kp=Ry=null}function Ub(z){var W=Py.current;Us(Py),z.type._context._currentValue=W}function A3(z,W){for(;z!==null;){var e=z.alternate;if((z.childLanes&W)===W){if(e===null||(e.childLanes&W)===W)break;e.childLanes|=W}else z.childLanes|=W,e!==null&&(e.childLanes|=W);z=z.return}}function Jp(z,W){Ry=z,Dy=Kp=null,z=z.dependencies,z!==null&&z.firstContext!==null&&((z.lanes&W)!=0&&(Bc=!0),z.firstContext=null)}function Ac(z,W){if(Dy!==z&&W!==!1&&W!==0)if((typeof W!="number"||W===1073741823)&&(Dy=z,W=1073741823),W={context:z,observedBits:W,next:null},Kp===null){if(Ry===null)throw Error(Ka(308));Kp=W,Ry.dependencies={lanes:0,firstContext:W,responders:null}}else Kp=Kp.next=W;return z._currentValue}var fv=!1;function Hb(z){z.updateQueue={baseState:z.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function M3(z,W){z=z.updateQueue,W.updateQueue===z&&(W.updateQueue={baseState:z.baseState,firstBaseUpdate:z.firstBaseUpdate,lastBaseUpdate:z.lastBaseUpdate,shared:z.shared,effects:z.effects})}function cv(z,W){return{eventTime:z,lane:W,tag:0,payload:null,callback:null,next:null}}function hv(z,W){if(z=z.updateQueue,z!==null){z=z.shared;var e=z.pending;e===null?W.next=W:(W.next=e.next,e.next=W),z.pending=W}}function S3(z,W){var e=z.updateQueue,I=z.alternate;if(I!==null&&(I=I.updateQueue,e===I)){var B=null,u=null;if(e=e.firstBaseUpdate,e!==null){do{var s={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};u===null?B=u=s:u=u.next=s,e=e.next}while(e!==null);u===null?B=u=W:u=u.next=W}else B=u=W;e={baseState:I.baseState,firstBaseUpdate:B,lastBaseUpdate:u,shared:I.shared,effects:I.effects},z.updateQueue=e;return}z=e.lastBaseUpdate,z===null?e.firstBaseUpdate=W:z.next=W,e.lastBaseUpdate=W}function b0(z,W,e,I){var B=z.updateQueue;fv=!1;var u=B.firstBaseUpdate,s=B.lastBaseUpdate,m=B.shared.pending;if(m!==null){B.shared.pending=null;var x=m,t=x.next;x.next=null,s===null?u=t:s.next=t,s=x;var i=z.alternate;if(i!==null){i=i.updateQueue;var a=i.lastBaseUpdate;a!==s&&(a===null?i.firstBaseUpdate=t:a.next=t,i.lastBaseUpdate=x)}}if(u!==null){a=B.baseState,s=0,i=t=x=null;do{m=u.lane;var r=u.eventTime;if((I&m)===m){i!==null&&(i=i.next={eventTime:r,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var n=z,f=u;switch(m=W,r=e,f.tag){case 1:if(n=f.payload,typeof n=="function"){a=n.call(r,a,m);break e}a=n;break e;case 3:n.flags=n.flags&-4097|64;case 0:if(n=f.payload,m=typeof n=="function"?n.call(r,a,m):n,m==null)break e;a=Ys({},a,m);break e;case 2:fv=!0}}u.callback!==null&&(z.flags|=32,m=B.effects,m===null?B.effects=[u]:m.push(u))}else r={eventTime:r,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},i===null?(t=i=r,x=a):i=i.next=r,s|=m;if(u=u.next,u===null){if(m=B.shared.pending,m===null)break;u=m.next,m.next=null,B.lastBaseUpdate=m,B.shared.pending=null}}while(1);i===null&&(x=a),B.baseState=x,B.firstBaseUpdate=t,B.lastBaseUpdate=i,R0|=s,z.lanes=s,z.memoizedState=a}}function k3(z,W,e){if(z=W.effects,W.effects=null,z!==null)for(W=0;W<z.length;W++){var I=z[W],B=I.callback;if(B!==null){if(I.callback=null,I=e,typeof B!="function")throw Error(Ka(191,B));B.call(I)}}}var E3=new ty.Component().refs;function Iy(z,W,e,I){W=z.memoizedState,e=e(I,W),e=e==null?W:Ys({},W,e),z.memoizedState=e,z.lanes===0&&(z.updateQueue.baseState=e)}var zy={isMounted:function(z){return(z=z._reactInternals)?Vv(z)===z:!1},enqueueSetState:function(z,W,e){z=z._reactInternals;var I=ac(),B=dv(z),u=cv(I,B);u.payload=W,e!=null&&(u.callback=e),hv(z,u),gv(z,B,I)},enqueueReplaceState:function(z,W,e){z=z._reactInternals;var I=ac(),B=dv(z),u=cv(I,B);u.tag=1,u.payload=W,e!=null&&(u.callback=e),hv(z,u),gv(z,B,I)},enqueueForceUpdate:function(z,W){z=z._reactInternals;var e=ac(),I=dv(z),B=cv(e,I);B.tag=2,W!=null&&(B.callback=W),hv(z,B),gv(z,I,e)}};function C3(z,W,e,I,B,u,s){return z=z.stateNode,typeof z.shouldComponentUpdate=="function"?z.shouldComponentUpdate(I,u,s):W.prototype&&W.prototype.isPureReactComponent?!p0(e,I)||!p0(B,u):!0}function L3(z,W,e){var I=!1,B=uv,u=W.contextType;return typeof u=="object"&&u!==null?u=Ac(u):(B=Lf(W)?Wv:Ku.current,I=W.contextTypes,u=(I=I!=null)?Zp(z,B):uv),W=new W(e,u),z.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,W.updater=zy,z.stateNode=W,W._reactInternals=z,I&&(z=z.stateNode,z.__reactInternalMemoizedUnmaskedChildContext=B,z.__reactInternalMemoizedMaskedChildContext=u),W}function P3(z,W,e,I){z=W.state,typeof W.componentWillReceiveProps=="function"&&W.componentWillReceiveProps(e,I),typeof W.UNSAFE_componentWillReceiveProps=="function"&&W.UNSAFE_componentWillReceiveProps(e,I),W.state!==z&&zy.enqueueReplaceState(W,W.state,null)}function Vb(z,W,e,I){var B=z.stateNode;B.props=e,B.state=z.memoizedState,B.refs=E3,Hb(z);var u=W.contextType;typeof u=="object"&&u!==null?B.context=Ac(u):(u=Lf(W)?Wv:Ku.current,B.context=Zp(z,u)),b0(z,e,B,I),B.state=z.memoizedState,u=W.getDerivedStateFromProps,typeof u=="function"&&(Iy(z,W,u,e),B.state=z.memoizedState),typeof W.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(W=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),W!==B.state&&zy.enqueueReplaceState(B,B.state,null),b0(z,e,B,I),B.state=z.memoizedState),typeof B.componentDidMount=="function"&&(z.flags|=4)}var Fy=Array.isArray;function _0(z,W,e){if(z=e.ref,z!==null&&typeof z!="function"&&typeof z!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(Ka(309));var I=e.stateNode}if(!I)throw Error(Ka(147,z));var B=""+z;return W!==null&&W.ref!==null&&typeof W.ref=="function"&&W.ref._stringRef===B?W.ref:(W=function(u){var s=I.refs;s===E3&&(s=I.refs={}),u===null?delete s[B]:s[B]=u},W._stringRef=B,W)}if(typeof z!="string")throw Error(Ka(284));if(!e._owner)throw Error(Ka(290,z))}return z}function Oy(z,W){if(z.type!=="textarea")throw Error(Ka(31,Object.prototype.toString.call(W)==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":W))}function R3(z){function W(o,c){if(z){var v=o.lastEffect;v!==null?(v.nextEffect=c,o.lastEffect=c):o.firstEffect=o.lastEffect=c,c.nextEffect=null,c.flags=8}}function e(o,c){if(!z)return null;for(;c!==null;)W(o,c),c=c.sibling;return null}function I(o,c){for(o=new Map;c!==null;)c.key!==null?o.set(c.key,c):o.set(c.index,c),c=c.sibling;return o}function B(o,c){return o=xv(o,c),o.index=0,o.sibling=null,o}function u(o,c,v){return o.index=v,z?(v=o.alternate,v!==null?(v=v.index,v<c?(o.flags=2,c):v):(o.flags=2,c)):c}function s(o){return z&&o.alternate===null&&(o.flags=2),o}function m(o,c,v,d){return c===null||c.tag!==6?(c=A2(v,o.mode,d),c.return=o,c):(c=B(c,v),c.return=o,c)}function x(o,c,v,d){return c!==null&&c.elementType===v.type?(d=B(c,v.props),d.ref=_0(o,c,v),d.return=o,d):(d=tm(v.type,v.key,v.props,null,o.mode,d),d.ref=_0(o,c,v),d.return=o,d)}function t(o,c,v,d){return c===null||c.tag!==4||c.stateNode.containerInfo!==v.containerInfo||c.stateNode.implementation!==v.implementation?(c=M2(v,o.mode,d),c.return=o,c):(c=B(c,v.children||[]),c.return=o,c)}function i(o,c,v,d,p){return c===null||c.tag!==7?(c=ad(v,o.mode,d,p),c.return=o,c):(c=B(c,v),c.return=o,c)}function a(o,c,v){if(typeof c=="string"||typeof c=="number")return c=A2(""+c,o.mode,v),c.return=o,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Zd:return v=tm(c.type,c.key,c.props,null,o.mode,v),v.ref=_0(o,null,c),v.return=o,v;case Uv:return c=M2(c,o.mode,v),c.return=o,c}if(Fy(c)||Jd(c))return c=ad(c,o.mode,v,null),c.return=o,c;Oy(o,c)}return null}function r(o,c,v,d){var p=c!==null?c.key:null;if(typeof v=="string"||typeof v=="number")return p!==null?null:m(o,c,""+v,d);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zd:return v.key===p?v.type===ev?i(o,c,v.props.children,d,p):x(o,c,v,d):null;case Uv:return v.key===p?t(o,c,v,d):null}if(Fy(v)||Jd(v))return p!==null?null:i(o,c,v,d,null);Oy(o,v)}return null}function n(o,c,v,d,p){if(typeof d=="string"||typeof d=="number")return o=o.get(v)||null,m(c,o,""+d,p);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Zd:return o=o.get(d.key===null?v:d.key)||null,d.type===ev?i(c,o,d.props.children,p,d.key):x(c,o,d,p);case Uv:return o=o.get(d.key===null?v:d.key)||null,t(c,o,d,p)}if(Fy(d)||Jd(d))return o=o.get(v)||null,i(c,o,d,p,null);Oy(c,d)}return null}function f(o,c,v,d){for(var p=null,y=null,g=c,A=c=0,b=null;g!==null&&A<v.length;A++){g.index>A?(b=g,g=null):b=g.sibling;var M=r(o,g,v[A],d);if(M===null){g===null&&(g=b);break}z&&g&&M.alternate===null&&W(o,g),c=u(M,c,A),y===null?p=M:y.sibling=M,y=M,g=b}if(A===v.length)return e(o,g),p;if(g===null){for(;A<v.length;A++)g=a(o,v[A],d),g!==null&&(c=u(g,c,A),y===null?p=g:y.sibling=g,y=g);return p}for(g=I(o,g);A<v.length;A++)b=n(g,o,A,v[A],d),b!==null&&(z&&b.alternate!==null&&g.delete(b.key===null?A:b.key),c=u(b,c,A),y===null?p=b:y.sibling=b,y=b);return z&&g.forEach(function(w){return W(o,w)}),p}function l(o,c,v,d){var p=Jd(v);if(typeof p!="function")throw Error(Ka(150));if(v=p.call(v),v==null)throw Error(Ka(151));for(var y=p=null,g=c,A=c=0,b=null,M=v.next();g!==null&&!M.done;A++,M=v.next()){g.index>A?(b=g,g=null):b=g.sibling;var w=r(o,g,M.value,d);if(w===null){g===null&&(g=b);break}z&&g&&w.alternate===null&&W(o,g),c=u(w,c,A),y===null?p=w:y.sibling=w,y=w,g=b}if(M.done)return e(o,g),p;if(g===null){for(;!M.done;A++,M=v.next())M=a(o,M.value,d),M!==null&&(c=u(M,c,A),y===null?p=M:y.sibling=M,y=M);return p}for(g=I(o,g);!M.done;A++,M=v.next())M=n(g,o,A,M.value,d),M!==null&&(z&&M.alternate!==null&&g.delete(M.key===null?A:M.key),c=u(M,c,A),y===null?p=M:y.sibling=M,y=M);return z&&g.forEach(function(T){return W(o,T)}),p}return function(o,c,v,d){var p=typeof v=="object"&&v!==null&&v.type===ev&&v.key===null;p&&(v=v.props.children);var y=typeof v=="object"&&v!==null;if(y)switch(v.$$typeof){case Zd:e:{for(y=v.key,p=c;p!==null;){if(p.key===y){switch(p.tag){case 7:if(v.type===ev){e(o,p.sibling),c=B(p,v.props.children),c.return=o,o=c;break e}break;default:if(p.elementType===v.type){e(o,p.sibling),c=B(p,v.props),c.ref=_0(o,p,v),c.return=o,o=c;break e}}e(o,p);break}else W(o,p);p=p.sibling}v.type===ev?(c=ad(v.props.children,o.mode,d,v.key),c.return=o,o=c):(d=tm(v.type,v.key,v.props,null,o.mode,d),d.ref=_0(o,c,v),d.return=o,o=d)}return s(o);case Uv:e:{for(p=v.key;c!==null;){if(c.key===p)if(c.tag===4&&c.stateNode.containerInfo===v.containerInfo&&c.stateNode.implementation===v.implementation){e(o,c.sibling),c=B(c,v.children||[]),c.return=o,o=c;break e}else{e(o,c);break}else W(o,c);c=c.sibling}c=M2(v,o.mode,d),c.return=o,o=c}return s(o)}if(typeof v=="string"||typeof v=="number")return v=""+v,c!==null&&c.tag===6?(e(o,c.sibling),c=B(c,v),c.return=o,o=c):(e(o,c),c=A2(v,o.mode,d),c.return=o,o=c),s(o);if(Fy(v))return f(o,c,v,d);if(Jd(v))return l(o,c,v,d);if(y&&Oy(o,v),typeof v=="undefined"&&!p)switch(o.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ka(152,Rp(o.type)||"Component"))}return e(o,c)}}var Ny=R3(!0),D3=R3(!1),w0={},qc=lv(w0),T0=lv(w0),A0=lv(w0);function Zv(z){if(z===w0)throw Error(Ka(174));return z}function Gb(z,W){switch(ul(A0,W),ul(T0,z),ul(qc,w0),z=W.nodeType,z){case 9:case 11:W=(W=W.documentElement)?W.namespaceURI:jx(null,"");break;default:z=z===8?W.parentNode:W,W=z.namespaceURI||null,z=z.tagName,W=jx(W,z)}Us(qc),ul(qc,W)}function Qp(){Us(qc),Us(T0),Us(A0)}function I3(z){Zv(A0.current);var W=Zv(qc.current),e=jx(W,z.type);W!==e&&(ul(T0,z),ul(qc,e))}function Wb(z){T0.current===z&&(Us(qc),Us(T0))}var fl=lv(0);function By(z){for(var W=z;W!==null;){if(W.tag===13){var e=W.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return W}else if(W.tag===19&&W.memoizedProps.revealOrder!==void 0){if((W.flags&64)!=0)return W}else if(W.child!==null){W.child.return=W,W=W.child;continue}if(W===z)break;for(;W.sibling===null;){if(W.return===null||W.return===z)return null;W=W.return}W.sibling.return=W.return,W=W.sibling}return null}var Th=null,vv=null,eh=!1;function z3(z,W){var e=kc(5,null,null,0);e.elementType="DELETED",e.type="DELETED",e.stateNode=W,e.return=z,e.flags=8,z.lastEffect!==null?(z.lastEffect.nextEffect=e,z.lastEffect=e):z.firstEffect=z.lastEffect=e}function F3(z,W){switch(z.tag){case 5:var e=z.type;return W=W.nodeType!==1||e.toLowerCase()!==W.nodeName.toLowerCase()?null:W,W!==null?(z.stateNode=W,!0):!1;case 6:return W=z.pendingProps===""||W.nodeType!==3?null:W,W!==null?(z.stateNode=W,!0):!1;case 13:return!1;default:return!1}}function Yb(z){if(eh){var W=vv;if(W){var e=W;if(!F3(z,W)){if(W=Gp(e.nextSibling),!W||!F3(z,W)){z.flags=z.flags&-1025|2,eh=!1,Th=z;return}z3(Th,e)}Th=z,vv=Gp(W.firstChild)}else z.flags=z.flags&-1025|2,eh=!1,Th=z}}function O3(z){for(z=z.return;z!==null&&z.tag!==5&&z.tag!==3&&z.tag!==13;)z=z.return;Th=z}function Uy(z){if(z!==Th)return!1;if(!eh)return O3(z),eh=!0,!1;var W=z.type;if(z.tag!==5||W!=="head"&&W!=="body"&&!Cb(W,z.memoizedProps))for(W=vv;W;)z3(z,W),W=Gp(W.nextSibling);if(O3(z),z.tag===13){if(z=z.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(Ka(317));e:{for(z=z.nextSibling,W=0;z;){if(z.nodeType===8){var e=z.data;if(e==="/$"){if(W===0){vv=Gp(z.nextSibling);break e}W--}else e!=="$"&&e!=="$!"&&e!=="$?"||W++}z=z.nextSibling}vv=null}}else vv=Th?Gp(z.stateNode.nextSibling):null;return!0}function Xb(){vv=Th=null,eh=!1}var $p=[];function Zb(){for(var z=0;z<$p.length;z++)$p[z]._workInProgressVersionPrimary=null;$p.length=0}var M0=Bv.ReactCurrentDispatcher,Mc=Bv.ReactCurrentBatchConfig,S0=0,Sl=null,Qu=null,Du=null,Hy=!1,k0=!1;function Pf(){throw Error(Ka(321))}function jb(z,W){if(W===null)return!1;for(var e=0;e<W.length&&e<z.length;e++)if(!Tc(z[e],W[e]))return!1;return!0}function Kb(z,W,e,I,B,u){if(S0=u,Sl=W,W.memoizedState=null,W.updateQueue=null,W.lanes=0,M0.current=z===null||z.memoizedState===null?MM:SM,z=e(I,B),k0){u=0;do{if(k0=!1,!(25>u))throw Error(Ka(301));u+=1,Du=Qu=null,W.updateQueue=null,M0.current=kM,z=e(I,B)}while(k0)}if(M0.current=Yy,W=Qu!==null&&Qu.next!==null,S0=0,Du=Qu=Sl=null,Hy=!1,W)throw Error(Ka(300));return z}function jv(){var z={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Du===null?Sl.memoizedState=Du=z:Du=Du.next=z,Du}function Kv(){if(Qu===null){var z=Sl.alternate;z=z!==null?z.memoizedState:null}else z=Qu.next;var W=Du===null?Sl.memoizedState:Du.next;if(W!==null)Du=W,Qu=z;else{if(z===null)throw Error(Ka(310));Qu=z,z={memoizedState:Qu.memoizedState,baseState:Qu.baseState,baseQueue:Qu.baseQueue,queue:Qu.queue,next:null},Du===null?Sl.memoizedState=Du=z:Du=Du.next=z}return Du}function th(z,W){return typeof W=="function"?W(z):W}function E0(z){var W=Kv(),e=W.queue;if(e===null)throw Error(Ka(311));e.lastRenderedReducer=z;var I=Qu,B=I.baseQueue,u=e.pending;if(u!==null){if(B!==null){var s=B.next;B.next=u.next,u.next=s}I.baseQueue=B=u,e.pending=null}if(B!==null){B=B.next,I=I.baseState;var m=s=u=null,x=B;do{var t=x.lane;if((S0&t)===t)m!==null&&(m=m.next={lane:0,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null}),I=x.eagerReducer===z?x.eagerState:z(I,x.action);else{var i={lane:t,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null};m===null?(s=m=i,u=I):m=m.next=i,Sl.lanes|=t,R0|=t}x=x.next}while(x!==null&&x!==B);m===null?u=I:m.next=s,Tc(I,W.memoizedState)||(Bc=!0),W.memoizedState=I,W.baseState=u,W.baseQueue=m,e.lastRenderedState=I}return[W.memoizedState,e.dispatch]}function C0(z){var W=Kv(),e=W.queue;if(e===null)throw Error(Ka(311));e.lastRenderedReducer=z;var I=e.dispatch,B=e.pending,u=W.memoizedState;if(B!==null){e.pending=null;var s=B=B.next;do u=z(u,s.action),s=s.next;while(s!==B);Tc(u,W.memoizedState)||(Bc=!0),W.memoizedState=u,W.baseQueue===null&&(W.baseState=u),e.lastRenderedState=u}return[u,I]}function N3(z,W,e){var I=W._getVersion;I=I(W._source);var B=W._workInProgressVersionPrimary;if(B!==null?z=B===I:(z=z.mutableReadLanes,(z=(S0&z)===z)&&(W._workInProgressVersionPrimary=I,$p.push(W))),z)return e(W._source);throw $p.push(W),Error(Ka(350))}function B3(z,W,e,I){var B=df;if(B===null)throw Error(Ka(349));var u=W._getVersion,s=u(W._source),m=M0.current,x=m.useState(function(){return N3(B,W,e)}),t=x[1],i=x[0];x=Du;var a=z.memoizedState,r=a.refs,n=r.getSnapshot,f=a.source;a=a.subscribe;var l=Sl;return z.memoizedState={refs:r,source:W,subscribe:I},m.useEffect(function(){r.getSnapshot=e,r.setSnapshot=t;var o=u(W._source);if(!Tc(s,o)){o=e(W._source),Tc(i,o)||(t(o),o=dv(l),B.mutableReadLanes|=o&B.pendingLanes),o=B.mutableReadLanes,B.entangledLanes|=o;for(var c=B.entanglements,v=o;0<v;){var d=31-iv(v),p=1<<d;c[d]|=o,v&=~p}}},[e,W,I]),m.useEffect(function(){return I(W._source,function(){var o=r.getSnapshot,c=r.setSnapshot;try{c(o(W._source));var v=dv(l);B.mutableReadLanes|=v&B.pendingLanes}catch(d){c(function(){throw d})}})},[W,I]),Tc(n,e)&&Tc(f,W)&&Tc(a,I)||(z={pending:null,dispatch:null,lastRenderedReducer:th,lastRenderedState:i},z.dispatch=t=qb.bind(null,Sl,z),x.queue=z,x.baseQueue=null,i=N3(B,W,e),x.memoizedState=x.baseState=i),i}function U3(z,W,e){var I=Kv();return B3(I,z,W,e)}function L0(z){var W=jv();return typeof z=="function"&&(z=z()),W.memoizedState=W.baseState=z,z=W.queue={pending:null,dispatch:null,lastRenderedReducer:th,lastRenderedState:z},z=z.dispatch=qb.bind(null,Sl,z),[W.memoizedState,z]}function Vy(z,W,e,I){return z={tag:z,create:W,destroy:e,deps:I,next:null},W=Sl.updateQueue,W===null?(W={lastEffect:null},Sl.updateQueue=W,W.lastEffect=z.next=z):(e=W.lastEffect,e===null?W.lastEffect=z.next=z:(I=e.next,e.next=z,z.next=I,W.lastEffect=z)),z}function H3(z){var W=jv();return z={current:z},W.memoizedState=z}function Gy(){return Kv().memoizedState}function Jb(z,W,e,I){var B=jv();Sl.flags|=z,B.memoizedState=Vy(1|W,e,void 0,I===void 0?null:I)}function Qb(z,W,e,I){var B=Kv();I=I===void 0?null:I;var u=void 0;if(Qu!==null){var s=Qu.memoizedState;if(u=s.destroy,I!==null&&jb(I,s.deps)){Vy(W,e,u,I);return}}Sl.flags|=z,B.memoizedState=Vy(1|W,e,u,I)}function V3(z,W){return Jb(516,4,z,W)}function Wy(z,W){return Qb(516,4,z,W)}function G3(z,W){return Qb(4,2,z,W)}function W3(z,W){if(typeof W=="function")return z=z(),W(z),function(){W(null)};if(W!=null)return z=z(),W.current=z,function(){W.current=null}}function Y3(z,W,e){return e=e!=null?e.concat([z]):null,Qb(4,2,W3.bind(null,W,z),e)}function $b(){}function X3(z,W){var e=Kv();W=W===void 0?null:W;var I=e.memoizedState;return I!==null&&W!==null&&jb(W,I[1])?I[0]:(e.memoizedState=[z,W],z)}function Z3(z,W){var e=Kv();W=W===void 0?null:W;var I=e.memoizedState;return I!==null&&W!==null&&jb(W,I[1])?I[0]:(z=z(),e.memoizedState=[z,W],z)}function AM(z,W){var e=jp();Xv(98>e?98:e,function(){z(!0)}),Xv(97<e?97:e,function(){var I=Mc.transition;Mc.transition=1;try{z(!1),W()}finally{Mc.transition=I}})}function qb(z,W,e){var I=ac(),B=dv(z),u={lane:B,action:e,eagerReducer:null,eagerState:null,next:null},s=W.pending;if(s===null?u.next=u:(u.next=s.next,s.next=u),W.pending=u,s=z.alternate,z===Sl||s!==null&&s===Sl)k0=Hy=!0;else{if(z.lanes===0&&(s===null||s.lanes===0)&&(s=W.lastRenderedReducer,s!==null))try{var m=W.lastRenderedState,x=s(m,e);if(u.eagerReducer=s,u.eagerState=x,Tc(x,m))return}catch{}finally{}gv(z,B,I)}}var Yy={readContext:Ac,useCallback:Pf,useContext:Pf,useEffect:Pf,useImperativeHandle:Pf,useLayoutEffect:Pf,useMemo:Pf,useReducer:Pf,useRef:Pf,useState:Pf,useDebugValue:Pf,useDeferredValue:Pf,useTransition:Pf,useMutableSource:Pf,useOpaqueIdentifier:Pf,unstable_isNewReconciler:!1},MM={readContext:Ac,useCallback:function(z,W){return jv().memoizedState=[z,W===void 0?null:W],z},useContext:Ac,useEffect:V3,useImperativeHandle:function(z,W,e){return e=e!=null?e.concat([z]):null,Jb(4,2,W3.bind(null,W,z),e)},useLayoutEffect:function(z,W){return Jb(4,2,z,W)},useMemo:function(z,W){var e=jv();return W=W===void 0?null:W,z=z(),e.memoizedState=[z,W],z},useReducer:function(z,W,e){var I=jv();return W=e!==void 0?e(W):W,I.memoizedState=I.baseState=W,z=I.queue={pending:null,dispatch:null,lastRenderedReducer:z,lastRenderedState:W},z=z.dispatch=qb.bind(null,Sl,z),[I.memoizedState,z]},useRef:H3,useState:L0,useDebugValue:$b,useDeferredValue:function(z){var W=L0(z),e=W[0],I=W[1];return V3(function(){var B=Mc.transition;Mc.transition=1;try{I(z)}finally{Mc.transition=B}},[z]),e},useTransition:function(){var z=L0(!1),W=z[0];return z=AM.bind(null,z[1]),H3(z),[z,W]},useMutableSource:function(z,W,e){var I=jv();return I.memoizedState={refs:{getSnapshot:W,setSnapshot:null},source:z,subscribe:e},B3(I,z,W,e)},useOpaqueIdentifier:function(){if(eh){var z=!1,W=mM(function(){throw z||(z=!0,e("r:"+(Pb++).toString(36))),Error(Ka(355))}),e=L0(W)[1];return(Sl.mode&2)==0&&(Sl.flags|=516,Vy(5,function(){e("r:"+(Pb++).toString(36))},void 0,null)),W}return W="r:"+(Pb++).toString(36),L0(W),W},unstable_isNewReconciler:!1},SM={readContext:Ac,useCallback:X3,useContext:Ac,useEffect:Wy,useImperativeHandle:Y3,useLayoutEffect:G3,useMemo:Z3,useReducer:E0,useRef:Gy,useState:function(){return E0(th)},useDebugValue:$b,useDeferredValue:function(z){var W=E0(th),e=W[0],I=W[1];return Wy(function(){var B=Mc.transition;Mc.transition=1;try{I(z)}finally{Mc.transition=B}},[z]),e},useTransition:function(){var z=E0(th)[0];return[Gy().current,z]},useMutableSource:U3,useOpaqueIdentifier:function(){return E0(th)[0]},unstable_isNewReconciler:!1},kM={readContext:Ac,useCallback:X3,useContext:Ac,useEffect:Wy,useImperativeHandle:Y3,useLayoutEffect:G3,useMemo:Z3,useReducer:C0,useRef:Gy,useState:function(){return C0(th)},useDebugValue:$b,useDeferredValue:function(z){var W=C0(th),e=W[0],I=W[1];return Wy(function(){var B=Mc.transition;Mc.transition=1;try{I(z)}finally{Mc.transition=B}},[z]),e},useTransition:function(){var z=C0(th)[0];return[Gy().current,z]},useMutableSource:U3,useOpaqueIdentifier:function(){return C0(th)[0]},unstable_isNewReconciler:!1},EM=Bv.ReactCurrentOwner,Bc=!1;function Rf(z,W,e,I){W.child=z===null?D3(W,null,e,I):Ny(W,z.child,e,I)}function j3(z,W,e,I,B){e=e.render;var u=W.ref;return Jp(W,B),I=Kb(z,W,e,I,u,B),z!==null&&!Bc?(W.updateQueue=z.updateQueue,W.flags&=-517,z.lanes&=~B,Ah(z,W,B)):(W.flags|=1,Rf(z,W,I,B),W.child)}function K3(z,W,e,I,B,u){if(z===null){var s=e.type;return typeof s=="function"&&!w2(s)&&s.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(W.tag=15,W.type=s,J3(z,W,s,I,B,u)):(z=tm(e.type,null,I,W,W.mode,u),z.ref=W.ref,z.return=W,W.child=z)}return s=z.child,(B&u)==0&&(B=s.memoizedProps,e=e.compare,e=e!==null?e:p0,e(B,I)&&z.ref===W.ref)?Ah(z,W,u):(W.flags|=1,z=xv(s,I),z.ref=W.ref,z.return=W,W.child=z)}function J3(z,W,e,I,B,u){if(z!==null&&p0(z.memoizedProps,I)&&z.ref===W.ref)if(Bc=!1,(u&B)!=0)(z.flags&16384)!=0&&(Bc=!0);else return W.lanes=z.lanes,Ah(z,W,u);return t2(z,W,e,I,u)}function e2(z,W,e){var I=W.pendingProps,B=I.children,u=z!==null?z.memoizedState:null;if(I.mode==="hidden"||I.mode==="unstable-defer-without-hiding")if((W.mode&4)==0)W.memoizedState={baseLanes:0},em(W,e);else if((e&1073741824)!=0)W.memoizedState={baseLanes:0},em(W,u!==null?u.baseLanes:e);else return z=u!==null?u.baseLanes|e:e,W.lanes=W.childLanes=1073741824,W.memoizedState={baseLanes:z},em(W,z),null;else u!==null?(I=u.baseLanes|e,W.memoizedState=null):I=e,em(W,I);return Rf(z,W,B,e),W.child}function Q3(z,W){var e=W.ref;(z===null&&e!==null||z!==null&&z.ref!==e)&&(W.flags|=128)}function t2(z,W,e,I,B){var u=Lf(e)?Wv:Ku.current;return u=Zp(W,u),Jp(W,B),e=Kb(z,W,e,I,u,B),z!==null&&!Bc?(W.updateQueue=z.updateQueue,W.flags&=-517,z.lanes&=~B,Ah(z,W,B)):(W.flags|=1,Rf(z,W,e,B),W.child)}function $3(z,W,e,I,B){if(Lf(e)){var u=!0;Ey(W)}else u=!1;if(Jp(W,B),W.stateNode===null)z!==null&&(z.alternate=null,W.alternate=null,W.flags|=2),L3(W,e,I),Vb(W,e,I,B),I=!0;else if(z===null){var s=W.stateNode,m=W.memoizedProps;s.props=m;var x=s.context,t=e.contextType;typeof t=="object"&&t!==null?t=Ac(t):(t=Lf(e)?Wv:Ku.current,t=Zp(W,t));var i=e.getDerivedStateFromProps,a=typeof i=="function"||typeof s.getSnapshotBeforeUpdate=="function";a||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(m!==I||x!==t)&&P3(W,s,I,t),fv=!1;var r=W.memoizedState;s.state=r,b0(W,I,s,B),x=W.memoizedState,m!==I||r!==x||Cf.current||fv?(typeof i=="function"&&(Iy(W,e,i,I),x=W.memoizedState),(m=fv||C3(W,e,m,I,r,x,t))?(a||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(W.flags|=4)):(typeof s.componentDidMount=="function"&&(W.flags|=4),W.memoizedProps=I,W.memoizedState=x),s.props=I,s.state=x,s.context=t,I=m):(typeof s.componentDidMount=="function"&&(W.flags|=4),I=!1)}else{s=W.stateNode,M3(z,W),m=W.memoizedProps,t=W.type===W.elementType?m:Nc(W.type,m),s.props=t,a=W.pendingProps,r=s.context,x=e.contextType,typeof x=="object"&&x!==null?x=Ac(x):(x=Lf(e)?Wv:Ku.current,x=Zp(W,x));var n=e.getDerivedStateFromProps;(i=typeof n=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(m!==a||r!==x)&&P3(W,s,I,x),fv=!1,r=W.memoizedState,s.state=r,b0(W,I,s,B);var f=W.memoizedState;m!==a||r!==f||Cf.current||fv?(typeof n=="function"&&(Iy(W,e,n,I),f=W.memoizedState),(t=fv||C3(W,e,t,I,r,f,x))?(i||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(I,f,x),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(I,f,x)),typeof s.componentDidUpdate=="function"&&(W.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(W.flags|=256)):(typeof s.componentDidUpdate!="function"||m===z.memoizedProps&&r===z.memoizedState||(W.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||m===z.memoizedProps&&r===z.memoizedState||(W.flags|=256),W.memoizedProps=I,W.memoizedState=f),s.props=I,s.state=f,s.context=x,I=t):(typeof s.componentDidUpdate!="function"||m===z.memoizedProps&&r===z.memoizedState||(W.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||m===z.memoizedProps&&r===z.memoizedState||(W.flags|=256),I=!1)}return r2(z,W,e,I,u,B)}function r2(z,W,e,I,B,u){Q3(z,W);var s=(W.flags&64)!=0;if(!I&&!s)return B&&d3(W,e,!1),Ah(z,W,u);I=W.stateNode,EM.current=W;var m=s&&typeof e.getDerivedStateFromError!="function"?null:I.render();return W.flags|=1,z!==null&&s?(W.child=Ny(W,z.child,null,u),W.child=Ny(W,null,m,u)):Rf(z,W,m,u),W.memoizedState=I.state,B&&d3(W,e,!0),W.child}function q3(z){var W=z.stateNode;W.pendingContext?v3(z,W.pendingContext,W.pendingContext!==W.context):W.context&&v3(z,W.context,!1),Gb(z,W.containerInfo)}var Xy={dehydrated:null,retryLane:0};function eT(z,W,e){var I=W.pendingProps,B=fl.current,u=!1,s;return(s=(W.flags&64)!=0)||(s=z!==null&&z.memoizedState===null?!1:(B&2)!=0),s?(u=!0,W.flags&=-65):z!==null&&z.memoizedState===null||I.fallback===void 0||I.unstable_avoidThisFallback===!0||(B|=1),ul(fl,B&1),z===null?(I.fallback!==void 0&&Yb(W),z=I.children,B=I.fallback,u?(z=tT(W,z,B,e),W.child.memoizedState={baseLanes:e},W.memoizedState=Xy,z):typeof I.unstable_expectedLoadTime=="number"?(z=tT(W,z,B,e),W.child.memoizedState={baseLanes:e},W.memoizedState=Xy,W.lanes=33554432,z):(e=T2({mode:"visible",children:z},W.mode,e,null),e.return=W,W.child=e)):z.memoizedState!==null?u?(I=nT(z,W,I.children,I.fallback,e),u=W.child,B=z.child.memoizedState,u.memoizedState=B===null?{baseLanes:e}:{baseLanes:B.baseLanes|e},u.childLanes=z.childLanes&~e,W.memoizedState=Xy,I):(e=rT(z,W,I.children,e),W.memoizedState=null,e):u?(I=nT(z,W,I.children,I.fallback,e),u=W.child,B=z.child.memoizedState,u.memoizedState=B===null?{baseLanes:e}:{baseLanes:B.baseLanes|e},u.childLanes=z.childLanes&~e,W.memoizedState=Xy,I):(e=rT(z,W,I.children,e),W.memoizedState=null,e)}function tT(z,W,e,I){var B=z.mode,u=z.child;return W={mode:"hidden",children:W},(B&2)==0&&u!==null?(u.childLanes=0,u.pendingProps=W):u=T2(W,B,0,null),e=ad(e,B,I,null),u.return=z,e.return=z,u.sibling=e,z.child=u,e}function rT(z,W,e,I){var B=z.child;return z=B.sibling,e=xv(B,{mode:"visible",children:e}),(W.mode&2)==0&&(e.lanes=I),e.return=W,e.sibling=null,z!==null&&(z.nextEffect=null,z.flags=8,W.firstEffect=W.lastEffect=z),W.child=e}function nT(z,W,e,I,B){var u=W.mode,s=z.child;z=s.sibling;var m={mode:"hidden",children:e};return(u&2)==0&&W.child!==s?(e=W.child,e.childLanes=0,e.pendingProps=m,s=e.lastEffect,s!==null?(W.firstEffect=e.firstEffect,W.lastEffect=s,s.nextEffect=null):W.firstEffect=W.lastEffect=null):e=xv(s,m),z!==null?I=xv(z,I):(I=ad(I,u,B,null),I.flags|=2),I.return=W,e.return=W,e.sibling=I,W.child=e,I}function aT(z,W){z.lanes|=W;var e=z.alternate;e!==null&&(e.lanes|=W),A3(z.return,W)}function n2(z,W,e,I,B,u){var s=z.memoizedState;s===null?z.memoizedState={isBackwards:W,rendering:null,renderingStartTime:0,last:I,tail:e,tailMode:B,lastEffect:u}:(s.isBackwards=W,s.rendering=null,s.renderingStartTime=0,s.last=I,s.tail=e,s.tailMode=B,s.lastEffect=u)}function iT(z,W,e){var I=W.pendingProps,B=I.revealOrder,u=I.tail;if(Rf(z,W,I.children,e),I=fl.current,(I&2)!=0)I=I&1|2,W.flags|=64;else{if(z!==null&&(z.flags&64)!=0)e:for(z=W.child;z!==null;){if(z.tag===13)z.memoizedState!==null&&aT(z,e);else if(z.tag===19)aT(z,e);else if(z.child!==null){z.child.return=z,z=z.child;continue}if(z===W)break e;for(;z.sibling===null;){if(z.return===null||z.return===W)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}I&=1}if(ul(fl,I),(W.mode&2)==0)W.memoizedState=null;else switch(B){case"forwards":for(e=W.child,B=null;e!==null;)z=e.alternate,z!==null&&By(z)===null&&(B=e),e=e.sibling;e=B,e===null?(B=W.child,W.child=null):(B=e.sibling,e.sibling=null),n2(W,!1,B,e,u,W.lastEffect);break;case"backwards":for(e=null,B=W.child,W.child=null;B!==null;){if(z=B.alternate,z!==null&&By(z)===null){W.child=B;break}z=B.sibling,B.sibling=e,e=B,B=z}n2(W,!0,e,null,u,W.lastEffect);break;case"together":n2(W,!1,null,null,void 0,W.lastEffect);break;default:W.memoizedState=null}return W.child}function Ah(z,W,e){if(z!==null&&(W.dependencies=z.dependencies),R0|=W.lanes,(e&W.childLanes)!=0){if(z!==null&&W.child!==z.child)throw Error(Ka(153));if(W.child!==null){for(z=W.child,e=xv(z,z.pendingProps),W.child=e,e.return=W;z.sibling!==null;)z=z.sibling,e=e.sibling=xv(z,z.pendingProps),e.return=W;e.sibling=null}return W.child}return null}var oT,a2,sT,lT;oT=function(z,W){for(var e=W.child;e!==null;){if(e.tag===5||e.tag===6)z.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===W)break;for(;e.sibling===null;){if(e.return===null||e.return===W)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};a2=function(){};sT=function(z,W,e,I){var B=z.memoizedProps;if(B!==I){z=W.stateNode,Zv(qc.current);var u=null;switch(e){case"input":B=Vx(z,B),I=Vx(z,I),u=[];break;case"option":B=Yx(z,B),I=Yx(z,I),u=[];break;case"select":B=Ys({},B,{value:void 0}),I=Ys({},I,{value:void 0}),u=[];break;case"textarea":B=Xx(z,B),I=Xx(z,I),u=[];break;default:typeof B.onClick!="function"&&typeof I.onClick=="function"&&(z.onclick=Ty)}Kx(e,I);var s;e=null;for(t in B)if(!I.hasOwnProperty(t)&&B.hasOwnProperty(t)&&B[t]!=null)if(t==="style"){var m=B[t];for(s in m)m.hasOwnProperty(s)&&(e||(e={}),e[s]="")}else t!=="dangerouslySetInnerHTML"&&t!=="children"&&t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&t!=="autoFocus"&&(Xd.hasOwnProperty(t)?u||(u=[]):(u=u||[]).push(t,null));for(t in I){var x=I[t];if(m=B!=null?B[t]:void 0,I.hasOwnProperty(t)&&x!==m&&(x!=null||m!=null))if(t==="style")if(m){for(s in m)!m.hasOwnProperty(s)||x&&x.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in x)x.hasOwnProperty(s)&&m[s]!==x[s]&&(e||(e={}),e[s]=x[s])}else e||(u||(u=[]),u.push(t,e)),e=x;else t==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,m=m?m.__html:void 0,x!=null&&m!==x&&(u=u||[]).push(t,x)):t==="children"?typeof x!="string"&&typeof x!="number"||(u=u||[]).push(t,""+x):t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&(Xd.hasOwnProperty(t)?(x!=null&&t==="onScroll"&&Bs("scroll",z),u||m===x||(u=[])):typeof x=="object"&&x!==null&&x.$$typeof===Ox?x.toString():(u=u||[]).push(t,x))}e&&(u=u||[]).push("style",e);var t=u;(W.updateQueue=t)&&(W.flags|=4)}};lT=function(z,W,e,I){e!==I&&(W.flags|=4)};function P0(z,W){if(!eh)switch(z.tailMode){case"hidden":W=z.tail;for(var e=null;W!==null;)W.alternate!==null&&(e=W),W=W.sibling;e===null?z.tail=null:e.sibling=null;break;case"collapsed":e=z.tail;for(var I=null;e!==null;)e.alternate!==null&&(I=e),e=e.sibling;I===null?W||z.tail===null?z.tail=null:z.tail.sibling=null:I.sibling=null}}function CM(z,W,e){var I=W.pendingProps;switch(W.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Lf(W.type)&&ky(),null;case 3:return Qp(),Us(Cf),Us(Ku),Zb(),I=W.stateNode,I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(z===null||z.child===null)&&(Uy(W)?W.flags|=4:I.hydrate||(W.flags|=256)),a2(W),null;case 5:Wb(W);var B=Zv(A0.current);if(e=W.type,z!==null&&W.stateNode!=null)sT(z,W,e,I,B),z.ref!==W.ref&&(W.flags|=128);else{if(!I){if(W.stateNode===null)throw Error(Ka(166));return null}if(z=Zv(qc.current),Uy(W)){I=W.stateNode,e=W.type;var u=W.memoizedProps;switch(I[sv]=W,I[My]=u,e){case"dialog":Bs("cancel",I),Bs("close",I);break;case"iframe":case"object":case"embed":Bs("load",I);break;case"video":case"audio":for(z=0;z<g0.length;z++)Bs(g0[z],I);break;case"source":Bs("error",I);break;case"img":case"image":case"link":Bs("error",I),Bs("load",I);break;case"details":Bs("toggle",I);break;case"input":$_(I,u),Bs("invalid",I);break;case"select":I._wrapperState={wasMultiple:!!u.multiple},Bs("invalid",I);break;case"textarea":tw(I,u),Bs("invalid",I)}Kx(e,u),z=null;for(var s in u)u.hasOwnProperty(s)&&(B=u[s],s==="children"?typeof B=="string"?I.textContent!==B&&(z=["children",B]):typeof B=="number"&&I.textContent!==""+B&&(z=["children",""+B]):Xd.hasOwnProperty(s)&&B!=null&&s==="onScroll"&&Bs("scroll",I));switch(e){case"input":oy(I),ew(I,u,!0);break;case"textarea":oy(I),nw(I);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(I.onclick=Ty)}I=z,W.updateQueue=I,I!==null&&(W.flags|=4)}else{switch(s=B.nodeType===9?B:B.ownerDocument,z===Zx.html&&(z=aw(e)),z===Zx.html?e==="script"?(z=s.createElement("div"),z.innerHTML="<script><\/script>",z=z.removeChild(z.firstChild)):typeof I.is=="string"?z=s.createElement(e,{is:I.is}):(z=s.createElement(e),e==="select"&&(s=z,I.multiple?s.multiple=!0:I.size&&(s.size=I.size))):z=s.createElementNS(z,e),z[sv]=W,z[My]=I,oT(z,W,!1,!1),W.stateNode=z,s=Jx(e,I),e){case"dialog":Bs("cancel",z),Bs("close",z),B=I;break;case"iframe":case"object":case"embed":Bs("load",z),B=I;break;case"video":case"audio":for(B=0;B<g0.length;B++)Bs(g0[B],z);B=I;break;case"source":Bs("error",z),B=I;break;case"img":case"image":case"link":Bs("error",z),Bs("load",z),B=I;break;case"details":Bs("toggle",z),B=I;break;case"input":$_(z,I),B=Vx(z,I),Bs("invalid",z);break;case"option":B=Yx(z,I);break;case"select":z._wrapperState={wasMultiple:!!I.multiple},B=Ys({},I,{value:void 0}),Bs("invalid",z);break;case"textarea":tw(z,I),B=Xx(z,I),Bs("invalid",z);break;default:B=I}Kx(e,B);var m=B;for(u in m)if(m.hasOwnProperty(u)){var x=m[u];u==="style"?sw(z,x):u==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&iw(z,x)):u==="children"?typeof x=="string"?(e!=="textarea"||x!=="")&&$d(z,x):typeof x=="number"&&$d(z,""+x):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xd.hasOwnProperty(u)?x!=null&&u==="onScroll"&&Bs("scroll",z):x!=null&&Px(z,u,x,s))}switch(e){case"input":oy(z),ew(z,I,!1);break;case"textarea":oy(z),nw(z);break;case"option":I.value!=null&&z.setAttribute("value",""+tv(I.value));break;case"select":z.multiple=!!I.multiple,u=I.value,u!=null?Dp(z,!!I.multiple,u,!1):I.defaultValue!=null&&Dp(z,!!I.multiple,I.defaultValue,!0);break;default:typeof B.onClick=="function"&&(z.onclick=Ty)}l3(e,I)&&(W.flags|=4)}W.ref!==null&&(W.flags|=128)}return null;case 6:if(z&&W.stateNode!=null)lT(z,W,z.memoizedProps,I);else{if(typeof I!="string"&&W.stateNode===null)throw Error(Ka(166));e=Zv(A0.current),Zv(qc.current),Uy(W)?(I=W.stateNode,e=W.memoizedProps,I[sv]=W,I.nodeValue!==e&&(W.flags|=4)):(I=(e.nodeType===9?e:e.ownerDocument).createTextNode(I),I[sv]=W,W.stateNode=I)}return null;case 13:return Us(fl),I=W.memoizedState,(W.flags&64)!=0?(W.lanes=e,W):(I=I!==null,e=!1,z===null?W.memoizedProps.fallback!==void 0&&Uy(W):e=z.memoizedState!==null,I&&!e&&(W.mode&2)!=0&&(z===null&&W.memoizedProps.unstable_avoidThisFallback!==!0||(fl.current&1)!=0?Iu===0&&(Iu=3):((Iu===0||Iu===3)&&(Iu=4),df===null||(R0&134217727)==0&&(ed&134217727)==0||rd(df,$u))),(I||e)&&(W.flags|=4),null);case 4:return Qp(),a2(W),z===null&&n3(W.stateNode.containerInfo),null;case 10:return Ub(W),null;case 17:return Lf(W.type)&&ky(),null;case 19:if(Us(fl),I=W.memoizedState,I===null)return null;if(u=(W.flags&64)!=0,s=I.rendering,s===null)if(u)P0(I,!1);else{if(Iu!==0||z!==null&&(z.flags&64)!=0)for(z=W.child;z!==null;){if(s=By(z),s!==null){for(W.flags|=64,P0(I,!1),u=s.updateQueue,u!==null&&(W.updateQueue=u,W.flags|=4),I.lastEffect===null&&(W.firstEffect=null),W.lastEffect=I.lastEffect,I=e,e=W.child;e!==null;)u=e,z=I,u.flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,s=u.alternate,s===null?(u.childLanes=0,u.lanes=z,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,u.type=s.type,z=s.dependencies,u.dependencies=z===null?null:{lanes:z.lanes,firstContext:z.firstContext}),e=e.sibling;return ul(fl,fl.current&1|2),W.child}z=z.sibling}I.tail!==null&&Ju()>d2&&(W.flags|=64,u=!0,P0(I,!1),W.lanes=33554432)}else{if(!u)if(z=By(s),z!==null){if(W.flags|=64,u=!0,e=z.updateQueue,e!==null&&(W.updateQueue=e,W.flags|=4),P0(I,!0),I.tail===null&&I.tailMode==="hidden"&&!s.alternate&&!eh)return W=W.lastEffect=I.lastEffect,W!==null&&(W.nextEffect=null),null}else 2*Ju()-I.renderingStartTime>d2&&e!==1073741824&&(W.flags|=64,u=!0,P0(I,!1),W.lanes=33554432);I.isBackwards?(s.sibling=W.child,W.child=s):(e=I.last,e!==null?e.sibling=s:W.child=s,I.last=s)}return I.tail!==null?(e=I.tail,I.rendering=e,I.tail=e.sibling,I.lastEffect=W.lastEffect,I.renderingStartTime=Ju(),e.sibling=null,W=fl.current,ul(fl,u?W&1|2:W&1),e):null;case 23:case 24:return _2(),z!==null&&z.memoizedState!==null!=(W.memoizedState!==null)&&I.mode!=="unstable-defer-without-hiding"&&(W.flags|=4),null}throw Error(Ka(156,W.tag))}function LM(z){switch(z.tag){case 1:Lf(z.type)&&ky();var W=z.flags;return W&4096?(z.flags=W&-4097|64,z):null;case 3:if(Qp(),Us(Cf),Us(Ku),Zb(),W=z.flags,(W&64)!=0)throw Error(Ka(285));return z.flags=W&-4097|64,z;case 5:return Wb(z),null;case 13:return Us(fl),W=z.flags,W&4096?(z.flags=W&-4097|64,z):null;case 19:return Us(fl),null;case 4:return Qp(),null;case 10:return Ub(z),null;case 23:case 24:return _2(),null;default:return null}}function i2(z,W){try{var e="",I=W;do e+=fA(I),I=I.return;while(I);var B=e}catch(u){B=`
Error generating stack: `+u.message+`
`+u.stack}return{value:z,source:W,stack:B}}function o2(z,W){try{console.error(W.value)}catch(e){setTimeout(function(){throw e})}}var PM=typeof WeakMap=="function"?WeakMap:Map;function uT(z,W,e){e=cv(-1,e),e.tag=3,e.payload={element:null};var I=W.value;return e.callback=function(){Ky||(Ky=!0,g2=I),o2(z,W)},e}function fT(z,W,e){e=cv(-1,e),e.tag=3;var I=z.type.getDerivedStateFromError;if(typeof I=="function"){var B=W.value;e.payload=function(){return o2(z,W),I(B)}}var u=z.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(e.callback=function(){typeof I!="function"&&(rh===null?rh=new Set([this]):rh.add(this),o2(z,W));var s=W.stack;this.componentDidCatch(W.value,{componentStack:s!==null?s:""})}),e}var RM=typeof WeakSet=="function"?WeakSet:Set;function cT(z){var W=z.ref;if(W!==null)if(typeof W=="function")try{W(null)}catch(e){mv(z,e)}else W.current=null}function DM(z,W){switch(W.tag){case 0:case 11:case 15:case 22:return;case 1:if(W.flags&256&&z!==null){var e=z.memoizedProps,I=z.memoizedState;z=W.stateNode,W=z.getSnapshotBeforeUpdate(W.elementType===W.type?e:Nc(W.type,e),I),z.__reactInternalSnapshotBeforeUpdate=W}return;case 3:W.flags&256&&Lb(W.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Ka(163))}function IM(z,W,e){switch(e.tag){case 0:case 11:case 15:case 22:if(W=e.updateQueue,W=W!==null?W.lastEffect:null,W!==null){z=W=W.next;do{if((z.tag&3)==3){var I=z.create;z.destroy=I()}z=z.next}while(z!==W)}if(W=e.updateQueue,W=W!==null?W.lastEffect:null,W!==null){z=W=W.next;do{var B=z;I=B.next,B=B.tag,(B&4)!=0&&(B&1)!=0&&(ST(e,z),VM(e,z)),z=I}while(z!==W)}return;case 1:z=e.stateNode,e.flags&4&&(W===null?z.componentDidMount():(I=e.elementType===e.type?W.memoizedProps:Nc(e.type,W.memoizedProps),z.componentDidUpdate(I,W.memoizedState,z.__reactInternalSnapshotBeforeUpdate))),W=e.updateQueue,W!==null&&k3(e,W,z);return;case 3:if(W=e.updateQueue,W!==null){if(z=null,e.child!==null)switch(e.child.tag){case 5:z=e.child.stateNode;break;case 1:z=e.child.stateNode}k3(e,W,z)}return;case 5:z=e.stateNode,W===null&&e.flags&4&&l3(e.type,e.memoizedProps)&&z.focus();return;case 6:return;case 4:return;case 12:return;case 13:e.memoizedState===null&&(e=e.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&Tw(e))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Ka(163))}function hT(z,W){for(var e=z;;){if(e.tag===5){var I=e.stateNode;if(W)I=I.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{I=e.stateNode;var B=e.memoizedProps.style;B=B!=null&&B.hasOwnProperty("display")?B.display:null,I.style.display=ow("display",B)}}else if(e.tag===6)e.stateNode.nodeValue=W?"":e.memoizedProps;else if((e.tag!==23&&e.tag!==24||e.memoizedState===null||e===z)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===z)break;for(;e.sibling===null;){if(e.return===null||e.return===z)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function vT(z,W){if(Yv&&typeof Yv.onCommitFiberUnmount=="function")try{Yv.onCommitFiberUnmount(Db,W)}catch{}switch(W.tag){case 0:case 11:case 14:case 15:case 22:if(z=W.updateQueue,z!==null&&(z=z.lastEffect,z!==null)){var e=z=z.next;do{var I=e,B=I.destroy;if(I=I.tag,B!==void 0)if((I&4)!=0)ST(W,e);else{I=W;try{B()}catch(u){mv(I,u)}}e=e.next}while(e!==z)}break;case 1:if(cT(W),z=W.stateNode,typeof z.componentWillUnmount=="function")try{z.props=W.memoizedProps,z.state=W.memoizedState,z.componentWillUnmount()}catch(u){mv(W,u)}break;case 5:cT(W);break;case 4:yT(z,W)}}function pT(z){z.alternate=null,z.child=null,z.dependencies=null,z.firstEffect=null,z.lastEffect=null,z.memoizedProps=null,z.memoizedState=null,z.pendingProps=null,z.return=null,z.updateQueue=null}function dT(z){return z.tag===5||z.tag===3||z.tag===4}function gT(z){e:{for(var W=z.return;W!==null;){if(dT(W))break e;W=W.return}throw Error(Ka(160))}var e=W;switch(W=e.stateNode,e.tag){case 5:var I=!1;break;case 3:W=W.containerInfo,I=!0;break;case 4:W=W.containerInfo,I=!0;break;default:throw Error(Ka(161))}e.flags&16&&($d(W,""),e.flags&=-17);e:t:for(e=z;;){for(;e.sibling===null;){if(e.return===null||dT(e.return)){e=null;break e}e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2)){e=e.stateNode;break e}}I?s2(z,e,W):l2(z,e,W)}function s2(z,W,e){var I=z.tag,B=I===5||I===6;if(B)z=B?z.stateNode:z.stateNode.instance,W?e.nodeType===8?e.parentNode.insertBefore(z,W):e.insertBefore(z,W):(e.nodeType===8?(W=e.parentNode,W.insertBefore(z,e)):(W=e,W.appendChild(z)),e=e._reactRootContainer,e!=null||W.onclick!==null||(W.onclick=Ty));else if(I!==4&&(z=z.child,z!==null))for(s2(z,W,e),z=z.sibling;z!==null;)s2(z,W,e),z=z.sibling}function l2(z,W,e){var I=z.tag,B=I===5||I===6;if(B)z=B?z.stateNode:z.stateNode.instance,W?e.insertBefore(z,W):e.appendChild(z);else if(I!==4&&(z=z.child,z!==null))for(l2(z,W,e),z=z.sibling;z!==null;)l2(z,W,e),z=z.sibling}function yT(z,W){for(var e=W,I=!1,B,u;;){if(!I){I=e.return;e:for(;;){if(I===null)throw Error(Ka(160));switch(B=I.stateNode,I.tag){case 5:u=!1;break e;case 3:B=B.containerInfo,u=!0;break e;case 4:B=B.containerInfo,u=!0;break e}I=I.return}I=!0}if(e.tag===5||e.tag===6){e:for(var s=z,m=e,x=m;;)if(vT(s,x),x.child!==null&&x.tag!==4)x.child.return=x,x=x.child;else{if(x===m)break e;for(;x.sibling===null;){if(x.return===null||x.return===m)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}u?(s=B,m=e.stateNode,s.nodeType===8?s.parentNode.removeChild(m):s.removeChild(m)):B.removeChild(e.stateNode)}else if(e.tag===4){if(e.child!==null){B=e.stateNode.containerInfo,u=!0,e.child.return=e,e=e.child;continue}}else if(vT(z,e),e.child!==null){e.child.return=e,e=e.child;continue}if(e===W)break;for(;e.sibling===null;){if(e.return===null||e.return===W)return;e=e.return,e.tag===4&&(I=!1)}e.sibling.return=e.return,e=e.sibling}}function u2(z,W){switch(W.tag){case 0:case 11:case 14:case 15:case 22:var e=W.updateQueue;if(e=e!==null?e.lastEffect:null,e!==null){var I=e=e.next;do(I.tag&3)==3&&(z=I.destroy,I.destroy=void 0,z!==void 0&&z()),I=I.next;while(I!==e)}return;case 1:return;case 5:if(e=W.stateNode,e!=null){I=W.memoizedProps;var B=z!==null?z.memoizedProps:I;z=W.type;var u=W.updateQueue;if(W.updateQueue=null,u!==null){for(e[My]=I,z==="input"&&I.type==="radio"&&I.name!=null&&q_(e,I),Jx(z,B),W=Jx(z,I),B=0;B<u.length;B+=2){var s=u[B],m=u[B+1];s==="style"?sw(e,m):s==="dangerouslySetInnerHTML"?iw(e,m):s==="children"?$d(e,m):Px(e,s,m,W)}switch(z){case"input":Gx(e,I);break;case"textarea":rw(e,I);break;case"select":z=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!I.multiple,u=I.value,u!=null?Dp(e,!!I.multiple,u,!1):z!==!!I.multiple&&(I.defaultValue!=null?Dp(e,!!I.multiple,I.defaultValue,!0):Dp(e,!!I.multiple,I.multiple?[]:"",!1))}}}return;case 6:if(W.stateNode===null)throw Error(Ka(162));W.stateNode.nodeValue=W.memoizedProps;return;case 3:e=W.stateNode,e.hydrate&&(e.hydrate=!1,Tw(e.containerInfo));return;case 12:return;case 13:W.memoizedState!==null&&(p2=Ju(),hT(W.child,!0)),mT(W);return;case 19:mT(W);return;case 17:return;case 23:case 24:hT(W,W.memoizedState!==null);return}throw Error(Ka(163))}function mT(z){var W=z.updateQueue;if(W!==null){z.updateQueue=null;var e=z.stateNode;e===null&&(e=z.stateNode=new RM),W.forEach(function(I){var B=YM.bind(null,z,I);e.has(I)||(e.add(I),I.then(B,B))})}}function zM(z,W){return z!==null&&(z=z.memoizedState,z===null||z.dehydrated!==null)?(W=W.memoizedState,W!==null&&W.dehydrated===null):!1}var FM=Math.ceil,Zy=Bv.ReactCurrentDispatcher,f2=Bv.ReactCurrentOwner,Yi=0,df=null,ru=null,$u=0,Jv=0,c2=lv(0),Iu=0,jy=null,qp=0,R0=0,ed=0,h2=0,v2=null,p2=0,d2=1/0;function td(){d2=Ju()+500}var yi=null,Ky=!1,g2=null,rh=null,pv=!1,D0=null,I0=90,y2=[],m2=[],Mh=null,z0=0,x2=null,Jy=-1,Sh=0,Qy=0,F0=null,$y=!1;function ac(){return(Yi&48)!=0?Ju():Jy!==-1?Jy:Jy=Ju()}function dv(z){if(z=z.mode,(z&2)==0)return 1;if((z&4)==0)return jp()===99?1:2;if(Sh===0&&(Sh=qp),TM.transition!==0){Qy!==0&&(Qy=v2!==null?v2.pendingLanes:0),z=Sh;var W=4186112&~Qy;return W&=-W,W===0&&(z=4186112&~z,W=z&-z,W===0&&(W=8192)),W}return z=jp(),(Yi&4)!=0&&z===98?z=py(12,Sh):(z=SA(z),z=py(z,Sh)),z}function gv(z,W,e){if(50<z0)throw z0=0,x2=null,Error(Ka(185));if(z=qy(z,W),z===null)return null;dy(z,W,e),z===df&&(ed|=W,Iu===4&&rd(z,$u));var I=jp();W===1?(Yi&8)!=0&&(Yi&48)==0?b2(z):(Sc(z,e),Yi===0&&(td(),$c())):((Yi&4)==0||I!==98&&I!==99||(Mh===null?Mh=new Set([z]):Mh.add(z)),Sc(z,e)),v2=z}function qy(z,W){z.lanes|=W;var e=z.alternate;for(e!==null&&(e.lanes|=W),e=z,z=z.return;z!==null;)z.childLanes|=W,e=z.alternate,e!==null&&(e.childLanes|=W),e=z,z=z.return;return e.tag===3?e.stateNode:null}function Sc(z,W){for(var e=z.callbackNode,I=z.suspendedLanes,B=z.pingedLanes,u=z.expirationTimes,s=z.pendingLanes;0<s;){var m=31-iv(s),x=1<<m,t=u[m];if(t===-1){if((x&I)==0||(x&B)!=0){t=W,Op(x);var i=ks;u[m]=10<=i?t+250:6<=i?t+5e3:-1}}else t<=W&&(z.expiredLanes|=x);s&=~x}if(I=l0(z,z===df?$u:0),W=ks,I===0)e!==null&&(e!==Ob&&zb(e),z.callbackNode=null,z.callbackPriority=0);else{if(e!==null){if(z.callbackPriority===W)return;e!==Ob&&zb(e)}W===15?(e=b2.bind(null,z),wh===null?(wh=[e],Ly=Ib(Cy,T3)):wh.push(e),e=Ob):W===14?e=x0(99,b2.bind(null,z)):(e=kA(W),e=x0(e,xT.bind(null,z))),z.callbackPriority=W,z.callbackNode=e}}function xT(z){if(Jy=-1,Qy=Sh=0,(Yi&48)!=0)throw Error(Ka(327));var W=z.callbackNode;if(yv()&&z.callbackNode!==W)return null;var e=l0(z,z===df?$u:0);if(e===0)return null;var I=e,B=Yi;Yi|=16;var u=TT();(df!==z||$u!==I)&&(td(),nd(z,I));do try{BM();break}catch(m){wT(z,m)}while(1);if(Bb(),Zy.current=u,Yi=B,ru!==null?I=0:(df=null,$u=0,I=Iu),(qp&ed)!=0)nd(z,0);else if(I!==0){if(I===2&&(Yi|=64,z.hydrate&&(z.hydrate=!1,Lb(z.containerInfo)),e=Lw(z),e!==0&&(I=O0(z,e))),I===1)throw W=jy,nd(z,0),rd(z,e),Sc(z,Ju()),W;switch(z.finishedWork=z.current.alternate,z.finishedLanes=e,I){case 0:case 1:throw Error(Ka(345));case 2:Qv(z);break;case 3:if(rd(z,e),(e&62914560)===e&&(I=p2+500-Ju(),10<I)){if(l0(z,0)!==0)break;if(B=z.suspendedLanes,(B&e)!==e){ac(),z.pingedLanes|=z.suspendedLanes&B;break}z.timeoutHandle=u3(Qv.bind(null,z),I);break}Qv(z);break;case 4:if(rd(z,e),(e&4186112)===e)break;for(I=z.eventTimes,B=-1;0<e;){var s=31-iv(e);u=1<<s,s=I[s],s>B&&(B=s),e&=~u}if(e=B,e=Ju()-e,e=(120>e?120:480>e?480:1080>e?1080:1920>e?1920:3e3>e?3e3:4320>e?4320:1960*FM(e/1960))-e,10<e){z.timeoutHandle=u3(Qv.bind(null,z),e);break}Qv(z);break;case 5:Qv(z);break;default:throw Error(Ka(329))}}return Sc(z,Ju()),z.callbackNode===W?xT.bind(null,z):null}function rd(z,W){for(W&=~h2,W&=~ed,z.suspendedLanes|=W,z.pingedLanes&=~W,z=z.expirationTimes;0<W;){var e=31-iv(W),I=1<<e;z[e]=-1,W&=~I}}function b2(z){if((Yi&48)!=0)throw Error(Ka(327));if(yv(),z===df&&(z.expiredLanes&$u)!=0){var W=$u,e=O0(z,W);(qp&ed)!=0&&(W=l0(z,W),e=O0(z,W))}else W=l0(z,0),e=O0(z,W);if(z.tag!==0&&e===2&&(Yi|=64,z.hydrate&&(z.hydrate=!1,Lb(z.containerInfo)),W=Lw(z),W!==0&&(e=O0(z,W))),e===1)throw e=jy,nd(z,0),rd(z,W),Sc(z,Ju()),e;return z.finishedWork=z.current.alternate,z.finishedLanes=W,Qv(z),Sc(z,Ju()),null}function OM(){if(Mh!==null){var z=Mh;Mh=null,z.forEach(function(W){W.expiredLanes|=24&W.pendingLanes,Sc(W,Ju())})}$c()}function bT(z,W){var e=Yi;Yi|=1;try{return z(W)}finally{Yi=e,Yi===0&&(td(),$c())}}function _T(z,W){var e=Yi;Yi&=-2,Yi|=8;try{return z(W)}finally{Yi=e,Yi===0&&(td(),$c())}}function em(z,W){ul(c2,Jv),Jv|=W,qp|=W}function _2(){Jv=c2.current,Us(c2)}function nd(z,W){z.finishedWork=null,z.finishedLanes=0;var e=z.timeoutHandle;if(e!==-1&&(z.timeoutHandle=-1,yM(e)),ru!==null)for(e=ru.return;e!==null;){var I=e;switch(I.tag){case 1:I=I.type.childContextTypes,I!=null&&ky();break;case 3:Qp(),Us(Cf),Us(Ku),Zb();break;case 5:Wb(I);break;case 4:Qp();break;case 13:Us(fl);break;case 19:Us(fl);break;case 10:Ub(I);break;case 23:case 24:_2()}e=e.return}df=z,ru=xv(z.current,null),$u=Jv=qp=W,Iu=0,jy=null,h2=ed=R0=0}function wT(z,W){do{var e=ru;try{if(Bb(),M0.current=Yy,Hy){for(var I=Sl.memoizedState;I!==null;){var B=I.queue;B!==null&&(B.pending=null),I=I.next}Hy=!1}if(S0=0,Du=Qu=Sl=null,k0=!1,f2.current=null,e===null||e.return===null){Iu=1,jy=W,ru=null;break}e:{var u=z,s=e.return,m=e,x=W;if(W=$u,m.flags|=2048,m.firstEffect=m.lastEffect=null,x!==null&&typeof x=="object"&&typeof x.then=="function"){var t=x;if((m.mode&2)==0){var i=m.alternate;i?(m.updateQueue=i.updateQueue,m.memoizedState=i.memoizedState,m.lanes=i.lanes):(m.updateQueue=null,m.memoizedState=null)}var a=(fl.current&1)!=0,r=s;do{var n;if(n=r.tag===13){var f=r.memoizedState;if(f!==null)n=f.dehydrated!==null;else{var l=r.memoizedProps;n=l.fallback===void 0?!1:l.unstable_avoidThisFallback!==!0?!0:!a}}if(n){var o=r.updateQueue;if(o===null){var c=new Set;c.add(t),r.updateQueue=c}else o.add(t);if((r.mode&2)==0){if(r.flags|=64,m.flags|=16384,m.flags&=-2981,m.tag===1)if(m.alternate===null)m.tag=17;else{var v=cv(-1,1);v.tag=2,hv(m,v)}m.lanes|=1;break e}x=void 0,m=W;var d=u.pingCache;if(d===null?(d=u.pingCache=new PM,x=new Set,d.set(t,x)):(x=d.get(t),x===void 0&&(x=new Set,d.set(t,x))),!x.has(m)){x.add(m);var p=WM.bind(null,u,t,m);t.then(p,p)}r.flags|=4096,r.lanes=W;break e}r=r.return}while(r!==null);x=Error((Rp(m.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Iu!==5&&(Iu=2),x=i2(x,m),r=s;do{switch(r.tag){case 3:u=x,r.flags|=4096,W&=-W,r.lanes|=W;var y=uT(r,u,W);S3(r,y);break e;case 1:u=x;var g=r.type,A=r.stateNode;if((r.flags&64)==0&&(typeof g.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(rh===null||!rh.has(A)))){r.flags|=4096,W&=-W,r.lanes|=W;var b=fT(r,u,W);S3(r,b);break e}}r=r.return}while(r!==null)}MT(e)}catch(M){W=M,ru===e&&e!==null&&(ru=e=e.return);continue}break}while(1)}function TT(){var z=Zy.current;return Zy.current=Yy,z===null?Yy:z}function O0(z,W){var e=Yi;Yi|=16;var I=TT();df===z&&$u===W||nd(z,W);do try{NM();break}catch(B){wT(z,B)}while(1);if(Bb(),Yi=e,Zy.current=I,ru!==null)throw Error(Ka(261));return df=null,$u=0,Iu}function NM(){for(;ru!==null;)AT(ru)}function BM(){for(;ru!==null&&!bM();)AT(ru)}function AT(z){var W=ET(z.alternate,z,Jv);z.memoizedProps=z.pendingProps,W===null?MT(z):ru=W,f2.current=null}function MT(z){var W=z;do{var e=W.alternate;if(z=W.return,(W.flags&2048)==0){if(e=CM(e,W,Jv),e!==null){ru=e;return}if(e=W,e.tag!==24&&e.tag!==23||e.memoizedState===null||(Jv&1073741824)!=0||(e.mode&4)==0){for(var I=0,B=e.child;B!==null;)I|=B.lanes|B.childLanes,B=B.sibling;e.childLanes=I}z!==null&&(z.flags&2048)==0&&(z.firstEffect===null&&(z.firstEffect=W.firstEffect),W.lastEffect!==null&&(z.lastEffect!==null&&(z.lastEffect.nextEffect=W.firstEffect),z.lastEffect=W.lastEffect),1<W.flags&&(z.lastEffect!==null?z.lastEffect.nextEffect=W:z.firstEffect=W,z.lastEffect=W))}else{if(e=LM(W),e!==null){e.flags&=2047,ru=e;return}z!==null&&(z.firstEffect=z.lastEffect=null,z.flags|=2048)}if(W=W.sibling,W!==null){ru=W;return}ru=W=z}while(W!==null);Iu===0&&(Iu=5)}function Qv(z){var W=jp();return Xv(99,UM.bind(null,z,W)),null}function UM(z,W){do yv();while(D0!==null);if((Yi&48)!=0)throw Error(Ka(327));var e=z.finishedWork;if(e===null)return null;if(z.finishedWork=null,z.finishedLanes=0,e===z.current)throw Error(Ka(177));z.callbackNode=null;var I=e.lanes|e.childLanes,B=I,u=z.pendingLanes&~B;z.pendingLanes=B,z.suspendedLanes=0,z.pingedLanes=0,z.expiredLanes&=B,z.mutableReadLanes&=B,z.entangledLanes&=B,B=z.entanglements;for(var s=z.eventTimes,m=z.expirationTimes;0<u;){var x=31-iv(u),t=1<<x;B[x]=0,s[x]=-1,m[x]=-1,u&=~t}if(Mh!==null&&(I&24)==0&&Mh.has(z)&&Mh.delete(z),z===df&&(ru=df=null,$u=0),1<e.flags?e.lastEffect!==null?(e.lastEffect.nextEffect=e,I=e.firstEffect):I=e:I=e.firstEffect,I!==null){if(B=Yi,Yi|=32,f2.current=null,kb=gy,s=Jw(),Tb(s)){if("selectionStart"in s)m={start:s.selectionStart,end:s.selectionEnd};else e:if(m=(m=s.ownerDocument)&&m.defaultView||window,(t=m.getSelection&&m.getSelection())&&t.rangeCount!==0){m=t.anchorNode,u=t.anchorOffset,x=t.focusNode,t=t.focusOffset;try{m.nodeType,x.nodeType}catch{m=null;break e}var i=0,a=-1,r=-1,n=0,f=0,l=s,o=null;t:for(;;){for(var c;l!==m||u!==0&&l.nodeType!==3||(a=i+u),l!==x||t!==0&&l.nodeType!==3||(r=i+t),l.nodeType===3&&(i+=l.nodeValue.length),(c=l.firstChild)!==null;)o=l,l=c;for(;;){if(l===s)break t;if(o===m&&++n===u&&(a=i),o===x&&++f===t&&(r=i),(c=l.nextSibling)!==null)break;l=o,o=l.parentNode}l=c}m=a===-1||r===-1?null:{start:a,end:r}}else m=null;m=m||{start:0,end:0}}else m=null;Eb={focusedElem:s,selectionRange:m},gy=!1,F0=null,$y=!1,yi=I;do try{HM()}catch(M){if(yi===null)throw Error(Ka(330));mv(yi,M),yi=yi.nextEffect}while(yi!==null);F0=null,yi=I;do try{for(s=z;yi!==null;){var v=yi.flags;if(v&16&&$d(yi.stateNode,""),v&128){var d=yi.alternate;if(d!==null){var p=d.ref;p!==null&&(typeof p=="function"?p(null):p.current=null)}}switch(v&1038){case 2:gT(yi),yi.flags&=-3;break;case 6:gT(yi),yi.flags&=-3,u2(yi.alternate,yi);break;case 1024:yi.flags&=-1025;break;case 1028:yi.flags&=-1025,u2(yi.alternate,yi);break;case 4:u2(yi.alternate,yi);break;case 8:m=yi,yT(s,m);var y=m.alternate;pT(m),y!==null&&pT(y)}yi=yi.nextEffect}}catch(M){if(yi===null)throw Error(Ka(330));mv(yi,M),yi=yi.nextEffect}while(yi!==null);if(p=Eb,d=Jw(),v=p.focusedElem,s=p.selectionRange,d!==v&&v&&v.ownerDocument&&Kw(v.ownerDocument.documentElement,v)){for(s!==null&&Tb(v)&&(d=s.start,p=s.end,p===void 0&&(p=d),"selectionStart"in v?(v.selectionStart=d,v.selectionEnd=Math.min(p,v.value.length)):(p=(d=v.ownerDocument||document)&&d.defaultView||window,p.getSelection&&(p=p.getSelection(),m=v.textContent.length,y=Math.min(s.start,m),s=s.end===void 0?y:Math.min(s.end,m),!p.extend&&y>s&&(m=s,s=y,y=m),m=jw(v,y),u=jw(v,s),m&&u&&(p.rangeCount!==1||p.anchorNode!==m.node||p.anchorOffset!==m.offset||p.focusNode!==u.node||p.focusOffset!==u.offset)&&(d=d.createRange(),d.setStart(m.node,m.offset),p.removeAllRanges(),y>s?(p.addRange(d),p.extend(u.node,u.offset)):(d.setEnd(u.node,u.offset),p.addRange(d)))))),d=[],p=v;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<d.length;v++)p=d[v],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}gy=!!kb,Eb=kb=null,z.current=e,yi=I;do try{for(v=z;yi!==null;){var g=yi.flags;if(g&36&&IM(v,yi.alternate,yi),g&128){d=void 0;var A=yi.ref;if(A!==null){var b=yi.stateNode;switch(yi.tag){case 5:d=b;break;default:d=b}typeof A=="function"?A(d):A.current=d}}yi=yi.nextEffect}}catch(M){if(yi===null)throw Error(Ka(330));mv(yi,M),yi=yi.nextEffect}while(yi!==null);yi=null,wM(),Yi=B}else z.current=e;if(pv)pv=!1,D0=z,I0=W;else for(yi=I;yi!==null;)W=yi.nextEffect,yi.nextEffect=null,yi.flags&8&&(g=yi,g.sibling=null,g.stateNode=null),yi=W;if(I=z.pendingLanes,I===0&&(rh=null),I===1?z===x2?z0++:(z0=0,x2=z):z0=0,e=e.stateNode,Yv&&typeof Yv.onCommitFiberRoot=="function")try{Yv.onCommitFiberRoot(Db,e,void 0,(e.current.flags&64)==64)}catch{}if(Sc(z,Ju()),Ky)throw Ky=!1,z=g2,g2=null,z;return(Yi&8)!=0||$c(),null}function HM(){for(;yi!==null;){var z=yi.alternate;$y||F0===null||((yi.flags&8)!=0?gw(yi,F0)&&($y=!0):yi.tag===13&&zM(z,yi)&&gw(yi,F0)&&($y=!0));var W=yi.flags;(W&256)!=0&&DM(z,yi),(W&512)==0||pv||(pv=!0,x0(97,function(){return yv(),null})),yi=yi.nextEffect}}function yv(){if(I0!==90){var z=97<I0?97:I0;return I0=90,Xv(z,GM)}return!1}function VM(z,W){y2.push(W,z),pv||(pv=!0,x0(97,function(){return yv(),null}))}function ST(z,W){m2.push(W,z),pv||(pv=!0,x0(97,function(){return yv(),null}))}function GM(){if(D0===null)return!1;var z=D0;if(D0=null,(Yi&48)!=0)throw Error(Ka(331));var W=Yi;Yi|=32;var e=m2;m2=[];for(var I=0;I<e.length;I+=2){var B=e[I],u=e[I+1],s=B.destroy;if(B.destroy=void 0,typeof s=="function")try{s()}catch(x){if(u===null)throw Error(Ka(330));mv(u,x)}}for(e=y2,y2=[],I=0;I<e.length;I+=2){B=e[I],u=e[I+1];try{var m=B.create;B.destroy=m()}catch(x){if(u===null)throw Error(Ka(330));mv(u,x)}}for(m=z.current.firstEffect;m!==null;)z=m.nextEffect,m.nextEffect=null,m.flags&8&&(m.sibling=null,m.stateNode=null),m=z;return Yi=W,$c(),!0}function kT(z,W,e){W=i2(e,W),W=uT(z,W,1),hv(z,W),W=ac(),z=qy(z,1),z!==null&&(dy(z,1,W),Sc(z,W))}function mv(z,W){if(z.tag===3)kT(z,z,W);else for(var e=z.return;e!==null;){if(e.tag===3){kT(e,z,W);break}else if(e.tag===1){var I=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(rh===null||!rh.has(I))){z=i2(W,z);var B=fT(e,z,1);if(hv(e,B),B=ac(),e=qy(e,1),e!==null)dy(e,1,B),Sc(e,B);else if(typeof I.componentDidCatch=="function"&&(rh===null||!rh.has(I)))try{I.componentDidCatch(W,z)}catch{}break}}e=e.return}}function WM(z,W,e){var I=z.pingCache;I!==null&&I.delete(W),W=ac(),z.pingedLanes|=z.suspendedLanes&e,df===z&&($u&e)===e&&(Iu===4||Iu===3&&($u&62914560)===$u&&500>Ju()-p2?nd(z,0):h2|=e),Sc(z,W)}function YM(z,W){var e=z.stateNode;e!==null&&e.delete(W),W=0,W===0&&(W=z.mode,(W&2)==0?W=1:(W&4)==0?W=jp()===99?1:2:(Sh===0&&(Sh=qp),W=Np(62914560&~Sh),W===0&&(W=4194304))),e=ac(),z=qy(z,W),z!==null&&(dy(z,W,e),Sc(z,e))}var ET;ET=function(z,W,e){var I=W.lanes;if(z!==null)if(z.memoizedProps!==W.pendingProps||Cf.current)Bc=!0;else if((e&I)!=0)Bc=(z.flags&16384)!=0;else{switch(Bc=!1,W.tag){case 3:q3(W),Xb();break;case 5:I3(W);break;case 1:Lf(W.type)&&Ey(W);break;case 4:Gb(W,W.stateNode.containerInfo);break;case 10:I=W.memoizedProps.value;var B=W.type._context;ul(Py,B._currentValue),B._currentValue=I;break;case 13:if(W.memoizedState!==null)return(e&W.child.childLanes)!=0?eT(z,W,e):(ul(fl,fl.current&1),W=Ah(z,W,e),W!==null?W.sibling:null);ul(fl,fl.current&1);break;case 19:if(I=(e&W.childLanes)!=0,(z.flags&64)!=0){if(I)return iT(z,W,e);W.flags|=64}if(B=W.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),ul(fl,fl.current),I)break;return null;case 23:case 24:return W.lanes=0,e2(z,W,e)}return Ah(z,W,e)}else Bc=!1;switch(W.lanes=0,W.tag){case 2:if(I=W.type,z!==null&&(z.alternate=null,W.alternate=null,W.flags|=2),z=W.pendingProps,B=Zp(W,Ku.current),Jp(W,e),B=Kb(null,W,I,z,B,e),W.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0){if(W.tag=1,W.memoizedState=null,W.updateQueue=null,Lf(I)){var u=!0;Ey(W)}else u=!1;W.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,Hb(W);var s=I.getDerivedStateFromProps;typeof s=="function"&&Iy(W,I,s,z),B.updater=zy,W.stateNode=B,B._reactInternals=W,Vb(W,I,z,e),W=r2(null,W,I,!0,u,e)}else W.tag=0,Rf(null,W,B,e),W=W.child;return W;case 16:B=W.elementType;e:{switch(z!==null&&(z.alternate=null,W.alternate=null,W.flags|=2),z=W.pendingProps,u=B._init,B=u(B._payload),W.type=B,u=W.tag=ZM(B),z=Nc(B,z),u){case 0:W=t2(null,W,B,z,e);break e;case 1:W=$3(null,W,B,z,e);break e;case 11:W=j3(null,W,B,z,e);break e;case 14:W=K3(null,W,B,Nc(B.type,z),I,e);break e}throw Error(Ka(306,B,""))}return W;case 0:return I=W.type,B=W.pendingProps,B=W.elementType===I?B:Nc(I,B),t2(z,W,I,B,e);case 1:return I=W.type,B=W.pendingProps,B=W.elementType===I?B:Nc(I,B),$3(z,W,I,B,e);case 3:if(q3(W),I=W.updateQueue,z===null||I===null)throw Error(Ka(282));if(I=W.pendingProps,B=W.memoizedState,B=B!==null?B.element:null,M3(z,W),b0(W,I,null,e),I=W.memoizedState.element,I===B)Xb(),W=Ah(z,W,e);else{if(B=W.stateNode,(u=B.hydrate)&&(vv=Gp(W.stateNode.containerInfo.firstChild),Th=W,u=eh=!0),u){if(z=B.mutableSourceEagerHydrationData,z!=null)for(B=0;B<z.length;B+=2)u=z[B],u._workInProgressVersionPrimary=z[B+1],$p.push(u);for(e=D3(W,null,I,e),W.child=e;e;)e.flags=e.flags&-3|1024,e=e.sibling}else Rf(z,W,I,e),Xb();W=W.child}return W;case 5:return I3(W),z===null&&Yb(W),I=W.type,B=W.pendingProps,u=z!==null?z.memoizedProps:null,s=B.children,Cb(I,B)?s=null:u!==null&&Cb(I,u)&&(W.flags|=16),Q3(z,W),Rf(z,W,s,e),W.child;case 6:return z===null&&Yb(W),null;case 13:return eT(z,W,e);case 4:return Gb(W,W.stateNode.containerInfo),I=W.pendingProps,z===null?W.child=Ny(W,null,I,e):Rf(z,W,I,e),W.child;case 11:return I=W.type,B=W.pendingProps,B=W.elementType===I?B:Nc(I,B),j3(z,W,I,B,e);case 7:return Rf(z,W,W.pendingProps,e),W.child;case 8:return Rf(z,W,W.pendingProps.children,e),W.child;case 12:return Rf(z,W,W.pendingProps.children,e),W.child;case 10:e:{I=W.type._context,B=W.pendingProps,s=W.memoizedProps,u=B.value;var m=W.type._context;if(ul(Py,m._currentValue),m._currentValue=u,s!==null)if(m=s.value,u=Tc(m,u)?0:(typeof I._calculateChangedBits=="function"?I._calculateChangedBits(m,u):1073741823)|0,u===0){if(s.children===B.children&&!Cf.current){W=Ah(z,W,e);break e}}else for(m=W.child,m!==null&&(m.return=W);m!==null;){var x=m.dependencies;if(x!==null){s=m.child;for(var t=x.firstContext;t!==null;){if(t.context===I&&(t.observedBits&u)!=0){m.tag===1&&(t=cv(-1,e&-e),t.tag=2,hv(m,t)),m.lanes|=e,t=m.alternate,t!==null&&(t.lanes|=e),A3(m.return,e),x.lanes|=e;break}t=t.next}}else s=m.tag===10&&m.type===W.type?null:m.child;if(s!==null)s.return=m;else for(s=m;s!==null;){if(s===W){s=null;break}if(m=s.sibling,m!==null){m.return=s.return,s=m;break}s=s.return}m=s}Rf(z,W,B.children,e),W=W.child}return W;case 9:return B=W.type,u=W.pendingProps,I=u.children,Jp(W,e),B=Ac(B,u.unstable_observedBits),I=I(B),W.flags|=1,Rf(z,W,I,e),W.child;case 14:return B=W.type,u=Nc(B,W.pendingProps),u=Nc(B.type,u),K3(z,W,B,u,I,e);case 15:return J3(z,W,W.type,W.pendingProps,I,e);case 17:return I=W.type,B=W.pendingProps,B=W.elementType===I?B:Nc(I,B),z!==null&&(z.alternate=null,W.alternate=null,W.flags|=2),W.tag=1,Lf(I)?(z=!0,Ey(W)):z=!1,Jp(W,e),L3(W,I,B),Vb(W,I,B,e),r2(null,W,I,!0,z,e);case 19:return iT(z,W,e);case 23:return e2(z,W,e);case 24:return e2(z,W,e)}throw Error(Ka(156,W.tag))};function XM(z,W,e,I){this.tag=z,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=W,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function kc(z,W,e,I){return new XM(z,W,e,I)}function w2(z){return z=z.prototype,!(!z||!z.isReactComponent)}function ZM(z){if(typeof z=="function")return w2(z)?1:0;if(z!=null){if(z=z.$$typeof,z===ry)return 11;if(z===ay)return 14}return 2}function xv(z,W){var e=z.alternate;return e===null?(e=kc(z.tag,W,z.key,z.mode),e.elementType=z.elementType,e.type=z.type,e.stateNode=z.stateNode,e.alternate=z,z.alternate=e):(e.pendingProps=W,e.type=z.type,e.flags=0,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null),e.childLanes=z.childLanes,e.lanes=z.lanes,e.child=z.child,e.memoizedProps=z.memoizedProps,e.memoizedState=z.memoizedState,e.updateQueue=z.updateQueue,W=z.dependencies,e.dependencies=W===null?null:{lanes:W.lanes,firstContext:W.firstContext},e.sibling=z.sibling,e.index=z.index,e.ref=z.ref,e}function tm(z,W,e,I,B,u){var s=2;if(I=z,typeof z=="function")w2(z)&&(s=1);else if(typeof z=="string")s=5;else e:switch(z){case ev:return ad(e.children,B,u,W);case j_:s=8,B|=16;break;case Rx:s=8,B|=1;break;case jd:return z=kc(12,e,W,B|8),z.elementType=jd,z.type=jd,z.lanes=u,z;case Kd:return z=kc(13,e,W,B),z.type=Kd,z.elementType=Kd,z.lanes=u,z;case ny:return z=kc(19,e,W,B),z.elementType=ny,z.lanes=u,z;case Nx:return T2(e,B,u,W);case Bx:return z=kc(24,e,W,B),z.elementType=Bx,z.lanes=u,z;default:if(typeof z=="object"&&z!==null)switch(z.$$typeof){case Dx:s=10;break e;case Ix:s=9;break e;case ry:s=11;break e;case ay:s=14;break e;case zx:s=16,I=null;break e;case Fx:s=22;break e}throw Error(Ka(130,z==null?z:typeof z,""))}return W=kc(s,e,W,B),W.elementType=z,W.type=I,W.lanes=u,W}function ad(z,W,e,I){return z=kc(7,z,I,W),z.lanes=e,z}function T2(z,W,e,I){return z=kc(23,z,I,W),z.elementType=Nx,z.lanes=e,z}function A2(z,W,e){return z=kc(6,z,null,W),z.lanes=e,z}function M2(z,W,e){return W=kc(4,z.children!==null?z.children:[],z.key,W),W.lanes=e,W.stateNode={containerInfo:z.containerInfo,pendingChildren:null,implementation:z.implementation},W}function jM(z,W,e){this.tag=W,this.containerInfo=z,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=e,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=cb(0),this.expirationTimes=cb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cb(0),this.mutableSourceEagerHydrationData=null}function KM(z,W,e){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uv,key:I==null?null:""+I,children:z,containerInfo:W,implementation:e}}function rm(z,W,e,I){var B=W.current,u=ac(),s=dv(B);e:if(e){e=e._reactInternals;t:{if(Vv(e)!==e||e.tag!==1)throw Error(Ka(170));var m=e;do{switch(m.tag){case 3:m=m.stateNode.context;break t;case 1:if(Lf(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break t}}m=m.return}while(m!==null);throw Error(Ka(171))}if(e.tag===1){var x=e.type;if(Lf(x)){e=p3(e,x,m);break e}}e=m}else e=uv;return W.context===null?W.context=e:W.pendingContext=e,W=cv(u,s),W.payload={element:z},I=I===void 0?null:I,I!==null&&(W.callback=I),hv(B,W),gv(B,s,u),s}function S2(z){if(z=z.current,!z.child)return null;switch(z.child.tag){case 5:return z.child.stateNode;default:return z.child.stateNode}}function CT(z,W){if(z=z.memoizedState,z!==null&&z.dehydrated!==null){var e=z.retryLane;z.retryLane=e!==0&&e<W?e:W}}function k2(z,W){CT(z,W),(z=z.alternate)&&CT(z,W)}function JM(){return null}function E2(z,W,e){var I=e!=null&&e.hydrationOptions!=null&&e.hydrationOptions.mutableSources||null;if(e=new jM(z,W,e!=null&&e.hydrate===!0),W=kc(3,null,null,W===2?7:W===1?3:0),e.current=W,W.stateNode=e,Hb(W),z[Wp]=e.current,n3(z.nodeType===8?z.parentNode:z),I)for(z=0;z<I.length;z++){W=I[z];var B=W._getVersion;B=B(W._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[W,B]:e.mutableSourceEagerHydrationData.push(W,B)}this._internalRoot=e}E2.prototype.render=function(z){rm(z,this._internalRoot,null,null)};E2.prototype.unmount=function(){var z=this._internalRoot,W=z.containerInfo;rm(null,z,null,function(){W[Wp]=null})};function N0(z){return!(!z||z.nodeType!==1&&z.nodeType!==9&&z.nodeType!==11&&(z.nodeType!==8||z.nodeValue!==" react-mount-point-unstable "))}function QM(z,W){if(W||(W=z?z.nodeType===9?z.documentElement:z.firstChild:null,W=!(!W||W.nodeType!==1||!W.hasAttribute("data-reactroot"))),!W)for(var e;e=z.lastChild;)z.removeChild(e);return new E2(z,0,W?{hydrate:!0}:void 0)}function nm(z,W,e,I,B){var u=e._reactRootContainer;if(u){var s=u._internalRoot;if(typeof B=="function"){var m=B;B=function(){var t=S2(s);m.call(t)}}rm(W,s,z,B)}else{if(u=e._reactRootContainer=QM(e,I),s=u._internalRoot,typeof B=="function"){var x=B;B=function(){var t=S2(s);x.call(t)}}_T(function(){rm(W,s,z,B)})}return S2(s)}yw=function(z){if(z.tag===13){var W=ac();gv(z,4,W),k2(z,4)}};ib=function(z){if(z.tag===13){var W=ac();gv(z,67108864,W),k2(z,67108864)}};mw=function(z){if(z.tag===13){var W=ac(),e=dv(z);gv(z,e,W),k2(z,e)}};xw=function(z,W){return W()};$x=function(z,W,e){switch(W){case"input":if(Gx(z,e),W=e.name,e.type==="radio"&&W!=null){for(e=z;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+W)+'][type="radio"]'),W=0;W<e.length;W++){var I=e[W];if(I!==z&&I.form===z.form){var B=Sy(I);if(!B)throw Error(Ka(90));Q_(I),Gx(I,B)}}}break;case"textarea":rw(z,e);break;case"select":W=e.value,W!=null&&Dp(z,!!e.multiple,W,!1)}};qx=bT;cw=function(z,W,e,I,B){var u=Yi;Yi|=4;try{return Xv(98,z.bind(null,W,e,I,B))}finally{Yi=u,Yi===0&&(td(),$c())}};eb=function(){(Yi&49)==0&&(OM(),yv())};hw=function(z,W){var e=Yi;Yi|=2;try{return z(W)}finally{Yi=e,Yi===0&&(td(),$c())}};function LT(z,W){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N0(W))throw Error(Ka(200));return KM(z,W,null,e)}var $M={Events:[m0,Yp,Sy,uw,fw,yv,{current:!1}]},B0={findFiberByHostInstance:Gv,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},qM={bundleType:B0.bundleType,version:B0.version,rendererPackageName:B0.rendererPackageName,rendererConfig:B0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bv.ReactCurrentDispatcher,findHostInstanceByFiber:function(z){return z=dw(z),z===null?null:z.stateNode},findFiberByHostInstance:B0.findFiberByHostInstance||JM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var am=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!am.isDisabled&&am.supportsFiber)try{Db=am.inject(qM),Yv=am}catch{}}wc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$M;wc.createPortal=LT;wc.findDOMNode=function(z){if(z==null)return null;if(z.nodeType===1)return z;var W=z._reactInternals;if(W===void 0)throw typeof z.render=="function"?Error(Ka(188)):Error(Ka(268,Object.keys(z)));return z=dw(W),z=z===null?null:z.stateNode,z};wc.flushSync=function(z,W){var e=Yi;if((e&48)!=0)return z(W);Yi|=1;try{if(z)return Xv(99,z.bind(null,W))}finally{Yi=e,$c()}};wc.hydrate=function(z,W,e){if(!N0(W))throw Error(Ka(200));return nm(null,z,W,!0,e)};wc.render=function(z,W,e){if(!N0(W))throw Error(Ka(200));return nm(null,z,W,!1,e)};wc.unmountComponentAtNode=function(z){if(!N0(z))throw Error(Ka(40));return z._reactRootContainer?(_T(function(){nm(null,null,z,!1,function(){z._reactRootContainer=null,z[Wp]=null})}),!0):!1};wc.unstable_batchedUpdates=bT;wc.unstable_createPortal=function(z,W){return LT(z,W,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};wc.unstable_renderSubtreeIntoContainer=function(z,W,e,I){if(!N0(e))throw Error(Ka(200));if(z==null||z._reactInternals===void 0)throw Error(Ka(38));return nm(z,W,e,!1,I)};wc.version="17.0.2";function PT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PT)}catch(z){console.error(z)}}PT(),H_.exports=wc;var UC=H_.exports;function C2(z,W){return z==null||W==null?NaN:z<W?-1:z>W?1:z>=W?0:NaN}function RT(z){let W=z,e=z,I=z;z.length!==2&&(W=(m,x)=>z(m)-x,e=C2,I=(m,x)=>C2(z(m),x));function B(m,x,t=0,i=m.length){if(t<i){if(e(x,x)!==0)return i;do{const a=t+i>>>1;I(m[a],x)<0?t=a+1:i=a}while(t<i)}return t}function u(m,x,t=0,i=m.length){if(t<i){if(e(x,x)!==0)return i;do{const a=t+i>>>1;I(m[a],x)<=0?t=a+1:i=a}while(t<i)}return t}function s(m,x,t=0,i=m.length){const a=B(m,x,t,i-1);return a>t&&W(m[a-1],x)>-W(m[a],x)?a-1:a}return{left:B,center:s,right:u}}function e4(z){return z===null?NaN:+z}const t4=RT(C2),r4=t4.right;RT(e4).center;var n4=r4;function HC(z,W){let e,I;if(W===void 0)for(const B of z)B!=null&&(e===void 0?B>=B&&(e=I=B):(e>B&&(e=B),I<B&&(I=B)));else{let B=-1;for(let u of z)(u=W(u,++B,z))!=null&&(e===void 0?u>=u&&(e=I=u):(e>u&&(e=u),I<u&&(I=u)))}return[e,I]}class DT extends Map{constructor(W,e=o4){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),W!=null)for(const[I,B]of W)this.set(I,B)}get(W){return super.get(IT(this,W))}has(W){return super.has(IT(this,W))}set(W,e){return super.set(a4(this,W),e)}delete(W){return super.delete(i4(this,W))}}function IT({_intern:z,_key:W},e){const I=W(e);return z.has(I)?z.get(I):e}function a4({_intern:z,_key:W},e){const I=W(e);return z.has(I)?z.get(I):(z.set(I,e),e)}function i4({_intern:z,_key:W},e){const I=W(e);return z.has(I)&&(e=z.get(I),z.delete(I)),e}function o4(z){return z!==null&&typeof z=="object"?z.valueOf():z}var L2=Math.sqrt(50),P2=Math.sqrt(10),R2=Math.sqrt(2);function s4(z,W,e){var I,B=-1,u,s,m;if(W=+W,z=+z,e=+e,z===W&&e>0)return[z];if((I=W<z)&&(u=z,z=W,W=u),(m=zT(z,W,e))===0||!isFinite(m))return[];if(m>0){let x=Math.round(z/m),t=Math.round(W/m);for(x*m<z&&++x,t*m>W&&--t,s=new Array(u=t-x+1);++B<u;)s[B]=(x+B)*m}else{m=-m;let x=Math.round(z*m),t=Math.round(W*m);for(x/m<z&&++x,t/m>W&&--t,s=new Array(u=t-x+1);++B<u;)s[B]=(x+B)/m}return I&&s.reverse(),s}function zT(z,W,e){var I=(W-z)/Math.max(0,e),B=Math.floor(Math.log(I)/Math.LN10),u=I/Math.pow(10,B);return B>=0?(u>=L2?10:u>=P2?5:u>=R2?2:1)*Math.pow(10,B):-Math.pow(10,-B)/(u>=L2?10:u>=P2?5:u>=R2?2:1)}function l4(z,W,e){var I=Math.abs(W-z)/Math.max(0,e),B=Math.pow(10,Math.floor(Math.log(I)/Math.LN10)),u=I/B;return u>=L2?B*=10:u>=P2?B*=5:u>=R2&&(B*=2),W<z?-B:B}function u4(z,W,e){z=+z,W=+W,e=(B=arguments.length)<2?(W=z,z=0,1):B<3?1:+e;for(var I=-1,B=Math.max(0,Math.ceil((W-z)/e))|0,u=new Array(B);++I<B;)u[I]=z+I*e;return u}function D2(z,W,e){z.prototype=W.prototype=e,e.constructor=z}function FT(z,W){var e=Object.create(z.prototype);for(var I in W)e[I]=W[I];return e}function U0(){}var H0=.7,im=1/H0,id="\\s*([+-]?\\d+)\\s*",V0="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",nh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f4=/^#([0-9a-f]{3,8})$/,c4=new RegExp("^rgb\\("+[id,id,id]+"\\)$"),h4=new RegExp("^rgb\\("+[nh,nh,nh]+"\\)$"),v4=new RegExp("^rgba\\("+[id,id,id,V0]+"\\)$"),p4=new RegExp("^rgba\\("+[nh,nh,nh,V0]+"\\)$"),d4=new RegExp("^hsl\\("+[V0,nh,nh]+"\\)$"),g4=new RegExp("^hsla\\("+[V0,nh,nh,V0]+"\\)$"),OT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};D2(U0,G0,{copy:function(z){return Object.assign(new this.constructor,this,z)},displayable:function(){return this.rgb().displayable()},hex:NT,formatHex:NT,formatHsl:y4,formatRgb:BT,toString:BT});function NT(){return this.rgb().formatHex()}function y4(){return WT(this).formatHsl()}function BT(){return this.rgb().formatRgb()}function G0(z){var W,e;return z=(z+"").trim().toLowerCase(),(W=f4.exec(z))?(e=W[1].length,W=parseInt(W[1],16),e===6?UT(W):e===3?new ic(W>>8&15|W>>4&240,W>>4&15|W&240,(W&15)<<4|W&15,1):e===8?om(W>>24&255,W>>16&255,W>>8&255,(W&255)/255):e===4?om(W>>12&15|W>>8&240,W>>8&15|W>>4&240,W>>4&15|W&240,((W&15)<<4|W&15)/255):null):(W=c4.exec(z))?new ic(W[1],W[2],W[3],1):(W=h4.exec(z))?new ic(W[1]*255/100,W[2]*255/100,W[3]*255/100,1):(W=v4.exec(z))?om(W[1],W[2],W[3],W[4]):(W=p4.exec(z))?om(W[1]*255/100,W[2]*255/100,W[3]*255/100,W[4]):(W=d4.exec(z))?GT(W[1],W[2]/100,W[3]/100,1):(W=g4.exec(z))?GT(W[1],W[2]/100,W[3]/100,W[4]):OT.hasOwnProperty(z)?UT(OT[z]):z==="transparent"?new ic(NaN,NaN,NaN,0):null}function UT(z){return new ic(z>>16&255,z>>8&255,z&255,1)}function om(z,W,e,I){return I<=0&&(z=W=e=NaN),new ic(z,W,e,I)}function m4(z){return z instanceof U0||(z=G0(z)),z?(z=z.rgb(),new ic(z.r,z.g,z.b,z.opacity)):new ic}function I2(z,W,e,I){return arguments.length===1?m4(z):new ic(z,W,e,I==null?1:I)}function ic(z,W,e,I){this.r=+z,this.g=+W,this.b=+e,this.opacity=+I}D2(ic,I2,FT(U0,{brighter:function(z){return z=z==null?im:Math.pow(im,z),new ic(this.r*z,this.g*z,this.b*z,this.opacity)},darker:function(z){return z=z==null?H0:Math.pow(H0,z),new ic(this.r*z,this.g*z,this.b*z,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HT,formatHex:HT,formatRgb:VT,toString:VT}));function HT(){return"#"+z2(this.r)+z2(this.g)+z2(this.b)}function VT(){var z=this.opacity;return z=isNaN(z)?1:Math.max(0,Math.min(1,z)),(z===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(z===1?")":", "+z+")")}function z2(z){return z=Math.max(0,Math.min(255,Math.round(z)||0)),(z<16?"0":"")+z.toString(16)}function GT(z,W,e,I){return I<=0?z=W=e=NaN:e<=0||e>=1?z=W=NaN:W<=0&&(z=NaN),new ah(z,W,e,I)}function WT(z){if(z instanceof ah)return new ah(z.h,z.s,z.l,z.opacity);if(z instanceof U0||(z=G0(z)),!z)return new ah;if(z instanceof ah)return z;z=z.rgb();var W=z.r/255,e=z.g/255,I=z.b/255,B=Math.min(W,e,I),u=Math.max(W,e,I),s=NaN,m=u-B,x=(u+B)/2;return m?(W===u?s=(e-I)/m+(e<I)*6:e===u?s=(I-W)/m+2:s=(W-e)/m+4,m/=x<.5?u+B:2-u-B,s*=60):m=x>0&&x<1?0:s,new ah(s,m,x,z.opacity)}function x4(z,W,e,I){return arguments.length===1?WT(z):new ah(z,W,e,I==null?1:I)}function ah(z,W,e,I){this.h=+z,this.s=+W,this.l=+e,this.opacity=+I}D2(ah,x4,FT(U0,{brighter:function(z){return z=z==null?im:Math.pow(im,z),new ah(this.h,this.s,this.l*z,this.opacity)},darker:function(z){return z=z==null?H0:Math.pow(H0,z),new ah(this.h,this.s,this.l*z,this.opacity)},rgb:function(){var z=this.h%360+(this.h<0)*360,W=isNaN(z)||isNaN(this.s)?0:this.s,e=this.l,I=e+(e<.5?e:1-e)*W,B=2*e-I;return new ic(F2(z>=240?z-240:z+120,B,I),F2(z,B,I),F2(z<120?z+240:z-120,B,I),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var z=this.opacity;return z=isNaN(z)?1:Math.max(0,Math.min(1,z)),(z===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(z===1?")":", "+z+")")}}));function F2(z,W,e){return(z<60?W+(e-W)*z/60:z<180?e:z<240?W+(e-W)*(240-z)/60:W)*255}var O2=z=>()=>z;function b4(z,W){return function(e){return z+e*W}}function _4(z,W,e){return z=Math.pow(z,e),W=Math.pow(W,e)-z,e=1/e,function(I){return Math.pow(z+I*W,e)}}function w4(z){return(z=+z)==1?YT:function(W,e){return e-W?_4(W,e,z):O2(isNaN(W)?e:W)}}function YT(z,W){var e=W-z;return e?b4(z,e):O2(isNaN(z)?W:z)}var XT=function z(W){var e=w4(W);function I(B,u){var s=e((B=I2(B)).r,(u=I2(u)).r),m=e(B.g,u.g),x=e(B.b,u.b),t=YT(B.opacity,u.opacity);return function(i){return B.r=s(i),B.g=m(i),B.b=x(i),B.opacity=t(i),B+""}}return I.gamma=z,I}(1);function T4(z,W){W||(W=[]);var e=z?Math.min(W.length,z.length):0,I=W.slice(),B;return function(u){for(B=0;B<e;++B)I[B]=z[B]*(1-u)+W[B]*u;return I}}function A4(z){return ArrayBuffer.isView(z)&&!(z instanceof DataView)}function M4(z,W){var e=W?W.length:0,I=z?Math.min(e,z.length):0,B=new Array(I),u=new Array(e),s;for(s=0;s<I;++s)B[s]=U2(z[s],W[s]);for(;s<e;++s)u[s]=W[s];return function(m){for(s=0;s<I;++s)u[s]=B[s](m);return u}}function S4(z,W){var e=new Date;return z=+z,W=+W,function(I){return e.setTime(z*(1-I)+W*I),e}}function sm(z,W){return z=+z,W=+W,function(e){return z*(1-e)+W*e}}function k4(z,W){var e={},I={},B;(z===null||typeof z!="object")&&(z={}),(W===null||typeof W!="object")&&(W={});for(B in W)B in z?e[B]=U2(z[B],W[B]):I[B]=W[B];return function(u){for(B in e)I[B]=e[B](u);return I}}var N2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,B2=new RegExp(N2.source,"g");function E4(z){return function(){return z}}function C4(z){return function(W){return z(W)+""}}function L4(z,W){var e=N2.lastIndex=B2.lastIndex=0,I,B,u,s=-1,m=[],x=[];for(z=z+"",W=W+"";(I=N2.exec(z))&&(B=B2.exec(W));)(u=B.index)>e&&(u=W.slice(e,u),m[s]?m[s]+=u:m[++s]=u),(I=I[0])===(B=B[0])?m[s]?m[s]+=B:m[++s]=B:(m[++s]=null,x.push({i:s,x:sm(I,B)})),e=B2.lastIndex;return e<W.length&&(u=W.slice(e),m[s]?m[s]+=u:m[++s]=u),m.length<2?x[0]?C4(x[0].x):E4(W):(W=x.length,function(t){for(var i=0,a;i<W;++i)m[(a=x[i]).i]=a.x(t);return m.join("")})}function U2(z,W){var e=typeof W,I;return W==null||e==="boolean"?O2(W):(e==="number"?sm:e==="string"?(I=G0(W))?(W=I,XT):L4:W instanceof G0?XT:W instanceof Date?S4:A4(W)?T4:Array.isArray(W)?M4:typeof W.valueOf!="function"&&typeof W.toString!="function"||isNaN(W)?k4:sm)(z,W)}function P4(z,W){return z=+z,W=+W,function(e){return Math.round(z*(1-e)+W*e)}}const H2=Math.PI,V2=2*H2,$v=1e-6,R4=V2-$v;function G2(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ZT(){return new G2}G2.prototype=ZT.prototype={constructor:G2,moveTo:function(z,W){this._+="M"+(this._x0=this._x1=+z)+","+(this._y0=this._y1=+W)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(z,W){this._+="L"+(this._x1=+z)+","+(this._y1=+W)},quadraticCurveTo:function(z,W,e,I){this._+="Q"+ +z+","+ +W+","+(this._x1=+e)+","+(this._y1=+I)},bezierCurveTo:function(z,W,e,I,B,u){this._+="C"+ +z+","+ +W+","+ +e+","+ +I+","+(this._x1=+B)+","+(this._y1=+u)},arcTo:function(z,W,e,I,B){z=+z,W=+W,e=+e,I=+I,B=+B;var u=this._x1,s=this._y1,m=e-z,x=I-W,t=u-z,i=s-W,a=t*t+i*i;if(B<0)throw new Error("negative radius: "+B);if(this._x1===null)this._+="M"+(this._x1=z)+","+(this._y1=W);else if(a>$v)if(!(Math.abs(i*m-x*t)>$v)||!B)this._+="L"+(this._x1=z)+","+(this._y1=W);else{var r=e-u,n=I-s,f=m*m+x*x,l=r*r+n*n,o=Math.sqrt(f),c=Math.sqrt(a),v=B*Math.tan((H2-Math.acos((f+a-l)/(2*o*c)))/2),d=v/c,p=v/o;Math.abs(d-1)>$v&&(this._+="L"+(z+d*t)+","+(W+d*i)),this._+="A"+B+","+B+",0,0,"+ +(i*r>t*n)+","+(this._x1=z+p*m)+","+(this._y1=W+p*x)}},arc:function(z,W,e,I,B,u){z=+z,W=+W,e=+e,u=!!u;var s=e*Math.cos(I),m=e*Math.sin(I),x=z+s,t=W+m,i=1^u,a=u?I-B:B-I;if(e<0)throw new Error("negative radius: "+e);this._x1===null?this._+="M"+x+","+t:(Math.abs(this._x1-x)>$v||Math.abs(this._y1-t)>$v)&&(this._+="L"+x+","+t),!!e&&(a<0&&(a=a%V2+V2),a>R4?this._+="A"+e+","+e+",0,1,"+i+","+(z-s)+","+(W-m)+"A"+e+","+e+",0,1,"+i+","+(this._x1=x)+","+(this._y1=t):a>$v&&(this._+="A"+e+","+e+",0,"+ +(a>=H2)+","+i+","+(this._x1=z+e*Math.cos(B))+","+(this._y1=W+e*Math.sin(B))))},rect:function(z,W,e,I){this._+="M"+(this._x0=this._x1=+z)+","+(this._y0=this._y1=+W)+"h"+ +e+"v"+ +I+"h"+-e+"Z"},toString:function(){return this._}};function D4(z){return Math.abs(z=Math.round(z))>=1e21?z.toLocaleString("en").replace(/,/g,""):z.toString(10)}function lm(z,W){if((e=(z=W?z.toExponential(W-1):z.toExponential()).indexOf("e"))<0)return null;var e,I=z.slice(0,e);return[I.length>1?I[0]+I.slice(2):I,+z.slice(e+1)]}function od(z){return z=lm(Math.abs(z)),z?z[1]:NaN}function I4(z,W){return function(e,I){for(var B=e.length,u=[],s=0,m=z[0],x=0;B>0&&m>0&&(x+m+1>I&&(m=Math.max(1,I-x)),u.push(e.substring(B-=m,B+m)),!((x+=m+1)>I));)m=z[s=(s+1)%z.length];return u.reverse().join(W)}}function z4(z){return function(W){return W.replace(/[0-9]/g,function(e){return z[+e]})}}var F4=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function um(z){if(!(W=F4.exec(z)))throw new Error("invalid format: "+z);var W;return new W2({fill:W[1],align:W[2],sign:W[3],symbol:W[4],zero:W[5],width:W[6],comma:W[7],precision:W[8]&&W[8].slice(1),trim:W[9],type:W[10]})}um.prototype=W2.prototype;function W2(z){this.fill=z.fill===void 0?" ":z.fill+"",this.align=z.align===void 0?">":z.align+"",this.sign=z.sign===void 0?"-":z.sign+"",this.symbol=z.symbol===void 0?"":z.symbol+"",this.zero=!!z.zero,this.width=z.width===void 0?void 0:+z.width,this.comma=!!z.comma,this.precision=z.precision===void 0?void 0:+z.precision,this.trim=!!z.trim,this.type=z.type===void 0?"":z.type+""}W2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function O4(z){e:for(var W=z.length,e=1,I=-1,B;e<W;++e)switch(z[e]){case".":I=B=e;break;case"0":I===0&&(I=e),B=e;break;default:if(!+z[e])break e;I>0&&(I=0);break}return I>0?z.slice(0,I)+z.slice(B+1):z}var jT;function N4(z,W){var e=lm(z,W);if(!e)return z+"";var I=e[0],B=e[1],u=B-(jT=Math.max(-8,Math.min(8,Math.floor(B/3)))*3)+1,s=I.length;return u===s?I:u>s?I+new Array(u-s+1).join("0"):u>0?I.slice(0,u)+"."+I.slice(u):"0."+new Array(1-u).join("0")+lm(z,Math.max(0,W+u-1))[0]}function KT(z,W){var e=lm(z,W);if(!e)return z+"";var I=e[0],B=e[1];return B<0?"0."+new Array(-B).join("0")+I:I.length>B+1?I.slice(0,B+1)+"."+I.slice(B+1):I+new Array(B-I.length+2).join("0")}var JT={"%":(z,W)=>(z*100).toFixed(W),b:z=>Math.round(z).toString(2),c:z=>z+"",d:D4,e:(z,W)=>z.toExponential(W),f:(z,W)=>z.toFixed(W),g:(z,W)=>z.toPrecision(W),o:z=>Math.round(z).toString(8),p:(z,W)=>KT(z*100,W),r:KT,s:N4,X:z=>Math.round(z).toString(16).toUpperCase(),x:z=>Math.round(z).toString(16)};function QT(z){return z}var $T=Array.prototype.map,qT=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function B4(z){var W=z.grouping===void 0||z.thousands===void 0?QT:I4($T.call(z.grouping,Number),z.thousands+""),e=z.currency===void 0?"":z.currency[0]+"",I=z.currency===void 0?"":z.currency[1]+"",B=z.decimal===void 0?".":z.decimal+"",u=z.numerals===void 0?QT:z4($T.call(z.numerals,String)),s=z.percent===void 0?"%":z.percent+"",m=z.minus===void 0?"\u2212":z.minus+"",x=z.nan===void 0?"NaN":z.nan+"";function t(a){a=um(a);var r=a.fill,n=a.align,f=a.sign,l=a.symbol,o=a.zero,c=a.width,v=a.comma,d=a.precision,p=a.trim,y=a.type;y==="n"?(v=!0,y="g"):JT[y]||(d===void 0&&(d=12),p=!0,y="g"),(o||r==="0"&&n==="=")&&(o=!0,r="0",n="=");var g=l==="$"?e:l==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",A=l==="$"?I:/[%p]/.test(y)?s:"",b=JT[y],M=/[defgprs%]/.test(y);d=d===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d));function w(T){var _=g,h=A,L,S,k;if(y==="c")h=b(T)+h,T="";else{T=+T;var P=T<0||1/T<0;if(T=isNaN(T)?x:b(Math.abs(T),d),p&&(T=O4(T)),P&&+T==0&&f!=="+"&&(P=!1),_=(P?f==="("?f:m:f==="-"||f==="("?"":f)+_,h=(y==="s"?qT[8+jT/3]:"")+h+(P&&f==="("?")":""),M){for(L=-1,S=T.length;++L<S;)if(k=T.charCodeAt(L),48>k||k>57){h=(k===46?B+T.slice(L+1):T.slice(L))+h,T=T.slice(0,L);break}}}v&&!o&&(T=W(T,1/0));var O=_.length+T.length+h.length,F=O<c?new Array(c-O+1).join(r):"";switch(v&&o&&(T=W(F+T,F.length?c-h.length:1/0),F=""),n){case"<":T=_+T+h+F;break;case"=":T=_+F+T+h;break;case"^":T=F.slice(0,O=F.length>>1)+_+T+h+F.slice(O);break;default:T=F+_+T+h;break}return u(T)}return w.toString=function(){return a+""},w}function i(a,r){var n=t((a=um(a),a.type="f",a)),f=Math.max(-8,Math.min(8,Math.floor(od(r)/3)))*3,l=Math.pow(10,-f),o=qT[8+f/3];return function(c){return n(l*c)+o}}return{format:t,formatPrefix:i}}var fm,e5,t5;U4({thousands:",",grouping:[3],currency:["$",""]});function U4(z){return fm=B4(z),e5=fm.format,t5=fm.formatPrefix,fm}function H4(z){return Math.max(0,-od(Math.abs(z)))}function V4(z,W){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(od(W)/3)))*3-od(Math.abs(z)))}function G4(z,W){return z=Math.abs(z),W=Math.abs(W)-z,Math.max(0,od(W)-od(z))+1}function Y2(z,W){switch(arguments.length){case 0:break;case 1:this.range(z);break;default:this.range(W).domain(z);break}return this}const r5=Symbol("implicit");function n5(){var z=new DT,W=[],e=[],I=r5;function B(u){let s=z.get(u);if(s===void 0){if(I!==r5)return I;z.set(u,s=W.push(u)-1)}return e[s%e.length]}return B.domain=function(u){if(!arguments.length)return W.slice();W=[],z=new DT;for(const s of u)z.has(s)||z.set(s,W.push(s)-1);return B},B.range=function(u){return arguments.length?(e=Array.from(u),B):e.slice()},B.unknown=function(u){return arguments.length?(I=u,B):I},B.copy=function(){return n5(W,e).unknown(I)},Y2.apply(B,arguments),B}function W4(){var z=n5().unknown(void 0),W=z.domain,e=z.range,I=0,B=1,u,s,m=!1,x=0,t=0,i=.5;delete z.unknown;function a(){var r=W().length,n=B<I,f=n?B:I,l=n?I:B;u=(l-f)/Math.max(1,r-x+t*2),m&&(u=Math.floor(u)),f+=(l-f-u*(r-x))*i,s=u*(1-x),m&&(f=Math.round(f),s=Math.round(s));var o=u4(r).map(function(c){return f+u*c});return e(n?o.reverse():o)}return z.domain=function(r){return arguments.length?(W(r),a()):W()},z.range=function(r){return arguments.length?([I,B]=r,I=+I,B=+B,a()):[I,B]},z.rangeRound=function(r){return[I,B]=r,I=+I,B=+B,m=!0,a()},z.bandwidth=function(){return s},z.step=function(){return u},z.round=function(r){return arguments.length?(m=!!r,a()):m},z.padding=function(r){return arguments.length?(x=Math.min(1,t=+r),a()):x},z.paddingInner=function(r){return arguments.length?(x=Math.min(1,r),a()):x},z.paddingOuter=function(r){return arguments.length?(t=+r,a()):t},z.align=function(r){return arguments.length?(i=Math.max(0,Math.min(1,r)),a()):i},z.copy=function(){return W4(W(),[I,B]).round(m).paddingInner(x).paddingOuter(t).align(i)},Y2.apply(a(),arguments)}function Y4(z){return function(){return z}}function X4(z){return+z}var a5=[0,1];function sd(z){return z}function X2(z,W){return(W-=z=+z)?function(e){return(e-z)/W}:Y4(isNaN(W)?NaN:.5)}function Z4(z,W){var e;return z>W&&(e=z,z=W,W=e),function(I){return Math.max(z,Math.min(W,I))}}function j4(z,W,e){var I=z[0],B=z[1],u=W[0],s=W[1];return B<I?(I=X2(B,I),u=e(s,u)):(I=X2(I,B),u=e(u,s)),function(m){return u(I(m))}}function K4(z,W,e){var I=Math.min(z.length,W.length)-1,B=new Array(I),u=new Array(I),s=-1;for(z[I]<z[0]&&(z=z.slice().reverse(),W=W.slice().reverse());++s<I;)B[s]=X2(z[s],z[s+1]),u[s]=e(W[s],W[s+1]);return function(m){var x=n4(z,m,1,I)-1;return u[x](B[x](m))}}function J4(z,W){return W.domain(z.domain()).range(z.range()).interpolate(z.interpolate()).clamp(z.clamp()).unknown(z.unknown())}function Q4(){var z=a5,W=a5,e=U2,I,B,u,s=sd,m,x,t;function i(){var r=Math.min(z.length,W.length);return s!==sd&&(s=Z4(z[0],z[r-1])),m=r>2?K4:j4,x=t=null,a}function a(r){return r==null||isNaN(r=+r)?u:(x||(x=m(z.map(I),W,e)))(I(s(r)))}return a.invert=function(r){return s(B((t||(t=m(W,z.map(I),sm)))(r)))},a.domain=function(r){return arguments.length?(z=Array.from(r,X4),i()):z.slice()},a.range=function(r){return arguments.length?(W=Array.from(r),i()):W.slice()},a.rangeRound=function(r){return W=Array.from(r),e=P4,i()},a.clamp=function(r){return arguments.length?(s=r?!0:sd,i()):s!==sd},a.interpolate=function(r){return arguments.length?(e=r,i()):e},a.unknown=function(r){return arguments.length?(u=r,a):u},function(r,n){return I=r,B=n,i()}}function $4(){return Q4()(sd,sd)}function q4(z,W,e,I){var B=l4(z,W,e),u;switch(I=um(I==null?",f":I),I.type){case"s":{var s=Math.max(Math.abs(z),Math.abs(W));return I.precision==null&&!isNaN(u=V4(B,s))&&(I.precision=u),t5(I,s)}case"":case"e":case"g":case"p":case"r":{I.precision==null&&!isNaN(u=G4(B,Math.max(Math.abs(z),Math.abs(W))))&&(I.precision=u-(I.type==="e"));break}case"f":case"%":{I.precision==null&&!isNaN(u=H4(B))&&(I.precision=u-(I.type==="%")*2);break}}return e5(I)}function eS(z){var W=z.domain;return z.ticks=function(e){var I=W();return s4(I[0],I[I.length-1],e==null?10:e)},z.tickFormat=function(e,I){var B=W();return q4(B[0],B[B.length-1],e==null?10:e,I)},z.nice=function(e){e==null&&(e=10);var I=W(),B=0,u=I.length-1,s=I[B],m=I[u],x,t,i=10;for(m<s&&(t=s,s=m,m=t,t=B,B=u,u=t);i-- >0;){if(t=zT(s,m,e),t===x)return I[B]=s,I[u]=m,W(I);if(t>0)s=Math.floor(s/t)*t,m=Math.ceil(m/t)*t;else if(t<0)s=Math.ceil(s*t)/t,m=Math.floor(m*t)/t;else break;x=t}return z},z}function tS(){var z=$4();return z.copy=function(){return J4(z,tS())},Y2.apply(z,arguments),eS(z)}function ld(z){return function(){return z}}function rS(z){return typeof z=="object"&&"length"in z?z:Array.from(z)}function i5(z){this._context=z}i5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(z,W){switch(z=+z,W=+W,this._point){case 0:this._point=1,this._line?this._context.lineTo(z,W):this._context.moveTo(z,W);break;case 1:this._point=2;default:this._context.lineTo(z,W);break}}};function nS(z){return new i5(z)}function aS(z){return z[0]}function iS(z){return z[1]}function VC(z,W){var e=ld(!0),I=null,B=nS,u=null;z=typeof z=="function"?z:z===void 0?aS:ld(z),W=typeof W=="function"?W:W===void 0?iS:ld(W);function s(m){var x,t=(m=rS(m)).length,i,a=!1,r;for(I==null&&(u=B(r=ZT())),x=0;x<=t;++x)!(x<t&&e(i=m[x],x,m))===a&&((a=!a)?u.lineStart():u.lineEnd()),a&&u.point(+z(i,x,m),+W(i,x,m));if(r)return u=null,r+""||null}return s.x=function(m){return arguments.length?(z=typeof m=="function"?m:ld(+m),s):z},s.y=function(m){return arguments.length?(W=typeof m=="function"?m:ld(+m),s):W},s.defined=function(m){return arguments.length?(e=typeof m=="function"?m:ld(!!m),s):e},s.curve=function(m){return arguments.length?(B=m,I!=null&&(u=B(I)),s):B},s.context=function(m){return arguments.length?(m==null?I=u=null:u=B(I=m),s):I},s}var Z2={exports:{}},oS="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",sS=oS,lS=sS;function o5(){}function s5(){}s5.resetWarningCache=o5;var uS=function(){function z(I,B,u,s,m,x){if(x!==lS){var t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw t.name="Invariant Violation",t}}z.isRequired=z;function W(){return z}var e={array:z,bigint:z,bool:z,func:z,number:z,object:z,string:z,symbol:z,any:z,arrayOf:W,element:z,elementType:z,instanceOf:W,node:z,objectOf:W,oneOf:W,oneOfType:W,shape:W,exact:W,checkPropTypes:s5,resetWarningCache:o5};return e.PropTypes=e,e};Z2.exports=uS();var kh=Z2.exports,l5={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(z){(function(){var W={}.hasOwnProperty;function e(){for(var I=[],B=0;B<arguments.length;B++){var u=arguments[B];if(!!u){var s=typeof u;if(s==="string"||s==="number")I.push(u);else if(Array.isArray(u)){if(u.length){var m=e.apply(null,u);m&&I.push(m)}}else if(s==="object")if(u.toString===Object.prototype.toString)for(var x in u)W.call(u,x)&&u[x]&&I.push(x);else I.push(u.toString())}}return I.join(" ")}z.exports?(e.default=e,z.exports=e):window.classNames=e})()})(l5);var bv=l5.exports;function j2(){return j2=Object.assign||function(z){for(var W=1;W<arguments.length;W++){var e=arguments[W];for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&(z[I]=e[I])}return z},j2.apply(this,arguments)}function fS(z,W){if(z==null)return{};var e={},I=Object.keys(z),B,u;for(u=0;u<I.length;u++)B=I[u],!(W.indexOf(B)>=0)&&(e[B]=z[B]);return e}function K2(z){var W=z.top,e=W===void 0?0:W,I=z.left,B=I===void 0?0:I,u=z.transform,s=z.className,m=z.children,x=z.innerRef,t=fS(z,["top","left","transform","className","children","innerRef"]);return vf.createElement("g",j2({ref:x,className:bv("visx-group",s),transform:u||"translate("+B+", "+e+")"},t),m)}K2.propTypes={top:kh.number,left:kh.number,transform:kh.string,className:kh.string,children:kh.node,innerRef:kh.oneOfType([kh.string,kh.func,kh.object])};function cS(z){if((typeof z=="function"||typeof z=="object"&&!!z)&&"valueOf"in z){var W=z.valueOf();if(typeof W=="number")return W}return z}function hS(z,W){var e=z;return"ticks"in e?e.ticks(W):e.domain().filter(function(I,B,u){return W==null||u.length<=W||B%Math.round((u.length-1)/W)==0})}function vS(z){return z==null?void 0:z.toString()}var pS=["from","to","fill","className","innerRef"];function J2(){return J2=Object.assign||function(z){for(var W=1;W<arguments.length;W++){var e=arguments[W];for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&(z[I]=e[I])}return z},J2.apply(this,arguments)}function dS(z,W){if(z==null)return{};var e={},I=Object.keys(z),B,u;for(u=0;u<I.length;u++)B=I[u],!(W.indexOf(B)>=0)&&(e[B]=z[B]);return e}function u5(z){var W=z.from,e=W===void 0?{x:0,y:0}:W,I=z.to,B=I===void 0?{x:1,y:1}:I,u=z.fill,s=u===void 0?"transparent":u,m=z.className,x=z.innerRef,t=dS(z,pS),i=e.x===B.x||e.y===B.y;return vf.createElement("line",J2({ref:x,className:bv("visx-line",m),x1:e.x,y1:e.y,x2:B.x,y2:B.y,fill:s,shapeRendering:i?"crispEdges":"auto"},t))}var Q2={exports:{}},W0={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS=xh.exports,f5=60103;W0.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var c5=Symbol.for;f5=c5("react.element"),W0.Fragment=c5("react.fragment")}var yS=gS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mS=Object.prototype.hasOwnProperty,xS={key:!0,ref:!0,__self:!0,__source:!0};function h5(z,W,e){var I,B={},u=null,s=null;e!==void 0&&(u=""+e),W.key!==void 0&&(u=""+W.key),W.ref!==void 0&&(s=W.ref);for(I in W)mS.call(W,I)&&!xS.hasOwnProperty(I)&&(B[I]=W[I]);if(z&&z.defaultProps)for(I in W=z.defaultProps,W)B[I]===void 0&&(B[I]=W[I]);return{$$typeof:f5,type:z,key:u,ref:s,props:B,_owner:yS.current}}W0.jsx=h5;W0.jsxs=h5;Q2.exports=W0;const GC=Q2.exports.jsx,WC=Q2.exports.jsxs;var bS=v5;function v5(z,W,e){z instanceof RegExp&&(z=p5(z,e)),W instanceof RegExp&&(W=p5(W,e));var I=d5(z,W,e);return I&&{start:I[0],end:I[1],pre:e.slice(0,I[0]),body:e.slice(I[0]+z.length,I[1]),post:e.slice(I[1]+W.length)}}function p5(z,W){var e=W.match(z);return e?e[0]:null}v5.range=d5;function d5(z,W,e){var I,B,u,s,m,x=e.indexOf(z),t=e.indexOf(W,x+1),i=x;if(x>=0&&t>0){for(I=[],u=e.length;i>=0&&!m;)i==x?(I.push(i),x=e.indexOf(z,i+1)):I.length==1?m=[I.pop(),t]:(B=I.pop(),B<u&&(u=B,s=t),t=e.indexOf(W,i+1)),i=x<t&&x>=0?x:t;I.length&&(m=[u,s])}return m}var _S=g5;function g5(z,W,e){z instanceof RegExp&&(z=y5(z,e)),W instanceof RegExp&&(W=y5(W,e));var I=m5(z,W,e);return I&&{start:I[0],end:I[1],pre:e.slice(0,I[0]),body:e.slice(I[0]+z.length,I[1]),post:e.slice(I[1]+W.length)}}function y5(z,W){var e=W.match(z);return e?e[0]:null}g5.range=m5;function m5(z,W,e){var I,B,u,s,m,x=e.indexOf(z),t=e.indexOf(W,x+1),i=x;if(x>=0&&t>0){if(z===W)return[x,t];for(I=[],u=e.length;i>=0&&!m;)i==x?(I.push(i),x=e.indexOf(z,i+1)):I.length==1?m=[I.pop(),t]:(B=I.pop(),B<u&&(u=B,s=t),t=e.indexOf(W,i+1)),i=x<t&&x>=0?x:t;I.length&&(m=[u,s])}return m}var wS=_S,TS=x5;function x5(z,W,e){var I=z;return AS(z,W).reduce(function(B,u){return B.replace(u.functionIdentifier+"("+u.matches.body+")",MS(u.matches.body,u.functionIdentifier,e,I,W))},z)}function AS(z,W){var e=[],I=typeof W=="string"?new RegExp("\\b("+W+")\\("):W;do{var B=I.exec(z);if(!B)return e;if(B[1]===void 0)throw new Error("Missing the first couple of parenthesis to get the function identifier in "+W);var u=B[1],s=B.index,m=wS("(",")",z.substring(s));if(!m||m.start!==B[0].length-1)throw new SyntaxError(u+"(): missing closing ')' in the value '"+z+"'");e.push({matches:m,functionIdentifier:u}),z=m.post}while(I.test(z));return e}function MS(z,W,e,I,B){return e(x5(z,B,e),W,I)}var gf=function(z){this.value=z};gf.math={isDegree:!0,acos:function(z){return gf.math.isDegree?180/Math.PI*Math.acos(z):Math.acos(z)},add:function(z,W){return z+W},asin:function(z){return gf.math.isDegree?180/Math.PI*Math.asin(z):Math.asin(z)},atan:function(z){return gf.math.isDegree?180/Math.PI*Math.atan(z):Math.atan(z)},acosh:function(z){return Math.log(z+Math.sqrt(z*z-1))},asinh:function(z){return Math.log(z+Math.sqrt(z*z+1))},atanh:function(z){return Math.log((1+z)/(1-z))},C:function(z,W){var e=1,I=z-W,B=W;B<I&&(B=I,I=W);for(var u=B+1;u<=z;u++)e*=u;return e/gf.math.fact(I)},changeSign:function(z){return-z},cos:function(z){return gf.math.isDegree&&(z=gf.math.toRadian(z)),Math.cos(z)},cosh:function(z){return(Math.pow(Math.E,z)+Math.pow(Math.E,-1*z))/2},div:function(z,W){return z/W},fact:function(z){if(z%1!=0)return"NaN";for(var W=1,e=2;e<=z;e++)W*=e;return W},inverse:function(z){return 1/z},log:function(z){return Math.log(z)/Math.log(10)},mod:function(z,W){return z%W},mul:function(z,W){return z*W},P:function(z,W){for(var e=1,I=Math.floor(z)-Math.floor(W)+1;I<=Math.floor(z);I++)e*=I;return e},Pi:function(z,W,e){for(var I=1,B=z;B<=W;B++)I*=Number(e.postfixEval({n:B}));return I},pow10x:function(z){for(var W=1;z--;)W*=10;return W},sigma:function(z,W,e){for(var I=0,B=z;B<=W;B++)I+=Number(e.postfixEval({n:B}));return I},sin:function(z){return gf.math.isDegree&&(z=gf.math.toRadian(z)),Math.sin(z)},sinh:function(z){return(Math.pow(Math.E,z)-Math.pow(Math.E,-1*z))/2},sub:function(z,W){return z-W},tan:function(z){return gf.math.isDegree&&(z=gf.math.toRadian(z)),Math.tan(z)},tanh:function(z){return gf.sinha(z)/gf.cosha(z)},toRadian:function(z){return z*Math.PI/180}};gf.Exception=function(z){this.message=z};var SS=gf,mo=SS;function Tu(z,W){for(var e=0;e<z.length;e++)z[e]+=W;return z}var cm=["sin","cos","tan","pi","(",")","P","C"," ","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow"],$2=["sin","cos","tan","&pi;","(",")","P","C"," ","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow"],q2=[mo.math.sin,mo.math.cos,mo.math.tan,"PI","(",")",mo.math.P,mo.math.C," ".anchor,mo.math.asin,mo.math.acos,mo.math.atan,"7","8","9",Math.floor,mo.math.cosh,mo.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",mo.math.div,mo.math.fact,mo.math.tanh,mo.math.atanh,mo.math.mod,"1","2","3",mo.math.mul,mo.math.sinh,mo.math.asinh,"E",mo.math.log,"0",".",mo.math.add,mo.math.sub,",",mo.math.sigma,"n",mo.math.Pi,Math.pow],kS={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1},hm=[0,0,0,3,4,5,10,10,14,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8],ih={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0},ud={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},ES={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},Uc={},Y0={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},CS={1:!0},yf=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," "],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function LS(z,W,e,I){for(var B=0;B<I;B++)if(z[e+B]!==W[B])return!1;return!0}mo.addToken=function(z){for(var W=0;W<z.length;W++){var e=z[W].token.length,I=-1;yf[e]=yf[e]||[];for(var B=0;B<yf[e].length;B++)if(z[W].token===yf[e][B]){I=cm.indexOf(yf[e][B]);break}I===-1?(cm.push(z[W].token),hm.push(z[W].type),yf.length<=z[W].token.length&&(yf[z[W].token.length]=[]),yf[z[W].token.length].push(z[W].token),q2.push(z[W].value),$2.push(z[W].show)):(cm[I]=z[W].token,hm[I]=z[W].type,q2[I]=z[W].value,$2[I]=z[W].show)}};function PS(z){for(var W=[],e=z.length,I,B,u,s=0;s<e;s++)if(!(s<e-1&&z[s]===" "&&z[s+1]===" ")){for(I="",B=z.length-s>yf.length-2?yf.length-1:z.length-s;B>0;B--)if(yf[B]!==void 0)for(u=0;u<yf[B].length;u++)LS(z,yf[B][u],s,B)&&(I=yf[B][u],u=yf[B].length,B=0);if(s+=I.length-1,I==="")throw new mo.Exception("Can't understand after "+z.slice(s));var m=cm.indexOf(I);W.push({index:m,token:I,type:hm[m],eval:q2[m],precedence:kS[hm[m]],show:$2[m]})}return W}mo.lex=function(z,W){var e={value:mo.math.changeSign,type:0,pre:21,show:"-"},I={value:")",show:")",type:5,pre:0},B={value:"(",type:4,pre:0,show:"("},u=[B],s=[],m=z,x=ih,t=0,i=Uc,a="",r;typeof W!="undefined"&&mo.addToken(W);var n={},f=PS(m);for(r=0;r<f.length;r++){var l=f[r];if(l.type===14){if(r>0&&r<f.length-1&&f[r+1].type===1&&(f[r-1].type===1||f[r-1].type===6))throw new mo.Exception("Unexpected Space");continue}var o=l.token,c=l.type,v=l.eval,d=l.precedence,p=l.show,y=u[u.length-1],g;for(g=s.length;g--&&s[g]===0;)if([0,2,3,4,5,9,11,12,13].indexOf(c)!==-1){if(x[c]!==!0)throw new mo.Exception(o+" is not allowed after "+a);u.push(I),x=ud,i=Y0,Tu(s,-1).pop()}if(x[c]!==!0)throw new mo.Exception(o+" is not allowed after "+a);if(i[c]===!0&&(c=2,v=mo.math.mul,p="&times;",d=3,r=r-1),n={value:v,type:c,pre:d,show:p},c===0)x=ih,i=Uc,Tu(s,2).push(2),u.push(n),u.push(B);else if(c===1)y.type===1?(y.value+=v,Tu(s,1)):u.push(n),x=ud,i=ES;else if(c===2)x=ih,i=Uc,Tu(s,2),u.push(n);else if(c===3)u.push(n),x=ud,i=Y0;else if(c===4)Tu(s,1),t++,x=ih,i=Uc,u.push(n);else if(c===5){if(!t)throw new mo.Exception("Closing parenthesis are more than opening one, wait What!!!");t--,x=ud,i=Y0,u.push(n),Tu(s,1)}else if(c===6){if(y.hasDec)throw new mo.Exception("Two decimals are not allowed in one number");y.type!==1&&(y={value:0,type:1,pre:0},u.push(y),Tu(s,-1)),x=CS,Tu(s,1),i=Uc,y.value+=v,y.hasDec=!0}else c===7&&(x=ud,i=Y0,Tu(s,1),u.push(n));c===8?(x=ih,i=Uc,Tu(s,4).push(4),u.push(n),u.push(B)):c===9?(y.type===9?y.value===mo.math.add?(y.value=v,y.show=p,Tu(s,1)):y.value===mo.math.sub&&p==="-"&&(y.value=mo.math.add,y.show="+",Tu(s,1)):y.type!==5&&y.type!==7&&y.type!==1&&y.type!==3&&y.type!==13?o==="-"&&(x=ih,i=Uc,Tu(s,2).push(2),u.push(e),u.push(B)):(u.push(n),Tu(s,2)),x=ih,i=Uc):c===10?(x=ih,i=Uc,Tu(s,2),u.push(n)):c===11?(x=ih,i=Uc,u.push(n)):c===12?(x=ih,i=Uc,Tu(s,6).push(6),u.push(n),u.push(B)):c===13&&(x=ud,i=Y0,u.push(n)),Tu(s,-1),a=o}for(g=s.length;g--&&s[g]===0;)u.push(I),Tu(s,-1).pop();if(x[5]!==!0)throw new mo.Exception("complete the expression");for(;t--;)u.push(I);return u.push(I),new mo(u)};var RS=mo,e_=RS;e_.prototype.toPostfix=function(){for(var z=[],W,e,I,B,u,s=[{value:"(",type:4,pre:0}],m=this.value,x=1;x<m.length;x++)if(m[x].type===1||m[x].type===3||m[x].type===13)m[x].type===1&&(m[x].value=Number(m[x].value)),z.push(m[x]);else if(m[x].type===4)s.push(m[x]);else if(m[x].type===5)for(;(e=s.pop()).type!==4;)z.push(e);else if(m[x].type===11){for(;(e=s.pop()).type!==4;)z.push(e);s.push(e)}else{W=m[x],B=W.pre,u=s[s.length-1],I=u.pre;var t=u.value=="Math.pow"&&W.value=="Math.pow";if(B>I)s.push(W);else{for(;I>=B&&!t||t&&B<I;)e=s.pop(),u=s[s.length-1],z.push(e),I=u.pre,t=W.value=="Math.pow"&&u.value=="Math.pow";s.push(W)}}return new e_(z)};var DS=e_,X0=DS;X0.prototype.postfixEval=function(z){z=z||{},z.PI=Math.PI,z.E=Math.E;for(var W=[],e,I,B,u=this.value,s=typeof z.n!="undefined",m=0;m<u.length;m++)u[m].type===1?W.push({value:u[m].value,type:1}):u[m].type===3?W.push({value:z[u[m].value],type:1}):u[m].type===0||u[m].type===7?typeof W[W.length-1].type=="undefined"?W[W.length-1].value.push(u[m]):W[W.length-1].value=u[m].value(W[W.length-1].value):u[m].type===8?(e=W.pop(),I=W.pop(),W.push({type:1,value:u[m].value(I.value,e.value)})):u[m].type===10?(e=W.pop(),I=W.pop(),typeof I.type=="undefined"?(I.value=I.concat(e),I.value.push(u[m]),W.push(I)):typeof e.type=="undefined"?(e.unshift(I),e.push(u[m]),W.push(e)):W.push({type:1,value:u[m].value(I.value,e.value)})):u[m].type===2||u[m].type===9?(e=W.pop(),I=W.pop(),typeof I.type=="undefined"?(I=I.concat(e),I.push(u[m]),W.push(I)):typeof e.type=="undefined"?(e.unshift(I),e.push(u[m]),W.push(e)):W.push({type:1,value:u[m].value(I.value,e.value)})):u[m].type===12?(e=W.pop(),typeof e.type!="undefined"&&(e=[e]),I=W.pop(),B=W.pop(),W.push({type:1,value:u[m].value(B.value,I.value,new X0(e))})):u[m].type===13&&(s?W.push({value:z[u[m].value],type:3}):W.push([u[m]]));if(W.length>1)throw new X0.Exception("Uncaught Syntax error");return W[0].value>1e15?"Infinity":parseFloat(W[0].value.toFixed(15))};X0.eval=function(z,W,e){return typeof W=="undefined"?this.lex(z).toPostfix().postfixEval():typeof e=="undefined"?typeof W.length!="undefined"?this.lex(z,W).toPostfix().postfixEval():this.lex(z).toPostfix().postfixEval(W):this.lex(z,W).toPostfix().postfixEval(e)};var IS=X0,b5=IS;b5.prototype.formulaEval=function(){for(var z,W,e,I=[],B=this.value,u=0;u<B.length;u++)B[u].type===1||B[u].type===3?I.push({value:B[u].type===3?B[u].show:B[u].value,type:1}):B[u].type===13?I.push({value:B[u].show,type:1}):B[u].type===0?I[I.length-1]={value:B[u].show+(B[u].show!="-"?"(":"")+I[I.length-1].value+(B[u].show!="-"?")":""),type:0}:B[u].type===7?I[I.length-1]={value:(I[I.length-1].type!=1?"(":"")+I[I.length-1].value+(I[I.length-1].type!=1?")":"")+B[u].show,type:7}:B[u].type===10?(z=I.pop(),W=I.pop(),B[u].show==="P"||B[u].show==="C"?I.push({value:"<sup>"+W.value+"</sup>"+B[u].show+"<sub>"+z.value+"</sub>",type:10}):I.push({value:(W.type!=1?"(":"")+W.value+(W.type!=1?")":"")+"<sup>"+z.value+"</sup>",type:1})):B[u].type===2||B[u].type===9?(z=I.pop(),W=I.pop(),I.push({value:(W.type!=1?"(":"")+W.value+(W.type!=1?")":"")+B[u].show+(z.type!=1?"(":"")+z.value+(z.type!=1?")":""),type:B[u].type})):B[u].type===12&&(z=I.pop(),W=I.pop(),e=I.pop(),I.push({value:B[u].show+"("+e.value+","+W.value+","+z.value+")",type:12}));return I[0].value};var zS=b5,FS=bS,OS=TS,NS=zS,BS=100,US=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g,t_,HS=VS;function VS(z,W){t_=0,W=Math.pow(10,W===void 0?5:W),z=z.replace(/\n+/g," ");function e(B,u,s){if(t_++>BS)throw t_=0,new Error("Call stack overflow for "+s);if(B==="")throw new Error(u+"(): '"+s+"' must contain a non-whitespace string");B=I(B,s);var m=GS(B);if(m.length>1||B.indexOf("var(")>-1)return u+"("+B+")";var x=m[0]||"";x==="%"&&(B=B.replace(/\b[0-9\.]+%/g,function(a){return parseFloat(a.slice(0,-1))*.01}));var t=B.replace(new RegExp(x,"gi"),""),i;try{i=NS.eval(t)}catch{return u+"("+B+")"}return x==="%"&&(i*=100),(u.length||x==="%")&&(i=Math.round(i*W)/W),i+=x,i}function I(B,u){B=B.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(var s="",m=B,x;x=US.exec(m);){x[0].index>0&&(s+=m.substring(0,x[0].index));var t=FS("(",")",m.substring([0].index));if(t.body==="")throw new Error("'"+B+"' must contain a non-whitespace string");var i=e(t.body,"",u);s+=t.pre+i,m=t.post}return s+m}return OS(z,/((?:\-[a-z]+\-)?calc)\(/,e)}function GS(z){for(var W=[],e=[],I=/[\.0-9]([%a-z]+)/gi,B=I.exec(z);B;)!B||!B[1]||(e.indexOf(B[1].toLowerCase())===-1&&(W.push(B[1]),e.push(B[1].toLowerCase())),B=I.exec(z));return W}var r_=HS,WS=typeof Fo=="object"&&Fo&&Fo.Object===Object&&Fo,YS=WS,XS=YS,ZS=typeof self=="object"&&self&&self.Object===Object&&self,jS=XS||ZS||Function("return this")(),n_=jS,KS=n_,JS=KS.Symbol,_5=JS,w5=_5,T5=Object.prototype,QS=T5.hasOwnProperty,$S=T5.toString,Z0=w5?w5.toStringTag:void 0;function qS(z){var W=QS.call(z,Z0),e=z[Z0];try{z[Z0]=void 0;var I=!0}catch{}var B=$S.call(z);return I&&(W?z[Z0]=e:delete z[Z0]),B}var ek=qS,tk=Object.prototype,rk=tk.toString;function nk(z){return rk.call(z)}var ak=nk,A5=_5,ik=ek,ok=ak,sk="[object Null]",lk="[object Undefined]",M5=A5?A5.toStringTag:void 0;function uk(z){return z==null?z===void 0?lk:sk:M5&&M5 in Object(z)?ik(z):ok(z)}var fk=uk;function ck(z){var W=typeof z;return z!=null&&(W=="object"||W=="function")}var S5=ck,hk=fk,vk=S5,pk="[object AsyncFunction]",dk="[object Function]",gk="[object GeneratorFunction]",yk="[object Proxy]";function mk(z){if(!vk(z))return!1;var W=hk(z);return W==dk||W==gk||W==pk||W==yk}var xk=mk,bk=n_,_k=bk["__core-js_shared__"],wk=_k,a_=wk,k5=function(){var z=/[^.]+$/.exec(a_&&a_.keys&&a_.keys.IE_PROTO||"");return z?"Symbol(src)_1."+z:""}();function Tk(z){return!!k5&&k5 in z}var Ak=Tk,Mk=Function.prototype,Sk=Mk.toString;function kk(z){if(z!=null){try{return Sk.call(z)}catch{}try{return z+""}catch{}}return""}var Ek=kk,Ck=xk,Lk=Ak,Pk=S5,Rk=Ek,Dk=/[\\^$.*+?()[\]{}|]/g,Ik=/^\[object .+?Constructor\]$/,zk=Function.prototype,Fk=Object.prototype,Ok=zk.toString,Nk=Fk.hasOwnProperty,Bk=RegExp("^"+Ok.call(Nk).replace(Dk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Uk(z){if(!Pk(z)||Lk(z))return!1;var W=Ck(z)?Bk:Ik;return W.test(Rk(z))}var Hk=Uk;function Vk(z,W){return z==null?void 0:z[W]}var Gk=Vk,Wk=Hk,Yk=Gk;function Xk(z,W){var e=Yk(z,W);return Wk(e)?e:void 0}var E5=Xk,Zk=E5,jk=Zk(Object,"create"),vm=jk,C5=vm;function Kk(){this.__data__=C5?C5(null):{},this.size=0}var Jk=Kk;function Qk(z){var W=this.has(z)&&delete this.__data__[z];return this.size-=W?1:0,W}var $k=Qk,qk=vm,eE="__lodash_hash_undefined__",tE=Object.prototype,rE=tE.hasOwnProperty;function nE(z){var W=this.__data__;if(qk){var e=W[z];return e===eE?void 0:e}return rE.call(W,z)?W[z]:void 0}var aE=nE,iE=vm,oE=Object.prototype,sE=oE.hasOwnProperty;function lE(z){var W=this.__data__;return iE?W[z]!==void 0:sE.call(W,z)}var uE=lE,fE=vm,cE="__lodash_hash_undefined__";function hE(z,W){var e=this.__data__;return this.size+=this.has(z)?0:1,e[z]=fE&&W===void 0?cE:W,this}var vE=hE,pE=Jk,dE=$k,gE=aE,yE=uE,mE=vE;function fd(z){var W=-1,e=z==null?0:z.length;for(this.clear();++W<e;){var I=z[W];this.set(I[0],I[1])}}fd.prototype.clear=pE;fd.prototype.delete=dE;fd.prototype.get=gE;fd.prototype.has=yE;fd.prototype.set=mE;var xE=fd;function bE(){this.__data__=[],this.size=0}var _E=bE;function wE(z,W){return z===W||z!==z&&W!==W}var TE=wE,AE=TE;function ME(z,W){for(var e=z.length;e--;)if(AE(z[e][0],W))return e;return-1}var pm=ME,SE=pm,kE=Array.prototype,EE=kE.splice;function CE(z){var W=this.__data__,e=SE(W,z);if(e<0)return!1;var I=W.length-1;return e==I?W.pop():EE.call(W,e,1),--this.size,!0}var LE=CE,PE=pm;function RE(z){var W=this.__data__,e=PE(W,z);return e<0?void 0:W[e][1]}var DE=RE,IE=pm;function zE(z){return IE(this.__data__,z)>-1}var FE=zE,OE=pm;function NE(z,W){var e=this.__data__,I=OE(e,z);return I<0?(++this.size,e.push([z,W])):e[I][1]=W,this}var BE=NE,UE=_E,HE=LE,VE=DE,GE=FE,WE=BE;function cd(z){var W=-1,e=z==null?0:z.length;for(this.clear();++W<e;){var I=z[W];this.set(I[0],I[1])}}cd.prototype.clear=UE;cd.prototype.delete=HE;cd.prototype.get=VE;cd.prototype.has=GE;cd.prototype.set=WE;var YE=cd,XE=E5,ZE=n_,jE=XE(ZE,"Map"),KE=jE,L5=xE,JE=YE,QE=KE;function $E(){this.size=0,this.__data__={hash:new L5,map:new(QE||JE),string:new L5}}var qE=$E;function e6(z){var W=typeof z;return W=="string"||W=="number"||W=="symbol"||W=="boolean"?z!=="__proto__":z===null}var t6=e6,r6=t6;function n6(z,W){var e=z.__data__;return r6(W)?e[typeof W=="string"?"string":"hash"]:e.map}var dm=n6,a6=dm;function i6(z){var W=a6(this,z).delete(z);return this.size-=W?1:0,W}var o6=i6,s6=dm;function l6(z){return s6(this,z).get(z)}var u6=l6,f6=dm;function c6(z){return f6(this,z).has(z)}var h6=c6,v6=dm;function p6(z,W){var e=v6(this,z),I=e.size;return e.set(z,W),this.size+=e.size==I?0:1,this}var d6=p6,g6=qE,y6=o6,m6=u6,x6=h6,b6=d6;function hd(z){var W=-1,e=z==null?0:z.length;for(this.clear();++W<e;){var I=z[W];this.set(I[0],I[1])}}hd.prototype.clear=g6;hd.prototype.delete=y6;hd.prototype.get=m6;hd.prototype.has=x6;hd.prototype.set=b6;var _6=hd,P5=_6,w6="Expected a function";function i_(z,W){if(typeof z!="function"||W!=null&&typeof W!="function")throw new TypeError(w6);var e=function(){var I=arguments,B=W?W.apply(this,I):I[0],u=e.cache;if(u.has(B))return u.get(B);var s=z.apply(this,I);return e.cache=u.set(B,s)||u,s};return e.cache=new(i_.Cache||P5),e}i_.Cache=P5;var T6=i_,A6=T6,R5="__react_svg_text_measurement_id";function M6(z,W){try{var e=document.getElementById(R5);if(!e){var I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.style.width="0",I.style.height="0",I.style.position="absolute",I.style.top="-100%",I.style.left="-100%",e=document.createElementNS("http://www.w3.org/2000/svg","text"),e.setAttribute("id",R5),I.appendChild(e),document.body.appendChild(I)}return Object.assign(e.style,W),e.textContent=z,e.getComputedTextLength()}catch{return null}}var D5=A6(M6,function(z,W){return z+"_"+JSON.stringify(W)}),S6=["verticalAnchor","scaleToFit","angle","width","lineHeight","capHeight","children","style"];function k6(z,W){if(z==null)return{};var e={},I=Object.keys(z),B,u;for(u=0;u<I.length;u++)B=I[u],!(W.indexOf(B)>=0)&&(e[B]=z[B]);return e}function o_(z){return typeof z=="number"}function I5(z){return typeof z=="number"&&Number.isFinite(z)||typeof z=="string"}function E6(z){var W=z.verticalAnchor,e=W===void 0?"end":W,I=z.scaleToFit,B=I===void 0?!1:I,u=z.angle,s=z.width,m=z.lineHeight,x=m===void 0?"1em":m,t=z.capHeight,i=t===void 0?"0.71em":t,a=z.children,r=z.style,n=k6(z,S6),f=n.x,l=f===void 0?0:f,o=n.y,c=o===void 0?0:o,v=!I5(l)||!I5(c),d=xh.exports.useMemo(function(){var M=a==null?[]:a.toString().split(/(?:(?!\u00A0+)\s+)/);return{wordsWithWidth:M.map(function(w){return{word:w,wordWidth:D5(w,r)||0}}),spaceWidth:D5("\xA0",r)||0}},[a,r]),p=d.wordsWithWidth,y=d.spaceWidth,g=xh.exports.useMemo(function(){return v?[]:s||B?p.reduce(function(M,w){var T=w.word,_=w.wordWidth,h=M[M.length-1];if(h&&(s==null||B||(h.width||0)+_+y<s))h.words.push(T),h.width=h.width||0,h.width+=_+y;else{var L={words:[T],width:_};M.push(L)}return M},[]):[{words:a==null?[]:a.toString().split(/(?:(?!\u00A0+)\s+)/)}]},[v,s,B,a,p,y]),A=xh.exports.useMemo(function(){var M=v?"":r_(e==="start"?"calc("+i+")":e==="middle"?"calc("+(g.length-1)/2+" * -"+x+" + ("+i+" / 2))":"calc("+(g.length-1)+" * -"+x+")");return M},[v,e,i,g.length,x]),b=xh.exports.useMemo(function(){var M=[];if(v)return"";if(o_(l)&&o_(c)&&o_(s)&&B&&g.length>0){var w=g[0].width||1,T=B==="shrink-only"?Math.min(s/w,1):s/w,_=T,h=l-T*l,L=c-_*c;M.push("matrix("+T+", 0, 0, "+_+", "+h+", "+L+")")}return u&&M.push("rotate("+u+", "+l+", "+c+")"),M.length>0?M.join(" "):""},[v,l,c,s,B,g,u]);return{wordsByLines:g,startDy:A,transform:b}}var C6=["dx","dy","textAnchor","innerRef","innerTextRef","verticalAnchor","angle","lineHeight","scaleToFit","capHeight","width"];function s_(){return s_=Object.assign||function(z){for(var W=1;W<arguments.length;W++){var e=arguments[W];for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&(z[I]=e[I])}return z},s_.apply(this,arguments)}function L6(z,W){if(z==null)return{};var e={},I=Object.keys(z),B,u;for(u=0;u<I.length;u++)B=I[u],!(W.indexOf(B)>=0)&&(e[B]=z[B]);return e}var P6={overflow:"visible"};function z5(z){var W=z.dx,e=W===void 0?0:W,I=z.dy,B=I===void 0?0:I,u=z.textAnchor,s=u===void 0?"start":u,m=z.innerRef,x=z.innerTextRef;z.verticalAnchor,z.angle;var t=z.lineHeight,i=t===void 0?"1em":t;z.scaleToFit,z.capHeight,z.width;var a=L6(z,C6),r=a.x,n=r===void 0?0:r,f=a.fontSize,l=E6(z),o=l.wordsByLines,c=l.startDy,v=l.transform;return vf.createElement("svg",{ref:m,x:e,y:B,fontSize:f,style:P6},o.length>0?vf.createElement("text",s_({ref:x,transform:v},a,{textAnchor:s}),o.map(function(d,p){return vf.createElement("tspan",{key:p,x:n,dy:p===0?c:i},d.words.join(" "))})):null)}var R6={top:"top",left:"left",right:"right",bottom:"bottom"},oc=R6;function D6(z){var W=z.labelOffset,e=z.labelProps,I=z.orientation,B=z.range,u=z.tickLabelFontSize,s=z.tickLength,m=I===oc.left||I===oc.top?-1:1,x,t,i;if(I===oc.top||I===oc.bottom){var a=I===oc.bottom&&typeof e.fontSize=="number"?e.fontSize:0;x=(Number(B[0])+Number(B[B.length-1]))/2,t=m*(s+W+u+a)}else x=m*((Number(B[0])+Number(B[B.length-1]))/2),t=-(s+W),i="rotate("+m*90+")";return{x,y:t,transform:i}}function j0(){return j0=Object.assign||function(z){for(var W=1;W<arguments.length;W++){var e=arguments[W];for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&(z[I]=e[I])}return z},j0.apply(this,arguments)}function I6(z){var W=z.hideTicks,e=z.horizontal,I=z.orientation,B=z.tickClassName,u=z.tickComponent,s=z.tickLabelProps,m=z.tickStroke,x=m===void 0?"#222":m,t=z.tickTransform,i=z.ticks,a=z.strokeWidth,r=z.tickLineProps;return i.map(function(n){var f,l=n.value,o=n.index,c=n.from,v=n.to,d=n.formattedValue,p=(f=s[o])!=null?f:{},y=Math.max(10,typeof p.fontSize=="number"&&p.fontSize||0),g=v.y+(e&&I!==oc.top?y:0);return vf.createElement(K2,{key:"visx-tick-"+l+"-"+o,className:bv("visx-axis-tick",B),transform:t},!W&&vf.createElement(u5,j0({from:c,to:v,stroke:x,strokeWidth:a,strokeLinecap:"square"},r)),u?u(j0({},p,{x:v.x,y:g,formattedValue:d})):vf.createElement(z5,j0({x:v.x,y:g},p),d))})}function l_(){return l_=Object.assign||function(z){for(var W=1;W<arguments.length;W++){var e=arguments[W];for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&(z[I]=e[I])}return z},l_.apply(this,arguments)}var F5={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function z6(z){var W=z.axisFromPoint,e=z.axisLineClassName,I=z.axisToPoint,B=z.hideAxisLine,u=z.hideTicks,s=z.horizontal,m=z.label,x=m===void 0?"":m,t=z.labelClassName,i=z.labelOffset,a=i===void 0?14:i,r=z.labelProps,n=r===void 0?F5:r,f=z.orientation,l=f===void 0?oc.bottom:f,o=z.scale,c=z.stroke,v=c===void 0?"#222":c,d=z.strokeDasharray,p=z.strokeWidth,y=p===void 0?1:p,g=z.tickClassName,A=z.tickComponent,b=z.tickLineProps,M=z.tickLabelProps,w=M===void 0?function(){return F5}:M,T=z.tickLength,_=T===void 0?8:T,h=z.tickStroke,L=h===void 0?"#222":h,S=z.tickTransform,k=z.ticks,P=z.ticksComponent,O=P===void 0?I6:P,F=k.map(function(R){var U=R.value,N=R.index;return w(U,N,k)}),D=Math.max.apply(Math,[10].concat(F.map(function(R){return typeof R.fontSize=="number"?R.fontSize:0})));return vf.createElement(vf.Fragment,null,O({hideTicks:u,horizontal:s,orientation:l,scale:o,tickClassName:g,tickComponent:A,tickLabelProps:F,tickStroke:L,tickTransform:S,ticks:k,strokeWidth:y,tickLineProps:b}),!B&&vf.createElement(u5,{className:bv("visx-axis-line",e),from:W,to:I,stroke:v,strokeWidth:y,strokeDasharray:d}),x&&vf.createElement(z5,l_({className:bv("visx-axis-label",t)},D6({labelOffset:a,labelProps:n,orientation:l,range:o.range(),tickLabelFontSize:D,tickLength:_}),n),x))}function F6(z,W){W===void 0&&(W="center");var e=z;if(W!=="start"&&"bandwidth"in e){var I=e.bandwidth();return W==="center"&&(I/=2),e.round()&&(I=Math.round(I)),function(B){var u=e(B);return typeof u=="number"?u+I:u}}return z}function O6(z){var W=z;return"tickFormat"in W?W.tickFormat():vS}function O5(z,W,e){return W in z?Object.defineProperty(z,W,{value:e,enumerable:!0,configurable:!0,writable:!0}):z[W]=e,z}var N6=function(){function z(e){var I=e.x,B=I===void 0?0:I,u=e.y,s=u===void 0?0:u;O5(this,"x",0),O5(this,"y",0),this.x=B,this.y=s}var W=z.prototype;return W.value=function(){return{x:this.x,y:this.y}},W.toArray=function(){return[this.x,this.y]},z}();function gm(z,W){var e=z.x,I=z.y;return new N6(W?{x:e,y:I}:{x:I,y:e})}var B6=["children","axisClassName","hideAxisLine","hideTicks","hideZero","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function u_(){return u_=Object.assign||function(z){for(var W=1;W<arguments.length;W++){var e=arguments[W];for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&(z[I]=e[I])}return z},u_.apply(this,arguments)}function U6(z,W){if(z==null)return{};var e={},I=Object.keys(z),B,u;for(u=0;u<I.length;u++)B=I[u],!(W.indexOf(B)>=0)&&(e[B]=z[B]);return e}function N5(z){var W=z.children,e=W===void 0?z6:W,I=z.axisClassName,B=z.hideAxisLine,u=B===void 0?!1:B,s=z.hideTicks,m=s===void 0?!1:s,x=z.hideZero,t=x===void 0?!1:x,i=z.left,a=i===void 0?0:i,r=z.numTicks,n=r===void 0?10:r,f=z.orientation,l=f===void 0?oc.bottom:f,o=z.rangePadding,c=o===void 0?0:o,v=z.scale,d=z.tickFormat,p=z.tickLength,y=p===void 0?8:p,g=z.tickValues,A=z.top,b=A===void 0?0:A,M=U6(z,B6),w=d!=null?d:O6(v),T=l===oc.left,_=l===oc.top,h=_||l===oc.bottom,L=F6(v),S=T||_?-1:1,k=v.range(),P=gm({x:Number(k[0])+.5-c,y:0},h),O=gm({x:Number(k[k.length-1])+.5+c,y:0},h),F=(g!=null?g:hS(v,n)).filter(function(R){return!t||R!==0&&R!=="0"}).map(function(R,U){return{value:R,index:U}}),D=F.map(function(R){var U=R.value,N=R.index,X=cS(L(U));return{value:U,index:N,from:gm({x:X,y:0},h),to:gm({x:X,y:y*S},h),formattedValue:w(U,N,F)}});return vf.createElement(K2,{className:bv("visx-axis",I),top:b,left:a},e(u_({},M,{axisFromPoint:P,axisToPoint:O,hideAxisLine:u,hideTicks:m,hideZero:t,horizontal:h,numTicks:n,orientation:l,rangePadding:c,scale:v,tickFormat:w,tickLength:y,tickPosition:L,tickSign:S,ticks:D})))}var H6=["axisClassName","labelOffset","tickLabelProps","tickLength"];function f_(){return f_=Object.assign||function(z){for(var W=1;W<arguments.length;W++){var e=arguments[W];for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&(z[I]=e[I])}return z},f_.apply(this,arguments)}function V6(z,W){if(z==null)return{};var e={},I=Object.keys(z),B,u;for(u=0;u<I.length;u++)B=I[u],!(W.indexOf(B)>=0)&&(e[B]=z[B]);return e}var G6=function(){return{dx:"-0.25em",dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"end"}};function YC(z){var W=z.axisClassName,e=z.labelOffset,I=e===void 0?36:e,B=z.tickLabelProps,u=B===void 0?G6:B,s=z.tickLength,m=s===void 0?8:s,x=V6(z,H6);return vf.createElement(N5,f_({axisClassName:bv("visx-axis-left",W),labelOffset:I,orientation:oc.left,tickLabelProps:u,tickLength:m},x))}var W6=["axisClassName","labelOffset","tickLabelProps","tickLength"];function c_(){return c_=Object.assign||function(z){for(var W=1;W<arguments.length;W++){var e=arguments[W];for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&(z[I]=e[I])}return z},c_.apply(this,arguments)}function Y6(z,W){if(z==null)return{};var e={},I=Object.keys(z),B,u;for(u=0;u<I.length;u++)B=I[u],!(W.indexOf(B)>=0)&&(e[B]=z[B]);return e}var X6=function(){return{dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"middle"}};function XC(z){var W=z.axisClassName,e=z.labelOffset,I=e===void 0?8:e,B=z.tickLabelProps,u=B===void 0?X6:B,s=z.tickLength,m=s===void 0?8:s,x=Y6(z,W6);return vf.createElement(N5,c_({axisClassName:bv("visx-axis-bottom",W),labelOffset:I,orientation:oc.bottom,tickLabelProps:u,tickLength:m},x))}var B5={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(z,W){(function(){var e,I="4.17.21",B=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",m="Invalid `variable` option passed into `_.template`",x="__lodash_hash_undefined__",t=500,i="__lodash_placeholder__",a=1,r=2,n=4,f=1,l=2,o=1,c=2,v=4,d=8,p=16,y=32,g=64,A=128,b=256,M=512,w=30,T="...",_=800,h=16,L=1,S=2,k=3,P=1/0,O=9007199254740991,F=17976931348623157e292,D=0/0,R=4294967295,U=R-1,N=R>>>1,X=[["ary",A],["bind",o],["bindKey",c],["curry",d],["curryRight",p],["flip",M],["partial",y],["partialRight",g],["rearg",b]],j="[object Arguments]",ee="[object Array]",q="[object AsyncFunction]",G="[object Boolean]",J="[object Date]",le="[object DOMException]",fe="[object Error]",se="[object Function]",V="[object GeneratorFunction]",Y="[object Map]",ne="[object Number]",te="[object Null]",K="[object Object]",$="[object Promise]",ae="[object Proxy]",ie="[object RegExp]",oe="[object Set]",ue="[object String]",xe="[object Symbol]",he="[object Undefined]",me="[object WeakMap]",be="[object WeakSet]",Ce="[object ArrayBuffer]",Se="[object DataView]",Be="[object Float32Array]",Ye="[object Float64Array]",Xe="[object Int8Array]",Te="[object Int16Array]",Ie="[object Int32Array]",Ze="[object Uint8Array]",rt="[object Uint8ClampedArray]",Ge="[object Uint16Array]",ze="[object Uint32Array]",We=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,Ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xt=/&(?:amp|lt|gt|quot|#39);/g,Pt=/[&<>"']/g,Ut=RegExp(Xt.source),Gt=RegExp(Pt.source),It=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,lt=/<%=([\s\S]+?)%>/g,dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,Pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Je=/[\\^$.*+?()[\]{}|]/g,it=RegExp(Je.source),ht=/^\s+/,zt=/\s/,Lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vt=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tr=/[()=,{}\[\]\/\s]/,qe=/\\(\\)?/g,xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rt=/\w*$/,fr=/^[-+]0x[0-9a-f]+$/i,br=/^0b[01]+$/i,pr=/^\[object .+?Constructor\]$/,Tr=/^0o[0-7]+$/i,Nr=/^(?:0|[1-9]\d*)$/,Ir=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lr=/($^)/,Yr=/['\n\r\u2028\u2029\\]/g,nt="\\ud800-\\udfff",Ae="\\u0300-\\u036f",Ee="\\ufe20-\\ufe2f",Fe="\\u20d0-\\u20ff",Ke=Ae+Ee+Fe,tt="\\u2700-\\u27bf",ut="a-z\\xdf-\\xf6\\xf8-\\xff",ct="\\xac\\xb1\\xd7\\xf7",yt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kt="\\u2000-\\u206f",jt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mr="A-Z\\xc0-\\xd6\\xd8-\\xde",Sr="\\ufe0e\\ufe0f",Lr=ct+yt+kt+jt,Ar="['\u2019]",Ur="["+nt+"]",fn="["+Lr+"]",Cr="["+Ke+"]",_r="\\d+",En="["+tt+"]",Jr="["+ut+"]",Pr="[^"+nt+Lr+_r+tt+ut+Mr+"]",vn="\\ud83c[\\udffb-\\udfff]",xn="(?:"+Cr+"|"+vn+")",qr="[^"+nt+"]",st="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",ir="["+Mr+"]",xr="\\u200d",Qr="(?:"+Jr+"|"+Pr+")",Gr="(?:"+ir+"|"+Pr+")",Br="(?:"+Ar+"(?:d|ll|m|re|s|t|ve))?",kr="(?:"+Ar+"(?:D|LL|M|RE|S|T|VE))?",en=xn+"?",Zn="["+Sr+"]?",Hn="(?:"+xr+"(?:"+[qr,st,Bt].join("|")+")"+Zn+en+")*",da="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Va=Zn+en+Hn,Oa="(?:"+[En,st,Bt].join("|")+")"+Va,wr="(?:"+[qr+Cr+"?",Cr,st,Bt,Ur].join("|")+")",wn=RegExp(Ar,"g"),ln=RegExp(Cr,"g"),jn=RegExp(vn+"(?="+vn+")|"+wr+Va,"g"),Jn=RegExp([ir+"?"+Jr+"+"+Br+"(?="+[fn,ir,"$"].join("|")+")",Gr+"+"+kr+"(?="+[fn,ir+Qr,"$"].join("|")+")",ir+"?"+Qr+"+"+Br,ir+"+"+kr,wa,da,_r,Oa].join("|"),"g"),La=RegExp("["+xr+nt+Ke+Sr+"]"),ga=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ea=-1,la={};la[Be]=la[Ye]=la[Xe]=la[Te]=la[Ie]=la[Ze]=la[rt]=la[Ge]=la[ze]=!0,la[j]=la[ee]=la[Ce]=la[G]=la[Se]=la[J]=la[fe]=la[se]=la[Y]=la[ne]=la[K]=la[ie]=la[oe]=la[ue]=la[me]=!1;var sr={};sr[j]=sr[ee]=sr[Ce]=sr[Se]=sr[G]=sr[J]=sr[Be]=sr[Ye]=sr[Xe]=sr[Te]=sr[Ie]=sr[Y]=sr[ne]=sr[K]=sr[ie]=sr[oe]=sr[ue]=sr[xe]=sr[Ze]=sr[rt]=sr[Ge]=sr[ze]=!0,sr[fe]=sr[se]=sr[me]=!1;var Hr={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},dn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Sn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rn=parseFloat,Mn=parseInt,mr=typeof Fo=="object"&&Fo&&Fo.Object===Object&&Fo,hr=typeof self=="object"&&self&&self.Object===Object&&self,Fr=mr||hr||Function("return this")(),nn=W&&!W.nodeType&&W,On=nn&&!0&&z&&!z.nodeType&&z,ra=On&&On.exports===nn,ua=ra&&mr.process,$n=function(){try{var Tn=On&&On.require&&On.require("util").types;return Tn||ua&&ua.binding&&ua.binding("util")}catch{}}(),Qn=$n&&$n.isArrayBuffer,kn=$n&&$n.isDate,Wn=$n&&$n.isMap,aa=$n&&$n.isRegExp,Ma=$n&&$n.isSet,ui=$n&&$n.isTypedArray;function Na(Tn,ta,Gn){switch(Gn.length){case 0:return Tn.call(ta);case 1:return Tn.call(ta,Gn[0]);case 2:return Tn.call(ta,Gn[0],Gn[1]);case 3:return Tn.call(ta,Gn[0],Gn[1],Gn[2])}return Tn.apply(ta,Gn)}function nu(Tn,ta,Gn,ii){for(var mi=-1,Ei=Tn==null?0:Tn.length;++mi<Ei;){var Ho=Tn[mi];ta(ii,Ho,Gn(Ho),Tn)}return ii}function Eo(Tn,ta){for(var Gn=-1,ii=Tn==null?0:Tn.length;++Gn<ii&&ta(Tn[Gn],Gn,Tn)!==!1;);return Tn}function Xs(Tn,ta){for(var Gn=Tn==null?0:Tn.length;Gn--&&ta(Tn[Gn],Gn,Tn)!==!1;);return Tn}function cl(Tn,ta){for(var Gn=-1,ii=Tn==null?0:Tn.length;++Gn<ii;)if(!ta(Tn[Gn],Gn,Tn))return!1;return!0}function vo(Tn,ta){for(var Gn=-1,ii=Tn==null?0:Tn.length,mi=0,Ei=[];++Gn<ii;){var Ho=Tn[Gn];ta(Ho,Gn,Tn)&&(Ei[mi++]=Ho)}return Ei}function Ki(Tn,ta){var Gn=Tn==null?0:Tn.length;return!!Gn&&vl(Tn,ta,0)>-1}function hl(Tn,ta,Gn){for(var ii=-1,mi=Tn==null?0:Tn.length;++ii<mi;)if(Gn(ta,Tn[ii]))return!0;return!1}function ro(Tn,ta){for(var Gn=-1,ii=Tn==null?0:Tn.length,mi=Array(ii);++Gn<ii;)mi[Gn]=ta(Tn[Gn],Gn,Tn);return mi}function is(Tn,ta){for(var Gn=-1,ii=ta.length,mi=Tn.length;++Gn<ii;)Tn[mi+Gn]=ta[Gn];return Tn}function Vl(Tn,ta,Gn,ii){var mi=-1,Ei=Tn==null?0:Tn.length;for(ii&&Ei&&(Gn=Tn[++mi]);++mi<Ei;)Gn=ta(Gn,Tn[mi],mi,Tn);return Gn}function zu(Tn,ta,Gn,ii){var mi=Tn==null?0:Tn.length;for(ii&&mi&&(Gn=Tn[--mi]);mi--;)Gn=ta(Gn,Tn[mi],mi,Tn);return Gn}function Fu(Tn,ta){for(var Gn=-1,ii=Tn==null?0:Tn.length;++Gn<ii;)if(ta(Tn[Gn],Gn,Tn))return!0;return!1}var Oi=Co("length");function au(Tn){return Tn.split("")}function Gl(Tn){return Tn.match(Ht)||[]}function To(Tn,ta,Gn){var ii;return Gn(Tn,function(mi,Ei,Ho){if(ta(mi,Ei,Ho))return ii=Ei,!1}),ii}function os(Tn,ta,Gn,ii){for(var mi=Tn.length,Ei=Gn+(ii?1:-1);ii?Ei--:++Ei<mi;)if(ta(Tn[Ei],Ei,Tn))return Ei;return-1}function vl(Tn,ta,Gn){return ta===ta?lu(Tn,ta,Gn):os(Tn,no,Gn)}function pl(Tn,ta,Gn,ii){for(var mi=Gn-1,Ei=Tn.length;++mi<Ei;)if(ii(Tn[mi],ta))return mi;return-1}function no(Tn){return Tn!==Tn}function iu(Tn,ta){var Gn=Tn==null?0:Tn.length;return Gn?Vs(Tn,ta)/Gn:D}function Co(Tn){return function(ta){return ta==null?e:ta[Tn]}}function uo(Tn){return function(ta){return Tn==null?e:Tn[ta]}}function Uo(Tn,ta,Gn,ii,mi){return mi(Tn,function(Ei,Ho,Bi){Gn=ii?(ii=!1,Ei):ta(Gn,Ei,Ho,Bi)}),Gn}function Oo(Tn,ta){var Gn=Tn.length;for(Tn.sort(ta);Gn--;)Tn[Gn]=Tn[Gn].value;return Tn}function Vs(Tn,ta){for(var Gn,ii=-1,mi=Tn.length;++ii<mi;){var Ei=ta(Tn[ii]);Ei!==e&&(Gn=Gn===e?Ei:Gn+Ei)}return Gn}function kl(Tn,ta){for(var Gn=-1,ii=Array(Tn);++Gn<Tn;)ii[Gn]=ta(Gn);return ii}function Df(Tn,ta){return ro(ta,function(Gn){return[Gn,Tn[Gn]]})}function Gs(Tn){return Tn&&Tn.slice(0,Au(Tn)+1).replace(ht,"")}function Es(Tn){return function(ta){return Tn(ta)}}function dl(Tn,ta){return ro(ta,function(Gn){return Tn[Gn]})}function jo(Tn,ta){return Tn.has(ta)}function If(Tn,ta){for(var Gn=-1,ii=Tn.length;++Gn<ii&&vl(ta,Tn[Gn],0)>-1;);return Gn}function El(Tn,ta){for(var Gn=Tn.length;Gn--&&vl(ta,Tn[Gn],0)>-1;);return Gn}function Cl(Tn,ta){for(var Gn=Tn.length,ii=0;Gn--;)Tn[Gn]===ta&&++ii;return ii}var qu=uo(Hr),sc=uo(dn);function lc(Tn){return"\\"+Sn[Tn]}function ou(Tn,ta){return Tn==null?e:Tn[ta]}function Ll(Tn){return La.test(Tn)}function Pl(Tn){return ga.test(Tn)}function mf(Tn){for(var ta,Gn=[];!(ta=Tn.next()).done;)Gn.push(ta.value);return Gn}function Wl(Tn){var ta=-1,Gn=Array(Tn.size);return Tn.forEach(function(ii,mi){Gn[++ta]=[mi,ii]}),Gn}function ef(Tn,ta){return function(Gn){return Tn(ta(Gn))}}function Rl(Tn,ta){for(var Gn=-1,ii=Tn.length,mi=0,Ei=[];++Gn<ii;){var Ho=Tn[Gn];(Ho===ta||Ho===i)&&(Tn[Gn]=i,Ei[mi++]=Gn)}return Ei}function su(Tn){var ta=-1,Gn=Array(Tn.size);return Tn.forEach(function(ii){Gn[++ta]=ii}),Gn}function uc(Tn){var ta=-1,Gn=Array(Tn.size);return Tn.forEach(function(ii){Gn[++ta]=[ii,ii]}),Gn}function lu(Tn,ta,Gn){for(var ii=Gn-1,mi=Tn.length;++ii<mi;)if(Tn[ii]===ta)return ii;return-1}function xf(Tn,ta,Gn){for(var ii=Gn+1;ii--;)if(Tn[ii]===ta)return ii;return ii}function Dl(Tn){return Ll(Tn)?zf(Tn):Oi(Tn)}function Ko(Tn){return Ll(Tn)?Ff(Tn):au(Tn)}function Au(Tn){for(var ta=Tn.length;ta--&&zt.test(Tn.charAt(ta)););return ta}var bf=uo(hn);function zf(Tn){for(var ta=jn.lastIndex=0;jn.test(Tn);)++ta;return ta}function Ff(Tn){return Tn.match(jn)||[]}function tf(Tn){return Tn.match(Jn)||[]}var fc=function Tn(ta){ta=ta==null?Fr:uu.defaults(Fr.Object(),ta,uu.pick(Fr,qn));var Gn=ta.Array,ii=ta.Date,mi=ta.Error,Ei=ta.Function,Ho=ta.Math,Bi=ta.Object,qs=ta.RegExp,Jo=ta.String,gs=ta.TypeError,Yl=Gn.prototype,fu=Ei.prototype,_s=Bi.prototype,Xl=ta["__core-js_shared__"],Il=fu.toString,qi=_s.hasOwnProperty,Ou=0,Zl=function(){var ce=/[^.]+$/.exec(Xl&&Xl.keys&&Xl.keys.IE_PROTO||"");return ce?"Symbol(src)_1."+ce:""}(),rf=_s.toString,el=Il.call(Bi),Ec=Fr._,_f=qs("^"+Il.call(qi).replace(Je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zl=ra?ta.Buffer:e,Zs=ta.Symbol,yl=ta.Uint8Array,Mu=zl?zl.allocUnsafe:e,Nu=ef(Bi.getPrototypeOf,Bi),wf=Bi.create,cc=_s.propertyIsEnumerable,Ji=Yl.splice,cu=Zs?Zs.isConcatSpreadable:e,tl=Zs?Zs.iterator:e,us=Zs?Zs.toStringTag:e,Cs=function(){try{var ce=cr(Bi,"defineProperty");return ce({},"",{}),ce}catch{}}(),Bu=ta.clearTimeout!==Fr.clearTimeout&&ta.clearTimeout,Qo=ii&&ii.now!==Fr.Date.now&&ii.now,Of=ta.setTimeout!==Fr.setTimeout&&ta.setTimeout,Ls=Ho.ceil,rl=Ho.floor,ml=Bi.getOwnPropertySymbols,Fl=zl?zl.isBuffer:e,js=ta.isFinite,Lo=Yl.join,ys=ef(Bi.keys,Bi),po=Ho.max,hs=Ho.min,nf=ii.now,Nf=ta.parseInt,_t=Ho.random,Ot=Yl.reverse,ur=cr(ta,"DataView"),rr=cr(ta,"Map"),zr=cr(ta,"Promise"),pn=cr(ta,"Set"),An=cr(ta,"WeakMap"),In=cr(Bi,"create"),Un=An&&new An,ea={},Cn=pu(ur),Yn=pu(rr),Vn=pu(zr),ia=pu(pn),va=pu(An),$a=Zs?Zs.prototype:e,Ya=$a?$a.valueOf:e,ti=$a?$a.toString:e;function Kt(ce){if(Os(ce)&&!Wi(ce)&&!(ce instanceof Ba)){if(ce instanceof qa)return ce;if(qi.call(ce,"__wrapped__"))return du(ce)}return new qa(ce)}var fa=function(){function ce(){}return function(_e){if(!Fs(_e))return{};if(wf)return wf(_e);ce.prototype=_e;var He=new ce;return ce.prototype=e,He}}();function Ca(){}function qa(ce,_e){this.__wrapped__=ce,this.__actions__=[],this.__chain__=!!_e,this.__index__=0,this.__values__=e}Kt.templateSettings={escape:It,evaluate:Ct,interpolate:lt,variable:"",imports:{_:Kt}},Kt.prototype=Ca.prototype,Kt.prototype.constructor=Kt,qa.prototype=fa(Ca.prototype),qa.prototype.constructor=qa;function Ba(ce){this.__wrapped__=ce,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function Ui(){var ce=new Ba(this.__wrapped__);return ce.__actions__=Ks(this.__actions__),ce.__dir__=this.__dir__,ce.__filtered__=this.__filtered__,ce.__iteratees__=Ks(this.__iteratees__),ce.__takeCount__=this.__takeCount__,ce.__views__=Ks(this.__views__),ce}function Hi(){if(this.__filtered__){var ce=new Ba(this);ce.__dir__=-1,ce.__filtered__=!0}else ce=this.clone(),ce.__dir__*=-1;return ce}function Xi(){var ce=this.__wrapped__.value(),_e=this.__dir__,He=Wi(ce),At=_e<0,Qt=He?ce.length:0,yr=on(0,Qt,this.__views__),rn=yr.start,sn=yr.end,Dn=sn-rn,xa=At?sn:rn-1,ba=this.__iteratees__,za=ba.length,oi=0,Ti=hs(Dn,this.__takeCount__);if(!He||!At&&Qt==Dn&&Ti==Dn)return bo(ce,this.__actions__);var Ci=[];e:for(;Dn--&&oi<Ti;){xa+=_e;for(var so=-1,Di=ce[xa];++so<za;){var ji=ba[so],to=ji.iteratee,ju=ji.type,wo=to(Di);if(ju==S)Di=wo;else if(!wo){if(ju==L)continue e;break e}}Ci[oi++]=Di}return Ci}Ba.prototype=fa(Ca.prototype),Ba.prototype.constructor=Ba;function zi(ce){var _e=-1,He=ce==null?0:ce.length;for(this.clear();++_e<He;){var At=ce[_e];this.set(At[0],At[1])}}function ki(){this.__data__=In?In(null):{},this.size=0}function fs(ce){var _e=this.has(ce)&&delete this.__data__[ce];return this.size-=_e?1:0,_e}function Vo(ce){var _e=this.__data__;if(In){var He=_e[ce];return He===x?e:He}return qi.call(_e,ce)?_e[ce]:e}function di(ce){var _e=this.__data__;return In?_e[ce]!==e:qi.call(_e,ce)}function Fa(ce,_e){var He=this.__data__;return this.size+=this.has(ce)?0:1,He[ce]=In&&_e===e?x:_e,this}zi.prototype.clear=ki,zi.prototype.delete=fs,zi.prototype.get=Vo,zi.prototype.has=di,zi.prototype.set=Fa;function Li(ce){var _e=-1,He=ce==null?0:ce.length;for(this.clear();++_e<He;){var At=ce[_e];this.set(At[0],At[1])}}function $o(){this.__data__=[],this.size=0}function ss(ce){var _e=this.__data__,He=Uu(_e,ce);if(He<0)return!1;var At=_e.length-1;return He==At?_e.pop():Ji.call(_e,He,1),--this.size,!0}function nl(ce){var _e=this.__data__,He=Uu(_e,ce);return He<0?e:_e[He][1]}function Ol(ce){return Uu(this.__data__,ce)>-1}function Ps(ce,_e){var He=this.__data__,At=Uu(He,ce);return At<0?(++this.size,He.push([ce,_e])):He[At][1]=_e,this}Li.prototype.clear=$o,Li.prototype.delete=ss,Li.prototype.get=nl,Li.prototype.has=Ol,Li.prototype.set=Ps;function ws(ce){var _e=-1,He=ce==null?0:ce.length;for(this.clear();++_e<He;){var At=ce[_e];this.set(At[0],At[1])}}function xl(){this.size=0,this.__data__={hash:new zi,map:new(rr||Li),string:new zi}}function al(ce){var _e=Yt(this,ce).delete(ce);return this.size-=_e?1:0,_e}function cs(ce){return Yt(this,ce).get(ce)}function af(ce){return Yt(this,ce).has(ce)}function Tf(ce,_e){var He=Yt(this,ce),At=He.size;return He.set(ce,_e),this.size+=He.size==At?0:1,this}ws.prototype.clear=xl,ws.prototype.delete=al,ws.prototype.get=cs,ws.prototype.has=af,ws.prototype.set=Tf;function vs(ce){var _e=-1,He=ce==null?0:ce.length;for(this.__data__=new ws;++_e<He;)this.add(ce[_e])}function Bf(ce){return this.__data__.set(ce,x),this}function of(ce){return this.__data__.has(ce)}vs.prototype.add=vs.prototype.push=Bf,vs.prototype.has=of;function jl(ce){var _e=this.__data__=new Li(ce);this.size=_e.size}function hc(){this.__data__=new Li,this.size=0}function Uf(ce){var _e=this.__data__,He=_e.delete(ce);return this.size=_e.size,He}function vc(ce){return this.__data__.get(ce)}function Nl(ce){return this.__data__.has(ce)}function Cc(ce,_e){var He=this.__data__;if(He instanceof Li){var At=He.__data__;if(!rr||At.length<B-1)return At.push([ce,_e]),this.size=++He.size,this;He=this.__data__=new ws(At)}return He.set(ce,_e),this.size=He.size,this}jl.prototype.clear=hc,jl.prototype.delete=Uf,jl.prototype.get=vc,jl.prototype.has=Nl,jl.prototype.set=Cc;function Hf(ce,_e){var He=Wi(ce),At=!He&&qf(ce),Qt=!He&&!At&&Ic(ce),yr=!He&&!At&&!Qt&&Vh(ce),rn=He||At||Qt||yr,sn=rn?kl(ce.length,Jo):[],Dn=sn.length;for(var xa in ce)(_e||qi.call(ce,xa))&&!(rn&&(xa=="length"||Qt&&(xa=="offset"||xa=="parent")||yr&&(xa=="buffer"||xa=="byteLength"||xa=="byteOffset")||Ia(xa,Dn)))&&sn.push(xa);return sn}function Vf(ce){var _e=ce.length;return _e?ce[_a(0,_e-1)]:e}function Rs(ce,_e){return Wu(Ks(ce),ft(_e,0,ce.length))}function pc(ce){return Wu(Ks(ce))}function dc(ce,_e,He){(He!==e&&!$f(ce[_e],He)||He===e&&!(_e in ce))&&je(ce,_e,He)}function Ds(ce,_e,He){var At=ce[_e];(!(qi.call(ce,_e)&&$f(At,He))||He===e&&!(_e in ce))&&je(ce,_e,He)}function Uu(ce,_e){for(var He=ce.length;He--;)if($f(ce[He][0],_e))return He;return-1}function Gf(ce,_e,He,At){return nr(ce,function(Qt,yr,rn){_e(At,Qt,He(Qt),rn)}),At}function Wf(ce,_e){return ce&&Su(_e,Hl(_e),ce)}function Oe(ce,_e){return ce&&Su(_e,Xu(_e),ce)}function je(ce,_e,He){_e=="__proto__"&&Cs?Cs(ce,_e,{configurable:!0,enumerable:!0,value:He,writable:!0}):ce[_e]=He}function ot(ce,_e){for(var He=-1,At=_e.length,Qt=Gn(At),yr=ce==null;++He<At;)Qt[He]=yr?e:Fd(ce,_e[He]);return Qt}function ft(ce,_e,He){return ce===ce&&(He!==e&&(ce=ce<=He?ce:He),_e!==e&&(ce=ce>=_e?ce:_e)),ce}function St(ce,_e,He,At,Qt,yr){var rn,sn=_e&a,Dn=_e&r,xa=_e&n;if(He&&(rn=Qt?He(ce,At,Qt,yr):He(ce)),rn!==e)return rn;if(!Fs(ce))return ce;var ba=Wi(ce);if(ba){if(rn=Kn(ce),!sn)return Ks(ce,rn)}else{var za=Vr(ce),oi=za==se||za==V;if(Ic(ce))return Hu(ce,sn);if(za==K||za==j||oi&&!Qt){if(rn=Dn||oi?{}:ca(ce),!sn)return Dn?gc(ce,Oe(rn,ce)):Kl(ce,Wf(rn,ce))}else{if(!sr[za])return Qt?ce:{};rn=pa(ce,za,sn)}}yr||(yr=new jl);var Ti=yr.get(ce);if(Ti)return Ti;yr.set(ce,rn),xg(ce)?ce.forEach(function(Di){rn.add(St(Di,_e,He,Di,ce,yr))}):dg(ce)&&ce.forEach(function(Di,ji){rn.set(ji,St(Di,_e,He,ji,ce,yr))});var Ci=xa?Dn?Le:ye:Dn?Xu:Hl,so=ba?e:Ci(ce);return Eo(so||ce,function(Di,ji){so&&(ji=Di,Di=ce[ji]),Ds(rn,ji,St(Di,_e,He,ji,ce,yr))}),rn}function Tt(ce){var _e=Hl(ce);return function(He){return Et(He,ce,_e)}}function Et(ce,_e,He){var At=He.length;if(ce==null)return!At;for(ce=Bi(ce);At--;){var Qt=He[At],yr=_e[Qt],rn=ce[Qt];if(rn===e&&!(Qt in ce)||!yr(rn))return!1}return!0}function or(ce,_e,He){if(typeof ce!="function")throw new gs(s);return Bl(function(){ce.apply(e,He)},_e)}function vr(ce,_e,He,At){var Qt=-1,yr=Ki,rn=!0,sn=ce.length,Dn=[],xa=_e.length;if(!sn)return Dn;He&&(_e=ro(_e,Es(He))),At?(yr=hl,rn=!1):_e.length>=B&&(yr=jo,rn=!1,_e=new vs(_e));e:for(;++Qt<sn;){var ba=ce[Qt],za=He==null?ba:He(ba);if(ba=At||ba!==0?ba:0,rn&&za===za){for(var oi=xa;oi--;)if(_e[oi]===za)continue e;Dn.push(ba)}else yr(_e,za,At)||Dn.push(ba)}return Dn}var nr=Wc(Pa),gr=Wc(ci,!0);function Or(ce,_e){var He=!0;return nr(ce,function(At,Qt,yr){return He=!!_e(At,Qt,yr),He}),He}function Kr(ce,_e,He){for(var At=-1,Qt=ce.length;++At<Qt;){var yr=ce[At],rn=_e(yr);if(rn!=null&&(sn===e?rn===rn&&!eu(rn):He(rn,sn)))var sn=rn,Dn=yr}return Dn}function cn(ce,_e,He,At){var Qt=ce.length;for(He=$i(He),He<0&&(He=-He>Qt?0:Qt+He),At=At===e||At>Qt?Qt:$i(At),At<0&&(At+=Qt),At=He>At?0:bg(At);He<At;)ce[He++]=_e;return ce}function Ln(ce,_e){var He=[];return nr(ce,function(At,Qt,yr){_e(At,Qt,yr)&&He.push(At)}),He}function zn(ce,_e,He,At,Qt){var yr=-1,rn=ce.length;for(He||(He=Da),Qt||(Qt=[]);++yr<rn;){var sn=ce[yr];_e>0&&He(sn)?_e>1?zn(sn,_e-1,He,At,Qt):is(Qt,sn):At||(Qt[Qt.length]=sn)}return Qt}var oa=oh(),Ua=oh(!0);function Pa(ce,_e){return ce&&oa(ce,_e,Hl)}function ci(ce,_e){return ce&&Ua(ce,_e,Hl)}function si(ce,_e){return vo(_e,function(He){return mc(ce[He])})}function hi(ce,_e){_e=Wo(_e,ce);for(var He=0,At=_e.length;ce!=null&&He<At;)ce=ce[ds(_e[He++])];return He&&He==At?ce:e}function Ri(ce,_e,He){var At=_e(ce);return Wi(ce)?At:is(At,He(ce))}function Vi(ce){return ce==null?ce===e?he:te:us&&us in Bi(ce)?Dr(ce):Zi(ce)}function xi(ce,_e){return ce>_e}function Po(ce,_e){return ce!=null&&qi.call(ce,_e)}function qo(ce,_e){return ce!=null&&_e in Bi(ce)}function ps(ce,_e,He){return ce>=hs(_e,He)&&ce<po(_e,He)}function Ni(ce,_e,He){for(var At=He?hl:Ki,Qt=ce[0].length,yr=ce.length,rn=yr,sn=Gn(yr),Dn=1/0,xa=[];rn--;){var ba=ce[rn];rn&&_e&&(ba=ro(ba,Es(_e))),Dn=hs(ba.length,Dn),sn[rn]=!He&&(_e||Qt>=120&&ba.length>=120)?new vs(rn&&ba):e}ba=ce[0];var za=-1,oi=sn[0];e:for(;++za<Qt&&xa.length<Dn;){var Ti=ba[za],Ci=_e?_e(Ti):Ti;if(Ti=He||Ti!==0?Ti:0,!(oi?jo(oi,Ci):At(xa,Ci,He))){for(rn=yr;--rn;){var so=sn[rn];if(!(so?jo(so,Ci):At(ce[rn],Ci,He)))continue e}oi&&oi.push(Ci),xa.push(Ti)}}return xa}function eo(ce,_e,He,At){return Pa(ce,function(Qt,yr,rn){_e(At,He(Qt),yr,rn)}),At}function Ts(ce,_e,He){_e=Wo(_e,ce),ce=wi(ce,_e);var At=ce==null?ce:ce[ds($l(_e))];return At==null?e:Na(At,ce,He)}function es(ce){return Os(ce)&&Vi(ce)==j}function As(ce){return Os(ce)&&Vi(ce)==Ce}function Ws(ce){return Os(ce)&&Vi(ce)==J}function ve(ce,_e,He,At,Qt){return ce===_e?!0:ce==null||_e==null||!Os(ce)&&!Os(_e)?ce!==ce&&_e!==_e:Me(ce,_e,He,At,ve,Qt)}function Me(ce,_e,He,At,Qt,yr){var rn=Wi(ce),sn=Wi(_e),Dn=rn?ee:Vr(ce),xa=sn?ee:Vr(_e);Dn=Dn==j?K:Dn,xa=xa==j?K:xa;var ba=Dn==K,za=xa==K,oi=Dn==xa;if(oi&&Ic(ce)){if(!Ic(_e))return!1;rn=!0,ba=!1}if(oi&&!ba)return yr||(yr=new jl),rn||Vh(ce)?pe(ce,_e,He,At,Qt,yr):Z(ce,_e,Dn,He,At,Qt,yr);if(!(He&f)){var Ti=ba&&qi.call(ce,"__wrapped__"),Ci=za&&qi.call(_e,"__wrapped__");if(Ti||Ci){var so=Ti?ce.value():ce,Di=Ci?_e.value():_e;return yr||(yr=new jl),Qt(so,Di,He,At,yr)}}return oi?(yr||(yr=new jl),ge(ce,_e,He,At,Qt,yr)):!1}function Re(ce){return Os(ce)&&Vr(ce)==Y}function Ve(ce,_e,He,At){var Qt=He.length,yr=Qt,rn=!At;if(ce==null)return!yr;for(ce=Bi(ce);Qt--;){var sn=He[Qt];if(rn&&sn[2]?sn[1]!==ce[sn[0]]:!(sn[0]in ce))return!1}for(;++Qt<yr;){sn=He[Qt];var Dn=sn[0],xa=ce[Dn],ba=sn[1];if(rn&&sn[2]){if(xa===e&&!(Dn in ce))return!1}else{var za=new jl;if(At)var oi=At(xa,ba,Dn,ce,_e,za);if(!(oi===e?ve(ba,xa,f|l,At,za):oi))return!1}}return!0}function Ue(ce){if(!Fs(ce)||_i(ce))return!1;var _e=mc(ce)?_f:pr;return _e.test(pu(ce))}function $e(ce){return Os(ce)&&Vi(ce)==ie}function wt(ce){return Os(ce)&&Vr(ce)==oe}function gt(ce){return Os(ce)&&cp(ce.length)&&!!la[Vi(ce)]}function Dt(ce){return typeof ce=="function"?ce:ce==null?mu:typeof ce=="object"?Wi(ce)?bn(ce[0],ce[1]):an(ce):Fv(ce)}function Wt(ce){if(!Mi(ce))return ys(ce);var _e=[];for(var He in Bi(ce))qi.call(ce,He)&&He!="constructor"&&_e.push(He);return _e}function Jt(ce){if(!Fs(ce))return Ao(ce);var _e=Mi(ce),He=[];for(var At in ce)At=="constructor"&&(_e||!qi.call(ce,At))||He.push(At);return He}function qt(ce,_e){return ce<_e}function Er(ce,_e){var He=-1,At=Yu(ce)?Gn(ce.length):[];return nr(ce,function(Qt,yr,rn){At[++He]=_e(Qt,yr,rn)}),At}function an(ce){var _e=ar(ce);return _e.length==1&&_e[0][2]?ri(_e[0][0],_e[0][1]):function(He){return He===ce||Ve(He,ce,_e)}}function bn(ce,_e){return Ga(ce)&&Fi(_e)?ri(ds(ce),_e):function(He){var At=Fd(He,ce);return At===e&&At===_e?Od(He,ce):ve(_e,At,f|l)}}function Rr(ce,_e,He,At,Qt){ce!==_e&&oa(_e,function(yr,rn){if(Qt||(Qt=new jl),Fs(yr))Zr(ce,_e,rn,He,Rr,At,Qt);else{var sn=At?At(ls(ce,rn),yr,rn+"",ce,_e,Qt):e;sn===e&&(sn=yr),dc(ce,rn,sn)}},Xu)}function Zr(ce,_e,He,At,Qt,yr,rn){var sn=ls(ce,He),Dn=ls(_e,He),xa=rn.get(Dn);if(xa){dc(ce,He,xa);return}var ba=yr?yr(sn,Dn,He+"",ce,_e,rn):e,za=ba===e;if(za){var oi=Wi(Dn),Ti=!oi&&Ic(Dn),Ci=!oi&&!Ti&&Vh(Dn);ba=Dn,oi||Ti||Ci?Wi(sn)?ba=sn:Js(sn)?ba=Ks(sn):Ti?(za=!1,ba=Hu(Dn,!0)):Ci?(za=!1,ba=xs(Dn,!0)):ba=[]:Hh(Dn)||qf(Dn)?(ba=sn,qf(sn)?ba=_g(sn):(!Fs(sn)||mc(sn))&&(ba=ca(Dn))):za=!1}za&&(rn.set(Dn,ba),Qt(ba,Dn,At,yr,rn),rn.delete(Dn)),dc(ce,He,ba)}function $r(ce,_e){var He=ce.length;if(!!He)return _e+=_e<0?He:0,Ia(_e,He)?ce[_e]:e}function gn(ce,_e,He){_e.length?_e=ro(_e,function(yr){return Wi(yr)?function(rn){return hi(rn,yr.length===1?yr[0]:yr)}:yr}):_e=[mu];var At=-1;_e=ro(_e,Es(Mt()));var Qt=Er(ce,function(yr,rn,sn){var Dn=ro(_e,function(xa){return xa(yr)});return{criteria:Dn,index:++At,value:yr}});return Oo(Qt,function(yr,rn){return Eh(yr,rn,He)})}function yn(ce,_e){return tn(ce,_e,function(He,At){return Od(ce,At)})}function tn(ce,_e,He){for(var At=-1,Qt=_e.length,yr={};++At<Qt;){var rn=_e[At],sn=hi(ce,rn);He(sn,rn)&&Ii(yr,Wo(rn,ce),sn)}return yr}function na(ce){return function(_e){return hi(_e,ce)}}function ya(ce,_e,He,At){var Qt=At?pl:vl,yr=-1,rn=_e.length,sn=ce;for(ce===_e&&(_e=Ks(_e)),He&&(sn=ro(ce,Es(He)));++yr<rn;)for(var Dn=0,xa=_e[yr],ba=He?He(xa):xa;(Dn=Qt(sn,ba,Dn,At))>-1;)sn!==ce&&Ji.call(sn,Dn,1),Ji.call(ce,Dn,1);return ce}function Ha(ce,_e){for(var He=ce?_e.length:0,At=He-1;He--;){var Qt=_e[He];if(He==At||Qt!==yr){var yr=Qt;Ia(Qt)?Ji.call(ce,Qt,1):ms(ce,Qt)}}return ce}function _a(ce,_e){return ce+rl(_t()*(_e-ce+1))}function Xa(ce,_e,He,At){for(var Qt=-1,yr=po(Ls((_e-ce)/(He||1)),0),rn=Gn(yr);yr--;)rn[At?yr:++Qt]=ce,ce+=He;return rn}function Sa(ce,_e){var He="";if(!ce||_e<1||_e>O)return He;do _e%2&&(He+=ce),_e=rl(_e/2),_e&&(ce+=ce);while(_e);return He}function ma(ce,_e){return vu(Ro(ce,_e,mu),ce+"")}function Ja(ce){return Vf(ph(ce))}function gi(ce,_e){var He=ph(ce);return Wu(He,ft(_e,0,He.length))}function Ii(ce,_e,He,At){if(!Fs(ce))return ce;_e=Wo(_e,ce);for(var Qt=-1,yr=_e.length,rn=yr-1,sn=ce;sn!=null&&++Qt<yr;){var Dn=ds(_e[Qt]),xa=He;if(Dn==="__proto__"||Dn==="constructor"||Dn==="prototype")return ce;if(Qt!=rn){var ba=sn[Dn];xa=At?At(ba,Dn,sn):e,xa===e&&(xa=Fs(ba)?ba:Ia(_e[Qt+1])?[]:{})}Ds(sn,Dn,xa),sn=sn[Dn]}return ce}var Xo=Un?function(ce,_e){return Un.set(ce,_e),ce}:mu,go=Cs?function(ce,_e){return Cs(ce,"toString",{configurable:!0,enumerable:!1,value:Jc(_e),writable:!0})}:mu;function Ra(ce){return Wu(ph(ce))}function fi(ce,_e,He){var At=-1,Qt=ce.length;_e<0&&(_e=-_e>Qt?0:Qt+_e),He=He>Qt?Qt:He,He<0&&(He+=Qt),Qt=_e>He?0:He-_e>>>0,_e>>>=0;for(var yr=Gn(Qt);++At<Qt;)yr[At]=ce[At+_e];return yr}function pi(ce,_e){var He;return nr(ce,function(At,Qt,yr){return He=_e(At,Qt,yr),!He}),!!He}function Gi(ce,_e,He){var At=0,Qt=ce==null?At:ce.length;if(typeof _e=="number"&&_e===_e&&Qt<=N){for(;At<Qt;){var yr=At+Qt>>>1,rn=ce[yr];rn!==null&&!eu(rn)&&(He?rn<=_e:rn<_e)?At=yr+1:Qt=yr}return Qt}return Si(ce,_e,mu,He)}function Si(ce,_e,He,At){var Qt=0,yr=ce==null?0:ce.length;if(yr===0)return 0;_e=He(_e);for(var rn=_e!==_e,sn=_e===null,Dn=eu(_e),xa=_e===e;Qt<yr;){var ba=rl((Qt+yr)/2),za=He(ce[ba]),oi=za!==e,Ti=za===null,Ci=za===za,so=eu(za);if(rn)var Di=At||Ci;else xa?Di=Ci&&(At||oi):sn?Di=Ci&&oi&&(At||!Ti):Dn?Di=Ci&&oi&&!Ti&&(At||!so):Ti||so?Di=!1:Di=At?za<=_e:za<_e;Di?Qt=ba+1:yr=ba}return hs(yr,U)}function Go(ce,_e){for(var He=-1,At=ce.length,Qt=0,yr=[];++He<At;){var rn=ce[He],sn=_e?_e(rn):rn;if(!He||!$f(sn,Dn)){var Dn=sn;yr[Qt++]=rn===0?0:rn}}return yr}function Do(ce){return typeof ce=="number"?ce:eu(ce)?D:+ce}function ao(ce){if(typeof ce=="string")return ce;if(Wi(ce))return ro(ce,ao)+"";if(eu(ce))return ti?ti.call(ce):"";var _e=ce+"";return _e=="0"&&1/ce==-P?"-0":_e}function ts(ce,_e,He){var At=-1,Qt=Ki,yr=ce.length,rn=!0,sn=[],Dn=sn;if(He)rn=!1,Qt=hl;else if(yr>=B){var xa=_e?null:rp(ce);if(xa)return su(xa);rn=!1,Qt=jo,Dn=new vs}else Dn=_e?[]:sn;e:for(;++At<yr;){var ba=ce[At],za=_e?_e(ba):ba;if(ba=He||ba!==0?ba:0,rn&&za===za){for(var oi=Dn.length;oi--;)if(Dn[oi]===za)continue e;_e&&Dn.push(za),sn.push(ba)}else Qt(Dn,za,He)||(Dn!==sn&&Dn.push(za),sn.push(ba))}return sn}function ms(ce,_e){return _e=Wo(_e,ce),ce=wi(ce,_e),ce==null||delete ce[ds($l(_e))]}function Is(ce,_e,He,At){return Ii(ce,_e,He(hi(ce,_e)),At)}function xo(ce,_e,He,At){for(var Qt=ce.length,yr=At?Qt:-1;(At?yr--:++yr<Qt)&&_e(ce[yr],yr,ce););return He?fi(ce,At?0:yr,At?yr+1:Qt):fi(ce,At?yr+1:0,At?Qt:yr)}function bo(ce,_e){var He=ce;return He instanceof Ba&&(He=He.value()),Vl(_e,function(At,Qt){return Qt.func.apply(Qt.thisArg,is([At],Qt.args))},He)}function ei(ce,_e,He){var At=ce.length;if(At<2)return At?ts(ce[0]):[];for(var Qt=-1,yr=Gn(At);++Qt<At;)for(var rn=ce[Qt],sn=-1;++sn<At;)sn!=Qt&&(yr[Qt]=vr(yr[Qt]||rn,ce[sn],_e,He));return ts(zn(yr,1),_e,He)}function vi(ce,_e,He){for(var At=-1,Qt=ce.length,yr=_e.length,rn={};++At<Qt;){var sn=At<yr?_e[At]:e;He(rn,ce[At],sn)}return rn}function rs(ce){return Js(ce)?ce:[]}function Io(ce){return typeof ce=="function"?ce:mu}function Wo(ce,_e){return Wi(ce)?ce:Ga(ce,_e)?[ce]:ff(ko(ce))}var zo=ma;function ns(ce,_e,He){var At=ce.length;return He=He===e?At:He,!_e&&He>=At?ce:fi(ce,_e,He)}var il=Bu||function(ce){return Fr.clearTimeout(ce)};function Hu(ce,_e){if(_e)return ce.slice();var He=ce.length,At=Mu?Mu(He):new ce.constructor(He);return ce.copy(At),At}function So(ce){var _e=new ce.constructor(ce.byteLength);return new yl(_e).set(new yl(ce)),_e}function Hc(ce,_e){var He=_e?So(ce.buffer):ce.buffer;return new ce.constructor(He,ce.byteOffset,ce.byteLength)}function Vu(ce){var _e=new ce.constructor(ce.source,Rt.exec(ce));return _e.lastIndex=ce.lastIndex,_e}function _o(ce){return Ya?Bi(Ya.call(ce)):{}}function xs(ce,_e){var He=_e?So(ce.buffer):ce.buffer;return new ce.constructor(He,ce.byteOffset,ce.length)}function ep(ce,_e){if(ce!==_e){var He=ce!==e,At=ce===null,Qt=ce===ce,yr=eu(ce),rn=_e!==e,sn=_e===null,Dn=_e===_e,xa=eu(_e);if(!sn&&!xa&&!yr&&ce>_e||yr&&rn&&Dn&&!sn&&!xa||At&&rn&&Dn||!He&&Dn||!Qt)return 1;if(!At&&!yr&&!xa&&ce<_e||xa&&He&&Qt&&!At&&!yr||sn&&He&&Qt||!rn&&Qt||!Dn)return-1}return 0}function Eh(ce,_e,He){for(var At=-1,Qt=ce.criteria,yr=_e.criteria,rn=Qt.length,sn=He.length;++At<rn;){var Dn=ep(Qt[At],yr[At]);if(Dn){if(At>=sn)return Dn;var xa=He[At];return Dn*(xa=="desc"?-1:1)}}return ce.index-_e.index}function Vc(ce,_e,He,At){for(var Qt=-1,yr=ce.length,rn=He.length,sn=-1,Dn=_e.length,xa=po(yr-rn,0),ba=Gn(Dn+xa),za=!At;++sn<Dn;)ba[sn]=_e[sn];for(;++Qt<rn;)(za||Qt<yr)&&(ba[He[Qt]]=ce[Qt]);for(;xa--;)ba[sn++]=ce[Qt++];return ba}function Yf(ce,_e,He,At){for(var Qt=-1,yr=ce.length,rn=-1,sn=He.length,Dn=-1,xa=_e.length,ba=po(yr-sn,0),za=Gn(ba+xa),oi=!At;++Qt<ba;)za[Qt]=ce[Qt];for(var Ti=Qt;++Dn<xa;)za[Ti+Dn]=_e[Dn];for(;++rn<sn;)(oi||Qt<yr)&&(za[Ti+He[rn]]=ce[Qt++]);return za}function Ks(ce,_e){var He=-1,At=ce.length;for(_e||(_e=Gn(At));++He<At;)_e[He]=ce[He];return _e}function Su(ce,_e,He,At){var Qt=!He;He||(He={});for(var yr=-1,rn=_e.length;++yr<rn;){var sn=_e[yr],Dn=At?At(He[sn],ce[sn],sn,He,ce):e;Dn===e&&(Dn=ce[sn]),Qt?je(He,sn,Dn):Ds(He,sn,Dn)}return He}function Kl(ce,_e){return Su(ce,Xr(ce),_e)}function gc(ce,_e){return Su(ce,jr(ce),_e)}function Gc(ce,_e){return function(He,At){var Qt=Wi(He)?nu:Gf,yr=_e?_e():{};return Qt(He,ce,Mt(At,2),yr)}}function yc(ce){return ma(function(_e,He){var At=-1,Qt=He.length,yr=Qt>1?He[Qt-1]:e,rn=Qt>2?He[2]:e;for(yr=ce.length>3&&typeof yr=="function"?(Qt--,yr):e,rn&&Ta(He[0],He[1],rn)&&(yr=Qt<3?e:yr,Qt=1),_e=Bi(_e);++At<Qt;){var sn=He[At];sn&&ce(_e,sn,At,yr)}return _e})}function Wc(ce,_e){return function(He,At){if(He==null)return He;if(!Yu(He))return ce(He,At);for(var Qt=He.length,yr=_e?Qt:-1,rn=Bi(He);(_e?yr--:++yr<Qt)&&At(rn[yr],yr,rn)!==!1;);return He}}function oh(ce){return function(_e,He,At){for(var Qt=-1,yr=Bi(_e),rn=At(_e),sn=rn.length;sn--;){var Dn=rn[ce?sn:++Qt];if(He(yr[Dn],Dn,yr)===!1)break}return _e}}function Xf(ce,_e,He){var At=_e&o,Qt=Zf(ce);function yr(){var rn=this&&this!==Fr&&this instanceof yr?Qt:ce;return rn.apply(At?He:this,arguments)}return yr}function Jl(ce){return function(_e){_e=ko(_e);var He=Ll(_e)?Ko(_e):e,At=He?He[0]:_e.charAt(0),Qt=He?ns(He,1).join(""):_e.slice(1);return At[ce]()+Qt}}function hu(ce){return function(_e){return Vl(Iv(xp(_e).replace(wn,"")),ce,"")}}function Zf(ce){return function(){var _e=arguments;switch(_e.length){case 0:return new ce;case 1:return new ce(_e[0]);case 2:return new ce(_e[0],_e[1]);case 3:return new ce(_e[0],_e[1],_e[2]);case 4:return new ce(_e[0],_e[1],_e[2],_e[3]);case 5:return new ce(_e[0],_e[1],_e[2],_e[3],_e[4]);case 6:return new ce(_e[0],_e[1],_e[2],_e[3],_e[4],_e[5]);case 7:return new ce(_e[0],_e[1],_e[2],_e[3],_e[4],_e[5],_e[6])}var He=fa(ce.prototype),At=ce.apply(He,_e);return Fs(At)?At:He}}function Ch(ce,_e,He){var At=Zf(ce);function Qt(){for(var yr=arguments.length,rn=Gn(yr),sn=yr,Dn=vt(Qt);sn--;)rn[sn]=arguments[sn];var xa=yr<3&&rn[0]!==Dn&&rn[yr-1]!==Dn?[]:Rl(rn,Dn);if(yr-=xa.length,yr<He)return Pc(ce,_e,sf,Qt.placeholder,e,rn,xa,e,e,He-yr);var ba=this&&this!==Fr&&this instanceof Qt?At:ce;return Na(ba,this,rn)}return Qt}function Lc(ce){return function(_e,He,At){var Qt=Bi(_e);if(!Yu(_e)){var yr=Mt(He,3);_e=Hl(_e),He=function(sn){return yr(Qt[sn],sn,Qt)}}var rn=ce(_e,He,At);return rn>-1?Qt[yr?_e[rn]:rn]:e}}function Lh(ce){return Q(function(_e){var He=_e.length,At=He,Qt=qa.prototype.thru;for(ce&&_e.reverse();At--;){var yr=_e[At];if(typeof yr!="function")throw new gs(s);if(Qt&&!rn&&Qe(yr)=="wrapper")var rn=new qa([],!0)}for(At=rn?At:He;++At<He;){yr=_e[At];var sn=Qe(yr),Dn=sn=="wrapper"?De(yr):e;Dn&&li(Dn[0])&&Dn[1]==(A|d|y|b)&&!Dn[4].length&&Dn[9]==1?rn=rn[Qe(Dn[0])].apply(rn,Dn[3]):rn=yr.length==1&&li(yr)?rn[sn]():rn.thru(yr)}return function(){var xa=arguments,ba=xa[0];if(rn&&xa.length==1&&Wi(ba))return rn.plant(ba).value();for(var za=0,oi=He?_e[za].apply(this,xa):ba;++za<He;)oi=_e[za].call(this,oi);return oi}})}function sf(ce,_e,He,At,Qt,yr,rn,sn,Dn,xa){var ba=_e&A,za=_e&o,oi=_e&c,Ti=_e&(d|p),Ci=_e&M,so=oi?e:Zf(ce);function Di(){for(var ji=arguments.length,to=Gn(ji),ju=ji;ju--;)to[ju]=arguments[ju];if(Ti)var wo=vt(Di),tu=Cl(to,wo);if(At&&(to=Vc(to,At,Qt,Ti)),yr&&(to=Yf(to,yr,rn,Ti)),ji-=tu,Ti&&ji<xa){var Qs=Rl(to,wo);return Pc(ce,_e,sf,Di.placeholder,He,to,Qs,sn,Dn,xa-ji)}var wl=za?He:this,Fc=oi?wl[ce]:ce;return ji=to.length,sn?to=Qi(to,sn):Ci&&ji>1&&to.reverse(),ba&&Dn<ji&&(to.length=Dn),this&&this!==Fr&&this instanceof Di&&(Fc=so||Zf(Fc)),Fc.apply(wl,to)}return Di}function Yc(ce,_e){return function(He,At){return eo(He,ce,_e(At),{})}}function jf(ce,_e){return function(He,At){var Qt;if(He===e&&At===e)return _e;if(He!==e&&(Qt=He),At!==e){if(Qt===e)return At;typeof He=="string"||typeof At=="string"?(He=ao(He),At=ao(At)):(He=Do(He),At=Do(At)),Qt=ce(He,At)}return Qt}}function Af(ce){return Q(function(_e){return _e=ro(_e,Es(Mt())),ma(function(He){var At=this;return ce(_e,function(Qt){return Na(Qt,At,He)})})})}function Xc(ce,_e){_e=_e===e?" ":ao(_e);var He=_e.length;if(He<2)return He?Sa(_e,ce):_e;var At=Sa(_e,Ls(ce/Dl(_e)));return Ll(_e)?ns(Ko(At),0,ce).join(""):At.slice(0,ce)}function tp(ce,_e,He,At){var Qt=_e&o,yr=Zf(ce);function rn(){for(var sn=-1,Dn=arguments.length,xa=-1,ba=At.length,za=Gn(ba+Dn),oi=this&&this!==Fr&&this instanceof rn?yr:ce;++xa<ba;)za[xa]=At[xa];for(;Dn--;)za[xa++]=arguments[++sn];return Na(oi,Qt?He:this,za)}return rn}function Kf(ce){return function(_e,He,At){return At&&typeof At!="number"&&Ta(_e,He,At)&&(He=At=e),_e=ec(_e),He===e?(He=_e,_e=0):He=ec(He),At=At===e?_e<He?1:-1:ec(At),Xa(_e,He,At,ce)}}function Zc(ce){return function(_e,He){return typeof _e=="string"&&typeof He=="string"||(_e=hf(_e),He=hf(He)),ce(_e,He)}}function Pc(ce,_e,He,At,Qt,yr,rn,sn,Dn,xa){var ba=_e&d,za=ba?rn:e,oi=ba?e:rn,Ti=ba?yr:e,Ci=ba?e:yr;_e|=ba?y:g,_e&=~(ba?g:y),_e&v||(_e&=~(o|c));var so=[ce,_e,Qt,Ti,za,Ci,oi,sn,Dn,xa],Di=He.apply(e,so);return li(ce)&&Ms(Di,so),Di.placeholder=At,lf(Di,ce,_e)}function Ph(ce){var _e=Ho[ce];return function(He,At){if(He=hf(He),At=At==null?0:hs($i(At),292),At&&js(He)){var Qt=(ko(He)+"e").split("e"),yr=_e(Qt[0]+"e"+(+Qt[1]+At));return Qt=(ko(yr)+"e").split("e"),+(Qt[0]+"e"+(+Qt[1]-At))}return _e(He)}}var rp=pn&&1/su(new pn([,-0]))[1]==P?function(ce){return new pn(ce)}:Ap;function Gu(ce){return function(_e){var He=Vr(_e);return He==Y?Wl(_e):He==oe?uc(_e):Df(_e,ce(_e))}}function Mf(ce,_e,He,At,Qt,yr,rn,sn){var Dn=_e&c;if(!Dn&&typeof ce!="function")throw new gs(s);var xa=At?At.length:0;if(xa||(_e&=~(y|g),At=Qt=e),rn=rn===e?rn:po($i(rn),0),sn=sn===e?sn:$i(sn),xa-=Qt?Qt.length:0,_e&g){var ba=At,za=Qt;At=Qt=e}var oi=Dn?e:De(ce),Ti=[ce,_e,He,At,Qt,ba,za,yr,rn,sn];if(oi&&yo(Ti,oi),ce=Ti[0],_e=Ti[1],He=Ti[2],At=Ti[3],Qt=Ti[4],sn=Ti[9]=Ti[9]===e?Dn?0:ce.length:po(Ti[9]-xa,0),!sn&&_e&(d|p)&&(_e&=~(d|p)),!_e||_e==o)var Ci=Xf(ce,_e,He);else _e==d||_e==p?Ci=Ch(ce,_e,sn):(_e==y||_e==(o|y))&&!Qt.length?Ci=tp(ce,_e,He,At):Ci=sf.apply(e,Ti);var so=oi?Xo:Ms;return lf(so(Ci,Ti),ce,_e)}function _v(ce,_e,He,At){return ce===e||$f(ce,_s[He])&&!qi.call(At,He)?_e:ce}function Rh(ce,_e,He,At,Qt,yr){return Fs(ce)&&Fs(_e)&&(yr.set(_e,ce),Rr(ce,_e,e,Rh,yr),yr.delete(_e)),ce}function np(ce){return Hh(ce)?e:ce}function pe(ce,_e,He,At,Qt,yr){var rn=He&f,sn=ce.length,Dn=_e.length;if(sn!=Dn&&!(rn&&Dn>sn))return!1;var xa=yr.get(ce),ba=yr.get(_e);if(xa&&ba)return xa==_e&&ba==ce;var za=-1,oi=!0,Ti=He&l?new vs:e;for(yr.set(ce,_e),yr.set(_e,ce);++za<sn;){var Ci=ce[za],so=_e[za];if(At)var Di=rn?At(so,Ci,za,_e,ce,yr):At(Ci,so,za,ce,_e,yr);if(Di!==e){if(Di)continue;oi=!1;break}if(Ti){if(!Fu(_e,function(ji,to){if(!jo(Ti,to)&&(Ci===ji||Qt(Ci,ji,He,At,yr)))return Ti.push(to)})){oi=!1;break}}else if(!(Ci===so||Qt(Ci,so,He,At,yr))){oi=!1;break}}return yr.delete(ce),yr.delete(_e),oi}function Z(ce,_e,He,At,Qt,yr,rn){switch(He){case Se:if(ce.byteLength!=_e.byteLength||ce.byteOffset!=_e.byteOffset)return!1;ce=ce.buffer,_e=_e.buffer;case Ce:return!(ce.byteLength!=_e.byteLength||!yr(new yl(ce),new yl(_e)));case G:case J:case ne:return $f(+ce,+_e);case fe:return ce.name==_e.name&&ce.message==_e.message;case ie:case ue:return ce==_e+"";case Y:var sn=Wl;case oe:var Dn=At&f;if(sn||(sn=su),ce.size!=_e.size&&!Dn)return!1;var xa=rn.get(ce);if(xa)return xa==_e;At|=l,rn.set(ce,_e);var ba=pe(sn(ce),sn(_e),At,Qt,yr,rn);return rn.delete(ce),ba;case xe:if(Ya)return Ya.call(ce)==Ya.call(_e)}return!1}function ge(ce,_e,He,At,Qt,yr){var rn=He&f,sn=ye(ce),Dn=sn.length,xa=ye(_e),ba=xa.length;if(Dn!=ba&&!rn)return!1;for(var za=Dn;za--;){var oi=sn[za];if(!(rn?oi in _e:qi.call(_e,oi)))return!1}var Ti=yr.get(ce),Ci=yr.get(_e);if(Ti&&Ci)return Ti==_e&&Ci==ce;var so=!0;yr.set(ce,_e),yr.set(_e,ce);for(var Di=rn;++za<Dn;){oi=sn[za];var ji=ce[oi],to=_e[oi];if(At)var ju=rn?At(to,ji,oi,_e,ce,yr):At(ji,to,oi,ce,_e,yr);if(!(ju===e?ji===to||Qt(ji,to,He,At,yr):ju)){so=!1;break}Di||(Di=oi=="constructor")}if(so&&!Di){var wo=ce.constructor,tu=_e.constructor;wo!=tu&&"constructor"in ce&&"constructor"in _e&&!(typeof wo=="function"&&wo instanceof wo&&typeof tu=="function"&&tu instanceof tu)&&(so=!1)}return yr.delete(ce),yr.delete(_e),so}function Q(ce){return vu(Ro(ce,e,Dc),ce+"")}function ye(ce){return Ri(ce,Hl,Xr)}function Le(ce){return Ri(ce,Xu,jr)}var De=Un?function(ce){return Un.get(ce)}:Ap;function Qe(ce){for(var _e=ce.name+"",He=ea[_e],At=qi.call(ea,_e)?He.length:0;At--;){var Qt=He[At],yr=Qt.func;if(yr==null||yr==ce)return Qt.name}return _e}function vt(ce){var _e=qi.call(Kt,"placeholder")?Kt:ce;return _e.placeholder}function Mt(){var ce=Kt.iteratee||Tp;return ce=ce===Tp?Dt:ce,arguments.length?ce(arguments[0],arguments[1]):ce}function Yt(ce,_e){var He=ce.__data__;return ja(_e)?He[typeof _e=="string"?"string":"hash"]:He.map}function ar(ce){for(var _e=Hl(ce),He=_e.length;He--;){var At=_e[He],Qt=ce[At];_e[He]=[At,Qt,Fi(Qt)]}return _e}function cr(ce,_e){var He=ou(ce,_e);return Ue(He)?He:e}function Dr(ce){var _e=qi.call(ce,us),He=ce[us];try{ce[us]=e;var At=!0}catch{}var Qt=rf.call(ce);return At&&(_e?ce[us]=He:delete ce[us]),Qt}var Xr=ml?function(ce){return ce==null?[]:(ce=Bi(ce),vo(ml(ce),function(_e){return cc.call(ce,_e)}))}:gh,jr=ml?function(ce){for(var _e=[];ce;)is(_e,Xr(ce)),ce=Nu(ce);return _e}:gh,Vr=Vi;(ur&&Vr(new ur(new ArrayBuffer(1)))!=Se||rr&&Vr(new rr)!=Y||zr&&Vr(zr.resolve())!=$||pn&&Vr(new pn)!=oe||An&&Vr(new An)!=me)&&(Vr=function(ce){var _e=Vi(ce),He=_e==K?ce.constructor:e,At=He?pu(He):"";if(At)switch(At){case Cn:return Se;case Yn:return Y;case Vn:return $;case ia:return oe;case va:return me}return _e});function on(ce,_e,He){for(var At=-1,Qt=He.length;++At<Qt;){var yr=He[At],rn=yr.size;switch(yr.type){case"drop":ce+=rn;break;case"dropRight":_e-=rn;break;case"take":_e=hs(_e,ce+rn);break;case"takeRight":ce=po(ce,_e-rn);break}}return{start:ce,end:_e}}function _n(ce){var _e=ce.match(Vt);return _e?_e[1].split($t):[]}function Bn(ce,_e,He){_e=Wo(_e,ce);for(var At=-1,Qt=_e.length,yr=!1;++At<Qt;){var rn=ds(_e[At]);if(!(yr=ce!=null&&He(ce,rn)))break;ce=ce[rn]}return yr||++At!=Qt?yr:(Qt=ce==null?0:ce.length,!!Qt&&cp(Qt)&&Ia(rn,Qt)&&(Wi(ce)||qf(ce)))}function Kn(ce){var _e=ce.length,He=new ce.constructor(_e);return _e&&typeof ce[0]=="string"&&qi.call(ce,"index")&&(He.index=ce.index,He.input=ce.input),He}function ca(ce){return typeof ce.constructor=="function"&&!Mi(ce)?fa(Nu(ce)):{}}function pa(ce,_e,He){var At=ce.constructor;switch(_e){case Ce:return So(ce);case G:case J:return new At(+ce);case Se:return Hc(ce,He);case Be:case Ye:case Xe:case Te:case Ie:case Ze:case rt:case Ge:case ze:return xs(ce,He);case Y:return new At;case ne:case ue:return new At(ce);case ie:return Vu(ce);case oe:return new At;case xe:return _o(ce)}}function ha(ce,_e){var He=_e.length;if(!He)return ce;var At=He-1;return _e[At]=(He>1?"& ":"")+_e[At],_e=_e.join(He>2?", ":" "),ce.replace(Lt,`{
/* [wrapped with `+_e+`] */
`)}function Da(ce){return Wi(ce)||qf(ce)||!!(cu&&ce&&ce[cu])}function Ia(ce,_e){var He=typeof ce;return _e=_e==null?O:_e,!!_e&&(He=="number"||He!="symbol"&&Nr.test(ce))&&ce>-1&&ce%1==0&&ce<_e}function Ta(ce,_e,He){if(!Fs(He))return!1;var At=typeof _e;return(At=="number"?Yu(He)&&Ia(_e,He.length):At=="string"&&_e in He)?$f(He[_e],ce):!1}function Ga(ce,_e){if(Wi(ce))return!1;var He=typeof ce;return He=="number"||He=="symbol"||He=="boolean"||ce==null||eu(ce)?!0:et.test(ce)||!dt.test(ce)||_e!=null&&ce in Bi(_e)}function ja(ce){var _e=typeof ce;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ce!=="__proto__":ce===null}function li(ce){var _e=Qe(ce),He=Kt[_e];if(typeof He!="function"||!(_e in Ba.prototype))return!1;if(ce===He)return!0;var At=De(He);return!!At&&ce===At[0]}function _i(ce){return!!Zl&&Zl in ce}var io=Xl?mc:Mo;function Mi(ce){var _e=ce&&ce.constructor,He=typeof _e=="function"&&_e.prototype||_s;return ce===He}function Fi(ce){return ce===ce&&!Fs(ce)}function ri(ce,_e){return function(He){return He==null?!1:He[ce]===_e&&(_e!==e||ce in Bi(He))}}function oo(ce){var _e=Ev(ce,function(At){return He.size===t&&He.clear(),At}),He=_e.cache;return _e}function yo(ce,_e){var He=ce[1],At=_e[1],Qt=He|At,yr=Qt<(o|c|A),rn=At==A&&He==d||At==A&&He==b&&ce[7].length<=_e[8]||At==(A|b)&&_e[7].length<=_e[8]&&He==d;if(!(yr||rn))return ce;At&o&&(ce[2]=_e[2],Qt|=He&o?0:v);var sn=_e[3];if(sn){var Dn=ce[3];ce[3]=Dn?Vc(Dn,sn,_e[4]):sn,ce[4]=Dn?Rl(ce[3],i):_e[4]}return sn=_e[5],sn&&(Dn=ce[5],ce[5]=Dn?Yf(Dn,sn,_e[6]):sn,ce[6]=Dn?Rl(ce[5],i):_e[6]),sn=_e[7],sn&&(ce[7]=sn),At&A&&(ce[8]=ce[8]==null?_e[8]:hs(ce[8],_e[8])),ce[9]==null&&(ce[9]=_e[9]),ce[0]=_e[0],ce[1]=Qt,ce}function Ao(ce){var _e=[];if(ce!=null)for(var He in Bi(ce))_e.push(He);return _e}function Zi(ce){return rf.call(ce)}function Ro(ce,_e,He){return _e=po(_e===e?ce.length-1:_e,0),function(){for(var At=arguments,Qt=-1,yr=po(At.length-_e,0),rn=Gn(yr);++Qt<yr;)rn[Qt]=At[_e+Qt];Qt=-1;for(var sn=Gn(_e+1);++Qt<_e;)sn[Qt]=At[Qt];return sn[_e]=He(rn),Na(ce,this,sn)}}function wi(ce,_e){return _e.length<2?ce:hi(ce,fi(_e,0,-1))}function Qi(ce,_e){for(var He=ce.length,At=hs(_e.length,He),Qt=Ks(ce);At--;){var yr=_e[At];ce[At]=Ia(yr,He)?Qt[yr]:e}return ce}function ls(ce,_e){if(!(_e==="constructor"&&typeof ce[_e]=="function")&&_e!="__proto__")return ce[_e]}var Ms=uf(Xo),Bl=Of||function(ce,_e){return Fr.setTimeout(ce,_e)},vu=uf(go);function lf(ce,_e,He){var At=_e+"";return vu(ce,ha(At,bl(_n(At),He)))}function uf(ce){var _e=0,He=0;return function(){var At=nf(),Qt=h-(At-He);if(He=At,Qt>0){if(++_e>=_)return arguments[0]}else _e=0;return ce.apply(e,arguments)}}function Wu(ce,_e){var He=-1,At=ce.length,Qt=At-1;for(_e=_e===e?At:_e;++He<_e;){var yr=_a(He,Qt),rn=ce[yr];ce[yr]=ce[He],ce[He]=rn}return ce.length=_e,ce}var ff=oo(function(ce){var _e=[];return ce.charCodeAt(0)===46&&_e.push(""),ce.replace(Pe,function(He,At,Qt,yr){_e.push(Qt?yr.replace(qe,"$1"):At||He)}),_e});function ds(ce){if(typeof ce=="string"||eu(ce))return ce;var _e=ce+"";return _e=="0"&&1/ce==-P?"-0":_e}function pu(ce){if(ce!=null){try{return Il.call(ce)}catch{}try{return ce+""}catch{}}return""}function bl(ce,_e){return Eo(X,function(He){var At="_."+He[0];_e&He[1]&&!Ki(ce,At)&&ce.push(At)}),ce.sort()}function du(ce){if(ce instanceof Ba)return ce.clone();var _e=new qa(ce.__wrapped__,ce.__chain__);return _e.__actions__=Ks(ce.__actions__),_e.__index__=ce.__index__,_e.__values__=ce.__values__,_e}function Sf(ce,_e,He){(He?Ta(ce,_e,He):_e===e)?_e=1:_e=po($i(_e),0);var At=ce==null?0:ce.length;if(!At||_e<1)return[];for(var Qt=0,yr=0,rn=Gn(Ls(At/_e));Qt<At;)rn[yr++]=fi(ce,Qt,Qt+=_e);return rn}function cf(ce){for(var _e=-1,He=ce==null?0:ce.length,At=0,Qt=[];++_e<He;){var yr=ce[_e];yr&&(Qt[At++]=yr)}return Qt}function kf(){var ce=arguments.length;if(!ce)return[];for(var _e=Gn(ce-1),He=arguments[0],At=ce;At--;)_e[At-1]=arguments[At];return is(Wi(He)?Ks(He):[He],zn(_e,1))}var Dh=ma(function(ce,_e){return Js(ce)?vr(ce,zn(_e,1,Js,!0)):[]}),Rc=ma(function(ce,_e){var He=$l(_e);return Js(He)&&(He=e),Js(ce)?vr(ce,zn(_e,1,Js,!0),Mt(He,2)):[]}),ol=ma(function(ce,_e){var He=$l(_e);return Js(He)&&(He=e),Js(ce)?vr(ce,zn(_e,1,Js,!0),e,He):[]});function sh(ce,_e,He){var At=ce==null?0:ce.length;return At?(_e=He||_e===e?1:$i(_e),fi(ce,_e<0?0:_e,At)):[]}function Ul(ce,_e,He){var At=ce==null?0:ce.length;return At?(_e=He||_e===e?1:$i(_e),_e=At-_e,fi(ce,0,_e<0?0:_e)):[]}function lh(ce,_e){return ce&&ce.length?xo(ce,Mt(_e,3),!0,!0):[]}function Ih(ce,_e){return ce&&ce.length?xo(ce,Mt(_e,3),!0):[]}function zh(ce,_e,He,At){var Qt=ce==null?0:ce.length;return Qt?(He&&typeof He!="number"&&Ta(ce,_e,He)&&(He=0,At=Qt),cn(ce,_e,He,At)):[]}function wv(ce,_e,He){var At=ce==null?0:ce.length;if(!At)return-1;var Qt=He==null?0:$i(He);return Qt<0&&(Qt=po(At+Qt,0)),os(ce,Mt(_e,3),Qt)}function uh(ce,_e,He){var At=ce==null?0:ce.length;if(!At)return-1;var Qt=At-1;return He!==e&&(Qt=$i(He),Qt=He<0?po(At+Qt,0):hs(Qt,At-1)),os(ce,Mt(_e,3),Qt,!0)}function Dc(ce){var _e=ce==null?0:ce.length;return _e?zn(ce,1):[]}function jc(ce){var _e=ce==null?0:ce.length;return _e?zn(ce,P):[]}function bs(ce,_e){var He=ce==null?0:ce.length;return He?(_e=_e===e?1:$i(_e),zn(ce,_e)):[]}function gu(ce){for(var _e=-1,He=ce==null?0:ce.length,At={};++_e<He;){var Qt=ce[_e];At[Qt[0]]=Qt[1]}return At}function Ql(ce){return ce&&ce.length?ce[0]:e}function Fh(ce,_e,He){var At=ce==null?0:ce.length;if(!At)return-1;var Qt=He==null?0:$i(He);return Qt<0&&(Qt=po(At+Qt,0)),vl(ce,_e,Qt)}function Tv(ce){var _e=ce==null?0:ce.length;return _e?fi(ce,0,-1):[]}var vd=ma(function(ce){var _e=ro(ce,rs);return _e.length&&_e[0]===ce[0]?Ni(_e):[]}),pd=ma(function(ce){var _e=$l(ce),He=ro(ce,rs);return _e===$l(He)?_e=e:He.pop(),He.length&&He[0]===ce[0]?Ni(He,Mt(_e,2)):[]}),fh=ma(function(ce){var _e=$l(ce),He=ro(ce,rs);return _e=typeof _e=="function"?_e:e,_e&&He.pop(),He.length&&He[0]===ce[0]?Ni(He,e,_e):[]});function dd(ce,_e){return ce==null?"":Lo.call(ce,_e)}function $l(ce){var _e=ce==null?0:ce.length;return _e?ce[_e-1]:e}function gd(ce,_e,He){var At=ce==null?0:ce.length;if(!At)return-1;var Qt=At;return He!==e&&(Qt=$i(He),Qt=Qt<0?po(At+Qt,0):hs(Qt,At-1)),_e===_e?xf(ce,_e,Qt):os(ce,no,Qt,!0)}function yd(ce,_e){return ce&&ce.length?$r(ce,$i(_e)):e}var Av=ma(K0);function K0(ce,_e){return ce&&ce.length&&_e&&_e.length?ya(ce,_e):ce}function mm(ce,_e,He){return ce&&ce.length&&_e&&_e.length?ya(ce,_e,Mt(He,2)):ce}function xm(ce,_e,He){return ce&&ce.length&&_e&&_e.length?ya(ce,_e,e,He):ce}var bm=Q(function(ce,_e){var He=ce==null?0:ce.length,At=ot(ce,_e);return Ha(ce,ro(_e,function(Qt){return Ia(Qt,He)?+Qt:Qt}).sort(ep)),At});function _m(ce,_e){var He=[];if(!(ce&&ce.length))return He;var At=-1,Qt=[],yr=ce.length;for(_e=Mt(_e,3);++At<yr;){var rn=ce[At];_e(rn,At,ce)&&(He.push(rn),Qt.push(At))}return Ha(ce,Qt),He}function md(ce){return ce==null?ce:Ot.call(ce)}function wm(ce,_e,He){var At=ce==null?0:ce.length;return At?(He&&typeof He!="number"&&Ta(ce,_e,He)?(_e=0,He=At):(_e=_e==null?0:$i(_e),He=He===e?At:$i(He)),fi(ce,_e,He)):[]}function ap(ce,_e){return Gi(ce,_e)}function Tm(ce,_e,He){return Si(ce,_e,Mt(He,2))}function Am(ce,_e){var He=ce==null?0:ce.length;if(He){var At=Gi(ce,_e);if(At<He&&$f(ce[At],_e))return At}return-1}function Mm(ce,_e){return Gi(ce,_e,!0)}function Sm(ce,_e,He){return Si(ce,_e,Mt(He,2),!0)}function J0(ce,_e){var He=ce==null?0:ce.length;if(He){var At=Gi(ce,_e,!0)-1;if($f(ce[At],_e))return At}return-1}function km(ce){return ce&&ce.length?Go(ce):[]}function Q0(ce,_e){return ce&&ce.length?Go(ce,Mt(_e,2)):[]}function xd(ce){var _e=ce==null?0:ce.length;return _e?fi(ce,1,_e):[]}function $0(ce,_e,He){return ce&&ce.length?(_e=He||_e===e?1:$i(_e),fi(ce,0,_e<0?0:_e)):[]}function bd(ce,_e,He){var At=ce==null?0:ce.length;return At?(_e=He||_e===e?1:$i(_e),_e=At-_e,fi(ce,_e<0?0:_e,At)):[]}function ch(ce,_e){return ce&&ce.length?xo(ce,Mt(_e,3),!1,!0):[]}function yu(ce,_e){return ce&&ce.length?xo(ce,Mt(_e,3)):[]}var Em=ma(function(ce){return ts(zn(ce,1,Js,!0))}),Cm=ma(function(ce){var _e=$l(ce);return Js(_e)&&(_e=e),ts(zn(ce,1,Js,!0),Mt(_e,2))}),q0=ma(function(ce){var _e=$l(ce);return _e=typeof _e=="function"?_e:e,ts(zn(ce,1,Js,!0),e,_e)});function Lm(ce){return ce&&ce.length?ts(ce):[]}function Pm(ce,_e){return ce&&ce.length?ts(ce,Mt(_e,2)):[]}function Rm(ce,_e){return _e=typeof _e=="function"?_e:e,ce&&ce.length?ts(ce,e,_e):[]}function _d(ce){if(!(ce&&ce.length))return[];var _e=0;return ce=vo(ce,function(He){if(Js(He))return _e=po(He.length,_e),!0}),kl(_e,function(He){return ro(ce,Co(He))})}function eg(ce,_e){if(!(ce&&ce.length))return[];var He=_d(ce);return _e==null?He:ro(He,function(At){return Na(_e,e,At)})}var tg=ma(function(ce,_e){return Js(ce)?vr(ce,_e):[]}),wd=ma(function(ce){return ei(vo(ce,Js))}),Dm=ma(function(ce){var _e=$l(ce);return Js(_e)&&(_e=e),ei(vo(ce,Js),Mt(_e,2))}),ip=ma(function(ce){var _e=$l(ce);return _e=typeof _e=="function"?_e:e,ei(vo(ce,Js),e,_e)}),rg=ma(_d);function Kc(ce,_e){return vi(ce||[],_e||[],Ds)}function Mv(ce,_e){return vi(ce||[],_e||[],Ii)}var Im=ma(function(ce){var _e=ce.length,He=_e>1?ce[_e-1]:e;return He=typeof He=="function"?(ce.pop(),He):e,eg(ce,He)});function ng(ce){var _e=Kt(ce);return _e.__chain__=!0,_e}function zm(ce,_e){return _e(ce),ce}function op(ce,_e){return _e(ce)}var Fm=Q(function(ce){var _e=ce.length,He=_e?ce[0]:0,At=this.__wrapped__,Qt=function(yr){return ot(yr,ce)};return _e>1||this.__actions__.length||!(At instanceof Ba)||!Ia(He)?this.thru(Qt):(At=At.slice(He,+He+(_e?1:0)),At.__actions__.push({func:op,args:[Qt],thisArg:e}),new qa(At,this.__chain__).thru(function(yr){return _e&&!yr.length&&yr.push(e),yr}))});function Om(){return ng(this)}function Nm(){return new qa(this.value(),this.__chain__)}function Bm(){this.__values__===e&&(this.__values__=No(this.value()));var ce=this.__index__>=this.__values__.length,_e=ce?e:this.__values__[this.__index__++];return{done:ce,value:_e}}function Um(){return this}function Hm(ce){for(var _e,He=this;He instanceof Ca;){var At=du(He);At.__index__=0,At.__values__=e,_e?Qt.__wrapped__=At:_e=At;var Qt=At;He=He.__wrapped__}return Qt.__wrapped__=ce,_e}function Vm(){var ce=this.__wrapped__;if(ce instanceof Ba){var _e=ce;return this.__actions__.length&&(_e=new Ba(this)),_e=_e.reverse(),_e.__actions__.push({func:op,args:[md],thisArg:e}),new qa(_e,this.__chain__)}return this.thru(md)}function Td(){return bo(this.__wrapped__,this.__actions__)}var Gm=Gc(function(ce,_e,He){qi.call(ce,He)?++ce[He]:je(ce,He,1)});function Oh(ce,_e,He){var At=Wi(ce)?cl:Or;return He&&Ta(ce,_e,He)&&(_e=e),At(ce,Mt(_e,3))}function Wm(ce,_e){var He=Wi(ce)?vo:Ln;return He(ce,Mt(_e,3))}var zs=Lc(wv),sp=Lc(uh);function ag(ce,_e){return zn(Bh(ce,_e),1)}function lp(ce,_e){return zn(Bh(ce,_e),P)}function up(ce,_e,He){return He=He===e?1:$i(He),zn(Bh(ce,_e),He)}function ig(ce,_e){var He=Wi(ce)?Eo:nr;return He(ce,Mt(_e,3))}function Nh(ce,_e){var He=Wi(ce)?Xs:gr;return He(ce,Mt(_e,3))}var Ym=Gc(function(ce,_e,He){qi.call(ce,He)?ce[He].push(_e):je(ce,He,[_e])});function og(ce,_e,He,At){ce=Yu(ce)?ce:ph(ce),He=He&&!At?$i(He):0;var Qt=ce.length;return He<0&&(He=po(Qt+He,0)),hp(ce)?He<=Qt&&ce.indexOf(_e,He)>-1:!!Qt&&vl(ce,_e,He)>-1}var sg=ma(function(ce,_e,He){var At=-1,Qt=typeof _e=="function",yr=Yu(ce)?Gn(ce.length):[];return nr(ce,function(rn){yr[++At]=Qt?Na(_e,rn,He):Ts(rn,_e,He)}),yr}),Sv=Gc(function(ce,_e,He){je(ce,He,_e)});function Bh(ce,_e){var He=Wi(ce)?ro:Er;return He(ce,Mt(_e,3))}function Ad(ce,_e,He,At){return ce==null?[]:(Wi(_e)||(_e=_e==null?[]:[_e]),He=At?e:He,Wi(He)||(He=He==null?[]:[He]),gn(ce,_e,He))}var Xm=Gc(function(ce,_e,He){ce[He?0:1].push(_e)},function(){return[[],[]]});function lg(ce,_e,He){var At=Wi(ce)?Vl:Uo,Qt=arguments.length<3;return At(ce,Mt(_e,4),He,Qt,nr)}function kv(ce,_e,He){var At=Wi(ce)?zu:Uo,Qt=arguments.length<3;return At(ce,Mt(_e,4),He,Qt,gr)}function Zm(ce,_e){var He=Wi(ce)?vo:Ln;return He(ce,Cv(Mt(_e,3)))}function Md(ce){var _e=Wi(ce)?Vf:Ja;return _e(ce)}function jm(ce,_e,He){(He?Ta(ce,_e,He):_e===e)?_e=1:_e=$i(_e);var At=Wi(ce)?Rs:gi;return At(ce,_e)}function Sd(ce){var _e=Wi(ce)?pc:Ra;return _e(ce)}function kd(ce){if(ce==null)return 0;if(Yu(ce))return hp(ce)?Dl(ce):ce.length;var _e=Vr(ce);return _e==Y||_e==oe?ce.size:Wt(ce).length}function Km(ce,_e,He){var At=Wi(ce)?Fu:pi;return He&&Ta(ce,_e,He)&&(_e=e),At(ce,Mt(_e,3))}var Jf=ma(function(ce,_e){if(ce==null)return[];var He=_e.length;return He>1&&Ta(ce,_e[0],_e[1])?_e=[]:He>2&&Ta(_e[0],_e[1],_e[2])&&(_e=[_e[0]]),gn(ce,zn(_e,1),[])}),fp=Qo||function(){return Fr.Date.now()};function Jm(ce,_e){if(typeof _e!="function")throw new gs(s);return ce=$i(ce),function(){if(--ce<1)return _e.apply(this,arguments)}}function ug(ce,_e,He){return _e=He?e:_e,_e=ce&&_e==null?ce.length:_e,Mf(ce,A,e,e,e,e,_e)}function fg(ce,_e){var He;if(typeof _e!="function")throw new gs(s);return ce=$i(ce),function(){return--ce>0&&(He=_e.apply(this,arguments)),ce<=1&&(_e=e),He}}var Ed=ma(function(ce,_e,He){var At=o;if(He.length){var Qt=Rl(He,vt(Ed));At|=y}return Mf(ce,At,_e,He,Qt)}),Cd=ma(function(ce,_e,He){var At=o|c;if(He.length){var Qt=Rl(He,vt(Cd));At|=y}return Mf(_e,At,ce,He,Qt)});function Ld(ce,_e,He){_e=He?e:_e;var At=Mf(ce,d,e,e,e,e,e,_e);return At.placeholder=Ld.placeholder,At}function hh(ce,_e,He){_e=He?e:_e;var At=Mf(ce,p,e,e,e,e,e,_e);return At.placeholder=hh.placeholder,At}function cg(ce,_e,He){var At,Qt,yr,rn,sn,Dn,xa=0,ba=!1,za=!1,oi=!0;if(typeof ce!="function")throw new gs(s);_e=hf(_e)||0,Fs(He)&&(ba=!!He.leading,za="maxWait"in He,yr=za?po(hf(He.maxWait)||0,_e):yr,oi="trailing"in He?!!He.trailing:oi);function Ti(Qs){var wl=At,Fc=Qt;return At=Qt=e,xa=Qs,rn=ce.apply(Fc,wl),rn}function Ci(Qs){return xa=Qs,sn=Bl(ji,_e),ba?Ti(Qs):rn}function so(Qs){var wl=Qs-Dn,Fc=Qs-xa,Ov=_e-wl;return za?hs(Ov,yr-Fc):Ov}function Di(Qs){var wl=Qs-Dn,Fc=Qs-xa;return Dn===e||wl>=_e||wl<0||za&&Fc>=yr}function ji(){var Qs=fp();if(Di(Qs))return to(Qs);sn=Bl(ji,so(Qs))}function to(Qs){return sn=e,oi&&At?Ti(Qs):(At=Qt=e,rn)}function ju(){sn!==e&&il(sn),xa=0,At=Dn=Qt=sn=e}function wo(){return sn===e?rn:to(fp())}function tu(){var Qs=fp(),wl=Di(Qs);if(At=arguments,Qt=this,Dn=Qs,wl){if(sn===e)return Ci(Dn);if(za)return il(sn),sn=Bl(ji,_e),Ti(Dn)}return sn===e&&(sn=Bl(ji,_e)),rn}return tu.cancel=ju,tu.flush=wo,tu}var Qm=ma(function(ce,_e){return or(ce,1,_e)}),$m=ma(function(ce,_e,He){return or(ce,hf(_e)||0,He)});function qm(ce){return Mf(ce,M)}function Ev(ce,_e){if(typeof ce!="function"||_e!=null&&typeof _e!="function")throw new gs(s);var He=function(){var At=arguments,Qt=_e?_e.apply(this,At):At[0],yr=He.cache;if(yr.has(Qt))return yr.get(Qt);var rn=ce.apply(this,At);return He.cache=yr.set(Qt,rn)||yr,rn};return He.cache=new(Ev.Cache||ws),He}Ev.Cache=ws;function Cv(ce){if(typeof ce!="function")throw new gs(s);return function(){var _e=arguments;switch(_e.length){case 0:return!ce.call(this);case 1:return!ce.call(this,_e[0]);case 2:return!ce.call(this,_e[0],_e[1]);case 3:return!ce.call(this,_e[0],_e[1],_e[2])}return!ce.apply(this,_e)}}function e1(ce){return fg(2,ce)}var t1=zo(function(ce,_e){_e=_e.length==1&&Wi(_e[0])?ro(_e[0],Es(Mt())):ro(zn(_e,1),Es(Mt()));var He=_e.length;return ma(function(At){for(var Qt=-1,yr=hs(At.length,He);++Qt<yr;)At[Qt]=_e[Qt].call(this,At[Qt]);return Na(ce,this,At)})}),Pd=ma(function(ce,_e){var He=Rl(_e,vt(Pd));return Mf(ce,y,e,_e,He)}),hg=ma(function(ce,_e){var He=Rl(_e,vt(hg));return Mf(ce,g,e,_e,He)}),r1=Q(function(ce,_e){return Mf(ce,b,e,e,e,_e)});function n1(ce,_e){if(typeof ce!="function")throw new gs(s);return _e=_e===e?_e:$i(_e),ma(ce,_e)}function a1(ce,_e){if(typeof ce!="function")throw new gs(s);return _e=_e==null?0:po($i(_e),0),ma(function(He){var At=He[_e],Qt=ns(He,0,_e);return At&&is(Qt,At),Na(ce,this,Qt)})}function i1(ce,_e,He){var At=!0,Qt=!0;if(typeof ce!="function")throw new gs(s);return Fs(He)&&(At="leading"in He?!!He.leading:At,Qt="trailing"in He?!!He.trailing:Qt),cg(ce,_e,{leading:At,maxWait:_e,trailing:Qt})}function Uh(ce){return ug(ce,1)}function o1(ce,_e){return Pd(Io(_e),ce)}function s1(){if(!arguments.length)return[];var ce=arguments[0];return Wi(ce)?ce:[ce]}function Rd(ce){return St(ce,n)}function Lv(ce,_e){return _e=typeof _e=="function"?_e:e,St(ce,n,_e)}function Qf(ce){return St(ce,a|n)}function l1(ce,_e){return _e=typeof _e=="function"?_e:e,St(ce,a|n,_e)}function u1(ce,_e){return _e==null||Et(ce,_e,Hl(_e))}function $f(ce,_e){return ce===_e||ce!==ce&&_e!==_e}var f1=Zc(xi),c1=Zc(function(ce,_e){return ce>=_e}),qf=es(function(){return arguments}())?es:function(ce){return Os(ce)&&qi.call(ce,"callee")&&!cc.call(ce,"callee")},Wi=Gn.isArray,h1=Qn?Es(Qn):As;function Yu(ce){return ce!=null&&cp(ce.length)&&!mc(ce)}function Js(ce){return Os(ce)&&Yu(ce)}function v1(ce){return ce===!0||ce===!1||Os(ce)&&Vi(ce)==G}var Ic=Fl||Mo,p1=kn?Es(kn):Ws;function vg(ce){return Os(ce)&&ce.nodeType===1&&!Hh(ce)}function d1(ce){if(ce==null)return!0;if(Yu(ce)&&(Wi(ce)||typeof ce=="string"||typeof ce.splice=="function"||Ic(ce)||Vh(ce)||qf(ce)))return!ce.length;var _e=Vr(ce);if(_e==Y||_e==oe)return!ce.size;if(Mi(ce))return!Wt(ce).length;for(var He in ce)if(qi.call(ce,He))return!1;return!0}function g1(ce,_e){return ve(ce,_e)}function y1(ce,_e,He){He=typeof He=="function"?He:e;var At=He?He(ce,_e):e;return At===e?ve(ce,_e,e,He):!!At}function Dd(ce){if(!Os(ce))return!1;var _e=Vi(ce);return _e==fe||_e==le||typeof ce.message=="string"&&typeof ce.name=="string"&&!Hh(ce)}function pg(ce){return typeof ce=="number"&&js(ce)}function mc(ce){if(!Fs(ce))return!1;var _e=Vi(ce);return _e==se||_e==V||_e==q||_e==ae}function ql(ce){return typeof ce=="number"&&ce==$i(ce)}function cp(ce){return typeof ce=="number"&&ce>-1&&ce%1==0&&ce<=O}function Fs(ce){var _e=typeof ce;return ce!=null&&(_e=="object"||_e=="function")}function Os(ce){return ce!=null&&typeof ce=="object"}var dg=Wn?Es(Wn):Re;function gg(ce,_e){return ce===_e||Ve(ce,_e,ar(_e))}function m1(ce,_e,He){return He=typeof He=="function"?He:e,Ve(ce,_e,ar(_e),He)}function yg(ce){return mg(ce)&&ce!=+ce}function x1(ce){if(io(ce))throw new mi(u);return Ue(ce)}function Id(ce){return ce===null}function b1(ce){return ce==null}function mg(ce){return typeof ce=="number"||Os(ce)&&Vi(ce)==ne}function Hh(ce){if(!Os(ce)||Vi(ce)!=K)return!1;var _e=Nu(ce);if(_e===null)return!0;var He=qi.call(_e,"constructor")&&_e.constructor;return typeof He=="function"&&He instanceof He&&Il.call(He)==el}var zd=aa?Es(aa):$e;function _1(ce){return ql(ce)&&ce>=-O&&ce<=O}var xg=Ma?Es(Ma):wt;function hp(ce){return typeof ce=="string"||!Wi(ce)&&Os(ce)&&Vi(ce)==ue}function eu(ce){return typeof ce=="symbol"||Os(ce)&&Vi(ce)==xe}var Vh=ui?Es(ui):gt;function sl(ce){return ce===e}function w1(ce){return Os(ce)&&Vr(ce)==me}function T1(ce){return Os(ce)&&Vi(ce)==be}var vp=Zc(qt),pp=Zc(function(ce,_e){return ce<=_e});function No(ce){if(!ce)return[];if(Yu(ce))return hp(ce)?Ko(ce):Ks(ce);if(tl&&ce[tl])return mf(ce[tl]());var _e=Vr(ce),He=_e==Y?Wl:_e==oe?su:ph;return He(ce)}function ec(ce){if(!ce)return ce===0?ce:0;if(ce=hf(ce),ce===P||ce===-P){var _e=ce<0?-1:1;return _e*F}return ce===ce?ce:0}function $i(ce){var _e=ec(ce),He=_e%1;return _e===_e?He?_e-He:_e:0}function bg(ce){return ce?ft($i(ce),0,R):0}function hf(ce){if(typeof ce=="number")return ce;if(eu(ce))return D;if(Fs(ce)){var _e=typeof ce.valueOf=="function"?ce.valueOf():ce;ce=Fs(_e)?_e+"":_e}if(typeof ce!="string")return ce===0?ce:+ce;ce=Gs(ce);var He=br.test(ce);return He||Tr.test(ce)?Mn(ce.slice(2),He?2:8):fr.test(ce)?D:+ce}function _g(ce){return Su(ce,Xu(ce))}function zc(ce){return ce?ft($i(ce),-O,O):ce===0?ce:0}function ko(ce){return ce==null?"":ao(ce)}var A1=yc(function(ce,_e){if(Mi(_e)||Yu(_e)){Su(_e,Hl(_e),ce);return}for(var He in _e)qi.call(_e,He)&&Ds(ce,He,_e[He])}),wg=yc(function(ce,_e){Su(_e,Xu(_e),ce)}),dp=yc(function(ce,_e,He,At){Su(_e,Xu(_e),ce,At)}),Tg=yc(function(ce,_e,He,At){Su(_e,Hl(_e),ce,At)}),M1=Q(ot);function S1(ce,_e){var He=fa(ce);return _e==null?He:Wf(He,_e)}var k1=ma(function(ce,_e){ce=Bi(ce);var He=-1,At=_e.length,Qt=At>2?_e[2]:e;for(Qt&&Ta(_e[0],_e[1],Qt)&&(At=1);++He<At;)for(var yr=_e[He],rn=Xu(yr),sn=-1,Dn=rn.length;++sn<Dn;){var xa=rn[sn],ba=ce[xa];(ba===e||$f(ba,_s[xa])&&!qi.call(ce,xa))&&(ce[xa]=yr[xa])}return ce}),E1=ma(function(ce){return ce.push(e,Rh),Na(Pv,e,ce)});function C1(ce,_e){return To(ce,Mt(_e,3),Pa)}function L1(ce,_e){return To(ce,Mt(_e,3),ci)}function P1(ce,_e){return ce==null?ce:oa(ce,Mt(_e,3),Xu)}function R1(ce,_e){return ce==null?ce:Ua(ce,Mt(_e,3),Xu)}function D1(ce,_e){return ce&&Pa(ce,Mt(_e,3))}function gp(ce,_e){return ce&&ci(ce,Mt(_e,3))}function Gh(ce){return ce==null?[]:si(ce,Hl(ce))}function Ag(ce){return ce==null?[]:si(ce,Xu(ce))}function Fd(ce,_e,He){var At=ce==null?e:hi(ce,_e);return At===e?He:At}function I1(ce,_e){return ce!=null&&Bn(ce,_e,Po)}function Od(ce,_e){return ce!=null&&Bn(ce,_e,qo)}var Nd=Yc(function(ce,_e,He){_e!=null&&typeof _e.toString!="function"&&(_e=rf.call(_e)),ce[_e]=He},Jc(mu)),z1=Yc(function(ce,_e,He){_e!=null&&typeof _e.toString!="function"&&(_e=rf.call(_e)),qi.call(ce,_e)?ce[_e].push(He):ce[_e]=[He]},Mt),F1=ma(Ts);function Hl(ce){return Yu(ce)?Hf(ce):Wt(ce)}function Xu(ce){return Yu(ce)?Hf(ce,!0):Jt(ce)}function Mg(ce,_e){var He={};return _e=Mt(_e,3),Pa(ce,function(At,Qt,yr){je(He,_e(At,Qt,yr),At)}),He}function Sg(ce,_e){var He={};return _e=Mt(_e,3),Pa(ce,function(At,Qt,yr){je(He,Qt,_e(At,Qt,yr))}),He}var ku=yc(function(ce,_e,He){Rr(ce,_e,He)}),Pv=yc(function(ce,_e,He,At){Rr(ce,_e,He,At)}),Rv=Q(function(ce,_e){var He={};if(ce==null)return He;var At=!1;_e=ro(_e,function(yr){return yr=Wo(yr,ce),At||(At=yr.length>1),yr}),Su(ce,Le(ce),He),At&&(He=St(He,a|r|n,np));for(var Qt=_e.length;Qt--;)ms(He,_e[Qt]);return He});function Dv(ce,_e){return Wh(ce,Cv(Mt(_e)))}var Zu=Q(function(ce,_e){return ce==null?{}:yn(ce,_e)});function Wh(ce,_e){if(ce==null)return{};var He=ro(Le(ce),function(At){return[At]});return _e=Mt(_e),tn(ce,He,function(At,Qt){return _e(At,Qt[0])})}function O1(ce,_e,He){_e=Wo(_e,ce);var At=-1,Qt=_e.length;for(Qt||(Qt=1,ce=e);++At<Qt;){var yr=ce==null?e:ce[ds(_e[At])];yr===e&&(At=Qt,yr=He),ce=mc(yr)?yr.call(ce):yr}return ce}function kg(ce,_e,He){return ce==null?ce:Ii(ce,_e,He)}function Eg(ce,_e,He,At){return At=typeof At=="function"?At:e,ce==null?ce:Ii(ce,_e,He,At)}var vh=Gu(Hl),_l=Gu(Xu);function N1(ce,_e,He){var At=Wi(ce),Qt=At||Ic(ce)||Vh(ce);if(_e=Mt(_e,4),He==null){var yr=ce&&ce.constructor;Qt?He=At?new yr:[]:Fs(ce)?He=mc(yr)?fa(Nu(ce)):{}:He={}}return(Qt?Eo:Pa)(ce,function(rn,sn,Dn){return _e(He,rn,sn,Dn)}),He}function yp(ce,_e){return ce==null?!0:ms(ce,_e)}function xc(ce,_e,He){return ce==null?ce:Is(ce,_e,Io(He))}function Eu(ce,_e,He,At){return At=typeof At=="function"?At:e,ce==null?ce:Is(ce,_e,Io(He),At)}function ph(ce){return ce==null?[]:dl(ce,Hl(ce))}function B1(ce){return ce==null?[]:dl(ce,Xu(ce))}function Cg(ce,_e,He){return He===e&&(He=_e,_e=e),He!==e&&(He=hf(He),He=He===He?He:0),_e!==e&&(_e=hf(_e),_e=_e===_e?_e:0),ft(hf(ce),_e,He)}function U1(ce,_e,He){return _e=ec(_e),He===e?(He=_e,_e=0):He=ec(He),ce=hf(ce),ps(ce,_e,He)}function Lg(ce,_e,He){if(He&&typeof He!="boolean"&&Ta(ce,_e,He)&&(_e=He=e),He===e&&(typeof _e=="boolean"?(He=_e,_e=e):typeof ce=="boolean"&&(He=ce,ce=e)),ce===e&&_e===e?(ce=0,_e=1):(ce=ec(ce),_e===e?(_e=ce,ce=0):_e=ec(_e)),ce>_e){var At=ce;ce=_e,_e=At}if(He||ce%1||_e%1){var Qt=_t();return hs(ce+Qt*(_e-ce+Rn("1e-"+((Qt+"").length-1))),_e)}return _a(ce,_e)}var Pg=hu(function(ce,_e,He){return _e=_e.toLowerCase(),ce+(He?mp(_e):_e)});function mp(ce){return Ud(ko(ce).toLowerCase())}function xp(ce){return ce=ko(ce),ce&&ce.replace(Ir,qu).replace(ln,"")}function H1(ce,_e,He){ce=ko(ce),_e=ao(_e);var At=ce.length;He=He===e?At:ft($i(He),0,At);var Qt=He;return He-=_e.length,He>=0&&ce.slice(He,Qt)==_e}function V1(ce){return ce=ko(ce),ce&&Gt.test(ce)?ce.replace(Pt,sc):ce}function G1(ce){return ce=ko(ce),ce&&it.test(ce)?ce.replace(Je,"\\$&"):ce}var W1=hu(function(ce,_e,He){return ce+(He?"-":"")+_e.toLowerCase()}),Rg=hu(function(ce,_e,He){return ce+(He?" ":"")+_e.toLowerCase()}),Yh=Jl("toLowerCase");function tc(ce,_e,He){ce=ko(ce),_e=$i(_e);var At=_e?Dl(ce):0;if(!_e||At>=_e)return ce;var Qt=(_e-At)/2;return Xc(rl(Qt),He)+ce+Xc(Ls(Qt),He)}function Bd(ce,_e,He){ce=ko(ce),_e=$i(_e);var At=_e?Dl(ce):0;return _e&&At<_e?ce+Xc(_e-At,He):ce}function Dg(ce,_e,He){ce=ko(ce),_e=$i(_e);var At=_e?Dl(ce):0;return _e&&At<_e?Xc(_e-At,He)+ce:ce}function Ig(ce,_e,He){return He||_e==null?_e=0:_e&&(_e=+_e),Nf(ko(ce).replace(ht,""),_e||0)}function Y1(ce,_e,He){return(He?Ta(ce,_e,He):_e===e)?_e=1:_e=$i(_e),Sa(ko(ce),_e)}function zg(){var ce=arguments,_e=ko(ce[0]);return ce.length<3?_e:_e.replace(ce[1],ce[2])}var Fg=hu(function(ce,_e,He){return ce+(He?"_":"")+_e.toLowerCase()});function Og(ce,_e,He){return He&&typeof He!="number"&&Ta(ce,_e,He)&&(_e=He=e),He=He===e?R:He>>>0,He?(ce=ko(ce),ce&&(typeof _e=="string"||_e!=null&&!zd(_e))&&(_e=ao(_e),!_e&&Ll(ce))?ns(Ko(ce),0,He):ce.split(_e,He)):[]}var Ng=hu(function(ce,_e,He){return ce+(He?" ":"")+Ud(_e)});function X1(ce,_e,He){return ce=ko(ce),He=He==null?0:ft($i(He),0,ce.length),_e=ao(_e),ce.slice(He,He+_e.length)==_e}function Z1(ce,_e,He){var At=Kt.templateSettings;He&&Ta(ce,_e,He)&&(_e=e),ce=ko(ce),_e=dp({},_e,At,_v);var Qt=dp({},_e.imports,At.imports,_v),yr=Hl(Qt),rn=dl(Qt,yr),sn,Dn,xa=0,ba=_e.interpolate||lr,za="__p += '",oi=qs((_e.escape||lr).source+"|"+ba.source+"|"+(ba===lt?xt:lr).source+"|"+(_e.evaluate||lr).source+"|$","g"),Ti="//# sourceURL="+(qi.call(_e,"sourceURL")?(_e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ea+"]")+`
`;ce.replace(oi,function(Di,ji,to,ju,wo,tu){return to||(to=ju),za+=ce.slice(xa,tu).replace(Yr,lc),ji&&(sn=!0,za+=`' +
__e(`+ji+`) +
'`),wo&&(Dn=!0,za+=`';
`+wo+`;
__p += '`),to&&(za+=`' +
((__t = (`+to+`)) == null ? '' : __t) +
'`),xa=tu+Di.length,Di}),za+=`';
`;var Ci=qi.call(_e,"variable")&&_e.variable;if(!Ci)za=`with (obj) {
`+za+`
}
`;else if(tr.test(Ci))throw new mi(m);za=(Dn?za.replace(We,""):za).replace(mt,"$1").replace(Ft,"$1;"),za="function("+(Ci||"obj")+`) {
`+(Ci?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(sn?", __e = _.escape":"")+(Dn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+za+`return __p
}`;var so=dh(function(){return Ei(yr,Ti+"return "+za).apply(e,rn)});if(so.source=za,Dd(so))throw so;return so}function Bg(ce){return ko(ce).toLowerCase()}function Ug(ce){return ko(ce).toUpperCase()}function Xh(ce,_e,He){if(ce=ko(ce),ce&&(He||_e===e))return Gs(ce);if(!ce||!(_e=ao(_e)))return ce;var At=Ko(ce),Qt=Ko(_e),yr=If(At,Qt),rn=El(At,Qt)+1;return ns(At,yr,rn).join("")}function Hg(ce,_e,He){if(ce=ko(ce),ce&&(He||_e===e))return ce.slice(0,Au(ce)+1);if(!ce||!(_e=ao(_e)))return ce;var At=Ko(ce),Qt=El(At,Ko(_e))+1;return ns(At,0,Qt).join("")}function bp(ce,_e,He){if(ce=ko(ce),ce&&(He||_e===e))return ce.replace(ht,"");if(!ce||!(_e=ao(_e)))return ce;var At=Ko(ce),Qt=If(At,Ko(_e));return ns(At,Qt).join("")}function Vg(ce,_e){var He=w,At=T;if(Fs(_e)){var Qt="separator"in _e?_e.separator:Qt;He="length"in _e?$i(_e.length):He,At="omission"in _e?ao(_e.omission):At}ce=ko(ce);var yr=ce.length;if(Ll(ce)){var rn=Ko(ce);yr=rn.length}if(He>=yr)return ce;var sn=He-Dl(At);if(sn<1)return At;var Dn=rn?ns(rn,0,sn).join(""):ce.slice(0,sn);if(Qt===e)return Dn+At;if(rn&&(sn+=Dn.length-sn),zd(Qt)){if(ce.slice(sn).search(Qt)){var xa,ba=Dn;for(Qt.global||(Qt=qs(Qt.source,ko(Rt.exec(Qt))+"g")),Qt.lastIndex=0;xa=Qt.exec(ba);)var za=xa.index;Dn=Dn.slice(0,za===e?sn:za)}}else if(ce.indexOf(ao(Qt),sn)!=sn){var oi=Dn.lastIndexOf(Qt);oi>-1&&(Dn=Dn.slice(0,oi))}return Dn+At}function _p(ce){return ce=ko(ce),ce&&Ut.test(ce)?ce.replace(Xt,bf):ce}var wp=hu(function(ce,_e,He){return ce+(He?" ":"")+_e.toUpperCase()}),Ud=Jl("toUpperCase");function Iv(ce,_e,He){return ce=ko(ce),_e=He?e:_e,_e===e?Pl(ce)?tf(ce):Gl(ce):ce.match(_e)||[]}var dh=ma(function(ce,_e){try{return Na(ce,e,_e)}catch(He){return Dd(He)?He:new mi(He)}}),j1=Q(function(ce,_e){return Eo(_e,function(He){He=ds(He),je(ce,He,Ed(ce[He],ce))}),ce});function K1(ce){var _e=ce==null?0:ce.length,He=Mt();return ce=_e?ro(ce,function(At){if(typeof At[1]!="function")throw new gs(s);return[He(At[0]),At[1]]}):[],ma(function(At){for(var Qt=-1;++Qt<_e;){var yr=ce[Qt];if(Na(yr[0],this,At))return Na(yr[1],this,At)}})}function J1(ce){return Tt(St(ce,a))}function Jc(ce){return function(){return ce}}function Q1(ce,_e){return ce==null||ce!==ce?_e:ce}var $1=Lh(),Zh=Lh(!0);function mu(ce){return ce}function Tp(ce){return Dt(typeof ce=="function"?ce:St(ce,a))}function q1(ce){return an(St(ce,a))}function Hd(ce,_e){return bn(ce,St(_e,a))}var ex=ma(function(ce,_e){return function(He){return Ts(He,ce,_e)}}),zv=ma(function(ce,_e){return function(He){return Ts(ce,He,_e)}});function bc(ce,_e,He){var At=Hl(_e),Qt=si(_e,At);He==null&&!(Fs(_e)&&(Qt.length||!At.length))&&(He=_e,_e=ce,ce=this,Qt=si(_e,Hl(_e)));var yr=!(Fs(He)&&"chain"in He)||!!He.chain,rn=mc(ce);return Eo(Qt,function(sn){var Dn=_e[sn];ce[sn]=Dn,rn&&(ce.prototype[sn]=function(){var xa=this.__chain__;if(yr||xa){var ba=ce(this.__wrapped__),za=ba.__actions__=Ks(this.__actions__);return za.push({func:Dn,args:arguments,thisArg:ce}),ba.__chain__=xa,ba}return Dn.apply(ce,is([this.value()],arguments))})}),ce}function Gg(){return Fr._===this&&(Fr._=Ec),this}function Ap(){}function tx(ce){return ce=$i(ce),ma(function(_e){return $r(_e,ce)})}var rx=Af(ro),nx=Af(cl),ax=Af(Fu);function Fv(ce){return Ga(ce)?Co(ds(ce)):na(ce)}function Vd(ce){return function(_e){return ce==null?e:hi(ce,_e)}}var ix=Kf(),jh=Kf(!0);function gh(){return[]}function Mo(){return!1}function ox(){return{}}function sx(){return""}function lx(){return!0}function Gd(ce,_e){if(ce=$i(ce),ce<1||ce>O)return[];var He=R,At=hs(ce,R);_e=Mt(_e),ce-=R;for(var Qt=kl(At,_e);++He<ce;)_e(He);return Qt}function Kh(ce){return Wi(ce)?ro(ce,ds):eu(ce)?[ce]:Ks(ff(ko(ce)))}function ux(ce){var _e=++Ou;return ko(ce)+_e}var fx=jf(function(ce,_e){return ce+_e},0),cx=Ph("ceil"),hx=jf(function(ce,_e){return ce/_e},1),vx=Ph("floor");function px(ce){return ce&&ce.length?Kr(ce,mu,xi):e}function dx(ce,_e){return ce&&ce.length?Kr(ce,Mt(_e,2),xi):e}function gx(ce){return iu(ce,mu)}function yx(ce,_e){return iu(ce,Mt(_e,2))}function mx(ce){return ce&&ce.length?Kr(ce,mu,qt):e}function xx(ce,_e){return ce&&ce.length?Kr(ce,Mt(_e,2),qt):e}var Wg=jf(function(ce,_e){return ce*_e},1),Yg=Ph("round"),Xg=jf(function(ce,_e){return ce-_e},0);function Zg(ce){return ce&&ce.length?Vs(ce,mu):0}function Mp(ce,_e){return ce&&ce.length?Vs(ce,Mt(_e,2)):0}return Kt.after=Jm,Kt.ary=ug,Kt.assign=A1,Kt.assignIn=wg,Kt.assignInWith=dp,Kt.assignWith=Tg,Kt.at=M1,Kt.before=fg,Kt.bind=Ed,Kt.bindAll=j1,Kt.bindKey=Cd,Kt.castArray=s1,Kt.chain=ng,Kt.chunk=Sf,Kt.compact=cf,Kt.concat=kf,Kt.cond=K1,Kt.conforms=J1,Kt.constant=Jc,Kt.countBy=Gm,Kt.create=S1,Kt.curry=Ld,Kt.curryRight=hh,Kt.debounce=cg,Kt.defaults=k1,Kt.defaultsDeep=E1,Kt.defer=Qm,Kt.delay=$m,Kt.difference=Dh,Kt.differenceBy=Rc,Kt.differenceWith=ol,Kt.drop=sh,Kt.dropRight=Ul,Kt.dropRightWhile=lh,Kt.dropWhile=Ih,Kt.fill=zh,Kt.filter=Wm,Kt.flatMap=ag,Kt.flatMapDeep=lp,Kt.flatMapDepth=up,Kt.flatten=Dc,Kt.flattenDeep=jc,Kt.flattenDepth=bs,Kt.flip=qm,Kt.flow=$1,Kt.flowRight=Zh,Kt.fromPairs=gu,Kt.functions=Gh,Kt.functionsIn=Ag,Kt.groupBy=Ym,Kt.initial=Tv,Kt.intersection=vd,Kt.intersectionBy=pd,Kt.intersectionWith=fh,Kt.invert=Nd,Kt.invertBy=z1,Kt.invokeMap=sg,Kt.iteratee=Tp,Kt.keyBy=Sv,Kt.keys=Hl,Kt.keysIn=Xu,Kt.map=Bh,Kt.mapKeys=Mg,Kt.mapValues=Sg,Kt.matches=q1,Kt.matchesProperty=Hd,Kt.memoize=Ev,Kt.merge=ku,Kt.mergeWith=Pv,Kt.method=ex,Kt.methodOf=zv,Kt.mixin=bc,Kt.negate=Cv,Kt.nthArg=tx,Kt.omit=Rv,Kt.omitBy=Dv,Kt.once=e1,Kt.orderBy=Ad,Kt.over=rx,Kt.overArgs=t1,Kt.overEvery=nx,Kt.overSome=ax,Kt.partial=Pd,Kt.partialRight=hg,Kt.partition=Xm,Kt.pick=Zu,Kt.pickBy=Wh,Kt.property=Fv,Kt.propertyOf=Vd,Kt.pull=Av,Kt.pullAll=K0,Kt.pullAllBy=mm,Kt.pullAllWith=xm,Kt.pullAt=bm,Kt.range=ix,Kt.rangeRight=jh,Kt.rearg=r1,Kt.reject=Zm,Kt.remove=_m,Kt.rest=n1,Kt.reverse=md,Kt.sampleSize=jm,Kt.set=kg,Kt.setWith=Eg,Kt.shuffle=Sd,Kt.slice=wm,Kt.sortBy=Jf,Kt.sortedUniq=km,Kt.sortedUniqBy=Q0,Kt.split=Og,Kt.spread=a1,Kt.tail=xd,Kt.take=$0,Kt.takeRight=bd,Kt.takeRightWhile=ch,Kt.takeWhile=yu,Kt.tap=zm,Kt.throttle=i1,Kt.thru=op,Kt.toArray=No,Kt.toPairs=vh,Kt.toPairsIn=_l,Kt.toPath=Kh,Kt.toPlainObject=_g,Kt.transform=N1,Kt.unary=Uh,Kt.union=Em,Kt.unionBy=Cm,Kt.unionWith=q0,Kt.uniq=Lm,Kt.uniqBy=Pm,Kt.uniqWith=Rm,Kt.unset=yp,Kt.unzip=_d,Kt.unzipWith=eg,Kt.update=xc,Kt.updateWith=Eu,Kt.values=ph,Kt.valuesIn=B1,Kt.without=tg,Kt.words=Iv,Kt.wrap=o1,Kt.xor=wd,Kt.xorBy=Dm,Kt.xorWith=ip,Kt.zip=rg,Kt.zipObject=Kc,Kt.zipObjectDeep=Mv,Kt.zipWith=Im,Kt.entries=vh,Kt.entriesIn=_l,Kt.extend=wg,Kt.extendWith=dp,bc(Kt,Kt),Kt.add=fx,Kt.attempt=dh,Kt.camelCase=Pg,Kt.capitalize=mp,Kt.ceil=cx,Kt.clamp=Cg,Kt.clone=Rd,Kt.cloneDeep=Qf,Kt.cloneDeepWith=l1,Kt.cloneWith=Lv,Kt.conformsTo=u1,Kt.deburr=xp,Kt.defaultTo=Q1,Kt.divide=hx,Kt.endsWith=H1,Kt.eq=$f,Kt.escape=V1,Kt.escapeRegExp=G1,Kt.every=Oh,Kt.find=zs,Kt.findIndex=wv,Kt.findKey=C1,Kt.findLast=sp,Kt.findLastIndex=uh,Kt.findLastKey=L1,Kt.floor=vx,Kt.forEach=ig,Kt.forEachRight=Nh,Kt.forIn=P1,Kt.forInRight=R1,Kt.forOwn=D1,Kt.forOwnRight=gp,Kt.get=Fd,Kt.gt=f1,Kt.gte=c1,Kt.has=I1,Kt.hasIn=Od,Kt.head=Ql,Kt.identity=mu,Kt.includes=og,Kt.indexOf=Fh,Kt.inRange=U1,Kt.invoke=F1,Kt.isArguments=qf,Kt.isArray=Wi,Kt.isArrayBuffer=h1,Kt.isArrayLike=Yu,Kt.isArrayLikeObject=Js,Kt.isBoolean=v1,Kt.isBuffer=Ic,Kt.isDate=p1,Kt.isElement=vg,Kt.isEmpty=d1,Kt.isEqual=g1,Kt.isEqualWith=y1,Kt.isError=Dd,Kt.isFinite=pg,Kt.isFunction=mc,Kt.isInteger=ql,Kt.isLength=cp,Kt.isMap=dg,Kt.isMatch=gg,Kt.isMatchWith=m1,Kt.isNaN=yg,Kt.isNative=x1,Kt.isNil=b1,Kt.isNull=Id,Kt.isNumber=mg,Kt.isObject=Fs,Kt.isObjectLike=Os,Kt.isPlainObject=Hh,Kt.isRegExp=zd,Kt.isSafeInteger=_1,Kt.isSet=xg,Kt.isString=hp,Kt.isSymbol=eu,Kt.isTypedArray=Vh,Kt.isUndefined=sl,Kt.isWeakMap=w1,Kt.isWeakSet=T1,Kt.join=dd,Kt.kebabCase=W1,Kt.last=$l,Kt.lastIndexOf=gd,Kt.lowerCase=Rg,Kt.lowerFirst=Yh,Kt.lt=vp,Kt.lte=pp,Kt.max=px,Kt.maxBy=dx,Kt.mean=gx,Kt.meanBy=yx,Kt.min=mx,Kt.minBy=xx,Kt.stubArray=gh,Kt.stubFalse=Mo,Kt.stubObject=ox,Kt.stubString=sx,Kt.stubTrue=lx,Kt.multiply=Wg,Kt.nth=yd,Kt.noConflict=Gg,Kt.noop=Ap,Kt.now=fp,Kt.pad=tc,Kt.padEnd=Bd,Kt.padStart=Dg,Kt.parseInt=Ig,Kt.random=Lg,Kt.reduce=lg,Kt.reduceRight=kv,Kt.repeat=Y1,Kt.replace=zg,Kt.result=O1,Kt.round=Yg,Kt.runInContext=Tn,Kt.sample=Md,Kt.size=kd,Kt.snakeCase=Fg,Kt.some=Km,Kt.sortedIndex=ap,Kt.sortedIndexBy=Tm,Kt.sortedIndexOf=Am,Kt.sortedLastIndex=Mm,Kt.sortedLastIndexBy=Sm,Kt.sortedLastIndexOf=J0,Kt.startCase=Ng,Kt.startsWith=X1,Kt.subtract=Xg,Kt.sum=Zg,Kt.sumBy=Mp,Kt.template=Z1,Kt.times=Gd,Kt.toFinite=ec,Kt.toInteger=$i,Kt.toLength=bg,Kt.toLower=Bg,Kt.toNumber=hf,Kt.toSafeInteger=zc,Kt.toString=ko,Kt.toUpper=Ug,Kt.trim=Xh,Kt.trimEnd=Hg,Kt.trimStart=bp,Kt.truncate=Vg,Kt.unescape=_p,Kt.uniqueId=ux,Kt.upperCase=wp,Kt.upperFirst=Ud,Kt.each=ig,Kt.eachRight=Nh,Kt.first=Ql,bc(Kt,function(){var ce={};return Pa(Kt,function(_e,He){qi.call(Kt.prototype,He)||(ce[He]=_e)}),ce}(),{chain:!1}),Kt.VERSION=I,Eo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(ce){Kt[ce].placeholder=Kt}),Eo(["drop","take"],function(ce,_e){Ba.prototype[ce]=function(He){He=He===e?1:po($i(He),0);var At=this.__filtered__&&!_e?new Ba(this):this.clone();return At.__filtered__?At.__takeCount__=hs(He,At.__takeCount__):At.__views__.push({size:hs(He,R),type:ce+(At.__dir__<0?"Right":"")}),At},Ba.prototype[ce+"Right"]=function(He){return this.reverse()[ce](He).reverse()}}),Eo(["filter","map","takeWhile"],function(ce,_e){var He=_e+1,At=He==L||He==k;Ba.prototype[ce]=function(Qt){var yr=this.clone();return yr.__iteratees__.push({iteratee:Mt(Qt,3),type:He}),yr.__filtered__=yr.__filtered__||At,yr}}),Eo(["head","last"],function(ce,_e){var He="take"+(_e?"Right":"");Ba.prototype[ce]=function(){return this[He](1).value()[0]}}),Eo(["initial","tail"],function(ce,_e){var He="drop"+(_e?"":"Right");Ba.prototype[ce]=function(){return this.__filtered__?new Ba(this):this[He](1)}}),Ba.prototype.compact=function(){return this.filter(mu)},Ba.prototype.find=function(ce){return this.filter(ce).head()},Ba.prototype.findLast=function(ce){return this.reverse().find(ce)},Ba.prototype.invokeMap=ma(function(ce,_e){return typeof ce=="function"?new Ba(this):this.map(function(He){return Ts(He,ce,_e)})}),Ba.prototype.reject=function(ce){return this.filter(Cv(Mt(ce)))},Ba.prototype.slice=function(ce,_e){ce=$i(ce);var He=this;return He.__filtered__&&(ce>0||_e<0)?new Ba(He):(ce<0?He=He.takeRight(-ce):ce&&(He=He.drop(ce)),_e!==e&&(_e=$i(_e),He=_e<0?He.dropRight(-_e):He.take(_e-ce)),He)},Ba.prototype.takeRightWhile=function(ce){return this.reverse().takeWhile(ce).reverse()},Ba.prototype.toArray=function(){return this.take(R)},Pa(Ba.prototype,function(ce,_e){var He=/^(?:filter|find|map|reject)|While$/.test(_e),At=/^(?:head|last)$/.test(_e),Qt=Kt[At?"take"+(_e=="last"?"Right":""):_e],yr=At||/^find/.test(_e);!Qt||(Kt.prototype[_e]=function(){var rn=this.__wrapped__,sn=At?[1]:arguments,Dn=rn instanceof Ba,xa=sn[0],ba=Dn||Wi(rn),za=function(ji){var to=Qt.apply(Kt,is([ji],sn));return At&&oi?to[0]:to};ba&&He&&typeof xa=="function"&&xa.length!=1&&(Dn=ba=!1);var oi=this.__chain__,Ti=!!this.__actions__.length,Ci=yr&&!oi,so=Dn&&!Ti;if(!yr&&ba){rn=so?rn:new Ba(this);var Di=ce.apply(rn,sn);return Di.__actions__.push({func:op,args:[za],thisArg:e}),new qa(Di,oi)}return Ci&&so?ce.apply(this,sn):(Di=this.thru(za),Ci?At?Di.value()[0]:Di.value():Di)})}),Eo(["pop","push","shift","sort","splice","unshift"],function(ce){var _e=Yl[ce],He=/^(?:push|sort|unshift)$/.test(ce)?"tap":"thru",At=/^(?:pop|shift)$/.test(ce);Kt.prototype[ce]=function(){var Qt=arguments;if(At&&!this.__chain__){var yr=this.value();return _e.apply(Wi(yr)?yr:[],Qt)}return this[He](function(rn){return _e.apply(Wi(rn)?rn:[],Qt)})}}),Pa(Ba.prototype,function(ce,_e){var He=Kt[_e];if(He){var At=He.name+"";qi.call(ea,At)||(ea[At]=[]),ea[At].push({name:_e,func:He})}}),ea[sf(e,c).name]=[{name:"wrapper",func:e}],Ba.prototype.clone=Ui,Ba.prototype.reverse=Hi,Ba.prototype.value=Xi,Kt.prototype.at=Fm,Kt.prototype.chain=Om,Kt.prototype.commit=Nm,Kt.prototype.next=Bm,Kt.prototype.plant=Hm,Kt.prototype.reverse=Vm,Kt.prototype.toJSON=Kt.prototype.valueOf=Kt.prototype.value=Td,Kt.prototype.first=Kt.prototype.head,tl&&(Kt.prototype[tl]=Um),Kt},uu=fc();On?((On.exports=uu)._=uu,nn._=uu):Fr._=uu}).call(Fo)})(B5,B5.exports);var U5={},H5={};(function(z){function W(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?W=function(A){return typeof A}:W=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},W(y)}Object.defineProperty(z,"__esModule",{value:!0}),z.default=p;var e=s(xh.exports),I=B(Z2.exports);function B(y){return y&&y.__esModule?y:{default:y}}function u(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return u=function(){return y},y}function s(y){if(y&&y.__esModule)return y;if(y===null||W(y)!=="object"&&typeof y!="function")return{default:y};var g=u();if(g&&g.has(y))return g.get(y);var A={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in y)if(Object.prototype.hasOwnProperty.call(y,M)){var w=b?Object.getOwnPropertyDescriptor(y,M):null;w&&(w.get||w.set)?Object.defineProperty(A,M,w):A[M]=y[M]}return A.default=y,g&&g.set(y,A),A}function m(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function x(y,g){for(var A=0;A<g.length;A++){var b=g[A];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}function t(y,g,A){return g&&x(y.prototype,g),A&&x(y,A),y}function i(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),g&&a(y,g)}function a(y,g){return a=Object.setPrototypeOf||function(b,M){return b.__proto__=M,b},a(y,g)}function r(y){var g=l();return function(){var b=o(y),M;if(g){var w=o(this).constructor;M=Reflect.construct(b,arguments,w)}else M=b.apply(this,arguments);return n(this,M)}}function n(y,g){return g&&(W(g)==="object"||typeof g=="function")?g:f(y)}function f(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function o(y){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},o(y)}var c=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover"],v=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],d=typeof window!="undefined";function p(y){var g=function(A){i(M,A);var b=r(M);function M(w){var T;return m(this,M),T=b.call(this,w),T.p=Promise.resolve(),T.resizeHandler=null,T.handlers={},T.syncWindowResize=T.syncWindowResize.bind(f(T)),T.syncEventHandlers=T.syncEventHandlers.bind(f(T)),T.attachUpdateEvents=T.attachUpdateEvents.bind(f(T)),T.getRef=T.getRef.bind(f(T)),T.handleUpdate=T.handleUpdate.bind(f(T)),T.figureCallback=T.figureCallback.bind(f(T)),T.updatePlotly=T.updatePlotly.bind(f(T)),T}return t(M,[{key:"updatePlotly",value:function(T,_,h){var L=this;this.p=this.p.then(function(){if(!L.unmounting){if(!L.el)throw new Error("Missing element reference");return y.react(L.el,{data:L.props.data,layout:L.props.layout,config:L.props.config,frames:L.props.frames})}}).then(function(){L.unmounting||(L.syncWindowResize(T),L.syncEventHandlers(),L.figureCallback(_),h&&L.attachUpdateEvents())}).catch(function(S){L.props.onError&&L.props.onError(S)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(T){this.unmounting=!1;var _=T.frames&&T.frames.length?T.frames.length:0,h=this.props.frames&&this.props.frames.length?this.props.frames.length:0,L=!(T.layout===this.props.layout&&T.data===this.props.data&&T.config===this.props.config&&h===_),S=T.revision!==void 0,k=T.revision!==this.props.revision;!L&&(!S||S&&!k)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&d&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),y.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||v.forEach(function(_){T.el.on(_,T.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||v.forEach(function(_){T.el.removeListener(_,T.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(T){if(typeof T=="function"){var _=this.el,h=_.data,L=_.layout,S=this.el._transitionData?this.el._transitionData._frames:null,k={data:h,layout:L,frames:S};T(k,this.el)}}},{key:"syncWindowResize",value:function(T){var _=this;!d||(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return y.Plots.resize(_.el)},window.addEventListener("resize",this.resizeHandler),T&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(T){this.el=T,this.props.debug&&d&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var T=this;c.forEach(function(_){var h=T.props["on"+_],L=T.handlers[_],S=Boolean(L);h&&!S?T.addEventHandler(_,h):!h&&S?T.removeEventHandler(_):h&&S&&h!==L&&(T.removeEventHandler(_),T.addEventHandler(_,h))})}},{key:"addEventHandler",value:function(T,_){this.handlers[T]=_,this.el.on(this.getPlotlyEventName(T),this.handlers[T])}},{key:"removeEventHandler",value:function(T){this.el.removeListener(this.getPlotlyEventName(T),this.handlers[T]),delete this.handlers[T]}},{key:"getPlotlyEventName",value:function(T){return"plotly_"+T.toLowerCase()}},{key:"render",value:function(){return e.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),M}(e.Component);return g.propTypes={data:I.default.arrayOf(I.default.object),config:I.default.object,layout:I.default.object,frames:I.default.arrayOf(I.default.object),revision:I.default.number,onInitialized:I.default.func,onPurge:I.default.func,onError:I.default.func,onUpdate:I.default.func,debug:I.default.bool,style:I.default.object,className:I.default.string,useResizeHandler:I.default.bool,divId:I.default.string},c.forEach(function(A){g.propTypes["on"+A]=I.default.func}),g.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},g}})(H5);var V5={exports:{}};(function(z,W){(function(e){z.exports=e()})(function(){return function(){function e(I,B,u){function s(t,i){if(!B[t]){if(!I[t]){var a=typeof $g=="function"&&$g;if(!i&&a)return a(t,!0);if(m)return m(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=B[t]={exports:{}};I[t][0].call(n.exports,function(f){var l=I[t][1][f];return s(l||f)},n,n.exports,e,I,B,u)}return B[t].exports}for(var m=typeof $g=="function"&&$g,x=0;x<u.length;x++)s(u[x]);return s}return e}()({1:[function(e,I,B){var u=e("../src/lib"),s={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var m in s){var x=m.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");u.addStyleRule(x,s[m])}},{"../src/lib":503}],2:[function(e,I,B){I.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":1114}],3:[function(e,I,B){I.exports=e("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(e,I,B){I.exports=e("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(e,I,B){I.exports=e("../src/traces/box")},{"../src/traces/box":679}],6:[function(e,I,B){I.exports=e("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(e,I,B){I.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(e,I,B){I.exports=e("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(e,I,B){I.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(e,I,B){I.exports=e("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(e,I,B){I.exports=e("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(e,I,B){I.exports=e("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(e,I,B){I.exports=e("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(e,I,B){I.exports=e("../src/core")},{"../src/core":481}],15:[function(e,I,B){I.exports=e("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(e,I,B){I.exports=e("../src/transforms/filter")},{"../src/transforms/filter":1115}],17:[function(e,I,B){I.exports=e("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(e,I,B){I.exports=e("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(e,I,B){I.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":1116}],20:[function(e,I,B){I.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(e,I,B){I.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(e,I,B){I.exports=e("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(e,I,B){I.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(e,I,B){I.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(e,I,B){I.exports=e("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(e,I,B){I.exports=e("../src/traces/image")},{"../src/traces/image":852}],27:[function(e,I,B){var u=e("./core");u.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./funnel"),e("./waterfall"),e("./image"),e("./pie"),e("./sunburst"),e("./treemap"),e("./icicle"),e("./funnelarea"),e("./scatter3d"),e("./surface"),e("./isosurface"),e("./volume"),e("./mesh3d"),e("./cone"),e("./streamtube"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./parcoords"),e("./parcats"),e("./scattermapbox"),e("./choroplethmapbox"),e("./densitymapbox"),e("./sankey"),e("./indicator"),e("./table"),e("./carpet"),e("./scattercarpet"),e("./contourcarpet"),e("./ohlc"),e("./candlestick"),e("./scatterpolar"),e("./scatterpolargl"),e("./barpolar"),e("./scattersmith"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),I.exports=u},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(e,I,B){I.exports=e("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(e,I,B){I.exports=e("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(e,I,B){I.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(e,I,B){I.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(e,I,B){I.exports=e("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(e,I,B){I.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":895}],34:[function(e,I,B){I.exports=e("../src/traces/pie")},{"../src/traces/pie":906}],35:[function(e,I,B){I.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":915}],36:[function(e,I,B){I.exports=e("../src/traces/sankey")},{"../src/traces/sankey":921}],37:[function(e,I,B){I.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":959}],38:[function(e,I,B){I.exports=e("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":966}],39:[function(e,I,B){I.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":974}],40:[function(e,I,B){I.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":987}],41:[function(e,I,B){I.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":997}],42:[function(e,I,B){I.exports=e("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1005}],43:[function(e,I,B){I.exports=e("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1012}],44:[function(e,I,B){I.exports=e("../src/traces/scattersmith")},{"../src/traces/scattersmith":1019}],45:[function(e,I,B){I.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":1027}],46:[function(e,I,B){I.exports=e("../src/transforms/sort")},{"../src/transforms/sort":1118}],47:[function(e,I,B){I.exports=e("../src/traces/splom")},{"../src/traces/splom":1036}],48:[function(e,I,B){I.exports=e("../src/traces/streamtube")},{"../src/traces/streamtube":1044}],49:[function(e,I,B){I.exports=e("../src/traces/sunburst")},{"../src/traces/sunburst":1052}],50:[function(e,I,B){I.exports=e("../src/traces/surface")},{"../src/traces/surface":1061}],51:[function(e,I,B){I.exports=e("../src/traces/table")},{"../src/traces/table":1069}],52:[function(e,I,B){I.exports=e("../src/traces/treemap")},{"../src/traces/treemap":1080}],53:[function(e,I,B){I.exports=e("../src/traces/violin")},{"../src/traces/violin":1093}],54:[function(e,I,B){I.exports=e("../src/traces/volume")},{"../src/traces/volume":1101}],55:[function(e,I,B){I.exports=e("../src/traces/waterfall")},{"../src/traces/waterfall":1109}],56:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B,e("d3-array"),e("d3-collection"),e("d3-shape"),e("elementary-circuits-directed-graph")):s(u.d3=u.d3||{},u.d3,u.d3,u.d3,null)})(this,function(u,s,m,x,t){t=t&&t.hasOwnProperty("default")?t.default:t;function i(he){return he.target.depth}function a(he){return he.depth}function r(he,me){return me-1-he.height}function n(he,me){return he.sourceLinks.length?he.depth:me-1}function f(he){return he.targetLinks.length?he.depth:he.sourceLinks.length?s.min(he.sourceLinks,i)-1:0}function l(he){return function(){return he}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he};function c(he,me){return d(he.source,me.source)||he.index-me.index}function v(he,me){return d(he.target,me.target)||he.index-me.index}function d(he,me){return he.partOfCycle===me.partOfCycle?he.y0-me.y0:he.circularLinkType==="top"||me.circularLinkType==="bottom"?-1:1}function p(he){return he.value}function y(he){return(he.y0+he.y1)/2}function g(he){return y(he.source)}function A(he){return y(he.target)}function b(he){return he.index}function M(he){return he.nodes}function w(he){return he.links}function T(he,me){var be=he.get(me);if(!be)throw new Error("missing: "+me);return be}function _(he,me){return me(he)}var h=25,L=10,S=.3;function k(){var he=0,me=0,be=1,Ce=1,Se=24,Be,Ye=b,Xe=n,Te=M,Ie=w,Ze=32,rt=2,Ge,ze=null;function We(){var Ct={nodes:Te.apply(null,arguments),links:Ie.apply(null,arguments)};mt(Ct),P(Ct,Ye,ze),Ft(Ct),Ut(Ct),O(Ct,Ye),Gt(Ct,Ze,Ye),It(Ct);for(var lt=4,dt=0;dt<lt;dt++)$(Ct,Ce,Ye),ae(Ct,Ce,Ye),ne(Ct,me,Ce,Ye),$(Ct,Ce,Ye),ae(Ct,Ce,Ye);return xe(Ct,me,Ce),X(Ct,rt,Ce,Ye),Ct}We.nodeId=function(Ct){return arguments.length?(Ye=typeof Ct=="function"?Ct:l(Ct),We):Ye},We.nodeAlign=function(Ct){return arguments.length?(Xe=typeof Ct=="function"?Ct:l(Ct),We):Xe},We.nodeWidth=function(Ct){return arguments.length?(Se=+Ct,We):Se},We.nodePadding=function(Ct){return arguments.length?(Be=+Ct,We):Be},We.nodes=function(Ct){return arguments.length?(Te=typeof Ct=="function"?Ct:l(Ct),We):Te},We.links=function(Ct){return arguments.length?(Ie=typeof Ct=="function"?Ct:l(Ct),We):Ie},We.size=function(Ct){return arguments.length?(he=me=0,be=+Ct[0],Ce=+Ct[1],We):[be-he,Ce-me]},We.extent=function(Ct){return arguments.length?(he=+Ct[0][0],be=+Ct[1][0],me=+Ct[0][1],Ce=+Ct[1][1],We):[[he,me],[be,Ce]]},We.iterations=function(Ct){return arguments.length?(Ze=+Ct,We):Ze},We.circularLinkGap=function(Ct){return arguments.length?(rt=+Ct,We):rt},We.nodePaddingRatio=function(Ct){return arguments.length?(Ge=+Ct,We):Ge},We.sortNodes=function(Ct){return arguments.length?(ze=Ct,We):ze},We.update=function(Ct){return O(Ct,Ye),It(Ct),Ct.links.forEach(function(lt){lt.circular&&(lt.circularLinkType=lt.y0+lt.y1<Ce?"top":"bottom",lt.source.circularLinkType=lt.circularLinkType,lt.target.circularLinkType=lt.circularLinkType)}),$(Ct,Ce,Ye,!1),ae(Ct,Ce,Ye),X(Ct,rt,Ce,Ye),Ct};function mt(Ct){Ct.nodes.forEach(function(dt,et){dt.index=et,dt.sourceLinks=[],dt.targetLinks=[]});var lt=m.map(Ct.nodes,Ye);return Ct.links.forEach(function(dt,et){dt.index=et;var Pe=dt.source,Je=dt.target;(typeof Pe=="undefined"?"undefined":o(Pe))!=="object"&&(Pe=dt.source=T(lt,Pe)),(typeof Je=="undefined"?"undefined":o(Je))!=="object"&&(Je=dt.target=T(lt,Je)),Pe.sourceLinks.push(dt),Je.targetLinks.push(dt)}),Ct}function Ft(Ct){Ct.nodes.forEach(function(lt){lt.partOfCycle=!1,lt.value=Math.max(s.sum(lt.sourceLinks,p),s.sum(lt.targetLinks,p)),lt.sourceLinks.forEach(function(dt){dt.circular&&(lt.partOfCycle=!0,lt.circularLinkType=dt.circularLinkType)}),lt.targetLinks.forEach(function(dt){dt.circular&&(lt.partOfCycle=!0,lt.circularLinkType=dt.circularLinkType)})})}function Xt(Ct){var lt=0,dt=0,et=0,Pe=0,Je=s.max(Ct.nodes,function(it){return it.column});return Ct.links.forEach(function(it){it.circular&&(it.circularLinkType=="top"?lt=lt+it.width:dt=dt+it.width,it.target.column==0&&(Pe=Pe+it.width),it.source.column==Je&&(et=et+it.width))}),lt=lt>0?lt+h+L:lt,dt=dt>0?dt+h+L:dt,et=et>0?et+h+L:et,Pe=Pe>0?Pe+h+L:Pe,{top:lt,bottom:dt,left:Pe,right:et}}function Pt(Ct,lt){var dt=s.max(Ct.nodes,function(Lt){return Lt.column}),et=be-he,Pe=Ce-me,Je=et+lt.right+lt.left,it=Pe+lt.top+lt.bottom,ht=et/Je,zt=Pe/it;return he=he*ht+lt.left,be=lt.right==0?be:be*ht,me=me*zt+lt.top,Ce=Ce*zt,Ct.nodes.forEach(function(Lt){Lt.x0=he+Lt.column*((be-he-Se)/dt),Lt.x1=Lt.x0+Se}),zt}function Ut(Ct){var lt,dt,et;for(lt=Ct.nodes,dt=[],et=0;lt.length;++et,lt=dt,dt=[])lt.forEach(function(Pe){Pe.depth=et,Pe.sourceLinks.forEach(function(Je){dt.indexOf(Je.target)<0&&!Je.circular&&dt.push(Je.target)})});for(lt=Ct.nodes,dt=[],et=0;lt.length;++et,lt=dt,dt=[])lt.forEach(function(Pe){Pe.height=et,Pe.targetLinks.forEach(function(Je){dt.indexOf(Je.source)<0&&!Je.circular&&dt.push(Je.source)})});Ct.nodes.forEach(function(Pe){Pe.column=Math.floor(Xe.call(null,Pe,et))})}function Gt(Ct,lt,dt){var et=m.nest().key(function(Lt){return Lt.column}).sortKeys(s.ascending).entries(Ct.nodes).map(function(Lt){return Lt.values});it(dt),zt();for(var Pe=1,Je=lt;Je>0;--Je)ht(Pe*=.99,dt),zt();function it(Lt){if(Ge){var Vt=1/0;et.forEach(function(qe){var xt=Ce*Ge/(qe.length+1);Vt=xt<Vt?xt:Vt}),Be=Vt}var $t=s.min(et,function(qe){return(Ce-me-(qe.length-1)*Be)/s.sum(qe,p)});$t=$t*S,Ct.links.forEach(function(qe){qe.width=qe.value*$t});var Ht=Xt(Ct),tr=Pt(Ct,Ht);$t=$t*tr,Ct.links.forEach(function(qe){qe.width=qe.value*$t}),et.forEach(function(qe){var xt=qe.length;qe.forEach(function(Rt,fr){Rt.depth==et.length-1&&xt==1||Rt.depth==0&&xt==1?(Rt.y0=Ce/2-Rt.value*$t,Rt.y1=Rt.y0+Rt.value*$t):Rt.partOfCycle?R(Rt,Lt)==0?(Rt.y0=Ce/2+fr,Rt.y1=Rt.y0+Rt.value*$t):Rt.circularLinkType=="top"?(Rt.y0=me+fr,Rt.y1=Rt.y0+Rt.value*$t):(Rt.y0=Ce-Rt.value*$t-fr,Rt.y1=Rt.y0+Rt.value*$t):Ht.top==0||Ht.bottom==0?(Rt.y0=(Ce-me)/xt*fr,Rt.y1=Rt.y0+Rt.value*$t):(Rt.y0=(Ce-me)/2-xt/2+fr,Rt.y1=Rt.y0+Rt.value*$t)})})}function ht(Lt,Vt){var $t=et.length;et.forEach(function(Ht){var tr=Ht.length,qe=Ht[0].depth;Ht.forEach(function(xt){var Rt;if((xt.sourceLinks.length||xt.targetLinks.length)&&!(xt.partOfCycle&&R(xt,Vt)>0))if(qe==0&&tr==1)Rt=xt.y1-xt.y0,xt.y0=Ce/2-Rt/2,xt.y1=Ce/2+Rt/2;else if(qe==$t-1&&tr==1)Rt=xt.y1-xt.y0,xt.y0=Ce/2-Rt/2,xt.y1=Ce/2+Rt/2;else{var fr=0,br=s.mean(xt.sourceLinks,A),pr=s.mean(xt.targetLinks,g);br&&pr?fr=(br+pr)/2:fr=br||pr;var Tr=(fr-y(xt))*Lt;xt.y0+=Tr,xt.y1+=Tr}})})}function zt(){et.forEach(function(Lt){var Vt,$t,Ht=me,tr=Lt.length,qe;for(Lt.sort(d),qe=0;qe<tr;++qe)Vt=Lt[qe],$t=Ht-Vt.y0,$t>0&&(Vt.y0+=$t,Vt.y1+=$t),Ht=Vt.y1+Be;if($t=Ht-Be-Ce,$t>0)for(Ht=Vt.y0-=$t,Vt.y1-=$t,qe=tr-2;qe>=0;--qe)Vt=Lt[qe],$t=Vt.y1+Be-Ht,$t>0&&(Vt.y0-=$t,Vt.y1-=$t),Ht=Vt.y0})}}function It(Ct){Ct.nodes.forEach(function(lt){lt.sourceLinks.sort(v),lt.targetLinks.sort(c)}),Ct.nodes.forEach(function(lt){var dt=lt.y0,et=dt,Pe=lt.y1,Je=Pe;lt.sourceLinks.forEach(function(it){it.circular?(it.y0=Pe-it.width/2,Pe=Pe-it.width):(it.y0=dt+it.width/2,dt+=it.width)}),lt.targetLinks.forEach(function(it){it.circular?(it.y1=Je-it.width/2,Je=Je-it.width):(it.y1=et+it.width/2,et+=it.width)})})}return We}function P(he,me,be){var Ce=0;if(be===null){for(var Se=[],Be=0;Be<he.links.length;Be++){var Ye=he.links[Be],Xe=Ye.source.index,Te=Ye.target.index;Se[Xe]||(Se[Xe]=[]),Se[Te]||(Se[Te]=[]),Se[Xe].indexOf(Te)===-1&&Se[Xe].push(Te)}var Ie=t(Se);Ie.sort(function(ze,We){return ze.length-We.length});var Ze={};for(Be=0;Be<Ie.length;Be++){var rt=Ie[Be],Ge=rt.slice(-2);Ze[Ge[0]]||(Ze[Ge[0]]={}),Ze[Ge[0]][Ge[1]]=!0}he.links.forEach(function(ze){var We=ze.target.index,mt=ze.source.index;We===mt||Ze[mt]&&Ze[mt][We]?(ze.circular=!0,ze.circularLinkID=Ce,Ce=Ce+1):ze.circular=!1})}else he.links.forEach(function(ze){ze.source[be]<ze.target[be]?ze.circular=!1:(ze.circular=!0,ze.circularLinkID=Ce,Ce=Ce+1)})}function O(he,me){var be=0,Ce=0;he.links.forEach(function(Se){Se.circular&&(Se.source.circularLinkType||Se.target.circularLinkType?Se.circularLinkType=Se.source.circularLinkType?Se.source.circularLinkType:Se.target.circularLinkType:Se.circularLinkType=be<Ce?"top":"bottom",Se.circularLinkType=="top"?be=be+1:Ce=Ce+1,he.nodes.forEach(function(Be){(_(Be,me)==_(Se.source,me)||_(Be,me)==_(Se.target,me))&&(Be.circularLinkType=Se.circularLinkType)}))}),he.links.forEach(function(Se){Se.circular&&(Se.source.circularLinkType==Se.target.circularLinkType&&(Se.circularLinkType=Se.source.circularLinkType),ue(Se,me)&&(Se.circularLinkType=Se.source.circularLinkType))})}function F(he){var me=Math.abs(he.y1-he.y0),be=Math.abs(he.target.x0-he.source.x1);return Math.atan(be/me)}function D(he,me){return he.source.column<me.target.column?!1:!(he.target.column>me.source.column)}function R(he,me){var be=0;he.sourceLinks.forEach(function(Se){be=Se.circular&&!ue(Se,me)?be+1:be});var Ce=0;return he.targetLinks.forEach(function(Se){Ce=Se.circular&&!ue(Se,me)?Ce+1:Ce}),be+Ce}function U(he){var me=he.source.sourceLinks,be=0;me.forEach(function(Be){be=Be.circular?be+1:be});var Ce=he.target.targetLinks,Se=0;return Ce.forEach(function(Be){Se=Be.circular?Se+1:Se}),!(be>1||Se>1)}function N(he,me,be){return he.sort(ee),he.forEach(function(Ce,Se){var Be=0;if(ue(Ce,be)&&U(Ce))Ce.circularPathData.verticalBuffer=Be+Ce.width/2;else{var Ye=0;for(Ye;Ye<Se;Ye++)if(D(he[Se],he[Ye])){var Xe=he[Ye].circularPathData.verticalBuffer+he[Ye].width/2+me;Be=Xe>Be?Xe:Be}Ce.circularPathData.verticalBuffer=Be+Ce.width/2}}),he}function X(he,me,be,Ce){var Se=5,Be=s.min(he.links,function(Te){return Te.source.y0});he.links.forEach(function(Te){Te.circular&&(Te.circularPathData={})});var Ye=he.links.filter(function(Te){return Te.circularLinkType=="top"});N(Ye,me,Ce);var Xe=he.links.filter(function(Te){return Te.circularLinkType=="bottom"});N(Xe,me,Ce),he.links.forEach(function(Te){if(Te.circular){if(Te.circularPathData.arcRadius=Te.width+L,Te.circularPathData.leftNodeBuffer=Se,Te.circularPathData.rightNodeBuffer=Se,Te.circularPathData.sourceWidth=Te.source.x1-Te.source.x0,Te.circularPathData.sourceX=Te.source.x0+Te.circularPathData.sourceWidth,Te.circularPathData.targetX=Te.target.x0,Te.circularPathData.sourceY=Te.y0,Te.circularPathData.targetY=Te.y1,ue(Te,Ce)&&U(Te))Te.circularPathData.leftSmallArcRadius=L+Te.width/2,Te.circularPathData.leftLargeArcRadius=L+Te.width/2,Te.circularPathData.rightSmallArcRadius=L+Te.width/2,Te.circularPathData.rightLargeArcRadius=L+Te.width/2,Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Te.source.y1+h+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=Te.source.y0-h-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius);else{var Ie=Te.source.column,Ze=Te.circularLinkType,rt=he.links.filter(function(We){return We.source.column==Ie&&We.circularLinkType==Ze});Te.circularLinkType=="bottom"?rt.sort(G):rt.sort(q);var Ge=0;rt.forEach(function(We,mt){We.circularLinkID==Te.circularLinkID&&(Te.circularPathData.leftSmallArcRadius=L+Te.width/2+Ge,Te.circularPathData.leftLargeArcRadius=L+Te.width/2+mt*me+Ge),Ge=Ge+We.width}),Ie=Te.target.column,rt=he.links.filter(function(We){return We.target.column==Ie&&We.circularLinkType==Ze}),Te.circularLinkType=="bottom"?rt.sort(le):rt.sort(J),Ge=0,rt.forEach(function(We,mt){We.circularLinkID==Te.circularLinkID&&(Te.circularPathData.rightSmallArcRadius=L+Te.width/2+Ge,Te.circularPathData.rightLargeArcRadius=L+Te.width/2+mt*me+Ge),Ge=Ge+We.width}),Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Math.max(be,Te.source.y1,Te.target.y1)+h+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=Be-h-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius)}Te.circularPathData.leftInnerExtent=Te.circularPathData.sourceX+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightInnerExtent=Te.circularPathData.targetX-Te.circularPathData.rightNodeBuffer,Te.circularPathData.leftFullExtent=Te.circularPathData.sourceX+Te.circularPathData.leftLargeArcRadius+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightFullExtent=Te.circularPathData.targetX-Te.circularPathData.rightLargeArcRadius-Te.circularPathData.rightNodeBuffer}if(Te.circular)Te.path=j(Te);else{var ze=x.linkHorizontal().source(function(We){var mt=We.source.x0+(We.source.x1-We.source.x0),Ft=We.y0;return[mt,Ft]}).target(function(We){var mt=We.target.x0,Ft=We.y1;return[mt,Ft]});Te.path=ze(Te)}})}function j(he){var me="";return he.circularLinkType=="top"?me="M"+he.circularPathData.sourceX+" "+he.circularPathData.sourceY+" L"+he.circularPathData.leftInnerExtent+" "+he.circularPathData.sourceY+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftSmallArcRadius+" 0 0 0 "+he.circularPathData.leftFullExtent+" "+(he.circularPathData.sourceY-he.circularPathData.leftSmallArcRadius)+" L"+he.circularPathData.leftFullExtent+" "+he.circularPathData.verticalLeftInnerExtent+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftLargeArcRadius+" 0 0 0 "+he.circularPathData.leftInnerExtent+" "+he.circularPathData.verticalFullExtent+" L"+he.circularPathData.rightInnerExtent+" "+he.circularPathData.verticalFullExtent+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightLargeArcRadius+" 0 0 0 "+he.circularPathData.rightFullExtent+" "+he.circularPathData.verticalRightInnerExtent+" L"+he.circularPathData.rightFullExtent+" "+(he.circularPathData.targetY-he.circularPathData.rightSmallArcRadius)+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightSmallArcRadius+" 0 0 0 "+he.circularPathData.rightInnerExtent+" "+he.circularPathData.targetY+" L"+he.circularPathData.targetX+" "+he.circularPathData.targetY:me="M"+he.circularPathData.sourceX+" "+he.circularPathData.sourceY+" L"+he.circularPathData.leftInnerExtent+" "+he.circularPathData.sourceY+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftSmallArcRadius+" 0 0 1 "+he.circularPathData.leftFullExtent+" "+(he.circularPathData.sourceY+he.circularPathData.leftSmallArcRadius)+" L"+he.circularPathData.leftFullExtent+" "+he.circularPathData.verticalLeftInnerExtent+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftLargeArcRadius+" 0 0 1 "+he.circularPathData.leftInnerExtent+" "+he.circularPathData.verticalFullExtent+" L"+he.circularPathData.rightInnerExtent+" "+he.circularPathData.verticalFullExtent+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightLargeArcRadius+" 0 0 1 "+he.circularPathData.rightFullExtent+" "+he.circularPathData.verticalRightInnerExtent+" L"+he.circularPathData.rightFullExtent+" "+(he.circularPathData.targetY+he.circularPathData.rightSmallArcRadius)+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightSmallArcRadius+" 0 0 1 "+he.circularPathData.rightInnerExtent+" "+he.circularPathData.targetY+" L"+he.circularPathData.targetX+" "+he.circularPathData.targetY,me}function ee(he,me){return fe(he)==fe(me)?he.circularLinkType=="bottom"?G(he,me):q(he,me):fe(me)-fe(he)}function q(he,me){return he.y0-me.y0}function G(he,me){return me.y0-he.y0}function J(he,me){return he.y1-me.y1}function le(he,me){return me.y1-he.y1}function fe(he){return he.target.column-he.source.column}function se(he){return he.target.x0-he.source.x1}function V(he,me){var be=F(he),Ce=se(me)/Math.tan(be),Se=oe(he)=="up"?he.y1+Ce:he.y1-Ce;return Se}function Y(he,me){var be=F(he),Ce=se(me)/Math.tan(be),Se=oe(he)=="up"?he.y1-Ce:he.y1+Ce;return Se}function ne(he,me,be,Ce){he.links.forEach(function(Se){if(!Se.circular&&Se.target.column-Se.source.column>1){var Be=Se.source.column+1,Ye=Se.target.column-1,Xe=1,Te=Ye-Be+1;for(Xe=1;Be<=Ye;Be++,Xe++)he.nodes.forEach(function(Ie){if(Ie.column==Be){var Ze=Xe/(Te+1),rt=Math.pow(1-Ze,3),Ge=3*Ze*Math.pow(1-Ze,2),ze=3*Math.pow(Ze,2)*(1-Ze),We=Math.pow(Ze,3),mt=rt*Se.y0+Ge*Se.y0+ze*Se.y1+We*Se.y1,Ft=mt-Se.width/2,Xt=mt+Se.width/2,Pt;Ft>Ie.y0&&Ft<Ie.y1?(Pt=Ie.y1-Ft+10,Pt=Ie.circularLinkType=="bottom"?Pt:-Pt,Ie=K(Ie,Pt,me,be),he.nodes.forEach(function(Ut){_(Ut,Ce)==_(Ie,Ce)||Ut.column!=Ie.column||te(Ie,Ut)&&K(Ut,Pt,me,be)})):Xt>Ie.y0&&Xt<Ie.y1?(Pt=Xt-Ie.y0+10,Ie=K(Ie,Pt,me,be),he.nodes.forEach(function(Ut){_(Ut,Ce)==_(Ie,Ce)||Ut.column!=Ie.column||Ut.y0<Ie.y1&&Ut.y1>Ie.y1&&K(Ut,Pt,me,be)})):Ft<Ie.y0&&Xt>Ie.y1&&(Pt=Xt-Ie.y0+10,Ie=K(Ie,Pt,me,be),he.nodes.forEach(function(Ut){_(Ut,Ce)==_(Ie,Ce)||Ut.column!=Ie.column||Ut.y0<Ie.y1&&Ut.y1>Ie.y1&&K(Ut,Pt,me,be)}))}})}})}function te(he,me){return he.y0>me.y0&&he.y0<me.y1||he.y1>me.y0&&he.y1<me.y1?!0:he.y0<me.y0&&he.y1>me.y1}function K(he,me,be,Ce){return he.y0+me>=be&&he.y1+me<=Ce&&(he.y0=he.y0+me,he.y1=he.y1+me,he.targetLinks.forEach(function(Se){Se.y1=Se.y1+me}),he.sourceLinks.forEach(function(Se){Se.y0=Se.y0+me})),he}function $(he,me,be,Ce){he.nodes.forEach(function(Se){Ce&&Se.y+(Se.y1-Se.y0)>me&&(Se.y=Se.y-(Se.y+(Se.y1-Se.y0)-me));var Be=he.links.filter(function(Te){return _(Te.source,be)==_(Se,be)}),Ye=Be.length;Ye>1&&Be.sort(function(Te,Ie){if(!Te.circular&&!Ie.circular){if(Te.target.column==Ie.target.column)return Te.y1-Ie.y1;if(ie(Te,Ie)){if(Te.target.column>Ie.target.column){var Ze=Y(Ie,Te);return Te.y1-Ze}if(Ie.target.column>Te.target.column){var rt=Y(Te,Ie);return rt-Ie.y1}}else return Te.y1-Ie.y1}if(Te.circular&&!Ie.circular)return Te.circularLinkType=="top"?-1:1;if(Ie.circular&&!Te.circular)return Ie.circularLinkType=="top"?1:-1;if(Te.circular&&Ie.circular)return Te.circularLinkType===Ie.circularLinkType&&Te.circularLinkType=="top"?Te.target.column===Ie.target.column?Te.target.y1-Ie.target.y1:Ie.target.column-Te.target.column:Te.circularLinkType===Ie.circularLinkType&&Te.circularLinkType=="bottom"?Te.target.column===Ie.target.column?Ie.target.y1-Te.target.y1:Te.target.column-Ie.target.column:Te.circularLinkType=="top"?-1:1});var Xe=Se.y0;Be.forEach(function(Te){Te.y0=Xe+Te.width/2,Xe=Xe+Te.width}),Be.forEach(function(Te,Ie){if(Te.circularLinkType=="bottom"){var Ze=Ie+1,rt=0;for(Ze;Ze<Ye;Ze++)rt=rt+Be[Ze].width;Te.y0=Se.y1-rt-Te.width/2}})})}function ae(he,me,be){he.nodes.forEach(function(Ce){var Se=he.links.filter(function(Xe){return _(Xe.target,be)==_(Ce,be)}),Be=Se.length;Be>1&&Se.sort(function(Xe,Te){if(!Xe.circular&&!Te.circular){if(Xe.source.column==Te.source.column)return Xe.y0-Te.y0;if(ie(Xe,Te)){if(Te.source.column<Xe.source.column){var Ie=V(Te,Xe);return Xe.y0-Ie}if(Xe.source.column<Te.source.column){var Ze=V(Xe,Te);return Ze-Te.y0}}else return Xe.y0-Te.y0}if(Xe.circular&&!Te.circular)return Xe.circularLinkType=="top"?-1:1;if(Te.circular&&!Xe.circular)return Te.circularLinkType=="top"?1:-1;if(Xe.circular&&Te.circular)return Xe.circularLinkType===Te.circularLinkType&&Xe.circularLinkType=="top"?Xe.source.column===Te.source.column?Xe.source.y1-Te.source.y1:Xe.source.column-Te.source.column:Xe.circularLinkType===Te.circularLinkType&&Xe.circularLinkType=="bottom"?Xe.source.column===Te.source.column?Xe.source.y1-Te.source.y1:Te.source.column-Xe.source.column:Xe.circularLinkType=="top"?-1:1});var Ye=Ce.y0;Se.forEach(function(Xe){Xe.y1=Ye+Xe.width/2,Ye=Ye+Xe.width}),Se.forEach(function(Xe,Te){if(Xe.circularLinkType=="bottom"){var Ie=Te+1,Ze=0;for(Ie;Ie<Be;Ie++)Ze=Ze+Se[Ie].width;Xe.y1=Ce.y1-Ze-Xe.width/2}})})}function ie(he,me){return oe(he)==oe(me)}function oe(he){return he.y0-he.y1>0?"up":"down"}function ue(he,me){return _(he.source,me)==_(he.target,me)}function xe(he,me,be){var Ce=he.nodes,Se=he.links,Be=!1,Ye=!1;if(Se.forEach(function(Ge){Ge.circularLinkType=="top"?Be=!0:Ge.circularLinkType=="bottom"&&(Ye=!0)}),Be==!1||Ye==!1){var Xe=s.min(Ce,function(Ge){return Ge.y0}),Te=s.max(Ce,function(Ge){return Ge.y1}),Ie=Te-Xe,Ze=be-me,rt=Ze/Ie;Ce.forEach(function(Ge){var ze=(Ge.y1-Ge.y0)*rt;Ge.y0=(Ge.y0-Xe)*rt,Ge.y1=Ge.y0+ze}),Se.forEach(function(Ge){Ge.y0=(Ge.y0-Xe)*rt,Ge.y1=(Ge.y1-Xe)*rt,Ge.width=Ge.width*rt})}}u.sankeyCircular=k,u.sankeyCenter=f,u.sankeyLeft=a,u.sankeyRight=r,u.sankeyJustify=n,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B,e("d3-array"),e("d3-collection"),e("d3-shape")):s(u.d3=u.d3||{},u.d3,u.d3,u.d3)})(this,function(u,s,m,x){function t(L){return L.target.depth}function i(L){return L.depth}function a(L,S){return S-1-L.height}function r(L,S){return L.sourceLinks.length?L.depth:S-1}function n(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?s.min(L.sourceLinks,t)-1:0}function f(L){return function(){return L}}function l(L,S){return c(L.source,S.source)||L.index-S.index}function o(L,S){return c(L.target,S.target)||L.index-S.index}function c(L,S){return L.y0-S.y0}function v(L){return L.value}function d(L){return(L.y0+L.y1)/2}function p(L){return d(L.source)*L.value}function y(L){return d(L.target)*L.value}function g(L){return L.index}function A(L){return L.nodes}function b(L){return L.links}function M(L,S){var k=L.get(S);if(!k)throw new Error("missing: "+S);return k}var w=function(){var L=0,S=0,k=1,P=1,O=24,F=8,D=g,R=r,U=A,N=b,X=32,j=2/3;function ee(){var se={nodes:U.apply(null,arguments),links:N.apply(null,arguments)};return q(se),G(se),J(se),le(se),fe(se),se}ee.update=function(se){return fe(se),se},ee.nodeId=function(se){return arguments.length?(D=typeof se=="function"?se:f(se),ee):D},ee.nodeAlign=function(se){return arguments.length?(R=typeof se=="function"?se:f(se),ee):R},ee.nodeWidth=function(se){return arguments.length?(O=+se,ee):O},ee.nodePadding=function(se){return arguments.length?(F=+se,ee):F},ee.nodes=function(se){return arguments.length?(U=typeof se=="function"?se:f(se),ee):U},ee.links=function(se){return arguments.length?(N=typeof se=="function"?se:f(se),ee):N},ee.size=function(se){return arguments.length?(L=S=0,k=+se[0],P=+se[1],ee):[k-L,P-S]},ee.extent=function(se){return arguments.length?(L=+se[0][0],k=+se[1][0],S=+se[0][1],P=+se[1][1],ee):[[L,S],[k,P]]},ee.iterations=function(se){return arguments.length?(X=+se,ee):X};function q(se){se.nodes.forEach(function(Y,ne){Y.index=ne,Y.sourceLinks=[],Y.targetLinks=[]});var V=m.map(se.nodes,D);se.links.forEach(function(Y,ne){Y.index=ne;var te=Y.source,K=Y.target;typeof te!="object"&&(te=Y.source=M(V,te)),typeof K!="object"&&(K=Y.target=M(V,K)),te.sourceLinks.push(Y),K.targetLinks.push(Y)})}function G(se){se.nodes.forEach(function(V){V.value=Math.max(s.sum(V.sourceLinks,v),s.sum(V.targetLinks,v))})}function J(se){var V,Y,ne;for(V=se.nodes,Y=[],ne=0;V.length;++ne,V=Y,Y=[])V.forEach(function(K){K.depth=ne,K.sourceLinks.forEach(function($){Y.indexOf($.target)<0&&Y.push($.target)})});for(V=se.nodes,Y=[],ne=0;V.length;++ne,V=Y,Y=[])V.forEach(function(K){K.height=ne,K.targetLinks.forEach(function($){Y.indexOf($.source)<0&&Y.push($.source)})});var te=(k-L-O)/(ne-1);se.nodes.forEach(function(K){K.x1=(K.x0=L+Math.max(0,Math.min(ne-1,Math.floor(R.call(null,K,ne))))*te)+O})}function le(se){var V=m.nest().key(function(ie){return ie.x0}).sortKeys(s.ascending).entries(se.nodes).map(function(ie){return ie.values});te(),ae();for(var Y=1,ne=X;ne>0;--ne)$(Y*=.99),ae(),K(Y),ae();function te(){var ie=s.max(V,function(xe){return xe.length}),oe=j*(P-S)/(ie-1);F>oe&&(F=oe);var ue=s.min(V,function(xe){return(P-S-(xe.length-1)*F)/s.sum(xe,v)});V.forEach(function(xe){xe.forEach(function(he,me){he.y1=(he.y0=me)+he.value*ue})}),se.links.forEach(function(xe){xe.width=xe.value*ue})}function K(ie){V.forEach(function(oe){oe.forEach(function(ue){if(ue.targetLinks.length){var xe=(s.sum(ue.targetLinks,p)/s.sum(ue.targetLinks,v)-d(ue))*ie;ue.y0+=xe,ue.y1+=xe}})})}function $(ie){V.slice().reverse().forEach(function(oe){oe.forEach(function(ue){if(ue.sourceLinks.length){var xe=(s.sum(ue.sourceLinks,y)/s.sum(ue.sourceLinks,v)-d(ue))*ie;ue.y0+=xe,ue.y1+=xe}})})}function ae(){V.forEach(function(ie){var oe,ue,xe=S,he=ie.length,me;for(ie.sort(c),me=0;me<he;++me)oe=ie[me],ue=xe-oe.y0,ue>0&&(oe.y0+=ue,oe.y1+=ue),xe=oe.y1+F;if(ue=xe-F-P,ue>0)for(xe=oe.y0-=ue,oe.y1-=ue,me=he-2;me>=0;--me)oe=ie[me],ue=oe.y1+F-xe,ue>0&&(oe.y0-=ue,oe.y1-=ue),xe=oe.y0})}}function fe(se){se.nodes.forEach(function(V){V.sourceLinks.sort(o),V.targetLinks.sort(l)}),se.nodes.forEach(function(V){var Y=V.y0,ne=Y;V.sourceLinks.forEach(function(te){te.y0=Y+te.width/2,Y+=te.width}),V.targetLinks.forEach(function(te){te.y1=ne+te.width/2,ne+=te.width})})}return ee};function T(L){return[L.source.x1,L.y0]}function _(L){return[L.target.x0,L.y1]}var h=function(){return x.linkHorizontal().source(T).target(_)};u.sankey=w,u.sankeyCenter=n,u.sankeyLeft=i,u.sankeyRight=a,u.sankeyJustify=r,u.sankeyLinkHorizontal=h,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(e,I,B){(function(){var u={version:"3.8.0"},s=[].slice,m=function(ve){return s.call(ve)},x=self.document;function t(ve){return ve&&(ve.ownerDocument||ve.document||ve).documentElement}function i(ve){return ve&&(ve.ownerDocument&&ve.ownerDocument.defaultView||ve.document&&ve||ve.defaultView)}if(x)try{m(x.documentElement.childNodes)[0].nodeType}catch{m=function(Me){for(var Re=Me.length,Ve=new Array(Re);Re--;)Ve[Re]=Me[Re];return Ve}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch{var a=this.Element.prototype,r=a.setAttribute,n=a.setAttributeNS,f=this.CSSStyleDeclaration.prototype,l=f.setProperty;a.setAttribute=function(Me,Re){r.call(this,Me,Re+"")},a.setAttributeNS=function(Me,Re,Ve){n.call(this,Me,Re,Ve+"")},f.setProperty=function(Me,Re,Ve){l.call(this,Me,Re+"",Ve)}}u.ascending=o;function o(ve,Me){return ve<Me?-1:ve>Me?1:ve>=Me?0:NaN}u.descending=function(ve,Me){return Me<ve?-1:Me>ve?1:Me>=ve?0:NaN},u.min=function(ve,Me){var Re=-1,Ve=ve.length,Ue,$e;if(arguments.length===1){for(;++Re<Ve;)if(($e=ve[Re])!=null&&$e>=$e){Ue=$e;break}for(;++Re<Ve;)($e=ve[Re])!=null&&Ue>$e&&(Ue=$e)}else{for(;++Re<Ve;)if(($e=Me.call(ve,ve[Re],Re))!=null&&$e>=$e){Ue=$e;break}for(;++Re<Ve;)($e=Me.call(ve,ve[Re],Re))!=null&&Ue>$e&&(Ue=$e)}return Ue},u.max=function(ve,Me){var Re=-1,Ve=ve.length,Ue,$e;if(arguments.length===1){for(;++Re<Ve;)if(($e=ve[Re])!=null&&$e>=$e){Ue=$e;break}for(;++Re<Ve;)($e=ve[Re])!=null&&$e>Ue&&(Ue=$e)}else{for(;++Re<Ve;)if(($e=Me.call(ve,ve[Re],Re))!=null&&$e>=$e){Ue=$e;break}for(;++Re<Ve;)($e=Me.call(ve,ve[Re],Re))!=null&&$e>Ue&&(Ue=$e)}return Ue},u.extent=function(ve,Me){var Re=-1,Ve=ve.length,Ue,$e,wt;if(arguments.length===1){for(;++Re<Ve;)if(($e=ve[Re])!=null&&$e>=$e){Ue=wt=$e;break}for(;++Re<Ve;)($e=ve[Re])!=null&&(Ue>$e&&(Ue=$e),wt<$e&&(wt=$e))}else{for(;++Re<Ve;)if(($e=Me.call(ve,ve[Re],Re))!=null&&$e>=$e){Ue=wt=$e;break}for(;++Re<Ve;)($e=Me.call(ve,ve[Re],Re))!=null&&(Ue>$e&&(Ue=$e),wt<$e&&(wt=$e))}return[Ue,wt]};function c(ve){return ve===null?NaN:+ve}function v(ve){return!isNaN(ve)}u.sum=function(ve,Me){var Re=0,Ve=ve.length,Ue,$e=-1;if(arguments.length===1)for(;++$e<Ve;)v(Ue=+ve[$e])&&(Re+=Ue);else for(;++$e<Ve;)v(Ue=+Me.call(ve,ve[$e],$e))&&(Re+=Ue);return Re},u.mean=function(ve,Me){var Re=0,Ve=ve.length,Ue,$e=-1,wt=Ve;if(arguments.length===1)for(;++$e<Ve;)v(Ue=c(ve[$e]))?Re+=Ue:--wt;else for(;++$e<Ve;)v(Ue=c(Me.call(ve,ve[$e],$e)))?Re+=Ue:--wt;if(wt)return Re/wt},u.quantile=function(ve,Me){var Re=(ve.length-1)*Me+1,Ve=Math.floor(Re),Ue=+ve[Ve-1],$e=Re-Ve;return $e?Ue+$e*(ve[Ve]-Ue):Ue},u.median=function(ve,Me){var Re=[],Ve=ve.length,Ue,$e=-1;if(arguments.length===1)for(;++$e<Ve;)v(Ue=c(ve[$e]))&&Re.push(Ue);else for(;++$e<Ve;)v(Ue=c(Me.call(ve,ve[$e],$e)))&&Re.push(Ue);if(Re.length)return u.quantile(Re.sort(o),.5)},u.variance=function(ve,Me){var Re=ve.length,Ve=0,Ue,$e,wt=0,gt=-1,Dt=0;if(arguments.length===1)for(;++gt<Re;)v(Ue=c(ve[gt]))&&($e=Ue-Ve,Ve+=$e/++Dt,wt+=$e*(Ue-Ve));else for(;++gt<Re;)v(Ue=c(Me.call(ve,ve[gt],gt)))&&($e=Ue-Ve,Ve+=$e/++Dt,wt+=$e*(Ue-Ve));if(Dt>1)return wt/(Dt-1)},u.deviation=function(){var ve=u.variance.apply(this,arguments);return ve&&Math.sqrt(ve)};function d(ve){return{left:function(Me,Re,Ve,Ue){for(arguments.length<3&&(Ve=0),arguments.length<4&&(Ue=Me.length);Ve<Ue;){var $e=Ve+Ue>>>1;ve(Me[$e],Re)<0?Ve=$e+1:Ue=$e}return Ve},right:function(Me,Re,Ve,Ue){for(arguments.length<3&&(Ve=0),arguments.length<4&&(Ue=Me.length);Ve<Ue;){var $e=Ve+Ue>>>1;ve(Me[$e],Re)>0?Ue=$e:Ve=$e+1}return Ve}}}var p=d(o);u.bisectLeft=p.left,u.bisect=u.bisectRight=p.right,u.bisector=function(ve){return d(ve.length===1?function(Me,Re){return o(ve(Me),Re)}:ve)},u.shuffle=function(ve,Me,Re){(Ve=arguments.length)<3&&(Re=ve.length,Ve<2&&(Me=0));for(var Ve=Re-Me,Ue,$e;Ve;)$e=Math.random()*Ve--|0,Ue=ve[Ve+Me],ve[Ve+Me]=ve[$e+Me],ve[$e+Me]=Ue;return ve},u.permute=function(ve,Me){for(var Re=Me.length,Ve=new Array(Re);Re--;)Ve[Re]=ve[Me[Re]];return Ve},u.pairs=function(ve){for(var Me=0,Re=ve.length-1,Ve=ve[0],Ue=new Array(Re<0?0:Re);Me<Re;)Ue[Me]=[Ve,Ve=ve[++Me]];return Ue},u.transpose=function(ve){if(!($e=ve.length))return[];for(var Me=-1,Re=u.min(ve,y),Ve=new Array(Re);++Me<Re;)for(var Ue=-1,$e,wt=Ve[Me]=new Array($e);++Ue<$e;)wt[Ue]=ve[Ue][Me];return Ve};function y(ve){return ve.length}u.zip=function(){return u.transpose(arguments)},u.keys=function(ve){var Me=[];for(var Re in ve)Me.push(Re);return Me},u.values=function(ve){var Me=[];for(var Re in ve)Me.push(ve[Re]);return Me},u.entries=function(ve){var Me=[];for(var Re in ve)Me.push({key:Re,value:ve[Re]});return Me},u.merge=function(ve){for(var Me=ve.length,Re,Ve=-1,Ue=0,$e,wt;++Ve<Me;)Ue+=ve[Ve].length;for($e=new Array(Ue);--Me>=0;)for(wt=ve[Me],Re=wt.length;--Re>=0;)$e[--Ue]=wt[Re];return $e};var g=Math.abs;u.range=function(ve,Me,Re){if(arguments.length<3&&(Re=1,arguments.length<2&&(Me=ve,ve=0)),(Me-ve)/Re==1/0)throw new Error("infinite range");var Ve=[],Ue=A(g(Re)),$e=-1,wt;if(ve*=Ue,Me*=Ue,Re*=Ue,Re<0)for(;(wt=ve+Re*++$e)>Me;)Ve.push(wt/Ue);else for(;(wt=ve+Re*++$e)<Me;)Ve.push(wt/Ue);return Ve};function A(ve){for(var Me=1;ve*Me%1;)Me*=10;return Me}function b(ve,Me){for(var Re in Me)Object.defineProperty(ve.prototype,Re,{value:Me[Re],enumerable:!1})}u.map=function(ve,Me){var Re=new M;if(ve instanceof M)ve.forEach(function(gt,Dt){Re.set(gt,Dt)});else if(Array.isArray(ve)){var Ve=-1,Ue=ve.length,$e;if(arguments.length===1)for(;++Ve<Ue;)Re.set(Ve,ve[Ve]);else for(;++Ve<Ue;)Re.set(Me.call(ve,$e=ve[Ve],Ve),$e)}else for(var wt in ve)Re.set(wt,ve[wt]);return Re};function M(){this._=Object.create(null)}var w="__proto__",T="\0";b(M,{has:L,get:function(ve){return this._[_(ve)]},set:function(ve,Me){return this._[_(ve)]=Me},remove:S,keys:k,values:function(){var ve=[];for(var Me in this._)ve.push(this._[Me]);return ve},entries:function(){var ve=[];for(var Me in this._)ve.push({key:h(Me),value:this._[Me]});return ve},size:P,empty:O,forEach:function(ve){for(var Me in this._)ve.call(this,h(Me),this._[Me])}});function _(ve){return(ve+="")===w||ve[0]===T?T+ve:ve}function h(ve){return(ve+="")[0]===T?ve.slice(1):ve}function L(ve){return _(ve)in this._}function S(ve){return(ve=_(ve))in this._&&delete this._[ve]}function k(){var ve=[];for(var Me in this._)ve.push(h(Me));return ve}function P(){var ve=0;for(var Me in this._)++ve;return ve}function O(){for(var ve in this._)return!1;return!0}u.nest=function(){var ve={},Me=[],Re=[],Ve,Ue;function $e(gt,Dt,Wt){if(Wt>=Me.length)return Ue?Ue.call(ve,Dt):Ve?Dt.sort(Ve):Dt;for(var Jt=-1,qt=Dt.length,Er=Me[Wt++],an,bn,Rr,Zr=new M,$r;++Jt<qt;)($r=Zr.get(an=Er(bn=Dt[Jt])))?$r.push(bn):Zr.set(an,[bn]);return gt?(bn=gt(),Rr=function(gn,yn){bn.set(gn,$e(gt,yn,Wt))}):(bn={},Rr=function(gn,yn){bn[gn]=$e(gt,yn,Wt)}),Zr.forEach(Rr),bn}function wt(gt,Dt){if(Dt>=Me.length)return gt;var Wt=[],Jt=Re[Dt++];return gt.forEach(function(qt,Er){Wt.push({key:qt,values:wt(Er,Dt)})}),Jt?Wt.sort(function(qt,Er){return Jt(qt.key,Er.key)}):Wt}return ve.map=function(gt,Dt){return $e(Dt,gt,0)},ve.entries=function(gt){return wt($e(u.map,gt,0),0)},ve.key=function(gt){return Me.push(gt),ve},ve.sortKeys=function(gt){return Re[Me.length-1]=gt,ve},ve.sortValues=function(gt){return Ve=gt,ve},ve.rollup=function(gt){return Ue=gt,ve},ve},u.set=function(ve){var Me=new F;if(ve)for(var Re=0,Ve=ve.length;Re<Ve;++Re)Me.add(ve[Re]);return Me};function F(){this._=Object.create(null)}b(F,{has:L,add:function(ve){return this._[_(ve+="")]=!0,ve},remove:S,values:k,size:P,empty:O,forEach:function(ve){for(var Me in this._)ve.call(this,h(Me))}}),u.behavior={};function D(ve){return ve}u.rebind=function(ve,Me){for(var Re=1,Ve=arguments.length,Ue;++Re<Ve;)ve[Ue=arguments[Re]]=R(ve,Me,Me[Ue]);return ve};function R(ve,Me,Re){return function(){var Ve=Re.apply(Me,arguments);return Ve===Me?ve:Ve}}function U(ve,Me){if(Me in ve)return Me;Me=Me.charAt(0).toUpperCase()+Me.slice(1);for(var Re=0,Ve=N.length;Re<Ve;++Re){var Ue=N[Re]+Me;if(Ue in ve)return Ue}}var N=["webkit","ms","moz","Moz","o","O"];function X(){}u.dispatch=function(){for(var ve=new j,Me=-1,Re=arguments.length;++Me<Re;)ve[arguments[Me]]=ee(ve);return ve};function j(){}j.prototype.on=function(ve,Me){var Re=ve.indexOf("."),Ve="";if(Re>=0&&(Ve=ve.slice(Re+1),ve=ve.slice(0,Re)),ve)return arguments.length<2?this[ve].on(Ve):this[ve].on(Ve,Me);if(arguments.length===2){if(Me==null)for(ve in this)this.hasOwnProperty(ve)&&this[ve].on(Ve,null);return this}};function ee(ve){var Me=[],Re=new M;function Ve(){for(var Ue=Me,$e=-1,wt=Ue.length,gt;++$e<wt;)(gt=Ue[$e].on)&&gt.apply(this,arguments);return ve}return Ve.on=function(Ue,$e){var wt=Re.get(Ue),gt;return arguments.length<2?wt&&wt.on:(wt&&(wt.on=null,Me=Me.slice(0,gt=Me.indexOf(wt)).concat(Me.slice(gt+1)),Re.remove(Ue)),$e&&Me.push(Re.set(Ue,{on:$e})),ve)},Ve}u.event=null;function q(){u.event.preventDefault()}function G(){for(var ve=u.event,Me;Me=ve.sourceEvent;)ve=Me;return ve}function J(ve){for(var Me=new j,Re=0,Ve=arguments.length;++Re<Ve;)Me[arguments[Re]]=ee(Me);return Me.of=function(Ue,$e){return function(wt){try{var gt=wt.sourceEvent=u.event;wt.target=ve,u.event=wt,Me[wt.type].apply(Ue,$e)}finally{u.event=gt}}},Me}u.requote=function(ve){return ve.replace(le,"\\$&")};var le=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fe=function(ve,Me){for(var Re in Me)ve[Re]=Me[Re]};function se(ve){return fe(ve,te),ve}var V=function(ve,Me){return Me.querySelector(ve)},Y=function(ve,Me){return Me.querySelectorAll(ve)},ne=function(ve,Me){var Re=ve.matches||ve[U(ve,"matchesSelector")];return ne=function(Ve,Ue){return Re.call(Ve,Ue)},ne(ve,Me)};typeof Sizzle=="function"&&(V=function(ve,Me){return Sizzle(ve,Me)[0]||null},Y=Sizzle,ne=Sizzle.matchesSelector),u.selection=function(){return u.select(x.documentElement)};var te=u.selection.prototype=[];te.select=function(ve){var Me=[],Re,Ve,Ue,$e;ve=K(ve);for(var wt=-1,gt=this.length;++wt<gt;){Me.push(Re=[]),Re.parentNode=(Ue=this[wt]).parentNode;for(var Dt=-1,Wt=Ue.length;++Dt<Wt;)($e=Ue[Dt])?(Re.push(Ve=ve.call($e,$e.__data__,Dt,wt)),Ve&&"__data__"in $e&&(Ve.__data__=$e.__data__)):Re.push(null)}return se(Me)};function K(ve){return typeof ve=="function"?ve:function(){return V(ve,this)}}te.selectAll=function(ve){var Me=[],Re,Ve;ve=$(ve);for(var Ue=-1,$e=this.length;++Ue<$e;)for(var wt=this[Ue],gt=-1,Dt=wt.length;++gt<Dt;)(Ve=wt[gt])&&(Me.push(Re=m(ve.call(Ve,Ve.__data__,gt,Ue))),Re.parentNode=Ve);return se(Me)};function $(ve){return typeof ve=="function"?ve:function(){return Y(ve,this)}}var ae="http://www.w3.org/1999/xhtml",ie={svg:"http://www.w3.org/2000/svg",xhtml:ae,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};u.ns={prefix:ie,qualify:function(ve){var Me=ve.indexOf(":"),Re=ve;return Me>=0&&(Re=ve.slice(0,Me))!=="xmlns"&&(ve=ve.slice(Me+1)),ie.hasOwnProperty(Re)?{space:ie[Re],local:ve}:ve}},te.attr=function(ve,Me){if(arguments.length<2){if(typeof ve=="string"){var Re=this.node();return ve=u.ns.qualify(ve),ve.local?Re.getAttributeNS(ve.space,ve.local):Re.getAttribute(ve)}for(Me in ve)this.each(oe(Me,ve[Me]));return this}return this.each(oe(ve,Me))};function oe(ve,Me){ve=u.ns.qualify(ve);function Re(){this.removeAttribute(ve)}function Ve(){this.removeAttributeNS(ve.space,ve.local)}function Ue(){this.setAttribute(ve,Me)}function $e(){this.setAttributeNS(ve.space,ve.local,Me)}function wt(){var Dt=Me.apply(this,arguments);Dt==null?this.removeAttribute(ve):this.setAttribute(ve,Dt)}function gt(){var Dt=Me.apply(this,arguments);Dt==null?this.removeAttributeNS(ve.space,ve.local):this.setAttributeNS(ve.space,ve.local,Dt)}return Me==null?ve.local?Ve:Re:typeof Me=="function"?ve.local?gt:wt:ve.local?$e:Ue}function ue(ve){return ve.trim().replace(/\s+/g," ")}te.classed=function(ve,Me){if(arguments.length<2){if(typeof ve=="string"){var Re=this.node(),Ve=(ve=he(ve)).length,Ue=-1;if(Me=Re.classList){for(;++Ue<Ve;)if(!Me.contains(ve[Ue]))return!1}else for(Me=Re.getAttribute("class");++Ue<Ve;)if(!xe(ve[Ue]).test(Me))return!1;return!0}for(Me in ve)this.each(me(Me,ve[Me]));return this}return this.each(me(ve,Me))};function xe(ve){return new RegExp("(?:^|\\s+)"+u.requote(ve)+"(?:\\s+|$)","g")}function he(ve){return(ve+"").trim().split(/^|\s+/)}function me(ve,Me){ve=he(ve).map(be);var Re=ve.length;function Ve(){for(var $e=-1;++$e<Re;)ve[$e](this,Me)}function Ue(){for(var $e=-1,wt=Me.apply(this,arguments);++$e<Re;)ve[$e](this,wt)}return typeof Me=="function"?Ue:Ve}function be(ve){var Me=xe(ve);return function(Re,Ve){if(Ue=Re.classList)return Ve?Ue.add(ve):Ue.remove(ve);var Ue=Re.getAttribute("class")||"";Ve?(Me.lastIndex=0,Me.test(Ue)||Re.setAttribute("class",ue(Ue+" "+ve))):Re.setAttribute("class",ue(Ue.replace(Me," ")))}}te.style=function(ve,Me,Re){var Ve=arguments.length;if(Ve<3){if(typeof ve!="string"){Ve<2&&(Me="");for(Re in ve)this.each(Ce(Re,ve[Re],Me));return this}if(Ve<2){var Ue=this.node();return i(Ue).getComputedStyle(Ue,null).getPropertyValue(ve)}Re=""}return this.each(Ce(ve,Me,Re))};function Ce(ve,Me,Re){function Ve(){this.style.removeProperty(ve)}function Ue(){this.style.setProperty(ve,Me,Re)}function $e(){var wt=Me.apply(this,arguments);wt==null?this.style.removeProperty(ve):this.style.setProperty(ve,wt,Re)}return Me==null?Ve:typeof Me=="function"?$e:Ue}te.property=function(ve,Me){if(arguments.length<2){if(typeof ve=="string")return this.node()[ve];for(Me in ve)this.each(Se(Me,ve[Me]));return this}return this.each(Se(ve,Me))};function Se(ve,Me){function Re(){delete this[ve]}function Ve(){this[ve]=Me}function Ue(){var $e=Me.apply(this,arguments);$e==null?delete this[ve]:this[ve]=$e}return Me==null?Re:typeof Me=="function"?Ue:Ve}te.text=function(ve){return arguments.length?this.each(typeof ve=="function"?function(){var Me=ve.apply(this,arguments);this.textContent=Me==null?"":Me}:ve==null?function(){this.textContent=""}:function(){this.textContent=ve}):this.node().textContent},te.html=function(ve){return arguments.length?this.each(typeof ve=="function"?function(){var Me=ve.apply(this,arguments);this.innerHTML=Me==null?"":Me}:ve==null?function(){this.innerHTML=""}:function(){this.innerHTML=ve}):this.node().innerHTML},te.append=function(ve){return ve=Be(ve),this.select(function(){return this.appendChild(ve.apply(this,arguments))})};function Be(ve){function Me(){var Ve=this.ownerDocument,Ue=this.namespaceURI;return Ue===ae&&Ve.documentElement.namespaceURI===ae?Ve.createElement(ve):Ve.createElementNS(Ue,ve)}function Re(){return this.ownerDocument.createElementNS(ve.space,ve.local)}return typeof ve=="function"?ve:(ve=u.ns.qualify(ve)).local?Re:Me}te.insert=function(ve,Me){return ve=Be(ve),Me=K(Me),this.select(function(){return this.insertBefore(ve.apply(this,arguments),Me.apply(this,arguments)||null)})},te.remove=function(){return this.each(Ye)};function Ye(){var ve=this.parentNode;ve&&ve.removeChild(this)}te.data=function(ve,Me){var Re=-1,Ve=this.length,Ue,$e;if(!arguments.length){for(ve=new Array(Ve=(Ue=this[0]).length);++Re<Ve;)($e=Ue[Re])&&(ve[Re]=$e.__data__);return ve}function wt(Jt,qt){var Er,an=Jt.length,bn=qt.length,Rr=Math.min(an,bn),Zr=new Array(bn),$r=new Array(bn),gn=new Array(an),yn,tn;if(Me){var na=new M,ya=new Array(an),Ha;for(Er=-1;++Er<an;)(yn=Jt[Er])&&(na.has(Ha=Me.call(yn,yn.__data__,Er))?gn[Er]=yn:na.set(Ha,yn),ya[Er]=Ha);for(Er=-1;++Er<bn;)(yn=na.get(Ha=Me.call(qt,tn=qt[Er],Er)))?yn!==!0&&(Zr[Er]=yn,yn.__data__=tn):$r[Er]=Xe(tn),na.set(Ha,!0);for(Er=-1;++Er<an;)Er in ya&&na.get(ya[Er])!==!0&&(gn[Er]=Jt[Er])}else{for(Er=-1;++Er<Rr;)yn=Jt[Er],tn=qt[Er],yn?(yn.__data__=tn,Zr[Er]=yn):$r[Er]=Xe(tn);for(;Er<bn;++Er)$r[Er]=Xe(qt[Er]);for(;Er<an;++Er)gn[Er]=Jt[Er]}$r.update=Zr,$r.parentNode=Zr.parentNode=gn.parentNode=Jt.parentNode,gt.push($r),Dt.push(Zr),Wt.push(gn)}var gt=rt([]),Dt=se([]),Wt=se([]);if(typeof ve=="function")for(;++Re<Ve;)wt(Ue=this[Re],ve.call(Ue,Ue.parentNode.__data__,Re));else for(;++Re<Ve;)wt(Ue=this[Re],ve);return Dt.enter=function(){return gt},Dt.exit=function(){return Wt},Dt};function Xe(ve){return{__data__:ve}}te.datum=function(ve){return arguments.length?this.property("__data__",ve):this.property("__data__")},te.filter=function(ve){var Me=[],Re,Ve,Ue;typeof ve!="function"&&(ve=Te(ve));for(var $e=0,wt=this.length;$e<wt;$e++){Me.push(Re=[]),Re.parentNode=(Ve=this[$e]).parentNode;for(var gt=0,Dt=Ve.length;gt<Dt;gt++)(Ue=Ve[gt])&&ve.call(Ue,Ue.__data__,gt,$e)&&Re.push(Ue)}return se(Me)};function Te(ve){return function(){return ne(this,ve)}}te.order=function(){for(var ve=-1,Me=this.length;++ve<Me;)for(var Re=this[ve],Ve=Re.length-1,Ue=Re[Ve],$e;--Ve>=0;)($e=Re[Ve])&&(Ue&&Ue!==$e.nextSibling&&Ue.parentNode.insertBefore($e,Ue),Ue=$e);return this},te.sort=function(ve){ve=Ie.apply(this,arguments);for(var Me=-1,Re=this.length;++Me<Re;)this[Me].sort(ve);return this.order()};function Ie(ve){return arguments.length||(ve=o),function(Me,Re){return Me&&Re?ve(Me.__data__,Re.__data__):!Me-!Re}}te.each=function(ve){return Ze(this,function(Me,Re,Ve){ve.call(Me,Me.__data__,Re,Ve)})};function Ze(ve,Me){for(var Re=0,Ve=ve.length;Re<Ve;Re++)for(var Ue=ve[Re],$e=0,wt=Ue.length,gt;$e<wt;$e++)(gt=Ue[$e])&&Me(gt,$e,Re);return ve}te.call=function(ve){var Me=m(arguments);return ve.apply(Me[0]=this,Me),this},te.empty=function(){return!this.node()},te.node=function(){for(var ve=0,Me=this.length;ve<Me;ve++)for(var Re=this[ve],Ve=0,Ue=Re.length;Ve<Ue;Ve++){var $e=Re[Ve];if($e)return $e}return null},te.size=function(){var ve=0;return Ze(this,function(){++ve}),ve};function rt(ve){return fe(ve,Ge),ve}var Ge=[];u.selection.enter=rt,u.selection.enter.prototype=Ge,Ge.append=te.append,Ge.empty=te.empty,Ge.node=te.node,Ge.call=te.call,Ge.size=te.size,Ge.select=function(ve){for(var Me=[],Re,Ve,Ue,$e,wt,gt=-1,Dt=this.length;++gt<Dt;){Ue=($e=this[gt]).update,Me.push(Re=[]),Re.parentNode=$e.parentNode;for(var Wt=-1,Jt=$e.length;++Wt<Jt;)(wt=$e[Wt])?(Re.push(Ue[Wt]=Ve=ve.call($e.parentNode,wt.__data__,Wt,gt)),Ve.__data__=wt.__data__):Re.push(null)}return se(Me)},Ge.insert=function(ve,Me){return arguments.length<2&&(Me=ze(this)),te.insert.call(this,ve,Me)};function ze(ve){var Me,Re;return function(Ve,Ue,$e){var wt=ve[$e].update,gt=wt.length,Dt;for($e!=Re&&(Re=$e,Me=0),Ue>=Me&&(Me=Ue+1);!(Dt=wt[Me])&&++Me<gt;);return Dt}}u.select=function(ve){var Me;return typeof ve=="string"?(Me=[V(ve,x)],Me.parentNode=x.documentElement):(Me=[ve],Me.parentNode=t(ve)),se([Me])},u.selectAll=function(ve){var Me;return typeof ve=="string"?(Me=m(Y(ve,x)),Me.parentNode=x.documentElement):(Me=m(ve),Me.parentNode=null),se([Me])},te.on=function(ve,Me,Re){var Ve=arguments.length;if(Ve<3){if(typeof ve!="string"){Ve<2&&(Me=!1);for(Re in ve)this.each(We(Re,ve[Re],Me));return this}if(Ve<2)return(Ve=this.node()["__on"+ve])&&Ve._;Re=!1}return this.each(We(ve,Me,Re))};function We(ve,Me,Re){var Ve="__on"+ve,Ue=ve.indexOf("."),$e=Ft;Ue>0&&(ve=ve.slice(0,Ue));var wt=mt.get(ve);wt&&(ve=wt,$e=Xt);function gt(){var Jt=this[Ve];Jt&&(this.removeEventListener(ve,Jt,Jt.$),delete this[Ve])}function Dt(){var Jt=$e(Me,m(arguments));gt.call(this),this.addEventListener(ve,this[Ve]=Jt,Jt.$=Re),Jt._=Me}function Wt(){var Jt=new RegExp("^__on([^.]+)"+u.requote(ve)+"$"),qt;for(var Er in this)if(qt=Er.match(Jt)){var an=this[Er];this.removeEventListener(qt[1],an,an.$),delete this[Er]}}return Ue?Me?Dt:gt:Me?X:Wt}var mt=u.map({mouseenter:"mouseover",mouseleave:"mouseout"});x&&mt.forEach(function(ve){"on"+ve in x&&mt.remove(ve)});function Ft(ve,Me){return function(Re){var Ve=u.event;u.event=Re,Me[0]=this.__data__;try{ve.apply(this,Me)}finally{u.event=Ve}}}function Xt(ve,Me){var Re=Ft(ve,Me);return function(Ve){var Ue=this,$e=Ve.relatedTarget;(!$e||$e!==Ue&&!($e.compareDocumentPosition(Ue)&8))&&Re.call(Ue,Ve)}}var Pt,Ut=0;function Gt(ve){var Me=".dragsuppress-"+ ++Ut,Re="click"+Me,Ve=u.select(i(ve)).on("touchmove"+Me,q).on("dragstart"+Me,q).on("selectstart"+Me,q);if(Pt==null&&(Pt="onselectstart"in ve?!1:U(ve.style,"userSelect")),Pt){var Ue=t(ve).style,$e=Ue[Pt];Ue[Pt]="none"}return function(wt){if(Ve.on(Me,null),Pt&&(Ue[Pt]=$e),wt){var gt=function(){Ve.on(Re,null)};Ve.on(Re,function(){q(),gt()},!0),setTimeout(gt,0)}}}u.mouse=function(ve){return Ct(ve,G())};var It=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ct(ve,Me){Me.changedTouches&&(Me=Me.changedTouches[0]);var Re=ve.ownerSVGElement||ve;if(Re.createSVGPoint){var Ve=Re.createSVGPoint();if(It<0){var Ue=i(ve);if(Ue.scrollX||Ue.scrollY){Re=u.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var $e=Re[0][0].getScreenCTM();It=!($e.f||$e.e),Re.remove()}}return It?(Ve.x=Me.pageX,Ve.y=Me.pageY):(Ve.x=Me.clientX,Ve.y=Me.clientY),Ve=Ve.matrixTransform(ve.getScreenCTM().inverse()),[Ve.x,Ve.y]}var wt=ve.getBoundingClientRect();return[Me.clientX-wt.left-ve.clientLeft,Me.clientY-wt.top-ve.clientTop]}u.touch=function(ve,Me,Re){if(arguments.length<3&&(Re=Me,Me=G().changedTouches),Me){for(var Ve=0,Ue=Me.length,$e;Ve<Ue;++Ve)if(($e=Me[Ve]).identifier===Re)return Ct(ve,$e)}},u.behavior.drag=function(){var ve=J(Ue,"drag","dragstart","dragend"),Me=null,Re=$e(X,u.mouse,i,"mousemove","mouseup"),Ve=$e(lt,u.touch,D,"touchmove","touchend");function Ue(){this.on("mousedown.drag",Re).on("touchstart.drag",Ve)}function $e(wt,gt,Dt,Wt,Jt){return function(){var qt=this,Er=u.event.target.correspondingElement||u.event.target,an=qt.parentNode,bn=ve.of(qt,arguments),Rr=0,Zr=wt(),$r=".drag"+(Zr==null?"":"-"+Zr),gn,yn=u.select(Dt(Er)).on(Wt+$r,ya).on(Jt+$r,Ha),tn=Gt(Er),na=gt(an,Zr);Me?(gn=Me.apply(qt,arguments),gn=[gn.x-na[0],gn.y-na[1]]):gn=[0,0],bn({type:"dragstart"});function ya(){var _a=gt(an,Zr),Xa,Sa;!_a||(Xa=_a[0]-na[0],Sa=_a[1]-na[1],Rr|=Xa|Sa,na=_a,bn({type:"drag",x:_a[0]+gn[0],y:_a[1]+gn[1],dx:Xa,dy:Sa}))}function Ha(){!gt(an,Zr)||(yn.on(Wt+$r,null).on(Jt+$r,null),tn(Rr),bn({type:"dragend"}))}}}return Ue.origin=function(wt){return arguments.length?(Me=wt,Ue):Me},u.rebind(Ue,ve,"on")};function lt(){return u.event.changedTouches[0].identifier}u.touches=function(ve,Me){return arguments.length<2&&(Me=G().touches),Me?m(Me).map(function(Re){var Ve=Ct(ve,Re);return Ve.identifier=Re.identifier,Ve}):[]};var dt=1e-6,et=dt*dt,Pe=Math.PI,Je=2*Pe,it=Je-dt,ht=Pe/2,zt=Pe/180,Lt=180/Pe;function Vt(ve,Me,Re){return(Me[0]-ve[0])*(Re[1]-ve[1])-(Me[1]-ve[1])*(Re[0]-ve[0])}function $t(ve){return ve>1?ht:ve<-1?-ht:Math.asin(ve)}function Ht(ve){return((ve=Math.exp(ve))-1/ve)/2}function tr(ve){return((ve=Math.exp(ve))+1/ve)/2}function qe(ve){return((ve=Math.exp(2*ve))-1)/(ve+1)}var xt=Math.SQRT2,Rt=2,fr=4;u.interpolateZoom=function(ve,Me){var Re=ve[0],Ve=ve[1],Ue=ve[2],$e=Me[0],wt=Me[1],gt=Me[2],Dt=$e-Re,Wt=wt-Ve,Jt=Dt*Dt+Wt*Wt,qt,Er;if(Jt<et)Er=Math.log(gt/Ue)/xt,qt=function(gn){return[Re+gn*Dt,Ve+gn*Wt,Ue*Math.exp(xt*gn*Er)]};else{var an=Math.sqrt(Jt),bn=(gt*gt-Ue*Ue+fr*Jt)/(2*Ue*Rt*an),Rr=(gt*gt-Ue*Ue-fr*Jt)/(2*gt*Rt*an),Zr=Math.log(Math.sqrt(bn*bn+1)-bn),$r=Math.log(Math.sqrt(Rr*Rr+1)-Rr);Er=($r-Zr)/xt,qt=function(gn){var yn=gn*Er,tn=tr(Zr),na=Ue/(Rt*an)*(tn*qe(xt*yn+Zr)-Ht(Zr));return[Re+na*Dt,Ve+na*Wt,Ue*tn/tr(xt*yn+Zr)]}}return qt.duration=Er*1e3,qt},u.behavior.zoom=function(){var ve={x:0,y:0,k:1},Me,Re,Ve,Ue=[960,500],$e=br,wt=250,gt=0,Dt="mousedown.zoom",Wt="mousemove.zoom",Jt="mouseup.zoom",qt,Er="touchstart.zoom",an,bn=J(yn,"zoomstart","zoom","zoomend"),Rr,Zr,$r,gn;Tr||(Tr="onwheel"in x?(pr=function(){return-u.event.deltaY*(u.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(pr=function(){return u.event.wheelDelta},"mousewheel"):(pr=function(){return-u.event.detail},"MozMousePixelScroll"));function yn(Ra){Ra.on(Dt,gi).on(Tr+".zoom",Xo).on("dblclick.zoom",go).on(Er,Ii)}yn.event=function(Ra){Ra.each(function(){var fi=bn.of(this,arguments),pi=ve;si?u.select(this).transition().each("start.zoom",function(){ve=this.__chart__||{x:0,y:0,k:1},Sa(fi)}).tween("zoom:zoom",function(){var Gi=Ue[0],Si=Ue[1],Go=Re?Re[0]:Gi/2,Do=Re?Re[1]:Si/2,ao=u.interpolateZoom([(Go-ve.x)/ve.k,(Do-ve.y)/ve.k,Gi/ve.k],[(Go-pi.x)/pi.k,(Do-pi.y)/pi.k,Gi/pi.k]);return function(ts){var ms=ao(ts),Is=Gi/ms[2];this.__chart__=ve={x:Go-ms[0]*Is,y:Do-ms[1]*Is,k:Is},ma(fi)}}).each("interrupt.zoom",function(){Ja(fi)}).each("end.zoom",function(){Ja(fi)}):(this.__chart__=ve,Sa(fi),ma(fi),Ja(fi))})},yn.translate=function(Ra){return arguments.length?(ve={x:+Ra[0],y:+Ra[1],k:ve.k},Xa(),yn):[ve.x,ve.y]},yn.scale=function(Ra){return arguments.length?(ve={x:ve.x,y:ve.y,k:null},ya(+Ra),Xa(),yn):ve.k},yn.scaleExtent=function(Ra){return arguments.length?($e=Ra==null?br:[+Ra[0],+Ra[1]],yn):$e},yn.center=function(Ra){return arguments.length?(Ve=Ra&&[+Ra[0],+Ra[1]],yn):Ve},yn.size=function(Ra){return arguments.length?(Ue=Ra&&[+Ra[0],+Ra[1]],yn):Ue},yn.duration=function(Ra){return arguments.length?(wt=+Ra,yn):wt},yn.x=function(Ra){return arguments.length?(Zr=Ra,Rr=Ra.copy(),ve={x:0,y:0,k:1},yn):Zr},yn.y=function(Ra){return arguments.length?(gn=Ra,$r=Ra.copy(),ve={x:0,y:0,k:1},yn):gn};function tn(Ra){return[(Ra[0]-ve.x)/ve.k,(Ra[1]-ve.y)/ve.k]}function na(Ra){return[Ra[0]*ve.k+ve.x,Ra[1]*ve.k+ve.y]}function ya(Ra){ve.k=Math.max($e[0],Math.min($e[1],Ra))}function Ha(Ra,fi){fi=na(fi),ve.x+=Ra[0]-fi[0],ve.y+=Ra[1]-fi[1]}function _a(Ra,fi,pi,Gi){Ra.__chart__={x:ve.x,y:ve.y,k:ve.k},ya(Math.pow(2,Gi)),Ha(Re=fi,pi),Ra=u.select(Ra),wt>0&&(Ra=Ra.transition().duration(wt)),Ra.call(yn.event)}function Xa(){Zr&&Zr.domain(Rr.range().map(function(Ra){return(Ra-ve.x)/ve.k}).map(Rr.invert)),gn&&gn.domain($r.range().map(function(Ra){return(Ra-ve.y)/ve.k}).map($r.invert))}function Sa(Ra){gt++||Ra({type:"zoomstart"})}function ma(Ra){Xa(),Ra({type:"zoom",scale:ve.k,translate:[ve.x,ve.y]})}function Ja(Ra){--gt||(Ra({type:"zoomend"}),Re=null)}function gi(){var Ra=this,fi=bn.of(Ra,arguments),pi=0,Gi=u.select(i(Ra)).on(Wt,Do).on(Jt,ao),Si=tn(u.mouse(Ra)),Go=Gt(Ra);zn.call(Ra),Sa(fi);function Do(){pi=1,Ha(u.mouse(Ra),Si),ma(fi)}function ao(){Gi.on(Wt,null).on(Jt,null),Go(pi),Ja(fi)}}function Ii(){var Ra=this,fi=bn.of(Ra,arguments),pi={},Gi=0,Si,Go=".zoom-"+u.event.changedTouches[0].identifier,Do="touchmove"+Go,ao="touchend"+Go,ts=[],ms=u.select(Ra),Is=Gt(Ra);bo(),Sa(fi),ms.on(Dt,null).on(Er,bo);function xo(){var rs=u.touches(Ra);return Si=ve.k,rs.forEach(function(Io){Io.identifier in pi&&(pi[Io.identifier]=tn(Io))}),rs}function bo(){var rs=u.event.target;u.select(rs).on(Do,ei).on(ao,vi),ts.push(rs);for(var Io=u.event.changedTouches,Wo=0,zo=Io.length;Wo<zo;++Wo)pi[Io[Wo].identifier]=null;var ns=xo(),il=Date.now();if(ns.length===1){if(il-an<500){var Hu=ns[0];_a(Ra,Hu,pi[Hu.identifier],Math.floor(Math.log(ve.k)/Math.LN2)+1),q()}an=il}else if(ns.length>1){var Hu=ns[0],So=ns[1],Hc=Hu[0]-So[0],Vu=Hu[1]-So[1];Gi=Hc*Hc+Vu*Vu}}function ei(){var rs=u.touches(Ra),Io,Wo,zo,ns;zn.call(Ra);for(var il=0,Hu=rs.length;il<Hu;++il,ns=null)if(zo=rs[il],ns=pi[zo.identifier]){if(Wo)break;Io=zo,Wo=ns}if(ns){var So=(So=zo[0]-Io[0])*So+(So=zo[1]-Io[1])*So,Hc=Gi&&Math.sqrt(So/Gi);Io=[(Io[0]+zo[0])/2,(Io[1]+zo[1])/2],Wo=[(Wo[0]+ns[0])/2,(Wo[1]+ns[1])/2],ya(Hc*Si)}an=null,Ha(Io,Wo),ma(fi)}function vi(){if(u.event.touches.length){for(var rs=u.event.changedTouches,Io=0,Wo=rs.length;Io<Wo;++Io)delete pi[rs[Io].identifier];for(var zo in pi)return void xo()}u.selectAll(ts).on(Go,null),ms.on(Dt,gi).on(Er,Ii),Is(),Ja(fi)}}function Xo(){var Ra=bn.of(this,arguments);qt?clearTimeout(qt):(zn.call(this),Me=tn(Re=Ve||u.mouse(this)),Sa(Ra)),qt=setTimeout(function(){qt=null,Ja(Ra)},50),q(),ya(Math.pow(2,pr()*.002)*ve.k),Ha(Re,Me),ma(Ra)}function go(){var Ra=u.mouse(this),fi=Math.log(ve.k)/Math.LN2;_a(this,Ra,tn(Ra),u.event.shiftKey?Math.ceil(fi)-1:Math.floor(fi)+1)}return u.rebind(yn,bn,"on")};var br=[0,1/0],pr,Tr;u.color=Nr;function Nr(){}Nr.prototype.toString=function(){return this.rgb()+""},u.hsl=Ir;function Ir(ve,Me,Re){return this instanceof Ir?(this.h=+ve,this.s=+Me,void(this.l=+Re)):arguments.length<2?ve instanceof Ir?new Ir(ve.h,ve.s,ve.l):En(""+ve,Jr,Ir):new Ir(ve,Me,Re)}var lr=Ir.prototype=new Nr;lr.brighter=function(ve){return ve=Math.pow(.7,arguments.length?ve:1),new Ir(this.h,this.s,this.l/ve)},lr.darker=function(ve){return ve=Math.pow(.7,arguments.length?ve:1),new Ir(this.h,this.s,ve*this.l)},lr.rgb=function(){return Yr(this.h,this.s,this.l)};function Yr(ve,Me,Re){var Ve,Ue;ve=isNaN(ve)?0:(ve%=360)<0?ve+360:ve,Me=isNaN(Me)||Me<0?0:Me>1?1:Me,Re=Re<0?0:Re>1?1:Re,Ue=Re<=.5?Re*(1+Me):Re+Me-Re*Me,Ve=2*Re-Ue;function $e(gt){return gt>360?gt-=360:gt<0&&(gt+=360),gt<60?Ve+(Ue-Ve)*gt/60:gt<180?Ue:gt<240?Ve+(Ue-Ve)*(240-gt)/60:Ve}function wt(gt){return Math.round($e(gt)*255)}return new Ar(wt(ve+120),wt(ve),wt(ve-120))}u.hcl=nt;function nt(ve,Me,Re){return this instanceof nt?(this.h=+ve,this.c=+Me,void(this.l=+Re)):arguments.length<2?ve instanceof nt?new nt(ve.h,ve.c,ve.l):ve instanceof Fe?jt(ve.l,ve.a,ve.b):jt((ve=Pr((ve=u.rgb(ve)).r,ve.g,ve.b)).l,ve.a,ve.b):new nt(ve,Me,Re)}var Ae=nt.prototype=new Nr;Ae.brighter=function(ve){return new nt(this.h,this.c,Math.min(100,this.l+Ke*(arguments.length?ve:1)))},Ae.darker=function(ve){return new nt(this.h,this.c,Math.max(0,this.l-Ke*(arguments.length?ve:1)))},Ae.rgb=function(){return Ee(this.h,this.c,this.l).rgb()};function Ee(ve,Me,Re){return isNaN(ve)&&(ve=0),isNaN(Me)&&(Me=0),new Fe(Re,Math.cos(ve*=zt)*Me,Math.sin(ve)*Me)}u.lab=Fe;function Fe(ve,Me,Re){return this instanceof Fe?(this.l=+ve,this.a=+Me,void(this.b=+Re)):arguments.length<2?ve instanceof Fe?new Fe(ve.l,ve.a,ve.b):ve instanceof nt?Ee(ve.h,ve.c,ve.l):Pr((ve=Ar(ve)).r,ve.g,ve.b):new Fe(ve,Me,Re)}var Ke=18,tt=.95047,ut=1,ct=1.08883,yt=Fe.prototype=new Nr;yt.brighter=function(ve){return new Fe(Math.min(100,this.l+Ke*(arguments.length?ve:1)),this.a,this.b)},yt.darker=function(ve){return new Fe(Math.max(0,this.l-Ke*(arguments.length?ve:1)),this.a,this.b)},yt.rgb=function(){return kt(this.l,this.a,this.b)};function kt(ve,Me,Re){var Ve=(ve+16)/116,Ue=Ve+Me/500,$e=Ve-Re/200;return Ue=Mr(Ue)*tt,Ve=Mr(Ve)*ut,$e=Mr($e)*ct,new Ar(Lr(3.2404542*Ue-1.5371385*Ve-.4985314*$e),Lr(-.969266*Ue+1.8760108*Ve+.041556*$e),Lr(.0556434*Ue-.2040259*Ve+1.0572252*$e))}function jt(ve,Me,Re){return ve>0?new nt(Math.atan2(Re,Me)*Lt,Math.sqrt(Me*Me+Re*Re),ve):new nt(NaN,NaN,ve)}function Mr(ve){return ve>.206893034?ve*ve*ve:(ve-4/29)/7.787037}function Sr(ve){return ve>.008856?Math.pow(ve,1/3):7.787037*ve+4/29}function Lr(ve){return Math.round(255*(ve<=.00304?12.92*ve:1.055*Math.pow(ve,1/2.4)-.055))}u.rgb=Ar;function Ar(ve,Me,Re){return this instanceof Ar?(this.r=~~ve,this.g=~~Me,void(this.b=~~Re)):arguments.length<2?ve instanceof Ar?new Ar(ve.r,ve.g,ve.b):En(""+ve,Ar,Yr):new Ar(ve,Me,Re)}function Ur(ve){return new Ar(ve>>16,ve>>8&255,ve&255)}function fn(ve){return Ur(ve)+""}var Cr=Ar.prototype=new Nr;Cr.brighter=function(ve){ve=Math.pow(.7,arguments.length?ve:1);var Me=this.r,Re=this.g,Ve=this.b,Ue=30;return!Me&&!Re&&!Ve?new Ar(Ue,Ue,Ue):(Me&&Me<Ue&&(Me=Ue),Re&&Re<Ue&&(Re=Ue),Ve&&Ve<Ue&&(Ve=Ue),new Ar(Math.min(255,Me/ve),Math.min(255,Re/ve),Math.min(255,Ve/ve)))},Cr.darker=function(ve){return ve=Math.pow(.7,arguments.length?ve:1),new Ar(ve*this.r,ve*this.g,ve*this.b)},Cr.hsl=function(){return Jr(this.r,this.g,this.b)},Cr.toString=function(){return"#"+_r(this.r)+_r(this.g)+_r(this.b)};function _r(ve){return ve<16?"0"+Math.max(0,ve).toString(16):Math.min(255,ve).toString(16)}function En(ve,Me,Re){var Ve=0,Ue=0,$e=0,wt,gt,Dt;if(wt=/([a-z]+)\((.*)\)/.exec(ve=ve.toLowerCase()),wt)switch(gt=wt[2].split(","),wt[1]){case"hsl":return Re(parseFloat(gt[0]),parseFloat(gt[1])/100,parseFloat(gt[2])/100);case"rgb":return Me(xn(gt[0]),xn(gt[1]),xn(gt[2]))}return(Dt=qr.get(ve))?Me(Dt.r,Dt.g,Dt.b):(ve!=null&&ve.charAt(0)==="#"&&!isNaN(Dt=parseInt(ve.slice(1),16))&&(ve.length===4?(Ve=(Dt&3840)>>4,Ve=Ve>>4|Ve,Ue=Dt&240,Ue=Ue>>4|Ue,$e=Dt&15,$e=$e<<4|$e):ve.length===7&&(Ve=(Dt&16711680)>>16,Ue=(Dt&65280)>>8,$e=Dt&255)),Me(Ve,Ue,$e))}function Jr(ve,Me,Re){var Ve=Math.min(ve/=255,Me/=255,Re/=255),Ue=Math.max(ve,Me,Re),$e=Ue-Ve,wt,gt,Dt=(Ue+Ve)/2;return $e?(gt=Dt<.5?$e/(Ue+Ve):$e/(2-Ue-Ve),ve==Ue?wt=(Me-Re)/$e+(Me<Re?6:0):Me==Ue?wt=(Re-ve)/$e+2:wt=(ve-Me)/$e+4,wt*=60):(wt=NaN,gt=Dt>0&&Dt<1?0:wt),new Ir(wt,gt,Dt)}function Pr(ve,Me,Re){ve=vn(ve),Me=vn(Me),Re=vn(Re);var Ve=Sr((.4124564*ve+.3575761*Me+.1804375*Re)/tt),Ue=Sr((.2126729*ve+.7151522*Me+.072175*Re)/ut),$e=Sr((.0193339*ve+.119192*Me+.9503041*Re)/ct);return Fe(116*Ue-16,500*(Ve-Ue),200*(Ue-$e))}function vn(ve){return(ve/=255)<=.04045?ve/12.92:Math.pow((ve+.055)/1.055,2.4)}function xn(ve){var Me=parseFloat(ve);return ve.charAt(ve.length-1)==="%"?Math.round(Me*2.55):Me}var qr=u.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});qr.forEach(function(ve,Me){qr.set(ve,Ur(Me))});function st(ve){return typeof ve=="function"?ve:function(){return ve}}u.functor=st,u.xhr=Bt(D);function Bt(ve){return function(Me,Re,Ve){return arguments.length===2&&typeof Re=="function"&&(Ve=Re,Re=null),ir(Me,Re,ve,Ve)}}function ir(ve,Me,Re,Ve){var Ue={},$e=u.dispatch("beforesend","progress","load","error"),wt={},gt=new XMLHttpRequest,Dt=null;self.XDomainRequest&&!("withCredentials"in gt)&&/^(http(s)?:)?\/\//.test(ve)&&(gt=new XDomainRequest),"onload"in gt?gt.onload=gt.onerror=Wt:gt.onreadystatechange=function(){gt.readyState>3&&Wt()};function Wt(){var Jt=gt.status,qt;if(!Jt&&Qr(gt)||Jt>=200&&Jt<300||Jt===304){try{qt=Re.call(Ue,gt)}catch(Er){$e.error.call(Ue,Er);return}$e.load.call(Ue,qt)}else $e.error.call(Ue,gt)}return gt.onprogress=function(Jt){var qt=u.event;u.event=Jt;try{$e.progress.call(Ue,gt)}finally{u.event=qt}},Ue.header=function(Jt,qt){return Jt=(Jt+"").toLowerCase(),arguments.length<2?wt[Jt]:(qt==null?delete wt[Jt]:wt[Jt]=qt+"",Ue)},Ue.mimeType=function(Jt){return arguments.length?(Me=Jt==null?null:Jt+"",Ue):Me},Ue.responseType=function(Jt){return arguments.length?(Dt=Jt,Ue):Dt},Ue.response=function(Jt){return Re=Jt,Ue},["get","post"].forEach(function(Jt){Ue[Jt]=function(){return Ue.send.apply(Ue,[Jt].concat(m(arguments)))}}),Ue.send=function(Jt,qt,Er){if(arguments.length===2&&typeof qt=="function"&&(Er=qt,qt=null),gt.open(Jt,ve,!0),Me!=null&&!("accept"in wt)&&(wt.accept=Me+",*/*"),gt.setRequestHeader)for(var an in wt)gt.setRequestHeader(an,wt[an]);return Me!=null&&gt.overrideMimeType&&gt.overrideMimeType(Me),Dt!=null&&(gt.responseType=Dt),Er!=null&&Ue.on("error",Er).on("load",function(bn){Er(null,bn)}),$e.beforesend.call(Ue,gt),gt.send(qt==null?null:qt),Ue},Ue.abort=function(){return gt.abort(),Ue},u.rebind(Ue,$e,"on"),Ve==null?Ue:Ue.get(xr(Ve))}function xr(ve){return ve.length===1?function(Me,Re){ve(Me==null?Re:null)}:ve}function Qr(ve){var Me=ve.responseType;return Me&&Me!=="text"?ve.response:ve.responseText}u.dsv=function(ve,Me){var Re=new RegExp('["'+ve+`
]`),Ve=ve.charCodeAt(0);function Ue(Wt,Jt,qt){arguments.length<3&&(qt=Jt,Jt=null);var Er=ir(Wt,Me,Jt==null?$e:wt(Jt),qt);return Er.row=function(an){return arguments.length?Er.response((Jt=an)==null?$e:wt(an)):Jt},Er}function $e(Wt){return Ue.parse(Wt.responseText)}function wt(Wt){return function(Jt){return Ue.parse(Jt.responseText,Wt)}}Ue.parse=function(Wt,Jt){var qt;return Ue.parseRows(Wt,function(Er,an){if(qt)return qt(Er,an-1);var bn=function(Rr){for(var Zr={},$r=Er.length,gn=0;gn<$r;++gn)Zr[Er[gn]]=Rr[gn];return Zr};qt=Jt?function(Rr,Zr){return Jt(bn(Rr),Zr)}:bn})},Ue.parseRows=function(Wt,Jt){var qt={},Er={},an=[],bn=Wt.length,Rr=0,Zr=0,$r,gn;function yn(){if(Rr>=bn)return Er;if(gn)return gn=!1,qt;var na=Rr;if(Wt.charCodeAt(na)===34){for(var ya=na;ya++<bn;)if(Wt.charCodeAt(ya)===34){if(Wt.charCodeAt(ya+1)!==34)break;++ya}Rr=ya+2;var Ha=Wt.charCodeAt(ya+1);return Ha===13?(gn=!0,Wt.charCodeAt(ya+2)===10&&++Rr):Ha===10&&(gn=!0),Wt.slice(na+1,ya).replace(/""/g,'"')}for(;Rr<bn;){var Ha=Wt.charCodeAt(Rr++),_a=1;if(Ha===10)gn=!0;else if(Ha===13)gn=!0,Wt.charCodeAt(Rr)===10&&(++Rr,++_a);else if(Ha!==Ve)continue;return Wt.slice(na,Rr-_a)}return Wt.slice(na)}for(;($r=yn())!==Er;){for(var tn=[];$r!==qt&&$r!==Er;)tn.push($r),$r=yn();Jt&&(tn=Jt(tn,Zr++))==null||an.push(tn)}return an},Ue.format=function(Wt){if(Array.isArray(Wt[0]))return Ue.formatRows(Wt);var Jt=new F,qt=[];return Wt.forEach(function(Er){for(var an in Er)Jt.has(an)||qt.push(Jt.add(an))}),[qt.map(Dt).join(ve)].concat(Wt.map(function(Er){return qt.map(function(an){return Dt(Er[an])}).join(ve)})).join(`
`)},Ue.formatRows=function(Wt){return Wt.map(gt).join(`
`)};function gt(Wt){return Wt.map(Dt).join(ve)}function Dt(Wt){return Re.test(Wt)?'"'+Wt.replace(/\"/g,'""')+'"':Wt}return Ue},u.csv=u.dsv(",","text/csv"),u.tsv=u.dsv("	","text/tab-separated-values");var Gr,Br,kr,en,Zn=this[U(this,"requestAnimationFrame")]||function(ve){setTimeout(ve,17)};u.timer=function(){Hn.apply(this,arguments)};function Hn(ve,Me,Re){var Ve=arguments.length;Ve<2&&(Me=0),Ve<3&&(Re=Date.now());var Ue=Re+Me,$e={c:ve,t:Ue,n:null};return Br?Br.n=$e:Gr=$e,Br=$e,kr||(en=clearTimeout(en),kr=1,Zn(da)),$e}function da(){var ve=wa(),Me=Va()-ve;Me>24?(isFinite(Me)&&(clearTimeout(en),en=setTimeout(da,Me)),kr=0):(kr=1,Zn(da))}u.timer.flush=function(){wa(),Va()};function wa(){for(var ve=Date.now(),Me=Gr;Me;)ve>=Me.t&&Me.c(ve-Me.t)&&(Me.c=null),Me=Me.n;return ve}function Va(){for(var ve,Me=Gr,Re=1/0;Me;)Me.c?(Me.t<Re&&(Re=Me.t),Me=(ve=Me).n):Me=ve?ve.n=Me.n:Gr=Me.n;return Br=ve,Re}u.round=function(ve,Me){return Me?Math.round(ve*(Me=Math.pow(10,Me)))/Me:Math.round(ve)},u.geom={};function Oa(ve){return ve[0]}function wr(ve){return ve[1]}u.geom.hull=function(ve){var Me=Oa,Re=wr;if(arguments.length)return Ve(ve);function Ve(Ue){if(Ue.length<3)return[];var $e=st(Me),wt=st(Re),gt,Dt=Ue.length,Wt=[],Jt=[];for(gt=0;gt<Dt;gt++)Wt.push([+$e.call(this,Ue[gt],gt),+wt.call(this,Ue[gt],gt),gt]);for(Wt.sort(ln),gt=0;gt<Dt;gt++)Jt.push([Wt[gt][0],-Wt[gt][1]]);var qt=wn(Wt),Er=wn(Jt),an=Er[0]===qt[0],bn=Er[Er.length-1]===qt[qt.length-1],Rr=[];for(gt=qt.length-1;gt>=0;--gt)Rr.push(Ue[Wt[qt[gt]][2]]);for(gt=+an;gt<Er.length-bn;++gt)Rr.push(Ue[Wt[Er[gt]][2]]);return Rr}return Ve.x=function(Ue){return arguments.length?(Me=Ue,Ve):Me},Ve.y=function(Ue){return arguments.length?(Re=Ue,Ve):Re},Ve};function wn(ve){for(var Me=ve.length,Re=[0,1],Ve=2,Ue=2;Ue<Me;Ue++){for(;Ve>1&&Vt(ve[Re[Ve-2]],ve[Re[Ve-1]],ve[Ue])<=0;)--Ve;Re[Ve++]=Ue}return Re.slice(0,Ve)}function ln(ve,Me){return ve[0]-Me[0]||ve[1]-Me[1]}u.geom.polygon=function(ve){return fe(ve,jn),ve};var jn=u.geom.polygon.prototype=[];jn.area=function(){for(var ve=-1,Me=this.length,Re,Ve=this[Me-1],Ue=0;++ve<Me;)Re=Ve,Ve=this[ve],Ue+=Re[1]*Ve[0]-Re[0]*Ve[1];return Ue*.5},jn.centroid=function(ve){var Me=-1,Re=this.length,Ve=0,Ue=0,$e,wt=this[Re-1],gt;for(arguments.length||(ve=-1/(6*this.area()));++Me<Re;)$e=wt,wt=this[Me],gt=$e[0]*wt[1]-wt[0]*$e[1],Ve+=($e[0]+wt[0])*gt,Ue+=($e[1]+wt[1])*gt;return[Ve*ve,Ue*ve]},jn.clip=function(ve){for(var Me,Re=ga(ve),Ve=-1,Ue=this.length-ga(this),$e,wt,gt=this[Ue-1],Dt,Wt,Jt;++Ve<Ue;){for(Me=ve.slice(),ve.length=0,Dt=this[Ve],Wt=Me[(wt=Me.length-Re)-1],$e=-1;++$e<wt;)Jt=Me[$e],Jn(Jt,gt,Dt)?(Jn(Wt,gt,Dt)||ve.push(La(Wt,Jt,gt,Dt)),ve.push(Jt)):Jn(Wt,gt,Dt)&&ve.push(La(Wt,Jt,gt,Dt)),Wt=Jt;Re&&ve.push(ve[0]),gt=Dt}return ve};function Jn(ve,Me,Re){return(Re[0]-Me[0])*(ve[1]-Me[1])<(Re[1]-Me[1])*(ve[0]-Me[0])}function La(ve,Me,Re,Ve){var Ue=ve[0],$e=Re[0],wt=Me[0]-Ue,gt=Ve[0]-$e,Dt=ve[1],Wt=Re[1],Jt=Me[1]-Dt,qt=Ve[1]-Wt,Er=(gt*(Dt-Wt)-qt*(Ue-$e))/(qt*wt-gt*Jt);return[Ue+Er*wt,Dt+Er*Jt]}function ga(ve){var Me=ve[0],Re=ve[ve.length-1];return!(Me[0]-Re[0]||Me[1]-Re[1])}var qn,Ea,la,sr=[],Hr,dn,hn=[];function Sn(){vo(this),this.edge=this.site=this.circle=null}function Rn(ve){var Me=sr.pop()||new Sn;return Me.site=ve,Me}function Mn(ve){kn(ve),la.remove(ve),sr.push(ve),vo(ve)}function mr(ve){var Me=ve.circle,Re=Me.x,Ve=Me.cy,Ue={x:Re,y:Ve},$e=ve.P,wt=ve.N,gt=[ve];Mn(ve);for(var Dt=$e;Dt.circle&&g(Re-Dt.circle.x)<dt&&g(Ve-Dt.circle.cy)<dt;)$e=Dt.P,gt.unshift(Dt),Mn(Dt),Dt=$e;gt.unshift(Dt),kn(Dt);for(var Wt=wt;Wt.circle&&g(Re-Wt.circle.x)<dt&&g(Ve-Wt.circle.cy)<dt;)wt=Wt.N,gt.push(Wt),Mn(Wt),Wt=wt;gt.push(Wt),kn(Wt);var Jt=gt.length,qt;for(qt=1;qt<Jt;++qt)Wt=gt[qt],Dt=gt[qt-1],Eo(Wt.edge,Dt.site,Wt.site,Ue);Dt=gt[0],Wt=gt[Jt-1],Wt.edge=Na(Dt.site,Wt.site,null,Ue),Qn(Dt),Qn(Wt)}function hr(ve){for(var Me=ve.x,Re=ve.y,Ve,Ue,$e,wt,gt=la._;gt;)if($e=Fr(gt,Re)-Me,$e>dt)gt=gt.L;else if(wt=Me-nn(gt,Re),wt>dt){if(!gt.R){Ve=gt;break}gt=gt.R}else{$e>-dt?(Ve=gt.P,Ue=gt):wt>-dt?(Ve=gt,Ue=gt.N):Ve=Ue=gt;break}var Dt=Rn(ve);if(la.insert(Ve,Dt),!(!Ve&&!Ue)){if(Ve===Ue){kn(Ve),Ue=Rn(Ve.site),la.insert(Dt,Ue),Dt.edge=Ue.edge=Na(Ve.site,Dt.site),Qn(Ve),Qn(Ue);return}if(!Ue){Dt.edge=Na(Ve.site,Dt.site);return}kn(Ve),kn(Ue);var Wt=Ve.site,Jt=Wt.x,qt=Wt.y,Er=ve.x-Jt,an=ve.y-qt,bn=Ue.site,Rr=bn.x-Jt,Zr=bn.y-qt,$r=2*(Er*Zr-an*Rr),gn=Er*Er+an*an,yn=Rr*Rr+Zr*Zr,tn={x:(Zr*gn-an*yn)/$r+Jt,y:(Er*yn-Rr*gn)/$r+qt};Eo(Ue.edge,Wt,bn,tn),Dt.edge=Na(Wt,ve,null,tn),Ue.edge=Na(ve,bn,null,tn),Qn(Ve),Qn(Ue)}}function Fr(ve,Me){var Re=ve.site,Ve=Re.x,Ue=Re.y,$e=Ue-Me;if(!$e)return Ve;var wt=ve.P;if(!wt)return-1/0;Re=wt.site;var gt=Re.x,Dt=Re.y,Wt=Dt-Me;if(!Wt)return gt;var Jt=gt-Ve,qt=1/$e-1/Wt,Er=Jt/Wt;return qt?(-Er+Math.sqrt(Er*Er-2*qt*(Jt*Jt/(-2*Wt)-Dt+Wt/2+Ue-$e/2)))/qt+Ve:(Ve+gt)/2}function nn(ve,Me){var Re=ve.N;if(Re)return Fr(Re,Me);var Ve=ve.site;return Ve.y===Me?Ve.x:1/0}function On(ve){this.site=ve,this.edges=[]}On.prototype.prepare=function(){for(var ve=this.edges,Me=ve.length,Re;Me--;)Re=ve[Me].edge,(!Re.b||!Re.a)&&ve.splice(Me,1);return ve.sort(ua),ve.length};function ra(ve){for(var Me=ve[0][0],Re=ve[1][0],Ve=ve[0][1],Ue=ve[1][1],$e,wt,gt,Dt,Wt=Ea,Jt=Wt.length,qt,Er,an,bn,Rr,Zr;Jt--;)if(qt=Wt[Jt],!(!qt||!qt.prepare()))for(an=qt.edges,bn=an.length,Er=0;Er<bn;)Zr=an[Er].end(),gt=Zr.x,Dt=Zr.y,Rr=an[++Er%bn].start(),$e=Rr.x,wt=Rr.y,(g(gt-$e)>dt||g(Dt-wt)>dt)&&(an.splice(Er,0,new Xs(nu(qt.site,Zr,g(gt-Me)<dt&&Ue-Dt>dt?{x:Me,y:g($e-Me)<dt?wt:Ue}:g(Dt-Ue)<dt&&Re-gt>dt?{x:g(wt-Ue)<dt?$e:Re,y:Ue}:g(gt-Re)<dt&&Dt-Ve>dt?{x:Re,y:g($e-Re)<dt?wt:Ve}:g(Dt-Ve)<dt&&gt-Me>dt?{x:g(wt-Ve)<dt?$e:Me,y:Ve}:null),qt.site,null)),++bn)}function ua(ve,Me){return Me.angle-ve.angle}function $n(){vo(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qn(ve){var Me=ve.P,Re=ve.N;if(!(!Me||!Re)){var Ve=Me.site,Ue=ve.site,$e=Re.site;if(Ve!==$e){var wt=Ue.x,gt=Ue.y,Dt=Ve.x-wt,Wt=Ve.y-gt,Jt=$e.x-wt,qt=$e.y-gt,Er=2*(Dt*qt-Wt*Jt);if(!(Er>=-et)){var an=Dt*Dt+Wt*Wt,bn=Jt*Jt+qt*qt,Rr=(qt*an-Wt*bn)/Er,Zr=(Dt*bn-Jt*an)/Er,qt=Zr+gt,$r=hn.pop()||new $n;$r.arc=ve,$r.site=Ue,$r.x=Rr+wt,$r.y=qt+Math.sqrt(Rr*Rr+Zr*Zr),$r.cy=qt,ve.circle=$r;for(var gn=null,yn=dn._;yn;)if($r.y<yn.y||$r.y===yn.y&&$r.x<=yn.x)if(yn.L)yn=yn.L;else{gn=yn.P;break}else if(yn.R)yn=yn.R;else{gn=yn;break}dn.insert(gn,$r),gn||(Hr=$r)}}}}function kn(ve){var Me=ve.circle;Me&&(Me.P||(Hr=Me.N),dn.remove(Me),hn.push(Me),vo(Me),ve.circle=null)}function Wn(ve,Me,Re,Ve){return function(Ue){var $e=Ue.a,wt=Ue.b,gt=$e.x,Dt=$e.y,Wt=wt.x,Jt=wt.y,qt=0,Er=1,an=Wt-gt,bn=Jt-Dt,Rr;if(Rr=ve-gt,!(!an&&Rr>0)){if(Rr/=an,an<0){if(Rr<qt)return;Rr<Er&&(Er=Rr)}else if(an>0){if(Rr>Er)return;Rr>qt&&(qt=Rr)}if(Rr=Re-gt,!(!an&&Rr<0)){if(Rr/=an,an<0){if(Rr>Er)return;Rr>qt&&(qt=Rr)}else if(an>0){if(Rr<qt)return;Rr<Er&&(Er=Rr)}if(Rr=Me-Dt,!(!bn&&Rr>0)){if(Rr/=bn,bn<0){if(Rr<qt)return;Rr<Er&&(Er=Rr)}else if(bn>0){if(Rr>Er)return;Rr>qt&&(qt=Rr)}if(Rr=Ve-Dt,!(!bn&&Rr<0)){if(Rr/=bn,bn<0){if(Rr>Er)return;Rr>qt&&(qt=Rr)}else if(bn>0){if(Rr<qt)return;Rr<Er&&(Er=Rr)}return qt>0&&(Ue.a={x:gt+qt*an,y:Dt+qt*bn}),Er<1&&(Ue.b={x:gt+Er*an,y:Dt+Er*bn}),Ue}}}}}}function aa(ve){for(var Me=qn,Re=Wn(ve[0][0],ve[0][1],ve[1][0],ve[1][1]),Ve=Me.length,Ue;Ve--;)Ue=Me[Ve],(!Ma(Ue,ve)||!Re(Ue)||g(Ue.a.x-Ue.b.x)<dt&&g(Ue.a.y-Ue.b.y)<dt)&&(Ue.a=Ue.b=null,Me.splice(Ve,1))}function Ma(ve,Me){var Re=ve.b;if(Re)return!0;var Ve=ve.a,Ue=Me[0][0],$e=Me[1][0],wt=Me[0][1],gt=Me[1][1],Dt=ve.l,Wt=ve.r,Jt=Dt.x,qt=Dt.y,Er=Wt.x,an=Wt.y,bn=(Jt+Er)/2,Rr=(qt+an)/2,Zr,$r;if(an===qt){if(bn<Ue||bn>=$e)return;if(Jt>Er){if(!Ve)Ve={x:bn,y:wt};else if(Ve.y>=gt)return;Re={x:bn,y:gt}}else{if(!Ve)Ve={x:bn,y:gt};else if(Ve.y<wt)return;Re={x:bn,y:wt}}}else if(Zr=(Jt-Er)/(an-qt),$r=Rr-Zr*bn,Zr<-1||Zr>1)if(Jt>Er){if(!Ve)Ve={x:(wt-$r)/Zr,y:wt};else if(Ve.y>=gt)return;Re={x:(gt-$r)/Zr,y:gt}}else{if(!Ve)Ve={x:(gt-$r)/Zr,y:gt};else if(Ve.y<wt)return;Re={x:(wt-$r)/Zr,y:wt}}else if(qt<an){if(!Ve)Ve={x:Ue,y:Zr*Ue+$r};else if(Ve.x>=$e)return;Re={x:$e,y:Zr*$e+$r}}else{if(!Ve)Ve={x:$e,y:Zr*$e+$r};else if(Ve.x<Ue)return;Re={x:Ue,y:Zr*Ue+$r}}return ve.a=Ve,ve.b=Re,!0}function ui(ve,Me){this.l=ve,this.r=Me,this.a=this.b=null}function Na(ve,Me,Re,Ve){var Ue=new ui(ve,Me);return qn.push(Ue),Re&&Eo(Ue,ve,Me,Re),Ve&&Eo(Ue,Me,ve,Ve),Ea[ve.i].edges.push(new Xs(Ue,ve,Me)),Ea[Me.i].edges.push(new Xs(Ue,Me,ve)),Ue}function nu(ve,Me,Re){var Ve=new ui(ve,null);return Ve.a=Me,Ve.b=Re,qn.push(Ve),Ve}function Eo(ve,Me,Re,Ve){!ve.a&&!ve.b?(ve.a=Ve,ve.l=Me,ve.r=Re):ve.l===Re?ve.b=Ve:ve.a=Ve}function Xs(ve,Me,Re){var Ve=ve.a,Ue=ve.b;this.edge=ve,this.site=Me,this.angle=Re?Math.atan2(Re.y-Me.y,Re.x-Me.x):ve.l===Me?Math.atan2(Ue.x-Ve.x,Ve.y-Ue.y):Math.atan2(Ve.x-Ue.x,Ue.y-Ve.y)}Xs.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function cl(){this._=null}function vo(ve){ve.U=ve.C=ve.L=ve.R=ve.P=ve.N=null}cl.prototype={insert:function(ve,Me){var Re,Ve,Ue;if(ve){if(Me.P=ve,Me.N=ve.N,ve.N&&(ve.N.P=Me),ve.N=Me,ve.R){for(ve=ve.R;ve.L;)ve=ve.L;ve.L=Me}else ve.R=Me;Re=ve}else this._?(ve=ro(this._),Me.P=null,Me.N=ve,ve.P=ve.L=Me,Re=ve):(Me.P=Me.N=null,this._=Me,Re=null);for(Me.L=Me.R=null,Me.U=Re,Me.C=!0,ve=Me;Re&&Re.C;)Ve=Re.U,Re===Ve.L?(Ue=Ve.R,Ue&&Ue.C?(Re.C=Ue.C=!1,Ve.C=!0,ve=Ve):(ve===Re.R&&(Ki(this,Re),ve=Re,Re=ve.U),Re.C=!1,Ve.C=!0,hl(this,Ve))):(Ue=Ve.L,Ue&&Ue.C?(Re.C=Ue.C=!1,Ve.C=!0,ve=Ve):(ve===Re.L&&(hl(this,Re),ve=Re,Re=ve.U),Re.C=!1,Ve.C=!0,Ki(this,Ve))),Re=ve.U;this._.C=!1},remove:function(ve){ve.N&&(ve.N.P=ve.P),ve.P&&(ve.P.N=ve.N),ve.N=ve.P=null;var Me=ve.U,Re,Ve=ve.L,Ue=ve.R,$e,wt;if(Ve?Ue?$e=ro(Ue):$e=Ve:$e=Ue,Me?Me.L===ve?Me.L=$e:Me.R=$e:this._=$e,Ve&&Ue?(wt=$e.C,$e.C=ve.C,$e.L=Ve,Ve.U=$e,$e!==Ue?(Me=$e.U,$e.U=ve.U,ve=$e.R,Me.L=ve,$e.R=Ue,Ue.U=$e):($e.U=Me,Me=$e,ve=$e.R)):(wt=ve.C,ve=$e),ve&&(ve.U=Me),!wt){if(ve&&ve.C){ve.C=!1;return}do{if(ve===this._)break;if(ve===Me.L){if(Re=Me.R,Re.C&&(Re.C=!1,Me.C=!0,Ki(this,Me),Re=Me.R),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.R||!Re.R.C)&&(Re.L.C=!1,Re.C=!0,hl(this,Re),Re=Me.R),Re.C=Me.C,Me.C=Re.R.C=!1,Ki(this,Me),ve=this._;break}}else if(Re=Me.L,Re.C&&(Re.C=!1,Me.C=!0,hl(this,Me),Re=Me.L),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.L||!Re.L.C)&&(Re.R.C=!1,Re.C=!0,Ki(this,Re),Re=Me.L),Re.C=Me.C,Me.C=Re.L.C=!1,hl(this,Me),ve=this._;break}Re.C=!0,ve=Me,Me=Me.U}while(!ve.C);ve&&(ve.C=!1)}}};function Ki(ve,Me){var Re=Me,Ve=Me.R,Ue=Re.U;Ue?Ue.L===Re?Ue.L=Ve:Ue.R=Ve:ve._=Ve,Ve.U=Ue,Re.U=Ve,Re.R=Ve.L,Re.R&&(Re.R.U=Re),Ve.L=Re}function hl(ve,Me){var Re=Me,Ve=Me.L,Ue=Re.U;Ue?Ue.L===Re?Ue.L=Ve:Ue.R=Ve:ve._=Ve,Ve.U=Ue,Re.U=Ve,Re.L=Ve.R,Re.L&&(Re.L.U=Re),Ve.R=Re}function ro(ve){for(;ve.L;)ve=ve.L;return ve}function is(ve,Me){var Re=ve.sort(Vl).pop(),Ve,Ue,$e;for(qn=[],Ea=new Array(ve.length),la=new cl,dn=new cl;;)if($e=Hr,Re&&(!$e||Re.y<$e.y||Re.y===$e.y&&Re.x<$e.x))(Re.x!==Ve||Re.y!==Ue)&&(Ea[Re.i]=new On(Re),hr(Re),Ve=Re.x,Ue=Re.y),Re=ve.pop();else if($e)mr($e.arc);else break;Me&&(aa(Me),ra(Me));var wt={cells:Ea,edges:qn};return la=dn=qn=Ea=null,wt}function Vl(ve,Me){return Me.y-ve.y||Me.x-ve.x}u.geom.voronoi=function(ve){var Me=Oa,Re=wr,Ve=Me,Ue=Re,$e=zu;if(ve)return wt(ve);function wt(Dt){var Wt=new Array(Dt.length),Jt=$e[0][0],qt=$e[0][1],Er=$e[1][0],an=$e[1][1];return is(gt(Dt),$e).cells.forEach(function(bn,Rr){var Zr=bn.edges,$r=bn.site,gn=Wt[Rr]=Zr.length?Zr.map(function(yn){var tn=yn.start();return[tn.x,tn.y]}):$r.x>=Jt&&$r.x<=Er&&$r.y>=qt&&$r.y<=an?[[Jt,an],[Er,an],[Er,qt],[Jt,qt]]:[];gn.point=Dt[Rr]}),Wt}function gt(Dt){return Dt.map(function(Wt,Jt){return{x:Math.round(Ve(Wt,Jt)/dt)*dt,y:Math.round(Ue(Wt,Jt)/dt)*dt,i:Jt}})}return wt.links=function(Dt){return is(gt(Dt)).edges.filter(function(Wt){return Wt.l&&Wt.r}).map(function(Wt){return{source:Dt[Wt.l.i],target:Dt[Wt.r.i]}})},wt.triangles=function(Dt){var Wt=[];return is(gt(Dt)).cells.forEach(function(Jt,qt){for(var Er=Jt.site,an=Jt.edges.sort(ua),bn=-1,Rr=an.length,Zr,$r=an[Rr-1].edge,gn=$r.l===Er?$r.r:$r.l;++bn<Rr;)Zr=gn,$r=an[bn].edge,gn=$r.l===Er?$r.r:$r.l,qt<Zr.i&&qt<gn.i&&Fu(Er,Zr,gn)<0&&Wt.push([Dt[qt],Dt[Zr.i],Dt[gn.i]])}),Wt},wt.x=function(Dt){return arguments.length?(Ve=st(Me=Dt),wt):Me},wt.y=function(Dt){return arguments.length?(Ue=st(Re=Dt),wt):Re},wt.clipExtent=function(Dt){return arguments.length?($e=Dt==null?zu:Dt,wt):$e===zu?null:$e},wt.size=function(Dt){return arguments.length?wt.clipExtent(Dt&&[[0,0],Dt]):$e===zu?null:$e&&$e[1]},wt};var zu=[[-1e6,-1e6],[1e6,1e6]];function Fu(ve,Me,Re){return(ve.x-Re.x)*(Me.y-ve.y)-(ve.x-Me.x)*(Re.y-ve.y)}u.geom.delaunay=function(ve){return u.geom.voronoi().triangles(ve)},u.geom.quadtree=function(ve,Me,Re,Ve,Ue){var $e=Oa,wt=wr,gt;if(gt=arguments.length)return $e=Oi,wt=au,gt===3&&(Ue=Re,Ve=Me,Re=Me=0),Dt(ve);function Dt(Wt){var Jt,qt=st($e),Er=st(wt),an,bn,Rr,Zr,$r,gn,yn,tn;if(Me!=null)$r=Me,gn=Re,yn=Ve,tn=Ue;else if(yn=tn=-($r=gn=1/0),an=[],bn=[],Zr=Wt.length,gt)for(Rr=0;Rr<Zr;++Rr)Jt=Wt[Rr],Jt.x<$r&&($r=Jt.x),Jt.y<gn&&(gn=Jt.y),Jt.x>yn&&(yn=Jt.x),Jt.y>tn&&(tn=Jt.y),an.push(Jt.x),bn.push(Jt.y);else for(Rr=0;Rr<Zr;++Rr){var na=+qt(Jt=Wt[Rr],Rr),ya=+Er(Jt,Rr);na<$r&&($r=na),ya<gn&&(gn=ya),na>yn&&(yn=na),ya>tn&&(tn=ya),an.push(na),bn.push(ya)}var Ha=yn-$r,_a=tn-gn;Ha>_a?tn=gn+Ha:yn=$r+_a;function Xa(Ja,gi,Ii,Xo,go,Ra,fi,pi){if(!(isNaN(Ii)||isNaN(Xo)))if(Ja.leaf){var Gi=Ja.x,Si=Ja.y;if(Gi!=null)if(g(Gi-Ii)+g(Si-Xo)<.01)Sa(Ja,gi,Ii,Xo,go,Ra,fi,pi);else{var Go=Ja.point;Ja.x=Ja.y=Ja.point=null,Sa(Ja,Go,Gi,Si,go,Ra,fi,pi),Sa(Ja,gi,Ii,Xo,go,Ra,fi,pi)}else Ja.x=Ii,Ja.y=Xo,Ja.point=gi}else Sa(Ja,gi,Ii,Xo,go,Ra,fi,pi)}function Sa(Ja,gi,Ii,Xo,go,Ra,fi,pi){var Gi=(go+fi)*.5,Si=(Ra+pi)*.5,Go=Ii>=Gi,Do=Xo>=Si,ao=Do<<1|Go;Ja.leaf=!1,Ja=Ja.nodes[ao]||(Ja.nodes[ao]=Gl()),Go?go=Gi:fi=Gi,Do?Ra=Si:pi=Si,Xa(Ja,gi,Ii,Xo,go,Ra,fi,pi)}var ma=Gl();if(ma.add=function(Ja){Xa(ma,Ja,+qt(Ja,++Rr),+Er(Ja,Rr),$r,gn,yn,tn)},ma.visit=function(Ja){To(Ja,ma,$r,gn,yn,tn)},ma.find=function(Ja){return os(ma,Ja[0],Ja[1],$r,gn,yn,tn)},Rr=-1,Me==null){for(;++Rr<Zr;)Xa(ma,Wt[Rr],an[Rr],bn[Rr],$r,gn,yn,tn);--Rr}else Wt.forEach(ma.add);return an=bn=Wt=Jt=null,ma}return Dt.x=function(Wt){return arguments.length?($e=Wt,Dt):$e},Dt.y=function(Wt){return arguments.length?(wt=Wt,Dt):wt},Dt.extent=function(Wt){return arguments.length?(Wt==null?Me=Re=Ve=Ue=null:(Me=+Wt[0][0],Re=+Wt[0][1],Ve=+Wt[1][0],Ue=+Wt[1][1]),Dt):Me==null?null:[[Me,Re],[Ve,Ue]]},Dt.size=function(Wt){return arguments.length?(Wt==null?Me=Re=Ve=Ue=null:(Me=Re=0,Ve=+Wt[0],Ue=+Wt[1]),Dt):Me==null?null:[Ve-Me,Ue-Re]},Dt};function Oi(ve){return ve.x}function au(ve){return ve.y}function Gl(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function To(ve,Me,Re,Ve,Ue,$e){if(!ve(Me,Re,Ve,Ue,$e)){var wt=(Re+Ue)*.5,gt=(Ve+$e)*.5,Dt=Me.nodes;Dt[0]&&To(ve,Dt[0],Re,Ve,wt,gt),Dt[1]&&To(ve,Dt[1],wt,Ve,Ue,gt),Dt[2]&&To(ve,Dt[2],Re,gt,wt,$e),Dt[3]&&To(ve,Dt[3],wt,gt,Ue,$e)}}function os(ve,Me,Re,Ve,Ue,$e,wt){var gt=1/0,Dt;return function Wt(Jt,qt,Er,an,bn){if(!(qt>$e||Er>wt||an<Ve||bn<Ue)){if(Rr=Jt.point){var Rr,Zr=Me-Jt.x,$r=Re-Jt.y,gn=Zr*Zr+$r*$r;if(gn<gt){var yn=Math.sqrt(gt=gn);Ve=Me-yn,Ue=Re-yn,$e=Me+yn,wt=Re+yn,Dt=Rr}}for(var tn=Jt.nodes,na=(qt+an)*.5,ya=(Er+bn)*.5,Ha=Me>=na,_a=Re>=ya,Xa=_a<<1|Ha,Sa=Xa+4;Xa<Sa;++Xa)if(Jt=tn[Xa&3])switch(Xa&3){case 0:Wt(Jt,qt,Er,na,ya);break;case 1:Wt(Jt,na,Er,an,ya);break;case 2:Wt(Jt,qt,ya,na,bn);break;case 3:Wt(Jt,na,ya,an,bn);break}}}(ve,Ve,Ue,$e,wt),Dt}u.interpolateRgb=vl;function vl(ve,Me){ve=u.rgb(ve),Me=u.rgb(Me);var Re=ve.r,Ve=ve.g,Ue=ve.b,$e=Me.r-Re,wt=Me.g-Ve,gt=Me.b-Ue;return function(Dt){return"#"+_r(Math.round(Re+$e*Dt))+_r(Math.round(Ve+wt*Dt))+_r(Math.round(Ue+gt*Dt))}}u.interpolateObject=pl;function pl(ve,Me){var Re={},Ve={},Ue;for(Ue in ve)Ue in Me?Re[Ue]=Uo(ve[Ue],Me[Ue]):Ve[Ue]=ve[Ue];for(Ue in Me)Ue in ve||(Ve[Ue]=Me[Ue]);return function($e){for(Ue in Re)Ve[Ue]=Re[Ue]($e);return Ve}}u.interpolateNumber=no;function no(ve,Me){return ve=+ve,Me=+Me,function(Re){return ve*(1-Re)+Me*Re}}u.interpolateString=iu;function iu(ve,Me){var Re=Co.lastIndex=uo.lastIndex=0,Ve,Ue,$e,wt=-1,gt=[],Dt=[];for(ve=ve+"",Me=Me+"";(Ve=Co.exec(ve))&&(Ue=uo.exec(Me));)($e=Ue.index)>Re&&($e=Me.slice(Re,$e),gt[wt]?gt[wt]+=$e:gt[++wt]=$e),(Ve=Ve[0])===(Ue=Ue[0])?gt[wt]?gt[wt]+=Ue:gt[++wt]=Ue:(gt[++wt]=null,Dt.push({i:wt,x:no(Ve,Ue)})),Re=uo.lastIndex;return Re<Me.length&&($e=Me.slice(Re),gt[wt]?gt[wt]+=$e:gt[++wt]=$e),gt.length<2?Dt[0]?(Me=Dt[0].x,function(Wt){return Me(Wt)+""}):function(){return Me}:(Me=Dt.length,function(Wt){for(var Jt=0,qt;Jt<Me;++Jt)gt[(qt=Dt[Jt]).i]=qt.x(Wt);return gt.join("")})}var Co=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uo=new RegExp(Co.source,"g");u.interpolate=Uo;function Uo(ve,Me){for(var Re=u.interpolators.length,Ve;--Re>=0&&!(Ve=u.interpolators[Re](ve,Me)););return Ve}u.interpolators=[function(ve,Me){var Re=typeof Me;return(Re==="string"?qr.has(Me.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Me)?vl:iu:Me instanceof Nr?vl:Array.isArray(Me)?Oo:Re==="object"&&isNaN(Me)?pl:no)(ve,Me)}],u.interpolateArray=Oo;function Oo(ve,Me){var Re=[],Ve=[],Ue=ve.length,$e=Me.length,wt=Math.min(ve.length,Me.length),gt;for(gt=0;gt<wt;++gt)Re.push(Uo(ve[gt],Me[gt]));for(;gt<Ue;++gt)Ve[gt]=ve[gt];for(;gt<$e;++gt)Ve[gt]=Me[gt];return function(Dt){for(gt=0;gt<wt;++gt)Ve[gt]=Re[gt](Dt);return Ve}}var Vs=function(){return D},kl=u.map({linear:Vs,poly:Cl,quad:function(){return jo},cubic:function(){return If},sin:function(){return qu},exp:function(){return sc},circle:function(){return lc},elastic:ou,back:Ll,bounce:function(){return Pl}}),Df=u.map({in:D,out:Es,"in-out":dl,"out-in":function(ve){return dl(Es(ve))}});u.ease=function(ve){var Me=ve.indexOf("-"),Re=Me>=0?ve.slice(0,Me):ve,Ve=Me>=0?ve.slice(Me+1):"in";return Re=kl.get(Re)||Vs,Ve=Df.get(Ve)||D,Gs(Ve(Re.apply(null,s.call(arguments,1))))};function Gs(ve){return function(Me){return Me<=0?0:Me>=1?1:ve(Me)}}function Es(ve){return function(Me){return 1-ve(1-Me)}}function dl(ve){return function(Me){return .5*(Me<.5?ve(2*Me):2-ve(2-2*Me))}}function jo(ve){return ve*ve}function If(ve){return ve*ve*ve}function El(ve){if(ve<=0)return 0;if(ve>=1)return 1;var Me=ve*ve,Re=Me*ve;return 4*(ve<.5?Re:3*(ve-Me)+Re-.75)}function Cl(ve){return function(Me){return Math.pow(Me,ve)}}function qu(ve){return 1-Math.cos(ve*ht)}function sc(ve){return Math.pow(2,10*(ve-1))}function lc(ve){return 1-Math.sqrt(1-ve*ve)}function ou(ve,Me){var Re;return arguments.length<2&&(Me=.45),arguments.length?Re=Me/Je*Math.asin(1/ve):(ve=1,Re=Me/4),function(Ve){return 1+ve*Math.pow(2,-10*Ve)*Math.sin((Ve-Re)*Je/Me)}}function Ll(ve){return ve||(ve=1.70158),function(Me){return Me*Me*((ve+1)*Me-ve)}}function Pl(ve){return ve<1/2.75?7.5625*ve*ve:ve<2/2.75?7.5625*(ve-=1.5/2.75)*ve+.75:ve<2.5/2.75?7.5625*(ve-=2.25/2.75)*ve+.9375:7.5625*(ve-=2.625/2.75)*ve+.984375}u.interpolateHcl=mf;function mf(ve,Me){ve=u.hcl(ve),Me=u.hcl(Me);var Re=ve.h,Ve=ve.c,Ue=ve.l,$e=Me.h-Re,wt=Me.c-Ve,gt=Me.l-Ue;return isNaN(wt)&&(wt=0,Ve=isNaN(Ve)?Me.c:Ve),isNaN($e)?($e=0,Re=isNaN(Re)?Me.h:Re):$e>180?$e-=360:$e<-180&&($e+=360),function(Dt){return Ee(Re+$e*Dt,Ve+wt*Dt,Ue+gt*Dt)+""}}u.interpolateHsl=Wl;function Wl(ve,Me){ve=u.hsl(ve),Me=u.hsl(Me);var Re=ve.h,Ve=ve.s,Ue=ve.l,$e=Me.h-Re,wt=Me.s-Ve,gt=Me.l-Ue;return isNaN(wt)&&(wt=0,Ve=isNaN(Ve)?Me.s:Ve),isNaN($e)?($e=0,Re=isNaN(Re)?Me.h:Re):$e>180?$e-=360:$e<-180&&($e+=360),function(Dt){return Yr(Re+$e*Dt,Ve+wt*Dt,Ue+gt*Dt)+""}}u.interpolateLab=ef;function ef(ve,Me){ve=u.lab(ve),Me=u.lab(Me);var Re=ve.l,Ve=ve.a,Ue=ve.b,$e=Me.l-Re,wt=Me.a-Ve,gt=Me.b-Ue;return function(Dt){return kt(Re+$e*Dt,Ve+wt*Dt,Ue+gt*Dt)+""}}u.interpolateRound=Rl;function Rl(ve,Me){return Me-=ve,function(Re){return Math.round(ve+Me*Re)}}u.transform=function(ve){var Me=x.createElementNS(u.ns.prefix.svg,"g");return(u.transform=function(Re){if(Re!=null){Me.setAttribute("transform",Re);var Ve=Me.transform.baseVal.consolidate()}return new su(Ve?Ve.matrix:Dl)})(ve)};function su(ve){var Me=[ve.a,ve.b],Re=[ve.c,ve.d],Ve=lu(Me),Ue=uc(Me,Re),$e=lu(xf(Re,Me,-Ue))||0;Me[0]*Re[1]<Re[0]*Me[1]&&(Me[0]*=-1,Me[1]*=-1,Ve*=-1,Ue*=-1),this.rotate=(Ve?Math.atan2(Me[1],Me[0]):Math.atan2(-Re[0],Re[1]))*Lt,this.translate=[ve.e,ve.f],this.scale=[Ve,$e],this.skew=$e?Math.atan2(Ue,$e)*Lt:0}su.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function uc(ve,Me){return ve[0]*Me[0]+ve[1]*Me[1]}function lu(ve){var Me=Math.sqrt(uc(ve,ve));return Me&&(ve[0]/=Me,ve[1]/=Me),Me}function xf(ve,Me,Re){return ve[0]+=Re*Me[0],ve[1]+=Re*Me[1],ve}var Dl={a:1,b:0,c:0,d:1,e:0,f:0};u.interpolateTransform=tf;function Ko(ve){return ve.length?ve.pop()+",":""}function Au(ve,Me,Re,Ve){if(ve[0]!==Me[0]||ve[1]!==Me[1]){var Ue=Re.push("translate(",null,",",null,")");Ve.push({i:Ue-4,x:no(ve[0],Me[0])},{i:Ue-2,x:no(ve[1],Me[1])})}else(Me[0]||Me[1])&&Re.push("translate("+Me+")")}function bf(ve,Me,Re,Ve){ve!==Me?(ve-Me>180?Me+=360:Me-ve>180&&(ve+=360),Ve.push({i:Re.push(Ko(Re)+"rotate(",null,")")-2,x:no(ve,Me)})):Me&&Re.push(Ko(Re)+"rotate("+Me+")")}function zf(ve,Me,Re,Ve){ve!==Me?Ve.push({i:Re.push(Ko(Re)+"skewX(",null,")")-2,x:no(ve,Me)}):Me&&Re.push(Ko(Re)+"skewX("+Me+")")}function Ff(ve,Me,Re,Ve){if(ve[0]!==Me[0]||ve[1]!==Me[1]){var Ue=Re.push(Ko(Re)+"scale(",null,",",null,")");Ve.push({i:Ue-4,x:no(ve[0],Me[0])},{i:Ue-2,x:no(ve[1],Me[1])})}else(Me[0]!==1||Me[1]!==1)&&Re.push(Ko(Re)+"scale("+Me+")")}function tf(ve,Me){var Re=[],Ve=[];return ve=u.transform(ve),Me=u.transform(Me),Au(ve.translate,Me.translate,Re,Ve),bf(ve.rotate,Me.rotate,Re,Ve),zf(ve.skew,Me.skew,Re,Ve),Ff(ve.scale,Me.scale,Re,Ve),ve=Me=null,function(Ue){for(var $e=-1,wt=Ve.length,gt;++$e<wt;)Re[(gt=Ve[$e]).i]=gt.x(Ue);return Re.join("")}}function fc(ve,Me){return Me=(Me-=ve=+ve)||1/Me,function(Re){return(Re-ve)/Me}}function uu(ve,Me){return Me=(Me-=ve=+ve)||1/Me,function(Re){return Math.max(0,Math.min(1,(Re-ve)/Me))}}u.layout={},u.layout.bundle=function(){return function(ve){for(var Me=[],Re=-1,Ve=ve.length;++Re<Ve;)Me.push(Tn(ve[Re]));return Me}};function Tn(ve){for(var Me=ve.source,Re=ve.target,Ve=Gn(Me,Re),Ue=[Me];Me!==Ve;)Me=Me.parent,Ue.push(Me);for(var $e=Ue.length;Re!==Ve;)Ue.splice($e,0,Re),Re=Re.parent;return Ue}function ta(ve){for(var Me=[],Re=ve.parent;Re!=null;)Me.push(ve),ve=Re,Re=Re.parent;return Me.push(ve),Me}function Gn(ve,Me){if(ve===Me)return ve;for(var Re=ta(ve),Ve=ta(Me),Ue=Re.pop(),$e=Ve.pop(),wt=null;Ue===$e;)wt=Ue,Ue=Re.pop(),$e=Ve.pop();return wt}u.layout.chord=function(){var ve={},Me,Re,Ve,Ue,$e=0,wt,gt,Dt;function Wt(){var qt={},Er=[],an=u.range(Ue),bn=[],Rr,Zr,$r,gn,yn;for(Me=[],Re=[],Rr=0,gn=-1;++gn<Ue;){for(Zr=0,yn=-1;++yn<Ue;)Zr+=Ve[gn][yn];Er.push(Zr),bn.push(u.range(Ue)),Rr+=Zr}for(wt&&an.sort(function(ma,Ja){return wt(Er[ma],Er[Ja])}),gt&&bn.forEach(function(ma,Ja){ma.sort(function(gi,Ii){return gt(Ve[Ja][gi],Ve[Ja][Ii])})}),Rr=(Je-$e*Ue)/Rr,Zr=0,gn=-1;++gn<Ue;){for($r=Zr,yn=-1;++yn<Ue;){var tn=an[gn],na=bn[tn][yn],ya=Ve[tn][na],Ha=Zr,_a=Zr+=ya*Rr;qt[tn+"-"+na]={index:tn,subindex:na,startAngle:Ha,endAngle:_a,value:ya}}Re[tn]={index:tn,startAngle:$r,endAngle:Zr,value:Er[tn]},Zr+=$e}for(gn=-1;++gn<Ue;)for(yn=gn-1;++yn<Ue;){var Xa=qt[gn+"-"+yn],Sa=qt[yn+"-"+gn];(Xa.value||Sa.value)&&Me.push(Xa.value<Sa.value?{source:Sa,target:Xa}:{source:Xa,target:Sa})}Dt&&Jt()}function Jt(){Me.sort(function(qt,Er){return Dt((qt.source.value+qt.target.value)/2,(Er.source.value+Er.target.value)/2)})}return ve.matrix=function(qt){return arguments.length?(Ue=(Ve=qt)&&Ve.length,Me=Re=null,ve):Ve},ve.padding=function(qt){return arguments.length?($e=qt,Me=Re=null,ve):$e},ve.sortGroups=function(qt){return arguments.length?(wt=qt,Me=Re=null,ve):wt},ve.sortSubgroups=function(qt){return arguments.length?(gt=qt,Me=null,ve):gt},ve.sortChords=function(qt){return arguments.length?(Dt=qt,Me&&Jt(),ve):Dt},ve.chords=function(){return Me||Wt(),Me},ve.groups=function(){return Re||Wt(),Re},ve},u.layout.force=function(){var ve={},Me=u.dispatch("start","tick","end"),Re,Ve=[1,1],Ue,$e,wt=.9,gt=qs,Dt=Jo,Wt=-30,Jt=gs,qt=.1,Er=.64,an=[],bn=[],Rr,Zr,$r;function gn(tn){return function(na,ya,Ha,_a){if(na.point!==tn){var Xa=na.cx-tn.x,Sa=na.cy-tn.y,ma=_a-ya,Ja=Xa*Xa+Sa*Sa;if(ma*ma/Er<Ja){if(Ja<Jt){var gi=na.charge/Ja;tn.px-=Xa*gi,tn.py-=Sa*gi}return!0}if(na.point&&Ja&&Ja<Jt){var gi=na.pointCharge/Ja;tn.px-=Xa*gi,tn.py-=Sa*gi}}return!na.charge}}ve.tick=function(){if(($e*=.99)<.005)return Re=null,Me.end({type:"end",alpha:$e=0}),!0;var tn=an.length,na=bn.length,ya,Ha,_a,Xa,Sa,ma,Ja,gi,Ii;for(Ha=0;Ha<na;++Ha)_a=bn[Ha],Xa=_a.source,Sa=_a.target,gi=Sa.x-Xa.x,Ii=Sa.y-Xa.y,(ma=gi*gi+Ii*Ii)&&(ma=$e*Zr[Ha]*((ma=Math.sqrt(ma))-Rr[Ha])/ma,gi*=ma,Ii*=ma,Sa.x-=gi*(Ja=Xa.weight+Sa.weight?Xa.weight/(Xa.weight+Sa.weight):.5),Sa.y-=Ii*Ja,Xa.x+=gi*(Ja=1-Ja),Xa.y+=Ii*Ja);if((Ja=$e*qt)&&(gi=Ve[0]/2,Ii=Ve[1]/2,Ha=-1,Ja))for(;++Ha<tn;)_a=an[Ha],_a.x+=(gi-_a.x)*Ja,_a.y+=(Ii-_a.y)*Ja;if(Wt)for(Bi(ya=u.geom.quadtree(an),$e,$r),Ha=-1;++Ha<tn;)(_a=an[Ha]).fixed||ya.visit(gn(_a));for(Ha=-1;++Ha<tn;)_a=an[Ha],_a.fixed?(_a.x=_a.px,_a.y=_a.py):(_a.x-=(_a.px-(_a.px=_a.x))*wt,_a.y-=(_a.py-(_a.py=_a.y))*wt);Me.tick({type:"tick",alpha:$e})},ve.nodes=function(tn){return arguments.length?(an=tn,ve):an},ve.links=function(tn){return arguments.length?(bn=tn,ve):bn},ve.size=function(tn){return arguments.length?(Ve=tn,ve):Ve},ve.linkDistance=function(tn){return arguments.length?(gt=typeof tn=="function"?tn:+tn,ve):gt},ve.distance=ve.linkDistance,ve.linkStrength=function(tn){return arguments.length?(Dt=typeof tn=="function"?tn:+tn,ve):Dt},ve.friction=function(tn){return arguments.length?(wt=+tn,ve):wt},ve.charge=function(tn){return arguments.length?(Wt=typeof tn=="function"?tn:+tn,ve):Wt},ve.chargeDistance=function(tn){return arguments.length?(Jt=tn*tn,ve):Math.sqrt(Jt)},ve.gravity=function(tn){return arguments.length?(qt=+tn,ve):qt},ve.theta=function(tn){return arguments.length?(Er=tn*tn,ve):Math.sqrt(Er)},ve.alpha=function(tn){return arguments.length?(tn=+tn,$e?tn>0?$e=tn:(Re.c=null,Re.t=NaN,Re=null,Me.end({type:"end",alpha:$e=0})):tn>0&&(Me.start({type:"start",alpha:$e=tn}),Re=Hn(ve.tick)),ve):$e},ve.start=function(){var tn,na=an.length,ya=bn.length,Ha=Ve[0],_a=Ve[1],Xa,Sa;for(tn=0;tn<na;++tn)(Sa=an[tn]).index=tn,Sa.weight=0;for(tn=0;tn<ya;++tn)Sa=bn[tn],typeof Sa.source=="number"&&(Sa.source=an[Sa.source]),typeof Sa.target=="number"&&(Sa.target=an[Sa.target]),++Sa.source.weight,++Sa.target.weight;for(tn=0;tn<na;++tn)Sa=an[tn],isNaN(Sa.x)&&(Sa.x=ma("x",Ha)),isNaN(Sa.y)&&(Sa.y=ma("y",_a)),isNaN(Sa.px)&&(Sa.px=Sa.x),isNaN(Sa.py)&&(Sa.py=Sa.y);if(Rr=[],typeof gt=="function")for(tn=0;tn<ya;++tn)Rr[tn]=+gt.call(this,bn[tn],tn);else for(tn=0;tn<ya;++tn)Rr[tn]=gt;if(Zr=[],typeof Dt=="function")for(tn=0;tn<ya;++tn)Zr[tn]=+Dt.call(this,bn[tn],tn);else for(tn=0;tn<ya;++tn)Zr[tn]=Dt;if($r=[],typeof Wt=="function")for(tn=0;tn<na;++tn)$r[tn]=+Wt.call(this,an[tn],tn);else for(tn=0;tn<na;++tn)$r[tn]=Wt;function ma(Ja,gi){if(!Xa){for(Xa=new Array(na),go=0;go<na;++go)Xa[go]=[];for(go=0;go<ya;++go){var Ii=bn[go];Xa[Ii.source.index].push(Ii.target),Xa[Ii.target.index].push(Ii.source)}}for(var Xo=Xa[tn],go=-1,Ra=Xo.length,fi;++go<Ra;)if(!isNaN(fi=Xo[go][Ja]))return fi;return Math.random()*gi}return ve.resume()},ve.resume=function(){return ve.alpha(.1)},ve.stop=function(){return ve.alpha(0)},ve.drag=function(){if(Ue||(Ue=u.behavior.drag().origin(D).on("dragstart.force",ii).on("drag.force",yn).on("dragend.force",mi)),!arguments.length)return Ue;this.on("mouseover.force",Ei).on("mouseout.force",Ho).call(Ue)};function yn(tn){tn.px=u.event.x,tn.py=u.event.y,ve.resume()}return u.rebind(ve,Me,"on")};function ii(ve){ve.fixed|=2}function mi(ve){ve.fixed&=~6}function Ei(ve){ve.fixed|=4,ve.px=ve.x,ve.py=ve.y}function Ho(ve){ve.fixed&=~4}function Bi(ve,Me,Re){var Ve=0,Ue=0;if(ve.charge=0,!ve.leaf)for(var $e=ve.nodes,wt=$e.length,gt=-1,Dt;++gt<wt;)Dt=$e[gt],Dt!=null&&(Bi(Dt,Me,Re),ve.charge+=Dt.charge,Ve+=Dt.charge*Dt.cx,Ue+=Dt.charge*Dt.cy);if(ve.point){ve.leaf||(ve.point.x+=Math.random()-.5,ve.point.y+=Math.random()-.5);var Wt=Me*Re[ve.point.index];ve.charge+=ve.pointCharge=Wt,Ve+=Wt*ve.point.x,Ue+=Wt*ve.point.y}ve.cx=Ve/ve.charge,ve.cy=Ue/ve.charge}var qs=20,Jo=1,gs=1/0;u.layout.hierarchy=function(){var ve=qi,Me=Xl,Re=Il;function Ve(Ue){var $e=[Ue],wt=[],gt;for(Ue.depth=0;(gt=$e.pop())!=null;)if(wt.push(gt),(Wt=Me.call(Ve,gt,gt.depth))&&(Dt=Wt.length)){for(var Dt,Wt,Jt;--Dt>=0;)$e.push(Jt=Wt[Dt]),Jt.parent=gt,Jt.depth=gt.depth+1;Re&&(gt.value=0),gt.children=Wt}else Re&&(gt.value=+Re.call(Ve,gt,gt.depth)||0),delete gt.children;return _s(Ue,function(qt){var Er,an;ve&&(Er=qt.children)&&Er.sort(ve),Re&&(an=qt.parent)&&(an.value+=qt.value)}),wt}return Ve.sort=function(Ue){return arguments.length?(ve=Ue,Ve):ve},Ve.children=function(Ue){return arguments.length?(Me=Ue,Ve):Me},Ve.value=function(Ue){return arguments.length?(Re=Ue,Ve):Re},Ve.revalue=function(Ue){return Re&&(fu(Ue,function($e){$e.children&&($e.value=0)}),_s(Ue,function($e){var wt;$e.children||($e.value=+Re.call(Ve,$e,$e.depth)||0),(wt=$e.parent)&&(wt.value+=$e.value)})),Ue},Ve};function Yl(ve,Me){return u.rebind(ve,Me,"sort","children","value"),ve.nodes=ve,ve.links=Ou,ve}function fu(ve,Me){for(var Re=[ve];(ve=Re.pop())!=null;)if(Me(ve),(Ue=ve.children)&&(Ve=Ue.length))for(var Ve,Ue;--Ve>=0;)Re.push(Ue[Ve])}function _s(ve,Me){for(var Re=[ve],Ve=[];(ve=Re.pop())!=null;)if(Ve.push(ve),(wt=ve.children)&&($e=wt.length))for(var Ue=-1,$e,wt;++Ue<$e;)Re.push(wt[Ue]);for(;(ve=Ve.pop())!=null;)Me(ve)}function Xl(ve){return ve.children}function Il(ve){return ve.value}function qi(ve,Me){return Me.value-ve.value}function Ou(ve){return u.merge(ve.map(function(Me){return(Me.children||[]).map(function(Re){return{source:Me,target:Re}})}))}u.layout.partition=function(){var ve=u.layout.hierarchy(),Me=[1,1];function Re($e,wt,gt,Dt){var Wt=$e.children;if($e.x=wt,$e.y=$e.depth*Dt,$e.dx=gt,$e.dy=Dt,Wt&&(qt=Wt.length)){var Jt=-1,qt,Er,an;for(gt=$e.value?gt/$e.value:0;++Jt<qt;)Re(Er=Wt[Jt],wt,an=Er.value*gt,Dt),wt+=an}}function Ve($e){var wt=$e.children,gt=0;if(wt&&(Wt=wt.length))for(var Dt=-1,Wt;++Dt<Wt;)gt=Math.max(gt,Ve(wt[Dt]));return 1+gt}function Ue($e,wt){var gt=ve.call(this,$e,wt);return Re(gt[0],0,Me[0],Me[1]/Ve(gt[0])),gt}return Ue.size=function($e){return arguments.length?(Me=$e,Ue):Me},Yl(Ue,ve)},u.layout.pie=function(){var ve=Number,Me=Zl,Re=0,Ve=Je,Ue=0;function $e(wt){var gt=wt.length,Dt=wt.map(function(gn,yn){return+ve.call($e,gn,yn)}),Wt=+(typeof Re=="function"?Re.apply(this,arguments):Re),Jt=(typeof Ve=="function"?Ve.apply(this,arguments):Ve)-Wt,qt=Math.min(Math.abs(Jt)/gt,+(typeof Ue=="function"?Ue.apply(this,arguments):Ue)),Er=qt*(Jt<0?-1:1),an=u.sum(Dt),bn=an?(Jt-gt*Er)/an:0,Rr=u.range(gt),Zr=[],$r;return Me!=null&&Rr.sort(Me===Zl?function(gn,yn){return Dt[yn]-Dt[gn]}:function(gn,yn){return Me(wt[gn],wt[yn])}),Rr.forEach(function(gn){Zr[gn]={data:wt[gn],value:$r=Dt[gn],startAngle:Wt,endAngle:Wt+=$r*bn+Er,padAngle:qt}}),Zr}return $e.value=function(wt){return arguments.length?(ve=wt,$e):ve},$e.sort=function(wt){return arguments.length?(Me=wt,$e):Me},$e.startAngle=function(wt){return arguments.length?(Re=wt,$e):Re},$e.endAngle=function(wt){return arguments.length?(Ve=wt,$e):Ve},$e.padAngle=function(wt){return arguments.length?(Ue=wt,$e):Ue},$e};var Zl={};u.layout.stack=function(){var ve=D,Me=Zs,Re=yl,Ve=Ec,Ue=rf,$e=el;function wt(gt,Dt){if(!(bn=gt.length))return gt;var Wt=gt.map(function(gn,yn){return ve.call(wt,gn,yn)}),Jt=Wt.map(function(gn){return gn.map(function(yn,tn){return[Ue.call(wt,yn,tn),$e.call(wt,yn,tn)]})}),qt=Me.call(wt,Jt,Dt);Wt=u.permute(Wt,qt),Jt=u.permute(Jt,qt);var Er=Re.call(wt,Jt,Dt),an=Wt[0].length,bn,Rr,Zr,$r;for(Zr=0;Zr<an;++Zr)for(Ve.call(wt,Wt[0][Zr],$r=Er[Zr],Jt[0][Zr][1]),Rr=1;Rr<bn;++Rr)Ve.call(wt,Wt[Rr][Zr],$r+=Jt[Rr-1][Zr][1],Jt[Rr][Zr][1]);return gt}return wt.values=function(gt){return arguments.length?(ve=gt,wt):ve},wt.order=function(gt){return arguments.length?(Me=typeof gt=="function"?gt:_f.get(gt)||Zs,wt):Me},wt.offset=function(gt){return arguments.length?(Re=typeof gt=="function"?gt:zl.get(gt)||yl,wt):Re},wt.x=function(gt){return arguments.length?(Ue=gt,wt):Ue},wt.y=function(gt){return arguments.length?($e=gt,wt):$e},wt.out=function(gt){return arguments.length?(Ve=gt,wt):Ve},wt};function rf(ve){return ve.x}function el(ve){return ve.y}function Ec(ve,Me,Re){ve.y0=Me,ve.y=Re}var _f=u.map({"inside-out":function(ve){var Me=ve.length,Re,Ve,Ue=ve.map(Mu),$e=ve.map(Nu),wt=u.range(Me).sort(function(qt,Er){return Ue[qt]-Ue[Er]}),gt=0,Dt=0,Wt=[],Jt=[];for(Re=0;Re<Me;++Re)Ve=wt[Re],gt<Dt?(gt+=$e[Ve],Wt.push(Ve)):(Dt+=$e[Ve],Jt.push(Ve));return Jt.reverse().concat(Wt)},reverse:function(ve){return u.range(ve.length).reverse()},default:Zs}),zl=u.map({silhouette:function(ve){var Me=ve.length,Re=ve[0].length,Ve=[],Ue=0,$e,wt,gt,Dt=[];for(wt=0;wt<Re;++wt){for($e=0,gt=0;$e<Me;$e++)gt+=ve[$e][wt][1];gt>Ue&&(Ue=gt),Ve.push(gt)}for(wt=0;wt<Re;++wt)Dt[wt]=(Ue-Ve[wt])/2;return Dt},wiggle:function(ve){var Me=ve.length,Re=ve[0],Ve=Re.length,Ue,$e,wt,gt,Dt,Wt,Jt,qt,Er,an=[];for(an[0]=qt=Er=0,$e=1;$e<Ve;++$e){for(Ue=0,gt=0;Ue<Me;++Ue)gt+=ve[Ue][$e][1];for(Ue=0,Dt=0,Jt=Re[$e][0]-Re[$e-1][0];Ue<Me;++Ue){for(wt=0,Wt=(ve[Ue][$e][1]-ve[Ue][$e-1][1])/(2*Jt);wt<Ue;++wt)Wt+=(ve[wt][$e][1]-ve[wt][$e-1][1])/Jt;Dt+=Wt*ve[Ue][$e][1]}an[$e]=qt-=gt?Dt/gt*Jt:0,qt<Er&&(Er=qt)}for($e=0;$e<Ve;++$e)an[$e]-=Er;return an},expand:function(ve){var Me=ve.length,Re=ve[0].length,Ve=1/Me,Ue,$e,wt,gt=[];for($e=0;$e<Re;++$e){for(Ue=0,wt=0;Ue<Me;Ue++)wt+=ve[Ue][$e][1];if(wt)for(Ue=0;Ue<Me;Ue++)ve[Ue][$e][1]/=wt;else for(Ue=0;Ue<Me;Ue++)ve[Ue][$e][1]=Ve}for($e=0;$e<Re;++$e)gt[$e]=0;return gt},zero:yl});function Zs(ve){return u.range(ve.length)}function yl(ve){for(var Me=-1,Re=ve[0].length,Ve=[];++Me<Re;)Ve[Me]=0;return Ve}function Mu(ve){for(var Me=1,Re=0,Ve=ve[0][1],Ue,$e=ve.length;Me<$e;++Me)(Ue=ve[Me][1])>Ve&&(Re=Me,Ve=Ue);return Re}function Nu(ve){return ve.reduce(wf,0)}function wf(ve,Me){return ve+Me[1]}u.layout.histogram=function(){var ve=!0,Me=Number,Re=cu,Ve=cc;function Ue($e,wt){for(var gt=[],Dt=$e.map(Me,this),Wt=Re.call(this,Dt,wt),Jt=Ve.call(this,Wt,Dt,wt),qt,wt=-1,Er=Dt.length,an=Jt.length-1,bn=ve?1:1/Er,Rr;++wt<an;)qt=gt[wt]=[],qt.dx=Jt[wt+1]-(qt.x=Jt[wt]),qt.y=0;if(an>0)for(wt=-1;++wt<Er;)Rr=Dt[wt],Rr>=Wt[0]&&Rr<=Wt[1]&&(qt=gt[u.bisect(Jt,Rr,1,an)-1],qt.y+=bn,qt.push($e[wt]));return gt}return Ue.value=function($e){return arguments.length?(Me=$e,Ue):Me},Ue.range=function($e){return arguments.length?(Re=st($e),Ue):Re},Ue.bins=function($e){return arguments.length?(Ve=typeof $e=="number"?function(wt){return Ji(wt,$e)}:st($e),Ue):Ve},Ue.frequency=function($e){return arguments.length?(ve=!!$e,Ue):ve},Ue};function cc(ve,Me){return Ji(ve,Math.ceil(Math.log(Me.length)/Math.LN2+1))}function Ji(ve,Me){for(var Re=-1,Ve=+ve[0],Ue=(ve[1]-Ve)/Me,$e=[];++Re<=Me;)$e[Re]=Ue*Re+Ve;return $e}function cu(ve){return[u.min(ve),u.max(ve)]}u.layout.pack=function(){var ve=u.layout.hierarchy().sort(tl),Me=0,Re=[1,1],Ve;function Ue($e,wt){var gt=ve.call(this,$e,wt),Dt=gt[0],Wt=Re[0],Jt=Re[1],qt=Ve==null?Math.sqrt:typeof Ve=="function"?Ve:function(){return Ve};if(Dt.x=Dt.y=0,_s(Dt,function(an){an.r=+qt(an.value)}),_s(Dt,Qo),Me){var Er=Me*(Ve?1:Math.max(2*Dt.r/Wt,2*Dt.r/Jt))/2;_s(Dt,function(an){an.r+=Er}),_s(Dt,Qo),_s(Dt,function(an){an.r-=Er})}return rl(Dt,Wt/2,Jt/2,Ve?1:1/Math.max(2*Dt.r/Wt,2*Dt.r/Jt)),gt}return Ue.size=function($e){return arguments.length?(Re=$e,Ue):Re},Ue.radius=function($e){return arguments.length?(Ve=$e==null||typeof $e=="function"?$e:+$e,Ue):Ve},Ue.padding=function($e){return arguments.length?(Me=+$e,Ue):Me},Yl(Ue,ve)};function tl(ve,Me){return ve.value-Me.value}function us(ve,Me){var Re=ve._pack_next;ve._pack_next=Me,Me._pack_prev=ve,Me._pack_next=Re,Re._pack_prev=Me}function Cs(ve,Me){ve._pack_next=Me,Me._pack_prev=ve}function Bu(ve,Me){var Re=Me.x-ve.x,Ve=Me.y-ve.y,Ue=ve.r+Me.r;return .999*Ue*Ue>Re*Re+Ve*Ve}function Qo(ve){if(!(Me=ve.children)||!(Er=Me.length))return;var Me,Re=1/0,Ve=-1/0,Ue=1/0,$e=-1/0,wt,gt,Dt,Wt,Jt,qt,Er;function an(tn){Re=Math.min(tn.x-tn.r,Re),Ve=Math.max(tn.x+tn.r,Ve),Ue=Math.min(tn.y-tn.r,Ue),$e=Math.max(tn.y+tn.r,$e)}if(Me.forEach(Of),wt=Me[0],wt.x=-wt.r,wt.y=0,an(wt),Er>1&&(gt=Me[1],gt.x=gt.r,gt.y=0,an(gt),Er>2))for(Dt=Me[2],ml(wt,gt,Dt),an(Dt),us(wt,Dt),wt._pack_prev=Dt,us(Dt,gt),gt=wt._pack_next,Wt=3;Wt<Er;Wt++){ml(wt,gt,Dt=Me[Wt]);var bn=0,Rr=1,Zr=1;for(Jt=gt._pack_next;Jt!==gt;Jt=Jt._pack_next,Rr++)if(Bu(Jt,Dt)){bn=1;break}if(bn==1)for(qt=wt._pack_prev;qt!==Jt._pack_prev&&!Bu(qt,Dt);qt=qt._pack_prev,Zr++);bn?(Rr<Zr||Rr==Zr&&gt.r<wt.r?Cs(wt,gt=Jt):Cs(wt=qt,gt),Wt--):(us(wt,Dt),gt=Dt,an(Dt))}var $r=(Re+Ve)/2,gn=(Ue+$e)/2,yn=0;for(Wt=0;Wt<Er;Wt++)Dt=Me[Wt],Dt.x-=$r,Dt.y-=gn,yn=Math.max(yn,Dt.r+Math.sqrt(Dt.x*Dt.x+Dt.y*Dt.y));ve.r=yn,Me.forEach(Ls)}function Of(ve){ve._pack_next=ve._pack_prev=ve}function Ls(ve){delete ve._pack_next,delete ve._pack_prev}function rl(ve,Me,Re,Ve){var Ue=ve.children;if(ve.x=Me+=Ve*ve.x,ve.y=Re+=Ve*ve.y,ve.r*=Ve,Ue)for(var $e=-1,wt=Ue.length;++$e<wt;)rl(Ue[$e],Me,Re,Ve)}function ml(ve,Me,Re){var Ve=ve.r+Re.r,Ue=Me.x-ve.x,$e=Me.y-ve.y;if(Ve&&(Ue||$e)){var wt=Me.r+Re.r,gt=Ue*Ue+$e*$e;wt*=wt,Ve*=Ve;var Dt=.5+(Ve-wt)/(2*gt),Wt=Math.sqrt(Math.max(0,2*wt*(Ve+gt)-(Ve-=gt)*Ve-wt*wt))/(2*gt);Re.x=ve.x+Dt*Ue+Wt*$e,Re.y=ve.y+Dt*$e-Wt*Ue}else Re.x=ve.x+Ve,Re.y=ve.y}u.layout.tree=function(){var ve=u.layout.hierarchy().sort(null).value(null),Me=Fl,Re=[1,1],Ve=null;function Ue(Jt,qt){var Er=ve.call(this,Jt,qt),an=Er[0],bn=$e(an);if(_s(bn,wt),bn.parent.m=-bn.z,fu(bn,gt),Ve)fu(an,Wt);else{var Rr=an,Zr=an,$r=an;fu(an,function(na){na.x<Rr.x&&(Rr=na),na.x>Zr.x&&(Zr=na),na.depth>$r.depth&&($r=na)});var gn=Me(Rr,Zr)/2-Rr.x,yn=Re[0]/(Zr.x+Me(Zr,Rr)/2+gn),tn=Re[1]/($r.depth||1);fu(an,function(na){na.x=(na.x+gn)*yn,na.y=na.depth*tn})}return Er}function $e(Jt){for(var qt={A:null,children:[Jt]},Er=[qt],an;(an=Er.pop())!=null;)for(var bn=an.children,Rr,Zr=0,$r=bn.length;Zr<$r;++Zr)Er.push((bn[Zr]=Rr={_:bn[Zr],parent:an,children:(Rr=bn[Zr].children)&&Rr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Zr}).a=Rr);return qt.children[0]}function wt(Jt){var qt=Jt.children,Er=Jt.parent.children,an=Jt.i?Er[Jt.i-1]:null;if(qt.length){po(Jt);var bn=(qt[0].z+qt[qt.length-1].z)/2;an?(Jt.z=an.z+Me(Jt._,an._),Jt.m=Jt.z-bn):Jt.z=bn}else an&&(Jt.z=an.z+Me(Jt._,an._));Jt.parent.A=Dt(Jt,an,Jt.parent.A||Er[0])}function gt(Jt){Jt._.x=Jt.z+Jt.parent.m,Jt.m+=Jt.parent.m}function Dt(Jt,qt,Er){if(qt){for(var an=Jt,bn=Jt,Rr=qt,Zr=an.parent.children[0],$r=an.m,gn=bn.m,yn=Rr.m,tn=Zr.m,na;Rr=Lo(Rr),an=js(an),Rr&&an;)Zr=js(Zr),bn=Lo(bn),bn.a=Jt,na=Rr.z+yn-an.z-$r+Me(Rr._,an._),na>0&&(ys(hs(Rr,Jt,Er),Jt,na),$r+=na,gn+=na),yn+=Rr.m,$r+=an.m,tn+=Zr.m,gn+=bn.m;Rr&&!Lo(bn)&&(bn.t=Rr,bn.m+=yn-gn),an&&!js(Zr)&&(Zr.t=an,Zr.m+=$r-tn,Er=Jt)}return Er}function Wt(Jt){Jt.x*=Re[0],Jt.y=Jt.depth*Re[1]}return Ue.separation=function(Jt){return arguments.length?(Me=Jt,Ue):Me},Ue.size=function(Jt){return arguments.length?(Ve=(Re=Jt)==null?Wt:null,Ue):Ve?null:Re},Ue.nodeSize=function(Jt){return arguments.length?(Ve=(Re=Jt)==null?null:Wt,Ue):Ve?Re:null},Yl(Ue,ve)};function Fl(ve,Me){return ve.parent==Me.parent?1:2}function js(ve){var Me=ve.children;return Me.length?Me[0]:ve.t}function Lo(ve){var Me=ve.children,Re;return(Re=Me.length)?Me[Re-1]:ve.t}function ys(ve,Me,Re){var Ve=Re/(Me.i-ve.i);Me.c-=Ve,Me.s+=Re,ve.c+=Ve,Me.z+=Re,Me.m+=Re}function po(ve){for(var Me=0,Re=0,Ve=ve.children,Ue=Ve.length,$e;--Ue>=0;)$e=Ve[Ue],$e.z+=Me,$e.m+=Me,Me+=$e.s+(Re+=$e.c)}function hs(ve,Me,Re){return ve.a.parent===Me.parent?ve.a:Re}u.layout.cluster=function(){var ve=u.layout.hierarchy().sort(null).value(null),Me=Fl,Re=[1,1],Ve=!1;function Ue($e,wt){var gt=ve.call(this,$e,wt),Dt=gt[0],Wt,Jt=0;_s(Dt,function(Rr){var Zr=Rr.children;Zr&&Zr.length?(Rr.x=Nf(Zr),Rr.y=nf(Zr)):(Rr.x=Wt?Jt+=Me(Rr,Wt):0,Rr.y=0,Wt=Rr)});var qt=_t(Dt),Er=Ot(Dt),an=qt.x-Me(qt,Er)/2,bn=Er.x+Me(Er,qt)/2;return _s(Dt,Ve?function(Rr){Rr.x=(Rr.x-Dt.x)*Re[0],Rr.y=(Dt.y-Rr.y)*Re[1]}:function(Rr){Rr.x=(Rr.x-an)/(bn-an)*Re[0],Rr.y=(1-(Dt.y?Rr.y/Dt.y:1))*Re[1]}),gt}return Ue.separation=function($e){return arguments.length?(Me=$e,Ue):Me},Ue.size=function($e){return arguments.length?(Ve=(Re=$e)==null,Ue):Ve?null:Re},Ue.nodeSize=function($e){return arguments.length?(Ve=(Re=$e)!=null,Ue):Ve?Re:null},Yl(Ue,ve)};function nf(ve){return 1+u.max(ve,function(Me){return Me.y})}function Nf(ve){return ve.reduce(function(Me,Re){return Me+Re.x},0)/ve.length}function _t(ve){var Me=ve.children;return Me&&Me.length?_t(Me[0]):ve}function Ot(ve){var Me=ve.children,Re;return Me&&(Re=Me.length)?Ot(Me[Re-1]):ve}u.layout.treemap=function(){var ve=u.layout.hierarchy(),Me=Math.round,Re=[1,1],Ve=null,Ue=ur,$e=!1,wt,gt="squarify",Dt=.5*(1+Math.sqrt(5));function Wt(Rr,Zr){for(var $r=-1,gn=Rr.length,yn,tn;++$r<gn;)tn=(yn=Rr[$r]).value*(Zr<0?0:Zr),yn.area=isNaN(tn)||tn<=0?0:tn}function Jt(Rr){var Zr=Rr.children;if(Zr&&Zr.length){var $r=Ue(Rr),gn=[],yn=Zr.slice(),tn,na=1/0,ya,Ha=gt==="slice"?$r.dx:gt==="dice"?$r.dy:gt==="slice-dice"?Rr.depth&1?$r.dy:$r.dx:Math.min($r.dx,$r.dy),_a;for(Wt(yn,$r.dx*$r.dy/Rr.value),gn.area=0;(_a=yn.length)>0;)gn.push(tn=yn[_a-1]),gn.area+=tn.area,gt!=="squarify"||(ya=Er(gn,Ha))<=na?(yn.pop(),na=ya):(gn.area-=gn.pop().area,an(gn,Ha,$r,!1),Ha=Math.min($r.dx,$r.dy),gn.length=gn.area=0,na=1/0);gn.length&&(an(gn,Ha,$r,!0),gn.length=gn.area=0),Zr.forEach(Jt)}}function qt(Rr){var Zr=Rr.children;if(Zr&&Zr.length){var $r=Ue(Rr),gn=Zr.slice(),yn,tn=[];for(Wt(gn,$r.dx*$r.dy/Rr.value),tn.area=0;yn=gn.pop();)tn.push(yn),tn.area+=yn.area,yn.z!=null&&(an(tn,yn.z?$r.dx:$r.dy,$r,!gn.length),tn.length=tn.area=0);Zr.forEach(qt)}}function Er(Rr,Zr){for(var $r=Rr.area,gn,yn=0,tn=1/0,na=-1,ya=Rr.length;++na<ya;)!(gn=Rr[na].area)||(gn<tn&&(tn=gn),gn>yn&&(yn=gn));return $r*=$r,Zr*=Zr,$r?Math.max(Zr*yn*Dt/$r,$r/(Zr*tn*Dt)):1/0}function an(Rr,Zr,$r,gn){var yn=-1,tn=Rr.length,na=$r.x,ya=$r.y,Ha=Zr?Me(Rr.area/Zr):0,_a;if(Zr==$r.dx){for((gn||Ha>$r.dy)&&(Ha=$r.dy);++yn<tn;)_a=Rr[yn],_a.x=na,_a.y=ya,_a.dy=Ha,na+=_a.dx=Math.min($r.x+$r.dx-na,Ha?Me(_a.area/Ha):0);_a.z=!0,_a.dx+=$r.x+$r.dx-na,$r.y+=Ha,$r.dy-=Ha}else{for((gn||Ha>$r.dx)&&(Ha=$r.dx);++yn<tn;)_a=Rr[yn],_a.x=na,_a.y=ya,_a.dx=Ha,ya+=_a.dy=Math.min($r.y+$r.dy-ya,Ha?Me(_a.area/Ha):0);_a.z=!1,_a.dy+=$r.y+$r.dy-ya,$r.x+=Ha,$r.dx-=Ha}}function bn(Rr){var Zr=wt||ve(Rr),$r=Zr[0];return $r.x=$r.y=0,$r.value?($r.dx=Re[0],$r.dy=Re[1]):$r.dx=$r.dy=0,wt&&ve.revalue($r),Wt([$r],$r.dx*$r.dy/$r.value),(wt?qt:Jt)($r),$e&&(wt=Zr),Zr}return bn.size=function(Rr){return arguments.length?(Re=Rr,bn):Re},bn.padding=function(Rr){if(!arguments.length)return Ve;function Zr(yn){var tn=Rr.call(bn,yn,yn.depth);return tn==null?ur(yn):rr(yn,typeof tn=="number"?[tn,tn,tn,tn]:tn)}function $r(yn){return rr(yn,Rr)}var gn;return Ue=(Ve=Rr)==null?ur:(gn=typeof Rr)==="function"?Zr:(gn==="number"&&(Rr=[Rr,Rr,Rr,Rr]),$r),bn},bn.round=function(Rr){return arguments.length?(Me=Rr?Math.round:Number,bn):Me!=Number},bn.sticky=function(Rr){return arguments.length?($e=Rr,wt=null,bn):$e},bn.ratio=function(Rr){return arguments.length?(Dt=Rr,bn):Dt},bn.mode=function(Rr){return arguments.length?(gt=Rr+"",bn):gt},Yl(bn,ve)};function ur(ve){return{x:ve.x,y:ve.y,dx:ve.dx,dy:ve.dy}}function rr(ve,Me){var Re=ve.x+Me[3],Ve=ve.y+Me[0],Ue=ve.dx-Me[1]-Me[3],$e=ve.dy-Me[0]-Me[2];return Ue<0&&(Re+=Ue/2,Ue=0),$e<0&&(Ve+=$e/2,$e=0),{x:Re,y:Ve,dx:Ue,dy:$e}}u.random={normal:function(ve,Me){var Re=arguments.length;return Re<2&&(Me=1),Re<1&&(ve=0),function(){var Ve,Ue,$e;do Ve=Math.random()*2-1,Ue=Math.random()*2-1,$e=Ve*Ve+Ue*Ue;while(!$e||$e>1);return ve+Me*Ve*Math.sqrt(-2*Math.log($e)/$e)}},logNormal:function(){var ve=u.random.normal.apply(u,arguments);return function(){return Math.exp(ve())}},bates:function(ve){var Me=u.random.irwinHall(ve);return function(){return Me()/ve}},irwinHall:function(ve){return function(){for(var Me=0,Re=0;Re<ve;Re++)Me+=Math.random();return Me}}},u.scale={};function zr(ve){var Me=ve[0],Re=ve[ve.length-1];return Me<Re?[Me,Re]:[Re,Me]}function pn(ve){return ve.rangeExtent?ve.rangeExtent():zr(ve.range())}function An(ve,Me,Re,Ve){var Ue=Re(ve[0],ve[1]),$e=Ve(Me[0],Me[1]);return function(wt){return $e(Ue(wt))}}function In(ve,Me){var Re=0,Ve=ve.length-1,Ue=ve[Re],$e=ve[Ve],wt;return $e<Ue&&(wt=Re,Re=Ve,Ve=wt,wt=Ue,Ue=$e,$e=wt),ve[Re]=Me.floor(Ue),ve[Ve]=Me.ceil($e),ve}function Un(ve){return ve?{floor:function(Me){return Math.floor(Me/ve)*ve},ceil:function(Me){return Math.ceil(Me/ve)*ve}}:ea}var ea={floor:D,ceil:D};function Cn(ve,Me,Re,Ve){var Ue=[],$e=[],wt=0,gt=Math.min(ve.length,Me.length)-1;for(ve[gt]<ve[0]&&(ve=ve.slice().reverse(),Me=Me.slice().reverse());++wt<=gt;)Ue.push(Re(ve[wt-1],ve[wt])),$e.push(Ve(Me[wt-1],Me[wt]));return function(Dt){var Wt=u.bisect(ve,Dt,1,gt)-1;return $e[Wt](Ue[Wt](Dt))}}u.scale.linear=function(){return Yn([0,1],[0,1],Uo,!1)};function Yn(ve,Me,Re,Ve){var Ue,$e;function wt(){var Dt=Math.min(ve.length,Me.length)>2?Cn:An,Wt=Ve?uu:fc;return Ue=Dt(ve,Me,Wt,Re),$e=Dt(Me,ve,Wt,Uo),gt}function gt(Dt){return Ue(Dt)}return gt.invert=function(Dt){return $e(Dt)},gt.domain=function(Dt){return arguments.length?(ve=Dt.map(Number),wt()):ve},gt.range=function(Dt){return arguments.length?(Me=Dt,wt()):Me},gt.rangeRound=function(Dt){return gt.range(Dt).interpolate(Rl)},gt.clamp=function(Dt){return arguments.length?(Ve=Dt,wt()):Ve},gt.interpolate=function(Dt){return arguments.length?(Re=Dt,wt()):Re},gt.ticks=function(Dt){return $a(ve,Dt)},gt.tickFormat=function(Dt,Wt){return d3_scale_linearTickFormat(ve,Dt,Wt)},gt.nice=function(Dt){return ia(ve,Dt),wt()},gt.copy=function(){return Yn(ve,Me,Re,Ve)},wt()}function Vn(ve,Me){return u.rebind(ve,Me,"range","rangeRound","interpolate","clamp")}function ia(ve,Me){return In(ve,Un(va(ve,Me)[2])),In(ve,Un(va(ve,Me)[2])),ve}function va(ve,Me){Me==null&&(Me=10);var Re=zr(ve),Ve=Re[1]-Re[0],Ue=Math.pow(10,Math.floor(Math.log(Ve/Me)/Math.LN10)),$e=Me/Ve*Ue;return $e<=.15?Ue*=10:$e<=.35?Ue*=5:$e<=.75&&(Ue*=2),Re[0]=Math.ceil(Re[0]/Ue)*Ue,Re[1]=Math.floor(Re[1]/Ue)*Ue+Ue*.5,Re[2]=Ue,Re}function $a(ve,Me){return u.range.apply(u,va(ve,Me))}u.scale.log=function(){return Ya(u.scale.linear().domain([0,1]),10,!0,[1,10])};function Ya(ve,Me,Re,Ve){function Ue(gt){return(Re?Math.log(gt<0?0:gt):-Math.log(gt>0?0:-gt))/Math.log(Me)}function $e(gt){return Re?Math.pow(Me,gt):-Math.pow(Me,-gt)}function wt(gt){return ve(Ue(gt))}return wt.invert=function(gt){return $e(ve.invert(gt))},wt.domain=function(gt){return arguments.length?(Re=gt[0]>=0,ve.domain((Ve=gt.map(Number)).map(Ue)),wt):Ve},wt.base=function(gt){return arguments.length?(Me=+gt,ve.domain(Ve.map(Ue)),wt):Me},wt.nice=function(){var gt=In(Ve.map(Ue),Re?Math:ti);return ve.domain(gt),Ve=gt.map($e),wt},wt.ticks=function(){var gt=zr(Ve),Dt=[],Wt=gt[0],Jt=gt[1],qt=Math.floor(Ue(Wt)),Er=Math.ceil(Ue(Jt)),an=Me%1?2:Me;if(isFinite(Er-qt)){if(Re){for(;qt<Er;qt++)for(var bn=1;bn<an;bn++)Dt.push($e(qt)*bn);Dt.push($e(qt))}else for(Dt.push($e(qt));qt++<Er;)for(var bn=an-1;bn>0;bn--)Dt.push($e(qt)*bn);for(qt=0;Dt[qt]<Wt;qt++);for(Er=Dt.length;Dt[Er-1]>Jt;Er--);Dt=Dt.slice(qt,Er)}return Dt},wt.copy=function(){return Ya(ve.copy(),Me,Re,Ve)},Vn(wt,ve)}var ti={floor:function(ve){return-Math.ceil(-ve)},ceil:function(ve){return-Math.floor(-ve)}};u.scale.pow=function(){return Kt(u.scale.linear(),1,[0,1])};function Kt(ve,Me,Re){var Ve=fa(Me),Ue=fa(1/Me);function $e(wt){return ve(Ve(wt))}return $e.invert=function(wt){return Ue(ve.invert(wt))},$e.domain=function(wt){return arguments.length?(ve.domain((Re=wt.map(Number)).map(Ve)),$e):Re},$e.ticks=function(wt){return $a(Re,wt)},$e.tickFormat=function(wt,gt){return d3_scale_linearTickFormat(Re,wt,gt)},$e.nice=function(wt){return $e.domain(ia(Re,wt))},$e.exponent=function(wt){return arguments.length?(Ve=fa(Me=wt),Ue=fa(1/Me),ve.domain(Re.map(Ve)),$e):Me},$e.copy=function(){return Kt(ve.copy(),Me,Re)},Vn($e,ve)}function fa(ve){return function(Me){return Me<0?-Math.pow(-Me,ve):Math.pow(Me,ve)}}u.scale.sqrt=function(){return u.scale.pow().exponent(.5)},u.scale.ordinal=function(){return Ca([],{t:"range",a:[[]]})};function Ca(ve,Me){var Re,Ve,Ue;function $e(gt){return Ve[((Re.get(gt)||(Me.t==="range"?Re.set(gt,ve.push(gt)):NaN))-1)%Ve.length]}function wt(gt,Dt){return u.range(ve.length).map(function(Wt){return gt+Dt*Wt})}return $e.domain=function(gt){if(!arguments.length)return ve;ve=[],Re=new M;for(var Dt=-1,Wt=gt.length,Jt;++Dt<Wt;)Re.has(Jt=gt[Dt])||Re.set(Jt,ve.push(Jt));return $e[Me.t].apply($e,Me.a)},$e.range=function(gt){return arguments.length?(Ve=gt,Ue=0,Me={t:"range",a:arguments},$e):Ve},$e.rangePoints=function(gt,Dt){arguments.length<2&&(Dt=0);var Wt=gt[0],Jt=gt[1],qt=ve.length<2?(Wt=(Wt+Jt)/2,0):(Jt-Wt)/(ve.length-1+Dt);return Ve=wt(Wt+qt*Dt/2,qt),Ue=0,Me={t:"rangePoints",a:arguments},$e},$e.rangeRoundPoints=function(gt,Dt){arguments.length<2&&(Dt=0);var Wt=gt[0],Jt=gt[1],qt=ve.length<2?(Wt=Jt=Math.round((Wt+Jt)/2),0):(Jt-Wt)/(ve.length-1+Dt)|0;return Ve=wt(Wt+Math.round(qt*Dt/2+(Jt-Wt-(ve.length-1+Dt)*qt)/2),qt),Ue=0,Me={t:"rangeRoundPoints",a:arguments},$e},$e.rangeBands=function(gt,Dt,Wt){arguments.length<2&&(Dt=0),arguments.length<3&&(Wt=Dt);var Jt=gt[1]<gt[0],qt=gt[Jt-0],Er=gt[1-Jt],an=(Er-qt)/(ve.length-Dt+2*Wt);return Ve=wt(qt+an*Wt,an),Jt&&Ve.reverse(),Ue=an*(1-Dt),Me={t:"rangeBands",a:arguments},$e},$e.rangeRoundBands=function(gt,Dt,Wt){arguments.length<2&&(Dt=0),arguments.length<3&&(Wt=Dt);var Jt=gt[1]<gt[0],qt=gt[Jt-0],Er=gt[1-Jt],an=Math.floor((Er-qt)/(ve.length-Dt+2*Wt));return Ve=wt(qt+Math.round((Er-qt-(ve.length-Dt)*an)/2),an),Jt&&Ve.reverse(),Ue=Math.round(an*(1-Dt)),Me={t:"rangeRoundBands",a:arguments},$e},$e.rangeBand=function(){return Ue},$e.rangeExtent=function(){return zr(Me.a[0])},$e.copy=function(){return Ca(ve,Me)},$e.domain(ve)}u.scale.category10=function(){return u.scale.ordinal().range(qa)},u.scale.category20=function(){return u.scale.ordinal().range(Ba)},u.scale.category20b=function(){return u.scale.ordinal().range(Ui)},u.scale.category20c=function(){return u.scale.ordinal().range(Hi)};var qa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(fn),Ba=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(fn),Ui=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(fn),Hi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(fn);u.scale.quantile=function(){return Xi([],[])};function Xi(ve,Me){var Re;function Ve(){var $e=0,wt=Me.length;for(Re=[];++$e<wt;)Re[$e-1]=u.quantile(ve,$e/wt);return Ue}function Ue($e){if(!isNaN($e=+$e))return Me[u.bisect(Re,$e)]}return Ue.domain=function($e){return arguments.length?(ve=$e.map(c).filter(v).sort(o),Ve()):ve},Ue.range=function($e){return arguments.length?(Me=$e,Ve()):Me},Ue.quantiles=function(){return Re},Ue.invertExtent=function($e){return $e=Me.indexOf($e),$e<0?[NaN,NaN]:[$e>0?Re[$e-1]:ve[0],$e<Re.length?Re[$e]:ve[ve.length-1]]},Ue.copy=function(){return Xi(ve,Me)},Ve()}u.scale.quantize=function(){return zi(0,1,[0,1])};function zi(ve,Me,Re){var Ve,Ue;function $e(gt){return Re[Math.max(0,Math.min(Ue,Math.floor(Ve*(gt-ve))))]}function wt(){return Ve=Re.length/(Me-ve),Ue=Re.length-1,$e}return $e.domain=function(gt){return arguments.length?(ve=+gt[0],Me=+gt[gt.length-1],wt()):[ve,Me]},$e.range=function(gt){return arguments.length?(Re=gt,wt()):Re},$e.invertExtent=function(gt){return gt=Re.indexOf(gt),gt=gt<0?NaN:gt/Ve+ve,[gt,gt+1/Ve]},$e.copy=function(){return zi(ve,Me,Re)},wt()}u.scale.threshold=function(){return ki([.5],[0,1])};function ki(ve,Me){function Re(Ve){if(Ve<=Ve)return Me[u.bisect(ve,Ve)]}return Re.domain=function(Ve){return arguments.length?(ve=Ve,Re):ve},Re.range=function(Ve){return arguments.length?(Me=Ve,Re):Me},Re.invertExtent=function(Ve){return Ve=Me.indexOf(Ve),[ve[Ve-1],ve[Ve]]},Re.copy=function(){return ki(ve,Me)},Re}u.scale.identity=function(){return fs([0,1])};function fs(ve){function Me(Re){return+Re}return Me.invert=Me,Me.domain=Me.range=function(Re){return arguments.length?(ve=Re.map(Me),Me):ve},Me.ticks=function(Re){return $a(ve,Re)},Me.tickFormat=function(Re,Ve){return d3_scale_linearTickFormat(ve,Re,Ve)},Me.copy=function(){return fs(ve)},Me}u.svg={};function Vo(){return 0}u.svg.arc=function(){var ve=Fa,Me=Li,Re=Vo,Ve=di,Ue=$o,$e=ss,wt=nl;function gt(){var Wt=Math.max(0,+ve.apply(this,arguments)),Jt=Math.max(0,+Me.apply(this,arguments)),qt=Ue.apply(this,arguments)-ht,Er=$e.apply(this,arguments)-ht,an=Math.abs(Er-qt),bn=qt>Er?0:1;if(Jt<Wt&&(Rr=Jt,Jt=Wt,Wt=Rr),an>=it)return Dt(Jt,bn)+(Wt?Dt(Wt,1-bn):"")+"Z";var Rr,Zr,$r,gn,yn=0,tn=0,na,ya,Ha,_a,Xa,Sa,ma,Ja,gi=[];if((gn=(+wt.apply(this,arguments)||0)/2)&&($r=Ve===di?Math.sqrt(Wt*Wt+Jt*Jt):+Ve.apply(this,arguments),bn||(tn*=-1),Jt&&(tn=$t($r/Jt*Math.sin(gn))),Wt&&(yn=$t($r/Wt*Math.sin(gn)))),Jt){na=Jt*Math.cos(qt+tn),ya=Jt*Math.sin(qt+tn),Ha=Jt*Math.cos(Er-tn),_a=Jt*Math.sin(Er-tn);var Ii=Math.abs(Er-qt-2*tn)<=Pe?0:1;if(tn&&Ol(na,ya,Ha,_a)===bn^Ii){var Xo=(qt+Er)/2;na=Jt*Math.cos(Xo),ya=Jt*Math.sin(Xo),Ha=_a=null}}else na=ya=0;if(Wt){Xa=Wt*Math.cos(Er-yn),Sa=Wt*Math.sin(Er-yn),ma=Wt*Math.cos(qt+yn),Ja=Wt*Math.sin(qt+yn);var go=Math.abs(qt-Er+2*yn)<=Pe?0:1;if(yn&&Ol(Xa,Sa,ma,Ja)===1-bn^go){var Ra=(qt+Er)/2;Xa=Wt*Math.cos(Ra),Sa=Wt*Math.sin(Ra),ma=Ja=null}}else Xa=Sa=0;if(an>dt&&(Rr=Math.min(Math.abs(Jt-Wt)/2,+Re.apply(this,arguments)))>.001){Zr=Wt<Jt^bn?0:1;var fi=Rr,pi=Rr;if(an<Pe){var Gi=ma==null?[Xa,Sa]:Ha==null?[na,ya]:La([na,ya],[ma,Ja],[Ha,_a],[Xa,Sa]),Si=na-Gi[0],Go=ya-Gi[1],Do=Ha-Gi[0],ao=_a-Gi[1],ts=1/Math.sin(Math.acos((Si*Do+Go*ao)/(Math.sqrt(Si*Si+Go*Go)*Math.sqrt(Do*Do+ao*ao)))/2),ms=Math.sqrt(Gi[0]*Gi[0]+Gi[1]*Gi[1]);pi=Math.min(Rr,(Wt-ms)/(ts-1)),fi=Math.min(Rr,(Jt-ms)/(ts+1))}if(Ha!=null){var Is=Ps(ma==null?[Xa,Sa]:[ma,Ja],[na,ya],Jt,fi,bn),xo=Ps([Ha,_a],[Xa,Sa],Jt,fi,bn);Rr===fi?gi.push("M",Is[0],"A",fi,",",fi," 0 0,",Zr," ",Is[1],"A",Jt,",",Jt," 0 ",1-bn^Ol(Is[1][0],Is[1][1],xo[1][0],xo[1][1]),",",bn," ",xo[1],"A",fi,",",fi," 0 0,",Zr," ",xo[0]):gi.push("M",Is[0],"A",fi,",",fi," 0 1,",Zr," ",xo[0])}else gi.push("M",na,",",ya);if(ma!=null){var bo=Ps([na,ya],[ma,Ja],Wt,-pi,bn),ei=Ps([Xa,Sa],Ha==null?[na,ya]:[Ha,_a],Wt,-pi,bn);Rr===pi?gi.push("L",ei[0],"A",pi,",",pi," 0 0,",Zr," ",ei[1],"A",Wt,",",Wt," 0 ",bn^Ol(ei[1][0],ei[1][1],bo[1][0],bo[1][1]),",",1-bn," ",bo[1],"A",pi,",",pi," 0 0,",Zr," ",bo[0]):gi.push("L",ei[0],"A",pi,",",pi," 0 0,",Zr," ",bo[0])}else gi.push("L",Xa,",",Sa)}else gi.push("M",na,",",ya),Ha!=null&&gi.push("A",Jt,",",Jt," 0 ",Ii,",",bn," ",Ha,",",_a),gi.push("L",Xa,",",Sa),ma!=null&&gi.push("A",Wt,",",Wt," 0 ",go,",",1-bn," ",ma,",",Ja);return gi.push("Z"),gi.join("")}function Dt(Wt,Jt){return"M0,"+Wt+"A"+Wt+","+Wt+" 0 1,"+Jt+" 0,"+-Wt+"A"+Wt+","+Wt+" 0 1,"+Jt+" 0,"+Wt}return gt.innerRadius=function(Wt){return arguments.length?(ve=st(Wt),gt):ve},gt.outerRadius=function(Wt){return arguments.length?(Me=st(Wt),gt):Me},gt.cornerRadius=function(Wt){return arguments.length?(Re=st(Wt),gt):Re},gt.padRadius=function(Wt){return arguments.length?(Ve=Wt==di?di:st(Wt),gt):Ve},gt.startAngle=function(Wt){return arguments.length?(Ue=st(Wt),gt):Ue},gt.endAngle=function(Wt){return arguments.length?($e=st(Wt),gt):$e},gt.padAngle=function(Wt){return arguments.length?(wt=st(Wt),gt):wt},gt.centroid=function(){var Wt=(+ve.apply(this,arguments)+ +Me.apply(this,arguments))/2,Jt=(+Ue.apply(this,arguments)+ +$e.apply(this,arguments))/2-ht;return[Math.cos(Jt)*Wt,Math.sin(Jt)*Wt]},gt};var di="auto";function Fa(ve){return ve.innerRadius}function Li(ve){return ve.outerRadius}function $o(ve){return ve.startAngle}function ss(ve){return ve.endAngle}function nl(ve){return ve&&ve.padAngle}function Ol(ve,Me,Re,Ve){return(ve-Re)*Me-(Me-Ve)*ve>0?0:1}function Ps(ve,Me,Re,Ve,Ue){var $e=ve[0]-Me[0],wt=ve[1]-Me[1],gt=(Ue?Ve:-Ve)/Math.sqrt($e*$e+wt*wt),Dt=gt*wt,Wt=-gt*$e,Jt=ve[0]+Dt,qt=ve[1]+Wt,Er=Me[0]+Dt,an=Me[1]+Wt,bn=(Jt+Er)/2,Rr=(qt+an)/2,Zr=Er-Jt,$r=an-qt,gn=Zr*Zr+$r*$r,yn=Re-Ve,tn=Jt*an-Er*qt,na=($r<0?-1:1)*Math.sqrt(Math.max(0,yn*yn*gn-tn*tn)),ya=(tn*$r-Zr*na)/gn,Ha=(-tn*Zr-$r*na)/gn,_a=(tn*$r+Zr*na)/gn,Xa=(-tn*Zr+$r*na)/gn,Sa=ya-bn,ma=Ha-Rr,Ja=_a-bn,gi=Xa-Rr;return Sa*Sa+ma*ma>Ja*Ja+gi*gi&&(ya=_a,Ha=Xa),[[ya-Dt,Ha-Wt],[ya*Re/yn,Ha*Re/yn]]}function ws(){return!0}function xl(ve){var Me=Oa,Re=wr,Ve=ws,Ue=cs,$e=Ue.key,wt=.7;function gt(Dt){var Wt=[],Jt=[],qt=-1,Er=Dt.length,an,bn=st(Me),Rr=st(Re);function Zr(){Wt.push("M",Ue(ve(Jt),wt))}for(;++qt<Er;)Ve.call(this,an=Dt[qt],qt)?Jt.push([+bn.call(this,an,qt),+Rr.call(this,an,qt)]):Jt.length&&(Zr(),Jt=[]);return Jt.length&&Zr(),Wt.length?Wt.join(""):null}return gt.x=function(Dt){return arguments.length?(Me=Dt,gt):Me},gt.y=function(Dt){return arguments.length?(Re=Dt,gt):Re},gt.defined=function(Dt){return arguments.length?(Ve=Dt,gt):Ve},gt.interpolate=function(Dt){return arguments.length?(typeof Dt=="function"?$e=Ue=Dt:$e=(Ue=al.get(Dt)||cs).key,gt):$e},gt.tension=function(Dt){return arguments.length?(wt=Dt,gt):wt},gt}u.svg.line=function(){return xl(D)};var al=u.map({linear:cs,"linear-closed":af,step:Tf,"step-before":vs,"step-after":Bf,basis:Nl,"basis-open":Cc,"basis-closed":Hf,bundle:Vf,cardinal:hc,"cardinal-open":of,"cardinal-closed":jl,monotone:je});al.forEach(function(ve,Me){Me.key=ve,Me.closed=/-closed$/.test(ve)});function cs(ve){return ve.length>1?ve.join("L"):ve+"Z"}function af(ve){return ve.join("L")+"Z"}function Tf(ve){for(var Me=0,Re=ve.length,Ve=ve[0],Ue=[Ve[0],",",Ve[1]];++Me<Re;)Ue.push("H",(Ve[0]+(Ve=ve[Me])[0])/2,"V",Ve[1]);return Re>1&&Ue.push("H",Ve[0]),Ue.join("")}function vs(ve){for(var Me=0,Re=ve.length,Ve=ve[0],Ue=[Ve[0],",",Ve[1]];++Me<Re;)Ue.push("V",(Ve=ve[Me])[1],"H",Ve[0]);return Ue.join("")}function Bf(ve){for(var Me=0,Re=ve.length,Ve=ve[0],Ue=[Ve[0],",",Ve[1]];++Me<Re;)Ue.push("H",(Ve=ve[Me])[0],"V",Ve[1]);return Ue.join("")}function of(ve,Me){return ve.length<4?cs(ve):ve[1]+Uf(ve.slice(1,-1),vc(ve,Me))}function jl(ve,Me){return ve.length<3?af(ve):ve[0]+Uf((ve.push(ve[0]),ve),vc([ve[ve.length-2]].concat(ve,[ve[1]]),Me))}function hc(ve,Me){return ve.length<3?cs(ve):ve[0]+Uf(ve,vc(ve,Me))}function Uf(ve,Me){if(Me.length<1||ve.length!=Me.length&&ve.length!=Me.length+2)return cs(ve);var Re=ve.length!=Me.length,Ve="",Ue=ve[0],$e=ve[1],wt=Me[0],gt=wt,Dt=1;if(Re&&(Ve+="Q"+($e[0]-wt[0]*2/3)+","+($e[1]-wt[1]*2/3)+","+$e[0]+","+$e[1],Ue=ve[1],Dt=2),Me.length>1){gt=Me[1],$e=ve[Dt],Dt++,Ve+="C"+(Ue[0]+wt[0])+","+(Ue[1]+wt[1])+","+($e[0]-gt[0])+","+($e[1]-gt[1])+","+$e[0]+","+$e[1];for(var Wt=2;Wt<Me.length;Wt++,Dt++)$e=ve[Dt],gt=Me[Wt],Ve+="S"+($e[0]-gt[0])+","+($e[1]-gt[1])+","+$e[0]+","+$e[1]}if(Re){var Jt=ve[Dt];Ve+="Q"+($e[0]+gt[0]*2/3)+","+($e[1]+gt[1]*2/3)+","+Jt[0]+","+Jt[1]}return Ve}function vc(ve,Me){for(var Re=[],Ve=(1-Me)/2,Ue,$e=ve[0],wt=ve[1],gt=1,Dt=ve.length;++gt<Dt;)Ue=$e,$e=wt,wt=ve[gt],Re.push([Ve*(wt[0]-Ue[0]),Ve*(wt[1]-Ue[1])]);return Re}function Nl(ve){if(ve.length<3)return cs(ve);var Me=1,Re=ve.length,Ve=ve[0],Ue=Ve[0],$e=Ve[1],wt=[Ue,Ue,Ue,(Ve=ve[1])[0]],gt=[$e,$e,$e,Ve[1]],Dt=[Ue,",",$e,"L",Rs(Ds,wt),",",Rs(Ds,gt)];for(ve.push(ve[Re-1]);++Me<=Re;)Ve=ve[Me],wt.shift(),wt.push(Ve[0]),gt.shift(),gt.push(Ve[1]),Uu(Dt,wt,gt);return ve.pop(),Dt.push("L",Ve),Dt.join("")}function Cc(ve){if(ve.length<4)return cs(ve);for(var Me=[],Re=-1,Ve=ve.length,Ue,$e=[0],wt=[0];++Re<3;)Ue=ve[Re],$e.push(Ue[0]),wt.push(Ue[1]);for(Me.push(Rs(Ds,$e)+","+Rs(Ds,wt)),--Re;++Re<Ve;)Ue=ve[Re],$e.shift(),$e.push(Ue[0]),wt.shift(),wt.push(Ue[1]),Uu(Me,$e,wt);return Me.join("")}function Hf(ve){for(var Me,Re=-1,Ve=ve.length,Ue=Ve+4,$e,wt=[],gt=[];++Re<4;)$e=ve[Re%Ve],wt.push($e[0]),gt.push($e[1]);for(Me=[Rs(Ds,wt),",",Rs(Ds,gt)],--Re;++Re<Ue;)$e=ve[Re%Ve],wt.shift(),wt.push($e[0]),gt.shift(),gt.push($e[1]),Uu(Me,wt,gt);return Me.join("")}function Vf(ve,Me){var Re=ve.length-1;if(Re)for(var Ve=ve[0][0],Ue=ve[0][1],$e=ve[Re][0]-Ve,wt=ve[Re][1]-Ue,gt=-1,Dt,Wt;++gt<=Re;)Dt=ve[gt],Wt=gt/Re,Dt[0]=Me*Dt[0]+(1-Me)*(Ve+Wt*$e),Dt[1]=Me*Dt[1]+(1-Me)*(Ue+Wt*wt);return Nl(ve)}function Rs(ve,Me){return ve[0]*Me[0]+ve[1]*Me[1]+ve[2]*Me[2]+ve[3]*Me[3]}var pc=[0,2/3,1/3,0],dc=[0,1/3,2/3,0],Ds=[0,1/6,2/3,1/6];function Uu(ve,Me,Re){ve.push("C",Rs(pc,Me),",",Rs(pc,Re),",",Rs(dc,Me),",",Rs(dc,Re),",",Rs(Ds,Me),",",Rs(Ds,Re))}function Gf(ve,Me){return(Me[1]-ve[1])/(Me[0]-ve[0])}function Wf(ve){for(var Me=0,Re=ve.length-1,Ve=[],Ue=ve[0],$e=ve[1],wt=Ve[0]=Gf(Ue,$e);++Me<Re;)Ve[Me]=(wt+(wt=Gf(Ue=$e,$e=ve[Me+1])))/2;return Ve[Me]=wt,Ve}function Oe(ve){for(var Me=[],Re,Ve,Ue,$e,wt=Wf(ve),gt=-1,Dt=ve.length-1;++gt<Dt;)Re=Gf(ve[gt],ve[gt+1]),g(Re)<dt?wt[gt]=wt[gt+1]=0:(Ve=wt[gt]/Re,Ue=wt[gt+1]/Re,$e=Ve*Ve+Ue*Ue,$e>9&&($e=Re*3/Math.sqrt($e),wt[gt]=$e*Ve,wt[gt+1]=$e*Ue));for(gt=-1;++gt<=Dt;)$e=(ve[Math.min(Dt,gt+1)][0]-ve[Math.max(0,gt-1)][0])/(6*(1+wt[gt]*wt[gt])),Me.push([$e||0,wt[gt]*$e||0]);return Me}function je(ve){return ve.length<3?cs(ve):ve[0]+Uf(ve,Oe(ve))}u.svg.line.radial=function(){var ve=xl(ot);return ve.radius=ve.x,delete ve.x,ve.angle=ve.y,delete ve.y,ve};function ot(ve){for(var Me,Re=-1,Ve=ve.length,Ue,$e;++Re<Ve;)Me=ve[Re],Ue=Me[0],$e=Me[1]-ht,Me[0]=Ue*Math.cos($e),Me[1]=Ue*Math.sin($e);return ve}function ft(ve){var Me=Oa,Re=Oa,Ve=0,Ue=wr,$e=ws,wt=cs,gt=wt.key,Dt=wt,Wt="L",Jt=.7;function qt(Er){var an=[],bn=[],Rr=[],Zr=-1,$r=Er.length,gn,yn=st(Me),tn=st(Ve),na=Me===Re?function(){return Ha}:st(Re),ya=Ve===Ue?function(){return _a}:st(Ue),Ha,_a;function Xa(){an.push("M",wt(ve(Rr),Jt),Wt,Dt(ve(bn.reverse()),Jt),"Z")}for(;++Zr<$r;)$e.call(this,gn=Er[Zr],Zr)?(bn.push([Ha=+yn.call(this,gn,Zr),_a=+tn.call(this,gn,Zr)]),Rr.push([+na.call(this,gn,Zr),+ya.call(this,gn,Zr)])):bn.length&&(Xa(),bn=[],Rr=[]);return bn.length&&Xa(),an.length?an.join(""):null}return qt.x=function(Er){return arguments.length?(Me=Re=Er,qt):Re},qt.x0=function(Er){return arguments.length?(Me=Er,qt):Me},qt.x1=function(Er){return arguments.length?(Re=Er,qt):Re},qt.y=function(Er){return arguments.length?(Ve=Ue=Er,qt):Ue},qt.y0=function(Er){return arguments.length?(Ve=Er,qt):Ve},qt.y1=function(Er){return arguments.length?(Ue=Er,qt):Ue},qt.defined=function(Er){return arguments.length?($e=Er,qt):$e},qt.interpolate=function(Er){return arguments.length?(typeof Er=="function"?gt=wt=Er:gt=(wt=al.get(Er)||cs).key,Dt=wt.reverse||wt,Wt=wt.closed?"M":"L",qt):gt},qt.tension=function(Er){return arguments.length?(Jt=Er,qt):Jt},qt}vs.reverse=Bf,Bf.reverse=vs,u.svg.area=function(){return ft(D)},u.svg.area.radial=function(){var ve=ft(ot);return ve.radius=ve.x,delete ve.x,ve.innerRadius=ve.x0,delete ve.x0,ve.outerRadius=ve.x1,delete ve.x1,ve.angle=ve.y,delete ve.y,ve.startAngle=ve.y0,delete ve.y0,ve.endAngle=ve.y1,delete ve.y1,ve};function St(ve){return ve.source}function Tt(ve){return ve.target}u.svg.chord=function(){var ve=St,Me=Tt,Re=Et,Ve=$o,Ue=ss;function $e(Jt,qt){var Er=wt(this,ve,Jt,qt),an=wt(this,Me,Jt,qt);return"M"+Er.p0+Dt(Er.r,Er.p1,Er.a1-Er.a0)+(gt(Er,an)?Wt(Er.r,Er.p1,Er.r,Er.p0):Wt(Er.r,Er.p1,an.r,an.p0)+Dt(an.r,an.p1,an.a1-an.a0)+Wt(an.r,an.p1,Er.r,Er.p0))+"Z"}function wt(Jt,qt,Er,an){var bn=qt.call(Jt,Er,an),Rr=Re.call(Jt,bn,an),Zr=Ve.call(Jt,bn,an)-ht,$r=Ue.call(Jt,bn,an)-ht;return{r:Rr,a0:Zr,a1:$r,p0:[Rr*Math.cos(Zr),Rr*Math.sin(Zr)],p1:[Rr*Math.cos($r),Rr*Math.sin($r)]}}function gt(Jt,qt){return Jt.a0==qt.a0&&Jt.a1==qt.a1}function Dt(Jt,qt,Er){return"A"+Jt+","+Jt+" 0 "+ +(Er>Pe)+",1 "+qt}function Wt(Jt,qt,Er,an){return"Q 0,0 "+an}return $e.radius=function(Jt){return arguments.length?(Re=st(Jt),$e):Re},$e.source=function(Jt){return arguments.length?(ve=st(Jt),$e):ve},$e.target=function(Jt){return arguments.length?(Me=st(Jt),$e):Me},$e.startAngle=function(Jt){return arguments.length?(Ve=st(Jt),$e):Ve},$e.endAngle=function(Jt){return arguments.length?(Ue=st(Jt),$e):Ue},$e};function Et(ve){return ve.radius}u.svg.diagonal=function(){var ve=St,Me=Tt,Re=or;function Ve(Ue,$e){var wt=ve.call(this,Ue,$e),gt=Me.call(this,Ue,$e),Dt=(wt.y+gt.y)/2,Wt=[wt,{x:wt.x,y:Dt},{x:gt.x,y:Dt},gt];return Wt=Wt.map(Re),"M"+Wt[0]+"C"+Wt[1]+" "+Wt[2]+" "+Wt[3]}return Ve.source=function(Ue){return arguments.length?(ve=st(Ue),Ve):ve},Ve.target=function(Ue){return arguments.length?(Me=st(Ue),Ve):Me},Ve.projection=function(Ue){return arguments.length?(Re=Ue,Ve):Re},Ve};function or(ve){return[ve.x,ve.y]}u.svg.diagonal.radial=function(){var ve=u.svg.diagonal(),Me=or,Re=ve.projection;return ve.projection=function(Ve){return arguments.length?Re(vr(Me=Ve)):Me},ve};function vr(ve){return function(){var Me=ve.apply(this,arguments),Re=Me[0],Ve=Me[1]-ht;return[Re*Math.cos(Ve),Re*Math.sin(Ve)]}}u.svg.symbol=function(){var ve=gr,Me=nr;function Re(Ve,Ue){return(Kr.get(ve.call(this,Ve,Ue))||Or)(Me.call(this,Ve,Ue))}return Re.type=function(Ve){return arguments.length?(ve=st(Ve),Re):ve},Re.size=function(Ve){return arguments.length?(Me=st(Ve),Re):Me},Re};function nr(){return 64}function gr(){return"circle"}function Or(ve){var Me=Math.sqrt(ve/Pe);return"M0,"+Me+"A"+Me+","+Me+" 0 1,1 0,"+-Me+"A"+Me+","+Me+" 0 1,1 0,"+Me+"Z"}var Kr=u.map({circle:Or,cross:function(ve){var Me=Math.sqrt(ve/5)/2;return"M"+-3*Me+","+-Me+"H"+-Me+"V"+-3*Me+"H"+Me+"V"+-Me+"H"+3*Me+"V"+Me+"H"+Me+"V"+3*Me+"H"+-Me+"V"+Me+"H"+-3*Me+"Z"},diamond:function(ve){var Me=Math.sqrt(ve/(2*Ln)),Re=Me*Ln;return"M0,"+-Me+"L"+Re+",0 0,"+Me+" "+-Re+",0Z"},square:function(ve){var Me=Math.sqrt(ve)/2;return"M"+-Me+","+-Me+"L"+Me+","+-Me+" "+Me+","+Me+" "+-Me+","+Me+"Z"},"triangle-down":function(ve){var Me=Math.sqrt(ve/cn),Re=Me*cn/2;return"M0,"+Re+"L"+Me+","+-Re+" "+-Me+","+-Re+"Z"},"triangle-up":function(ve){var Me=Math.sqrt(ve/cn),Re=Me*cn/2;return"M0,"+-Re+"L"+Me+","+Re+" "+-Me+","+Re+"Z"}});u.svg.symbolTypes=Kr.keys();var cn=Math.sqrt(3),Ln=Math.tan(30*zt);te.transition=function(ve){for(var Me=si||++ci,Re=xi(ve),Ve=[],Ue,$e,wt=hi||{time:Date.now(),ease:El,delay:0,duration:250},gt=-1,Dt=this.length;++gt<Dt;){Ve.push(Ue=[]);for(var Wt=this[gt],Jt=-1,qt=Wt.length;++Jt<qt;)($e=Wt[Jt])&&Po($e,Jt,Re,Me,wt),Ue.push($e)}return Ua(Ve,Re,Me)},te.interrupt=function(ve){return this.each(ve==null?zn:oa(xi(ve)))};var zn=oa(xi());function oa(ve){return function(){var Me,Re,Ve;(Me=this[ve])&&(Ve=Me[Re=Me.active])&&(Ve.timer.c=null,Ve.timer.t=NaN,--Me.count?delete Me[Re]:delete this[ve],Me.active+=.5,Ve.event&&Ve.event.interrupt.call(this,this.__data__,Ve.index))}}function Ua(ve,Me,Re){return fe(ve,Pa),ve.namespace=Me,ve.id=Re,ve}var Pa=[],ci=0,si,hi;Pa.call=te.call,Pa.empty=te.empty,Pa.node=te.node,Pa.size=te.size,u.transition=function(ve,Me){return ve&&ve.transition?si?ve.transition(Me):ve:u.selection().transition(ve)},u.transition.prototype=Pa,Pa.select=function(ve){var Me=this.id,Re=this.namespace,Ve=[],Ue,$e,wt;ve=K(ve);for(var gt=-1,Dt=this.length;++gt<Dt;){Ve.push(Ue=[]);for(var Wt=this[gt],Jt=-1,qt=Wt.length;++Jt<qt;)(wt=Wt[Jt])&&($e=ve.call(wt,wt.__data__,Jt,gt))?("__data__"in wt&&($e.__data__=wt.__data__),Po($e,Jt,Re,Me,wt[Re][Me]),Ue.push($e)):Ue.push(null)}return Ua(Ve,Re,Me)},Pa.selectAll=function(ve){var Me=this.id,Re=this.namespace,Ve=[],Ue,$e,wt,gt,Dt;ve=$(ve);for(var Wt=-1,Jt=this.length;++Wt<Jt;)for(var qt=this[Wt],Er=-1,an=qt.length;++Er<an;)if(wt=qt[Er]){Dt=wt[Re][Me],$e=ve.call(wt,wt.__data__,Er,Wt),Ve.push(Ue=[]);for(var bn=-1,Rr=$e.length;++bn<Rr;)(gt=$e[bn])&&Po(gt,bn,Re,Me,Dt),Ue.push(gt)}return Ua(Ve,Re,Me)},Pa.filter=function(ve){var Me=[],Re,Ve,Ue;typeof ve!="function"&&(ve=Te(ve));for(var $e=0,wt=this.length;$e<wt;$e++){Me.push(Re=[]);for(var Ve=this[$e],gt=0,Dt=Ve.length;gt<Dt;gt++)(Ue=Ve[gt])&&ve.call(Ue,Ue.__data__,gt,$e)&&Re.push(Ue)}return Ua(Me,this.namespace,this.id)},Pa.tween=function(ve,Me){var Re=this.id,Ve=this.namespace;return arguments.length<2?this.node()[Ve][Re].tween.get(ve):Ze(this,Me==null?function(Ue){Ue[Ve][Re].tween.remove(ve)}:function(Ue){Ue[Ve][Re].tween.set(ve,Me)})};function Ri(ve,Me,Re,Ve){var Ue=ve.id,$e=ve.namespace;return Ze(ve,typeof Re=="function"?function(wt,gt,Dt){wt[$e][Ue].tween.set(Me,Ve(Re.call(wt,wt.__data__,gt,Dt)))}:(Re=Ve(Re),function(wt){wt[$e][Ue].tween.set(Me,Re)}))}Pa.attr=function(ve,Me){if(arguments.length<2){for(Me in ve)this.attr(Me,ve[Me]);return this}var Re=ve=="transform"?tf:Uo,Ve=u.ns.qualify(ve);function Ue(){this.removeAttribute(Ve)}function $e(){this.removeAttributeNS(Ve.space,Ve.local)}function wt(Dt){return Dt==null?Ue:(Dt+="",function(){var Wt=this.getAttribute(Ve),Jt;return Wt!==Dt&&(Jt=Re(Wt,Dt),function(qt){this.setAttribute(Ve,Jt(qt))})})}function gt(Dt){return Dt==null?$e:(Dt+="",function(){var Wt=this.getAttributeNS(Ve.space,Ve.local),Jt;return Wt!==Dt&&(Jt=Re(Wt,Dt),function(qt){this.setAttributeNS(Ve.space,Ve.local,Jt(qt))})})}return Ri(this,"attr."+ve,Me,Ve.local?gt:wt)},Pa.attrTween=function(ve,Me){var Re=u.ns.qualify(ve);function Ve($e,wt){var gt=Me.call(this,$e,wt,this.getAttribute(Re));return gt&&function(Dt){this.setAttribute(Re,gt(Dt))}}function Ue($e,wt){var gt=Me.call(this,$e,wt,this.getAttributeNS(Re.space,Re.local));return gt&&function(Dt){this.setAttributeNS(Re.space,Re.local,gt(Dt))}}return this.tween("attr."+ve,Re.local?Ue:Ve)},Pa.style=function(ve,Me,Re){var Ve=arguments.length;if(Ve<3){if(typeof ve!="string"){Ve<2&&(Me="");for(Re in ve)this.style(Re,ve[Re],Me);return this}Re=""}function Ue(){this.style.removeProperty(ve)}function $e(wt){return wt==null?Ue:(wt+="",function(){var gt=i(this).getComputedStyle(this,null).getPropertyValue(ve),Dt;return gt!==wt&&(Dt=Uo(gt,wt),function(Wt){this.style.setProperty(ve,Dt(Wt),Re)})})}return Ri(this,"style."+ve,Me,$e)},Pa.styleTween=function(ve,Me,Re){arguments.length<3&&(Re="");function Ve(Ue,$e){var wt=Me.call(this,Ue,$e,i(this).getComputedStyle(this,null).getPropertyValue(ve));return wt&&function(gt){this.style.setProperty(ve,wt(gt),Re)}}return this.tween("style."+ve,Ve)},Pa.text=function(ve){return Ri(this,"text",ve,Vi)};function Vi(ve){return ve==null&&(ve=""),function(){this.textContent=ve}}Pa.remove=function(){var ve=this.namespace;return this.each("end.transition",function(){var Me;this[ve].count<2&&(Me=this.parentNode)&&Me.removeChild(this)})},Pa.ease=function(ve){var Me=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Me].ease:(typeof ve!="function"&&(ve=u.ease.apply(u,arguments)),Ze(this,function(Ve){Ve[Re][Me].ease=ve}))},Pa.delay=function(ve){var Me=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Me].delay:Ze(this,typeof ve=="function"?function(Ve,Ue,$e){Ve[Re][Me].delay=+ve.call(Ve,Ve.__data__,Ue,$e)}:(ve=+ve,function(Ve){Ve[Re][Me].delay=ve}))},Pa.duration=function(ve){var Me=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Me].duration:Ze(this,typeof ve=="function"?function(Ve,Ue,$e){Ve[Re][Me].duration=Math.max(1,ve.call(Ve,Ve.__data__,Ue,$e))}:(ve=Math.max(1,ve),function(Ve){Ve[Re][Me].duration=ve}))},Pa.each=function(ve,Me){var Re=this.id,Ve=this.namespace;if(arguments.length<2){var Ue=hi,$e=si;try{si=Re,Ze(this,function(wt,gt,Dt){hi=wt[Ve][Re],ve.call(wt,wt.__data__,gt,Dt)})}finally{hi=Ue,si=$e}}else Ze(this,function(wt){var gt=wt[Ve][Re];(gt.event||(gt.event=u.dispatch("start","end","interrupt"))).on(ve,Me)});return this},Pa.transition=function(){for(var ve=this.id,Me=++ci,Re=this.namespace,Ve=[],Ue,$e,wt,gt,Dt=0,Wt=this.length;Dt<Wt;Dt++){Ve.push(Ue=[]);for(var $e=this[Dt],Jt=0,qt=$e.length;Jt<qt;Jt++)(wt=$e[Jt])&&(gt=wt[Re][ve],Po(wt,Jt,Re,Me,{time:gt.time,ease:gt.ease,delay:gt.delay+gt.duration,duration:gt.duration})),Ue.push(wt)}return Ua(Ve,Re,Me)};function xi(ve){return ve==null?"__transition__":"__transition_"+ve+"__"}function Po(ve,Me,Re,Ve,Ue){var $e=ve[Re]||(ve[Re]={active:0,count:0}),wt=$e[Ve],gt,Dt,Wt,Jt,qt;function Er(Rr){var Zr=wt.delay;if(Dt.t=Zr+gt,Zr<=Rr)return an(Rr-Zr);Dt.c=an}function an(Rr){var Zr=$e.active,$r=$e[Zr];$r&&($r.timer.c=null,$r.timer.t=NaN,--$e.count,delete $e[Zr],$r.event&&$r.event.interrupt.call(ve,ve.__data__,$r.index));for(var gn in $e)if(+gn<Ve){var yn=$e[gn];yn.timer.c=null,yn.timer.t=NaN,--$e.count,delete $e[gn]}Dt.c=bn,Hn(function(){return Dt.c&&bn(Rr||1)&&(Dt.c=null,Dt.t=NaN),1},0,gt),$e.active=Ve,wt.event&&wt.event.start.call(ve,ve.__data__,Me),qt=[],wt.tween.forEach(function(tn,na){(na=na.call(ve,ve.__data__,Me))&&qt.push(na)}),Jt=wt.ease,Wt=wt.duration}function bn(Rr){for(var Zr=Rr/Wt,$r=Jt(Zr),gn=qt.length;gn>0;)qt[--gn].call(ve,$r);if(Zr>=1)return wt.event&&wt.event.end.call(ve,ve.__data__,Me),--$e.count?delete $e[Ve]:delete ve[Re],1}wt||(gt=Ue.time,Dt=Hn(Er,0,gt),wt=$e[Ve]={tween:new M,time:gt,timer:Dt,delay:Ue.delay,duration:Ue.duration,ease:Ue.ease,index:Me},Ue=null,++$e.count)}u.svg.axis=function(){var ve=u.scale.linear(),Me=qo,Re=6,Ve=6,Ue=3,$e=[10],wt=null,gt;function Dt(Wt){Wt.each(function(){var Jt=u.select(this),qt=this.__chart__||ve,Er=this.__chart__=ve.copy(),an=wt==null?Er.ticks?Er.ticks.apply(Er,$e):Er.domain():wt,bn=gt==null?Er.tickFormat?Er.tickFormat.apply(Er,$e):D:gt,Rr=Jt.selectAll(".tick").data(an,Er),Zr=Rr.enter().insert("g",".domain").attr("class","tick").style("opacity",dt),$r=u.transition(Rr.exit()).style("opacity",dt).remove(),gn=u.transition(Rr.order()).style("opacity",1),yn=Math.max(Re,0)+Ue,tn,na=pn(Er),ya=Jt.selectAll(".domain").data([0]),Ha=(ya.enter().append("path").attr("class","domain"),u.transition(ya));Zr.append("line"),Zr.append("text");var _a=Zr.select("line"),Xa=gn.select("line"),Sa=Rr.select("text").text(bn),ma=Zr.select("text"),Ja=gn.select("text"),gi=Me==="top"||Me==="left"?-1:1,Ii,Xo,go,Ra;if(Me==="bottom"||Me==="top"?(tn=Ni,Ii="x",go="y",Xo="x2",Ra="y2",Sa.attr("dy",gi<0?"0em":".71em").style("text-anchor","middle"),Ha.attr("d","M"+na[0]+","+gi*Ve+"V0H"+na[1]+"V"+gi*Ve)):(tn=eo,Ii="y",go="x",Xo="y2",Ra="x2",Sa.attr("dy",".32em").style("text-anchor",gi<0?"end":"start"),Ha.attr("d","M"+gi*Ve+","+na[0]+"H0V"+na[1]+"H"+gi*Ve)),_a.attr(Ra,gi*Re),ma.attr(go,gi*yn),Xa.attr(Xo,0).attr(Ra,gi*Re),Ja.attr(Ii,0).attr(go,gi*yn),Er.rangeBand){var fi=Er,pi=fi.rangeBand()/2;qt=Er=function(Gi){return fi(Gi)+pi}}else qt.rangeBand?qt=Er:$r.call(tn,Er,qt);Zr.call(tn,qt,Er),gn.call(tn,Er,Er)})}return Dt.scale=function(Wt){return arguments.length?(ve=Wt,Dt):ve},Dt.orient=function(Wt){return arguments.length?(Me=Wt in ps?Wt+"":qo,Dt):Me},Dt.ticks=function(){return arguments.length?($e=m(arguments),Dt):$e},Dt.tickValues=function(Wt){return arguments.length?(wt=Wt,Dt):wt},Dt.tickFormat=function(Wt){return arguments.length?(gt=Wt,Dt):gt},Dt.tickSize=function(Wt){var Jt=arguments.length;return Jt?(Re=+Wt,Ve=+arguments[Jt-1],Dt):Re},Dt.innerTickSize=function(Wt){return arguments.length?(Re=+Wt,Dt):Re},Dt.outerTickSize=function(Wt){return arguments.length?(Ve=+Wt,Dt):Ve},Dt.tickPadding=function(Wt){return arguments.length?(Ue=+Wt,Dt):Ue},Dt.tickSubdivide=function(){return arguments.length&&Dt},Dt};var qo="bottom",ps={top:1,right:1,bottom:1,left:1};function Ni(ve,Me,Re){ve.attr("transform",function(Ve){var Ue=Me(Ve);return"translate("+(isFinite(Ue)?Ue:Re(Ve))+",0)"})}function eo(ve,Me,Re){ve.attr("transform",function(Ve){var Ue=Me(Ve);return"translate(0,"+(isFinite(Ue)?Ue:Re(Ve))+")"})}u.svg.brush=function(){var ve=J(Jt,"brushstart","brush","brushend"),Me=null,Re=null,Ve=[0,0],Ue=[0,0],$e,wt,gt=!0,Dt=!0,Wt=es[0];function Jt(Rr){Rr.each(function(){var Zr=u.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",bn).on("touchstart.brush",bn),$r=Zr.selectAll(".background").data([0]);$r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Zr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var gn=Zr.selectAll(".resize").data(Wt,D);gn.exit().remove(),gn.enter().append("g").attr("class",function(ya){return"resize "+ya}).style("cursor",function(ya){return Ts[ya]}).append("rect").attr("x",function(ya){return/[ew]$/.test(ya)?-3:null}).attr("y",function(ya){return/^[ns]/.test(ya)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),gn.style("display",Jt.empty()?"none":null);var yn=u.transition(Zr),tn=u.transition($r),na;Me&&(na=pn(Me),tn.attr("x",na[0]).attr("width",na[1]-na[0]),Er(yn)),Re&&(na=pn(Re),tn.attr("y",na[0]).attr("height",na[1]-na[0]),an(yn)),qt(yn)})}Jt.event=function(Rr){Rr.each(function(){var Zr=ve.of(this,arguments),$r={x:Ve,y:Ue,i:$e,j:wt},gn=this.__chart__||$r;this.__chart__=$r,si?u.select(this).transition().each("start.brush",function(){$e=gn.i,wt=gn.j,Ve=gn.x,Ue=gn.y,Zr({type:"brushstart"})}).tween("brush:brush",function(){var yn=Oo(Ve,$r.x),tn=Oo(Ue,$r.y);return $e=wt=null,function(na){Ve=$r.x=yn(na),Ue=$r.y=tn(na),Zr({type:"brush",mode:"resize"})}}).each("end.brush",function(){$e=$r.i,wt=$r.j,Zr({type:"brush",mode:"resize"}),Zr({type:"brushend"})}):(Zr({type:"brushstart"}),Zr({type:"brush",mode:"resize"}),Zr({type:"brushend"}))})};function qt(Rr){Rr.selectAll(".resize").attr("transform",function(Zr){return"translate("+Ve[+/e$/.test(Zr)]+","+Ue[+/^s/.test(Zr)]+")"})}function Er(Rr){Rr.select(".extent").attr("x",Ve[0]),Rr.selectAll(".extent,.n>rect,.s>rect").attr("width",Ve[1]-Ve[0])}function an(Rr){Rr.select(".extent").attr("y",Ue[0]),Rr.selectAll(".extent,.e>rect,.w>rect").attr("height",Ue[1]-Ue[0])}function bn(){var Rr=this,Zr=u.select(u.event.target),$r=ve.of(Rr,arguments),gn=u.select(Rr),yn=Zr.datum(),tn=!/^(n|s)$/.test(yn)&&Me,na=!/^(e|w)$/.test(yn)&&Re,ya=Zr.classed("extent"),Ha=Gt(Rr),_a,Xa=u.mouse(Rr),Sa,ma=u.select(i(Rr)).on("keydown.brush",Ii).on("keyup.brush",Xo);if(u.event.changedTouches?ma.on("touchmove.brush",go).on("touchend.brush",fi):ma.on("mousemove.brush",go).on("mouseup.brush",fi),gn.interrupt().selectAll("*").interrupt(),ya)Xa[0]=Ve[0]-Xa[0],Xa[1]=Ue[0]-Xa[1];else if(yn){var Ja=+/w$/.test(yn),gi=+/^n/.test(yn);Sa=[Ve[1-Ja]-Xa[0],Ue[1-gi]-Xa[1]],Xa[0]=Ve[Ja],Xa[1]=Ue[gi]}else u.event.altKey&&(_a=Xa.slice());gn.style("pointer-events","none").selectAll(".resize").style("display",null),u.select("body").style("cursor",Zr.style("cursor")),$r({type:"brushstart"}),go();function Ii(){u.event.keyCode==32&&(ya||(_a=null,Xa[0]-=Ve[1],Xa[1]-=Ue[1],ya=2),q())}function Xo(){u.event.keyCode==32&&ya==2&&(Xa[0]+=Ve[1],Xa[1]+=Ue[1],ya=0,q())}function go(){var pi=u.mouse(Rr),Gi=!1;Sa&&(pi[0]+=Sa[0],pi[1]+=Sa[1]),ya||(u.event.altKey?(_a||(_a=[(Ve[0]+Ve[1])/2,(Ue[0]+Ue[1])/2]),Xa[0]=Ve[+(pi[0]<_a[0])],Xa[1]=Ue[+(pi[1]<_a[1])]):_a=null),tn&&Ra(pi,Me,0)&&(Er(gn),Gi=!0),na&&Ra(pi,Re,1)&&(an(gn),Gi=!0),Gi&&(qt(gn),$r({type:"brush",mode:ya?"move":"resize"}))}function Ra(pi,Gi,Si){var Go=pn(Gi),Do=Go[0],ao=Go[1],ts=Xa[Si],ms=Si?Ue:Ve,Is=ms[1]-ms[0],xo,bo;if(ya&&(Do-=ts,ao-=Is+ts),xo=(Si?Dt:gt)?Math.max(Do,Math.min(ao,pi[Si])):pi[Si],ya?bo=(xo+=ts)+Is:(_a&&(ts=Math.max(Do,Math.min(ao,2*_a[Si]-xo))),ts<xo?(bo=xo,xo=ts):bo=ts),ms[0]!=xo||ms[1]!=bo)return Si?wt=null:$e=null,ms[0]=xo,ms[1]=bo,!0}function fi(){go(),gn.style("pointer-events","all").selectAll(".resize").style("display",Jt.empty()?"none":null),u.select("body").style("cursor",null),ma.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Ha(),$r({type:"brushend"})}}return Jt.x=function(Rr){return arguments.length?(Me=Rr,Wt=es[!Me<<1|!Re],Jt):Me},Jt.y=function(Rr){return arguments.length?(Re=Rr,Wt=es[!Me<<1|!Re],Jt):Re},Jt.clamp=function(Rr){return arguments.length?(Me&&Re?(gt=!!Rr[0],Dt=!!Rr[1]):Me?gt=!!Rr:Re&&(Dt=!!Rr),Jt):Me&&Re?[gt,Dt]:Me?gt:Re?Dt:null},Jt.extent=function(Rr){var Zr,$r,gn,yn,tn;return arguments.length?(Me&&(Zr=Rr[0],$r=Rr[1],Re&&(Zr=Zr[0],$r=$r[0]),$e=[Zr,$r],Me.invert&&(Zr=Me(Zr),$r=Me($r)),$r<Zr&&(tn=Zr,Zr=$r,$r=tn),(Zr!=Ve[0]||$r!=Ve[1])&&(Ve=[Zr,$r])),Re&&(gn=Rr[0],yn=Rr[1],Me&&(gn=gn[1],yn=yn[1]),wt=[gn,yn],Re.invert&&(gn=Re(gn),yn=Re(yn)),yn<gn&&(tn=gn,gn=yn,yn=tn),(gn!=Ue[0]||yn!=Ue[1])&&(Ue=[gn,yn])),Jt):(Me&&($e?(Zr=$e[0],$r=$e[1]):(Zr=Ve[0],$r=Ve[1],Me.invert&&(Zr=Me.invert(Zr),$r=Me.invert($r)),$r<Zr&&(tn=Zr,Zr=$r,$r=tn))),Re&&(wt?(gn=wt[0],yn=wt[1]):(gn=Ue[0],yn=Ue[1],Re.invert&&(gn=Re.invert(gn),yn=Re.invert(yn)),yn<gn&&(tn=gn,gn=yn,yn=tn))),Me&&Re?[[Zr,gn],[$r,yn]]:Me?[Zr,$r]:Re&&[gn,yn])},Jt.clear=function(){return Jt.empty()||(Ve=[0,0],Ue=[0,0],$e=wt=null),Jt},Jt.empty=function(){return!!Me&&Ve[0]==Ve[1]||!!Re&&Ue[0]==Ue[1]},u.rebind(Jt,ve,"on")};var Ts={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},es=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];u.text=Bt(function(ve){return ve.responseText}),u.json=function(ve,Me){return ir(ve,"application/json",As,Me)};function As(ve){return JSON.parse(ve.responseText)}u.html=function(ve,Me){return ir(ve,"text/html",Ws,Me)};function Ws(ve){var Me=x.createRange();return Me.selectNode(x.body),Me.createContextualFragment(ve.responseText)}u.xml=Bt(function(ve){return ve.responseXML}),typeof I=="object"&&I.exports?I.exports=u:this.d3=u}).apply(self)},{}],59:[function(e,I,B){I.exports=e("./quad")},{"./quad":60}],60:[function(e,I,B){var u=e("binary-search-bounds"),s=e("clamp"),m=e("parse-rect"),x=e("array-bounds"),t=e("pick-by-alias"),i=e("defined"),a=e("flatten-vertex-data"),r=e("is-obj"),n=e("dtype"),f=e("math-log2"),l=1073741824;I.exports=function(v,d){d||(d={}),v=a(v,"float64"),d=t(d,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var p=i(d.maxDepth,255),y=i(d.bounds,x(v,2));y[0]===y[2]&&y[2]++,y[1]===y[3]&&y[3]++;var g=o(v,y),A=v.length>>>1,b;d.dtype||(d.dtype="array"),typeof d.dtype=="string"?b=new(n(d.dtype))(A):d.dtype&&(b=d.dtype,Array.isArray(b)&&(b.length=A));for(var M=0;M<A;++M)b[M]=M;var w=[],T=[],_=[],h=[];D(0,0,1,b,0,1);for(var L=0,S=0;S<w.length;S++){var k=w[S];if(b.set)b.set(k,L);else for(var P=0,O=k.length;P<O;P++)b[P+L]=k[P];var F=L+w[S].length;h[S]=[L,F],L=F}return b.range=R,b;function D(X,j,ee,q,G,J){if(!q.length)return null;var le=w[G]||(w[G]=[]),fe=_[G]||(_[G]=[]),se=T[G]||(T[G]=[]),V=le.length;if(G++,G>p||J>l){for(var Y=0;Y<q.length;Y++)le.push(q[Y]),fe.push(J),se.push(null,null,null,null);return V}if(le.push(q[0]),fe.push(J),q.length<=1)return se.push(null,null,null,null),V;for(var ne=ee*.5,te=X+ne,K=j+ne,$=[],ae=[],ie=[],oe=[],ue=1,xe=q.length;ue<xe;ue++){var he=q[ue],me=g[he*2],be=g[he*2+1];me<te?be<K?$.push(he):ae.push(he):be<K?ie.push(he):oe.push(he)}return J<<=2,se.push(D(X,j,ne,$,G,J),D(X,K,ne,ae,G,J+1),D(te,j,ne,ie,G,J+2),D(te,K,ne,oe,G,J+3)),V}function R(){for(var X=[],j=arguments.length;j--;)X[j]=arguments[j];var ee;if(r(X[X.length-1])){var q=X.pop();!X.length&&(q.x!=null||q.l!=null||q.left!=null)&&(X=[q],ee={}),ee=t(q,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else ee={};X.length||(X=y);var G=m.apply(void 0,X),J=[Math.min(G.x,G.x+G.width),Math.min(G.y,G.y+G.height),Math.max(G.x,G.x+G.width),Math.max(G.y,G.y+G.height)],le=J[0],fe=J[1],se=J[2],V=J[3],Y=o([le,fe,se,V],y),ne=Y[0],te=Y[1],K=Y[2],$=Y[3],ae=i(ee.level,w.length);if(ee.d!=null){var ie;typeof ee.d=="number"?ie=[ee.d,ee.d]:ee.d.length&&(ie=ee.d),ae=Math.min(Math.max(Math.ceil(-f(Math.abs(ie[0])/(y[2]-y[0]))),Math.ceil(-f(Math.abs(ie[1])/(y[3]-y[1])))),ae)}if(ae=Math.min(ae,w.length),ee.lod)return U(ne,te,K,$,ae);var oe=[];ue(0,0,1,0,0,1);function ue(he,me,be,Ce,Se,Be){if(!(Se===null||Be===null)){var Ye=he+be,Xe=me+be;if(!(ne>Ye||te>Xe||K<he||$<me)&&!(Ce>=ae)&&Se!==Be){var Te=w[Ce];Be===void 0&&(Be=Te.length);for(var Ie=Se;Ie<Be;Ie++){var Ze=Te[Ie],rt=v[Ze*2],Ge=v[Ze*2+1];rt>=le&&rt<=se&&Ge>=fe&&Ge<=V&&oe.push(Ze)}var ze=T[Ce],We=ze[Se*4+0],mt=ze[Se*4+1],Ft=ze[Se*4+2],Xt=ze[Se*4+3],Pt=xe(ze,Se+1),Ut=be*.5,Gt=Ce+1;ue(he,me,Ut,Gt,We,mt||Ft||Xt||Pt),ue(he,me+Ut,Ut,Gt,mt,Ft||Xt||Pt),ue(he+Ut,me,Ut,Gt,Ft,Xt||Pt),ue(he+Ut,me+Ut,Ut,Gt,Xt,Pt)}}}function xe(he,me){for(var be=null,Ce=0;be===null;)if(be=he[me*4+Ce],Ce++,Ce>he.length)return null;return be}return oe}function U(X,j,ee,q,G){for(var J=[],le=0;le<G;le++){var fe=_[le],se=h[le][0],V=N(X,j,le),Y=N(ee,q,le),ne=u.ge(fe,V),te=u.gt(fe,Y,ne,fe.length-1);J[le]=[ne+se,te+se]}return J}function N(X,j,ee){for(var q=1,G=.5,J=.5,le=.5,fe=0;fe<ee;fe++)q<<=2,q+=X<G?j<J?0:1:j<J?2:3,le*=.5,G+=X<G?-le:le,J+=j<J?-le:le;return q}};function o(c,v){for(var d=v[0],p=v[1],y=v[2],g=v[3],A=1/(y-d),b=1/(g-p),M=new Array(c.length),w=0,T=c.length/2;w<T;w++)M[2*w]=s((c[2*w]-d)*A,0,1),M[2*w+1]=s((c[2*w+1]-p)*b,0,1);return M}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(e,I,B){Object.defineProperty(B,"__esModule",{value:!0});var u=e("@turf/meta"),s=6378137;function m(r){return u.geomReduce(r,function(n,f){return n+x(f)},0)}B.default=m;function x(r){var n=0,f;switch(r.type){case"Polygon":return t(r.coordinates);case"MultiPolygon":for(f=0;f<r.coordinates.length;f++)n+=t(r.coordinates[f]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function t(r){var n=0;if(r&&r.length>0){n+=Math.abs(i(r[0]));for(var f=1;f<r.length;f++)n-=Math.abs(i(r[f]))}return n}function i(r){var n,f,l,o,c,v,d,p=0,y=r.length;if(y>2){for(d=0;d<y;d++)d===y-2?(o=y-2,c=y-1,v=0):d===y-1?(o=y-1,c=0,v=1):(o=d,c=d+1,v=d+2),n=r[o],f=r[c],l=r[v],p+=(a(l[0])-a(n[0]))*Math.sin(a(f[1]));p=p*s*s/2}return p}function a(r){return r*Math.PI/180}},{"@turf/meta":63}],62:[function(e,I,B){Object.defineProperty(B,"__esModule",{value:!0}),B.earthRadius=63710088e-1,B.factors={centimeters:B.earthRadius*100,centimetres:B.earthRadius*100,degrees:B.earthRadius/111325,feet:B.earthRadius*3.28084,inches:B.earthRadius*39.37,kilometers:B.earthRadius/1e3,kilometres:B.earthRadius/1e3,meters:B.earthRadius,metres:B.earthRadius,miles:B.earthRadius/1609.344,millimeters:B.earthRadius*1e3,millimetres:B.earthRadius*1e3,nauticalmiles:B.earthRadius/1852,radians:1,yards:B.earthRadius*1.0936},B.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/B.earthRadius,yards:1.0936133},B.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function u(S,k,P){P===void 0&&(P={});var O={type:"Feature"};return(P.id===0||P.id)&&(O.id=P.id),P.bbox&&(O.bbox=P.bbox),O.properties=k||{},O.geometry=S,O}B.feature=u;function s(S,k,P){switch(S){case"Point":return m(k).geometry;case"LineString":return a(k).geometry;case"Polygon":return t(k).geometry;case"MultiPoint":return l(k).geometry;case"MultiLineString":return f(k).geometry;case"MultiPolygon":return o(k).geometry;default:throw new Error(S+" is invalid")}}B.geometry=s;function m(S,k,P){if(P===void 0&&(P={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(S[0])||!T(S[1]))throw new Error("coordinates must contain numbers");var O={type:"Point",coordinates:S};return u(O,k,P)}B.point=m;function x(S,k,P){return P===void 0&&(P={}),n(S.map(function(O){return m(O,k)}),P)}B.points=x;function t(S,k,P){P===void 0&&(P={});for(var O=0,F=S;O<F.length;O++){var D=F[O];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var R=0;R<D[D.length-1].length;R++)if(D[D.length-1][R]!==D[0][R])throw new Error("First and last Position are not equivalent.")}var U={type:"Polygon",coordinates:S};return u(U,k,P)}B.polygon=t;function i(S,k,P){return P===void 0&&(P={}),n(S.map(function(O){return t(O,k)}),P)}B.polygons=i;function a(S,k,P){if(P===void 0&&(P={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var O={type:"LineString",coordinates:S};return u(O,k,P)}B.lineString=a;function r(S,k,P){return P===void 0&&(P={}),n(S.map(function(O){return a(O,k)}),P)}B.lineStrings=r;function n(S,k){k===void 0&&(k={});var P={type:"FeatureCollection"};return k.id&&(P.id=k.id),k.bbox&&(P.bbox=k.bbox),P.features=S,P}B.featureCollection=n;function f(S,k,P){P===void 0&&(P={});var O={type:"MultiLineString",coordinates:S};return u(O,k,P)}B.multiLineString=f;function l(S,k,P){P===void 0&&(P={});var O={type:"MultiPoint",coordinates:S};return u(O,k,P)}B.multiPoint=l;function o(S,k,P){P===void 0&&(P={});var O={type:"MultiPolygon",coordinates:S};return u(O,k,P)}B.multiPolygon=o;function c(S,k,P){P===void 0&&(P={});var O={type:"GeometryCollection",geometries:S};return u(O,k,P)}B.geometryCollection=c;function v(S,k){if(k===void 0&&(k=0),k&&!(k>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,k||0);return Math.round(S*P)/P}B.round=v;function d(S,k){k===void 0&&(k="kilometers");var P=B.factors[k];if(!P)throw new Error(k+" units is invalid");return S*P}B.radiansToLength=d;function p(S,k){k===void 0&&(k="kilometers");var P=B.factors[k];if(!P)throw new Error(k+" units is invalid");return S/P}B.lengthToRadians=p;function y(S,k){return A(p(S,k))}B.lengthToDegrees=y;function g(S){var k=S%360;return k<0&&(k+=360),k}B.bearingToAzimuth=g;function A(S){var k=S%(2*Math.PI);return k*180/Math.PI}B.radiansToDegrees=A;function b(S){var k=S%360;return k*Math.PI/180}B.degreesToRadians=b;function M(S,k,P){if(k===void 0&&(k="kilometers"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("length must be a positive number");return d(p(S,k),P)}B.convertLength=M;function w(S,k,P){if(k===void 0&&(k="meters"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("area must be a positive number");var O=B.areaFactors[k];if(!O)throw new Error("invalid original units");var F=B.areaFactors[P];if(!F)throw new Error("invalid final units");return S/O*F}B.convertArea=w;function T(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}B.isNumber=T;function _(S){return!!S&&S.constructor===Object}B.isObject=_;function h(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(k){if(!T(k))throw new Error("bbox must only contain numbers")})}B.validateBBox=h;function L(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}B.validateId=L},{}],63:[function(e,I,B){Object.defineProperty(B,"__esModule",{value:!0});var u=e("@turf/helpers");function s(A,b,M){if(A!==null)for(var w,T,_,h,L,S,k,P=0,O=0,F,D=A.type,R=D==="FeatureCollection",U=D==="Feature",N=R?A.features.length:1,X=0;X<N;X++){k=R?A.features[X].geometry:U?A.geometry:A,F=k?k.type==="GeometryCollection":!1,L=F?k.geometries.length:1;for(var j=0;j<L;j++){var ee=0,q=0;if(h=F?k.geometries[j]:k,h!==null){S=h.coordinates;var G=h.type;switch(P=M&&(G==="Polygon"||G==="MultiPolygon")?1:0,G){case null:break;case"Point":if(b(S,O,X,ee,q)===!1)return!1;O++,ee++;break;case"LineString":case"MultiPoint":for(w=0;w<S.length;w++){if(b(S[w],O,X,ee,q)===!1)return!1;O++,G==="MultiPoint"&&ee++}G==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(w=0;w<S.length;w++){for(T=0;T<S[w].length-P;T++){if(b(S[w][T],O,X,ee,q)===!1)return!1;O++}G==="MultiLineString"&&ee++,G==="Polygon"&&q++}G==="Polygon"&&ee++;break;case"MultiPolygon":for(w=0;w<S.length;w++){for(q=0,T=0;T<S[w].length;T++){for(_=0;_<S[w][T].length-P;_++){if(b(S[w][T][_],O,X,ee,q)===!1)return!1;O++}q++}ee++}break;case"GeometryCollection":for(w=0;w<h.geometries.length;w++)if(s(h.geometries[w],b,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m(A,b,M,w){var T=M;return s(A,function(_,h,L,S,k){h===0&&M===void 0?T=_:T=b(T,_,h,L,S,k)},w),T}function x(A,b){var M;switch(A.type){case"FeatureCollection":for(M=0;M<A.features.length&&b(A.features[M].properties,M)!==!1;M++);break;case"Feature":b(A.properties,0);break}}function t(A,b,M){var w=M;return x(A,function(T,_){_===0&&M===void 0?w=T:w=b(w,T,_)}),w}function i(A,b){if(A.type==="Feature")b(A,0);else if(A.type==="FeatureCollection")for(var M=0;M<A.features.length&&b(A.features[M],M)!==!1;M++);}function a(A,b,M){var w=M;return i(A,function(T,_){_===0&&M===void 0?w=T:w=b(w,T,_)}),w}function r(A){var b=[];return s(A,function(M){b.push(M)}),b}function n(A,b){var M,w,T,_,h,L,S,k,P,O,F=0,D=A.type==="FeatureCollection",R=A.type==="Feature",U=D?A.features.length:1;for(M=0;M<U;M++){for(L=D?A.features[M].geometry:R?A.geometry:A,k=D?A.features[M].properties:R?A.properties:{},P=D?A.features[M].bbox:R?A.bbox:void 0,O=D?A.features[M].id:R?A.id:void 0,S=L?L.type==="GeometryCollection":!1,h=S?L.geometries.length:1,T=0;T<h;T++){if(_=S?L.geometries[T]:L,_===null){if(b(null,F,k,P,O)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(b(_,F,k,P,O)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<_.geometries.length;w++)if(b(_.geometries[w],F,k,P,O)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}F++}}function f(A,b,M){var w=M;return n(A,function(T,_,h,L,S){_===0&&M===void 0?w=T:w=b(w,T,_,h,L,S)}),w}function l(A,b){n(A,function(M,w,T,_,h){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return b(u.feature(M,T,{bbox:_,id:h}),w,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<M.coordinates.length;k++){var P=M.coordinates[k],O={type:S,coordinates:P};if(b(u.feature(O,T),w,k)===!1)return!1}})}function o(A,b,M){var w=M;return l(A,function(T,_,h){_===0&&h===0&&M===void 0?w=T:w=b(w,T,_,h)}),w}function c(A,b){l(A,function(M,w,T){var _=0;if(!!M.geometry){var h=M.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,S=0,k=0,P=0;if(s(M,function(O,F,D,R,U){if(L===void 0||w>S||R>k||U>P){L=O,S=w,k=R,P=U,_=0;return}var N=u.lineString([L,O],M.properties);if(b(N,w,T,U,_)===!1)return!1;_++,L=O})===!1)return!1}}})}function v(A,b,M){var w=M,T=!1;return c(A,function(_,h,L,S,k){T===!1&&M===void 0?w=_:w=b(w,_,h,L,S,k),T=!0}),w}function d(A,b){if(!A)throw new Error("geojson is required");l(A,function(M,w,T){if(M.geometry!==null){var _=M.geometry.type,h=M.geometry.coordinates;switch(_){case"LineString":if(b(M,w,T,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(b(u.lineString(h[L],M.properties),w,T,L)===!1)return!1;break}}})}function p(A,b,M){var w=M;return d(A,function(T,_,h,L){_===0&&M===void 0?w=T:w=b(w,T,_,h,L)}),w}function y(A,b){if(b=b||{},!u.isObject(b))throw new Error("options is invalid");var M=b.featureIndex||0,w=b.multiFeatureIndex||0,T=b.geometryIndex||0,_=b.segmentIndex||0,h=b.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),h=h||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":h=h||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=S.length+_-1),u.lineString([S[_],S[_+1]],h,b);case"Polygon":return T<0&&(T=S.length+T),_<0&&(_=S[T].length+_-1),u.lineString([S[T][_],S[T][_+1]],h,b);case"MultiLineString":return w<0&&(w=S.length+w),_<0&&(_=S[w].length+_-1),u.lineString([S[w][_],S[w][_+1]],h,b);case"MultiPolygon":return w<0&&(w=S.length+w),T<0&&(T=S[w].length+T),_<0&&(_=S[w][T].length-_-1),u.lineString([S[w][T][_],S[w][T][_+1]],h,b)}throw new Error("geojson is invalid")}function g(A,b){if(b=b||{},!u.isObject(b))throw new Error("options is invalid");var M=b.featureIndex||0,w=b.multiFeatureIndex||0,T=b.geometryIndex||0,_=b.coordIndex||0,h=b.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),h=h||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":h=h||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return u.point(S,h,b);case"MultiPoint":return w<0&&(w=S.length+w),u.point(S[w],h,b);case"LineString":return _<0&&(_=S.length+_),u.point(S[_],h,b);case"Polygon":return T<0&&(T=S.length+T),_<0&&(_=S[T].length+_),u.point(S[T][_],h,b);case"MultiLineString":return w<0&&(w=S.length+w),_<0&&(_=S[w].length+_),u.point(S[w][_],h,b);case"MultiPolygon":return w<0&&(w=S.length+w),T<0&&(T=S[w].length+T),_<0&&(_=S[w][T].length-_),u.point(S[w][T][_],h,b)}throw new Error("geojson is invalid")}B.coordEach=s,B.coordReduce=m,B.propEach=x,B.propReduce=t,B.featureEach=i,B.featureReduce=a,B.coordAll=r,B.geomEach=n,B.geomReduce=f,B.flattenEach=l,B.flattenReduce=o,B.segmentEach=c,B.segmentReduce=v,B.lineEach=d,B.lineReduce=p,B.findSegment=y,B.findPoint=g},{"@turf/helpers":62}],64:[function(e,I,B){Object.defineProperty(B,"__esModule",{value:!0});var u=e("@turf/meta");function s(m){var x=[1/0,1/0,-1/0,-1/0];return u.coordEach(m,function(t){x[0]>t[0]&&(x[0]=t[0]),x[1]>t[1]&&(x[1]=t[1]),x[2]<t[0]&&(x[2]=t[0]),x[3]<t[1]&&(x[3]=t[1])}),x}s.default=s,B.default=s},{"@turf/meta":66}],65:[function(e,I,B){arguments[4][62][0].apply(B,arguments)},{dup:62}],66:[function(e,I,B){arguments[4][63][0].apply(B,arguments)},{"@turf/helpers":65,dup:63}],67:[function(e,I,B){Object.defineProperty(B,"__esModule",{value:!0});var u=e("@turf/meta"),s=e("@turf/helpers");function m(x,t){t===void 0&&(t={});var i=0,a=0,r=0;return u.coordEach(x,function(n){i+=n[0],a+=n[1],r++}),s.point([i/r,a/r],t.properties)}B.default=m},{"@turf/helpers":68,"@turf/meta":69}],68:[function(e,I,B){Object.defineProperty(B,"__esModule",{value:!0}),B.earthRadius=63710088e-1,B.factors={centimeters:B.earthRadius*100,centimetres:B.earthRadius*100,degrees:B.earthRadius/111325,feet:B.earthRadius*3.28084,inches:B.earthRadius*39.37,kilometers:B.earthRadius/1e3,kilometres:B.earthRadius/1e3,meters:B.earthRadius,metres:B.earthRadius,miles:B.earthRadius/1609.344,millimeters:B.earthRadius*1e3,millimetres:B.earthRadius*1e3,nauticalmiles:B.earthRadius/1852,radians:1,yards:B.earthRadius/1.0936},B.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/B.earthRadius,yards:1/1.0936},B.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function u(U,N,X){X===void 0&&(X={});var j={type:"Feature"};return(X.id===0||X.id)&&(j.id=X.id),X.bbox&&(j.bbox=X.bbox),j.properties=N||{},j.geometry=U,j}B.feature=u;function s(U,N,X){switch(U){case"Point":return m(N).geometry;case"LineString":return a(N).geometry;case"Polygon":return t(N).geometry;case"MultiPoint":return l(N).geometry;case"MultiLineString":return f(N).geometry;case"MultiPolygon":return o(N).geometry;default:throw new Error(U+" is invalid")}}B.geometry=s;function m(U,N,X){X===void 0&&(X={});var j={type:"Point",coordinates:U};return u(j,N,X)}B.point=m;function x(U,N,X){return X===void 0&&(X={}),n(U.map(function(j){return m(j,N)}),X)}B.points=x;function t(U,N,X){X===void 0&&(X={});for(var j=0,ee=U;j<ee.length;j++){var q=ee[j];if(q.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var G=0;G<q[q.length-1].length;G++)if(q[q.length-1][G]!==q[0][G])throw new Error("First and last Position are not equivalent.")}var J={type:"Polygon",coordinates:U};return u(J,N,X)}B.polygon=t;function i(U,N,X){return X===void 0&&(X={}),n(U.map(function(j){return t(j,N)}),X)}B.polygons=i;function a(U,N,X){if(X===void 0&&(X={}),U.length<2)throw new Error("coordinates must be an array of two or more positions");var j={type:"LineString",coordinates:U};return u(j,N,X)}B.lineString=a;function r(U,N,X){return X===void 0&&(X={}),n(U.map(function(j){return a(j,N)}),X)}B.lineStrings=r;function n(U,N){N===void 0&&(N={});var X={type:"FeatureCollection"};return N.id&&(X.id=N.id),N.bbox&&(X.bbox=N.bbox),X.features=U,X}B.featureCollection=n;function f(U,N,X){X===void 0&&(X={});var j={type:"MultiLineString",coordinates:U};return u(j,N,X)}B.multiLineString=f;function l(U,N,X){X===void 0&&(X={});var j={type:"MultiPoint",coordinates:U};return u(j,N,X)}B.multiPoint=l;function o(U,N,X){X===void 0&&(X={});var j={type:"MultiPolygon",coordinates:U};return u(j,N,X)}B.multiPolygon=o;function c(U,N,X){X===void 0&&(X={});var j={type:"GeometryCollection",geometries:U};return u(j,N,X)}B.geometryCollection=c;function v(U,N){if(N===void 0&&(N=0),N&&!(N>=0))throw new Error("precision must be a positive number");var X=Math.pow(10,N||0);return Math.round(U*X)/X}B.round=v;function d(U,N){N===void 0&&(N="kilometers");var X=B.factors[N];if(!X)throw new Error(N+" units is invalid");return U*X}B.radiansToLength=d;function p(U,N){N===void 0&&(N="kilometers");var X=B.factors[N];if(!X)throw new Error(N+" units is invalid");return U/X}B.lengthToRadians=p;function y(U,N){return A(p(U,N))}B.lengthToDegrees=y;function g(U){var N=U%360;return N<0&&(N+=360),N}B.bearingToAzimuth=g;function A(U){var N=U%(2*Math.PI);return N*180/Math.PI}B.radiansToDegrees=A;function b(U){var N=U%360;return N*Math.PI/180}B.degreesToRadians=b;function M(U,N,X){if(N===void 0&&(N="kilometers"),X===void 0&&(X="kilometers"),!(U>=0))throw new Error("length must be a positive number");return d(p(U,N),X)}B.convertLength=M;function w(U,N,X){if(N===void 0&&(N="meters"),X===void 0&&(X="kilometers"),!(U>=0))throw new Error("area must be a positive number");var j=B.areaFactors[N];if(!j)throw new Error("invalid original units");var ee=B.areaFactors[X];if(!ee)throw new Error("invalid final units");return U/j*ee}B.convertArea=w;function T(U){return!isNaN(U)&&U!==null&&!Array.isArray(U)&&!/^\s*$/.test(U)}B.isNumber=T;function _(U){return!!U&&U.constructor===Object}B.isObject=_;function h(U){if(!U)throw new Error("bbox is required");if(!Array.isArray(U))throw new Error("bbox must be an Array");if(U.length!==4&&U.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");U.forEach(function(N){if(!T(N))throw new Error("bbox must only contain numbers")})}B.validateBBox=h;function L(U){if(!U)throw new Error("id is required");if(["string","number"].indexOf(typeof U)===-1)throw new Error("id must be a number or a string")}B.validateId=L;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}B.radians2degrees=S;function k(){throw new Error("method has been renamed to `degreesToRadians`")}B.degrees2radians=k;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}B.distanceToDegrees=P;function O(){throw new Error("method has been renamed to `lengthToRadians`")}B.distanceToRadians=O;function F(){throw new Error("method has been renamed to `radiansToLength`")}B.radiansToDistance=F;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}B.bearingToAngle=D;function R(){throw new Error("method has been renamed to `convertLength`")}B.convertDistance=R},{}],69:[function(e,I,B){Object.defineProperty(B,"__esModule",{value:!0});var u=e("@turf/helpers");function s(A,b,M){if(A!==null)for(var w,T,_,h,L,S,k,P=0,O=0,F,D=A.type,R=D==="FeatureCollection",U=D==="Feature",N=R?A.features.length:1,X=0;X<N;X++){k=R?A.features[X].geometry:U?A.geometry:A,F=k?k.type==="GeometryCollection":!1,L=F?k.geometries.length:1;for(var j=0;j<L;j++){var ee=0,q=0;if(h=F?k.geometries[j]:k,h!==null){S=h.coordinates;var G=h.type;switch(P=M&&(G==="Polygon"||G==="MultiPolygon")?1:0,G){case null:break;case"Point":if(b(S,O,X,ee,q)===!1)return!1;O++,ee++;break;case"LineString":case"MultiPoint":for(w=0;w<S.length;w++){if(b(S[w],O,X,ee,q)===!1)return!1;O++,G==="MultiPoint"&&ee++}G==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(w=0;w<S.length;w++){for(T=0;T<S[w].length-P;T++){if(b(S[w][T],O,X,ee,q)===!1)return!1;O++}G==="MultiLineString"&&ee++,G==="Polygon"&&q++}G==="Polygon"&&ee++;break;case"MultiPolygon":for(w=0;w<S.length;w++){for(q=0,T=0;T<S[w].length;T++){for(_=0;_<S[w][T].length-P;_++){if(b(S[w][T][_],O,X,ee,q)===!1)return!1;O++}q++}ee++}break;case"GeometryCollection":for(w=0;w<h.geometries.length;w++)if(s(h.geometries[w],b,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m(A,b,M,w){var T=M;return s(A,function(_,h,L,S,k){h===0&&M===void 0?T=_:T=b(T,_,h,L,S,k)},w),T}function x(A,b){var M;switch(A.type){case"FeatureCollection":for(M=0;M<A.features.length&&b(A.features[M].properties,M)!==!1;M++);break;case"Feature":b(A.properties,0);break}}function t(A,b,M){var w=M;return x(A,function(T,_){_===0&&M===void 0?w=T:w=b(w,T,_)}),w}function i(A,b){if(A.type==="Feature")b(A,0);else if(A.type==="FeatureCollection")for(var M=0;M<A.features.length&&b(A.features[M],M)!==!1;M++);}function a(A,b,M){var w=M;return i(A,function(T,_){_===0&&M===void 0?w=T:w=b(w,T,_)}),w}function r(A){var b=[];return s(A,function(M){b.push(M)}),b}function n(A,b){var M,w,T,_,h,L,S,k,P,O,F=0,D=A.type==="FeatureCollection",R=A.type==="Feature",U=D?A.features.length:1;for(M=0;M<U;M++){for(L=D?A.features[M].geometry:R?A.geometry:A,k=D?A.features[M].properties:R?A.properties:{},P=D?A.features[M].bbox:R?A.bbox:void 0,O=D?A.features[M].id:R?A.id:void 0,S=L?L.type==="GeometryCollection":!1,h=S?L.geometries.length:1,T=0;T<h;T++){if(_=S?L.geometries[T]:L,_===null){if(b(null,F,k,P,O)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(b(_,F,k,P,O)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<_.geometries.length;w++)if(b(_.geometries[w],F,k,P,O)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}F++}}function f(A,b,M){var w=M;return n(A,function(T,_,h,L,S){_===0&&M===void 0?w=T:w=b(w,T,_,h,L,S)}),w}function l(A,b){n(A,function(M,w,T,_,h){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return b(u.feature(M,T,{bbox:_,id:h}),w,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<M.coordinates.length;k++){var P=M.coordinates[k],O={type:S,coordinates:P};if(b(u.feature(O,T),w,k)===!1)return!1}})}function o(A,b,M){var w=M;return l(A,function(T,_,h){_===0&&h===0&&M===void 0?w=T:w=b(w,T,_,h)}),w}function c(A,b){l(A,function(M,w,T){var _=0;if(!!M.geometry){var h=M.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,S=0,k=0,P=0;if(s(M,function(O,F,D,R,U){if(L===void 0||w>S||R>k||U>P){L=O,S=w,k=R,P=U,_=0;return}var N=u.lineString([L,O],M.properties);if(b(N,w,T,U,_)===!1)return!1;_++,L=O})===!1)return!1}}})}function v(A,b,M){var w=M,T=!1;return c(A,function(_,h,L,S,k){T===!1&&M===void 0?w=_:w=b(w,_,h,L,S,k),T=!0}),w}function d(A,b){if(!A)throw new Error("geojson is required");l(A,function(M,w,T){if(M.geometry!==null){var _=M.geometry.type,h=M.geometry.coordinates;switch(_){case"LineString":if(b(M,w,T,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(b(u.lineString(h[L],M.properties),w,T,L)===!1)return!1;break}}})}function p(A,b,M){var w=M;return d(A,function(T,_,h,L){_===0&&M===void 0?w=T:w=b(w,T,_,h,L)}),w}function y(A,b){if(b=b||{},!u.isObject(b))throw new Error("options is invalid");var M=b.featureIndex||0,w=b.multiFeatureIndex||0,T=b.geometryIndex||0,_=b.segmentIndex||0,h=b.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),h=h||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":h=h||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=S.length+_-1),u.lineString([S[_],S[_+1]],h,b);case"Polygon":return T<0&&(T=S.length+T),_<0&&(_=S[T].length+_-1),u.lineString([S[T][_],S[T][_+1]],h,b);case"MultiLineString":return w<0&&(w=S.length+w),_<0&&(_=S[w].length+_-1),u.lineString([S[w][_],S[w][_+1]],h,b);case"MultiPolygon":return w<0&&(w=S.length+w),T<0&&(T=S[w].length+T),_<0&&(_=S[w][T].length-_-1),u.lineString([S[w][T][_],S[w][T][_+1]],h,b)}throw new Error("geojson is invalid")}function g(A,b){if(b=b||{},!u.isObject(b))throw new Error("options is invalid");var M=b.featureIndex||0,w=b.multiFeatureIndex||0,T=b.geometryIndex||0,_=b.coordIndex||0,h=b.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),h=h||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":h=h||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return u.point(S,h,b);case"MultiPoint":return w<0&&(w=S.length+w),u.point(S[w],h,b);case"LineString":return _<0&&(_=S.length+_),u.point(S[_],h,b);case"Polygon":return T<0&&(T=S.length+T),_<0&&(_=S[T].length+_),u.point(S[T][_],h,b);case"MultiLineString":return w<0&&(w=S.length+w),_<0&&(_=S[w].length+_),u.point(S[w][_],h,b);case"MultiPolygon":return w<0&&(w=S.length+w),T<0&&(T=S[w].length+T),_<0&&(_=S[w][T].length-_),u.point(S[w][T][_],h,b)}throw new Error("geojson is invalid")}B.coordEach=s,B.coordReduce=m,B.propEach=x,B.propReduce=t,B.featureEach=i,B.featureReduce=a,B.coordAll=r,B.geomEach=n,B.geomReduce=f,B.flattenEach=l,B.flattenReduce=o,B.segmentEach=c,B.segmentReduce=v,B.lineEach=d,B.lineReduce=p,B.findSegment=y,B.findPoint=g},{"@turf/helpers":68}],70:[function(e,I,B){I.exports=u;function u(s){var m=0,x=0,t=0,i=0;return s.map(function(a){a=a.slice();var r=a[0],n=r.toUpperCase();if(r!=n)switch(a[0]=n,r){case"a":a[6]+=t,a[7]+=i;break;case"v":a[1]+=i;break;case"h":a[1]+=t;break;default:for(var f=1;f<a.length;)a[f++]+=t,a[f++]+=i}switch(n){case"Z":t=m,i=x;break;case"H":t=a[1];break;case"V":i=a[1];break;case"M":t=m=a[1],i=x=a[2];break;default:t=a[a.length-2],i=a[a.length-1]}return a})}},{}],71:[function(e,I,B){I.exports=u;function u(s,m){if(!s||s.length==null)throw Error("Argument should be an array");m==null?m=1:m=Math.floor(m);for(var x=Array(m*2),t=0;t<m;t++){for(var i=-1/0,a=1/0,r=t,n=s.length;r<n;r+=m)s[r]>i&&(i=s[r]),s[r]<a&&(a=s[r]);x[t]=a,x[m+t]=i}return x}},{}],72:[function(e,I,B){I.exports=function(u,s,m){if(typeof Array.prototype.findIndex=="function")return u.findIndex(s,m);if(typeof s!="function")throw new TypeError("predicate must be a function");var x=Object(u),t=x.length;if(t===0)return-1;for(var i=0;i<t;i++)if(s.call(m,x[i],i,x))return i;return-1}},{}],73:[function(e,I,B){var u=e("array-bounds");I.exports=s;function s(m,x,t){if(!m||m.length==null)throw Error("Argument should be an array");x==null&&(x=1),t==null&&(t=u(m,x));for(var i=0;i<x;i++){var a=t[x+i],r=t[i],n=i,f=m.length;if(a===1/0&&r===-1/0)for(n=i;n<f;n+=x)m[n]=m[n]===a?1:m[n]===r?0:.5;else if(a===1/0)for(n=i;n<f;n+=x)m[n]=m[n]===a?1:0;else if(r===-1/0)for(n=i;n<f;n+=x)m[n]=m[n]===r?0:1;else{var l=a-r;for(n=i;n<f;n+=x)isNaN(m[n])||(m[n]=l===0?.5:(m[n]-r)/l)}}return m}},{"array-bounds":71}],74:[function(e,I,B){I.exports=function(s,m){var x=typeof s=="number",t=typeof m=="number";x&&!t?(m=s,s=0):!x&&!t&&(s=0,m=0),s=s|0,m=m|0;var i=m-s;if(i<0)throw new Error("array length must be positive");for(var a=new Array(i),r=0,n=s;r<i;r++,n++)a[r]=n;return a}},{}],75:[function(e,I,B){(function(u){(function(){var s=e("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function m(k,P){if(k===P)return 0;for(var O=k.length,F=P.length,D=0,R=Math.min(O,F);D<R;++D)if(k[D]!==P[D]){O=k[D],F=P[D];break}return O<F?-1:F<O?1:0}function x(k){return u.Buffer&&typeof u.Buffer.isBuffer=="function"?u.Buffer.isBuffer(k):!!(k!=null&&k._isBuffer)}var t=e("util/"),i=Object.prototype.hasOwnProperty,a=Array.prototype.slice,r=function(){return function(){}.name==="foo"}();function n(k){return Object.prototype.toString.call(k)}function f(k){return x(k)||typeof u.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(k):k?!!(k instanceof DataView||k.buffer&&k.buffer instanceof ArrayBuffer):!1}var l=I.exports=g,o=/\s*function\s+([^\(\s]*)\s*/;function c(k){if(!!t.isFunction(k)){if(r)return k.name;var P=k.toString(),O=P.match(o);return O&&O[1]}}l.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=p(this),this.generatedMessage=!0);var O=P.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var F=new Error;if(F.stack){var D=F.stack,R=c(O),U=D.indexOf(`
`+R);if(U>=0){var N=D.indexOf(`
`,U+1);D=D.substring(N+1)}this.stack=D}}},t.inherits(l.AssertionError,Error);function v(k,P){return typeof k=="string"?k.length<P?k:k.slice(0,P):k}function d(k){if(r||!t.isFunction(k))return t.inspect(k);var P=c(k),O=P?": "+P:"";return"[Function"+O+"]"}function p(k){return v(d(k.actual),128)+" "+k.operator+" "+v(d(k.expected),128)}function y(k,P,O,F,D){throw new l.AssertionError({message:O,actual:k,expected:P,operator:F,stackStartFunction:D})}l.fail=y;function g(k,P){k||y(k,!0,P,"==",l.ok)}l.ok=g,l.equal=function(P,O,F){P!=O&&y(P,O,F,"==",l.equal)},l.notEqual=function(P,O,F){P==O&&y(P,O,F,"!=",l.notEqual)},l.deepEqual=function(P,O,F){A(P,O,!1)||y(P,O,F,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(P,O,F){A(P,O,!0)||y(P,O,F,"deepStrictEqual",l.deepStrictEqual)};function A(k,P,O,F){if(k===P)return!0;if(x(k)&&x(P))return m(k,P)===0;if(t.isDate(k)&&t.isDate(P))return k.getTime()===P.getTime();if(t.isRegExp(k)&&t.isRegExp(P))return k.source===P.source&&k.global===P.global&&k.multiline===P.multiline&&k.lastIndex===P.lastIndex&&k.ignoreCase===P.ignoreCase;if((k===null||typeof k!="object")&&(P===null||typeof P!="object"))return O?k===P:k==P;if(f(k)&&f(P)&&n(k)===n(P)&&!(k instanceof Float32Array||k instanceof Float64Array))return m(new Uint8Array(k.buffer),new Uint8Array(P.buffer))===0;if(x(k)!==x(P))return!1;F=F||{actual:[],expected:[]};var D=F.actual.indexOf(k);return D!==-1&&D===F.expected.indexOf(P)?!0:(F.actual.push(k),F.expected.push(P),M(k,P,O,F))}function b(k){return Object.prototype.toString.call(k)=="[object Arguments]"}function M(k,P,O,F){if(k==null||P===null||P===void 0)return!1;if(t.isPrimitive(k)||t.isPrimitive(P))return k===P;if(O&&Object.getPrototypeOf(k)!==Object.getPrototypeOf(P))return!1;var D=b(k),R=b(P);if(D&&!R||!D&&R)return!1;if(D)return k=a.call(k),P=a.call(P),A(k,P,O);var U=S(k),N=S(P),X,j;if(U.length!==N.length)return!1;for(U.sort(),N.sort(),j=U.length-1;j>=0;j--)if(U[j]!==N[j])return!1;for(j=U.length-1;j>=0;j--)if(X=U[j],!A(k[X],P[X],O,F))return!1;return!0}l.notDeepEqual=function(P,O,F){A(P,O,!1)&&y(P,O,F,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=w;function w(k,P,O){A(k,P,!0)&&y(k,P,O,"notDeepStrictEqual",w)}l.strictEqual=function(P,O,F){P!==O&&y(P,O,F,"===",l.strictEqual)},l.notStrictEqual=function(P,O,F){P===O&&y(P,O,F,"!==",l.notStrictEqual)};function T(k,P){if(!k||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(k);try{if(k instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},k)===!0}function _(k){var P;try{k()}catch(O){P=O}return P}function h(k,P,O,F){var D;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof O=="string"&&(F=O,O=null),D=_(P),F=(O&&O.name?" ("+O.name+").":".")+(F?" "+F:"."),k&&!D&&y(D,O,"Missing expected exception"+F);var R=typeof F=="string",U=!k&&t.isError(D),N=!k&&D&&!O;if((U&&R&&T(D,O)||N)&&y(D,O,"Got unwanted exception"+F),k&&D&&O&&!T(D,O)||!k&&D)throw D}l.throws=function(k,P,O){h(!0,k,P,O)},l.doesNotThrow=function(k,P,O){h(!1,k,P,O)},l.ifError=function(k){if(k)throw k};function L(k,P){k||y(k,!0,P,"==",L)}l.strict=s(L,l,{equal:l.strictEqual,deepEqual:l.deepStrictEqual,notEqual:l.notStrictEqual,notDeepEqual:l.notDeepStrictEqual}),l.strict.strict=l.strict;var S=Object.keys||function(k){var P=[];for(var O in k)i.call(k,O)&&P.push(O);return P}}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"object-assign":247,"util/":78}],76:[function(e,I,B){typeof Object.create=="function"?I.exports=function(s,m){s.super_=m,s.prototype=Object.create(m.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:I.exports=function(s,m){s.super_=m;var x=function(){};x.prototype=m.prototype,s.prototype=new x,s.prototype.constructor=s}},{}],77:[function(e,I,B){I.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},{}],78:[function(e,I,B){(function(u,s){(function(){var m=/%[sdj%]/g;B.format=function(N){if(!M(N)){for(var X=[],j=0;j<arguments.length;j++)X.push(i(arguments[j]));return X.join(" ")}for(var j=1,ee=arguments,q=ee.length,G=String(N).replace(m,function(le){if(le==="%%")return"%";if(j>=q)return le;switch(le){case"%s":return String(ee[j++]);case"%d":return Number(ee[j++]);case"%j":try{return JSON.stringify(ee[j++])}catch{return"[Circular]"}default:return le}}),J=ee[j];j<q;J=ee[++j])g(J)||!h(J)?G+=" "+J:G+=" "+i(J);return G},B.deprecate=function(N,X){if(T(s.process))return function(){return B.deprecate(N,X).apply(this,arguments)};if(u.noDeprecation===!0)return N;var j=!1;function ee(){if(!j){if(u.throwDeprecation)throw new Error(X);u.traceDeprecation?console.trace(X):console.error(X),j=!0}return N.apply(this,arguments)}return ee};var x={},t;B.debuglog=function(N){if(T(t)&&(t=""),N=N.toUpperCase(),!x[N])if(new RegExp("\\b"+N+"\\b","i").test(t)){var X=u.pid;x[N]=function(){var j=B.format.apply(B,arguments);console.error("%s %d: %s",N,X,j)}}else x[N]=function(){};return x[N]};function i(N,X){var j={seen:[],stylize:r};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),y(X)?j.showHidden=X:X&&B._extend(j,X),T(j.showHidden)&&(j.showHidden=!1),T(j.depth)&&(j.depth=2),T(j.colors)&&(j.colors=!1),T(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=a),f(j,N,j.depth)}B.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(N,X){var j=i.styles[X];return j?"["+i.colors[j][0]+"m"+N+"["+i.colors[j][1]+"m":N}function r(N,X){return N}function n(N){var X={};return N.forEach(function(j,ee){X[j]=!0}),X}function f(N,X,j){if(N.customInspect&&X&&k(X.inspect)&&X.inspect!==B.inspect&&!(X.constructor&&X.constructor.prototype===X)){var ee=X.inspect(j,N);return M(ee)||(ee=f(N,ee,j)),ee}var q=l(N,X);if(q)return q;var G=Object.keys(X),J=n(G);if(N.showHidden&&(G=Object.getOwnPropertyNames(X)),S(X)&&(G.indexOf("message")>=0||G.indexOf("description")>=0))return o(X);if(G.length===0){if(k(X)){var le=X.name?": "+X.name:"";return N.stylize("[Function"+le+"]","special")}if(_(X))return N.stylize(RegExp.prototype.toString.call(X),"regexp");if(L(X))return N.stylize(Date.prototype.toString.call(X),"date");if(S(X))return o(X)}var fe="",se=!1,V=["{","}"];if(p(X)&&(se=!0,V=["[","]"]),k(X)){var Y=X.name?": "+X.name:"";fe=" [Function"+Y+"]"}if(_(X)&&(fe=" "+RegExp.prototype.toString.call(X)),L(X)&&(fe=" "+Date.prototype.toUTCString.call(X)),S(X)&&(fe=" "+o(X)),G.length===0&&(!se||X.length==0))return V[0]+fe+V[1];if(j<0)return _(X)?N.stylize(RegExp.prototype.toString.call(X),"regexp"):N.stylize("[Object]","special");N.seen.push(X);var ne;return se?ne=c(N,X,j,J,G):ne=G.map(function(te){return v(N,X,j,J,te,se)}),N.seen.pop(),d(ne,fe,V)}function l(N,X){if(T(X))return N.stylize("undefined","undefined");if(M(X)){var j="'"+JSON.stringify(X).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return N.stylize(j,"string")}if(b(X))return N.stylize(""+X,"number");if(y(X))return N.stylize(""+X,"boolean");if(g(X))return N.stylize("null","null")}function o(N){return"["+Error.prototype.toString.call(N)+"]"}function c(N,X,j,ee,q){for(var G=[],J=0,le=X.length;J<le;++J)U(X,String(J))?G.push(v(N,X,j,ee,String(J),!0)):G.push("");return q.forEach(function(fe){fe.match(/^\d+$/)||G.push(v(N,X,j,ee,fe,!0))}),G}function v(N,X,j,ee,q,G){var J,le,fe;if(fe=Object.getOwnPropertyDescriptor(X,q)||{value:X[q]},fe.get?fe.set?le=N.stylize("[Getter/Setter]","special"):le=N.stylize("[Getter]","special"):fe.set&&(le=N.stylize("[Setter]","special")),U(ee,q)||(J="["+q+"]"),le||(N.seen.indexOf(fe.value)<0?(g(j)?le=f(N,fe.value,null):le=f(N,fe.value,j-1),le.indexOf(`
`)>-1&&(G?le=le.split(`
`).map(function(se){return"  "+se}).join(`
`).substr(2):le=`
`+le.split(`
`).map(function(se){return"   "+se}).join(`
`))):le=N.stylize("[Circular]","special")),T(J)){if(G&&q.match(/^\d+$/))return le;J=JSON.stringify(""+q),J.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(J=J.substr(1,J.length-2),J=N.stylize(J,"name")):(J=J.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),J=N.stylize(J,"string"))}return J+": "+le}function d(N,X,j){var ee=N.reduce(function(q,G){return G.indexOf(`
`)>=0,q+G.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ee>60?j[0]+(X===""?"":X+`
 `)+" "+N.join(`,
  `)+" "+j[1]:j[0]+X+" "+N.join(", ")+" "+j[1]}function p(N){return Array.isArray(N)}B.isArray=p;function y(N){return typeof N=="boolean"}B.isBoolean=y;function g(N){return N===null}B.isNull=g;function A(N){return N==null}B.isNullOrUndefined=A;function b(N){return typeof N=="number"}B.isNumber=b;function M(N){return typeof N=="string"}B.isString=M;function w(N){return typeof N=="symbol"}B.isSymbol=w;function T(N){return N===void 0}B.isUndefined=T;function _(N){return h(N)&&O(N)==="[object RegExp]"}B.isRegExp=_;function h(N){return typeof N=="object"&&N!==null}B.isObject=h;function L(N){return h(N)&&O(N)==="[object Date]"}B.isDate=L;function S(N){return h(N)&&(O(N)==="[object Error]"||N instanceof Error)}B.isError=S;function k(N){return typeof N=="function"}B.isFunction=k;function P(N){return N===null||typeof N=="boolean"||typeof N=="number"||typeof N=="string"||typeof N=="symbol"||typeof N=="undefined"}B.isPrimitive=P,B.isBuffer=e("./support/isBuffer");function O(N){return Object.prototype.toString.call(N)}function F(N){return N<10?"0"+N.toString(10):N.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var N=new Date,X=[F(N.getHours()),F(N.getMinutes()),F(N.getSeconds())].join(":");return[N.getDate(),D[N.getMonth()],X].join(" ")}B.log=function(){console.log("%s - %s",R(),B.format.apply(B,arguments))},B.inherits=e("inherits"),B._extend=function(N,X){if(!X||!h(X))return N;for(var j=Object.keys(X),ee=j.length;ee--;)N[j[ee]]=X[j[ee]];return N};function U(N,X){return Object.prototype.hasOwnProperty.call(N,X)}}).call(this)}).call(this,e("_process"),typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(e,I,B){B.byteLength=r,B.toByteArray=f,B.fromByteArray=c;for(var u=[],s=[],m=typeof Uint8Array!="undefined"?Uint8Array:Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=x.length;t<i;++t)u[t]=x[t],s[x.charCodeAt(t)]=t;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63;function a(v){var d=v.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=v.indexOf("=");p===-1&&(p=d);var y=p===d?0:4-p%4;return[p,y]}function r(v){var d=a(v),p=d[0],y=d[1];return(p+y)*3/4-y}function n(v,d,p){return(d+p)*3/4-p}function f(v){var d,p=a(v),y=p[0],g=p[1],A=new m(n(v,y,g)),b=0,M=g>0?y-4:y,w;for(w=0;w<M;w+=4)d=s[v.charCodeAt(w)]<<18|s[v.charCodeAt(w+1)]<<12|s[v.charCodeAt(w+2)]<<6|s[v.charCodeAt(w+3)],A[b++]=d>>16&255,A[b++]=d>>8&255,A[b++]=d&255;return g===2&&(d=s[v.charCodeAt(w)]<<2|s[v.charCodeAt(w+1)]>>4,A[b++]=d&255),g===1&&(d=s[v.charCodeAt(w)]<<10|s[v.charCodeAt(w+1)]<<4|s[v.charCodeAt(w+2)]>>2,A[b++]=d>>8&255,A[b++]=d&255),A}function l(v){return u[v>>18&63]+u[v>>12&63]+u[v>>6&63]+u[v&63]}function o(v,d,p){for(var y,g=[],A=d;A<p;A+=3)y=(v[A]<<16&16711680)+(v[A+1]<<8&65280)+(v[A+2]&255),g.push(l(y));return g.join("")}function c(v){for(var d,p=v.length,y=p%3,g=[],A=16383,b=0,M=p-y;b<M;b+=A)g.push(o(v,b,b+A>M?M:b+A));return y===1?(d=v[p-1],g.push(u[d>>2]+u[d<<4&63]+"==")):y===2&&(d=(v[p-2]<<8)+v[p-1],g.push(u[d>>10]+u[d>>4&63]+u[d<<2&63]+"=")),g.join("")}},{}],80:[function(e,I,B){function u(a,r,n,f,l){for(var o=l+1;f<=l;){var c=f+l>>>1,v=a[c],d=n!==void 0?n(v,r):v-r;d>=0?(o=c,l=c-1):f=c+1}return o}function s(a,r,n,f,l){for(var o=l+1;f<=l;){var c=f+l>>>1,v=a[c],d=n!==void 0?n(v,r):v-r;d>0?(o=c,l=c-1):f=c+1}return o}function m(a,r,n,f,l){for(var o=f-1;f<=l;){var c=f+l>>>1,v=a[c],d=n!==void 0?n(v,r):v-r;d<0?(o=c,f=c+1):l=c-1}return o}function x(a,r,n,f,l){for(var o=f-1;f<=l;){var c=f+l>>>1,v=a[c],d=n!==void 0?n(v,r):v-r;d<=0?(o=c,f=c+1):l=c-1}return o}function t(a,r,n,f,l){for(;f<=l;){var o=f+l>>>1,c=a[o],v=n!==void 0?n(c,r):c-r;if(v===0)return o;v<=0?f=o+1:l=o-1}return-1}function i(a,r,n,f,l,o){return typeof n=="function"?o(a,r,n,f===void 0?0:f|0,l===void 0?a.length-1:l|0):o(a,r,void 0,n===void 0?0:n|0,f===void 0?a.length-1:f|0)}I.exports={ge:function(a,r,n,f,l){return i(a,r,n,f,l,u)},gt:function(a,r,n,f,l){return i(a,r,n,f,l,s)},lt:function(a,r,n,f,l){return i(a,r,n,f,l,m)},le:function(a,r,n,f,l){return i(a,r,n,f,l,x)},eq:function(a,r,n,f,l){return i(a,r,n,f,l,t)}}},{}],81:[function(e,I,B){var u=32;B.INT_BITS=u,B.INT_MAX=2147483647,B.INT_MIN=-1<<u-1,B.sign=function(x){return(x>0)-(x<0)},B.abs=function(x){var t=x>>u-1;return(x^t)-t},B.min=function(x,t){return t^(x^t)&-(x<t)},B.max=function(x,t){return x^(x^t)&-(x<t)},B.isPow2=function(x){return!(x&x-1)&&!!x},B.log2=function(x){var t,i;return t=(x>65535)<<4,x>>>=t,i=(x>255)<<3,x>>>=i,t|=i,i=(x>15)<<2,x>>>=i,t|=i,i=(x>3)<<1,x>>>=i,t|=i,t|x>>1},B.log10=function(x){return x>=1e9?9:x>=1e8?8:x>=1e7?7:x>=1e6?6:x>=1e5?5:x>=1e4?4:x>=1e3?3:x>=100?2:x>=10?1:0},B.popCount=function(x){return x=x-(x>>>1&1431655765),x=(x&858993459)+(x>>>2&858993459),(x+(x>>>4)&252645135)*16843009>>>24};function s(x){var t=32;return x&=-x,x&&t--,x&65535&&(t-=16),x&16711935&&(t-=8),x&252645135&&(t-=4),x&858993459&&(t-=2),x&1431655765&&(t-=1),t}B.countTrailingZeros=s,B.nextPow2=function(x){return x+=x===0,--x,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x+1},B.prevPow2=function(x){return x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x-(x>>>1)},B.parity=function(x){return x^=x>>>16,x^=x>>>8,x^=x>>>4,x&=15,27030>>>x&1};var m=new Array(256);(function(x){for(var t=0;t<256;++t){var i=t,a=t,r=7;for(i>>>=1;i;i>>>=1)a<<=1,a|=i&1,--r;x[t]=a<<r&255}})(m),B.reverse=function(x){return m[x&255]<<24|m[x>>>8&255]<<16|m[x>>>16&255]<<8|m[x>>>24&255]},B.interleave2=function(x,t){return x&=65535,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,x|t<<1},B.deinterleave2=function(x,t){return x=x>>>t&1431655765,x=(x|x>>>1)&858993459,x=(x|x>>>2)&252645135,x=(x|x>>>4)&16711935,x=(x|x>>>16)&65535,x<<16>>16},B.interleave3=function(x,t,i){return x&=1023,x=(x|x<<16)&4278190335,x=(x|x<<8)&251719695,x=(x|x<<4)&3272356035,x=(x|x<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,x|=t<<1,i&=1023,i=(i|i<<16)&4278190335,i=(i|i<<8)&251719695,i=(i|i<<4)&3272356035,i=(i|i<<2)&1227133513,x|i<<2},B.deinterleave3=function(x,t){return x=x>>>t&1227133513,x=(x|x>>>2)&3272356035,x=(x|x>>>4)&251719695,x=(x|x>>>8)&4278190335,x=(x|x>>>16)&1023,x<<22>>22},B.nextCombination=function(x){var t=x|x-1;return t+1|(~t&-~t)-1>>>s(x)+1}},{}],82:[function(e,I,B){var u=e("clamp");I.exports=m;var s=1e20;function m(i,a){a||(a={});var r=a.cutoff==null?.25:a.cutoff,n=a.radius==null?8:a.radius,f=a.channel||0,l,o,c,v,d,p,y,g,A,b,M;if(ArrayBuffer.isView(i)||Array.isArray(i)){if(!a.width||!a.height)throw Error("For raw data width and height should be provided by options");l=a.width,o=a.height,v=i,a.stride?p=a.stride:p=Math.floor(i.length/l/o)}else window.HTMLCanvasElement&&i instanceof window.HTMLCanvasElement?(g=i,y=g.getContext("2d"),l=g.width,o=g.height,A=y.getImageData(0,0,l,o),v=A.data,p=4):window.CanvasRenderingContext2D&&i instanceof window.CanvasRenderingContext2D?(g=i.canvas,y=i,l=g.width,o=g.height,A=y.getImageData(0,0,l,o),v=A.data,p=4):window.ImageData&&i instanceof window.ImageData&&(A=i,l=i.width,o=i.height,v=A.data,p=4);if(c=Math.max(l,o),window.Uint8ClampedArray&&v instanceof window.Uint8ClampedArray||window.Uint8Array&&v instanceof window.Uint8Array)for(d=v,v=Array(l*o),b=0,M=d.length;b<M;b++)v[b]=d[b*p+f]/255;else if(p!==1)throw Error("Raw data can have only 1 value per pixel");var w=Array(l*o),T=Array(l*o),_=Array(c),h=Array(c),L=Array(c+1),S=Array(c);for(b=0,M=l*o;b<M;b++){var k=v[b];w[b]=k===1?0:k===0?s:Math.pow(Math.max(0,.5-k),2),T[b]=k===1?s:k===0?0:Math.pow(Math.max(0,k-.5),2)}x(w,l,o,_,h,S,L),x(T,l,o,_,h,S,L);var P=window.Float32Array?new Float32Array(l*o):new Array(l*o);for(b=0,M=l*o;b<M;b++)P[b]=u(1-((w[b]-T[b])/n+r),0,1);return P}function x(i,a,r,n,f,l,o){for(var c=0;c<a;c++){for(var v=0;v<r;v++)n[v]=i[v*a+c];for(t(n,f,l,o,r),v=0;v<r;v++)i[v*a+c]=f[v]}for(v=0;v<r;v++){for(c=0;c<a;c++)n[c]=i[v*a+c];for(t(n,f,l,o,a),c=0;c<a;c++)i[v*a+c]=Math.sqrt(f[c])}}function t(i,a,r,n,f){r[0]=0,n[0]=-s,n[1]=+s;for(var l=1,o=0;l<f;l++){for(var c=(i[l]+l*l-(i[r[o]]+r[o]*r[o]))/(2*l-2*r[o]);c<=n[o];)o--,c=(i[l]+l*l-(i[r[o]]+r[o]*r[o]))/(2*l-2*r[o]);o++,r[o]=l,n[o]=c,n[o+1]=+s}for(l=0,o=0;l<f;l++){for(;n[o+1]<l;)o++;a[l]=(l-r[o])*(l-r[o])+i[r[o]]}}},{clamp:86}],83:[function(e,I,B){},{}],84:[function(e,I,B){var u=typeof Reflect=="object"?Reflect:null,s=u&&typeof u.apply=="function"?u.apply:function(b,M,w){return Function.prototype.apply.call(b,M,w)},m;u&&typeof u.ownKeys=="function"?m=u.ownKeys:Object.getOwnPropertySymbols?m=function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:m=function(b){return Object.getOwnPropertyNames(b)};function x(A){console&&console.warn&&console.warn(A)}var t=Number.isNaN||function(b){return b!==b};function i(){i.init.call(this)}I.exports=i,I.exports.once=g,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function r(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(A){if(typeof A!="number"||A<0||t(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");a=A}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||t(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};function n(A){return A._maxListeners===void 0?i.defaultMaxListeners:A._maxListeners}i.prototype.getMaxListeners=function(){return n(this)},i.prototype.emit=function(b){for(var M=[],w=1;w<arguments.length;w++)M.push(arguments[w]);var T=b==="error",_=this._events;if(_!==void 0)T=T&&_.error===void 0;else if(!T)return!1;if(T){var h;if(M.length>0&&(h=M[0]),h instanceof Error)throw h;var L=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw L.context=h,L}var S=_[b];if(S===void 0)return!1;if(typeof S=="function")s(S,this,M);else for(var k=S.length,P=d(S,k),w=0;w<k;++w)s(P[w],this,M);return!0};function f(A,b,M,w){var T,_,h;if(r(M),_=A._events,_===void 0?(_=A._events=Object.create(null),A._eventsCount=0):(_.newListener!==void 0&&(A.emit("newListener",b,M.listener?M.listener:M),_=A._events),h=_[b]),h===void 0)h=_[b]=M,++A._eventsCount;else if(typeof h=="function"?h=_[b]=w?[M,h]:[h,M]:w?h.unshift(M):h.push(M),T=n(A),T>0&&h.length>T&&!h.warned){h.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=A,L.type=b,L.count=h.length,x(L)}return A}i.prototype.addListener=function(b,M){return f(this,b,M,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(b,M){return f(this,b,M,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(A,b,M){var w={fired:!1,wrapFn:void 0,target:A,type:b,listener:M},T=l.bind(w);return T.listener=M,w.wrapFn=T,T}i.prototype.once=function(b,M){return r(M),this.on(b,o(this,b,M)),this},i.prototype.prependOnceListener=function(b,M){return r(M),this.prependListener(b,o(this,b,M)),this},i.prototype.removeListener=function(b,M){var w,T,_,h,L;if(r(M),T=this._events,T===void 0)return this;if(w=T[b],w===void 0)return this;if(w===M||w.listener===M)--this._eventsCount==0?this._events=Object.create(null):(delete T[b],T.removeListener&&this.emit("removeListener",b,w.listener||M));else if(typeof w!="function"){for(_=-1,h=w.length-1;h>=0;h--)if(w[h]===M||w[h].listener===M){L=w[h].listener,_=h;break}if(_<0)return this;_===0?w.shift():p(w,_),w.length===1&&(T[b]=w[0]),T.removeListener!==void 0&&this.emit("removeListener",b,L||M)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(b){var M,w,T;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[b]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete w[b]),this;if(arguments.length===0){var _=Object.keys(w),h;for(T=0;T<_.length;++T)h=_[T],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=w[b],typeof M=="function")this.removeListener(b,M);else if(M!==void 0)for(T=M.length-1;T>=0;T--)this.removeListener(b,M[T]);return this};function c(A,b,M){var w=A._events;if(w===void 0)return[];var T=w[b];return T===void 0?[]:typeof T=="function"?M?[T.listener||T]:[T]:M?y(T):d(T,T.length)}i.prototype.listeners=function(b){return c(this,b,!0)},i.prototype.rawListeners=function(b){return c(this,b,!1)},i.listenerCount=function(A,b){return typeof A.listenerCount=="function"?A.listenerCount(b):v.call(A,b)},i.prototype.listenerCount=v;function v(A){var b=this._events;if(b!==void 0){var M=b[A];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]};function d(A,b){for(var M=new Array(b),w=0;w<b;++w)M[w]=A[w];return M}function p(A,b){for(;b+1<A.length;b++)A[b]=A[b+1];A.pop()}function y(A){for(var b=new Array(A.length),M=0;M<b.length;++M)b[M]=A[M].listener||A[M];return b}function g(A,b){return new Promise(function(M,w){function T(){_!==void 0&&A.removeListener("error",_),M([].slice.call(arguments))}var _;b!=="error"&&(_=function(L){A.removeListener(b,T),w(L)},A.once("error",_)),A.once(b,T)})}},{}],85:[function(e,I,B){(function(u){(function(){var s=e("base64-js"),m=e("ieee754");B.Buffer=a,B.SlowBuffer=y,B.INSPECT_MAX_BYTES=50;var x=2147483647;B.kMaxLength=x,a.TYPED_ARRAY_SUPPORT=t(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var ie=new Uint8Array(1);return ie.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ie.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function i(ie){if(ie>x)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var oe=new Uint8Array(ie);return oe.__proto__=a.prototype,oe}function a(ie,oe,ue){if(typeof ie=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(ie)}return r(ie,oe,ue)}typeof Symbol!="undefined"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192;function r(ie,oe,ue){if(typeof ie=="string")return o(ie,oe);if(ArrayBuffer.isView(ie))return c(ie);if(ie==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if($(ie,ArrayBuffer)||ie&&$(ie.buffer,ArrayBuffer))return v(ie,oe,ue);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var xe=ie.valueOf&&ie.valueOf();if(xe!=null&&xe!==ie)return a.from(xe,oe,ue);var he=d(ie);if(he)return he;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return a.from(ie[Symbol.toPrimitive]("string"),oe,ue);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}a.from=function(ie,oe,ue){return r(ie,oe,ue)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array;function n(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function f(ie,oe,ue){return n(ie),ie<=0?i(ie):oe!==void 0?typeof ue=="string"?i(ie).fill(oe,ue):i(ie).fill(oe):i(ie)}a.alloc=function(ie,oe,ue){return f(ie,oe,ue)};function l(ie){return n(ie),i(ie<0?0:p(ie)|0)}a.allocUnsafe=function(ie){return l(ie)},a.allocUnsafeSlow=function(ie){return l(ie)};function o(ie,oe){if((typeof oe!="string"||oe==="")&&(oe="utf8"),!a.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);var ue=g(ie,oe)|0,xe=i(ue),he=xe.write(ie,oe);return he!==ue&&(xe=xe.slice(0,he)),xe}function c(ie){for(var oe=ie.length<0?0:p(ie.length)|0,ue=i(oe),xe=0;xe<oe;xe+=1)ue[xe]=ie[xe]&255;return ue}function v(ie,oe,ue){if(oe<0||ie.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<oe+(ue||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return oe===void 0&&ue===void 0?xe=new Uint8Array(ie):ue===void 0?xe=new Uint8Array(ie,oe):xe=new Uint8Array(ie,oe,ue),xe.__proto__=a.prototype,xe}function d(ie){if(a.isBuffer(ie)){var oe=p(ie.length)|0,ue=i(oe);return ue.length===0||ie.copy(ue,0,0,oe),ue}if(ie.length!==void 0)return typeof ie.length!="number"||ae(ie.length)?i(0):c(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return c(ie.data)}function p(ie){if(ie>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return ie|0}function y(ie){return+ie!=ie&&(ie=0),a.alloc(+ie)}a.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==a.prototype},a.compare=function(oe,ue){if($(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),$(ue,Uint8Array)&&(ue=a.from(ue,ue.offset,ue.byteLength)),!a.isBuffer(oe)||!a.isBuffer(ue))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===ue)return 0;for(var xe=oe.length,he=ue.length,me=0,be=Math.min(xe,he);me<be;++me)if(oe[me]!==ue[me]){xe=oe[me],he=ue[me];break}return xe<he?-1:he<xe?1:0},a.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(oe,ue){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return a.alloc(0);var xe;if(ue===void 0)for(ue=0,xe=0;xe<oe.length;++xe)ue+=oe[xe].length;var he=a.allocUnsafe(ue),me=0;for(xe=0;xe<oe.length;++xe){var be=oe[xe];if($(be,Uint8Array)&&(be=a.from(be)),!a.isBuffer(be))throw new TypeError('"list" argument must be an Array of Buffers');be.copy(he,me),me+=be.length}return he};function g(ie,oe){if(a.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||$(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var ue=ie.length,xe=arguments.length>2&&arguments[2]===!0;if(!xe&&ue===0)return 0;for(var he=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return ue;case"utf8":case"utf-8":return V(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue*2;case"hex":return ue>>>1;case"base64":return te(ie).length;default:if(he)return xe?-1:V(ie).length;oe=(""+oe).toLowerCase(),he=!0}}a.byteLength=g;function A(ie,oe,ue){var xe=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((ue===void 0||ue>this.length)&&(ue=this.length),ue<=0)||(ue>>>=0,oe>>>=0,ue<=oe))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return N(this,oe,ue);case"utf8":case"utf-8":return O(this,oe,ue);case"ascii":return R(this,oe,ue);case"latin1":case"binary":return U(this,oe,ue);case"base64":return P(this,oe,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,oe,ue);default:if(xe)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),xe=!0}}a.prototype._isBuffer=!0;function b(ie,oe,ue){var xe=ie[oe];ie[oe]=ie[ue],ie[ue]=xe}a.prototype.swap16=function(){var oe=this.length;if(oe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ue=0;ue<oe;ue+=2)b(this,ue,ue+1);return this},a.prototype.swap32=function(){var oe=this.length;if(oe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ue=0;ue<oe;ue+=4)b(this,ue,ue+3),b(this,ue+1,ue+2);return this},a.prototype.swap64=function(){var oe=this.length;if(oe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ue=0;ue<oe;ue+=8)b(this,ue,ue+7),b(this,ue+1,ue+6),b(this,ue+2,ue+5),b(this,ue+3,ue+4);return this},a.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?O(this,0,oe):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(oe){if(!a.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe?!0:a.compare(this,oe)===0},a.prototype.inspect=function(){var oe="",ue=B.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,ue).replace(/(.{2})/g,"$1 ").trim(),this.length>ue&&(oe+=" ... "),"<Buffer "+oe+">"},a.prototype.compare=function(oe,ue,xe,he,me){if($(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),!a.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof oe);if(ue===void 0&&(ue=0),xe===void 0&&(xe=oe?oe.length:0),he===void 0&&(he=0),me===void 0&&(me=this.length),ue<0||xe>oe.length||he<0||me>this.length)throw new RangeError("out of range index");if(he>=me&&ue>=xe)return 0;if(he>=me)return-1;if(ue>=xe)return 1;if(ue>>>=0,xe>>>=0,he>>>=0,me>>>=0,this===oe)return 0;for(var be=me-he,Ce=xe-ue,Se=Math.min(be,Ce),Be=this.slice(he,me),Ye=oe.slice(ue,xe),Xe=0;Xe<Se;++Xe)if(Be[Xe]!==Ye[Xe]){be=Be[Xe],Ce=Ye[Xe];break}return be<Ce?-1:Ce<be?1:0};function M(ie,oe,ue,xe,he){if(ie.length===0)return-1;if(typeof ue=="string"?(xe=ue,ue=0):ue>2147483647?ue=2147483647:ue<-2147483648&&(ue=-2147483648),ue=+ue,ae(ue)&&(ue=he?0:ie.length-1),ue<0&&(ue=ie.length+ue),ue>=ie.length){if(he)return-1;ue=ie.length-1}else if(ue<0)if(he)ue=0;else return-1;if(typeof oe=="string"&&(oe=a.from(oe,xe)),a.isBuffer(oe))return oe.length===0?-1:w(ie,oe,ue,xe,he);if(typeof oe=="number")return oe=oe&255,typeof Uint8Array.prototype.indexOf=="function"?he?Uint8Array.prototype.indexOf.call(ie,oe,ue):Uint8Array.prototype.lastIndexOf.call(ie,oe,ue):w(ie,[oe],ue,xe,he);throw new TypeError("val must be string, number or Buffer")}function w(ie,oe,ue,xe,he){var me=1,be=ie.length,Ce=oe.length;if(xe!==void 0&&(xe=String(xe).toLowerCase(),xe==="ucs2"||xe==="ucs-2"||xe==="utf16le"||xe==="utf-16le")){if(ie.length<2||oe.length<2)return-1;me=2,be/=2,Ce/=2,ue/=2}function Se(Ie,Ze){return me===1?Ie[Ze]:Ie.readUInt16BE(Ze*me)}var Be;if(he){var Ye=-1;for(Be=ue;Be<be;Be++)if(Se(ie,Be)===Se(oe,Ye===-1?0:Be-Ye)){if(Ye===-1&&(Ye=Be),Be-Ye+1===Ce)return Ye*me}else Ye!==-1&&(Be-=Be-Ye),Ye=-1}else for(ue+Ce>be&&(ue=be-Ce),Be=ue;Be>=0;Be--){for(var Xe=!0,Te=0;Te<Ce;Te++)if(Se(ie,Be+Te)!==Se(oe,Te)){Xe=!1;break}if(Xe)return Be}return-1}a.prototype.includes=function(oe,ue,xe){return this.indexOf(oe,ue,xe)!==-1},a.prototype.indexOf=function(oe,ue,xe){return M(this,oe,ue,xe,!0)},a.prototype.lastIndexOf=function(oe,ue,xe){return M(this,oe,ue,xe,!1)};function T(ie,oe,ue,xe){ue=Number(ue)||0;var he=ie.length-ue;xe?(xe=Number(xe),xe>he&&(xe=he)):xe=he;var me=oe.length;xe>me/2&&(xe=me/2);for(var be=0;be<xe;++be){var Ce=parseInt(oe.substr(be*2,2),16);if(ae(Ce))return be;ie[ue+be]=Ce}return be}function _(ie,oe,ue,xe){return K(V(oe,ie.length-ue),ie,ue,xe)}function h(ie,oe,ue,xe){return K(Y(oe),ie,ue,xe)}function L(ie,oe,ue,xe){return h(ie,oe,ue,xe)}function S(ie,oe,ue,xe){return K(te(oe),ie,ue,xe)}function k(ie,oe,ue,xe){return K(ne(oe,ie.length-ue),ie,ue,xe)}a.prototype.write=function(oe,ue,xe,he){if(ue===void 0)he="utf8",xe=this.length,ue=0;else if(xe===void 0&&typeof ue=="string")he=ue,xe=this.length,ue=0;else if(isFinite(ue))ue=ue>>>0,isFinite(xe)?(xe=xe>>>0,he===void 0&&(he="utf8")):(he=xe,xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var me=this.length-ue;if((xe===void 0||xe>me)&&(xe=me),oe.length>0&&(xe<0||ue<0)||ue>this.length)throw new RangeError("Attempt to write outside buffer bounds");he||(he="utf8");for(var be=!1;;)switch(he){case"hex":return T(this,oe,ue,xe);case"utf8":case"utf-8":return _(this,oe,ue,xe);case"ascii":return h(this,oe,ue,xe);case"latin1":case"binary":return L(this,oe,ue,xe);case"base64":return S(this,oe,ue,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,oe,ue,xe);default:if(be)throw new TypeError("Unknown encoding: "+he);he=(""+he).toLowerCase(),be=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(ie,oe,ue){return oe===0&&ue===ie.length?s.fromByteArray(ie):s.fromByteArray(ie.slice(oe,ue))}function O(ie,oe,ue){ue=Math.min(ie.length,ue);for(var xe=[],he=oe;he<ue;){var me=ie[he],be=null,Ce=me>239?4:me>223?3:me>191?2:1;if(he+Ce<=ue){var Se,Be,Ye,Xe;switch(Ce){case 1:me<128&&(be=me);break;case 2:Se=ie[he+1],(Se&192)==128&&(Xe=(me&31)<<6|Se&63,Xe>127&&(be=Xe));break;case 3:Se=ie[he+1],Be=ie[he+2],(Se&192)==128&&(Be&192)==128&&(Xe=(me&15)<<12|(Se&63)<<6|Be&63,Xe>2047&&(Xe<55296||Xe>57343)&&(be=Xe));break;case 4:Se=ie[he+1],Be=ie[he+2],Ye=ie[he+3],(Se&192)==128&&(Be&192)==128&&(Ye&192)==128&&(Xe=(me&15)<<18|(Se&63)<<12|(Be&63)<<6|Ye&63,Xe>65535&&Xe<1114112&&(be=Xe))}}be===null?(be=65533,Ce=1):be>65535&&(be-=65536,xe.push(be>>>10&1023|55296),be=56320|be&1023),xe.push(be),he+=Ce}return D(xe)}var F=4096;function D(ie){var oe=ie.length;if(oe<=F)return String.fromCharCode.apply(String,ie);for(var ue="",xe=0;xe<oe;)ue+=String.fromCharCode.apply(String,ie.slice(xe,xe+=F));return ue}function R(ie,oe,ue){var xe="";ue=Math.min(ie.length,ue);for(var he=oe;he<ue;++he)xe+=String.fromCharCode(ie[he]&127);return xe}function U(ie,oe,ue){var xe="";ue=Math.min(ie.length,ue);for(var he=oe;he<ue;++he)xe+=String.fromCharCode(ie[he]);return xe}function N(ie,oe,ue){var xe=ie.length;(!oe||oe<0)&&(oe=0),(!ue||ue<0||ue>xe)&&(ue=xe);for(var he="",me=oe;me<ue;++me)he+=se(ie[me]);return he}function X(ie,oe,ue){for(var xe=ie.slice(oe,ue),he="",me=0;me<xe.length;me+=2)he+=String.fromCharCode(xe[me]+xe[me+1]*256);return he}a.prototype.slice=function(oe,ue){var xe=this.length;oe=~~oe,ue=ue===void 0?xe:~~ue,oe<0?(oe+=xe,oe<0&&(oe=0)):oe>xe&&(oe=xe),ue<0?(ue+=xe,ue<0&&(ue=0)):ue>xe&&(ue=xe),ue<oe&&(ue=oe);var he=this.subarray(oe,ue);return he.__proto__=a.prototype,he};function j(ie,oe,ue){if(ie%1!=0||ie<0)throw new RangeError("offset is not uint");if(ie+oe>ue)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(oe,ue,xe){oe=oe>>>0,ue=ue>>>0,xe||j(oe,ue,this.length);for(var he=this[oe],me=1,be=0;++be<ue&&(me*=256);)he+=this[oe+be]*me;return he},a.prototype.readUIntBE=function(oe,ue,xe){oe=oe>>>0,ue=ue>>>0,xe||j(oe,ue,this.length);for(var he=this[oe+--ue],me=1;ue>0&&(me*=256);)he+=this[oe+--ue]*me;return he},a.prototype.readUInt8=function(oe,ue){return oe=oe>>>0,ue||j(oe,1,this.length),this[oe]},a.prototype.readUInt16LE=function(oe,ue){return oe=oe>>>0,ue||j(oe,2,this.length),this[oe]|this[oe+1]<<8},a.prototype.readUInt16BE=function(oe,ue){return oe=oe>>>0,ue||j(oe,2,this.length),this[oe]<<8|this[oe+1]},a.prototype.readUInt32LE=function(oe,ue){return oe=oe>>>0,ue||j(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+this[oe+3]*16777216},a.prototype.readUInt32BE=function(oe,ue){return oe=oe>>>0,ue||j(oe,4,this.length),this[oe]*16777216+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},a.prototype.readIntLE=function(oe,ue,xe){oe=oe>>>0,ue=ue>>>0,xe||j(oe,ue,this.length);for(var he=this[oe],me=1,be=0;++be<ue&&(me*=256);)he+=this[oe+be]*me;return me*=128,he>=me&&(he-=Math.pow(2,8*ue)),he},a.prototype.readIntBE=function(oe,ue,xe){oe=oe>>>0,ue=ue>>>0,xe||j(oe,ue,this.length);for(var he=ue,me=1,be=this[oe+--he];he>0&&(me*=256);)be+=this[oe+--he]*me;return me*=128,be>=me&&(be-=Math.pow(2,8*ue)),be},a.prototype.readInt8=function(oe,ue){return oe=oe>>>0,ue||j(oe,1,this.length),this[oe]&128?(255-this[oe]+1)*-1:this[oe]},a.prototype.readInt16LE=function(oe,ue){oe=oe>>>0,ue||j(oe,2,this.length);var xe=this[oe]|this[oe+1]<<8;return xe&32768?xe|4294901760:xe},a.prototype.readInt16BE=function(oe,ue){oe=oe>>>0,ue||j(oe,2,this.length);var xe=this[oe+1]|this[oe]<<8;return xe&32768?xe|4294901760:xe},a.prototype.readInt32LE=function(oe,ue){return oe=oe>>>0,ue||j(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},a.prototype.readInt32BE=function(oe,ue){return oe=oe>>>0,ue||j(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},a.prototype.readFloatLE=function(oe,ue){return oe=oe>>>0,ue||j(oe,4,this.length),m.read(this,oe,!0,23,4)},a.prototype.readFloatBE=function(oe,ue){return oe=oe>>>0,ue||j(oe,4,this.length),m.read(this,oe,!1,23,4)},a.prototype.readDoubleLE=function(oe,ue){return oe=oe>>>0,ue||j(oe,8,this.length),m.read(this,oe,!0,52,8)},a.prototype.readDoubleBE=function(oe,ue){return oe=oe>>>0,ue||j(oe,8,this.length),m.read(this,oe,!1,52,8)};function ee(ie,oe,ue,xe,he,me){if(!a.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>he||oe<me)throw new RangeError('"value" argument is out of bounds');if(ue+xe>ie.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(oe,ue,xe,he){if(oe=+oe,ue=ue>>>0,xe=xe>>>0,!he){var me=Math.pow(2,8*xe)-1;ee(this,oe,ue,xe,me,0)}var be=1,Ce=0;for(this[ue]=oe&255;++Ce<xe&&(be*=256);)this[ue+Ce]=oe/be&255;return ue+xe},a.prototype.writeUIntBE=function(oe,ue,xe,he){if(oe=+oe,ue=ue>>>0,xe=xe>>>0,!he){var me=Math.pow(2,8*xe)-1;ee(this,oe,ue,xe,me,0)}var be=xe-1,Ce=1;for(this[ue+be]=oe&255;--be>=0&&(Ce*=256);)this[ue+be]=oe/Ce&255;return ue+xe},a.prototype.writeUInt8=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,1,255,0),this[ue]=oe&255,ue+1},a.prototype.writeUInt16LE=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,2,65535,0),this[ue]=oe&255,this[ue+1]=oe>>>8,ue+2},a.prototype.writeUInt16BE=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,2,65535,0),this[ue]=oe>>>8,this[ue+1]=oe&255,ue+2},a.prototype.writeUInt32LE=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,4,4294967295,0),this[ue+3]=oe>>>24,this[ue+2]=oe>>>16,this[ue+1]=oe>>>8,this[ue]=oe&255,ue+4},a.prototype.writeUInt32BE=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,4,4294967295,0),this[ue]=oe>>>24,this[ue+1]=oe>>>16,this[ue+2]=oe>>>8,this[ue+3]=oe&255,ue+4},a.prototype.writeIntLE=function(oe,ue,xe,he){if(oe=+oe,ue=ue>>>0,!he){var me=Math.pow(2,8*xe-1);ee(this,oe,ue,xe,me-1,-me)}var be=0,Ce=1,Se=0;for(this[ue]=oe&255;++be<xe&&(Ce*=256);)oe<0&&Se===0&&this[ue+be-1]!==0&&(Se=1),this[ue+be]=(oe/Ce>>0)-Se&255;return ue+xe},a.prototype.writeIntBE=function(oe,ue,xe,he){if(oe=+oe,ue=ue>>>0,!he){var me=Math.pow(2,8*xe-1);ee(this,oe,ue,xe,me-1,-me)}var be=xe-1,Ce=1,Se=0;for(this[ue+be]=oe&255;--be>=0&&(Ce*=256);)oe<0&&Se===0&&this[ue+be+1]!==0&&(Se=1),this[ue+be]=(oe/Ce>>0)-Se&255;return ue+xe},a.prototype.writeInt8=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,1,127,-128),oe<0&&(oe=255+oe+1),this[ue]=oe&255,ue+1},a.prototype.writeInt16LE=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,2,32767,-32768),this[ue]=oe&255,this[ue+1]=oe>>>8,ue+2},a.prototype.writeInt16BE=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,2,32767,-32768),this[ue]=oe>>>8,this[ue+1]=oe&255,ue+2},a.prototype.writeInt32LE=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,4,2147483647,-2147483648),this[ue]=oe&255,this[ue+1]=oe>>>8,this[ue+2]=oe>>>16,this[ue+3]=oe>>>24,ue+4},a.prototype.writeInt32BE=function(oe,ue,xe){return oe=+oe,ue=ue>>>0,xe||ee(this,oe,ue,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[ue]=oe>>>24,this[ue+1]=oe>>>16,this[ue+2]=oe>>>8,this[ue+3]=oe&255,ue+4};function q(ie,oe,ue,xe,he,me){if(ue+xe>ie.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("Index out of range")}function G(ie,oe,ue,xe,he){return oe=+oe,ue=ue>>>0,he||q(ie,oe,ue,4),m.write(ie,oe,ue,xe,23,4),ue+4}a.prototype.writeFloatLE=function(oe,ue,xe){return G(this,oe,ue,!0,xe)},a.prototype.writeFloatBE=function(oe,ue,xe){return G(this,oe,ue,!1,xe)};function J(ie,oe,ue,xe,he){return oe=+oe,ue=ue>>>0,he||q(ie,oe,ue,8),m.write(ie,oe,ue,xe,52,8),ue+8}a.prototype.writeDoubleLE=function(oe,ue,xe){return J(this,oe,ue,!0,xe)},a.prototype.writeDoubleBE=function(oe,ue,xe){return J(this,oe,ue,!1,xe)},a.prototype.copy=function(oe,ue,xe,he){if(!a.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(xe||(xe=0),!he&&he!==0&&(he=this.length),ue>=oe.length&&(ue=oe.length),ue||(ue=0),he>0&&he<xe&&(he=xe),he===xe||oe.length===0||this.length===0)return 0;if(ue<0)throw new RangeError("targetStart out of bounds");if(xe<0||xe>=this.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("sourceEnd out of bounds");he>this.length&&(he=this.length),oe.length-ue<he-xe&&(he=oe.length-ue+xe);var me=he-xe;if(this===oe&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ue,xe,he);else if(this===oe&&xe<ue&&ue<he)for(var be=me-1;be>=0;--be)oe[be+ue]=this[be+xe];else Uint8Array.prototype.set.call(oe,this.subarray(xe,he),ue);return me},a.prototype.fill=function(oe,ue,xe,he){if(typeof oe=="string"){if(typeof ue=="string"?(he=ue,ue=0,xe=this.length):typeof xe=="string"&&(he=xe,xe=this.length),he!==void 0&&typeof he!="string")throw new TypeError("encoding must be a string");if(typeof he=="string"&&!a.isEncoding(he))throw new TypeError("Unknown encoding: "+he);if(oe.length===1){var me=oe.charCodeAt(0);(he==="utf8"&&me<128||he==="latin1")&&(oe=me)}}else typeof oe=="number"&&(oe=oe&255);if(ue<0||this.length<ue||this.length<xe)throw new RangeError("Out of range index");if(xe<=ue)return this;ue=ue>>>0,xe=xe===void 0?this.length:xe>>>0,oe||(oe=0);var be;if(typeof oe=="number")for(be=ue;be<xe;++be)this[be]=oe;else{var Ce=a.isBuffer(oe)?oe:a.from(oe,he),Se=Ce.length;if(Se===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(be=0;be<xe-ue;++be)this[be+ue]=Ce[be%Se]}return this};var le=/[^+/0-9A-Za-z-_]/g;function fe(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(le,""),ie.length<2)return"";for(;ie.length%4!=0;)ie=ie+"=";return ie}function se(ie){return ie<16?"0"+ie.toString(16):ie.toString(16)}function V(ie,oe){oe=oe||1/0;for(var ue,xe=ie.length,he=null,me=[],be=0;be<xe;++be){if(ue=ie.charCodeAt(be),ue>55295&&ue<57344){if(!he){if(ue>56319){(oe-=3)>-1&&me.push(239,191,189);continue}else if(be+1===xe){(oe-=3)>-1&&me.push(239,191,189);continue}he=ue;continue}if(ue<56320){(oe-=3)>-1&&me.push(239,191,189),he=ue;continue}ue=(he-55296<<10|ue-56320)+65536}else he&&(oe-=3)>-1&&me.push(239,191,189);if(he=null,ue<128){if((oe-=1)<0)break;me.push(ue)}else if(ue<2048){if((oe-=2)<0)break;me.push(ue>>6|192,ue&63|128)}else if(ue<65536){if((oe-=3)<0)break;me.push(ue>>12|224,ue>>6&63|128,ue&63|128)}else if(ue<1114112){if((oe-=4)<0)break;me.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,ue&63|128)}else throw new Error("Invalid code point")}return me}function Y(ie){for(var oe=[],ue=0;ue<ie.length;++ue)oe.push(ie.charCodeAt(ue)&255);return oe}function ne(ie,oe){for(var ue,xe,he,me=[],be=0;be<ie.length&&!((oe-=2)<0);++be)ue=ie.charCodeAt(be),xe=ue>>8,he=ue%256,me.push(he),me.push(xe);return me}function te(ie){return s.toByteArray(fe(ie))}function K(ie,oe,ue,xe){for(var he=0;he<xe&&!(he+ue>=oe.length||he>=ie.length);++he)oe[he+ue]=ie[he];return he}function $(ie,oe){return ie instanceof oe||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===oe.name}function ae(ie){return ie!==ie}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(e,I,B){I.exports=u;function u(s,m,x){return m<x?s<m?m:s>x?x:s:s<x?x:s>m?m:s}},{}],87:[function(e,I,B){var u=e("clamp");I.exports=s,I.exports.to=s,I.exports.from=m;function s(x,t){t==null&&(t=!0);var i=x[0],a=x[1],r=x[2],n=x[3];n==null&&(n=t?1:255),t&&(i*=255,a*=255,r*=255,n*=255),i=u(i,0,255)&255,a=u(a,0,255)&255,r=u(r,0,255)&255,n=u(n,0,255)&255;var f=i*16777216+(a<<16)+(r<<8)+n;return f}function m(x,t){x=+x;var i=x>>>24,a=(x&16711680)>>>16,r=(x&65280)>>>8,n=x&255;return t===!1?[i,a,r,n]:[i/255,a/255,r/255,n/255]}},{clamp:86}],88:[function(e,I,B){I.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(e,I,B){var u=e("color-rgba"),s=e("clamp"),m=e("dtype");I.exports=function(i,a){(a==="float"||!a)&&(a="array"),a==="uint"&&(a="uint8"),a==="uint_clamped"&&(a="uint8_clamped");var r=m(a),n=new r(4),f=a!=="uint8"&&a!=="uint8_clamped";return(!i.length||typeof i=="string")&&(i=u(i),i[0]/=255,i[1]/=255,i[2]/=255),x(i)?(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3]!=null?i[3]:255,f&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(f?(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3]!=null?i[3]:1):(n[0]=s(Math.floor(i[0]*255),0,255),n[1]=s(Math.floor(i[1]*255),0,255),n[2]=s(Math.floor(i[2]*255),0,255),n[3]=i[3]==null?255:s(Math.floor(i[3]*255),0,255)),n)};function x(t){return!!(t instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(e,I,B){(function(u){(function(){var s=e("color-name"),m=e("is-plain-obj"),x=e("defined");I.exports=i;var t={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function i(a){var r,n=[],f=1,l;if(typeof a=="string")if(s[a])n=s[a].slice(),l="rgb";else if(a==="transparent")f=0,l="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var o=a.slice(1),c=o.length,v=c<=4;f=1,v?(n=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],c===4&&(f=parseInt(o[3]+o[3],16)/255)):(n=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],c===8&&(f=parseInt(o[6]+o[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),l="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a)){var d=r[1],p=d==="rgb",o=d.replace(/a$/,"");l=o;var c=o==="cmyk"?4:o==="gray"?1:3;n=r[2].trim().split(/\s*,\s*/).map(function(b,M){if(/%$/.test(b))return M===c?parseFloat(b)/100:o==="rgb"?parseFloat(b)*255/100:parseFloat(b);if(o[M]==="h"){if(/deg$/.test(b))return parseFloat(b);if(t[b]!==void 0)return t[b]}return parseFloat(b)}),d===o&&n.push(1),f=p||n[c]===void 0?1:n[c],n=n.slice(0,c)}else a.length>10&&/[0-9](?:\s|\/)/.test(a)&&(n=a.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),l=a.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(a))l="rgb",n=[a>>>16,(a&65280)>>>8,a&255];else if(m(a)){var y=x(a.r,a.red,a.R,null);y!==null?(l="rgb",n=[y,x(a.g,a.green,a.G),x(a.b,a.blue,a.B)]):(l="hsl",n=[x(a.h,a.hue,a.H),x(a.s,a.saturation,a.S),x(a.l,a.lightness,a.L,a.b,a.brightness)]),f=x(a.a,a.alpha,a.opacity,1),a.opacity!=null&&(f/=100)}else(Array.isArray(a)||u.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))&&(n=[a[0],a[1],a[2]],l="rgb",f=a.length===4?a[3]:1);return{space:l,values:n,alpha:f}}}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(e,I,B){var u=e("color-parse"),s=e("color-space/hsl"),m=e("clamp");I.exports=function(t){var i,a=u(t);return a.space?(i=Array(3),i[0]=m(a.values[0],0,255),i[1]=m(a.values[1],0,255),i[2]=m(a.values[2],0,255),a.space[0]==="h"&&(i=s.rgb(i)),i.push(m(a.alpha,0,1)),i):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(e,I,B){var u=e("./rgb");I.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(s){var m=s[0]/360,x=s[1]/100,t=s[2]/100,i,a,r,n,f;if(x===0)return f=t*255,[f,f,f];t<.5?a=t*(1+x):a=t+x-t*x,i=2*t-a,n=[0,0,0];for(var l=0;l<3;l++)r=m+1/3*-(l-1),r<0?r++:r>1&&r--,6*r<1?f=i+(a-i)*6*r:2*r<1?f=a:3*r<2?f=i+(a-i)*(2/3-r)*6:f=i,n[l]=f*255;return n}},u.hsl=function(s){var m=s[0]/255,x=s[1]/255,t=s[2]/255,i=Math.min(m,x,t),a=Math.max(m,x,t),r=a-i,n,f,l;return a===i?n=0:m===a?n=(x-t)/r:x===a?n=2+(t-m)/r:t===a&&(n=4+(m-x)/r),n=Math.min(n*60,360),n<0&&(n+=360),l=(i+a)/2,a===i?f=0:l<=.5?f=r/(a+i):f=r/(2-a-i),[n,f*100,l*100]}},{"./rgb":93}],93:[function(e,I,B){I.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(e,I,B){I.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(e,I,B){I.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(e,I,B){I.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(e,I,B){I.exports=["normal","italic","oblique"]},{}],98:[function(e,I,B){I.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(e,I,B){I.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(e,I,B){var u=e("css-font-size-keywords");I.exports={isSize:function(m){return/^[\d\.]/.test(m)||m.indexOf("/")!==-1||u.indexOf(m)!==-1}}},{"css-font-size-keywords":95}],101:[function(e,I,B){var u=e("unquote"),s=e("css-global-keywords"),m=e("css-system-font-keywords"),x=e("css-font-weight-keywords"),t=e("css-font-style-keywords"),i=e("css-font-stretch-keywords"),a=e("string-split-by"),r=e("./lib/util").isSize;I.exports=f;var n=f.cache={};function f(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(n[o])return n[o];if(o==="")throw new Error("Cannot parse an empty string.");if(m.indexOf(o)!==-1)return n[o]={system:o};for(var c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},v=a(o,/\s+/),d;d=v.shift();){if(s.indexOf(d)!==-1)return["style","variant","weight","stretch"].forEach(function(y){c[y]=d}),n[o]=c;if(t.indexOf(d)!==-1){c.style=d;continue}if(d==="normal"||d==="small-caps"){c.variant=d;continue}if(i.indexOf(d)!==-1){c.stretch=d;continue}if(x.indexOf(d)!==-1){c.weight=d;continue}if(r(d)){var p=a(d,"/");if(c.size=p[0],p[1]!=null?c.lineHeight=l(p[1]):v[0]==="/"&&(v.shift(),c.lineHeight=l(v.shift())),!v.length)throw new Error("Missing required font-family.");return c.family=a(v.join(" "),/\s*,\s*/).map(u),n[o]=c}throw new Error("Unknown or unsupported font token: "+d)}throw new Error("Missing required font-size.")}function l(o){var c=parseFloat(o);return c.toString()===o?c:o}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(e,I,B){var u=e("pick-by-alias"),s=e("./lib/util").isSize,m=o(e("css-global-keywords")),x=o(e("css-system-font-keywords")),t=o(e("css-font-weight-keywords")),i=o(e("css-font-style-keywords")),a=o(e("css-font-stretch-keywords")),r={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};I.exports=function(v){if(v=u(v,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),v.system)return v.system&&l(v.system,x),v.system;if(l(v.style,i),l(v.variant,r),l(v.weight,t),l(v.stretch,a),v.size==null&&(v.size=f.size),typeof v.size=="number"&&(v.size+="px"),!s)throw Error("Bad size value `"+v.size+"`");v.family||(v.family=f.family),Array.isArray(v.family)&&(v.family.length||(v.family=[f.family]),v.family=v.family.map(function(p){return n[p]?p:'"'+p+'"'}).join(", "));var d=[];return d.push(v.style),v.variant!==v.style&&d.push(v.variant),v.weight!==v.variant&&v.weight!==v.style&&d.push(v.weight),v.stretch!==v.weight&&v.stretch!==v.variant&&v.stretch!==v.style&&d.push(v.stretch),d.push(v.size+(v.lineHeight==null||v.lineHeight==="normal"||v.lineHeight+""=="1"?"":"/"+v.lineHeight)),d.push(v.family),d.filter(Boolean).join(" ")};function l(c,v){if(c&&!v[c]&&!m[c])throw Error("Unknown keyword `"+c+"`");return c}function o(c){for(var v={},d=0;d<c.length;d++)v[c[d]]=1;return v}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(e,I,B){I.exports=["inherit","initial","unset"]},{}],104:[function(e,I,B){I.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(e,I,B){var u=e("type/value/is"),s=e("type/value/ensure"),m=e("type/plain-function/ensure"),x=e("es5-ext/object/copy"),t=e("es5-ext/object/normalize-options"),i=e("es5-ext/object/map"),a=Function.prototype.bind,r=Object.defineProperty,n=Object.prototype.hasOwnProperty,f;f=function(l,o,c){var v=s(o)&&m(o.value),d;return d=x(o),delete d.writable,delete d.value,d.get=function(){return!c.overwriteDefinition&&n.call(this,l)?v:(o.value=a.call(v,c.resolveContext?c.resolveContext(this):this),r(this,l,o),this[l])},d},I.exports=function(l){var o=t(arguments[1]);return u(o.resolveContext)&&m(o.resolveContext),i(l,function(c,v){return f(v,c,o)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(e,I,B){var u=e("type/value/is"),s=e("type/plain-function/is"),m=e("es5-ext/object/assign"),x=e("es5-ext/object/normalize-options"),t=e("es5-ext/string/#/contains"),i=I.exports=function(a,r){var n,f,l,o,c;return arguments.length<2||typeof a!="string"?(o=r,r=a,a=null):o=arguments[2],u(a)?(n=t.call(a,"c"),f=t.call(a,"e"),l=t.call(a,"w")):(n=l=!0,f=!1),c={value:r,configurable:n,enumerable:f,writable:l},o?m(x(o),c):c};i.gs=function(a,r,n){var f,l,o,c;return typeof a!="string"?(o=n,n=r,r=a,a=null):o=arguments[3],u(r)?s(r)?u(n)?s(n)||(o=n,n=void 0):n=void 0:(o=r,r=n=void 0):r=void 0,u(a)?(f=t.call(a,"c"),l=t.call(a,"e")):(f=!0,l=!1),c={get:r,set:n,configurable:f,enumerable:l},o?m(x(o),c):c}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(e,I,B){(function(u,s){s(typeof B=="object"&&typeof I!="undefined"?B:u.d3=u.d3||{})})(this,function(u){function s(V,Y){return V<Y?-1:V>Y?1:V>=Y?0:NaN}function m(V){return V.length===1&&(V=x(V)),{left:function(Y,ne,te,K){for(te==null&&(te=0),K==null&&(K=Y.length);te<K;){var $=te+K>>>1;V(Y[$],ne)<0?te=$+1:K=$}return te},right:function(Y,ne,te,K){for(te==null&&(te=0),K==null&&(K=Y.length);te<K;){var $=te+K>>>1;V(Y[$],ne)>0?K=$:te=$+1}return te}}}function x(V){return function(Y,ne){return s(V(Y),ne)}}var t=m(s),i=t.right,a=t.left;function r(V,Y){Y==null&&(Y=n);for(var ne=0,te=V.length-1,K=V[0],$=new Array(te<0?0:te);ne<te;)$[ne]=Y(K,K=V[++ne]);return $}function n(V,Y){return[V,Y]}function f(V,Y,ne){var te=V.length,K=Y.length,$=new Array(te*K),ae,ie,oe,ue;for(ne==null&&(ne=n),ae=oe=0;ae<te;++ae)for(ue=V[ae],ie=0;ie<K;++ie,++oe)$[oe]=ne(ue,Y[ie]);return $}function l(V,Y){return Y<V?-1:Y>V?1:Y>=V?0:NaN}function o(V){return V===null?NaN:+V}function c(V,Y){var ne=V.length,te=0,K=-1,$=0,ae,ie,oe=0;if(Y==null)for(;++K<ne;)isNaN(ae=o(V[K]))||(ie=ae-$,$+=ie/++te,oe+=ie*(ae-$));else for(;++K<ne;)isNaN(ae=o(Y(V[K],K,V)))||(ie=ae-$,$+=ie/++te,oe+=ie*(ae-$));if(te>1)return oe/(te-1)}function v(V,Y){var ne=c(V,Y);return ne&&Math.sqrt(ne)}function d(V,Y){var ne=V.length,te=-1,K,$,ae;if(Y==null){for(;++te<ne;)if((K=V[te])!=null&&K>=K)for($=ae=K;++te<ne;)(K=V[te])!=null&&($>K&&($=K),ae<K&&(ae=K))}else for(;++te<ne;)if((K=Y(V[te],te,V))!=null&&K>=K)for($=ae=K;++te<ne;)(K=Y(V[te],te,V))!=null&&($>K&&($=K),ae<K&&(ae=K));return[$,ae]}var p=Array.prototype,y=p.slice,g=p.map;function A(V){return function(){return V}}function b(V){return V}function M(V,Y,ne){V=+V,Y=+Y,ne=(K=arguments.length)<2?(Y=V,V=0,1):K<3?1:+ne;for(var te=-1,K=Math.max(0,Math.ceil((Y-V)/ne))|0,$=new Array(K);++te<K;)$[te]=V+te*ne;return $}var w=Math.sqrt(50),T=Math.sqrt(10),_=Math.sqrt(2);function h(V,Y,ne){var te,K=-1,$,ae,ie;if(Y=+Y,V=+V,ne=+ne,V===Y&&ne>0)return[V];if((te=Y<V)&&($=V,V=Y,Y=$),(ie=L(V,Y,ne))===0||!isFinite(ie))return[];if(ie>0)for(V=Math.ceil(V/ie),Y=Math.floor(Y/ie),ae=new Array($=Math.ceil(Y-V+1));++K<$;)ae[K]=(V+K)*ie;else for(V=Math.floor(V*ie),Y=Math.ceil(Y*ie),ae=new Array($=Math.ceil(V-Y+1));++K<$;)ae[K]=(V-K)/ie;return te&&ae.reverse(),ae}function L(V,Y,ne){var te=(Y-V)/Math.max(0,ne),K=Math.floor(Math.log(te)/Math.LN10),$=te/Math.pow(10,K);return K>=0?($>=w?10:$>=T?5:$>=_?2:1)*Math.pow(10,K):-Math.pow(10,-K)/($>=w?10:$>=T?5:$>=_?2:1)}function S(V,Y,ne){var te=Math.abs(Y-V)/Math.max(0,ne),K=Math.pow(10,Math.floor(Math.log(te)/Math.LN10)),$=te/K;return $>=w?K*=10:$>=T?K*=5:$>=_&&(K*=2),Y<V?-K:K}function k(V){return Math.ceil(Math.log(V.length)/Math.LN2)+1}function P(){var V=b,Y=d,ne=k;function te(K){var $,ae=K.length,ie,oe=new Array(ae);for($=0;$<ae;++$)oe[$]=V(K[$],$,K);var ue=Y(oe),xe=ue[0],he=ue[1],me=ne(oe,xe,he);Array.isArray(me)||(me=S(xe,he,me),me=M(Math.ceil(xe/me)*me,he,me));for(var be=me.length;me[0]<=xe;)me.shift(),--be;for(;me[be-1]>he;)me.pop(),--be;var Ce=new Array(be+1),Se;for($=0;$<=be;++$)Se=Ce[$]=[],Se.x0=$>0?me[$-1]:xe,Se.x1=$<be?me[$]:he;for($=0;$<ae;++$)ie=oe[$],xe<=ie&&ie<=he&&Ce[i(me,ie,0,be)].push(K[$]);return Ce}return te.value=function(K){return arguments.length?(V=typeof K=="function"?K:A(K),te):V},te.domain=function(K){return arguments.length?(Y=typeof K=="function"?K:A([K[0],K[1]]),te):Y},te.thresholds=function(K){return arguments.length?(ne=typeof K=="function"?K:Array.isArray(K)?A(y.call(K)):A(K),te):ne},te}function O(V,Y,ne){if(ne==null&&(ne=o),!!(te=V.length)){if((Y=+Y)<=0||te<2)return+ne(V[0],0,V);if(Y>=1)return+ne(V[te-1],te-1,V);var te,K=(te-1)*Y,$=Math.floor(K),ae=+ne(V[$],$,V),ie=+ne(V[$+1],$+1,V);return ae+(ie-ae)*(K-$)}}function F(V,Y,ne){return V=g.call(V,o).sort(s),Math.ceil((ne-Y)/(2*(O(V,.75)-O(V,.25))*Math.pow(V.length,-1/3)))}function D(V,Y,ne){return Math.ceil((ne-Y)/(3.5*v(V)*Math.pow(V.length,-1/3)))}function R(V,Y){var ne=V.length,te=-1,K,$;if(Y==null){for(;++te<ne;)if((K=V[te])!=null&&K>=K)for($=K;++te<ne;)(K=V[te])!=null&&K>$&&($=K)}else for(;++te<ne;)if((K=Y(V[te],te,V))!=null&&K>=K)for($=K;++te<ne;)(K=Y(V[te],te,V))!=null&&K>$&&($=K);return $}function U(V,Y){var ne=V.length,te=ne,K=-1,$,ae=0;if(Y==null)for(;++K<ne;)isNaN($=o(V[K]))?--te:ae+=$;else for(;++K<ne;)isNaN($=o(Y(V[K],K,V)))?--te:ae+=$;if(te)return ae/te}function N(V,Y){var ne=V.length,te=-1,K,$=[];if(Y==null)for(;++te<ne;)isNaN(K=o(V[te]))||$.push(K);else for(;++te<ne;)isNaN(K=o(Y(V[te],te,V)))||$.push(K);return O($.sort(s),.5)}function X(V){for(var Y=V.length,ne,te=-1,K=0,$,ae;++te<Y;)K+=V[te].length;for($=new Array(K);--Y>=0;)for(ae=V[Y],ne=ae.length;--ne>=0;)$[--K]=ae[ne];return $}function j(V,Y){var ne=V.length,te=-1,K,$;if(Y==null){for(;++te<ne;)if((K=V[te])!=null&&K>=K)for($=K;++te<ne;)(K=V[te])!=null&&$>K&&($=K)}else for(;++te<ne;)if((K=Y(V[te],te,V))!=null&&K>=K)for($=K;++te<ne;)(K=Y(V[te],te,V))!=null&&$>K&&($=K);return $}function ee(V,Y){for(var ne=Y.length,te=new Array(ne);ne--;)te[ne]=V[Y[ne]];return te}function q(V,Y){if(!!(ne=V.length)){var ne,te=0,K=0,$,ae=V[K];for(Y==null&&(Y=s);++te<ne;)(Y($=V[te],ae)<0||Y(ae,ae)!==0)&&(ae=$,K=te);if(Y(ae,ae)===0)return K}}function G(V,Y,ne){for(var te=(ne==null?V.length:ne)-(Y=Y==null?0:+Y),K,$;te;)$=Math.random()*te--|0,K=V[te+Y],V[te+Y]=V[$+Y],V[$+Y]=K;return V}function J(V,Y){var ne=V.length,te=-1,K,$=0;if(Y==null)for(;++te<ne;)(K=+V[te])&&($+=K);else for(;++te<ne;)(K=+Y(V[te],te,V))&&($+=K);return $}function le(V){if(!($=V.length))return[];for(var Y=-1,ne=j(V,fe),te=new Array(ne);++Y<ne;)for(var K=-1,$,ae=te[Y]=new Array($);++K<$;)ae[K]=V[K][Y];return te}function fe(V){return V.length}function se(){return le(arguments)}u.bisect=i,u.bisectRight=i,u.bisectLeft=a,u.ascending=s,u.bisector=m,u.cross=f,u.descending=l,u.deviation=v,u.extent=d,u.histogram=P,u.thresholdFreedmanDiaconis=F,u.thresholdScott=D,u.thresholdSturges=k,u.max=R,u.mean=U,u.median=N,u.merge=X,u.min=j,u.pairs=r,u.permute=ee,u.quantile=O,u.range=M,u.scan=q,u.shuffle=G,u.sum=J,u.ticks=h,u.tickIncrement=L,u.tickStep=S,u.transpose=le,u.variance=c,u.zip=se,Object.defineProperty(u,"__esModule",{value:!0})})},{}],108:[function(e,I,B){(function(u,s){s(typeof B=="object"&&typeof I!="undefined"?B:u.d3=u.d3||{})})(this,function(u){var s="$";function m(){}m.prototype=x.prototype={constructor:m,has:function(p){return s+p in this},get:function(p){return this[s+p]},set:function(p,y){return this[s+p]=y,this},remove:function(p){var y=s+p;return y in this&&delete this[y]},clear:function(){for(var p in this)p[0]===s&&delete this[p]},keys:function(){var p=[];for(var y in this)y[0]===s&&p.push(y.slice(1));return p},values:function(){var p=[];for(var y in this)y[0]===s&&p.push(this[y]);return p},entries:function(){var p=[];for(var y in this)y[0]===s&&p.push({key:y.slice(1),value:this[y]});return p},size:function(){var p=0;for(var y in this)y[0]===s&&++p;return p},empty:function(){for(var p in this)if(p[0]===s)return!1;return!0},each:function(p){for(var y in this)y[0]===s&&p(this[y],y.slice(1),this)}};function x(p,y){var g=new m;if(p instanceof m)p.each(function(T,_){g.set(_,T)});else if(Array.isArray(p)){var A=-1,b=p.length,M;if(y==null)for(;++A<b;)g.set(A,p[A]);else for(;++A<b;)g.set(y(M=p[A],A,p),M)}else if(p)for(var w in p)g.set(w,p[w]);return g}function t(){var p=[],y=[],g,A,b;function M(T,_,h,L){if(_>=p.length)return g!=null&&T.sort(g),A!=null?A(T):T;for(var S=-1,k=T.length,P=p[_++],O,F,D=x(),R,U=h();++S<k;)(R=D.get(O=P(F=T[S])+""))?R.push(F):D.set(O,[F]);return D.each(function(N,X){L(U,X,M(N,_,h,L))}),U}function w(T,_){if(++_>p.length)return T;var h,L=y[_-1];return A!=null&&_>=p.length?h=T.entries():(h=[],T.each(function(S,k){h.push({key:k,values:w(S,_)})})),L!=null?h.sort(function(S,k){return L(S.key,k.key)}):h}return b={object:function(T){return M(T,0,i,a)},map:function(T){return M(T,0,r,n)},entries:function(T){return w(M(T,0,r,n),0)},key:function(T){return p.push(T),b},sortKeys:function(T){return y[p.length-1]=T,b},sortValues:function(T){return g=T,b},rollup:function(T){return A=T,b}}}function i(){return{}}function a(p,y,g){p[y]=g}function r(){return x()}function n(p,y,g){p.set(y,g)}function f(){}var l=x.prototype;f.prototype=o.prototype={constructor:f,has:l.has,add:function(p){return p+="",this[s+p]=p,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each};function o(p,y){var g=new f;if(p instanceof f)p.each(function(M){g.add(M)});else if(p){var A=-1,b=p.length;if(y==null)for(;++A<b;)g.add(p[A]);else for(;++A<b;)g.add(y(p[A],A,p))}return g}function c(p){var y=[];for(var g in p)y.push(g);return y}function v(p){var y=[];for(var g in p)y.push(p[g]);return y}function d(p){var y=[];for(var g in p)y.push({key:g,value:p[g]});return y}u.nest=t,u.set=o,u.map=x,u.keys=c,u.values=v,u.entries=d,Object.defineProperty(u,"__esModule",{value:!0})})},{}],109:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){function s(ze,We,mt){ze.prototype=We.prototype=mt,mt.constructor=ze}function m(ze,We){var mt=Object.create(ze.prototype);for(var Ft in We)mt[Ft]=We[Ft];return mt}function x(){}var t=.7,i=1/t,a="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),c=new RegExp("^rgba\\("+[a,a,a,r]+"\\)$"),v=new RegExp("^rgba\\("+[n,n,n,r]+"\\)$"),d=new RegExp("^hsl\\("+[r,n,n]+"\\)$"),p=new RegExp("^hsla\\("+[r,n,n,r]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};s(x,M,{copy:function(ze){return Object.assign(new this.constructor,this,ze)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:A,formatRgb:b,toString:b});function g(){return this.rgb().formatHex()}function A(){return F(this).formatHsl()}function b(){return this.rgb().formatRgb()}function M(ze){var We,mt;return ze=(ze+"").trim().toLowerCase(),(We=f.exec(ze))?(mt=We[1].length,We=parseInt(We[1],16),mt===6?w(We):mt===3?new L(We>>8&15|We>>4&240,We>>4&15|We&240,(We&15)<<4|We&15,1):mt===8?T(We>>24&255,We>>16&255,We>>8&255,(We&255)/255):mt===4?T(We>>12&15|We>>8&240,We>>8&15|We>>4&240,We>>4&15|We&240,((We&15)<<4|We&15)/255):null):(We=l.exec(ze))?new L(We[1],We[2],We[3],1):(We=o.exec(ze))?new L(We[1]*255/100,We[2]*255/100,We[3]*255/100,1):(We=c.exec(ze))?T(We[1],We[2],We[3],We[4]):(We=v.exec(ze))?T(We[1]*255/100,We[2]*255/100,We[3]*255/100,We[4]):(We=d.exec(ze))?O(We[1],We[2]/100,We[3]/100,1):(We=p.exec(ze))?O(We[1],We[2]/100,We[3]/100,We[4]):y.hasOwnProperty(ze)?w(y[ze]):ze==="transparent"?new L(NaN,NaN,NaN,0):null}function w(ze){return new L(ze>>16&255,ze>>8&255,ze&255,1)}function T(ze,We,mt,Ft){return Ft<=0&&(ze=We=mt=NaN),new L(ze,We,mt,Ft)}function _(ze){return ze instanceof x||(ze=M(ze)),ze?(ze=ze.rgb(),new L(ze.r,ze.g,ze.b,ze.opacity)):new L}function h(ze,We,mt,Ft){return arguments.length===1?_(ze):new L(ze,We,mt,Ft==null?1:Ft)}function L(ze,We,mt,Ft){this.r=+ze,this.g=+We,this.b=+mt,this.opacity=+Ft}s(L,h,m(x,{brighter:function(ze){return ze=ze==null?i:Math.pow(i,ze),new L(this.r*ze,this.g*ze,this.b*ze,this.opacity)},darker:function(ze){return ze=ze==null?t:Math.pow(t,ze),new L(this.r*ze,this.g*ze,this.b*ze,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:k,toString:k}));function S(){return"#"+P(this.r)+P(this.g)+P(this.b)}function k(){var ze=this.opacity;return ze=isNaN(ze)?1:Math.max(0,Math.min(1,ze)),(ze===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(ze===1?")":", "+ze+")")}function P(ze){return ze=Math.max(0,Math.min(255,Math.round(ze)||0)),(ze<16?"0":"")+ze.toString(16)}function O(ze,We,mt,Ft){return Ft<=0?ze=We=mt=NaN:mt<=0||mt>=1?ze=We=NaN:We<=0&&(ze=NaN),new R(ze,We,mt,Ft)}function F(ze){if(ze instanceof R)return new R(ze.h,ze.s,ze.l,ze.opacity);if(ze instanceof x||(ze=M(ze)),!ze)return new R;if(ze instanceof R)return ze;ze=ze.rgb();var We=ze.r/255,mt=ze.g/255,Ft=ze.b/255,Xt=Math.min(We,mt,Ft),Pt=Math.max(We,mt,Ft),Ut=NaN,Gt=Pt-Xt,It=(Pt+Xt)/2;return Gt?(We===Pt?Ut=(mt-Ft)/Gt+(mt<Ft)*6:mt===Pt?Ut=(Ft-We)/Gt+2:Ut=(We-mt)/Gt+4,Gt/=It<.5?Pt+Xt:2-Pt-Xt,Ut*=60):Gt=It>0&&It<1?0:Ut,new R(Ut,Gt,It,ze.opacity)}function D(ze,We,mt,Ft){return arguments.length===1?F(ze):new R(ze,We,mt,Ft==null?1:Ft)}function R(ze,We,mt,Ft){this.h=+ze,this.s=+We,this.l=+mt,this.opacity=+Ft}s(R,D,m(x,{brighter:function(ze){return ze=ze==null?i:Math.pow(i,ze),new R(this.h,this.s,this.l*ze,this.opacity)},darker:function(ze){return ze=ze==null?t:Math.pow(t,ze),new R(this.h,this.s,this.l*ze,this.opacity)},rgb:function(){var ze=this.h%360+(this.h<0)*360,We=isNaN(ze)||isNaN(this.s)?0:this.s,mt=this.l,Ft=mt+(mt<.5?mt:1-mt)*We,Xt=2*mt-Ft;return new L(U(ze>=240?ze-240:ze+120,Xt,Ft),U(ze,Xt,Ft),U(ze<120?ze+240:ze-120,Xt,Ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ze=this.opacity;return ze=isNaN(ze)?1:Math.max(0,Math.min(1,ze)),(ze===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(ze===1?")":", "+ze+")")}}));function U(ze,We,mt){return(ze<60?We+(mt-We)*ze/60:ze<180?mt:ze<240?We+(mt-We)*(240-ze)/60:We)*255}var N=Math.PI/180,X=180/Math.PI,j=18,ee=.96422,q=1,G=.82521,J=4/29,le=6/29,fe=3*le*le,se=le*le*le;function V(ze){if(ze instanceof te)return new te(ze.l,ze.a,ze.b,ze.opacity);if(ze instanceof he)return me(ze);ze instanceof L||(ze=_(ze));var We=ie(ze.r),mt=ie(ze.g),Ft=ie(ze.b),Xt=K((.2225045*We+.7168786*mt+.0606169*Ft)/q),Pt,Ut;return We===mt&&mt===Ft?Pt=Ut=Xt:(Pt=K((.4360747*We+.3850649*mt+.1430804*Ft)/ee),Ut=K((.0139322*We+.0971045*mt+.7141733*Ft)/G)),new te(116*Xt-16,500*(Pt-Xt),200*(Xt-Ut),ze.opacity)}function Y(ze,We){return new te(ze,0,0,We==null?1:We)}function ne(ze,We,mt,Ft){return arguments.length===1?V(ze):new te(ze,We,mt,Ft==null?1:Ft)}function te(ze,We,mt,Ft){this.l=+ze,this.a=+We,this.b=+mt,this.opacity=+Ft}s(te,ne,m(x,{brighter:function(ze){return new te(this.l+j*(ze==null?1:ze),this.a,this.b,this.opacity)},darker:function(ze){return new te(this.l-j*(ze==null?1:ze),this.a,this.b,this.opacity)},rgb:function(){var ze=(this.l+16)/116,We=isNaN(this.a)?ze:ze+this.a/500,mt=isNaN(this.b)?ze:ze-this.b/200;return We=ee*$(We),ze=q*$(ze),mt=G*$(mt),new L(ae(3.1338561*We-1.6168667*ze-.4906146*mt),ae(-.9787684*We+1.9161415*ze+.033454*mt),ae(.0719453*We-.2289914*ze+1.4052427*mt),this.opacity)}}));function K(ze){return ze>se?Math.pow(ze,1/3):ze/fe+J}function $(ze){return ze>le?ze*ze*ze:fe*(ze-J)}function ae(ze){return 255*(ze<=.0031308?12.92*ze:1.055*Math.pow(ze,1/2.4)-.055)}function ie(ze){return(ze/=255)<=.04045?ze/12.92:Math.pow((ze+.055)/1.055,2.4)}function oe(ze){if(ze instanceof he)return new he(ze.h,ze.c,ze.l,ze.opacity);if(ze instanceof te||(ze=V(ze)),ze.a===0&&ze.b===0)return new he(NaN,0<ze.l&&ze.l<100?0:NaN,ze.l,ze.opacity);var We=Math.atan2(ze.b,ze.a)*X;return new he(We<0?We+360:We,Math.sqrt(ze.a*ze.a+ze.b*ze.b),ze.l,ze.opacity)}function ue(ze,We,mt,Ft){return arguments.length===1?oe(ze):new he(mt,We,ze,Ft==null?1:Ft)}function xe(ze,We,mt,Ft){return arguments.length===1?oe(ze):new he(ze,We,mt,Ft==null?1:Ft)}function he(ze,We,mt,Ft){this.h=+ze,this.c=+We,this.l=+mt,this.opacity=+Ft}function me(ze){if(isNaN(ze.h))return new te(ze.l,0,0,ze.opacity);var We=ze.h*N;return new te(ze.l,Math.cos(We)*ze.c,Math.sin(We)*ze.c,ze.opacity)}s(he,xe,m(x,{brighter:function(ze){return new he(this.h,this.c,this.l+j*(ze==null?1:ze),this.opacity)},darker:function(ze){return new he(this.h,this.c,this.l-j*(ze==null?1:ze),this.opacity)},rgb:function(){return me(this).rgb()}}));var be=-.14861,Ce=1.78277,Se=-.29227,Be=-.90649,Ye=1.97294,Xe=Ye*Be,Te=Ye*Ce,Ie=Ce*Se-Be*be;function Ze(ze){if(ze instanceof Ge)return new Ge(ze.h,ze.s,ze.l,ze.opacity);ze instanceof L||(ze=_(ze));var We=ze.r/255,mt=ze.g/255,Ft=ze.b/255,Xt=(Ie*Ft+Xe*We-Te*mt)/(Ie+Xe-Te),Pt=Ft-Xt,Ut=(Ye*(mt-Xt)-Se*Pt)/Be,Gt=Math.sqrt(Ut*Ut+Pt*Pt)/(Ye*Xt*(1-Xt)),It=Gt?Math.atan2(Ut,Pt)*X-120:NaN;return new Ge(It<0?It+360:It,Gt,Xt,ze.opacity)}function rt(ze,We,mt,Ft){return arguments.length===1?Ze(ze):new Ge(ze,We,mt,Ft==null?1:Ft)}function Ge(ze,We,mt,Ft){this.h=+ze,this.s=+We,this.l=+mt,this.opacity=+Ft}s(Ge,rt,m(x,{brighter:function(ze){return ze=ze==null?i:Math.pow(i,ze),new Ge(this.h,this.s,this.l*ze,this.opacity)},darker:function(ze){return ze=ze==null?t:Math.pow(t,ze),new Ge(this.h,this.s,this.l*ze,this.opacity)},rgb:function(){var ze=isNaN(this.h)?0:(this.h+120)*N,We=+this.l,mt=isNaN(this.s)?0:this.s*We*(1-We),Ft=Math.cos(ze),Xt=Math.sin(ze);return new L(255*(We+mt*(be*Ft+Ce*Xt)),255*(We+mt*(Se*Ft+Be*Xt)),255*(We+mt*(Ye*Ft)),this.opacity)}})),u.color=M,u.cubehelix=rt,u.gray=Y,u.hcl=xe,u.hsl=D,u.lab=ne,u.lch=ue,u.rgb=h,Object.defineProperty(u,"__esModule",{value:!0})})},{}],110:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){var s={value:function(){}};function m(){for(var r=0,n=arguments.length,f={},l;r<n;++r){if(!(l=arguments[r]+"")||l in f||/[\s.]/.test(l))throw new Error("illegal type: "+l);f[l]=[]}return new x(f)}function x(r){this._=r}function t(r,n){return r.trim().split(/^|\s+/).map(function(f){var l="",o=f.indexOf(".");if(o>=0&&(l=f.slice(o+1),f=f.slice(0,o)),f&&!n.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:l}})}x.prototype=m.prototype={constructor:x,on:function(r,n){var f=this._,l=t(r+"",f),o,c=-1,v=l.length;if(arguments.length<2){for(;++c<v;)if((o=(r=l[c]).type)&&(o=i(f[o],r.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<v;)if(o=(r=l[c]).type)f[o]=a(f[o],r.name,n);else if(n==null)for(o in f)f[o]=a(f[o],r.name,null);return this},copy:function(){var r={},n=this._;for(var f in n)r[f]=n[f].slice();return new x(r)},call:function(r,n){if((o=arguments.length-2)>0)for(var f=new Array(o),l=0,o,c;l<o;++l)f[l]=arguments[l+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(c=this._[r],l=0,o=c.length;l<o;++l)c[l].value.apply(n,f)},apply:function(r,n,f){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var l=this._[r],o=0,c=l.length;o<c;++o)l[o].value.apply(n,f)}};function i(r,n){for(var f=0,l=r.length,o;f<l;++f)if((o=r[f]).name===n)return o.value}function a(r,n,f){for(var l=0,o=r.length;l<o;++l)if(r[l].name===n){r[l]=s,r=r.slice(0,l).concat(r.slice(l+1));break}return f!=null&&r.push({name:n,value:f}),r}u.dispatch=m,Object.defineProperty(u,"__esModule",{value:!0})})},{}],111:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):s(u.d3=u.d3||{},u.d3,u.d3,u.d3,u.d3)})(this,function(u,s,m,x,t){function i(_,h){var L;_==null&&(_=0),h==null&&(h=0);function S(){var k,P=L.length,O,F=0,D=0;for(k=0;k<P;++k)O=L[k],F+=O.x,D+=O.y;for(F=F/P-_,D=D/P-h,k=0;k<P;++k)O=L[k],O.x-=F,O.y-=D}return S.initialize=function(k){L=k},S.x=function(k){return arguments.length?(_=+k,S):_},S.y=function(k){return arguments.length?(h=+k,S):h},S}function a(_){return function(){return _}}function r(){return(Math.random()-.5)*1e-6}function n(_){return _.x+_.vx}function f(_){return _.y+_.vy}function l(_){var h,L,S=1,k=1;typeof _!="function"&&(_=a(_==null?1:+_));function P(){for(var D,R=h.length,U,N,X,j,ee,q,G=0;G<k;++G)for(U=s.quadtree(h,n,f).visitAfter(O),D=0;D<R;++D)N=h[D],ee=L[N.index],q=ee*ee,X=N.x+N.vx,j=N.y+N.vy,U.visit(J);function J(le,fe,se,V,Y){var ne=le.data,te=le.r,K=ee+te;if(ne){if(ne.index>N.index){var $=X-ne.x-ne.vx,ae=j-ne.y-ne.vy,ie=$*$+ae*ae;ie<K*K&&($===0&&($=r(),ie+=$*$),ae===0&&(ae=r(),ie+=ae*ae),ie=(K-(ie=Math.sqrt(ie)))/ie*S,N.vx+=($*=ie)*(K=(te*=te)/(q+te)),N.vy+=(ae*=ie)*K,ne.vx-=$*(K=1-K),ne.vy-=ae*K)}return}return fe>X+K||V<X-K||se>j+K||Y<j-K}}function O(D){if(D.data)return D.r=L[D.data.index];for(var R=D.r=0;R<4;++R)D[R]&&D[R].r>D.r&&(D.r=D[R].r)}function F(){if(!!h){var D,R=h.length,U;for(L=new Array(R),D=0;D<R;++D)U=h[D],L[U.index]=+_(U,D,h)}}return P.initialize=function(D){h=D,F()},P.iterations=function(D){return arguments.length?(k=+D,P):k},P.strength=function(D){return arguments.length?(S=+D,P):S},P.radius=function(D){return arguments.length?(_=typeof D=="function"?D:a(+D),F(),P):_},P}function o(_){return _.index}function c(_,h){var L=_.get(h);if(!L)throw new Error("missing: "+h);return L}function v(_){var h=o,L=U,S,k=a(30),P,O,F,D,R=1;_==null&&(_=[]);function U(q){return 1/Math.min(F[q.source.index],F[q.target.index])}function N(q){for(var G=0,J=_.length;G<R;++G)for(var le=0,fe,se,V,Y,ne,te,K;le<J;++le)fe=_[le],se=fe.source,V=fe.target,Y=V.x+V.vx-se.x-se.vx||r(),ne=V.y+V.vy-se.y-se.vy||r(),te=Math.sqrt(Y*Y+ne*ne),te=(te-P[le])/te*q*S[le],Y*=te,ne*=te,V.vx-=Y*(K=D[le]),V.vy-=ne*K,se.vx+=Y*(K=1-K),se.vy+=ne*K}function X(){if(!!O){var q,G=O.length,J=_.length,le=m.map(O,h),fe;for(q=0,F=new Array(G);q<J;++q)fe=_[q],fe.index=q,typeof fe.source!="object"&&(fe.source=c(le,fe.source)),typeof fe.target!="object"&&(fe.target=c(le,fe.target)),F[fe.source.index]=(F[fe.source.index]||0)+1,F[fe.target.index]=(F[fe.target.index]||0)+1;for(q=0,D=new Array(J);q<J;++q)fe=_[q],D[q]=F[fe.source.index]/(F[fe.source.index]+F[fe.target.index]);S=new Array(J),j(),P=new Array(J),ee()}}function j(){if(!!O)for(var q=0,G=_.length;q<G;++q)S[q]=+L(_[q],q,_)}function ee(){if(!!O)for(var q=0,G=_.length;q<G;++q)P[q]=+k(_[q],q,_)}return N.initialize=function(q){O=q,X()},N.links=function(q){return arguments.length?(_=q,X(),N):_},N.id=function(q){return arguments.length?(h=q,N):h},N.iterations=function(q){return arguments.length?(R=+q,N):R},N.strength=function(q){return arguments.length?(L=typeof q=="function"?q:a(+q),j(),N):L},N.distance=function(q){return arguments.length?(k=typeof q=="function"?q:a(+q),ee(),N):k},N}function d(_){return _.x}function p(_){return _.y}var y=10,g=Math.PI*(3-Math.sqrt(5));function A(_){var h,L=1,S=.001,k=1-Math.pow(S,1/300),P=0,O=.6,F=m.map(),D=t.timer(U),R=x.dispatch("tick","end");_==null&&(_=[]);function U(){N(),R.call("tick",h),L<S&&(D.stop(),R.call("end",h))}function N(ee){var q,G=_.length,J;ee===void 0&&(ee=1);for(var le=0;le<ee;++le)for(L+=(P-L)*k,F.each(function(fe){fe(L)}),q=0;q<G;++q)J=_[q],J.fx==null?J.x+=J.vx*=O:(J.x=J.fx,J.vx=0),J.fy==null?J.y+=J.vy*=O:(J.y=J.fy,J.vy=0);return h}function X(){for(var ee=0,q=_.length,G;ee<q;++ee){if(G=_[ee],G.index=ee,G.fx!=null&&(G.x=G.fx),G.fy!=null&&(G.y=G.fy),isNaN(G.x)||isNaN(G.y)){var J=y*Math.sqrt(ee),le=ee*g;G.x=J*Math.cos(le),G.y=J*Math.sin(le)}(isNaN(G.vx)||isNaN(G.vy))&&(G.vx=G.vy=0)}}function j(ee){return ee.initialize&&ee.initialize(_),ee}return X(),h={tick:N,restart:function(){return D.restart(U),h},stop:function(){return D.stop(),h},nodes:function(ee){return arguments.length?(_=ee,X(),F.each(j),h):_},alpha:function(ee){return arguments.length?(L=+ee,h):L},alphaMin:function(ee){return arguments.length?(S=+ee,h):S},alphaDecay:function(ee){return arguments.length?(k=+ee,h):+k},alphaTarget:function(ee){return arguments.length?(P=+ee,h):P},velocityDecay:function(ee){return arguments.length?(O=1-ee,h):1-O},force:function(ee,q){return arguments.length>1?(q==null?F.remove(ee):F.set(ee,j(q)),h):F.get(ee)},find:function(ee,q,G){var J=0,le=_.length,fe,se,V,Y,ne;for(G==null?G=1/0:G*=G,J=0;J<le;++J)Y=_[J],fe=ee-Y.x,se=q-Y.y,V=fe*fe+se*se,V<G&&(ne=Y,G=V);return ne},on:function(ee,q){return arguments.length>1?(R.on(ee,q),h):R.on(ee)}}}function b(){var _,h,L,S=a(-30),k,P=1,O=1/0,F=.81;function D(X){var j,ee=_.length,q=s.quadtree(_,d,p).visitAfter(U);for(L=X,j=0;j<ee;++j)h=_[j],q.visit(N)}function R(){if(!!_){var X,j=_.length,ee;for(k=new Array(j),X=0;X<j;++X)ee=_[X],k[ee.index]=+S(ee,X,_)}}function U(X){var j=0,ee,q,G=0,J,le,fe;if(X.length){for(J=le=fe=0;fe<4;++fe)(ee=X[fe])&&(q=Math.abs(ee.value))&&(j+=ee.value,G+=q,J+=q*ee.x,le+=q*ee.y);X.x=J/G,X.y=le/G}else{ee=X,ee.x=ee.data.x,ee.y=ee.data.y;do j+=k[ee.data.index];while(ee=ee.next)}X.value=j}function N(X,j,ee,q){if(!X.value)return!0;var G=X.x-h.x,J=X.y-h.y,le=q-j,fe=G*G+J*J;if(le*le/F<fe)return fe<O&&(G===0&&(G=r(),fe+=G*G),J===0&&(J=r(),fe+=J*J),fe<P&&(fe=Math.sqrt(P*fe)),h.vx+=G*X.value*L/fe,h.vy+=J*X.value*L/fe),!0;if(X.length||fe>=O)return;(X.data!==h||X.next)&&(G===0&&(G=r(),fe+=G*G),J===0&&(J=r(),fe+=J*J),fe<P&&(fe=Math.sqrt(P*fe)));do X.data!==h&&(le=k[X.data.index]*L/fe,h.vx+=G*le,h.vy+=J*le);while(X=X.next)}return D.initialize=function(X){_=X,R()},D.strength=function(X){return arguments.length?(S=typeof X=="function"?X:a(+X),R(),D):S},D.distanceMin=function(X){return arguments.length?(P=X*X,D):Math.sqrt(P)},D.distanceMax=function(X){return arguments.length?(O=X*X,D):Math.sqrt(O)},D.theta=function(X){return arguments.length?(F=X*X,D):Math.sqrt(F)},D}function M(_,h,L){var S,k=a(.1),P,O;typeof _!="function"&&(_=a(+_)),h==null&&(h=0),L==null&&(L=0);function F(R){for(var U=0,N=S.length;U<N;++U){var X=S[U],j=X.x-h||1e-6,ee=X.y-L||1e-6,q=Math.sqrt(j*j+ee*ee),G=(O[U]-q)*P[U]*R/q;X.vx+=j*G,X.vy+=ee*G}}function D(){if(!!S){var R,U=S.length;for(P=new Array(U),O=new Array(U),R=0;R<U;++R)O[R]=+_(S[R],R,S),P[R]=isNaN(O[R])?0:+k(S[R],R,S)}}return F.initialize=function(R){S=R,D()},F.strength=function(R){return arguments.length?(k=typeof R=="function"?R:a(+R),D(),F):k},F.radius=function(R){return arguments.length?(_=typeof R=="function"?R:a(+R),D(),F):_},F.x=function(R){return arguments.length?(h=+R,F):h},F.y=function(R){return arguments.length?(L=+R,F):L},F}function w(_){var h=a(.1),L,S,k;typeof _!="function"&&(_=a(_==null?0:+_));function P(F){for(var D=0,R=L.length,U;D<R;++D)U=L[D],U.vx+=(k[D]-U.x)*S[D]*F}function O(){if(!!L){var F,D=L.length;for(S=new Array(D),k=new Array(D),F=0;F<D;++F)S[F]=isNaN(k[F]=+_(L[F],F,L))?0:+h(L[F],F,L)}}return P.initialize=function(F){L=F,O()},P.strength=function(F){return arguments.length?(h=typeof F=="function"?F:a(+F),O(),P):h},P.x=function(F){return arguments.length?(_=typeof F=="function"?F:a(+F),O(),P):_},P}function T(_){var h=a(.1),L,S,k;typeof _!="function"&&(_=a(_==null?0:+_));function P(F){for(var D=0,R=L.length,U;D<R;++D)U=L[D],U.vy+=(k[D]-U.y)*S[D]*F}function O(){if(!!L){var F,D=L.length;for(S=new Array(D),k=new Array(D),F=0;F<D;++F)S[F]=isNaN(k[F]=+_(L[F],F,L))?0:+h(L[F],F,L)}}return P.initialize=function(F){L=F,O()},P.strength=function(F){return arguments.length?(h=typeof F=="function"?F:a(+F),O(),P):h},P.y=function(F){return arguments.length?(_=typeof F=="function"?F:a(+F),O(),P):_},P}u.forceCenter=i,u.forceCollide=l,u.forceLink=v,u.forceManyBody=b,u.forceRadial=M,u.forceSimulation=A,u.forceX=w,u.forceY=T,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B):(u=typeof globalThis!="undefined"?globalThis:u||self,s(u.d3=u.d3||{}))})(this,function(u){function s(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function m(_,h){if((L=(_=h?_.toExponential(h-1):_.toExponential()).indexOf("e"))<0)return null;var L,S=_.slice(0,L);return[S.length>1?S[0]+S.slice(2):S,+_.slice(L+1)]}function x(_){return _=m(Math.abs(_)),_?_[1]:NaN}function t(_,h){return function(L,S){for(var k=L.length,P=[],O=0,F=_[0],D=0;k>0&&F>0&&(D+F+1>S&&(F=Math.max(1,S-D)),P.push(L.substring(k-=F,k+F)),!((D+=F+1)>S));)F=_[O=(O+1)%_.length];return P.reverse().join(h)}}function i(_){return function(h){return h.replace(/[0-9]/g,function(L){return _[+L]})}}var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(_){if(!(h=a.exec(_)))throw new Error("invalid format: "+_);var h;return new n({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}r.prototype=n.prototype;function n(_){this.fill=_.fill===void 0?" ":_.fill+"",this.align=_.align===void 0?">":_.align+"",this.sign=_.sign===void 0?"-":_.sign+"",this.symbol=_.symbol===void 0?"":_.symbol+"",this.zero=!!_.zero,this.width=_.width===void 0?void 0:+_.width,this.comma=!!_.comma,this.precision=_.precision===void 0?void 0:+_.precision,this.trim=!!_.trim,this.type=_.type===void 0?"":_.type+""}n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f(_){e:for(var h=_.length,L=1,S=-1,k;L<h;++L)switch(_[L]){case".":S=k=L;break;case"0":S===0&&(S=L),k=L;break;default:if(!+_[L])break e;S>0&&(S=0);break}return S>0?_.slice(0,S)+_.slice(k+1):_}var l;function o(_,h){var L=m(_,h);if(!L)return _+"";var S=L[0],k=L[1],P=k-(l=Math.max(-8,Math.min(8,Math.floor(k/3)))*3)+1,O=S.length;return P===O?S:P>O?S+new Array(P-O+1).join("0"):P>0?S.slice(0,P)+"."+S.slice(P):"0."+new Array(1-P).join("0")+m(_,Math.max(0,h+P-1))[0]}function c(_,h){var L=m(_,h);if(!L)return _+"";var S=L[0],k=L[1];return k<0?"0."+new Array(-k).join("0")+S:S.length>k+1?S.slice(0,k+1)+"."+S.slice(k+1):S+new Array(k-S.length+2).join("0")}var v={"%":function(_,h){return(_*100).toFixed(h)},b:function(_){return Math.round(_).toString(2)},c:function(_){return _+""},d:s,e:function(_,h){return _.toExponential(h)},f:function(_,h){return _.toFixed(h)},g:function(_,h){return _.toPrecision(h)},o:function(_){return Math.round(_).toString(8)},p:function(_,h){return c(_*100,h)},r:c,s:o,X:function(_){return Math.round(_).toString(16).toUpperCase()},x:function(_){return Math.round(_).toString(16)}};function d(_){return _}var p=Array.prototype.map,y=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function g(_){var h=_.grouping===void 0||_.thousands===void 0?d:t(p.call(_.grouping,Number),_.thousands+""),L=_.currency===void 0?"":_.currency[0]+"",S=_.currency===void 0?"":_.currency[1]+"",k=_.decimal===void 0?".":_.decimal+"",P=_.numerals===void 0?d:i(p.call(_.numerals,String)),O=_.percent===void 0?"%":_.percent+"",F=_.minus===void 0?"-":_.minus+"",D=_.nan===void 0?"NaN":_.nan+"";function R(N){N=r(N);var X=N.fill,j=N.align,ee=N.sign,q=N.symbol,G=N.zero,J=N.width,le=N.comma,fe=N.precision,se=N.trim,V=N.type;V==="n"?(le=!0,V="g"):v[V]||(fe===void 0&&(fe=12),se=!0,V="g"),(G||X==="0"&&j==="=")&&(G=!0,X="0",j="=");var Y=q==="$"?L:q==="#"&&/[boxX]/.test(V)?"0"+V.toLowerCase():"",ne=q==="$"?S:/[%p]/.test(V)?O:"",te=v[V],K=/[defgprs%]/.test(V);fe=fe===void 0?6:/[gprs]/.test(V)?Math.max(1,Math.min(21,fe)):Math.max(0,Math.min(20,fe));function $(ae){var ie=Y,oe=ne,ue,xe,he;if(V==="c")oe=te(ae)+oe,ae="";else{ae=+ae;var me=ae<0||1/ae<0;if(ae=isNaN(ae)?D:te(Math.abs(ae),fe),se&&(ae=f(ae)),me&&+ae==0&&ee!=="+"&&(me=!1),ie=(me?ee==="("?ee:F:ee==="-"||ee==="("?"":ee)+ie,oe=(V==="s"?y[8+l/3]:"")+oe+(me&&ee==="("?")":""),K){for(ue=-1,xe=ae.length;++ue<xe;)if(he=ae.charCodeAt(ue),48>he||he>57){oe=(he===46?k+ae.slice(ue+1):ae.slice(ue))+oe,ae=ae.slice(0,ue);break}}}le&&!G&&(ae=h(ae,1/0));var be=ie.length+ae.length+oe.length,Ce=be<J?new Array(J-be+1).join(X):"";switch(le&&G&&(ae=h(Ce+ae,Ce.length?J-oe.length:1/0),Ce=""),j){case"<":ae=ie+ae+oe+Ce;break;case"=":ae=ie+Ce+ae+oe;break;case"^":ae=Ce.slice(0,be=Ce.length>>1)+ie+ae+oe+Ce.slice(be);break;default:ae=Ce+ie+ae+oe;break}return P(ae)}return $.toString=function(){return N+""},$}function U(N,X){var j=R((N=r(N),N.type="f",N)),ee=Math.max(-8,Math.min(8,Math.floor(x(X)/3)))*3,q=Math.pow(10,-ee),G=y[8+ee/3];return function(J){return j(q*J)+G}}return{format:R,formatPrefix:U}}var A;b({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function b(_){return A=g(_),u.format=A.format,u.formatPrefix=A.formatPrefix,A}function M(_){return Math.max(0,-x(Math.abs(_)))}function w(_,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(x(h)/3)))*3-x(Math.abs(_)))}function T(_,h){return _=Math.abs(_),h=Math.abs(h)-_,Math.max(0,x(h)-x(_))+1}u.FormatSpecifier=n,u.formatDefaultLocale=b,u.formatLocale=g,u.formatSpecifier=r,u.precisionFixed=M,u.precisionPrefix=w,u.precisionRound=T,Object.defineProperty(u,"__esModule",{value:!0})})},{}],113:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B,e("d3-geo"),e("d3-array")):s(u.d3=u.d3||{},u.d3,u.d3)})(this,function(u,s,m){var x=Math.abs,t=Math.atan,i=Math.atan2,a=Math.cos,r=Math.exp,n=Math.floor,f=Math.log,l=Math.max,o=Math.min,c=Math.pow,v=Math.round,d=Math.sign||function(Oe){return Oe>0?1:Oe<0?-1:0},p=Math.sin,y=Math.tan,g=1e-6,A=1e-12,b=Math.PI,M=b/2,w=b/4,T=Math.SQRT1_2,_=D(2),h=D(b),L=b*2,S=180/b,k=b/180;function P(Oe){return Oe?Oe/Math.sin(Oe):1}function O(Oe){return Oe>1?M:Oe<-1?-M:Math.asin(Oe)}function F(Oe){return Oe>1?0:Oe<-1?b:Math.acos(Oe)}function D(Oe){return Oe>0?Math.sqrt(Oe):0}function R(Oe){return Oe=r(2*Oe),(Oe-1)/(Oe+1)}function U(Oe){return(r(Oe)-r(-Oe))/2}function N(Oe){return(r(Oe)+r(-Oe))/2}function X(Oe){return f(Oe+D(Oe*Oe+1))}function j(Oe){return f(Oe+D(Oe*Oe-1))}function ee(Oe){var je=y(Oe/2),ot=2*f(a(Oe/2))/(je*je);function ft(St,Tt){var Et=a(St),or=a(Tt),vr=p(Tt),nr=or*Et,gr=-((1-nr?f((1+nr)/2)/(1-nr):-.5)+ot/(1+nr));return[gr*or*p(St),gr*vr]}return ft.invert=function(St,Tt){var Et=D(St*St+Tt*Tt),or=-Oe/2,vr=50,nr;if(!Et)return[0,0];do{var gr=or/2,Or=a(gr),Kr=p(gr),cn=Kr/Or,Ln=-f(x(Or));or-=nr=(2/cn*Ln-ot*cn-Et)/(-Ln/(Kr*Kr)+1-ot/(2*Or*Or))*(Or<0?.7:1)}while(x(nr)>g&&--vr>0);var zn=p(or);return[i(St*zn,Et*a(or)),O(Tt*zn/Et)]},ft}function q(){var Oe=M,je=s.geoProjectionMutator(ee),ot=je(Oe);return ot.radius=function(ft){return arguments.length?je(Oe=ft*k):Oe*S},ot.scale(179.976).clipAngle(147)}function G(Oe,je){var ot=a(je),ft=P(F(ot*a(Oe/=2)));return[2*ot*p(Oe)*ft,p(je)*ft]}G.invert=function(Oe,je){if(!(Oe*Oe+4*je*je>b*b+g)){var ot=Oe,ft=je,St=25;do{var Tt=p(ot),Et=p(ot/2),or=a(ot/2),vr=p(ft),nr=a(ft),gr=p(2*ft),Or=vr*vr,Kr=nr*nr,cn=Et*Et,Ln=1-Kr*or*or,zn=Ln?F(nr*or)*D(oa=1/Ln):oa=0,oa,Ua=2*zn*nr*Et-Oe,Pa=zn*vr-je,ci=oa*(Kr*cn+zn*nr*or*Or),si=oa*(.5*Tt*gr-zn*2*vr*Et),hi=oa*.25*(gr*Et-zn*vr*Kr*Tt),Ri=oa*(Or*or+zn*cn*nr),Vi=si*hi-Ri*ci;if(!Vi)break;var xi=(Pa*si-Ua*Ri)/Vi,Po=(Ua*hi-Pa*ci)/Vi;ot-=xi,ft-=Po}while((x(xi)>g||x(Po)>g)&&--St>0);return[ot,ft]}};function J(){return s.geoProjection(G).scale(152.63)}function le(Oe){var je=p(Oe),ot=a(Oe),ft=Oe>=0?1:-1,St=y(ft*Oe),Tt=(1+je-ot)/2;function Et(or,vr){var nr=a(vr),gr=a(or/=2);return[(1+nr)*p(or),(ft*vr>-i(gr,St)-.001?0:-ft*10)+Tt+p(vr)*ot-(1+nr)*je*gr]}return Et.invert=function(or,vr){var nr=0,gr=0,Or=50;do{var Kr=a(nr),cn=p(nr),Ln=a(gr),zn=p(gr),oa=1+Ln,Ua=oa*cn-or,Pa=Tt+zn*ot-oa*je*Kr-vr,ci=oa*Kr/2,si=-cn*zn,hi=je*oa*cn/2,Ri=ot*Ln+je*Kr*zn,Vi=si*hi-Ri*ci,xi=(Pa*si-Ua*Ri)/Vi/2,Po=(Ua*hi-Pa*ci)/Vi;x(Po)>2&&(Po/=2),nr-=xi,gr-=Po}while((x(xi)>g||x(Po)>g)&&--Or>0);return ft*gr>-i(a(nr),St)-.001?[nr*2,gr]:null},Et}function fe(){var Oe=20*k,je=Oe>=0?1:-1,ot=y(je*Oe),ft=s.geoProjectionMutator(le),St=ft(Oe),Tt=St.stream;return St.parallel=function(Et){return arguments.length?(ot=y((je=(Oe=Et*k)>=0?1:-1)*Oe),ft(Oe)):Oe*S},St.stream=function(Et){var or=St.rotate(),vr=Tt(Et),nr=(St.rotate([0,0]),Tt(Et)),gr=St.precision();return St.rotate(or),vr.sphere=function(){nr.polygonStart(),nr.lineStart();for(var Or=je*-180;je*Or<180;Or+=je*90)nr.point(Or,je*90);if(Oe)for(;je*(Or-=3*je*gr)>=-180;)nr.point(Or,je*-i(a(Or*k/2),ot)*S);nr.lineEnd(),nr.polygonEnd()},vr},St.scale(218.695).center([0,28.0974])}function se(Oe,je){var ot=y(je/2),ft=D(1-ot*ot),St=1+ft*a(Oe/=2),Tt=p(Oe)*ft/St,Et=ot/St,or=Tt*Tt,vr=Et*Et;return[4/3*Tt*(3+or-3*vr),4/3*Et*(3+3*or-vr)]}se.invert=function(Oe,je){if(Oe*=3/8,je*=3/8,!Oe&&x(je)>1)return null;var ot=Oe*Oe,ft=je*je,St=1+ot+ft,Tt=D((St-D(St*St-4*je*je))/2),Et=O(Tt)/3,or=Tt?j(x(je/Tt))/3:X(x(Oe))/3,vr=a(Et),nr=N(or),gr=nr*nr-vr*vr;return[d(Oe)*2*i(U(or)*vr,.25-gr),d(je)*2*i(nr*p(Et),.25+gr)]};function V(){return s.geoProjection(se).scale(66.1603)}var Y=D(8),ne=f(1+_);function te(Oe,je){var ot=x(je);return ot<w?[Oe,f(y(w+je/2))]:[Oe*a(ot)*(2*_-1/p(ot)),d(je)*(2*_*(ot-w)-f(y(ot/2)))]}te.invert=function(Oe,je){if((Tt=x(je))<ne)return[Oe,2*t(r(je))-M];var ot=w,ft=25,St,Tt;do{var Et=a(ot/2),or=y(ot/2);ot-=St=(Y*(ot-w)-f(or)-Tt)/(Y-Et*Et/(2*or))}while(x(St)>A&&--ft>0);return[Oe/(a(ot)*(Y-1/p(ot))),d(je)*ot]};function K(){return s.geoProjection(te).scale(112.314)}function $(Oe){var je=2*b/Oe;function ot(ft,St){var Tt=s.geoAzimuthalEquidistantRaw(ft,St);if(x(ft)>M){var Et=i(Tt[1],Tt[0]),or=D(Tt[0]*Tt[0]+Tt[1]*Tt[1]),vr=je*v((Et-M)/je)+M,nr=i(p(Et-=vr),2-a(Et));Et=vr+O(b/or*p(nr))-nr,Tt[0]=or*a(Et),Tt[1]=or*p(Et)}return Tt}return ot.invert=function(ft,St){var Tt=D(ft*ft+St*St);if(Tt>M){var Et=i(St,ft),or=je*v((Et-M)/je)+M,vr=Et>or?-1:1,nr=Tt*a(or-Et),gr=1/y(vr*F((nr-b)/D(b*(b-2*nr)+Tt*Tt)));Et=or+2*t((gr+vr*D(gr*gr-3))/3),ft=Tt*a(Et),St=Tt*p(Et)}return s.geoAzimuthalEquidistantRaw.invert(ft,St)},ot}function ae(){var Oe=5,je=s.geoProjectionMutator($),ot=je(Oe),ft=ot.stream,St=.01,Tt=-a(St*k),Et=p(St*k);return ot.lobes=function(or){return arguments.length?je(Oe=+or):Oe},ot.stream=function(or){var vr=ot.rotate(),nr=ft(or),gr=(ot.rotate([0,0]),ft(or));return ot.rotate(vr),nr.sphere=function(){gr.polygonStart(),gr.lineStart();for(var Or=0,Kr=360/Oe,cn=2*b/Oe,Ln=90-180/Oe,zn=M;Or<Oe;++Or,Ln-=Kr,zn-=cn)gr.point(i(Et*a(zn),Tt)*S,O(Et*p(zn))*S),Ln<-90?(gr.point(-90,-180-Ln-St),gr.point(-90,-180-Ln+St)):(gr.point(90,Ln+St),gr.point(90,Ln-St));gr.lineEnd(),gr.polygonEnd()},nr},ot.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function ie(Oe,je){if(arguments.length<2&&(je=Oe),je===1)return s.geoAzimuthalEqualAreaRaw;if(je===1/0)return oe;function ot(ft,St){var Tt=s.geoAzimuthalEqualAreaRaw(ft/je,St);return Tt[0]*=Oe,Tt}return ot.invert=function(ft,St){var Tt=s.geoAzimuthalEqualAreaRaw.invert(ft/Oe,St);return Tt[0]*=je,Tt},ot}function oe(Oe,je){return[Oe*a(je)/a(je/=2),2*p(je)]}oe.invert=function(Oe,je){var ot=2*O(je/2);return[Oe*a(ot/2)/a(ot),ot]};function ue(){var Oe=2,je=s.geoProjectionMutator(ie),ot=je(Oe);return ot.coefficient=function(ft){return arguments.length?je(Oe=+ft):Oe},ot.scale(169.529)}function xe(Oe,je,ot){var ft=100,St,Tt,Et;ot=ot===void 0?0:+ot,je=+je;do Tt=Oe(ot),Et=Oe(ot+g),Tt===Et&&(Et=Tt+g),ot-=St=-1*g*(Tt-je)/(Tt-Et);while(ft-- >0&&x(St)>g);return ft<0?NaN:ot}function he(Oe,je,ot){return je===void 0&&(je=40),ot===void 0&&(ot=A),function(ft,St,Tt,Et){var or,vr,nr;Tt=Tt===void 0?0:+Tt,Et=Et===void 0?0:+Et;for(var gr=0;gr<je;gr++){var Or=Oe(Tt,Et),Kr=Or[0]-ft,cn=Or[1]-St;if(x(Kr)<ot&&x(cn)<ot)break;var Ln=Kr*Kr+cn*cn;if(Ln>or){Tt-=vr/=2,Et-=nr/=2;continue}or=Ln;var zn=(Tt>0?-1:1)*ot,oa=(Et>0?-1:1)*ot,Ua=Oe(Tt+zn,Et),Pa=Oe(Tt,Et+oa),ci=(Ua[0]-Or[0])/zn,si=(Ua[1]-Or[1])/zn,hi=(Pa[0]-Or[0])/oa,Ri=(Pa[1]-Or[1])/oa,Vi=Ri*ci-si*hi,xi=(x(Vi)<.5?.5:1)/Vi;if(vr=(cn*hi-Kr*Ri)*xi,nr=(Kr*si-cn*ci)*xi,Tt+=vr,Et+=nr,x(vr)<ot&&x(nr)<ot)break}return[Tt,Et]}}function me(){var Oe=ie(1.68,2),je=1.4,ot=12;function ft(St,Tt){if(St+Tt<-je){var Et=(St-Tt+1.6)*(St+Tt+je)/8;St+=Et,Tt-=.8*Et*p(Tt+b/2)}var or=Oe(St,Tt),vr=(1-a(St*Tt))/ot;return or[1]<0&&(or[0]*=1+vr),or[1]>0&&(or[1]*=1+vr/1.5*or[0]*or[0]),or}return ft.invert=he(ft),ft}function be(){return s.geoProjection(me()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Ce(Oe,je){var ot=Oe*p(je),ft=30,St;do je-=St=(je+p(je)-ot)/(1+a(je));while(x(St)>g&&--ft>0);return je/2}function Se(Oe,je,ot){function ft(St,Tt){return[Oe*St*a(Tt=Ce(ot,Tt)),je*p(Tt)]}return ft.invert=function(St,Tt){return Tt=O(Tt/je),[St/(Oe*a(Tt)),O((2*Tt+p(2*Tt))/ot)]},ft}var Be=Se(_/M,_,b);function Ye(){return s.geoProjection(Be).scale(169.529)}var Xe=2.00276,Te=1.11072;function Ie(Oe,je){var ot=Ce(b,je);return[Xe*Oe/(1/a(je)+Te/a(ot)),(je+_*p(ot))/Xe]}Ie.invert=function(Oe,je){var ot=Xe*je,ft=je<0?-w:w,St=25,Tt,Et;do Et=ot-_*p(ft),ft-=Tt=(p(2*ft)+2*ft-b*p(Et))/(2*a(2*ft)+2+b*a(Et)*_*a(ft));while(x(Tt)>g&&--St>0);return Et=ot-_*p(ft),[Oe*(1/a(Et)+Te/a(ft))/Xe,Et]};function Ze(){return s.geoProjection(Ie).scale(160.857)}function rt(Oe){var je=0,ot=s.geoProjectionMutator(Oe),ft=ot(je);return ft.parallel=function(St){return arguments.length?ot(je=St*k):je*S},ft}function Ge(Oe,je){return[Oe*a(je),je]}Ge.invert=function(Oe,je){return[Oe/a(je),je]};function ze(){return s.geoProjection(Ge).scale(152.63)}function We(Oe){if(!Oe)return Ge;var je=1/y(Oe);function ot(ft,St){var Tt=je+Oe-St,Et=Tt&&ft*a(St)/Tt;return[Tt*p(Et),je-Tt*a(Et)]}return ot.invert=function(ft,St){var Tt=D(ft*ft+(St=je-St)*St),Et=je+Oe-Tt;return[Tt/a(Et)*i(ft,St),Et]},ot}function mt(){return rt(We).scale(123.082).center([0,26.1441]).parallel(45)}function Ft(Oe){function je(ot,ft){var St=M-ft,Tt=St&&ot*Oe*p(St)/St;return[St*p(Tt)/Oe,M-St*a(Tt)]}return je.invert=function(ot,ft){var St=ot*Oe,Tt=M-ft,Et=D(St*St+Tt*Tt),or=i(St,Tt);return[(Et?Et/p(Et):1)*or/Oe,M-Et]},je}function Xt(){var Oe=.5,je=s.geoProjectionMutator(Ft),ot=je(Oe);return ot.fraction=function(ft){return arguments.length?je(Oe=+ft):Oe},ot.scale(158.837)}var Pt=Se(1,4/b,b);function Ut(){return s.geoProjection(Pt).scale(152.63)}function Gt(Oe,je,ot,ft,St,Tt){var Et=a(Tt),or;if(x(Oe)>1||x(Tt)>1)or=F(ot*St+je*ft*Et);else{var vr=p(Oe/2),nr=p(Tt/2);or=2*O(D(vr*vr+je*ft*nr*nr))}return x(or)>g?[or,i(ft*p(Tt),je*St-ot*ft*Et)]:[0,0]}function It(Oe,je,ot){return F((Oe*Oe+je*je-ot*ot)/(2*Oe*je))}function Ct(Oe){return Oe-2*b*n((Oe+b)/(2*b))}function lt(Oe,je,ot){for(var ft=[[Oe[0],Oe[1],p(Oe[1]),a(Oe[1])],[je[0],je[1],p(je[1]),a(je[1])],[ot[0],ot[1],p(ot[1]),a(ot[1])]],St=ft[2],Tt,Et=0;Et<3;++Et,St=Tt)Tt=ft[Et],St.v=Gt(Tt[1]-St[1],St[3],St[2],Tt[3],Tt[2],Tt[0]-St[0]),St.point=[0,0];var or=It(ft[0].v[0],ft[2].v[0],ft[1].v[0]),vr=It(ft[0].v[0],ft[1].v[0],ft[2].v[0]),nr=b-or;ft[2].point[1]=0,ft[0].point[0]=-(ft[1].point[0]=ft[0].v[0]/2);var gr=[ft[2].point[0]=ft[0].point[0]+ft[2].v[0]*a(or),2*(ft[0].point[1]=ft[1].point[1]=ft[2].v[0]*p(or))];function Or(Kr,cn){var Ln=p(cn),zn=a(cn),oa=new Array(3),Ua;for(Ua=0;Ua<3;++Ua){var Pa=ft[Ua];if(oa[Ua]=Gt(cn-Pa[1],Pa[3],Pa[2],zn,Ln,Kr-Pa[0]),!oa[Ua][0])return Pa.point;oa[Ua][1]=Ct(oa[Ua][1]-Pa.v[1])}var ci=gr.slice();for(Ua=0;Ua<3;++Ua){var si=Ua==2?0:Ua+1,hi=It(ft[Ua].v[0],oa[Ua][0],oa[si][0]);oa[Ua][1]<0&&(hi=-hi),Ua?Ua==1?(hi=vr-hi,ci[0]-=oa[Ua][0]*a(hi),ci[1]-=oa[Ua][0]*p(hi)):(hi=nr-hi,ci[0]+=oa[Ua][0]*a(hi),ci[1]+=oa[Ua][0]*p(hi)):(ci[0]+=oa[Ua][0]*a(hi),ci[1]-=oa[Ua][0]*p(hi))}return ci[0]/=3,ci[1]/=3,ci}return Or}function dt(Oe){return Oe[0]*=k,Oe[1]*=k,Oe}function et(){return Pe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Pe(Oe,je,ot){var ft=s.geoCentroid({type:"MultiPoint",coordinates:[Oe,je,ot]}),St=[-ft[0],-ft[1]],Tt=s.geoRotation(St),Et=lt(dt(Tt(Oe)),dt(Tt(je)),dt(Tt(ot)));Et.invert=he(Et);var or=s.geoProjection(Et).rotate(St),vr=or.center;return delete or.rotate,or.center=function(nr){return arguments.length?vr(Tt(nr)):Tt.invert(vr())},or.clipAngle(90)}function Je(Oe,je){var ot=D(1-p(je));return[2/h*Oe*ot,h*(1-ot)]}Je.invert=function(Oe,je){var ot=(ot=je/h-1)*ot;return[ot>0?Oe*D(b/ot)/2:0,O(1-ot)]};function it(){return s.geoProjection(Je).scale(95.6464).center([0,30])}function ht(Oe){var je=y(Oe);function ot(ft,St){return[ft,(ft?ft/p(ft):1)*(p(St)*a(ft)-je*a(St))]}return ot.invert=je?function(ft,St){ft&&(St*=p(ft)/ft);var Tt=a(ft);return[ft,2*i(D(Tt*Tt+je*je-St*St)-Tt,je-St)]}:function(ft,St){return[ft,O(ft?St*y(ft)/ft:St)]},ot}function zt(){return rt(ht).scale(249.828).clipAngle(90)}var Lt=D(3);function Vt(Oe,je){return[Lt*Oe*(2*a(2*je/3)-1)/h,Lt*h*p(je/3)]}Vt.invert=function(Oe,je){var ot=3*O(je/(Lt*h));return[h*Oe/(Lt*(2*a(2*ot/3)-1)),ot]};function $t(){return s.geoProjection(Vt).scale(156.19)}function Ht(Oe){var je=a(Oe);function ot(ft,St){return[ft*je,p(St)/je]}return ot.invert=function(ft,St){return[ft/je,O(St*je)]},ot}function tr(){return rt(Ht).parallel(38.58).scale(195.044)}function qe(Oe){var je=a(Oe);function ot(ft,St){return[ft*je,(1+je)*y(St/2)]}return ot.invert=function(ft,St){return[ft/je,t(St/(1+je))*2]},ot}function xt(){return rt(qe).scale(124.75)}function Rt(Oe,je){var ot=D(8/(3*b));return[ot*Oe*(1-x(je)/b),ot*je]}Rt.invert=function(Oe,je){var ot=D(8/(3*b)),ft=je/ot;return[Oe/(ot*(1-x(ft)/b)),ft]};function fr(){return s.geoProjection(Rt).scale(165.664)}function br(Oe,je){var ot=D(4-3*p(x(je)));return[2/D(6*b)*Oe*ot,d(je)*D(2*b/3)*(2-ot)]}br.invert=function(Oe,je){var ot=2-x(je)/D(2*b/3);return[Oe*D(6*b)/(2*ot),d(je)*O((4-ot*ot)/3)]};function pr(){return s.geoProjection(br).scale(165.664)}function Tr(Oe,je){var ot=D(b*(4+b));return[2/ot*Oe*(1+D(1-4*je*je/(b*b))),4/ot*je]}Tr.invert=function(Oe,je){var ot=D(b*(4+b))/2;return[Oe*ot/(1+D(1-je*je*(4+b)/(4*b))),je*ot/2]};function Nr(){return s.geoProjection(Tr).scale(180.739)}function Ir(Oe,je){var ot=(2+M)*p(je);je/=2;for(var ft=0,St=1/0;ft<10&&x(St)>g;ft++){var Tt=a(je);je-=St=(je+p(je)*(Tt+2)-ot)/(2*Tt*(1+Tt))}return[2/D(b*(4+b))*Oe*(1+a(je)),2*D(b/(4+b))*p(je)]}Ir.invert=function(Oe,je){var ot=je*D((4+b)/b)/2,ft=O(ot),St=a(ft);return[Oe/(2/D(b*(4+b))*(1+St)),O((ft+ot*(St+2))/(2+M))]};function lr(){return s.geoProjection(Ir).scale(180.739)}function Yr(Oe,je){return[Oe*(1+a(je))/D(2+b),2*je/D(2+b)]}Yr.invert=function(Oe,je){var ot=D(2+b),ft=je*ot/2;return[ot*Oe/(1+a(ft)),ft]};function nt(){return s.geoProjection(Yr).scale(173.044)}function Ae(Oe,je){for(var ot=(1+M)*p(je),ft=0,St=1/0;ft<10&&x(St)>g;ft++)je-=St=(je+p(je)-ot)/(1+a(je));return ot=D(2+b),[Oe*(1+a(je))/ot,2*je/ot]}Ae.invert=function(Oe,je){var ot=1+M,ft=D(ot/2);return[Oe*2*ft/(1+a(je*=ft)),O((je+p(je))/ot)]};function Ee(){return s.geoProjection(Ae).scale(173.044)}var Fe=3+2*_;function Ke(Oe,je){var ot=p(Oe/=2),ft=a(Oe),St=D(a(je)),Tt=a(je/=2),Et=p(je)/(Tt+_*ft*St),or=D(2/(1+Et*Et)),vr=D((_*Tt+(ft+ot)*St)/(_*Tt+(ft-ot)*St));return[Fe*(or*(vr-1/vr)-2*f(vr)),Fe*(or*Et*(vr+1/vr)-2*t(Et))]}Ke.invert=function(Oe,je){if(!(Tt=se.invert(Oe/1.2,je*1.065)))return null;var ot=Tt[0],ft=Tt[1],St=20,Tt;Oe/=Fe,je/=Fe;do{var Et=ot/2,or=ft/2,vr=p(Et),nr=a(Et),gr=p(or),Or=a(or),Kr=a(ft),cn=D(Kr),Ln=gr/(Or+_*nr*cn),zn=Ln*Ln,oa=D(2/(1+zn)),Ua=_*Or+(nr+vr)*cn,Pa=_*Or+(nr-vr)*cn,ci=Ua/Pa,si=D(ci),hi=si-1/si,Ri=si+1/si,Vi=oa*hi-2*f(si)-Oe,xi=oa*Ln*Ri-2*t(Ln)-je,Po=gr&&T*cn*vr*zn/gr,qo=(_*nr*Or+cn)/(2*(Or+_*nr*cn)*(Or+_*nr*cn)*cn),ps=-.5*Ln*oa*oa*oa,Ni=ps*Po,eo=ps*qo,Ts=(Ts=2*Or+_*cn*(nr-vr))*Ts*si,es=(_*nr*Or*cn+Kr)/Ts,As=-(_*vr*gr)/(cn*Ts),Ws=hi*Ni-2*es/si+oa*(es+es/ci),ve=hi*eo-2*As/si+oa*(As+As/ci),Me=Ln*Ri*Ni-2*Po/(1+zn)+oa*Ri*Po+oa*Ln*(es-es/ci),Re=Ln*Ri*eo-2*qo/(1+zn)+oa*Ri*qo+oa*Ln*(As-As/ci),Ve=ve*Me-Re*Ws;if(!Ve)break;var Ue=(xi*ve-Vi*Re)/Ve,$e=(Vi*Me-xi*Ws)/Ve;ot-=Ue,ft=l(-M,o(M,ft-$e))}while((x(Ue)>g||x($e)>g)&&--St>0);return x(x(ft)-M)<g?[0,ft]:St&&[ot,ft]};function tt(){return s.geoProjection(Ke).scale(62.5271)}var ut=a(35*k);function ct(Oe,je){var ot=y(je/2);return[Oe*ut*D(1-ot*ot),(1+ut)*ot]}ct.invert=function(Oe,je){var ot=je/(1+ut);return[Oe&&Oe/(ut*D(1-ot*ot)),2*t(ot)]};function yt(){return s.geoProjection(ct).scale(137.152)}function kt(Oe,je){var ot=je/2,ft=a(ot);return[2*Oe/h*a(je)*ft*ft,h*y(ot)]}kt.invert=function(Oe,je){var ot=t(je/h),ft=a(ot),St=2*ot;return[Oe*h/2/(a(St)*ft*ft),St]};function jt(){return s.geoProjection(kt).scale(135.264)}function Mr(Oe){var je=1-Oe,ot=Tt(b,0)[0]-Tt(-b,0)[0],ft=Tt(0,M)[1]-Tt(0,-M)[1],St=D(2*ft/ot);function Tt(vr,nr){var gr=a(nr),Or=p(nr);return[gr/(je+Oe*gr)*vr,je*nr+Oe*Or]}function Et(vr,nr){var gr=Tt(vr,nr);return[gr[0]*St,gr[1]/St]}function or(vr){return Et(0,vr)[1]}return Et.invert=function(vr,nr){var gr=xe(or,nr),Or=vr/St*(Oe+je/a(gr));return[Or,gr]},Et}function Sr(){var Oe=.5,je=s.geoProjectionMutator(Mr),ot=je(Oe);return ot.alpha=function(ft){return arguments.length?je(Oe=+ft):Oe},ot.scale(168.725)}function Lr(Oe){return[Oe[0]/2,O(y(Oe[1]/2*k))*S]}function Ar(Oe){return[Oe[0]*2,2*t(p(Oe[1]*k))*S]}function Ur(Oe){Oe==null&&(Oe=s.geoOrthographic);var je=Oe(),ot=s.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function ft(Tt){return je(Lr(Tt))}je.invert&&(ft.invert=function(Tt){return Ar(je.invert(Tt))}),ft.stream=function(Tt){var Et=je.stream(Tt),or=ot.stream({point:function(vr,nr){Et.point(vr/2,O(y(-nr/2*k))*S)},lineStart:function(){Et.lineStart()},lineEnd:function(){Et.lineEnd()},polygonStart:function(){Et.polygonStart()},polygonEnd:function(){Et.polygonEnd()}});return or.sphere=Et.sphere,or};function St(Tt){ft[Tt]=function(){return arguments.length?(je[Tt].apply(je,arguments),ft):je[Tt]()}}return ft.rotate=function(Tt){return arguments.length?(ot.rotate(Tt),ft):ot.rotate()},ft.center=function(Tt){return arguments.length?(je.center(Lr(Tt)),ft):Ar(je.center())},St("angle"),St("clipAngle"),St("clipExtent"),St("fitExtent"),St("fitHeight"),St("fitSize"),St("fitWidth"),St("scale"),St("translate"),St("precision"),ft.scale(249.5)}function fn(Oe,je){var ot=2*b/je,ft=Oe*Oe;function St(Tt,Et){var or=s.geoAzimuthalEquidistantRaw(Tt,Et),vr=or[0],nr=or[1],gr=vr*vr+nr*nr;if(gr>ft){var Or=D(gr),Kr=i(nr,vr),cn=ot*v(Kr/ot),Ln=Kr-cn,zn=Oe*a(Ln),oa=(Oe*p(Ln)-Ln*p(zn))/(M-zn),Ua=Cr(Ln,oa),Pa=(b-Oe)/_r(Ua,zn,b);vr=Or;var ci=50,si;do vr-=si=(Oe+_r(Ua,zn,vr)*Pa-Or)/(Ua(vr)*Pa);while(x(si)>g&&--ci>0);nr=Ln*p(vr),vr<M&&(nr-=oa*(vr-M));var hi=p(cn),Ri=a(cn);or[0]=vr*Ri-nr*hi,or[1]=vr*hi+nr*Ri}return or}return St.invert=function(Tt,Et){var or=Tt*Tt+Et*Et;if(or>ft){var vr=D(or),nr=i(Et,Tt),gr=ot*v(nr/ot),Or=nr-gr;Tt=vr*a(Or),Et=vr*p(Or);for(var Kr=Tt-M,cn=p(Tt),Ln=Et/cn,zn=Tt<M?1/0:0,oa=10;;){var Ua=Oe*p(Ln),Pa=Oe*a(Ln),ci=p(Pa),si=M-Pa,hi=(Ua-Ln*ci)/si,Ri=Cr(Ln,hi);if(x(zn)<A||!--oa)break;Ln-=zn=(Ln*cn-hi*Kr-Et)/(cn-Kr*2*(si*(Pa+Ln*Ua*a(Pa)-ci)-Ua*(Ua-Ln*ci))/(si*si))}vr=Oe+_r(Ri,Pa,Tt)*(b-Oe)/_r(Ri,Pa,b),nr=gr+Ln,Tt=vr*a(nr),Et=vr*p(nr)}return s.geoAzimuthalEquidistantRaw.invert(Tt,Et)},St}function Cr(Oe,je){return function(ot){var ft=Oe*a(ot);return ot<M&&(ft-=je),D(1+ft*ft)}}function _r(Oe,je,ot){for(var ft=50,St=(ot-je)/ft,Tt=Oe(je)+Oe(ot),Et=1,or=je;Et<ft;++Et)Tt+=2*Oe(or+=St);return Tt*.5*St}function En(){var Oe=6,je=30*k,ot=a(je),ft=p(je),St=s.geoProjectionMutator(fn),Tt=St(je,Oe),Et=Tt.stream,or=.01,vr=-a(or*k),nr=p(or*k);return Tt.radius=function(gr){return arguments.length?(ot=a(je=gr*k),ft=p(je),St(je,Oe)):je*S},Tt.lobes=function(gr){return arguments.length?St(je,Oe=+gr):Oe},Tt.stream=function(gr){var Or=Tt.rotate(),Kr=Et(gr),cn=(Tt.rotate([0,0]),Et(gr));return Tt.rotate(Or),Kr.sphere=function(){cn.polygonStart(),cn.lineStart();for(var Ln=0,zn=2*b/Oe,oa=0;Ln<Oe;++Ln,oa-=zn)cn.point(i(nr*a(oa),vr)*S,O(nr*p(oa))*S),cn.point(i(ft*a(oa-zn/2),ot)*S,O(ft*p(oa-zn/2))*S);cn.lineEnd(),cn.polygonEnd()},Kr},Tt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function Jr(Oe,je,ot,ft,St,Tt,Et,or){arguments.length<8&&(or=0);function vr(nr,gr){if(!gr)return[Oe*nr/b,0];var Or=gr*gr,Kr=Oe+Or*(je+Or*(ot+Or*ft)),cn=gr*(St-1+Or*(Tt-or+Or*Et)),Ln=(Kr*Kr+cn*cn)/(2*cn),zn=nr*O(Kr/Ln)/b;return[Ln*p(zn),gr*(1+Or*or)+Ln*(1-a(zn))]}return vr.invert=function(nr,gr){var Or=b*nr/Oe,Kr=gr,cn,Ln,zn=50;do{var oa=Kr*Kr,Ua=Oe+oa*(je+oa*(ot+oa*ft)),Pa=Kr*(St-1+oa*(Tt-or+oa*Et)),ci=Ua*Ua+Pa*Pa,si=2*Pa,hi=ci/si,Ri=hi*hi,Vi=O(Ua/hi)/b,xi=Or*Vi,Po=Ua*Ua,qo=(2*je+oa*(4*ot+oa*6*ft))*Kr,ps=St+oa*(3*Tt+oa*5*Et),Ni=2*(Ua*qo+Pa*(ps-1)),eo=2*(ps-1),Ts=(Ni*si-ci*eo)/(si*si),es=a(xi),As=p(xi),Ws=hi*es,ve=hi*As,Me=Or/b*(1/D(1-Po/Ri))*(qo*hi-Ua*Ts)/Ri,Re=ve-nr,Ve=Kr*(1+oa*or)+hi-Ws-gr,Ue=Ts*As+Ws*Me,$e=Ws*Vi,wt=1+Ts-(Ts*es-ve*Me),gt=ve*Vi,Dt=Ue*gt-wt*$e;if(!Dt)break;Or-=cn=(Ve*Ue-Re*wt)/Dt,Kr-=Ln=(Re*gt-Ve*$e)/Dt}while((x(cn)>g||x(Ln)>g)&&--zn>0);return[Or,Kr]},vr}var Pr=Jr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function vn(){return s.geoProjection(Pr).scale(149.995)}var xn=Jr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function qr(){return s.geoProjection(xn).scale(153.93)}var st=Jr(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Bt(){return s.geoProjection(st).scale(130.945)}function ir(Oe,je){var ot=Oe*Oe,ft=je*je;return[Oe*(1-.162388*ft)*(.87-952426e-9*ot*ot),je*(1+ft/12)]}ir.invert=function(Oe,je){var ot=Oe,ft=je,St=50,Tt;do{var Et=ft*ft;ft-=Tt=(ft*(1+Et/12)-je)/(1+Et/4)}while(x(Tt)>g&&--St>0);St=50,Oe/=1-.162388*Et;do{var or=(or=ot*ot)*or;ot-=Tt=(ot*(.87-952426e-9*or)-Oe)/(.87-.00476213*or)}while(x(Tt)>g&&--St>0);return[ot,ft]};function xr(){return s.geoProjection(ir).scale(131.747)}var Qr=Jr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Gr(){return s.geoProjection(Qr).scale(131.087)}function Br(Oe){var je=Oe(M,0)[0]-Oe(-M,0)[0];function ot(ft,St){var Tt=ft>0?-.5:.5,Et=Oe(ft+Tt*b,St);return Et[0]-=Tt*je,Et}return Oe.invert&&(ot.invert=function(ft,St){var Tt=ft>0?-.5:.5,Et=Oe.invert(ft+Tt*je,St),or=Et[0]-Tt*b;return or<-b?or+=2*b:or>b&&(or-=2*b),Et[0]=or,Et}),ot}function kr(Oe,je){var ot=d(Oe),ft=d(je),St=a(je),Tt=a(Oe)*St,Et=p(Oe)*St,or=p(ft*je);Oe=x(i(Et,or)),je=O(Tt),x(Oe-M)>g&&(Oe%=M);var vr=en(Oe>b/4?M-Oe:Oe,je);return Oe>b/4&&(or=vr[0],vr[0]=-vr[1],vr[1]=-or),vr[0]*=ot,vr[1]*=-ft,vr}kr.invert=function(Oe,je){x(Oe)>1&&(Oe=d(Oe)*2-Oe),x(je)>1&&(je=d(je)*2-je);var ot=d(Oe),ft=d(je),St=-ot*Oe,Tt=-ft*je,Et=Tt/St<1,or=Zn(Et?Tt:St,Et?St:Tt),vr=or[0],nr=or[1],gr=a(nr);return Et&&(vr=-M-vr),[ot*(i(p(vr)*gr,-p(nr))+b),ft*O(a(vr)*gr)]};function en(Oe,je){if(je===M)return[0,0];var ot=p(je),ft=ot*ot,St=ft*ft,Tt=1+St,Et=1+3*St,or=1-St,vr=O(1/D(Tt)),nr=or+ft*Tt*vr,gr=(1-ot)/nr,Or=D(gr),Kr=gr*Tt,cn=D(Kr),Ln=Or*or,zn,oa;if(Oe===0)return[0,-(Ln+ft*cn)];var Ua=a(je),Pa=1/Ua,ci=2*ot*Ua,si=(-3*ft+vr*Et)*ci,hi=(-nr*Ua-(1-ot)*si)/(nr*nr),Ri=.5*hi/Or,Vi=or*Ri-2*ft*Or*ci,xi=ft*Tt*hi+gr*Et*ci,Po=-Pa*ci,qo=-Pa*xi,ps=-2*Pa*Vi,Ni=4*Oe/b,eo;if(Oe>.222*b||je<b/4&&Oe>.175*b){if(zn=(Ln+ft*D(Kr*(1+St)-Ln*Ln))/(1+St),Oe>b/4)return[zn,zn];var Ts=zn,es=.5*zn;zn=.5*(es+Ts),oa=50;do{var As=D(Kr-zn*zn),Ws=zn*(ps+Po*As)+qo*O(zn/cn)-Ni;if(!Ws)break;Ws<0?es=zn:Ts=zn,zn=.5*(es+Ts)}while(x(Ts-es)>g&&--oa>0)}else{zn=g,oa=25;do{var ve=zn*zn,Me=D(Kr-ve),Re=ps+Po*Me,Ve=zn*Re+qo*O(zn/cn)-Ni,Ue=Re+(qo-Po*ve)/Me;zn-=eo=Me?Ve/Ue:0}while(x(eo)>g&&--oa>0)}return[zn,-Ln-ft*D(Kr-zn*zn)]}function Zn(Oe,je){for(var ot=0,ft=1,St=.5,Tt=50;;){var Et=St*St,or=D(St),vr=O(1/D(1+Et)),nr=1-Et+St*(1+Et)*vr,gr=(1-or)/nr,Or=D(gr),Kr=gr*(1+Et),cn=Or*(1-Et),Ln=Kr-Oe*Oe,zn=D(Ln),oa=je+cn+St*zn;if(x(ft-ot)<A||--Tt==0||oa===0)break;oa>0?ot=St:ft=St,St=.5*(ot+ft)}if(!Tt)return null;var Ua=O(or),Pa=a(Ua),ci=1/Pa,si=2*or*Pa,hi=(-3*St+vr*(1+3*Et))*si,Ri=(-nr*Pa-(1-or)*hi)/(nr*nr),Vi=.5*Ri/Or,xi=(1-Et)*Vi-2*St*Or*si,Po=-2*ci*xi,qo=-ci*si,ps=-ci*(St*(1+Et)*Ri+gr*(1+3*Et)*si);return[b/4*(Oe*(Po+qo*zn)+ps*O(Oe/D(Kr))),Ua]}function Hn(){return s.geoProjection(Br(kr)).scale(239.75)}function da(Oe,je,ot){var ft,St,Tt;return Oe?(ft=wa(Oe,ot),je?(St=wa(je,1-ot),Tt=St[1]*St[1]+ot*ft[0]*ft[0]*St[0]*St[0],[[ft[0]*St[2]/Tt,ft[1]*ft[2]*St[0]*St[1]/Tt],[ft[1]*St[1]/Tt,-ft[0]*ft[2]*St[0]*St[2]/Tt],[ft[2]*St[1]*St[2]/Tt,-ot*ft[0]*ft[1]*St[0]/Tt]]):[[ft[0],0],[ft[1],0],[ft[2],0]]):(St=wa(je,1-ot),[[0,St[0]/St[1]],[1/St[1],0],[St[2]/St[1],0]])}function wa(Oe,je){var ot,ft,St,Tt,Et;if(je<g)return Tt=p(Oe),ft=a(Oe),ot=je*(Oe-Tt*ft)/4,[Tt-ot*ft,ft+ot*Tt,1-je*Tt*Tt/2,Oe-ot];if(je>=1-g)return ot=(1-je)/4,ft=N(Oe),Tt=R(Oe),St=1/ft,Et=ft*U(Oe),[Tt+ot*(Et-Oe)/(ft*ft),St-ot*Tt*St*(Et-Oe),St+ot*Tt*St*(Et+Oe),2*t(r(Oe))-M+ot*(Et-Oe)/ft];var or=[1,0,0,0,0,0,0,0,0],vr=[D(je),0,0,0,0,0,0,0,0],nr=0;for(ft=D(1-je),Et=1;x(vr[nr]/or[nr])>g&&nr<8;)ot=or[nr++],vr[nr]=(ot-ft)/2,or[nr]=(ot+ft)/2,ft=D(ot*ft),Et*=2;St=Et*or[nr]*Oe;do Tt=vr[nr]*p(ft=St)/or[nr],St=(O(Tt)+St)/2;while(--nr);return[p(St),Tt=a(St),Tt/a(St-ft),St]}function Va(Oe,je,ot){var ft=x(Oe),St=x(je),Tt=U(St);if(ft){var Et=1/p(ft),or=1/(y(ft)*y(ft)),vr=-(or+ot*(Tt*Tt*Et*Et)-1+ot),nr=(ot-1)*or,gr=(-vr+D(vr*vr-4*nr))/2;return[Oa(t(1/D(gr)),ot)*d(Oe),Oa(t(D((gr/or-1)/ot)),1-ot)*d(je)]}return[0,Oa(t(Tt),1-ot)*d(je)]}function Oa(Oe,je){if(!je)return Oe;if(je===1)return f(y(Oe/2+w));for(var ot=1,ft=D(1-je),St=D(je),Tt=0;x(St)>g;Tt++){if(Oe%b){var Et=t(ft*y(Oe)/ot);Et<0&&(Et+=b),Oe+=Et+~~(Oe/b)*b}else Oe+=Oe;St=(ot+ft)/2,ft=D(ot*ft),St=((ot=St)-ft)/2}return Oe/(c(2,Tt)*ot)}function wr(Oe,je){var ot=(_-1)/(_+1),ft=D(1-ot*ot),St=Oa(M,ft*ft),Tt=-1,Et=f(y(b/4+x(je)/2)),or=r(Tt*Et)/D(ot),vr=wn(or*a(Tt*Oe),or*p(Tt*Oe)),nr=Va(vr[0],vr[1],ft*ft);return[-nr[1],(je>=0?1:-1)*(.5*St-nr[0])]}function wn(Oe,je){var ot=Oe*Oe,ft=je+1,St=1-ot-je*je;return[.5*((Oe>=0?M:-M)-i(St,2*Oe)),-.25*f(St*St+4*ot)+.5*f(ft*ft+ot)]}function ln(Oe,je){var ot=je[0]*je[0]+je[1]*je[1];return[(Oe[0]*je[0]+Oe[1]*je[1])/ot,(Oe[1]*je[0]-Oe[0]*je[1])/ot]}wr.invert=function(Oe,je){var ot=(_-1)/(_+1),ft=D(1-ot*ot),St=Oa(M,ft*ft),Tt=-1,Et=da(.5*St-je,-Oe,ft*ft),or=ln(Et[0],Et[1]),vr=i(or[1],or[0])/Tt;return[vr,2*t(r(.5/Tt*f(ot*or[0]*or[0]+ot*or[1]*or[1])))-M]};function jn(){return s.geoProjection(Br(wr)).scale(151.496)}function Jn(Oe){var je=p(Oe),ot=a(Oe),ft=La(Oe);ft.invert=La(-Oe);function St(Tt,Et){var or=ft(Tt,Et);Tt=or[0],Et=or[1];var vr=p(Et),nr=a(Et),gr=a(Tt),Or=F(je*vr+ot*nr*gr),Kr=p(Or),cn=x(Kr)>g?Or/Kr:1;return[cn*ot*p(Tt),(x(Tt)>M?cn:-cn)*(je*nr-ot*vr*gr)]}return St.invert=function(Tt,Et){var or=D(Tt*Tt+Et*Et),vr=-p(or),nr=a(or),gr=or*nr,Or=-Et*vr,Kr=or*je,cn=D(gr*gr+Or*Or-Kr*Kr),Ln=i(gr*Kr+Or*cn,Or*Kr-gr*cn),zn=(or>M?-1:1)*i(Tt*vr,or*a(Ln)*nr+Et*p(Ln)*vr);return ft.invert(zn,Ln)},St}function La(Oe){var je=p(Oe),ot=a(Oe);return function(ft,St){var Tt=a(St),Et=a(ft)*Tt,or=p(ft)*Tt,vr=p(St);return[i(or,Et*ot-vr*je),O(vr*ot+Et*je)]}}function ga(){var Oe=0,je=s.geoProjectionMutator(Jn),ot=je(Oe),ft=ot.rotate,St=ot.stream,Tt=s.geoCircle();return ot.parallel=function(Et){if(!arguments.length)return Oe*S;var or=ot.rotate();return je(Oe=Et*k).rotate(or)},ot.rotate=function(Et){return arguments.length?(ft.call(ot,[Et[0],Et[1]-Oe*S]),Tt.center([-Et[0],-Et[1]]),ot):(Et=ft.call(ot),Et[1]+=Oe*S,Et)},ot.stream=function(Et){return Et=St(Et),Et.sphere=function(){Et.polygonStart();var or=.01,vr=Tt.radius(90-or)().coordinates[0],nr=vr.length-1,gr=-1,Or;for(Et.lineStart();++gr<nr;)Et.point((Or=vr[gr])[0],Or[1]);for(Et.lineEnd(),vr=Tt.radius(90+or)().coordinates[0],nr=vr.length-1,Et.lineStart();--gr>=0;)Et.point((Or=vr[gr])[0],Or[1]);Et.lineEnd(),Et.polygonEnd()},Et},ot.scale(79.4187).parallel(45).clipAngle(180-.001)}var qn=3,Ea=O(1-1/qn)*S,la=Ht(0);function sr(Oe){var je=Ea*k,ot=Je(b,je)[0]-Je(-b,je)[0],ft=la(0,je)[1],St=Je(0,je)[1],Tt=h-St,Et=L/Oe,or=4/L,vr=ft+Tt*Tt*4/L;function nr(gr,Or){var Kr,cn=x(Or);if(cn>je){var Ln=o(Oe-1,l(0,n((gr+b)/Et)));gr+=b*(Oe-1)/Oe-Ln*Et,Kr=Je(gr,cn),Kr[0]=Kr[0]*L/ot-L*(Oe-1)/(2*Oe)+Ln*L/Oe,Kr[1]=ft+(Kr[1]-St)*4*Tt/L,Or<0&&(Kr[1]=-Kr[1])}else Kr=la(gr,Or);return Kr[0]*=or,Kr[1]/=vr,Kr}return nr.invert=function(gr,Or){gr/=or,Or*=vr;var Kr=x(Or);if(Kr>ft){var cn=o(Oe-1,l(0,n((gr+b)/Et)));gr=(gr+b*(Oe-1)/Oe-cn*Et)*ot/L;var Ln=Je.invert(gr,.25*(Kr-ft)*L/Tt+St);return Ln[0]-=b*(Oe-1)/Oe-cn*Et,Or<0&&(Ln[1]=-Ln[1]),Ln}return la.invert(gr,Or)},nr}function Hr(Oe,je){return[Oe,je&1?90-g:Ea]}function dn(Oe,je){return[Oe,je&1?-90+g:-Ea]}function hn(Oe){return[Oe[0]*(1-g),Oe[1]]}function Sn(Oe){var je=[].concat(m.range(-180,180+Oe/2,Oe).map(Hr),m.range(180,-180-Oe/2,-Oe).map(dn));return{type:"Polygon",coordinates:[Oe===180?je.map(hn):je]}}function Rn(){var Oe=4,je=s.geoProjectionMutator(sr),ot=je(Oe),ft=ot.stream;return ot.lobes=function(St){return arguments.length?je(Oe=+St):Oe},ot.stream=function(St){var Tt=ot.rotate(),Et=ft(St),or=(ot.rotate([0,0]),ft(St));return ot.rotate(Tt),Et.sphere=function(){s.geoStream(Sn(180/Oe),or)},Et},ot.scale(239.75)}function Mn(Oe){var je=1+Oe,ot=p(1/je),ft=O(ot),St=2*D(b/(Tt=b+4*ft*je)),Tt,Et=.5*St*(je+D(Oe*(2+Oe))),or=Oe*Oe,vr=je*je;function nr(gr,Or){var Kr=1-p(Or),cn,Ln;if(Kr&&Kr<2){var zn=M-Or,oa=25,Ua;do{var Pa=p(zn),ci=a(zn),si=ft+i(Pa,je-ci),hi=1+vr-2*je*ci;zn-=Ua=(zn-or*ft-je*Pa+hi*si-.5*Kr*Tt)/(2*je*Pa*si)}while(x(Ua)>A&&--oa>0);cn=St*D(hi),Ln=gr*si/b}else cn=St*(Oe+Kr),Ln=gr*ft/b;return[cn*p(Ln),Et-cn*a(Ln)]}return nr.invert=function(gr,Or){var Kr=gr*gr+(Or-=Et)*Or,cn=(1+vr-Kr/(St*St))/(2*je),Ln=F(cn),zn=p(Ln),oa=ft+i(zn,je-cn);return[O(gr/D(Kr))*b/oa,O(1-2*(Ln-or*ft-je*zn+(1+vr-2*je*cn)*oa)/Tt)]},nr}function mr(){var Oe=1,je=s.geoProjectionMutator(Mn),ot=je(Oe);return ot.ratio=function(ft){return arguments.length?je(Oe=+ft):Oe},ot.scale(167.774).center([0,18.67])}var hr=.7109889596207567,Fr=.0528035274542;function nn(Oe,je){return je>-hr?(Oe=Be(Oe,je),Oe[1]+=Fr,Oe):Ge(Oe,je)}nn.invert=function(Oe,je){return je>-hr?Be.invert(Oe,je-Fr):Ge.invert(Oe,je)};function On(){return s.geoProjection(nn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function ra(Oe,je){return x(je)>hr?(Oe=Be(Oe,je),Oe[1]-=je>0?Fr:-Fr,Oe):Ge(Oe,je)}ra.invert=function(Oe,je){return x(je)>hr?Be.invert(Oe,je+(je>0?Fr:-Fr)):Ge.invert(Oe,je)};function ua(){return s.geoProjection(ra).scale(152.63)}function $n(Oe,je,ot,ft){var St=D(4*b/(2*ot+(1+Oe-je/2)*p(2*ot)+(Oe+je)/2*p(4*ot)+je/2*p(6*ot))),Tt=D(ft*p(ot)*D((1+Oe*a(2*ot)+je*a(4*ot))/(1+Oe+je))),Et=ot*vr(1);function or(Or){return D(1+Oe*a(2*Or)+je*a(4*Or))}function vr(Or){var Kr=Or*ot;return(2*Kr+(1+Oe-je/2)*p(2*Kr)+(Oe+je)/2*p(4*Kr)+je/2*p(6*Kr))/ot}function nr(Or){return or(Or)*p(Or)}var gr=function(Or,Kr){var cn=ot*xe(vr,Et*p(Kr)/ot,Kr/b);isNaN(cn)&&(cn=ot*d(Kr));var Ln=St*or(cn);return[Ln*Tt*Or/b*a(cn),Ln/Tt*p(cn)]};return gr.invert=function(Or,Kr){var cn=xe(nr,Kr*Tt/St);return[Or*b/(a(cn)*St*Tt*or(cn)),O(ot*vr(cn/ot)/Et)]},ot===0&&(St=D(ft/b),gr=function(Or,Kr){return[Or*St,p(Kr)/St]},gr.invert=function(Or,Kr){return[Or/St,O(Kr*St)]}),gr}function Qn(){var Oe=1,je=0,ot=45*k,ft=2,St=s.geoProjectionMutator($n),Tt=St(Oe,je,ot,ft);return Tt.a=function(Et){return arguments.length?St(Oe=+Et,je,ot,ft):Oe},Tt.b=function(Et){return arguments.length?St(Oe,je=+Et,ot,ft):je},Tt.psiMax=function(Et){return arguments.length?St(Oe,je,ot=+Et*k,ft):ot*S},Tt.ratio=function(Et){return arguments.length?St(Oe,je,ot,ft=+Et):ft},Tt.scale(180.739)}function kn(Oe,je,ot,ft,St,Tt,Et,or,vr,nr,gr){if(gr.nanEncountered)return NaN;var Or,Kr,cn,Ln,zn,oa,Ua,Pa,ci,si;if(Or=ot-je,Kr=Oe(je+Or*.25),cn=Oe(ot-Or*.25),isNaN(Kr)){gr.nanEncountered=!0;return}if(isNaN(cn)){gr.nanEncountered=!0;return}return Ln=Or*(ft+4*Kr+St)/12,zn=Or*(St+4*cn+Tt)/12,oa=Ln+zn,si=(oa-Et)/15,nr>vr?(gr.maxDepthCount++,oa+si):Math.abs(si)<or?oa+si:(Ua=je+Or*.5,Pa=kn(Oe,je,Ua,ft,Kr,St,Ln,or*.5,vr,nr+1,gr),isNaN(Pa)?(gr.nanEncountered=!0,NaN):(ci=kn(Oe,Ua,ot,St,cn,Tt,zn,or*.5,vr,nr+1,gr),isNaN(ci)?(gr.nanEncountered=!0,NaN):Pa+ci))}function Wn(Oe,je,ot,ft,St){var Tt={maxDepthCount:0,nanEncountered:!1};ft===void 0&&(ft=1e-8),St===void 0&&(St=20);var Et=Oe(je),or=Oe(.5*(je+ot)),vr=Oe(ot),nr=(Et+4*or+vr)*(ot-je)/6,gr=kn(Oe,je,ot,Et,or,vr,nr,ft,St,1,Tt);return gr}function aa(Oe,je,ot){function ft(cn){return Oe+(1-Oe)*c(1-c(cn,je),1/je)}function St(cn){return Wn(ft,0,cn,1e-4)}for(var Tt=1/St(1),Et=1e3,or=(1+1e-8)*Tt,vr=[],nr=0;nr<=Et;nr++)vr.push(St(nr/Et)*or);function gr(cn){var Ln=0,zn=Et,oa=Et>>1;do vr[oa]>cn?zn=oa:Ln=oa,oa=Ln+zn>>1;while(oa>Ln);var Ua=vr[oa+1]-vr[oa];return Ua&&(Ua=(cn-vr[oa+1])/Ua),(oa+1+Ua)/Et}var Or=2*gr(1)/b*Tt/ot,Kr=function(cn,Ln){var zn=gr(x(p(Ln))),oa=ft(zn)*cn;return zn/=Or,[oa,Ln>=0?zn:-zn]};return Kr.invert=function(cn,Ln){var zn;return Ln*=Or,x(Ln)<1&&(zn=d(Ln)*O(St(x(Ln))*Tt)),[cn/ft(x(Ln)),zn]},Kr}function Ma(){var Oe=0,je=2.5,ot=1.183136,ft=s.geoProjectionMutator(aa),St=ft(Oe,je,ot);return St.alpha=function(Tt){return arguments.length?ft(Oe=+Tt,je,ot):Oe},St.k=function(Tt){return arguments.length?ft(Oe,je=+Tt,ot):je},St.gamma=function(Tt){return arguments.length?ft(Oe,je,ot=+Tt):ot},St.scale(152.63)}function ui(Oe,je){return x(Oe[0]-je[0])<g&&x(Oe[1]-je[1])<g}function Na(Oe,je){for(var ot=-1,ft=Oe.length,St=Oe[0],Tt,Et,or,vr=[];++ot<ft;){Tt=Oe[ot],Et=(Tt[0]-St[0])/je,or=(Tt[1]-St[1])/je;for(var nr=0;nr<je;++nr)vr.push([St[0]+nr*Et,St[1]+nr*or]);St=Tt}return vr.push(Tt),vr}function nu(Oe){var je=[],ot,ft,St,Tt,Et,or,vr,nr=Oe[0].length;for(vr=0;vr<nr;++vr)ot=Oe[0][vr],ft=ot[0][0],St=ot[0][1],Tt=ot[1][1],Et=ot[2][0],or=ot[2][1],je.push(Na([[ft+g,St+g],[ft+g,Tt-g],[Et-g,Tt-g],[Et-g,or+g]],30));for(vr=Oe[1].length-1;vr>=0;--vr)ot=Oe[1][vr],ft=ot[0][0],St=ot[0][1],Tt=ot[1][1],Et=ot[2][0],or=ot[2][1],je.push(Na([[Et-g,or-g],[Et-g,Tt+g],[ft+g,Tt+g],[ft+g,St-g]],30));return{type:"Polygon",coordinates:[m.merge(je)]}}function Eo(Oe,je,ot){var ft,St;function Tt(vr,nr){for(var gr=nr<0?-1:1,Or=je[+(nr<0)],Kr=0,cn=Or.length-1;Kr<cn&&vr>Or[Kr][2][0];++Kr);var Ln=Oe(vr-Or[Kr][1][0],nr);return Ln[0]+=Oe(Or[Kr][1][0],gr*nr>gr*Or[Kr][0][1]?Or[Kr][0][1]:nr)[0],Ln}ot?Tt.invert=ot(Tt):Oe.invert&&(Tt.invert=function(vr,nr){for(var gr=St[+(nr<0)],Or=je[+(nr<0)],Kr=0,cn=gr.length;Kr<cn;++Kr){var Ln=gr[Kr];if(Ln[0][0]<=vr&&vr<Ln[1][0]&&Ln[0][1]<=nr&&nr<Ln[1][1]){var zn=Oe.invert(vr-Oe(Or[Kr][1][0],0)[0],nr);return zn[0]+=Or[Kr][1][0],ui(Tt(zn[0],zn[1]),[vr,nr])?zn:null}}});var Et=s.geoProjection(Tt),or=Et.stream;return Et.stream=function(vr){var nr=Et.rotate(),gr=or(vr),Or=(Et.rotate([0,0]),or(vr));return Et.rotate(nr),gr.sphere=function(){s.geoStream(ft,Or)},gr},Et.lobes=function(vr){return arguments.length?(ft=nu(vr),je=vr.map(function(nr){return nr.map(function(gr){return[[gr[0][0]*k,gr[0][1]*k],[gr[1][0]*k,gr[1][1]*k],[gr[2][0]*k,gr[2][1]*k]]})}),St=je.map(function(nr){return nr.map(function(gr){var Or=Oe(gr[0][0],gr[0][1])[0],Kr=Oe(gr[2][0],gr[2][1])[0],cn=Oe(gr[1][0],gr[0][1])[1],Ln=Oe(gr[1][0],gr[1][1])[1],zn;return cn>Ln&&(zn=cn,cn=Ln,Ln=zn),[[Or,cn],[Kr,Ln]]})}),Et):je.map(function(nr){return nr.map(function(gr){return[[gr[0][0]*S,gr[0][1]*S],[gr[1][0]*S,gr[1][1]*S],[gr[2][0]*S,gr[2][1]*S]]})})},je!=null&&Et.lobes(je),Et}var Xs=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function cl(){return Eo(Ie,Xs).scale(160.857)}var vo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ki(){return Eo(ra,vo).scale(152.63)}var hl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ro(){return Eo(Be,hl).scale(169.529)}var is=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Vl(){return Eo(Be,is).scale(169.529).rotate([20,0])}var zu=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Fu(){return Eo(nn,zu,he).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Oi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function au(){return Eo(Ge,Oi).scale(152.63).rotate([-20,0])}function Gl(Oe,je){return[3/L*Oe*D(b*b/3-je*je),je]}Gl.invert=function(Oe,je){return[L/3*Oe/D(b*b/3-je*je),je]};function To(){return s.geoProjection(Gl).scale(158.837)}function os(Oe){function je(ot,ft){if(x(x(ft)-M)<g)return[0,ft<0?-2:2];var St=p(ft),Tt=c((1+St)/(1-St),Oe/2),Et=.5*(Tt+1/Tt)+a(ot*=Oe);return[2*p(ot)/Et,(Tt-1/Tt)/Et]}return je.invert=function(ot,ft){var St=x(ft);if(x(St-2)<g)return ot?null:[0,d(ft)*M];if(St>2)return null;ot/=2,ft/=2;var Tt=ot*ot,Et=ft*ft,or=2*ft/(1+Tt+Et);return or=c((1+or)/(1-or),1/Oe),[i(2*ot,1-Tt-Et)/Oe,O((or-1)/(or+1))]},je}function vl(){var Oe=.5,je=s.geoProjectionMutator(os),ot=je(Oe);return ot.spacing=function(ft){return arguments.length?je(Oe=+ft):Oe},ot.scale(124.75)}var pl=b/_;function no(Oe,je){return[Oe*(1+D(a(je)))/2,je/(a(je/2)*a(Oe/6))]}no.invert=function(Oe,je){var ot=x(Oe),ft=x(je),St=g,Tt=M;ft<pl?Tt*=ft/pl:St+=6*F(pl/ft);for(var Et=0;Et<25;Et++){var or=p(Tt),vr=D(a(Tt)),nr=p(Tt/2),gr=a(Tt/2),Or=p(St/6),Kr=a(St/6),cn=.5*St*(1+vr)-ot,Ln=Tt/(gr*Kr)-ft,zn=vr?-.25*St*or/vr:0,oa=.5*(1+vr),Ua=(1+.5*Tt*nr/gr)/(gr*Kr),Pa=Tt/gr*(Or/6)/(Kr*Kr),ci=zn*Pa-Ua*oa,si=(cn*Pa-Ln*oa)/ci,hi=(Ln*zn-cn*Ua)/ci;if(Tt-=si,St-=hi,x(si)<g&&x(hi)<g)break}return[Oe<0?-St:St,je<0?-Tt:Tt]};function iu(){return s.geoProjection(no).scale(97.2672)}function Co(Oe,je){var ot=Oe*Oe,ft=je*je;return[Oe*(.975534+ft*(-.119161+ot*-.0143059+ft*-.0547009)),je*(1.00384+ot*(.0802894+ft*-.02855+ot*199025e-9)+ft*(.0998909+ft*-.0491032))]}Co.invert=function(Oe,je){var ot=d(Oe)*b,ft=je/2,St=50;do{var Tt=ot*ot,Et=ft*ft,or=ot*ft,vr=ot*(.975534+Et*(-.119161+Tt*-.0143059+Et*-.0547009))-Oe,nr=ft*(1.00384+Tt*(.0802894+Et*-.02855+Tt*199025e-9)+Et*(.0998909+Et*-.0491032))-je,gr=.975534-Et*(.119161+3*Tt*.0143059+Et*.0547009),Or=-or*(2*.119161+4*.0547009*Et+2*.0143059*Tt),Kr=or*(2*.0802894+4*199025e-9*Tt+2*-.02855*Et),cn=1.00384+Tt*(.0802894+199025e-9*Tt)+Et*(3*(.0998909-.02855*Tt)-5*.0491032*Et),Ln=Or*Kr-cn*gr,zn=(nr*Or-vr*cn)/Ln,oa=(vr*Kr-nr*gr)/Ln;ot-=zn,ft-=oa}while((x(zn)>g||x(oa)>g)&&--St>0);return St&&[ot,ft]};function uo(){return s.geoProjection(Co).scale(139.98)}function Uo(Oe,je){return[p(Oe)/a(je),y(je)*a(Oe)]}Uo.invert=function(Oe,je){var ot=Oe*Oe,ft=je*je,St=ft+1,Tt=ot+St,Et=Oe?T*D((Tt-D(Tt*Tt-4*ot))/ot):1/D(St);return[O(Oe*Et),d(je)*F(Et)]};function Oo(){return s.geoProjection(Uo).scale(144.049).clipAngle(90-.001)}function Vs(Oe){var je=a(Oe),ot=y(w+Oe/2);function ft(St,Tt){var Et=Tt-Oe,or=x(Et)<g?St*je:x(or=w+Tt/2)<g||x(x(or)-M)<g?0:St*Et/f(y(or)/ot);return[or,Et]}return ft.invert=function(St,Tt){var Et,or=Tt+Oe;return[x(Tt)<g?St/je:x(Et=w+or/2)<g||x(x(Et)-M)<g?0:St*f(y(Et)/ot)/Tt,or]},ft}function kl(){return rt(Vs).parallel(40).scale(158.837)}function Df(Oe,je){return[Oe,1.25*f(y(w+.4*je))]}Df.invert=function(Oe,je){return[Oe,2.5*t(r(.8*je))-.625*b]};function Gs(){return s.geoProjection(Df).scale(108.318)}function Es(Oe){var je=Oe.length-1;function ot(ft,St){for(var Tt=a(St),Et=2/(1+Tt*a(ft)),or=Et*Tt*p(ft),vr=Et*p(St),nr=je,gr=Oe[nr],Or=gr[0],Kr=gr[1],cn;--nr>=0;)gr=Oe[nr],Or=gr[0]+or*(cn=Or)-vr*Kr,Kr=gr[1]+or*Kr+vr*cn;return Or=or*(cn=Or)-vr*Kr,Kr=or*Kr+vr*cn,[Or,Kr]}return ot.invert=function(ft,St){var Tt=20,Et=ft,or=St;do{for(var vr=je,nr=Oe[vr],gr=nr[0],Or=nr[1],Kr=0,cn=0,Ln;--vr>=0;)nr=Oe[vr],Kr=gr+Et*(Ln=Kr)-or*cn,cn=Or+Et*cn+or*Ln,gr=nr[0]+Et*(Ln=gr)-or*Or,Or=nr[1]+Et*Or+or*Ln;Kr=gr+Et*(Ln=Kr)-or*cn,cn=Or+Et*cn+or*Ln,gr=Et*(Ln=gr)-or*Or-ft,Or=Et*Or+or*Ln-St;var zn=Kr*Kr+cn*cn,oa,Ua;Et-=oa=(gr*Kr+Or*cn)/zn,or-=Ua=(Or*Kr-gr*cn)/zn}while(x(oa)+x(Ua)>g*g&&--Tt>0);if(Tt){var Pa=D(Et*Et+or*or),ci=2*t(Pa*.5),si=p(ci);return[i(Et*si,Pa*a(ci)),Pa?O(or*si/Pa):0]}},ot}var dl=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],jo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],If=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],El=[[.9245,0],[0,0],[.01943,0]],Cl=[[.721316,0],[0,0],[-.00881625,-.00617325]];function qu(){return Pl(dl,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function sc(){return Pl(jo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function lc(){return Pl(If,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function ou(){return Pl(El,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Ll(){return Pl(Cl,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Pl(Oe,je){var ot=s.geoProjection(Es(Oe)).rotate(je).clipAngle(90),ft=s.geoRotation(je),St=ot.center;return delete ot.rotate,ot.center=function(Tt){return arguments.length?St(ft(Tt)):ft.invert(St())},ot}var mf=D(6),Wl=D(7);function ef(Oe,je){var ot=O(7*p(je)/(3*mf));return[mf*Oe*(2*a(2*ot/3)-1)/Wl,9*p(ot/3)/Wl]}ef.invert=function(Oe,je){var ot=3*O(je*Wl/9);return[Oe*Wl/(mf*(2*a(2*ot/3)-1)),O(p(ot)*3*mf/7)]};function Rl(){return s.geoProjection(ef).scale(164.859)}function su(Oe,je){for(var ot=(1+T)*p(je),ft=je,St=0,Tt;St<25&&(ft-=Tt=(p(ft/2)+p(ft)-ot)/(.5*a(ft/2)+a(ft)),!(x(Tt)<g));St++);return[Oe*(1+2*a(ft)/a(ft/2))/(3*_),2*D(3)*p(ft/2)/D(2+_)]}su.invert=function(Oe,je){var ot=je*D(2+_)/(2*D(3)),ft=2*O(ot);return[3*_*Oe/(1+2*a(ft)/a(ft/2)),O((ot+p(ft))/(1+T))]};function uc(){return s.geoProjection(su).scale(188.209)}function lu(Oe,je){for(var ot=D(6/(4+b)),ft=(1+b/4)*p(je),St=je/2,Tt=0,Et;Tt<25&&(St-=Et=(St/2+p(St)-ft)/(.5+a(St)),!(x(Et)<g));Tt++);return[ot*(.5+a(St))*Oe/1.5,ot*St]}lu.invert=function(Oe,je){var ot=D(6/(4+b)),ft=je/ot;return x(x(ft)-M)<g&&(ft=ft<0?-M:M),[1.5*Oe/(ot*(.5+a(ft))),O((ft/2+p(ft))/(1+b/4))]};function xf(){return s.geoProjection(lu).scale(166.518)}function Dl(Oe,je){var ot=je*je,ft=ot*ot,St=ot*ft;return[Oe*(.84719-.13063*ot+St*St*(-.04515+.05494*ot-.02326*ft+.00331*St)),je*(1.01183+ft*ft*(-.02625+.01926*ot-.00396*ft))]}Dl.invert=function(Oe,je){var ot=je,ft=25,St,Tt,Et,or;do Tt=ot*ot,Et=Tt*Tt,ot-=St=(ot*(1.01183+Et*Et*(-.02625+.01926*Tt-.00396*Et))-je)/(1.01183+Et*Et*(9*-.02625+11*.01926*Tt+13*-.00396*Et));while(x(St)>A&&--ft>0);return Tt=ot*ot,Et=Tt*Tt,or=Tt*Et,[Oe/(.84719-.13063*Tt+or*or*(-.04515+.05494*Tt-.02326*Et+.00331*or)),ot]};function Ko(){return s.geoProjection(Dl).scale(175.295)}function Au(Oe,je){return[Oe*(1+a(je))/2,2*(je-y(je/2))]}Au.invert=function(Oe,je){for(var ot=je/2,ft=0,St=1/0;ft<10&&x(St)>g;++ft){var Tt=a(je/2);je-=St=(je-y(je/2)-ot)/(1-.5/(Tt*Tt))}return[2*Oe/(1+a(je)),je]};function bf(){return s.geoProjection(Au).scale(152.63)}var zf=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ff(){return Eo(ie(1/0),zf).rotate([20,0]).scale(152.63)}function tf(Oe,je){var ot=p(je),ft=a(je),St=d(Oe);if(Oe===0||x(je)===M)return[0,je];if(je===0)return[Oe,0];if(x(Oe)===M)return[Oe*ft,M*ot];var Tt=b/(2*Oe)-2*Oe/b,Et=2*je/b,or=(1-Et*Et)/(ot-Et),vr=Tt*Tt,nr=or*or,gr=1+vr/nr,Or=1+nr/vr,Kr=(Tt*ot/or-Tt/2)/gr,cn=(nr*ot/vr+or/2)/Or,Ln=Kr*Kr+ft*ft/gr,zn=cn*cn-(nr*ot*ot/vr+or*ot-1)/Or;return[M*(Kr+D(Ln)*St),M*(cn+D(zn<0?0:zn)*d(-je*Tt)*St)]}tf.invert=function(Oe,je){Oe/=M,je/=M;var ot=Oe*Oe,ft=je*je,St=ot+ft,Tt=b*b;return[Oe?(St-1+D((1-St)*(1-St)+4*ot))/(2*Oe)*M:0,xe(function(Et){return St*(b*p(Et)-2*Et)*b+4*Et*Et*(je-p(Et))+2*b*Et-Tt*je},0)]};function fc(){return s.geoProjection(tf).scale(127.267)}var uu=1.0148,Tn=.23185,ta=-.14499,Gn=.02406,ii=uu,mi=5*Tn,Ei=7*ta,Ho=9*Gn,Bi=1.790857183;function qs(Oe,je){var ot=je*je;return[Oe,je*(uu+ot*ot*(Tn+ot*(ta+Gn*ot)))]}qs.invert=function(Oe,je){je>Bi?je=Bi:je<-Bi&&(je=-Bi);var ot=je,ft;do{var St=ot*ot;ot-=ft=(ot*(uu+St*St*(Tn+St*(ta+Gn*St)))-je)/(ii+St*St*(mi+St*(Ei+Ho*St)))}while(x(ft)>g);return[Oe,ot]};function Jo(){return s.geoProjection(qs).scale(139.319)}function gs(Oe,je){if(x(je)<g)return[Oe,0];var ot=y(je),ft=Oe*p(je);return[p(ft)/ot,je+(1-a(ft))/ot]}gs.invert=function(Oe,je){if(x(je)<g)return[Oe,0];var ot=Oe*Oe+je*je,ft=je*.5,St=10,Tt;do{var Et=y(ft),or=1/a(ft),vr=ot-2*je*ft+ft*ft;ft-=Tt=(Et*vr+2*(ft-je))/(2+vr*or*or+2*(ft-je)*Et)}while(x(Tt)>g&&--St>0);return Et=y(ft),[(x(je)<x(ft+1/Et)?O(Oe*Et):d(je)*d(Oe)*(F(x(Oe*Et))+M))/p(ft),ft]};function Yl(){return s.geoProjection(gs).scale(103.74)}function fu(Oe,je){var ot=Il(Oe[1],Oe[0]),ft=Il(je[1],je[0]),St=Ou(ot,ft),Tt=qi(ot)/qi(ft);return Xl([1,0,Oe[0][0],0,1,Oe[0][1]],Xl([Tt,0,0,0,Tt,0],Xl([a(St),p(St),0,-p(St),a(St),0],[1,0,-je[0][0],0,1,-je[0][1]])))}function _s(Oe){var je=1/(Oe[0]*Oe[4]-Oe[1]*Oe[3]);return[je*Oe[4],-je*Oe[1],je*(Oe[1]*Oe[5]-Oe[2]*Oe[4]),-je*Oe[3],je*Oe[0],je*(Oe[2]*Oe[3]-Oe[0]*Oe[5])]}function Xl(Oe,je){return[Oe[0]*je[0]+Oe[1]*je[3],Oe[0]*je[1]+Oe[1]*je[4],Oe[0]*je[2]+Oe[1]*je[5]+Oe[2],Oe[3]*je[0]+Oe[4]*je[3],Oe[3]*je[1]+Oe[4]*je[4],Oe[3]*je[2]+Oe[4]*je[5]+Oe[5]]}function Il(Oe,je){return[Oe[0]-je[0],Oe[1]-je[1]]}function qi(Oe){return D(Oe[0]*Oe[0]+Oe[1]*Oe[1])}function Ou(Oe,je){return i(Oe[0]*je[1]-Oe[1]*je[0],Oe[0]*je[0]+Oe[1]*je[1])}function Zl(Oe,je,ot){ft(Oe,{transform:null});function ft(nr,gr){if(nr.edges=_f(nr.face),gr.face){var Or=nr.shared=Ec(nr.face,gr.face),Kr=fu(Or.map(gr.project),Or.map(nr.project));nr.transform=gr.transform?Xl(gr.transform,Kr):Kr;for(var cn=gr.edges,Ln=0,zn=cn.length;Ln<zn;++Ln)el(Or[0],cn[Ln][1])&&el(Or[1],cn[Ln][0])&&(cn[Ln]=nr),el(Or[0],cn[Ln][0])&&el(Or[1],cn[Ln][1])&&(cn[Ln]=nr);for(cn=nr.edges,Ln=0,zn=cn.length;Ln<zn;++Ln)el(Or[0],cn[Ln][0])&&el(Or[1],cn[Ln][1])&&(cn[Ln]=gr),el(Or[0],cn[Ln][1])&&el(Or[1],cn[Ln][0])&&(cn[Ln]=gr)}else nr.transform=gr.transform;return nr.children&&nr.children.forEach(function(oa){ft(oa,nr)}),nr}function St(nr,gr){var Or=je(nr,gr),Kr=Or.project([nr*S,gr*S]),cn;return(cn=Or.transform)?[cn[0]*Kr[0]+cn[1]*Kr[1]+cn[2],-(cn[3]*Kr[0]+cn[4]*Kr[1]+cn[5])]:(Kr[1]=-Kr[1],Kr)}zl(Oe)&&(St.invert=function(nr,gr){var Or=Tt(Oe,[nr,-gr]);return Or&&(Or[0]*=k,Or[1]*=k,Or)});function Tt(nr,gr){var Or=nr.project.invert,Kr=nr.transform,cn=gr;if(Kr&&(Kr=_s(Kr),cn=[Kr[0]*cn[0]+Kr[1]*cn[1]+Kr[2],Kr[3]*cn[0]+Kr[4]*cn[1]+Kr[5]]),Or&&nr===Et(Ln=Or(cn)))return Ln;for(var Ln,zn=nr.children,oa=0,Ua=zn&&zn.length;oa<Ua;++oa)if(Ln=Tt(zn[oa],gr))return Ln}function Et(nr){return je(nr[0]*k,nr[1]*k)}var or=s.geoProjection(St),vr=or.stream;return or.stream=function(nr){var gr=or.rotate(),Or=vr(nr),Kr=(or.rotate([0,0]),vr(nr));return or.rotate(gr),Or.sphere=function(){Kr.polygonStart(),Kr.lineStart(),rf(Kr,Oe),Kr.lineEnd(),Kr.polygonEnd()},Or},or.angle(ot==null?-30:ot*S)}function rf(Oe,je,ot){var ft,St=je.edges,Tt=St.length,Et,or={type:"MultiPoint",coordinates:je.face},vr=je.face.filter(function(zn){return x(zn[1])!==90}),nr=s.geoBounds({type:"MultiPoint",coordinates:vr}),gr=!1,Or=-1,Kr=nr[1][0]-nr[0][0],cn=Kr===180||Kr===360?[(nr[0][0]+nr[1][0])/2,(nr[0][1]+nr[1][1])/2]:s.geoCentroid(or);if(ot)for(;++Or<Tt&&St[Or]!==ot;);++Or;for(var Ln=0;Ln<Tt;++Ln)Et=St[(Ln+Or)%Tt],Array.isArray(Et)?(gr||(Oe.point((ft=s.geoInterpolate(Et[0],cn)(g))[0],ft[1]),gr=!0),Oe.point((ft=s.geoInterpolate(Et[1],cn)(g))[0],ft[1])):(gr=!1,Et!==ot&&rf(Oe,Et,je))}function el(Oe,je){return Oe&&je&&Oe[0]===je[0]&&Oe[1]===je[1]}function Ec(Oe,je){for(var ot,ft,St=Oe.length,Tt=null,Et=0;Et<St;++Et){ot=Oe[Et];for(var or=je.length;--or>=0;)if(ft=je[or],ot[0]===ft[0]&&ot[1]===ft[1]){if(Tt)return[Tt,ot];Tt=ot}}}function _f(Oe){for(var je=Oe.length,ot=[],ft=Oe[je-1],St=0;St<je;++St)ot.push([ft,ft=Oe[St]]);return ot}function zl(Oe){return Oe.project.invert||Oe.children&&Oe.children.some(zl)}var Zs=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],yl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Oe){return Oe.map(function(je){return Zs[je]})});function Mu(Oe){Oe=Oe||function(ot){var ft=s.geoCentroid({type:"MultiPoint",coordinates:ot});return s.geoGnomonic().scale(1).translate([0,0]).rotate([-ft[0],-ft[1]])};var je=yl.map(function(ot){return{face:ot,project:Oe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,ft){var St=je[ot];St&&(St.children||(St.children=[])).push(je[ft])}),Zl(je[0],function(ot,ft){return je[ot<-b/2?ft<0?6:4:ot<0?ft<0?2:0:ot<b/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Nu=2/D(3);function wf(Oe,je){var ot=Je(Oe,je);return[ot[0]*Nu,ot[1]]}wf.invert=function(Oe,je){return Je.invert(Oe/Nu,je)};function cc(Oe){Oe=Oe||function(ot){var ft=s.geoCentroid({type:"MultiPoint",coordinates:ot});return s.geoProjection(wf).translate([0,0]).scale(1).rotate(ft[1]>0?[-ft[0],0]:[180-ft[0],180])};var je=yl.map(function(ot){return{face:ot,project:Oe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,ft){var St=je[ot];St&&(St.children||(St.children=[])).push(je[ft])}),Zl(je[0],function(ot,ft){return je[ot<-b/2?ft<0?6:4:ot<0?ft<0?2:0:ot<b/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ji(Oe){Oe=Oe||function(Et){var or=Et.length===6?s.geoCentroid({type:"MultiPoint",coordinates:Et}):Et[0];return s.geoGnomonic().scale(1).translate([0,0]).rotate([-or[0],-or[1]])};var je=yl.map(function(Et){for(var or=Et.map(Cs),vr=or.length,nr=or[vr-1],gr,Or=[],Kr=0;Kr<vr;++Kr)gr=or[Kr],Or.push(us([nr[0]*.9486832980505138+gr[0]*.31622776601683794,nr[1]*.9486832980505138+gr[1]*.31622776601683794,nr[2]*.9486832980505138+gr[2]*.31622776601683794]),us([gr[0]*.9486832980505138+nr[0]*.31622776601683794,gr[1]*.9486832980505138+nr[1]*.31622776601683794,gr[2]*.9486832980505138+nr[2]*.31622776601683794])),nr=gr;return Or}),ot=[],ft=[-1,0,0,1,0,1,4,5];je.forEach(function(Et,or){for(var vr=yl[or],nr=vr.length,gr=ot[or]=[],Or=0;Or<nr;++Or)je.push([vr[Or],Et[(Or*2+2)%(2*nr)],Et[(Or*2+1)%(2*nr)]]),ft.push(or),gr.push(tl(Cs(Et[(Or*2+2)%(2*nr)]),Cs(Et[(Or*2+1)%(2*nr)])))});var St=je.map(function(Et){return{project:Oe(Et),face:Et}});ft.forEach(function(Et,or){var vr=St[Et];vr&&(vr.children||(vr.children=[])).push(St[or])});function Tt(Et,or){var vr=a(or),nr=[vr*a(Et),vr*p(Et),p(or)],gr=Et<-b/2?or<0?6:4:Et<0?or<0?2:0:Et<b/2?or<0?3:1:or<0?7:5,Or=ot[gr];return St[cu(Or[0],nr)<0?8+3*gr:cu(Or[1],nr)<0?8+3*gr+1:cu(Or[2],nr)<0?8+3*gr+2:gr]}return Zl(St[0],Tt).angle(-30).scale(110.625).center([0,45])}function cu(Oe,je){for(var ot=0,ft=Oe.length,St=0;ot<ft;++ot)St+=Oe[ot]*je[ot];return St}function tl(Oe,je){return[Oe[1]*je[2]-Oe[2]*je[1],Oe[2]*je[0]-Oe[0]*je[2],Oe[0]*je[1]-Oe[1]*je[0]]}function us(Oe){return[i(Oe[1],Oe[0])*S,O(l(-1,o(1,Oe[2])))*S]}function Cs(Oe){var je=Oe[0]*k,ot=Oe[1]*k,ft=a(ot);return[ft*a(je),ft*p(je),p(ot)]}function Bu(){}function Qo(Oe){if((ot=Oe.length)<4)return!1;for(var je=0,ot,ft=Oe[ot-1][1]*Oe[0][0]-Oe[ot-1][0]*Oe[0][1];++je<ot;)ft+=Oe[je-1][1]*Oe[je][0]-Oe[je-1][0]*Oe[je][1];return ft<=0}function Of(Oe,je){for(var ot=je[0],ft=je[1],St=!1,Tt=0,Et=Oe.length,or=Et-1;Tt<Et;or=Tt++){var vr=Oe[Tt],nr=vr[0],gr=vr[1],Or=Oe[or],Kr=Or[0],cn=Or[1];gr>ft^cn>ft&&ot<(Kr-nr)*(ft-gr)/(cn-gr)+nr&&(St=!St)}return St}function Ls(Oe,je){var ot=je.stream,ft;if(!ot)throw new Error("invalid projection");switch(Oe&&Oe.type){case"Feature":ft=ml;break;case"FeatureCollection":ft=rl;break;default:ft=js;break}return ft(Oe,ot)}function rl(Oe,je){return{type:"FeatureCollection",features:Oe.features.map(function(ot){return ml(ot,je)})}}function ml(Oe,je){return{type:"Feature",id:Oe.id,properties:Oe.properties,geometry:js(Oe.geometry,je)}}function Fl(Oe,je){return{type:"GeometryCollection",geometries:Oe.geometries.map(function(ot){return js(ot,je)})}}function js(Oe,je){if(!Oe)return null;if(Oe.type==="GeometryCollection")return Fl(Oe,je);var ot;switch(Oe.type){case"Point":ot=po;break;case"MultiPoint":ot=po;break;case"LineString":ot=hs;break;case"MultiLineString":ot=hs;break;case"Polygon":ot=nf;break;case"MultiPolygon":ot=nf;break;case"Sphere":ot=nf;break;default:return null}return s.geoStream(Oe,je(ot)),ot.result()}var Lo=[],ys=[],po={point:function(Oe,je){Lo.push([Oe,je])},result:function(){var Oe=Lo.length?Lo.length<2?{type:"Point",coordinates:Lo[0]}:{type:"MultiPoint",coordinates:Lo}:null;return Lo=[],Oe}},hs={lineStart:Bu,point:function(Oe,je){Lo.push([Oe,je])},lineEnd:function(){Lo.length&&(ys.push(Lo),Lo=[])},result:function(){var Oe=ys.length?ys.length<2?{type:"LineString",coordinates:ys[0]}:{type:"MultiLineString",coordinates:ys}:null;return ys=[],Oe}},nf={polygonStart:Bu,lineStart:Bu,point:function(Oe,je){Lo.push([Oe,je])},lineEnd:function(){var Oe=Lo.length;if(Oe){do Lo.push(Lo[0].slice());while(++Oe<4);ys.push(Lo),Lo=[]}},polygonEnd:Bu,result:function(){if(!ys.length)return null;var Oe=[],je=[];return ys.forEach(function(ot){Qo(ot)?Oe.push([ot]):je.push(ot)}),je.forEach(function(ot){var ft=ot[0];Oe.some(function(St){if(Of(St[0],ft))return St.push(ot),!0})||Oe.push([ot])}),ys=[],Oe.length?Oe.length>1?{type:"MultiPolygon",coordinates:Oe}:{type:"Polygon",coordinates:Oe[0]}:null}};function Nf(Oe){var je=Oe(M,0)[0]-Oe(-M,0)[0];function ot(ft,St){var Tt=x(ft)<M,Et=Oe(Tt?ft:ft>0?ft-b:ft+b,St),or=(Et[0]-Et[1])*T,vr=(Et[0]+Et[1])*T;if(Tt)return[or,vr];var nr=je*T,gr=or>0^vr>0?-1:1;return[gr*or-d(vr)*nr,gr*vr-d(or)*nr]}return Oe.invert&&(ot.invert=function(ft,St){var Tt=(ft+St)*T,Et=(St-ft)*T,or=x(Tt)<.5*je&&x(Et)<.5*je;if(!or){var vr=je*T,nr=Tt>0^Et>0?-1:1,gr=-nr*ft+(Et>0?1:-1)*vr,Or=-nr*St+(Tt>0?1:-1)*vr;Tt=(-gr-Or)*T,Et=(gr-Or)*T}var Kr=Oe.invert(Tt,Et);return or||(Kr[0]+=Tt>0?b:-b),Kr}),s.geoProjection(ot).rotate([-90,-90,45]).clipAngle(180-.001)}function _t(){return Nf(kr).scale(176.423)}function Ot(){return Nf(wr).scale(111.48)}function ur(Oe,je){if(!(0<=(je=+je)&&je<=20))throw new Error("invalid digits");function ot(nr){var gr=nr.length,Or=2,Kr=new Array(gr);for(Kr[0]=+nr[0].toFixed(je),Kr[1]=+nr[1].toFixed(je);Or<gr;)Kr[Or]=nr[Or],++Or;return Kr}function ft(nr){return nr.map(ot)}function St(nr){for(var gr=ot(nr[0]),Or=[gr],Kr=1;Kr<nr.length;Kr++){var cn=ot(nr[Kr]);(cn.length>2||cn[0]!=gr[0]||cn[1]!=gr[1])&&(Or.push(cn),gr=cn)}return Or.length===1&&nr.length>1&&Or.push(ot(nr[nr.length-1])),Or}function Tt(nr){return nr.map(St)}function Et(nr){if(nr==null)return nr;var gr;switch(nr.type){case"GeometryCollection":gr={type:"GeometryCollection",geometries:nr.geometries.map(Et)};break;case"Point":gr={type:"Point",coordinates:ot(nr.coordinates)};break;case"MultiPoint":gr={type:nr.type,coordinates:ft(nr.coordinates)};break;case"LineString":gr={type:nr.type,coordinates:St(nr.coordinates)};break;case"MultiLineString":case"Polygon":gr={type:nr.type,coordinates:Tt(nr.coordinates)};break;case"MultiPolygon":gr={type:"MultiPolygon",coordinates:nr.coordinates.map(Tt)};break;default:return nr}return nr.bbox!=null&&(gr.bbox=nr.bbox),gr}function or(nr){var gr={type:"Feature",properties:nr.properties,geometry:Et(nr.geometry)};return nr.id!=null&&(gr.id=nr.id),nr.bbox!=null&&(gr.bbox=nr.bbox),gr}if(Oe!=null)switch(Oe.type){case"Feature":return or(Oe);case"FeatureCollection":{var vr={type:"FeatureCollection",features:Oe.features.map(or)};return Oe.bbox!=null&&(vr.bbox=Oe.bbox),vr}default:return Et(Oe)}return Oe}function rr(Oe){var je=p(Oe);function ot(ft,St){var Tt=je?y(ft*je/2)/je:ft/2;if(!St)return[2*Tt,-Oe];var Et=2*t(Tt*p(St)),or=1/y(St);return[p(Et)*or,St+(1-a(Et))*or-Oe]}return ot.invert=function(ft,St){if(x(St+=Oe)<g)return[je?2*t(je*ft/2)/je:ft,0];var Tt=ft*ft+St*St,Et=0,or=10,vr;do{var nr=y(Et),gr=1/a(Et),Or=Tt-2*St*Et+Et*Et;Et-=vr=(nr*Or+2*(Et-St))/(2+Or*gr*gr+2*(Et-St)*nr)}while(x(vr)>g&&--or>0);var Kr=ft*(nr=y(Et)),cn=y(x(St)<x(Et+1/nr)?O(Kr)*.5:F(Kr)*.5+b/4)/p(Et);return[je?2*t(je*cn)/je:2*cn,Et]},ot}function zr(){return rt(rr).scale(131.215)}var pn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];pn.forEach(function(Oe){Oe[1]*=1.0144});function An(Oe,je){var ot=o(18,x(je)*36/b),ft=n(ot),St=ot-ft,Tt=(Or=pn[ft])[0],Et=Or[1],or=(Or=pn[++ft])[0],vr=Or[1],nr=(Or=pn[o(19,++ft)])[0],gr=Or[1],Or;return[Oe*(or+St*(nr-Tt)/2+St*St*(nr-2*or+Tt)/2),(je>0?M:-M)*(vr+St*(gr-Et)/2+St*St*(gr-2*vr+Et)/2)]}An.invert=function(Oe,je){var ot=je/M,ft=ot*90,St=o(18,x(ft/5)),Tt=l(0,n(St));do{var Et=pn[Tt][1],or=pn[Tt+1][1],vr=pn[o(19,Tt+2)][1],nr=vr-Et,gr=vr-2*or+Et,Or=2*(x(ot)-or)/nr,Kr=gr/nr,cn=Or*(1-Kr*Or*(1-2*Kr*Or));if(cn>=0||Tt===1){ft=(je>=0?5:-5)*(cn+St);var Ln=50,zn;do St=o(18,x(ft)/5),Tt=n(St),cn=St-Tt,Et=pn[Tt][1],or=pn[Tt+1][1],vr=pn[o(19,Tt+2)][1],ft-=(zn=(je>=0?M:-M)*(or+cn*(vr-Et)/2+cn*cn*(vr-2*or+Et)/2)-je)*S;while(x(zn)>A&&--Ln>0);break}}while(--Tt>=0);var oa=pn[Tt][0],Ua=pn[Tt+1][0],Pa=pn[o(19,Tt+2)][0];return[Oe/(Ua+cn*(Pa-oa)/2+cn*cn*(Pa-2*Ua+oa)/2),ft*k]};function In(){return s.geoProjection(An).scale(152.63)}function Un(Oe){function je(ot,ft){var St=a(ft),Tt=(Oe-1)/(Oe-St*a(ot));return[Tt*St*p(ot),Tt*p(ft)]}return je.invert=function(ot,ft){var St=ot*ot+ft*ft,Tt=D(St),Et=(Oe-D(1-St*(Oe+1)/(Oe-1)))/((Oe-1)/Tt+Tt/(Oe-1));return[i(ot*Et,Tt*D(1-Et*Et)),Tt?O(ft*Et/Tt):0]},je}function ea(Oe,je){var ot=Un(Oe);if(!je)return ot;var ft=a(je),St=p(je);function Tt(Et,or){var vr=ot(Et,or),nr=vr[1],gr=nr*St/(Oe-1)+ft;return[vr[0]*ft/gr,nr/gr]}return Tt.invert=function(Et,or){var vr=(Oe-1)/(Oe-1-or*St);return ot.invert(vr*Et,vr*or*ft)},Tt}function Cn(){var Oe=2,je=0,ot=s.geoProjectionMutator(ea),ft=ot(Oe,je);return ft.distance=function(St){return arguments.length?ot(Oe=+St,je):Oe},ft.tilt=function(St){return arguments.length?ot(Oe,je=St*k):je*S},ft.scale(432.147).clipAngle(F(1/Oe)*S-1e-6)}var Yn=1e-4,Vn=1e4,ia=-180,va=ia+Yn,$a=180,Ya=$a-Yn,ti=-90,Kt=ti+Yn,fa=90,Ca=fa-Yn;function qa(Oe){return Oe.length>0}function Ba(Oe){return Math.floor(Oe*Vn)/Vn}function Ui(Oe){return Oe===ti||Oe===fa?[0,Oe]:[ia,Ba(Oe)]}function Hi(Oe){var je=Oe[0],ot=Oe[1],ft=!1;return je<=va?(je=ia,ft=!0):je>=Ya&&(je=$a,ft=!0),ot<=Kt?(ot=ti,ft=!0):ot>=Ca&&(ot=fa,ft=!0),ft?[je,ot]:Oe}function Xi(Oe){return Oe.map(Hi)}function zi(Oe,je,ot){for(var ft=0,St=Oe.length;ft<St;++ft){var Tt=Oe[ft].slice();ot.push({index:-1,polygon:je,ring:Tt});for(var Et=0,or=Tt.length;Et<or;++Et){var vr=Tt[Et],nr=vr[0],gr=vr[1];if(nr<=va||nr>=Ya||gr<=Kt||gr>=Ca){Tt[Et]=Hi(vr);for(var Or=Et+1;Or<or;++Or){var Kr=Tt[Or],cn=Kr[0],Ln=Kr[1];if(cn>va&&cn<Ya&&Ln>Kt&&Ln<Ca)break}if(Or===Et+1)continue;if(Et){var zn={index:-1,polygon:je,ring:Tt.slice(0,Et+1)};zn.ring[zn.ring.length-1]=Ui(gr),ot[ot.length-1]=zn}else ot.pop();if(Or>=or)break;ot.push({index:-1,polygon:je,ring:Tt=Tt.slice(Or-1)}),Tt[0]=Ui(Tt[0][1]),Et=-1,or=Tt.length}}}}function ki(Oe){var je,ot=Oe.length,ft={},St={},Tt,Et,or,vr,nr;for(je=0;je<ot;++je){if(Tt=Oe[je],Et=Tt.ring[0],vr=Tt.ring[Tt.ring.length-1],Et[0]===vr[0]&&Et[1]===vr[1]){Tt.polygon.push(Tt.ring),Oe[je]=null;continue}Tt.index=je,ft[Et]=St[vr]=Tt}for(je=0;je<ot;++je)if(Tt=Oe[je],Tt){if(Et=Tt.ring[0],vr=Tt.ring[Tt.ring.length-1],or=St[Et],nr=ft[vr],delete ft[Et],delete St[vr],Et[0]===vr[0]&&Et[1]===vr[1]){Tt.polygon.push(Tt.ring);continue}or?(delete St[Et],delete ft[or.ring[0]],or.ring.pop(),Oe[or.index]=null,Tt={index:-1,polygon:or.polygon,ring:or.ring.concat(Tt.ring)},or===nr?Tt.polygon.push(Tt.ring):(Tt.index=ot++,Oe.push(ft[Tt.ring[0]]=St[Tt.ring[Tt.ring.length-1]]=Tt))):nr?(delete ft[vr],delete St[nr.ring[nr.ring.length-1]],Tt.ring.pop(),Tt={index:ot++,polygon:nr.polygon,ring:Tt.ring.concat(nr.ring)},Oe[nr.index]=null,Oe.push(ft[Tt.ring[0]]=St[Tt.ring[Tt.ring.length-1]]=Tt)):(Tt.ring.push(Tt.ring[0]),Tt.polygon.push(Tt.ring))}}function fs(Oe){var je={type:"Feature",geometry:Vo(Oe.geometry)};return Oe.id!=null&&(je.id=Oe.id),Oe.bbox!=null&&(je.bbox=Oe.bbox),Oe.properties!=null&&(je.properties=Oe.properties),je}function Vo(Oe){if(Oe==null)return Oe;var je,ot,ft,St;switch(Oe.type){case"GeometryCollection":je={type:"GeometryCollection",geometries:Oe.geometries.map(Vo)};break;case"Point":je={type:"Point",coordinates:Hi(Oe.coordinates)};break;case"MultiPoint":case"LineString":je={type:Oe.type,coordinates:Xi(Oe.coordinates)};break;case"MultiLineString":je={type:"MultiLineString",coordinates:Oe.coordinates.map(Xi)};break;case"Polygon":{var Tt=[];zi(Oe.coordinates,Tt,ot=[]),ki(ot),je={type:"Polygon",coordinates:Tt};break}case"MultiPolygon":{ot=[],ft=-1,St=Oe.coordinates.length;for(var Et=new Array(St);++ft<St;)zi(Oe.coordinates[ft],Et[ft]=[],ot);ki(ot),je={type:"MultiPolygon",coordinates:Et.filter(qa)};break}default:return Oe}return Oe.bbox!=null&&(je.bbox=Oe.bbox),je}function di(Oe){if(Oe==null)return Oe;switch(Oe.type){case"Feature":return fs(Oe);case"FeatureCollection":{var je={type:"FeatureCollection",features:Oe.features.map(fs)};return Oe.bbox!=null&&(je.bbox=Oe.bbox),je}default:return Vo(Oe)}}function Fa(Oe,je){var ot=y(je/2),ft=p(w*ot);return[Oe*(.74482-.34588*ft*ft),1.70711*ot]}Fa.invert=function(Oe,je){var ot=je/1.70711,ft=p(w*ot);return[Oe/(.74482-.34588*ft*ft),2*t(ot)]};function Li(){return s.geoProjection(Fa).scale(146.153)}function $o(Oe,je,ot){var ft=s.geoInterpolate(je,ot),St=ft(.5),Tt=s.geoRotation([-St[0],-St[1]])(je),Et=ft.distance/2,or=-O(p(Tt[1]*k)/p(Et)),vr=[-St[0],-St[1],-(Tt[0]>0?b-or:or)*S],nr=s.geoProjection(Oe(Et)).rotate(vr),gr=s.geoRotation(vr),Or=nr.center;return delete nr.rotate,nr.center=function(Kr){return arguments.length?Or(gr(Kr)):gr.invert(Or())},nr.clipAngle(90)}function ss(Oe){var je=a(Oe);function ot(ft,St){var Tt=s.geoGnomonicRaw(ft,St);return Tt[0]*=je,Tt}return ot.invert=function(ft,St){return s.geoGnomonicRaw.invert(ft/je,St)},ot}function nl(){return Ol([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ol(Oe,je){return $o(ss,Oe,je)}function Ps(Oe){if(!(Oe*=2))return s.geoAzimuthalEquidistantRaw;var je=-Oe/2,ot=-je,ft=Oe*Oe,St=y(ot),Tt=.5/p(ot);function Et(or,vr){var nr=F(a(vr)*a(or-je)),gr=F(a(vr)*a(or-ot)),Or=vr<0?-1:1;return nr*=nr,gr*=gr,[(nr-gr)/(2*Oe),Or*D(4*ft*gr-(ft-nr+gr)*(ft-nr+gr))/(2*Oe)]}return Et.invert=function(or,vr){var nr=vr*vr,gr=a(D(nr+(Kr=or+je)*Kr)),Or=a(D(nr+(Kr=or+ot)*Kr)),Kr,cn;return[i(cn=gr-Or,Kr=(gr+Or)*St),(vr<0?-1:1)*F(D(Kr*Kr+cn*cn)*Tt)]},Et}function ws(){return xl([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function xl(Oe,je){return $o(Ps,Oe,je)}function al(Oe,je){if(x(je)<g)return[Oe,0];var ot=x(je/M),ft=O(ot);if(x(Oe)<g||x(x(je)-M)<g)return[0,d(je)*b*y(ft/2)];var St=a(ft),Tt=x(b/Oe-Oe/b)/2,Et=Tt*Tt,or=St/(ot+St-1),vr=or*(2/ot-1),nr=vr*vr,gr=nr+Et,Or=or-nr,Kr=Et+or;return[d(Oe)*b*(Tt*Or+D(Et*Or*Or-gr*(or*or-nr)))/gr,d(je)*b*(vr*Kr-Tt*D((Et+1)*gr-Kr*Kr))/gr]}al.invert=function(Oe,je){if(x(je)<g)return[Oe,0];if(x(Oe)<g)return[0,M*p(2*t(je/b))];var ot=(Oe/=b)*Oe,ft=(je/=b)*je,St=ot+ft,Tt=St*St,Et=-x(je)*(1+St),or=Et-2*ft+ot,vr=-2*Et+1+2*ft+Tt,nr=ft/vr+(2*or*or*or/(vr*vr*vr)-9*Et*or/(vr*vr))/27,gr=(Et-or*or/(3*vr))/vr,Or=2*D(-gr/3),Kr=F(3*nr/(gr*Or))/3;return[b*(St-1+D(1+2*(ot-ft)+Tt))/(2*Oe),d(je)*b*(-Or*a(Kr+b/3)-or/(3*vr))]};function cs(){return s.geoProjection(al).scale(79.4183)}function af(Oe,je){if(x(je)<g)return[Oe,0];var ot=x(je/M),ft=O(ot);if(x(Oe)<g||x(x(je)-M)<g)return[0,d(je)*b*y(ft/2)];var St=a(ft),Tt=x(b/Oe-Oe/b)/2,Et=Tt*Tt,or=St*(D(1+Et)-Tt*St)/(1+Et*ot*ot);return[d(Oe)*b*or,d(je)*b*D(1-or*(2*Tt+or))]}af.invert=function(Oe,je){if(!Oe)return[0,M*p(2*t(je/b))];var ot=x(Oe/b),ft=(1-ot*ot-(je/=b)*je)/(2*ot),St=ft*ft,Tt=D(St+1);return[d(Oe)*b*(Tt-ft),d(je)*M*p(2*i(D((1-2*ft*ot)*(ft+Tt)-ot),D(Tt+ft+ot)))]};function Tf(){return s.geoProjection(af).scale(79.4183)}function vs(Oe,je){if(x(je)<g)return[Oe,0];var ot=je/M,ft=O(ot);if(x(Oe)<g||x(x(je)-M)<g)return[0,b*y(ft/2)];var St=(b/Oe-Oe/b)/2,Tt=ot/(1+a(ft));return[b*(d(Oe)*D(St*St+1-Tt*Tt)-St),b*Tt]}vs.invert=function(Oe,je){if(!je)return[Oe,0];var ot=je/b,ft=(b*b*(1-ot*ot)-Oe*Oe)/(2*b*Oe);return[Oe?b*(d(Oe)*D(ft*ft+1)-ft):0,M*p(2*t(ot))]};function Bf(){return s.geoProjection(vs).scale(79.4183)}function of(Oe,je){if(!je)return[Oe,0];var ot=x(je);if(!Oe||ot===M)return[0,je];var ft=ot/M,St=ft*ft,Tt=(8*ft-St*(St+2)-5)/(2*St*(ft-1)),Et=Tt*Tt,or=ft*Tt,vr=St+Et+2*or,nr=ft+3*Tt,gr=Oe/M,Or=gr+1/gr,Kr=d(x(Oe)-M)*D(Or*Or-4),cn=Kr*Kr,Ln=vr*(St+Et*cn-1)+(1-St)*(St*(nr*nr+4*Et)+12*or*Et+4*Et*Et),zn=(Kr*(vr+Et-1)+2*D(Ln))/(4*vr+cn);return[d(Oe)*M*zn,d(je)*M*D(1+Kr*x(zn)-zn*zn)]}of.invert=function(Oe,je){var ot;if(!Oe||!je)return[Oe,je];je/=b;var ft=d(Oe)*Oe/M,St=(ft*ft-1+4*je*je)/x(ft),Tt=St*St,Et=2*je,or=50;do{var vr=Et*Et,nr=(8*Et-vr*(vr+2)-5)/(2*vr*(Et-1)),gr=(3*Et-vr*Et-10)/(2*vr*Et),Or=nr*nr,Kr=Et*nr,cn=Et+nr,Ln=cn*cn,zn=Et+3*nr,oa=Ln*(vr+Or*Tt-1)+(1-vr)*(vr*(zn*zn+4*Or)+Or*(12*Kr+4*Or)),Ua=-2*cn*(4*Kr*Or+(1-4*vr+3*vr*vr)*(1+gr)+Or*(-6+14*vr-Tt+(-8+8*vr-2*Tt)*gr)+Kr*(-8+12*vr+(-10+10*vr-Tt)*gr)),Pa=D(oa),ci=St*(Ln+Or-1)+2*Pa-ft*(4*Ln+Tt),si=St*(2*nr*gr+2*cn*(1+gr))+Ua/Pa-8*cn*(St*(-1+Or+Ln)+2*Pa)*(1+gr)/(Tt+4*Ln);Et-=ot=ci/si}while(ot>g&&--or>0);return[d(Oe)*(D(St*St+4)+St)*b/4,M*Et]};function jl(){return s.geoProjection(of).scale(127.16)}function hc(Oe,je,ot,ft,St){function Tt(Et,or){var vr=ot*p(ft*or),nr=D(1-vr*vr),gr=D(2/(1+nr*a(Et*=St)));return[Oe*nr*gr*p(Et),je*vr*gr]}return Tt.invert=function(Et,or){var vr=Et/Oe,nr=or/je,gr=D(vr*vr+nr*nr),Or=2*O(gr/2);return[i(Et*y(Or),Oe*gr)/St,gr&&O(or*p(Or)/(je*ot*gr))/ft]},Tt}function Uf(Oe,je,ot,ft){var St=b/3;Oe=l(Oe,g),je=l(je,g),Oe=o(Oe,M),je=o(je,b-g),ot=l(ot,0),ot=o(ot,100-g),ft=l(ft,g);var Tt=ot/100+1,Et=ft/100,or=F(Tt*a(St))/St,vr=p(Oe)/p(or*M),nr=je/b,gr=D(Et*p(Oe/2)/p(je/2)),Or=gr/D(nr*vr*or),Kr=1/(gr*D(nr*vr*or));return hc(Or,Kr,vr,or,nr)}function vc(){var Oe=65*k,je=60*k,ot=20,ft=200,St=s.geoProjectionMutator(Uf),Tt=St(Oe,je,ot,ft);return Tt.poleline=function(Et){return arguments.length?St(Oe=+Et*k,je,ot,ft):Oe*S},Tt.parallels=function(Et){return arguments.length?St(Oe,je=+Et*k,ot,ft):je*S},Tt.inflation=function(Et){return arguments.length?St(Oe,je,ot=+Et,ft):ot},Tt.ratio=function(Et){return arguments.length?St(Oe,je,ot,ft=+Et):ft},Tt.scale(163.775)}function Nl(){return vc().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Cc=4*b+3*D(3),Hf=2*D(2*b*D(3)/Cc),Vf=Se(Hf*D(3)/b,Hf,Cc/6);function Rs(){return s.geoProjection(Vf).scale(176.84)}function pc(Oe,je){return[Oe*D(1-3*je*je/(b*b)),je]}pc.invert=function(Oe,je){return[Oe/D(1-3*je*je/(b*b)),je]};function dc(){return s.geoProjection(pc).scale(152.63)}function Ds(Oe,je){var ot=a(je),ft=a(Oe)*ot,St=1-ft,Tt=a(Oe=i(p(Oe)*ot,-p(je))),Et=p(Oe);return ot=D(1-ft*ft),[Et*ot-Tt*St,-Tt*ot-Et*St]}Ds.invert=function(Oe,je){var ot=(Oe*Oe+je*je)/-2,ft=D(-ot*(2+ot)),St=je*ot+Oe*ft,Tt=Oe*ot-je*ft,Et=D(Tt*Tt+St*St);return[i(ft*St,Et*(1+ot)),Et?-O(ft*Tt/Et):0]};function Uu(){return s.geoProjection(Ds).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Gf(Oe,je){var ot=G(Oe,je);return[(ot[0]+Oe/M)/2,(ot[1]+je)/2]}Gf.invert=function(Oe,je){var ot=Oe,ft=je,St=25;do{var Tt=a(ft),Et=p(ft),or=p(2*ft),vr=Et*Et,nr=Tt*Tt,gr=p(ot),Or=a(ot/2),Kr=p(ot/2),cn=Kr*Kr,Ln=1-nr*Or*Or,zn=Ln?F(Tt*Or)*D(oa=1/Ln):oa=0,oa,Ua=.5*(2*zn*Tt*Kr+ot/M)-Oe,Pa=.5*(zn*Et+ft)-je,ci=.5*oa*(nr*cn+zn*Tt*Or*vr)+.5/M,si=oa*(gr*or/4-zn*Et*Kr),hi=.125*oa*(or*Kr-zn*Et*nr*gr),Ri=.5*oa*(vr*Or+zn*cn*Tt)+.5,Vi=si*hi-Ri*ci,xi=(Pa*si-Ua*Ri)/Vi,Po=(Ua*hi-Pa*ci)/Vi;ot-=xi,ft-=Po}while((x(xi)>g||x(Po)>g)&&--St>0);return[ot,ft]};function Wf(){return s.geoProjection(Gf).scale(158.837)}u.geoNaturalEarth=s.geoNaturalEarth1,u.geoNaturalEarthRaw=s.geoNaturalEarth1Raw,u.geoAiry=q,u.geoAiryRaw=ee,u.geoAitoff=J,u.geoAitoffRaw=G,u.geoArmadillo=fe,u.geoArmadilloRaw=le,u.geoAugust=V,u.geoAugustRaw=se,u.geoBaker=K,u.geoBakerRaw=te,u.geoBerghaus=ae,u.geoBerghausRaw=$,u.geoBertin1953=be,u.geoBertin1953Raw=me,u.geoBoggs=Ze,u.geoBoggsRaw=Ie,u.geoBonne=mt,u.geoBonneRaw=We,u.geoBottomley=Xt,u.geoBottomleyRaw=Ft,u.geoBromley=Ut,u.geoBromleyRaw=Pt,u.geoChamberlin=Pe,u.geoChamberlinRaw=lt,u.geoChamberlinAfrica=et,u.geoCollignon=it,u.geoCollignonRaw=Je,u.geoCraig=zt,u.geoCraigRaw=ht,u.geoCraster=$t,u.geoCrasterRaw=Vt,u.geoCylindricalEqualArea=tr,u.geoCylindricalEqualAreaRaw=Ht,u.geoCylindricalStereographic=xt,u.geoCylindricalStereographicRaw=qe,u.geoEckert1=fr,u.geoEckert1Raw=Rt,u.geoEckert2=pr,u.geoEckert2Raw=br,u.geoEckert3=Nr,u.geoEckert3Raw=Tr,u.geoEckert4=lr,u.geoEckert4Raw=Ir,u.geoEckert5=nt,u.geoEckert5Raw=Yr,u.geoEckert6=Ee,u.geoEckert6Raw=Ae,u.geoEisenlohr=tt,u.geoEisenlohrRaw=Ke,u.geoFahey=yt,u.geoFaheyRaw=ct,u.geoFoucaut=jt,u.geoFoucautRaw=kt,u.geoFoucautSinusoidal=Sr,u.geoFoucautSinusoidalRaw=Mr,u.geoGilbert=Ur,u.geoGingery=En,u.geoGingeryRaw=fn,u.geoGinzburg4=vn,u.geoGinzburg4Raw=Pr,u.geoGinzburg5=qr,u.geoGinzburg5Raw=xn,u.geoGinzburg6=Bt,u.geoGinzburg6Raw=st,u.geoGinzburg8=xr,u.geoGinzburg8Raw=ir,u.geoGinzburg9=Gr,u.geoGinzburg9Raw=Qr,u.geoGringorten=Hn,u.geoGringortenRaw=kr,u.geoGuyou=jn,u.geoGuyouRaw=wr,u.geoHammer=ue,u.geoHammerRaw=ie,u.geoHammerRetroazimuthal=ga,u.geoHammerRetroazimuthalRaw=Jn,u.geoHealpix=Rn,u.geoHealpixRaw=sr,u.geoHill=mr,u.geoHillRaw=Mn,u.geoHomolosine=ua,u.geoHomolosineRaw=ra,u.geoHufnagel=Qn,u.geoHufnagelRaw=$n,u.geoHyperelliptical=Ma,u.geoHyperellipticalRaw=aa,u.geoInterrupt=Eo,u.geoInterruptedBoggs=cl,u.geoInterruptedHomolosine=Ki,u.geoInterruptedMollweide=ro,u.geoInterruptedMollweideHemispheres=Vl,u.geoInterruptedSinuMollweide=Fu,u.geoInterruptedSinusoidal=au,u.geoKavrayskiy7=To,u.geoKavrayskiy7Raw=Gl,u.geoLagrange=vl,u.geoLagrangeRaw=os,u.geoLarrivee=iu,u.geoLarriveeRaw=no,u.geoLaskowski=uo,u.geoLaskowskiRaw=Co,u.geoLittrow=Oo,u.geoLittrowRaw=Uo,u.geoLoximuthal=kl,u.geoLoximuthalRaw=Vs,u.geoMiller=Gs,u.geoMillerRaw=Df,u.geoModifiedStereographic=Pl,u.geoModifiedStereographicRaw=Es,u.geoModifiedStereographicAlaska=qu,u.geoModifiedStereographicGs48=sc,u.geoModifiedStereographicGs50=lc,u.geoModifiedStereographicMiller=ou,u.geoModifiedStereographicLee=Ll,u.geoMollweide=Ye,u.geoMollweideRaw=Be,u.geoMtFlatPolarParabolic=Rl,u.geoMtFlatPolarParabolicRaw=ef,u.geoMtFlatPolarQuartic=uc,u.geoMtFlatPolarQuarticRaw=su,u.geoMtFlatPolarSinusoidal=xf,u.geoMtFlatPolarSinusoidalRaw=lu,u.geoNaturalEarth2=Ko,u.geoNaturalEarth2Raw=Dl,u.geoNellHammer=bf,u.geoNellHammerRaw=Au,u.geoInterruptedQuarticAuthalic=Ff,u.geoNicolosi=fc,u.geoNicolosiRaw=tf,u.geoPatterson=Jo,u.geoPattersonRaw=qs,u.geoPolyconic=Yl,u.geoPolyconicRaw=gs,u.geoPolyhedral=Zl,u.geoPolyhedralButterfly=Mu,u.geoPolyhedralCollignon=cc,u.geoPolyhedralWaterman=Ji,u.geoProject=Ls,u.geoGringortenQuincuncial=_t,u.geoPeirceQuincuncial=Ot,u.geoPierceQuincuncial=Ot,u.geoQuantize=ur,u.geoQuincuncial=Nf,u.geoRectangularPolyconic=zr,u.geoRectangularPolyconicRaw=rr,u.geoRobinson=In,u.geoRobinsonRaw=An,u.geoSatellite=Cn,u.geoSatelliteRaw=ea,u.geoSinuMollweide=On,u.geoSinuMollweideRaw=nn,u.geoSinusoidal=ze,u.geoSinusoidalRaw=Ge,u.geoStitch=di,u.geoTimes=Li,u.geoTimesRaw=Fa,u.geoTwoPointAzimuthal=Ol,u.geoTwoPointAzimuthalRaw=ss,u.geoTwoPointAzimuthalUsa=nl,u.geoTwoPointEquidistant=xl,u.geoTwoPointEquidistantRaw=Ps,u.geoTwoPointEquidistantUsa=ws,u.geoVanDerGrinten=cs,u.geoVanDerGrintenRaw=al,u.geoVanDerGrinten2=Tf,u.geoVanDerGrinten2Raw=af,u.geoVanDerGrinten3=Bf,u.geoVanDerGrinten3Raw=vs,u.geoVanDerGrinten4=jl,u.geoVanDerGrinten4Raw=of,u.geoWagner=vc,u.geoWagner7=Nl,u.geoWagnerRaw=Uf,u.geoWagner4=Rs,u.geoWagner4Raw=Vf,u.geoWagner6=dc,u.geoWagner6Raw=pc,u.geoWiechel=Uu,u.geoWiechelRaw=Ds,u.geoWinkel3=Wf,u.geoWinkel3Raw=Gf,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B,e("d3-array")):(u=u||self,s(u.d3=u.d3||{},u.d3))})(this,function(u,s){function m(){return new x}function x(){this.reset()}x.prototype={constructor:x,reset:function(){this.s=this.t=0},add:function(_t){i(t,_t,this.t),i(this,t.s,this.s),this.s?this.t+=t.t:this.s=t.t},valueOf:function(){return this.s}};var t=new x;function i(_t,Ot,ur){var rr=_t.s=Ot+ur,zr=rr-Ot,pn=rr-zr;_t.t=Ot-pn+(ur-zr)}var a=1e-6,r=1e-12,n=Math.PI,f=n/2,l=n/4,o=n*2,c=180/n,v=n/180,d=Math.abs,p=Math.atan,y=Math.atan2,g=Math.cos,A=Math.ceil,b=Math.exp,M=Math.log,w=Math.pow,T=Math.sin,_=Math.sign||function(_t){return _t>0?1:_t<0?-1:0},h=Math.sqrt,L=Math.tan;function S(_t){return _t>1?0:_t<-1?n:Math.acos(_t)}function k(_t){return _t>1?f:_t<-1?-f:Math.asin(_t)}function P(_t){return(_t=T(_t/2))*_t}function O(){}function F(_t,Ot){_t&&R.hasOwnProperty(_t.type)&&R[_t.type](_t,Ot)}var D={Feature:function(_t,Ot){F(_t.geometry,Ot)},FeatureCollection:function(_t,Ot){for(var ur=_t.features,rr=-1,zr=ur.length;++rr<zr;)F(ur[rr].geometry,Ot)}},R={Sphere:function(_t,Ot){Ot.sphere()},Point:function(_t,Ot){_t=_t.coordinates,Ot.point(_t[0],_t[1],_t[2])},MultiPoint:function(_t,Ot){for(var ur=_t.coordinates,rr=-1,zr=ur.length;++rr<zr;)_t=ur[rr],Ot.point(_t[0],_t[1],_t[2])},LineString:function(_t,Ot){U(_t.coordinates,Ot,0)},MultiLineString:function(_t,Ot){for(var ur=_t.coordinates,rr=-1,zr=ur.length;++rr<zr;)U(ur[rr],Ot,0)},Polygon:function(_t,Ot){N(_t.coordinates,Ot)},MultiPolygon:function(_t,Ot){for(var ur=_t.coordinates,rr=-1,zr=ur.length;++rr<zr;)N(ur[rr],Ot)},GeometryCollection:function(_t,Ot){for(var ur=_t.geometries,rr=-1,zr=ur.length;++rr<zr;)F(ur[rr],Ot)}};function U(_t,Ot,ur){var rr=-1,zr=_t.length-ur,pn;for(Ot.lineStart();++rr<zr;)pn=_t[rr],Ot.point(pn[0],pn[1],pn[2]);Ot.lineEnd()}function N(_t,Ot){var ur=-1,rr=_t.length;for(Ot.polygonStart();++ur<rr;)U(_t[ur],Ot,1);Ot.polygonEnd()}function X(_t,Ot){_t&&D.hasOwnProperty(_t.type)?D[_t.type](_t,Ot):F(_t,Ot)}var j=m(),ee=m(),q,G,J,le,fe,se={point:O,lineStart:O,lineEnd:O,polygonStart:function(){j.reset(),se.lineStart=V,se.lineEnd=Y},polygonEnd:function(){var _t=+j;ee.add(_t<0?o+_t:_t),this.lineStart=this.lineEnd=this.point=O},sphere:function(){ee.add(o)}};function V(){se.point=ne}function Y(){te(q,G)}function ne(_t,Ot){se.point=te,q=_t,G=Ot,_t*=v,Ot*=v,J=_t,le=g(Ot=Ot/2+l),fe=T(Ot)}function te(_t,Ot){_t*=v,Ot*=v,Ot=Ot/2+l;var ur=_t-J,rr=ur>=0?1:-1,zr=rr*ur,pn=g(Ot),An=T(Ot),In=fe*An,Un=le*pn+In*g(zr),ea=In*rr*T(zr);j.add(y(ea,Un)),J=_t,le=pn,fe=An}function K(_t){return ee.reset(),X(_t,se),ee*2}function $(_t){return[y(_t[1],_t[0]),k(_t[2])]}function ae(_t){var Ot=_t[0],ur=_t[1],rr=g(ur);return[rr*g(Ot),rr*T(Ot),T(ur)]}function ie(_t,Ot){return _t[0]*Ot[0]+_t[1]*Ot[1]+_t[2]*Ot[2]}function oe(_t,Ot){return[_t[1]*Ot[2]-_t[2]*Ot[1],_t[2]*Ot[0]-_t[0]*Ot[2],_t[0]*Ot[1]-_t[1]*Ot[0]]}function ue(_t,Ot){_t[0]+=Ot[0],_t[1]+=Ot[1],_t[2]+=Ot[2]}function xe(_t,Ot){return[_t[0]*Ot,_t[1]*Ot,_t[2]*Ot]}function he(_t){var Ot=h(_t[0]*_t[0]+_t[1]*_t[1]+_t[2]*_t[2]);_t[0]/=Ot,_t[1]/=Ot,_t[2]/=Ot}var me,be,Ce,Se,Be,Ye,Xe,Te,Ie=m(),Ze,rt,Ge={point:ze,lineStart:mt,lineEnd:Ft,polygonStart:function(){Ge.point=Xt,Ge.lineStart=Pt,Ge.lineEnd=Ut,Ie.reset(),se.polygonStart()},polygonEnd:function(){se.polygonEnd(),Ge.point=ze,Ge.lineStart=mt,Ge.lineEnd=Ft,j<0?(me=-(Ce=180),be=-(Se=90)):Ie>a?Se=90:Ie<-a&&(be=-90),rt[0]=me,rt[1]=Ce},sphere:function(){me=-(Ce=180),be=-(Se=90)}};function ze(_t,Ot){Ze.push(rt=[me=_t,Ce=_t]),Ot<be&&(be=Ot),Ot>Se&&(Se=Ot)}function We(_t,Ot){var ur=ae([_t*v,Ot*v]);if(Te){var rr=oe(Te,ur),zr=[rr[1],-rr[0],0],pn=oe(zr,rr);he(pn),pn=$(pn);var An=_t-Be,In=An>0?1:-1,Un=pn[0]*c*In,ea,Cn=d(An)>180;Cn^(In*Be<Un&&Un<In*_t)?(ea=pn[1]*c,ea>Se&&(Se=ea)):(Un=(Un+360)%360-180,Cn^(In*Be<Un&&Un<In*_t)?(ea=-pn[1]*c,ea<be&&(be=ea)):(Ot<be&&(be=Ot),Ot>Se&&(Se=Ot))),Cn?_t<Be?Gt(me,_t)>Gt(me,Ce)&&(Ce=_t):Gt(_t,Ce)>Gt(me,Ce)&&(me=_t):Ce>=me?(_t<me&&(me=_t),_t>Ce&&(Ce=_t)):_t>Be?Gt(me,_t)>Gt(me,Ce)&&(Ce=_t):Gt(_t,Ce)>Gt(me,Ce)&&(me=_t)}else Ze.push(rt=[me=_t,Ce=_t]);Ot<be&&(be=Ot),Ot>Se&&(Se=Ot),Te=ur,Be=_t}function mt(){Ge.point=We}function Ft(){rt[0]=me,rt[1]=Ce,Ge.point=ze,Te=null}function Xt(_t,Ot){if(Te){var ur=_t-Be;Ie.add(d(ur)>180?ur+(ur>0?360:-360):ur)}else Ye=_t,Xe=Ot;se.point(_t,Ot),We(_t,Ot)}function Pt(){se.lineStart()}function Ut(){Xt(Ye,Xe),se.lineEnd(),d(Ie)>a&&(me=-(Ce=180)),rt[0]=me,rt[1]=Ce,Te=null}function Gt(_t,Ot){return(Ot-=_t)<0?Ot+360:Ot}function It(_t,Ot){return _t[0]-Ot[0]}function Ct(_t,Ot){return _t[0]<=_t[1]?_t[0]<=Ot&&Ot<=_t[1]:Ot<_t[0]||_t[1]<Ot}function lt(_t){var Ot,ur,rr,zr,pn,An,In;if(Se=Ce=-(me=be=1/0),Ze=[],X(_t,Ge),ur=Ze.length){for(Ze.sort(It),Ot=1,rr=Ze[0],pn=[rr];Ot<ur;++Ot)zr=Ze[Ot],Ct(rr,zr[0])||Ct(rr,zr[1])?(Gt(rr[0],zr[1])>Gt(rr[0],rr[1])&&(rr[1]=zr[1]),Gt(zr[0],rr[1])>Gt(rr[0],rr[1])&&(rr[0]=zr[0])):pn.push(rr=zr);for(An=-1/0,ur=pn.length-1,Ot=0,rr=pn[ur];Ot<=ur;rr=zr,++Ot)zr=pn[Ot],(In=Gt(rr[1],zr[0]))>An&&(An=In,me=zr[0],Ce=rr[1])}return Ze=rt=null,me===1/0||be===1/0?[[NaN,NaN],[NaN,NaN]]:[[me,be],[Ce,Se]]}var dt,et,Pe,Je,it,ht,zt,Lt,Vt,$t,Ht,tr,qe,xt,Rt,fr,br={sphere:O,point:pr,lineStart:Nr,lineEnd:Yr,polygonStart:function(){br.lineStart=nt,br.lineEnd=Ae},polygonEnd:function(){br.lineStart=Nr,br.lineEnd=Yr}};function pr(_t,Ot){_t*=v,Ot*=v;var ur=g(Ot);Tr(ur*g(_t),ur*T(_t),T(Ot))}function Tr(_t,Ot,ur){++dt,Pe+=(_t-Pe)/dt,Je+=(Ot-Je)/dt,it+=(ur-it)/dt}function Nr(){br.point=Ir}function Ir(_t,Ot){_t*=v,Ot*=v;var ur=g(Ot);xt=ur*g(_t),Rt=ur*T(_t),fr=T(Ot),br.point=lr,Tr(xt,Rt,fr)}function lr(_t,Ot){_t*=v,Ot*=v;var ur=g(Ot),rr=ur*g(_t),zr=ur*T(_t),pn=T(Ot),An=y(h((An=Rt*pn-fr*zr)*An+(An=fr*rr-xt*pn)*An+(An=xt*zr-Rt*rr)*An),xt*rr+Rt*zr+fr*pn);et+=An,ht+=An*(xt+(xt=rr)),zt+=An*(Rt+(Rt=zr)),Lt+=An*(fr+(fr=pn)),Tr(xt,Rt,fr)}function Yr(){br.point=pr}function nt(){br.point=Ee}function Ae(){Fe(tr,qe),br.point=pr}function Ee(_t,Ot){tr=_t,qe=Ot,_t*=v,Ot*=v,br.point=Fe;var ur=g(Ot);xt=ur*g(_t),Rt=ur*T(_t),fr=T(Ot),Tr(xt,Rt,fr)}function Fe(_t,Ot){_t*=v,Ot*=v;var ur=g(Ot),rr=ur*g(_t),zr=ur*T(_t),pn=T(Ot),An=Rt*pn-fr*zr,In=fr*rr-xt*pn,Un=xt*zr-Rt*rr,ea=h(An*An+In*In+Un*Un),Cn=k(ea),Yn=ea&&-Cn/ea;Vt+=Yn*An,$t+=Yn*In,Ht+=Yn*Un,et+=Cn,ht+=Cn*(xt+(xt=rr)),zt+=Cn*(Rt+(Rt=zr)),Lt+=Cn*(fr+(fr=pn)),Tr(xt,Rt,fr)}function Ke(_t){dt=et=Pe=Je=it=ht=zt=Lt=Vt=$t=Ht=0,X(_t,br);var Ot=Vt,ur=$t,rr=Ht,zr=Ot*Ot+ur*ur+rr*rr;return zr<r&&(Ot=ht,ur=zt,rr=Lt,et<a&&(Ot=Pe,ur=Je,rr=it),zr=Ot*Ot+ur*ur+rr*rr,zr<r)?[NaN,NaN]:[y(ur,Ot)*c,k(rr/h(zr))*c]}function tt(_t){return function(){return _t}}function ut(_t,Ot){function ur(rr,zr){return rr=_t(rr,zr),Ot(rr[0],rr[1])}return _t.invert&&Ot.invert&&(ur.invert=function(rr,zr){return rr=Ot.invert(rr,zr),rr&&_t.invert(rr[0],rr[1])}),ur}function ct(_t,Ot){return[d(_t)>n?_t+Math.round(-_t/o)*o:_t,Ot]}ct.invert=ct;function yt(_t,Ot,ur){return(_t%=o)?Ot||ur?ut(jt(_t),Mr(Ot,ur)):jt(_t):Ot||ur?Mr(Ot,ur):ct}function kt(_t){return function(Ot,ur){return Ot+=_t,[Ot>n?Ot-o:Ot<-n?Ot+o:Ot,ur]}}function jt(_t){var Ot=kt(_t);return Ot.invert=kt(-_t),Ot}function Mr(_t,Ot){var ur=g(_t),rr=T(_t),zr=g(Ot),pn=T(Ot);function An(In,Un){var ea=g(Un),Cn=g(In)*ea,Yn=T(In)*ea,Vn=T(Un),ia=Vn*ur+Cn*rr;return[y(Yn*zr-ia*pn,Cn*ur-Vn*rr),k(ia*zr+Yn*pn)]}return An.invert=function(In,Un){var ea=g(Un),Cn=g(In)*ea,Yn=T(In)*ea,Vn=T(Un),ia=Vn*zr-Yn*pn;return[y(Yn*zr+Vn*pn,Cn*ur+ia*rr),k(ia*ur-Cn*rr)]},An}function Sr(_t){_t=yt(_t[0]*v,_t[1]*v,_t.length>2?_t[2]*v:0);function Ot(ur){return ur=_t(ur[0]*v,ur[1]*v),ur[0]*=c,ur[1]*=c,ur}return Ot.invert=function(ur){return ur=_t.invert(ur[0]*v,ur[1]*v),ur[0]*=c,ur[1]*=c,ur},Ot}function Lr(_t,Ot,ur,rr,zr,pn){if(!!ur){var An=g(Ot),In=T(Ot),Un=rr*ur;zr==null?(zr=Ot+rr*o,pn=Ot-Un/2):(zr=Ar(An,zr),pn=Ar(An,pn),(rr>0?zr<pn:zr>pn)&&(zr+=rr*o));for(var ea,Cn=zr;rr>0?Cn>pn:Cn<pn;Cn-=Un)ea=$([An,-In*g(Cn),-In*T(Cn)]),_t.point(ea[0],ea[1])}}function Ar(_t,Ot){Ot=ae(Ot),Ot[0]-=_t,he(Ot);var ur=S(-Ot[1]);return((-Ot[2]<0?-ur:ur)+o-a)%o}function Ur(){var _t=tt([0,0]),Ot=tt(90),ur=tt(6),rr,zr,pn={point:An};function An(Un,ea){rr.push(Un=zr(Un,ea)),Un[0]*=c,Un[1]*=c}function In(){var Un=_t.apply(this,arguments),ea=Ot.apply(this,arguments)*v,Cn=ur.apply(this,arguments)*v;return rr=[],zr=yt(-Un[0]*v,-Un[1]*v,0).invert,Lr(pn,ea,Cn,1),Un={type:"Polygon",coordinates:[rr]},rr=zr=null,Un}return In.center=function(Un){return arguments.length?(_t=typeof Un=="function"?Un:tt([+Un[0],+Un[1]]),In):_t},In.radius=function(Un){return arguments.length?(Ot=typeof Un=="function"?Un:tt(+Un),In):Ot},In.precision=function(Un){return arguments.length?(ur=typeof Un=="function"?Un:tt(+Un),In):ur},In}function fn(){var _t=[],Ot;return{point:function(ur,rr,zr){Ot.push([ur,rr,zr])},lineStart:function(){_t.push(Ot=[])},lineEnd:O,rejoin:function(){_t.length>1&&_t.push(_t.pop().concat(_t.shift()))},result:function(){var ur=_t;return _t=[],Ot=null,ur}}}function Cr(_t,Ot){return d(_t[0]-Ot[0])<a&&d(_t[1]-Ot[1])<a}function _r(_t,Ot,ur,rr){this.x=_t,this.z=Ot,this.o=ur,this.e=rr,this.v=!1,this.n=this.p=null}function En(_t,Ot,ur,rr,zr){var pn=[],An=[],In,Un;if(_t.forEach(function(va){if(!(($a=va.length-1)<=0)){var $a,Ya=va[0],ti=va[$a],Kt;if(Cr(Ya,ti)){if(!Ya[2]&&!ti[2]){for(zr.lineStart(),In=0;In<$a;++In)zr.point((Ya=va[In])[0],Ya[1]);zr.lineEnd();return}ti[0]+=2*a}pn.push(Kt=new _r(Ya,va,null,!0)),An.push(Kt.o=new _r(Ya,null,Kt,!1)),pn.push(Kt=new _r(ti,va,null,!1)),An.push(Kt.o=new _r(ti,null,Kt,!0))}}),!!pn.length){for(An.sort(Ot),Jr(pn),Jr(An),In=0,Un=An.length;In<Un;++In)An[In].e=ur=!ur;for(var ea=pn[0],Cn,Yn;;){for(var Vn=ea,ia=!0;Vn.v;)if((Vn=Vn.n)===ea)return;Cn=Vn.z,zr.lineStart();do{if(Vn.v=Vn.o.v=!0,Vn.e){if(ia)for(In=0,Un=Cn.length;In<Un;++In)zr.point((Yn=Cn[In])[0],Yn[1]);else rr(Vn.x,Vn.n.x,1,zr);Vn=Vn.n}else{if(ia)for(Cn=Vn.p.z,In=Cn.length-1;In>=0;--In)zr.point((Yn=Cn[In])[0],Yn[1]);else rr(Vn.x,Vn.p.x,-1,zr);Vn=Vn.p}Vn=Vn.o,Cn=Vn.z,ia=!ia}while(!Vn.v);zr.lineEnd()}}}function Jr(_t){if(!!(Ot=_t.length)){for(var Ot,ur=0,rr=_t[0],zr;++ur<Ot;)rr.n=zr=_t[ur],zr.p=rr,rr=zr;rr.n=zr=_t[0],zr.p=rr}}var Pr=m();function vn(_t){return d(_t[0])<=n?_t[0]:_(_t[0])*((d(_t[0])+n)%o-n)}function xn(_t,Ot){var ur=vn(Ot),rr=Ot[1],zr=T(rr),pn=[T(ur),-g(ur),0],An=0,In=0;Pr.reset(),zr===1?rr=f+a:zr===-1&&(rr=-f-a);for(var Un=0,ea=_t.length;Un<ea;++Un)if(!!(Yn=(Cn=_t[Un]).length))for(var Cn,Yn,Vn=Cn[Yn-1],ia=vn(Vn),va=Vn[1]/2+l,$a=T(va),Ya=g(va),ti=0;ti<Yn;++ti,ia=fa,$a=qa,Ya=Ba,Vn=Kt){var Kt=Cn[ti],fa=vn(Kt),Ca=Kt[1]/2+l,qa=T(Ca),Ba=g(Ca),Ui=fa-ia,Hi=Ui>=0?1:-1,Xi=Hi*Ui,zi=Xi>n,ki=$a*qa;if(Pr.add(y(ki*Hi*T(Xi),Ya*Ba+ki*g(Xi))),An+=zi?Ui+Hi*o:Ui,zi^ia>=ur^fa>=ur){var fs=oe(ae(Vn),ae(Kt));he(fs);var Vo=oe(pn,fs);he(Vo);var di=(zi^Ui>=0?-1:1)*k(Vo[2]);(rr>di||rr===di&&(fs[0]||fs[1]))&&(In+=zi^Ui>=0?1:-1)}}return(An<-a||An<a&&Pr<-a)^In&1}function qr(_t,Ot,ur,rr){return function(zr){var pn=Ot(zr),An=fn(),In=Ot(An),Un=!1,ea,Cn,Yn,Vn={point:ia,lineStart:$a,lineEnd:Ya,polygonStart:function(){Vn.point=ti,Vn.lineStart=Kt,Vn.lineEnd=fa,Cn=[],ea=[]},polygonEnd:function(){Vn.point=ia,Vn.lineStart=$a,Vn.lineEnd=Ya,Cn=s.merge(Cn);var Ca=xn(ea,rr);Cn.length?(Un||(zr.polygonStart(),Un=!0),En(Cn,Bt,Ca,ur,zr)):Ca&&(Un||(zr.polygonStart(),Un=!0),zr.lineStart(),ur(null,null,1,zr),zr.lineEnd()),Un&&(zr.polygonEnd(),Un=!1),Cn=ea=null},sphere:function(){zr.polygonStart(),zr.lineStart(),ur(null,null,1,zr),zr.lineEnd(),zr.polygonEnd()}};function ia(Ca,qa){_t(Ca,qa)&&zr.point(Ca,qa)}function va(Ca,qa){pn.point(Ca,qa)}function $a(){Vn.point=va,pn.lineStart()}function Ya(){Vn.point=ia,pn.lineEnd()}function ti(Ca,qa){Yn.push([Ca,qa]),In.point(Ca,qa)}function Kt(){In.lineStart(),Yn=[]}function fa(){ti(Yn[0][0],Yn[0][1]),In.lineEnd();var Ca=In.clean(),qa=An.result(),Ba,Ui=qa.length,Hi,Xi,zi;if(Yn.pop(),ea.push(Yn),Yn=null,!!Ui){if(Ca&1){if(Xi=qa[0],(Hi=Xi.length-1)>0){for(Un||(zr.polygonStart(),Un=!0),zr.lineStart(),Ba=0;Ba<Hi;++Ba)zr.point((zi=Xi[Ba])[0],zi[1]);zr.lineEnd()}return}Ui>1&&Ca&2&&qa.push(qa.pop().concat(qa.shift())),Cn.push(qa.filter(st))}}return Vn}}function st(_t){return _t.length>1}function Bt(_t,Ot){return((_t=_t.x)[0]<0?_t[1]-f-a:f-_t[1])-((Ot=Ot.x)[0]<0?Ot[1]-f-a:f-Ot[1])}var ir=qr(function(){return!0},xr,Gr,[-n,-f]);function xr(_t){var Ot=NaN,ur=NaN,rr=NaN,zr;return{lineStart:function(){_t.lineStart(),zr=1},point:function(pn,An){var In=pn>0?n:-n,Un=d(pn-Ot);d(Un-n)<a?(_t.point(Ot,ur=(ur+An)/2>0?f:-f),_t.point(rr,ur),_t.lineEnd(),_t.lineStart(),_t.point(In,ur),_t.point(pn,ur),zr=0):rr!==In&&Un>=n&&(d(Ot-rr)<a&&(Ot-=rr*a),d(pn-In)<a&&(pn-=In*a),ur=Qr(Ot,ur,pn,An),_t.point(rr,ur),_t.lineEnd(),_t.lineStart(),_t.point(In,ur),zr=0),_t.point(Ot=pn,ur=An),rr=In},lineEnd:function(){_t.lineEnd(),Ot=ur=NaN},clean:function(){return 2-zr}}}function Qr(_t,Ot,ur,rr){var zr,pn,An=T(_t-ur);return d(An)>a?p((T(Ot)*(pn=g(rr))*T(ur)-T(rr)*(zr=g(Ot))*T(_t))/(zr*pn*An)):(Ot+rr)/2}function Gr(_t,Ot,ur,rr){var zr;if(_t==null)zr=ur*f,rr.point(-n,zr),rr.point(0,zr),rr.point(n,zr),rr.point(n,0),rr.point(n,-zr),rr.point(0,-zr),rr.point(-n,-zr),rr.point(-n,0),rr.point(-n,zr);else if(d(_t[0]-Ot[0])>a){var pn=_t[0]<Ot[0]?n:-n;zr=ur*pn/2,rr.point(-pn,zr),rr.point(0,zr),rr.point(pn,zr)}else rr.point(Ot[0],Ot[1])}function Br(_t){var Ot=g(_t),ur=6*v,rr=Ot>0,zr=d(Ot)>a;function pn(Cn,Yn,Vn,ia){Lr(ia,_t,ur,Vn,Cn,Yn)}function An(Cn,Yn){return g(Cn)*g(Yn)>Ot}function In(Cn){var Yn,Vn,ia,va,$a;return{lineStart:function(){va=ia=!1,$a=1},point:function(Ya,ti){var Kt=[Ya,ti],fa,Ca=An(Ya,ti),qa=rr?Ca?0:ea(Ya,ti):Ca?ea(Ya+(Ya<0?n:-n),ti):0;if(!Yn&&(va=ia=Ca)&&Cn.lineStart(),Ca!==ia&&(fa=Un(Yn,Kt),(!fa||Cr(Yn,fa)||Cr(Kt,fa))&&(Kt[2]=1)),Ca!==ia)$a=0,Ca?(Cn.lineStart(),fa=Un(Kt,Yn),Cn.point(fa[0],fa[1])):(fa=Un(Yn,Kt),Cn.point(fa[0],fa[1],2),Cn.lineEnd()),Yn=fa;else if(zr&&Yn&&rr^Ca){var Ba;!(qa&Vn)&&(Ba=Un(Kt,Yn,!0))&&($a=0,rr?(Cn.lineStart(),Cn.point(Ba[0][0],Ba[0][1]),Cn.point(Ba[1][0],Ba[1][1]),Cn.lineEnd()):(Cn.point(Ba[1][0],Ba[1][1]),Cn.lineEnd(),Cn.lineStart(),Cn.point(Ba[0][0],Ba[0][1],3)))}Ca&&(!Yn||!Cr(Yn,Kt))&&Cn.point(Kt[0],Kt[1]),Yn=Kt,ia=Ca,Vn=qa},lineEnd:function(){ia&&Cn.lineEnd(),Yn=null},clean:function(){return $a|(va&&ia)<<1}}}function Un(Cn,Yn,Vn){var ia=ae(Cn),va=ae(Yn),$a=[1,0,0],Ya=oe(ia,va),ti=ie(Ya,Ya),Kt=Ya[0],fa=ti-Kt*Kt;if(!fa)return!Vn&&Cn;var Ca=Ot*ti/fa,qa=-Ot*Kt/fa,Ba=oe($a,Ya),Ui=xe($a,Ca),Hi=xe(Ya,qa);ue(Ui,Hi);var Xi=Ba,zi=ie(Ui,Xi),ki=ie(Xi,Xi),fs=zi*zi-ki*(ie(Ui,Ui)-1);if(!(fs<0)){var Vo=h(fs),di=xe(Xi,(-zi-Vo)/ki);if(ue(di,Ui),di=$(di),!Vn)return di;var Fa=Cn[0],Li=Yn[0],$o=Cn[1],ss=Yn[1],nl;Li<Fa&&(nl=Fa,Fa=Li,Li=nl);var Ol=Li-Fa,Ps=d(Ol-n)<a,ws=Ps||Ol<a;if(!Ps&&ss<$o&&(nl=$o,$o=ss,ss=nl),ws?Ps?$o+ss>0^di[1]<(d(di[0]-Fa)<a?$o:ss):$o<=di[1]&&di[1]<=ss:Ol>n^(Fa<=di[0]&&di[0]<=Li)){var xl=xe(Xi,(-zi+Vo)/ki);return ue(xl,Ui),[di,$(xl)]}}}function ea(Cn,Yn){var Vn=rr?_t:n-_t,ia=0;return Cn<-Vn?ia|=1:Cn>Vn&&(ia|=2),Yn<-Vn?ia|=4:Yn>Vn&&(ia|=8),ia}return qr(An,In,pn,rr?[0,-_t]:[-n,_t-n])}function kr(_t,Ot,ur,rr,zr,pn){var An=_t[0],In=_t[1],Un=Ot[0],ea=Ot[1],Cn=0,Yn=1,Vn=Un-An,ia=ea-In,va;if(va=ur-An,!(!Vn&&va>0)){if(va/=Vn,Vn<0){if(va<Cn)return;va<Yn&&(Yn=va)}else if(Vn>0){if(va>Yn)return;va>Cn&&(Cn=va)}if(va=zr-An,!(!Vn&&va<0)){if(va/=Vn,Vn<0){if(va>Yn)return;va>Cn&&(Cn=va)}else if(Vn>0){if(va<Cn)return;va<Yn&&(Yn=va)}if(va=rr-In,!(!ia&&va>0)){if(va/=ia,ia<0){if(va<Cn)return;va<Yn&&(Yn=va)}else if(ia>0){if(va>Yn)return;va>Cn&&(Cn=va)}if(va=pn-In,!(!ia&&va<0)){if(va/=ia,ia<0){if(va>Yn)return;va>Cn&&(Cn=va)}else if(ia>0){if(va<Cn)return;va<Yn&&(Yn=va)}return Cn>0&&(_t[0]=An+Cn*Vn,_t[1]=In+Cn*ia),Yn<1&&(Ot[0]=An+Yn*Vn,Ot[1]=In+Yn*ia),!0}}}}}var en=1e9,Zn=-en;function Hn(_t,Ot,ur,rr){function zr(ea,Cn){return _t<=ea&&ea<=ur&&Ot<=Cn&&Cn<=rr}function pn(ea,Cn,Yn,Vn){var ia=0,va=0;if(ea==null||(ia=An(ea,Yn))!==(va=An(Cn,Yn))||Un(ea,Cn)<0^Yn>0)do Vn.point(ia===0||ia===3?_t:ur,ia>1?rr:Ot);while((ia=(ia+Yn+4)%4)!==va);else Vn.point(Cn[0],Cn[1])}function An(ea,Cn){return d(ea[0]-_t)<a?Cn>0?0:3:d(ea[0]-ur)<a?Cn>0?2:1:d(ea[1]-Ot)<a?Cn>0?1:0:Cn>0?3:2}function In(ea,Cn){return Un(ea.x,Cn.x)}function Un(ea,Cn){var Yn=An(ea,1),Vn=An(Cn,1);return Yn!==Vn?Yn-Vn:Yn===0?Cn[1]-ea[1]:Yn===1?ea[0]-Cn[0]:Yn===2?ea[1]-Cn[1]:Cn[0]-ea[0]}return function(ea){var Cn=ea,Yn=fn(),Vn,ia,va,$a,Ya,ti,Kt,fa,Ca,qa,Ba,Ui={point:Hi,lineStart:fs,lineEnd:Vo,polygonStart:zi,polygonEnd:ki};function Hi(Fa,Li){zr(Fa,Li)&&Cn.point(Fa,Li)}function Xi(){for(var Fa=0,Li=0,$o=ia.length;Li<$o;++Li)for(var ss=ia[Li],nl=1,Ol=ss.length,Ps=ss[0],ws,xl,al=Ps[0],cs=Ps[1];nl<Ol;++nl)ws=al,xl=cs,Ps=ss[nl],al=Ps[0],cs=Ps[1],xl<=rr?cs>rr&&(al-ws)*(rr-xl)>(cs-xl)*(_t-ws)&&++Fa:cs<=rr&&(al-ws)*(rr-xl)<(cs-xl)*(_t-ws)&&--Fa;return Fa}function zi(){Cn=Yn,Vn=[],ia=[],Ba=!0}function ki(){var Fa=Xi(),Li=Ba&&Fa,$o=(Vn=s.merge(Vn)).length;(Li||$o)&&(ea.polygonStart(),Li&&(ea.lineStart(),pn(null,null,1,ea),ea.lineEnd()),$o&&En(Vn,In,Fa,pn,ea),ea.polygonEnd()),Cn=ea,Vn=ia=va=null}function fs(){Ui.point=di,ia&&ia.push(va=[]),qa=!0,Ca=!1,Kt=fa=NaN}function Vo(){Vn&&(di($a,Ya),ti&&Ca&&Yn.rejoin(),Vn.push(Yn.result())),Ui.point=Hi,Ca&&Cn.lineEnd()}function di(Fa,Li){var $o=zr(Fa,Li);if(ia&&va.push([Fa,Li]),qa)$a=Fa,Ya=Li,ti=$o,qa=!1,$o&&(Cn.lineStart(),Cn.point(Fa,Li));else if($o&&Ca)Cn.point(Fa,Li);else{var ss=[Kt=Math.max(Zn,Math.min(en,Kt)),fa=Math.max(Zn,Math.min(en,fa))],nl=[Fa=Math.max(Zn,Math.min(en,Fa)),Li=Math.max(Zn,Math.min(en,Li))];kr(ss,nl,_t,Ot,ur,rr)?(Ca||(Cn.lineStart(),Cn.point(ss[0],ss[1])),Cn.point(nl[0],nl[1]),$o||Cn.lineEnd(),Ba=!1):$o&&(Cn.lineStart(),Cn.point(Fa,Li),Ba=!1)}Kt=Fa,fa=Li,Ca=$o}return Ui}}function da(){var _t=0,Ot=0,ur=960,rr=500,zr,pn,An;return An={stream:function(In){return zr&&pn===In?zr:zr=Hn(_t,Ot,ur,rr)(pn=In)},extent:function(In){return arguments.length?(_t=+In[0][0],Ot=+In[0][1],ur=+In[1][0],rr=+In[1][1],zr=pn=null,An):[[_t,Ot],[ur,rr]]}}}var wa=m(),Va,Oa,wr,wn={sphere:O,point:O,lineStart:ln,lineEnd:O,polygonStart:O,polygonEnd:O};function ln(){wn.point=Jn,wn.lineEnd=jn}function jn(){wn.point=wn.lineEnd=O}function Jn(_t,Ot){_t*=v,Ot*=v,Va=_t,Oa=T(Ot),wr=g(Ot),wn.point=La}function La(_t,Ot){_t*=v,Ot*=v;var ur=T(Ot),rr=g(Ot),zr=d(_t-Va),pn=g(zr),An=T(zr),In=rr*An,Un=wr*ur-Oa*rr*pn,ea=Oa*ur+wr*rr*pn;wa.add(y(h(In*In+Un*Un),ea)),Va=_t,Oa=ur,wr=rr}function ga(_t){return wa.reset(),X(_t,wn),+wa}var qn=[null,null],Ea={type:"LineString",coordinates:qn};function la(_t,Ot){return qn[0]=_t,qn[1]=Ot,ga(Ea)}var sr={Feature:function(_t,Ot){return dn(_t.geometry,Ot)},FeatureCollection:function(_t,Ot){for(var ur=_t.features,rr=-1,zr=ur.length;++rr<zr;)if(dn(ur[rr].geometry,Ot))return!0;return!1}},Hr={Sphere:function(){return!0},Point:function(_t,Ot){return hn(_t.coordinates,Ot)},MultiPoint:function(_t,Ot){for(var ur=_t.coordinates,rr=-1,zr=ur.length;++rr<zr;)if(hn(ur[rr],Ot))return!0;return!1},LineString:function(_t,Ot){return Sn(_t.coordinates,Ot)},MultiLineString:function(_t,Ot){for(var ur=_t.coordinates,rr=-1,zr=ur.length;++rr<zr;)if(Sn(ur[rr],Ot))return!0;return!1},Polygon:function(_t,Ot){return Rn(_t.coordinates,Ot)},MultiPolygon:function(_t,Ot){for(var ur=_t.coordinates,rr=-1,zr=ur.length;++rr<zr;)if(Rn(ur[rr],Ot))return!0;return!1},GeometryCollection:function(_t,Ot){for(var ur=_t.geometries,rr=-1,zr=ur.length;++rr<zr;)if(dn(ur[rr],Ot))return!0;return!1}};function dn(_t,Ot){return _t&&Hr.hasOwnProperty(_t.type)?Hr[_t.type](_t,Ot):!1}function hn(_t,Ot){return la(_t,Ot)===0}function Sn(_t,Ot){for(var ur,rr,zr,pn=0,An=_t.length;pn<An;pn++){if(rr=la(_t[pn],Ot),rr===0||pn>0&&(zr=la(_t[pn],_t[pn-1]),zr>0&&ur<=zr&&rr<=zr&&(ur+rr-zr)*(1-Math.pow((ur-rr)/zr,2))<r*zr))return!0;ur=rr}return!1}function Rn(_t,Ot){return!!xn(_t.map(Mn),mr(Ot))}function Mn(_t){return _t=_t.map(mr),_t.pop(),_t}function mr(_t){return[_t[0]*v,_t[1]*v]}function hr(_t,Ot){return(_t&&sr.hasOwnProperty(_t.type)?sr[_t.type]:dn)(_t,Ot)}function Fr(_t,Ot,ur){var rr=s.range(_t,Ot-a,ur).concat(Ot);return function(zr){return rr.map(function(pn){return[zr,pn]})}}function nn(_t,Ot,ur){var rr=s.range(_t,Ot-a,ur).concat(Ot);return function(zr){return rr.map(function(pn){return[pn,zr]})}}function On(){var _t,Ot,ur,rr,zr,pn,An,In,Un=10,ea=Un,Cn=90,Yn=360,Vn,ia,va,$a,Ya=2.5;function ti(){return{type:"MultiLineString",coordinates:Kt()}}function Kt(){return s.range(A(rr/Cn)*Cn,ur,Cn).map(va).concat(s.range(A(In/Yn)*Yn,An,Yn).map($a)).concat(s.range(A(Ot/Un)*Un,_t,Un).filter(function(fa){return d(fa%Cn)>a}).map(Vn)).concat(s.range(A(pn/ea)*ea,zr,ea).filter(function(fa){return d(fa%Yn)>a}).map(ia))}return ti.lines=function(){return Kt().map(function(fa){return{type:"LineString",coordinates:fa}})},ti.outline=function(){return{type:"Polygon",coordinates:[va(rr).concat($a(An).slice(1),va(ur).reverse().slice(1),$a(In).reverse().slice(1))]}},ti.extent=function(fa){return arguments.length?ti.extentMajor(fa).extentMinor(fa):ti.extentMinor()},ti.extentMajor=function(fa){return arguments.length?(rr=+fa[0][0],ur=+fa[1][0],In=+fa[0][1],An=+fa[1][1],rr>ur&&(fa=rr,rr=ur,ur=fa),In>An&&(fa=In,In=An,An=fa),ti.precision(Ya)):[[rr,In],[ur,An]]},ti.extentMinor=function(fa){return arguments.length?(Ot=+fa[0][0],_t=+fa[1][0],pn=+fa[0][1],zr=+fa[1][1],Ot>_t&&(fa=Ot,Ot=_t,_t=fa),pn>zr&&(fa=pn,pn=zr,zr=fa),ti.precision(Ya)):[[Ot,pn],[_t,zr]]},ti.step=function(fa){return arguments.length?ti.stepMajor(fa).stepMinor(fa):ti.stepMinor()},ti.stepMajor=function(fa){return arguments.length?(Cn=+fa[0],Yn=+fa[1],ti):[Cn,Yn]},ti.stepMinor=function(fa){return arguments.length?(Un=+fa[0],ea=+fa[1],ti):[Un,ea]},ti.precision=function(fa){return arguments.length?(Ya=+fa,Vn=Fr(pn,zr,90),ia=nn(Ot,_t,Ya),va=Fr(In,An,90),$a=nn(rr,ur,Ya),ti):Ya},ti.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function ra(){return On()()}function ua(_t,Ot){var ur=_t[0]*v,rr=_t[1]*v,zr=Ot[0]*v,pn=Ot[1]*v,An=g(rr),In=T(rr),Un=g(pn),ea=T(pn),Cn=An*g(ur),Yn=An*T(ur),Vn=Un*g(zr),ia=Un*T(zr),va=2*k(h(P(pn-rr)+An*Un*P(zr-ur))),$a=T(va),Ya=va?function(ti){var Kt=T(ti*=va)/$a,fa=T(va-ti)/$a,Ca=fa*Cn+Kt*Vn,qa=fa*Yn+Kt*ia,Ba=fa*In+Kt*ea;return[y(qa,Ca)*c,y(Ba,h(Ca*Ca+qa*qa))*c]}:function(){return[ur*c,rr*c]};return Ya.distance=va,Ya}function $n(_t){return _t}var Qn=m(),kn=m(),Wn,aa,Ma,ui,Na={point:O,lineStart:O,lineEnd:O,polygonStart:function(){Na.lineStart=nu,Na.lineEnd=cl},polygonEnd:function(){Na.lineStart=Na.lineEnd=Na.point=O,Qn.add(d(kn)),kn.reset()},result:function(){var _t=Qn/2;return Qn.reset(),_t}};function nu(){Na.point=Eo}function Eo(_t,Ot){Na.point=Xs,Wn=Ma=_t,aa=ui=Ot}function Xs(_t,Ot){kn.add(ui*_t-Ma*Ot),Ma=_t,ui=Ot}function cl(){Xs(Wn,aa)}var vo=1/0,Ki=vo,hl=-vo,ro=hl,is={point:Vl,lineStart:O,lineEnd:O,polygonStart:O,polygonEnd:O,result:function(){var _t=[[vo,Ki],[hl,ro]];return hl=ro=-(Ki=vo=1/0),_t}};function Vl(_t,Ot){_t<vo&&(vo=_t),_t>hl&&(hl=_t),Ot<Ki&&(Ki=Ot),Ot>ro&&(ro=Ot)}var zu=0,Fu=0,Oi=0,au=0,Gl=0,To=0,os=0,vl=0,pl=0,no,iu,Co,uo,Uo={point:Oo,lineStart:Vs,lineEnd:Gs,polygonStart:function(){Uo.lineStart=Es,Uo.lineEnd=dl},polygonEnd:function(){Uo.point=Oo,Uo.lineStart=Vs,Uo.lineEnd=Gs},result:function(){var _t=pl?[os/pl,vl/pl]:To?[au/To,Gl/To]:Oi?[zu/Oi,Fu/Oi]:[NaN,NaN];return zu=Fu=Oi=au=Gl=To=os=vl=pl=0,_t}};function Oo(_t,Ot){zu+=_t,Fu+=Ot,++Oi}function Vs(){Uo.point=kl}function kl(_t,Ot){Uo.point=Df,Oo(Co=_t,uo=Ot)}function Df(_t,Ot){var ur=_t-Co,rr=Ot-uo,zr=h(ur*ur+rr*rr);au+=zr*(Co+_t)/2,Gl+=zr*(uo+Ot)/2,To+=zr,Oo(Co=_t,uo=Ot)}function Gs(){Uo.point=Oo}function Es(){Uo.point=jo}function dl(){If(no,iu)}function jo(_t,Ot){Uo.point=If,Oo(no=Co=_t,iu=uo=Ot)}function If(_t,Ot){var ur=_t-Co,rr=Ot-uo,zr=h(ur*ur+rr*rr);au+=zr*(Co+_t)/2,Gl+=zr*(uo+Ot)/2,To+=zr,zr=uo*_t-Co*Ot,os+=zr*(Co+_t),vl+=zr*(uo+Ot),pl+=zr*3,Oo(Co=_t,uo=Ot)}function El(_t){this._context=_t}El.prototype={_radius:4.5,pointRadius:function(_t){return this._radius=_t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(_t,Ot){switch(this._point){case 0:{this._context.moveTo(_t,Ot),this._point=1;break}case 1:{this._context.lineTo(_t,Ot);break}default:{this._context.moveTo(_t+this._radius,Ot),this._context.arc(_t,Ot,this._radius,0,o);break}}},result:O};var Cl=m(),qu,sc,lc,ou,Ll,Pl={point:O,lineStart:function(){Pl.point=mf},lineEnd:function(){qu&&Wl(sc,lc),Pl.point=O},polygonStart:function(){qu=!0},polygonEnd:function(){qu=null},result:function(){var _t=+Cl;return Cl.reset(),_t}};function mf(_t,Ot){Pl.point=Wl,sc=ou=_t,lc=Ll=Ot}function Wl(_t,Ot){ou-=_t,Ll-=Ot,Cl.add(h(ou*ou+Ll*Ll)),ou=_t,Ll=Ot}function ef(){this._string=[]}ef.prototype={_radius:4.5,_circle:Rl(4.5),pointRadius:function(_t){return(_t=+_t)!==this._radius&&(this._radius=_t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(_t,Ot){switch(this._point){case 0:{this._string.push("M",_t,",",Ot),this._point=1;break}case 1:{this._string.push("L",_t,",",Ot);break}default:{this._circle==null&&(this._circle=Rl(this._radius)),this._string.push("M",_t,",",Ot,this._circle);break}}},result:function(){if(this._string.length){var _t=this._string.join("");return this._string=[],_t}else return null}};function Rl(_t){return"m0,"+_t+"a"+_t+","+_t+" 0 1,1 0,"+-2*_t+"a"+_t+","+_t+" 0 1,1 0,"+2*_t+"z"}function su(_t,Ot){var ur=4.5,rr,zr;function pn(An){return An&&(typeof ur=="function"&&zr.pointRadius(+ur.apply(this,arguments)),X(An,rr(zr))),zr.result()}return pn.area=function(An){return X(An,rr(Na)),Na.result()},pn.measure=function(An){return X(An,rr(Pl)),Pl.result()},pn.bounds=function(An){return X(An,rr(is)),is.result()},pn.centroid=function(An){return X(An,rr(Uo)),Uo.result()},pn.projection=function(An){return arguments.length?(rr=An==null?(_t=null,$n):(_t=An).stream,pn):_t},pn.context=function(An){return arguments.length?(zr=An==null?(Ot=null,new ef):new El(Ot=An),typeof ur!="function"&&zr.pointRadius(ur),pn):Ot},pn.pointRadius=function(An){return arguments.length?(ur=typeof An=="function"?An:(zr.pointRadius(+An),+An),pn):ur},pn.projection(_t).context(Ot)}function uc(_t){return{stream:lu(_t)}}function lu(_t){return function(Ot){var ur=new xf;for(var rr in _t)ur[rr]=_t[rr];return ur.stream=Ot,ur}}function xf(){}xf.prototype={constructor:xf,point:function(_t,Ot){this.stream.point(_t,Ot)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Dl(_t,Ot,ur){var rr=_t.clipExtent&&_t.clipExtent();return _t.scale(150).translate([0,0]),rr!=null&&_t.clipExtent(null),X(ur,_t.stream(is)),Ot(is.result()),rr!=null&&_t.clipExtent(rr),_t}function Ko(_t,Ot,ur){return Dl(_t,function(rr){var zr=Ot[1][0]-Ot[0][0],pn=Ot[1][1]-Ot[0][1],An=Math.min(zr/(rr[1][0]-rr[0][0]),pn/(rr[1][1]-rr[0][1])),In=+Ot[0][0]+(zr-An*(rr[1][0]+rr[0][0]))/2,Un=+Ot[0][1]+(pn-An*(rr[1][1]+rr[0][1]))/2;_t.scale(150*An).translate([In,Un])},ur)}function Au(_t,Ot,ur){return Ko(_t,[[0,0],Ot],ur)}function bf(_t,Ot,ur){return Dl(_t,function(rr){var zr=+Ot,pn=zr/(rr[1][0]-rr[0][0]),An=(zr-pn*(rr[1][0]+rr[0][0]))/2,In=-pn*rr[0][1];_t.scale(150*pn).translate([An,In])},ur)}function zf(_t,Ot,ur){return Dl(_t,function(rr){var zr=+Ot,pn=zr/(rr[1][1]-rr[0][1]),An=-pn*rr[0][0],In=(zr-pn*(rr[1][1]+rr[0][1]))/2;_t.scale(150*pn).translate([An,In])},ur)}var Ff=16,tf=g(30*v);function fc(_t,Ot){return+Ot?Tn(_t,Ot):uu(_t)}function uu(_t){return lu({point:function(Ot,ur){Ot=_t(Ot,ur),this.stream.point(Ot[0],Ot[1])}})}function Tn(_t,Ot){function ur(rr,zr,pn,An,In,Un,ea,Cn,Yn,Vn,ia,va,$a,Ya){var ti=ea-rr,Kt=Cn-zr,fa=ti*ti+Kt*Kt;if(fa>4*Ot&&$a--){var Ca=An+Vn,qa=In+ia,Ba=Un+va,Ui=h(Ca*Ca+qa*qa+Ba*Ba),Hi=k(Ba/=Ui),Xi=d(d(Ba)-1)<a||d(pn-Yn)<a?(pn+Yn)/2:y(qa,Ca),zi=_t(Xi,Hi),ki=zi[0],fs=zi[1],Vo=ki-rr,di=fs-zr,Fa=Kt*Vo-ti*di;(Fa*Fa/fa>Ot||d((ti*Vo+Kt*di)/fa-.5)>.3||An*Vn+In*ia+Un*va<tf)&&(ur(rr,zr,pn,An,In,Un,ki,fs,Xi,Ca/=Ui,qa/=Ui,Ba,$a,Ya),Ya.point(ki,fs),ur(ki,fs,Xi,Ca,qa,Ba,ea,Cn,Yn,Vn,ia,va,$a,Ya))}}return function(rr){var zr,pn,An,In,Un,ea,Cn,Yn,Vn,ia,va,$a,Ya={point:ti,lineStart:Kt,lineEnd:Ca,polygonStart:function(){rr.polygonStart(),Ya.lineStart=qa},polygonEnd:function(){rr.polygonEnd(),Ya.lineStart=Kt}};function ti(Hi,Xi){Hi=_t(Hi,Xi),rr.point(Hi[0],Hi[1])}function Kt(){Yn=NaN,Ya.point=fa,rr.lineStart()}function fa(Hi,Xi){var zi=ae([Hi,Xi]),ki=_t(Hi,Xi);ur(Yn,Vn,Cn,ia,va,$a,Yn=ki[0],Vn=ki[1],Cn=Hi,ia=zi[0],va=zi[1],$a=zi[2],Ff,rr),rr.point(Yn,Vn)}function Ca(){Ya.point=ti,rr.lineEnd()}function qa(){Kt(),Ya.point=Ba,Ya.lineEnd=Ui}function Ba(Hi,Xi){fa(zr=Hi,Xi),pn=Yn,An=Vn,In=ia,Un=va,ea=$a,Ya.point=fa}function Ui(){ur(Yn,Vn,Cn,ia,va,$a,pn,An,zr,In,Un,ea,Ff,rr),Ya.lineEnd=Ca,Ca()}return Ya}}var ta=lu({point:function(_t,Ot){this.stream.point(_t*v,Ot*v)}});function Gn(_t){return lu({point:function(Ot,ur){var rr=_t(Ot,ur);return this.stream.point(rr[0],rr[1])}})}function ii(_t,Ot,ur,rr,zr){function pn(An,In){return An*=rr,In*=zr,[Ot+_t*An,ur-_t*In]}return pn.invert=function(An,In){return[(An-Ot)/_t*rr,(ur-In)/_t*zr]},pn}function mi(_t,Ot,ur,rr,zr,pn){var An=g(pn),In=T(pn),Un=An*_t,ea=In*_t,Cn=An/_t,Yn=In/_t,Vn=(In*ur-An*Ot)/_t,ia=(In*Ot+An*ur)/_t;function va($a,Ya){return $a*=rr,Ya*=zr,[Un*$a-ea*Ya+Ot,ur-ea*$a-Un*Ya]}return va.invert=function($a,Ya){return[rr*(Cn*$a-Yn*Ya+Vn),zr*(ia-Yn*$a-Cn*Ya)]},va}function Ei(_t){return Ho(function(){return _t})()}function Ho(_t){var Ot,ur=150,rr=480,zr=250,pn=0,An=0,In=0,Un=0,ea=0,Cn,Yn=0,Vn=1,ia=1,va=null,$a=ir,Ya=null,ti,Kt,fa,Ca=$n,qa=.5,Ba,Ui,Hi,Xi,zi;function ki(Fa){return Hi(Fa[0]*v,Fa[1]*v)}function fs(Fa){return Fa=Hi.invert(Fa[0],Fa[1]),Fa&&[Fa[0]*c,Fa[1]*c]}ki.stream=function(Fa){return Xi&&zi===Fa?Xi:Xi=ta(Gn(Cn)($a(Ba(Ca(zi=Fa)))))},ki.preclip=function(Fa){return arguments.length?($a=Fa,va=void 0,di()):$a},ki.postclip=function(Fa){return arguments.length?(Ca=Fa,Ya=ti=Kt=fa=null,di()):Ca},ki.clipAngle=function(Fa){return arguments.length?($a=+Fa?Br(va=Fa*v):(va=null,ir),di()):va*c},ki.clipExtent=function(Fa){return arguments.length?(Ca=Fa==null?(Ya=ti=Kt=fa=null,$n):Hn(Ya=+Fa[0][0],ti=+Fa[0][1],Kt=+Fa[1][0],fa=+Fa[1][1]),di()):Ya==null?null:[[Ya,ti],[Kt,fa]]},ki.scale=function(Fa){return arguments.length?(ur=+Fa,Vo()):ur},ki.translate=function(Fa){return arguments.length?(rr=+Fa[0],zr=+Fa[1],Vo()):[rr,zr]},ki.center=function(Fa){return arguments.length?(pn=Fa[0]%360*v,An=Fa[1]%360*v,Vo()):[pn*c,An*c]},ki.rotate=function(Fa){return arguments.length?(In=Fa[0]%360*v,Un=Fa[1]%360*v,ea=Fa.length>2?Fa[2]%360*v:0,Vo()):[In*c,Un*c,ea*c]},ki.angle=function(Fa){return arguments.length?(Yn=Fa%360*v,Vo()):Yn*c},ki.reflectX=function(Fa){return arguments.length?(Vn=Fa?-1:1,Vo()):Vn<0},ki.reflectY=function(Fa){return arguments.length?(ia=Fa?-1:1,Vo()):ia<0},ki.precision=function(Fa){return arguments.length?(Ba=fc(Ui,qa=Fa*Fa),di()):h(qa)},ki.fitExtent=function(Fa,Li){return Ko(ki,Fa,Li)},ki.fitSize=function(Fa,Li){return Au(ki,Fa,Li)},ki.fitWidth=function(Fa,Li){return bf(ki,Fa,Li)},ki.fitHeight=function(Fa,Li){return zf(ki,Fa,Li)};function Vo(){var Fa=mi(ur,0,0,Vn,ia,Yn).apply(null,Ot(pn,An)),Li=(Yn?mi:ii)(ur,rr-Fa[0],zr-Fa[1],Vn,ia,Yn);return Cn=yt(In,Un,ea),Ui=ut(Ot,Li),Hi=ut(Cn,Ui),Ba=fc(Ui,qa),di()}function di(){return Xi=zi=null,ki}return function(){return Ot=_t.apply(this,arguments),ki.invert=Ot.invert&&fs,Vo()}}function Bi(_t){var Ot=0,ur=n/3,rr=Ho(_t),zr=rr(Ot,ur);return zr.parallels=function(pn){return arguments.length?rr(Ot=pn[0]*v,ur=pn[1]*v):[Ot*c,ur*c]},zr}function qs(_t){var Ot=g(_t);function ur(rr,zr){return[rr*Ot,T(zr)/Ot]}return ur.invert=function(rr,zr){return[rr/Ot,k(zr*Ot)]},ur}function Jo(_t,Ot){var ur=T(_t),rr=(ur+T(Ot))/2;if(d(rr)<a)return qs(_t);var zr=1+ur*(2*rr-ur),pn=h(zr)/rr;function An(In,Un){var ea=h(zr-2*rr*T(Un))/rr;return[ea*T(In*=rr),pn-ea*g(In)]}return An.invert=function(In,Un){var ea=pn-Un,Cn=y(In,d(ea))*_(ea);return ea*rr<0&&(Cn-=n*_(In)*_(ea)),[Cn/rr,k((zr-(In*In+ea*ea)*rr*rr)/(2*rr))]},An}function gs(){return Bi(Jo).scale(155.424).center([0,33.6442])}function Yl(){return gs().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function fu(_t){var Ot=_t.length;return{point:function(ur,rr){for(var zr=-1;++zr<Ot;)_t[zr].point(ur,rr)},sphere:function(){for(var ur=-1;++ur<Ot;)_t[ur].sphere()},lineStart:function(){for(var ur=-1;++ur<Ot;)_t[ur].lineStart()},lineEnd:function(){for(var ur=-1;++ur<Ot;)_t[ur].lineEnd()},polygonStart:function(){for(var ur=-1;++ur<Ot;)_t[ur].polygonStart()},polygonEnd:function(){for(var ur=-1;++ur<Ot;)_t[ur].polygonEnd()}}}function _s(){var _t,Ot,ur=Yl(),rr,zr=gs().rotate([154,0]).center([-2,58.5]).parallels([55,65]),pn,An=gs().rotate([157,0]).center([-3,19.9]).parallels([8,18]),In,Un,ea={point:function(Vn,ia){Un=[Vn,ia]}};function Cn(Vn){var ia=Vn[0],va=Vn[1];return Un=null,rr.point(ia,va),Un||(pn.point(ia,va),Un)||(In.point(ia,va),Un)}Cn.invert=function(Vn){var ia=ur.scale(),va=ur.translate(),$a=(Vn[0]-va[0])/ia,Ya=(Vn[1]-va[1])/ia;return(Ya>=.12&&Ya<.234&&$a>=-.425&&$a<-.214?zr:Ya>=.166&&Ya<.234&&$a>=-.214&&$a<-.115?An:ur).invert(Vn)},Cn.stream=function(Vn){return _t&&Ot===Vn?_t:_t=fu([ur.stream(Ot=Vn),zr.stream(Vn),An.stream(Vn)])},Cn.precision=function(Vn){return arguments.length?(ur.precision(Vn),zr.precision(Vn),An.precision(Vn),Yn()):ur.precision()},Cn.scale=function(Vn){return arguments.length?(ur.scale(Vn),zr.scale(Vn*.35),An.scale(Vn),Cn.translate(ur.translate())):ur.scale()},Cn.translate=function(Vn){if(!arguments.length)return ur.translate();var ia=ur.scale(),va=+Vn[0],$a=+Vn[1];return rr=ur.translate(Vn).clipExtent([[va-.455*ia,$a-.238*ia],[va+.455*ia,$a+.238*ia]]).stream(ea),pn=zr.translate([va-.307*ia,$a+.201*ia]).clipExtent([[va-.425*ia+a,$a+.12*ia+a],[va-.214*ia-a,$a+.234*ia-a]]).stream(ea),In=An.translate([va-.205*ia,$a+.212*ia]).clipExtent([[va-.214*ia+a,$a+.166*ia+a],[va-.115*ia-a,$a+.234*ia-a]]).stream(ea),Yn()},Cn.fitExtent=function(Vn,ia){return Ko(Cn,Vn,ia)},Cn.fitSize=function(Vn,ia){return Au(Cn,Vn,ia)},Cn.fitWidth=function(Vn,ia){return bf(Cn,Vn,ia)},Cn.fitHeight=function(Vn,ia){return zf(Cn,Vn,ia)};function Yn(){return _t=Ot=null,Cn}return Cn.scale(1070)}function Xl(_t){return function(Ot,ur){var rr=g(Ot),zr=g(ur),pn=_t(rr*zr);return[pn*zr*T(Ot),pn*T(ur)]}}function Il(_t){return function(Ot,ur){var rr=h(Ot*Ot+ur*ur),zr=_t(rr),pn=T(zr),An=g(zr);return[y(Ot*pn,rr*An),k(rr&&ur*pn/rr)]}}var qi=Xl(function(_t){return h(2/(1+_t))});qi.invert=Il(function(_t){return 2*k(_t/2)});function Ou(){return Ei(qi).scale(124.75).clipAngle(180-.001)}var Zl=Xl(function(_t){return(_t=S(_t))&&_t/T(_t)});Zl.invert=Il(function(_t){return _t});function rf(){return Ei(Zl).scale(79.4188).clipAngle(180-.001)}function el(_t,Ot){return[_t,M(L((f+Ot)/2))]}el.invert=function(_t,Ot){return[_t,2*p(b(Ot))-f]};function Ec(){return _f(el).scale(961/o)}function _f(_t){var Ot=Ei(_t),ur=Ot.center,rr=Ot.scale,zr=Ot.translate,pn=Ot.clipExtent,An=null,In,Un,ea;Ot.scale=function(Yn){return arguments.length?(rr(Yn),Cn()):rr()},Ot.translate=function(Yn){return arguments.length?(zr(Yn),Cn()):zr()},Ot.center=function(Yn){return arguments.length?(ur(Yn),Cn()):ur()},Ot.clipExtent=function(Yn){return arguments.length?(Yn==null?An=In=Un=ea=null:(An=+Yn[0][0],In=+Yn[0][1],Un=+Yn[1][0],ea=+Yn[1][1]),Cn()):An==null?null:[[An,In],[Un,ea]]};function Cn(){var Yn=n*rr(),Vn=Ot(Sr(Ot.rotate()).invert([0,0]));return pn(An==null?[[Vn[0]-Yn,Vn[1]-Yn],[Vn[0]+Yn,Vn[1]+Yn]]:_t===el?[[Math.max(Vn[0]-Yn,An),In],[Math.min(Vn[0]+Yn,Un),ea]]:[[An,Math.max(Vn[1]-Yn,In)],[Un,Math.min(Vn[1]+Yn,ea)]])}return Cn()}function zl(_t){return L((f+_t)/2)}function Zs(_t,Ot){var ur=g(_t),rr=_t===Ot?T(_t):M(ur/g(Ot))/M(zl(Ot)/zl(_t)),zr=ur*w(zl(_t),rr)/rr;if(!rr)return el;function pn(An,In){zr>0?In<-f+a&&(In=-f+a):In>f-a&&(In=f-a);var Un=zr/w(zl(In),rr);return[Un*T(rr*An),zr-Un*g(rr*An)]}return pn.invert=function(An,In){var Un=zr-In,ea=_(rr)*h(An*An+Un*Un),Cn=y(An,d(Un))*_(Un);return Un*rr<0&&(Cn-=n*_(An)*_(Un)),[Cn/rr,2*p(w(zr/ea,1/rr))-f]},pn}function yl(){return Bi(Zs).scale(109.5).parallels([30,30])}function Mu(_t,Ot){return[_t,Ot]}Mu.invert=Mu;function Nu(){return Ei(Mu).scale(152.63)}function wf(_t,Ot){var ur=g(_t),rr=_t===Ot?T(_t):(ur-g(Ot))/(Ot-_t),zr=ur/rr+_t;if(d(rr)<a)return Mu;function pn(An,In){var Un=zr-In,ea=rr*An;return[Un*T(ea),zr-Un*g(ea)]}return pn.invert=function(An,In){var Un=zr-In,ea=y(An,d(Un))*_(Un);return Un*rr<0&&(ea-=n*_(An)*_(Un)),[ea/rr,zr-_(rr)*h(An*An+Un*Un)]},pn}function cc(){return Bi(wf).scale(131.154).center([0,13.9389])}var Ji=1.340264,cu=-.081106,tl=893e-6,us=.003796,Cs=h(3)/2,Bu=12;function Qo(_t,Ot){var ur=k(Cs*T(Ot)),rr=ur*ur,zr=rr*rr*rr;return[_t*g(ur)/(Cs*(Ji+3*cu*rr+zr*(7*tl+9*us*rr))),ur*(Ji+cu*rr+zr*(tl+us*rr))]}Qo.invert=function(_t,Ot){for(var ur=Ot,rr=ur*ur,zr=rr*rr*rr,pn=0,An,In,Un;pn<Bu&&(In=ur*(Ji+cu*rr+zr*(tl+us*rr))-Ot,Un=Ji+3*cu*rr+zr*(7*tl+9*us*rr),ur-=An=In/Un,rr=ur*ur,zr=rr*rr*rr,!(d(An)<r));++pn);return[Cs*_t*(Ji+3*cu*rr+zr*(7*tl+9*us*rr))/g(ur),k(T(ur)/Cs)]};function Of(){return Ei(Qo).scale(177.158)}function Ls(_t,Ot){var ur=g(Ot),rr=g(_t)*ur;return[ur*T(_t)/rr,T(Ot)/rr]}Ls.invert=Il(p);function rl(){return Ei(Ls).scale(144.049).clipAngle(60)}function ml(){var _t=1,Ot=0,ur=0,rr=1,zr=1,pn=0,An,In,Un=null,ea,Cn,Yn,Vn=1,ia=1,va=lu({point:function(Ca,qa){var Ba=fa([Ca,qa]);this.stream.point(Ba[0],Ba[1])}}),$a=$n,Ya,ti;function Kt(){return Vn=_t*rr,ia=_t*zr,Ya=ti=null,fa}function fa(Ca){var qa=Ca[0]*Vn,Ba=Ca[1]*ia;if(pn){var Ui=Ba*An-qa*In;qa=qa*An+Ba*In,Ba=Ui}return[qa+Ot,Ba+ur]}return fa.invert=function(Ca){var qa=Ca[0]-Ot,Ba=Ca[1]-ur;if(pn){var Ui=Ba*An+qa*In;qa=qa*An-Ba*In,Ba=Ui}return[qa/Vn,Ba/ia]},fa.stream=function(Ca){return Ya&&ti===Ca?Ya:Ya=va($a(ti=Ca))},fa.postclip=function(Ca){return arguments.length?($a=Ca,Un=ea=Cn=Yn=null,Kt()):$a},fa.clipExtent=function(Ca){return arguments.length?($a=Ca==null?(Un=ea=Cn=Yn=null,$n):Hn(Un=+Ca[0][0],ea=+Ca[0][1],Cn=+Ca[1][0],Yn=+Ca[1][1]),Kt()):Un==null?null:[[Un,ea],[Cn,Yn]]},fa.scale=function(Ca){return arguments.length?(_t=+Ca,Kt()):_t},fa.translate=function(Ca){return arguments.length?(Ot=+Ca[0],ur=+Ca[1],Kt()):[Ot,ur]},fa.angle=function(Ca){return arguments.length?(pn=Ca%360*v,In=T(pn),An=g(pn),Kt()):pn*c},fa.reflectX=function(Ca){return arguments.length?(rr=Ca?-1:1,Kt()):rr<0},fa.reflectY=function(Ca){return arguments.length?(zr=Ca?-1:1,Kt()):zr<0},fa.fitExtent=function(Ca,qa){return Ko(fa,Ca,qa)},fa.fitSize=function(Ca,qa){return Au(fa,Ca,qa)},fa.fitWidth=function(Ca,qa){return bf(fa,Ca,qa)},fa.fitHeight=function(Ca,qa){return zf(fa,Ca,qa)},fa}function Fl(_t,Ot){var ur=Ot*Ot,rr=ur*ur;return[_t*(.8707-.131979*ur+rr*(-.013791+rr*(.003971*ur-.001529*rr))),Ot*(1.007226+ur*(.015085+rr*(-.044475+.028874*ur-.005916*rr)))]}Fl.invert=function(_t,Ot){var ur=Ot,rr=25,zr;do{var pn=ur*ur,An=pn*pn;ur-=zr=(ur*(1.007226+pn*(.015085+An*(-.044475+.028874*pn-.005916*An)))-Ot)/(1.007226+pn*(.015085*3+An*(-.044475*7+.028874*9*pn-.005916*11*An)))}while(d(zr)>a&&--rr>0);return[_t/(.8707+(pn=ur*ur)*(-.131979+pn*(-.013791+pn*pn*pn*(.003971-.001529*pn)))),ur]};function js(){return Ei(Fl).scale(175.295)}function Lo(_t,Ot){return[g(Ot)*T(_t),T(Ot)]}Lo.invert=Il(k);function ys(){return Ei(Lo).scale(249.5).clipAngle(90+a)}function po(_t,Ot){var ur=g(Ot),rr=1+g(_t)*ur;return[ur*T(_t)/rr,T(Ot)/rr]}po.invert=Il(function(_t){return 2*p(_t)});function hs(){return Ei(po).scale(250).clipAngle(142)}function nf(_t,Ot){return[M(L((f+Ot)/2)),-_t]}nf.invert=function(_t,Ot){return[-Ot,2*p(b(_t))-f]};function Nf(){var _t=_f(nf),Ot=_t.center,ur=_t.rotate;return _t.center=function(rr){return arguments.length?Ot([-rr[1],rr[0]]):(rr=Ot(),[rr[1],-rr[0]])},_t.rotate=function(rr){return arguments.length?ur([rr[0],rr[1],rr.length>2?rr[2]+90:90]):(rr=ur(),[rr[0],rr[1],rr[2]-90])},ur([0,0,90]).scale(159.155)}u.geoAlbers=Yl,u.geoAlbersUsa=_s,u.geoArea=K,u.geoAzimuthalEqualArea=Ou,u.geoAzimuthalEqualAreaRaw=qi,u.geoAzimuthalEquidistant=rf,u.geoAzimuthalEquidistantRaw=Zl,u.geoBounds=lt,u.geoCentroid=Ke,u.geoCircle=Ur,u.geoClipAntimeridian=ir,u.geoClipCircle=Br,u.geoClipExtent=da,u.geoClipRectangle=Hn,u.geoConicConformal=yl,u.geoConicConformalRaw=Zs,u.geoConicEqualArea=gs,u.geoConicEqualAreaRaw=Jo,u.geoConicEquidistant=cc,u.geoConicEquidistantRaw=wf,u.geoContains=hr,u.geoDistance=la,u.geoEqualEarth=Of,u.geoEqualEarthRaw=Qo,u.geoEquirectangular=Nu,u.geoEquirectangularRaw=Mu,u.geoGnomonic=rl,u.geoGnomonicRaw=Ls,u.geoGraticule=On,u.geoGraticule10=ra,u.geoIdentity=ml,u.geoInterpolate=ua,u.geoLength=ga,u.geoMercator=Ec,u.geoMercatorRaw=el,u.geoNaturalEarth1=js,u.geoNaturalEarth1Raw=Fl,u.geoOrthographic=ys,u.geoOrthographicRaw=Lo,u.geoPath=su,u.geoProjection=Ei,u.geoProjectionMutator=Ho,u.geoRotation=Sr,u.geoStereographic=hs,u.geoStereographicRaw=po,u.geoStream=X,u.geoTransform=uc,u.geoTransverseMercator=Nf,u.geoTransverseMercatorRaw=nf,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){function s(et,Pe){return et.parent===Pe.parent?1:2}function m(et){return et.reduce(x,0)/et.length}function x(et,Pe){return et+Pe.x}function t(et){return 1+et.reduce(i,0)}function i(et,Pe){return Math.max(et,Pe.y)}function a(et){for(var Pe;Pe=et.children;)et=Pe[0];return et}function r(et){for(var Pe;Pe=et.children;)et=Pe[Pe.length-1];return et}function n(){var et=s,Pe=1,Je=1,it=!1;function ht(zt){var Lt,Vt=0;zt.eachAfter(function(xt){var Rt=xt.children;Rt?(xt.x=m(Rt),xt.y=t(Rt)):(xt.x=Lt?Vt+=et(xt,Lt):0,xt.y=0,Lt=xt)});var $t=a(zt),Ht=r(zt),tr=$t.x-et($t,Ht)/2,qe=Ht.x+et(Ht,$t)/2;return zt.eachAfter(it?function(xt){xt.x=(xt.x-zt.x)*Pe,xt.y=(zt.y-xt.y)*Je}:function(xt){xt.x=(xt.x-tr)/(qe-tr)*Pe,xt.y=(1-(zt.y?xt.y/zt.y:1))*Je})}return ht.separation=function(zt){return arguments.length?(et=zt,ht):et},ht.size=function(zt){return arguments.length?(it=!1,Pe=+zt[0],Je=+zt[1],ht):it?null:[Pe,Je]},ht.nodeSize=function(zt){return arguments.length?(it=!0,Pe=+zt[0],Je=+zt[1],ht):it?[Pe,Je]:null},ht}function f(et){var Pe=0,Je=et.children,it=Je&&Je.length;if(!it)Pe=1;else for(;--it>=0;)Pe+=Je[it].value;et.value=Pe}function l(){return this.eachAfter(f)}function o(et){var Pe=this,Je,it=[Pe],ht,zt,Lt;do for(Je=it.reverse(),it=[];Pe=Je.pop();)if(et(Pe),ht=Pe.children,ht)for(zt=0,Lt=ht.length;zt<Lt;++zt)it.push(ht[zt]);while(it.length);return this}function c(et){for(var Pe=this,Je=[Pe],it,ht;Pe=Je.pop();)if(et(Pe),it=Pe.children,it)for(ht=it.length-1;ht>=0;--ht)Je.push(it[ht]);return this}function v(et){for(var Pe=this,Je=[Pe],it=[],ht,zt,Lt;Pe=Je.pop();)if(it.push(Pe),ht=Pe.children,ht)for(zt=0,Lt=ht.length;zt<Lt;++zt)Je.push(ht[zt]);for(;Pe=it.pop();)et(Pe);return this}function d(et){return this.eachAfter(function(Pe){for(var Je=+et(Pe.data)||0,it=Pe.children,ht=it&&it.length;--ht>=0;)Je+=it[ht].value;Pe.value=Je})}function p(et){return this.eachBefore(function(Pe){Pe.children&&Pe.children.sort(et)})}function y(et){for(var Pe=this,Je=g(Pe,et),it=[Pe];Pe!==Je;)Pe=Pe.parent,it.push(Pe);for(var ht=it.length;et!==Je;)it.splice(ht,0,et),et=et.parent;return it}function g(et,Pe){if(et===Pe)return et;var Je=et.ancestors(),it=Pe.ancestors(),ht=null;for(et=Je.pop(),Pe=it.pop();et===Pe;)ht=et,et=Je.pop(),Pe=it.pop();return ht}function A(){for(var et=this,Pe=[et];et=et.parent;)Pe.push(et);return Pe}function b(){var et=[];return this.each(function(Pe){et.push(Pe)}),et}function M(){var et=[];return this.eachBefore(function(Pe){Pe.children||et.push(Pe)}),et}function w(){var et=this,Pe=[];return et.each(function(Je){Je!==et&&Pe.push({source:Je.parent,target:Je})}),Pe}function T(et,Pe){var Je=new k(et),it=+et.value&&(Je.value=et.value),ht,zt=[Je],Lt,Vt,$t,Ht;for(Pe==null&&(Pe=h);ht=zt.pop();)if(it&&(ht.value=+ht.data.value),(Vt=Pe(ht.data))&&(Ht=Vt.length))for(ht.children=new Array(Ht),$t=Ht-1;$t>=0;--$t)zt.push(Lt=ht.children[$t]=new k(Vt[$t])),Lt.parent=ht,Lt.depth=ht.depth+1;return Je.eachBefore(S)}function _(){return T(this).eachBefore(L)}function h(et){return et.children}function L(et){et.data=et.data.data}function S(et){var Pe=0;do et.height=Pe;while((et=et.parent)&&et.height<++Pe)}function k(et){this.data=et,this.depth=this.height=0,this.parent=null}k.prototype=T.prototype={constructor:k,count:l,each:o,eachAfter:v,eachBefore:c,sum:d,sort:p,path:y,ancestors:A,descendants:b,leaves:M,links:w,copy:_};var P=Array.prototype.slice;function O(et){for(var Pe=et.length,Je,it;Pe;)it=Math.random()*Pe--|0,Je=et[Pe],et[Pe]=et[it],et[it]=Je;return et}function F(et){for(var Pe=0,Je=(et=O(P.call(et))).length,it=[],ht,zt;Pe<Je;)ht=et[Pe],zt&&U(zt,ht)?++Pe:(zt=X(it=D(it,ht)),Pe=0);return zt}function D(et,Pe){var Je,it;if(N(Pe,et))return[Pe];for(Je=0;Je<et.length;++Je)if(R(Pe,et[Je])&&N(ee(et[Je],Pe),et))return[et[Je],Pe];for(Je=0;Je<et.length-1;++Je)for(it=Je+1;it<et.length;++it)if(R(ee(et[Je],et[it]),Pe)&&R(ee(et[Je],Pe),et[it])&&R(ee(et[it],Pe),et[Je])&&N(q(et[Je],et[it],Pe),et))return[et[Je],et[it],Pe];throw new Error}function R(et,Pe){var Je=et.r-Pe.r,it=Pe.x-et.x,ht=Pe.y-et.y;return Je<0||Je*Je<it*it+ht*ht}function U(et,Pe){var Je=et.r-Pe.r+1e-6,it=Pe.x-et.x,ht=Pe.y-et.y;return Je>0&&Je*Je>it*it+ht*ht}function N(et,Pe){for(var Je=0;Je<Pe.length;++Je)if(!U(et,Pe[Je]))return!1;return!0}function X(et){switch(et.length){case 1:return j(et[0]);case 2:return ee(et[0],et[1]);case 3:return q(et[0],et[1],et[2])}}function j(et){return{x:et.x,y:et.y,r:et.r}}function ee(et,Pe){var Je=et.x,it=et.y,ht=et.r,zt=Pe.x,Lt=Pe.y,Vt=Pe.r,$t=zt-Je,Ht=Lt-it,tr=Vt-ht,qe=Math.sqrt($t*$t+Ht*Ht);return{x:(Je+zt+$t/qe*tr)/2,y:(it+Lt+Ht/qe*tr)/2,r:(qe+ht+Vt)/2}}function q(et,Pe,Je){var it=et.x,ht=et.y,zt=et.r,Lt=Pe.x,Vt=Pe.y,$t=Pe.r,Ht=Je.x,tr=Je.y,qe=Je.r,xt=it-Lt,Rt=it-Ht,fr=ht-Vt,br=ht-tr,pr=$t-zt,Tr=qe-zt,Nr=it*it+ht*ht-zt*zt,Ir=Nr-Lt*Lt-Vt*Vt+$t*$t,lr=Nr-Ht*Ht-tr*tr+qe*qe,Yr=Rt*fr-xt*br,nt=(fr*lr-br*Ir)/(Yr*2)-it,Ae=(br*pr-fr*Tr)/Yr,Ee=(Rt*Ir-xt*lr)/(Yr*2)-ht,Fe=(xt*Tr-Rt*pr)/Yr,Ke=Ae*Ae+Fe*Fe-1,tt=2*(zt+nt*Ae+Ee*Fe),ut=nt*nt+Ee*Ee-zt*zt,ct=-(Ke?(tt+Math.sqrt(tt*tt-4*Ke*ut))/(2*Ke):ut/tt);return{x:it+nt+Ae*ct,y:ht+Ee+Fe*ct,r:ct}}function G(et,Pe,Je){var it=et.x-Pe.x,ht,zt,Lt=et.y-Pe.y,Vt,$t,Ht=it*it+Lt*Lt;Ht?(zt=Pe.r+Je.r,zt*=zt,$t=et.r+Je.r,$t*=$t,zt>$t?(ht=(Ht+$t-zt)/(2*Ht),Vt=Math.sqrt(Math.max(0,$t/Ht-ht*ht)),Je.x=et.x-ht*it-Vt*Lt,Je.y=et.y-ht*Lt+Vt*it):(ht=(Ht+zt-$t)/(2*Ht),Vt=Math.sqrt(Math.max(0,zt/Ht-ht*ht)),Je.x=Pe.x+ht*it-Vt*Lt,Je.y=Pe.y+ht*Lt+Vt*it)):(Je.x=Pe.x+Je.r,Je.y=Pe.y)}function J(et,Pe){var Je=et.r+Pe.r-1e-6,it=Pe.x-et.x,ht=Pe.y-et.y;return Je>0&&Je*Je>it*it+ht*ht}function le(et){var Pe=et._,Je=et.next._,it=Pe.r+Je.r,ht=(Pe.x*Je.r+Je.x*Pe.r)/it,zt=(Pe.y*Je.r+Je.y*Pe.r)/it;return ht*ht+zt*zt}function fe(et){this._=et,this.next=null,this.previous=null}function se(et){if(!(ht=et.length))return 0;var Pe,Je,it,ht,zt,Lt,Vt,$t,Ht,tr,qe;if(Pe=et[0],Pe.x=0,Pe.y=0,!(ht>1))return Pe.r;if(Je=et[1],Pe.x=-Je.r,Je.x=Pe.r,Je.y=0,!(ht>2))return Pe.r+Je.r;G(Je,Pe,it=et[2]),Pe=new fe(Pe),Je=new fe(Je),it=new fe(it),Pe.next=it.previous=Je,Je.next=Pe.previous=it,it.next=Je.previous=Pe;e:for(Vt=3;Vt<ht;++Vt){G(Pe._,Je._,it=et[Vt]),it=new fe(it),$t=Je.next,Ht=Pe.previous,tr=Je._.r,qe=Pe._.r;do if(tr<=qe){if(J($t._,it._)){Je=$t,Pe.next=Je,Je.previous=Pe,--Vt;continue e}tr+=$t._.r,$t=$t.next}else{if(J(Ht._,it._)){Pe=Ht,Pe.next=Je,Je.previous=Pe,--Vt;continue e}qe+=Ht._.r,Ht=Ht.previous}while($t!==Ht.next);for(it.previous=Pe,it.next=Je,Pe.next=Je.previous=Je=it,zt=le(Pe);(it=it.next)!==Je;)(Lt=le(it))<zt&&(Pe=it,zt=Lt);Je=Pe.next}for(Pe=[Je._],it=Je;(it=it.next)!==Je;)Pe.push(it._);for(it=F(Pe),Vt=0;Vt<ht;++Vt)Pe=et[Vt],Pe.x-=it.x,Pe.y-=it.y;return it.r}function V(et){return se(et),et}function Y(et){return et==null?null:ne(et)}function ne(et){if(typeof et!="function")throw new Error;return et}function te(){return 0}function K(et){return function(){return et}}function $(et){return Math.sqrt(et.value)}function ae(){var et=null,Pe=1,Je=1,it=te;function ht(zt){return zt.x=Pe/2,zt.y=Je/2,et?zt.eachBefore(ie(et)).eachAfter(oe(it,.5)).eachBefore(ue(1)):zt.eachBefore(ie($)).eachAfter(oe(te,1)).eachAfter(oe(it,zt.r/Math.min(Pe,Je))).eachBefore(ue(Math.min(Pe,Je)/(2*zt.r))),zt}return ht.radius=function(zt){return arguments.length?(et=Y(zt),ht):et},ht.size=function(zt){return arguments.length?(Pe=+zt[0],Je=+zt[1],ht):[Pe,Je]},ht.padding=function(zt){return arguments.length?(it=typeof zt=="function"?zt:K(+zt),ht):it},ht}function ie(et){return function(Pe){Pe.children||(Pe.r=Math.max(0,+et(Pe)||0))}}function oe(et,Pe){return function(Je){if(it=Je.children){var it,ht,zt=it.length,Lt=et(Je)*Pe||0,Vt;if(Lt)for(ht=0;ht<zt;++ht)it[ht].r+=Lt;if(Vt=se(it),Lt)for(ht=0;ht<zt;++ht)it[ht].r-=Lt;Je.r=Vt+Lt}}}function ue(et){return function(Pe){var Je=Pe.parent;Pe.r*=et,Je&&(Pe.x=Je.x+et*Pe.x,Pe.y=Je.y+et*Pe.y)}}function xe(et){et.x0=Math.round(et.x0),et.y0=Math.round(et.y0),et.x1=Math.round(et.x1),et.y1=Math.round(et.y1)}function he(et,Pe,Je,it,ht){for(var zt=et.children,Lt,Vt=-1,$t=zt.length,Ht=et.value&&(it-Pe)/et.value;++Vt<$t;)Lt=zt[Vt],Lt.y0=Je,Lt.y1=ht,Lt.x0=Pe,Lt.x1=Pe+=Lt.value*Ht}function me(){var et=1,Pe=1,Je=0,it=!1;function ht(Lt){var Vt=Lt.height+1;return Lt.x0=Lt.y0=Je,Lt.x1=et,Lt.y1=Pe/Vt,Lt.eachBefore(zt(Pe,Vt)),it&&Lt.eachBefore(xe),Lt}function zt(Lt,Vt){return function($t){$t.children&&he($t,$t.x0,Lt*($t.depth+1)/Vt,$t.x1,Lt*($t.depth+2)/Vt);var Ht=$t.x0,tr=$t.y0,qe=$t.x1-Je,xt=$t.y1-Je;qe<Ht&&(Ht=qe=(Ht+qe)/2),xt<tr&&(tr=xt=(tr+xt)/2),$t.x0=Ht,$t.y0=tr,$t.x1=qe,$t.y1=xt}}return ht.round=function(Lt){return arguments.length?(it=!!Lt,ht):it},ht.size=function(Lt){return arguments.length?(et=+Lt[0],Pe=+Lt[1],ht):[et,Pe]},ht.padding=function(Lt){return arguments.length?(Je=+Lt,ht):Je},ht}var be="$",Ce={depth:-1},Se={};function Be(et){return et.id}function Ye(et){return et.parentId}function Xe(){var et=Be,Pe=Ye;function Je(it){var ht,zt,Lt=it.length,Vt,$t,Ht,tr=new Array(Lt),qe,xt,Rt={};for(zt=0;zt<Lt;++zt)ht=it[zt],Ht=tr[zt]=new k(ht),(qe=et(ht,zt,it))!=null&&(qe+="")&&(xt=be+(Ht.id=qe),Rt[xt]=xt in Rt?Se:Ht);for(zt=0;zt<Lt;++zt)if(Ht=tr[zt],qe=Pe(it[zt],zt,it),qe==null||!(qe+="")){if(Vt)throw new Error("multiple roots");Vt=Ht}else{if($t=Rt[be+qe],!$t)throw new Error("missing: "+qe);if($t===Se)throw new Error("ambiguous: "+qe);$t.children?$t.children.push(Ht):$t.children=[Ht],Ht.parent=$t}if(!Vt)throw new Error("no root");if(Vt.parent=Ce,Vt.eachBefore(function(fr){fr.depth=fr.parent.depth+1,--Lt}).eachBefore(S),Vt.parent=null,Lt>0)throw new Error("cycle");return Vt}return Je.id=function(it){return arguments.length?(et=ne(it),Je):et},Je.parentId=function(it){return arguments.length?(Pe=ne(it),Je):Pe},Je}function Te(et,Pe){return et.parent===Pe.parent?1:2}function Ie(et){var Pe=et.children;return Pe?Pe[0]:et.t}function Ze(et){var Pe=et.children;return Pe?Pe[Pe.length-1]:et.t}function rt(et,Pe,Je){var it=Je/(Pe.i-et.i);Pe.c-=it,Pe.s+=Je,et.c+=it,Pe.z+=Je,Pe.m+=Je}function Ge(et){for(var Pe=0,Je=0,it=et.children,ht=it.length,zt;--ht>=0;)zt=it[ht],zt.z+=Pe,zt.m+=Pe,Pe+=zt.s+(Je+=zt.c)}function ze(et,Pe,Je){return et.a.parent===Pe.parent?et.a:Je}function We(et,Pe){this._=et,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Pe}We.prototype=Object.create(k.prototype);function mt(et){for(var Pe=new We(et,0),Je,it=[Pe],ht,zt,Lt,Vt;Je=it.pop();)if(zt=Je._.children)for(Je.children=new Array(Vt=zt.length),Lt=Vt-1;Lt>=0;--Lt)it.push(ht=Je.children[Lt]=new We(zt[Lt],Lt)),ht.parent=Je;return(Pe.parent=new We(null,0)).children=[Pe],Pe}function Ft(){var et=Te,Pe=1,Je=1,it=null;function ht(Ht){var tr=mt(Ht);if(tr.eachAfter(zt),tr.parent.m=-tr.z,tr.eachBefore(Lt),it)Ht.eachBefore($t);else{var qe=Ht,xt=Ht,Rt=Ht;Ht.eachBefore(function(Nr){Nr.x<qe.x&&(qe=Nr),Nr.x>xt.x&&(xt=Nr),Nr.depth>Rt.depth&&(Rt=Nr)});var fr=qe===xt?1:et(qe,xt)/2,br=fr-qe.x,pr=Pe/(xt.x+fr+br),Tr=Je/(Rt.depth||1);Ht.eachBefore(function(Nr){Nr.x=(Nr.x+br)*pr,Nr.y=Nr.depth*Tr})}return Ht}function zt(Ht){var tr=Ht.children,qe=Ht.parent.children,xt=Ht.i?qe[Ht.i-1]:null;if(tr){Ge(Ht);var Rt=(tr[0].z+tr[tr.length-1].z)/2;xt?(Ht.z=xt.z+et(Ht._,xt._),Ht.m=Ht.z-Rt):Ht.z=Rt}else xt&&(Ht.z=xt.z+et(Ht._,xt._));Ht.parent.A=Vt(Ht,xt,Ht.parent.A||qe[0])}function Lt(Ht){Ht._.x=Ht.z+Ht.parent.m,Ht.m+=Ht.parent.m}function Vt(Ht,tr,qe){if(tr){for(var xt=Ht,Rt=Ht,fr=tr,br=xt.parent.children[0],pr=xt.m,Tr=Rt.m,Nr=fr.m,Ir=br.m,lr;fr=Ze(fr),xt=Ie(xt),fr&&xt;)br=Ie(br),Rt=Ze(Rt),Rt.a=Ht,lr=fr.z+Nr-xt.z-pr+et(fr._,xt._),lr>0&&(rt(ze(fr,Ht,qe),Ht,lr),pr+=lr,Tr+=lr),Nr+=fr.m,pr+=xt.m,Ir+=br.m,Tr+=Rt.m;fr&&!Ze(Rt)&&(Rt.t=fr,Rt.m+=Nr-Tr),xt&&!Ie(br)&&(br.t=xt,br.m+=pr-Ir,qe=Ht)}return qe}function $t(Ht){Ht.x*=Pe,Ht.y=Ht.depth*Je}return ht.separation=function(Ht){return arguments.length?(et=Ht,ht):et},ht.size=function(Ht){return arguments.length?(it=!1,Pe=+Ht[0],Je=+Ht[1],ht):it?null:[Pe,Je]},ht.nodeSize=function(Ht){return arguments.length?(it=!0,Pe=+Ht[0],Je=+Ht[1],ht):it?[Pe,Je]:null},ht}function Xt(et,Pe,Je,it,ht){for(var zt=et.children,Lt,Vt=-1,$t=zt.length,Ht=et.value&&(ht-Je)/et.value;++Vt<$t;)Lt=zt[Vt],Lt.x0=Pe,Lt.x1=it,Lt.y0=Je,Lt.y1=Je+=Lt.value*Ht}var Pt=(1+Math.sqrt(5))/2;function Ut(et,Pe,Je,it,ht,zt){for(var Lt=[],Vt=Pe.children,$t,Ht,tr=0,qe=0,xt=Vt.length,Rt,fr,br=Pe.value,pr,Tr,Nr,Ir,lr,Yr,nt;tr<xt;){Rt=ht-Je,fr=zt-it;do pr=Vt[qe++].value;while(!pr&&qe<xt);for(Tr=Nr=pr,Yr=Math.max(fr/Rt,Rt/fr)/(br*et),nt=pr*pr*Yr,lr=Math.max(Nr/nt,nt/Tr);qe<xt;++qe){if(pr+=Ht=Vt[qe].value,Ht<Tr&&(Tr=Ht),Ht>Nr&&(Nr=Ht),nt=pr*pr*Yr,Ir=Math.max(Nr/nt,nt/Tr),Ir>lr){pr-=Ht;break}lr=Ir}Lt.push($t={value:pr,dice:Rt<fr,children:Vt.slice(tr,qe)}),$t.dice?he($t,Je,it,ht,br?it+=fr*pr/br:zt):Xt($t,Je,it,br?Je+=Rt*pr/br:ht,zt),br-=pr,tr=qe}return Lt}var Gt=function et(Pe){function Je(it,ht,zt,Lt,Vt){Ut(Pe,it,ht,zt,Lt,Vt)}return Je.ratio=function(it){return et((it=+it)>1?it:1)},Je}(Pt);function It(){var et=Gt,Pe=!1,Je=1,it=1,ht=[0],zt=te,Lt=te,Vt=te,$t=te,Ht=te;function tr(xt){return xt.x0=xt.y0=0,xt.x1=Je,xt.y1=it,xt.eachBefore(qe),ht=[0],Pe&&xt.eachBefore(xe),xt}function qe(xt){var Rt=ht[xt.depth],fr=xt.x0+Rt,br=xt.y0+Rt,pr=xt.x1-Rt,Tr=xt.y1-Rt;pr<fr&&(fr=pr=(fr+pr)/2),Tr<br&&(br=Tr=(br+Tr)/2),xt.x0=fr,xt.y0=br,xt.x1=pr,xt.y1=Tr,xt.children&&(Rt=ht[xt.depth+1]=zt(xt)/2,fr+=Ht(xt)-Rt,br+=Lt(xt)-Rt,pr-=Vt(xt)-Rt,Tr-=$t(xt)-Rt,pr<fr&&(fr=pr=(fr+pr)/2),Tr<br&&(br=Tr=(br+Tr)/2),et(xt,fr,br,pr,Tr))}return tr.round=function(xt){return arguments.length?(Pe=!!xt,tr):Pe},tr.size=function(xt){return arguments.length?(Je=+xt[0],it=+xt[1],tr):[Je,it]},tr.tile=function(xt){return arguments.length?(et=ne(xt),tr):et},tr.padding=function(xt){return arguments.length?tr.paddingInner(xt).paddingOuter(xt):tr.paddingInner()},tr.paddingInner=function(xt){return arguments.length?(zt=typeof xt=="function"?xt:K(+xt),tr):zt},tr.paddingOuter=function(xt){return arguments.length?tr.paddingTop(xt).paddingRight(xt).paddingBottom(xt).paddingLeft(xt):tr.paddingTop()},tr.paddingTop=function(xt){return arguments.length?(Lt=typeof xt=="function"?xt:K(+xt),tr):Lt},tr.paddingRight=function(xt){return arguments.length?(Vt=typeof xt=="function"?xt:K(+xt),tr):Vt},tr.paddingBottom=function(xt){return arguments.length?($t=typeof xt=="function"?xt:K(+xt),tr):$t},tr.paddingLeft=function(xt){return arguments.length?(Ht=typeof xt=="function"?xt:K(+xt),tr):Ht},tr}function Ct(et,Pe,Je,it,ht){var zt=et.children,Lt,Vt=zt.length,$t,Ht=new Array(Vt+1);for(Ht[0]=$t=Lt=0;Lt<Vt;++Lt)Ht[Lt+1]=$t+=zt[Lt].value;tr(0,Vt,et.value,Pe,Je,it,ht);function tr(qe,xt,Rt,fr,br,pr,Tr){if(qe>=xt-1){var Nr=zt[qe];Nr.x0=fr,Nr.y0=br,Nr.x1=pr,Nr.y1=Tr;return}for(var Ir=Ht[qe],lr=Rt/2+Ir,Yr=qe+1,nt=xt-1;Yr<nt;){var Ae=Yr+nt>>>1;Ht[Ae]<lr?Yr=Ae+1:nt=Ae}lr-Ht[Yr-1]<Ht[Yr]-lr&&qe+1<Yr&&--Yr;var Ee=Ht[Yr]-Ir,Fe=Rt-Ee;if(pr-fr>Tr-br){var Ke=(fr*Fe+pr*Ee)/Rt;tr(qe,Yr,Ee,fr,br,Ke,Tr),tr(Yr,xt,Fe,Ke,br,pr,Tr)}else{var tt=(br*Fe+Tr*Ee)/Rt;tr(qe,Yr,Ee,fr,br,pr,tt),tr(Yr,xt,Fe,fr,tt,pr,Tr)}}}function lt(et,Pe,Je,it,ht){(et.depth&1?Xt:he)(et,Pe,Je,it,ht)}var dt=function et(Pe){function Je(it,ht,zt,Lt,Vt){if(($t=it._squarify)&&$t.ratio===Pe)for(var $t,Ht,tr,qe,xt=-1,Rt,fr=$t.length,br=it.value;++xt<fr;){for(Ht=$t[xt],tr=Ht.children,qe=Ht.value=0,Rt=tr.length;qe<Rt;++qe)Ht.value+=tr[qe].value;Ht.dice?he(Ht,ht,zt,Lt,zt+=(Vt-zt)*Ht.value/br):Xt(Ht,ht,zt,ht+=(Lt-ht)*Ht.value/br,Vt),br-=Ht.value}else it._squarify=$t=Ut(Pe,it,ht,zt,Lt,Vt),$t.ratio=Pe}return Je.ratio=function(it){return et((it=+it)>1?it:1)},Je}(Pt);u.cluster=n,u.hierarchy=T,u.pack=ae,u.packEnclose=F,u.packSiblings=V,u.partition=me,u.stratify=Xe,u.tree=Ft,u.treemap=It,u.treemapBinary=Ct,u.treemapDice=he,u.treemapResquarify=dt,u.treemapSlice=Xt,u.treemapSliceDice=lt,u.treemapSquarify=Gt,Object.defineProperty(u,"__esModule",{value:!0})})},{}],116:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B,e("d3-color")):(u=u||self,s(u.d3=u.d3||{},u.d3))})(this,function(u,s){function m(Te,Ie,Ze,rt,Ge){var ze=Te*Te,We=ze*Te;return((1-3*Te+3*ze-We)*Ie+(4-6*ze+3*We)*Ze+(1+3*Te+3*ze-3*We)*rt+We*Ge)/6}function x(Te){var Ie=Te.length-1;return function(Ze){var rt=Ze<=0?Ze=0:Ze>=1?(Ze=1,Ie-1):Math.floor(Ze*Ie),Ge=Te[rt],ze=Te[rt+1],We=rt>0?Te[rt-1]:2*Ge-ze,mt=rt<Ie-1?Te[rt+2]:2*ze-Ge;return m((Ze-rt/Ie)*Ie,We,Ge,ze,mt)}}function t(Te){var Ie=Te.length;return function(Ze){var rt=Math.floor(((Ze%=1)<0?++Ze:Ze)*Ie),Ge=Te[(rt+Ie-1)%Ie],ze=Te[rt%Ie],We=Te[(rt+1)%Ie],mt=Te[(rt+2)%Ie];return m((Ze-rt/Ie)*Ie,Ge,ze,We,mt)}}function i(Te){return function(){return Te}}function a(Te,Ie){return function(Ze){return Te+Ze*Ie}}function r(Te,Ie,Ze){return Te=Math.pow(Te,Ze),Ie=Math.pow(Ie,Ze)-Te,Ze=1/Ze,function(rt){return Math.pow(Te+rt*Ie,Ze)}}function n(Te,Ie){var Ze=Ie-Te;return Ze?a(Te,Ze>180||Ze<-180?Ze-360*Math.round(Ze/360):Ze):i(isNaN(Te)?Ie:Te)}function f(Te){return(Te=+Te)==1?l:function(Ie,Ze){return Ze-Ie?r(Ie,Ze,Te):i(isNaN(Ie)?Ze:Ie)}}function l(Te,Ie){var Ze=Ie-Te;return Ze?a(Te,Ze):i(isNaN(Te)?Ie:Te)}var o=function Te(Ie){var Ze=f(Ie);function rt(Ge,ze){var We=Ze((Ge=s.rgb(Ge)).r,(ze=s.rgb(ze)).r),mt=Ze(Ge.g,ze.g),Ft=Ze(Ge.b,ze.b),Xt=l(Ge.opacity,ze.opacity);return function(Pt){return Ge.r=We(Pt),Ge.g=mt(Pt),Ge.b=Ft(Pt),Ge.opacity=Xt(Pt),Ge+""}}return rt.gamma=Te,rt}(1);function c(Te){return function(Ie){var Ze=Ie.length,rt=new Array(Ze),Ge=new Array(Ze),ze=new Array(Ze),We,mt;for(We=0;We<Ze;++We)mt=s.rgb(Ie[We]),rt[We]=mt.r||0,Ge[We]=mt.g||0,ze[We]=mt.b||0;return rt=Te(rt),Ge=Te(Ge),ze=Te(ze),mt.opacity=1,function(Ft){return mt.r=rt(Ft),mt.g=Ge(Ft),mt.b=ze(Ft),mt+""}}}var v=c(x),d=c(t);function p(Te,Ie){Ie||(Ie=[]);var Ze=Te?Math.min(Ie.length,Te.length):0,rt=Ie.slice(),Ge;return function(ze){for(Ge=0;Ge<Ze;++Ge)rt[Ge]=Te[Ge]*(1-ze)+Ie[Ge]*ze;return rt}}function y(Te){return ArrayBuffer.isView(Te)&&!(Te instanceof DataView)}function g(Te,Ie){return(y(Ie)?p:A)(Te,Ie)}function A(Te,Ie){var Ze=Ie?Ie.length:0,rt=Te?Math.min(Ze,Te.length):0,Ge=new Array(rt),ze=new Array(Ze),We;for(We=0;We<rt;++We)Ge[We]=k(Te[We],Ie[We]);for(;We<Ze;++We)ze[We]=Ie[We];return function(mt){for(We=0;We<rt;++We)ze[We]=Ge[We](mt);return ze}}function b(Te,Ie){var Ze=new Date;return Te=+Te,Ie=+Ie,function(rt){return Ze.setTime(Te*(1-rt)+Ie*rt),Ze}}function M(Te,Ie){return Te=+Te,Ie=+Ie,function(Ze){return Te*(1-Ze)+Ie*Ze}}function w(Te,Ie){var Ze={},rt={},Ge;(Te===null||typeof Te!="object")&&(Te={}),(Ie===null||typeof Ie!="object")&&(Ie={});for(Ge in Ie)Ge in Te?Ze[Ge]=k(Te[Ge],Ie[Ge]):rt[Ge]=Ie[Ge];return function(ze){for(Ge in Ze)rt[Ge]=Ze[Ge](ze);return rt}}var T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(T.source,"g");function h(Te){return function(){return Te}}function L(Te){return function(Ie){return Te(Ie)+""}}function S(Te,Ie){var Ze=T.lastIndex=_.lastIndex=0,rt,Ge,ze,We=-1,mt=[],Ft=[];for(Te=Te+"",Ie=Ie+"";(rt=T.exec(Te))&&(Ge=_.exec(Ie));)(ze=Ge.index)>Ze&&(ze=Ie.slice(Ze,ze),mt[We]?mt[We]+=ze:mt[++We]=ze),(rt=rt[0])===(Ge=Ge[0])?mt[We]?mt[We]+=Ge:mt[++We]=Ge:(mt[++We]=null,Ft.push({i:We,x:M(rt,Ge)})),Ze=_.lastIndex;return Ze<Ie.length&&(ze=Ie.slice(Ze),mt[We]?mt[We]+=ze:mt[++We]=ze),mt.length<2?Ft[0]?L(Ft[0].x):h(Ie):(Ie=Ft.length,function(Xt){for(var Pt=0,Ut;Pt<Ie;++Pt)mt[(Ut=Ft[Pt]).i]=Ut.x(Xt);return mt.join("")})}function k(Te,Ie){var Ze=typeof Ie,rt;return Ie==null||Ze==="boolean"?i(Ie):(Ze==="number"?M:Ze==="string"?(rt=s.color(Ie))?(Ie=rt,o):S:Ie instanceof s.color?o:Ie instanceof Date?b:y(Ie)?p:Array.isArray(Ie)?A:typeof Ie.valueOf!="function"&&typeof Ie.toString!="function"||isNaN(Ie)?w:M)(Te,Ie)}function P(Te){var Ie=Te.length;return function(Ze){return Te[Math.max(0,Math.min(Ie-1,Math.floor(Ze*Ie)))]}}function O(Te,Ie){var Ze=n(+Te,+Ie);return function(rt){var Ge=Ze(rt);return Ge-360*Math.floor(Ge/360)}}function F(Te,Ie){return Te=+Te,Ie=+Ie,function(Ze){return Math.round(Te*(1-Ze)+Ie*Ze)}}var D=180/Math.PI,R={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function U(Te,Ie,Ze,rt,Ge,ze){var We,mt,Ft;return(We=Math.sqrt(Te*Te+Ie*Ie))&&(Te/=We,Ie/=We),(Ft=Te*Ze+Ie*rt)&&(Ze-=Te*Ft,rt-=Ie*Ft),(mt=Math.sqrt(Ze*Ze+rt*rt))&&(Ze/=mt,rt/=mt,Ft/=mt),Te*rt<Ie*Ze&&(Te=-Te,Ie=-Ie,Ft=-Ft,We=-We),{translateX:Ge,translateY:ze,rotate:Math.atan2(Ie,Te)*D,skewX:Math.atan(Ft)*D,scaleX:We,scaleY:mt}}var N,X,j,ee;function q(Te){return Te==="none"?R:(N||(N=document.createElement("DIV"),X=document.documentElement,j=document.defaultView),N.style.transform=Te,Te=j.getComputedStyle(X.appendChild(N),null).getPropertyValue("transform"),X.removeChild(N),Te=Te.slice(7,-1).split(","),U(+Te[0],+Te[1],+Te[2],+Te[3],+Te[4],+Te[5]))}function G(Te){return Te==null||(ee||(ee=document.createElementNS("http://www.w3.org/2000/svg","g")),ee.setAttribute("transform",Te),!(Te=ee.transform.baseVal.consolidate()))?R:(Te=Te.matrix,U(Te.a,Te.b,Te.c,Te.d,Te.e,Te.f))}function J(Te,Ie,Ze,rt){function Ge(Xt){return Xt.length?Xt.pop()+" ":""}function ze(Xt,Pt,Ut,Gt,It,Ct){if(Xt!==Ut||Pt!==Gt){var lt=It.push("translate(",null,Ie,null,Ze);Ct.push({i:lt-4,x:M(Xt,Ut)},{i:lt-2,x:M(Pt,Gt)})}else(Ut||Gt)&&It.push("translate("+Ut+Ie+Gt+Ze)}function We(Xt,Pt,Ut,Gt){Xt!==Pt?(Xt-Pt>180?Pt+=360:Pt-Xt>180&&(Xt+=360),Gt.push({i:Ut.push(Ge(Ut)+"rotate(",null,rt)-2,x:M(Xt,Pt)})):Pt&&Ut.push(Ge(Ut)+"rotate("+Pt+rt)}function mt(Xt,Pt,Ut,Gt){Xt!==Pt?Gt.push({i:Ut.push(Ge(Ut)+"skewX(",null,rt)-2,x:M(Xt,Pt)}):Pt&&Ut.push(Ge(Ut)+"skewX("+Pt+rt)}function Ft(Xt,Pt,Ut,Gt,It,Ct){if(Xt!==Ut||Pt!==Gt){var lt=It.push(Ge(It)+"scale(",null,",",null,")");Ct.push({i:lt-4,x:M(Xt,Ut)},{i:lt-2,x:M(Pt,Gt)})}else(Ut!==1||Gt!==1)&&It.push(Ge(It)+"scale("+Ut+","+Gt+")")}return function(Xt,Pt){var Ut=[],Gt=[];return Xt=Te(Xt),Pt=Te(Pt),ze(Xt.translateX,Xt.translateY,Pt.translateX,Pt.translateY,Ut,Gt),We(Xt.rotate,Pt.rotate,Ut,Gt),mt(Xt.skewX,Pt.skewX,Ut,Gt),Ft(Xt.scaleX,Xt.scaleY,Pt.scaleX,Pt.scaleY,Ut,Gt),Xt=Pt=null,function(It){for(var Ct=-1,lt=Gt.length,dt;++Ct<lt;)Ut[(dt=Gt[Ct]).i]=dt.x(It);return Ut.join("")}}}var le=J(q,"px, ","px)","deg)"),fe=J(G,", ",")",")"),se=Math.SQRT2,V=2,Y=4,ne=1e-12;function te(Te){return((Te=Math.exp(Te))+1/Te)/2}function K(Te){return((Te=Math.exp(Te))-1/Te)/2}function $(Te){return((Te=Math.exp(2*Te))-1)/(Te+1)}function ae(Te,Ie){var Ze=Te[0],rt=Te[1],Ge=Te[2],ze=Ie[0],We=Ie[1],mt=Ie[2],Ft=ze-Ze,Xt=We-rt,Pt=Ft*Ft+Xt*Xt,Ut,Gt;if(Pt<ne)Gt=Math.log(mt/Ge)/se,Ut=function(Pe){return[Ze+Pe*Ft,rt+Pe*Xt,Ge*Math.exp(se*Pe*Gt)]};else{var It=Math.sqrt(Pt),Ct=(mt*mt-Ge*Ge+Y*Pt)/(2*Ge*V*It),lt=(mt*mt-Ge*Ge-Y*Pt)/(2*mt*V*It),dt=Math.log(Math.sqrt(Ct*Ct+1)-Ct),et=Math.log(Math.sqrt(lt*lt+1)-lt);Gt=(et-dt)/se,Ut=function(Pe){var Je=Pe*Gt,it=te(dt),ht=Ge/(V*It)*(it*$(se*Je+dt)-K(dt));return[Ze+ht*Ft,rt+ht*Xt,Ge*it/te(se*Je+dt)]}}return Ut.duration=Gt*1e3,Ut}function ie(Te){return function(Ie,Ze){var rt=Te((Ie=s.hsl(Ie)).h,(Ze=s.hsl(Ze)).h),Ge=l(Ie.s,Ze.s),ze=l(Ie.l,Ze.l),We=l(Ie.opacity,Ze.opacity);return function(mt){return Ie.h=rt(mt),Ie.s=Ge(mt),Ie.l=ze(mt),Ie.opacity=We(mt),Ie+""}}}var oe=ie(n),ue=ie(l);function xe(Te,Ie){var Ze=l((Te=s.lab(Te)).l,(Ie=s.lab(Ie)).l),rt=l(Te.a,Ie.a),Ge=l(Te.b,Ie.b),ze=l(Te.opacity,Ie.opacity);return function(We){return Te.l=Ze(We),Te.a=rt(We),Te.b=Ge(We),Te.opacity=ze(We),Te+""}}function he(Te){return function(Ie,Ze){var rt=Te((Ie=s.hcl(Ie)).h,(Ze=s.hcl(Ze)).h),Ge=l(Ie.c,Ze.c),ze=l(Ie.l,Ze.l),We=l(Ie.opacity,Ze.opacity);return function(mt){return Ie.h=rt(mt),Ie.c=Ge(mt),Ie.l=ze(mt),Ie.opacity=We(mt),Ie+""}}}var me=he(n),be=he(l);function Ce(Te){return function Ie(Ze){Ze=+Ze;function rt(Ge,ze){var We=Te((Ge=s.cubehelix(Ge)).h,(ze=s.cubehelix(ze)).h),mt=l(Ge.s,ze.s),Ft=l(Ge.l,ze.l),Xt=l(Ge.opacity,ze.opacity);return function(Pt){return Ge.h=We(Pt),Ge.s=mt(Pt),Ge.l=Ft(Math.pow(Pt,Ze)),Ge.opacity=Xt(Pt),Ge+""}}return rt.gamma=Ie,rt}(1)}var Se=Ce(n),Be=Ce(l);function Ye(Te,Ie){for(var Ze=0,rt=Ie.length-1,Ge=Ie[0],ze=new Array(rt<0?0:rt);Ze<rt;)ze[Ze]=Te(Ge,Ge=Ie[++Ze]);return function(We){var mt=Math.max(0,Math.min(rt-1,Math.floor(We*=rt)));return ze[mt](We-mt)}}function Xe(Te,Ie){for(var Ze=new Array(Ie),rt=0;rt<Ie;++rt)Ze[rt]=Te(rt/(Ie-1));return Ze}u.interpolate=k,u.interpolateArray=g,u.interpolateBasis=x,u.interpolateBasisClosed=t,u.interpolateCubehelix=Se,u.interpolateCubehelixLong=Be,u.interpolateDate=b,u.interpolateDiscrete=P,u.interpolateHcl=me,u.interpolateHclLong=be,u.interpolateHsl=oe,u.interpolateHslLong=ue,u.interpolateHue=O,u.interpolateLab=xe,u.interpolateNumber=M,u.interpolateNumberArray=p,u.interpolateObject=w,u.interpolateRgb=o,u.interpolateRgbBasis=v,u.interpolateRgbBasisClosed=d,u.interpolateRound=F,u.interpolateString=S,u.interpolateTransformCss=le,u.interpolateTransformSvg=fe,u.interpolateZoom=ae,u.piecewise=Ye,u.quantize=Xe,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){var s=Math.PI,m=2*s,x=1e-6,t=m-x;function i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function a(){return new i}i.prototype=a.prototype={constructor:i,moveTo:function(r,n){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,n){this._+="L"+(this._x1=+r)+","+(this._y1=+n)},quadraticCurveTo:function(r,n,f,l){this._+="Q"+ +r+","+ +n+","+(this._x1=+f)+","+(this._y1=+l)},bezierCurveTo:function(r,n,f,l,o,c){this._+="C"+ +r+","+ +n+","+ +f+","+ +l+","+(this._x1=+o)+","+(this._y1=+c)},arcTo:function(r,n,f,l,o){r=+r,n=+n,f=+f,l=+l,o=+o;var c=this._x1,v=this._y1,d=f-r,p=l-n,y=c-r,g=v-n,A=y*y+g*g;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=n);else if(A>x)if(!(Math.abs(g*d-p*y)>x)||!o)this._+="L"+(this._x1=r)+","+(this._y1=n);else{var b=f-c,M=l-v,w=d*d+p*p,T=b*b+M*M,_=Math.sqrt(w),h=Math.sqrt(A),L=o*Math.tan((s-Math.acos((w+A-T)/(2*_*h)))/2),S=L/h,k=L/_;Math.abs(S-1)>x&&(this._+="L"+(r+S*y)+","+(n+S*g)),this._+="A"+o+","+o+",0,0,"+ +(g*b>y*M)+","+(this._x1=r+k*d)+","+(this._y1=n+k*p)}},arc:function(r,n,f,l,o,c){r=+r,n=+n,f=+f,c=!!c;var v=f*Math.cos(l),d=f*Math.sin(l),p=r+v,y=n+d,g=1^c,A=c?l-o:o-l;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+p+","+y:(Math.abs(this._x1-p)>x||Math.abs(this._y1-y)>x)&&(this._+="L"+p+","+y),!!f&&(A<0&&(A=A%m+m),A>t?this._+="A"+f+","+f+",0,1,"+g+","+(r-v)+","+(n-d)+"A"+f+","+f+",0,1,"+g+","+(this._x1=p)+","+(this._y1=y):A>x&&(this._+="A"+f+","+f+",0,"+ +(A>=s)+","+g+","+(this._x1=r+f*Math.cos(o))+","+(this._y1=n+f*Math.sin(o))))},rect:function(r,n,f,l){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)+"h"+ +f+"v"+ +l+"h"+-f+"Z"},toString:function(){return this._}},u.path=a,Object.defineProperty(u,"__esModule",{value:!0})})},{}],118:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){function s(_){var h=+this._x.call(null,_),L=+this._y.call(null,_);return m(this.cover(h,L),h,L,_)}function m(_,h,L,S){if(isNaN(h)||isNaN(L))return _;var k,P=_._root,O={data:S},F=_._x0,D=_._y0,R=_._x1,U=_._y1,N,X,j,ee,q,G,J,le;if(!P)return _._root=O,_;for(;P.length;)if((q=h>=(N=(F+R)/2))?F=N:R=N,(G=L>=(X=(D+U)/2))?D=X:U=X,k=P,!(P=P[J=G<<1|q]))return k[J]=O,_;if(j=+_._x.call(null,P.data),ee=+_._y.call(null,P.data),h===j&&L===ee)return O.next=P,k?k[J]=O:_._root=O,_;do k=k?k[J]=new Array(4):_._root=new Array(4),(q=h>=(N=(F+R)/2))?F=N:R=N,(G=L>=(X=(D+U)/2))?D=X:U=X;while((J=G<<1|q)==(le=(ee>=X)<<1|j>=N));return k[le]=P,k[J]=O,_}function x(_){var h,L,S=_.length,k,P,O=new Array(S),F=new Array(S),D=1/0,R=1/0,U=-1/0,N=-1/0;for(L=0;L<S;++L)isNaN(k=+this._x.call(null,h=_[L]))||isNaN(P=+this._y.call(null,h))||(O[L]=k,F[L]=P,k<D&&(D=k),k>U&&(U=k),P<R&&(R=P),P>N&&(N=P));if(D>U||R>N)return this;for(this.cover(D,R).cover(U,N),L=0;L<S;++L)m(this,O[L],F[L],_[L]);return this}function t(_,h){if(isNaN(_=+_)||isNaN(h=+h))return this;var L=this._x0,S=this._y0,k=this._x1,P=this._y1;if(isNaN(L))k=(L=Math.floor(_))+1,P=(S=Math.floor(h))+1;else{for(var O=k-L,F=this._root,D,R;L>_||_>=k||S>h||h>=P;)switch(R=(h<S)<<1|_<L,D=new Array(4),D[R]=F,F=D,O*=2,R){case 0:k=L+O,P=S+O;break;case 1:L=k-O,P=S+O;break;case 2:k=L+O,S=P-O;break;case 3:L=k-O,S=P-O;break}this._root&&this._root.length&&(this._root=F)}return this._x0=L,this._y0=S,this._x1=k,this._y1=P,this}function i(){var _=[];return this.visit(function(h){if(!h.length)do _.push(h.data);while(h=h.next)}),_}function a(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function r(_,h,L,S,k){this.node=_,this.x0=h,this.y0=L,this.x1=S,this.y1=k}function n(_,h,L){var S,k=this._x0,P=this._y0,O,F,D,R,U=this._x1,N=this._y1,X=[],j=this._root,ee,q;for(j&&X.push(new r(j,k,P,U,N)),L==null?L=1/0:(k=_-L,P=h-L,U=_+L,N=h+L,L*=L);ee=X.pop();)if(!(!(j=ee.node)||(O=ee.x0)>U||(F=ee.y0)>N||(D=ee.x1)<k||(R=ee.y1)<P))if(j.length){var G=(O+D)/2,J=(F+R)/2;X.push(new r(j[3],G,J,D,R),new r(j[2],O,J,G,R),new r(j[1],G,F,D,J),new r(j[0],O,F,G,J)),(q=(h>=J)<<1|_>=G)&&(ee=X[X.length-1],X[X.length-1]=X[X.length-1-q],X[X.length-1-q]=ee)}else{var le=_-+this._x.call(null,j.data),fe=h-+this._y.call(null,j.data),se=le*le+fe*fe;if(se<L){var V=Math.sqrt(L=se);k=_-V,P=h-V,U=_+V,N=h+V,S=j.data}}return S}function f(_){if(isNaN(U=+this._x.call(null,_))||isNaN(N=+this._y.call(null,_)))return this;var h,L=this._root,S,k,P,O=this._x0,F=this._y0,D=this._x1,R=this._y1,U,N,X,j,ee,q,G,J;if(!L)return this;if(L.length)for(;;){if((ee=U>=(X=(O+D)/2))?O=X:D=X,(q=N>=(j=(F+R)/2))?F=j:R=j,h=L,!(L=L[G=q<<1|ee]))return this;if(!L.length)break;(h[G+1&3]||h[G+2&3]||h[G+3&3])&&(S=h,J=G)}for(;L.data!==_;)if(k=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,k?(P?k.next=P:delete k.next,this):h?(P?h[G]=P:delete h[G],(L=h[0]||h[1]||h[2]||h[3])&&L===(h[3]||h[2]||h[1]||h[0])&&!L.length&&(S?S[J]=L:this._root=L),this):(this._root=P,this)}function l(_){for(var h=0,L=_.length;h<L;++h)this.remove(_[h]);return this}function o(){return this._root}function c(){var _=0;return this.visit(function(h){if(!h.length)do++_;while(h=h.next)}),_}function v(_){var h=[],L,S=this._root,k,P,O,F,D;for(S&&h.push(new r(S,this._x0,this._y0,this._x1,this._y1));L=h.pop();)if(!_(S=L.node,P=L.x0,O=L.y0,F=L.x1,D=L.y1)&&S.length){var R=(P+F)/2,U=(O+D)/2;(k=S[3])&&h.push(new r(k,R,U,F,D)),(k=S[2])&&h.push(new r(k,P,U,R,D)),(k=S[1])&&h.push(new r(k,R,O,F,U)),(k=S[0])&&h.push(new r(k,P,O,R,U))}return this}function d(_){var h=[],L=[],S;for(this._root&&h.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));S=h.pop();){var k=S.node;if(k.length){var P,O=S.x0,F=S.y0,D=S.x1,R=S.y1,U=(O+D)/2,N=(F+R)/2;(P=k[0])&&h.push(new r(P,O,F,U,N)),(P=k[1])&&h.push(new r(P,U,F,D,N)),(P=k[2])&&h.push(new r(P,O,N,U,R)),(P=k[3])&&h.push(new r(P,U,N,D,R))}L.push(S)}for(;S=L.pop();)_(S.node,S.x0,S.y0,S.x1,S.y1);return this}function p(_){return _[0]}function y(_){return arguments.length?(this._x=_,this):this._x}function g(_){return _[1]}function A(_){return arguments.length?(this._y=_,this):this._y}function b(_,h,L){var S=new M(h==null?p:h,L==null?g:L,NaN,NaN,NaN,NaN);return _==null?S:S.addAll(_)}function M(_,h,L,S,k,P){this._x=_,this._y=h,this._x0=L,this._y0=S,this._x1=k,this._y1=P,this._root=void 0}function w(_){for(var h={data:_.data},L=h;_=_.next;)L=L.next={data:_.data};return h}var T=b.prototype=M.prototype;T.copy=function(){var _=new M(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root,L,S;if(!h)return _;if(!h.length)return _._root=w(h),_;for(L=[{source:h,target:_._root=new Array(4)}];h=L.pop();)for(var k=0;k<4;++k)(S=h.source[k])&&(S.length?L.push({source:S,target:h.target[k]=new Array(4)}):h.target[k]=w(S));return _},T.add=s,T.addAll=x,T.cover=t,T.data=i,T.extent=a,T.find=n,T.remove=f,T.removeAll=l,T.root=o,T.size=c,T.visit=v,T.visitAfter=d,T.x=y,T.y=A,u.quadtree=b,Object.defineProperty(u,"__esModule",{value:!0})})},{}],119:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B,e("d3-path")):(u=u||self,s(u.d3=u.d3||{},u.d3))})(this,function(u,s){function m(st){return function(){return st}}var x=Math.abs,t=Math.atan2,i=Math.cos,a=Math.max,r=Math.min,n=Math.sin,f=Math.sqrt,l=1e-12,o=Math.PI,c=o/2,v=2*o;function d(st){return st>1?0:st<-1?o:Math.acos(st)}function p(st){return st>=1?c:st<=-1?-c:Math.asin(st)}function y(st){return st.innerRadius}function g(st){return st.outerRadius}function A(st){return st.startAngle}function b(st){return st.endAngle}function M(st){return st&&st.padAngle}function w(st,Bt,ir,xr,Qr,Gr,Br,kr){var en=ir-st,Zn=xr-Bt,Hn=Br-Qr,da=kr-Gr,wa=da*en-Hn*Zn;if(!(wa*wa<l))return wa=(Hn*(Bt-Gr)-da*(st-Qr))/wa,[st+wa*en,Bt+wa*Zn]}function T(st,Bt,ir,xr,Qr,Gr,Br){var kr=st-ir,en=Bt-xr,Zn=(Br?Gr:-Gr)/f(kr*kr+en*en),Hn=Zn*en,da=-Zn*kr,wa=st+Hn,Va=Bt+da,Oa=ir+Hn,wr=xr+da,wn=(wa+Oa)/2,ln=(Va+wr)/2,jn=Oa-wa,Jn=wr-Va,La=jn*jn+Jn*Jn,ga=Qr-Gr,qn=wa*wr-Oa*Va,Ea=(Jn<0?-1:1)*f(a(0,ga*ga*La-qn*qn)),la=(qn*Jn-jn*Ea)/La,sr=(-qn*jn-Jn*Ea)/La,Hr=(qn*Jn+jn*Ea)/La,dn=(-qn*jn+Jn*Ea)/La,hn=la-wn,Sn=sr-ln,Rn=Hr-wn,Mn=dn-ln;return hn*hn+Sn*Sn>Rn*Rn+Mn*Mn&&(la=Hr,sr=dn),{cx:la,cy:sr,x01:-Hn,y01:-da,x11:la*(Qr/ga-1),y11:sr*(Qr/ga-1)}}function _(){var st=y,Bt=g,ir=m(0),xr=null,Qr=A,Gr=b,Br=M,kr=null;function en(){var Zn,Hn,da=+st.apply(this,arguments),wa=+Bt.apply(this,arguments),Va=Qr.apply(this,arguments)-c,Oa=Gr.apply(this,arguments)-c,wr=x(Oa-Va),wn=Oa>Va;if(kr||(kr=Zn=s.path()),wa<da&&(Hn=wa,wa=da,da=Hn),!(wa>l))kr.moveTo(0,0);else if(wr>v-l)kr.moveTo(wa*i(Va),wa*n(Va)),kr.arc(0,0,wa,Va,Oa,!wn),da>l&&(kr.moveTo(da*i(Oa),da*n(Oa)),kr.arc(0,0,da,Oa,Va,wn));else{var ln=Va,jn=Oa,Jn=Va,La=Oa,ga=wr,qn=wr,Ea=Br.apply(this,arguments)/2,la=Ea>l&&(xr?+xr.apply(this,arguments):f(da*da+wa*wa)),sr=r(x(wa-da)/2,+ir.apply(this,arguments)),Hr=sr,dn=sr,hn,Sn;if(la>l){var Rn=p(la/da*n(Ea)),Mn=p(la/wa*n(Ea));(ga-=Rn*2)>l?(Rn*=wn?1:-1,Jn+=Rn,La-=Rn):(ga=0,Jn=La=(Va+Oa)/2),(qn-=Mn*2)>l?(Mn*=wn?1:-1,ln+=Mn,jn-=Mn):(qn=0,ln=jn=(Va+Oa)/2)}var mr=wa*i(ln),hr=wa*n(ln),Fr=da*i(La),nn=da*n(La);if(sr>l){var On=wa*i(jn),ra=wa*n(jn),ua=da*i(Jn),$n=da*n(Jn),Qn;if(wr<o&&(Qn=w(mr,hr,ua,$n,On,ra,Fr,nn))){var kn=mr-Qn[0],Wn=hr-Qn[1],aa=On-Qn[0],Ma=ra-Qn[1],ui=1/n(d((kn*aa+Wn*Ma)/(f(kn*kn+Wn*Wn)*f(aa*aa+Ma*Ma)))/2),Na=f(Qn[0]*Qn[0]+Qn[1]*Qn[1]);Hr=r(sr,(da-Na)/(ui-1)),dn=r(sr,(wa-Na)/(ui+1))}}qn>l?dn>l?(hn=T(ua,$n,mr,hr,wa,dn,wn),Sn=T(On,ra,Fr,nn,wa,dn,wn),kr.moveTo(hn.cx+hn.x01,hn.cy+hn.y01),dn<sr?kr.arc(hn.cx,hn.cy,dn,t(hn.y01,hn.x01),t(Sn.y01,Sn.x01),!wn):(kr.arc(hn.cx,hn.cy,dn,t(hn.y01,hn.x01),t(hn.y11,hn.x11),!wn),kr.arc(0,0,wa,t(hn.cy+hn.y11,hn.cx+hn.x11),t(Sn.cy+Sn.y11,Sn.cx+Sn.x11),!wn),kr.arc(Sn.cx,Sn.cy,dn,t(Sn.y11,Sn.x11),t(Sn.y01,Sn.x01),!wn))):(kr.moveTo(mr,hr),kr.arc(0,0,wa,ln,jn,!wn)):kr.moveTo(mr,hr),!(da>l)||!(ga>l)?kr.lineTo(Fr,nn):Hr>l?(hn=T(Fr,nn,On,ra,da,-Hr,wn),Sn=T(mr,hr,ua,$n,da,-Hr,wn),kr.lineTo(hn.cx+hn.x01,hn.cy+hn.y01),Hr<sr?kr.arc(hn.cx,hn.cy,Hr,t(hn.y01,hn.x01),t(Sn.y01,Sn.x01),!wn):(kr.arc(hn.cx,hn.cy,Hr,t(hn.y01,hn.x01),t(hn.y11,hn.x11),!wn),kr.arc(0,0,da,t(hn.cy+hn.y11,hn.cx+hn.x11),t(Sn.cy+Sn.y11,Sn.cx+Sn.x11),wn),kr.arc(Sn.cx,Sn.cy,Hr,t(Sn.y11,Sn.x11),t(Sn.y01,Sn.x01),!wn))):kr.arc(0,0,da,La,Jn,wn)}if(kr.closePath(),Zn)return kr=null,Zn+""||null}return en.centroid=function(){var Zn=(+st.apply(this,arguments)+ +Bt.apply(this,arguments))/2,Hn=(+Qr.apply(this,arguments)+ +Gr.apply(this,arguments))/2-o/2;return[i(Hn)*Zn,n(Hn)*Zn]},en.innerRadius=function(Zn){return arguments.length?(st=typeof Zn=="function"?Zn:m(+Zn),en):st},en.outerRadius=function(Zn){return arguments.length?(Bt=typeof Zn=="function"?Zn:m(+Zn),en):Bt},en.cornerRadius=function(Zn){return arguments.length?(ir=typeof Zn=="function"?Zn:m(+Zn),en):ir},en.padRadius=function(Zn){return arguments.length?(xr=Zn==null?null:typeof Zn=="function"?Zn:m(+Zn),en):xr},en.startAngle=function(Zn){return arguments.length?(Qr=typeof Zn=="function"?Zn:m(+Zn),en):Qr},en.endAngle=function(Zn){return arguments.length?(Gr=typeof Zn=="function"?Zn:m(+Zn),en):Gr},en.padAngle=function(Zn){return arguments.length?(Br=typeof Zn=="function"?Zn:m(+Zn),en):Br},en.context=function(Zn){return arguments.length?(kr=Zn==null?null:Zn,en):kr},en}function h(st){this._context=st}h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(st,Bt){switch(st=+st,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(st,Bt):this._context.moveTo(st,Bt);break;case 1:this._point=2;default:this._context.lineTo(st,Bt);break}}};function L(st){return new h(st)}function S(st){return st[0]}function k(st){return st[1]}function P(){var st=S,Bt=k,ir=m(!0),xr=null,Qr=L,Gr=null;function Br(kr){var en,Zn=kr.length,Hn,da=!1,wa;for(xr==null&&(Gr=Qr(wa=s.path())),en=0;en<=Zn;++en)!(en<Zn&&ir(Hn=kr[en],en,kr))===da&&((da=!da)?Gr.lineStart():Gr.lineEnd()),da&&Gr.point(+st(Hn,en,kr),+Bt(Hn,en,kr));if(wa)return Gr=null,wa+""||null}return Br.x=function(kr){return arguments.length?(st=typeof kr=="function"?kr:m(+kr),Br):st},Br.y=function(kr){return arguments.length?(Bt=typeof kr=="function"?kr:m(+kr),Br):Bt},Br.defined=function(kr){return arguments.length?(ir=typeof kr=="function"?kr:m(!!kr),Br):ir},Br.curve=function(kr){return arguments.length?(Qr=kr,xr!=null&&(Gr=Qr(xr)),Br):Qr},Br.context=function(kr){return arguments.length?(kr==null?xr=Gr=null:Gr=Qr(xr=kr),Br):xr},Br}function O(){var st=S,Bt=null,ir=m(0),xr=k,Qr=m(!0),Gr=null,Br=L,kr=null;function en(Hn){var da,wa,Va,Oa=Hn.length,wr,wn=!1,ln,jn=new Array(Oa),Jn=new Array(Oa);for(Gr==null&&(kr=Br(ln=s.path())),da=0;da<=Oa;++da){if(!(da<Oa&&Qr(wr=Hn[da],da,Hn))===wn)if(wn=!wn)wa=da,kr.areaStart(),kr.lineStart();else{for(kr.lineEnd(),kr.lineStart(),Va=da-1;Va>=wa;--Va)kr.point(jn[Va],Jn[Va]);kr.lineEnd(),kr.areaEnd()}wn&&(jn[da]=+st(wr,da,Hn),Jn[da]=+ir(wr,da,Hn),kr.point(Bt?+Bt(wr,da,Hn):jn[da],xr?+xr(wr,da,Hn):Jn[da]))}if(ln)return kr=null,ln+""||null}function Zn(){return P().defined(Qr).curve(Br).context(Gr)}return en.x=function(Hn){return arguments.length?(st=typeof Hn=="function"?Hn:m(+Hn),Bt=null,en):st},en.x0=function(Hn){return arguments.length?(st=typeof Hn=="function"?Hn:m(+Hn),en):st},en.x1=function(Hn){return arguments.length?(Bt=Hn==null?null:typeof Hn=="function"?Hn:m(+Hn),en):Bt},en.y=function(Hn){return arguments.length?(ir=typeof Hn=="function"?Hn:m(+Hn),xr=null,en):ir},en.y0=function(Hn){return arguments.length?(ir=typeof Hn=="function"?Hn:m(+Hn),en):ir},en.y1=function(Hn){return arguments.length?(xr=Hn==null?null:typeof Hn=="function"?Hn:m(+Hn),en):xr},en.lineX0=en.lineY0=function(){return Zn().x(st).y(ir)},en.lineY1=function(){return Zn().x(st).y(xr)},en.lineX1=function(){return Zn().x(Bt).y(ir)},en.defined=function(Hn){return arguments.length?(Qr=typeof Hn=="function"?Hn:m(!!Hn),en):Qr},en.curve=function(Hn){return arguments.length?(Br=Hn,Gr!=null&&(kr=Br(Gr)),en):Br},en.context=function(Hn){return arguments.length?(Hn==null?Gr=kr=null:kr=Br(Gr=Hn),en):Gr},en}function F(st,Bt){return Bt<st?-1:Bt>st?1:Bt>=st?0:NaN}function D(st){return st}function R(){var st=D,Bt=F,ir=null,xr=m(0),Qr=m(v),Gr=m(0);function Br(kr){var en,Zn=kr.length,Hn,da,wa=0,Va=new Array(Zn),Oa=new Array(Zn),wr=+xr.apply(this,arguments),wn=Math.min(v,Math.max(-v,Qr.apply(this,arguments)-wr)),ln,jn=Math.min(Math.abs(wn)/Zn,Gr.apply(this,arguments)),Jn=jn*(wn<0?-1:1),La;for(en=0;en<Zn;++en)(La=Oa[Va[en]=en]=+st(kr[en],en,kr))>0&&(wa+=La);for(Bt!=null?Va.sort(function(ga,qn){return Bt(Oa[ga],Oa[qn])}):ir!=null&&Va.sort(function(ga,qn){return ir(kr[ga],kr[qn])}),en=0,da=wa?(wn-Zn*Jn)/wa:0;en<Zn;++en,wr=ln)Hn=Va[en],La=Oa[Hn],ln=wr+(La>0?La*da:0)+Jn,Oa[Hn]={data:kr[Hn],index:en,value:La,startAngle:wr,endAngle:ln,padAngle:jn};return Oa}return Br.value=function(kr){return arguments.length?(st=typeof kr=="function"?kr:m(+kr),Br):st},Br.sortValues=function(kr){return arguments.length?(Bt=kr,ir=null,Br):Bt},Br.sort=function(kr){return arguments.length?(ir=kr,Bt=null,Br):ir},Br.startAngle=function(kr){return arguments.length?(xr=typeof kr=="function"?kr:m(+kr),Br):xr},Br.endAngle=function(kr){return arguments.length?(Qr=typeof kr=="function"?kr:m(+kr),Br):Qr},Br.padAngle=function(kr){return arguments.length?(Gr=typeof kr=="function"?kr:m(+kr),Br):Gr},Br}var U=X(L);function N(st){this._curve=st}N.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(st,Bt){this._curve.point(Bt*Math.sin(st),Bt*-Math.cos(st))}};function X(st){function Bt(ir){return new N(st(ir))}return Bt._curve=st,Bt}function j(st){var Bt=st.curve;return st.angle=st.x,delete st.x,st.radius=st.y,delete st.y,st.curve=function(ir){return arguments.length?Bt(X(ir)):Bt()._curve},st}function ee(){return j(P().curve(U))}function q(){var st=O().curve(U),Bt=st.curve,ir=st.lineX0,xr=st.lineX1,Qr=st.lineY0,Gr=st.lineY1;return st.angle=st.x,delete st.x,st.startAngle=st.x0,delete st.x0,st.endAngle=st.x1,delete st.x1,st.radius=st.y,delete st.y,st.innerRadius=st.y0,delete st.y0,st.outerRadius=st.y1,delete st.y1,st.lineStartAngle=function(){return j(ir())},delete st.lineX0,st.lineEndAngle=function(){return j(xr())},delete st.lineX1,st.lineInnerRadius=function(){return j(Qr())},delete st.lineY0,st.lineOuterRadius=function(){return j(Gr())},delete st.lineY1,st.curve=function(Br){return arguments.length?Bt(X(Br)):Bt()._curve},st}function G(st,Bt){return[(Bt=+Bt)*Math.cos(st-=Math.PI/2),Bt*Math.sin(st)]}var J=Array.prototype.slice;function le(st){return st.source}function fe(st){return st.target}function se(st){var Bt=le,ir=fe,xr=S,Qr=k,Gr=null;function Br(){var kr,en=J.call(arguments),Zn=Bt.apply(this,en),Hn=ir.apply(this,en);if(Gr||(Gr=kr=s.path()),st(Gr,+xr.apply(this,(en[0]=Zn,en)),+Qr.apply(this,en),+xr.apply(this,(en[0]=Hn,en)),+Qr.apply(this,en)),kr)return Gr=null,kr+""||null}return Br.source=function(kr){return arguments.length?(Bt=kr,Br):Bt},Br.target=function(kr){return arguments.length?(ir=kr,Br):ir},Br.x=function(kr){return arguments.length?(xr=typeof kr=="function"?kr:m(+kr),Br):xr},Br.y=function(kr){return arguments.length?(Qr=typeof kr=="function"?kr:m(+kr),Br):Qr},Br.context=function(kr){return arguments.length?(Gr=kr==null?null:kr,Br):Gr},Br}function V(st,Bt,ir,xr,Qr){st.moveTo(Bt,ir),st.bezierCurveTo(Bt=(Bt+xr)/2,ir,Bt,Qr,xr,Qr)}function Y(st,Bt,ir,xr,Qr){st.moveTo(Bt,ir),st.bezierCurveTo(Bt,ir=(ir+Qr)/2,xr,ir,xr,Qr)}function ne(st,Bt,ir,xr,Qr){var Gr=G(Bt,ir),Br=G(Bt,ir=(ir+Qr)/2),kr=G(xr,ir),en=G(xr,Qr);st.moveTo(Gr[0],Gr[1]),st.bezierCurveTo(Br[0],Br[1],kr[0],kr[1],en[0],en[1])}function te(){return se(V)}function K(){return se(Y)}function $(){var st=se(ne);return st.angle=st.x,delete st.x,st.radius=st.y,delete st.y,st}var ae={draw:function(st,Bt){var ir=Math.sqrt(Bt/o);st.moveTo(ir,0),st.arc(0,0,ir,0,v)}},ie={draw:function(st,Bt){var ir=Math.sqrt(Bt/5)/2;st.moveTo(-3*ir,-ir),st.lineTo(-ir,-ir),st.lineTo(-ir,-3*ir),st.lineTo(ir,-3*ir),st.lineTo(ir,-ir),st.lineTo(3*ir,-ir),st.lineTo(3*ir,ir),st.lineTo(ir,ir),st.lineTo(ir,3*ir),st.lineTo(-ir,3*ir),st.lineTo(-ir,ir),st.lineTo(-3*ir,ir),st.closePath()}},oe=Math.sqrt(1/3),ue=oe*2,xe={draw:function(st,Bt){var ir=Math.sqrt(Bt/ue),xr=ir*oe;st.moveTo(0,-ir),st.lineTo(xr,0),st.lineTo(0,ir),st.lineTo(-xr,0),st.closePath()}},he=.8908130915292852,me=Math.sin(o/10)/Math.sin(7*o/10),be=Math.sin(v/10)*me,Ce=-Math.cos(v/10)*me,Se={draw:function(st,Bt){var ir=Math.sqrt(Bt*he),xr=be*ir,Qr=Ce*ir;st.moveTo(0,-ir),st.lineTo(xr,Qr);for(var Gr=1;Gr<5;++Gr){var Br=v*Gr/5,kr=Math.cos(Br),en=Math.sin(Br);st.lineTo(en*ir,-kr*ir),st.lineTo(kr*xr-en*Qr,en*xr+kr*Qr)}st.closePath()}},Be={draw:function(st,Bt){var ir=Math.sqrt(Bt),xr=-ir/2;st.rect(xr,xr,ir,ir)}},Ye=Math.sqrt(3),Xe={draw:function(st,Bt){var ir=-Math.sqrt(Bt/(Ye*3));st.moveTo(0,ir*2),st.lineTo(-Ye*ir,-ir),st.lineTo(Ye*ir,-ir),st.closePath()}},Te=-.5,Ie=Math.sqrt(3)/2,Ze=1/Math.sqrt(12),rt=(Ze/2+1)*3,Ge={draw:function(st,Bt){var ir=Math.sqrt(Bt/rt),xr=ir/2,Qr=ir*Ze,Gr=xr,Br=ir*Ze+ir,kr=-Gr,en=Br;st.moveTo(xr,Qr),st.lineTo(Gr,Br),st.lineTo(kr,en),st.lineTo(Te*xr-Ie*Qr,Ie*xr+Te*Qr),st.lineTo(Te*Gr-Ie*Br,Ie*Gr+Te*Br),st.lineTo(Te*kr-Ie*en,Ie*kr+Te*en),st.lineTo(Te*xr+Ie*Qr,Te*Qr-Ie*xr),st.lineTo(Te*Gr+Ie*Br,Te*Br-Ie*Gr),st.lineTo(Te*kr+Ie*en,Te*en-Ie*kr),st.closePath()}},ze=[ae,ie,xe,Be,Se,Xe,Ge];function We(){var st=m(ae),Bt=m(64),ir=null;function xr(){var Qr;if(ir||(ir=Qr=s.path()),st.apply(this,arguments).draw(ir,+Bt.apply(this,arguments)),Qr)return ir=null,Qr+""||null}return xr.type=function(Qr){return arguments.length?(st=typeof Qr=="function"?Qr:m(Qr),xr):st},xr.size=function(Qr){return arguments.length?(Bt=typeof Qr=="function"?Qr:m(+Qr),xr):Bt},xr.context=function(Qr){return arguments.length?(ir=Qr==null?null:Qr,xr):ir},xr}function mt(){}function Ft(st,Bt,ir){st._context.bezierCurveTo((2*st._x0+st._x1)/3,(2*st._y0+st._y1)/3,(st._x0+2*st._x1)/3,(st._y0+2*st._y1)/3,(st._x0+4*st._x1+Bt)/6,(st._y0+4*st._y1+ir)/6)}function Xt(st){this._context=st}Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ft(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(st,Bt){switch(st=+st,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(st,Bt):this._context.moveTo(st,Bt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ft(this,st,Bt);break}this._x0=this._x1,this._x1=st,this._y0=this._y1,this._y1=Bt}};function Pt(st){return new Xt(st)}function Ut(st){this._context=st}Ut.prototype={areaStart:mt,areaEnd:mt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(st,Bt){switch(st=+st,Bt=+Bt,this._point){case 0:this._point=1,this._x2=st,this._y2=Bt;break;case 1:this._point=2,this._x3=st,this._y3=Bt;break;case 2:this._point=3,this._x4=st,this._y4=Bt,this._context.moveTo((this._x0+4*this._x1+st)/6,(this._y0+4*this._y1+Bt)/6);break;default:Ft(this,st,Bt);break}this._x0=this._x1,this._x1=st,this._y0=this._y1,this._y1=Bt}};function Gt(st){return new Ut(st)}function It(st){this._context=st}It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(st,Bt){switch(st=+st,Bt=+Bt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var ir=(this._x0+4*this._x1+st)/6,xr=(this._y0+4*this._y1+Bt)/6;this._line?this._context.lineTo(ir,xr):this._context.moveTo(ir,xr);break;case 3:this._point=4;default:Ft(this,st,Bt);break}this._x0=this._x1,this._x1=st,this._y0=this._y1,this._y1=Bt}};function Ct(st){return new It(st)}function lt(st,Bt){this._basis=new Xt(st),this._beta=Bt}lt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var st=this._x,Bt=this._y,ir=st.length-1;if(ir>0)for(var xr=st[0],Qr=Bt[0],Gr=st[ir]-xr,Br=Bt[ir]-Qr,kr=-1,en;++kr<=ir;)en=kr/ir,this._basis.point(this._beta*st[kr]+(1-this._beta)*(xr+en*Gr),this._beta*Bt[kr]+(1-this._beta)*(Qr+en*Br));this._x=this._y=null,this._basis.lineEnd()},point:function(st,Bt){this._x.push(+st),this._y.push(+Bt)}};var dt=function st(Bt){function ir(xr){return Bt===1?new Xt(xr):new lt(xr,Bt)}return ir.beta=function(xr){return st(+xr)},ir}(.85);function et(st,Bt,ir){st._context.bezierCurveTo(st._x1+st._k*(st._x2-st._x0),st._y1+st._k*(st._y2-st._y0),st._x2+st._k*(st._x1-Bt),st._y2+st._k*(st._y1-ir),st._x2,st._y2)}function Pe(st,Bt){this._context=st,this._k=(1-Bt)/6}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:et(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(st,Bt){switch(st=+st,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(st,Bt):this._context.moveTo(st,Bt);break;case 1:this._point=2,this._x1=st,this._y1=Bt;break;case 2:this._point=3;default:et(this,st,Bt);break}this._x0=this._x1,this._x1=this._x2,this._x2=st,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var Je=function st(Bt){function ir(xr){return new Pe(xr,Bt)}return ir.tension=function(xr){return st(+xr)},ir}(0);function it(st,Bt){this._context=st,this._k=(1-Bt)/6}it.prototype={areaStart:mt,areaEnd:mt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(st,Bt){switch(st=+st,Bt=+Bt,this._point){case 0:this._point=1,this._x3=st,this._y3=Bt;break;case 1:this._point=2,this._context.moveTo(this._x4=st,this._y4=Bt);break;case 2:this._point=3,this._x5=st,this._y5=Bt;break;default:et(this,st,Bt);break}this._x0=this._x1,this._x1=this._x2,this._x2=st,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var ht=function st(Bt){function ir(xr){return new it(xr,Bt)}return ir.tension=function(xr){return st(+xr)},ir}(0);function zt(st,Bt){this._context=st,this._k=(1-Bt)/6}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(st,Bt){switch(st=+st,Bt=+Bt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:et(this,st,Bt);break}this._x0=this._x1,this._x1=this._x2,this._x2=st,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var Lt=function st(Bt){function ir(xr){return new zt(xr,Bt)}return ir.tension=function(xr){return st(+xr)},ir}(0);function Vt(st,Bt,ir){var xr=st._x1,Qr=st._y1,Gr=st._x2,Br=st._y2;if(st._l01_a>l){var kr=2*st._l01_2a+3*st._l01_a*st._l12_a+st._l12_2a,en=3*st._l01_a*(st._l01_a+st._l12_a);xr=(xr*kr-st._x0*st._l12_2a+st._x2*st._l01_2a)/en,Qr=(Qr*kr-st._y0*st._l12_2a+st._y2*st._l01_2a)/en}if(st._l23_a>l){var Zn=2*st._l23_2a+3*st._l23_a*st._l12_a+st._l12_2a,Hn=3*st._l23_a*(st._l23_a+st._l12_a);Gr=(Gr*Zn+st._x1*st._l23_2a-Bt*st._l12_2a)/Hn,Br=(Br*Zn+st._y1*st._l23_2a-ir*st._l12_2a)/Hn}st._context.bezierCurveTo(xr,Qr,Gr,Br,st._x2,st._y2)}function $t(st,Bt){this._context=st,this._alpha=Bt}$t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(st,Bt){if(st=+st,Bt=+Bt,this._point){var ir=this._x2-st,xr=this._y2-Bt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ir*ir+xr*xr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(st,Bt):this._context.moveTo(st,Bt);break;case 1:this._point=2;break;case 2:this._point=3;default:Vt(this,st,Bt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=st,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var Ht=function st(Bt){function ir(xr){return Bt?new $t(xr,Bt):new Pe(xr,0)}return ir.alpha=function(xr){return st(+xr)},ir}(.5);function tr(st,Bt){this._context=st,this._alpha=Bt}tr.prototype={areaStart:mt,areaEnd:mt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(st,Bt){if(st=+st,Bt=+Bt,this._point){var ir=this._x2-st,xr=this._y2-Bt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ir*ir+xr*xr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=st,this._y3=Bt;break;case 1:this._point=2,this._context.moveTo(this._x4=st,this._y4=Bt);break;case 2:this._point=3,this._x5=st,this._y5=Bt;break;default:Vt(this,st,Bt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=st,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var qe=function st(Bt){function ir(xr){return Bt?new tr(xr,Bt):new it(xr,0)}return ir.alpha=function(xr){return st(+xr)},ir}(.5);function xt(st,Bt){this._context=st,this._alpha=Bt}xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(st,Bt){if(st=+st,Bt=+Bt,this._point){var ir=this._x2-st,xr=this._y2-Bt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ir*ir+xr*xr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vt(this,st,Bt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=st,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var Rt=function st(Bt){function ir(xr){return Bt?new xt(xr,Bt):new zt(xr,0)}return ir.alpha=function(xr){return st(+xr)},ir}(.5);function fr(st){this._context=st}fr.prototype={areaStart:mt,areaEnd:mt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(st,Bt){st=+st,Bt=+Bt,this._point?this._context.lineTo(st,Bt):(this._point=1,this._context.moveTo(st,Bt))}};function br(st){return new fr(st)}function pr(st){return st<0?-1:1}function Tr(st,Bt,ir){var xr=st._x1-st._x0,Qr=Bt-st._x1,Gr=(st._y1-st._y0)/(xr||Qr<0&&-0),Br=(ir-st._y1)/(Qr||xr<0&&-0),kr=(Gr*Qr+Br*xr)/(xr+Qr);return(pr(Gr)+pr(Br))*Math.min(Math.abs(Gr),Math.abs(Br),.5*Math.abs(kr))||0}function Nr(st,Bt){var ir=st._x1-st._x0;return ir?(3*(st._y1-st._y0)/ir-Bt)/2:Bt}function Ir(st,Bt,ir){var xr=st._x0,Qr=st._y0,Gr=st._x1,Br=st._y1,kr=(Gr-xr)/3;st._context.bezierCurveTo(xr+kr,Qr+kr*Bt,Gr-kr,Br-kr*ir,Gr,Br)}function lr(st){this._context=st}lr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ir(this,this._t0,Nr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(st,Bt){var ir=NaN;if(st=+st,Bt=+Bt,!(st===this._x1&&Bt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(st,Bt):this._context.moveTo(st,Bt);break;case 1:this._point=2;break;case 2:this._point=3,Ir(this,Nr(this,ir=Tr(this,st,Bt)),ir);break;default:Ir(this,this._t0,ir=Tr(this,st,Bt));break}this._x0=this._x1,this._x1=st,this._y0=this._y1,this._y1=Bt,this._t0=ir}}};function Yr(st){this._context=new nt(st)}(Yr.prototype=Object.create(lr.prototype)).point=function(st,Bt){lr.prototype.point.call(this,Bt,st)};function nt(st){this._context=st}nt.prototype={moveTo:function(st,Bt){this._context.moveTo(Bt,st)},closePath:function(){this._context.closePath()},lineTo:function(st,Bt){this._context.lineTo(Bt,st)},bezierCurveTo:function(st,Bt,ir,xr,Qr,Gr){this._context.bezierCurveTo(Bt,st,xr,ir,Gr,Qr)}};function Ae(st){return new lr(st)}function Ee(st){return new Yr(st)}function Fe(st){this._context=st}Fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var st=this._x,Bt=this._y,ir=st.length;if(ir)if(this._line?this._context.lineTo(st[0],Bt[0]):this._context.moveTo(st[0],Bt[0]),ir===2)this._context.lineTo(st[1],Bt[1]);else for(var xr=Ke(st),Qr=Ke(Bt),Gr=0,Br=1;Br<ir;++Gr,++Br)this._context.bezierCurveTo(xr[0][Gr],Qr[0][Gr],xr[1][Gr],Qr[1][Gr],st[Br],Bt[Br]);(this._line||this._line!==0&&ir===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(st,Bt){this._x.push(+st),this._y.push(+Bt)}};function Ke(st){var Bt,ir=st.length-1,xr,Qr=new Array(ir),Gr=new Array(ir),Br=new Array(ir);for(Qr[0]=0,Gr[0]=2,Br[0]=st[0]+2*st[1],Bt=1;Bt<ir-1;++Bt)Qr[Bt]=1,Gr[Bt]=4,Br[Bt]=4*st[Bt]+2*st[Bt+1];for(Qr[ir-1]=2,Gr[ir-1]=7,Br[ir-1]=8*st[ir-1]+st[ir],Bt=1;Bt<ir;++Bt)xr=Qr[Bt]/Gr[Bt-1],Gr[Bt]-=xr,Br[Bt]-=xr*Br[Bt-1];for(Qr[ir-1]=Br[ir-1]/Gr[ir-1],Bt=ir-2;Bt>=0;--Bt)Qr[Bt]=(Br[Bt]-Qr[Bt+1])/Gr[Bt];for(Gr[ir-1]=(st[ir]+Qr[ir-1])/2,Bt=0;Bt<ir-1;++Bt)Gr[Bt]=2*st[Bt+1]-Qr[Bt+1];return[Qr,Gr]}function tt(st){return new Fe(st)}function ut(st,Bt){this._context=st,this._t=Bt}ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(st,Bt){switch(st=+st,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(st,Bt):this._context.moveTo(st,Bt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Bt),this._context.lineTo(st,Bt);else{var ir=this._x*(1-this._t)+st*this._t;this._context.lineTo(ir,this._y),this._context.lineTo(ir,Bt)}break}}this._x=st,this._y=Bt}};function ct(st){return new ut(st,.5)}function yt(st){return new ut(st,0)}function kt(st){return new ut(st,1)}function jt(st,Bt){if((Br=st.length)>1)for(var ir=1,xr,Qr,Gr=st[Bt[0]],Br,kr=Gr.length;ir<Br;++ir)for(Qr=Gr,Gr=st[Bt[ir]],xr=0;xr<kr;++xr)Gr[xr][1]+=Gr[xr][0]=isNaN(Qr[xr][1])?Qr[xr][0]:Qr[xr][1]}function Mr(st){for(var Bt=st.length,ir=new Array(Bt);--Bt>=0;)ir[Bt]=Bt;return ir}function Sr(st,Bt){return st[Bt]}function Lr(){var st=m([]),Bt=Mr,ir=jt,xr=Sr;function Qr(Gr){var Br=st.apply(this,arguments),kr,en=Gr.length,Zn=Br.length,Hn=new Array(Zn),da;for(kr=0;kr<Zn;++kr){for(var wa=Br[kr],Va=Hn[kr]=new Array(en),Oa=0,wr;Oa<en;++Oa)Va[Oa]=wr=[0,+xr(Gr[Oa],wa,Oa,Gr)],wr.data=Gr[Oa];Va.key=wa}for(kr=0,da=Bt(Hn);kr<Zn;++kr)Hn[da[kr]].index=kr;return ir(Hn,da),Hn}return Qr.keys=function(Gr){return arguments.length?(st=typeof Gr=="function"?Gr:m(J.call(Gr)),Qr):st},Qr.value=function(Gr){return arguments.length?(xr=typeof Gr=="function"?Gr:m(+Gr),Qr):xr},Qr.order=function(Gr){return arguments.length?(Bt=Gr==null?Mr:typeof Gr=="function"?Gr:m(J.call(Gr)),Qr):Bt},Qr.offset=function(Gr){return arguments.length?(ir=Gr==null?jt:Gr,Qr):ir},Qr}function Ar(st,Bt){if((xr=st.length)>0){for(var ir,xr,Qr=0,Gr=st[0].length,Br;Qr<Gr;++Qr){for(Br=ir=0;ir<xr;++ir)Br+=st[ir][Qr][1]||0;if(Br)for(ir=0;ir<xr;++ir)st[ir][Qr][1]/=Br}jt(st,Bt)}}function Ur(st,Bt){if((en=st.length)>0)for(var ir,xr=0,Qr,Gr,Br,kr,en,Zn=st[Bt[0]].length;xr<Zn;++xr)for(Br=kr=0,ir=0;ir<en;++ir)(Gr=(Qr=st[Bt[ir]][xr])[1]-Qr[0])>0?(Qr[0]=Br,Qr[1]=Br+=Gr):Gr<0?(Qr[1]=kr,Qr[0]=kr+=Gr):(Qr[0]=0,Qr[1]=Gr)}function fn(st,Bt){if((Qr=st.length)>0){for(var ir=0,xr=st[Bt[0]],Qr,Gr=xr.length;ir<Gr;++ir){for(var Br=0,kr=0;Br<Qr;++Br)kr+=st[Br][ir][1]||0;xr[ir][1]+=xr[ir][0]=-kr/2}jt(st,Bt)}}function Cr(st,Bt){if(!(!((Br=st.length)>0)||!((Gr=(Qr=st[Bt[0]]).length)>0))){for(var ir=0,xr=1,Qr,Gr,Br;xr<Gr;++xr){for(var kr=0,en=0,Zn=0;kr<Br;++kr){for(var Hn=st[Bt[kr]],da=Hn[xr][1]||0,wa=Hn[xr-1][1]||0,Va=(da-wa)/2,Oa=0;Oa<kr;++Oa){var wr=st[Bt[Oa]],wn=wr[xr][1]||0,ln=wr[xr-1][1]||0;Va+=wn-ln}en+=da,Zn+=Va*da}Qr[xr-1][1]+=Qr[xr-1][0]=ir,en&&(ir-=Zn/en)}Qr[xr-1][1]+=Qr[xr-1][0]=ir,jt(st,Bt)}}function _r(st){var Bt=st.map(En);return Mr(st).sort(function(ir,xr){return Bt[ir]-Bt[xr]})}function En(st){for(var Bt=-1,ir=0,xr=st.length,Qr,Gr=-1/0;++Bt<xr;)(Qr=+st[Bt][1])>Gr&&(Gr=Qr,ir=Bt);return ir}function Jr(st){var Bt=st.map(Pr);return Mr(st).sort(function(ir,xr){return Bt[ir]-Bt[xr]})}function Pr(st){for(var Bt=0,ir=-1,xr=st.length,Qr;++ir<xr;)(Qr=+st[ir][1])&&(Bt+=Qr);return Bt}function vn(st){return Jr(st).reverse()}function xn(st){var Bt=st.length,ir,xr,Qr=st.map(Pr),Gr=_r(st),Br=0,kr=0,en=[],Zn=[];for(ir=0;ir<Bt;++ir)xr=Gr[ir],Br<kr?(Br+=Qr[xr],en.push(xr)):(kr+=Qr[xr],Zn.push(xr));return Zn.reverse().concat(en)}function qr(st){return Mr(st).reverse()}u.arc=_,u.area=O,u.areaRadial=q,u.curveBasis=Pt,u.curveBasisClosed=Gt,u.curveBasisOpen=Ct,u.curveBundle=dt,u.curveCardinal=Je,u.curveCardinalClosed=ht,u.curveCardinalOpen=Lt,u.curveCatmullRom=Ht,u.curveCatmullRomClosed=qe,u.curveCatmullRomOpen=Rt,u.curveLinear=L,u.curveLinearClosed=br,u.curveMonotoneX=Ae,u.curveMonotoneY=Ee,u.curveNatural=tt,u.curveStep=ct,u.curveStepAfter=kt,u.curveStepBefore=yt,u.line=P,u.lineRadial=ee,u.linkHorizontal=te,u.linkRadial=$,u.linkVertical=K,u.pie=R,u.pointRadial=G,u.radialArea=q,u.radialLine=ee,u.stack=Lr,u.stackOffsetDiverging=Ur,u.stackOffsetExpand=Ar,u.stackOffsetNone=jt,u.stackOffsetSilhouette=fn,u.stackOffsetWiggle=Cr,u.stackOrderAppearance=_r,u.stackOrderAscending=Jr,u.stackOrderDescending=vn,u.stackOrderInsideOut=xn,u.stackOrderNone=Mr,u.stackOrderReverse=qr,u.symbol=We,u.symbolCircle=ae,u.symbolCross=ie,u.symbolDiamond=xe,u.symbolSquare=Be,u.symbolStar=Se,u.symbolTriangle=Xe,u.symbolWye=Ge,u.symbols=ze,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B,e("d3-time")):(u=u||self,s(u.d3=u.d3||{},u.d3))})(this,function(u,s){function m(lt){if(0<=lt.y&&lt.y<100){var dt=new Date(-1,lt.m,lt.d,lt.H,lt.M,lt.S,lt.L);return dt.setFullYear(lt.y),dt}return new Date(lt.y,lt.m,lt.d,lt.H,lt.M,lt.S,lt.L)}function x(lt){if(0<=lt.y&&lt.y<100){var dt=new Date(Date.UTC(-1,lt.m,lt.d,lt.H,lt.M,lt.S,lt.L));return dt.setUTCFullYear(lt.y),dt}return new Date(Date.UTC(lt.y,lt.m,lt.d,lt.H,lt.M,lt.S,lt.L))}function t(lt,dt,et){return{y:lt,m:dt,d:et,H:0,M:0,S:0,L:0}}function i(lt){var dt=lt.dateTime,et=lt.date,Pe=lt.time,Je=lt.periods,it=lt.days,ht=lt.shortDays,zt=lt.months,Lt=lt.shortMonths,Vt=c(Je),$t=v(Je),Ht=c(it),tr=v(it),qe=c(ht),xt=v(ht),Rt=c(zt),fr=v(zt),br=c(Lt),pr=v(Lt),Tr={a:kt,A:jt,b:Mr,B:Sr,c:null,d:N,e:N,f:G,H:X,I:j,j:ee,L:q,m:J,M:le,p:Lr,q:Ar,Q:We,s:mt,S:fe,u:se,U:V,V:Y,w:ne,W:te,x:null,X:null,y:K,Y:$,Z:ae,"%":ze},Nr={a:Ur,A:fn,b:Cr,B:_r,c:null,d:ie,e:ie,f:me,H:oe,I:ue,j:xe,L:he,m:be,M:Ce,p:En,q:Jr,Q:We,s:mt,S:Se,u:Be,U:Ye,V:Xe,w:Te,W:Ie,x:null,X:null,y:Ze,Y:rt,Z:Ge,"%":ze},Ir={a:Ee,A:Fe,b:Ke,B:tt,c:ut,d:h,e:h,f:F,H:S,I:S,j:L,L:O,m:_,M:k,p:Ae,q:T,Q:R,s:U,S:P,u:p,U:y,V:g,w:d,W:A,x:ct,X:yt,y:M,Y:b,Z:w,"%":D};Tr.x=lr(et,Tr),Tr.X=lr(Pe,Tr),Tr.c=lr(dt,Tr),Nr.x=lr(et,Nr),Nr.X=lr(Pe,Nr),Nr.c=lr(dt,Nr);function lr(Pr,vn){return function(xn){var qr=[],st=-1,Bt=0,ir=Pr.length,xr,Qr,Gr;for(xn instanceof Date||(xn=new Date(+xn));++st<ir;)Pr.charCodeAt(st)===37&&(qr.push(Pr.slice(Bt,st)),(Qr=a[xr=Pr.charAt(++st)])!=null?xr=Pr.charAt(++st):Qr=xr==="e"?" ":"0",(Gr=vn[xr])&&(xr=Gr(xn,Qr)),qr.push(xr),Bt=st+1);return qr.push(Pr.slice(Bt,st)),qr.join("")}}function Yr(Pr,vn){return function(xn){var qr=t(1900,void 0,1),st=nt(qr,Pr,xn+="",0),Bt,ir;if(st!=xn.length)return null;if("Q"in qr)return new Date(qr.Q);if("s"in qr)return new Date(qr.s*1e3+("L"in qr?qr.L:0));if(vn&&!("Z"in qr)&&(qr.Z=0),"p"in qr&&(qr.H=qr.H%12+qr.p*12),qr.m===void 0&&(qr.m="q"in qr?qr.q:0),"V"in qr){if(qr.V<1||qr.V>53)return null;"w"in qr||(qr.w=1),"Z"in qr?(Bt=x(t(qr.y,0,1)),ir=Bt.getUTCDay(),Bt=ir>4||ir===0?s.utcMonday.ceil(Bt):s.utcMonday(Bt),Bt=s.utcDay.offset(Bt,(qr.V-1)*7),qr.y=Bt.getUTCFullYear(),qr.m=Bt.getUTCMonth(),qr.d=Bt.getUTCDate()+(qr.w+6)%7):(Bt=m(t(qr.y,0,1)),ir=Bt.getDay(),Bt=ir>4||ir===0?s.timeMonday.ceil(Bt):s.timeMonday(Bt),Bt=s.timeDay.offset(Bt,(qr.V-1)*7),qr.y=Bt.getFullYear(),qr.m=Bt.getMonth(),qr.d=Bt.getDate()+(qr.w+6)%7)}else("W"in qr||"U"in qr)&&("w"in qr||(qr.w="u"in qr?qr.u%7:"W"in qr?1:0),ir="Z"in qr?x(t(qr.y,0,1)).getUTCDay():m(t(qr.y,0,1)).getDay(),qr.m=0,qr.d="W"in qr?(qr.w+6)%7+qr.W*7-(ir+5)%7:qr.w+qr.U*7-(ir+6)%7);return"Z"in qr?(qr.H+=qr.Z/100|0,qr.M+=qr.Z%100,x(qr)):m(qr)}}function nt(Pr,vn,xn,qr){for(var st=0,Bt=vn.length,ir=xn.length,xr,Qr;st<Bt;){if(qr>=ir)return-1;if(xr=vn.charCodeAt(st++),xr===37){if(xr=vn.charAt(st++),Qr=Ir[xr in a?vn.charAt(st++):xr],!Qr||(qr=Qr(Pr,xn,qr))<0)return-1}else if(xr!=xn.charCodeAt(qr++))return-1}return qr}function Ae(Pr,vn,xn){var qr=Vt.exec(vn.slice(xn));return qr?(Pr.p=$t[qr[0].toLowerCase()],xn+qr[0].length):-1}function Ee(Pr,vn,xn){var qr=qe.exec(vn.slice(xn));return qr?(Pr.w=xt[qr[0].toLowerCase()],xn+qr[0].length):-1}function Fe(Pr,vn,xn){var qr=Ht.exec(vn.slice(xn));return qr?(Pr.w=tr[qr[0].toLowerCase()],xn+qr[0].length):-1}function Ke(Pr,vn,xn){var qr=br.exec(vn.slice(xn));return qr?(Pr.m=pr[qr[0].toLowerCase()],xn+qr[0].length):-1}function tt(Pr,vn,xn){var qr=Rt.exec(vn.slice(xn));return qr?(Pr.m=fr[qr[0].toLowerCase()],xn+qr[0].length):-1}function ut(Pr,vn,xn){return nt(Pr,dt,vn,xn)}function ct(Pr,vn,xn){return nt(Pr,et,vn,xn)}function yt(Pr,vn,xn){return nt(Pr,Pe,vn,xn)}function kt(Pr){return ht[Pr.getDay()]}function jt(Pr){return it[Pr.getDay()]}function Mr(Pr){return Lt[Pr.getMonth()]}function Sr(Pr){return zt[Pr.getMonth()]}function Lr(Pr){return Je[+(Pr.getHours()>=12)]}function Ar(Pr){return 1+~~(Pr.getMonth()/3)}function Ur(Pr){return ht[Pr.getUTCDay()]}function fn(Pr){return it[Pr.getUTCDay()]}function Cr(Pr){return Lt[Pr.getUTCMonth()]}function _r(Pr){return zt[Pr.getUTCMonth()]}function En(Pr){return Je[+(Pr.getUTCHours()>=12)]}function Jr(Pr){return 1+~~(Pr.getUTCMonth()/3)}return{format:function(Pr){var vn=lr(Pr+="",Tr);return vn.toString=function(){return Pr},vn},parse:function(Pr){var vn=Yr(Pr+="",!1);return vn.toString=function(){return Pr},vn},utcFormat:function(Pr){var vn=lr(Pr+="",Nr);return vn.toString=function(){return Pr},vn},utcParse:function(Pr){var vn=Yr(Pr+="",!0);return vn.toString=function(){return Pr},vn}}}var a={"-":"",_:" ","0":"0"},r=/^\s*\d+/,n=/^%/,f=/[\\^$*+?|[\]().{}]/g;function l(lt,dt,et){var Pe=lt<0?"-":"",Je=(Pe?-lt:lt)+"",it=Je.length;return Pe+(it<et?new Array(et-it+1).join(dt)+Je:Je)}function o(lt){return lt.replace(f,"\\$&")}function c(lt){return new RegExp("^(?:"+lt.map(o).join("|")+")","i")}function v(lt){for(var dt={},et=-1,Pe=lt.length;++et<Pe;)dt[lt[et].toLowerCase()]=et;return dt}function d(lt,dt,et){var Pe=r.exec(dt.slice(et,et+1));return Pe?(lt.w=+Pe[0],et+Pe[0].length):-1}function p(lt,dt,et){var Pe=r.exec(dt.slice(et,et+1));return Pe?(lt.u=+Pe[0],et+Pe[0].length):-1}function y(lt,dt,et){var Pe=r.exec(dt.slice(et,et+2));return Pe?(lt.U=+Pe[0],et+Pe[0].length):-1}function g(lt,dt,et){var Pe=r.exec(dt.slice(et,et+2));return Pe?(lt.V=+Pe[0],et+Pe[0].length):-1}function A(lt,dt,et){var Pe=r.exec(dt.slice(et,et+2));return Pe?(lt.W=+Pe[0],et+Pe[0].length):-1}function b(lt,dt,et){var Pe=r.exec(dt.slice(et,et+4));return Pe?(lt.y=+Pe[0],et+Pe[0].length):-1}function M(lt,dt,et){var Pe=r.exec(dt.slice(et,et+2));return Pe?(lt.y=+Pe[0]+(+Pe[0]>68?1900:2e3),et+Pe[0].length):-1}function w(lt,dt,et){var Pe=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(dt.slice(et,et+6));return Pe?(lt.Z=Pe[1]?0:-(Pe[2]+(Pe[3]||"00")),et+Pe[0].length):-1}function T(lt,dt,et){var Pe=r.exec(dt.slice(et,et+1));return Pe?(lt.q=Pe[0]*3-3,et+Pe[0].length):-1}function _(lt,dt,et){var Pe=r.exec(dt.slice(et,et+2));return Pe?(lt.m=Pe[0]-1,et+Pe[0].length):-1}function h(lt,dt,et){var Pe=r.exec(dt.slice(et,et+2));return Pe?(lt.d=+Pe[0],et+Pe[0].length):-1}function L(lt,dt,et){var Pe=r.exec(dt.slice(et,et+3));return Pe?(lt.m=0,lt.d=+Pe[0],et+Pe[0].length):-1}function S(lt,dt,et){var Pe=r.exec(dt.slice(et,et+2));return Pe?(lt.H=+Pe[0],et+Pe[0].length):-1}function k(lt,dt,et){var Pe=r.exec(dt.slice(et,et+2));return Pe?(lt.M=+Pe[0],et+Pe[0].length):-1}function P(lt,dt,et){var Pe=r.exec(dt.slice(et,et+2));return Pe?(lt.S=+Pe[0],et+Pe[0].length):-1}function O(lt,dt,et){var Pe=r.exec(dt.slice(et,et+3));return Pe?(lt.L=+Pe[0],et+Pe[0].length):-1}function F(lt,dt,et){var Pe=r.exec(dt.slice(et,et+6));return Pe?(lt.L=Math.floor(Pe[0]/1e3),et+Pe[0].length):-1}function D(lt,dt,et){var Pe=n.exec(dt.slice(et,et+1));return Pe?et+Pe[0].length:-1}function R(lt,dt,et){var Pe=r.exec(dt.slice(et));return Pe?(lt.Q=+Pe[0],et+Pe[0].length):-1}function U(lt,dt,et){var Pe=r.exec(dt.slice(et));return Pe?(lt.s=+Pe[0],et+Pe[0].length):-1}function N(lt,dt){return l(lt.getDate(),dt,2)}function X(lt,dt){return l(lt.getHours(),dt,2)}function j(lt,dt){return l(lt.getHours()%12||12,dt,2)}function ee(lt,dt){return l(1+s.timeDay.count(s.timeYear(lt),lt),dt,3)}function q(lt,dt){return l(lt.getMilliseconds(),dt,3)}function G(lt,dt){return q(lt,dt)+"000"}function J(lt,dt){return l(lt.getMonth()+1,dt,2)}function le(lt,dt){return l(lt.getMinutes(),dt,2)}function fe(lt,dt){return l(lt.getSeconds(),dt,2)}function se(lt){var dt=lt.getDay();return dt===0?7:dt}function V(lt,dt){return l(s.timeSunday.count(s.timeYear(lt)-1,lt),dt,2)}function Y(lt,dt){var et=lt.getDay();return lt=et>=4||et===0?s.timeThursday(lt):s.timeThursday.ceil(lt),l(s.timeThursday.count(s.timeYear(lt),lt)+(s.timeYear(lt).getDay()===4),dt,2)}function ne(lt){return lt.getDay()}function te(lt,dt){return l(s.timeMonday.count(s.timeYear(lt)-1,lt),dt,2)}function K(lt,dt){return l(lt.getFullYear()%100,dt,2)}function $(lt,dt){return l(lt.getFullYear()%1e4,dt,4)}function ae(lt){var dt=lt.getTimezoneOffset();return(dt>0?"-":(dt*=-1,"+"))+l(dt/60|0,"0",2)+l(dt%60,"0",2)}function ie(lt,dt){return l(lt.getUTCDate(),dt,2)}function oe(lt,dt){return l(lt.getUTCHours(),dt,2)}function ue(lt,dt){return l(lt.getUTCHours()%12||12,dt,2)}function xe(lt,dt){return l(1+s.utcDay.count(s.utcYear(lt),lt),dt,3)}function he(lt,dt){return l(lt.getUTCMilliseconds(),dt,3)}function me(lt,dt){return he(lt,dt)+"000"}function be(lt,dt){return l(lt.getUTCMonth()+1,dt,2)}function Ce(lt,dt){return l(lt.getUTCMinutes(),dt,2)}function Se(lt,dt){return l(lt.getUTCSeconds(),dt,2)}function Be(lt){var dt=lt.getUTCDay();return dt===0?7:dt}function Ye(lt,dt){return l(s.utcSunday.count(s.utcYear(lt)-1,lt),dt,2)}function Xe(lt,dt){var et=lt.getUTCDay();return lt=et>=4||et===0?s.utcThursday(lt):s.utcThursday.ceil(lt),l(s.utcThursday.count(s.utcYear(lt),lt)+(s.utcYear(lt).getUTCDay()===4),dt,2)}function Te(lt){return lt.getUTCDay()}function Ie(lt,dt){return l(s.utcMonday.count(s.utcYear(lt)-1,lt),dt,2)}function Ze(lt,dt){return l(lt.getUTCFullYear()%100,dt,2)}function rt(lt,dt){return l(lt.getUTCFullYear()%1e4,dt,4)}function Ge(){return"+0000"}function ze(){return"%"}function We(lt){return+lt}function mt(lt){return Math.floor(+lt/1e3)}var Ft;Xt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Xt(lt){return Ft=i(lt),u.timeFormat=Ft.format,u.timeParse=Ft.parse,u.utcFormat=Ft.utcFormat,u.utcParse=Ft.utcParse,Ft}var Pt="%Y-%m-%dT%H:%M:%S.%LZ";function Ut(lt){return lt.toISOString()}var Gt=Date.prototype.toISOString?Ut:u.utcFormat(Pt);function It(lt){var dt=new Date(lt);return isNaN(dt)?null:dt}var Ct=+new Date("2000-01-01T00:00:00.000Z")?It:u.utcParse(Pt);u.isoFormat=Gt,u.isoParse=Ct,u.timeFormatDefaultLocale=Xt,u.timeFormatLocale=i,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){var s=new Date,m=new Date;function x(Te,Ie,Ze,rt){function Ge(ze){return Te(ze=arguments.length===0?new Date:new Date(+ze)),ze}return Ge.floor=function(ze){return Te(ze=new Date(+ze)),ze},Ge.ceil=function(ze){return Te(ze=new Date(ze-1)),Ie(ze,1),Te(ze),ze},Ge.round=function(ze){var We=Ge(ze),mt=Ge.ceil(ze);return ze-We<mt-ze?We:mt},Ge.offset=function(ze,We){return Ie(ze=new Date(+ze),We==null?1:Math.floor(We)),ze},Ge.range=function(ze,We,mt){var Ft=[],Xt;if(ze=Ge.ceil(ze),mt=mt==null?1:Math.floor(mt),!(ze<We)||!(mt>0))return Ft;do Ft.push(Xt=new Date(+ze)),Ie(ze,mt),Te(ze);while(Xt<ze&&ze<We);return Ft},Ge.filter=function(ze){return x(function(We){if(We>=We)for(;Te(We),!ze(We);)We.setTime(We-1)},function(We,mt){if(We>=We)if(mt<0)for(;++mt<=0;)for(;Ie(We,-1),!ze(We););else for(;--mt>=0;)for(;Ie(We,1),!ze(We););})},Ze&&(Ge.count=function(ze,We){return s.setTime(+ze),m.setTime(+We),Te(s),Te(m),Math.floor(Ze(s,m))},Ge.every=function(ze){return ze=Math.floor(ze),!isFinite(ze)||!(ze>0)?null:ze>1?Ge.filter(rt?function(We){return rt(We)%ze==0}:function(We){return Ge.count(0,We)%ze==0}):Ge}),Ge}var t=x(function(){},function(Te,Ie){Te.setTime(+Te+Ie)},function(Te,Ie){return Ie-Te});t.every=function(Te){return Te=Math.floor(Te),!isFinite(Te)||!(Te>0)?null:Te>1?x(function(Ie){Ie.setTime(Math.floor(Ie/Te)*Te)},function(Ie,Ze){Ie.setTime(+Ie+Ze*Te)},function(Ie,Ze){return(Ze-Ie)/Te}):t};var i=t.range,a=1e3,r=6e4,n=36e5,f=864e5,l=6048e5,o=x(function(Te){Te.setTime(Te-Te.getMilliseconds())},function(Te,Ie){Te.setTime(+Te+Ie*a)},function(Te,Ie){return(Ie-Te)/a},function(Te){return Te.getUTCSeconds()}),c=o.range,v=x(function(Te){Te.setTime(Te-Te.getMilliseconds()-Te.getSeconds()*a)},function(Te,Ie){Te.setTime(+Te+Ie*r)},function(Te,Ie){return(Ie-Te)/r},function(Te){return Te.getMinutes()}),d=v.range,p=x(function(Te){Te.setTime(Te-Te.getMilliseconds()-Te.getSeconds()*a-Te.getMinutes()*r)},function(Te,Ie){Te.setTime(+Te+Ie*n)},function(Te,Ie){return(Ie-Te)/n},function(Te){return Te.getHours()}),y=p.range,g=x(function(Te){Te.setHours(0,0,0,0)},function(Te,Ie){Te.setDate(Te.getDate()+Ie)},function(Te,Ie){return(Ie-Te-(Ie.getTimezoneOffset()-Te.getTimezoneOffset())*r)/f},function(Te){return Te.getDate()-1}),A=g.range;function b(Te){return x(function(Ie){Ie.setDate(Ie.getDate()-(Ie.getDay()+7-Te)%7),Ie.setHours(0,0,0,0)},function(Ie,Ze){Ie.setDate(Ie.getDate()+Ze*7)},function(Ie,Ze){return(Ze-Ie-(Ze.getTimezoneOffset()-Ie.getTimezoneOffset())*r)/l})}var M=b(0),w=b(1),T=b(2),_=b(3),h=b(4),L=b(5),S=b(6),k=M.range,P=w.range,O=T.range,F=_.range,D=h.range,R=L.range,U=S.range,N=x(function(Te){Te.setDate(1),Te.setHours(0,0,0,0)},function(Te,Ie){Te.setMonth(Te.getMonth()+Ie)},function(Te,Ie){return Ie.getMonth()-Te.getMonth()+(Ie.getFullYear()-Te.getFullYear())*12},function(Te){return Te.getMonth()}),X=N.range,j=x(function(Te){Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,Ie){Te.setFullYear(Te.getFullYear()+Ie)},function(Te,Ie){return Ie.getFullYear()-Te.getFullYear()},function(Te){return Te.getFullYear()});j.every=function(Te){return!isFinite(Te=Math.floor(Te))||!(Te>0)?null:x(function(Ie){Ie.setFullYear(Math.floor(Ie.getFullYear()/Te)*Te),Ie.setMonth(0,1),Ie.setHours(0,0,0,0)},function(Ie,Ze){Ie.setFullYear(Ie.getFullYear()+Ze*Te)})};var ee=j.range,q=x(function(Te){Te.setUTCSeconds(0,0)},function(Te,Ie){Te.setTime(+Te+Ie*r)},function(Te,Ie){return(Ie-Te)/r},function(Te){return Te.getUTCMinutes()}),G=q.range,J=x(function(Te){Te.setUTCMinutes(0,0,0)},function(Te,Ie){Te.setTime(+Te+Ie*n)},function(Te,Ie){return(Ie-Te)/n},function(Te){return Te.getUTCHours()}),le=J.range,fe=x(function(Te){Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCDate(Te.getUTCDate()+Ie)},function(Te,Ie){return(Ie-Te)/f},function(Te){return Te.getUTCDate()-1}),se=fe.range;function V(Te){return x(function(Ie){Ie.setUTCDate(Ie.getUTCDate()-(Ie.getUTCDay()+7-Te)%7),Ie.setUTCHours(0,0,0,0)},function(Ie,Ze){Ie.setUTCDate(Ie.getUTCDate()+Ze*7)},function(Ie,Ze){return(Ze-Ie)/l})}var Y=V(0),ne=V(1),te=V(2),K=V(3),$=V(4),ae=V(5),ie=V(6),oe=Y.range,ue=ne.range,xe=te.range,he=K.range,me=$.range,be=ae.range,Ce=ie.range,Se=x(function(Te){Te.setUTCDate(1),Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCMonth(Te.getUTCMonth()+Ie)},function(Te,Ie){return Ie.getUTCMonth()-Te.getUTCMonth()+(Ie.getUTCFullYear()-Te.getUTCFullYear())*12},function(Te){return Te.getUTCMonth()}),Be=Se.range,Ye=x(function(Te){Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCFullYear(Te.getUTCFullYear()+Ie)},function(Te,Ie){return Ie.getUTCFullYear()-Te.getUTCFullYear()},function(Te){return Te.getUTCFullYear()});Ye.every=function(Te){return!isFinite(Te=Math.floor(Te))||!(Te>0)?null:x(function(Ie){Ie.setUTCFullYear(Math.floor(Ie.getUTCFullYear()/Te)*Te),Ie.setUTCMonth(0,1),Ie.setUTCHours(0,0,0,0)},function(Ie,Ze){Ie.setUTCFullYear(Ie.getUTCFullYear()+Ze*Te)})};var Xe=Ye.range;u.timeDay=g,u.timeDays=A,u.timeFriday=L,u.timeFridays=R,u.timeHour=p,u.timeHours=y,u.timeInterval=x,u.timeMillisecond=t,u.timeMilliseconds=i,u.timeMinute=v,u.timeMinutes=d,u.timeMonday=w,u.timeMondays=P,u.timeMonth=N,u.timeMonths=X,u.timeSaturday=S,u.timeSaturdays=U,u.timeSecond=o,u.timeSeconds=c,u.timeSunday=M,u.timeSundays=k,u.timeThursday=h,u.timeThursdays=D,u.timeTuesday=T,u.timeTuesdays=O,u.timeWednesday=_,u.timeWednesdays=F,u.timeWeek=M,u.timeWeeks=k,u.timeYear=j,u.timeYears=ee,u.utcDay=fe,u.utcDays=se,u.utcFriday=ae,u.utcFridays=be,u.utcHour=J,u.utcHours=le,u.utcMillisecond=t,u.utcMilliseconds=i,u.utcMinute=q,u.utcMinutes=G,u.utcMonday=ne,u.utcMondays=ue,u.utcMonth=Se,u.utcMonths=Be,u.utcSaturday=ie,u.utcSaturdays=Ce,u.utcSecond=o,u.utcSeconds=c,u.utcSunday=Y,u.utcSundays=oe,u.utcThursday=$,u.utcThursdays=me,u.utcTuesday=te,u.utcTuesdays=xe,u.utcWednesday=K,u.utcWednesdays=he,u.utcWeek=Y,u.utcWeeks=oe,u.utcYear=Ye,u.utcYears=Xe,Object.defineProperty(u,"__esModule",{value:!0})})},{}],122:[function(e,I,B){arguments[4][121][0].apply(B,arguments)},{dup:121}],123:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){var s=0,m=0,x=0,t=1e3,i,a,r=0,n=0,f=0,l=typeof performance=="object"&&performance.now?performance:Date,o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(_){setTimeout(_,17)};function c(){return n||(o(v),n=l.now()+f)}function v(){n=0}function d(){this._call=this._time=this._next=null}d.prototype=p.prototype={constructor:d,restart:function(_,h,L){if(typeof _!="function")throw new TypeError("callback is not a function");L=(L==null?c():+L)+(h==null?0:+h),!this._next&&a!==this&&(a?a._next=this:i=this,a=this),this._call=_,this._time=L,M()},stop:function(){this._call&&(this._call=null,this._time=1/0,M())}};function p(_,h,L){var S=new d;return S.restart(_,h,L),S}function y(){c(),++s;for(var _=i,h;_;)(h=n-_._time)>=0&&_._call.call(null,h),_=_._next;--s}function g(){n=(r=l.now())+f,s=m=0;try{y()}finally{s=0,b(),n=0}}function A(){var _=l.now(),h=_-r;h>t&&(f-=h,r=_)}function b(){for(var _,h=i,L,S=1/0;h;)h._call?(S>h._time&&(S=h._time),_=h,h=h._next):(L=h._next,h._next=null,h=_?_._next=L:i=L);a=_,M(S)}function M(_){if(!s){m&&(m=clearTimeout(m));var h=_-n;h>24?(_<1/0&&(m=setTimeout(g,_-l.now()-f)),x&&(x=clearInterval(x))):(x||(r=l.now(),x=setInterval(A,t)),s=1,o(g))}}function w(_,h,L){var S=new d;return h=h==null?0:+h,S.restart(function(k){S.stop(),_(k+h)},h,L),S}function T(_,h,L){var S=new d,k=h;return h==null?(S.restart(_,h,L),S):(h=+h,L=L==null?c():+L,S.restart(function P(O){O+=k,S.restart(P,k+=h,L),_(O)},h,L),S)}u.interval=T,u.now=c,u.timeout=w,u.timer=p,u.timerFlush=y,Object.defineProperty(u,"__esModule",{value:!0})})},{}],124:[function(e,I,B){I.exports=function(){for(var u=0;u<arguments.length;u++)if(arguments[u]!==void 0)return arguments[u]}},{}],125:[function(e,I,B){I.exports=x;var u=x.canvas=document.createElement("canvas"),s=u.getContext("2d"),m=t([32,126]);x.createPairs=t,x.ascii=m;function x(i,a){Array.isArray(i)&&(i=i.join(", "));var r={},n,f=16,l=.05;a&&(a.length===2&&typeof a[0]=="number"?n=t(a):Array.isArray(a)?n=a:(a.o?n=t(a.o):a.pairs&&(n=a.pairs),a.fontSize&&(f=a.fontSize),a.threshold!=null&&(l=a.threshold))),n||(n=m),s.font=f+"px "+i;for(var o=0;o<n.length;o++){var c=n[o],v=s.measureText(c[0]).width+s.measureText(c[1]).width,d=s.measureText(c).width;if(Math.abs(v-d)>f*l){var p=(d-v)/f;r[c]=p*1e3}}return r}function t(i){for(var a=[],r=i[0];r<=i[1];r++)for(var n=String.fromCharCode(r),f=i[0];f<i[1];f++){var l=String.fromCharCode(f),o=n+l;a.push(o)}return a}},{}],126:[function(e,I,B){var u=e("abs-svg-path"),s=e("normalize-svg-path"),m={M:"moveTo",C:"bezierCurveTo"};I.exports=function(x,t){x.beginPath(),s(u(t)).forEach(function(i){var a=i[0],r=i.slice(1);x[m[a]].apply(x,r)}),x.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(e,I,B){I.exports=function(u){switch(u){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(e,I,B){function u(x,t,i){var a=x[i]|0;if(a<=0)return[];var r=new Array(a),n;if(i===x.length-1)for(n=0;n<a;++n)r[n]=t;else for(n=0;n<a;++n)r[n]=u(x,t,i+1);return r}function s(x,t){var i,a;for(i=new Array(x),a=0;a<x;++a)i[a]=t;return i}function m(x,t){switch(typeof t=="undefined"&&(t=0),typeof x){case"number":if(x>0)return s(x|0,t);break;case"object":if(typeof x.length=="number")return u(x,t,0);break}return[]}I.exports=m},{}],129:[function(e,I,B){I.exports=u,I.exports.default=u;function u(R,U,N){N=N||2;var X=U&&U.length,j=X?U[0]*N:R.length,ee=s(R,0,j,N,!0),q=[];if(!ee||ee.next===ee.prev)return q;var G,J,le,fe,se,V,Y;if(X&&(ee=n(R,U,ee,N)),R.length>80*N){G=le=R[0],J=fe=R[1];for(var ne=N;ne<j;ne+=N)se=R[ne],V=R[ne+1],se<G&&(G=se),V<J&&(J=V),se>le&&(le=se),V>fe&&(fe=V);Y=Math.max(le-G,fe-J),Y=Y!==0?1/Y:0}return x(ee,q,N,G,J,Y),q}function s(R,U,N,X,j){var ee,q;if(j===D(R,U,N,X)>0)for(ee=U;ee<N;ee+=X)q=P(ee,R[ee],R[ee+1],q);else for(ee=N-X;ee>=U;ee-=X)q=P(ee,R[ee],R[ee+1],q);return q&&M(q,q.next)&&(O(q),q=q.next),q}function m(R,U){if(!R)return R;U||(U=R);var N=R,X;do if(X=!1,!N.steiner&&(M(N,N.next)||b(N.prev,N,N.next)===0)){if(O(N),N=U=N.prev,N===N.next)break;X=!0}else N=N.next;while(X||N!==U);return U}function x(R,U,N,X,j,ee,q){if(!!R){!q&&ee&&v(R,X,j,ee);for(var G=R,J,le;R.prev!==R.next;){if(J=R.prev,le=R.next,ee?i(R,X,j,ee):t(R)){U.push(J.i/N),U.push(R.i/N),U.push(le.i/N),O(R),R=le.next,G=le.next;continue}if(R=le,R===G){q?q===1?(R=a(m(R),U,N),x(R,U,N,X,j,ee,2)):q===2&&r(R,U,N,X,j,ee):x(m(R),U,N,X,j,ee,1);break}}}}function t(R){var U=R.prev,N=R,X=R.next;if(b(U,N,X)>=0)return!1;for(var j=R.next.next;j!==R.prev;){if(g(U.x,U.y,N.x,N.y,X.x,X.y,j.x,j.y)&&b(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function i(R,U,N,X){var j=R.prev,ee=R,q=R.next;if(b(j,ee,q)>=0)return!1;for(var G=j.x<ee.x?j.x<q.x?j.x:q.x:ee.x<q.x?ee.x:q.x,J=j.y<ee.y?j.y<q.y?j.y:q.y:ee.y<q.y?ee.y:q.y,le=j.x>ee.x?j.x>q.x?j.x:q.x:ee.x>q.x?ee.x:q.x,fe=j.y>ee.y?j.y>q.y?j.y:q.y:ee.y>q.y?ee.y:q.y,se=p(G,J,U,N,X),V=p(le,fe,U,N,X),Y=R.prevZ,ne=R.nextZ;Y&&Y.z>=se&&ne&&ne.z<=V;){if(Y!==R.prev&&Y!==R.next&&g(j.x,j.y,ee.x,ee.y,q.x,q.y,Y.x,Y.y)&&b(Y.prev,Y,Y.next)>=0||(Y=Y.prevZ,ne!==R.prev&&ne!==R.next&&g(j.x,j.y,ee.x,ee.y,q.x,q.y,ne.x,ne.y)&&b(ne.prev,ne,ne.next)>=0))return!1;ne=ne.nextZ}for(;Y&&Y.z>=se;){if(Y!==R.prev&&Y!==R.next&&g(j.x,j.y,ee.x,ee.y,q.x,q.y,Y.x,Y.y)&&b(Y.prev,Y,Y.next)>=0)return!1;Y=Y.prevZ}for(;ne&&ne.z<=V;){if(ne!==R.prev&&ne!==R.next&&g(j.x,j.y,ee.x,ee.y,q.x,q.y,ne.x,ne.y)&&b(ne.prev,ne,ne.next)>=0)return!1;ne=ne.nextZ}return!0}function a(R,U,N){var X=R;do{var j=X.prev,ee=X.next.next;!M(j,ee)&&w(j,X,X.next,ee)&&L(j,ee)&&L(ee,j)&&(U.push(j.i/N),U.push(X.i/N),U.push(ee.i/N),O(X),O(X.next),X=R=ee),X=X.next}while(X!==R);return m(X)}function r(R,U,N,X,j,ee){var q=R;do{for(var G=q.next.next;G!==q.prev;){if(q.i!==G.i&&A(q,G)){var J=k(q,G);q=m(q,q.next),J=m(J,J.next),x(q,U,N,X,j,ee),x(J,U,N,X,j,ee);return}G=G.next}q=q.next}while(q!==R)}function n(R,U,N,X){var j=[],ee,q,G,J,le;for(ee=0,q=U.length;ee<q;ee++)G=U[ee]*X,J=ee<q-1?U[ee+1]*X:R.length,le=s(R,G,J,X,!1),le===le.next&&(le.steiner=!0),j.push(y(le));for(j.sort(f),ee=0;ee<j.length;ee++)l(j[ee],N),N=m(N,N.next);return N}function f(R,U){return R.x-U.x}function l(R,U){if(U=o(R,U),U){var N=k(U,R);m(U,U.next),m(N,N.next)}}function o(R,U){var N=U,X=R.x,j=R.y,ee=-1/0,q;do{if(j<=N.y&&j>=N.next.y&&N.next.y!==N.y){var G=N.x+(j-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(G<=X&&G>ee){if(ee=G,G===X){if(j===N.y)return N;if(j===N.next.y)return N.next}q=N.x<N.next.x?N:N.next}}N=N.next}while(N!==U);if(!q)return null;if(X===ee)return q;var J=q,le=q.x,fe=q.y,se=1/0,V;N=q;do X>=N.x&&N.x>=le&&X!==N.x&&g(j<fe?X:ee,j,le,fe,j<fe?ee:X,j,N.x,N.y)&&(V=Math.abs(j-N.y)/(X-N.x),L(N,R)&&(V<se||V===se&&(N.x>q.x||N.x===q.x&&c(q,N)))&&(q=N,se=V)),N=N.next;while(N!==J);return q}function c(R,U){return b(R.prev,R,U.prev)<0&&b(U.next,R,R.next)<0}function v(R,U,N,X){var j=R;do j.z===null&&(j.z=p(j.x,j.y,U,N,X)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==R);j.prevZ.nextZ=null,j.prevZ=null,d(j)}function d(R){var U,N,X,j,ee,q,G,J,le=1;do{for(N=R,R=null,ee=null,q=0;N;){for(q++,X=N,G=0,U=0;U<le&&(G++,X=X.nextZ,!!X);U++);for(J=le;G>0||J>0&&X;)G!==0&&(J===0||!X||N.z<=X.z)?(j=N,N=N.nextZ,G--):(j=X,X=X.nextZ,J--),ee?ee.nextZ=j:R=j,j.prevZ=ee,ee=j;N=X}ee.nextZ=null,le*=2}while(q>1);return R}function p(R,U,N,X,j){return R=32767*(R-N)*j,U=32767*(U-X)*j,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,R|U<<1}function y(R){var U=R,N=R;do(U.x<N.x||U.x===N.x&&U.y<N.y)&&(N=U),U=U.next;while(U!==R);return N}function g(R,U,N,X,j,ee,q,G){return(j-q)*(U-G)-(R-q)*(ee-G)>=0&&(R-q)*(X-G)-(N-q)*(U-G)>=0&&(N-q)*(ee-G)-(j-q)*(X-G)>=0}function A(R,U){return R.next.i!==U.i&&R.prev.i!==U.i&&!h(R,U)&&(L(R,U)&&L(U,R)&&S(R,U)&&(b(R.prev,R,U.prev)||b(R,U.prev,U))||M(R,U)&&b(R.prev,R,R.next)>0&&b(U.prev,U,U.next)>0)}function b(R,U,N){return(U.y-R.y)*(N.x-U.x)-(U.x-R.x)*(N.y-U.y)}function M(R,U){return R.x===U.x&&R.y===U.y}function w(R,U,N,X){var j=_(b(R,U,N)),ee=_(b(R,U,X)),q=_(b(N,X,R)),G=_(b(N,X,U));return!!(j!==ee&&q!==G||j===0&&T(R,N,U)||ee===0&&T(R,X,U)||q===0&&T(N,R,X)||G===0&&T(N,U,X))}function T(R,U,N){return U.x<=Math.max(R.x,N.x)&&U.x>=Math.min(R.x,N.x)&&U.y<=Math.max(R.y,N.y)&&U.y>=Math.min(R.y,N.y)}function _(R){return R>0?1:R<0?-1:0}function h(R,U){var N=R;do{if(N.i!==R.i&&N.next.i!==R.i&&N.i!==U.i&&N.next.i!==U.i&&w(N,N.next,R,U))return!0;N=N.next}while(N!==R);return!1}function L(R,U){return b(R.prev,R,R.next)<0?b(R,U,R.next)>=0&&b(R,R.prev,U)>=0:b(R,U,R.prev)<0||b(R,R.next,U)<0}function S(R,U){var N=R,X=!1,j=(R.x+U.x)/2,ee=(R.y+U.y)/2;do N.y>ee!=N.next.y>ee&&N.next.y!==N.y&&j<(N.next.x-N.x)*(ee-N.y)/(N.next.y-N.y)+N.x&&(X=!X),N=N.next;while(N!==R);return X}function k(R,U){var N=new F(R.i,R.x,R.y),X=new F(U.i,U.x,U.y),j=R.next,ee=U.prev;return R.next=U,U.prev=R,N.next=j,j.prev=N,X.next=N,N.prev=X,ee.next=X,X.prev=ee,X}function P(R,U,N,X){var j=new F(R,U,N);return X?(j.next=X.next,j.prev=X,X.next.prev=j,X.next=j):(j.prev=j,j.next=j),j}function O(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function F(R,U,N){this.i=R,this.x=U,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}u.deviation=function(R,U,N,X){var j=U&&U.length,ee=j?U[0]*N:R.length,q=Math.abs(D(R,0,ee,N));if(j)for(var G=0,J=U.length;G<J;G++){var le=U[G]*N,fe=G<J-1?U[G+1]*N:R.length;q-=Math.abs(D(R,le,fe,N))}var se=0;for(G=0;G<X.length;G+=3){var V=X[G]*N,Y=X[G+1]*N,ne=X[G+2]*N;se+=Math.abs((R[V]-R[ne])*(R[Y+1]-R[V+1])-(R[V]-R[Y])*(R[ne+1]-R[V+1]))}return q===0&&se===0?0:Math.abs((se-q)/q)};function D(R,U,N,X){for(var j=0,ee=U,q=N-X;ee<N;ee+=X)j+=(R[q]-R[ee])*(R[ee+1]+R[q+1]),q=ee;return j}u.flatten=function(R){for(var U=R[0][0].length,N={vertices:[],holes:[],dimensions:U},X=0,j=0;j<R.length;j++){for(var ee=0;ee<R[j].length;ee++)for(var q=0;q<U;q++)N.vertices.push(R[j][ee][q]);j>0&&(X+=R[j-1].length,N.holes.push(X))}return N}},{}],130:[function(e,I,B){var u=e("strongly-connected-components");I.exports=function(m,x){var t=[],i=[],a=[],r={},n=[],f;function l(M){a[M]=!1,r.hasOwnProperty(M)&&Object.keys(r[M]).forEach(function(w){delete r[M][w],a[w]&&l(w)})}function o(M){var w=!1;i.push(M),a[M]=!0;var T,_;for(T=0;T<n[M].length;T++)_=n[M][T],_===f?(c(f,i),w=!0):a[_]||(w=o(_));if(w)l(M);else for(T=0;T<n[M].length;T++){_=n[M][T];var h=r[_];h||(h={},r[_]=h),h[_]=!0}return i.pop(),w}function c(M,w){var T=[].concat(w).concat(M);x?x(o):t.push(T)}function v(M){for(var w=0;w<m.length;w++)w<M&&(m[w]=[]),m[w]=m[w].filter(function(T){return T>=M})}function d(M){v(M);for(var w=m,T=u(w),_=T.components.filter(function(F){return F.length>1}),h=1/0,L,S=0;S<_.length;S++)for(var k=0;k<_[S].length;k++)_[S][k]<h&&(h=_[S][k],L=S);var P=_[L];if(!P)return!1;var O=m.map(function(F,D){return P.indexOf(D)===-1?[]:F.filter(function(R){return P.indexOf(R)!==-1})});return{leastVertex:h,adjList:O}}f=0;for(var p=m.length;f<p;){var y=d(f);if(f=y.leastVertex,n=y.adjList,n){for(var g=0;g<n.length;g++)for(var A=0;A<n[g].length;A++){var b=n[g][A];a[+b]=!1,r[b]={}}o(f),f=f+1}else f=p}if(!x)return t}},{"strongly-connected-components":306}],131:[function(e,I,B){var u=e("../../object/valid-value");I.exports=function(){return u(this).length=0,this}},{"../../object/valid-value":162}],132:[function(e,I,B){I.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(e,I,B){I.exports=function(){var u=Array.from,s,m;return typeof u!="function"?!1:(s=["raz","dwa"],m=u(s),Boolean(m&&m!==s&&m[1]==="dwa"))}},{}],134:[function(e,I,B){var u=e("es6-symbol").iterator,s=e("../../function/is-arguments"),m=e("../../function/is-function"),x=e("../../number/to-pos-integer"),t=e("../../object/valid-callable"),i=e("../../object/valid-value"),a=e("../../object/is-value"),r=e("../../string/is-string"),n=Array.isArray,f=Function.prototype.call,l={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;I.exports=function(c){var v=arguments[1],d=arguments[2],p,y,g,A,b,M,w,T,_,h;if(c=Object(i(c)),a(v)&&t(v),!this||this===Array||!m(this)){if(!v){if(s(c))return b=c.length,b!==1?Array.apply(null,c):(A=new Array(1),A[0]=c[0],A);if(n(c)){for(A=new Array(b=c.length),y=0;y<b;++y)A[y]=c[y];return A}}A=[]}else p=this;if(!n(c)){if((_=c[u])!==void 0){for(w=t(_).call(c),p&&(A=new p),T=w.next(),y=0;!T.done;)h=v?f.call(v,d,T.value,y):T.value,p?(l.value=h,o(A,y,l)):A[y]=h,T=w.next(),++y;b=y}else if(r(c)){for(b=c.length,p&&(A=new p),y=0,g=0;y<b;++y)h=c[y],y+1<b&&(M=h.charCodeAt(0),M>=55296&&M<=56319&&(h+=c[++y])),h=v?f.call(v,d,h,g):h,p?(l.value=h,o(A,g,l)):A[g]=h,++g;b=g}}if(b===void 0)for(b=x(c.length),p&&(A=new p(b)),y=0;y<b;++y)h=v?f.call(v,d,c[y],y):c[y],p?(l.value=h,o(A,y,l)):A[y]=h;return p&&(l.value=null,A.length=b),A}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(e,I,B){var u=Object.prototype.toString,s=u.call(function(){return arguments}());I.exports=function(m){return u.call(m)===s}},{}],136:[function(e,I,B){var u=Object.prototype.toString,s=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);I.exports=function(m){return typeof m=="function"&&s(u.call(m))}},{}],137:[function(e,I,B){I.exports=function(){}},{}],138:[function(e,I,B){I.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(e,I,B){I.exports=function(){var u=Math.sign;return typeof u!="function"?!1:u(10)===1&&u(-20)===-1}},{}],140:[function(e,I,B){I.exports=function(u){return u=Number(u),isNaN(u)||u===0?u:u>0?1:-1}},{}],141:[function(e,I,B){var u=e("../math/sign"),s=Math.abs,m=Math.floor;I.exports=function(x){return isNaN(x)?0:(x=Number(x),x===0||!isFinite(x)?x:u(x)*m(s(x)))}},{"../math/sign":138}],142:[function(e,I,B){var u=e("./to-integer"),s=Math.max;I.exports=function(m){return s(0,u(m))}},{"./to-integer":141}],143:[function(e,I,B){var u=e("./valid-callable"),s=e("./valid-value"),m=Function.prototype.bind,x=Function.prototype.call,t=Object.keys,i=Object.prototype.propertyIsEnumerable;I.exports=function(a,r){return function(n,f){var l,o=arguments[2],c=arguments[3];return n=Object(s(n)),u(f),l=t(n),c&&l.sort(typeof c=="function"?m.call(c,n):void 0),typeof a!="function"&&(a=l[a]),x.call(a,l,function(v,d){return i.call(n,v)?x.call(f,o,n[v],v,n,d):r})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(e,I,B){I.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(e,I,B){I.exports=function(){var u=Object.assign,s;return typeof u!="function"?!1:(s={foo:"raz"},u(s,{bar:"dwa"},{trzy:"trzy"}),s.foo+s.bar+s.trzy==="razdwatrzy")}},{}],146:[function(e,I,B){var u=e("../keys"),s=e("../valid-value"),m=Math.max;I.exports=function(x,t){var i,a,r=m(arguments.length,2),n;for(x=Object(s(x)),n=function(f){try{x[f]=t[f]}catch(l){i||(i=l)}},a=1;a<r;++a)t=arguments[a],u(t).forEach(n);if(i!==void 0)throw i;return x}},{"../keys":152,"../valid-value":162}],147:[function(e,I,B){var u=e("../array/from"),s=e("./assign"),m=e("./valid-value");I.exports=function(x){var t=Object(m(x)),i=arguments[1],a=Object(arguments[2]);if(t!==x&&!i)return t;var r={};return i?u(i,function(n){(a.ensure||n in x)&&(r[n]=x[n])}):s(r,x),r}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(e,I,B){var u=Object.create,s;e("./set-prototype-of/is-implemented")()||(s=e("./set-prototype-of/shim")),I.exports=function(){var m,x,t;return!s||s.level!==1?u:(m={},x={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(i){if(i==="__proto__"){x[i]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}x[i]=t}),Object.defineProperties(m,x),Object.defineProperty(s,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m}),function(i,a){return u(i===null?m:i,a)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(e,I,B){I.exports=e("./_iterate")("forEach")},{"./_iterate":143}],150:[function(e,I,B){var u=e("./is-value"),s={function:!0,object:!0};I.exports=function(m){return u(m)&&s[typeof m]||!1}},{"./is-value":151}],151:[function(e,I,B){var u=e("../function/noop")();I.exports=function(s){return s!==u&&s!==null}},{"../function/noop":137}],152:[function(e,I,B){I.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(e,I,B){I.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(e,I,B){var u=e("../is-value"),s=Object.keys;I.exports=function(m){return s(u(m)?Object(m):m)}},{"../is-value":151}],155:[function(e,I,B){var u=e("./valid-callable"),s=e("./for-each"),m=Function.prototype.call;I.exports=function(x,t){var i={},a=arguments[2];return u(t),s(x,function(r,n,f,l){i[n]=m.call(t,a,r,n,f,l)}),i}},{"./for-each":149,"./valid-callable":160}],156:[function(e,I,B){var u=e("./is-value"),s=Array.prototype.forEach,m=Object.create,x=function(t,i){var a;for(a in t)i[a]=t[a]};I.exports=function(t){var i=m(null);return s.call(arguments,function(a){!u(a)||x(Object(a),i)}),i}},{"./is-value":151}],157:[function(e,I,B){I.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(e,I,B){var u=Object.create,s=Object.getPrototypeOf,m={};I.exports=function(){var x=Object.setPrototypeOf,t=arguments[0]||u;return typeof x!="function"?!1:s(x(t(null),m))===m}},{}],159:[function(e,I,B){var u=e("../is-object"),s=e("../valid-value"),m=Object.prototype.isPrototypeOf,x=Object.defineProperty,t={configurable:!0,enumerable:!1,writable:!0,value:void 0},i;i=function(a,r){if(s(a),r===null||u(r))return a;throw new TypeError("Prototype must be null or an object")},I.exports=function(a){var r,n;return a?(a.level===2?a.set?(n=a.set,r=function(f,l){return n.call(i(f,l),l),f}):r=function(f,l){return i(f,l).__proto__=l,f}:r=function f(l,o){var c;return i(l,o),c=m.call(f.nullPolyfill,l),c&&delete f.nullPolyfill.__proto__,o===null&&(o=f.nullPolyfill),l.__proto__=o,c&&x(f.nullPolyfill,"__proto__",t),l},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null}(function(){var a=Object.create(null),r={},n,f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(f){try{n=f.set,n.call(a,r)}catch{}if(Object.getPrototypeOf(a)===r)return{set:n,level:2}}return a.__proto__=r,Object.getPrototypeOf(a)===r?{level:2}:(a={},a.__proto__=r,Object.getPrototypeOf(a)===r?{level:1}:!1)}()),e("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(e,I,B){I.exports=function(u){if(typeof u!="function")throw new TypeError(u+" is not a function");return u}},{}],161:[function(e,I,B){var u=e("./is-object");I.exports=function(s){if(!u(s))throw new TypeError(s+" is not an Object");return s}},{"./is-object":150}],162:[function(e,I,B){var u=e("./is-value");I.exports=function(s){if(!u(s))throw new TypeError("Cannot use null or undefined");return s}},{"./is-value":151}],163:[function(e,I,B){I.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(e,I,B){var u="razdwatrzy";I.exports=function(){return typeof u.contains!="function"?!1:u.contains("dwa")===!0&&u.contains("foo")===!1}},{}],165:[function(e,I,B){var u=String.prototype.indexOf;I.exports=function(s){return u.call(this,s,arguments[1])>-1}},{}],166:[function(e,I,B){var u=Object.prototype.toString,s=u.call("");I.exports=function(m){return typeof m=="string"||m&&typeof m=="object"&&(m instanceof String||u.call(m)===s)||!1}},{}],167:[function(e,I,B){var u=Object.create(null),s=Math.random;I.exports=function(){var m;do m=s().toString(36).slice(2);while(u[m]);return m}},{}],168:[function(e,I,B){var u=e("es5-ext/object/set-prototype-of"),s=e("es5-ext/string/#/contains"),m=e("d"),x=e("es6-symbol"),t=e("./"),i=Object.defineProperty,a;a=I.exports=function(r,n){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");t.call(this,r),n?s.call(n,"key+value")?n="key+value":s.call(n,"key")?n="key":n="value":n="value",i(this,"__kind__",m("",n))},u&&u(a,t),delete a.prototype.constructor,a.prototype=Object.create(t.prototype,{_resolve:m(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),i(a.prototype,x.toStringTag,m("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(e,I,B){var u=e("es5-ext/function/is-arguments"),s=e("es5-ext/object/valid-callable"),m=e("es5-ext/string/is-string"),x=e("./get"),t=Array.isArray,i=Function.prototype.call,a=Array.prototype.some;I.exports=function(r,n){var f,l=arguments[2],o,c,v,d,p,y,g;if(t(r)||u(r)?f="array":m(r)?f="string":r=x(r),s(n),c=function(){v=!0},f==="array"){a.call(r,function(A){return i.call(n,l,A,c),v});return}if(f==="string"){for(p=r.length,d=0;d<p&&(y=r[d],d+1<p&&(g=y.charCodeAt(0),g>=55296&&g<=56319&&(y+=r[++d])),i.call(n,l,y,c),!v);++d);return}for(o=r.next();!o.done;){if(i.call(n,l,o.value,c),v)return;o=r.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(e,I,B){var u=e("es5-ext/function/is-arguments"),s=e("es5-ext/string/is-string"),m=e("./array"),x=e("./string"),t=e("./valid-iterable"),i=e("es6-symbol").iterator;I.exports=function(a){return typeof t(a)[i]=="function"?a[i]():u(a)?new m(a):s(a)?new x(a):new m(a)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(e,I,B){var u=e("es5-ext/array/#/clear"),s=e("es5-ext/object/assign"),m=e("es5-ext/object/valid-callable"),x=e("es5-ext/object/valid-value"),t=e("d"),i=e("d/auto-bind"),a=e("es6-symbol"),r=Object.defineProperty,n=Object.defineProperties,f;I.exports=f=function(l,o){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");n(this,{__list__:t("w",x(l)),__context__:t("w",o),__nextIndex__:t("w",0)}),!!o&&(m(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete f.prototype.constructor,n(f.prototype,s({_next:t(function(){var l;if(!!this.__list__){if(this.__redo__&&(l=this.__redo__.shift(),l!==void 0))return l;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:t(function(){return this._createResult(this._next())}),_createResult:t(function(l){return l===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(l)}}),_resolve:t(function(l){return this.__list__[l]}),_unBind:t(function(){this.__list__=null,delete this.__redo__,!!this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:t(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},i({_onAdd:t(function(l){if(!(l>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",t("c",[l]));return}this.__redo__.forEach(function(o,c){o>=l&&(this.__redo__[c]=++o)},this),this.__redo__.push(l)}}),_onDelete:t(function(l){var o;l>=this.__nextIndex__||(--this.__nextIndex__,!!this.__redo__&&(o=this.__redo__.indexOf(l),o!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(c,v){c>l&&(this.__redo__[v]=--c)},this)))}),_onClear:t(function(){this.__redo__&&u.call(this.__redo__),this.__nextIndex__=0})}))),r(f.prototype,a.iterator,t(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(e,I,B){var u=e("es5-ext/function/is-arguments"),s=e("es5-ext/object/is-value"),m=e("es5-ext/string/is-string"),x=e("es6-symbol").iterator,t=Array.isArray;I.exports=function(i){return s(i)?t(i)||m(i)||u(i)?!0:typeof i[x]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(e,I,B){var u=e("es5-ext/object/set-prototype-of"),s=e("d"),m=e("es6-symbol"),x=e("./"),t=Object.defineProperty,i;i=I.exports=function(a){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");a=String(a),x.call(this,a),t(this,"__length__",s("",a.length))},u&&u(i,x),delete i.prototype.constructor,i.prototype=Object.create(x.prototype,{_next:s(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:s(function(a){var r=this.__list__[a],n;return this.__nextIndex__===this.__length__?r:(n=r.charCodeAt(0),n>=55296&&n<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),t(i.prototype,m.toStringTag,s("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(e,I,B){var u=e("./is-iterable");I.exports=function(s){if(!u(s))throw new TypeError(s+" is not iterable");return s}},{"./is-iterable":172}],175:[function(e,I,B){I.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(e,I,B){var u=e("ext/global-this"),s={object:!0,symbol:!0};I.exports=function(){var m=u.Symbol,x;if(typeof m!="function")return!1;x=m("test symbol");try{String(x)}catch{return!1}return!(!s[typeof m.iterator]||!s[typeof m.toPrimitive]||!s[typeof m.toStringTag])}},{"ext/global-this":188}],177:[function(e,I,B){I.exports=function(u){return u?typeof u=="symbol"?!0:!u.constructor||u.constructor.name!=="Symbol"?!1:u[u.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(e,I,B){var u=e("d"),s=Object.create,m=Object.defineProperty,x=Object.prototype,t=s(null);I.exports=function(i){for(var a=0,r,n;t[i+(a||"")];)++a;return i+=a||"",t[i]=!0,r="@@"+i,m(x,r,u.gs(null,function(f){n||(n=!0,m(this,r,u(f)),n=!1)})),r}},{d:106}],179:[function(e,I,B){var u=e("d"),s=e("ext/global-this").Symbol;I.exports=function(m){return Object.defineProperties(m,{hasInstance:u("",s&&s.hasInstance||m("hasInstance")),isConcatSpreadable:u("",s&&s.isConcatSpreadable||m("isConcatSpreadable")),iterator:u("",s&&s.iterator||m("iterator")),match:u("",s&&s.match||m("match")),replace:u("",s&&s.replace||m("replace")),search:u("",s&&s.search||m("search")),species:u("",s&&s.species||m("species")),split:u("",s&&s.split||m("split")),toPrimitive:u("",s&&s.toPrimitive||m("toPrimitive")),toStringTag:u("",s&&s.toStringTag||m("toStringTag")),unscopables:u("",s&&s.unscopables||m("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(e,I,B){var u=e("d"),s=e("../../../validate-symbol"),m=Object.create(null);I.exports=function(x){return Object.defineProperties(x,{for:u(function(t){return m[t]?m[t]:m[t]=x(String(t))}),keyFor:u(function(t){var i;s(t);for(i in m)if(m[i]===t)return i})})}},{"../../../validate-symbol":182,d:106}],181:[function(e,I,B){var u=e("d"),s=e("./validate-symbol"),m=e("ext/global-this").Symbol,x=e("./lib/private/generate-name"),t=e("./lib/private/setup/standard-symbols"),i=e("./lib/private/setup/symbol-registry"),a=Object.create,r=Object.defineProperties,n=Object.defineProperty,f,l,o;if(typeof m=="function")try{String(m()),o=!0}catch{}else m=null;l=function(v){if(this instanceof l)throw new TypeError("Symbol is not a constructor");return f(v)},I.exports=f=function c(v){var d;if(this instanceof c)throw new TypeError("Symbol is not a constructor");return o?m(v):(d=a(l.prototype),v=v===void 0?"":String(v),r(d,{__description__:u("",v),__name__:u("",x(v))}))},t(f),i(f),r(l.prototype,{constructor:u(f),toString:u("",function(){return this.__name__})}),r(f.prototype,{toString:u(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:u(function(){return s(this)})}),n(f.prototype,f.toPrimitive,u("",function(){var c=s(this);return typeof c=="symbol"?c:c.toString()})),n(f.prototype,f.toStringTag,u("c","Symbol")),n(l.prototype,f.toStringTag,u("c",f.prototype[f.toStringTag])),n(l.prototype,f.toPrimitive,u("c",f.prototype[f.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(e,I,B){var u=e("./is-symbol");I.exports=function(s){if(!u(s))throw new TypeError(s+" is not a symbol");return s}},{"./is-symbol":177}],183:[function(e,I,B){I.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(e,I,B){I.exports=function(){var u,s;if(typeof WeakMap!="function")return!1;try{u=new WeakMap([[s={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(u)!=="[object WeakMap]"||typeof u.set!="function"||u.set({},1)!==u||typeof u.delete!="function"||typeof u.has!="function"||u.get(s)!=="one")}},{}],185:[function(e,I,B){I.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(e,I,B){var u=e("es5-ext/object/is-value"),s=e("es5-ext/object/set-prototype-of"),m=e("es5-ext/object/valid-object"),x=e("es5-ext/object/valid-value"),t=e("es5-ext/string/random-uniq"),i=e("d"),a=e("es6-iterator/get"),r=e("es6-iterator/for-of"),n=e("es6-symbol").toStringTag,f=e("./is-native-implemented"),l=Array.isArray,o=Object.defineProperty,c=Object.prototype.hasOwnProperty,v=Object.getPrototypeOf,d;I.exports=d=function(){var p=arguments[0],y;if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");return y=f&&s&&WeakMap!==d?s(new WeakMap,v(this)):this,u(p)&&(l(p)||(p=a(p))),o(y,"__weakMapData__",i("c","$weakMap$"+t())),p&&r(p,function(g){x(g),y.set(g[0],g[1])}),y},f&&(s&&s(d,WeakMap),d.prototype=Object.create(WeakMap.prototype,{constructor:i(d)})),Object.defineProperties(d.prototype,{delete:i(function(p){return c.call(m(p),this.__weakMapData__)?(delete p[this.__weakMapData__],!0):!1}),get:i(function(p){if(!!c.call(m(p),this.__weakMapData__))return p[this.__weakMapData__]}),has:i(function(p){return c.call(m(p),this.__weakMapData__)}),set:i(function(p,y){return o(m(p),this.__weakMapData__,i("c",y)),this}),toString:i(function(){return"[object WeakMap]"})}),o(d.prototype,n,i("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(e,I,B){var u=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};I.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return u()}try{return __global__||u()}finally{delete Object.prototype.__global__}}()},{}],188:[function(e,I,B){I.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(e,I,B){I.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(e,I,B){var u=e("is-string-blank");I.exports=function(s){var m=typeof s;if(m==="string"){var x=s;if(s=+s,s===0&&u(x))return!1}else if(m!=="number")return!1;return s-s<1}},{"is-string-blank":237}],191:[function(e,I,B){var u=e("dtype");I.exports=s;function s(m,x,t){if(!m)throw new TypeError("must specify data as first parameter");if(t=+(t||0)|0,Array.isArray(m)&&m[0]&&typeof m[0][0]=="number"){var i=m[0].length,a=m.length*i,r,n,f,l;(!x||typeof x=="string")&&(x=new(u(x||"float32"))(a+t));var o=x.length-t;if(a!==o)throw new Error("source length "+a+" ("+i+"x"+m.length+") does not match destination length "+o);for(r=0,f=t;r<m.length;r++)for(n=0;n<i;n++)x[f++]=m[r][n]===null?NaN:m[r][n]}else if(!x||typeof x=="string"){var c=u(x||"float32");if(Array.isArray(m)||x==="array")for(x=new c(m.length+t),r=0,f=t,l=x.length;f<l;f++,r++)x[f]=m[r]===null?NaN:m[r];else t===0?x=new c(m):(x=new c(m.length+t),x.set(m,t))}else x.set(m,t);return x}},{dtype:127}],192:[function(e,I,B){var u=e("css-font/stringify"),s=[32,126];I.exports=m;function m(x){x=x||{};var t=x.shape?x.shape:x.canvas?[x.canvas.width,x.canvas.height]:[512,512],i=x.canvas||document.createElement("canvas"),a=x.font,r=typeof x.step=="number"?[x.step,x.step]:x.step||[32,32],n=x.chars||s;if(a&&typeof a!="string"&&(a=u(a)),!Array.isArray(n))n=String(n).split("");else if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"){for(var f=[],l=n[0],o=0;l<=n[1];l++)f[o++]=String.fromCharCode(l);n=f}t=t.slice(),i.width=t[0],i.height=t[1];var c=i.getContext("2d");c.fillStyle="#000",c.fillRect(0,0,i.width,i.height),c.font=a,c.textAlign="center",c.textBaseline="middle",c.fillStyle="#fff";for(var v=r[0]/2,d=r[1]/2,l=0;l<n.length;l++)c.fillText(n[l],v,d),(v+=r[0])>t[0]-r[0]/2&&(v=r[0]/2,d+=r[1]);return i}},{"css-font/stringify":102}],193:[function(e,I,B){I.exports=u,u.canvas=document.createElement("canvas"),u.cache={};function u(t,i){i||(i={}),(typeof t=="string"||Array.isArray(t))&&(i.family=t);var a=Array.isArray(i.family)?i.family.join(", "):i.family;if(!a)throw Error("`family` must be defined");var r=i.size||i.fontSize||i.em||48,n=i.weight||i.fontWeight||"",f=i.style||i.fontStyle||"",t=[f,n,r].join(" ")+"px "+a,l=i.origin||"top";if(u.cache[a]&&r<=u.cache[a].em)return s(u.cache[a],l);var o=i.canvas||u.canvas,c=o.getContext("2d"),v={upper:i.upper!==void 0?i.upper:"H",lower:i.lower!==void 0?i.lower:"x",descent:i.descent!==void 0?i.descent:"p",ascent:i.ascent!==void 0?i.ascent:"h",tittle:i.tittle!==void 0?i.tittle:"i",overshoot:i.overshoot!==void 0?i.overshoot:"O"},d=Math.ceil(r*1.5);o.height=d,o.width=d*.5,c.font=t;var p="H",y={top:0};c.clearRect(0,0,d,d),c.textBaseline="top",c.fillStyle="black",c.fillText(p,0,0);var g=m(c.getImageData(0,0,d,d));c.clearRect(0,0,d,d),c.textBaseline="bottom",c.fillText(p,0,d);var A=m(c.getImageData(0,0,d,d));y.lineHeight=y.bottom=d-A+g,c.clearRect(0,0,d,d),c.textBaseline="alphabetic",c.fillText(p,0,d);var b=m(c.getImageData(0,0,d,d)),M=d-b-1+g;y.baseline=y.alphabetic=M,c.clearRect(0,0,d,d),c.textBaseline="middle",c.fillText(p,0,d*.5);var w=m(c.getImageData(0,0,d,d));y.median=y.middle=d-w-1+g-d*.5,c.clearRect(0,0,d,d),c.textBaseline="hanging",c.fillText(p,0,d*.5);var T=m(c.getImageData(0,0,d,d));y.hanging=d-T-1+g-d*.5,c.clearRect(0,0,d,d),c.textBaseline="ideographic",c.fillText(p,0,d);var _=m(c.getImageData(0,0,d,d));if(y.ideographic=d-_-1+g,v.upper&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(v.upper,0,0),y.upper=m(c.getImageData(0,0,d,d)),y.capHeight=y.baseline-y.upper),v.lower&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(v.lower,0,0),y.lower=m(c.getImageData(0,0,d,d)),y.xHeight=y.baseline-y.lower),v.tittle&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(v.tittle,0,0),y.tittle=m(c.getImageData(0,0,d,d))),v.ascent&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(v.ascent,0,0),y.ascent=m(c.getImageData(0,0,d,d))),v.descent&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(v.descent,0,0),y.descent=x(c.getImageData(0,0,d,d))),v.overshoot){c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(v.overshoot,0,0);var h=x(c.getImageData(0,0,d,d));y.overshoot=h-M}for(var L in y)y[L]/=r;return y.em=r,u.cache[a]=y,s(y,l)}function s(t,i){var a={};typeof i=="string"&&(i=t[i]);for(var r in t)r!=="em"&&(a[r]=t[r]-i);return a}function m(t){for(var i=t.height,a=t.data,r=3;r<a.length;r+=4)if(a[r]!==0)return Math.floor((r-3)*.25/i)}function x(t){for(var i=t.height,a=t.data,r=a.length-1;r>0;r-=4)if(a[r]!==0)return Math.floor((r-3)*.25/i)}},{}],194:[function(e,I,B){I.exports=u;function u(s,m){if(typeof s!="string")throw new TypeError("must specify type string");if(m=m||{},typeof document=="undefined"&&!m.canvas)return null;var x=m.canvas||document.createElement("canvas");typeof m.width=="number"&&(x.width=m.width),typeof m.height=="number"&&(x.height=m.height);var t=m,i;try{var a=[s];s.indexOf("webgl")===0&&a.push("experimental-"+s);for(var r=0;r<a.length;r++)if(i=x.getContext(a[r],t),i)return i}catch{i=null}return i||null}},{}],195:[function(e,I,B){I.exports=u;function u(s,m){var x=m[0],t=m[1],i=m[2],a=m[3],r=m[4],n=m[5],f=m[6],l=m[7],o=m[8],c=m[9],v=m[10],d=m[11],p=m[12],y=m[13],g=m[14],A=m[15];return s[0]=n*(v*A-d*g)-c*(f*A-l*g)+y*(f*d-l*v),s[1]=-(t*(v*A-d*g)-c*(i*A-a*g)+y*(i*d-a*v)),s[2]=t*(f*A-l*g)-n*(i*A-a*g)+y*(i*l-a*f),s[3]=-(t*(f*d-l*v)-n*(i*d-a*v)+c*(i*l-a*f)),s[4]=-(r*(v*A-d*g)-o*(f*A-l*g)+p*(f*d-l*v)),s[5]=x*(v*A-d*g)-o*(i*A-a*g)+p*(i*d-a*v),s[6]=-(x*(f*A-l*g)-r*(i*A-a*g)+p*(i*l-a*f)),s[7]=x*(f*d-l*v)-r*(i*d-a*v)+o*(i*l-a*f),s[8]=r*(c*A-d*y)-o*(n*A-l*y)+p*(n*d-l*c),s[9]=-(x*(c*A-d*y)-o*(t*A-a*y)+p*(t*d-a*c)),s[10]=x*(n*A-l*y)-r*(t*A-a*y)+p*(t*l-a*n),s[11]=-(x*(n*d-l*c)-r*(t*d-a*c)+o*(t*l-a*n)),s[12]=-(r*(c*g-v*y)-o*(n*g-f*y)+p*(n*v-f*c)),s[13]=x*(c*g-v*y)-o*(t*g-i*y)+p*(t*v-i*c),s[14]=-(x*(n*g-f*y)-r*(t*g-i*y)+p*(t*f-i*n)),s[15]=x*(n*v-f*c)-r*(t*v-i*c)+o*(t*f-i*n),s}},{}],196:[function(e,I,B){I.exports=u;function u(s){var m=new Float32Array(16);return m[0]=s[0],m[1]=s[1],m[2]=s[2],m[3]=s[3],m[4]=s[4],m[5]=s[5],m[6]=s[6],m[7]=s[7],m[8]=s[8],m[9]=s[9],m[10]=s[10],m[11]=s[11],m[12]=s[12],m[13]=s[13],m[14]=s[14],m[15]=s[15],m}},{}],197:[function(e,I,B){I.exports=u;function u(s,m){return s[0]=m[0],s[1]=m[1],s[2]=m[2],s[3]=m[3],s[4]=m[4],s[5]=m[5],s[6]=m[6],s[7]=m[7],s[8]=m[8],s[9]=m[9],s[10]=m[10],s[11]=m[11],s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15],s}},{}],198:[function(e,I,B){I.exports=u;function u(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],199:[function(e,I,B){I.exports=u;function u(s){var m=s[0],x=s[1],t=s[2],i=s[3],a=s[4],r=s[5],n=s[6],f=s[7],l=s[8],o=s[9],c=s[10],v=s[11],d=s[12],p=s[13],y=s[14],g=s[15],A=m*r-x*a,b=m*n-t*a,M=m*f-i*a,w=x*n-t*r,T=x*f-i*r,_=t*f-i*n,h=l*p-o*d,L=l*y-c*d,S=l*g-v*d,k=o*y-c*p,P=o*g-v*p,O=c*g-v*y;return A*O-b*P+M*k+w*S-T*L+_*h}},{}],200:[function(e,I,B){I.exports=u;function u(s,m){var x=m[0],t=m[1],i=m[2],a=m[3],r=x+x,n=t+t,f=i+i,l=x*r,o=t*r,c=t*n,v=i*r,d=i*n,p=i*f,y=a*r,g=a*n,A=a*f;return s[0]=1-c-p,s[1]=o+A,s[2]=v-g,s[3]=0,s[4]=o-A,s[5]=1-l-p,s[6]=d+y,s[7]=0,s[8]=v+g,s[9]=d-y,s[10]=1-l-c,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],201:[function(e,I,B){I.exports=u;function u(s,m,x){var t,i,a,r=x[0],n=x[1],f=x[2],l=Math.sqrt(r*r+n*n+f*f);return Math.abs(l)<1e-6?null:(l=1/l,r*=l,n*=l,f*=l,t=Math.sin(m),i=Math.cos(m),a=1-i,s[0]=r*r*a+i,s[1]=n*r*a+f*t,s[2]=f*r*a-n*t,s[3]=0,s[4]=r*n*a-f*t,s[5]=n*n*a+i,s[6]=f*n*a+r*t,s[7]=0,s[8]=r*f*a+n*t,s[9]=n*f*a-r*t,s[10]=f*f*a+i,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}},{}],202:[function(e,I,B){I.exports=u;function u(s,m,x){var t=m[0],i=m[1],a=m[2],r=m[3],n=t+t,f=i+i,l=a+a,o=t*n,c=t*f,v=t*l,d=i*f,p=i*l,y=a*l,g=r*n,A=r*f,b=r*l;return s[0]=1-(d+y),s[1]=c+b,s[2]=v-A,s[3]=0,s[4]=c-b,s[5]=1-(o+y),s[6]=p+g,s[7]=0,s[8]=v+A,s[9]=p-g,s[10]=1-(o+d),s[11]=0,s[12]=x[0],s[13]=x[1],s[14]=x[2],s[15]=1,s}},{}],203:[function(e,I,B){I.exports=u;function u(s,m){return s[0]=m[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=m[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=m[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],204:[function(e,I,B){I.exports=u;function u(s,m){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=m[0],s[13]=m[1],s[14]=m[2],s[15]=1,s}},{}],205:[function(e,I,B){I.exports=u;function u(s,m){var x=Math.sin(m),t=Math.cos(m);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=t,s[6]=x,s[7]=0,s[8]=0,s[9]=-x,s[10]=t,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],206:[function(e,I,B){I.exports=u;function u(s,m){var x=Math.sin(m),t=Math.cos(m);return s[0]=t,s[1]=0,s[2]=-x,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=x,s[9]=0,s[10]=t,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],207:[function(e,I,B){I.exports=u;function u(s,m){var x=Math.sin(m),t=Math.cos(m);return s[0]=t,s[1]=x,s[2]=0,s[3]=0,s[4]=-x,s[5]=t,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],208:[function(e,I,B){I.exports=u;function u(s,m,x,t,i,a,r){var n=1/(x-m),f=1/(i-t),l=1/(a-r);return s[0]=a*2*n,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a*2*f,s[6]=0,s[7]=0,s[8]=(x+m)*n,s[9]=(i+t)*f,s[10]=(r+a)*l,s[11]=-1,s[12]=0,s[13]=0,s[14]=r*a*2*l,s[15]=0,s}},{}],209:[function(e,I,B){I.exports=u;function u(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],210:[function(e,I,B){I.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(e,I,B){I.exports=u;function u(s,m){var x=m[0],t=m[1],i=m[2],a=m[3],r=m[4],n=m[5],f=m[6],l=m[7],o=m[8],c=m[9],v=m[10],d=m[11],p=m[12],y=m[13],g=m[14],A=m[15],b=x*n-t*r,M=x*f-i*r,w=x*l-a*r,T=t*f-i*n,_=t*l-a*n,h=i*l-a*f,L=o*y-c*p,S=o*g-v*p,k=o*A-d*p,P=c*g-v*y,O=c*A-d*y,F=v*A-d*g,D=b*F-M*O+w*P+T*k-_*S+h*L;return D?(D=1/D,s[0]=(n*F-f*O+l*P)*D,s[1]=(i*O-t*F-a*P)*D,s[2]=(y*h-g*_+A*T)*D,s[3]=(v*_-c*h-d*T)*D,s[4]=(f*k-r*F-l*S)*D,s[5]=(x*F-i*k+a*S)*D,s[6]=(g*w-p*h-A*M)*D,s[7]=(o*h-v*w+d*M)*D,s[8]=(r*O-n*k+l*L)*D,s[9]=(t*k-x*O-a*L)*D,s[10]=(p*_-y*w+A*b)*D,s[11]=(c*w-o*_-d*b)*D,s[12]=(n*S-r*P-f*L)*D,s[13]=(x*P-t*S+i*L)*D,s[14]=(y*M-p*T-g*b)*D,s[15]=(o*T-c*M+v*b)*D,s):null}},{}],212:[function(e,I,B){var u=e("./identity");I.exports=s;function s(m,x,t,i){var a,r,n,f,l,o,c,v,d,p,y=x[0],g=x[1],A=x[2],b=i[0],M=i[1],w=i[2],T=t[0],_=t[1],h=t[2];return Math.abs(y-T)<1e-6&&Math.abs(g-_)<1e-6&&Math.abs(A-h)<1e-6?u(m):(c=y-T,v=g-_,d=A-h,p=1/Math.sqrt(c*c+v*v+d*d),c*=p,v*=p,d*=p,a=M*d-w*v,r=w*c-b*d,n=b*v-M*c,p=Math.sqrt(a*a+r*r+n*n),p?(p=1/p,a*=p,r*=p,n*=p):(a=0,r=0,n=0),f=v*n-d*r,l=d*a-c*n,o=c*r-v*a,p=Math.sqrt(f*f+l*l+o*o),p?(p=1/p,f*=p,l*=p,o*=p):(f=0,l=0,o=0),m[0]=a,m[1]=f,m[2]=c,m[3]=0,m[4]=r,m[5]=l,m[6]=v,m[7]=0,m[8]=n,m[9]=o,m[10]=d,m[11]=0,m[12]=-(a*y+r*g+n*A),m[13]=-(f*y+l*g+o*A),m[14]=-(c*y+v*g+d*A),m[15]=1,m)}},{"./identity":209}],213:[function(e,I,B){I.exports=u;function u(s,m,x){var t=m[0],i=m[1],a=m[2],r=m[3],n=m[4],f=m[5],l=m[6],o=m[7],c=m[8],v=m[9],d=m[10],p=m[11],y=m[12],g=m[13],A=m[14],b=m[15],M=x[0],w=x[1],T=x[2],_=x[3];return s[0]=M*t+w*n+T*c+_*y,s[1]=M*i+w*f+T*v+_*g,s[2]=M*a+w*l+T*d+_*A,s[3]=M*r+w*o+T*p+_*b,M=x[4],w=x[5],T=x[6],_=x[7],s[4]=M*t+w*n+T*c+_*y,s[5]=M*i+w*f+T*v+_*g,s[6]=M*a+w*l+T*d+_*A,s[7]=M*r+w*o+T*p+_*b,M=x[8],w=x[9],T=x[10],_=x[11],s[8]=M*t+w*n+T*c+_*y,s[9]=M*i+w*f+T*v+_*g,s[10]=M*a+w*l+T*d+_*A,s[11]=M*r+w*o+T*p+_*b,M=x[12],w=x[13],T=x[14],_=x[15],s[12]=M*t+w*n+T*c+_*y,s[13]=M*i+w*f+T*v+_*g,s[14]=M*a+w*l+T*d+_*A,s[15]=M*r+w*o+T*p+_*b,s}},{}],214:[function(e,I,B){I.exports=u;function u(s,m,x,t,i,a,r){var n=1/(m-x),f=1/(t-i),l=1/(a-r);return s[0]=-2*n,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*f,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*l,s[11]=0,s[12]=(m+x)*n,s[13]=(i+t)*f,s[14]=(r+a)*l,s[15]=1,s}},{}],215:[function(e,I,B){I.exports=u;function u(s,m,x,t,i){var a=1/Math.tan(m/2),r=1/(t-i);return s[0]=a/x,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(i+t)*r,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*i*t*r,s[15]=0,s}},{}],216:[function(e,I,B){I.exports=u;function u(s,m,x,t){var i=Math.tan(m.upDegrees*Math.PI/180),a=Math.tan(m.downDegrees*Math.PI/180),r=Math.tan(m.leftDegrees*Math.PI/180),n=Math.tan(m.rightDegrees*Math.PI/180),f=2/(r+n),l=2/(i+a);return s[0]=f,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=l,s[6]=0,s[7]=0,s[8]=-((r-n)*f*.5),s[9]=(i-a)*l*.5,s[10]=t/(x-t),s[11]=-1,s[12]=0,s[13]=0,s[14]=t*x/(x-t),s[15]=0,s}},{}],217:[function(e,I,B){I.exports=u;function u(s,m,x,t){var i=t[0],a=t[1],r=t[2],n=Math.sqrt(i*i+a*a+r*r),f,l,o,c,v,d,p,y,g,A,b,M,w,T,_,h,L,S,k,P,O,F,D,R;return Math.abs(n)<1e-6?null:(n=1/n,i*=n,a*=n,r*=n,f=Math.sin(x),l=Math.cos(x),o=1-l,c=m[0],v=m[1],d=m[2],p=m[3],y=m[4],g=m[5],A=m[6],b=m[7],M=m[8],w=m[9],T=m[10],_=m[11],h=i*i*o+l,L=a*i*o+r*f,S=r*i*o-a*f,k=i*a*o-r*f,P=a*a*o+l,O=r*a*o+i*f,F=i*r*o+a*f,D=a*r*o-i*f,R=r*r*o+l,s[0]=c*h+y*L+M*S,s[1]=v*h+g*L+w*S,s[2]=d*h+A*L+T*S,s[3]=p*h+b*L+_*S,s[4]=c*k+y*P+M*O,s[5]=v*k+g*P+w*O,s[6]=d*k+A*P+T*O,s[7]=p*k+b*P+_*O,s[8]=c*F+y*D+M*R,s[9]=v*F+g*D+w*R,s[10]=d*F+A*D+T*R,s[11]=p*F+b*D+_*R,m!==s&&(s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15]),s)}},{}],218:[function(e,I,B){I.exports=u;function u(s,m,x){var t=Math.sin(x),i=Math.cos(x),a=m[4],r=m[5],n=m[6],f=m[7],l=m[8],o=m[9],c=m[10],v=m[11];return m!==s&&(s[0]=m[0],s[1]=m[1],s[2]=m[2],s[3]=m[3],s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15]),s[4]=a*i+l*t,s[5]=r*i+o*t,s[6]=n*i+c*t,s[7]=f*i+v*t,s[8]=l*i-a*t,s[9]=o*i-r*t,s[10]=c*i-n*t,s[11]=v*i-f*t,s}},{}],219:[function(e,I,B){I.exports=u;function u(s,m,x){var t=Math.sin(x),i=Math.cos(x),a=m[0],r=m[1],n=m[2],f=m[3],l=m[8],o=m[9],c=m[10],v=m[11];return m!==s&&(s[4]=m[4],s[5]=m[5],s[6]=m[6],s[7]=m[7],s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15]),s[0]=a*i-l*t,s[1]=r*i-o*t,s[2]=n*i-c*t,s[3]=f*i-v*t,s[8]=a*t+l*i,s[9]=r*t+o*i,s[10]=n*t+c*i,s[11]=f*t+v*i,s}},{}],220:[function(e,I,B){I.exports=u;function u(s,m,x){var t=Math.sin(x),i=Math.cos(x),a=m[0],r=m[1],n=m[2],f=m[3],l=m[4],o=m[5],c=m[6],v=m[7];return m!==s&&(s[8]=m[8],s[9]=m[9],s[10]=m[10],s[11]=m[11],s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15]),s[0]=a*i+l*t,s[1]=r*i+o*t,s[2]=n*i+c*t,s[3]=f*i+v*t,s[4]=l*i-a*t,s[5]=o*i-r*t,s[6]=c*i-n*t,s[7]=v*i-f*t,s}},{}],221:[function(e,I,B){I.exports=u;function u(s,m,x){var t=x[0],i=x[1],a=x[2];return s[0]=m[0]*t,s[1]=m[1]*t,s[2]=m[2]*t,s[3]=m[3]*t,s[4]=m[4]*i,s[5]=m[5]*i,s[6]=m[6]*i,s[7]=m[7]*i,s[8]=m[8]*a,s[9]=m[9]*a,s[10]=m[10]*a,s[11]=m[11]*a,s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15],s}},{}],222:[function(e,I,B){I.exports=u;function u(s){return"mat4("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+", "+s[6]+", "+s[7]+", "+s[8]+", "+s[9]+", "+s[10]+", "+s[11]+", "+s[12]+", "+s[13]+", "+s[14]+", "+s[15]+")"}},{}],223:[function(e,I,B){I.exports=u;function u(s,m,x){var t=x[0],i=x[1],a=x[2],r,n,f,l,o,c,v,d,p,y,g,A;return m===s?(s[12]=m[0]*t+m[4]*i+m[8]*a+m[12],s[13]=m[1]*t+m[5]*i+m[9]*a+m[13],s[14]=m[2]*t+m[6]*i+m[10]*a+m[14],s[15]=m[3]*t+m[7]*i+m[11]*a+m[15]):(r=m[0],n=m[1],f=m[2],l=m[3],o=m[4],c=m[5],v=m[6],d=m[7],p=m[8],y=m[9],g=m[10],A=m[11],s[0]=r,s[1]=n,s[2]=f,s[3]=l,s[4]=o,s[5]=c,s[6]=v,s[7]=d,s[8]=p,s[9]=y,s[10]=g,s[11]=A,s[12]=r*t+o*i+p*a+m[12],s[13]=n*t+c*i+y*a+m[13],s[14]=f*t+v*i+g*a+m[14],s[15]=l*t+d*i+A*a+m[15]),s}},{}],224:[function(e,I,B){I.exports=u;function u(s,m){if(s===m){var x=m[1],t=m[2],i=m[3],a=m[6],r=m[7],n=m[11];s[1]=m[4],s[2]=m[8],s[3]=m[12],s[4]=x,s[6]=m[9],s[7]=m[13],s[8]=t,s[9]=a,s[11]=m[14],s[12]=i,s[13]=r,s[14]=n}else s[0]=m[0],s[1]=m[4],s[2]=m[8],s[3]=m[12],s[4]=m[1],s[5]=m[5],s[6]=m[9],s[7]=m[13],s[8]=m[2],s[9]=m[6],s[10]=m[10],s[11]=m[14],s[12]=m[3],s[13]=m[7],s[14]=m[11],s[15]=m[15];return s}},{}],225:[function(e,I,B){var u=e("css-font"),s=e("pick-by-alias"),m=e("regl"),x=e("gl-util/context"),t=e("es6-weak-map"),i=e("color-normalize"),a=e("font-atlas"),r=e("typedarray-pool"),n=e("parse-rect"),f=e("is-plain-obj"),l=e("parse-unit"),o=e("to-px"),c=e("detect-kerning"),v=e("object-assign"),d=e("font-measure"),p=e("flatten-vertex-data"),y=e("bit-twiddle"),g=y.nextPow2,A=new t,b=!1;if(document.body){var M=document.body.appendChild(document.createElement("div"));M.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(M).fontStretch&&(b=!0),document.body.removeChild(M)}var w=function(h){T(h)?(h={regl:h},this.gl=h.regl._gl):this.gl=x(h),this.shader=A.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=h.regl||m({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),A.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(f(h)?h:{})};w.prototype.createShader=function(){var h=this.regl,L=h({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:h.prop("count"),offset:h.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:h.this("sizeBuffer")},width:{offset:0,stride:8,buffer:h.this("sizeBuffer")},char:h.this("charBuffer"),position:h.this("position")},uniforms:{atlasSize:function(k,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(k,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(k,P){return P.atlas.texture},charStep:function(k,P){return P.atlas.step},em:function(k,P){return P.atlas.em},color:h.prop("color"),opacity:h.prop("opacity"),viewport:h.this("viewportArray"),scale:h.this("scale"),align:h.prop("align"),baseline:h.prop("baseline"),translate:h.this("translate"),positionOffset:h.prop("positionOffset")},primitive:"points",viewport:h.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:h,draw:L,atlas:S}},w.prototype.update=function(h){var L=this;if(typeof h=="string")h={text:h};else if(!h)return;h=s(h,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),h.opacity!=null&&(Array.isArray(h.opacity)?this.opacity=h.opacity.map(function(Te){return parseFloat(Te)}):this.opacity=parseFloat(h.opacity)),h.viewport!=null&&(this.viewport=n(h.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),h.kerning!=null&&(this.kerning=h.kerning),h.offset!=null&&(typeof h.offset=="number"&&(h.offset=[h.offset,0]),this.positionOffset=p(h.offset)),h.direction&&(this.direction=h.direction),h.range&&(this.range=h.range,this.scale=[1/(h.range[2]-h.range[0]),1/(h.range[3]-h.range[1])],this.translate=[-h.range[0],-h.range[1]]),h.scale&&(this.scale=h.scale),h.translate&&(this.translate=h.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!h.font&&(h.font=w.baseFontSize+"px sans-serif");var S=!1,k=!1;if(h.font&&(Array.isArray(h.font)?h.font:[h.font]).forEach(function(Te,Ie){if(typeof Te=="string")try{Te=u.parse(Te)}catch{Te=u.parse(w.baseFontSize+"px "+Te)}else Te=u.parse(u.stringify(Te));var Ze=u.stringify({size:w.baseFontSize,family:Te.family,stretch:b?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style}),rt=l(Te.size),Ge=Math.round(rt[0]*o(rt[1]));if(Ge!==L.fontSize[Ie]&&(k=!0,L.fontSize[Ie]=Ge),(!L.font[Ie]||Ze!=L.font[Ie].baseString)&&(S=!0,L.font[Ie]=w.fonts[Ze],!L.font[Ie])){var ze=Te.family.join(", "),We=[Te.style];Te.style!=Te.variant&&We.push(Te.variant),Te.variant!=Te.weight&&We.push(Te.weight),b&&Te.weight!=Te.stretch&&We.push(Te.stretch),L.font[Ie]={baseString:Ze,family:ze,weight:Te.weight,stretch:Te.stretch,style:Te.style,variant:Te.variant,width:{},kerning:{},metrics:d(ze,{origin:"top",fontSize:w.baseFontSize,fontStyle:We.join(" ")})},w.fonts[Ze]=L.font[Ie]}}),(S||k)&&this.font.forEach(function(Te,Ie){var Ze=u.stringify({size:L.fontSize[Ie],family:Te.family,stretch:b?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style});if(L.fontAtlas[Ie]=L.shader.atlas[Ze],!L.fontAtlas[Ie]){var rt=Te.metrics;L.shader.atlas[Ze]=L.fontAtlas[Ie]={fontString:Ze,step:Math.ceil(L.fontSize[Ie]*rt.bottom*.5)*2,em:L.fontSize[Ie],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}h.text==null&&(h.text=L.text)}),typeof h.text=="string"&&h.position&&h.position.length>2){for(var P=Array(h.position.length*.5),O=0;O<P.length;O++)P[O]=h.text;h.text=P}var F;if(h.text!=null||S){if(this.textOffsets=[0],Array.isArray(h.text)){this.count=h.text[0].length,this.counts=[this.count];for(var D=1;D<h.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+h.text[D-1].length,this.count+=h.text[D].length,this.counts.push(h.text[D].length);this.text=h.text.join("")}else this.text=h.text,this.count=this.text.length,this.counts=[this.count];F=[],this.font.forEach(function(Te,Ie){w.atlasContext.font=Te.baseString;for(var Ze=L.fontAtlas[Ie],rt=0;rt<L.text.length;rt++){var Ge=L.text.charAt(rt);if(Ze.ids[Ge]==null&&(Ze.ids[Ge]=Ze.chars.length,Ze.chars.push(Ge),F.push(Ge)),Te.width[Ge]==null&&(Te.width[Ge]=w.atlasContext.measureText(Ge).width/w.baseFontSize,L.kerning)){var ze=[];for(var We in Te.width)ze.push(We+Ge,Ge+We);v(Te.kerning,c(Te.family,{pairs:ze}))}}})}if(h.position)if(h.position.length>2){for(var R=!h.position[0].length,U=r.mallocFloat(this.count*2),N=0,X=0;N<this.counts.length;N++){var j=this.counts[N];if(R)for(var ee=0;ee<j;ee++)U[X++]=h.position[N*2],U[X++]=h.position[N*2+1];else for(var q=0;q<j;q++)U[X++]=h.position[N][0],U[X++]=h.position[N][1]}this.position.call?this.position({type:"float",data:U}):this.position=this.regl.buffer({type:"float",data:U}),r.freeFloat(U)}else this.position.destroy&&this.position.destroy(),this.position={constant:h.position};if(h.text||S){var G=r.mallocUint8(this.count),J=r.mallocFloat(this.count*2);this.textWidth=[];for(var le=0,fe=0;le<this.counts.length;le++){for(var se=this.counts[le],V=this.font[le]||this.font[0],Y=this.fontAtlas[le]||this.fontAtlas[0],ne=0;ne<se;ne++){var te=this.text.charAt(fe),K=this.text.charAt(fe-1);if(G[fe]=Y.ids[te],J[fe*2]=V.width[te],ne){var $=J[fe*2-2],ae=J[fe*2],ie=J[fe*2-1],oe=ie+$*.5+ae*.5;if(this.kerning){var ue=V.kerning[K+te];ue&&(oe+=ue*.001)}J[fe*2+1]=oe}else J[fe*2+1]=J[fe*2]*.5;fe++}this.textWidth.push(J.length?J[fe*2-2]*.5+J[fe*2-1]:0)}h.align||(h.align=this.align),this.charBuffer({data:G,type:"uint8",usage:"stream"}),this.sizeBuffer({data:J,type:"float",usage:"stream"}),r.freeUint8(G),r.freeFloat(J),F.length&&this.font.forEach(function(Te,Ie){var Ze=L.fontAtlas[Ie],rt=Ze.step,Ge=Math.floor(w.maxAtlasSize/rt),ze=Math.min(Ge,Ze.chars.length),We=Math.ceil(Ze.chars.length/ze),mt=g(ze*rt),Ft=g(We*rt);Ze.width=mt,Ze.height=Ft,Ze.rows=We,Ze.cols=ze,!!Ze.em&&Ze.texture({data:a({canvas:w.atlasCanvas,font:Ze.fontString,chars:Ze.chars,shape:[mt,Ft],step:[rt,rt]})})})}if(h.align&&(this.align=h.align,this.alignOffset=this.textWidth.map(function(Te,Ie){var Ze=Array.isArray(L.align)?L.align.length>1?L.align[Ie]:L.align[0]:L.align;if(typeof Ze=="number")return Ze;switch(Ze){case"right":case"end":return-Te;case"center":case"centre":case"middle":return-Te*.5}return 0})),this.baseline==null&&h.baseline==null&&(h.baseline=0),h.baseline!=null&&(this.baseline=h.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Te,Ie){var Ze=(L.font[Ie]||L.font[0]).metrics,rt=0;return rt+=Ze.bottom*.5,typeof Te=="number"?rt+=Te-Ze.baseline:rt+=-Ze[Te],rt*=-1,rt})),h.color!=null)if(h.color||(h.color="transparent"),typeof h.color=="string"||!isNaN(h.color))this.color=i(h.color,"uint8");else{var xe;if(typeof h.color[0]=="number"&&h.color.length>this.counts.length){var he=h.color.length;xe=r.mallocUint8(he);for(var me=(h.color.subarray||h.color.slice).bind(h.color),be=0;be<he;be+=4)xe.set(i(me(be,be+4),"uint8"),be)}else{var Ce=h.color.length;xe=r.mallocUint8(Ce*4);for(var Se=0;Se<Ce;Se++)xe.set(i(h.color[Se]||0,"uint8"),Se*4)}this.color=xe}if(h.position||h.text||h.color||h.baseline||h.align||h.font||h.offset||h.opacity){var Be=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Be){var Ye=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Ye);for(var Xe=0;Xe<this.batch.length;Xe++)this.batch[Xe]={count:this.counts.length>1?this.counts[Xe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Xe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Xe*4,Xe*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Xe]:this.opacity,baseline:this.baselineOffset[Xe]!=null?this.baselineOffset[Xe]:this.baselineOffset[0],align:this.align?this.alignOffset[Xe]!=null?this.alignOffset[Xe]:this.alignOffset[0]:0,atlas:this.fontAtlas[Xe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Xe*2,Xe*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={};function T(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer}I.exports=w},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(e,I,B){(function(u){(function(){var s=e("pick-by-alias");I.exports=function(n){if(n?typeof n=="string"&&(n={container:n}):n={},x(n)?n={container:n}:t(n)?n={container:n}:i(n)?n={gl:n}:n=s(n,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),n.pixelRatio||(n.pixelRatio=u.pixelRatio||1),n.gl)return n.gl;if(n.canvas&&(n.container=n.canvas.parentNode),n.container){if(typeof n.container=="string"){var f=document.querySelector(n.container);if(!f)throw Error("Element "+n.container+" is not found");n.container=f}x(n.container)?(n.canvas=n.container,n.container=n.canvas.parentNode):n.canvas||(n.canvas=a(),n.container.appendChild(n.canvas),m(n))}else if(!n.canvas)if(typeof document!="undefined")n.container=document.body||document.documentElement,n.canvas=a(),n.container.appendChild(n.canvas),m(n);else throw Error("Not DOM environment. Use headless-gl.");return n.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(l){try{n.gl=n.canvas.getContext(l,n.attrs)}catch{}return n.gl}),n.gl};function m(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*u.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*u.innerHeight);else{var n=r.container.getBoundingClientRect();r.canvas.width=r.width||n.right-n.left,r.canvas.height=r.height||n.bottom-n.top}}function x(r){return typeof r.getContext=="function"&&"width"in r&&"height"in r}function t(r){return typeof r.nodeName=="string"&&typeof r.appendChild=="function"&&typeof r.getBoundingClientRect=="function"}function i(r){return typeof r.drawArrays=="function"||typeof r.drawElements=="function"}function a(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"pick-by-alias":253}],227:[function(e,I,B){I.exports=function(u){typeof u=="string"&&(u=[u]);for(var s=[].slice.call(arguments,1),m=[],x=0;x<u.length-1;x++)m.push(u[x],s[x]||"");return m.push(u[x]),m.join("")}},{}],228:[function(e,I,B){(function(u){(function(){var s=e("is-browser"),m;typeof u.matchMedia=="function"?m=!u.matchMedia("(hover: none)").matches:m=s,I.exports=m}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"is-browser":232}],229:[function(e,I,B){var u=e("is-browser");function s(){var m=!1;try{var x=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,x),window.removeEventListener("test",null,x)}catch{m=!1}return m}I.exports=u&&s()},{"is-browser":232}],230:[function(e,I,B){B.read=function(u,s,m,x,t){var i,a,r=t*8-x-1,n=(1<<r)-1,f=n>>1,l=-7,o=m?t-1:0,c=m?-1:1,v=u[s+o];for(o+=c,i=v&(1<<-l)-1,v>>=-l,l+=r;l>0;i=i*256+u[s+o],o+=c,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=x;l>0;a=a*256+u[s+o],o+=c,l-=8);if(i===0)i=1-f;else{if(i===n)return a?NaN:(v?-1:1)*(1/0);a=a+Math.pow(2,x),i=i-f}return(v?-1:1)*a*Math.pow(2,i-x)},B.write=function(u,s,m,x,t,i){var a,r,n,f=i*8-t-1,l=(1<<f)-1,o=l>>1,c=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=x?0:i-1,d=x?1:-1,p=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(r=isNaN(s)?1:0,a=l):(a=Math.floor(Math.log(s)/Math.LN2),s*(n=Math.pow(2,-a))<1&&(a--,n*=2),a+o>=1?s+=c/n:s+=c*Math.pow(2,1-o),s*n>=2&&(a++,n/=2),a+o>=l?(r=0,a=l):a+o>=1?(r=(s*n-1)*Math.pow(2,t),a=a+o):(r=s*Math.pow(2,o-1)*Math.pow(2,t),a=0));t>=8;u[m+v]=r&255,v+=d,r/=256,t-=8);for(a=a<<t|r,f+=t;f>0;u[m+v]=a&255,v+=d,a/=256,f-=8);u[m+v-d]|=p*128}},{}],231:[function(e,I,B){typeof Object.create=="function"?I.exports=function(s,m){m&&(s.super_=m,s.prototype=Object.create(m.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:I.exports=function(s,m){if(m){s.super_=m;var x=function(){};x.prototype=m.prototype,s.prototype=new x,s.prototype.constructor=s}}},{}],232:[function(e,I,B){I.exports=!0},{}],233:[function(e,I,B){I.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(e,I,B){I.exports=m,I.exports.isMobile=m,I.exports.default=m;var u=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function m(x){x||(x={});var t=x.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var i=x.tablet?s.test(t):u.test(t);return!i&&x.tablet&&x.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(i=!0),i}},{}],235:[function(e,I,B){I.exports=function(u){var s=typeof u;return u!==null&&(s==="object"||s==="function")}},{}],236:[function(e,I,B){var u=Object.prototype.toString;I.exports=function(s){var m;return u.call(s)==="[object Object]"&&(m=Object.getPrototypeOf(s),m===null||m===Object.getPrototypeOf({}))}},{}],237:[function(e,I,B){I.exports=function(u){for(var s=u.length,m,x=0;x<s;x++)if(m=u.charCodeAt(x),(m<9||m>13)&&m!==32&&m!==133&&m!==160&&m!==5760&&m!==6158&&(m<8192||m>8205)&&m!==8232&&m!==8233&&m!==8239&&m!==8287&&m!==8288&&m!==12288&&m!==65279)return!1;return!0}},{}],238:[function(e,I,B){I.exports=function(s){return typeof s!="string"?!1:(s=s.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(s)&&/[\dz]$/i.test(s)&&s.length>4))}},{}],239:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?I.exports=s():(u=u||self,u.mapboxgl=s())})(this,function(){var u,s,m;function x(t,i){if(!u)u=i;else if(!s)s=i;else{var a="var sharedChunk = {}; ("+u+")(sharedChunk); ("+s+")(sharedChunk);",r={};u(r),m=i(r),m.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}}return x(["exports"],function(t){function i(E,C){return C={exports:{}},E(C,C.exports),C.exports}var a="1.10.1",r=n;function n(E,C,H,re){this.cx=3*E,this.bx=3*(H-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*(re-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=re,this.p2x=H,this.p2y=re}n.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},n.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},n.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},n.prototype.solveCurveX=function(E,C){typeof C=="undefined"&&(C=1e-6);var H,re,de,we,ke;for(de=E,ke=0;ke<8;ke++){if(we=this.sampleCurveX(de)-E,Math.abs(we)<C)return de;var Ne=this.sampleCurveDerivativeX(de);if(Math.abs(Ne)<1e-6)break;de=de-we/Ne}if(H=0,re=1,de=E,de<H)return H;if(de>re)return re;for(;H<re;){if(we=this.sampleCurveX(de),Math.abs(we-E)<C)return de;E>we?H=de:re=de,de=(re-H)*.5+H}return de},n.prototype.solve=function(E,C){return this.sampleCurveY(this.solveCurveX(E,C))};var f=l;function l(E,C){this.x=E,this.y=C}l.prototype={clone:function(){return new l(this.x,this.y)},add:function(E){return this.clone()._add(E)},sub:function(E){return this.clone()._sub(E)},multByPoint:function(E){return this.clone()._multByPoint(E)},divByPoint:function(E){return this.clone()._divByPoint(E)},mult:function(E){return this.clone()._mult(E)},div:function(E){return this.clone()._div(E)},rotate:function(E){return this.clone()._rotate(E)},rotateAround:function(E,C){return this.clone()._rotateAround(E,C)},matMult:function(E){return this.clone()._matMult(E)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(E){return this.x===E.x&&this.y===E.y},dist:function(E){return Math.sqrt(this.distSqr(E))},distSqr:function(E){var C=E.x-this.x,H=E.y-this.y;return C*C+H*H},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(E){return Math.atan2(this.y-E.y,this.x-E.x)},angleWith:function(E){return this.angleWithSep(E.x,E.y)},angleWithSep:function(E,C){return Math.atan2(this.x*C-this.y*E,this.x*E+this.y*C)},_matMult:function(E){var C=E[0]*this.x+E[1]*this.y,H=E[2]*this.x+E[3]*this.y;return this.x=C,this.y=H,this},_add:function(E){return this.x+=E.x,this.y+=E.y,this},_sub:function(E){return this.x-=E.x,this.y-=E.y,this},_mult:function(E){return this.x*=E,this.y*=E,this},_div:function(E){return this.x/=E,this.y/=E,this},_multByPoint:function(E){return this.x*=E.x,this.y*=E.y,this},_divByPoint:function(E){return this.x/=E.x,this.y/=E.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var E=this.y;return this.y=this.x,this.x=-E,this},_rotate:function(E){var C=Math.cos(E),H=Math.sin(E),re=C*this.x-H*this.y,de=H*this.x+C*this.y;return this.x=re,this.y=de,this},_rotateAround:function(E,C){var H=Math.cos(E),re=Math.sin(E),de=C.x+H*(this.x-C.x)-re*(this.y-C.y),we=C.y+re*(this.x-C.x)+H*(this.y-C.y);return this.x=de,this.y=we,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},l.convert=function(E){return E instanceof l?E:Array.isArray(E)?new l(E[0],E[1]):E};function o(E,C){if(Array.isArray(E)){if(!Array.isArray(C)||E.length!==C.length)return!1;for(var H=0;H<E.length;H++)if(!o(E[H],C[H]))return!1;return!0}if(typeof E=="object"&&E!==null&&C!==null){if(typeof C!="object")return!1;var re=Object.keys(E);if(re.length!==Object.keys(C).length)return!1;for(var de in E)if(!o(E[de],C[de]))return!1;return!0}return E===C}function c(E){if(E<=0)return 0;if(E>=1)return 1;var C=E*E,H=C*E;return 4*(E<.5?H:3*(E-C)+H-.75)}function v(E,C,H,re){var de=new r(E,C,H,re);return function(we){return de.solve(we)}}var d=v(.25,.1,.25,1);function p(E,C,H){return Math.min(H,Math.max(C,E))}function y(E,C,H){var re=H-C,de=((E-C)%re+re)%re+C;return de===C?H:de}function g(E,C,H){if(!E.length)return H(null,[]);var re=E.length,de=new Array(E.length),we=null;E.forEach(function(ke,Ne){C(ke,function(at,pt){at&&(we=at),de[Ne]=pt,--re==0&&H(we,de)})})}function A(E){var C=[];for(var H in E)C.push(E[H]);return C}function b(E,C){var H=[];for(var re in E)re in C||H.push(re);return H}function M(E){for(var C=[],H=arguments.length-1;H-- >0;)C[H]=arguments[H+1];for(var re=0,de=C;re<de.length;re+=1){var we=de[re];for(var ke in we)E[ke]=we[ke]}return E}function w(E,C){for(var H={},re=0;re<C.length;re++){var de=C[re];de in E&&(H[de]=E[de])}return H}var T=1;function _(){return T++}function h(){function E(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}return E()}function L(E){return E?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E):!1}function S(E,C){E.forEach(function(H){!C[H]||(C[H]=C[H].bind(C))})}function k(E,C){return E.indexOf(C,E.length-C.length)!==-1}function P(E,C,H){var re={};for(var de in E)re[de]=C.call(H||this,E[de],de,E);return re}function O(E,C,H){var re={};for(var de in E)C.call(H||this,E[de],de,E)&&(re[de]=E[de]);return re}function F(E){return Array.isArray(E)?E.map(F):typeof E=="object"&&E?P(E,F):E}function D(E,C){for(var H=0;H<E.length;H++)if(C.indexOf(E[H])>=0)return!0;return!1}var R={};function U(E){R[E]||(typeof console!="undefined"&&console.warn(E),R[E]=!0)}function N(E,C,H){return(H.y-E.y)*(C.x-E.x)>(C.y-E.y)*(H.x-E.x)}function X(E){for(var C=0,H=0,re=E.length,de=re-1,we=void 0,ke=void 0;H<re;de=H++)we=E[H],ke=E[de],C+=(ke.x-we.x)*(we.y+ke.y);return C}function j(E){var C=E[0],H=E[1],re=E[2];return H+=90,H*=Math.PI/180,re*=Math.PI/180,{x:C*Math.cos(H)*Math.sin(re),y:C*Math.sin(H)*Math.sin(re),z:C*Math.cos(re)}}function ee(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function q(E){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,H={};if(E.replace(C,function(de,we,ke,Ne){var at=ke||Ne;return H[we]=at?at.toLowerCase():!0,""}),H["max-age"]){var re=parseInt(H["max-age"],10);isNaN(re)?delete H["max-age"]:H["max-age"]=re}return H}var G=null;function J(E){if(G==null){var C=E.navigator?E.navigator.userAgent:null;G=!!E.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return G}function le(E){try{var C=self[E];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}function fe(E){return self.btoa(encodeURIComponent(E).replace(/%([0-9A-F]{2})/g,function(C,H){return String.fromCharCode(Number("0x"+H))}))}function se(E){return decodeURIComponent(self.atob(E).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var V=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Y=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ne=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,te,K,$={now:V,frame:function(C){var H=Y(C);return{cancel:function(){return ne(H)}}},getImageData:function(C,H){H===void 0&&(H=0);var re=self.document.createElement("canvas"),de=re.getContext("2d");if(!de)throw new Error("failed to create canvas 2d context");return re.width=C.width,re.height=C.height,de.drawImage(C,0,0,C.width,C.height),de.getImageData(-H,-H,C.width+2*H,C.height+2*H)},resolveURL:function(C){return te||(te=self.document.createElement("a")),te.href=C,te.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(K==null&&(K=self.matchMedia("(prefers-reduced-motion: reduce)")),K.matches):!1}},ae={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ie={supported:!1,testSupport:me},oe,ue=!1,xe,he=!1;self.document&&(xe=self.document.createElement("img"),xe.onload=function(){oe&&be(oe),oe=null,he=!0},xe.onerror=function(){ue=!0,oe=null},xe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function me(E){ue||!xe||(he?be(E):oe=E)}function be(E){var C=E.createTexture();E.bindTexture(E.TEXTURE_2D,C);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,xe),E.isContextLost())return;ie.supported=!0}catch{}E.deleteTexture(C),ue=!0}var Ce="01";function Se(){for(var E="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",H="",re=0;re<10;re++)H+=C[Math.floor(Math.random()*62)];var de=12*60*60*1e3,we=[E,Ce,H].join(""),ke=Date.now()+de;return{token:we,tokenExpiresAt:ke}}var Be=function(C,H){this._transformRequestFn=C,this._customAccessToken=H,this._createSkuToken()};Be.prototype._createSkuToken=function(){var C=Se();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},Be.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Be.prototype.transformRequest=function(C,H){return this._transformRequestFn?this._transformRequestFn(C,H)||{url:C}:{url:C}},Be.prototype.normalizeStyleURL=function(C,H){if(!Ye(C))return C;var re=Ge(C);return re.path="/styles/v1"+re.path,this._makeAPIURL(re,this._customAccessToken||H)},Be.prototype.normalizeGlyphsURL=function(C,H){if(!Ye(C))return C;var re=Ge(C);return re.path="/fonts/v1"+re.path,this._makeAPIURL(re,this._customAccessToken||H)},Be.prototype.normalizeSourceURL=function(C,H){if(!Ye(C))return C;var re=Ge(C);return re.path="/v4/"+re.authority+".json",re.params.push("secure"),this._makeAPIURL(re,this._customAccessToken||H)},Be.prototype.normalizeSpriteURL=function(C,H,re,de){var we=Ge(C);return Ye(C)?(we.path="/styles/v1"+we.path+"/sprite"+H+re,this._makeAPIURL(we,this._customAccessToken||de)):(we.path+=""+H+re,ze(we))},Be.prototype.normalizeTileURL=function(C,H){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!Ye(C))return C;var re=Ge(C),de=/(\.(png|jpg)\d*)(?=$)/,we=/^.+\/v4\//,ke=$.devicePixelRatio>=2||H===512?"@2x":"",Ne=ie.supported?".webp":"$1";re.path=re.path.replace(de,""+ke+Ne),re.path=re.path.replace(we,"/"),re.path="/v4"+re.path;var at=this._customAccessToken||Ze(re.params)||ae.ACCESS_TOKEN;return ae.REQUIRE_ACCESS_TOKEN&&at&&this._skuToken&&re.params.push("sku="+this._skuToken),this._makeAPIURL(re,at)},Be.prototype.canonicalizeTileURL=function(C,H){var re="/v4/",de=/\.[\w]+$/,we=Ge(C);if(!we.path.match(/(^\/v4\/)/)||!we.path.match(de))return C;var ke="mapbox://tiles/";ke+=we.path.replace(re,"");var Ne=we.params;return H&&(Ne=Ne.filter(function(at){return!at.match(/^access_token=/)})),Ne.length&&(ke+="?"+Ne.join("&")),ke},Be.prototype.canonicalizeTileset=function(C,H){for(var re=H?Ye(H):!1,de=[],we=0,ke=C.tiles||[];we<ke.length;we+=1){var Ne=ke[we];Te(Ne)?de.push(this.canonicalizeTileURL(Ne,re)):de.push(Ne)}return de},Be.prototype._makeAPIURL=function(C,H){var re="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",de=Ge(ae.API_URL);if(C.protocol=de.protocol,C.authority=de.authority,de.path!=="/"&&(C.path=""+de.path+C.path),!ae.REQUIRE_ACCESS_TOKEN)return ze(C);if(H=H||ae.ACCESS_TOKEN,!H)throw new Error("An API access token is required to use Mapbox GL. "+re);if(H[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+re);return C.params=C.params.filter(function(we){return we.indexOf("access_token")===-1}),C.params.push("access_token="+H),ze(C)};function Ye(E){return E.indexOf("mapbox:")===0}var Xe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Te(E){return Xe.test(E)}function Ie(E){return E.indexOf("sku=")>0&&Te(E)}function Ze(E){for(var C=0,H=E;C<H.length;C+=1){var re=H[C],de=re.match(/^access_token=(.*)$/);if(de)return de[1]}return null}var rt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ge(E){var C=E.match(rt);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}function ze(E){var C=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+C}var We="mapbox.eventData";function mt(E){if(!E)return null;var C=E.split(".");if(!C||C.length!==3)return null;try{var H=JSON.parse(se(C[1]));return H}catch{return null}}var Ft=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ft.prototype.getStorageKey=function(C){var H=mt(ae.ACCESS_TOKEN),re="";return H&&H.u?re=fe(H.u):re=ae.ACCESS_TOKEN||"",C?We+"."+C+":"+re:We+":"+re},Ft.prototype.fetchEventData=function(){var C=le("localStorage"),H=this.getStorageKey(),re=this.getStorageKey("uuid");if(C)try{var de=self.localStorage.getItem(H);de&&(this.eventData=JSON.parse(de));var we=self.localStorage.getItem(re);we&&(this.anonId=we)}catch{U("Unable to read from LocalStorage")}},Ft.prototype.saveEventData=function(){var C=le("localStorage"),H=this.getStorageKey(),re=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(re,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(H,JSON.stringify(this.eventData))}catch{U("Unable to write to LocalStorage")}},Ft.prototype.processRequests=function(C){},Ft.prototype.postEvent=function(C,H,re,de){var we=this;if(!!ae.EVENTS_URL){var ke=Ge(ae.EVENTS_URL);ke.params.push("access_token="+(de||ae.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:a,skuId:Ce,userId:this.anonId},at=H?M(Ne,H):Ne,pt={url:ze(ke),headers:{"Content-Type":"text/plain"},body:JSON.stringify([at])};this.pendingRequest=Ke(pt,function(bt){we.pendingRequest=null,re(bt),we.saveEventData(),we.processRequests(de)})}},Ft.prototype.queueRequest=function(C,H){this.queue.push(C),this.processRequests(H)};var Xt=function(E){function C(){E.call(this,"map.load"),this.success={},this.skuToken=""}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=function(re,de,we,ke){this.skuToken=we,(ae.EVENTS_URL&&ke||ae.ACCESS_TOKEN&&Array.isArray(re)&&re.some(function(Ne){return Ye(Ne)||Te(Ne)}))&&this.queueRequest({id:de,timestamp:Date.now()},ke)},C.prototype.processRequests=function(re){var de=this;if(!(this.pendingRequest||this.queue.length===0)){var we=this.queue.shift(),ke=we.id,Ne=we.timestamp;ke&&this.success[ke]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=h()),this.postEvent(Ne,{skuToken:this.skuToken},function(at){at||ke&&(de.success[ke]=!0)},re))}},C}(Ft),Pt=function(E){function C(H){E.call(this,"appUserTurnstile"),this._customAccessToken=H}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=function(re,de){ae.EVENTS_URL&&ae.ACCESS_TOKEN&&Array.isArray(re)&&re.some(function(we){return Ye(we)||Te(we)})&&this.queueRequest(Date.now(),de)},C.prototype.processRequests=function(re){var de=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var we=mt(ae.ACCESS_TOKEN),ke=we?we.u:ae.ACCESS_TOKEN,Ne=ke!==this.eventData.tokenU;L(this.anonId)||(this.anonId=h(),Ne=!0);var at=this.queue.shift();if(this.eventData.lastSuccess){var pt=new Date(this.eventData.lastSuccess),bt=new Date(at),Nt=(at-this.eventData.lastSuccess)/(24*60*60*1e3);Ne=Ne||Nt>=1||Nt<-1||pt.getDate()!==bt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(at,{"enabled.telemetry":!1},function(er){er||(de.eventData.lastSuccess=at,de.eventData.tokenU=ke)},re)}},C}(Ft),Ut=new Pt,Gt=Ut.postTurnstileEvent.bind(Ut),It=new Xt,Ct=It.postMapLoadEvent.bind(It),lt="mapbox-tiles",dt=500,et=50,Pe=1e3*60*7,Je;function it(){self.caches&&!Je&&(Je=self.caches.open(lt))}var ht;function zt(E,C){if(ht===void 0)try{new Response(new ReadableStream),ht=!0}catch{ht=!1}ht?C(E.body):E.blob().then(C)}function Lt(E,C,H){if(it(),!!Je){var re={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(ke,Ne){return re.headers.set(Ne,ke)});var de=q(C.headers.get("Cache-Control")||"");if(!de["no-store"]){de["max-age"]&&re.headers.set("Expires",new Date(H+de["max-age"]*1e3).toUTCString());var we=new Date(re.headers.get("Expires")).getTime()-H;we<Pe||zt(C,function(ke){var Ne=new self.Response(ke,re);it(),!!Je&&Je.then(function(at){return at.put(Vt(E.url),Ne)}).catch(function(at){return U(at.message)})})}}}function Vt(E){var C=E.indexOf("?");return C<0?E:E.slice(0,C)}function $t(E,C){if(it(),!Je)return C(null);var H=Vt(E.url);Je.then(function(re){re.match(H).then(function(de){var we=Ht(de);re.delete(H),we&&re.put(H,de.clone()),C(null,de,we)}).catch(C)}).catch(C)}function Ht(E){if(!E)return!1;var C=new Date(E.headers.get("Expires")||0),H=q(E.headers.get("Cache-Control")||"");return C>Date.now()&&!H["no-cache"]}var tr=1/0;function qe(E){tr++,tr>et&&(E.getActor().send("enforceCacheSizeLimit",dt),tr=0)}function xt(E){it(),!!Je&&Je.then(function(C){C.keys().then(function(H){for(var re=0;re<H.length-E;re++)C.delete(H[re])})})}function Rt(E){var C=self.caches.delete(lt);E&&C.catch(E).then(function(){return E()})}function fr(E,C){dt=E,et=C}var br;function pr(){return br==null&&(br=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),br}var Tr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Tr);var Nr=function(E){function C(H,re,de){re===401&&Te(de)&&(H+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,H),this.status=re,this.url=de,this.name=this.constructor.name,this.message=H}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},C}(Error),Ir=ee()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},lr=function(E){return/^file:/.test(E)||/^file:/.test(Ir())&&!/^\w+:/.test(E)};function Yr(E,C){var H=new self.AbortController,re=new self.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:Ir(),signal:H.signal}),de=!1,we=!1,ke=Ie(re.url);E.type==="json"&&re.headers.set("Accept","application/json");var Ne=function(pt,bt,Nt){if(!we){if(pt&&pt.message!=="SecurityError"&&U(pt),bt&&Nt)return at(bt);var er=Date.now();self.fetch(re).then(function(Zt){if(Zt.ok){var dr=ke?Zt.clone():null;return at(Zt,dr,er)}else return C(new Nr(Zt.statusText,Zt.status,E.url))}).catch(function(Zt){Zt.code!==20&&C(new Error(Zt.message))})}},at=function(pt,bt,Nt){(E.type==="arrayBuffer"?pt.arrayBuffer():E.type==="json"?pt.json():pt.text()).then(function(er){we||(bt&&Nt&&Lt(re,bt,Nt),de=!0,C(null,er,pt.headers.get("Cache-Control"),pt.headers.get("Expires")))}).catch(function(er){we||C(new Error(er.message))})};return ke?$t(re,Ne):Ne(null,null),{cancel:function(){we=!0,de||H.abort()}}}function nt(E,C){var H=new self.XMLHttpRequest;H.open(E.method||"GET",E.url,!0),E.type==="arrayBuffer"&&(H.responseType="arraybuffer");for(var re in E.headers)H.setRequestHeader(re,E.headers[re]);return E.type==="json"&&(H.responseType="text",H.setRequestHeader("Accept","application/json")),H.withCredentials=E.credentials==="include",H.onerror=function(){C(new Error(H.statusText))},H.onload=function(){if((H.status>=200&&H.status<300||H.status===0)&&H.response!==null){var de=H.response;if(E.type==="json")try{de=JSON.parse(H.response)}catch(we){return C(we)}C(null,de,H.getResponseHeader("Cache-Control"),H.getResponseHeader("Expires"))}else C(new Nr(H.statusText,H.status,E.url))},H.send(E.body),{cancel:function(){return H.abort()}}}var Ae=function(E,C){if(!lr(E.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Yr(E,C);if(ee()&&self.worker&&self.worker.actor){var H=!0;return self.worker.actor.send("getResource",E,C,void 0,H)}}return nt(E,C)},Ee=function(E,C){return Ae(M(E,{type:"json"}),C)},Fe=function(E,C){return Ae(M(E,{type:"arrayBuffer"}),C)},Ke=function(E,C){return Ae(M(E,{method:"POST"}),C)};function tt(E){var C=self.document.createElement("a");return C.href=E,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}var ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ct(E,C,H,re){var de=new self.Image,we=self.URL;de.onload=function(){C(null,de),we.revokeObjectURL(de.src)},de.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ke=new self.Blob([new Uint8Array(E)],{type:"image/png"});de.cacheControl=H,de.expires=re,de.src=E.byteLength?we.createObjectURL(ke):ut}function yt(E,C){var H=new self.Blob([new Uint8Array(E)],{type:"image/png"});self.createImageBitmap(H).then(function(re){C(null,re)}).catch(function(re){C(new Error("Could not load image because of "+re.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var kt,jt,Mr=function(){kt=[],jt=0};Mr();var Sr=function(E,C){if(ie.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),jt>=ae.MAX_PARALLEL_IMAGE_REQUESTS){var H={requestParameters:E,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return kt.push(H),H}jt++;var re=!1,de=function(){if(!re)for(re=!0,jt--;kt.length&&jt<ae.MAX_PARALLEL_IMAGE_REQUESTS;){var ke=kt.shift(),Ne=ke.requestParameters,at=ke.callback,pt=ke.cancelled;pt||(ke.cancel=Sr(Ne,at).cancel)}},we=Fe(E,function(ke,Ne,at,pt){de(),ke?C(ke):Ne&&(pr()?yt(Ne,C):ct(Ne,C,at,pt))});return{cancel:function(){we.cancel(),de()}}},Lr=function(E,C){var H=self.document.createElement("video");H.muted=!0,H.onloadstart=function(){C(null,H)};for(var re=0;re<E.length;re++){var de=self.document.createElement("source");tt(E[re])||(H.crossOrigin="Anonymous"),de.src=E[re],H.appendChild(de)}return{cancel:function(){}}};function Ar(E,C,H){var re=H[E]&&H[E].indexOf(C)!==-1;re||(H[E]=H[E]||[],H[E].push(C))}function Ur(E,C,H){if(H&&H[E]){var re=H[E].indexOf(C);re!==-1&&H[E].splice(re,1)}}var fn=function(C,H){H===void 0&&(H={}),M(this,H),this.type=C},Cr=function(E){function C(H,re){re===void 0&&(re={}),E.call(this,"error",M({error:H},re))}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(fn),_r=function(){};_r.prototype.on=function(C,H){return this._listeners=this._listeners||{},Ar(C,H,this._listeners),this},_r.prototype.off=function(C,H){return Ur(C,H,this._listeners),Ur(C,H,this._oneTimeListeners),this},_r.prototype.once=function(C,H){return this._oneTimeListeners=this._oneTimeListeners||{},Ar(C,H,this._oneTimeListeners),this},_r.prototype.fire=function(C,H){typeof C=="string"&&(C=new fn(C,H||{}));var re=C.type;if(this.listens(re)){C.target=this;for(var de=this._listeners&&this._listeners[re]?this._listeners[re].slice():[],we=0,ke=de;we<ke.length;we+=1){var Ne=ke[we];Ne.call(this,C)}for(var at=this._oneTimeListeners&&this._oneTimeListeners[re]?this._oneTimeListeners[re].slice():[],pt=0,bt=at;pt<bt.length;pt+=1){var Nt=bt[pt];Ur(re,Nt,this._oneTimeListeners),Nt.call(this,C)}var er=this._eventedParent;er&&(M(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),er.fire(C))}else C instanceof Cr&&console.error(C.error);return this},_r.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},_r.prototype.setEventedParent=function(C,H){return this._eventedParent=C,this._eventedParentData=H,this};var En=8,Jr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Pr={"*":{type:"source"}},vn=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],xn={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},qr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},st={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Bt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},ir={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},xr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Qr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Gr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Br={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},en={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},da={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Va={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Oa={type:"array",value:"*"},wr={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},wn={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},ln={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},jn={type:"array",value:"*",minimum:1},Jn={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},La={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},ga=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],qn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Ea={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},la={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},sr={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Hr={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},dn={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},hn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Sn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Rn={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Mn={"*":{type:"string"}},mr={$version:En,$root:Jr,sources:Pr,source:vn,source_vector:xn,source_raster:qr,source_raster_dem:st,source_geojson:Bt,source_video:ir,source_image:xr,layer:Qr,layout:Gr,layout_background:Br,layout_fill:kr,layout_circle:en,layout_heatmap:Zn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Hn,layout_symbol:da,layout_raster:wa,layout_hillshade:Va,filter:Oa,filter_operator:wr,geometry_type:wn,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:ln,expression:jn,expression_name:Jn,light:La,paint:ga,paint_fill:qn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Ea,paint_circle:la,paint_heatmap:sr,paint_symbol:Hr,paint_raster:dn,paint_hillshade:hn,paint_background:Sn,transition:Rn,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Mn},hr=function(C,H,re,de){this.message=(C?C+": ":"")+re,de&&(this.identifier=de),H!=null&&H.__line__&&(this.line=H.__line__)};function Fr(E){var C=E.key,H=E.value;return H?[new hr(C,H,"constants have been deprecated as of v8")]:[]}function nn(E){for(var C=[],H=arguments.length-1;H-- >0;)C[H]=arguments[H+1];for(var re=0,de=C;re<de.length;re+=1){var we=de[re];for(var ke in we)E[ke]=we[ke]}return E}function On(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}function ra(E){if(Array.isArray(E))return E.map(ra);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var C={};for(var H in E)C[H]=ra(E[H]);return C}return On(E)}var ua=function(E){function C(H,re){E.call(this,re),this.message=re,this.key=H}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Error),$n=function(C,H){H===void 0&&(H=[]),this.parent=C,this.bindings={};for(var re=0,de=H;re<de.length;re+=1){var we=de[re],ke=we[0],Ne=we[1];this.bindings[ke]=Ne}};$n.prototype.concat=function(C){return new $n(this,C)},$n.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},$n.prototype.has=function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1};var Qn={kind:"null"},kn={kind:"number"},Wn={kind:"string"},aa={kind:"boolean"},Ma={kind:"color"},ui={kind:"object"},Na={kind:"value"},nu={kind:"error"},Eo={kind:"collator"},Xs={kind:"formatted"},cl={kind:"resolvedImage"};function vo(E,C){return{kind:"array",itemType:E,N:C}}function Ki(E){if(E.kind==="array"){var C=Ki(E.itemType);return typeof E.N=="number"?"array<"+C+", "+E.N+">":E.itemType.kind==="value"?"array":"array<"+C+">"}else return E.kind}var hl=[Qn,kn,Wn,aa,Ma,Xs,ui,vo(Na),cl];function ro(E,C){if(C.kind==="error")return null;if(E.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!ro(E.itemType,C.itemType))&&(typeof E.N!="number"||E.N===C.N))return null}else{if(E.kind===C.kind)return null;if(E.kind==="value")for(var H=0,re=hl;H<re.length;H+=1){var de=re[H];if(!ro(de,C))return null}}return"Expected "+Ki(E)+" but found "+Ki(C)+" instead."}function is(E,C){return C.some(function(H){return H.kind===E.kind})}function Vl(E,C){return C.some(function(H){return H==="null"?E===null:H==="array"?Array.isArray(E):H==="object"?E&&!Array.isArray(E)&&typeof E=="object":H===typeof E})}var zu=i(function(E,C){var H={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function re(pt){return pt=Math.round(pt),pt<0?0:pt>255?255:pt}function de(pt){return pt<0?0:pt>1?1:pt}function we(pt){return pt[pt.length-1]==="%"?re(parseFloat(pt)/100*255):re(parseInt(pt))}function ke(pt){return pt[pt.length-1]==="%"?de(parseFloat(pt)/100):de(parseFloat(pt))}function Ne(pt,bt,Nt){return Nt<0?Nt+=1:Nt>1&&(Nt-=1),Nt*6<1?pt+(bt-pt)*Nt*6:Nt*2<1?bt:Nt*3<2?pt+(bt-pt)*(2/3-Nt)*6:pt}function at(pt){var bt=pt.replace(/ /g,"").toLowerCase();if(bt in H)return H[bt].slice();if(bt[0]==="#"){if(bt.length===4){var Nt=parseInt(bt.substr(1),16);return Nt>=0&&Nt<=4095?[(Nt&3840)>>4|(Nt&3840)>>8,Nt&240|(Nt&240)>>4,Nt&15|(Nt&15)<<4,1]:null}else if(bt.length===7){var Nt=parseInt(bt.substr(1),16);return Nt>=0&&Nt<=16777215?[(Nt&16711680)>>16,(Nt&65280)>>8,Nt&255,1]:null}return null}var er=bt.indexOf("("),Zt=bt.indexOf(")");if(er!==-1&&Zt+1===bt.length){var dr=bt.substr(0,er),Wr=bt.substr(er+1,Zt-(er+1)).split(","),mn=1;switch(dr){case"rgba":if(Wr.length!==4)return null;mn=ke(Wr.pop());case"rgb":return Wr.length!==3?null:[we(Wr[0]),we(Wr[1]),we(Wr[2]),mn];case"hsla":if(Wr.length!==4)return null;mn=ke(Wr.pop());case"hsl":if(Wr.length!==3)return null;var un=(parseFloat(Wr[0])%360+360)%360/360,Nn=ke(Wr[1]),Pn=ke(Wr[2]),Fn=Pn<=.5?Pn*(Nn+1):Pn+Nn-Pn*Nn,Xn=Pn*2-Fn;return[re(Ne(Xn,Fn,un+1/3)*255),re(Ne(Xn,Fn,un)*255),re(Ne(Xn,Fn,un-1/3)*255),mn];default:return null}}return null}try{C.parseCSSColor=at}catch{}}),Fu=zu.parseCSSColor,Oi=function(C,H,re,de){de===void 0&&(de=1),this.r=C,this.g=H,this.b=re,this.a=de};Oi.parse=function(C){if(!!C){if(C instanceof Oi)return C;if(typeof C=="string"){var H=Fu(C);if(!!H)return new Oi(H[0]/255*H[3],H[1]/255*H[3],H[2]/255*H[3],H[3])}}},Oi.prototype.toString=function(){var C=this.toArray(),H=C[0],re=C[1],de=C[2],we=C[3];return"rgba("+Math.round(H)+","+Math.round(re)+","+Math.round(de)+","+we+")"},Oi.prototype.toArray=function(){var C=this,H=C.r,re=C.g,de=C.b,we=C.a;return we===0?[0,0,0,0]:[H*255/we,re*255/we,de*255/we,we]},Oi.black=new Oi(0,0,0,1),Oi.white=new Oi(1,1,1,1),Oi.transparent=new Oi(0,0,0,0),Oi.red=new Oi(1,0,0,1);var au=function(C,H,re){C?this.sensitivity=H?"variant":"case":this.sensitivity=H?"accent":"base",this.locale=re,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};au.prototype.compare=function(C,H){return this.collator.compare(C,H)},au.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Gl=function(C,H,re,de,we){this.text=C,this.image=H,this.scale=re,this.fontStack=de,this.textColor=we},To=function(C){this.sections=C};To.fromString=function(C){return new To([new Gl(C,null,null,null,null)])},To.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},To.factory=function(C){return C instanceof To?C:To.fromString(C)},To.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},To.prototype.serialize=function(){for(var C=["format"],H=0,re=this.sections;H<re.length;H+=1){var de=re[H];if(de.image){C.push(["image",de.image.name]);continue}C.push(de.text);var we={};de.fontStack&&(we["text-font"]=["literal",de.fontStack.split(",")]),de.scale&&(we["font-scale"]=de.scale),de.textColor&&(we["text-color"]=["rgba"].concat(de.textColor.toArray())),C.push(we)}return C};var os=function(C){this.name=C.name,this.available=C.available};os.prototype.toString=function(){return this.name},os.fromString=function(C){return C?new os({name:C,available:!1}):null},os.prototype.serialize=function(){return["image",this.name]};function vl(E,C,H,re){if(!(typeof E=="number"&&E>=0&&E<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof H=="number"&&H>=0&&H<=255)){var de=typeof re=="number"?[E,C,H,re]:[E,C,H];return"Invalid rgba value ["+de.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof re=="undefined"||typeof re=="number"&&re>=0&&re<=1?null:"Invalid rgba value ["+[E,C,H,re].join(", ")+"]: 'a' must be between 0 and 1."}function pl(E){if(E===null)return!0;if(typeof E=="string")return!0;if(typeof E=="boolean")return!0;if(typeof E=="number")return!0;if(E instanceof Oi)return!0;if(E instanceof au)return!0;if(E instanceof To)return!0;if(E instanceof os)return!0;if(Array.isArray(E)){for(var C=0,H=E;C<H.length;C+=1){var re=H[C];if(!pl(re))return!1}return!0}else if(typeof E=="object"){for(var de in E)if(!pl(E[de]))return!1;return!0}else return!1}function no(E){if(E===null)return Qn;if(typeof E=="string")return Wn;if(typeof E=="boolean")return aa;if(typeof E=="number")return kn;if(E instanceof Oi)return Ma;if(E instanceof au)return Eo;if(E instanceof To)return Xs;if(E instanceof os)return cl;if(Array.isArray(E)){for(var C=E.length,H,re=0,de=E;re<de.length;re+=1){var we=de[re],ke=no(we);if(!H)H=ke;else{if(H===ke)continue;H=Na;break}}return vo(H||Na,C)}else return ui}function iu(E){var C=typeof E;return E===null?"":C==="string"||C==="number"||C==="boolean"?String(E):E instanceof Oi||E instanceof To||E instanceof os?E.toString():JSON.stringify(E)}var Co=function(C,H){this.type=C,this.value=H};Co.parse=function(C,H){if(C.length!==2)return H.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!pl(C[1]))return H.error("invalid value");var re=C[1],de=no(re),we=H.expectedType;return de.kind==="array"&&de.N===0&&we&&we.kind==="array"&&(typeof we.N!="number"||we.N===0)&&(de=we),new Co(de,re)},Co.prototype.evaluate=function(){return this.value},Co.prototype.eachChild=function(){},Co.prototype.outputDefined=function(){return!0},Co.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Oi?["rgba"].concat(this.value.toArray()):this.value instanceof To?this.value.serialize():this.value};var uo=function(C){this.name="ExpressionEvaluationError",this.message=C};uo.prototype.toJSON=function(){return this.message};var Uo={string:Wn,number:kn,boolean:aa,object:ui},Oo=function(C,H){this.type=C,this.args=H};Oo.parse=function(C,H){if(C.length<2)return H.error("Expected at least one argument.");var re=1,de,we=C[0];if(we==="array"){var ke;if(C.length>2){var Ne=C[1];if(typeof Ne!="string"||!(Ne in Uo)||Ne==="object")return H.error('The item type argument of "array" must be one of string, number, boolean',1);ke=Uo[Ne],re++}else ke=Na;var at;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return H.error('The length argument to "array" must be a positive integer literal',2);at=C[2],re++}de=vo(ke,at)}else de=Uo[we];for(var pt=[];re<C.length;re++){var bt=H.parse(C[re],re,Na);if(!bt)return null;pt.push(bt)}return new Oo(de,pt)},Oo.prototype.evaluate=function(C){for(var H=0;H<this.args.length;H++){var re=this.args[H].evaluate(C),de=ro(this.type,no(re));if(de){if(H===this.args.length-1)throw new uo("Expected value to be of type "+Ki(this.type)+", but found "+Ki(no(re))+" instead.")}else return re}return null},Oo.prototype.eachChild=function(C){this.args.forEach(C)},Oo.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Oo.prototype.serialize=function(){var C=this.type,H=[C.kind];if(C.kind==="array"){var re=C.itemType;if(re.kind==="string"||re.kind==="number"||re.kind==="boolean"){H.push(re.kind);var de=C.N;(typeof de=="number"||this.args.length>1)&&H.push(de)}}return H.concat(this.args.map(function(we){return we.serialize()}))};var Vs=function(C){this.type=Xs,this.sections=C};Vs.parse=function(C,H){if(C.length<2)return H.error("Expected at least one argument.");var re=C[1];if(!Array.isArray(re)&&typeof re=="object")return H.error("First argument must be an image or text section.");for(var de=[],we=!1,ke=1;ke<=C.length-1;++ke){var Ne=C[ke];if(we&&typeof Ne=="object"&&!Array.isArray(Ne)){we=!1;var at=null;if(Ne["font-scale"]&&(at=H.parse(Ne["font-scale"],1,kn),!at))return null;var pt=null;if(Ne["text-font"]&&(pt=H.parse(Ne["text-font"],1,vo(Wn)),!pt))return null;var bt=null;if(Ne["text-color"]&&(bt=H.parse(Ne["text-color"],1,Ma),!bt))return null;var Nt=de[de.length-1];Nt.scale=at,Nt.font=pt,Nt.textColor=bt}else{var er=H.parse(C[ke],1,Na);if(!er)return null;var Zt=er.type.kind;if(Zt!=="string"&&Zt!=="value"&&Zt!=="null"&&Zt!=="resolvedImage")return H.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");we=!0,de.push({content:er,scale:null,font:null,textColor:null})}}return new Vs(de)},Vs.prototype.evaluate=function(C){var H=function(re){var de=re.content.evaluate(C);return no(de)===cl?new Gl("",de,null,null,null):new Gl(iu(de),null,re.scale?re.scale.evaluate(C):null,re.font?re.font.evaluate(C).join(","):null,re.textColor?re.textColor.evaluate(C):null)};return new To(this.sections.map(H))},Vs.prototype.eachChild=function(C){for(var H=0,re=this.sections;H<re.length;H+=1){var de=re[H];C(de.content),de.scale&&C(de.scale),de.font&&C(de.font),de.textColor&&C(de.textColor)}},Vs.prototype.outputDefined=function(){return!1},Vs.prototype.serialize=function(){for(var C=["format"],H=0,re=this.sections;H<re.length;H+=1){var de=re[H];C.push(de.content.serialize());var we={};de.scale&&(we["font-scale"]=de.scale.serialize()),de.font&&(we["text-font"]=de.font.serialize()),de.textColor&&(we["text-color"]=de.textColor.serialize()),C.push(we)}return C};var kl=function(C){this.type=cl,this.input=C};kl.parse=function(C,H){if(C.length!==2)return H.error("Expected two arguments.");var re=H.parse(C[1],1,Wn);return re?new kl(re):H.error("No image name provided.")},kl.prototype.evaluate=function(C){var H=this.input.evaluate(C),re=os.fromString(H);return re&&C.availableImages&&(re.available=C.availableImages.indexOf(H)>-1),re},kl.prototype.eachChild=function(C){C(this.input)},kl.prototype.outputDefined=function(){return!1},kl.prototype.serialize=function(){return["image",this.input.serialize()]};var Df={"to-boolean":aa,"to-color":Ma,"to-number":kn,"to-string":Wn},Gs=function(C,H){this.type=C,this.args=H};Gs.parse=function(C,H){if(C.length<2)return H.error("Expected at least one argument.");var re=C[0];if((re==="to-boolean"||re==="to-string")&&C.length!==2)return H.error("Expected one argument.");for(var de=Df[re],we=[],ke=1;ke<C.length;ke++){var Ne=H.parse(C[ke],ke,Na);if(!Ne)return null;we.push(Ne)}return new Gs(de,we)},Gs.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var H,re,de=0,we=this.args;de<we.length;de+=1){var ke=we[de];if(H=ke.evaluate(C),re=null,H instanceof Oi)return H;if(typeof H=="string"){var Ne=C.parseColor(H);if(Ne)return Ne}else if(Array.isArray(H)&&(H.length<3||H.length>4?re="Invalid rbga value "+JSON.stringify(H)+": expected an array containing either three or four numeric values.":re=vl(H[0],H[1],H[2],H[3]),!re))return new Oi(H[0]/255,H[1]/255,H[2]/255,H[3])}throw new uo(re||"Could not parse color from value '"+(typeof H=="string"?H:String(JSON.stringify(H)))+"'")}else if(this.type.kind==="number"){for(var at=null,pt=0,bt=this.args;pt<bt.length;pt+=1){var Nt=bt[pt];if(at=Nt.evaluate(C),at===null)return 0;var er=Number(at);if(!isNaN(er))return er}throw new uo("Could not convert "+JSON.stringify(at)+" to number.")}else return this.type.kind==="formatted"?To.fromString(iu(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?os.fromString(iu(this.args[0].evaluate(C))):iu(this.args[0].evaluate(C))},Gs.prototype.eachChild=function(C){this.args.forEach(C)},Gs.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Gs.prototype.serialize=function(){if(this.type.kind==="formatted")return new Vs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new kl(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(H){C.push(H.serialize())}),C};var Es=["Unknown","Point","LineString","Polygon"],dl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};dl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},dl.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Es[this.feature.type]:this.feature.type:null},dl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},dl.prototype.canonicalID=function(){return this.canonical},dl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},dl.prototype.parseColor=function(C){var H=this._parseColorCache[C];return H||(H=this._parseColorCache[C]=Oi.parse(C)),H};var jo=function(C,H,re,de){this.name=C,this.type=H,this._evaluate=re,this.args=de};jo.prototype.evaluate=function(C){return this._evaluate(C,this.args)},jo.prototype.eachChild=function(C){this.args.forEach(C)},jo.prototype.outputDefined=function(){return!1},jo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},jo.parse=function(C,H){var re,de=C[0],we=jo.definitions[de];if(!we)return H.error('Unknown expression "'+de+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ke=Array.isArray(we)?we[0]:we.type,Ne=Array.isArray(we)?[[we[1],we[2]]]:we.overloads,at=Ne.filter(function(Qa){var ni=Qa[0];return!Array.isArray(ni)||ni.length===C.length-1}),pt=null,bt=0,Nt=at;bt<Nt.length;bt+=1){var er=Nt[bt],Zt=er[0],dr=er[1];pt=new Ei(H.registry,H.path,null,H.scope);for(var Wr=[],mn=!1,un=1;un<C.length;un++){var Nn=C[un],Pn=Array.isArray(Zt)?Zt[un-1]:Zt.type,Fn=pt.parse(Nn,1+Wr.length,Pn);if(!Fn){mn=!0;break}Wr.push(Fn)}if(!mn){if(Array.isArray(Zt)&&Zt.length!==Wr.length){pt.error("Expected "+Zt.length+" arguments, but found "+Wr.length+" instead.");continue}for(var Xn=0;Xn<Wr.length;Xn++){var sa=Array.isArray(Zt)?Zt[Xn]:Zt.type,ka=Wr[Xn];pt.concat(Xn+1).checkSubtype(sa,ka.type)}if(pt.errors.length===0)return new jo(de,ke,dr,Wr)}}if(at.length===1)(re=H.errors).push.apply(re,pt.errors);else{for(var Aa=at.length?at:Ne,ai=Aa.map(function(Qa){var ni=Qa[0];return If(ni)}).join(" | "),Wa=[],Za=1;Za<C.length;Za++){var Ai=H.parse(C[Za],1+Wa.length);if(!Ai)return null;Wa.push(Ki(Ai.type))}H.error("Expected arguments of type "+ai+", but found ("+Wa.join(", ")+") instead.")}return null},jo.register=function(C,H){jo.definitions=H;for(var re in H)C[re]=jo};function If(E){return Array.isArray(E)?"("+E.map(Ki).join(", ")+")":"("+Ki(E.type)+"...)"}var El=function(C,H,re){this.type=Eo,this.locale=re,this.caseSensitive=C,this.diacriticSensitive=H};El.parse=function(C,H){if(C.length!==2)return H.error("Expected one argument.");var re=C[1];if(typeof re!="object"||Array.isArray(re))return H.error("Collator options argument must be an object.");var de=H.parse(re["case-sensitive"]===void 0?!1:re["case-sensitive"],1,aa);if(!de)return null;var we=H.parse(re["diacritic-sensitive"]===void 0?!1:re["diacritic-sensitive"],1,aa);if(!we)return null;var ke=null;return re.locale&&(ke=H.parse(re.locale,1,Wn),!ke)?null:new El(de,we,ke)},El.prototype.evaluate=function(C){return new au(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},El.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},El.prototype.outputDefined=function(){return!1},El.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var Cl=8192;function qu(E,C){E[0]=Math.min(E[0],C[0]),E[1]=Math.min(E[1],C[1]),E[2]=Math.max(E[2],C[0]),E[3]=Math.max(E[3],C[1])}function sc(E){return(180+E)/360}function lc(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function ou(E,C){return!(E[0]<=C[0]||E[2]>=C[2]||E[1]<=C[1]||E[3]>=C[3])}function Ll(E,C){var H=sc(E[0]),re=lc(E[1]),de=Math.pow(2,C.z);return[Math.round(H*de*Cl),Math.round(re*de*Cl)]}function Pl(E,C,H){var re=E[0]-C[0],de=E[1]-C[1],we=E[0]-H[0],ke=E[1]-H[1];return re*ke-we*de==0&&re*we<=0&&de*ke<=0}function mf(E,C,H){return C[1]>E[1]!=H[1]>E[1]&&E[0]<(H[0]-C[0])*(E[1]-C[1])/(H[1]-C[1])+C[0]}function Wl(E,C){for(var H=!1,re=0,de=C.length;re<de;re++)for(var we=C[re],ke=0,Ne=we.length;ke<Ne-1;ke++){if(Pl(E,we[ke],we[ke+1]))return!1;mf(E,we[ke],we[ke+1])&&(H=!H)}return H}function ef(E,C){for(var H=0;H<C.length;H++)if(Wl(E,C[H]))return!0;return!1}function Rl(E,C){return E[0]*C[1]-E[1]*C[0]}function su(E,C,H,re){var de=E[0]-H[0],we=E[1]-H[1],ke=C[0]-H[0],Ne=C[1]-H[1],at=re[0]-H[0],pt=re[1]-H[1],bt=de*pt-at*we,Nt=ke*pt-at*Ne;return bt>0&&Nt<0||bt<0&&Nt>0}function uc(E,C,H,re){var de=[C[0]-E[0],C[1]-E[1]],we=[re[0]-H[0],re[1]-H[1]];return Rl(we,de)===0?!1:!!(su(E,C,H,re)&&su(H,re,E,C))}function lu(E,C,H){for(var re=0,de=H;re<de.length;re+=1)for(var we=de[re],ke=0;ke<we.length-1;++ke)if(uc(E,C,we[ke],we[ke+1]))return!0;return!1}function xf(E,C){for(var H=0;H<E.length;++H)if(!Wl(E[H],C))return!1;for(var re=0;re<E.length-1;++re)if(lu(E[re],E[re+1],C))return!1;return!0}function Dl(E,C){for(var H=0;H<C.length;H++)if(xf(E,C[H]))return!0;return!1}function Ko(E,C,H){for(var re=[],de=0;de<E.length;de++){for(var we=[],ke=0;ke<E[de].length;ke++){var Ne=Ll(E[de][ke],H);qu(C,Ne),we.push(Ne)}re.push(we)}return re}function Au(E,C,H){for(var re=[],de=0;de<E.length;de++){var we=Ko(E[de],C,H);re.push(we)}return re}function bf(E,C,H,re){if(E[0]<H[0]||E[0]>H[2]){var de=re*.5,we=E[0]-H[0]>de?-re:H[0]-E[0]>de?re:0;we===0&&(we=E[0]-H[2]>de?-re:H[2]-E[0]>de?re:0),E[0]+=we}qu(C,E)}function zf(E){E[0]=E[1]=1/0,E[2]=E[3]=-1/0}function Ff(E,C,H,re){for(var de=Math.pow(2,re.z)*Cl,we=[re.x*Cl,re.y*Cl],ke=[],Ne=0,at=E;Ne<at.length;Ne+=1)for(var pt=at[Ne],bt=0,Nt=pt;bt<Nt.length;bt+=1){var er=Nt[bt],Zt=[er.x+we[0],er.y+we[1]];bf(Zt,C,H,de),ke.push(Zt)}return ke}function tf(E,C,H,re){for(var de=Math.pow(2,re.z)*Cl,we=[re.x*Cl,re.y*Cl],ke=[],Ne=0,at=E;Ne<at.length;Ne+=1){for(var pt=at[Ne],bt=[],Nt=0,er=pt;Nt<er.length;Nt+=1){var Zt=er[Nt],dr=[Zt.x+we[0],Zt.y+we[1]];qu(C,dr),bt.push(dr)}ke.push(bt)}if(C[2]-C[0]<=de/2){zf(C);for(var Wr=0,mn=ke;Wr<mn.length;Wr+=1)for(var un=mn[Wr],Nn=0,Pn=un;Nn<Pn.length;Nn+=1){var Fn=Pn[Nn];bf(Fn,C,H,de)}}return ke}function fc(E,C){var H=[1/0,1/0,-1/0,-1/0],re=[1/0,1/0,-1/0,-1/0],de=E.canonicalID();if(C.type==="Polygon"){var we=Ko(C.coordinates,re,de),ke=Ff(E.geometry(),H,re,de);if(!ou(H,re))return!1;for(var Ne=0,at=ke;Ne<at.length;Ne+=1){var pt=at[Ne];if(!Wl(pt,we))return!1}}if(C.type==="MultiPolygon"){var bt=Au(C.coordinates,re,de),Nt=Ff(E.geometry(),H,re,de);if(!ou(H,re))return!1;for(var er=0,Zt=Nt;er<Zt.length;er+=1){var dr=Zt[er];if(!ef(dr,bt))return!1}}return!0}function uu(E,C){var H=[1/0,1/0,-1/0,-1/0],re=[1/0,1/0,-1/0,-1/0],de=E.canonicalID();if(C.type==="Polygon"){var we=Ko(C.coordinates,re,de),ke=tf(E.geometry(),H,re,de);if(!ou(H,re))return!1;for(var Ne=0,at=ke;Ne<at.length;Ne+=1){var pt=at[Ne];if(!xf(pt,we))return!1}}if(C.type==="MultiPolygon"){var bt=Au(C.coordinates,re,de),Nt=tf(E.geometry(),H,re,de);if(!ou(H,re))return!1;for(var er=0,Zt=Nt;er<Zt.length;er+=1){var dr=Zt[er];if(!Dl(dr,bt))return!1}}return!0}var Tn=function(C,H){this.type=aa,this.geojson=C,this.geometries=H};Tn.parse=function(C,H){if(C.length!==2)return H.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(pl(C[1])){var re=C[1];if(re.type==="FeatureCollection")for(var de=0;de<re.features.length;++de){var we=re.features[de].geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new Tn(re,re.features[de].geometry)}else if(re.type==="Feature"){var ke=re.geometry.type;if(ke==="Polygon"||ke==="MultiPolygon")return new Tn(re,re.geometry)}else if(re.type==="Polygon"||re.type==="MultiPolygon")return new Tn(re,re)}return H.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Tn.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return fc(C,this.geometries);if(C.geometryType()==="LineString")return uu(C,this.geometries)}return!1},Tn.prototype.eachChild=function(){},Tn.prototype.outputDefined=function(){return!0},Tn.prototype.serialize=function(){return["within",this.geojson]};function ta(E){if(E instanceof jo){if(E.name==="get"&&E.args.length===1)return!1;if(E.name==="feature-state")return!1;if(E.name==="has"&&E.args.length===1)return!1;if(E.name==="properties"||E.name==="geometry-type"||E.name==="id")return!1;if(/^filter-/.test(E.name))return!1}if(E instanceof Tn)return!1;var C=!0;return E.eachChild(function(H){C&&!ta(H)&&(C=!1)}),C}function Gn(E){if(E instanceof jo&&E.name==="feature-state")return!1;var C=!0;return E.eachChild(function(H){C&&!Gn(H)&&(C=!1)}),C}function ii(E,C){if(E instanceof jo&&C.indexOf(E.name)>=0)return!1;var H=!0;return E.eachChild(function(re){H&&!ii(re,C)&&(H=!1)}),H}var mi=function(C,H){this.type=H.type,this.name=C,this.boundExpression=H};mi.parse=function(C,H){if(C.length!==2||typeof C[1]!="string")return H.error("'var' expression requires exactly one string literal argument.");var re=C[1];return H.scope.has(re)?new mi(re,H.scope.get(re)):H.error('Unknown variable "'+re+'". Make sure "'+re+'" has been bound in an enclosing "let" expression before using it.',1)},mi.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},mi.prototype.eachChild=function(){},mi.prototype.outputDefined=function(){return!1},mi.prototype.serialize=function(){return["var",this.name]};var Ei=function(C,H,re,de,we){H===void 0&&(H=[]),de===void 0&&(de=new $n),we===void 0&&(we=[]),this.registry=C,this.path=H,this.key=H.map(function(ke){return"["+ke+"]"}).join(""),this.scope=de,this.errors=we,this.expectedType=re};Ei.prototype.parse=function(C,H,re,de,we){return we===void 0&&(we={}),H?this.concat(H,re,de)._parse(C,we):this._parse(C,we)},Ei.prototype._parse=function(C,H){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function re(bt,Nt,er){return er==="assert"?new Oo(Nt,[bt]):er==="coerce"?new Gs(Nt,[bt]):bt}if(Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var de=C[0];if(typeof de!="string")return this.error("Expression name must be a string, but found "+typeof de+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var we=this.registry[de];if(we){var ke=we.parse(C,this);if(!ke)return null;if(this.expectedType){var Ne=this.expectedType,at=ke.type;if((Ne.kind==="string"||Ne.kind==="number"||Ne.kind==="boolean"||Ne.kind==="object"||Ne.kind==="array")&&at.kind==="value")ke=re(ke,Ne,H.typeAnnotation||"assert");else if((Ne.kind==="color"||Ne.kind==="formatted"||Ne.kind==="resolvedImage")&&(at.kind==="value"||at.kind==="string"))ke=re(ke,Ne,H.typeAnnotation||"coerce");else if(this.checkSubtype(Ne,at))return null}if(!(ke instanceof Co)&&ke.type.kind!=="resolvedImage"&&Ho(ke)){var pt=new dl;try{ke=new Co(ke.type,ke.evaluate(pt))}catch(bt){return this.error(bt.message),null}}return ke}return this.error('Unknown expression "'+de+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},Ei.prototype.concat=function(C,H,re){var de=typeof C=="number"?this.path.concat(C):this.path,we=re?this.scope.concat(re):this.scope;return new Ei(this.registry,de,H||null,we,this.errors)},Ei.prototype.error=function(C){for(var H=[],re=arguments.length-1;re-- >0;)H[re]=arguments[re+1];var de=""+this.key+H.map(function(we){return"["+we+"]"}).join("");this.errors.push(new ua(de,C))},Ei.prototype.checkSubtype=function(C,H){var re=ro(C,H);return re&&this.error(re),re};function Ho(E){if(E instanceof mi)return Ho(E.boundExpression);if(E instanceof jo&&E.name==="error")return!1;if(E instanceof El)return!1;if(E instanceof Tn)return!1;var C=E instanceof Gs||E instanceof Oo,H=!0;return E.eachChild(function(re){C?H=H&&Ho(re):H=H&&re instanceof Co}),H?ta(E)&&ii(E,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Bi(E,C){for(var H=E.length-1,re=0,de=H,we=0,ke,Ne;re<=de;)if(we=Math.floor((re+de)/2),ke=E[we],Ne=E[we+1],ke<=C){if(we===H||C<Ne)return we;re=we+1}else if(ke>C)de=we-1;else throw new uo("Input is not a number.");return 0}var qs=function(C,H,re){this.type=C,this.input=H,this.labels=[],this.outputs=[];for(var de=0,we=re;de<we.length;de+=1){var ke=we[de],Ne=ke[0],at=ke[1];this.labels.push(Ne),this.outputs.push(at)}};qs.parse=function(C,H){if(C.length-1<4)return H.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return H.error("Expected an even number of arguments.");var re=H.parse(C[1],1,kn);if(!re)return null;var de=[],we=null;H.expectedType&&H.expectedType.kind!=="value"&&(we=H.expectedType);for(var ke=1;ke<C.length;ke+=2){var Ne=ke===1?-1/0:C[ke],at=C[ke+1],pt=ke,bt=ke+1;if(typeof Ne!="number")return H.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',pt);if(de.length&&de[de.length-1][0]>=Ne)return H.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',pt);var Nt=H.parse(at,bt,we);if(!Nt)return null;we=we||Nt.type,de.push([Ne,Nt])}return new qs(we,re,de)},qs.prototype.evaluate=function(C){var H=this.labels,re=this.outputs;if(H.length===1)return re[0].evaluate(C);var de=this.input.evaluate(C);if(de<=H[0])return re[0].evaluate(C);var we=H.length;if(de>=H[we-1])return re[we-1].evaluate(C);var ke=Bi(H,de);return re[ke].evaluate(C)},qs.prototype.eachChild=function(C){C(this.input);for(var H=0,re=this.outputs;H<re.length;H+=1){var de=re[H];C(de)}},qs.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},qs.prototype.serialize=function(){for(var C=["step",this.input.serialize()],H=0;H<this.labels.length;H++)H>0&&C.push(this.labels[H]),C.push(this.outputs[H].serialize());return C};function Jo(E,C,H){return E*(1-H)+C*H}function gs(E,C,H){return new Oi(Jo(E.r,C.r,H),Jo(E.g,C.g,H),Jo(E.b,C.b,H),Jo(E.a,C.a,H))}function Yl(E,C,H){return E.map(function(re,de){return Jo(re,C[de],H)})}var fu=Object.freeze({__proto__:null,number:Jo,color:gs,array:Yl}),_s=.95047,Xl=1,Il=1.08883,qi=4/29,Ou=6/29,Zl=3*Ou*Ou,rf=Ou*Ou*Ou,el=Math.PI/180,Ec=180/Math.PI;function _f(E){return E>rf?Math.pow(E,1/3):E/Zl+qi}function zl(E){return E>Ou?E*E*E:Zl*(E-qi)}function Zs(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,1/2.4)-.055)}function yl(E){return E/=255,E<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}function Mu(E){var C=yl(E.r),H=yl(E.g),re=yl(E.b),de=_f((.4124564*C+.3575761*H+.1804375*re)/_s),we=_f((.2126729*C+.7151522*H+.072175*re)/Xl),ke=_f((.0193339*C+.119192*H+.9503041*re)/Il);return{l:116*we-16,a:500*(de-we),b:200*(we-ke),alpha:E.a}}function Nu(E){var C=(E.l+16)/116,H=isNaN(E.a)?C:C+E.a/500,re=isNaN(E.b)?C:C-E.b/200;return C=Xl*zl(C),H=_s*zl(H),re=Il*zl(re),new Oi(Zs(3.2404542*H-1.5371385*C-.4985314*re),Zs(-.969266*H+1.8760108*C+.041556*re),Zs(.0556434*H-.2040259*C+1.0572252*re),E.alpha)}function wf(E,C,H){return{l:Jo(E.l,C.l,H),a:Jo(E.a,C.a,H),b:Jo(E.b,C.b,H),alpha:Jo(E.alpha,C.alpha,H)}}function cc(E){var C=Mu(E),H=C.l,re=C.a,de=C.b,we=Math.atan2(de,re)*Ec;return{h:we<0?we+360:we,c:Math.sqrt(re*re+de*de),l:H,alpha:E.a}}function Ji(E){var C=E.h*el,H=E.c,re=E.l;return Nu({l:re,a:Math.cos(C)*H,b:Math.sin(C)*H,alpha:E.alpha})}function cu(E,C,H){var re=C-E;return E+H*(re>180||re<-180?re-360*Math.round(re/360):re)}function tl(E,C,H){return{h:cu(E.h,C.h,H),c:Jo(E.c,C.c,H),l:Jo(E.l,C.l,H),alpha:Jo(E.alpha,C.alpha,H)}}var us={forward:Mu,reverse:Nu,interpolate:wf},Cs={forward:cc,reverse:Ji,interpolate:tl},Bu=Object.freeze({__proto__:null,lab:us,hcl:Cs}),Qo=function(C,H,re,de,we){this.type=C,this.operator=H,this.interpolation=re,this.input=de,this.labels=[],this.outputs=[];for(var ke=0,Ne=we;ke<Ne.length;ke+=1){var at=Ne[ke],pt=at[0],bt=at[1];this.labels.push(pt),this.outputs.push(bt)}};Qo.interpolationFactor=function(C,H,re,de){var we=0;if(C.name==="exponential")we=Of(H,C.base,re,de);else if(C.name==="linear")we=Of(H,1,re,de);else if(C.name==="cubic-bezier"){var ke=C.controlPoints,Ne=new r(ke[0],ke[1],ke[2],ke[3]);we=Ne.solve(Of(H,1,re,de))}return we},Qo.parse=function(C,H){var re=C[0],de=C[1],we=C[2],ke=C.slice(3);if(!Array.isArray(de)||de.length===0)return H.error("Expected an interpolation type expression.",1);if(de[0]==="linear")de={name:"linear"};else if(de[0]==="exponential"){var Ne=de[1];if(typeof Ne!="number")return H.error("Exponential interpolation requires a numeric base.",1,1);de={name:"exponential",base:Ne}}else if(de[0]==="cubic-bezier"){var at=de.slice(1);if(at.length!==4||at.some(function(un){return typeof un!="number"||un<0||un>1}))return H.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);de={name:"cubic-bezier",controlPoints:at}}else return H.error("Unknown interpolation type "+String(de[0]),1,0);if(C.length-1<4)return H.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return H.error("Expected an even number of arguments.");if(we=H.parse(we,2,kn),!we)return null;var pt=[],bt=null;re==="interpolate-hcl"||re==="interpolate-lab"?bt=Ma:H.expectedType&&H.expectedType.kind!=="value"&&(bt=H.expectedType);for(var Nt=0;Nt<ke.length;Nt+=2){var er=ke[Nt],Zt=ke[Nt+1],dr=Nt+3,Wr=Nt+4;if(typeof er!="number")return H.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',dr);if(pt.length&&pt[pt.length-1][0]>=er)return H.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',dr);var mn=H.parse(Zt,Wr,bt);if(!mn)return null;bt=bt||mn.type,pt.push([er,mn])}return bt.kind!=="number"&&bt.kind!=="color"&&!(bt.kind==="array"&&bt.itemType.kind==="number"&&typeof bt.N=="number")?H.error("Type "+Ki(bt)+" is not interpolatable."):new Qo(bt,re,de,we,pt)},Qo.prototype.evaluate=function(C){var H=this.labels,re=this.outputs;if(H.length===1)return re[0].evaluate(C);var de=this.input.evaluate(C);if(de<=H[0])return re[0].evaluate(C);var we=H.length;if(de>=H[we-1])return re[we-1].evaluate(C);var ke=Bi(H,de),Ne=H[ke],at=H[ke+1],pt=Qo.interpolationFactor(this.interpolation,de,Ne,at),bt=re[ke].evaluate(C),Nt=re[ke+1].evaluate(C);return this.operator==="interpolate"?fu[this.type.kind.toLowerCase()](bt,Nt,pt):this.operator==="interpolate-hcl"?Cs.reverse(Cs.interpolate(Cs.forward(bt),Cs.forward(Nt),pt)):us.reverse(us.interpolate(us.forward(bt),us.forward(Nt),pt))},Qo.prototype.eachChild=function(C){C(this.input);for(var H=0,re=this.outputs;H<re.length;H+=1){var de=re[H];C(de)}},Qo.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Qo.prototype.serialize=function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var H=[this.operator,C,this.input.serialize()],re=0;re<this.labels.length;re++)H.push(this.labels[re],this.outputs[re].serialize());return H};function Of(E,C,H,re){var de=re-H,we=E-H;return de===0?0:C===1?we/de:(Math.pow(C,we)-1)/(Math.pow(C,de)-1)}var Ls=function(C,H){this.type=C,this.args=H};Ls.parse=function(C,H){if(C.length<2)return H.error("Expectected at least one argument.");var re=null,de=H.expectedType;de&&de.kind!=="value"&&(re=de);for(var we=[],ke=0,Ne=C.slice(1);ke<Ne.length;ke+=1){var at=Ne[ke],pt=H.parse(at,1+we.length,re,void 0,{typeAnnotation:"omit"});if(!pt)return null;re=re||pt.type,we.push(pt)}var bt=de&&we.some(function(Nt){return ro(de,Nt.type)});return bt?new Ls(Na,we):new Ls(re,we)},Ls.prototype.evaluate=function(C){for(var H=null,re=0,de,we=0,ke=this.args;we<ke.length;we+=1){var Ne=ke[we];if(re++,H=Ne.evaluate(C),H&&H instanceof os&&!H.available&&(de||(de=H.name),H=null,re===this.args.length&&(H=de)),H!==null)break}return H},Ls.prototype.eachChild=function(C){this.args.forEach(C)},Ls.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Ls.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(H){C.push(H.serialize())}),C};var rl=function(C,H){this.type=H.type,this.bindings=[].concat(C),this.result=H};rl.prototype.evaluate=function(C){return this.result.evaluate(C)},rl.prototype.eachChild=function(C){for(var H=0,re=this.bindings;H<re.length;H+=1){var de=re[H];C(de[1])}C(this.result)},rl.parse=function(C,H){if(C.length<4)return H.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var re=[],de=1;de<C.length-1;de+=2){var we=C[de];if(typeof we!="string")return H.error("Expected string, but found "+typeof we+" instead.",de);if(/[^a-zA-Z0-9_]/.test(we))return H.error("Variable names must contain only alphanumeric characters or '_'.",de);var ke=H.parse(C[de+1],de+1);if(!ke)return null;re.push([we,ke])}var Ne=H.parse(C[C.length-1],C.length-1,H.expectedType,re);return Ne?new rl(re,Ne):null},rl.prototype.outputDefined=function(){return this.result.outputDefined()},rl.prototype.serialize=function(){for(var C=["let"],H=0,re=this.bindings;H<re.length;H+=1){var de=re[H],we=de[0],ke=de[1];C.push(we,ke.serialize())}return C.push(this.result.serialize()),C};var ml=function(C,H,re){this.type=C,this.index=H,this.input=re};ml.parse=function(C,H){if(C.length!==3)return H.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var re=H.parse(C[1],1,kn),de=H.parse(C[2],2,vo(H.expectedType||Na));if(!re||!de)return null;var we=de.type;return new ml(we.itemType,re,de)},ml.prototype.evaluate=function(C){var H=this.index.evaluate(C),re=this.input.evaluate(C);if(H<0)throw new uo("Array index out of bounds: "+H+" < 0.");if(H>=re.length)throw new uo("Array index out of bounds: "+H+" > "+(re.length-1)+".");if(H!==Math.floor(H))throw new uo("Array index must be an integer, but found "+H+" instead.");return re[H]},ml.prototype.eachChild=function(C){C(this.index),C(this.input)},ml.prototype.outputDefined=function(){return!1},ml.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Fl=function(C,H){this.type=aa,this.needle=C,this.haystack=H};Fl.parse=function(C,H){if(C.length!==3)return H.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var re=H.parse(C[1],1,Na),de=H.parse(C[2],2,Na);return!re||!de?null:is(re.type,[aa,Wn,kn,Qn,Na])?new Fl(re,de):H.error("Expected first argument to be of type boolean, string, number or null, but found "+Ki(re.type)+" instead")},Fl.prototype.evaluate=function(C){var H=this.needle.evaluate(C),re=this.haystack.evaluate(C);if(!re)return!1;if(!Vl(H,["boolean","string","number","null"]))throw new uo("Expected first argument to be of type boolean, string, number or null, but found "+Ki(no(H))+" instead.");if(!Vl(re,["string","array"]))throw new uo("Expected second argument to be of type array or string, but found "+Ki(no(re))+" instead.");return re.indexOf(H)>=0},Fl.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},Fl.prototype.outputDefined=function(){return!0},Fl.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var js=function(C,H,re){this.type=kn,this.needle=C,this.haystack=H,this.fromIndex=re};js.parse=function(C,H){if(C.length<=2||C.length>=5)return H.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var re=H.parse(C[1],1,Na),de=H.parse(C[2],2,Na);if(!re||!de)return null;if(!is(re.type,[aa,Wn,kn,Qn,Na]))return H.error("Expected first argument to be of type boolean, string, number or null, but found "+Ki(re.type)+" instead");if(C.length===4){var we=H.parse(C[3],3,kn);return we?new js(re,de,we):null}else return new js(re,de)},js.prototype.evaluate=function(C){var H=this.needle.evaluate(C),re=this.haystack.evaluate(C);if(!Vl(H,["boolean","string","number","null"]))throw new uo("Expected first argument to be of type boolean, string, number or null, but found "+Ki(no(H))+" instead.");if(!Vl(re,["string","array"]))throw new uo("Expected second argument to be of type array or string, but found "+Ki(no(re))+" instead.");if(this.fromIndex){var de=this.fromIndex.evaluate(C);return re.indexOf(H,de)}return re.indexOf(H)},js.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},js.prototype.outputDefined=function(){return!1},js.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Lo=function(C,H,re,de,we,ke){this.inputType=C,this.type=H,this.input=re,this.cases=de,this.outputs=we,this.otherwise=ke};Lo.parse=function(C,H){if(C.length<5)return H.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!=1)return H.error("Expected an even number of arguments.");var re,de;H.expectedType&&H.expectedType.kind!=="value"&&(de=H.expectedType);for(var we={},ke=[],Ne=2;Ne<C.length-1;Ne+=2){var at=C[Ne],pt=C[Ne+1];Array.isArray(at)||(at=[at]);var bt=H.concat(Ne);if(at.length===0)return bt.error("Expected at least one branch label.");for(var Nt=0,er=at;Nt<er.length;Nt+=1){var Zt=er[Nt];if(typeof Zt!="number"&&typeof Zt!="string")return bt.error("Branch labels must be numbers or strings.");if(typeof Zt=="number"&&Math.abs(Zt)>Number.MAX_SAFE_INTEGER)return bt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Zt=="number"&&Math.floor(Zt)!==Zt)return bt.error("Numeric branch labels must be integer values.");if(!re)re=no(Zt);else if(bt.checkSubtype(re,no(Zt)))return null;if(typeof we[String(Zt)]!="undefined")return bt.error("Branch labels must be unique.");we[String(Zt)]=ke.length}var dr=H.parse(pt,Ne,de);if(!dr)return null;de=de||dr.type,ke.push(dr)}var Wr=H.parse(C[1],1,Na);if(!Wr)return null;var mn=H.parse(C[C.length-1],C.length-1,de);return!mn||Wr.type.kind!=="value"&&H.concat(1).checkSubtype(re,Wr.type)?null:new Lo(re,de,Wr,we,ke,mn)},Lo.prototype.evaluate=function(C){var H=this.input.evaluate(C),re=no(H)===this.inputType&&this.outputs[this.cases[H]]||this.otherwise;return re.evaluate(C)},Lo.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},Lo.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},Lo.prototype.serialize=function(){for(var C=this,H=["match",this.input.serialize()],re=Object.keys(this.cases).sort(),de=[],we={},ke=0,Ne=re;ke<Ne.length;ke+=1){var at=Ne[ke],pt=we[this.cases[at]];pt===void 0?(we[this.cases[at]]=de.length,de.push([this.cases[at],[at]])):de[pt][1].push(at)}for(var bt=function(Wr){return C.inputType.kind==="number"?Number(Wr):Wr},Nt=0,er=de;Nt<er.length;Nt+=1){var Zt=er[Nt],pt=Zt[0],dr=Zt[1];dr.length===1?H.push(bt(dr[0])):H.push(dr.map(bt)),H.push(this.outputs[outputIndex$1].serialize())}return H.push(this.otherwise.serialize()),H};var ys=function(C,H,re){this.type=C,this.branches=H,this.otherwise=re};ys.parse=function(C,H){if(C.length<4)return H.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!=0)return H.error("Expected an odd number of arguments.");var re;H.expectedType&&H.expectedType.kind!=="value"&&(re=H.expectedType);for(var de=[],we=1;we<C.length-1;we+=2){var ke=H.parse(C[we],we,aa);if(!ke)return null;var Ne=H.parse(C[we+1],we+1,re);if(!Ne)return null;de.push([ke,Ne]),re=re||Ne.type}var at=H.parse(C[C.length-1],C.length-1,re);return at?new ys(re,de,at):null},ys.prototype.evaluate=function(C){for(var H=0,re=this.branches;H<re.length;H+=1){var de=re[H],we=de[0],ke=de[1];if(we.evaluate(C))return ke.evaluate(C)}return this.otherwise.evaluate(C)},ys.prototype.eachChild=function(C){for(var H=0,re=this.branches;H<re.length;H+=1){var de=re[H],we=de[0],ke=de[1];C(we),C(ke)}C(this.otherwise)},ys.prototype.outputDefined=function(){return this.branches.every(function(C){C[0];var H=C[1];return H.outputDefined()})&&this.otherwise.outputDefined()},ys.prototype.serialize=function(){var C=["case"];return this.eachChild(function(H){C.push(H.serialize())}),C};var po=function(C,H,re,de){this.type=C,this.input=H,this.beginIndex=re,this.endIndex=de};po.parse=function(C,H){if(C.length<=2||C.length>=5)return H.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var re=H.parse(C[1],1,Na),de=H.parse(C[2],2,kn);if(!re||!de)return null;if(!is(re.type,[vo(Na),Wn,Na]))return H.error("Expected first argument to be of type array or string, but found "+Ki(re.type)+" instead");if(C.length===4){var we=H.parse(C[3],3,kn);return we?new po(re.type,re,de,we):null}else return new po(re.type,re,de)},po.prototype.evaluate=function(C){var H=this.input.evaluate(C),re=this.beginIndex.evaluate(C);if(!Vl(H,["string","array"]))throw new uo("Expected first argument to be of type array or string, but found "+Ki(no(H))+" instead.");if(this.endIndex){var de=this.endIndex.evaluate(C);return H.slice(re,de)}return H.slice(re)},po.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},po.prototype.outputDefined=function(){return!1},po.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function hs(E,C){return E==="=="||E==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}function nf(E,C,H){return C===H}function Nf(E,C,H){return C!==H}function _t(E,C,H){return C<H}function Ot(E,C,H){return C>H}function ur(E,C,H){return C<=H}function rr(E,C,H){return C>=H}function zr(E,C,H,re){return re.compare(C,H)===0}function pn(E,C,H,re){return!zr(E,C,H,re)}function An(E,C,H,re){return re.compare(C,H)<0}function In(E,C,H,re){return re.compare(C,H)>0}function Un(E,C,H,re){return re.compare(C,H)<=0}function ea(E,C,H,re){return re.compare(C,H)>=0}function Cn(E,C,H){var re=E!=="=="&&E!=="!=";return function(){function de(we,ke,Ne){this.type=aa,this.lhs=we,this.rhs=ke,this.collator=Ne,this.hasUntypedArgument=we.type.kind==="value"||ke.type.kind==="value"}return de.parse=function(ke,Ne){if(ke.length!==3&&ke.length!==4)return Ne.error("Expected two or three arguments.");var at=ke[0],pt=Ne.parse(ke[1],1,Na);if(!pt)return null;if(!hs(at,pt.type))return Ne.concat(1).error('"'+at+`" comparisons are not supported for type '`+Ki(pt.type)+"'.");var bt=Ne.parse(ke[2],2,Na);if(!bt)return null;if(!hs(at,bt.type))return Ne.concat(2).error('"'+at+`" comparisons are not supported for type '`+Ki(bt.type)+"'.");if(pt.type.kind!==bt.type.kind&&pt.type.kind!=="value"&&bt.type.kind!=="value")return Ne.error("Cannot compare types '"+Ki(pt.type)+"' and '"+Ki(bt.type)+"'.");re&&(pt.type.kind==="value"&&bt.type.kind!=="value"?pt=new Oo(bt.type,[pt]):pt.type.kind!=="value"&&bt.type.kind==="value"&&(bt=new Oo(pt.type,[bt])));var Nt=null;if(ke.length===4){if(pt.type.kind!=="string"&&bt.type.kind!=="string"&&pt.type.kind!=="value"&&bt.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(Nt=Ne.parse(ke[3],3,Eo),!Nt)return null}return new de(pt,bt,Nt)},de.prototype.evaluate=function(ke){var Ne=this.lhs.evaluate(ke),at=this.rhs.evaluate(ke);if(re&&this.hasUntypedArgument){var pt=no(Ne),bt=no(at);if(pt.kind!==bt.kind||!(pt.kind==="string"||pt.kind==="number"))throw new uo('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+pt.kind+", "+bt.kind+") instead.")}if(this.collator&&!re&&this.hasUntypedArgument){var Nt=no(Ne),er=no(at);if(Nt.kind!=="string"||er.kind!=="string")return C(ke,Ne,at)}return this.collator?H(ke,Ne,at,this.collator.evaluate(ke)):C(ke,Ne,at)},de.prototype.eachChild=function(ke){ke(this.lhs),ke(this.rhs),this.collator&&ke(this.collator)},de.prototype.outputDefined=function(){return!0},de.prototype.serialize=function(){var ke=[E];return this.eachChild(function(Ne){ke.push(Ne.serialize())}),ke},de}()}var Yn=Cn("==",nf,zr),Vn=Cn("!=",Nf,pn),ia=Cn("<",_t,An),va=Cn(">",Ot,In),$a=Cn("<=",ur,Un),Ya=Cn(">=",rr,ea),ti=function(C,H,re,de,we){this.type=Wn,this.number=C,this.locale=H,this.currency=re,this.minFractionDigits=de,this.maxFractionDigits=we};ti.parse=function(C,H){if(C.length!==3)return H.error("Expected two arguments.");var re=H.parse(C[1],1,kn);if(!re)return null;var de=C[2];if(typeof de!="object"||Array.isArray(de))return H.error("NumberFormat options argument must be an object.");var we=null;if(de.locale&&(we=H.parse(de.locale,1,Wn),!we))return null;var ke=null;if(de.currency&&(ke=H.parse(de.currency,1,Wn),!ke))return null;var Ne=null;if(de["min-fraction-digits"]&&(Ne=H.parse(de["min-fraction-digits"],1,kn),!Ne))return null;var at=null;return de["max-fraction-digits"]&&(at=H.parse(de["max-fraction-digits"],1,kn),!at)?null:new ti(re,we,ke,Ne,at)},ti.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},ti.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},ti.prototype.outputDefined=function(){return!1},ti.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var Kt=function(C){this.type=kn,this.input=C};Kt.parse=function(C,H){if(C.length!==2)return H.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var re=H.parse(C[1],1);return re?re.type.kind!=="array"&&re.type.kind!=="string"&&re.type.kind!=="value"?H.error("Expected argument of type string or array, but found "+Ki(re.type)+" instead."):new Kt(re):null},Kt.prototype.evaluate=function(C){var H=this.input.evaluate(C);if(typeof H=="string")return H.length;if(Array.isArray(H))return H.length;throw new uo("Expected value to be of type string or array, but found "+Ki(no(H))+" instead.")},Kt.prototype.eachChild=function(C){C(this.input)},Kt.prototype.outputDefined=function(){return!1},Kt.prototype.serialize=function(){var C=["length"];return this.eachChild(function(H){C.push(H.serialize())}),C};var fa={"==":Yn,"!=":Vn,">":va,"<":ia,">=":Ya,"<=":$a,array:Oo,at:ml,boolean:Oo,case:ys,coalesce:Ls,collator:El,format:Vs,image:kl,in:Fl,"index-of":js,interpolate:Qo,"interpolate-hcl":Qo,"interpolate-lab":Qo,length:Kt,let:rl,literal:Co,match:Lo,number:Oo,"number-format":ti,object:Oo,slice:po,step:qs,string:Oo,"to-boolean":Gs,"to-color":Gs,"to-number":Gs,"to-string":Gs,var:mi,within:Tn};function Ca(E,C){var H=C[0],re=C[1],de=C[2],we=C[3];H=H.evaluate(E),re=re.evaluate(E),de=de.evaluate(E);var ke=we?we.evaluate(E):1,Ne=vl(H,re,de,ke);if(Ne)throw new uo(Ne);return new Oi(H/255*ke,re/255*ke,de/255*ke,ke)}function qa(E,C){return E in C}function Ba(E,C){var H=C[E];return typeof H=="undefined"?null:H}function Ui(E,C,H,re){for(;H<=re;){var de=H+re>>1;if(C[de]===E)return!0;C[de]>E?re=de-1:H=de+1}return!1}function Hi(E){return{type:E}}jo.register(fa,{error:[nu,[Wn],function(E,C){var H=C[0];throw new uo(H.evaluate(E))}],typeof:[Wn,[Na],function(E,C){var H=C[0];return Ki(no(H.evaluate(E)))}],"to-rgba":[vo(kn,4),[Ma],function(E,C){var H=C[0];return H.evaluate(E).toArray()}],rgb:[Ma,[kn,kn,kn],Ca],rgba:[Ma,[kn,kn,kn,kn],Ca],has:{type:aa,overloads:[[[Wn],function(E,C){var H=C[0];return qa(H.evaluate(E),E.properties())}],[[Wn,ui],function(E,C){var H=C[0],re=C[1];return qa(H.evaluate(E),re.evaluate(E))}]]},get:{type:Na,overloads:[[[Wn],function(E,C){var H=C[0];return Ba(H.evaluate(E),E.properties())}],[[Wn,ui],function(E,C){var H=C[0],re=C[1];return Ba(H.evaluate(E),re.evaluate(E))}]]},"feature-state":[Na,[Wn],function(E,C){var H=C[0];return Ba(H.evaluate(E),E.featureState||{})}],properties:[ui,[],function(E){return E.properties()}],"geometry-type":[Wn,[],function(E){return E.geometryType()}],id:[Na,[],function(E){return E.id()}],zoom:[kn,[],function(E){return E.globals.zoom}],"heatmap-density":[kn,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[kn,[],function(E){return E.globals.lineProgress||0}],accumulated:[Na,[],function(E){return E.globals.accumulated===void 0?null:E.globals.accumulated}],"+":[kn,Hi(kn),function(E,C){for(var H=0,re=0,de=C;re<de.length;re+=1){var we=de[re];H+=we.evaluate(E)}return H}],"*":[kn,Hi(kn),function(E,C){for(var H=1,re=0,de=C;re<de.length;re+=1){var we=de[re];H*=we.evaluate(E)}return H}],"-":{type:kn,overloads:[[[kn,kn],function(E,C){var H=C[0],re=C[1];return H.evaluate(E)-re.evaluate(E)}],[[kn],function(E,C){var H=C[0];return-H.evaluate(E)}]]},"/":[kn,[kn,kn],function(E,C){var H=C[0],re=C[1];return H.evaluate(E)/re.evaluate(E)}],"%":[kn,[kn,kn],function(E,C){var H=C[0],re=C[1];return H.evaluate(E)%re.evaluate(E)}],ln2:[kn,[],function(){return Math.LN2}],pi:[kn,[],function(){return Math.PI}],e:[kn,[],function(){return Math.E}],"^":[kn,[kn,kn],function(E,C){var H=C[0],re=C[1];return Math.pow(H.evaluate(E),re.evaluate(E))}],sqrt:[kn,[kn],function(E,C){var H=C[0];return Math.sqrt(H.evaluate(E))}],log10:[kn,[kn],function(E,C){var H=C[0];return Math.log(H.evaluate(E))/Math.LN10}],ln:[kn,[kn],function(E,C){var H=C[0];return Math.log(H.evaluate(E))}],log2:[kn,[kn],function(E,C){var H=C[0];return Math.log(H.evaluate(E))/Math.LN2}],sin:[kn,[kn],function(E,C){var H=C[0];return Math.sin(H.evaluate(E))}],cos:[kn,[kn],function(E,C){var H=C[0];return Math.cos(H.evaluate(E))}],tan:[kn,[kn],function(E,C){var H=C[0];return Math.tan(H.evaluate(E))}],asin:[kn,[kn],function(E,C){var H=C[0];return Math.asin(H.evaluate(E))}],acos:[kn,[kn],function(E,C){var H=C[0];return Math.acos(H.evaluate(E))}],atan:[kn,[kn],function(E,C){var H=C[0];return Math.atan(H.evaluate(E))}],min:[kn,Hi(kn),function(E,C){return Math.min.apply(Math,C.map(function(H){return H.evaluate(E)}))}],max:[kn,Hi(kn),function(E,C){return Math.max.apply(Math,C.map(function(H){return H.evaluate(E)}))}],abs:[kn,[kn],function(E,C){var H=C[0];return Math.abs(H.evaluate(E))}],round:[kn,[kn],function(E,C){var H=C[0],re=H.evaluate(E);return re<0?-Math.round(-re):Math.round(re)}],floor:[kn,[kn],function(E,C){var H=C[0];return Math.floor(H.evaluate(E))}],ceil:[kn,[kn],function(E,C){var H=C[0];return Math.ceil(H.evaluate(E))}],"filter-==":[aa,[Wn,Na],function(E,C){var H=C[0],re=C[1];return E.properties()[H.value]===re.value}],"filter-id-==":[aa,[Na],function(E,C){var H=C[0];return E.id()===H.value}],"filter-type-==":[aa,[Wn],function(E,C){var H=C[0];return E.geometryType()===H.value}],"filter-<":[aa,[Wn,Na],function(E,C){var H=C[0],re=C[1],de=E.properties()[H.value],we=re.value;return typeof de==typeof we&&de<we}],"filter-id-<":[aa,[Na],function(E,C){var H=C[0],re=E.id(),de=H.value;return typeof re==typeof de&&re<de}],"filter->":[aa,[Wn,Na],function(E,C){var H=C[0],re=C[1],de=E.properties()[H.value],we=re.value;return typeof de==typeof we&&de>we}],"filter-id->":[aa,[Na],function(E,C){var H=C[0],re=E.id(),de=H.value;return typeof re==typeof de&&re>de}],"filter-<=":[aa,[Wn,Na],function(E,C){var H=C[0],re=C[1],de=E.properties()[H.value],we=re.value;return typeof de==typeof we&&de<=we}],"filter-id-<=":[aa,[Na],function(E,C){var H=C[0],re=E.id(),de=H.value;return typeof re==typeof de&&re<=de}],"filter->=":[aa,[Wn,Na],function(E,C){var H=C[0],re=C[1],de=E.properties()[H.value],we=re.value;return typeof de==typeof we&&de>=we}],"filter-id->=":[aa,[Na],function(E,C){var H=C[0],re=E.id(),de=H.value;return typeof re==typeof de&&re>=de}],"filter-has":[aa,[Na],function(E,C){var H=C[0];return H.value in E.properties()}],"filter-has-id":[aa,[],function(E){return E.id()!==null&&E.id()!==void 0}],"filter-type-in":[aa,[vo(Wn)],function(E,C){var H=C[0];return H.value.indexOf(E.geometryType())>=0}],"filter-id-in":[aa,[vo(Na)],function(E,C){var H=C[0];return H.value.indexOf(E.id())>=0}],"filter-in-small":[aa,[Wn,vo(Na)],function(E,C){var H=C[0],re=C[1];return re.value.indexOf(E.properties()[H.value])>=0}],"filter-in-large":[aa,[Wn,vo(Na)],function(E,C){var H=C[0],re=C[1];return Ui(E.properties()[H.value],re.value,0,re.value.length-1)}],all:{type:aa,overloads:[[[aa,aa],function(E,C){var H=C[0],re=C[1];return H.evaluate(E)&&re.evaluate(E)}],[Hi(aa),function(E,C){for(var H=0,re=C;H<re.length;H+=1){var de=re[H];if(!de.evaluate(E))return!1}return!0}]]},any:{type:aa,overloads:[[[aa,aa],function(E,C){var H=C[0],re=C[1];return H.evaluate(E)||re.evaluate(E)}],[Hi(aa),function(E,C){for(var H=0,re=C;H<re.length;H+=1){var de=re[H];if(de.evaluate(E))return!0}return!1}]]},"!":[aa,[aa],function(E,C){var H=C[0];return!H.evaluate(E)}],"is-supported-script":[aa,[Wn],function(E,C){var H=C[0],re=E.globals&&E.globals.isSupportedScript;return re?re(H.evaluate(E)):!0}],upcase:[Wn,[Wn],function(E,C){var H=C[0];return H.evaluate(E).toUpperCase()}],downcase:[Wn,[Wn],function(E,C){var H=C[0];return H.evaluate(E).toLowerCase()}],concat:[Wn,Hi(Na),function(E,C){return C.map(function(H){return iu(H.evaluate(E))}).join("")}],"resolved-locale":[Wn,[Eo],function(E,C){var H=C[0];return H.evaluate(E).resolvedLocale()}]});function Xi(E){return{result:"success",value:E}}function zi(E){return{result:"error",value:E}}function ki(E){return E["property-type"]==="data-driven"||E["property-type"]==="cross-faded-data-driven"}function fs(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}function Vo(E){return!!E.expression&&E.expression.interpolated}function di(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":E===null?"null":typeof E}function Fa(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}function Li(E){return E}function $o(E,C){var H=C.type==="color",re=E.stops&&typeof E.stops[0][0]=="object",de=re||E.property!==void 0,we=re||!de,ke=E.type||(Vo(C)?"exponential":"interval");if(H&&(E=nn({},E),E.stops&&(E.stops=E.stops.map(function(Aa){return[Aa[0],Oi.parse(Aa[1])]})),E.default?E.default=Oi.parse(E.default):E.default=Oi.parse(C.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!Bu[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);var Ne,at,pt;if(ke==="exponential")Ne=Ps;else if(ke==="interval")Ne=Ol;else if(ke==="categorical"){Ne=nl,at=Object.create(null);for(var bt=0,Nt=E.stops;bt<Nt.length;bt+=1){var er=Nt[bt];at[er[0]]=er[1]}pt=typeof E.stops[0][0]}else if(ke==="identity")Ne=ws;else throw new Error('Unknown function type "'+ke+'"');if(re){for(var Zt={},dr=[],Wr=0;Wr<E.stops.length;Wr++){var mn=E.stops[Wr],un=mn[0].zoom;Zt[un]===void 0&&(Zt[un]={zoom:un,type:E.type,property:E.property,default:E.default,stops:[]},dr.push(un)),Zt[un].stops.push([mn[0].value,mn[1]])}for(var Nn=[],Pn=0,Fn=dr;Pn<Fn.length;Pn+=1){var Xn=Fn[Pn];Nn.push([Zt[Xn].zoom,$o(Zt[Xn],C)])}var sa={name:"linear"};return{kind:"composite",interpolationType:sa,interpolationFactor:Qo.interpolationFactor.bind(void 0,sa),zoomStops:Nn.map(function(Aa){return Aa[0]}),evaluate:function(ai,Wa){var Za=ai.zoom;return Ps({stops:Nn,base:E.base},C,Za).evaluate(Za,Wa)}}}else if(we){var ka=ke==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:ka,interpolationFactor:Qo.interpolationFactor.bind(void 0,ka),zoomStops:E.stops.map(function(Aa){return Aa[0]}),evaluate:function(Aa){var ai=Aa.zoom;return Ne(E,C,ai,at,pt)}}}else return{kind:"source",evaluate:function(ai,Wa){var Za=Wa&&Wa.properties?Wa.properties[E.property]:void 0;return Za===void 0?ss(E.default,C.default):Ne(E,C,Za,at,pt)}}}function ss(E,C,H){if(E!==void 0)return E;if(C!==void 0)return C;if(H!==void 0)return H}function nl(E,C,H,re,de){var we=typeof H===de?re[H]:void 0;return ss(we,E.default,C.default)}function Ol(E,C,H){if(di(H)!=="number")return ss(E.default,C.default);var re=E.stops.length;if(re===1||H<=E.stops[0][0])return E.stops[0][1];if(H>=E.stops[re-1][0])return E.stops[re-1][1];var de=Bi(E.stops.map(function(we){return we[0]}),H);return E.stops[de][1]}function Ps(E,C,H){var re=E.base!==void 0?E.base:1;if(di(H)!=="number")return ss(E.default,C.default);var de=E.stops.length;if(de===1||H<=E.stops[0][0])return E.stops[0][1];if(H>=E.stops[de-1][0])return E.stops[de-1][1];var we=Bi(E.stops.map(function(Nt){return Nt[0]}),H),ke=xl(H,re,E.stops[we][0],E.stops[we+1][0]),Ne=E.stops[we][1],at=E.stops[we+1][1],pt=fu[C.type]||Li;if(E.colorSpace&&E.colorSpace!=="rgb"){var bt=Bu[E.colorSpace];pt=function(Nt,er){return bt.reverse(bt.interpolate(bt.forward(Nt),bt.forward(er),ke))}}return typeof Ne.evaluate=="function"?{evaluate:function(){for(var er=[],Zt=arguments.length;Zt--;)er[Zt]=arguments[Zt];var dr=Ne.evaluate.apply(void 0,er),Wr=at.evaluate.apply(void 0,er);if(!(dr===void 0||Wr===void 0))return pt(dr,Wr,ke)}}:pt(Ne,at,ke)}function ws(E,C,H){return C.type==="color"?H=Oi.parse(H):C.type==="formatted"?H=To.fromString(H.toString()):C.type==="resolvedImage"?H=os.fromString(H.toString()):di(H)!==C.type&&(C.type!=="enum"||!C.values[H])&&(H=void 0),ss(H,E.default,C.default)}function xl(E,C,H,re){var de=re-H,we=E-H;return de===0?0:C===1?we/de:(Math.pow(C,we)-1)/(Math.pow(C,de)-1)}var al=function(C,H){this.expression=C,this._warningHistory={},this._evaluator=new dl,this._defaultValue=H?vc(H):null,this._enumValues=H&&H.type==="enum"?H.values:null};al.prototype.evaluateWithoutErrorHandling=function(C,H,re,de,we,ke){return this._evaluator.globals=C,this._evaluator.feature=H,this._evaluator.featureState=re,this._evaluator.canonical=de,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=ke,this.expression.evaluate(this._evaluator)},al.prototype.evaluate=function(C,H,re,de,we,ke){this._evaluator.globals=C,this._evaluator.feature=H||null,this._evaluator.featureState=re||null,this._evaluator.canonical=de,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=ke||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!==Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new uo("Expected value to be one of "+Object.keys(this._enumValues).map(function(at){return JSON.stringify(at)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(at){return this._warningHistory[at.message]||(this._warningHistory[at.message]=!0,typeof console!="undefined"&&console.warn(at.message)),this._defaultValue}};function cs(E){return Array.isArray(E)&&E.length>0&&typeof E[0]=="string"&&E[0]in fa}function af(E,C){var H=new Ei(fa,[],C?Uf(C):void 0),re=H.parse(E,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return re?Xi(new al(re,C)):zi(H.errors)}var Tf=function(C,H){this.kind=C,this._styleExpression=H,this.isStateDependent=C!=="constant"&&!Gn(H.expression)};Tf.prototype.evaluateWithoutErrorHandling=function(C,H,re,de,we,ke){return this._styleExpression.evaluateWithoutErrorHandling(C,H,re,de,we,ke)},Tf.prototype.evaluate=function(C,H,re,de,we,ke){return this._styleExpression.evaluate(C,H,re,de,we,ke)};var vs=function(C,H,re,de){this.kind=C,this.zoomStops=re,this._styleExpression=H,this.isStateDependent=C!=="camera"&&!Gn(H.expression),this.interpolationType=de};vs.prototype.evaluateWithoutErrorHandling=function(C,H,re,de,we,ke){return this._styleExpression.evaluateWithoutErrorHandling(C,H,re,de,we,ke)},vs.prototype.evaluate=function(C,H,re,de,we,ke){return this._styleExpression.evaluate(C,H,re,de,we,ke)},vs.prototype.interpolationFactor=function(C,H,re){return this.interpolationType?Qo.interpolationFactor(this.interpolationType,C,H,re):0};function Bf(E,C){if(E=af(E,C),E.result==="error")return E;var H=E.value.expression,re=ta(H);if(!re&&!ki(C))return zi([new ua("","data expressions not supported")]);var de=ii(H,["zoom"]);if(!de&&!fs(C))return zi([new ua("","zoom expressions not supported")]);var we=hc(H);if(!we&&!de)return zi([new ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(we instanceof ua)return zi([we]);if(we instanceof Qo&&!Vo(C))return zi([new ua("",'"interpolate" expressions cannot be used with this property')]);if(!we)return Xi(re?new Tf("constant",E.value):new Tf("source",E.value));var ke=we instanceof Qo?we.interpolation:void 0;return Xi(re?new vs("camera",E.value,we.labels,ke):new vs("composite",E.value,we.labels,ke))}var of=function(C,H){this._parameters=C,this._specification=H,nn(this,$o(this._parameters,this._specification))};of.deserialize=function(C){return new of(C._parameters,C._specification)},of.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};function jl(E,C){if(Fa(E))return new of(E,C);if(cs(E)){var H=Bf(E,C);if(H.result==="error")throw new Error(H.value.map(function(de){return de.key+": "+de.message}).join(", "));return H.value}else{var re=E;return typeof E=="string"&&C.type==="color"&&(re=Oi.parse(E)),{kind:"constant",evaluate:function(){return re}}}}function hc(E){var C=null;if(E instanceof rl)C=hc(E.result);else if(E instanceof Ls)for(var H=0,re=E.args;H<re.length;H+=1){var de=re[H];if(C=hc(de),C)break}else(E instanceof qs||E instanceof Qo)&&E.input instanceof jo&&E.input.name==="zoom"&&(C=E);return C instanceof ua||E.eachChild(function(we){var ke=hc(we);ke instanceof ua?C=ke:!C&&ke?C=new ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&ke&&C!==ke&&(C=new ua("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}function Uf(E){var C={color:Ma,string:Wn,number:kn,enum:Wn,boolean:aa,formatted:Xs,resolvedImage:cl};return E.type==="array"?vo(C[E.value]||Na,E.length):C[E.type]}function vc(E){return E.type==="color"&&Fa(E.default)?new Oi(0,0,0,0):E.type==="color"?Oi.parse(E.default)||null:E.default===void 0?null:E.default}function Nl(E){var C=E.key,H=E.value,re=E.valueSpec||{},de=E.objectElementValidators||{},we=E.style,ke=E.styleSpec,Ne=[],at=di(H);if(at!=="object")return[new hr(C,H,"object expected, "+at+" found")];for(var pt in H){var bt=pt.split(".")[0],Nt=re[bt]||re["*"],er=void 0;if(de[bt])er=de[bt];else if(re[bt])er=Ri;else if(de["*"])er=de["*"];else if(re["*"])er=Ri;else{Ne.push(new hr(C,H[pt],'unknown property "'+pt+'"'));continue}Ne=Ne.concat(er({key:(C&&C+".")+pt,value:H[pt],valueSpec:Nt,style:we,styleSpec:ke,object:H,objectKey:pt},H))}for(var Zt in re)de[Zt]||re[Zt].required&&re[Zt].default===void 0&&H[Zt]===void 0&&Ne.push(new hr(C,H,'missing required property "'+Zt+'"'));return Ne}function Cc(E){var C=E.value,H=E.valueSpec,re=E.style,de=E.styleSpec,we=E.key,ke=E.arrayElementValidator||Ri;if(di(C)!=="array")return[new hr(we,C,"array expected, "+di(C)+" found")];if(H.length&&C.length!==H.length)return[new hr(we,C,"array length "+H.length+" expected, length "+C.length+" found")];if(H["min-length"]&&C.length<H["min-length"])return[new hr(we,C,"array length at least "+H["min-length"]+" expected, length "+C.length+" found")];var Ne={type:H.value,values:H.values};de.$version<7&&(Ne.function=H.function),di(H.value)==="object"&&(Ne=H.value);for(var at=[],pt=0;pt<C.length;pt++)at=at.concat(ke({array:C,arrayIndex:pt,value:C[pt],valueSpec:Ne,style:re,styleSpec:de,key:we+"["+pt+"]"}));return at}function Hf(E){var C=E.key,H=E.value,re=E.valueSpec,de=di(H);return de==="number"&&H!==H&&(de="NaN"),de!=="number"?[new hr(C,H,"number expected, "+de+" found")]:"minimum"in re&&H<re.minimum?[new hr(C,H,H+" is less than the minimum value "+re.minimum)]:"maximum"in re&&H>re.maximum?[new hr(C,H,H+" is greater than the maximum value "+re.maximum)]:[]}function Vf(E){var C=E.valueSpec,H=On(E.value.type),re,de={},we,ke,Ne=H!=="categorical"&&E.value.property===void 0,at=!Ne,pt=di(E.value.stops)==="array"&&di(E.value.stops[0])==="array"&&di(E.value.stops[0][0])==="object",bt=Nl({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:Nt,default:dr}});return H==="identity"&&Ne&&bt.push(new hr(E.key,E.value,'missing required property "property"')),H!=="identity"&&!E.value.stops&&bt.push(new hr(E.key,E.value,'missing required property "stops"')),H==="exponential"&&E.valueSpec.expression&&!Vo(E.valueSpec)&&bt.push(new hr(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&(at&&!ki(E.valueSpec)?bt.push(new hr(E.key,E.value,"property functions not supported")):Ne&&!fs(E.valueSpec)&&bt.push(new hr(E.key,E.value,"zoom functions not supported"))),(H==="categorical"||pt)&&E.value.property===void 0&&bt.push(new hr(E.key,E.value,'"property" property is required')),bt;function Nt(Wr){if(H==="identity")return[new hr(Wr.key,Wr.value,'identity function may not have a "stops" property')];var mn=[],un=Wr.value;return mn=mn.concat(Cc({key:Wr.key,value:un,valueSpec:Wr.valueSpec,style:Wr.style,styleSpec:Wr.styleSpec,arrayElementValidator:er})),di(un)==="array"&&un.length===0&&mn.push(new hr(Wr.key,un,"array must have at least one stop")),mn}function er(Wr){var mn=[],un=Wr.value,Nn=Wr.key;if(di(un)!=="array")return[new hr(Nn,un,"array expected, "+di(un)+" found")];if(un.length!==2)return[new hr(Nn,un,"array length 2 expected, length "+un.length+" found")];if(pt){if(di(un[0])!=="object")return[new hr(Nn,un,"object expected, "+di(un[0])+" found")];if(un[0].zoom===void 0)return[new hr(Nn,un,"object stop key must have zoom")];if(un[0].value===void 0)return[new hr(Nn,un,"object stop key must have value")];if(ke&&ke>On(un[0].zoom))return[new hr(Nn,un[0].zoom,"stop zoom values must appear in ascending order")];On(un[0].zoom)!==ke&&(ke=On(un[0].zoom),we=void 0,de={}),mn=mn.concat(Nl({key:Nn+"[0]",value:un[0],valueSpec:{zoom:{}},style:Wr.style,styleSpec:Wr.styleSpec,objectElementValidators:{zoom:Hf,value:Zt}}))}else mn=mn.concat(Zt({key:Nn+"[0]",value:un[0],valueSpec:{},style:Wr.style,styleSpec:Wr.styleSpec},un));return cs(ra(un[1]))?mn.concat([new hr(Nn+"[1]",un[1],"expressions are not allowed in function stops.")]):mn.concat(Ri({key:Nn+"[1]",value:un[1],valueSpec:C,style:Wr.style,styleSpec:Wr.styleSpec}))}function Zt(Wr,mn){var un=di(Wr.value),Nn=On(Wr.value),Pn=Wr.value!==null?Wr.value:mn;if(!re)re=un;else if(un!==re)return[new hr(Wr.key,Pn,un+" stop domain type must match previous stop domain type "+re)];if(un!=="number"&&un!=="string"&&un!=="boolean")return[new hr(Wr.key,Pn,"stop domain value must be a number, string, or boolean")];if(un!=="number"&&H!=="categorical"){var Fn="number expected, "+un+" found";return ki(C)&&H===void 0&&(Fn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new hr(Wr.key,Pn,Fn)]}return H==="categorical"&&un==="number"&&(!isFinite(Nn)||Math.floor(Nn)!==Nn)?[new hr(Wr.key,Pn,"integer expected, found "+Nn)]:H!=="categorical"&&un==="number"&&we!==void 0&&Nn<we?[new hr(Wr.key,Pn,"stop domain values must appear in ascending order")]:(we=Nn,H==="categorical"&&Nn in de?[new hr(Wr.key,Pn,"stop domain values must be unique")]:(de[Nn]=!0,[]))}function dr(Wr){return Ri({key:Wr.key,value:Wr.value,valueSpec:C,style:Wr.style,styleSpec:Wr.styleSpec})}}function Rs(E){var C=(E.expressionContext==="property"?Bf:af)(ra(E.value),E.valueSpec);if(C.result==="error")return C.value.map(function(re){return new hr(""+E.key+re.key,E.value,re.message)});var H=C.value.expression||C.value._styleExpression.expression;if(E.expressionContext==="property"&&E.propertyKey==="text-font"&&!H.outputDefined())return[new hr(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if(E.expressionContext==="property"&&E.propertyType==="layout"&&!Gn(H))return[new hr(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if(E.expressionContext==="filter"&&!Gn(H))return[new hr(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&E.expressionContext.indexOf("cluster")===0){if(!ii(H,["zoom","feature-state"]))return[new hr(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(E.expressionContext==="cluster-initial"&&!ta(H))return[new hr(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pc(E){var C=E.value,H=E.key,re=di(C);return re!=="boolean"?[new hr(H,C,"boolean expected, "+re+" found")]:[]}function dc(E){var C=E.key,H=E.value,re=di(H);return re!=="string"?[new hr(C,H,"color expected, "+re+" found")]:Fu(H)===null?[new hr(C,H,'color expected, "'+H+'" found')]:[]}function Ds(E){var C=E.key,H=E.value,re=E.valueSpec,de=[];return Array.isArray(re.values)?re.values.indexOf(On(H))===-1&&de.push(new hr(C,H,"expected one of ["+re.values.join(", ")+"], "+JSON.stringify(H)+" found")):Object.keys(re.values).indexOf(On(H))===-1&&de.push(new hr(C,H,"expected one of ["+Object.keys(re.values).join(", ")+"], "+JSON.stringify(H)+" found")),de}function Uu(E){if(E===!0||E===!1)return!0;if(!Array.isArray(E)||E.length===0)return!1;switch(E[0]){case"has":return E.length>=2&&E[1]!=="$id"&&E[1]!=="$type";case"in":return E.length>=3&&(typeof E[1]!="string"||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return E.length!==3||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var C=0,H=E.slice(1);C<H.length;C+=1){var re=H[C];if(!Uu(re)&&typeof re!="boolean")return!1}return!0;default:return!0}}var Gf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Wf(E){if(E==null)return{filter:function(){return!0},needGeometry:!1};Uu(E)||(E=ot(E));var C=af(E,Gf);if(C.result==="error")throw new Error(C.value.map(function(re){return re.key+": "+re.message}).join(", "));var H=je(E);return{filter:function(re,de,we){return C.value.evaluate(re,de,{},we)},needGeometry:H}}function Oe(E,C){return E<C?-1:E>C?1:0}function je(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var C=1;C<E.length;C++)if(je(E[C]))return!0;return!1}function ot(E){if(!E)return!0;var C=E[0];if(E.length<=1)return C!=="any";var H=C==="=="?ft(E[1],E[2],"=="):C==="!="?or(ft(E[1],E[2],"==")):C==="<"||C===">"||C==="<="||C===">="?ft(E[1],E[2],C):C==="any"?St(E.slice(1)):C==="all"?["all"].concat(E.slice(1).map(ot)):C==="none"?["all"].concat(E.slice(1).map(ot).map(or)):C==="in"?Tt(E[1],E.slice(2)):C==="!in"?or(Tt(E[1],E.slice(2))):C==="has"?Et(E[1]):C==="!has"?or(Et(E[1])):C==="within"?E:!0;return H}function ft(E,C,H){switch(E){case"$type":return["filter-type-"+H,C];case"$id":return["filter-id-"+H,C];default:return["filter-"+H,E,C]}}function St(E){return["any"].concat(E.map(ot))}function Tt(E,C){if(C.length===0)return!1;switch(E){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(H){return typeof H!=typeof C[0]})?["filter-in-large",E,["literal",C.sort(Oe)]]:["filter-in-small",E,["literal",C]]}}function Et(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}function or(E){return["!",E]}function vr(E){return Uu(ra(E.value))?Rs(nn({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):nr(E)}function nr(E){var C=E.value,H=E.key;if(di(C)!=="array")return[new hr(H,C,"array expected, "+di(C)+" found")];var re=E.styleSpec,de,we=[];if(C.length<1)return[new hr(H,C,"filter array must have at least 1 element")];switch(we=we.concat(Ds({key:H+"[0]",value:C[0],valueSpec:re.filter_operator,style:E.style,styleSpec:E.styleSpec})),On(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&On(C[1])==="$type"&&we.push(new hr(H,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&we.push(new hr(H,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(de=di(C[1]),de!=="string"&&we.push(new hr(H+"[1]",C[1],"string expected, "+de+" found")));for(var ke=2;ke<C.length;ke++)de=di(C[ke]),On(C[1])==="$type"?we=we.concat(Ds({key:H+"["+ke+"]",value:C[ke],valueSpec:re.geometry_type,style:E.style,styleSpec:E.styleSpec})):de!=="string"&&de!=="number"&&de!=="boolean"&&we.push(new hr(H+"["+ke+"]",C[ke],"string, number, or boolean expected, "+de+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<C.length;Ne++)we=we.concat(nr({key:H+"["+Ne+"]",value:C[Ne],style:E.style,styleSpec:E.styleSpec}));break;case"has":case"!has":de=di(C[1]),C.length!==2?we.push(new hr(H,C,'filter array for "'+C[0]+'" operator must have 2 elements')):de!=="string"&&we.push(new hr(H+"[1]",C[1],"string expected, "+de+" found"));break;case"within":de=di(C[1]),C.length!==2?we.push(new hr(H,C,'filter array for "'+C[0]+'" operator must have 2 elements')):de!=="object"&&we.push(new hr(H+"[1]",C[1],"object expected, "+de+" found"));break}return we}function gr(E,C){var H=E.key,re=E.style,de=E.styleSpec,we=E.value,ke=E.objectKey,Ne=de[C+"_"+E.layerType];if(!Ne)return[];var at=ke.match(/^(.*)-transition$/);if(C==="paint"&&at&&Ne[at[1]]&&Ne[at[1]].transition)return Ri({key:H,value:we,valueSpec:de.transition,style:re,styleSpec:de});var pt=E.valueSpec||Ne[ke];if(!pt)return[new hr(H,we,'unknown property "'+ke+'"')];var bt;if(di(we)==="string"&&ki(pt)&&!pt.tokens&&(bt=/^{([^}]+)}$/.exec(we)))return[new hr(H,we,'"'+ke+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(bt[1])+" }`.")];var Nt=[];return E.layerType==="symbol"&&(ke==="text-field"&&re&&!re.glyphs&&Nt.push(new hr(H,we,'use of "text-field" requires a style "glyphs" property')),ke==="text-font"&&Fa(ra(we))&&On(we.type)==="identity"&&Nt.push(new hr(H,we,'"text-font" does not support identity functions'))),Nt.concat(Ri({key:E.key,value:we,valueSpec:pt,style:re,styleSpec:de,expressionContext:"property",propertyType:C,propertyKey:ke}))}function Or(E){return gr(E,"paint")}function Kr(E){return gr(E,"layout")}function cn(E){var C=[],H=E.value,re=E.key,de=E.style,we=E.styleSpec;!H.type&&!H.ref&&C.push(new hr(re,H,'either "type" or "ref" is required'));var ke=On(H.type),Ne=On(H.ref);if(H.id)for(var at=On(H.id),pt=0;pt<E.arrayIndex;pt++){var bt=de.layers[pt];On(bt.id)===at&&C.push(new hr(re,H.id,'duplicate layer id "'+H.id+'", previously used at line '+bt.id.__line__))}if("ref"in H){["type","source","source-layer","filter","layout"].forEach(function(dr){dr in H&&C.push(new hr(re,H[dr],'"'+dr+'" is prohibited for ref layers'))});var Nt;de.layers.forEach(function(dr){On(dr.id)===Ne&&(Nt=dr)}),Nt?Nt.ref?C.push(new hr(re,H.ref,"ref cannot reference another ref layer")):ke=On(Nt.type):C.push(new hr(re,H.ref,'ref layer "'+Ne+'" not found'))}else if(ke!=="background")if(!H.source)C.push(new hr(re,H,'missing required property "source"'));else{var er=de.sources&&de.sources[H.source],Zt=er&&On(er.type);er?Zt==="vector"&&ke==="raster"?C.push(new hr(re,H.source,'layer "'+H.id+'" requires a raster source')):Zt==="raster"&&ke!=="raster"?C.push(new hr(re,H.source,'layer "'+H.id+'" requires a vector source')):Zt==="vector"&&!H["source-layer"]?C.push(new hr(re,H,'layer "'+H.id+'" must specify a "source-layer"')):Zt==="raster-dem"&&ke!=="hillshade"?C.push(new hr(re,H.source,"raster-dem source can only be used with layer type 'hillshade'.")):ke==="line"&&H.paint&&H.paint["line-gradient"]&&(Zt!=="geojson"||!er.lineMetrics)&&C.push(new hr(re,H,'layer "'+H.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new hr(re,H.source,'source "'+H.source+'" not found'))}return C=C.concat(Nl({key:re,value:H,valueSpec:we.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ri({key:re+".type",value:H.type,valueSpec:we.layer.type,style:E.style,styleSpec:E.styleSpec,object:H,objectKey:"type"})},filter:vr,layout:function(Wr){return Nl({layer:H,key:Wr.key,value:Wr.value,style:Wr.style,styleSpec:Wr.styleSpec,objectElementValidators:{"*":function(un){return Kr(nn({layerType:ke},un))}}})},paint:function(Wr){return Nl({layer:H,key:Wr.key,value:Wr.value,style:Wr.style,styleSpec:Wr.styleSpec,objectElementValidators:{"*":function(un){return Or(nn({layerType:ke},un))}}})}}})),C}function Ln(E){var C=E.value,H=E.key,re=di(C);return re!=="string"?[new hr(H,C,"string expected, "+re+" found")]:[]}var zn={promoteId:Ua};function oa(E){var C=E.value,H=E.key,re=E.styleSpec,de=E.style;if(!C.type)return[new hr(H,C,'"type" is required')];var we=On(C.type),ke;switch(we){case"vector":case"raster":case"raster-dem":return ke=Nl({key:H,value:C,valueSpec:re["source_"+we.replace("-","_")],style:E.style,styleSpec:re,objectElementValidators:zn}),ke;case"geojson":if(ke=Nl({key:H,value:C,valueSpec:re.source_geojson,style:de,styleSpec:re,objectElementValidators:zn}),C.cluster)for(var Ne in C.clusterProperties){var at=C.clusterProperties[Ne],pt=at[0],bt=at[1],Nt=typeof pt=="string"?[pt,["accumulated"],["get",Ne]]:pt;ke.push.apply(ke,Rs({key:H+"."+Ne+".map",value:bt,expressionContext:"cluster-map"})),ke.push.apply(ke,Rs({key:H+"."+Ne+".reduce",value:Nt,expressionContext:"cluster-reduce"}))}return ke;case"video":return Nl({key:H,value:C,valueSpec:re.source_video,style:de,styleSpec:re});case"image":return Nl({key:H,value:C,valueSpec:re.source_image,style:de,styleSpec:re});case"canvas":return[new hr(H,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ds({key:H+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:de,styleSpec:re})}}function Ua(E){var C=E.key,H=E.value;if(di(H)==="string")return Ln({key:C,value:H});var re=[];for(var de in H)re.push.apply(re,Ln({key:C+"."+de,value:H[de]}));return re}function Pa(E){var C=E.value,H=E.styleSpec,re=H.light,de=E.style,we=[],ke=di(C);if(C===void 0)return we;if(ke!=="object")return we=we.concat([new hr("light",C,"object expected, "+ke+" found")]),we;for(var Ne in C){var at=Ne.match(/^(.*)-transition$/);at&&re[at[1]]&&re[at[1]].transition?we=we.concat(Ri({key:Ne,value:C[Ne],valueSpec:H.transition,style:de,styleSpec:H})):re[Ne]?we=we.concat(Ri({key:Ne,value:C[Ne],valueSpec:re[Ne],style:de,styleSpec:H})):we=we.concat([new hr(Ne,C[Ne],'unknown property "'+Ne+'"')])}return we}function ci(E){return Ln(E).length===0?[]:Rs(E)}function si(E){return Ln(E).length===0?[]:Rs(E)}var hi={"*":function(){return[]},array:Cc,boolean:pc,number:Hf,color:dc,constants:Fr,enum:Ds,filter:vr,function:Vf,layer:cn,object:Nl,source:oa,light:Pa,string:Ln,formatted:ci,resolvedImage:si};function Ri(E){var C=E.value,H=E.valueSpec,re=E.styleSpec;if(H.expression&&Fa(On(C)))return Vf(E);if(H.expression&&cs(ra(C)))return Rs(E);if(H.type&&hi[H.type])return hi[H.type](E);var de=Nl(nn({},E,{valueSpec:H.type?re[H.type]:H}));return de}function Vi(E){var C=E.value,H=E.key,re=Ln(E);return re.length||(C.indexOf("{fontstack}")===-1&&re.push(new hr(H,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&re.push(new hr(H,C,'"glyphs" url must include a "{range}" token'))),re}function xi(E,C){C===void 0&&(C=mr);var H=[];return H=H.concat(Ri({key:"",value:E,valueSpec:C.$root,styleSpec:C,style:E,objectElementValidators:{glyphs:Vi,"*":function(){return[]}}})),E.constants&&(H=H.concat(Fr({key:"constants",value:E.constants,style:E,styleSpec:C}))),Po(H)}xi.source=qo(oa),xi.light=qo(Pa),xi.layer=qo(cn),xi.filter=qo(vr),xi.paintProperty=qo(Or),xi.layoutProperty=qo(Kr);function Po(E){return[].concat(E).sort(function(C,H){return C.line-H.line})}function qo(E){return function(){for(var C=[],H=arguments.length;H--;)C[H]=arguments[H];return Po(E.apply(this,C))}}var ps=xi,Ni=ps.light,eo=ps.paintProperty,Ts=ps.layoutProperty;function es(E,C){var H=!1;if(C&&C.length)for(var re=0,de=C;re<de.length;re+=1){var we=de[re];E.fire(new Cr(new Error(we.message))),H=!0}return H}var As=ve,Ws=3;function ve(E,C,H){var re=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var de=new Int32Array(this.arrayBuffer);E=de[0],C=de[1],H=de[2],this.d=C+2*H;for(var we=0;we<this.d*this.d;we++){var ke=de[Ws+we],Ne=de[Ws+we+1];re.push(ke===Ne?null:de.subarray(ke,Ne))}var at=de[Ws+re.length],pt=de[Ws+re.length+1];this.keys=de.subarray(at,pt),this.bboxes=de.subarray(pt),this.insert=this._insertReadonly}else{this.d=C+2*H;for(var bt=0;bt<this.d*this.d;bt++)re.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=E,this.padding=H,this.scale=C/E,this.uid=0;var Nt=H/C*E;this.min=-Nt,this.max=E+Nt}ve.prototype.insert=function(E,C,H,re,de){this._forEachCell(C,H,re,de,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(C),this.bboxes.push(H),this.bboxes.push(re),this.bboxes.push(de)},ve.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ve.prototype._insertCell=function(E,C,H,re,de,we){this.cells[de].push(we)},ve.prototype.query=function(E,C,H,re,de){var we=this.min,ke=this.max;if(E<=we&&C<=we&&ke<=H&&ke<=re&&!de)return Array.prototype.slice.call(this.keys);var Ne=[],at={};return this._forEachCell(E,C,H,re,this._queryCell,Ne,at,de),Ne},ve.prototype._queryCell=function(E,C,H,re,de,we,ke,Ne){var at=this.cells[de];if(at!==null)for(var pt=this.keys,bt=this.bboxes,Nt=0;Nt<at.length;Nt++){var er=at[Nt];if(ke[er]===void 0){var Zt=er*4;(Ne?Ne(bt[Zt+0],bt[Zt+1],bt[Zt+2],bt[Zt+3]):E<=bt[Zt+2]&&C<=bt[Zt+3]&&H>=bt[Zt+0]&&re>=bt[Zt+1])?(ke[er]=!0,we.push(pt[er])):ke[er]=!1}}},ve.prototype._forEachCell=function(E,C,H,re,de,we,ke,Ne){for(var at=this._convertToCellCoord(E),pt=this._convertToCellCoord(C),bt=this._convertToCellCoord(H),Nt=this._convertToCellCoord(re),er=at;er<=bt;er++)for(var Zt=pt;Zt<=Nt;Zt++){var dr=this.d*Zt+er;if(!(Ne&&!Ne(this._convertFromCellCoord(er),this._convertFromCellCoord(Zt),this._convertFromCellCoord(er+1),this._convertFromCellCoord(Zt+1)))&&de.call(this,E,C,H,re,dr,we,ke,Ne))return}},ve.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},ve.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},ve.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,C=Ws+this.cells.length+1+1,H=0,re=0;re<this.cells.length;re++)H+=this.cells[re].length;var de=new Int32Array(C+H+this.keys.length+this.bboxes.length);de[0]=this.extent,de[1]=this.n,de[2]=this.padding;for(var we=C,ke=0;ke<E.length;ke++){var Ne=E[ke];de[Ws+ke]=we,de.set(Ne,we),we+=Ne.length}return de[Ws+E.length]=we,de.set(this.keys,we),we+=this.keys.length,de[Ws+E.length+1]=we,de.set(this.bboxes,we),we+=this.bboxes.length,de.buffer};var Me=self.ImageData,Re=self.ImageBitmap,Ve={};function Ue(E,C,H){H===void 0&&(H={}),Object.defineProperty(C,"_classRegistryKey",{value:E,writeable:!1}),Ve[E]={klass:C,omit:H.omit||[],shallow:H.shallow||[]}}Ue("Object",Object),As.serialize=function(C,H){var re=C.toArrayBuffer();return H&&H.push(re),{buffer:re}},As.deserialize=function(C){return new As(C.buffer)},Ue("Grid",As),Ue("Color",Oi),Ue("Error",Error),Ue("ResolvedImage",os),Ue("StylePropertyFunction",of),Ue("StyleExpression",al,{omit:["_evaluator"]}),Ue("ZoomDependentExpression",vs),Ue("ZoomConstantExpression",Tf),Ue("CompoundExpression",jo,{omit:["_evaluate"]});for(var $e in fa)fa[$e]._classRegistryKey||Ue("Expression_"+$e,fa[$e]);function wt(E){return E&&typeof ArrayBuffer!="undefined"&&(E instanceof ArrayBuffer||E.constructor&&E.constructor.name==="ArrayBuffer")}function gt(E){return Re&&E instanceof Re}function Dt(E,C){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(wt(E)||gt(E))return C&&C.push(E),E;if(ArrayBuffer.isView(E)){var H=E;return C&&C.push(H.buffer),H}if(E instanceof Me)return C&&C.push(E.data.buffer),E;if(Array.isArray(E)){for(var re=[],de=0,we=E;de<we.length;de+=1){var ke=we[de];re.push(Dt(ke,C))}return re}if(typeof E=="object"){var Ne=E.constructor,at=Ne._classRegistryKey;if(!at)throw new Error("can't serialize object of unregistered class");var pt=Ne.serialize?Ne.serialize(E,C):{};if(!Ne.serialize){for(var bt in E)if(!!E.hasOwnProperty(bt)&&!(Ve[at].omit.indexOf(bt)>=0)){var Nt=E[bt];pt[bt]=Ve[at].shallow.indexOf(bt)>=0?Nt:Dt(Nt,C)}E instanceof Error&&(pt.message=E.message)}if(pt.$name)throw new Error("$name property is reserved for worker serialization logic.");return at!=="Object"&&(pt.$name=at),pt}throw new Error("can't serialize object of type "+typeof E)}function Wt(E){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||wt(E)||gt(E)||ArrayBuffer.isView(E)||E instanceof Me)return E;if(Array.isArray(E))return E.map(Wt);if(typeof E=="object"){var C=E.$name||"Object",H=Ve[C],re=H.klass;if(!re)throw new Error("can't deserialize unregistered class "+C);if(re.deserialize)return re.deserialize(E);for(var de=Object.create(re.prototype),we=0,ke=Object.keys(E);we<ke.length;we+=1){var Ne=ke[we];if(Ne!=="$name"){var at=E[Ne];de[Ne]=Ve[C].shallow.indexOf(Ne)>=0?at:Wt(at)}}return de}throw new Error("can't deserialize object of type "+typeof E)}var Jt=function(){this.first=!0};Jt.prototype.update=function(C,H){var re=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=re,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=re,!0):(this.lastFloorZoom>re?(this.lastIntegerZoom=re+1,this.lastIntegerZoomTime=H):this.lastFloorZoom<re&&(this.lastIntegerZoom=re,this.lastIntegerZoomTime=H),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=re,!0):!1)};var qt={"Latin-1 Supplement":function(E){return E>=128&&E<=255},Arabic:function(E){return E>=1536&&E<=1791},"Arabic Supplement":function(E){return E>=1872&&E<=1919},"Arabic Extended-A":function(E){return E>=2208&&E<=2303},"Hangul Jamo":function(E){return E>=4352&&E<=4607},"Unified Canadian Aboriginal Syllabics":function(E){return E>=5120&&E<=5759},Khmer:function(E){return E>=6016&&E<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(E){return E>=6320&&E<=6399},"General Punctuation":function(E){return E>=8192&&E<=8303},"Letterlike Symbols":function(E){return E>=8448&&E<=8527},"Number Forms":function(E){return E>=8528&&E<=8591},"Miscellaneous Technical":function(E){return E>=8960&&E<=9215},"Control Pictures":function(E){return E>=9216&&E<=9279},"Optical Character Recognition":function(E){return E>=9280&&E<=9311},"Enclosed Alphanumerics":function(E){return E>=9312&&E<=9471},"Geometric Shapes":function(E){return E>=9632&&E<=9727},"Miscellaneous Symbols":function(E){return E>=9728&&E<=9983},"Miscellaneous Symbols and Arrows":function(E){return E>=11008&&E<=11263},"CJK Radicals Supplement":function(E){return E>=11904&&E<=12031},"Kangxi Radicals":function(E){return E>=12032&&E<=12255},"Ideographic Description Characters":function(E){return E>=12272&&E<=12287},"CJK Symbols and Punctuation":function(E){return E>=12288&&E<=12351},Hiragana:function(E){return E>=12352&&E<=12447},Katakana:function(E){return E>=12448&&E<=12543},Bopomofo:function(E){return E>=12544&&E<=12591},"Hangul Compatibility Jamo":function(E){return E>=12592&&E<=12687},Kanbun:function(E){return E>=12688&&E<=12703},"Bopomofo Extended":function(E){return E>=12704&&E<=12735},"CJK Strokes":function(E){return E>=12736&&E<=12783},"Katakana Phonetic Extensions":function(E){return E>=12784&&E<=12799},"Enclosed CJK Letters and Months":function(E){return E>=12800&&E<=13055},"CJK Compatibility":function(E){return E>=13056&&E<=13311},"CJK Unified Ideographs Extension A":function(E){return E>=13312&&E<=19903},"Yijing Hexagram Symbols":function(E){return E>=19904&&E<=19967},"CJK Unified Ideographs":function(E){return E>=19968&&E<=40959},"Yi Syllables":function(E){return E>=40960&&E<=42127},"Yi Radicals":function(E){return E>=42128&&E<=42191},"Hangul Jamo Extended-A":function(E){return E>=43360&&E<=43391},"Hangul Syllables":function(E){return E>=44032&&E<=55215},"Hangul Jamo Extended-B":function(E){return E>=55216&&E<=55295},"Private Use Area":function(E){return E>=57344&&E<=63743},"CJK Compatibility Ideographs":function(E){return E>=63744&&E<=64255},"Arabic Presentation Forms-A":function(E){return E>=64336&&E<=65023},"Vertical Forms":function(E){return E>=65040&&E<=65055},"CJK Compatibility Forms":function(E){return E>=65072&&E<=65103},"Small Form Variants":function(E){return E>=65104&&E<=65135},"Arabic Presentation Forms-B":function(E){return E>=65136&&E<=65279},"Halfwidth and Fullwidth Forms":function(E){return E>=65280&&E<=65519}};function Er(E){for(var C=0,H=E;C<H.length;C+=1){var re=H[C];if(Zr(re.charCodeAt(0)))return!0}return!1}function an(E){for(var C=0,H=E;C<H.length;C+=1){var re=H[C];if(!bn(re.charCodeAt(0)))return!1}return!0}function bn(E){return!(qt.Arabic(E)||qt["Arabic Supplement"](E)||qt["Arabic Extended-A"](E)||qt["Arabic Presentation Forms-A"](E)||qt["Arabic Presentation Forms-B"](E))}function Rr(E){return E<11904?!1:!!(qt["Bopomofo Extended"](E)||qt.Bopomofo(E)||qt["CJK Compatibility Forms"](E)||qt["CJK Compatibility Ideographs"](E)||qt["CJK Compatibility"](E)||qt["CJK Radicals Supplement"](E)||qt["CJK Strokes"](E)||qt["CJK Symbols and Punctuation"](E)||qt["CJK Unified Ideographs Extension A"](E)||qt["CJK Unified Ideographs"](E)||qt["Enclosed CJK Letters and Months"](E)||qt["Halfwidth and Fullwidth Forms"](E)||qt.Hiragana(E)||qt["Ideographic Description Characters"](E)||qt["Kangxi Radicals"](E)||qt["Katakana Phonetic Extensions"](E)||qt.Katakana(E)||qt["Vertical Forms"](E)||qt["Yi Radicals"](E)||qt["Yi Syllables"](E))}function Zr(E){return E===746||E===747?!0:E<4352?!1:!!(qt["Bopomofo Extended"](E)||qt.Bopomofo(E)||qt["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||qt["CJK Compatibility Ideographs"](E)||qt["CJK Compatibility"](E)||qt["CJK Radicals Supplement"](E)||qt["CJK Strokes"](E)||qt["CJK Symbols and Punctuation"](E)&&!(E>=12296&&E<=12305)&&!(E>=12308&&E<=12319)&&E!==12336||qt["CJK Unified Ideographs Extension A"](E)||qt["CJK Unified Ideographs"](E)||qt["Enclosed CJK Letters and Months"](E)||qt["Hangul Compatibility Jamo"](E)||qt["Hangul Jamo Extended-A"](E)||qt["Hangul Jamo Extended-B"](E)||qt["Hangul Jamo"](E)||qt["Hangul Syllables"](E)||qt.Hiragana(E)||qt["Ideographic Description Characters"](E)||qt.Kanbun(E)||qt["Kangxi Radicals"](E)||qt["Katakana Phonetic Extensions"](E)||qt.Katakana(E)&&E!==12540||qt["Halfwidth and Fullwidth Forms"](E)&&E!==65288&&E!==65289&&E!==65293&&!(E>=65306&&E<=65310)&&E!==65339&&E!==65341&&E!==65343&&!(E>=65371&&E<=65503)&&E!==65507&&!(E>=65512&&E<=65519)||qt["Small Form Variants"](E)&&!(E>=65112&&E<=65118)&&!(E>=65123&&E<=65126)||qt["Unified Canadian Aboriginal Syllabics"](E)||qt["Unified Canadian Aboriginal Syllabics Extended"](E)||qt["Vertical Forms"](E)||qt["Yijing Hexagram Symbols"](E)||qt["Yi Syllables"](E)||qt["Yi Radicals"](E))}function $r(E){return!!(qt["Latin-1 Supplement"](E)&&(E===167||E===169||E===174||E===177||E===188||E===189||E===190||E===215||E===247)||qt["General Punctuation"](E)&&(E===8214||E===8224||E===8225||E===8240||E===8241||E===8251||E===8252||E===8258||E===8263||E===8264||E===8265||E===8273)||qt["Letterlike Symbols"](E)||qt["Number Forms"](E)||qt["Miscellaneous Technical"](E)&&(E>=8960&&E<=8967||E>=8972&&E<=8991||E>=8996&&E<=9e3||E===9003||E>=9085&&E<=9114||E>=9150&&E<=9165||E===9167||E>=9169&&E<=9179||E>=9186&&E<=9215)||qt["Control Pictures"](E)&&E!==9251||qt["Optical Character Recognition"](E)||qt["Enclosed Alphanumerics"](E)||qt["Geometric Shapes"](E)||qt["Miscellaneous Symbols"](E)&&!(E>=9754&&E<=9759)||qt["Miscellaneous Symbols and Arrows"](E)&&(E>=11026&&E<=11055||E>=11088&&E<=11097||E>=11192&&E<=11243)||qt["CJK Symbols and Punctuation"](E)||qt.Katakana(E)||qt["Private Use Area"](E)||qt["CJK Compatibility Forms"](E)||qt["Small Form Variants"](E)||qt["Halfwidth and Fullwidth Forms"](E)||E===8734||E===8756||E===8757||E>=9984&&E<=10087||E>=10102&&E<=10131||E===65532||E===65533)}function gn(E){return!(Zr(E)||$r(E))}function yn(E){return qt.Arabic(E)||qt["Arabic Supplement"](E)||qt["Arabic Extended-A"](E)||qt["Arabic Presentation Forms-A"](E)||qt["Arabic Presentation Forms-B"](E)}function tn(E){return E>=1424&&E<=2303||qt["Arabic Presentation Forms-A"](E)||qt["Arabic Presentation Forms-B"](E)}function na(E,C){return!(!C&&tn(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||qt.Khmer(E))}function ya(E){for(var C=0,H=E;C<H.length;C+=1){var re=H[C];if(tn(re.charCodeAt(0)))return!0}return!1}function Ha(E,C){for(var H=0,re=E;H<re.length;H+=1){var de=re[H];if(!na(de.charCodeAt(0),C))return!1}return!0}var _a={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Xa=null,Sa=_a.unavailable,ma=null,Ja=function(E){E&&typeof E=="string"&&E.indexOf("NetworkError")>-1&&(Sa=_a.error),Xa&&Xa(E)};function gi(){Ii.fire(new fn("pluginStateChange",{pluginStatus:Sa,pluginURL:ma}))}var Ii=new _r,Xo=function(){return Sa},go=function(E){return E({pluginStatus:Sa,pluginURL:ma}),Ii.on("pluginStateChange",E),E},Ra=function(E,C,H){if(H===void 0&&(H=!1),Sa===_a.deferred||Sa===_a.loading||Sa===_a.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");ma=$.resolveURL(E),Sa=_a.deferred,Xa=C,gi(),H||fi()},fi=function(){if(Sa!==_a.deferred||!ma)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Sa=_a.loading,gi(),ma&&Fe({url:ma},function(E){E?Ja(E):(Sa=_a.loaded,gi())})},pi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Sa===_a.loaded||pi.applyArabicShaping!=null},isLoading:function(){return Sa===_a.loading},setState:function(C){Sa=C.pluginStatus,ma=C.pluginURL},isParsed:function(){return pi.applyArabicShaping!=null&&pi.processBidirectionalText!=null&&pi.processStyledBidirectionalText!=null},getPluginURL:function(){return ma}},Gi=function(){!pi.isLoading()&&!pi.isLoaded()&&Xo()==="deferred"&&fi()},Si=function(C,H){this.zoom=C,H?(this.now=H.now,this.fadeDuration=H.fadeDuration,this.zoomHistory=H.zoomHistory,this.transition=H.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Jt,this.transition={})};Si.prototype.isSupportedScript=function(C){return Ha(C,pi.isLoaded())},Si.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Si.prototype.getCrossfadeParameters=function(){var C=this.zoom,H=C-Math.floor(C),re=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:H+(1-H)*re}:{fromScale:.5,toScale:1,t:1-(1-re)*H}};var Go=function(C,H){this.property=C,this.value=H,this.expression=jl(H===void 0?C.specification.default:H,C.specification)};Go.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Go.prototype.possiblyEvaluate=function(C,H,re){return this.property.possiblyEvaluate(this,C,H,re)};var Do=function(C){this.property=C,this.value=new Go(C,void 0)};Do.prototype.transitioned=function(C,H){return new ts(this.property,this.value,H,M({},C.transition,this.transition),C.now)},Do.prototype.untransitioned=function(){return new ts(this.property,this.value,null,{},0)};var ao=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};ao.prototype.getValue=function(C){return F(this._values[C].value.value)},ao.prototype.setValue=function(C,H){this._values.hasOwnProperty(C)||(this._values[C]=new Do(this._values[C].property)),this._values[C].value=new Go(this._values[C].property,H===null?void 0:F(H))},ao.prototype.getTransition=function(C){return F(this._values[C].transition)},ao.prototype.setTransition=function(C,H){this._values.hasOwnProperty(C)||(this._values[C]=new Do(this._values[C].property)),this._values[C].transition=F(H)||void 0},ao.prototype.serialize=function(){for(var C={},H=0,re=Object.keys(this._values);H<re.length;H+=1){var de=re[H],we=this.getValue(de);we!==void 0&&(C[de]=we);var ke=this.getTransition(de);ke!==void 0&&(C[de+"-transition"]=ke)}return C},ao.prototype.transitioned=function(C,H){for(var re=new ms(this._properties),de=0,we=Object.keys(this._values);de<we.length;de+=1){var ke=we[de];re._values[ke]=this._values[ke].transitioned(C,H._values[ke])}return re},ao.prototype.untransitioned=function(){for(var C=new ms(this._properties),H=0,re=Object.keys(this._values);H<re.length;H+=1){var de=re[H];C._values[de]=this._values[de].untransitioned()}return C};var ts=function(C,H,re,de,we){this.property=C,this.value=H,this.begin=we+de.delay||0,this.end=this.begin+de.duration||0,C.specification.transition&&(de.delay||de.duration)&&(this.prior=re)};ts.prototype.possiblyEvaluate=function(C,H,re){var de=C.now||0,we=this.value.possiblyEvaluate(C,H,re),ke=this.prior;if(ke){if(de>this.end)return this.prior=null,we;if(this.value.isDataDriven())return this.prior=null,we;if(de<this.begin)return ke.possiblyEvaluate(C,H,re);var Ne=(de-this.begin)/(this.end-this.begin);return this.property.interpolate(ke.possiblyEvaluate(C,H,re),we,c(Ne))}else return we};var ms=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};ms.prototype.possiblyEvaluate=function(C,H,re){for(var de=new bo(this._properties),we=0,ke=Object.keys(this._values);we<ke.length;we+=1){var Ne=ke[we];de._values[Ne]=this._values[Ne].possiblyEvaluate(C,H,re)}return de},ms.prototype.hasTransition=function(){for(var C=0,H=Object.keys(this._values);C<H.length;C+=1){var re=H[C];if(this._values[re].prior)return!0}return!1};var Is=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};Is.prototype.getValue=function(C){return F(this._values[C].value)},Is.prototype.setValue=function(C,H){this._values[C]=new Go(this._values[C].property,H===null?void 0:F(H))},Is.prototype.serialize=function(){for(var C={},H=0,re=Object.keys(this._values);H<re.length;H+=1){var de=re[H],we=this.getValue(de);we!==void 0&&(C[de]=we)}return C},Is.prototype.possiblyEvaluate=function(C,H,re){for(var de=new bo(this._properties),we=0,ke=Object.keys(this._values);we<ke.length;we+=1){var Ne=ke[we];de._values[Ne]=this._values[Ne].possiblyEvaluate(C,H,re)}return de};var xo=function(C,H,re){this.property=C,this.value=H,this.parameters=re};xo.prototype.isConstant=function(){return this.value.kind==="constant"},xo.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},xo.prototype.evaluate=function(C,H,re,de){return this.property.evaluate(this.value,this.parameters,C,H,re,de)};var bo=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};bo.prototype.get=function(C){return this._values[C]};var ei=function(C){this.specification=C};ei.prototype.possiblyEvaluate=function(C,H){return C.expression.evaluate(H)},ei.prototype.interpolate=function(C,H,re){var de=fu[this.specification.type];return de?de(C,H,re):C};var vi=function(C,H){this.specification=C,this.overrides=H};vi.prototype.possiblyEvaluate=function(C,H,re,de){return C.expression.kind==="constant"||C.expression.kind==="camera"?new xo(this,{kind:"constant",value:C.expression.evaluate(H,null,{},re,de)},H):new xo(this,C.expression,H)},vi.prototype.interpolate=function(C,H,re){if(C.value.kind!=="constant"||H.value.kind!=="constant")return C;if(C.value.value===void 0||H.value.value===void 0)return new xo(this,{kind:"constant",value:void 0},C.parameters);var de=fu[this.specification.type];return de?new xo(this,{kind:"constant",value:de(C.value.value,H.value.value,re)},C.parameters):C},vi.prototype.evaluate=function(C,H,re,de,we,ke){return C.kind==="constant"?C.value:C.evaluate(H,re,de,we,ke)};var rs=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(re,de,we,ke){if(re.value===void 0)return new xo(this,{kind:"constant",value:void 0},de);if(re.expression.kind==="constant"){var Ne=re.expression.evaluate(de,null,{},we,ke),at=re.property.specification.type==="resolvedImage",pt=at&&typeof Ne!="string"?Ne.name:Ne,bt=this._calculate(pt,pt,pt,de);return new xo(this,{kind:"constant",value:bt},de)}else if(re.expression.kind==="camera"){var Nt=this._calculate(re.expression.evaluate({zoom:de.zoom-1}),re.expression.evaluate({zoom:de.zoom}),re.expression.evaluate({zoom:de.zoom+1}),de);return new xo(this,{kind:"constant",value:Nt},de)}else return new xo(this,re.expression,de)},C.prototype.evaluate=function(re,de,we,ke,Ne,at){if(re.kind==="source"){var pt=re.evaluate(de,we,ke,Ne,at);return this._calculate(pt,pt,pt,de)}else return re.kind==="composite"?this._calculate(re.evaluate({zoom:Math.floor(de.zoom)-1},we,ke),re.evaluate({zoom:Math.floor(de.zoom)},we,ke),re.evaluate({zoom:Math.floor(de.zoom)+1},we,ke),de):re.value},C.prototype._calculate=function(re,de,we,ke){var Ne=ke.zoom;return Ne>ke.zoomHistory.lastIntegerZoom?{from:re,to:de}:{from:we,to:de}},C.prototype.interpolate=function(re){return re},C}(vi),Io=function(C){this.specification=C};Io.prototype.possiblyEvaluate=function(C,H,re,de){if(C.value!==void 0)if(C.expression.kind==="constant"){var we=C.expression.evaluate(H,null,{},re,de);return this._calculate(we,we,we,H)}else return this._calculate(C.expression.evaluate(new Si(Math.floor(H.zoom-1),H)),C.expression.evaluate(new Si(Math.floor(H.zoom),H)),C.expression.evaluate(new Si(Math.floor(H.zoom+1),H)),H)},Io.prototype._calculate=function(C,H,re,de){var we=de.zoom;return we>de.zoomHistory.lastIntegerZoom?{from:C,to:H}:{from:re,to:H}},Io.prototype.interpolate=function(C){return C};var Wo=function(C){this.specification=C};Wo.prototype.possiblyEvaluate=function(C,H,re,de){return!!C.expression.evaluate(H,null,{},re,de)},Wo.prototype.interpolate=function(){return!1};var zo=function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var H in C){var re=C[H];re.specification.overridable&&this.overridableProperties.push(H);var de=this.defaultPropertyValues[H]=new Go(re,void 0),we=this.defaultTransitionablePropertyValues[H]=new Do(re);this.defaultTransitioningPropertyValues[H]=we.untransitioned(),this.defaultPossiblyEvaluatedValues[H]=de.possiblyEvaluate({})}};Ue("DataDrivenProperty",vi),Ue("DataConstantProperty",ei),Ue("CrossFadedDataDrivenProperty",rs),Ue("CrossFadedProperty",Io),Ue("ColorRampProperty",Wo);var ns="-transition",il=function(E){function C(H,re){if(E.call(this),this.id=H.id,this.type=H.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},H.type!=="custom"&&(H=H,this.metadata=H.metadata,this.minzoom=H.minzoom,this.maxzoom=H.maxzoom,H.type!=="background"&&(this.source=H.source,this.sourceLayer=H["source-layer"],this.filter=H.filter),re.layout&&(this._unevaluatedLayout=new Is(re.layout)),re.paint)){this._transitionablePaint=new ao(re.paint);for(var de in H.paint)this.setPaintProperty(de,H.paint[de],{validate:!1});for(var we in H.layout)this.setLayoutProperty(we,H.layout[we],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new bo(re.paint)}}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},C.prototype.getLayoutProperty=function(re){return re==="visibility"?this.visibility:this._unevaluatedLayout.getValue(re)},C.prototype.setLayoutProperty=function(re,de,we){if(we===void 0&&(we={}),de!=null){var ke="layers."+this.id+".layout."+re;if(this._validate(Ts,ke,re,de,we))return}if(re==="visibility"){this.visibility=de;return}this._unevaluatedLayout.setValue(re,de)},C.prototype.getPaintProperty=function(re){return k(re,ns)?this._transitionablePaint.getTransition(re.slice(0,-ns.length)):this._transitionablePaint.getValue(re)},C.prototype.setPaintProperty=function(re,de,we){if(we===void 0&&(we={}),de!=null){var ke="layers."+this.id+".paint."+re;if(this._validate(eo,ke,re,de,we))return!1}if(k(re,ns))return this._transitionablePaint.setTransition(re.slice(0,-ns.length),de||void 0),!1;var Ne=this._transitionablePaint._values[re],at=Ne.property.specification["property-type"]==="cross-faded-data-driven",pt=Ne.value.isDataDriven(),bt=Ne.value;this._transitionablePaint.setValue(re,de),this._handleSpecialPaintPropertyUpdate(re);var Nt=this._transitionablePaint._values[re].value,er=Nt.isDataDriven();return er||pt||at||this._handleOverridablePaintPropertyUpdate(re,bt,Nt)},C.prototype._handleSpecialPaintPropertyUpdate=function(re){},C.prototype._handleOverridablePaintPropertyUpdate=function(re,de,we){return!1},C.prototype.isHidden=function(re){return this.minzoom&&re<this.minzoom||this.maxzoom&&re>=this.maxzoom?!0:this.visibility==="none"},C.prototype.updateTransitions=function(re){this._transitioningPaint=this._transitionablePaint.transitioned(re,this._transitioningPaint)},C.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},C.prototype.recalculate=function(re,de){re.getCrossfadeParameters&&(this._crossfadeParameters=re.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(re,void 0,de)),this.paint=this._transitioningPaint.possiblyEvaluate(re,void 0,de)},C.prototype.serialize=function(){var re={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(re.layout=re.layout||{},re.layout.visibility=this.visibility),O(re,function(de,we){return de!==void 0&&!(we==="layout"&&!Object.keys(de).length)&&!(we==="paint"&&!Object.keys(de).length)})},C.prototype._validate=function(re,de,we,ke,Ne){return Ne===void 0&&(Ne={}),Ne&&Ne.validate===!1?!1:es(this,re.call(ps,{key:de,layerType:this.type,objectKey:we,value:ke,styleSpec:mr,style:{glyphs:!0,sprite:!0}}))},C.prototype.is3D=function(){return!1},C.prototype.isTileClipped=function(){return!1},C.prototype.hasOffscreenPass=function(){return!1},C.prototype.resize=function(){},C.prototype.isStateDependent=function(){for(var re in this.paint._values){var de=this.paint.get(re);if(!(!(de instanceof xo)||!ki(de.property.specification))&&(de.value.kind==="source"||de.value.kind==="composite")&&de.value.isStateDependent)return!0}return!1},C}(_r),Hu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},So=function(C,H){this._structArray=C,this._pos1=H*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Hc=128,Vu=5,_o=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};_o.serialize=function(C,H){return C._trim(),H&&(C.isTransferred=!0,H.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},_o.deserialize=function(C){var H=Object.create(this.prototype);return H.arrayBuffer=C.arrayBuffer,H.length=C.length,H.capacity=C.arrayBuffer.byteLength/H.bytesPerElement,H._refreshViews(),H},_o.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},_o.prototype.clear=function(){this.length=0},_o.prototype.resize=function(C){this.reserve(C),this.length=C},_o.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*Vu),Hc),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var H=this.uint8;this._refreshViews(),H&&this.uint8.set(H)}},_o.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function xs(E,C){C===void 0&&(C=1);var H=0,re=0,de=E.map(function(ke){var Ne=ep(ke.type),at=H=Eh(H,Math.max(C,Ne)),pt=ke.components||1;return re=Math.max(re,Ne),H+=Ne*pt,{name:ke.name,type:ke.type,components:pt,offset:at}}),we=Eh(H,Math.max(re,C));return{members:de,size:we,alignment:C}}function ep(E){return Hu[E].BYTES_PER_ELEMENT}function Eh(E,C){return Math.ceil(E/C)*C}var Vc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de){var we=this.length;return this.resize(we+1),this.emplace(we,re,de)},C.prototype.emplace=function(re,de,we){var ke=re*2;return this.int16[ke+0]=de,this.int16[ke+1]=we,re},C}(_o);Vc.prototype.bytesPerElement=4,Ue("StructArrayLayout2i4",Vc);var Yf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,re,de,we,ke)},C.prototype.emplace=function(re,de,we,ke,Ne){var at=re*4;return this.int16[at+0]=de,this.int16[at+1]=we,this.int16[at+2]=ke,this.int16[at+3]=Ne,re},C}(_o);Yf.prototype.bytesPerElement=8,Ue("StructArrayLayout4i8",Yf);var Ks=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke,Ne,at){var pt=this.length;return this.resize(pt+1),this.emplace(pt,re,de,we,ke,Ne,at)},C.prototype.emplace=function(re,de,we,ke,Ne,at,pt){var bt=re*6;return this.int16[bt+0]=de,this.int16[bt+1]=we,this.int16[bt+2]=ke,this.int16[bt+3]=Ne,this.int16[bt+4]=at,this.int16[bt+5]=pt,re},C}(_o);Ks.prototype.bytesPerElement=12,Ue("StructArrayLayout2i4i12",Ks);var Su=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke,Ne,at){var pt=this.length;return this.resize(pt+1),this.emplace(pt,re,de,we,ke,Ne,at)},C.prototype.emplace=function(re,de,we,ke,Ne,at,pt){var bt=re*4,Nt=re*8;return this.int16[bt+0]=de,this.int16[bt+1]=we,this.uint8[Nt+4]=ke,this.uint8[Nt+5]=Ne,this.uint8[Nt+6]=at,this.uint8[Nt+7]=pt,re},C}(_o);Su.prototype.bytesPerElement=8,Ue("StructArrayLayout2i4ub8",Su);var Kl=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke,Ne,at,pt,bt,Nt,er){var Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,re,de,we,ke,Ne,at,pt,bt,Nt,er)},C.prototype.emplace=function(re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt){var dr=re*9,Wr=re*18;return this.uint16[dr+0]=de,this.uint16[dr+1]=we,this.uint16[dr+2]=ke,this.uint16[dr+3]=Ne,this.uint16[dr+4]=at,this.uint16[dr+5]=pt,this.uint16[dr+6]=bt,this.uint16[dr+7]=Nt,this.uint8[Wr+16]=er,this.uint8[Wr+17]=Zt,re},C}(_o);Kl.prototype.bytesPerElement=18,Ue("StructArrayLayout8ui2ub18",Kl);var gc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr){var Wr=this.length;return this.resize(Wr+1),this.emplace(Wr,re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr)},C.prototype.emplace=function(re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr){var mn=re*12;return this.int16[mn+0]=de,this.int16[mn+1]=we,this.int16[mn+2]=ke,this.int16[mn+3]=Ne,this.uint16[mn+4]=at,this.uint16[mn+5]=pt,this.uint16[mn+6]=bt,this.uint16[mn+7]=Nt,this.int16[mn+8]=er,this.int16[mn+9]=Zt,this.int16[mn+10]=dr,this.int16[mn+11]=Wr,re},C}(_o);gc.prototype.bytesPerElement=24,Ue("StructArrayLayout4i4ui4i24",gc);var Gc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we){var ke=this.length;return this.resize(ke+1),this.emplace(ke,re,de,we)},C.prototype.emplace=function(re,de,we,ke){var Ne=re*3;return this.float32[Ne+0]=de,this.float32[Ne+1]=we,this.float32[Ne+2]=ke,re},C}(_o);Gc.prototype.bytesPerElement=12,Ue("StructArrayLayout3f12",Gc);var yc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re){var de=this.length;return this.resize(de+1),this.emplace(de,re)},C.prototype.emplace=function(re,de){var we=re*1;return this.uint32[we+0]=de,re},C}(_o);yc.prototype.bytesPerElement=4,Ue("StructArrayLayout1ul4",yc);var Wc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke,Ne,at,pt,bt,Nt){var er=this.length;return this.resize(er+1),this.emplace(er,re,de,we,ke,Ne,at,pt,bt,Nt)},C.prototype.emplace=function(re,de,we,ke,Ne,at,pt,bt,Nt,er){var Zt=re*10,dr=re*5;return this.int16[Zt+0]=de,this.int16[Zt+1]=we,this.int16[Zt+2]=ke,this.int16[Zt+3]=Ne,this.int16[Zt+4]=at,this.int16[Zt+5]=pt,this.uint32[dr+3]=bt,this.uint16[Zt+8]=Nt,this.uint16[Zt+9]=er,re},C}(_o);Wc.prototype.bytesPerElement=20,Ue("StructArrayLayout6i1ul2ui20",Wc);var oh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke,Ne,at){var pt=this.length;return this.resize(pt+1),this.emplace(pt,re,de,we,ke,Ne,at)},C.prototype.emplace=function(re,de,we,ke,Ne,at,pt){var bt=re*6;return this.int16[bt+0]=de,this.int16[bt+1]=we,this.int16[bt+2]=ke,this.int16[bt+3]=Ne,this.int16[bt+4]=at,this.int16[bt+5]=pt,re},C}(_o);oh.prototype.bytesPerElement=12,Ue("StructArrayLayout2i2i2i12",oh);var Xf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke,Ne){var at=this.length;return this.resize(at+1),this.emplace(at,re,de,we,ke,Ne)},C.prototype.emplace=function(re,de,we,ke,Ne,at){var pt=re*4,bt=re*8;return this.float32[pt+0]=de,this.float32[pt+1]=we,this.float32[pt+2]=ke,this.int16[bt+6]=Ne,this.int16[bt+7]=at,re},C}(_o);Xf.prototype.bytesPerElement=16,Ue("StructArrayLayout2f1f2i16",Xf);var Jl=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,re,de,we,ke)},C.prototype.emplace=function(re,de,we,ke,Ne){var at=re*12,pt=re*3;return this.uint8[at+0]=de,this.uint8[at+1]=we,this.float32[pt+1]=ke,this.float32[pt+2]=Ne,re},C}(_o);Jl.prototype.bytesPerElement=12,Ue("StructArrayLayout2ub2f12",Jl);var hu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we){var ke=this.length;return this.resize(ke+1),this.emplace(ke,re,de,we)},C.prototype.emplace=function(re,de,we,ke){var Ne=re*3;return this.uint16[Ne+0]=de,this.uint16[Ne+1]=we,this.uint16[Ne+2]=ke,re},C}(_o);hu.prototype.bytesPerElement=6,Ue("StructArrayLayout3ui6",hu);var Zf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr,mn,un,Nn,Pn){var Fn=this.length;return this.resize(Fn+1),this.emplace(Fn,re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr,mn,un,Nn,Pn)},C.prototype.emplace=function(re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr,mn,un,Nn,Pn,Fn){var Xn=re*24,sa=re*12,ka=re*48;return this.int16[Xn+0]=de,this.int16[Xn+1]=we,this.uint16[Xn+2]=ke,this.uint16[Xn+3]=Ne,this.uint32[sa+2]=at,this.uint32[sa+3]=pt,this.uint32[sa+4]=bt,this.uint16[Xn+10]=Nt,this.uint16[Xn+11]=er,this.uint16[Xn+12]=Zt,this.float32[sa+7]=dr,this.float32[sa+8]=Wr,this.uint8[ka+36]=mn,this.uint8[ka+37]=un,this.uint8[ka+38]=Nn,this.uint32[sa+10]=Pn,this.int16[Xn+22]=Fn,re},C}(_o);Zf.prototype.bytesPerElement=48,Ue("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Zf);var Ch=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr,mn,un,Nn,Pn,Fn,Xn,sa,ka,Aa,ai,Wa,Za,Ai,Qa,ni){var Pi=this.length;return this.resize(Pi+1),this.emplace(Pi,re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr,mn,un,Nn,Pn,Fn,Xn,sa,ka,Aa,ai,Wa,Za,Ai,Qa,ni)},C.prototype.emplace=function(re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr,mn,un,Nn,Pn,Fn,Xn,sa,ka,Aa,ai,Wa,Za,Ai,Qa,ni,Pi){var bi=re*34,fo=re*17;return this.int16[bi+0]=de,this.int16[bi+1]=we,this.int16[bi+2]=ke,this.int16[bi+3]=Ne,this.int16[bi+4]=at,this.int16[bi+5]=pt,this.int16[bi+6]=bt,this.int16[bi+7]=Nt,this.uint16[bi+8]=er,this.uint16[bi+9]=Zt,this.uint16[bi+10]=dr,this.uint16[bi+11]=Wr,this.uint16[bi+12]=mn,this.uint16[bi+13]=un,this.uint16[bi+14]=Nn,this.uint16[bi+15]=Pn,this.uint16[bi+16]=Fn,this.uint16[bi+17]=Xn,this.uint16[bi+18]=sa,this.uint16[bi+19]=ka,this.uint16[bi+20]=Aa,this.uint16[bi+21]=ai,this.uint16[bi+22]=Wa,this.uint32[fo+12]=Za,this.float32[fo+13]=Ai,this.float32[fo+14]=Qa,this.float32[fo+15]=ni,this.float32[fo+16]=Pi,re},C}(_o);Ch.prototype.bytesPerElement=68,Ue("StructArrayLayout8i15ui1ul4f68",Ch);var Lc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re){var de=this.length;return this.resize(de+1),this.emplace(de,re)},C.prototype.emplace=function(re,de){var we=re*1;return this.float32[we+0]=de,re},C}(_o);Lc.prototype.bytesPerElement=4,Ue("StructArrayLayout1f4",Lc);var Lh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we){var ke=this.length;return this.resize(ke+1),this.emplace(ke,re,de,we)},C.prototype.emplace=function(re,de,we,ke){var Ne=re*3;return this.int16[Ne+0]=de,this.int16[Ne+1]=we,this.int16[Ne+2]=ke,re},C}(_o);Lh.prototype.bytesPerElement=6,Ue("StructArrayLayout3i6",Lh);var sf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we){var ke=this.length;return this.resize(ke+1),this.emplace(ke,re,de,we)},C.prototype.emplace=function(re,de,we,ke){var Ne=re*2,at=re*4;return this.uint32[Ne+0]=de,this.uint16[at+2]=we,this.uint16[at+3]=ke,re},C}(_o);sf.prototype.bytesPerElement=8,Ue("StructArrayLayout1ul2ui8",sf);var Yc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de){var we=this.length;return this.resize(we+1),this.emplace(we,re,de)},C.prototype.emplace=function(re,de,we){var ke=re*2;return this.uint16[ke+0]=de,this.uint16[ke+1]=we,re},C}(_o);Yc.prototype.bytesPerElement=4,Ue("StructArrayLayout2ui4",Yc);var jf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re){var de=this.length;return this.resize(de+1),this.emplace(de,re)},C.prototype.emplace=function(re,de){var we=re*1;return this.uint16[we+0]=de,re},C}(_o);jf.prototype.bytesPerElement=2,Ue("StructArrayLayout1ui2",jf);var Af=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de){var we=this.length;return this.resize(we+1),this.emplace(we,re,de)},C.prototype.emplace=function(re,de,we){var ke=re*2;return this.float32[ke+0]=de,this.float32[ke+1]=we,re},C}(_o);Af.prototype.bytesPerElement=8,Ue("StructArrayLayout2f8",Af);var Xc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,de,we,ke){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,re,de,we,ke)},C.prototype.emplace=function(re,de,we,ke,Ne){var at=re*4;return this.float32[at+0]=de,this.float32[at+1]=we,this.float32[at+2]=ke,this.float32[at+3]=Ne,re},C}(_o);Xc.prototype.bytesPerElement=16,Ue("StructArrayLayout4f16",Xc);var tp=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var H={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return H.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},H.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},H.x1.get=function(){return this._structArray.int16[this._pos2+2]},H.y1.get=function(){return this._structArray.int16[this._pos2+3]},H.x2.get=function(){return this._structArray.int16[this._pos2+4]},H.y2.get=function(){return this._structArray.int16[this._pos2+5]},H.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},H.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},H.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},H.anchorPoint.get=function(){return new f(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,H),C}(So);tp.prototype.size=20;var Kf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(re){return new tp(this,re)},C}(Wc);Ue("CollisionBoxArray",Kf);var Zc=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var H={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return H.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},H.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},H.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},H.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},H.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},H.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},H.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},H.segment.get=function(){return this._structArray.uint16[this._pos2+10]},H.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},H.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},H.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},H.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},H.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},H.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},H.placedOrientation.set=function(re){this._structArray.uint8[this._pos1+37]=re},H.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},H.hidden.set=function(re){this._structArray.uint8[this._pos1+38]=re},H.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},H.crossTileID.set=function(re){this._structArray.uint32[this._pos4+10]=re},H.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,H),C}(So);Zc.prototype.size=48;var Pc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(re){return new Zc(this,re)},C}(Zf);Ue("PlacedSymbolArray",Pc);var Ph=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var H={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return H.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},H.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},H.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},H.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},H.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},H.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},H.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},H.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},H.key.get=function(){return this._structArray.uint16[this._pos2+8]},H.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},H.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},H.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},H.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},H.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},H.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},H.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},H.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},H.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},H.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},H.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},H.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},H.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},H.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},H.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},H.crossTileID.set=function(re){this._structArray.uint32[this._pos4+12]=re},H.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},H.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},H.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},H.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,H),C}(So);Ph.prototype.size=68;var rp=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(re){return new Ph(this,re)},C}(Ch);Ue("SymbolInstanceArray",rp);var Gu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=function(re){return this.float32[re*1+0]},C}(Lc);Ue("GlyphOffsetArray",Gu);var Mf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getx=function(re){return this.int16[re*3+0]},C.prototype.gety=function(re){return this.int16[re*3+1]},C.prototype.gettileUnitDistanceFromAnchor=function(re){return this.int16[re*3+2]},C}(Lh);Ue("SymbolLineVertexArray",Mf);var _v=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var H={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return H.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},H.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},H.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,H),C}(So);_v.prototype.size=8;var Rh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(re){return new _v(this,re)},C}(sf);Ue("FeatureIndexArray",Rh);var np=xs([{name:"a_pos",components:2,type:"Int16"}],4),pe=np.members,Z=function(C){C===void 0&&(C=[]),this.segments=C};Z.prototype.prepareSegment=function(C,H,re,de){var we=this.segments[this.segments.length-1];return C>Z.MAX_VERTEX_ARRAY_LENGTH&&U("Max vertices per segment is "+Z.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!we||we.vertexLength+C>Z.MAX_VERTEX_ARRAY_LENGTH||we.sortKey!==de)&&(we={vertexOffset:H.length,primitiveOffset:re.length,vertexLength:0,primitiveLength:0},de!==void 0&&(we.sortKey=de),this.segments.push(we)),we},Z.prototype.get=function(){return this.segments},Z.prototype.destroy=function(){for(var C=0,H=this.segments;C<H.length;C+=1){var re=H[C];for(var de in re.vaos)re.vaos[de].destroy()}},Z.simpleSegment=function(C,H,re,de){return new Z([{vertexOffset:C,primitiveOffset:H,vertexLength:re,primitiveLength:de,vaos:{},sortKey:0}])},Z.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ue("SegmentVector",Z);function ge(E,C){return E=p(Math.floor(E),0,255),C=p(Math.floor(C),0,255),256*E+C}var Q=xs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ye=i(function(E){function C(H,re){var de,we,ke,Ne,at,pt,bt,Nt;for(de=H.length&3,we=H.length-de,ke=re,at=3432918353,pt=461845907,Nt=0;Nt<we;)bt=H.charCodeAt(Nt)&255|(H.charCodeAt(++Nt)&255)<<8|(H.charCodeAt(++Nt)&255)<<16|(H.charCodeAt(++Nt)&255)<<24,++Nt,bt=(bt&65535)*at+(((bt>>>16)*at&65535)<<16)&4294967295,bt=bt<<15|bt>>>17,bt=(bt&65535)*pt+(((bt>>>16)*pt&65535)<<16)&4294967295,ke^=bt,ke=ke<<13|ke>>>19,Ne=(ke&65535)*5+(((ke>>>16)*5&65535)<<16)&4294967295,ke=(Ne&65535)+27492+(((Ne>>>16)+58964&65535)<<16);switch(bt=0,de){case 3:bt^=(H.charCodeAt(Nt+2)&255)<<16;case 2:bt^=(H.charCodeAt(Nt+1)&255)<<8;case 1:bt^=H.charCodeAt(Nt)&255,bt=(bt&65535)*at+(((bt>>>16)*at&65535)<<16)&4294967295,bt=bt<<15|bt>>>17,bt=(bt&65535)*pt+(((bt>>>16)*pt&65535)<<16)&4294967295,ke^=bt}return ke^=H.length,ke^=ke>>>16,ke=(ke&65535)*2246822507+(((ke>>>16)*2246822507&65535)<<16)&4294967295,ke^=ke>>>13,ke=(ke&65535)*3266489909+(((ke>>>16)*3266489909&65535)<<16)&4294967295,ke^=ke>>>16,ke>>>0}E.exports=C}),Le=i(function(E){function C(H,re){for(var de=H.length,we=re^de,ke=0,Ne;de>=4;)Ne=H.charCodeAt(ke)&255|(H.charCodeAt(++ke)&255)<<8|(H.charCodeAt(++ke)&255)<<16|(H.charCodeAt(++ke)&255)<<24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),Ne^=Ne>>>24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)^Ne,de-=4,++ke;switch(de){case 3:we^=(H.charCodeAt(ke+2)&255)<<16;case 2:we^=(H.charCodeAt(ke+1)&255)<<8;case 1:we^=H.charCodeAt(ke)&255,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)}return we^=we>>>13,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16),we^=we>>>15,we>>>0}E.exports=C}),De=ye,Qe=ye,vt=Le;De.murmur3=Qe,De.murmur2=vt;var Mt=function(){this.ids=[],this.positions=[],this.indexed=!1};Mt.prototype.add=function(C,H,re,de){this.ids.push(ar(C)),this.positions.push(H,re,de)},Mt.prototype.getPositions=function(C){for(var H=ar(C),re=0,de=this.ids.length-1;re<de;){var we=re+de>>1;this.ids[we]>=H?de=we:re=we+1}for(var ke=[];this.ids[re]===H;){var Ne=this.positions[3*re],at=this.positions[3*re+1],pt=this.positions[3*re+2];ke.push({index:Ne,start:at,end:pt}),re++}return ke},Mt.serialize=function(C,H){var re=new Float64Array(C.ids),de=new Uint32Array(C.positions);return cr(re,de,0,re.length-1),H&&H.push(re.buffer,de.buffer),{ids:re,positions:de}},Mt.deserialize=function(C){var H=new Mt;return H.ids=C.ids,H.positions=C.positions,H.indexed=!0,H};var Yt=Math.pow(2,53)-1;function ar(E){var C=+E;return!isNaN(C)&&C<=Yt?C:De(String(E))}function cr(E,C,H,re){for(;H<re;){for(var de=E[H+re>>1],we=H-1,ke=re+1;;){do we++;while(E[we]<de);do ke--;while(E[ke]>de);if(we>=ke)break;Dr(E,we,ke),Dr(C,3*we,3*ke),Dr(C,3*we+1,3*ke+1),Dr(C,3*we+2,3*ke+2)}ke-H<re-ke?(cr(E,C,H,ke),H=ke+1):(cr(E,C,ke+1,re),re=ke)}}function Dr(E,C,H){var re=E[C];E[C]=E[H],E[H]=re}Ue("FeaturePositionMap",Mt);var Xr=function(C,H){this.gl=C.gl,this.location=H},jr=function(E){function C(H,re){E.call(this,H,re),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){this.current!==re&&(this.current=re,this.gl.uniform1i(this.location,re))},C}(Xr),Vr=function(E){function C(H,re){E.call(this,H,re),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){this.current!==re&&(this.current=re,this.gl.uniform1f(this.location,re))},C}(Xr),on=function(E){function C(H,re){E.call(this,H,re),this.current=[0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){(re[0]!==this.current[0]||re[1]!==this.current[1])&&(this.current=re,this.gl.uniform2f(this.location,re[0],re[1]))},C}(Xr),_n=function(E){function C(H,re){E.call(this,H,re),this.current=[0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){(re[0]!==this.current[0]||re[1]!==this.current[1]||re[2]!==this.current[2])&&(this.current=re,this.gl.uniform3f(this.location,re[0],re[1],re[2]))},C}(Xr),Bn=function(E){function C(H,re){E.call(this,H,re),this.current=[0,0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){(re[0]!==this.current[0]||re[1]!==this.current[1]||re[2]!==this.current[2]||re[3]!==this.current[3])&&(this.current=re,this.gl.uniform4f(this.location,re[0],re[1],re[2],re[3]))},C}(Xr),Kn=function(E){function C(H,re){E.call(this,H,re),this.current=Oi.transparent}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){(re.r!==this.current.r||re.g!==this.current.g||re.b!==this.current.b||re.a!==this.current.a)&&(this.current=re,this.gl.uniform4f(this.location,re.r,re.g,re.b,re.a))},C}(Xr),ca=new Float32Array(16),pa=function(E){function C(H,re){E.call(this,H,re),this.current=ca}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){if(re[12]!==this.current[12]||re[0]!==this.current[0]){this.current=re,this.gl.uniformMatrix4fv(this.location,!1,re);return}for(var de=1;de<16;de++)if(re[de]!==this.current[de]){this.current=re,this.gl.uniformMatrix4fv(this.location,!1,re);break}},C}(Xr);function ha(E){return[ge(255*E.r,255*E.g),ge(255*E.b,255*E.a)]}var Da=function(C,H,re){this.value=C,this.uniformNames=H.map(function(de){return"u_"+de}),this.type=re};Da.prototype.setUniform=function(C,H,re){C.set(re.constantOr(this.value))},Da.prototype.getBinding=function(C,H,re){return this.type==="color"?new Kn(C,H):new Vr(C,H)};var Ia=function(C,H){this.uniformNames=H.map(function(re){return"u_"+re}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ia.prototype.setConstantPatternPositions=function(C,H){this.pixelRatioFrom=H.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=H.tlbr,this.patternTo=C.tlbr},Ia.prototype.setUniform=function(C,H,re,de){var we=de==="u_pattern_to"?this.patternTo:de==="u_pattern_from"?this.patternFrom:de==="u_pixel_ratio_to"?this.pixelRatioTo:de==="u_pixel_ratio_from"?this.pixelRatioFrom:null;we&&C.set(we)},Ia.prototype.getBinding=function(C,H,re){return re.substr(0,9)==="u_pattern"?new Bn(C,H):new Vr(C,H)};var Ta=function(C,H,re,de){this.expression=C,this.type=re,this.maxValue=0,this.paintVertexAttributes=H.map(function(we){return{name:"a_"+we,type:"Float32",components:re==="color"?2:1,offset:0}}),this.paintVertexArray=new de};Ta.prototype.populatePaintArray=function(C,H,re,de,we){var ke=this.paintVertexArray.length,Ne=this.expression.evaluate(new Si(0),H,{},de,[],we);this.paintVertexArray.resize(C),this._setPaintValue(ke,C,Ne)},Ta.prototype.updatePaintArray=function(C,H,re,de){var we=this.expression.evaluate({zoom:0},re,de);this._setPaintValue(C,H,we)},Ta.prototype._setPaintValue=function(C,H,re){if(this.type==="color")for(var de=ha(re),we=C;we<H;we++)this.paintVertexArray.emplace(we,de[0],de[1]);else{for(var ke=C;ke<H;ke++)this.paintVertexArray.emplace(ke,re);this.maxValue=Math.max(this.maxValue,Math.abs(re))}},Ta.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ta.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ga=function(C,H,re,de,we,ke){this.expression=C,this.uniformNames=H.map(function(Ne){return"u_"+Ne+"_t"}),this.type=re,this.useIntegerZoom=de,this.zoom=we,this.maxValue=0,this.paintVertexAttributes=H.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:re==="color"?4:2,offset:0}}),this.paintVertexArray=new ke};Ga.prototype.populatePaintArray=function(C,H,re,de,we){var ke=this.expression.evaluate(new Si(this.zoom),H,{},de,[],we),Ne=this.expression.evaluate(new Si(this.zoom+1),H,{},de,[],we),at=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(at,C,ke,Ne)},Ga.prototype.updatePaintArray=function(C,H,re,de){var we=this.expression.evaluate({zoom:this.zoom},re,de),ke=this.expression.evaluate({zoom:this.zoom+1},re,de);this._setPaintValue(C,H,we,ke)},Ga.prototype._setPaintValue=function(C,H,re,de){if(this.type==="color")for(var we=ha(re),ke=ha(de),Ne=C;Ne<H;Ne++)this.paintVertexArray.emplace(Ne,we[0],we[1],ke[0],ke[1]);else{for(var at=C;at<H;at++)this.paintVertexArray.emplace(at,re,de);this.maxValue=Math.max(this.maxValue,Math.abs(re),Math.abs(de))}},Ga.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ga.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ga.prototype.setUniform=function(C,H){var re=this.useIntegerZoom?Math.floor(H.zoom):H.zoom,de=p(this.expression.interpolationFactor(re,this.zoom,this.zoom+1),0,1);C.set(de)},Ga.prototype.getBinding=function(C,H,re){return new Vr(C,H)};var ja=function(C,H,re,de,we,ke){this.expression=C,this.type=H,this.useIntegerZoom=re,this.zoom=de,this.layerId=ke,this.zoomInPaintVertexArray=new we,this.zoomOutPaintVertexArray=new we};ja.prototype.populatePaintArray=function(C,H,re){var de=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(de,C,H.patterns&&H.patterns[this.layerId],re)},ja.prototype.updatePaintArray=function(C,H,re,de,we){this._setPaintValues(C,H,re.patterns&&re.patterns[this.layerId],we)},ja.prototype._setPaintValues=function(C,H,re,de){if(!(!de||!re)){var we=re.min,ke=re.mid,Ne=re.max,at=de[we],pt=de[ke],bt=de[Ne];if(!(!at||!pt||!bt))for(var Nt=C;Nt<H;Nt++)this.zoomInPaintVertexArray.emplace(Nt,pt.tl[0],pt.tl[1],pt.br[0],pt.br[1],at.tl[0],at.tl[1],at.br[0],at.br[1],pt.pixelRatio,at.pixelRatio),this.zoomOutPaintVertexArray.emplace(Nt,pt.tl[0],pt.tl[1],pt.br[0],pt.br[1],bt.tl[0],bt.tl[1],bt.br[0],bt.br[1],pt.pixelRatio,bt.pixelRatio)}},ja.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,Q.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,Q.members,this.expression.isStateDependent))},ja.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var li=function(C,H,re,de){this.binders={},this.layoutAttributes=de,this._buffers=[];var we=[];for(var ke in C.paint._values)if(!!re(ke)){var Ne=C.paint.get(ke);if(!(!(Ne instanceof xo)||!ki(Ne.property.specification))){var at=io(ke,C.type),pt=Ne.value,bt=Ne.property.specification.type,Nt=Ne.property.useIntegerZoom,er=Ne.property.specification["property-type"],Zt=er==="cross-faded"||er==="cross-faded-data-driven";if(pt.kind==="constant")this.binders[ke]=Zt?new Ia(pt.value,at):new Da(pt.value,at,bt),we.push("/u_"+ke);else if(pt.kind==="source"||Zt){var dr=Fi(ke,bt,"source");this.binders[ke]=Zt?new ja(pt,bt,Nt,H,dr,C.id):new Ta(pt,at,bt,dr),we.push("/a_"+ke)}else{var Wr=Fi(ke,bt,"composite");this.binders[ke]=new Ga(pt,at,bt,Nt,H,Wr),we.push("/z_"+ke)}}}this.cacheKey=we.sort().join("")};li.prototype.getMaxValue=function(C){var H=this.binders[C];return H instanceof Ta||H instanceof Ga?H.maxValue:0},li.prototype.populatePaintArrays=function(C,H,re,de,we){for(var ke in this.binders){var Ne=this.binders[ke];(Ne instanceof Ta||Ne instanceof Ga||Ne instanceof ja)&&Ne.populatePaintArray(C,H,re,de,we)}},li.prototype.setConstantPatternPositions=function(C,H){for(var re in this.binders){var de=this.binders[re];de instanceof Ia&&de.setConstantPatternPositions(C,H)}},li.prototype.updatePaintArrays=function(C,H,re,de,we){var ke=!1;for(var Ne in C)for(var at=H.getPositions(Ne),pt=0,bt=at;pt<bt.length;pt+=1){var Nt=bt[pt],er=re.feature(Nt.index);for(var Zt in this.binders){var dr=this.binders[Zt];if((dr instanceof Ta||dr instanceof Ga||dr instanceof ja)&&dr.expression.isStateDependent===!0){var Wr=de.paint.get(Zt);dr.expression=Wr.value,dr.updatePaintArray(Nt.start,Nt.end,er,C[Ne],we),ke=!0}}}return ke},li.prototype.defines=function(){var C=[];for(var H in this.binders){var re=this.binders[H];(re instanceof Da||re instanceof Ia)&&C.push.apply(C,re.uniformNames.map(function(de){return"#define HAS_UNIFORM_"+de}))}return C},li.prototype.getPaintVertexBuffers=function(){return this._buffers},li.prototype.getUniforms=function(C,H){var re=[];for(var de in this.binders){var we=this.binders[de];if(we instanceof Da||we instanceof Ia||we instanceof Ga)for(var ke=0,Ne=we.uniformNames;ke<Ne.length;ke+=1){var at=Ne[ke];if(H[at]){var pt=we.getBinding(C,H[at],at);re.push({name:at,property:de,binding:pt})}}}return re},li.prototype.setUniforms=function(C,H,re,de){for(var we=0,ke=H;we<ke.length;we+=1){var Ne=ke[we],at=Ne.name,pt=Ne.property,bt=Ne.binding;this.binders[pt].setUniform(bt,de,re.get(pt),at)}},li.prototype.updatePaintBuffers=function(C){this._buffers=[];for(var H in this.binders){var re=this.binders[H];if(C&&re instanceof ja){var de=C.fromScale===2?re.zoomInPaintVertexBuffer:re.zoomOutPaintVertexBuffer;de&&this._buffers.push(de)}else(re instanceof Ta||re instanceof Ga)&&re.paintVertexBuffer&&this._buffers.push(re.paintVertexBuffer)}},li.prototype.upload=function(C){for(var H in this.binders){var re=this.binders[H];(re instanceof Ta||re instanceof Ga||re instanceof ja)&&re.upload(C)}this.updatePaintBuffers()},li.prototype.destroy=function(){for(var C in this.binders){var H=this.binders[C];(H instanceof Ta||H instanceof Ga||H instanceof ja)&&H.destroy()}};var _i=function(C,H,re,de){de===void 0&&(de=function(){return!0}),this.programConfigurations={};for(var we=0,ke=H;we<ke.length;we+=1){var Ne=ke[we];this.programConfigurations[Ne.id]=new li(Ne,re,de,C)}this.needsUpload=!1,this._featureMap=new Mt,this._bufferOffset=0};_i.prototype.populatePaintArrays=function(C,H,re,de,we,ke){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(C,H,de,we,ke);H.id!==void 0&&this._featureMap.add(H.id,re,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},_i.prototype.updatePaintArrays=function(C,H,re,de){for(var we=0,ke=re;we<ke.length;we+=1){var Ne=ke[we];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(C,this._featureMap,H,Ne,de)||this.needsUpload}},_i.prototype.get=function(C){return this.programConfigurations[C]},_i.prototype.upload=function(C){if(!!this.needsUpload){for(var H in this.programConfigurations)this.programConfigurations[H].upload(C);this.needsUpload=!1}},_i.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()};function io(E,C){var H={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return H[E]||[E.replace(C+"-","").replace(/-/g,"_")]}function Mi(E){var C={"line-pattern":{source:Kl,composite:Kl},"fill-pattern":{source:Kl,composite:Kl},"fill-extrusion-pattern":{source:Kl,composite:Kl}};return C[E]}function Fi(E,C,H){var re={color:{source:Af,composite:Xc},number:{source:Lc,composite:Af}},de=Mi(E);return de&&de[H]||re[C][H]}Ue("ConstantBinder",Da),Ue("CrossFadedConstantBinder",Ia),Ue("SourceExpressionBinder",Ta),Ue("CrossFadedCompositeBinder",ja),Ue("CompositeExpressionBinder",Ga),Ue("ProgramConfiguration",li,{omit:["_buffers"]}),Ue("ProgramConfigurationSet",_i);var ri=8192;function oo(E){return{min:-1*Math.pow(2,E-1),max:Math.pow(2,E-1)-1}}var yo=oo(15);function Ao(E){for(var C=ri/E.extent,H=E.loadGeometry(),re=0;re<H.length;re++)for(var de=H[re],we=0;we<de.length;we++){var ke=de[we];ke.x=Math.round(ke.x*C),ke.y=Math.round(ke.y*C),(ke.x<yo.min||ke.x>yo.max||ke.y<yo.min||ke.y>yo.max)&&(U("Geometry exceeds allowed extent, reduce your vector tile buffer size"),ke.x=p(ke.x,yo.min,yo.max),ke.y=p(ke.y,yo.min,yo.max))}return H}function Zi(E,C,H,re,de){E.emplaceBack(C*2+(re+1)/2,H*2+(de+1)/2)}var Ro=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(H){return H.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new Vc,this.indexArray=new hu,this.segments=new Z,this.programConfigurations=new _i(pe,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};Ro.prototype.populate=function(C,H,re){var de=this.layers[0],we=[],ke=null;de.type==="circle"&&(ke=de.layout.get("circle-sort-key"));for(var Ne=0,at=C;Ne<at.length;Ne+=1){var pt=at[Ne],bt=pt.feature,Nt=pt.id,er=pt.index,Zt=pt.sourceLayerIndex,dr=this.layers[0]._featureFilter.needGeometry,Wr={type:bt.type,id:Nt,properties:bt.properties,geometry:dr?Ao(bt):[]};if(!!this.layers[0]._featureFilter.filter(new Si(this.zoom),Wr,re)){dr||(Wr.geometry=Ao(bt));var mn=ke?ke.evaluate(Wr,{},re):void 0,un={id:Nt,properties:bt.properties,type:bt.type,sourceLayerIndex:Zt,index:er,geometry:Wr.geometry,patterns:{},sortKey:mn};we.push(un)}}ke&&we.sort(function(Wa,Za){return Wa.sortKey-Za.sortKey});for(var Nn=0,Pn=we;Nn<Pn.length;Nn+=1){var Fn=Pn[Nn],Xn=Fn,sa=Xn.geometry,ka=Xn.index,Aa=Xn.sourceLayerIndex,ai=C[ka].feature;this.addFeature(Fn,sa,ka,re),H.featureIndex.insert(ai,sa,ka,Aa,this.index)}},Ro.prototype.update=function(C,H,re){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,H,this.stateDependentLayers,re)},Ro.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ro.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ro.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,pe),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Ro.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ro.prototype.addFeature=function(C,H,re,de){for(var we=0,ke=H;we<ke.length;we+=1)for(var Ne=ke[we],at=0,pt=Ne;at<pt.length;at+=1){var bt=pt[at],Nt=bt.x,er=bt.y;if(!(Nt<0||Nt>=ri||er<0||er>=ri)){var Zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),dr=Zt.vertexLength;Zi(this.layoutVertexArray,Nt,er,-1,-1),Zi(this.layoutVertexArray,Nt,er,1,-1),Zi(this.layoutVertexArray,Nt,er,1,1),Zi(this.layoutVertexArray,Nt,er,-1,1),this.indexArray.emplaceBack(dr,dr+1,dr+2),this.indexArray.emplaceBack(dr,dr+3,dr+2),Zt.vertexLength+=4,Zt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,re,{},de)},Ue("CircleBucket",Ro,{omit:["layers"]});function wi(E,C){for(var H=0;H<E.length;H++)if(ds(C,E[H]))return!0;for(var re=0;re<C.length;re++)if(ds(E,C[re]))return!0;return!!vu(E,C)}function Qi(E,C,H){return!!(ds(E,C)||uf(C,E,H))}function ls(E,C){if(E.length===1)return ff(C,E[0]);for(var H=0;H<C.length;H++)for(var re=C[H],de=0;de<re.length;de++)if(ds(E,re[de]))return!0;for(var we=0;we<E.length;we++)if(ff(C,E[we]))return!0;for(var ke=0;ke<C.length;ke++)if(vu(E,C[ke]))return!0;return!1}function Ms(E,C,H){for(var re=0;re<C.length;re++){var de=C[re];if(E.length>=3){for(var we=0;we<de.length;we++)if(ds(E,de[we]))return!0}if(Bl(E,de,H))return!0}return!1}function Bl(E,C,H){if(E.length>1){if(vu(E,C))return!0;for(var re=0;re<C.length;re++)if(uf(C[re],E,H))return!0}for(var de=0;de<E.length;de++)if(uf(E[de],C,H))return!0;return!1}function vu(E,C){if(E.length===0||C.length===0)return!1;for(var H=0;H<E.length-1;H++)for(var re=E[H],de=E[H+1],we=0;we<C.length-1;we++){var ke=C[we],Ne=C[we+1];if(lf(re,de,ke,Ne))return!0}return!1}function lf(E,C,H,re){return N(E,H,re)!==N(C,H,re)&&N(E,C,H)!==N(E,C,re)}function uf(E,C,H){var re=H*H;if(C.length===1)return E.distSqr(C[0])<re;for(var de=1;de<C.length;de++){var we=C[de-1],ke=C[de];if(Wu(E,we,ke)<re)return!0}return!1}function Wu(E,C,H){var re=C.distSqr(H);if(re===0)return E.distSqr(C);var de=((E.x-C.x)*(H.x-C.x)+(E.y-C.y)*(H.y-C.y))/re;return de<0?E.distSqr(C):de>1?E.distSqr(H):E.distSqr(H.sub(C)._mult(de)._add(C))}function ff(E,C){for(var H=!1,re,de,we,ke=0;ke<E.length;ke++){re=E[ke];for(var Ne=0,at=re.length-1;Ne<re.length;at=Ne++)de=re[Ne],we=re[at],de.y>C.y!=we.y>C.y&&C.x<(we.x-de.x)*(C.y-de.y)/(we.y-de.y)+de.x&&(H=!H)}return H}function ds(E,C){for(var H=!1,re=0,de=E.length-1;re<E.length;de=re++){var we=E[re],ke=E[de];we.y>C.y!=ke.y>C.y&&C.x<(ke.x-we.x)*(C.y-we.y)/(ke.y-we.y)+we.x&&(H=!H)}return H}function pu(E,C,H,re,de){for(var we=0,ke=E;we<ke.length;we+=1){var Ne=ke[we];if(C<=Ne.x&&H<=Ne.y&&re>=Ne.x&&de>=Ne.y)return!0}var at=[new f(C,H),new f(C,de),new f(re,de),new f(re,H)];if(E.length>2)for(var pt=0,bt=at;pt<bt.length;pt+=1){var Nt=bt[pt];if(ds(E,Nt))return!0}for(var er=0;er<E.length-1;er++){var Zt=E[er],dr=E[er+1];if(bl(Zt,dr,at))return!0}return!1}function bl(E,C,H){var re=H[0],de=H[2];if(E.x<re.x&&C.x<re.x||E.x>de.x&&C.x>de.x||E.y<re.y&&C.y<re.y||E.y>de.y&&C.y>de.y)return!1;var we=N(E,C,H[0]);return we!==N(E,C,H[1])||we!==N(E,C,H[2])||we!==N(E,C,H[3])}function du(E,C,H){var re=C.paint.get(E).value;return re.kind==="constant"?re.value:H.programConfigurations.get(C.id).getMaxValue(E)}function Sf(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function cf(E,C,H,re,de){if(!C[0]&&!C[1])return E;var we=f.convert(C)._mult(de);H==="viewport"&&we._rotate(-re);for(var ke=[],Ne=0;Ne<E.length;Ne++){var at=E[Ne];ke.push(at.sub(we))}return ke}var kf=new zo({"circle-sort-key":new vi(mr.layout_circle["circle-sort-key"])}),Dh=new zo({"circle-radius":new vi(mr.paint_circle["circle-radius"]),"circle-color":new vi(mr.paint_circle["circle-color"]),"circle-blur":new vi(mr.paint_circle["circle-blur"]),"circle-opacity":new vi(mr.paint_circle["circle-opacity"]),"circle-translate":new ei(mr.paint_circle["circle-translate"]),"circle-translate-anchor":new ei(mr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ei(mr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ei(mr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vi(mr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vi(mr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vi(mr.paint_circle["circle-stroke-opacity"])}),Rc={paint:Dh,layout:kf},ol=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var E=arguments,C=0,H=arguments.length;H--;)C+=E[H]*E[H];return Math.sqrt(C)});function sh(){var E=new ol(4);return ol!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E}function Ul(E,C,H){var re=C[0],de=C[1],we=C[2],ke=C[3],Ne=Math.sin(H),at=Math.cos(H);return E[0]=re*at+we*Ne,E[1]=de*at+ke*Ne,E[2]=re*-Ne+we*at,E[3]=de*-Ne+ke*at,E}function lh(){var E=new ol(9);return ol!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E}function Ih(E,C){var H=Math.sin(C),re=Math.cos(C);return E[0]=re,E[1]=H,E[2]=0,E[3]=-H,E[4]=re,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E}function zh(){var E=new ol(16);return ol!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E}function wv(E){var C=new ol(16);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3],C[4]=E[4],C[5]=E[5],C[6]=E[6],C[7]=E[7],C[8]=E[8],C[9]=E[9],C[10]=E[10],C[11]=E[11],C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15],C}function uh(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function Dc(E,C){var H=C[0],re=C[1],de=C[2],we=C[3],ke=C[4],Ne=C[5],at=C[6],pt=C[7],bt=C[8],Nt=C[9],er=C[10],Zt=C[11],dr=C[12],Wr=C[13],mn=C[14],un=C[15],Nn=H*Ne-re*ke,Pn=H*at-de*ke,Fn=H*pt-we*ke,Xn=re*at-de*Ne,sa=re*pt-we*Ne,ka=de*pt-we*at,Aa=bt*Wr-Nt*dr,ai=bt*mn-er*dr,Wa=bt*un-Zt*dr,Za=Nt*mn-er*Wr,Ai=Nt*un-Zt*Wr,Qa=er*un-Zt*mn,ni=Nn*Qa-Pn*Ai+Fn*Za+Xn*Wa-sa*ai+ka*Aa;return ni?(ni=1/ni,E[0]=(Ne*Qa-at*Ai+pt*Za)*ni,E[1]=(de*Ai-re*Qa-we*Za)*ni,E[2]=(Wr*ka-mn*sa+un*Xn)*ni,E[3]=(er*sa-Nt*ka-Zt*Xn)*ni,E[4]=(at*Wa-ke*Qa-pt*ai)*ni,E[5]=(H*Qa-de*Wa+we*ai)*ni,E[6]=(mn*Fn-dr*ka-un*Pn)*ni,E[7]=(bt*ka-er*Fn+Zt*Pn)*ni,E[8]=(ke*Ai-Ne*Wa+pt*Aa)*ni,E[9]=(re*Wa-H*Ai-we*Aa)*ni,E[10]=(dr*sa-Wr*Fn+un*Nn)*ni,E[11]=(Nt*Fn-bt*sa-Zt*Nn)*ni,E[12]=(Ne*ai-ke*Za-at*Aa)*ni,E[13]=(H*Za-re*ai+de*Aa)*ni,E[14]=(Wr*Pn-dr*Xn-mn*Nn)*ni,E[15]=(bt*Xn-Nt*Pn+er*Nn)*ni,E):null}function jc(E,C,H){var re=C[0],de=C[1],we=C[2],ke=C[3],Ne=C[4],at=C[5],pt=C[6],bt=C[7],Nt=C[8],er=C[9],Zt=C[10],dr=C[11],Wr=C[12],mn=C[13],un=C[14],Nn=C[15],Pn=H[0],Fn=H[1],Xn=H[2],sa=H[3];return E[0]=Pn*re+Fn*Ne+Xn*Nt+sa*Wr,E[1]=Pn*de+Fn*at+Xn*er+sa*mn,E[2]=Pn*we+Fn*pt+Xn*Zt+sa*un,E[3]=Pn*ke+Fn*bt+Xn*dr+sa*Nn,Pn=H[4],Fn=H[5],Xn=H[6],sa=H[7],E[4]=Pn*re+Fn*Ne+Xn*Nt+sa*Wr,E[5]=Pn*de+Fn*at+Xn*er+sa*mn,E[6]=Pn*we+Fn*pt+Xn*Zt+sa*un,E[7]=Pn*ke+Fn*bt+Xn*dr+sa*Nn,Pn=H[8],Fn=H[9],Xn=H[10],sa=H[11],E[8]=Pn*re+Fn*Ne+Xn*Nt+sa*Wr,E[9]=Pn*de+Fn*at+Xn*er+sa*mn,E[10]=Pn*we+Fn*pt+Xn*Zt+sa*un,E[11]=Pn*ke+Fn*bt+Xn*dr+sa*Nn,Pn=H[12],Fn=H[13],Xn=H[14],sa=H[15],E[12]=Pn*re+Fn*Ne+Xn*Nt+sa*Wr,E[13]=Pn*de+Fn*at+Xn*er+sa*mn,E[14]=Pn*we+Fn*pt+Xn*Zt+sa*un,E[15]=Pn*ke+Fn*bt+Xn*dr+sa*Nn,E}function bs(E,C,H){var re=H[0],de=H[1],we=H[2],ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr,mn,un;return C===E?(E[12]=C[0]*re+C[4]*de+C[8]*we+C[12],E[13]=C[1]*re+C[5]*de+C[9]*we+C[13],E[14]=C[2]*re+C[6]*de+C[10]*we+C[14],E[15]=C[3]*re+C[7]*de+C[11]*we+C[15]):(ke=C[0],Ne=C[1],at=C[2],pt=C[3],bt=C[4],Nt=C[5],er=C[6],Zt=C[7],dr=C[8],Wr=C[9],mn=C[10],un=C[11],E[0]=ke,E[1]=Ne,E[2]=at,E[3]=pt,E[4]=bt,E[5]=Nt,E[6]=er,E[7]=Zt,E[8]=dr,E[9]=Wr,E[10]=mn,E[11]=un,E[12]=ke*re+bt*de+dr*we+C[12],E[13]=Ne*re+Nt*de+Wr*we+C[13],E[14]=at*re+er*de+mn*we+C[14],E[15]=pt*re+Zt*de+un*we+C[15]),E}function gu(E,C,H){var re=H[0],de=H[1],we=H[2];return E[0]=C[0]*re,E[1]=C[1]*re,E[2]=C[2]*re,E[3]=C[3]*re,E[4]=C[4]*de,E[5]=C[5]*de,E[6]=C[6]*de,E[7]=C[7]*de,E[8]=C[8]*we,E[9]=C[9]*we,E[10]=C[10]*we,E[11]=C[11]*we,E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15],E}function Ql(E,C,H){var re=Math.sin(H),de=Math.cos(H),we=C[4],ke=C[5],Ne=C[6],at=C[7],pt=C[8],bt=C[9],Nt=C[10],er=C[11];return C!==E&&(E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[4]=we*de+pt*re,E[5]=ke*de+bt*re,E[6]=Ne*de+Nt*re,E[7]=at*de+er*re,E[8]=pt*de-we*re,E[9]=bt*de-ke*re,E[10]=Nt*de-Ne*re,E[11]=er*de-at*re,E}function Fh(E,C,H){var re=Math.sin(H),de=Math.cos(H),we=C[0],ke=C[1],Ne=C[2],at=C[3],pt=C[4],bt=C[5],Nt=C[6],er=C[7];return C!==E&&(E[8]=C[8],E[9]=C[9],E[10]=C[10],E[11]=C[11],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[0]=we*de+pt*re,E[1]=ke*de+bt*re,E[2]=Ne*de+Nt*re,E[3]=at*de+er*re,E[4]=pt*de-we*re,E[5]=bt*de-ke*re,E[6]=Nt*de-Ne*re,E[7]=er*de-at*re,E}function Tv(E,C,H,re,de){var we=1/Math.tan(C/2),ke;return E[0]=we/H,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=we,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,de!=null&&de!==1/0?(ke=1/(re-de),E[10]=(de+re)*ke,E[14]=2*de*re*ke):(E[10]=-1,E[14]=-2*re),E}function vd(E,C,H,re,de,we,ke){var Ne=1/(C-H),at=1/(re-de),pt=1/(we-ke);return E[0]=-2*Ne,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*at,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*pt,E[11]=0,E[12]=(C+H)*Ne,E[13]=(de+re)*at,E[14]=(ke+we)*pt,E[15]=1,E}var pd=jc;function fh(){var E=new ol(3);return ol!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0),E}function dd(E){var C=new ol(3);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C}function $l(E,C,H){return E[0]=C[0]+H[0],E[1]=C[1]+H[1],E[2]=C[2]+H[2],E}function gd(E,C,H){return E[0]=C[0]-H[0],E[1]=C[1]-H[1],E[2]=C[2]-H[2],E}function yd(E,C,H){return E[0]=C[0]*H,E[1]=C[1]*H,E[2]=C[2]*H,E}function Av(E,C){var H=C[0],re=C[1],de=C[2],we=H*H+re*re+de*de;return we>0&&(we=1/Math.sqrt(we)),E[0]=C[0]*we,E[1]=C[1]*we,E[2]=C[2]*we,E}function K0(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]}function mm(E,C,H){var re=C[0],de=C[1],we=C[2],ke=H[0],Ne=H[1],at=H[2];return E[0]=de*at-we*Ne,E[1]=we*ke-re*at,E[2]=re*Ne-de*ke,E}function xm(E,C,H){var re=C[0],de=C[1],we=C[2];return E[0]=re*H[0]+de*H[3]+we*H[6],E[1]=re*H[1]+de*H[4]+we*H[7],E[2]=re*H[2]+de*H[5]+we*H[8],E}var bm=gd;(function(){var E=fh();return function(C,H,re,de,we,ke){var Ne,at;for(H||(H=3),re||(re=0),de?at=Math.min(de*H+re,C.length):at=C.length,Ne=re;Ne<at;Ne+=H)E[0]=C[Ne],E[1]=C[Ne+1],E[2]=C[Ne+2],we(E,E,ke),C[Ne]=E[0],C[Ne+1]=E[1],C[Ne+2]=E[2];return C}})();function _m(){var E=new ol(4);return ol!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0),E}function md(E,C,H){return E[0]=C[0]*H,E[1]=C[1]*H,E[2]=C[2]*H,E[3]=C[3]*H,E}function wm(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3]}function ap(E,C,H){var re=C[0],de=C[1],we=C[2],ke=C[3];return E[0]=H[0]*re+H[4]*de+H[8]*we+H[12]*ke,E[1]=H[1]*re+H[5]*de+H[9]*we+H[13]*ke,E[2]=H[2]*re+H[6]*de+H[10]*we+H[14]*ke,E[3]=H[3]*re+H[7]*de+H[11]*we+H[15]*ke,E}(function(){var E=_m();return function(C,H,re,de,we,ke){var Ne,at;for(H||(H=4),re||(re=0),de?at=Math.min(de*H+re,C.length):at=C.length,Ne=re;Ne<at;Ne+=H)E[0]=C[Ne],E[1]=C[Ne+1],E[2]=C[Ne+2],E[3]=C[Ne+3],we(E,E,ke),C[Ne]=E[0],C[Ne+1]=E[1],C[Ne+2]=E[2],C[Ne+3]=E[3];return C}})();function Tm(){var E=new ol(2);return ol!=Float32Array&&(E[0]=0,E[1]=0),E}function Am(E){var C=E[0],H=E[1];return C*C+H*H}var Mm=Am;(function(){var E=Tm();return function(C,H,re,de,we,ke){var Ne,at;for(H||(H=2),re||(re=0),de?at=Math.min(de*H+re,C.length):at=C.length,Ne=re;Ne<at;Ne+=H)E[0]=C[Ne],E[1]=C[Ne+1],we(E,E,ke),C[Ne]=E[0],C[Ne+1]=E[1];return C}})();var Sm=function(E){function C(H){E.call(this,H,Rc)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(re){return new Ro(re)},C.prototype.queryRadius=function(re){var de=re;return du("circle-radius",this,de)+du("circle-stroke-width",this,de)+Sf(this.paint.get("circle-translate"))},C.prototype.queryIntersectsFeature=function(re,de,we,ke,Ne,at,pt,bt){for(var Nt=cf(re,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),at.angle,pt),er=this.paint.get("circle-radius").evaluate(de,we),Zt=this.paint.get("circle-stroke-width").evaluate(de,we),dr=er+Zt,Wr=this.paint.get("circle-pitch-alignment")==="map",mn=Wr?Nt:km(Nt,bt),un=Wr?dr*pt:dr,Nn=0,Pn=ke;Nn<Pn.length;Nn+=1)for(var Fn=Pn[Nn],Xn=0,sa=Fn;Xn<sa.length;Xn+=1){var ka=sa[Xn],Aa=Wr?ka:J0(ka,bt),ai=un,Wa=ap([],[ka.x,ka.y,0,1],bt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ai*=Wa[3]/at.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ai*=at.cameraToCenterDistance/Wa[3]),Qi(mn,Aa,ai))return!0}return!1},C}(il);function J0(E,C){var H=ap([],[E.x,E.y,0,1],C);return new f(H[0]/H[3],H[1]/H[3])}function km(E,C){return E.map(function(H){return J0(H,C)})}var Q0=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Ro);Ue("HeatmapBucket",Q0,{omit:["layers"]});function xd(E,C,H,re){var de=C.width,we=C.height;if(!re)re=new Uint8Array(de*we*H);else if(re instanceof Uint8ClampedArray)re=new Uint8Array(re.buffer);else if(re.length!==de*we*H)throw new RangeError("mismatched image size");return E.width=de,E.height=we,E.data=re,E}function $0(E,C,H){var re=C.width,de=C.height;if(!(re===E.width&&de===E.height)){var we=xd({},{width:re,height:de},H);bd(E,we,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,re),height:Math.min(E.height,de)},H),E.width=re,E.height=de,E.data=we.data}}function bd(E,C,H,re,de,we){if(de.width===0||de.height===0)return C;if(de.width>E.width||de.height>E.height||H.x>E.width-de.width||H.y>E.height-de.height)throw new RangeError("out of range source coordinates for image copy");if(de.width>C.width||de.height>C.height||re.x>C.width-de.width||re.y>C.height-de.height)throw new RangeError("out of range destination coordinates for image copy");for(var ke=E.data,Ne=C.data,at=0;at<de.height;at++)for(var pt=((H.y+at)*E.width+H.x)*we,bt=((re.y+at)*C.width+re.x)*we,Nt=0;Nt<de.width*we;Nt++)Ne[bt+Nt]=ke[pt+Nt];return C}var ch=function(C,H){xd(this,C,1,H)};ch.prototype.resize=function(C){$0(this,C,1)},ch.prototype.clone=function(){return new ch({width:this.width,height:this.height},new Uint8Array(this.data))},ch.copy=function(C,H,re,de,we){bd(C,H,re,de,we,1)};var yu=function(C,H){xd(this,C,4,H)};yu.prototype.resize=function(C){$0(this,C,4)},yu.prototype.replace=function(C,H){H?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},yu.prototype.clone=function(){return new yu({width:this.width,height:this.height},new Uint8Array(this.data))},yu.copy=function(C,H,re,de,we){bd(C,H,re,de,we,4)},Ue("AlphaImage",ch),Ue("RGBAImage",yu);var Em=new zo({"heatmap-radius":new vi(mr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vi(mr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ei(mr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wo(mr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ei(mr.paint_heatmap["heatmap-opacity"])}),Cm={paint:Em};function q0(E,C){for(var H=new Uint8Array(256*4),re={},de=0,we=0;de<256;de++,we+=4){re[C]=de/255;var ke=E.evaluate(re);H[we+0]=Math.floor(ke.r*255/ke.a),H[we+1]=Math.floor(ke.g*255/ke.a),H[we+2]=Math.floor(ke.b*255/ke.a),H[we+3]=Math.floor(ke.a*255)}return new yu({width:256,height:1},H)}var Lm=function(E){function C(H){E.call(this,H,Cm),this._updateColorRamp()}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(re){return new Q0(re)},C.prototype._handleSpecialPaintPropertyUpdate=function(re){re==="heatmap-color"&&this._updateColorRamp()},C.prototype._updateColorRamp=function(){var re=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=q0(re,"heatmapDensity"),this.colorRampTexture=null},C.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},C}(il),Pm=new zo({"hillshade-illumination-direction":new ei(mr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ei(mr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ei(mr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ei(mr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ei(mr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ei(mr.paint_hillshade["hillshade-accent-color"])}),Rm={paint:Pm},_d=function(E){function C(H){E.call(this,H,Rm)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C}(il),eg=xs([{name:"a_pos",components:2,type:"Int16"}],4),tg=eg.members,wd=ip,Dm=ip;function ip(E,C,H){H=H||2;var re=C&&C.length,de=re?C[0]*H:E.length,we=rg(E,0,de,H,!0),ke=[];if(!we||we.next===we.prev)return ke;var Ne,at,pt,bt,Nt,er,Zt;if(re&&(we=Fm(E,C,we,H)),E.length>80*H){Ne=pt=E[0],at=bt=E[1];for(var dr=H;dr<de;dr+=H)Nt=E[dr],er=E[dr+1],Nt<Ne&&(Ne=Nt),er<at&&(at=er),Nt>pt&&(pt=Nt),er>bt&&(bt=er);Zt=Math.max(pt-Ne,bt-at),Zt=Zt!==0?1/Zt:0}return Mv(we,ke,H,Ne,at,Zt),ke}function rg(E,C,H,re,de){var we,ke;if(de===Ad(E,C,H,re)>0)for(we=C;we<H;we+=re)ke=sg(we,E[we],E[we+1],ke);else for(we=H-re;we>=C;we-=re)ke=sg(we,E[we],E[we+1],ke);return ke&&sp(ke,ke.next)&&(Sv(ke),ke=ke.next),ke}function Kc(E,C){if(!E)return E;C||(C=E);var H=E,re;do if(re=!1,!H.steiner&&(sp(H,H.next)||zs(H.prev,H,H.next)===0)){if(Sv(H),H=C=H.prev,H===H.next)break;re=!0}else H=H.next;while(re||H!==C);return C}function Mv(E,C,H,re,de,we,ke){if(!!E){!ke&&we&&Hm(E,re,de,we);for(var Ne=E,at,pt;E.prev!==E.next;){if(at=E.prev,pt=E.next,we?ng(E,re,de,we):Im(E)){C.push(at.i/H),C.push(E.i/H),C.push(pt.i/H),Sv(E),E=pt.next,Ne=pt.next;continue}if(E=pt,E===Ne){ke?ke===1?(E=zm(Kc(E),C,H),Mv(E,C,H,re,de,we,2)):ke===2&&op(E,C,H,re,de,we):Mv(Kc(E),C,H,re,de,we,1);break}}}}function Im(E){var C=E.prev,H=E,re=E.next;if(zs(C,H,re)>=0)return!1;for(var de=E.next.next;de!==E.prev;){if(Oh(C.x,C.y,H.x,H.y,re.x,re.y,de.x,de.y)&&zs(de.prev,de,de.next)>=0)return!1;de=de.next}return!0}function ng(E,C,H,re){var de=E.prev,we=E,ke=E.next;if(zs(de,we,ke)>=0)return!1;for(var Ne=de.x<we.x?de.x<ke.x?de.x:ke.x:we.x<ke.x?we.x:ke.x,at=de.y<we.y?de.y<ke.y?de.y:ke.y:we.y<ke.y?we.y:ke.y,pt=de.x>we.x?de.x>ke.x?de.x:ke.x:we.x>ke.x?we.x:ke.x,bt=de.y>we.y?de.y>ke.y?de.y:ke.y:we.y>ke.y?we.y:ke.y,Nt=Td(Ne,at,C,H,re),er=Td(pt,bt,C,H,re),Zt=E.prevZ,dr=E.nextZ;Zt&&Zt.z>=Nt&&dr&&dr.z<=er;){if(Zt!==E.prev&&Zt!==E.next&&Oh(de.x,de.y,we.x,we.y,ke.x,ke.y,Zt.x,Zt.y)&&zs(Zt.prev,Zt,Zt.next)>=0||(Zt=Zt.prevZ,dr!==E.prev&&dr!==E.next&&Oh(de.x,de.y,we.x,we.y,ke.x,ke.y,dr.x,dr.y)&&zs(dr.prev,dr,dr.next)>=0))return!1;dr=dr.nextZ}for(;Zt&&Zt.z>=Nt;){if(Zt!==E.prev&&Zt!==E.next&&Oh(de.x,de.y,we.x,we.y,ke.x,ke.y,Zt.x,Zt.y)&&zs(Zt.prev,Zt,Zt.next)>=0)return!1;Zt=Zt.prevZ}for(;dr&&dr.z<=er;){if(dr!==E.prev&&dr!==E.next&&Oh(de.x,de.y,we.x,we.y,ke.x,ke.y,dr.x,dr.y)&&zs(dr.prev,dr,dr.next)>=0)return!1;dr=dr.nextZ}return!0}function zm(E,C,H){var re=E;do{var de=re.prev,we=re.next.next;!sp(de,we)&&ag(de,re,re.next,we)&&Nh(de,we)&&Nh(we,de)&&(C.push(de.i/H),C.push(re.i/H),C.push(we.i/H),Sv(re),Sv(re.next),re=E=we),re=re.next}while(re!==E);return Kc(re)}function op(E,C,H,re,de,we){var ke=E;do{for(var Ne=ke.next.next;Ne!==ke.prev;){if(ke.i!==Ne.i&&Wm(ke,Ne)){var at=og(ke,Ne);ke=Kc(ke,ke.next),at=Kc(at,at.next),Mv(ke,C,H,re,de,we),Mv(at,C,H,re,de,we);return}Ne=Ne.next}ke=ke.next}while(ke!==E)}function Fm(E,C,H,re){var de=[],we,ke,Ne,at,pt;for(we=0,ke=C.length;we<ke;we++)Ne=C[we]*re,at=we<ke-1?C[we+1]*re:E.length,pt=rg(E,Ne,at,re,!1),pt===pt.next&&(pt.steiner=!0),de.push(Gm(pt));for(de.sort(Om),we=0;we<de.length;we++)Nm(de[we],H),H=Kc(H,H.next);return H}function Om(E,C){return E.x-C.x}function Nm(E,C){if(C=Bm(E,C),C){var H=og(C,E);Kc(C,C.next),Kc(H,H.next)}}function Bm(E,C){var H=C,re=E.x,de=E.y,we=-1/0,ke;do{if(de<=H.y&&de>=H.next.y&&H.next.y!==H.y){var Ne=H.x+(de-H.y)*(H.next.x-H.x)/(H.next.y-H.y);if(Ne<=re&&Ne>we){if(we=Ne,Ne===re){if(de===H.y)return H;if(de===H.next.y)return H.next}ke=H.x<H.next.x?H:H.next}}H=H.next}while(H!==C);if(!ke)return null;if(re===we)return ke;var at=ke,pt=ke.x,bt=ke.y,Nt=1/0,er;H=ke;do re>=H.x&&H.x>=pt&&re!==H.x&&Oh(de<bt?re:we,de,pt,bt,de<bt?we:re,de,H.x,H.y)&&(er=Math.abs(de-H.y)/(re-H.x),Nh(H,E)&&(er<Nt||er===Nt&&(H.x>ke.x||H.x===ke.x&&Um(ke,H)))&&(ke=H,Nt=er)),H=H.next;while(H!==at);return ke}function Um(E,C){return zs(E.prev,E,C.prev)<0&&zs(C.next,E,E.next)<0}function Hm(E,C,H,re){var de=E;do de.z===null&&(de.z=Td(de.x,de.y,C,H,re)),de.prevZ=de.prev,de.nextZ=de.next,de=de.next;while(de!==E);de.prevZ.nextZ=null,de.prevZ=null,Vm(de)}function Vm(E){var C,H,re,de,we,ke,Ne,at,pt=1;do{for(H=E,E=null,we=null,ke=0;H;){for(ke++,re=H,Ne=0,C=0;C<pt&&(Ne++,re=re.nextZ,!!re);C++);for(at=pt;Ne>0||at>0&&re;)Ne!==0&&(at===0||!re||H.z<=re.z)?(de=H,H=H.nextZ,Ne--):(de=re,re=re.nextZ,at--),we?we.nextZ=de:E=de,de.prevZ=we,we=de;H=re}we.nextZ=null,pt*=2}while(ke>1);return E}function Td(E,C,H,re,de){return E=32767*(E-H)*de,C=32767*(C-re)*de,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,E|C<<1}function Gm(E){var C=E,H=E;do(C.x<H.x||C.x===H.x&&C.y<H.y)&&(H=C),C=C.next;while(C!==E);return H}function Oh(E,C,H,re,de,we,ke,Ne){return(de-ke)*(C-Ne)-(E-ke)*(we-Ne)>=0&&(E-ke)*(re-Ne)-(H-ke)*(C-Ne)>=0&&(H-ke)*(we-Ne)-(de-ke)*(re-Ne)>=0}function Wm(E,C){return E.next.i!==C.i&&E.prev.i!==C.i&&!ig(E,C)&&(Nh(E,C)&&Nh(C,E)&&Ym(E,C)&&(zs(E.prev,E,C.prev)||zs(E,C.prev,C))||sp(E,C)&&zs(E.prev,E,E.next)>0&&zs(C.prev,C,C.next)>0)}function zs(E,C,H){return(C.y-E.y)*(H.x-C.x)-(C.x-E.x)*(H.y-C.y)}function sp(E,C){return E.x===C.x&&E.y===C.y}function ag(E,C,H,re){var de=up(zs(E,C,H)),we=up(zs(E,C,re)),ke=up(zs(H,re,E)),Ne=up(zs(H,re,C));return!!(de!==we&&ke!==Ne||de===0&&lp(E,H,C)||we===0&&lp(E,re,C)||ke===0&&lp(H,E,re)||Ne===0&&lp(H,C,re))}function lp(E,C,H){return C.x<=Math.max(E.x,H.x)&&C.x>=Math.min(E.x,H.x)&&C.y<=Math.max(E.y,H.y)&&C.y>=Math.min(E.y,H.y)}function up(E){return E>0?1:E<0?-1:0}function ig(E,C){var H=E;do{if(H.i!==E.i&&H.next.i!==E.i&&H.i!==C.i&&H.next.i!==C.i&&ag(H,H.next,E,C))return!0;H=H.next}while(H!==E);return!1}function Nh(E,C){return zs(E.prev,E,E.next)<0?zs(E,C,E.next)>=0&&zs(E,E.prev,C)>=0:zs(E,C,E.prev)<0||zs(E,E.next,C)<0}function Ym(E,C){var H=E,re=!1,de=(E.x+C.x)/2,we=(E.y+C.y)/2;do H.y>we!=H.next.y>we&&H.next.y!==H.y&&de<(H.next.x-H.x)*(we-H.y)/(H.next.y-H.y)+H.x&&(re=!re),H=H.next;while(H!==E);return re}function og(E,C){var H=new Bh(E.i,E.x,E.y),re=new Bh(C.i,C.x,C.y),de=E.next,we=C.prev;return E.next=C,C.prev=E,H.next=de,de.prev=H,re.next=H,H.prev=re,we.next=re,re.prev=we,re}function sg(E,C,H,re){var de=new Bh(E,C,H);return re?(de.next=re.next,de.prev=re,re.next.prev=de,re.next=de):(de.prev=de,de.next=de),de}function Sv(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function Bh(E,C,H){this.i=E,this.x=C,this.y=H,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}ip.deviation=function(E,C,H,re){var de=C&&C.length,we=de?C[0]*H:E.length,ke=Math.abs(Ad(E,0,we,H));if(de)for(var Ne=0,at=C.length;Ne<at;Ne++){var pt=C[Ne]*H,bt=Ne<at-1?C[Ne+1]*H:E.length;ke-=Math.abs(Ad(E,pt,bt,H))}var Nt=0;for(Ne=0;Ne<re.length;Ne+=3){var er=re[Ne]*H,Zt=re[Ne+1]*H,dr=re[Ne+2]*H;Nt+=Math.abs((E[er]-E[dr])*(E[Zt+1]-E[er+1])-(E[er]-E[Zt])*(E[dr+1]-E[er+1]))}return ke===0&&Nt===0?0:Math.abs((Nt-ke)/ke)};function Ad(E,C,H,re){for(var de=0,we=C,ke=H-re;we<H;we+=re)de+=(E[ke]-E[we])*(E[we+1]+E[ke+1]),ke=we;return de}ip.flatten=function(E){for(var C=E[0][0].length,H={vertices:[],holes:[],dimensions:C},re=0,de=0;de<E.length;de++){for(var we=0;we<E[de].length;we++)for(var ke=0;ke<C;ke++)H.vertices.push(E[de][we][ke]);de>0&&(re+=E[de-1].length,H.holes.push(re))}return H},wd.default=Dm;function Xm(E,C,H,re,de){lg(E,C,H||0,re||E.length-1,de||Zm)}function lg(E,C,H,re,de){for(;re>H;){if(re-H>600){var we=re-H+1,ke=C-H+1,Ne=Math.log(we),at=.5*Math.exp(2*Ne/3),pt=.5*Math.sqrt(Ne*at*(we-at)/we)*(ke-we/2<0?-1:1),bt=Math.max(H,Math.floor(C-ke*at/we+pt)),Nt=Math.min(re,Math.floor(C+(we-ke)*at/we+pt));lg(E,C,bt,Nt,de)}var er=E[C],Zt=H,dr=re;for(kv(E,H,C),de(E[re],er)>0&&kv(E,H,re);Zt<dr;){for(kv(E,Zt,dr),Zt++,dr--;de(E[Zt],er)<0;)Zt++;for(;de(E[dr],er)>0;)dr--}de(E[H],er)===0?kv(E,H,dr):(dr++,kv(E,dr,re)),dr<=C&&(H=dr+1),C<=dr&&(re=dr-1)}}function kv(E,C,H){var re=E[C];E[C]=E[H],E[H]=re}function Zm(E,C){return E<C?-1:E>C?1:0}function Md(E,C){var H=E.length;if(H<=1)return[E];for(var re=[],de,we,ke=0;ke<H;ke++){var Ne=X(E[ke]);Ne!==0&&(E[ke].area=Math.abs(Ne),we===void 0&&(we=Ne<0),we===Ne<0?(de&&re.push(de),de=[E[ke]]):de.push(E[ke]))}if(de&&re.push(de),C>1)for(var at=0;at<re.length;at++)re[at].length<=C||(Xm(re[at],C,1,re[at].length-1,jm),re[at]=re[at].slice(0,C));return re}function jm(E,C){return C.area-E.area}function Sd(E,C,H){for(var re=H.patternDependencies,de=!1,we=0,ke=C;we<ke.length;we+=1){var Ne=ke[we],at=Ne.paint.get(E+"-pattern");at.isConstant()||(de=!0);var pt=at.constantOr(null);pt&&(de=!0,re[pt.to]=!0,re[pt.from]=!0)}return de}function kd(E,C,H,re,de){for(var we=de.patternDependencies,ke=0,Ne=C;ke<Ne.length;ke+=1){var at=Ne[ke],pt=at.paint.get(E+"-pattern"),bt=pt.value;if(bt.kind!=="constant"){var Nt=bt.evaluate({zoom:re-1},H,{},de.availableImages),er=bt.evaluate({zoom:re},H,{},de.availableImages),Zt=bt.evaluate({zoom:re+1},H,{},de.availableImages);Nt=Nt&&Nt.name?Nt.name:Nt,er=er&&er.name?er.name:er,Zt=Zt&&Zt.name?Zt.name:Zt,we[Nt]=!0,we[er]=!0,we[Zt]=!0,H.patterns[at.id]={min:Nt,mid:er,max:Zt}}}return H}var Km=500,Jf=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(H){return H.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vc,this.indexArray=new hu,this.indexArray2=new Yc,this.programConfigurations=new _i(tg,C.layers,C.zoom),this.segments=new Z,this.segments2=new Z,this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};Jf.prototype.populate=function(C,H,re){this.hasPattern=Sd("fill",this.layers,H);for(var de=this.layers[0].layout.get("fill-sort-key"),we=[],ke=0,Ne=C;ke<Ne.length;ke+=1){var at=Ne[ke],pt=at.feature,bt=at.id,Nt=at.index,er=at.sourceLayerIndex,Zt=this.layers[0]._featureFilter.needGeometry,dr={type:pt.type,id:bt,properties:pt.properties,geometry:Zt?Ao(pt):[]};if(!!this.layers[0]._featureFilter.filter(new Si(this.zoom),dr,re)){Zt||(dr.geometry=Ao(pt));var Wr=de?de.evaluate(dr,{},re,H.availableImages):void 0,mn={id:bt,properties:pt.properties,type:pt.type,sourceLayerIndex:er,index:Nt,geometry:dr.geometry,patterns:{},sortKey:Wr};we.push(mn)}}de&&we.sort(function(Wa,Za){return Wa.sortKey-Za.sortKey});for(var un=0,Nn=we;un<Nn.length;un+=1){var Pn=Nn[un],Fn=Pn,Xn=Fn.geometry,sa=Fn.index,ka=Fn.sourceLayerIndex;if(this.hasPattern){var Aa=kd("fill",this.layers,Pn,this.zoom,H);this.patternFeatures.push(Aa)}else this.addFeature(Pn,Xn,sa,re,{});var ai=C[sa].feature;H.featureIndex.insert(ai,Xn,sa,ka,this.index)}},Jf.prototype.update=function(C,H,re){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,H,this.stateDependentLayers,re)},Jf.prototype.addFeatures=function(C,H,re){for(var de=0,we=this.patternFeatures;de<we.length;de+=1){var ke=we[de];this.addFeature(ke,ke.geometry,ke.index,H,re)}},Jf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Jf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Jf.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,tg),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},Jf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Jf.prototype.addFeature=function(C,H,re,de,we){for(var ke=0,Ne=Md(H,Km);ke<Ne.length;ke+=1){for(var at=Ne[ke],pt=0,bt=0,Nt=at;bt<Nt.length;bt+=1){var er=Nt[bt];pt+=er.length}for(var Zt=this.segments.prepareSegment(pt,this.layoutVertexArray,this.indexArray),dr=Zt.vertexLength,Wr=[],mn=[],un=0,Nn=at;un<Nn.length;un+=1){var Pn=Nn[un];if(Pn.length!==0){Pn!==at[0]&&mn.push(Wr.length/2);var Fn=this.segments2.prepareSegment(Pn.length,this.layoutVertexArray,this.indexArray2),Xn=Fn.vertexLength;this.layoutVertexArray.emplaceBack(Pn[0].x,Pn[0].y),this.indexArray2.emplaceBack(Xn+Pn.length-1,Xn),Wr.push(Pn[0].x),Wr.push(Pn[0].y);for(var sa=1;sa<Pn.length;sa++)this.layoutVertexArray.emplaceBack(Pn[sa].x,Pn[sa].y),this.indexArray2.emplaceBack(Xn+sa-1,Xn+sa),Wr.push(Pn[sa].x),Wr.push(Pn[sa].y);Fn.vertexLength+=Pn.length,Fn.primitiveLength+=Pn.length}}for(var ka=wd(Wr,mn),Aa=0;Aa<ka.length;Aa+=3)this.indexArray.emplaceBack(dr+ka[Aa],dr+ka[Aa+1],dr+ka[Aa+2]);Zt.vertexLength+=pt,Zt.primitiveLength+=ka.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,re,we,de)},Ue("FillBucket",Jf,{omit:["layers","patternFeatures"]});var fp=new zo({"fill-sort-key":new vi(mr.layout_fill["fill-sort-key"])}),Jm=new zo({"fill-antialias":new ei(mr.paint_fill["fill-antialias"]),"fill-opacity":new vi(mr.paint_fill["fill-opacity"]),"fill-color":new vi(mr.paint_fill["fill-color"]),"fill-outline-color":new vi(mr.paint_fill["fill-outline-color"]),"fill-translate":new ei(mr.paint_fill["fill-translate"]),"fill-translate-anchor":new ei(mr.paint_fill["fill-translate-anchor"]),"fill-pattern":new rs(mr.paint_fill["fill-pattern"])}),ug={paint:Jm,layout:fp},fg=function(E){function C(H){E.call(this,H,ug)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(re,de){E.prototype.recalculate.call(this,re,de);var we=this.paint._values["fill-outline-color"];we.value.kind==="constant"&&we.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},C.prototype.createBucket=function(re){return new Jf(re)},C.prototype.queryRadius=function(){return Sf(this.paint.get("fill-translate"))},C.prototype.queryIntersectsFeature=function(re,de,we,ke,Ne,at,pt){var bt=cf(re,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),at.angle,pt);return ls(bt,ke)},C.prototype.isTileClipped=function(){return!0},C}(il),Ed=xs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Cd=Ed.members,Ld=hh;function hh(E,C,H,re,de){this.properties={},this.extent=H,this.type=0,this._pbf=E,this._geometry=-1,this._keys=re,this._values=de,E.readFields(cg,this,C)}function cg(E,C,H){E==1?C.id=H.readVarint():E==2?Qm(H,C):E==3?C.type=H.readVarint():E==4&&(C._geometry=H.pos)}function Qm(E,C){for(var H=E.readVarint()+E.pos;E.pos<H;){var re=C._keys[E.readVarint()],de=C._values[E.readVarint()];C.properties[re]=de}}hh.types=["Unknown","Point","LineString","Polygon"],hh.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,H=1,re=0,de=0,we=0,ke=[],Ne;E.pos<C;){if(re<=0){var at=E.readVarint();H=at&7,re=at>>3}if(re--,H===1||H===2)de+=E.readSVarint(),we+=E.readSVarint(),H===1&&(Ne&&ke.push(Ne),Ne=[]),Ne.push(new f(de,we));else if(H===7)Ne&&Ne.push(Ne[0].clone());else throw new Error("unknown command "+H)}return Ne&&ke.push(Ne),ke},hh.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,H=1,re=0,de=0,we=0,ke=1/0,Ne=-1/0,at=1/0,pt=-1/0;E.pos<C;){if(re<=0){var bt=E.readVarint();H=bt&7,re=bt>>3}if(re--,H===1||H===2)de+=E.readSVarint(),we+=E.readSVarint(),de<ke&&(ke=de),de>Ne&&(Ne=de),we<at&&(at=we),we>pt&&(pt=we);else if(H!==7)throw new Error("unknown command "+H)}return[ke,at,Ne,pt]},hh.prototype.toGeoJSON=function(E,C,H){var re=this.extent*Math.pow(2,H),de=this.extent*E,we=this.extent*C,ke=this.loadGeometry(),Ne=hh.types[this.type],at,pt;function bt(Zt){for(var dr=0;dr<Zt.length;dr++){var Wr=Zt[dr],mn=180-(Wr.y+we)*360/re;Zt[dr]=[(Wr.x+de)*360/re-180,360/Math.PI*Math.atan(Math.exp(mn*Math.PI/180))-90]}}switch(this.type){case 1:var Nt=[];for(at=0;at<ke.length;at++)Nt[at]=ke[at][0];ke=Nt,bt(ke);break;case 2:for(at=0;at<ke.length;at++)bt(ke[at]);break;case 3:for(ke=$m(ke),at=0;at<ke.length;at++)for(pt=0;pt<ke[at].length;pt++)bt(ke[at][pt]);break}ke.length===1?ke=ke[0]:Ne="Multi"+Ne;var er={type:"Feature",geometry:{type:Ne,coordinates:ke},properties:this.properties};return"id"in this&&(er.id=this.id),er};function $m(E){var C=E.length;if(C<=1)return[E];for(var H=[],re,de,we=0;we<C;we++){var ke=qm(E[we]);ke!==0&&(de===void 0&&(de=ke<0),de===ke<0?(re&&H.push(re),re=[E[we]]):re.push(E[we]))}return re&&H.push(re),H}function qm(E){for(var C=0,H=0,re=E.length,de=re-1,we,ke;H<re;de=H++)we=E[H],ke=E[de],C+=(ke.x-we.x)*(we.y+ke.y);return C}var Ev=Cv;function Cv(E,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(e1,this,C),this.length=this._features.length}function e1(E,C,H){E===15?C.version=H.readVarint():E===1?C.name=H.readString():E===5?C.extent=H.readVarint():E===2?C._features.push(H.pos):E===3?C._keys.push(H.readString()):E===4&&C._values.push(t1(H))}function t1(E){for(var C=null,H=E.readVarint()+E.pos;E.pos<H;){var re=E.readVarint()>>3;C=re===1?E.readString():re===2?E.readFloat():re===3?E.readDouble():re===4?E.readVarint64():re===5?E.readVarint():re===6?E.readSVarint():re===7?E.readBoolean():null}return C}Cv.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var C=this._pbf.readVarint()+this._pbf.pos;return new Ld(this._pbf,C,this.extent,this._keys,this._values)};var Pd=hg;function hg(E,C){this.layers=E.readFields(r1,{},C)}function r1(E,C,H){if(E===3){var re=new Ev(H,H.readVarint()+H.pos);re.length&&(C[re.name]=re)}}var n1=Pd,a1=Ld,i1=Ev,Uh={VectorTile:n1,VectorTileFeature:a1,VectorTileLayer:i1},o1=Uh.VectorTileFeature.types,s1=500,Rd=Math.pow(2,13);function Lv(E,C,H,re,de,we,ke,Ne){E.emplaceBack(C,H,Math.floor(re*Rd)*2+ke,de*Rd*2,we*Rd*2,Math.round(Ne))}var Qf=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(H){return H.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new Ks,this.indexArray=new hu,this.programConfigurations=new _i(Cd,C.layers,C.zoom),this.segments=new Z,this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};Qf.prototype.populate=function(C,H,re){this.features=[],this.hasPattern=Sd("fill-extrusion",this.layers,H);for(var de=0,we=C;de<we.length;de+=1){var ke=we[de],Ne=ke.feature,at=ke.id,pt=ke.index,bt=ke.sourceLayerIndex,Nt=this.layers[0]._featureFilter.needGeometry,er={type:Ne.type,id:at,properties:Ne.properties,geometry:Nt?Ao(Ne):[]};if(!!this.layers[0]._featureFilter.filter(new Si(this.zoom),er,re)){var Zt={id:at,sourceLayerIndex:bt,index:pt,geometry:Nt?er.geometry:Ao(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};typeof Ne.id!="undefined"&&(Zt.id=Ne.id),this.hasPattern?this.features.push(kd("fill-extrusion",this.layers,Zt,this.zoom,H)):this.addFeature(Zt,Zt.geometry,pt,re,{}),H.featureIndex.insert(Ne,Zt.geometry,pt,bt,this.index,!0)}}},Qf.prototype.addFeatures=function(C,H,re){for(var de=0,we=this.features;de<we.length;de+=1){var ke=we[de],Ne=ke.geometry;this.addFeature(ke,Ne,ke.index,H,re)}},Qf.prototype.update=function(C,H,re){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,H,this.stateDependentLayers,re)},Qf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qf.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Cd),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Qf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qf.prototype.addFeature=function(C,H,re,de,we){for(var ke=0,Ne=Md(H,s1);ke<Ne.length;ke+=1){for(var at=Ne[ke],pt=0,bt=0,Nt=at;bt<Nt.length;bt+=1){var er=Nt[bt];pt+=er.length}for(var Zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),dr=0,Wr=at;dr<Wr.length;dr+=1){var mn=Wr[dr];if(mn.length!==0&&!u1(mn))for(var un=0,Nn=0;Nn<mn.length;Nn++){var Pn=mn[Nn];if(Nn>=1){var Fn=mn[Nn-1];if(!l1(Pn,Fn)){Zt.vertexLength+4>Z.MAX_VERTEX_ARRAY_LENGTH&&(Zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Xn=Pn.sub(Fn)._perp()._unit(),sa=Fn.dist(Pn);un+sa>32768&&(un=0),Lv(this.layoutVertexArray,Pn.x,Pn.y,Xn.x,Xn.y,0,0,un),Lv(this.layoutVertexArray,Pn.x,Pn.y,Xn.x,Xn.y,0,1,un),un+=sa,Lv(this.layoutVertexArray,Fn.x,Fn.y,Xn.x,Xn.y,0,0,un),Lv(this.layoutVertexArray,Fn.x,Fn.y,Xn.x,Xn.y,0,1,un);var ka=Zt.vertexLength;this.indexArray.emplaceBack(ka,ka+2,ka+1),this.indexArray.emplaceBack(ka+1,ka+2,ka+3),Zt.vertexLength+=4,Zt.primitiveLength+=2}}}}if(Zt.vertexLength+pt>Z.MAX_VERTEX_ARRAY_LENGTH&&(Zt=this.segments.prepareSegment(pt,this.layoutVertexArray,this.indexArray)),o1[C.type]==="Polygon"){for(var Aa=[],ai=[],Wa=Zt.vertexLength,Za=0,Ai=at;Za<Ai.length;Za+=1){var Qa=Ai[Za];if(Qa.length!==0){Qa!==at[0]&&ai.push(Aa.length/2);for(var ni=0;ni<Qa.length;ni++){var Pi=Qa[ni];Lv(this.layoutVertexArray,Pi.x,Pi.y,0,0,1,1,0),Aa.push(Pi.x),Aa.push(Pi.y)}}}for(var bi=wd(Aa,ai),fo=0;fo<bi.length;fo+=3)this.indexArray.emplaceBack(Wa+bi[fo],Wa+bi[fo+2],Wa+bi[fo+1]);Zt.primitiveLength+=bi.length/3,Zt.vertexLength+=pt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,re,we,de)},Ue("FillExtrusionBucket",Qf,{omit:["layers","features"]});function l1(E,C){return E.x===C.x&&(E.x<0||E.x>ri)||E.y===C.y&&(E.y<0||E.y>ri)}function u1(E){return E.every(function(C){return C.x<0})||E.every(function(C){return C.x>ri})||E.every(function(C){return C.y<0})||E.every(function(C){return C.y>ri})}var $f=new zo({"fill-extrusion-opacity":new ei(mr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vi(mr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ei(mr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ei(mr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rs(mr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vi(mr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vi(mr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ei(mr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),f1={paint:$f},c1=function(E){function C(H){E.call(this,H,f1)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(re){return new Qf(re)},C.prototype.queryRadius=function(){return Sf(this.paint.get("fill-extrusion-translate"))},C.prototype.is3D=function(){return!0},C.prototype.queryIntersectsFeature=function(re,de,we,ke,Ne,at,pt,bt){var Nt=cf(re,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),at.angle,pt),er=this.paint.get("fill-extrusion-height").evaluate(de,we),Zt=this.paint.get("fill-extrusion-base").evaluate(de,we),dr=Js(Nt,bt,at,0),Wr=Yu(ke,Zt,er,bt),mn=Wr[0],un=Wr[1];return h1(mn,un,dr)},C}(il);function qf(E,C){return E.x*C.x+E.y*C.y}function Wi(E,C){if(E.length===1){for(var H=0,re=C[H++],de;!de||re.equals(de);)if(de=C[H++],!de)return 1/0;for(;H<C.length;H++){var we=C[H],ke=E[0],Ne=de.sub(re),at=we.sub(re),pt=ke.sub(re),bt=qf(Ne,Ne),Nt=qf(Ne,at),er=qf(at,at),Zt=qf(pt,Ne),dr=qf(pt,at),Wr=bt*er-Nt*Nt,mn=(er*Zt-Nt*dr)/Wr,un=(bt*dr-Nt*Zt)/Wr,Nn=1-mn-un,Pn=re.z*Nn+de.z*mn+we.z*un;if(isFinite(Pn))return Pn}return 1/0}else{for(var Fn=1/0,Xn=0,sa=C;Xn<sa.length;Xn+=1){var ka=sa[Xn];Fn=Math.min(Fn,ka.z)}return Fn}}function h1(E,C,H){var re=1/0;ls(H,C)&&(re=Wi(H,C[0]));for(var de=0;de<C.length;de++)for(var we=C[de],ke=E[de],Ne=0;Ne<we.length-1;Ne++){var at=we[Ne],pt=we[Ne+1],bt=ke[Ne],Nt=ke[Ne+1],er=[at,pt,Nt,bt,at];wi(H,er)&&(re=Math.min(re,Wi(H,er)))}return re===1/0?!1:re}function Yu(E,C,H,re){for(var de=[],we=[],ke=re[8]*C,Ne=re[9]*C,at=re[10]*C,pt=re[11]*C,bt=re[8]*H,Nt=re[9]*H,er=re[10]*H,Zt=re[11]*H,dr=0,Wr=E;dr<Wr.length;dr+=1){for(var mn=Wr[dr],un=[],Nn=[],Pn=0,Fn=mn;Pn<Fn.length;Pn+=1){var Xn=Fn[Pn],sa=Xn.x,ka=Xn.y,Aa=re[0]*sa+re[4]*ka+re[12],ai=re[1]*sa+re[5]*ka+re[13],Wa=re[2]*sa+re[6]*ka+re[14],Za=re[3]*sa+re[7]*ka+re[15],Ai=Aa+ke,Qa=ai+Ne,ni=Wa+at,Pi=Za+pt,bi=Aa+bt,fo=ai+Nt,Bo=Wa+er,co=Za+Zt,ho=new f(Ai/Pi,Qa/Pi);ho.z=ni/Pi,un.push(ho);var lo=new f(bi/co,fo/co);lo.z=Bo/co,Nn.push(lo)}de.push(un),we.push(Nn)}return[de,we]}function Js(E,C,H,re){for(var de=[],we=0,ke=E;we<ke.length;we+=1){var Ne=ke[we],at=[Ne.x,Ne.y,re,1];ap(at,at,C),de.push(new f(at[0]/at[3],at[1]/at[3]))}return de}var v1=xs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Ic=v1.members,p1=Uh.VectorTileFeature.types,vg=63,d1=Math.cos(75/2*(Math.PI/180)),g1=15,y1=20,Dd=15,pg=1/2,mc=Math.pow(2,Dd-1)/pg,ql=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(H){return H.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Su,this.indexArray=new hu,this.programConfigurations=new _i(Ic,C.layers,C.zoom),this.segments=new Z,this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};ql.prototype.populate=function(C,H,re){this.hasPattern=Sd("line",this.layers,H);for(var de=this.layers[0].layout.get("line-sort-key"),we=[],ke=0,Ne=C;ke<Ne.length;ke+=1){var at=Ne[ke],pt=at.feature,bt=at.id,Nt=at.index,er=at.sourceLayerIndex,Zt=this.layers[0]._featureFilter.needGeometry,dr={type:pt.type,id:bt,properties:pt.properties,geometry:Zt?Ao(pt):[]};if(!!this.layers[0]._featureFilter.filter(new Si(this.zoom),dr,re)){Zt||(dr.geometry=Ao(pt));var Wr=de?de.evaluate(dr,{},re):void 0,mn={id:bt,properties:pt.properties,type:pt.type,sourceLayerIndex:er,index:Nt,geometry:dr.geometry,patterns:{},sortKey:Wr};we.push(mn)}}de&&we.sort(function(Wa,Za){return Wa.sortKey-Za.sortKey});for(var un=0,Nn=we;un<Nn.length;un+=1){var Pn=Nn[un],Fn=Pn,Xn=Fn.geometry,sa=Fn.index,ka=Fn.sourceLayerIndex;if(this.hasPattern){var Aa=kd("line",this.layers,Pn,this.zoom,H);this.patternFeatures.push(Aa)}else this.addFeature(Pn,Xn,sa,re,{});var ai=C[sa].feature;H.featureIndex.insert(ai,Xn,sa,ka,this.index)}},ql.prototype.update=function(C,H,re){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,H,this.stateDependentLayers,re)},ql.prototype.addFeatures=function(C,H,re){for(var de=0,we=this.patternFeatures;de<we.length;de+=1){var ke=we[de];this.addFeature(ke,ke.geometry,ke.index,H,re)}},ql.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ql.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ql.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Ic),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},ql.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ql.prototype.addFeature=function(C,H,re,de,we){for(var ke=this.layers[0].layout,Ne=ke.get("line-join").evaluate(C,{}),at=ke.get("line-cap"),pt=ke.get("line-miter-limit"),bt=ke.get("line-round-limit"),Nt=0,er=H;Nt<er.length;Nt+=1){var Zt=er[Nt];this.addLine(Zt,C,Ne,at,pt,bt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,re,we,de)},ql.prototype.addLine=function(C,H,re,de,we,ke){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!H.properties&&H.properties.hasOwnProperty("mapbox_clip_start")&&H.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+H.properties.mapbox_clip_start,this.clipEnd=+H.properties.mapbox_clip_end;for(var Ne=0;Ne<C.length-1;Ne++)this.totalDistance+=C[Ne].dist(C[Ne+1]);this.updateScaledDistance()}for(var at=p1[H.type]==="Polygon",pt=C.length;pt>=2&&C[pt-1].equals(C[pt-2]);)pt--;for(var bt=0;bt<pt-1&&C[bt].equals(C[bt+1]);)bt++;if(!(pt<(at?3:2))){re==="bevel"&&(we=1.05);var Nt=this.overscaling<=16?g1*ri/(512*this.overscaling):0,er=this.segments.prepareSegment(pt*10,this.layoutVertexArray,this.indexArray),Zt,dr=void 0,Wr=void 0,mn=void 0,un=void 0;this.e1=this.e2=-1,at&&(Zt=C[pt-2],un=C[bt].sub(Zt)._unit()._perp());for(var Nn=bt;Nn<pt;Nn++)if(Wr=Nn===pt-1?at?C[bt+1]:void 0:C[Nn+1],!(Wr&&C[Nn].equals(Wr))){un&&(mn=un),Zt&&(dr=Zt),Zt=C[Nn],un=Wr?Wr.sub(Zt)._unit()._perp():mn,mn=mn||un;var Pn=mn.add(un);(Pn.x!==0||Pn.y!==0)&&Pn._unit();var Fn=mn.x*un.x+mn.y*un.y,Xn=Pn.x*un.x+Pn.y*un.y,sa=Xn!==0?1/Xn:1/0,ka=2*Math.sqrt(2-2*Xn),Aa=Xn<d1&&dr&&Wr,ai=mn.x*un.y-mn.y*un.x>0;if(Aa&&Nn>bt){var Wa=Zt.dist(dr);if(Wa>2*Nt){var Za=Zt.sub(Zt.sub(dr)._mult(Nt/Wa)._round());this.updateDistance(dr,Za),this.addCurrentVertex(Za,mn,0,0,er),dr=Za}}var Ai=dr&&Wr,Qa=Ai?re:at?"butt":de;if(Ai&&Qa==="round"&&(sa<ke?Qa="miter":sa<=2&&(Qa="fakeround")),Qa==="miter"&&sa>we&&(Qa="bevel"),Qa==="bevel"&&(sa>2&&(Qa="flipbevel"),sa<we&&(Qa="miter")),dr&&this.updateDistance(dr,Zt),Qa==="miter")Pn._mult(sa),this.addCurrentVertex(Zt,Pn,0,0,er);else if(Qa==="flipbevel"){if(sa>100)Pn=un.mult(-1);else{var ni=sa*mn.add(un).mag()/mn.sub(un).mag();Pn._perp()._mult(ni*(ai?-1:1))}this.addCurrentVertex(Zt,Pn,0,0,er),this.addCurrentVertex(Zt,Pn.mult(-1),0,0,er)}else if(Qa==="bevel"||Qa==="fakeround"){var Pi=-Math.sqrt(sa*sa-1),bi=ai?Pi:0,fo=ai?0:Pi;if(dr&&this.addCurrentVertex(Zt,mn,bi,fo,er),Qa==="fakeround")for(var Bo=Math.round(ka*180/Math.PI/y1),co=1;co<Bo;co++){var ho=co/Bo;if(ho!==.5){var lo=ho-.5,Zo=1.0904+Fn*(-3.2452+Fn*(3.55645-Fn*1.43519)),as=.848013+Fn*(-1.06021+Fn*.215638);ho=ho+ho*lo*(ho-1)*(Zo*lo*lo+as)}var Ss=un.sub(mn)._mult(ho)._add(mn)._unit()._mult(ai?-1:1);this.addHalfVertex(Zt,Ss.x,Ss.y,!1,ai,0,er)}Wr&&this.addCurrentVertex(Zt,un,-bi,-fo,er)}else if(Qa==="butt")this.addCurrentVertex(Zt,Pn,0,0,er);else if(Qa==="square"){var Ns=dr?1:-1;this.addCurrentVertex(Zt,Pn,Ns,Ns,er)}else Qa==="round"&&(dr&&(this.addCurrentVertex(Zt,mn,0,0,er),this.addCurrentVertex(Zt,mn,1,1,er,!0)),Wr&&(this.addCurrentVertex(Zt,un,-1,-1,er,!0),this.addCurrentVertex(Zt,un,0,0,er)));if(Aa&&Nn<pt-1){var Al=Zt.dist(Wr);if(Al>2*Nt){var $s=Zt.add(Wr.sub(Zt)._mult(Nt/Al)._round());this.updateDistance(Zt,$s),this.addCurrentVertex($s,un,0,0,er),Zt=$s}}}}},ql.prototype.addCurrentVertex=function(C,H,re,de,we,ke){ke===void 0&&(ke=!1);var Ne=H.x+H.y*re,at=H.y-H.x*re,pt=-H.x+H.y*de,bt=-H.y-H.x*de;this.addHalfVertex(C,Ne,at,ke,!1,re,we),this.addHalfVertex(C,pt,bt,ke,!0,-de,we),this.distance>mc/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,H,re,de,we,ke))},ql.prototype.addHalfVertex=function(C,H,re,de,we,ke,Ne){var at=C.x,pt=C.y,bt=this.scaledDistance*pg;this.layoutVertexArray.emplaceBack((at<<1)+(de?1:0),(pt<<1)+(we?1:0),Math.round(vg*H)+128,Math.round(vg*re)+128,(ke===0?0:ke<0?-1:1)+1|(bt&63)<<2,bt>>6);var Nt=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Nt),Ne.primitiveLength++),we?this.e2=Nt:this.e1=Nt},ql.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(mc-1):this.distance},ql.prototype.updateDistance=function(C,H){this.distance+=C.dist(H),this.updateScaledDistance()},Ue("LineBucket",ql,{omit:["layers","patternFeatures"]});var cp=new zo({"line-cap":new ei(mr.layout_line["line-cap"]),"line-join":new vi(mr.layout_line["line-join"]),"line-miter-limit":new ei(mr.layout_line["line-miter-limit"]),"line-round-limit":new ei(mr.layout_line["line-round-limit"]),"line-sort-key":new vi(mr.layout_line["line-sort-key"])}),Fs=new zo({"line-opacity":new vi(mr.paint_line["line-opacity"]),"line-color":new vi(mr.paint_line["line-color"]),"line-translate":new ei(mr.paint_line["line-translate"]),"line-translate-anchor":new ei(mr.paint_line["line-translate-anchor"]),"line-width":new vi(mr.paint_line["line-width"]),"line-gap-width":new vi(mr.paint_line["line-gap-width"]),"line-offset":new vi(mr.paint_line["line-offset"]),"line-blur":new vi(mr.paint_line["line-blur"]),"line-dasharray":new Io(mr.paint_line["line-dasharray"]),"line-pattern":new rs(mr.paint_line["line-pattern"]),"line-gradient":new Wo(mr.paint_line["line-gradient"])}),Os={paint:Fs,layout:cp},dg=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(re,de){return de=new Si(Math.floor(de.zoom),{now:de.now,fadeDuration:de.fadeDuration,zoomHistory:de.zoomHistory,transition:de.transition}),E.prototype.possiblyEvaluate.call(this,re,de)},C.prototype.evaluate=function(re,de,we,ke){return de=M({},de,{zoom:Math.floor(de.zoom)}),E.prototype.evaluate.call(this,re,de,we,ke)},C}(vi),gg=new dg(Os.paint.properties["line-width"].specification);gg.useIntegerZoom=!0;var m1=function(E){function C(H){E.call(this,H,Os)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=function(re){re==="line-gradient"&&this._updateGradient()},C.prototype._updateGradient=function(){var re=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=q0(re,"lineProgress"),this.gradientTexture=null},C.prototype.recalculate=function(re,de){E.prototype.recalculate.call(this,re,de),this.paint._values["line-floorwidth"]=gg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,re)},C.prototype.createBucket=function(re){return new ql(re)},C.prototype.queryRadius=function(re){var de=re,we=yg(du("line-width",this,de),du("line-gap-width",this,de)),ke=du("line-offset",this,de);return we/2+Math.abs(ke)+Sf(this.paint.get("line-translate"))},C.prototype.queryIntersectsFeature=function(re,de,we,ke,Ne,at,pt){var bt=cf(re,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),at.angle,pt),Nt=pt/2*yg(this.paint.get("line-width").evaluate(de,we),this.paint.get("line-gap-width").evaluate(de,we)),er=this.paint.get("line-offset").evaluate(de,we);return er&&(ke=x1(ke,er*pt)),Ms(bt,ke,Nt)},C.prototype.isTileClipped=function(){return!0},C}(il);function yg(E,C){return C>0?C+2*E:E}function x1(E,C){for(var H=[],re=new f(0,0),de=0;de<E.length;de++){for(var we=E[de],ke=[],Ne=0;Ne<we.length;Ne++){var at=we[Ne-1],pt=we[Ne],bt=we[Ne+1],Nt=Ne===0?re:pt.sub(at)._unit()._perp(),er=Ne===we.length-1?re:bt.sub(pt)._unit()._perp(),Zt=Nt._add(er)._unit(),dr=Zt.x*er.x+Zt.y*er.y;Zt._mult(1/dr),ke.push(Zt._mult(C)._add(pt))}H.push(ke)}return H}var Id=xs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),b1=xs([{name:"a_projected_pos",components:3,type:"Float32"}],4);xs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var mg=xs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);xs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Hh=xs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),zd=xs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);xs([{name:"triangle",components:3,type:"Uint16"}]),xs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xs([{type:"Float32",name:"offsetX"}]),xs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function _1(E,C,H){var re=C.layout.get("text-transform").evaluate(H,{});return re==="uppercase"?E=E.toLocaleUpperCase():re==="lowercase"&&(E=E.toLocaleLowerCase()),pi.applyArabicShaping&&(E=pi.applyArabicShaping(E)),E}function xg(E,C,H){return E.sections.forEach(function(re){re.text=_1(re.text,C,H)}),E}function hp(E){var C={},H={},re=[],de=0;function we(un){re.push(E[un]),de++}function ke(un,Nn,Pn){var Fn=H[un];return delete H[un],H[Nn]=Fn,re[Fn].geometry[0].pop(),re[Fn].geometry[0]=re[Fn].geometry[0].concat(Pn[0]),Fn}function Ne(un,Nn,Pn){var Fn=C[Nn];return delete C[Nn],C[un]=Fn,re[Fn].geometry[0].shift(),re[Fn].geometry[0]=Pn[0].concat(re[Fn].geometry[0]),Fn}function at(un,Nn,Pn){var Fn=Pn?Nn[0][Nn[0].length-1]:Nn[0][0];return un+":"+Fn.x+":"+Fn.y}for(var pt=0;pt<E.length;pt++){var bt=E[pt],Nt=bt.geometry,er=bt.text?bt.text.toString():null;if(!er){we(pt);continue}var Zt=at(er,Nt),dr=at(er,Nt,!0);if(Zt in H&&dr in C&&H[Zt]!==C[dr]){var Wr=Ne(Zt,dr,Nt),mn=ke(Zt,dr,re[Wr].geometry);delete C[Zt],delete H[dr],H[at(er,re[mn].geometry,!0)]=mn,re[Wr].geometry=null}else Zt in H?ke(Zt,dr,Nt):dr in C?Ne(Zt,dr,Nt):(we(pt),C[Zt]=de-1,H[dr]=de-1)}return re.filter(function(un){return un.geometry})}var eu={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function Vh(E){for(var C="",H=0;H<E.length;H++){var re=E.charCodeAt(H+1)||null,de=E.charCodeAt(H-1)||null,we=(!re||!gn(re)||eu[E[H+1]])&&(!de||!gn(de)||eu[E[H-1]]);we&&eu[E[H]]?C+=eu[E[H]]:C+=E[H]}return C}var sl=24,w1=function(E,C,H,re,de){var we,ke,Ne=de*8-re-1,at=(1<<Ne)-1,pt=at>>1,bt=-7,Nt=H?de-1:0,er=H?-1:1,Zt=E[C+Nt];for(Nt+=er,we=Zt&(1<<-bt)-1,Zt>>=-bt,bt+=Ne;bt>0;we=we*256+E[C+Nt],Nt+=er,bt-=8);for(ke=we&(1<<-bt)-1,we>>=-bt,bt+=re;bt>0;ke=ke*256+E[C+Nt],Nt+=er,bt-=8);if(we===0)we=1-pt;else{if(we===at)return ke?NaN:(Zt?-1:1)*(1/0);ke=ke+Math.pow(2,re),we=we-pt}return(Zt?-1:1)*ke*Math.pow(2,we-re)},T1=function(E,C,H,re,de,we){var ke,Ne,at,pt=we*8-de-1,bt=(1<<pt)-1,Nt=bt>>1,er=de===23?Math.pow(2,-24)-Math.pow(2,-77):0,Zt=re?0:we-1,dr=re?1:-1,Wr=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Ne=isNaN(C)?1:0,ke=bt):(ke=Math.floor(Math.log(C)/Math.LN2),C*(at=Math.pow(2,-ke))<1&&(ke--,at*=2),ke+Nt>=1?C+=er/at:C+=er*Math.pow(2,1-Nt),C*at>=2&&(ke++,at/=2),ke+Nt>=bt?(Ne=0,ke=bt):ke+Nt>=1?(Ne=(C*at-1)*Math.pow(2,de),ke=ke+Nt):(Ne=C*Math.pow(2,Nt-1)*Math.pow(2,de),ke=0));de>=8;E[H+Zt]=Ne&255,Zt+=dr,Ne/=256,de-=8);for(ke=ke<<de|Ne,pt+=de;pt>0;E[H+Zt]=ke&255,Zt+=dr,ke/=256,pt-=8);E[H+Zt-dr]|=Wr*128},vp={read:w1,write:T1},pp=No;function No(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}No.Varint=0,No.Fixed64=1,No.Bytes=2,No.Fixed32=5;var ec=(1<<16)*(1<<16),$i=1/ec,bg=12,hf=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");No.prototype={destroy:function(){this.buf=null},readFields:function(E,C,H){for(H=H||this.length;this.pos<H;){var re=this.readVarint(),de=re>>3,we=this.pos;this.type=re&7,E(de,C,this),this.pos===we&&this.skip(re)}return C},readMessage:function(E,C){return this.readFields(E,C,this.readVarint()+this.pos)},readFixed32:function(){var E=gp(this.buf,this.pos);return this.pos+=4,E},readSFixed32:function(){var E=Ag(this.buf,this.pos);return this.pos+=4,E},readFixed64:function(){var E=gp(this.buf,this.pos)+gp(this.buf,this.pos+4)*ec;return this.pos+=8,E},readSFixed64:function(){var E=gp(this.buf,this.pos)+Ag(this.buf,this.pos+4)*ec;return this.pos+=8,E},readFloat:function(){var E=vp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,E},readDouble:function(){var E=vp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,E},readVarint:function(E){var C=this.buf,H,re;return re=C[this.pos++],H=re&127,re<128||(re=C[this.pos++],H|=(re&127)<<7,re<128)||(re=C[this.pos++],H|=(re&127)<<14,re<128)||(re=C[this.pos++],H|=(re&127)<<21,re<128)?H:(re=C[this.pos],H|=(re&15)<<28,_g(H,E,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var E=this.readVarint();return E%2==1?(E+1)/-2:E/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var E=this.readVarint()+this.pos,C=this.pos;return this.pos=E,E-C>=bg&&hf?I1(this.buf,C,E):Fd(this.buf,C,E)},readBytes:function(){var E=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,E);return this.pos=E,C},readPackedVarint:function(E,C){if(this.type!==No.Bytes)return E.push(this.readVarint(C));var H=zc(this);for(E=E||[];this.pos<H;)E.push(this.readVarint(C));return E},readPackedSVarint:function(E){if(this.type!==No.Bytes)return E.push(this.readSVarint());var C=zc(this);for(E=E||[];this.pos<C;)E.push(this.readSVarint());return E},readPackedBoolean:function(E){if(this.type!==No.Bytes)return E.push(this.readBoolean());var C=zc(this);for(E=E||[];this.pos<C;)E.push(this.readBoolean());return E},readPackedFloat:function(E){if(this.type!==No.Bytes)return E.push(this.readFloat());var C=zc(this);for(E=E||[];this.pos<C;)E.push(this.readFloat());return E},readPackedDouble:function(E){if(this.type!==No.Bytes)return E.push(this.readDouble());var C=zc(this);for(E=E||[];this.pos<C;)E.push(this.readDouble());return E},readPackedFixed32:function(E){if(this.type!==No.Bytes)return E.push(this.readFixed32());var C=zc(this);for(E=E||[];this.pos<C;)E.push(this.readFixed32());return E},readPackedSFixed32:function(E){if(this.type!==No.Bytes)return E.push(this.readSFixed32());var C=zc(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed32());return E},readPackedFixed64:function(E){if(this.type!==No.Bytes)return E.push(this.readFixed64());var C=zc(this);for(E=E||[];this.pos<C;)E.push(this.readFixed64());return E},readPackedSFixed64:function(E){if(this.type!==No.Bytes)return E.push(this.readSFixed64());var C=zc(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed64());return E},skip:function(E){var C=E&7;if(C===No.Varint)for(;this.buf[this.pos++]>127;);else if(C===No.Bytes)this.pos=this.readVarint()+this.pos;else if(C===No.Fixed32)this.pos+=4;else if(C===No.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(E,C){this.writeVarint(E<<3|C)},realloc:function(E){for(var C=this.length||16;C<this.pos+E;)C*=2;if(C!==this.length){var H=new Uint8Array(C);H.set(this.buf),this.buf=H,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(E){this.realloc(4),Gh(this.buf,E,this.pos),this.pos+=4},writeSFixed32:function(E){this.realloc(4),Gh(this.buf,E,this.pos),this.pos+=4},writeFixed64:function(E){this.realloc(8),Gh(this.buf,E&-1,this.pos),Gh(this.buf,Math.floor(E*$i),this.pos+4),this.pos+=8},writeSFixed64:function(E){this.realloc(8),Gh(this.buf,E&-1,this.pos),Gh(this.buf,Math.floor(E*$i),this.pos+4),this.pos+=8},writeVarint:function(E){if(E=+E||0,E>268435455||E<0){A1(E,this);return}this.realloc(4),this.buf[this.pos++]=E&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=E>>>7&127)))},writeSVarint:function(E){this.writeVarint(E<0?-E*2-1:E*2)},writeBoolean:function(E){this.writeVarint(Boolean(E))},writeString:function(E){E=String(E),this.realloc(E.length*4),this.pos++;var C=this.pos;this.pos=Od(this.buf,E,this.pos);var H=this.pos-C;H>=128&&Tg(C,H,this),this.pos=C-1,this.writeVarint(H),this.pos+=H},writeFloat:function(E){this.realloc(4),vp.write(this.buf,E,this.pos,!0,23,4),this.pos+=4},writeDouble:function(E){this.realloc(8),vp.write(this.buf,E,this.pos,!0,52,8),this.pos+=8},writeBytes:function(E){var C=E.length;this.writeVarint(C),this.realloc(C);for(var H=0;H<C;H++)this.buf[this.pos++]=E[H]},writeRawMessage:function(E,C){this.pos++;var H=this.pos;E(C,this);var re=this.pos-H;re>=128&&Tg(H,re,this),this.pos=H-1,this.writeVarint(re),this.pos+=re},writeMessage:function(E,C,H){this.writeTag(E,No.Bytes),this.writeRawMessage(C,H)},writePackedVarint:function(E,C){C.length&&this.writeMessage(E,M1,C)},writePackedSVarint:function(E,C){C.length&&this.writeMessage(E,S1,C)},writePackedBoolean:function(E,C){C.length&&this.writeMessage(E,C1,C)},writePackedFloat:function(E,C){C.length&&this.writeMessage(E,k1,C)},writePackedDouble:function(E,C){C.length&&this.writeMessage(E,E1,C)},writePackedFixed32:function(E,C){C.length&&this.writeMessage(E,L1,C)},writePackedSFixed32:function(E,C){C.length&&this.writeMessage(E,P1,C)},writePackedFixed64:function(E,C){C.length&&this.writeMessage(E,R1,C)},writePackedSFixed64:function(E,C){C.length&&this.writeMessage(E,D1,C)},writeBytesField:function(E,C){this.writeTag(E,No.Bytes),this.writeBytes(C)},writeFixed32Field:function(E,C){this.writeTag(E,No.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(E,C){this.writeTag(E,No.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(E,C){this.writeTag(E,No.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(E,C){this.writeTag(E,No.Fixed64),this.writeSFixed64(C)},writeVarintField:function(E,C){this.writeTag(E,No.Varint),this.writeVarint(C)},writeSVarintField:function(E,C){this.writeTag(E,No.Varint),this.writeSVarint(C)},writeStringField:function(E,C){this.writeTag(E,No.Bytes),this.writeString(C)},writeFloatField:function(E,C){this.writeTag(E,No.Fixed32),this.writeFloat(C)},writeDoubleField:function(E,C){this.writeTag(E,No.Fixed64),this.writeDouble(C)},writeBooleanField:function(E,C){this.writeVarintField(E,Boolean(C))}};function _g(E,C,H){var re=H.buf,de,we;if(we=re[H.pos++],de=(we&112)>>4,we<128||(we=re[H.pos++],de|=(we&127)<<3,we<128)||(we=re[H.pos++],de|=(we&127)<<10,we<128)||(we=re[H.pos++],de|=(we&127)<<17,we<128)||(we=re[H.pos++],de|=(we&127)<<24,we<128)||(we=re[H.pos++],de|=(we&1)<<31,we<128))return ko(E,de,C);throw new Error("Expected varint not more than 10 bytes")}function zc(E){return E.type===No.Bytes?E.readVarint()+E.pos:E.pos+1}function ko(E,C,H){return H?C*4294967296+(E>>>0):(C>>>0)*4294967296+(E>>>0)}function A1(E,C){var H,re;if(E>=0?(H=E%4294967296|0,re=E/4294967296|0):(H=~(-E%4294967296),re=~(-E/4294967296),H^4294967295?H=H+1|0:(H=0,re=re+1|0)),E>=18446744073709552e3||E<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),wg(H,re,C),dp(re,C)}function wg(E,C,H){H.buf[H.pos++]=E&127|128,E>>>=7,H.buf[H.pos++]=E&127|128,E>>>=7,H.buf[H.pos++]=E&127|128,E>>>=7,H.buf[H.pos++]=E&127|128,E>>>=7,H.buf[H.pos]=E&127}function dp(E,C){var H=(E&7)<<4;C.buf[C.pos++]|=H|((E>>>=3)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127)))))}function Tg(E,C,H){var re=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));H.realloc(re);for(var de=H.pos-1;de>=E;de--)H.buf[de+re]=H.buf[de]}function M1(E,C){for(var H=0;H<E.length;H++)C.writeVarint(E[H])}function S1(E,C){for(var H=0;H<E.length;H++)C.writeSVarint(E[H])}function k1(E,C){for(var H=0;H<E.length;H++)C.writeFloat(E[H])}function E1(E,C){for(var H=0;H<E.length;H++)C.writeDouble(E[H])}function C1(E,C){for(var H=0;H<E.length;H++)C.writeBoolean(E[H])}function L1(E,C){for(var H=0;H<E.length;H++)C.writeFixed32(E[H])}function P1(E,C){for(var H=0;H<E.length;H++)C.writeSFixed32(E[H])}function R1(E,C){for(var H=0;H<E.length;H++)C.writeFixed64(E[H])}function D1(E,C){for(var H=0;H<E.length;H++)C.writeSFixed64(E[H])}function gp(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+E[C+3]*16777216}function Gh(E,C,H){E[H]=C,E[H+1]=C>>>8,E[H+2]=C>>>16,E[H+3]=C>>>24}function Ag(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+(E[C+3]<<24)}function Fd(E,C,H){for(var re="",de=C;de<H;){var we=E[de],ke=null,Ne=we>239?4:we>223?3:we>191?2:1;if(de+Ne>H)break;var at,pt,bt;Ne===1?we<128&&(ke=we):Ne===2?(at=E[de+1],(at&192)==128&&(ke=(we&31)<<6|at&63,ke<=127&&(ke=null))):Ne===3?(at=E[de+1],pt=E[de+2],(at&192)==128&&(pt&192)==128&&(ke=(we&15)<<12|(at&63)<<6|pt&63,(ke<=2047||ke>=55296&&ke<=57343)&&(ke=null))):Ne===4&&(at=E[de+1],pt=E[de+2],bt=E[de+3],(at&192)==128&&(pt&192)==128&&(bt&192)==128&&(ke=(we&15)<<18|(at&63)<<12|(pt&63)<<6|bt&63,(ke<=65535||ke>=1114112)&&(ke=null))),ke===null?(ke=65533,Ne=1):ke>65535&&(ke-=65536,re+=String.fromCharCode(ke>>>10&1023|55296),ke=56320|ke&1023),re+=String.fromCharCode(ke),de+=Ne}return re}function I1(E,C,H){return hf.decode(E.subarray(C,H))}function Od(E,C,H){for(var re=0,de,we;re<C.length;re++){if(de=C.charCodeAt(re),de>55295&&de<57344)if(we)if(de<56320){E[H++]=239,E[H++]=191,E[H++]=189,we=de;continue}else de=we-55296<<10|de-56320|65536,we=null;else{de>56319||re+1===C.length?(E[H++]=239,E[H++]=191,E[H++]=189):we=de;continue}else we&&(E[H++]=239,E[H++]=191,E[H++]=189,we=null);de<128?E[H++]=de:(de<2048?E[H++]=de>>6|192:(de<65536?E[H++]=de>>12|224:(E[H++]=de>>18|240,E[H++]=de>>12&63|128),E[H++]=de>>6&63|128),E[H++]=de&63|128)}return H}var Nd=3;function z1(E,C,H){E===1&&H.readMessage(F1,C)}function F1(E,C,H){if(E===3){var re=H.readMessage(Hl,{}),de=re.id,we=re.bitmap,ke=re.width,Ne=re.height,at=re.left,pt=re.top,bt=re.advance;C.push({id:de,bitmap:new ch({width:ke+2*Nd,height:Ne+2*Nd},we),metrics:{width:ke,height:Ne,left:at,top:pt,advance:bt}})}}function Hl(E,C,H){E===1?C.id=H.readVarint():E===2?C.bitmap=H.readBytes():E===3?C.width=H.readVarint():E===4?C.height=H.readVarint():E===5?C.left=H.readSVarint():E===6?C.top=H.readSVarint():E===7&&(C.advance=H.readVarint())}function Xu(E){return new pp(E).readFields(z1,[])}var Mg=Nd;function Sg(E){for(var C=0,H=0,re=0,de=E;re<de.length;re+=1){var we=de[re];C+=we.w*we.h,H=Math.max(H,we.w)}E.sort(function(mn,un){return un.h-mn.h});for(var ke=Math.max(Math.ceil(Math.sqrt(C/.95)),H),Ne=[{x:0,y:0,w:ke,h:1/0}],at=0,pt=0,bt=0,Nt=E;bt<Nt.length;bt+=1)for(var er=Nt[bt],Zt=Ne.length-1;Zt>=0;Zt--){var dr=Ne[Zt];if(!(er.w>dr.w||er.h>dr.h)){if(er.x=dr.x,er.y=dr.y,pt=Math.max(pt,er.y+er.h),at=Math.max(at,er.x+er.w),er.w===dr.w&&er.h===dr.h){var Wr=Ne.pop();Zt<Ne.length&&(Ne[Zt]=Wr)}else er.h===dr.h?(dr.x+=er.w,dr.w-=er.w):er.w===dr.w?(dr.y+=er.h,dr.h-=er.h):(Ne.push({x:dr.x+er.w,y:dr.y,w:dr.w-er.w,h:er.h}),dr.y+=er.h,dr.h-=er.h);break}}return{w:at,h:pt,fill:C/(at*pt)||0}}var ku=1,Pv=function(C,H){var re=H.pixelRatio,de=H.version,we=H.stretchX,ke=H.stretchY,Ne=H.content;this.paddedRect=C,this.pixelRatio=re,this.stretchX=we,this.stretchY=ke,this.content=Ne,this.version=de},Rv={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Rv.tl.get=function(){return[this.paddedRect.x+ku,this.paddedRect.y+ku]},Rv.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-ku,this.paddedRect.y+this.paddedRect.h-ku]},Rv.tlbr.get=function(){return this.tl.concat(this.br)},Rv.displaySize.get=function(){return[(this.paddedRect.w-ku*2)/this.pixelRatio,(this.paddedRect.h-ku*2)/this.pixelRatio]},Object.defineProperties(Pv.prototype,Rv);var Dv=function(C,H){var re={},de={};this.haveRenderCallbacks=[];var we=[];this.addImages(C,re,we),this.addImages(H,de,we);var ke=Sg(we),Ne=ke.w,at=ke.h,pt=new yu({width:Ne||1,height:at||1});for(var bt in C){var Nt=C[bt],er=re[bt].paddedRect;yu.copy(Nt.data,pt,{x:0,y:0},{x:er.x+ku,y:er.y+ku},Nt.data)}for(var Zt in H){var dr=H[Zt],Wr=de[Zt].paddedRect,mn=Wr.x+ku,un=Wr.y+ku,Nn=dr.data.width,Pn=dr.data.height;yu.copy(dr.data,pt,{x:0,y:0},{x:mn,y:un},dr.data),yu.copy(dr.data,pt,{x:0,y:Pn-1},{x:mn,y:un-1},{width:Nn,height:1}),yu.copy(dr.data,pt,{x:0,y:0},{x:mn,y:un+Pn},{width:Nn,height:1}),yu.copy(dr.data,pt,{x:Nn-1,y:0},{x:mn-1,y:un},{width:1,height:Pn}),yu.copy(dr.data,pt,{x:0,y:0},{x:mn+Nn,y:un},{width:1,height:Pn})}this.image=pt,this.iconPositions=re,this.patternPositions=de};Dv.prototype.addImages=function(C,H,re){for(var de in C){var we=C[de],ke={x:0,y:0,w:we.data.width+2*ku,h:we.data.height+2*ku};re.push(ke),H[de]=new Pv(ke,we),we.hasRenderCallback&&this.haveRenderCallbacks.push(de)}},Dv.prototype.patchUpdatedImages=function(C,H){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var re in C.updatedImages)this.patchUpdatedImage(this.iconPositions[re],C.getImage(re),H),this.patchUpdatedImage(this.patternPositions[re],C.getImage(re),H)},Dv.prototype.patchUpdatedImage=function(C,H,re){if(!(!C||!H)&&C.version!==H.version){C.version=H.version;var de=C.tl,we=de[0],ke=de[1];re.update(H.data,void 0,{x:we,y:ke})}},Ue("ImagePosition",Pv),Ue("ImageAtlas",Dv);var Zu={horizontal:1,vertical:2,horizontalOnly:3},Wh=-17;function O1(E){for(var C=0,H=E;C<H.length;C+=1){var re=H[C];if(re.positionedGlyphs.length!==0)return!1}return!0}var kg=57344,Eg=63743,vh=function(){this.scale=1,this.fontStack="",this.imageName=null};vh.forText=function(C,H){var re=new vh;return re.scale=C||1,re.fontStack=H,re},vh.forImage=function(C){var H=new vh;return H.imageName=C,H};var _l=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};_l.fromFeature=function(C,H){for(var re=new _l,de=0;de<C.sections.length;de++){var we=C.sections[de];we.image?re.addImageSection(we):re.addTextSection(we,H)}return re},_l.prototype.length=function(){return this.text.length},_l.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},_l.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},_l.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},_l.prototype.verticalizePunctuation=function(){this.text=Vh(this.text)},_l.prototype.trim=function(){for(var C=0,H=0;H<this.text.length&&xc[this.text.charCodeAt(H)];H++)C++;for(var re=this.text.length,de=this.text.length-1;de>=0&&de>=C&&xc[this.text.charCodeAt(de)];de--)re--;this.text=this.text.substring(C,re),this.sectionIndex=this.sectionIndex.slice(C,re)},_l.prototype.substring=function(C,H){var re=new _l;return re.text=this.text.substring(C,H),re.sectionIndex=this.sectionIndex.slice(C,H),re.sections=this.sections,re},_l.prototype.toString=function(){return this.text},_l.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(H,re){return Math.max(H,C.sections[re].scale)},0)},_l.prototype.addTextSection=function(C,H){this.text+=C.text,this.sections.push(vh.forText(C.scale,C.fontStack||H));for(var re=this.sections.length-1,de=0;de<C.text.length;++de)this.sectionIndex.push(re)},_l.prototype.addImageSection=function(C){var H=C.image?C.image.name:"";if(H.length===0){U("Can't add FormattedSection with an empty image.");return}var re=this.getNextImageSectionCharCode();if(!re){U("Reached maximum number of images "+(Eg-kg+2));return}this.text+=String.fromCharCode(re),this.sections.push(vh.forImage(H)),this.sectionIndex.push(this.sections.length-1)},_l.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=Eg?null:++this.imageSectionID:(this.imageSectionID=kg,this.imageSectionID)};function N1(E,C){for(var H=[],re=E.text,de=0,we=0,ke=C;we<ke.length;we+=1){var Ne=ke[we];H.push(E.substring(de,Ne)),de=Ne}return de<re.length&&H.push(E.substring(de,re.length)),H}function yp(E,C,H,re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr){var mn=_l.fromFeature(E,de);Nt===Zu.vertical&&mn.verticalizePunctuation();var un,Nn=pi.processBidirectionalText,Pn=pi.processStyledBidirectionalText;if(Nn&&mn.sections.length===1){un=[];for(var Fn=Nn(mn.toString(),mp(mn,pt,we,C,re,Zt,dr)),Xn=0,sa=Fn;Xn<sa.length;Xn+=1){var ka=sa[Xn],Aa=new _l;Aa.text=ka,Aa.sections=mn.sections;for(var ai=0;ai<ka.length;ai++)Aa.sectionIndex.push(0);un.push(Aa)}}else if(Pn){un=[];for(var Wa=Pn(mn.text,mn.sectionIndex,mp(mn,pt,we,C,re,Zt,dr)),Za=0,Ai=Wa;Za<Ai.length;Za+=1){var Qa=Ai[Za],ni=new _l;ni.text=Qa[0],ni.sectionIndex=Qa[1],ni.sections=mn.sections,un.push(ni)}}else un=N1(mn,mp(mn,pt,we,C,re,Zt,dr));var Pi=[],bi={positionedLines:Pi,text:mn.toString(),top:bt[1],bottom:bt[1],left:bt[0],right:bt[0],writingMode:Nt,iconsInText:!1,verticalizable:!1};return H1(bi,C,H,re,un,ke,Ne,at,Nt,pt,er,Wr),O1(Pi)?!1:bi}var xc={};xc[9]=!0,xc[10]=!0,xc[11]=!0,xc[12]=!0,xc[13]=!0,xc[32]=!0;var Eu={};Eu[10]=!0,Eu[32]=!0,Eu[38]=!0,Eu[40]=!0,Eu[41]=!0,Eu[43]=!0,Eu[45]=!0,Eu[47]=!0,Eu[173]=!0,Eu[183]=!0,Eu[8203]=!0,Eu[8208]=!0,Eu[8211]=!0,Eu[8231]=!0;function ph(E,C,H,re,de,we){if(C.imageName){var at=re[C.imageName];return at?at.displaySize[0]*C.scale*sl/we+de:0}else{var ke=H[C.fontStack],Ne=ke&&ke[E];return Ne?Ne.metrics.advance*C.scale+de:0}}function B1(E,C,H,re,de,we){for(var ke=0,Ne=0;Ne<E.length();Ne++){var at=E.getSection(Ne);ke+=ph(E.getCharCode(Ne),at,re,de,C,we)}var pt=Math.max(1,Math.ceil(ke/H));return ke/pt}function Cg(E,C,H,re){var de=Math.pow(E-C,2);return re?E<C?de/2:de*2:de+Math.abs(H)*H}function U1(E,C,H){var re=0;return E===10&&(re-=1e4),H&&(re+=150),(E===40||E===65288)&&(re+=50),(C===41||C===65289)&&(re+=50),re}function Lg(E,C,H,re,de,we){for(var ke=null,Ne=Cg(C,H,de,we),at=0,pt=re;at<pt.length;at+=1){var bt=pt[at],Nt=C-bt.x,er=Cg(Nt,H,de,we)+bt.badness;er<=Ne&&(ke=bt,Ne=er)}return{index:E,x:C,priorBreak:ke,badness:Ne}}function Pg(E){return E?Pg(E.priorBreak).concat(E.index):[]}function mp(E,C,H,re,de,we,ke){if(we!=="point")return[];if(!E)return[];for(var Ne=[],at=B1(E,C,H,re,de,ke),pt=E.text.indexOf("\u200B")>=0,bt=0,Nt=0;Nt<E.length();Nt++){var er=E.getSection(Nt),Zt=E.getCharCode(Nt);if(xc[Zt]||(bt+=ph(Zt,er,re,de,C,ke)),Nt<E.length()-1){var dr=Rr(Zt);(Eu[Zt]||dr||er.imageName)&&Ne.push(Lg(Nt+1,bt,at,Ne,U1(Zt,E.getCharCode(Nt+1),dr&&pt),!1))}}return Pg(Lg(E.length(),bt,at,Ne,0,!0))}function xp(E){var C=.5,H=.5;switch(E){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(E){case"bottom":case"bottom-right":case"bottom-left":H=1;break;case"top":case"top-right":case"top-left":H=0;break}return{horizontalAlign:C,verticalAlign:H}}function H1(E,C,H,re,de,we,ke,Ne,at,pt,bt,Nt){for(var er=0,Zt=Wh,dr=0,Wr=0,mn=Ne==="right"?1:Ne==="left"?0:.5,un=0,Nn=0,Pn=de;Nn<Pn.length;Nn+=1){var Fn=Pn[Nn];Fn.trim();var Xn=Fn.getMaxScale(),sa=(Xn-1)*sl,ka={positionedGlyphs:[],lineOffset:0};E.positionedLines[un]=ka;var Aa=ka.positionedGlyphs,ai=0;if(!Fn.length()){Zt+=we,++un;continue}for(var Wa=0;Wa<Fn.length();Wa++){var Za=Fn.getSection(Wa),Ai=Fn.getSectionIndex(Wa),Qa=Fn.getCharCode(Wa),ni=0,Pi=null,bi=null,fo=null,Bo=sl,co=!(at===Zu.horizontal||!bt&&!Zr(Qa)||bt&&(xc[Qa]||yn(Qa)));if(Za.imageName){var Ss=re[Za.imageName];if(!Ss)continue;fo=Za.imageName,E.iconsInText=E.iconsInText||!0,bi=Ss.paddedRect;var Ns=Ss.displaySize;Za.scale=Za.scale*sl/Nt,Pi={width:Ns[0],height:Ns[1],left:ku,top:-Mg,advance:co?Ns[1]:Ns[0]};var Al=sl-Ns[1]*Za.scale;ni=sa+Al,Bo=Pi.advance;var $s=co?Ns[0]*Za.scale-sl*Xn:Ns[1]*Za.scale-sl*Xn;$s>0&&$s>ai&&(ai=$s)}else{var ho=H[Za.fontStack],lo=ho&&ho[Qa];if(lo&&lo.rect)bi=lo.rect,Pi=lo.metrics;else{var Zo=C[Za.fontStack],as=Zo&&Zo[Qa];if(!as)continue;Pi=as.metrics}ni=(Xn-Za.scale)*sl}co?(E.verticalizable=!0,Aa.push({glyph:Qa,imageName:fo,x:er,y:Zt+ni,vertical:co,scale:Za.scale,fontStack:Za.fontStack,sectionIndex:Ai,metrics:Pi,rect:bi}),er+=Bo*Za.scale+pt):(Aa.push({glyph:Qa,imageName:fo,x:er,y:Zt+ni,vertical:co,scale:Za.scale,fontStack:Za.fontStack,sectionIndex:Ai,metrics:Pi,rect:bi}),er+=Pi.advance*Za.scale+pt)}if(Aa.length!==0){var xu=er-pt;dr=Math.max(xu,dr),V1(Aa,0,Aa.length-1,mn,ai)}er=0;var bu=we*Xn+ai;ka.lineOffset=Math.max(ai,sa),Zt+=bu,Wr=Math.max(bu,Wr),++un}var Ml=Zt-Wh,Cu=xp(ke),Lu=Cu.horizontalAlign,ll=Cu.verticalAlign;G1(E.positionedLines,mn,Lu,ll,dr,Wr,we,Ml,de.length),E.top+=-ll*Ml,E.bottom=E.top+Ml,E.left+=-Lu*dr,E.right=E.left+dr}function V1(E,C,H,re,de){if(!(!re&&!de))for(var we=E[H],ke=we.metrics.advance*we.scale,Ne=(E[H].x+ke)*re,at=C;at<=H;at++)E[at].x-=Ne,E[at].y+=de}function G1(E,C,H,re,de,we,ke,Ne,at){var pt=(C-H)*de,bt=0;we!==ke?bt=-Ne*re-Wh:bt=(-re*at+.5)*ke;for(var Nt=0,er=E;Nt<er.length;Nt+=1)for(var Zt=er[Nt],dr=0,Wr=Zt.positionedGlyphs;dr<Wr.length;dr+=1){var mn=Wr[dr];mn.x+=pt,mn.y+=bt}}function W1(E,C,H){var re=xp(H),de=re.horizontalAlign,we=re.verticalAlign,ke=C[0],Ne=C[1],at=ke-E.displaySize[0]*de,pt=at+E.displaySize[0],bt=Ne-E.displaySize[1]*we,Nt=bt+E.displaySize[1];return{image:E,top:bt,bottom:Nt,left:at,right:pt}}function Rg(E,C,H,re,de,we){var ke=E.image,Ne;if(ke.content){var at=ke.content,pt=ke.pixelRatio||1;Ne=[at[0]/pt,at[1]/pt,ke.displaySize[0]-at[2]/pt,ke.displaySize[1]-at[3]/pt]}var bt=C.left*we,Nt=C.right*we,er,Zt,dr,Wr;H==="width"||H==="both"?(Wr=de[0]+bt-re[3],Zt=de[0]+Nt+re[1]):(Wr=de[0]+(bt+Nt-ke.displaySize[0])/2,Zt=Wr+ke.displaySize[0]);var mn=C.top*we,un=C.bottom*we;return H==="height"||H==="both"?(er=de[1]+mn-re[0],dr=de[1]+un+re[2]):(er=de[1]+(mn+un-ke.displaySize[1])/2,dr=er+ke.displaySize[1]),{image:ke,top:er,right:Zt,bottom:dr,left:Wr,collisionPadding:Ne}}var Yh=function(E){function C(H,re,de,we){E.call(this,H,re),this.angle=de,we!==void 0&&(this.segment=we)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.clone=function(){return new C(this.x,this.y,this.angle,this.segment)},C}(f);Ue("Anchor",Yh);var tc=128;function Bd(E,C){var H=C.expression;if(H.kind==="constant"){var re=H.evaluate(new Si(E+1));return{kind:"constant",layoutSize:re}}else{if(H.kind==="source")return{kind:"source"};for(var de=H.zoomStops,we=H.interpolationType,ke=0;ke<de.length&&de[ke]<=E;)ke++;ke=Math.max(0,ke-1);for(var Ne=ke;Ne<de.length&&de[Ne]<E+1;)Ne++;Ne=Math.min(de.length-1,Ne);var at=de[ke],pt=de[Ne];if(H.kind==="composite")return{kind:"composite",minZoom:at,maxZoom:pt,interpolationType:we};var bt=H.evaluate(new Si(at)),Nt=H.evaluate(new Si(pt));return{kind:"camera",minZoom:at,maxZoom:pt,minSize:bt,maxSize:Nt,interpolationType:we}}}function Dg(E,C,H){var re=C.uSize,de=C.uSizeT,we=H.lowerSize,ke=H.upperSize;return E.kind==="source"?we/tc:E.kind==="composite"?Jo(we/tc,ke/tc,de):re}function Ig(E,C){var H=0,re=0;if(E.kind==="constant")re=E.layoutSize;else if(E.kind!=="source"){var de=E.interpolationType,we=E.minZoom,ke=E.maxZoom,Ne=de?p(Qo.interpolationFactor(de,C,we,ke),0,1):0;E.kind==="camera"?re=Jo(E.minSize,E.maxSize,Ne):H=Ne}return{uSizeT:H,uSize:re}}var Y1=Object.freeze({__proto__:null,getSizeData:Bd,evaluateSizeForFeature:Dg,evaluateSizeForZoom:Ig,SIZE_PACK_FACTOR:tc});function zg(E,C,H,re,de){if(C.segment===void 0)return!0;for(var we=C,ke=C.segment+1,Ne=0;Ne>-H/2;){if(ke--,ke<0)return!1;Ne-=E[ke].dist(we),we=E[ke]}Ne+=E[ke].dist(E[ke+1]),ke++;for(var at=[],pt=0;Ne<H/2;){var bt=E[ke-1],Nt=E[ke],er=E[ke+1];if(!er)return!1;var Zt=bt.angleTo(Nt)-Nt.angleTo(er);for(Zt=Math.abs((Zt+3*Math.PI)%(Math.PI*2)-Math.PI),at.push({distance:Ne,angleDelta:Zt}),pt+=Zt;Ne-at[0].distance>re;)pt-=at.shift().angleDelta;if(pt>de)return!1;ke++,Ne+=Nt.dist(er)}return!0}function Fg(E){for(var C=0,H=0;H<E.length-1;H++)C+=E[H].dist(E[H+1]);return C}function Og(E,C,H){return E?3/5*C*H:0}function Ng(E,C){return Math.max(E?E.right-E.left:0,C?C.right-C.left:0)}function X1(E,C,H,re,de,we){for(var ke=Og(H,de,we),Ne=Ng(H,re)*we,at=0,pt=Fg(E)/2,bt=0;bt<E.length-1;bt++){var Nt=E[bt],er=E[bt+1],Zt=Nt.dist(er);if(at+Zt>pt){var dr=(pt-at)/Zt,Wr=Jo(Nt.x,er.x,dr),mn=Jo(Nt.y,er.y,dr),un=new Yh(Wr,mn,er.angleTo(Nt),bt);return un._round(),!ke||zg(E,un,Ne,ke,C)?un:void 0}at+=Zt}}function Z1(E,C,H,re,de,we,ke,Ne,at){var pt=Og(re,we,ke),bt=Ng(re,de),Nt=bt*ke,er=E[0].x===0||E[0].x===at||E[0].y===0||E[0].y===at;C-Nt<C/4&&(C=Nt+C/4);var Zt=we*2,dr=er?C/2*Ne%C:(bt/2+Zt)*ke*Ne%C;return Bg(E,dr,C,pt,H,Nt,er,!1,at)}function Bg(E,C,H,re,de,we,ke,Ne,at){for(var pt=we/2,bt=Fg(E),Nt=0,er=C-H,Zt=[],dr=0;dr<E.length-1;dr++){for(var Wr=E[dr],mn=E[dr+1],un=Wr.dist(mn),Nn=mn.angleTo(Wr);er+H<Nt+un;){er+=H;var Pn=(er-Nt)/un,Fn=Jo(Wr.x,mn.x,Pn),Xn=Jo(Wr.y,mn.y,Pn);if(Fn>=0&&Fn<at&&Xn>=0&&Xn<at&&er-pt>=0&&er+pt<=bt){var sa=new Yh(Fn,Xn,Nn,dr);sa._round(),(!re||zg(E,sa,we,re,de))&&Zt.push(sa)}}Nt+=un}return!Ne&&!Zt.length&&!ke&&(Zt=Bg(E,Nt/2,H,re,de,we,ke,!0,at)),Zt}function Ug(E,C,H,re,de){for(var we=[],ke=0;ke<E.length;ke++)for(var Ne=E[ke],at=void 0,pt=0;pt<Ne.length-1;pt++){var bt=Ne[pt],Nt=Ne[pt+1];bt.x<C&&Nt.x<C||(bt.x<C?bt=new f(C,bt.y+(Nt.y-bt.y)*((C-bt.x)/(Nt.x-bt.x)))._round():Nt.x<C&&(Nt=new f(C,bt.y+(Nt.y-bt.y)*((C-bt.x)/(Nt.x-bt.x)))._round()),!(bt.y<H&&Nt.y<H)&&(bt.y<H?bt=new f(bt.x+(Nt.x-bt.x)*((H-bt.y)/(Nt.y-bt.y)),H)._round():Nt.y<H&&(Nt=new f(bt.x+(Nt.x-bt.x)*((H-bt.y)/(Nt.y-bt.y)),H)._round()),!(bt.x>=re&&Nt.x>=re)&&(bt.x>=re?bt=new f(re,bt.y+(Nt.y-bt.y)*((re-bt.x)/(Nt.x-bt.x)))._round():Nt.x>=re&&(Nt=new f(re,bt.y+(Nt.y-bt.y)*((re-bt.x)/(Nt.x-bt.x)))._round()),!(bt.y>=de&&Nt.y>=de)&&(bt.y>=de?bt=new f(bt.x+(Nt.x-bt.x)*((de-bt.y)/(Nt.y-bt.y)),de)._round():Nt.y>=de&&(Nt=new f(bt.x+(Nt.x-bt.x)*((de-bt.y)/(Nt.y-bt.y)),de)._round()),(!at||!bt.equals(at[at.length-1]))&&(at=[bt],we.push(at)),at.push(Nt)))))}return we}var Xh=ku;function Hg(E,C,H,re){var de=[],we=E.image,ke=we.pixelRatio,Ne=we.paddedRect.w-2*Xh,at=we.paddedRect.h-2*Xh,pt=E.right-E.left,bt=E.bottom-E.top,Nt=we.stretchX||[[0,Ne]],er=we.stretchY||[[0,at]],Zt=function(ho,lo){return ho+lo[1]-lo[0]},dr=Nt.reduce(Zt,0),Wr=er.reduce(Zt,0),mn=Ne-dr,un=at-Wr,Nn=0,Pn=dr,Fn=0,Xn=Wr,sa=0,ka=mn,Aa=0,ai=un;if(we.content&&re){var Wa=we.content;Nn=bp(Nt,0,Wa[0]),Fn=bp(er,0,Wa[1]),Pn=bp(Nt,Wa[0],Wa[2]),Xn=bp(er,Wa[1],Wa[3]),sa=Wa[0]-Nn,Aa=Wa[1]-Fn,ka=Wa[2]-Wa[0]-Pn,ai=Wa[3]-Wa[1]-Xn}var Za=function(ho,lo,Zo,as){var Ss=_p(ho.stretch-Nn,Pn,pt,E.left),Ns=wp(ho.fixed-sa,ka,ho.stretch,dr),Al=_p(lo.stretch-Fn,Xn,bt,E.top),$s=wp(lo.fixed-Aa,ai,lo.stretch,Wr),xu=_p(Zo.stretch-Nn,Pn,pt,E.left),bu=wp(Zo.fixed-sa,ka,Zo.stretch,dr),Ml=_p(as.stretch-Fn,Xn,bt,E.top),Cu=wp(as.fixed-Aa,ai,as.stretch,Wr),Lu=new f(Ss,Al),ll=new f(xu,Al),Pu=new f(xu,Ml),Ef=new f(Ss,Ml),mh=new f(Ns/ke,$s/ke),Qh=new f(bu/ke,Cu/ke),$h=C*Math.PI/180;if($h){var qh=Math.sin($h),kp=Math.cos($h),_c=[kp,-qh,qh,kp];Lu._matMult(_c),ll._matMult(_c),Ef._matMult(_c),Pu._matMult(_c)}var Kg=ho.stretch+ho.fixed,_x=Zo.stretch+Zo.fixed,Jg=lo.stretch+lo.fixed,wx=as.stretch+as.fixed,rc={x:we.paddedRect.x+Xh+Kg,y:we.paddedRect.y+Xh+Jg,w:_x-Kg,h:wx-Jg},Ep=ka/ke/pt,Qg=ai/ke/bt;return{tl:Lu,tr:ll,bl:Ef,br:Pu,tex:rc,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:mh,pixelOffsetBR:Qh,minFontScaleX:Ep,minFontScaleY:Qg,isSDF:H}};if(!re||!we.stretchX&&!we.stretchY)de.push(Za({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:at+1}));else for(var Ai=Vg(Nt,mn,dr),Qa=Vg(er,un,Wr),ni=0;ni<Ai.length-1;ni++)for(var Pi=Ai[ni],bi=Ai[ni+1],fo=0;fo<Qa.length-1;fo++){var Bo=Qa[fo],co=Qa[fo+1];de.push(Za(Pi,Bo,bi,co))}return de}function bp(E,C,H){for(var re=0,de=0,we=E;de<we.length;de+=1){var ke=we[de];re+=Math.max(C,Math.min(H,ke[1]))-Math.max(C,Math.min(H,ke[0]))}return re}function Vg(E,C,H){for(var re=[{fixed:-Xh,stretch:0}],de=0,we=E;de<we.length;de+=1){var ke=we[de],Ne=ke[0],at=ke[1],pt=re[re.length-1];re.push({fixed:Ne-pt.stretch,stretch:pt.stretch}),re.push({fixed:Ne-pt.stretch,stretch:pt.stretch+(at-Ne)})}return re.push({fixed:C+Xh,stretch:H}),re}function _p(E,C,H,re){return E/C*H+re}function wp(E,C,H,re){return E-C*H/re}function Ud(E,C,H,re,de,we,ke,Ne){for(var at=re.layout.get("text-rotate").evaluate(we,{})*Math.PI/180,pt=[],bt=0,Nt=C.positionedLines;bt<Nt.length;bt+=1)for(var er=Nt[bt],Zt=0,dr=er.positionedGlyphs;Zt<dr.length;Zt+=1){var Wr=dr[Zt];if(!!Wr.rect){var mn=Wr.rect||{},un=1,Nn=Mg+un,Pn=!0,Fn=1,Xn=0,sa=(de||Ne)&&Wr.vertical,ka=Wr.metrics.advance*Wr.scale/2;if(Ne&&C.verticalizable){var Aa=(Wr.scale-1)*sl,ai=(sl-Wr.metrics.width*Wr.scale)/2;Xn=er.lineOffset/2-(Wr.imageName?-ai:Aa)}if(Wr.imageName){var Wa=ke[Wr.imageName];Pn=Wa.sdf,Fn=Wa.pixelRatio,Nn=ku/Fn}var Za=de?[Wr.x+ka,Wr.y]:[0,0],Ai=de?[0,0]:[Wr.x+ka+H[0],Wr.y+H[1]-Xn],Qa=[0,0];sa&&(Qa=Ai,Ai=[0,0]);var ni=(Wr.metrics.left-Nn)*Wr.scale-ka+Ai[0],Pi=(-Wr.metrics.top-Nn)*Wr.scale+Ai[1],bi=ni+mn.w*Wr.scale/Fn,fo=Pi+mn.h*Wr.scale/Fn,Bo=new f(ni,Pi),co=new f(bi,Pi),ho=new f(ni,fo),lo=new f(bi,fo);if(sa){var Zo=new f(-ka,ka-Wh),as=-Math.PI/2,Ss=sl/2-ka,Ns=Wr.imageName?Ss:0,Al=new f(5-Wh-Ss,-Ns),$s=new(Function.prototype.bind.apply(f,[null].concat(Qa)));Bo._rotateAround(as,Zo)._add(Al)._add($s),co._rotateAround(as,Zo)._add(Al)._add($s),ho._rotateAround(as,Zo)._add(Al)._add($s),lo._rotateAround(as,Zo)._add(Al)._add($s)}if(at){var xu=Math.sin(at),bu=Math.cos(at),Ml=[bu,-xu,xu,bu];Bo._matMult(Ml),co._matMult(Ml),ho._matMult(Ml),lo._matMult(Ml)}var Cu=new f(0,0),Lu=new f(0,0),ll=0,Pu=0;pt.push({tl:Bo,tr:co,bl:ho,br:lo,tex:mn,writingMode:C.writingMode,glyphOffset:Za,sectionIndex:Wr.sectionIndex,isSDF:Pn,pixelOffsetTL:Cu,pixelOffsetBR:Lu,minFontScaleX:ll,minFontScaleY:Pu})}}return pt}var Iv=function(C,H,re,de,we,ke,Ne,at,pt,bt){if(this.boxStartIndex=C.length,pt){var Nt=ke.top,er=ke.bottom,Zt=ke.collisionPadding;Zt&&(Nt-=Zt[1],er+=Zt[3]);var dr=er-Nt;dr>0&&(dr=Math.max(10,dr),this.circleDiameter=dr)}else{var Wr=ke.top*Ne-at,mn=ke.bottom*Ne+at,un=ke.left*Ne-at,Nn=ke.right*Ne+at,Pn=ke.collisionPadding;if(Pn&&(un-=Pn[0]*Ne,Wr-=Pn[1]*Ne,Nn+=Pn[2]*Ne,mn+=Pn[3]*Ne),bt){var Fn=new f(un,Wr),Xn=new f(Nn,Wr),sa=new f(un,mn),ka=new f(Nn,mn),Aa=bt*Math.PI/180;Fn._rotate(Aa),Xn._rotate(Aa),sa._rotate(Aa),ka._rotate(Aa),un=Math.min(Fn.x,Xn.x,sa.x,ka.x),Nn=Math.max(Fn.x,Xn.x,sa.x,ka.x),Wr=Math.min(Fn.y,Xn.y,sa.y,ka.y),mn=Math.max(Fn.y,Xn.y,sa.y,ka.y)}C.emplaceBack(H.x,H.y,un,Wr,Nn,mn,re,de,we)}this.boxEndIndex=C.length},dh=function(C,H){if(C===void 0&&(C=[]),H===void 0&&(H=j1),this.data=C,this.length=this.data.length,this.compare=H,this.length>0)for(var re=(this.length>>1)-1;re>=0;re--)this._down(re)};dh.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},dh.prototype.pop=function(){if(this.length!==0){var C=this.data[0],H=this.data.pop();return this.length--,this.length>0&&(this.data[0]=H,this._down(0)),C}},dh.prototype.peek=function(){return this.data[0]},dh.prototype._up=function(C){for(var H=this,re=H.data,de=H.compare,we=re[C];C>0;){var ke=C-1>>1,Ne=re[ke];if(de(we,Ne)>=0)break;re[C]=Ne,C=ke}re[C]=we},dh.prototype._down=function(C){for(var H=this,re=H.data,de=H.compare,we=this.length>>1,ke=re[C];C<we;){var Ne=(C<<1)+1,at=re[Ne],pt=Ne+1;if(pt<this.length&&de(re[pt],at)<0&&(Ne=pt,at=re[pt]),de(at,ke)>=0)break;re[C]=at,C=Ne}re[C]=ke};function j1(E,C){return E<C?-1:E>C?1:0}function K1(E,C,H){C===void 0&&(C=1),H===void 0&&(H=!1);for(var re=1/0,de=1/0,we=-1/0,ke=-1/0,Ne=E[0],at=0;at<Ne.length;at++){var pt=Ne[at];(!at||pt.x<re)&&(re=pt.x),(!at||pt.y<de)&&(de=pt.y),(!at||pt.x>we)&&(we=pt.x),(!at||pt.y>ke)&&(ke=pt.y)}var bt=we-re,Nt=ke-de,er=Math.min(bt,Nt),Zt=er/2,dr=new dh([],J1);if(er===0)return new f(re,de);for(var Wr=re;Wr<we;Wr+=er)for(var mn=de;mn<ke;mn+=er)dr.push(new Jc(Wr+Zt,mn+Zt,Zt,E));for(var un=$1(E),Nn=dr.length;dr.length;){var Pn=dr.pop();(Pn.d>un.d||!un.d)&&(un=Pn,H&&console.log("found best %d after %d probes",Math.round(1e4*Pn.d)/1e4,Nn)),!(Pn.max-un.d<=C)&&(Zt=Pn.h/2,dr.push(new Jc(Pn.p.x-Zt,Pn.p.y-Zt,Zt,E)),dr.push(new Jc(Pn.p.x+Zt,Pn.p.y-Zt,Zt,E)),dr.push(new Jc(Pn.p.x-Zt,Pn.p.y+Zt,Zt,E)),dr.push(new Jc(Pn.p.x+Zt,Pn.p.y+Zt,Zt,E)),Nn+=4)}return H&&(console.log("num probes: "+Nn),console.log("best distance: "+un.d)),un.p}function J1(E,C){return C.max-E.max}function Jc(E,C,H,re){this.p=new f(E,C),this.h=H,this.d=Q1(this.p,re),this.max=this.d+this.h*Math.SQRT2}function Q1(E,C){for(var H=!1,re=1/0,de=0;de<C.length;de++)for(var we=C[de],ke=0,Ne=we.length,at=Ne-1;ke<Ne;at=ke++){var pt=we[ke],bt=we[at];pt.y>E.y!=bt.y>E.y&&E.x<(bt.x-pt.x)*(E.y-pt.y)/(bt.y-pt.y)+pt.x&&(H=!H),re=Math.min(re,Wu(E,pt,bt))}return(H?1:-1)*Math.sqrt(re)}function $1(E){for(var C=0,H=0,re=0,de=E[0],we=0,ke=de.length,Ne=ke-1;we<ke;Ne=we++){var at=de[we],pt=de[Ne],bt=at.x*pt.y-pt.x*at.y;H+=(at.x+pt.x)*bt,re+=(at.y+pt.y)*bt,C+=bt*3}return new Jc(H/C,re/C,0,E)}var Zh=7,mu=Number.POSITIVE_INFINITY;function Tp(E,C){function H(de,we){var ke=0,Ne=0;we<0&&(we=0);var at=we/Math.sqrt(2);switch(de){case"top-right":case"top-left":Ne=at-Zh;break;case"bottom-right":case"bottom-left":Ne=-at+Zh;break;case"bottom":Ne=-we+Zh;break;case"top":Ne=we-Zh;break}switch(de){case"top-right":case"bottom-right":ke=-at;break;case"top-left":case"bottom-left":ke=at;break;case"left":ke=we;break;case"right":ke=-we;break}return[ke,Ne]}function re(de,we,ke){var Ne=0,at=0;switch(we=Math.abs(we),ke=Math.abs(ke),de){case"top-right":case"top-left":case"top":at=ke-Zh;break;case"bottom-right":case"bottom-left":case"bottom":at=-ke+Zh;break}switch(de){case"top-right":case"bottom-right":case"right":Ne=-we;break;case"top-left":case"bottom-left":case"left":Ne=we;break}return[Ne,at]}return C[1]!==mu?re(E,C[0],C[1]):H(E,C[0])}function q1(E,C,H,re,de,we,ke){E.createArrays();var Ne=512*E.overscaling;E.tilePixelRatio=ri/Ne,E.compareText={},E.iconsNeedLinear=!1;var at=E.layers[0].layout,pt=E.layers[0]._unevaluatedLayout._values,bt={};if(E.textSizeData.kind==="composite"){var Nt=E.textSizeData,er=Nt.minZoom,Zt=Nt.maxZoom;bt.compositeTextSizes=[pt["text-size"].possiblyEvaluate(new Si(er),ke),pt["text-size"].possiblyEvaluate(new Si(Zt),ke)]}if(E.iconSizeData.kind==="composite"){var dr=E.iconSizeData,Wr=dr.minZoom,mn=dr.maxZoom;bt.compositeIconSizes=[pt["icon-size"].possiblyEvaluate(new Si(Wr),ke),pt["icon-size"].possiblyEvaluate(new Si(mn),ke)]}bt.layoutTextSize=pt["text-size"].possiblyEvaluate(new Si(E.zoom+1),ke),bt.layoutIconSize=pt["icon-size"].possiblyEvaluate(new Si(E.zoom+1),ke),bt.textMaxSize=pt["text-size"].possiblyEvaluate(new Si(18));for(var un=at.get("text-line-height")*sl,Nn=at.get("text-rotation-alignment")==="map"&&at.get("symbol-placement")!=="point",Pn=at.get("text-keep-upright"),Fn=at.get("text-size"),Xn=function(){var Aa=ka[sa],ai=at.get("text-font").evaluate(Aa,{},ke).join(","),Wa=Fn.evaluate(Aa,{},ke),Za=bt.layoutTextSize.evaluate(Aa,{},ke),Ai=bt.layoutIconSize.evaluate(Aa,{},ke),Qa={horizontal:{},vertical:void 0},ni=Aa.text,Pi=[0,0];if(ni){var bi=ni.toString(),fo=at.get("text-letter-spacing").evaluate(Aa,{},ke)*sl,Bo=an(bi)?fo:0,co=at.get("text-anchor").evaluate(Aa,{},ke),ho=at.get("text-variable-anchor");if(!ho){var lo=at.get("text-radial-offset").evaluate(Aa,{},ke);lo?Pi=Tp(co,[lo*sl,mu]):Pi=at.get("text-offset").evaluate(Aa,{},ke).map(function(mh){return mh*sl})}var Zo=Nn?"center":at.get("text-justify").evaluate(Aa,{},ke),as=at.get("symbol-placement"),Ss=as==="point"?at.get("text-max-width").evaluate(Aa,{},ke)*sl:0,Ns=function(){E.allowVerticalPlacement&&Er(bi)&&(Qa.vertical=yp(ni,C,H,de,ai,Ss,un,co,"left",Bo,Pi,Zu.vertical,!0,as,Za,Wa))};if(!Nn&&ho){for(var Al=Zo==="auto"?ho.map(function(mh){return Hd(mh)}):[Zo],$s=!1,xu=0;xu<Al.length;xu++){var bu=Al[xu];if(!Qa.horizontal[bu])if($s)Qa.horizontal[bu]=Qa.horizontal[0];else{var Ml=yp(ni,C,H,de,ai,Ss,un,"center",bu,Bo,Pi,Zu.horizontal,!1,as,Za,Wa);Ml&&(Qa.horizontal[bu]=Ml,$s=Ml.positionedLines.length===1)}}Ns()}else{Zo==="auto"&&(Zo=Hd(co));var Cu=yp(ni,C,H,de,ai,Ss,un,co,Zo,Bo,Pi,Zu.horizontal,!1,as,Za,Wa);Cu&&(Qa.horizontal[Zo]=Cu),Ns(),Er(bi)&&Nn&&Pn&&(Qa.vertical=yp(ni,C,H,de,ai,Ss,un,co,Zo,Bo,Pi,Zu.vertical,!1,as,Za,Wa))}}var Lu=void 0,ll=!1;if(Aa.icon&&Aa.icon.name){var Pu=re[Aa.icon.name];Pu&&(Lu=W1(de[Aa.icon.name],at.get("icon-offset").evaluate(Aa,{},ke),at.get("icon-anchor").evaluate(Aa,{},ke)),ll=Pu.sdf,E.sdfIcons===void 0?E.sdfIcons=Pu.sdf:E.sdfIcons!==Pu.sdf&&U("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Pu.pixelRatio!==E.pixelRatio||at.get("icon-rotate").constantOr(1)!==0)&&(E.iconsNeedLinear=!0))}var Ef=Ap(Qa.horizontal)||Qa.vertical;E.iconsInText=Ef?Ef.iconsInText:!1,(Ef||Lu)&&ex(E,Aa,Qa,Lu,re,bt,Za,Ai,Pi,ll,ke)},sa=0,ka=E.features;sa<ka.length;sa+=1)Xn();we&&E.generateCollisionDebugBuffers()}function Hd(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ex(E,C,H,re,de,we,ke,Ne,at,pt,bt){var Nt=we.textMaxSize.evaluate(C,{});Nt===void 0&&(Nt=ke);var er=E.layers[0].layout,Zt=er.get("icon-offset").evaluate(C,{},bt),dr=Ap(H.horizontal),Wr=24,mn=ke/Wr,un=E.tilePixelRatio*mn,Nn=E.tilePixelRatio*Nt/Wr,Pn=E.tilePixelRatio*Ne,Fn=E.tilePixelRatio*er.get("symbol-spacing"),Xn=er.get("text-padding")*E.tilePixelRatio,sa=er.get("icon-padding")*E.tilePixelRatio,ka=er.get("text-max-angle")/180*Math.PI,Aa=er.get("text-rotation-alignment")==="map"&&er.get("symbol-placement")!=="point",ai=er.get("icon-rotation-alignment")==="map"&&er.get("symbol-placement")!=="point",Wa=er.get("symbol-placement"),Za=Fn/2,Ai=er.get("icon-text-fit"),Qa;re&&Ai!=="none"&&(E.allowVerticalPlacement&&H.vertical&&(Qa=Rg(re,H.vertical,Ai,er.get("icon-text-fit-padding"),Zt,mn)),dr&&(re=Rg(re,dr,Ai,er.get("icon-text-fit-padding"),Zt,mn)));var ni=function(kp,_c){_c.x<0||_c.x>=ri||_c.y<0||_c.y>=ri||tx(E,_c,kp,H,re,de,Qa,E.layers[0],E.collisionBoxArray,C.index,C.sourceLayerIndex,E.index,un,Xn,Aa,at,Pn,sa,ai,Zt,C,we,pt,bt,ke)};if(Wa==="line")for(var Pi=0,bi=Ug(C.geometry,0,0,ri,ri);Pi<bi.length;Pi+=1)for(var fo=bi[Pi],Bo=Z1(fo,Fn,ka,H.vertical||dr,re,Wr,Nn,E.overscaling,ri),co=0,ho=Bo;co<ho.length;co+=1){var lo=ho[co],Zo=dr;(!Zo||!rx(E,Zo.text,Za,lo))&&ni(fo,lo)}else if(Wa==="line-center")for(var as=0,Ss=C.geometry;as<Ss.length;as+=1){var Ns=Ss[as];if(Ns.length>1){var Al=X1(Ns,ka,H.vertical||dr,re,Wr,Nn);Al&&ni(Ns,Al)}}else if(C.type==="Polygon")for(var $s=0,xu=Md(C.geometry,0);$s<xu.length;$s+=1){var bu=xu[$s],Ml=K1(bu,16);ni(bu[0],new Yh(Ml.x,Ml.y,0))}else if(C.type==="LineString")for(var Cu=0,Lu=C.geometry;Cu<Lu.length;Cu+=1){var ll=Lu[Cu];ni(ll,new Yh(ll[0].x,ll[0].y,0))}else if(C.type==="Point")for(var Pu=0,Ef=C.geometry;Pu<Ef.length;Pu+=1)for(var mh=Ef[Pu],Qh=0,$h=mh;Qh<$h.length;Qh+=1){var qh=$h[Qh];ni([qh],new Yh(qh.x,qh.y,0))}}var zv=255,bc=zv*tc;function Gg(E,C,H,re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr){var Wr=Ud(C,H,Ne,de,we,ke,re,E.allowVerticalPlacement),mn=E.textSizeData,un=null;mn.kind==="source"?(un=[tc*de.layout.get("text-size").evaluate(ke,{})],un[0]>bc&&U(E.layerIds[0]+': Value for "text-size" is >= '+zv+'. Reduce your "text-size".')):mn.kind==="composite"&&(un=[tc*Zt.compositeTextSizes[0].evaluate(ke,{},dr),tc*Zt.compositeTextSizes[1].evaluate(ke,{},dr)],(un[0]>bc||un[1]>bc)&&U(E.layerIds[0]+': Value for "text-size" is >= '+zv+'. Reduce your "text-size".')),E.addSymbols(E.text,Wr,un,Ne,we,ke,pt,C,at.lineStartIndex,at.lineLength,er,dr);for(var Nn=0,Pn=bt;Nn<Pn.length;Nn+=1){var Fn=Pn[Nn];Nt[Fn]=E.text.placedSymbolArray.length-1}return Wr.length*4}function Ap(E){for(var C in E)return E[C];return null}function tx(E,C,H,re,de,we,ke,Ne,at,pt,bt,Nt,er,Zt,dr,Wr,mn,un,Nn,Pn,Fn,Xn,sa,ka,Aa){var ai,Wa=E.addToLineVertexArray(C,H),Za,Ai,Qa,ni,Pi=0,bi=0,fo=0,Bo=0,co=-1,ho=-1,lo={},Zo=De(""),as=0,Ss=0;if(Ne._unevaluatedLayout.getValue("text-radial-offset")===void 0?(ai=Ne.layout.get("text-offset").evaluate(Fn,{},ka).map(function(Wd){return Wd*sl}),as=ai[0],Ss=ai[1]):(as=Ne.layout.get("text-radial-offset").evaluate(Fn,{},ka)*sl,Ss=mu),E.allowVerticalPlacement&&re.vertical){var Ns=Ne.layout.get("text-rotate").evaluate(Fn,{},ka),Al=Ns+90,$s=re.vertical;Qa=new Iv(at,C,pt,bt,Nt,$s,er,Zt,dr,Al),ke&&(ni=new Iv(at,C,pt,bt,Nt,ke,mn,un,dr,Al))}if(de){var xu=Ne.layout.get("icon-rotate").evaluate(Fn,{}),bu=Ne.layout.get("icon-text-fit")!=="none",Ml=Hg(de,xu,sa,bu),Cu=ke?Hg(ke,xu,sa,bu):void 0;Ai=new Iv(at,C,pt,bt,Nt,de,mn,un,!1,xu),Pi=Ml.length*4;var Lu=E.iconSizeData,ll=null;Lu.kind==="source"?(ll=[tc*Ne.layout.get("icon-size").evaluate(Fn,{})],ll[0]>bc&&U(E.layerIds[0]+': Value for "icon-size" is >= '+zv+'. Reduce your "icon-size".')):Lu.kind==="composite"&&(ll=[tc*Xn.compositeIconSizes[0].evaluate(Fn,{},ka),tc*Xn.compositeIconSizes[1].evaluate(Fn,{},ka)],(ll[0]>bc||ll[1]>bc)&&U(E.layerIds[0]+': Value for "icon-size" is >= '+zv+'. Reduce your "icon-size".')),E.addSymbols(E.icon,Ml,ll,Pn,Nn,Fn,!1,C,Wa.lineStartIndex,Wa.lineLength,-1,ka),co=E.icon.placedSymbolArray.length-1,Cu&&(bi=Cu.length*4,E.addSymbols(E.icon,Cu,ll,Pn,Nn,Fn,Zu.vertical,C,Wa.lineStartIndex,Wa.lineLength,-1,ka),ho=E.icon.placedSymbolArray.length-1)}for(var Pu in re.horizontal){var Ef=re.horizontal[Pu];if(!Za){Zo=De(Ef.text);var mh=Ne.layout.get("text-rotate").evaluate(Fn,{},ka);Za=new Iv(at,C,pt,bt,Nt,Ef,er,Zt,dr,mh)}var Qh=Ef.positionedLines.length===1;if(fo+=Gg(E,C,Ef,we,Ne,dr,Fn,Wr,Wa,re.vertical?Zu.horizontal:Zu.horizontalOnly,Qh?Object.keys(re.horizontal):[Pu],lo,co,Xn,ka),Qh)break}re.vertical&&(Bo+=Gg(E,C,re.vertical,we,Ne,dr,Fn,Wr,Wa,Zu.vertical,["vertical"],lo,ho,Xn,ka));var $h=Za?Za.boxStartIndex:E.collisionBoxArray.length,qh=Za?Za.boxEndIndex:E.collisionBoxArray.length,kp=Qa?Qa.boxStartIndex:E.collisionBoxArray.length,_c=Qa?Qa.boxEndIndex:E.collisionBoxArray.length,Kg=Ai?Ai.boxStartIndex:E.collisionBoxArray.length,_x=Ai?Ai.boxEndIndex:E.collisionBoxArray.length,Jg=ni?ni.boxStartIndex:E.collisionBoxArray.length,wx=ni?ni.boxEndIndex:E.collisionBoxArray.length,rc=-1,Ep=function(Wd,T_){return Wd&&Wd.circleDiameter?Math.max(Wd.circleDiameter,T_):T_};rc=Ep(Za,rc),rc=Ep(Qa,rc),rc=Ep(Ai,rc),rc=Ep(ni,rc);var Qg=rc>-1?1:0;Qg&&(rc*=Aa/sl),E.glyphOffsetArray.length>=Mo.MAX_GLYPHS&&U("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fn.sortKey!==void 0&&E.addToSortKeyRanges(E.symbolInstances.length,Fn.sortKey),E.symbolInstances.emplaceBack(C.x,C.y,lo.right>=0?lo.right:-1,lo.center>=0?lo.center:-1,lo.left>=0?lo.left:-1,lo.vertical||-1,co,ho,Zo,$h,qh,kp,_c,Kg,_x,Jg,wx,pt,fo,Bo,Pi,bi,Qg,0,er,as,Ss,rc)}function rx(E,C,H,re){var de=E.compareText;if(!(C in de))de[C]=[];else for(var we=de[C],ke=we.length-1;ke>=0;ke--)if(re.dist(we[ke])<H)return!0;return de[C].push(re),!1}var nx=Uh.VectorTileFeature.types,ax=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fv(E,C,H,re,de,we,ke,Ne,at,pt,bt,Nt,er){var Zt=Ne?Math.min(bc,Math.round(Ne[0])):0,dr=Ne?Math.min(bc,Math.round(Ne[1])):0;E.emplaceBack(C,H,Math.round(re*32),Math.round(de*32),we,ke,(Zt<<1)+(at?1:0),dr,pt*16,bt*16,Nt*256,er*256)}function Vd(E,C,H){E.emplaceBack(C.x,C.y,H),E.emplaceBack(C.x,C.y,H),E.emplaceBack(C.x,C.y,H),E.emplaceBack(C.x,C.y,H)}function ix(E){for(var C=0,H=E.sections;C<H.length;C+=1){var re=H[C];if(ya(re.text))return!0}return!1}var jh=function(C){this.layoutVertexArray=new gc,this.indexArray=new hu,this.programConfigurations=C,this.segments=new Z,this.dynamicLayoutVertexArray=new Gc,this.opacityVertexArray=new yc,this.placedSymbolArray=new Pc};jh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},jh.prototype.upload=function(C,H,re,de){this.isEmpty()||(re&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Id.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,H),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,b1.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,ax,!0),this.opacityVertexBuffer.itemSize=1),(re||de)&&this.programConfigurations.upload(C))},jh.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ue("SymbolBuffers",jh);var gh=function(C,H,re){this.layoutVertexArray=new C,this.layoutAttributes=H,this.indexArray=new re,this.segments=new Z,this.collisionVertexArray=new Jl};gh.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,mg.members,!0)},gh.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ue("CollisionBuffers",gh);var Mo=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(at){return at.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=uh([]),this.placementViewportMatrix=uh([]);var H=this.layers[0],re=H._unevaluatedLayout._values;this.textSizeData=Bd(this.zoom,re["text-size"]),this.iconSizeData=Bd(this.zoom,re["icon-size"]);var de=this.layers[0].layout,we=de.get("symbol-sort-key"),ke=de.get("symbol-z-order");this.sortFeaturesByKey=ke!=="viewport-y"&&we.constantOr(1)!==void 0;var Ne=ke==="viewport-y"||ke==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ne&&(de.get("text-allow-overlap")||de.get("icon-allow-overlap")||de.get("text-ignore-placement")||de.get("icon-ignore-placement")),de.get("symbol-placement")==="point"&&(this.writingModes=de.get("text-writing-mode").map(function(at){return Zu[at]})),this.stateDependentLayerIds=this.layers.filter(function(at){return at.isStateDependent()}).map(function(at){return at.id}),this.sourceID=C.sourceID};Mo.prototype.createArrays=function(){this.text=new jh(new _i(Id.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new jh(new _i(Id.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new Gu,this.lineVertexArray=new Mf,this.symbolInstances=new rp},Mo.prototype.calculateGlyphDependencies=function(C,H,re,de,we){for(var ke=0;ke<C.length;ke++)if(H[C.charCodeAt(ke)]=!0,(re||de)&&we){var Ne=eu[C.charAt(ke)];Ne&&(H[Ne.charCodeAt(0)]=!0)}},Mo.prototype.populate=function(C,H,re){var de=this.layers[0],we=de.layout,ke=we.get("text-font"),Ne=we.get("text-field"),at=we.get("icon-image"),pt=(Ne.value.kind!=="constant"||Ne.value.value instanceof To&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(ke.value.kind!=="constant"||ke.value.value.length>0),bt=at.value.kind!=="constant"||!!at.value.value||Object.keys(at.parameters).length>0,Nt=we.get("symbol-sort-key");if(this.features=[],!(!pt&&!bt)){for(var er=H.iconDependencies,Zt=H.glyphDependencies,dr=H.availableImages,Wr=new Si(this.zoom),mn=0,un=C;mn<un.length;mn+=1){var Nn=un[mn],Pn=Nn.feature,Fn=Nn.id,Xn=Nn.index,sa=Nn.sourceLayerIndex,ka=de._featureFilter.needGeometry,Aa={type:Pn.type,id:Fn,properties:Pn.properties,geometry:ka?Ao(Pn):[]};if(!!de._featureFilter.filter(Wr,Aa,re)){ka||(Aa.geometry=Ao(Pn));var ai=void 0;if(pt){var Wa=de.getValueAndResolveTokens("text-field",Aa,re,dr),Za=To.factory(Wa);ix(Za)&&(this.hasRTLText=!0),(!this.hasRTLText||Xo()==="unavailable"||this.hasRTLText&&pi.isParsed())&&(ai=xg(Za,de,Aa))}var Ai=void 0;if(bt){var Qa=de.getValueAndResolveTokens("icon-image",Aa,re,dr);Qa instanceof os?Ai=Qa:Ai=os.fromString(Qa)}if(!(!ai&&!Ai)){var ni=this.sortFeaturesByKey?Nt.evaluate(Aa,{},re):void 0,Pi={id:Fn,text:ai,icon:Ai,index:Xn,sourceLayerIndex:sa,geometry:Ao(Pn),properties:Pn.properties,type:nx[Pn.type],sortKey:ni};if(this.features.push(Pi),Ai&&(er[Ai.name]=!0),ai){var bi=ke.evaluate(Aa,{},re).join(","),fo=we.get("text-rotation-alignment")==="map"&&we.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Zu.vertical)>=0;for(var Bo=0,co=ai.sections;Bo<co.length;Bo+=1){var ho=co[Bo];if(ho.image)er[ho.image.name]=!0;else{var lo=Er(ai.toString()),Zo=ho.fontStack||bi,as=Zt[Zo]=Zt[Zo]||{};this.calculateGlyphDependencies(ho.text,as,fo,this.allowVerticalPlacement,lo)}}}}}}we.get("symbol-placement")==="line"&&(this.features=hp(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ss,Ns){return Ss.sortKey-Ns.sortKey})}},Mo.prototype.update=function(C,H,re){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,H,this.layers,re),this.icon.programConfigurations.updatePaintArrays(C,H,this.layers,re))},Mo.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Mo.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Mo.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Mo.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Mo.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Mo.prototype.addToLineVertexArray=function(C,H){var re=this.lineVertexArray.length;if(C.segment!==void 0){for(var de=C.dist(H[C.segment+1]),we=C.dist(H[C.segment]),ke={},Ne=C.segment+1;Ne<H.length;Ne++)ke[Ne]={x:H[Ne].x,y:H[Ne].y,tileUnitDistanceFromAnchor:de},Ne<H.length-1&&(de+=H[Ne+1].dist(H[Ne]));for(var at=C.segment||0;at>=0;at--)ke[at]={x:H[at].x,y:H[at].y,tileUnitDistanceFromAnchor:we},at>0&&(we+=H[at-1].dist(H[at]));for(var pt=0;pt<H.length;pt++){var bt=ke[pt];this.lineVertexArray.emplaceBack(bt.x,bt.y,bt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:re,lineLength:this.lineVertexArray.length-re}},Mo.prototype.addSymbols=function(C,H,re,de,we,ke,Ne,at,pt,bt,Nt,er){for(var Zt=C.indexArray,dr=C.layoutVertexArray,Wr=C.segments.prepareSegment(4*H.length,dr,Zt,ke.sortKey),mn=this.glyphOffsetArray.length,un=Wr.vertexLength,Nn=this.allowVerticalPlacement&&Ne===Zu.vertical?Math.PI/2:0,Pn=ke.text&&ke.text.sections,Fn=0;Fn<H.length;Fn++){var Xn=H[Fn],sa=Xn.tl,ka=Xn.tr,Aa=Xn.bl,ai=Xn.br,Wa=Xn.tex,Za=Xn.pixelOffsetTL,Ai=Xn.pixelOffsetBR,Qa=Xn.minFontScaleX,ni=Xn.minFontScaleY,Pi=Xn.glyphOffset,bi=Xn.isSDF,fo=Xn.sectionIndex,Bo=Wr.vertexLength,co=Pi[1];Fv(dr,at.x,at.y,sa.x,co+sa.y,Wa.x,Wa.y,re,bi,Za.x,Za.y,Qa,ni),Fv(dr,at.x,at.y,ka.x,co+ka.y,Wa.x+Wa.w,Wa.y,re,bi,Ai.x,Za.y,Qa,ni),Fv(dr,at.x,at.y,Aa.x,co+Aa.y,Wa.x,Wa.y+Wa.h,re,bi,Za.x,Ai.y,Qa,ni),Fv(dr,at.x,at.y,ai.x,co+ai.y,Wa.x+Wa.w,Wa.y+Wa.h,re,bi,Ai.x,Ai.y,Qa,ni),Vd(C.dynamicLayoutVertexArray,at,Nn),Zt.emplaceBack(Bo,Bo+1,Bo+2),Zt.emplaceBack(Bo+1,Bo+2,Bo+3),Wr.vertexLength+=4,Wr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pi[0]),(Fn===H.length-1||fo!==H[Fn+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(dr.length,ke,ke.index,{},er,Pn&&Pn[fo])}C.placedSymbolArray.emplaceBack(at.x,at.y,mn,this.glyphOffsetArray.length-mn,un,pt,bt,at.segment,re?re[0]:0,re?re[1]:0,de[0],de[1],Ne,0,!1,0,Nt)},Mo.prototype._addCollisionDebugVertex=function(C,H,re,de,we,ke){return H.emplaceBack(0,0),C.emplaceBack(re.x,re.y,de,we,Math.round(ke.x),Math.round(ke.y))},Mo.prototype.addCollisionDebugVertices=function(C,H,re,de,we,ke,Ne){var at=we.segments.prepareSegment(4,we.layoutVertexArray,we.indexArray),pt=at.vertexLength,bt=we.layoutVertexArray,Nt=we.collisionVertexArray,er=Ne.anchorX,Zt=Ne.anchorY;this._addCollisionDebugVertex(bt,Nt,ke,er,Zt,new f(C,H)),this._addCollisionDebugVertex(bt,Nt,ke,er,Zt,new f(re,H)),this._addCollisionDebugVertex(bt,Nt,ke,er,Zt,new f(re,de)),this._addCollisionDebugVertex(bt,Nt,ke,er,Zt,new f(C,de)),at.vertexLength+=4;var dr=we.indexArray;dr.emplaceBack(pt,pt+1),dr.emplaceBack(pt+1,pt+2),dr.emplaceBack(pt+2,pt+3),dr.emplaceBack(pt+3,pt),at.primitiveLength+=4},Mo.prototype.addDebugCollisionBoxes=function(C,H,re,de){for(var we=C;we<H;we++){var ke=this.collisionBoxArray.get(we),Ne=ke.x1,at=ke.y1,pt=ke.x2,bt=ke.y2;this.addCollisionDebugVertices(Ne,at,pt,bt,de?this.textCollisionBox:this.iconCollisionBox,ke.anchorPoint,re)}},Mo.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gh(oh,Hh.members,Yc),this.iconCollisionBox=new gh(oh,Hh.members,Yc);for(var C=0;C<this.symbolInstances.length;C++){var H=this.symbolInstances.get(C);this.addDebugCollisionBoxes(H.textBoxStartIndex,H.textBoxEndIndex,H,!0),this.addDebugCollisionBoxes(H.verticalTextBoxStartIndex,H.verticalTextBoxEndIndex,H,!0),this.addDebugCollisionBoxes(H.iconBoxStartIndex,H.iconBoxEndIndex,H,!1),this.addDebugCollisionBoxes(H.verticalIconBoxStartIndex,H.verticalIconBoxEndIndex,H,!1)}},Mo.prototype._deserializeCollisionBoxesForSymbol=function(C,H,re,de,we,ke,Ne,at,pt){for(var bt={},Nt=H;Nt<re;Nt++){var er=C.get(Nt);bt.textBox={x1:er.x1,y1:er.y1,x2:er.x2,y2:er.y2,anchorPointX:er.anchorPointX,anchorPointY:er.anchorPointY},bt.textFeatureIndex=er.featureIndex;break}for(var Zt=de;Zt<we;Zt++){var dr=C.get(Zt);bt.verticalTextBox={x1:dr.x1,y1:dr.y1,x2:dr.x2,y2:dr.y2,anchorPointX:dr.anchorPointX,anchorPointY:dr.anchorPointY},bt.verticalTextFeatureIndex=dr.featureIndex;break}for(var Wr=ke;Wr<Ne;Wr++){var mn=C.get(Wr);bt.iconBox={x1:mn.x1,y1:mn.y1,x2:mn.x2,y2:mn.y2,anchorPointX:mn.anchorPointX,anchorPointY:mn.anchorPointY},bt.iconFeatureIndex=mn.featureIndex;break}for(var un=at;un<pt;un++){var Nn=C.get(un);bt.verticalIconBox={x1:Nn.x1,y1:Nn.y1,x2:Nn.x2,y2:Nn.y2,anchorPointX:Nn.anchorPointX,anchorPointY:Nn.anchorPointY},bt.verticalIconFeatureIndex=Nn.featureIndex;break}return bt},Mo.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var H=0;H<this.symbolInstances.length;H++){var re=this.symbolInstances.get(H);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,re.textBoxStartIndex,re.textBoxEndIndex,re.verticalTextBoxStartIndex,re.verticalTextBoxEndIndex,re.iconBoxStartIndex,re.iconBoxEndIndex,re.verticalIconBoxStartIndex,re.verticalIconBoxEndIndex))}},Mo.prototype.hasTextData=function(){return this.text.segments.get().length>0},Mo.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Mo.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Mo.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Mo.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Mo.prototype.addIndicesForPlacedSymbol=function(C,H){for(var re=C.placedSymbolArray.get(H),de=re.vertexStartIndex+re.numGlyphs*4,we=re.vertexStartIndex;we<de;we+=4)C.indexArray.emplaceBack(we,we+1,we+2),C.indexArray.emplaceBack(we+1,we+2,we+3)},Mo.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var H=Math.sin(C),re=Math.cos(C),de=[],we=[],ke=[],Ne=0;Ne<this.symbolInstances.length;++Ne){ke.push(Ne);var at=this.symbolInstances.get(Ne);de.push(Math.round(H*at.anchorX+re*at.anchorY)|0),we.push(at.featureIndex)}return ke.sort(function(pt,bt){return de[pt]-de[bt]||we[bt]-we[pt]}),ke},Mo.prototype.addToSortKeyRanges=function(C,H){var re=this.sortKeyRanges[this.sortKeyRanges.length-1];re&&re.sortKey===H?re.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:H,symbolInstanceStart:C,symbolInstanceEnd:C+1})},Mo.prototype.sortFeatures=function(C){var H=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var re=0,de=this.symbolInstanceIndexes;re<de.length;re+=1){var we=de[re],ke=this.symbolInstances.get(we);this.featureSortOrder.push(ke.featureIndex),[ke.rightJustifiedTextSymbolIndex,ke.centerJustifiedTextSymbolIndex,ke.leftJustifiedTextSymbolIndex].forEach(function(Ne,at,pt){Ne>=0&&pt.indexOf(Ne)===at&&H.addIndicesForPlacedSymbol(H.text,Ne)}),ke.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ke.verticalPlacedTextSymbolIndex),ke.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ke.placedIconSymbolIndex),ke.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ke.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ue("SymbolBucket",Mo,{omit:["layers","collisionBoxArray","features","compareText"]}),Mo.MAX_GLYPHS=65535,Mo.addDynamicAttributes=Vd;function ox(E,C){return C.replace(/{([^{}]+)}/g,function(H,re){return re in E?String(E[re]):""})}var sx=new zo({"symbol-placement":new ei(mr.layout_symbol["symbol-placement"]),"symbol-spacing":new ei(mr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ei(mr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vi(mr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ei(mr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ei(mr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ei(mr.layout_symbol["icon-ignore-placement"]),"icon-optional":new ei(mr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ei(mr.layout_symbol["icon-rotation-alignment"]),"icon-size":new vi(mr.layout_symbol["icon-size"]),"icon-text-fit":new ei(mr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ei(mr.layout_symbol["icon-text-fit-padding"]),"icon-image":new vi(mr.layout_symbol["icon-image"]),"icon-rotate":new vi(mr.layout_symbol["icon-rotate"]),"icon-padding":new ei(mr.layout_symbol["icon-padding"]),"icon-keep-upright":new ei(mr.layout_symbol["icon-keep-upright"]),"icon-offset":new vi(mr.layout_symbol["icon-offset"]),"icon-anchor":new vi(mr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ei(mr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ei(mr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ei(mr.layout_symbol["text-rotation-alignment"]),"text-field":new vi(mr.layout_symbol["text-field"]),"text-font":new vi(mr.layout_symbol["text-font"]),"text-size":new vi(mr.layout_symbol["text-size"]),"text-max-width":new vi(mr.layout_symbol["text-max-width"]),"text-line-height":new ei(mr.layout_symbol["text-line-height"]),"text-letter-spacing":new vi(mr.layout_symbol["text-letter-spacing"]),"text-justify":new vi(mr.layout_symbol["text-justify"]),"text-radial-offset":new vi(mr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ei(mr.layout_symbol["text-variable-anchor"]),"text-anchor":new vi(mr.layout_symbol["text-anchor"]),"text-max-angle":new ei(mr.layout_symbol["text-max-angle"]),"text-writing-mode":new ei(mr.layout_symbol["text-writing-mode"]),"text-rotate":new vi(mr.layout_symbol["text-rotate"]),"text-padding":new ei(mr.layout_symbol["text-padding"]),"text-keep-upright":new ei(mr.layout_symbol["text-keep-upright"]),"text-transform":new vi(mr.layout_symbol["text-transform"]),"text-offset":new vi(mr.layout_symbol["text-offset"]),"text-allow-overlap":new ei(mr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ei(mr.layout_symbol["text-ignore-placement"]),"text-optional":new ei(mr.layout_symbol["text-optional"])}),lx=new zo({"icon-opacity":new vi(mr.paint_symbol["icon-opacity"]),"icon-color":new vi(mr.paint_symbol["icon-color"]),"icon-halo-color":new vi(mr.paint_symbol["icon-halo-color"]),"icon-halo-width":new vi(mr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vi(mr.paint_symbol["icon-halo-blur"]),"icon-translate":new ei(mr.paint_symbol["icon-translate"]),"icon-translate-anchor":new ei(mr.paint_symbol["icon-translate-anchor"]),"text-opacity":new vi(mr.paint_symbol["text-opacity"]),"text-color":new vi(mr.paint_symbol["text-color"],{runtimeType:Ma,getOverride:function(E){return E.textColor},hasOverride:function(E){return!!E.textColor}}),"text-halo-color":new vi(mr.paint_symbol["text-halo-color"]),"text-halo-width":new vi(mr.paint_symbol["text-halo-width"]),"text-halo-blur":new vi(mr.paint_symbol["text-halo-blur"]),"text-translate":new ei(mr.paint_symbol["text-translate"]),"text-translate-anchor":new ei(mr.paint_symbol["text-translate-anchor"])}),Gd={paint:lx,layout:sx},Kh=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:Qn,this.defaultValue=C};Kh.prototype.evaluate=function(C){if(C.formattedSection){var H=this.defaultValue.property.overrides;if(H&&H.hasOverride(C.formattedSection))return H.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},Kh.prototype.eachChild=function(C){if(!this.defaultValue.isConstant()){var H=this.defaultValue.value;C(H._styleExpression.expression)}},Kh.prototype.outputDefined=function(){return!1},Kh.prototype.serialize=function(){return null},Ue("FormatSectionOverride",Kh,{omit:["defaultValue"]});var ux=function(E){function C(H){E.call(this,H,Gd)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(re,de){if(E.prototype.recalculate.call(this,re,de),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var we=this.layout.get("text-writing-mode");if(we){for(var ke=[],Ne=0,at=we;Ne<at.length;Ne+=1){var pt=at[Ne];ke.indexOf(pt)<0&&ke.push(pt)}this.layout._values["text-writing-mode"]=ke}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},C.prototype.getValueAndResolveTokens=function(re,de,we,ke){var Ne=this.layout.get(re).evaluate(de,{},we,ke),at=this._unevaluatedLayout._values[re];return!at.isDataDriven()&&!cs(at.value)&&Ne?ox(de.properties,Ne):Ne},C.prototype.createBucket=function(re){return new Mo(re)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype._setPaintOverrides=function(){for(var re=0,de=Gd.paint.overridableProperties;re<de.length;re+=1){var we=de[re];if(!!C.hasPaintOverride(this.layout,we)){var ke=this.paint.get(we),Ne=new Kh(ke),at=new al(Ne,ke.property.specification),pt=null;ke.value.kind==="constant"||ke.value.kind==="source"?pt=new Tf("source",at):pt=new vs("composite",at,ke.value.zoomStops,ke.value._interpolationType),this.paint._values[we]=new xo(ke.property,pt,ke.parameters)}}},C.prototype._handleOverridablePaintPropertyUpdate=function(re,de,we){return!this.layout||de.isDataDriven()||we.isDataDriven()?!1:C.hasPaintOverride(this.layout,re)},C.hasPaintOverride=function(re,de){var we=re.get("text-field"),ke=Gd.paint.properties[de],Ne=!1,at=function(Nt){for(var er=0,Zt=Nt;er<Zt.length;er+=1){var dr=Zt[er];if(ke.overrides&&ke.overrides.hasOverride(dr)){Ne=!0;return}}};if(we.value.kind==="constant"&&we.value.value instanceof To)at(we.value.value.sections);else if(we.value.kind==="source"){var pt=function(Nt){if(!Ne)if(Nt instanceof Co&&no(Nt.value)===Xs){var er=Nt.value;at(er.sections)}else Nt instanceof Vs?at(Nt.sections):Nt.eachChild(pt)},bt=we.value;bt._styleExpression&&pt(bt._styleExpression.expression)}return Ne},C}(il),fx=new zo({"background-color":new ei(mr.paint_background["background-color"]),"background-pattern":new Io(mr.paint_background["background-pattern"]),"background-opacity":new ei(mr.paint_background["background-opacity"])}),cx={paint:fx},hx=function(E){function C(H){E.call(this,H,cx)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(il),vx=new zo({"raster-opacity":new ei(mr.paint_raster["raster-opacity"]),"raster-hue-rotate":new ei(mr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ei(mr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ei(mr.paint_raster["raster-brightness-max"]),"raster-saturation":new ei(mr.paint_raster["raster-saturation"]),"raster-contrast":new ei(mr.paint_raster["raster-contrast"]),"raster-resampling":new ei(mr.paint_raster["raster-resampling"]),"raster-fade-duration":new ei(mr.paint_raster["raster-fade-duration"])}),px={paint:vx},dx=function(E){function C(H){E.call(this,H,px)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(il);function gx(E){var C=[],H=E.id;return H===void 0&&C.push({message:"layers."+H+': missing required property "id"'}),E.render===void 0&&C.push({message:"layers."+H+': missing required method "render"'}),E.renderingMode&&E.renderingMode!=="2d"&&E.renderingMode!=="3d"&&C.push({message:"layers."+H+': property "renderingMode" must be either "2d" or "3d"'}),C}var yx=function(E){function C(H){E.call(this,H,{}),this.implementation=H}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},C.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},C.prototype.recalculate=function(){},C.prototype.updateTransitions=function(){},C.prototype.hasTransition=function(){},C.prototype.serialize=function(){},C.prototype.onAdd=function(re){this.implementation.onAdd&&this.implementation.onAdd(re,re.painter.context.gl)},C.prototype.onRemove=function(re){this.implementation.onRemove&&this.implementation.onRemove(re,re.painter.context.gl)},C}(il),mx={circle:Sm,heatmap:Lm,hillshade:_d,fill:fg,"fill-extrusion":c1,line:m1,symbol:ux,background:hx,raster:dx};function xx(E){return E.type==="custom"?new yx(E):new mx[E.type](E)}var Wg=self.HTMLImageElement,Yg=self.HTMLCanvasElement,Xg=self.HTMLVideoElement,Zg=self.ImageData,Mp=self.ImageBitmap,ce=function(C,H,re,de){this.context=C,this.format=re,this.texture=C.gl.createTexture(),this.update(H,de)};ce.prototype.update=function(C,H,re){var de=C.width,we=C.height,ke=(!this.size||this.size[0]!==de||this.size[1]!==we)&&!re,Ne=this,at=Ne.context,pt=at.gl;if(this.useMipmap=Boolean(H&&H.useMipmap),pt.bindTexture(pt.TEXTURE_2D,this.texture),at.pixelStoreUnpackFlipY.set(!1),at.pixelStoreUnpack.set(1),at.pixelStoreUnpackPremultiplyAlpha.set(this.format===pt.RGBA&&(!H||H.premultiply!==!1)),ke)this.size=[de,we],C instanceof Wg||C instanceof Yg||C instanceof Xg||C instanceof Zg||Mp&&C instanceof Mp?pt.texImage2D(pt.TEXTURE_2D,0,this.format,this.format,pt.UNSIGNED_BYTE,C):pt.texImage2D(pt.TEXTURE_2D,0,this.format,de,we,0,this.format,pt.UNSIGNED_BYTE,C.data);else{var bt=re||{x:0,y:0},Nt=bt.x,er=bt.y;C instanceof Wg||C instanceof Yg||C instanceof Xg||C instanceof Zg||Mp&&C instanceof Mp?pt.texSubImage2D(pt.TEXTURE_2D,0,Nt,er,pt.RGBA,pt.UNSIGNED_BYTE,C):pt.texSubImage2D(pt.TEXTURE_2D,0,Nt,er,de,we,pt.RGBA,pt.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&pt.generateMipmap(pt.TEXTURE_2D)},ce.prototype.bind=function(C,H,re){var de=this,we=de.context,ke=we.gl;ke.bindTexture(ke.TEXTURE_2D,this.texture),re===ke.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(re=ke.LINEAR),C!==this.filter&&(ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MAG_FILTER,C),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MIN_FILTER,re||C),this.filter=C),H!==this.wrap&&(ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_S,H),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_T,H),this.wrap=H)},ce.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ce.prototype.destroy=function(){var C=this.context,H=C.gl;H.deleteTexture(this.texture),this.texture=null};var _e=function(C){var H=this;this._callback=C,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){H._triggered=!1,H._callback()})};_e.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},_e.prototype.remove=function(){delete this._channel,this._callback=function(){}};var He=function(C,H,re){this.target=C,this.parent=H,this.mapId=re,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new _e(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?C:self};He.prototype.send=function(C,H,re,de,we){var ke=this;we===void 0&&(we=!1);var Ne=Math.round(Math.random()*1e18).toString(36).substring(0,10);re&&(this.callbacks[Ne]=re);var at=J(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:C,hasCallback:!!re,targetMapId:de,mustQueue:we,sourceMapId:this.mapId,data:Dt(H,at)},at),{cancel:function(){re&&delete ke.callbacks[Ne],ke.target.postMessage({id:Ne,type:"<cancel>",targetMapId:de,sourceMapId:ke.mapId})}}},He.prototype.receive=function(C){var H=C.data,re=H.id;if(!!re&&!(H.targetMapId&&this.mapId!==H.targetMapId))if(H.type==="<cancel>"){delete this.tasks[re];var de=this.cancelCallbacks[re];delete this.cancelCallbacks[re],de&&de()}else ee()||H.mustQueue?(this.tasks[re]=H,this.taskQueue.push(re),this.invoker.trigger()):this.processTask(re,H)},He.prototype.process=function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),H=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),!!H&&this.processTask(C,H)}},He.prototype.processTask=function(C,H){var re=this;if(H.type==="<response>"){var de=this.callbacks[C];delete this.callbacks[C],de&&(H.error?de(Wt(H.error)):de(null,Wt(H.data)))}else{var we=!1,ke=J(this.globalScope)?void 0:[],Ne=H.hasCallback?function(er,Zt){we=!0,delete re.cancelCallbacks[C],re.target.postMessage({id:C,type:"<response>",sourceMapId:re.mapId,error:er?Dt(er):null,data:Dt(Zt,ke)},ke)}:function(er){we=!0},at=null,pt=Wt(H.data);if(this.parent[H.type])at=this.parent[H.type](H.sourceMapId,pt,Ne);else if(this.parent.getWorkerSource){var bt=H.type.split("."),Nt=this.parent.getWorkerSource(H.sourceMapId,bt[0],pt.source);at=Nt[bt[1]](pt,Ne)}else Ne(new Error("Could not find function "+H.type));!we&&at&&at.cancel&&(this.cancelCallbacks[C]=at.cancel)}},He.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function At(E,C,H){C=Math.pow(2,H)-C-1;var re=Qt(E*256,C*256,H),de=Qt((E+1)*256,(C+1)*256,H);return re[0]+","+re[1]+","+de[0]+","+de[1]}function Qt(E,C,H){var re=2*Math.PI*6378137/256/Math.pow(2,H),de=E*re-2*Math.PI*6378137/2,we=C*re-2*Math.PI*6378137/2;return[de,we]}var yr=function(C,H){C&&(H?this.setSouthWest(C).setNorthEast(H):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};yr.prototype.setNorthEast=function(C){return this._ne=C instanceof sn?new sn(C.lng,C.lat):sn.convert(C),this},yr.prototype.setSouthWest=function(C){return this._sw=C instanceof sn?new sn(C.lng,C.lat):sn.convert(C),this},yr.prototype.extend=function(C){var H=this._sw,re=this._ne,de,we;if(C instanceof sn)de=C,we=C;else if(C instanceof yr){if(de=C._sw,we=C._ne,!de||!we)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var ke=C;return this.extend(yr.convert(ke))}else{var Ne=C;return this.extend(sn.convert(Ne))}return this}return!H&&!re?(this._sw=new sn(de.lng,de.lat),this._ne=new sn(we.lng,we.lat)):(H.lng=Math.min(de.lng,H.lng),H.lat=Math.min(de.lat,H.lat),re.lng=Math.max(we.lng,re.lng),re.lat=Math.max(we.lat,re.lat)),this},yr.prototype.getCenter=function(){return new sn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},yr.prototype.getSouthWest=function(){return this._sw},yr.prototype.getNorthEast=function(){return this._ne},yr.prototype.getNorthWest=function(){return new sn(this.getWest(),this.getNorth())},yr.prototype.getSouthEast=function(){return new sn(this.getEast(),this.getSouth())},yr.prototype.getWest=function(){return this._sw.lng},yr.prototype.getSouth=function(){return this._sw.lat},yr.prototype.getEast=function(){return this._ne.lng},yr.prototype.getNorth=function(){return this._ne.lat},yr.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},yr.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},yr.prototype.isEmpty=function(){return!(this._sw&&this._ne)},yr.prototype.contains=function(C){var H=sn.convert(C),re=H.lng,de=H.lat,we=this._sw.lat<=de&&de<=this._ne.lat,ke=this._sw.lng<=re&&re<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ke=this._sw.lng>=re&&re>=this._ne.lng),we&&ke},yr.convert=function(C){return!C||C instanceof yr?C:new yr(C)};var rn=63710088e-1,sn=function(C,H){if(isNaN(C)||isNaN(H))throw new Error("Invalid LngLat object: ("+C+", "+H+")");if(this.lng=+C,this.lat=+H,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};sn.prototype.wrap=function(){return new sn(y(this.lng,-180,180),this.lat)},sn.prototype.toArray=function(){return[this.lng,this.lat]},sn.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},sn.prototype.distanceTo=function(C){var H=Math.PI/180,re=this.lat*H,de=C.lat*H,we=Math.sin(re)*Math.sin(de)+Math.cos(re)*Math.cos(de)*Math.cos((C.lng-this.lng)*H),ke=rn*Math.acos(Math.min(we,1));return ke},sn.prototype.toBounds=function(C){C===void 0&&(C=0);var H=40075017,re=360*C/H,de=re/Math.cos(Math.PI/180*this.lat);return new yr(new sn(this.lng-de,this.lat-re),new sn(this.lng+de,this.lat+re))},sn.convert=function(C){if(C instanceof sn)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new sn(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new sn(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Dn=2*Math.PI*rn;function xa(E){return Dn*Math.cos(E*Math.PI/180)}function ba(E){return(180+E)/360}function za(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function oi(E,C){return E/xa(C)}function Ti(E){return E*360-180}function Ci(E){var C=180-E*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}function so(E,C){return E*xa(Ci(C))}function Di(E){return 1/Math.cos(E*Math.PI/180)}var ji=function(C,H,re){re===void 0&&(re=0),this.x=+C,this.y=+H,this.z=+re};ji.fromLngLat=function(C,H){H===void 0&&(H=0);var re=sn.convert(C);return new ji(ba(re.lng),za(re.lat),oi(H,re.lat))},ji.prototype.toLngLat=function(){return new sn(Ti(this.x),Ci(this.y))},ji.prototype.toAltitude=function(){return so(this.z,this.y)},ji.prototype.meterInMercatorCoordinateUnits=function(){return 1/Dn*Di(Ci(this.y))};var to=function(C,H,re){this.z=C,this.x=H,this.y=re,this.key=tu(0,C,C,H,re)};to.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},to.prototype.url=function(C,H){var re=At(this.x,this.y,this.z),de=Qs(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(H==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",de).replace("{bbox-epsg-3857}",re)},to.prototype.getTilePoint=function(C){var H=Math.pow(2,this.z);return new f((C.x*H-this.x)*ri,(C.y*H-this.y)*ri)},to.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ju=function(C,H){this.wrap=C,this.canonical=H,this.key=tu(C,H.z,H.z,H.x,H.y)},wo=function(C,H,re,de,we){this.overscaledZ=C,this.wrap=H,this.canonical=new to(re,+de,+we),this.key=tu(H,C,re,de,we)};wo.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},wo.prototype.scaledTo=function(C){var H=this.canonical.z-C;return C>this.canonical.z?new wo(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wo(C,this.wrap,C,this.canonical.x>>H,this.canonical.y>>H)},wo.prototype.calculateScaledKey=function(C,H){var re=this.canonical.z-C;return C>this.canonical.z?tu(this.wrap*+H,C,this.canonical.z,this.canonical.x,this.canonical.y):tu(this.wrap*+H,C,C,this.canonical.x>>re,this.canonical.y>>re)},wo.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var H=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>H&&C.canonical.y===this.canonical.y>>H},wo.prototype.children=function(C){if(this.overscaledZ>=C)return[new wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var H=this.canonical.z+1,re=this.canonical.x*2,de=this.canonical.y*2;return[new wo(H,this.wrap,H,re,de),new wo(H,this.wrap,H,re+1,de),new wo(H,this.wrap,H,re,de+1),new wo(H,this.wrap,H,re+1,de+1)]},wo.prototype.isLessThan=function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},wo.prototype.wrapped=function(){return new wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},wo.prototype.unwrapTo=function(C){return new wo(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},wo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},wo.prototype.toUnwrapped=function(){return new ju(this.wrap,this.canonical)},wo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},wo.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new ji(C.x-this.wrap,C.y))};function tu(E,C,H,re,de){E*=2,E<0&&(E=E*-1-1);var we=1<<H;return(we*we*E+we*de+re).toString(36)+H.toString(36)+C.toString(36)}function Qs(E,C,H){for(var re="",de,we=E;we>0;we--)de=1<<we-1,re+=(C&de?1:0)+(H&de?2:0);return re}Ue("CanonicalTileID",to),Ue("OverscaledTileID",wo,{omit:["posMatrix"]});var wl=function(C,H,re){if(this.uid=C,H.height!==H.width)throw new RangeError("DEM tiles must be square");if(re&&re!=="mapbox"&&re!=="terrarium")return U('"'+re+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=H.height;var de=this.dim=H.height-2;this.data=new Uint32Array(H.data.buffer),this.encoding=re||"mapbox";for(var we=0;we<de;we++)this.data[this._idx(-1,we)]=this.data[this._idx(0,we)],this.data[this._idx(de,we)]=this.data[this._idx(de-1,we)],this.data[this._idx(we,-1)]=this.data[this._idx(we,0)],this.data[this._idx(we,de)]=this.data[this._idx(we,de-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(de,-1)]=this.data[this._idx(de-1,0)],this.data[this._idx(-1,de)]=this.data[this._idx(0,de-1)],this.data[this._idx(de,de)]=this.data[this._idx(de-1,de-1)]};wl.prototype.get=function(C,H){var re=new Uint8Array(this.data.buffer),de=this._idx(C,H)*4,we=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return we(re[de],re[de+1],re[de+2])},wl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},wl.prototype._idx=function(C,H){if(C<-1||C>=this.dim+1||H<-1||H>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(H+1)*this.stride+(C+1)},wl.prototype._unpackMapbox=function(C,H,re){return(C*256*256+H*256+re)/10-1e4},wl.prototype._unpackTerrarium=function(C,H,re){return C*256+H+re/256-32768},wl.prototype.getPixels=function(){return new yu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},wl.prototype.backfillBorder=function(C,H,re){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var de=H*this.dim,we=H*this.dim+this.dim,ke=re*this.dim,Ne=re*this.dim+this.dim;switch(H){case-1:de=we-1;break;case 1:we=de+1;break}switch(re){case-1:ke=Ne-1;break;case 1:Ne=ke+1;break}for(var at=-H*this.dim,pt=-re*this.dim,bt=ke;bt<Ne;bt++)for(var Nt=de;Nt<we;Nt++)this.data[this._idx(Nt,bt)]=C.data[this._idx(Nt+at,bt+pt)]},Ue("DEMData",wl);function Fc(E,C){var H={};if(!C)return H;for(var re=function(){var ke=we[de],Ne=ke.layerIds.map(function(Nt){return C.getLayer(Nt)}).filter(Boolean);if(Ne.length!==0){ke.layers=Ne,ke.stateDependentLayerIds&&(ke.stateDependentLayers=ke.stateDependentLayerIds.map(function(Nt){return Ne.filter(function(er){return er.id===Nt})[0]}));for(var at=0,pt=Ne;at<pt.length;at+=1){var bt=pt[at];H[bt.id]=ke}}},de=0,we=E;de<we.length;de+=1)re();return H}var Ov=function(C){this._stringToNumber={},this._numberToString=[];for(var H=0;H<C.length;H++){var re=C[H];this._stringToNumber[re]=H,this._numberToString[H]=re}};Ov.prototype.encode=function(C){return this._stringToNumber[C]},Ov.prototype.decode=function(C){return this._numberToString[C]};var jg=function(C,H,re,de,we){this.type="Feature",this._vectorTileFeature=C,C._z=H,C._x=re,C._y=de,this.properties=C.properties,this.id=we},bx={geometry:{configurable:!0}};bx.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},bx.geometry.set=function(E){this._geometry=E},jg.prototype.toJSON=function(){var C={geometry:this.geometry};for(var H in this)H==="_geometry"||H==="_vectorTileFeature"||(C[H]=this[H]);return C},Object.defineProperties(jg.prototype,bx);var Sp=function(){this.state={},this.stateChanges={},this.deletedStates={}};Sp.prototype.updateState=function(C,H,re){var de=String(H);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][de]=this.stateChanges[C][de]||{},M(this.stateChanges[C][de],re),this.deletedStates[C]===null){this.deletedStates[C]={};for(var we in this.state[C])we!==de&&(this.deletedStates[C][we]=null)}else{var ke=this.deletedStates[C]&&this.deletedStates[C][de]===null;if(ke){this.deletedStates[C][de]={};for(var Ne in this.state[C][de])re[Ne]||(this.deletedStates[C][de][Ne]=null)}else for(var at in re){var pt=this.deletedStates[C]&&this.deletedStates[C][de]&&this.deletedStates[C][de][at]===null;pt&&delete this.deletedStates[C][de][at]}}},Sp.prototype.removeFeatureState=function(C,H,re){var de=this.deletedStates[C]===null;if(!de){var we=String(H);if(this.deletedStates[C]=this.deletedStates[C]||{},re&&H!==void 0)this.deletedStates[C][we]!==null&&(this.deletedStates[C][we]=this.deletedStates[C][we]||{},this.deletedStates[C][we][re]=null);else if(H!==void 0){var ke=this.stateChanges[C]&&this.stateChanges[C][we];if(ke){this.deletedStates[C][we]={};for(re in this.stateChanges[C][we])this.deletedStates[C][we][re]=null}else this.deletedStates[C][we]=null}else this.deletedStates[C]=null}},Sp.prototype.getState=function(C,H){var re=String(H),de=this.state[C]||{},we=this.stateChanges[C]||{},ke=M({},de[re],we[re]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var Ne=this.deletedStates[C][H];if(Ne===null)return{};for(var at in Ne)delete ke[at]}return ke},Sp.prototype.initializeTileState=function(C,H){C.setFeatureState(this.state,H)},Sp.prototype.coalesceChanges=function(C,H){var re={};for(var de in this.stateChanges){this.state[de]=this.state[de]||{};var we={};for(var ke in this.stateChanges[de])this.state[de][ke]||(this.state[de][ke]={}),M(this.state[de][ke],this.stateChanges[de][ke]),we[ke]=this.state[de][ke];re[de]=we}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var at={};if(this.deletedStates[Ne]===null)for(var pt in this.state[Ne])at[pt]={},this.state[Ne][pt]={};else for(var bt in this.deletedStates[Ne]){var Nt=this.deletedStates[Ne][bt]===null;if(Nt)this.state[Ne][bt]={};else for(var er=0,Zt=Object.keys(this.deletedStates[Ne][bt]);er<Zt.length;er+=1){var dr=Zt[er];delete this.state[Ne][bt][dr]}at[bt]=this.state[Ne][bt]}re[Ne]=re[Ne]||{},M(re[Ne],at)}if(this.stateChanges={},this.deletedStates={},Object.keys(re).length!==0)for(var Wr in C){var mn=C[Wr];mn.setFeatureState(re,H)}};var yh=function(C,H){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new As(ri,16,0),this.grid3D=new As(ri,16,0),this.featureIndexArray=new Rh,this.promoteId=H};yh.prototype.insert=function(C,H,re,de,we,ke){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(re,de,we);for(var at=ke?this.grid3D:this.grid,pt=0;pt<H.length;pt++){for(var bt=H[pt],Nt=[1/0,1/0,-1/0,-1/0],er=0;er<bt.length;er++){var Zt=bt[er];Nt[0]=Math.min(Nt[0],Zt.x),Nt[1]=Math.min(Nt[1],Zt.y),Nt[2]=Math.max(Nt[2],Zt.x),Nt[3]=Math.max(Nt[3],Zt.y)}Nt[0]<ri&&Nt[1]<ri&&Nt[2]>=0&&Nt[3]>=0&&at.insert(Ne,Nt[0],Nt[1],Nt[2],Nt[3])}},yh.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Uh.VectorTile(new pp(this.rawTileData)).layers,this.sourceLayerCoder=new Ov(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},yh.prototype.query=function(C,H,re,de){var we=this;this.loadVTLayers();for(var ke=C.params||{},Ne=ri/C.tileSize/C.scale,at=Wf(ke.filter),pt=C.queryGeometry,bt=C.queryPadding*Ne,Nt=__(pt),er=this.grid.query(Nt.minX-bt,Nt.minY-bt,Nt.maxX+bt,Nt.maxY+bt),Zt=__(C.cameraQueryGeometry),dr=this.grid3D.query(Zt.minX-bt,Zt.minY-bt,Zt.maxX+bt,Zt.maxY+bt,function(sa,ka,Aa,ai){return pu(C.cameraQueryGeometry,sa-bt,ka-bt,Aa+bt,ai+bt)}),Wr=0,mn=dr;Wr<mn.length;Wr+=1){var un=mn[Wr];er.push(un)}er.sort(Z5);for(var Nn={},Pn,Fn=function(sa){var ka=er[sa];if(ka!==Pn){Pn=ka;var Aa=we.featureIndexArray.get(ka),ai=null;we.loadMatchingFeature(Nn,Aa.bucketIndex,Aa.sourceLayerIndex,Aa.featureIndex,at,ke.layers,ke.availableImages,H,re,de,function(Wa,Za,Ai){return ai||(ai=Ao(Wa)),Za.queryIntersectsFeature(pt,Wa,Ai,ai,we.z,C.transform,Ne,C.pixelPosMatrix)})}},Xn=0;Xn<er.length;Xn++)Fn(Xn);return Nn},yh.prototype.loadMatchingFeature=function(C,H,re,de,we,ke,Ne,at,pt,bt,Nt){var er=this.bucketLayerIDs[H];if(!(ke&&!D(ke,er))){var Zt=this.sourceLayerCoder.decode(re),dr=this.vtLayers[Zt],Wr=dr.feature(de);if(!!we.filter(new Si(this.tileID.overscaledZ),Wr))for(var mn=this.getId(Wr,Zt),un=0;un<er.length;un++){var Nn=er[un];if(!(ke&&ke.indexOf(Nn)<0)){var Pn=at[Nn];if(!!Pn){var Fn={};mn!==void 0&&bt&&(Fn=bt.getState(Pn.sourceLayer||"_geojsonTileLayer",mn));var Xn=pt[Nn];Xn.paint=b_(Xn.paint,Pn.paint,Wr,Fn,Ne),Xn.layout=b_(Xn.layout,Pn.layout,Wr,Fn,Ne);var sa=!Nt||Nt(Wr,Pn,Fn);if(!!sa){var ka=new jg(Wr,this.z,this.x,this.y,mn);ka.layer=Xn;var Aa=C[Nn];Aa===void 0&&(Aa=C[Nn]=[]),Aa.push({featureIndex:de,feature:ka,intersectionZ:sa})}}}}}},yh.prototype.lookupSymbolFeatures=function(C,H,re,de,we,ke,Ne,at){var pt={};this.loadVTLayers();for(var bt=Wf(we),Nt=0,er=C;Nt<er.length;Nt+=1){var Zt=er[Nt];this.loadMatchingFeature(pt,re,de,Zt,bt,ke,Ne,at,H)}return pt},yh.prototype.hasLayer=function(C){for(var H=0,re=this.bucketLayerIDs;H<re.length;H+=1)for(var de=re[H],we=0,ke=de;we<ke.length;we+=1){var Ne=ke[we];if(C===Ne)return!0}return!1},yh.prototype.getId=function(C,H){var re=C.id;if(this.promoteId){var de=typeof this.promoteId=="string"?this.promoteId:this.promoteId[H];re=C.properties[de],typeof re=="boolean"&&(re=Number(re))}return re},Ue("FeatureIndex",yh,{omit:["rawTileData","sourceLayerCoder"]});function b_(E,C,H,re,de){return P(E,function(we,ke){var Ne=C instanceof bo?C.get(ke):null;return Ne&&Ne.evaluate?Ne.evaluate(H,re,de):Ne})}function __(E){for(var C=1/0,H=1/0,re=-1/0,de=-1/0,we=0,ke=E;we<ke.length;we+=1){var Ne=ke[we];C=Math.min(C,Ne.x),H=Math.min(H,Ne.y),re=Math.max(re,Ne.x),de=Math.max(de,Ne.y)}return{minX:C,minY:H,maxX:re,maxY:de}}function Z5(E,C){return C-E}var j5=3e4,Tl=function(C,H){this.tileID=C,this.uid=_(),this.uses=0,this.tileSize=H,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Tl.prototype.registerFadeDuration=function(C){var H=C+this.timeAdded;H<$.now()||this.fadeEndTime&&H<this.fadeEndTime||(this.fadeEndTime=H)},Tl.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Tl.prototype.loadVectorData=function(C,H,re){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new Kf;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=Fc(C.buckets,H.style),this.hasSymbolBuckets=!1;for(var de in this.buckets){var we=this.buckets[de];if(we instanceof Mo)if(this.hasSymbolBuckets=!0,re)we.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ke in this.buckets){var Ne=this.buckets[ke];if(Ne instanceof Mo&&Ne.hasRTLText){this.hasRTLText=!0,Gi();break}}this.queryPadding=0;for(var at in this.buckets){var pt=this.buckets[at];this.queryPadding=Math.max(this.queryPadding,H.style.getLayer(at).queryRadius(pt))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},Tl.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Tl.prototype.getBucket=function(C){return this.buckets[C.id]},Tl.prototype.upload=function(C){for(var H in this.buckets){var re=this.buckets[H];re.uploadPending()&&re.upload(C)}var de=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ce(C,this.imageAtlas.image,de.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ce(C,this.glyphAtlasImage,de.ALPHA),this.glyphAtlasImage=null)},Tl.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},Tl.prototype.queryRenderedFeatures=function(C,H,re,de,we,ke,Ne,at,pt,bt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:de,cameraQueryGeometry:we,scale:ke,tileSize:this.tileSize,pixelPosMatrix:bt,transform:at,params:Ne,queryPadding:this.queryPadding*pt},C,H,re)},Tl.prototype.querySourceFeatures=function(C,H){var re=this.latestFeatureIndex;if(!(!re||!re.rawTileData)){var de=re.loadVTLayers(),we=H?H.sourceLayer:"",ke=de._geojsonTileLayer||de[we];if(!!ke)for(var Ne=Wf(H&&H.filter),at=this.tileID.canonical,pt=at.z,bt=at.x,Nt=at.y,er={z:pt,x:bt,y:Nt},Zt=0;Zt<ke.length;Zt++){var dr=ke.feature(Zt);if(Ne.filter(new Si(this.tileID.overscaledZ),dr)){var Wr=re.getId(dr,we),mn=new jg(dr,pt,bt,Nt,Wr);mn.tile=er,C.push(mn)}}}},Tl.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Tl.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Tl.prototype.setExpiryData=function(C){var H=this.expirationTime;if(C.cacheControl){var re=q(C.cacheControl);re["max-age"]&&(this.expirationTime=Date.now()+re["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var de=Date.now(),we=!1;if(this.expirationTime>de)we=!1;else if(!H)we=!0;else if(this.expirationTime<H)we=!0;else{var ke=this.expirationTime-H;ke?this.expirationTime=de+Math.max(ke,j5):we=!0}we?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Tl.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Tl.prototype.setFeatureState=function(C,H){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var re=this.latestFeatureIndex.loadVTLayers();for(var de in this.buckets)if(!!H.style.hasLayer(de)){var we=this.buckets[de],ke=we.layers[0].sourceLayer||"_geojsonTileLayer",Ne=re[ke],at=C[ke];if(!(!Ne||!at||Object.keys(at).length===0)){we.update(at,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var pt=H&&H.style&&H.style.getLayer(de);pt&&(this.queryPadding=Math.max(this.queryPadding,pt.queryRadius(we)))}}}},Tl.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Tl.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$.now()},Tl.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Tl.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=$.now()+C},Tl.prototype.setDependencies=function(C,H){for(var re={},de=0,we=H;de<we.length;de+=1){var ke=we[de];re[ke]=!0}this.dependencies[C]=re},Tl.prototype.hasDependency=function(C,H){for(var re=0,de=C;re<de.length;re+=1){var we=de[re],ke=this.dependencies[we];if(ke)for(var Ne=0,at=H;Ne<at.length;Ne+=1){var pt=at[Ne];if(ke[pt])return!0}}return!1};var K5=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Jh=self.performance,w_=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},Jh.mark(this._marks.start)};w_.prototype.finish=function(){Jh.mark(this._marks.end);var C=Jh.getEntriesByName(this._marks.measure);return C.length===0&&(Jh.measure(this._marks.measure,this._marks.start,this._marks.end),C=Jh.getEntriesByName(this._marks.measure),Jh.clearMarks(this._marks.start),Jh.clearMarks(this._marks.end),Jh.clearMeasures(this._marks.measure)),C},t.Actor=He,t.AlphaImage=ch,t.CanonicalTileID=to,t.CollisionBoxArray=Kf,t.Color=Oi,t.DEMData=wl,t.DataConstantProperty=ei,t.DictionaryCoder=Ov,t.EXTENT=ri,t.ErrorEvent=Cr,t.EvaluationParameters=Si,t.Event=fn,t.Evented=_r,t.FeatureIndex=yh,t.FillBucket=Jf,t.FillExtrusionBucket=Qf,t.ImageAtlas=Dv,t.ImagePosition=Pv,t.LineBucket=ql,t.LngLat=sn,t.LngLatBounds=yr,t.MercatorCoordinate=ji,t.ONE_EM=sl,t.OverscaledTileID=wo,t.Point=f,t.Point$1=f,t.Properties=zo,t.Protobuf=pp,t.RGBAImage=yu,t.RequestManager=Be,t.RequestPerformance=w_,t.ResourceType=Tr,t.SegmentVector=Z,t.SourceFeatureState=Sp,t.StructArrayLayout1ui2=jf,t.StructArrayLayout2f1f2i16=Xf,t.StructArrayLayout2i4=Vc,t.StructArrayLayout3ui6=hu,t.StructArrayLayout4i8=Yf,t.SymbolBucket=Mo,t.Texture=ce,t.Tile=Tl,t.Transitionable=ao,t.Uniform1f=Vr,t.Uniform1i=jr,t.Uniform2f=on,t.Uniform3f=_n,t.Uniform4f=Bn,t.UniformColor=Kn,t.UniformMatrix4f=pa,t.UnwrappedTileID=ju,t.ValidationError=hr,t.WritingMode=Zu,t.ZoomHistory=Jt,t.add=$l,t.addDynamicAttributes=Vd,t.asyncAll=g,t.bezier=v,t.bindAll=S,t.browser=$,t.cacheEntryPossiblyAdded=qe,t.clamp=p,t.clearTileCache=Rt,t.clipLine=Ug,t.clone=wv,t.clone$1=F,t.clone$2=dd,t.collisionCircleLayout=zd,t.config=ae,t.create=zh,t.create$1=lh,t.create$2=sh,t.createCommonjsModule=i,t.createExpression=af,t.createLayout=xs,t.createStyleLayer=xx,t.cross=mm,t.deepEqual=o,t.dot=K0,t.dot$1=wm,t.ease=d,t.emitValidationErrors=es,t.endsWith=k,t.enforceCacheSizeLimit=xt,t.evaluateSizeForFeature=Dg,t.evaluateSizeForZoom=Ig,t.evaluateVariableOffset=Tp,t.evented=Ii,t.extend=M,t.featureFilter=Wf,t.filterObject=O,t.fromRotation=Ih,t.getAnchorAlignment=xp,t.getAnchorJustification=Hd,t.getArrayBuffer=Fe,t.getImage=Sr,t.getJSON=Ee,t.getRTLTextPluginStatus=Xo,t.getReferrer=Ir,t.getVideo=Lr,t.identity=uh,t.invert=Dc,t.isChar=qt,t.isMapboxURL=Ye,t.keysDifference=b,t.makeRequest=Ae,t.mapObject=P,t.mercatorXfromLng=ba,t.mercatorYfromLat=za,t.mercatorZfromAltitude=oi,t.mul=pd,t.multiply=jc,t.mvt=Uh,t.normalize=Av,t.number=Jo,t.offscreenCanvasSupported=pr,t.ortho=vd,t.parseGlyphPBF=Xu,t.pbf=pp,t.performSymbolLayout=q1,t.perspective=Tv,t.pick=w,t.plugin=pi,t.polygonIntersectsPolygon=wi,t.postMapLoadEvent=Ct,t.postTurnstileEvent=Gt,t.potpack=Sg,t.refProperties=K5,t.register=Ue,t.registerForPluginStateChange=go,t.rotate=Ul,t.rotateX=Ql,t.rotateZ=Fh,t.scale=gu,t.scale$1=md,t.scale$2=yd,t.setCacheLimits=fr,t.setRTLTextPlugin=Ra,t.sphericalToCartesian=j,t.sqrLen=Mm,t.styleSpec=mr,t.sub=bm,t.symbolSize=Y1,t.transformMat3=xm,t.transformMat4=ap,t.translate=bs,t.triggerPluginCompletionEvent=Ja,t.uniqueId=_,t.validateCustomStyleLayer=gx,t.validateLight=Ni,t.validateStyle=ps,t.values=A,t.vectorTile=Uh,t.version=a,t.warnOnce=U,t.webpSupported=ie,t.window=self,t.wrap=y}),x(["./shared"],function(t){function i(nt){var Ae=typeof nt;if(Ae==="number"||Ae==="boolean"||Ae==="string"||nt===void 0||nt===null)return JSON.stringify(nt);if(Array.isArray(nt)){for(var Ee="[",Fe=0,Ke=nt;Fe<Ke.length;Fe+=1){var tt=Ke[Fe];Ee+=i(tt)+","}return Ee+"]"}for(var ut=Object.keys(nt).sort(),ct="{",yt=0;yt<ut.length;yt++)ct+=JSON.stringify(ut[yt])+":"+i(nt[ut[yt]])+",";return ct+"}"}function a(nt){for(var Ae="",Ee=0,Fe=t.refProperties;Ee<Fe.length;Ee+=1){var Ke=Fe[Ee];Ae+="/"+i(nt[Ke])}return Ae}function r(nt,Ae){for(var Ee={},Fe=0;Fe<nt.length;Fe++){var Ke=Ae&&Ae[nt[Fe].id]||a(nt[Fe]);Ae&&(Ae[nt[Fe].id]=Ke);var tt=Ee[Ke];tt||(tt=Ee[Ke]=[]),tt.push(nt[Fe])}var ut=[];for(var ct in Ee)ut.push(Ee[ct]);return ut}var n=function(Ae){this.keyCache={},Ae&&this.replace(Ae)};n.prototype.replace=function(Ae){this._layerConfigs={},this._layers={},this.update(Ae,[])},n.prototype.update=function(Ae,Ee){for(var Fe=this,Ke=0,tt=Ae;Ke<tt.length;Ke+=1){var ut=tt[Ke];this._layerConfigs[ut.id]=ut;var ct=this._layers[ut.id]=t.createStyleLayer(ut);ct._featureFilter=t.featureFilter(ct.filter),this.keyCache[ut.id]&&delete this.keyCache[ut.id]}for(var yt=0,kt=Ee;yt<kt.length;yt+=1){var jt=kt[yt];delete this.keyCache[jt],delete this._layerConfigs[jt],delete this._layers[jt]}this.familiesBySource={};for(var Mr=r(t.values(this._layerConfigs),this.keyCache),Sr=0,Lr=Mr;Sr<Lr.length;Sr+=1){var Ar=Lr[Sr],Ur=Ar.map(function(Pr){return Fe._layers[Pr.id]}),fn=Ur[0];if(fn.visibility!=="none"){var Cr=fn.source||"",_r=this.familiesBySource[Cr];_r||(_r=this.familiesBySource[Cr]={});var En=fn.sourceLayer||"_geojsonTileLayer",Jr=_r[En];Jr||(Jr=_r[En]=[]),Jr.push(Ur)}}};var f=1,l=function(Ae){var Ee={},Fe=[];for(var Ke in Ae){var tt=Ae[Ke],ut=Ee[Ke]={};for(var ct in tt){var yt=tt[+ct];if(!(!yt||yt.bitmap.width===0||yt.bitmap.height===0)){var kt={x:0,y:0,w:yt.bitmap.width+2*f,h:yt.bitmap.height+2*f};Fe.push(kt),ut[ct]={rect:kt,metrics:yt.metrics}}}}var jt=t.potpack(Fe),Mr=jt.w,Sr=jt.h,Lr=new t.AlphaImage({width:Mr||1,height:Sr||1});for(var Ar in Ae){var Ur=Ae[Ar];for(var fn in Ur){var Cr=Ur[+fn];if(!(!Cr||Cr.bitmap.width===0||Cr.bitmap.height===0)){var _r=Ee[Ar][fn].rect;t.AlphaImage.copy(Cr.bitmap,Lr,{x:0,y:0},{x:_r.x+f,y:_r.y+f},Cr.bitmap)}}}this.image=Lr,this.positions=Ee};t.register("GlyphAtlas",l);var o=function(Ae){this.tileID=new t.OverscaledTileID(Ae.tileID.overscaledZ,Ae.tileID.wrap,Ae.tileID.canonical.z,Ae.tileID.canonical.x,Ae.tileID.canonical.y),this.uid=Ae.uid,this.zoom=Ae.zoom,this.pixelRatio=Ae.pixelRatio,this.tileSize=Ae.tileSize,this.source=Ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ae.showCollisionBoxes,this.collectResourceTiming=!!Ae.collectResourceTiming,this.returnDependencies=!!Ae.returnDependencies,this.promoteId=Ae.promoteId};o.prototype.parse=function(Ae,Ee,Fe,Ke,tt){var ut=this;this.status="parsing",this.data=Ae,this.collisionBoxArray=new t.CollisionBoxArray;var ct=new t.DictionaryCoder(Object.keys(Ae.layers).sort()),yt=new t.FeatureIndex(this.tileID,this.promoteId);yt.bucketLayerIDs=[];var kt={},jt={featureIndex:yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Fe},Mr=Ee.familiesBySource[this.source];for(var Sr in Mr){var Lr=Ae.layers[Sr];if(!!Lr){Lr.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+Sr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ar=ct.encode(Sr),Ur=[],fn=0;fn<Lr.length;fn++){var Cr=Lr.feature(fn),_r=yt.getId(Cr,Sr);Ur.push({feature:Cr,id:_r,index:fn,sourceLayerIndex:Ar})}for(var En=0,Jr=Mr[Sr];En<Jr.length;En+=1){var Pr=Jr[En],vn=Pr[0];if(!(vn.minzoom&&this.zoom<Math.floor(vn.minzoom))&&!(vn.maxzoom&&this.zoom>=vn.maxzoom)&&vn.visibility!=="none"){c(Pr,this.zoom,Fe);var xn=kt[vn.id]=vn.createBucket({index:yt.bucketLayerIDs.length,layers:Pr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ar,sourceID:this.source});xn.populate(Ur,jt,this.tileID.canonical),yt.bucketLayerIDs.push(Pr.map(function(kr){return kr.id}))}}}}var qr,st,Bt,ir,xr=t.mapObject(jt.glyphDependencies,function(kr){return Object.keys(kr).map(Number)});Object.keys(xr).length?Ke.send("getGlyphs",{uid:this.uid,stacks:xr},function(kr,en){qr||(qr=kr,st=en,Br.call(ut))}):st={};var Qr=Object.keys(jt.iconDependencies);Qr.length?Ke.send("getImages",{icons:Qr,source:this.source,tileID:this.tileID,type:"icons"},function(kr,en){qr||(qr=kr,Bt=en,Br.call(ut))}):Bt={};var Gr=Object.keys(jt.patternDependencies);Gr.length?Ke.send("getImages",{icons:Gr,source:this.source,tileID:this.tileID,type:"patterns"},function(kr,en){qr||(qr=kr,ir=en,Br.call(ut))}):ir={},Br.call(this);function Br(){if(qr)return tt(qr);if(st&&Bt&&ir){var kr=new l(st),en=new t.ImageAtlas(Bt,ir);for(var Zn in kt){var Hn=kt[Zn];Hn instanceof t.SymbolBucket?(c(Hn.layers,this.zoom,Fe),t.performSymbolLayout(Hn,st,kr.positions,Bt,en.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Hn.hasPattern&&(Hn instanceof t.LineBucket||Hn instanceof t.FillBucket||Hn instanceof t.FillExtrusionBucket)&&(c(Hn.layers,this.zoom,Fe),Hn.addFeatures(jt,this.tileID.canonical,en.patternPositions))}this.status="done",tt(null,{buckets:t.values(kt).filter(function(da){return!da.isEmpty()}),featureIndex:yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:kr.image,imageAtlas:en,glyphMap:this.returnDependencies?st:null,iconMap:this.returnDependencies?Bt:null,glyphPositions:this.returnDependencies?kr.positions:null})}}};function c(nt,Ae,Ee){for(var Fe=new t.EvaluationParameters(Ae),Ke=0,tt=nt;Ke<tt.length;Ke+=1){var ut=tt[Ke];ut.recalculate(Fe,Ee)}}function v(nt,Ae){var Ee=t.getArrayBuffer(nt.request,function(Fe,Ke,tt,ut){Fe?Ae(Fe):Ke&&Ae(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Ke)),rawData:Ke,cacheControl:tt,expires:ut})});return function(){Ee.cancel(),Ae()}}var d=function(Ae,Ee,Fe,Ke){this.actor=Ae,this.layerIndex=Ee,this.availableImages=Fe,this.loadVectorData=Ke||v,this.loading={},this.loaded={}};d.prototype.loadTile=function(Ae,Ee){var Fe=this,Ke=Ae.uid;this.loading||(this.loading={});var tt=Ae&&Ae.request&&Ae.request.collectResourceTiming?new t.RequestPerformance(Ae.request):!1,ut=this.loading[Ke]=new o(Ae);ut.abort=this.loadVectorData(Ae,function(ct,yt){if(delete Fe.loading[Ke],ct||!yt)return ut.status="done",Fe.loaded[Ke]=ut,Ee(ct);var kt=yt.rawData,jt={};yt.expires&&(jt.expires=yt.expires),yt.cacheControl&&(jt.cacheControl=yt.cacheControl);var Mr={};if(tt){var Sr=tt.finish();Sr&&(Mr.resourceTiming=JSON.parse(JSON.stringify(Sr)))}ut.vectorTile=yt.vectorTile,ut.parse(yt.vectorTile,Fe.layerIndex,Fe.availableImages,Fe.actor,function(Lr,Ar){if(Lr||!Ar)return Ee(Lr);Ee(null,t.extend({rawTileData:kt.slice(0)},Ar,jt,Mr))}),Fe.loaded=Fe.loaded||{},Fe.loaded[Ke]=ut})},d.prototype.reloadTile=function(Ae,Ee){var Fe=this,Ke=this.loaded,tt=Ae.uid,ut=this;if(Ke&&Ke[tt]){var ct=Ke[tt];ct.showCollisionBoxes=Ae.showCollisionBoxes;var yt=function(kt,jt){var Mr=ct.reloadCallback;Mr&&(delete ct.reloadCallback,ct.parse(ct.vectorTile,ut.layerIndex,Fe.availableImages,ut.actor,Mr)),Ee(kt,jt)};ct.status==="parsing"?ct.reloadCallback=yt:ct.status==="done"&&(ct.vectorTile?ct.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,yt):yt())}},d.prototype.abortTile=function(Ae,Ee){var Fe=this.loading,Ke=Ae.uid;Fe&&Fe[Ke]&&Fe[Ke].abort&&(Fe[Ke].abort(),delete Fe[Ke]),Ee()},d.prototype.removeTile=function(Ae,Ee){var Fe=this.loaded,Ke=Ae.uid;Fe&&Fe[Ke]&&delete Fe[Ke],Ee()};var p=t.window.ImageBitmap,y=function(){this.loaded={}};y.prototype.loadTile=function(Ae,Ee){var Fe=Ae.uid,Ke=Ae.encoding,tt=Ae.rawImageData,ut=p&&tt instanceof p?this.getImageData(tt):tt,ct=new t.DEMData(Fe,ut,Ke);this.loaded=this.loaded||{},this.loaded[Fe]=ct,Ee(null,ct)},y.prototype.getImageData=function(Ae){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Ae.width,Ae.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ae.width,this.offscreenCanvas.height=Ae.height,this.offscreenCanvasContext.drawImage(Ae,0,0,Ae.width,Ae.height);var Ee=this.offscreenCanvasContext.getImageData(-1,-1,Ae.width+2,Ae.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Ee.width,height:Ee.height},Ee.data)},y.prototype.removeTile=function(Ae){var Ee=this.loaded,Fe=Ae.uid;Ee&&Ee[Fe]&&delete Ee[Fe]};var g=A;function A(nt,Ae){var Ee=nt&&nt.type,Fe;if(Ee==="FeatureCollection")for(Fe=0;Fe<nt.features.length;Fe++)A(nt.features[Fe],Ae);else if(Ee==="GeometryCollection")for(Fe=0;Fe<nt.geometries.length;Fe++)A(nt.geometries[Fe],Ae);else if(Ee==="Feature")A(nt.geometry,Ae);else if(Ee==="Polygon")b(nt.coordinates,Ae);else if(Ee==="MultiPolygon")for(Fe=0;Fe<nt.coordinates.length;Fe++)b(nt.coordinates[Fe],Ae);return nt}function b(nt,Ae){if(nt.length!==0){M(nt[0],Ae);for(var Ee=1;Ee<nt.length;Ee++)M(nt[Ee],!Ae)}}function M(nt,Ae){for(var Ee=0,Fe=0,Ke=nt.length,tt=Ke-1;Fe<Ke;tt=Fe++)Ee+=(nt[Fe][0]-nt[tt][0])*(nt[tt][1]+nt[Fe][1]);Ee>=0!=!!Ae&&nt.reverse()}var w=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,T=function(Ae){this._feature=Ae,this.extent=t.EXTENT,this.type=Ae.type,this.properties=Ae.tags,"id"in Ae&&!isNaN(Ae.id)&&(this.id=parseInt(Ae.id,10))};T.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ae=[],Ee=0,Fe=this._feature.geometry;Ee<Fe.length;Ee+=1){var Ke=Fe[Ee];Ae.push([new t.Point$1(Ke[0],Ke[1])])}return Ae}else{for(var tt=[],ut=0,ct=this._feature.geometry;ut<ct.length;ut+=1){for(var yt=ct[ut],kt=[],jt=0,Mr=yt;jt<Mr.length;jt+=1){var Sr=Mr[jt];kt.push(new t.Point$1(Sr[0],Sr[1]))}tt.push(kt)}return tt}},T.prototype.toGeoJSON=function(Ae,Ee,Fe){return w.call(this,Ae,Ee,Fe)};var _=function(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Ae.length,this._features=Ae};_.prototype.feature=function(Ae){return new T(this._features[Ae])};var h=t.vectorTile.VectorTileFeature,L=S;function S(nt,Ae){this.options=Ae||{},this.features=nt,this.length=nt.length}S.prototype.feature=function(nt){return new k(this.features[nt],this.options.extent)};function k(nt,Ae){this.id=typeof nt.id=="number"?nt.id:void 0,this.type=nt.type,this.rawGeometry=nt.type===1?[nt.geometry]:nt.geometry,this.properties=nt.tags,this.extent=Ae||4096}k.prototype.loadGeometry=function(){var nt=this.rawGeometry;this.geometry=[];for(var Ae=0;Ae<nt.length;Ae++){for(var Ee=nt[Ae],Fe=[],Ke=0;Ke<Ee.length;Ke++)Fe.push(new t.Point$1(Ee[Ke][0],Ee[Ke][1]));this.geometry.push(Fe)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var nt=this.geometry,Ae=1/0,Ee=-1/0,Fe=1/0,Ke=-1/0,tt=0;tt<nt.length;tt++)for(var ut=nt[tt],ct=0;ct<ut.length;ct++){var yt=ut[ct];Ae=Math.min(Ae,yt.x),Ee=Math.max(Ee,yt.x),Fe=Math.min(Fe,yt.y),Ke=Math.max(Ke,yt.y)}return[Ae,Fe,Ee,Ke]},k.prototype.toGeoJSON=h.prototype.toGeoJSON;var P=R,O=R,F=U,D=L;function R(nt){var Ae=new t.pbf;return N(nt,Ae),Ae.finish()}function U(nt,Ae){Ae=Ae||{};var Ee={};for(var Fe in nt)Ee[Fe]=new L(nt[Fe].features,Ae),Ee[Fe].name=Fe,Ee[Fe].version=Ae.version,Ee[Fe].extent=Ae.extent;return R({layers:Ee})}function N(nt,Ae){for(var Ee in nt.layers)Ae.writeMessage(3,X,nt.layers[Ee])}function X(nt,Ae){Ae.writeVarintField(15,nt.version||1),Ae.writeStringField(1,nt.name||""),Ae.writeVarintField(5,nt.extent||4096);var Ee,Fe={keys:[],values:[],keycache:{},valuecache:{}};for(Ee=0;Ee<nt.length;Ee++)Fe.feature=nt.feature(Ee),Ae.writeMessage(2,j,Fe);var Ke=Fe.keys;for(Ee=0;Ee<Ke.length;Ee++)Ae.writeStringField(3,Ke[Ee]);var tt=Fe.values;for(Ee=0;Ee<tt.length;Ee++)Ae.writeMessage(4,le,tt[Ee])}function j(nt,Ae){var Ee=nt.feature;Ee.id!==void 0&&Ae.writeVarintField(1,Ee.id),Ae.writeMessage(2,ee,nt),Ae.writeVarintField(3,Ee.type),Ae.writeMessage(4,J,Ee)}function ee(nt,Ae){var Ee=nt.feature,Fe=nt.keys,Ke=nt.values,tt=nt.keycache,ut=nt.valuecache;for(var ct in Ee.properties){var yt=tt[ct];typeof yt=="undefined"&&(Fe.push(ct),yt=Fe.length-1,tt[ct]=yt),Ae.writeVarint(yt);var kt=Ee.properties[ct],jt=typeof kt;jt!=="string"&&jt!=="boolean"&&jt!=="number"&&(kt=JSON.stringify(kt));var Mr=jt+":"+kt,Sr=ut[Mr];typeof Sr=="undefined"&&(Ke.push(kt),Sr=Ke.length-1,ut[Mr]=Sr),Ae.writeVarint(Sr)}}function q(nt,Ae){return(Ae<<3)+(nt&7)}function G(nt){return nt<<1^nt>>31}function J(nt,Ae){for(var Ee=nt.loadGeometry(),Fe=nt.type,Ke=0,tt=0,ut=Ee.length,ct=0;ct<ut;ct++){var yt=Ee[ct],kt=1;Fe===1&&(kt=yt.length),Ae.writeVarint(q(1,kt));for(var jt=Fe===3?yt.length-1:yt.length,Mr=0;Mr<jt;Mr++){Mr===1&&Fe!==1&&Ae.writeVarint(q(2,jt-1));var Sr=yt[Mr].x-Ke,Lr=yt[Mr].y-tt;Ae.writeVarint(G(Sr)),Ae.writeVarint(G(Lr)),Ke+=Sr,tt+=Lr}Fe===3&&Ae.writeVarint(q(7,1))}}function le(nt,Ae){var Ee=typeof nt;Ee==="string"?Ae.writeStringField(1,nt):Ee==="boolean"?Ae.writeBooleanField(7,nt):Ee==="number"&&(nt%1!=0?Ae.writeDoubleField(3,nt):nt<0?Ae.writeSVarintField(6,nt):Ae.writeVarintField(5,nt))}P.fromVectorTileJs=O,P.fromGeojsonVt=F,P.GeoJSONWrapper=D;function fe(nt,Ae,Ee,Fe,Ke,tt){if(!(Ke-Fe<=Ee)){var ut=Fe+Ke>>1;se(nt,Ae,ut,Fe,Ke,tt%2),fe(nt,Ae,Ee,Fe,ut-1,tt+1),fe(nt,Ae,Ee,ut+1,Ke,tt+1)}}function se(nt,Ae,Ee,Fe,Ke,tt){for(;Ke>Fe;){if(Ke-Fe>600){var ut=Ke-Fe+1,ct=Ee-Fe+1,yt=Math.log(ut),kt=.5*Math.exp(2*yt/3),jt=.5*Math.sqrt(yt*kt*(ut-kt)/ut)*(ct-ut/2<0?-1:1),Mr=Math.max(Fe,Math.floor(Ee-ct*kt/ut+jt)),Sr=Math.min(Ke,Math.floor(Ee+(ut-ct)*kt/ut+jt));se(nt,Ae,Ee,Mr,Sr,tt)}var Lr=Ae[2*Ee+tt],Ar=Fe,Ur=Ke;for(V(nt,Ae,Fe,Ee),Ae[2*Ke+tt]>Lr&&V(nt,Ae,Fe,Ke);Ar<Ur;){for(V(nt,Ae,Ar,Ur),Ar++,Ur--;Ae[2*Ar+tt]<Lr;)Ar++;for(;Ae[2*Ur+tt]>Lr;)Ur--}Ae[2*Fe+tt]===Lr?V(nt,Ae,Fe,Ur):(Ur++,V(nt,Ae,Ur,Ke)),Ur<=Ee&&(Fe=Ur+1),Ee<=Ur&&(Ke=Ur-1)}}function V(nt,Ae,Ee,Fe){Y(nt,Ee,Fe),Y(Ae,2*Ee,2*Fe),Y(Ae,2*Ee+1,2*Fe+1)}function Y(nt,Ae,Ee){var Fe=nt[Ae];nt[Ae]=nt[Ee],nt[Ee]=Fe}function ne(nt,Ae,Ee,Fe,Ke,tt,ut){for(var ct=[0,nt.length-1,0],yt=[],kt,jt;ct.length;){var Mr=ct.pop(),Sr=ct.pop(),Lr=ct.pop();if(Sr-Lr<=ut){for(var Ar=Lr;Ar<=Sr;Ar++)kt=Ae[2*Ar],jt=Ae[2*Ar+1],kt>=Ee&&kt<=Ke&&jt>=Fe&&jt<=tt&&yt.push(nt[Ar]);continue}var Ur=Math.floor((Lr+Sr)/2);kt=Ae[2*Ur],jt=Ae[2*Ur+1],kt>=Ee&&kt<=Ke&&jt>=Fe&&jt<=tt&&yt.push(nt[Ur]);var fn=(Mr+1)%2;(Mr===0?Ee<=kt:Fe<=jt)&&(ct.push(Lr),ct.push(Ur-1),ct.push(fn)),(Mr===0?Ke>=kt:tt>=jt)&&(ct.push(Ur+1),ct.push(Sr),ct.push(fn))}return yt}function te(nt,Ae,Ee,Fe,Ke,tt){for(var ut=[0,nt.length-1,0],ct=[],yt=Ke*Ke;ut.length;){var kt=ut.pop(),jt=ut.pop(),Mr=ut.pop();if(jt-Mr<=tt){for(var Sr=Mr;Sr<=jt;Sr++)K(Ae[2*Sr],Ae[2*Sr+1],Ee,Fe)<=yt&&ct.push(nt[Sr]);continue}var Lr=Math.floor((Mr+jt)/2),Ar=Ae[2*Lr],Ur=Ae[2*Lr+1];K(Ar,Ur,Ee,Fe)<=yt&&ct.push(nt[Lr]);var fn=(kt+1)%2;(kt===0?Ee-Ke<=Ar:Fe-Ke<=Ur)&&(ut.push(Mr),ut.push(Lr-1),ut.push(fn)),(kt===0?Ee+Ke>=Ar:Fe+Ke>=Ur)&&(ut.push(Lr+1),ut.push(jt),ut.push(fn))}return ct}function K(nt,Ae,Ee,Fe){var Ke=nt-Ee,tt=Ae-Fe;return Ke*Ke+tt*tt}var $=function(nt){return nt[0]},ae=function(nt){return nt[1]},ie=function(Ae,Ee,Fe,Ke,tt){Ee===void 0&&(Ee=$),Fe===void 0&&(Fe=ae),Ke===void 0&&(Ke=64),tt===void 0&&(tt=Float64Array),this.nodeSize=Ke,this.points=Ae;for(var ut=Ae.length<65536?Uint16Array:Uint32Array,ct=this.ids=new ut(Ae.length),yt=this.coords=new tt(Ae.length*2),kt=0;kt<Ae.length;kt++)ct[kt]=kt,yt[2*kt]=Ee(Ae[kt]),yt[2*kt+1]=Fe(Ae[kt]);fe(ct,yt,Ke,0,ct.length-1,0)};ie.prototype.range=function(Ae,Ee,Fe,Ke){return ne(this.ids,this.coords,Ae,Ee,Fe,Ke,this.nodeSize)},ie.prototype.within=function(Ae,Ee,Fe){return te(this.ids,this.coords,Ae,Ee,Fe,this.nodeSize)};var oe={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(nt){return nt}},ue=function(Ae){this.options=Xe(Object.create(oe),Ae),this.trees=new Array(this.options.maxZoom+1)};ue.prototype.load=function(Ae){var Ee=this.options,Fe=Ee.log,Ke=Ee.minZoom,tt=Ee.maxZoom,ut=Ee.nodeSize;Fe&&console.time("total time");var ct="prepare "+Ae.length+" points";Fe&&console.time(ct),this.points=Ae;for(var yt=[],kt=0;kt<Ae.length;kt++)!Ae[kt].geometry||yt.push(he(Ae[kt],kt));this.trees[tt+1]=new ie(yt,Te,Ie,ut,Float32Array),Fe&&console.timeEnd(ct);for(var jt=tt;jt>=Ke;jt--){var Mr=+Date.now();yt=this._cluster(yt,jt),this.trees[jt]=new ie(yt,Te,Ie,ut,Float32Array),Fe&&console.log("z%d: %d clusters in %dms",jt,yt.length,+Date.now()-Mr)}return Fe&&console.timeEnd("total time"),this},ue.prototype.getClusters=function(Ae,Ee){var Fe=((Ae[0]+180)%360+360)%360-180,Ke=Math.max(-90,Math.min(90,Ae[1])),tt=Ae[2]===180?180:((Ae[2]+180)%360+360)%360-180,ut=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)Fe=-180,tt=180;else if(Fe>tt){var ct=this.getClusters([Fe,Ke,180,ut],Ee),yt=this.getClusters([-180,Ke,tt,ut],Ee);return ct.concat(yt)}for(var kt=this.trees[this._limitZoom(Ee)],jt=kt.range(Ce(Fe),Se(ut),Ce(tt),Se(Ke)),Mr=[],Sr=0,Lr=jt;Sr<Lr.length;Sr+=1){var Ar=Lr[Sr],Ur=kt.points[Ar];Mr.push(Ur.numPoints?me(Ur):this.points[Ur.index])}return Mr},ue.prototype.getChildren=function(Ae){var Ee=this._getOriginId(Ae),Fe=this._getOriginZoom(Ae),Ke="No cluster with the specified id.",tt=this.trees[Fe];if(!tt)throw new Error(Ke);var ut=tt.points[Ee];if(!ut)throw new Error(Ke);for(var ct=this.options.radius/(this.options.extent*Math.pow(2,Fe-1)),yt=tt.within(ut.x,ut.y,ct),kt=[],jt=0,Mr=yt;jt<Mr.length;jt+=1){var Sr=Mr[jt],Lr=tt.points[Sr];Lr.parentId===Ae&&kt.push(Lr.numPoints?me(Lr):this.points[Lr.index])}if(kt.length===0)throw new Error(Ke);return kt},ue.prototype.getLeaves=function(Ae,Ee,Fe){Ee=Ee||10,Fe=Fe||0;var Ke=[];return this._appendLeaves(Ke,Ae,Ee,Fe,0),Ke},ue.prototype.getTile=function(Ae,Ee,Fe){var Ke=this.trees[this._limitZoom(Ae)],tt=Math.pow(2,Ae),ut=this.options,ct=ut.extent,yt=ut.radius,kt=yt/ct,jt=(Fe-kt)/tt,Mr=(Fe+1+kt)/tt,Sr={features:[]};return this._addTileFeatures(Ke.range((Ee-kt)/tt,jt,(Ee+1+kt)/tt,Mr),Ke.points,Ee,Fe,tt,Sr),Ee===0&&this._addTileFeatures(Ke.range(1-kt/tt,jt,1,Mr),Ke.points,tt,Fe,tt,Sr),Ee===tt-1&&this._addTileFeatures(Ke.range(0,jt,kt/tt,Mr),Ke.points,-1,Fe,tt,Sr),Sr.features.length?Sr:null},ue.prototype.getClusterExpansionZoom=function(Ae){for(var Ee=this._getOriginZoom(Ae)-1;Ee<=this.options.maxZoom;){var Fe=this.getChildren(Ae);if(Ee++,Fe.length!==1)break;Ae=Fe[0].properties.cluster_id}return Ee},ue.prototype._appendLeaves=function(Ae,Ee,Fe,Ke,tt){for(var ut=this.getChildren(Ee),ct=0,yt=ut;ct<yt.length;ct+=1){var kt=yt[ct],jt=kt.properties;if(jt&&jt.cluster?tt+jt.point_count<=Ke?tt+=jt.point_count:tt=this._appendLeaves(Ae,jt.cluster_id,Fe,Ke,tt):tt<Ke?tt++:Ae.push(kt),Ae.length===Fe)break}return tt},ue.prototype._addTileFeatures=function(Ae,Ee,Fe,Ke,tt,ut){for(var ct=0,yt=Ae;ct<yt.length;ct+=1){var kt=yt[ct],jt=Ee[kt],Mr=jt.numPoints,Sr={type:1,geometry:[[Math.round(this.options.extent*(jt.x*tt-Fe)),Math.round(this.options.extent*(jt.y*tt-Ke))]],tags:Mr?be(jt):this.points[jt.index].properties},Lr=void 0;Mr?Lr=jt.id:this.options.generateId?Lr=jt.index:this.points[jt.index].id&&(Lr=this.points[jt.index].id),Lr!==void 0&&(Sr.id=Lr),ut.features.push(Sr)}},ue.prototype._limitZoom=function(Ae){return Math.max(this.options.minZoom,Math.min(Ae,this.options.maxZoom+1))},ue.prototype._cluster=function(Ae,Ee){for(var Fe=[],Ke=this.options,tt=Ke.radius,ut=Ke.extent,ct=Ke.reduce,yt=tt/(ut*Math.pow(2,Ee)),kt=0;kt<Ae.length;kt++){var jt=Ae[kt];if(!(jt.zoom<=Ee)){jt.zoom=Ee;for(var Mr=this.trees[Ee+1],Sr=Mr.within(jt.x,jt.y,yt),Lr=jt.numPoints||1,Ar=jt.x*Lr,Ur=jt.y*Lr,fn=ct&&Lr>1?this._map(jt,!0):null,Cr=(kt<<5)+(Ee+1)+this.points.length,_r=0,En=Sr;_r<En.length;_r+=1){var Jr=En[_r],Pr=Mr.points[Jr];if(!(Pr.zoom<=Ee)){Pr.zoom=Ee;var vn=Pr.numPoints||1;Ar+=Pr.x*vn,Ur+=Pr.y*vn,Lr+=vn,Pr.parentId=Cr,ct&&(fn||(fn=this._map(jt,!0)),ct(fn,this._map(Pr)))}}Lr===1?Fe.push(jt):(jt.parentId=Cr,Fe.push(xe(Ar/Lr,Ur/Lr,Cr,Lr,fn)))}}return Fe},ue.prototype._getOriginId=function(Ae){return Ae-this.points.length>>5},ue.prototype._getOriginZoom=function(Ae){return(Ae-this.points.length)%32},ue.prototype._map=function(Ae,Ee){if(Ae.numPoints)return Ee?Xe({},Ae.properties):Ae.properties;var Fe=this.points[Ae.index].properties,Ke=this.options.map(Fe);return Ee&&Ke===Fe?Xe({},Ke):Ke};function xe(nt,Ae,Ee,Fe,Ke){return{x:nt,y:Ae,zoom:1/0,id:Ee,parentId:-1,numPoints:Fe,properties:Ke}}function he(nt,Ae){var Ee=nt.geometry.coordinates,Fe=Ee[0],Ke=Ee[1];return{x:Ce(Fe),y:Se(Ke),zoom:1/0,index:Ae,parentId:-1}}function me(nt){return{type:"Feature",id:nt.id,properties:be(nt),geometry:{type:"Point",coordinates:[Be(nt.x),Ye(nt.y)]}}}function be(nt){var Ae=nt.numPoints,Ee=Ae>=1e4?Math.round(Ae/1e3)+"k":Ae>=1e3?Math.round(Ae/100)/10+"k":Ae;return Xe(Xe({},nt.properties),{cluster:!0,cluster_id:nt.id,point_count:Ae,point_count_abbreviated:Ee})}function Ce(nt){return nt/360+.5}function Se(nt){var Ae=Math.sin(nt*Math.PI/180),Ee=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return Ee<0?0:Ee>1?1:Ee}function Be(nt){return(nt-.5)*360}function Ye(nt){var Ae=(180-nt*360)*Math.PI/180;return 360*Math.atan(Math.exp(Ae))/Math.PI-90}function Xe(nt,Ae){for(var Ee in Ae)nt[Ee]=Ae[Ee];return nt}function Te(nt){return nt.x}function Ie(nt){return nt.y}function Ze(nt,Ae,Ee,Fe){for(var Ke=Fe,tt=Ee-Ae>>1,ut=Ee-Ae,ct,yt=nt[Ae],kt=nt[Ae+1],jt=nt[Ee],Mr=nt[Ee+1],Sr=Ae+3;Sr<Ee;Sr+=3){var Lr=rt(nt[Sr],nt[Sr+1],yt,kt,jt,Mr);if(Lr>Ke)ct=Sr,Ke=Lr;else if(Lr===Ke){var Ar=Math.abs(Sr-tt);Ar<ut&&(ct=Sr,ut=Ar)}}Ke>Fe&&(ct-Ae>3&&Ze(nt,Ae,ct,Fe),nt[ct+2]=Ke,Ee-ct>3&&Ze(nt,ct,Ee,Fe))}function rt(nt,Ae,Ee,Fe,Ke,tt){var ut=Ke-Ee,ct=tt-Fe;if(ut!==0||ct!==0){var yt=((nt-Ee)*ut+(Ae-Fe)*ct)/(ut*ut+ct*ct);yt>1?(Ee=Ke,Fe=tt):yt>0&&(Ee+=ut*yt,Fe+=ct*yt)}return ut=nt-Ee,ct=Ae-Fe,ut*ut+ct*ct}function Ge(nt,Ae,Ee,Fe){var Ke={id:typeof nt=="undefined"?null:nt,type:Ae,geometry:Ee,tags:Fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return ze(Ke),Ke}function ze(nt){var Ae=nt.geometry,Ee=nt.type;if(Ee==="Point"||Ee==="MultiPoint"||Ee==="LineString")We(nt,Ae);else if(Ee==="Polygon"||Ee==="MultiLineString")for(var Fe=0;Fe<Ae.length;Fe++)We(nt,Ae[Fe]);else if(Ee==="MultiPolygon")for(Fe=0;Fe<Ae.length;Fe++)for(var Ke=0;Ke<Ae[Fe].length;Ke++)We(nt,Ae[Fe][Ke])}function We(nt,Ae){for(var Ee=0;Ee<Ae.length;Ee+=3)nt.minX=Math.min(nt.minX,Ae[Ee]),nt.minY=Math.min(nt.minY,Ae[Ee+1]),nt.maxX=Math.max(nt.maxX,Ae[Ee]),nt.maxY=Math.max(nt.maxY,Ae[Ee+1])}function mt(nt,Ae){var Ee=[];if(nt.type==="FeatureCollection")for(var Fe=0;Fe<nt.features.length;Fe++)Ft(Ee,nt.features[Fe],Ae,Fe);else nt.type==="Feature"?Ft(Ee,nt,Ae):Ft(Ee,{geometry:nt},Ae);return Ee}function Ft(nt,Ae,Ee,Fe){if(!!Ae.geometry){var Ke=Ae.geometry.coordinates,tt=Ae.geometry.type,ut=Math.pow(Ee.tolerance/((1<<Ee.maxZoom)*Ee.extent),2),ct=[],yt=Ae.id;if(Ee.promoteId?yt=Ae.properties[Ee.promoteId]:Ee.generateId&&(yt=Fe||0),tt==="Point")Xt(Ke,ct);else if(tt==="MultiPoint")for(var kt=0;kt<Ke.length;kt++)Xt(Ke[kt],ct);else if(tt==="LineString")Pt(Ke,ct,ut,!1);else if(tt==="MultiLineString")if(Ee.lineMetrics){for(kt=0;kt<Ke.length;kt++)ct=[],Pt(Ke[kt],ct,ut,!1),nt.push(Ge(yt,"LineString",ct,Ae.properties));return}else Ut(Ke,ct,ut,!1);else if(tt==="Polygon")Ut(Ke,ct,ut,!0);else if(tt==="MultiPolygon")for(kt=0;kt<Ke.length;kt++){var jt=[];Ut(Ke[kt],jt,ut,!0),ct.push(jt)}else if(tt==="GeometryCollection"){for(kt=0;kt<Ae.geometry.geometries.length;kt++)Ft(nt,{id:yt,geometry:Ae.geometry.geometries[kt],properties:Ae.properties},Ee,Fe);return}else throw new Error("Input data is not a valid GeoJSON object.");nt.push(Ge(yt,tt,ct,Ae.properties))}}function Xt(nt,Ae){Ae.push(Gt(nt[0])),Ae.push(It(nt[1])),Ae.push(0)}function Pt(nt,Ae,Ee,Fe){for(var Ke,tt,ut=0,ct=0;ct<nt.length;ct++){var yt=Gt(nt[ct][0]),kt=It(nt[ct][1]);Ae.push(yt),Ae.push(kt),Ae.push(0),ct>0&&(Fe?ut+=(Ke*kt-yt*tt)/2:ut+=Math.sqrt(Math.pow(yt-Ke,2)+Math.pow(kt-tt,2))),Ke=yt,tt=kt}var jt=Ae.length-3;Ae[2]=1,Ze(Ae,0,jt,Ee),Ae[jt+2]=1,Ae.size=Math.abs(ut),Ae.start=0,Ae.end=Ae.size}function Ut(nt,Ae,Ee,Fe){for(var Ke=0;Ke<nt.length;Ke++){var tt=[];Pt(nt[Ke],tt,Ee,Fe),Ae.push(tt)}}function Gt(nt){return nt/360+.5}function It(nt){var Ae=Math.sin(nt*Math.PI/180),Ee=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return Ee<0?0:Ee>1?1:Ee}function Ct(nt,Ae,Ee,Fe,Ke,tt,ut,ct){if(Ee/=Ae,Fe/=Ae,tt>=Ee&&ut<Fe)return nt;if(ut<Ee||tt>=Fe)return null;for(var yt=[],kt=0;kt<nt.length;kt++){var jt=nt[kt],Mr=jt.geometry,Sr=jt.type,Lr=Ke===0?jt.minX:jt.minY,Ar=Ke===0?jt.maxX:jt.maxY;if(Lr>=Ee&&Ar<Fe){yt.push(jt);continue}else if(Ar<Ee||Lr>=Fe)continue;var Ur=[];if(Sr==="Point"||Sr==="MultiPoint")lt(Mr,Ur,Ee,Fe,Ke);else if(Sr==="LineString")dt(Mr,Ur,Ee,Fe,Ke,!1,ct.lineMetrics);else if(Sr==="MultiLineString")Pe(Mr,Ur,Ee,Fe,Ke,!1);else if(Sr==="Polygon")Pe(Mr,Ur,Ee,Fe,Ke,!0);else if(Sr==="MultiPolygon")for(var fn=0;fn<Mr.length;fn++){var Cr=[];Pe(Mr[fn],Cr,Ee,Fe,Ke,!0),Cr.length&&Ur.push(Cr)}if(Ur.length){if(ct.lineMetrics&&Sr==="LineString"){for(fn=0;fn<Ur.length;fn++)yt.push(Ge(jt.id,Sr,Ur[fn],jt.tags));continue}(Sr==="LineString"||Sr==="MultiLineString")&&(Ur.length===1?(Sr="LineString",Ur=Ur[0]):Sr="MultiLineString"),(Sr==="Point"||Sr==="MultiPoint")&&(Sr=Ur.length===3?"Point":"MultiPoint"),yt.push(Ge(jt.id,Sr,Ur,jt.tags))}}return yt.length?yt:null}function lt(nt,Ae,Ee,Fe,Ke){for(var tt=0;tt<nt.length;tt+=3){var ut=nt[tt+Ke];ut>=Ee&&ut<=Fe&&(Ae.push(nt[tt]),Ae.push(nt[tt+1]),Ae.push(nt[tt+2]))}}function dt(nt,Ae,Ee,Fe,Ke,tt,ut){for(var ct=et(nt),yt=Ke===0?it:ht,kt=nt.start,jt,Mr,Sr=0;Sr<nt.length-3;Sr+=3){var Lr=nt[Sr],Ar=nt[Sr+1],Ur=nt[Sr+2],fn=nt[Sr+3],Cr=nt[Sr+4],_r=Ke===0?Lr:Ar,En=Ke===0?fn:Cr,Jr=!1;ut&&(jt=Math.sqrt(Math.pow(Lr-fn,2)+Math.pow(Ar-Cr,2))),_r<Ee?En>Ee&&(Mr=yt(ct,Lr,Ar,fn,Cr,Ee),ut&&(ct.start=kt+jt*Mr)):_r>Fe?En<Fe&&(Mr=yt(ct,Lr,Ar,fn,Cr,Fe),ut&&(ct.start=kt+jt*Mr)):Je(ct,Lr,Ar,Ur),En<Ee&&_r>=Ee&&(Mr=yt(ct,Lr,Ar,fn,Cr,Ee),Jr=!0),En>Fe&&_r<=Fe&&(Mr=yt(ct,Lr,Ar,fn,Cr,Fe),Jr=!0),!tt&&Jr&&(ut&&(ct.end=kt+jt*Mr),Ae.push(ct),ct=et(nt)),ut&&(kt+=jt)}var Pr=nt.length-3;Lr=nt[Pr],Ar=nt[Pr+1],Ur=nt[Pr+2],_r=Ke===0?Lr:Ar,_r>=Ee&&_r<=Fe&&Je(ct,Lr,Ar,Ur),Pr=ct.length-3,tt&&Pr>=3&&(ct[Pr]!==ct[0]||ct[Pr+1]!==ct[1])&&Je(ct,ct[0],ct[1],ct[2]),ct.length&&Ae.push(ct)}function et(nt){var Ae=[];return Ae.size=nt.size,Ae.start=nt.start,Ae.end=nt.end,Ae}function Pe(nt,Ae,Ee,Fe,Ke,tt){for(var ut=0;ut<nt.length;ut++)dt(nt[ut],Ae,Ee,Fe,Ke,tt,!1)}function Je(nt,Ae,Ee,Fe){nt.push(Ae),nt.push(Ee),nt.push(Fe)}function it(nt,Ae,Ee,Fe,Ke,tt){var ut=(tt-Ae)/(Fe-Ae);return nt.push(tt),nt.push(Ee+(Ke-Ee)*ut),nt.push(1),ut}function ht(nt,Ae,Ee,Fe,Ke,tt){var ut=(tt-Ee)/(Ke-Ee);return nt.push(Ae+(Fe-Ae)*ut),nt.push(tt),nt.push(1),ut}function zt(nt,Ae){var Ee=Ae.buffer/Ae.extent,Fe=nt,Ke=Ct(nt,1,-1-Ee,Ee,0,-1,2,Ae),tt=Ct(nt,1,1-Ee,2+Ee,0,-1,2,Ae);return(Ke||tt)&&(Fe=Ct(nt,1,-Ee,1+Ee,0,-1,2,Ae)||[],Ke&&(Fe=Lt(Ke,1).concat(Fe)),tt&&(Fe=Fe.concat(Lt(tt,-1)))),Fe}function Lt(nt,Ae){for(var Ee=[],Fe=0;Fe<nt.length;Fe++){var Ke=nt[Fe],tt=Ke.type,ut;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")ut=Vt(Ke.geometry,Ae);else if(tt==="MultiLineString"||tt==="Polygon"){ut=[];for(var ct=0;ct<Ke.geometry.length;ct++)ut.push(Vt(Ke.geometry[ct],Ae))}else if(tt==="MultiPolygon")for(ut=[],ct=0;ct<Ke.geometry.length;ct++){for(var yt=[],kt=0;kt<Ke.geometry[ct].length;kt++)yt.push(Vt(Ke.geometry[ct][kt],Ae));ut.push(yt)}Ee.push(Ge(Ke.id,tt,ut,Ke.tags))}return Ee}function Vt(nt,Ae){var Ee=[];Ee.size=nt.size,nt.start!==void 0&&(Ee.start=nt.start,Ee.end=nt.end);for(var Fe=0;Fe<nt.length;Fe+=3)Ee.push(nt[Fe]+Ae,nt[Fe+1],nt[Fe+2]);return Ee}function $t(nt,Ae){if(nt.transformed)return nt;var Ee=1<<nt.z,Fe=nt.x,Ke=nt.y,tt,ut,ct;for(tt=0;tt<nt.features.length;tt++){var yt=nt.features[tt],kt=yt.geometry,jt=yt.type;if(yt.geometry=[],jt===1)for(ut=0;ut<kt.length;ut+=2)yt.geometry.push(Ht(kt[ut],kt[ut+1],Ae,Ee,Fe,Ke));else for(ut=0;ut<kt.length;ut++){var Mr=[];for(ct=0;ct<kt[ut].length;ct+=2)Mr.push(Ht(kt[ut][ct],kt[ut][ct+1],Ae,Ee,Fe,Ke));yt.geometry.push(Mr)}}return nt.transformed=!0,nt}function Ht(nt,Ae,Ee,Fe,Ke,tt){return[Math.round(Ee*(nt*Fe-Ke)),Math.round(Ee*(Ae*Fe-tt))]}function tr(nt,Ae,Ee,Fe,Ke){for(var tt=Ae===Ke.maxZoom?0:Ke.tolerance/((1<<Ae)*Ke.extent),ut={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ee,y:Fe,z:Ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ct=0;ct<nt.length;ct++){ut.numFeatures++,qe(ut,nt[ct],tt,Ke);var yt=nt[ct].minX,kt=nt[ct].minY,jt=nt[ct].maxX,Mr=nt[ct].maxY;yt<ut.minX&&(ut.minX=yt),kt<ut.minY&&(ut.minY=kt),jt>ut.maxX&&(ut.maxX=jt),Mr>ut.maxY&&(ut.maxY=Mr)}return ut}function qe(nt,Ae,Ee,Fe){var Ke=Ae.geometry,tt=Ae.type,ut=[];if(tt==="Point"||tt==="MultiPoint")for(var ct=0;ct<Ke.length;ct+=3)ut.push(Ke[ct]),ut.push(Ke[ct+1]),nt.numPoints++,nt.numSimplified++;else if(tt==="LineString")xt(ut,Ke,nt,Ee,!1,!1);else if(tt==="MultiLineString"||tt==="Polygon")for(ct=0;ct<Ke.length;ct++)xt(ut,Ke[ct],nt,Ee,tt==="Polygon",ct===0);else if(tt==="MultiPolygon")for(var yt=0;yt<Ke.length;yt++){var kt=Ke[yt];for(ct=0;ct<kt.length;ct++)xt(ut,kt[ct],nt,Ee,!0,ct===0)}if(ut.length){var jt=Ae.tags||null;if(tt==="LineString"&&Fe.lineMetrics){jt={};for(var Mr in Ae.tags)jt[Mr]=Ae.tags[Mr];jt.mapbox_clip_start=Ke.start/Ke.size,jt.mapbox_clip_end=Ke.end/Ke.size}var Sr={geometry:ut,type:tt==="Polygon"||tt==="MultiPolygon"?3:tt==="LineString"||tt==="MultiLineString"?2:1,tags:jt};Ae.id!==null&&(Sr.id=Ae.id),nt.features.push(Sr)}}function xt(nt,Ae,Ee,Fe,Ke,tt){var ut=Fe*Fe;if(Fe>0&&Ae.size<(Ke?ut:Fe)){Ee.numPoints+=Ae.length/3;return}for(var ct=[],yt=0;yt<Ae.length;yt+=3)(Fe===0||Ae[yt+2]>ut)&&(Ee.numSimplified++,ct.push(Ae[yt]),ct.push(Ae[yt+1])),Ee.numPoints++;Ke&&Rt(ct,tt),nt.push(ct)}function Rt(nt,Ae){for(var Ee=0,Fe=0,Ke=nt.length,tt=Ke-2;Fe<Ke;tt=Fe,Fe+=2)Ee+=(nt[Fe]-nt[tt])*(nt[Fe+1]+nt[tt+1]);if(Ee>0===Ae)for(Fe=0,Ke=nt.length;Fe<Ke/2;Fe+=2){var ut=nt[Fe],ct=nt[Fe+1];nt[Fe]=nt[Ke-2-Fe],nt[Fe+1]=nt[Ke-1-Fe],nt[Ke-2-Fe]=ut,nt[Ke-1-Fe]=ct}}function fr(nt,Ae){return new br(nt,Ae)}function br(nt,Ae){Ae=this.options=Tr(Object.create(this.options),Ae);var Ee=Ae.debug;if(Ee&&console.time("preprocess data"),Ae.maxZoom<0||Ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ae.promoteId&&Ae.generateId)throw new Error("promoteId and generateId cannot be used together.");var Fe=mt(nt,Ae);this.tiles={},this.tileCoords=[],Ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ae.indexMaxZoom,Ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Fe=zt(Fe,Ae),Fe.length&&this.splitTile(Fe,0,0,0),Ee&&(Fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}br.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},br.prototype.splitTile=function(nt,Ae,Ee,Fe,Ke,tt,ut){for(var ct=[nt,Ae,Ee,Fe],yt=this.options,kt=yt.debug;ct.length;){Fe=ct.pop(),Ee=ct.pop(),Ae=ct.pop(),nt=ct.pop();var jt=1<<Ae,Mr=pr(Ae,Ee,Fe),Sr=this.tiles[Mr];if(!Sr&&(kt>1&&console.time("creation"),Sr=this.tiles[Mr]=tr(nt,Ae,Ee,Fe,yt),this.tileCoords.push({z:Ae,x:Ee,y:Fe}),kt)){kt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ae,Ee,Fe,Sr.numFeatures,Sr.numPoints,Sr.numSimplified),console.timeEnd("creation"));var Lr="z"+Ae;this.stats[Lr]=(this.stats[Lr]||0)+1,this.total++}if(Sr.source=nt,Ke){if(Ae===yt.maxZoom||Ae===Ke)continue;var Ar=1<<Ke-Ae;if(Ee!==Math.floor(tt/Ar)||Fe!==Math.floor(ut/Ar))continue}else if(Ae===yt.indexMaxZoom||Sr.numPoints<=yt.indexMaxPoints)continue;if(Sr.source=null,nt.length!==0){kt>1&&console.time("clipping");var Ur=.5*yt.buffer/yt.extent,fn=.5-Ur,Cr=.5+Ur,_r=1+Ur,En,Jr,Pr,vn,xn,qr;En=Jr=Pr=vn=null,xn=Ct(nt,jt,Ee-Ur,Ee+Cr,0,Sr.minX,Sr.maxX,yt),qr=Ct(nt,jt,Ee+fn,Ee+_r,0,Sr.minX,Sr.maxX,yt),nt=null,xn&&(En=Ct(xn,jt,Fe-Ur,Fe+Cr,1,Sr.minY,Sr.maxY,yt),Jr=Ct(xn,jt,Fe+fn,Fe+_r,1,Sr.minY,Sr.maxY,yt),xn=null),qr&&(Pr=Ct(qr,jt,Fe-Ur,Fe+Cr,1,Sr.minY,Sr.maxY,yt),vn=Ct(qr,jt,Fe+fn,Fe+_r,1,Sr.minY,Sr.maxY,yt),qr=null),kt>1&&console.timeEnd("clipping"),ct.push(En||[],Ae+1,Ee*2,Fe*2),ct.push(Jr||[],Ae+1,Ee*2,Fe*2+1),ct.push(Pr||[],Ae+1,Ee*2+1,Fe*2),ct.push(vn||[],Ae+1,Ee*2+1,Fe*2+1)}}},br.prototype.getTile=function(nt,Ae,Ee){var Fe=this.options,Ke=Fe.extent,tt=Fe.debug;if(nt<0||nt>24)return null;var ut=1<<nt;Ae=(Ae%ut+ut)%ut;var ct=pr(nt,Ae,Ee);if(this.tiles[ct])return $t(this.tiles[ct],Ke);tt>1&&console.log("drilling down to z%d-%d-%d",nt,Ae,Ee);for(var yt=nt,kt=Ae,jt=Ee,Mr;!Mr&&yt>0;)yt--,kt=Math.floor(kt/2),jt=Math.floor(jt/2),Mr=this.tiles[pr(yt,kt,jt)];return!Mr||!Mr.source?null:(tt>1&&console.log("found parent tile z%d-%d-%d",yt,kt,jt),tt>1&&console.time("drilling down"),this.splitTile(Mr.source,yt,kt,jt,nt,Ae,Ee),tt>1&&console.timeEnd("drilling down"),this.tiles[ct]?$t(this.tiles[ct],Ke):null)};function pr(nt,Ae,Ee){return((1<<nt)*Ee+Ae)*32+nt}function Tr(nt,Ae){for(var Ee in Ae)nt[Ee]=Ae[Ee];return nt}function Nr(nt,Ae){var Ee=nt.tileID.canonical;if(!this._geoJSONIndex)return Ae(null,null);var Fe=this._geoJSONIndex.getTile(Ee.z,Ee.x,Ee.y);if(!Fe)return Ae(null,null);var Ke=new _(Fe.features),tt=P(Ke);(tt.byteOffset!==0||tt.byteLength!==tt.buffer.byteLength)&&(tt=new Uint8Array(tt)),Ae(null,{vectorTile:Ke,rawData:tt.buffer})}var Ir=function(nt){function Ae(Ee,Fe,Ke,tt){nt.call(this,Ee,Fe,Ke,Nr),tt&&(this.loadGeoJSON=tt)}return nt&&(Ae.__proto__=nt),Ae.prototype=Object.create(nt&&nt.prototype),Ae.prototype.constructor=Ae,Ae.prototype.loadData=function(Fe,Ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ke,this._pendingLoadDataParams=Fe,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ae.prototype._loadData=function(){var Fe=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Ke=this._pendingCallback,tt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ut=tt&&tt.request&&tt.request.collectResourceTiming?new t.RequestPerformance(tt.request):!1;this.loadGeoJSON(tt,function(ct,yt){if(ct||!yt)return Ke(ct);if(typeof yt!="object")return Ke(new Error("Input data given to '"+tt.source+"' is not a valid GeoJSON object."));g(yt,!0);try{Fe._geoJSONIndex=tt.cluster?new ue(lr(tt)).load(yt.features):fr(yt,tt.geojsonVtOptions)}catch(Mr){return Ke(Mr)}Fe.loaded={};var kt={};if(ut){var jt=ut.finish();jt&&(kt.resourceTiming={},kt.resourceTiming[tt.source]=JSON.parse(JSON.stringify(jt)))}Ke(null,kt)})}},Ae.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ae.prototype.reloadTile=function(Fe,Ke){var tt=this.loaded,ut=Fe.uid;return tt&&tt[ut]?nt.prototype.reloadTile.call(this,Fe,Ke):this.loadTile(Fe,Ke)},Ae.prototype.loadGeoJSON=function(Fe,Ke){if(Fe.request)t.getJSON(Fe.request,Ke);else if(typeof Fe.data=="string")try{return Ke(null,JSON.parse(Fe.data))}catch{return Ke(new Error("Input data given to '"+Fe.source+"' is not a valid GeoJSON object."))}else return Ke(new Error("Input data given to '"+Fe.source+"' is not a valid GeoJSON object."))},Ae.prototype.removeSource=function(Fe,Ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ke()},Ae.prototype.getClusterExpansionZoom=function(Fe,Ke){try{Ke(null,this._geoJSONIndex.getClusterExpansionZoom(Fe.clusterId))}catch(tt){Ke(tt)}},Ae.prototype.getClusterChildren=function(Fe,Ke){try{Ke(null,this._geoJSONIndex.getChildren(Fe.clusterId))}catch(tt){Ke(tt)}},Ae.prototype.getClusterLeaves=function(Fe,Ke){try{Ke(null,this._geoJSONIndex.getLeaves(Fe.clusterId,Fe.limit,Fe.offset))}catch(tt){Ke(tt)}},Ae}(d);function lr(nt){var Ae=nt.superclusterOptions,Ee=nt.clusterProperties;if(!Ee||!Ae)return Ae;for(var Fe={},Ke={},tt={accumulated:null,zoom:0},ut={properties:null},ct=Object.keys(Ee),yt=0,kt=ct;yt<kt.length;yt+=1){var jt=kt[yt],Mr=Ee[jt],Sr=Mr[0],Lr=Mr[1],Ar=t.createExpression(Lr),Ur=t.createExpression(typeof Sr=="string"?[Sr,["accumulated"],["get",jt]]:Sr);Fe[jt]=Ar.value,Ke[jt]=Ur.value}return Ae.map=function(fn){ut.properties=fn;for(var Cr={},_r=0,En=ct;_r<En.length;_r+=1){var Jr=En[_r];Cr[Jr]=Fe[Jr].evaluate(tt,ut)}return Cr},Ae.reduce=function(fn,Cr){ut.properties=Cr;for(var _r=0,En=ct;_r<En.length;_r+=1){var Jr=En[_r];tt.accumulated=fn[Jr],fn[Jr]=Ke[Jr].evaluate(tt,ut)}},Ae}var Yr=function(Ae){var Ee=this;this.self=Ae,this.actor=new t.Actor(Ae,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:Ir},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Fe,Ke){if(Ee.workerSourceTypes[Fe])throw new Error('Worker source with name "'+Fe+'" already registered.');Ee.workerSourceTypes[Fe]=Ke},this.self.registerRTLTextPlugin=function(Fe){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=Fe.applyArabicShaping,t.plugin.processBidirectionalText=Fe.processBidirectionalText,t.plugin.processStyledBidirectionalText=Fe.processStyledBidirectionalText}};return Yr.prototype.setReferrer=function(Ae,Ee){this.referrer=Ee},Yr.prototype.setImages=function(Ae,Ee,Fe){this.availableImages[Ae]=Ee;for(var Ke in this.workerSources[Ae]){var tt=this.workerSources[Ae][Ke];for(var ut in tt)tt[ut].availableImages=Ee}Fe()},Yr.prototype.setLayers=function(Ae,Ee,Fe){this.getLayerIndex(Ae).replace(Ee),Fe()},Yr.prototype.updateLayers=function(Ae,Ee,Fe){this.getLayerIndex(Ae).update(Ee.layers,Ee.removedIds),Fe()},Yr.prototype.loadTile=function(Ae,Ee,Fe){this.getWorkerSource(Ae,Ee.type,Ee.source).loadTile(Ee,Fe)},Yr.prototype.loadDEMTile=function(Ae,Ee,Fe){this.getDEMWorkerSource(Ae,Ee.source).loadTile(Ee,Fe)},Yr.prototype.reloadTile=function(Ae,Ee,Fe){this.getWorkerSource(Ae,Ee.type,Ee.source).reloadTile(Ee,Fe)},Yr.prototype.abortTile=function(Ae,Ee,Fe){this.getWorkerSource(Ae,Ee.type,Ee.source).abortTile(Ee,Fe)},Yr.prototype.removeTile=function(Ae,Ee,Fe){this.getWorkerSource(Ae,Ee.type,Ee.source).removeTile(Ee,Fe)},Yr.prototype.removeDEMTile=function(Ae,Ee){this.getDEMWorkerSource(Ae,Ee.source).removeTile(Ee)},Yr.prototype.removeSource=function(Ae,Ee,Fe){if(!(!this.workerSources[Ae]||!this.workerSources[Ae][Ee.type]||!this.workerSources[Ae][Ee.type][Ee.source])){var Ke=this.workerSources[Ae][Ee.type][Ee.source];delete this.workerSources[Ae][Ee.type][Ee.source],Ke.removeSource!==void 0?Ke.removeSource(Ee,Fe):Fe()}},Yr.prototype.loadWorkerSource=function(Ae,Ee,Fe){try{this.self.importScripts(Ee.url),Fe()}catch(Ke){Fe(Ke.toString())}},Yr.prototype.syncRTLPluginState=function(Ae,Ee,Fe){try{t.plugin.setState(Ee);var Ke=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&Ke!=null){this.self.importScripts(Ke);var tt=t.plugin.isParsed(),ut=tt?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ke);Fe(ut,tt)}}catch(ct){Fe(ct.toString())}},Yr.prototype.getAvailableImages=function(Ae){var Ee=this.availableImages[Ae];return Ee||(Ee=[]),Ee},Yr.prototype.getLayerIndex=function(Ae){var Ee=this.layerIndexes[Ae];return Ee||(Ee=this.layerIndexes[Ae]=new n),Ee},Yr.prototype.getWorkerSource=function(Ae,Ee,Fe){var Ke=this;if(this.workerSources[Ae]||(this.workerSources[Ae]={}),this.workerSources[Ae][Ee]||(this.workerSources[Ae][Ee]={}),!this.workerSources[Ae][Ee][Fe]){var tt={send:function(ut,ct,yt){Ke.actor.send(ut,ct,yt,Ae)}};this.workerSources[Ae][Ee][Fe]=new this.workerSourceTypes[Ee](tt,this.getLayerIndex(Ae),this.getAvailableImages(Ae))}return this.workerSources[Ae][Ee][Fe]},Yr.prototype.getDEMWorkerSource=function(Ae,Ee){return this.demWorkerSources[Ae]||(this.demWorkerSources[Ae]={}),this.demWorkerSources[Ae][Ee]||(this.demWorkerSources[Ae][Ee]=new y),this.demWorkerSources[Ae][Ee]},Yr.prototype.enforceCacheSizeLimit=function(Ae,Ee){t.enforceCacheSizeLimit(Ee)},typeof WorkerGlobalScope!="undefined"&&typeof t.window!="undefined"&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new Yr(t.window)),Yr}),x(["./shared"],function(t){var i=t.createCommonjsModule(function(pe){pe.exports?pe.exports=Z:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Z,window.mapboxgl.notSupportedReason=ge);function Z(Vr){return!ge(Vr)}function ge(Vr){if(!Q())return"not a browser";if(!ye())return"insufficent Array support";if(!Le())return"insufficient Function support";if(!De())return"insufficient Object support";if(!Qe())return"insufficient JSON support";if(!vt())return"insufficient worker support";if(!Mt())return"insufficient Uint8ClampedArray support";if(!Yt())return"insufficient ArrayBuffer support";if(!ar())return"insufficient Canvas/getImageData support";if(!Dr(Vr&&Vr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function Q(){return typeof window!="undefined"&&typeof document!="undefined"}function ye(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Le(){return Function.prototype&&Function.prototype.bind}function De(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Qe(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function vt(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Vr=new Blob([""],{type:"text/javascript"}),on=URL.createObjectURL(Vr),_n,Bn;try{Bn=new Worker(on),_n=!0}catch{_n=!1}return Bn&&Bn.terminate(),URL.revokeObjectURL(on),_n}function Mt(){return"Uint8ClampedArray"in window}function Yt(){return ArrayBuffer.isView}function ar(){var Vr=document.createElement("canvas");Vr.width=Vr.height=1;var on=Vr.getContext("2d");if(!on)return!1;var _n=on.getImageData(0,0,1,1);return _n&&_n.width===Vr.width}var cr={};function Dr(Vr){return cr[Vr]===void 0&&(cr[Vr]=jr(Vr)),cr[Vr]}Z.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Xr(Vr){var on=document.createElement("canvas"),_n=Object.create(Z.webGLContextAttributes);return _n.failIfMajorPerformanceCaveat=Vr,on.probablySupportsContext?on.probablySupportsContext("webgl",_n)||on.probablySupportsContext("experimental-webgl",_n):on.supportsContext?on.supportsContext("webgl",_n)||on.supportsContext("experimental-webgl",_n):on.getContext("webgl",_n)||on.getContext("experimental-webgl",_n)}function jr(Vr){var on=Xr(Vr);if(!on)return!1;var _n=on.createShader(on.VERTEX_SHADER);return!_n||on.isContextLost()?!1:(on.shaderSource(_n,"void main() {}"),on.compileShader(_n),on.getShaderParameter(_n,on.COMPILE_STATUS)===!0)}}),a={};a.create=function(pe,Z,ge){var Q=t.window.document.createElement(pe);return Z!==void 0&&(Q.className=Z),ge&&ge.appendChild(Q),Q},a.createNS=function(pe,Z){var ge=t.window.document.createElementNS(pe,Z);return ge};var r=t.window.document.documentElement.style;function n(pe){if(!r)return pe[0];for(var Z=0;Z<pe.length;Z++)if(pe[Z]in r)return pe[Z];return pe[0]}var f=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),l;a.disableDrag=function(){r&&f&&(l=r[f],r[f]="none")},a.enableDrag=function(){r&&f&&(r[f]=l)};var o=n(["transform","WebkitTransform"]);a.setTransform=function(pe,Z){pe.style[o]=Z};var c=!1;try{var v=Object.defineProperty({},"passive",{get:function(){c=!0}});t.window.addEventListener("test",v,v),t.window.removeEventListener("test",v,v)}catch{c=!1}a.addEventListener=function(pe,Z,ge,Q){Q===void 0&&(Q={}),"passive"in Q&&c?pe.addEventListener(Z,ge,Q):pe.addEventListener(Z,ge,Q.capture)},a.removeEventListener=function(pe,Z,ge,Q){Q===void 0&&(Q={}),"passive"in Q&&c?pe.removeEventListener(Z,ge,Q):pe.removeEventListener(Z,ge,Q.capture)};var d=function(pe){pe.preventDefault(),pe.stopPropagation(),t.window.removeEventListener("click",d,!0)};a.suppressClick=function(){t.window.addEventListener("click",d,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",d,!0)},0)},a.mousePos=function(pe,Z){var ge=pe.getBoundingClientRect();return new t.Point(Z.clientX-ge.left-pe.clientLeft,Z.clientY-ge.top-pe.clientTop)},a.touchPos=function(pe,Z){for(var ge=pe.getBoundingClientRect(),Q=[],ye=0;ye<Z.length;ye++)Q.push(new t.Point(Z[ye].clientX-ge.left-pe.clientLeft,Z[ye].clientY-ge.top-pe.clientTop));return Q},a.mouseButton=function(pe){return typeof t.window.InstallTrigger!="undefined"&&pe.button===2&&pe.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:pe.button},a.remove=function(pe){pe.parentNode&&pe.parentNode.removeChild(pe)};function p(pe,Z,ge){var Q,ye,Le,De=t.browser.devicePixelRatio>1?"@2x":"",Qe=t.getJSON(Z.transformRequest(Z.normalizeSpriteURL(pe,De,".json"),t.ResourceType.SpriteJSON),function(Yt,ar){Qe=null,Le||(Le=Yt,Q=ar,Mt())}),vt=t.getImage(Z.transformRequest(Z.normalizeSpriteURL(pe,De,".png"),t.ResourceType.SpriteImage),function(Yt,ar){vt=null,Le||(Le=Yt,ye=ar,Mt())});function Mt(){if(Le)ge(Le);else if(Q&&ye){var Yt=t.browser.getImageData(ye),ar={};for(var cr in Q){var Dr=Q[cr],Xr=Dr.width,jr=Dr.height,Vr=Dr.x,on=Dr.y,_n=Dr.sdf,Bn=Dr.pixelRatio,Kn=Dr.stretchX,ca=Dr.stretchY,pa=Dr.content,ha=new t.RGBAImage({width:Xr,height:jr});t.RGBAImage.copy(Yt,ha,{x:Vr,y:on},{x:0,y:0},{width:Xr,height:jr}),ar[cr]={data:ha,pixelRatio:Bn,sdf:_n,stretchX:Kn,stretchY:ca,content:pa}}ge(null,ar)}}return{cancel:function(){Qe&&(Qe.cancel(),Qe=null),vt&&(vt.cancel(),vt=null)}}}function y(pe){var Z=pe.userImage;if(Z&&Z.render){var ge=Z.render();if(ge)return pe.data.replace(new Uint8Array(Z.data.buffer)),!0}return!1}var g=1,A=function(pe){function Z(){pe.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.isLoaded=function(){return this.loaded},Z.prototype.setLoaded=function(Q){if(this.loaded!==Q&&(this.loaded=Q,Q)){for(var ye=0,Le=this.requestors;ye<Le.length;ye+=1){var De=Le[ye],Qe=De.ids,vt=De.callback;this._notify(Qe,vt)}this.requestors=[]}},Z.prototype.getImage=function(Q){return this.images[Q]},Z.prototype.addImage=function(Q,ye){this._validate(Q,ye)&&(this.images[Q]=ye)},Z.prototype._validate=function(Q,ye){var Le=!0;return this._validateStretch(ye.stretchX,ye.data&&ye.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchX" value'))),Le=!1),this._validateStretch(ye.stretchY,ye.data&&ye.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchY" value'))),Le=!1),this._validateContent(ye.content,ye)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "content" value'))),Le=!1),Le},Z.prototype._validateStretch=function(Q,ye){if(!Q)return!0;for(var Le=0,De=0,Qe=Q;De<Qe.length;De+=1){var vt=Qe[De];if(vt[0]<Le||vt[1]<vt[0]||ye<vt[1])return!1;Le=vt[1]}return!0},Z.prototype._validateContent=function(Q,ye){return Q?!(Q.length!==4||Q[0]<0||ye.data.width<Q[0]||Q[1]<0||ye.data.height<Q[1]||Q[2]<0||ye.data.width<Q[2]||Q[3]<0||ye.data.height<Q[3]||Q[2]<Q[0]||Q[3]<Q[1]):!0},Z.prototype.updateImage=function(Q,ye){var Le=this.images[Q];ye.version=Le.version+1,this.images[Q]=ye,this.updatedImages[Q]=!0},Z.prototype.removeImage=function(Q){var ye=this.images[Q];delete this.images[Q],delete this.patterns[Q],ye.userImage&&ye.userImage.onRemove&&ye.userImage.onRemove()},Z.prototype.listImages=function(){return Object.keys(this.images)},Z.prototype.getImages=function(Q,ye){var Le=!0;if(!this.isLoaded())for(var De=0,Qe=Q;De<Qe.length;De+=1){var vt=Qe[De];this.images[vt]||(Le=!1)}this.isLoaded()||Le?this._notify(Q,ye):this.requestors.push({ids:Q,callback:ye})},Z.prototype._notify=function(Q,ye){for(var Le={},De=0,Qe=Q;De<Qe.length;De+=1){var vt=Qe[De];this.images[vt]||this.fire(new t.Event("styleimagemissing",{id:vt}));var Mt=this.images[vt];Mt?Le[vt]={data:Mt.data.clone(),pixelRatio:Mt.pixelRatio,sdf:Mt.sdf,version:Mt.version,stretchX:Mt.stretchX,stretchY:Mt.stretchY,content:Mt.content,hasRenderCallback:Boolean(Mt.userImage&&Mt.userImage.render)}:t.warnOnce('Image "'+vt+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ye(null,Le)},Z.prototype.getPixelSize=function(){var Q=this.atlasImage,ye=Q.width,Le=Q.height;return{width:ye,height:Le}},Z.prototype.getPattern=function(Q){var ye=this.patterns[Q],Le=this.getImage(Q);if(!Le)return null;if(ye&&ye.position.version===Le.version)return ye.position;if(ye)ye.position.version=Le.version;else{var De=Le.data.width+g*2,Qe=Le.data.height+g*2,vt={w:De,h:Qe,x:0,y:0},Mt=new t.ImagePosition(vt,Le);this.patterns[Q]={bin:vt,position:Mt}}return this._updatePatternAtlas(),this.patterns[Q].position},Z.prototype.bind=function(Q){var ye=Q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(Q,this.atlasImage,ye.RGBA),this.atlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)},Z.prototype._updatePatternAtlas=function(){var Q=[];for(var ye in this.patterns)Q.push(this.patterns[ye].bin);var Le=t.potpack(Q),De=Le.w,Qe=Le.h,vt=this.atlasImage;vt.resize({width:De||1,height:Qe||1});for(var Mt in this.patterns){var Yt=this.patterns[Mt],ar=Yt.bin,cr=ar.x+g,Dr=ar.y+g,Xr=this.images[Mt].data,jr=Xr.width,Vr=Xr.height;t.RGBAImage.copy(Xr,vt,{x:0,y:0},{x:cr,y:Dr},{width:jr,height:Vr}),t.RGBAImage.copy(Xr,vt,{x:0,y:Vr-1},{x:cr,y:Dr-1},{width:jr,height:1}),t.RGBAImage.copy(Xr,vt,{x:0,y:0},{x:cr,y:Dr+Vr},{width:jr,height:1}),t.RGBAImage.copy(Xr,vt,{x:jr-1,y:0},{x:cr-1,y:Dr},{width:1,height:Vr}),t.RGBAImage.copy(Xr,vt,{x:0,y:0},{x:cr+jr,y:Dr},{width:1,height:Vr})}this.dirty=!0},Z.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Z.prototype.dispatchRenderCallbacks=function(Q){for(var ye=0,Le=Q;ye<Le.length;ye+=1){var De=Le[ye];if(!this.callbackDispatchedThisFrame[De]){this.callbackDispatchedThisFrame[De]=!0;var Qe=this.images[De],vt=y(Qe);vt&&this.updateImage(De,Qe)}}},Z}(t.Evented);function b(pe,Z,ge,Q,ye){var Le=Z*256,De=Le+255,Qe=Q.transformRequest(Q.normalizeGlyphsURL(ge).replace("{fontstack}",pe).replace("{range}",Le+"-"+De),t.ResourceType.Glyphs);t.getArrayBuffer(Qe,function(vt,Mt){if(vt)ye(vt);else if(Mt){for(var Yt={},ar=0,cr=t.parseGlyphPBF(Mt);ar<cr.length;ar+=1){var Dr=cr[ar];Yt[Dr.id]=Dr}ye(null,Yt)}})}var M=_,w=_,T=1e20;function _(pe,Z,ge,Q,ye,Le){this.fontSize=pe||24,this.buffer=Z===void 0?3:Z,this.cutoff=Q||.25,this.fontFamily=ye||"sans-serif",this.fontWeight=Le||"normal",this.radius=ge||8;var De=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=De,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(De*De),this.gridInner=new Float64Array(De*De),this.f=new Float64Array(De),this.d=new Float64Array(De),this.z=new Float64Array(De+1),this.v=new Int16Array(De),this.middle=Math.round(De/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}_.prototype.draw=function(pe){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(pe,this.buffer,this.middle);for(var Z=this.ctx.getImageData(0,0,this.size,this.size),ge=new Uint8ClampedArray(this.size*this.size),Q=0;Q<this.size*this.size;Q++){var ye=Z.data[Q*4+3]/255;this.gridOuter[Q]=ye===1?0:ye===0?T:Math.pow(Math.max(0,.5-ye),2),this.gridInner[Q]=ye===1?T:ye===0?0:Math.pow(Math.max(0,ye-.5),2)}for(h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Q=0;Q<this.size*this.size;Q++){var Le=this.gridOuter[Q]-this.gridInner[Q];ge[Q]=Math.max(0,Math.min(255,Math.round(255-255*(Le/this.radius+this.cutoff))))}return ge};function h(pe,Z,ge,Q,ye,Le,De){for(var Qe=0;Qe<Z;Qe++){for(var vt=0;vt<ge;vt++)Q[vt]=pe[vt*Z+Qe];for(L(Q,ye,Le,De,ge),vt=0;vt<ge;vt++)pe[vt*Z+Qe]=ye[vt]}for(vt=0;vt<ge;vt++){for(Qe=0;Qe<Z;Qe++)Q[Qe]=pe[vt*Z+Qe];for(L(Q,ye,Le,De,Z),Qe=0;Qe<Z;Qe++)pe[vt*Z+Qe]=Math.sqrt(ye[Qe])}}function L(pe,Z,ge,Q,ye){ge[0]=0,Q[0]=-T,Q[1]=+T;for(var Le=1,De=0;Le<ye;Le++){for(var Qe=(pe[Le]+Le*Le-(pe[ge[De]]+ge[De]*ge[De]))/(2*Le-2*ge[De]);Qe<=Q[De];)De--,Qe=(pe[Le]+Le*Le-(pe[ge[De]]+ge[De]*ge[De]))/(2*Le-2*ge[De]);De++,ge[De]=Le,Q[De]=Qe,Q[De+1]=+T}for(Le=0,De=0;Le<ye;Le++){for(;Q[De+1]<Le;)De++;Z[Le]=(Le-ge[De])*(Le-ge[De])+pe[ge[De]]}}M.default=w;var S=function(Z,ge){this.requestManager=Z,this.localIdeographFontFamily=ge,this.entries={}};S.prototype.setURL=function(Z){this.url=Z},S.prototype.getGlyphs=function(Z,ge){var Q=this,ye=[];for(var Le in Z)for(var De=0,Qe=Z[Le];De<Qe.length;De+=1){var vt=Qe[De];ye.push({stack:Le,id:vt})}t.asyncAll(ye,function(Mt,Yt){var ar=Mt.stack,cr=Mt.id,Dr=Q.entries[ar];Dr||(Dr=Q.entries[ar]={glyphs:{},requests:{},ranges:{}});var Xr=Dr.glyphs[cr];if(Xr!==void 0){Yt(null,{stack:ar,id:cr,glyph:Xr});return}if(Xr=Q._tinySDF(Dr,ar,cr),Xr){Dr.glyphs[cr]=Xr,Yt(null,{stack:ar,id:cr,glyph:Xr});return}var jr=Math.floor(cr/256);if(jr*256>65535){Yt(new Error("glyphs > 65535 not supported"));return}if(Dr.ranges[jr]){Yt(null,{stack:ar,id:cr,glyph:Xr});return}var Vr=Dr.requests[jr];Vr||(Vr=Dr.requests[jr]=[],S.loadGlyphRange(ar,jr,Q.url,Q.requestManager,function(on,_n){if(_n){for(var Bn in _n)Q._doesCharSupportLocalGlyph(+Bn)||(Dr.glyphs[+Bn]=_n[+Bn]);Dr.ranges[jr]=!0}for(var Kn=0,ca=Vr;Kn<ca.length;Kn+=1){var pa=ca[Kn];pa(on,_n)}delete Dr.requests[jr]})),Vr.push(function(on,_n){on?Yt(on):_n&&Yt(null,{stack:ar,id:cr,glyph:_n[cr]||null})})},function(Mt,Yt){if(Mt)ge(Mt);else if(Yt){for(var ar={},cr=0,Dr=Yt;cr<Dr.length;cr+=1){var Xr=Dr[cr],jr=Xr.stack,Vr=Xr.id,on=Xr.glyph;(ar[jr]||(ar[jr]={}))[Vr]=on&&{id:on.id,bitmap:on.bitmap.clone(),metrics:on.metrics}}ge(null,ar)}})},S.prototype._doesCharSupportLocalGlyph=function(Z){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](Z)||t.isChar["Hangul Syllables"](Z)||t.isChar.Hiragana(Z)||t.isChar.Katakana(Z))},S.prototype._tinySDF=function(Z,ge,Q){var ye=this.localIdeographFontFamily;if(!!ye&&!!this._doesCharSupportLocalGlyph(Q)){var Le=Z.tinySDF;if(!Le){var De="400";/bold/i.test(ge)?De="900":/medium/i.test(ge)?De="500":/light/i.test(ge)&&(De="200"),Le=Z.tinySDF=new S.TinySDF(24,3,8,.25,ye,De)}return{id:Q,bitmap:new t.AlphaImage({width:30,height:30},Le.draw(String.fromCharCode(Q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=b,S.TinySDF=M;var k=function(){this.specification=t.styleSpec.light.position};k.prototype.possiblyEvaluate=function(Z,ge){return t.sphericalToCartesian(Z.expression.evaluate(ge))},k.prototype.interpolate=function(Z,ge,Q){return{x:t.number(Z.x,ge.x,Q),y:t.number(Z.y,ge.y,Q),z:t.number(Z.z,ge.z,Q)}};var P=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new k,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),O="-transition",F=function(pe){function Z(ge){pe.call(this),this._transitionable=new t.Transitionable(P),this.setLight(ge),this._transitioning=this._transitionable.untransitioned()}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getLight=function(){return this._transitionable.serialize()},Z.prototype.setLight=function(Q,ye){if(ye===void 0&&(ye={}),!this._validate(t.validateLight,Q,ye))for(var Le in Q){var De=Q[Le];t.endsWith(Le,O)?this._transitionable.setTransition(Le.slice(0,-O.length),De):this._transitionable.setValue(Le,De)}},Z.prototype.updateTransitions=function(Q){this._transitioning=this._transitionable.transitioned(Q,this._transitioning)},Z.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Z.prototype.recalculate=function(Q){this.properties=this._transitioning.possiblyEvaluate(Q)},Z.prototype._validate=function(Q,ye,Le){return Le&&Le.validate===!1?!1:t.emitValidationErrors(this,Q.call(t.validateStyle,t.extend({value:ye,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},Z}(t.Evented),D=function(Z,ge){this.width=Z,this.height=ge,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(Z,ge){var Q=Z.join(",")+String(ge);return this.dashEntry[Q]||(this.dashEntry[Q]=this.addDash(Z,ge)),this.dashEntry[Q]},D.prototype.getDashRanges=function(Z,ge,Q){var ye=Z.length%2==1,Le=[],De=ye?-Z[Z.length-1]*Q:0,Qe=Z[0]*Q,vt=!0;Le.push({left:De,right:Qe,isDash:vt,zeroLength:Z[0]===0});for(var Mt=Z[0],Yt=1;Yt<Z.length;Yt++){vt=!vt;var ar=Z[Yt];De=Mt*Q,Mt+=ar,Qe=Mt*Q,Le.push({left:De,right:Qe,isDash:vt,zeroLength:ar===0})}return Le},D.prototype.addRoundDash=function(Z,ge,Q){for(var ye=ge/2,Le=-Q;Le<=Q;Le++)for(var De=this.nextRow+Q+Le,Qe=this.width*De,vt=0,Mt=Z[vt],Yt=0;Yt<this.width;Yt++){Yt/Mt.right>1&&(Mt=Z[++vt]);var ar=Math.abs(Yt-Mt.left),cr=Math.abs(Yt-Mt.right),Dr=Math.min(ar,cr),Xr=void 0,jr=Le/Q*(ye+1);if(Mt.isDash){var Vr=ye-Math.abs(jr);Xr=Math.sqrt(Dr*Dr+Vr*Vr)}else Xr=ye-Math.sqrt(Dr*Dr+jr*jr);this.data[Qe+Yt]=Math.max(0,Math.min(255,Xr+128))}},D.prototype.addRegularDash=function(Z){for(var ge=Z.length-1;ge>=0;--ge){var Q=Z[ge],ye=Z[ge+1];Q.zeroLength?Z.splice(ge,1):ye&&ye.isDash===Q.isDash&&(ye.left=Q.left,Z.splice(ge,1))}var Le=Z[0],De=Z[Z.length-1];Le.isDash===De.isDash&&(Le.left=De.left-this.width,De.right=Le.right+this.width);for(var Qe=this.width*this.nextRow,vt=0,Mt=Z[vt],Yt=0;Yt<this.width;Yt++){Yt/Mt.right>1&&(Mt=Z[++vt]);var ar=Math.abs(Yt-Mt.left),cr=Math.abs(Yt-Mt.right),Dr=Math.min(ar,cr),Xr=Mt.isDash?Dr:-Dr;this.data[Qe+Yt]=Math.max(0,Math.min(255,Xr+128))}},D.prototype.addDash=function(Z,ge){var Q=ge?7:0,ye=2*Q+1;if(this.nextRow+ye>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var Le=0,De=0;De<Z.length;De++)Le+=Z[De];if(Le!==0){var Qe=this.width/Le,vt=this.getDashRanges(Z,this.width,Qe);ge?this.addRoundDash(vt,Qe,Q):this.addRegularDash(vt)}var Mt={y:(this.nextRow+Q+.5)/this.height,height:2*Q/this.height,width:Le};return this.nextRow+=ye,this.dirty=!0,Mt},D.prototype.bind=function(Z){var ge=Z.gl;this.texture?(ge.bindTexture(ge.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ge.texSubImage2D(ge.TEXTURE_2D,0,0,0,this.width,this.height,ge.ALPHA,ge.UNSIGNED_BYTE,this.data))):(this.texture=ge.createTexture(),ge.bindTexture(ge.TEXTURE_2D,this.texture),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_S,ge.REPEAT),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_T,ge.REPEAT),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MAG_FILTER,ge.LINEAR),ge.texImage2D(ge.TEXTURE_2D,0,ge.ALPHA,this.width,this.height,0,ge.ALPHA,ge.UNSIGNED_BYTE,this.data))};var R=function pe(Z,ge){this.workerPool=Z,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var Q=this.workerPool.acquire(this.id),ye=0;ye<Q.length;ye++){var Le=Q[ye],De=new pe.Actor(Le,ge,this.id);De.name="Worker "+ye,this.actors.push(De)}};R.prototype.broadcast=function(Z,ge,Q){Q=Q||function(){},t.asyncAll(this.actors,function(ye,Le){ye.send(Z,ge,Le)},Q)},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(Z){Z.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=t.Actor;function U(pe,Z,ge){var Q=function(ye,Le){if(ye)return ge(ye);if(Le){var De=t.pick(t.extend(Le,pe),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Le.vector_layers&&(De.vectorLayers=Le.vector_layers,De.vectorLayerIds=De.vectorLayers.map(function(Qe){return Qe.id})),De.tiles=Z.canonicalizeTileset(De,pe.url),ge(null,De)}};return pe.url?t.getJSON(Z.transformRequest(Z.normalizeSourceURL(pe.url),t.ResourceType.Source),Q):t.browser.frame(function(){return Q(null,pe)})}var N=function(Z,ge,Q){this.bounds=t.LngLatBounds.convert(this.validateBounds(Z)),this.minzoom=ge||0,this.maxzoom=Q||24};N.prototype.validateBounds=function(Z){return!Array.isArray(Z)||Z.length!==4?[-180,-90,180,90]:[Math.max(-180,Z[0]),Math.max(-90,Z[1]),Math.min(180,Z[2]),Math.min(90,Z[3])]},N.prototype.contains=function(Z){var ge=Math.pow(2,Z.z),Q={minX:Math.floor(t.mercatorXfromLng(this.bounds.getWest())*ge),minY:Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*ge),maxX:Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*ge),maxY:Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*ge)},ye=Z.x>=Q.minX&&Z.x<Q.maxX&&Z.y>=Q.minY&&Z.y<Q.maxY;return ye};var X=function(pe){function Z(ge,Q,ye,Le){if(pe.call(this),this.id=ge,this.dispatcher=ye,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(Q,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},Q),this._collectResourceTiming=Q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Le)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,function(ye,Le){Q._tileJSONRequest=null,Q._loaded=!0,ye?Q.fire(new t.ErrorEvent(ye)):Le&&(t.extend(Q,Le),Le.bounds&&(Q.tileBounds=new N(Le.bounds,Q.minzoom,Q.maxzoom)),t.postTurnstileEvent(Le.tiles,Q.map._requestManager._customAccessToken),t.postMapLoadEvent(Le.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken,Q.map._requestManager._customAccessToken),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},Z.prototype.loaded=function(){return this._loaded},Z.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},Z.prototype.onAdd=function(Q){this.map=Q,this.load()},Z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Z.prototype.serialize=function(){return t.extend({},this._options)},Z.prototype.loadTile=function(Q,ye){var Le=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme)),De={request:this.map._requestManager.transformRequest(Le,t.ResourceType.Tile),uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,tileSize:this.tileSize*Q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};De.request.collectResourceTiming=this._collectResourceTiming,!Q.actor||Q.state==="expired"?(Q.actor=this.dispatcher.getActor(),Q.request=Q.actor.send("loadTile",De,Qe.bind(this))):Q.state==="loading"?Q.reloadCallback=ye:Q.request=Q.actor.send("reloadTile",De,Qe.bind(this));function Qe(vt,Mt){if(delete Q.request,Q.aborted)return ye(null);if(vt&&vt.status!==404)return ye(vt);Mt&&Mt.resourceTiming&&(Q.resourceTiming=Mt.resourceTiming),this.map._refreshExpiredTiles&&Mt&&Q.setExpiryData(Mt),Q.loadVectorData(Mt,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),ye(null),Q.reloadCallback&&(this.loadTile(Q,Q.reloadCallback),Q.reloadCallback=null)}},Z.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.actor&&Q.actor.send("abortTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},Z.prototype.unloadTile=function(Q){Q.unloadVectorData(),Q.actor&&Q.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},Z.prototype.hasTransition=function(){return!1},Z}(t.Evented),j=function(pe){function Z(ge,Q,ye,Le){pe.call(this),this.id=ge,this.dispatcher=ye,this.setEventedParent(Le),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},Q),t.extend(this,t.pick(Q,["url","scheme","tileSize"]))}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,function(ye,Le){Q._tileJSONRequest=null,Q._loaded=!0,ye?Q.fire(new t.ErrorEvent(ye)):Le&&(t.extend(Q,Le),Le.bounds&&(Q.tileBounds=new N(Le.bounds,Q.minzoom,Q.maxzoom)),t.postTurnstileEvent(Le.tiles),t.postMapLoadEvent(Le.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},Z.prototype.loaded=function(){return this._loaded},Z.prototype.onAdd=function(Q){this.map=Q,this.load()},Z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Z.prototype.serialize=function(){return t.extend({},this._options)},Z.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},Z.prototype.loadTile=function(Q,ye){var Le=this,De=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Q.request=t.getImage(this.map._requestManager.transformRequest(De,t.ResourceType.Tile),function(Qe,vt){if(delete Q.request,Q.aborted)Q.state="unloaded",ye(null);else if(Qe)Q.state="errored",ye(Qe);else if(vt){Le.map._refreshExpiredTiles&&Q.setExpiryData(vt),delete vt.cacheControl,delete vt.expires;var Mt=Le.map.painter.context,Yt=Mt.gl;Q.texture=Le.map.painter.getTileTexture(vt.width),Q.texture?Q.texture.update(vt,{useMipmap:!0}):(Q.texture=new t.Texture(Mt,vt,Yt.RGBA,{useMipmap:!0}),Q.texture.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE,Yt.LINEAR_MIPMAP_NEAREST),Mt.extTextureFilterAnisotropic&&Yt.texParameterf(Yt.TEXTURE_2D,Mt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Mt.extTextureFilterAnisotropicMax)),Q.state="loaded",t.cacheEntryPossiblyAdded(Le.dispatcher),ye(null)}})},Z.prototype.abortTile=function(Q,ye){Q.request&&(Q.request.cancel(),delete Q.request),ye()},Z.prototype.unloadTile=function(Q,ye){Q.texture&&this.map.painter.saveTileTexture(Q.texture),ye()},Z.prototype.hasTransition=function(){return!1},Z}(t.Evented),ee=function(pe){function Z(ge,Q,ye,Le){pe.call(this,ge,Q,ye,Le),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},Q),this.encoding=Q.encoding||"mapbox"}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Z.prototype.loadTile=function(Q,ye){var Le=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Q.request=t.getImage(this.map._requestManager.transformRequest(Le,t.ResourceType.Tile),De.bind(this)),Q.neighboringTiles=this._getNeighboringTiles(Q.tileID);function De(vt,Mt){if(delete Q.request,Q.aborted)Q.state="unloaded",ye(null);else if(vt)Q.state="errored",ye(vt);else if(Mt){this.map._refreshExpiredTiles&&Q.setExpiryData(Mt),delete Mt.cacheControl,delete Mt.expires;var Yt=t.window.ImageBitmap&&Mt instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported(),ar=Yt?Mt:t.browser.getImageData(Mt,1),cr={uid:Q.uid,coord:Q.tileID,source:this.id,rawImageData:ar,encoding:this.encoding};(!Q.actor||Q.state==="expired")&&(Q.actor=this.dispatcher.getActor(),Q.actor.send("loadDEMTile",cr,Qe.bind(this)))}}function Qe(vt,Mt){vt&&(Q.state="errored",ye(vt)),Mt&&(Q.dem=Mt,Q.needsHillshadePrepare=!0,Q.state="loaded",ye(null))}},Z.prototype._getNeighboringTiles=function(Q){var ye=Q.canonical,Le=Math.pow(2,ye.z),De=(ye.x-1+Le)%Le,Qe=ye.x===0?Q.wrap-1:Q.wrap,vt=(ye.x+1+Le)%Le,Mt=ye.x+1===Le?Q.wrap+1:Q.wrap,Yt={};return Yt[new t.OverscaledTileID(Q.overscaledZ,Qe,ye.z,De,ye.y).key]={backfilled:!1},Yt[new t.OverscaledTileID(Q.overscaledZ,Mt,ye.z,vt,ye.y).key]={backfilled:!1},ye.y>0&&(Yt[new t.OverscaledTileID(Q.overscaledZ,Qe,ye.z,De,ye.y-1).key]={backfilled:!1},Yt[new t.OverscaledTileID(Q.overscaledZ,Q.wrap,ye.z,ye.x,ye.y-1).key]={backfilled:!1},Yt[new t.OverscaledTileID(Q.overscaledZ,Mt,ye.z,vt,ye.y-1).key]={backfilled:!1}),ye.y+1<Le&&(Yt[new t.OverscaledTileID(Q.overscaledZ,Qe,ye.z,De,ye.y+1).key]={backfilled:!1},Yt[new t.OverscaledTileID(Q.overscaledZ,Q.wrap,ye.z,ye.x,ye.y+1).key]={backfilled:!1},Yt[new t.OverscaledTileID(Q.overscaledZ,Mt,ye.z,vt,ye.y+1).key]={backfilled:!1}),Yt},Z.prototype.unloadTile=function(Q){Q.demTexture&&this.map.painter.saveTileTexture(Q.demTexture),Q.fbo&&(Q.fbo.destroy(),delete Q.fbo),Q.dem&&delete Q.dem,delete Q.neighboringTiles,Q.state="unloaded",Q.actor&&Q.actor.send("removeDEMTile",{uid:Q.uid,source:this.id})},Z}(j),q=function(pe){function Z(ge,Q,ye,Le){pe.call(this),this.id=ge,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ye.getActor(),this.setEventedParent(Le),this._data=Q.data,this._options=t.extend({},Q),this._collectResourceTiming=Q.collectResourceTiming,this._resourceTiming=[],Q.maxzoom!==void 0&&(this.maxzoom=Q.maxzoom),Q.type&&(this.type=Q.type),Q.attribution&&(this.attribution=Q.attribution),this.promoteId=Q.promoteId;var De=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:Q.cluster||!1,geojsonVtOptions:{buffer:(Q.buffer!==void 0?Q.buffer:128)*De,tolerance:(Q.tolerance!==void 0?Q.tolerance:.375)*De,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:Q.lineMetrics||!1,generateId:Q.generateId||!1},superclusterOptions:{maxZoom:Q.clusterMaxZoom!==void 0?Math.min(Q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(Q.clusterRadius||50)*De,log:!1,generateId:Q.generateId||!1},clusterProperties:Q.clusterProperties},Q.workerOptions)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.load=function(){var Q=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ye){if(ye){Q.fire(new t.ErrorEvent(ye));return}var Le={dataType:"source",sourceDataType:"metadata"};Q._collectResourceTiming&&Q._resourceTiming&&Q._resourceTiming.length>0&&(Le.resourceTiming=Q._resourceTiming,Q._resourceTiming=[]),Q.fire(new t.Event("data",Le))})},Z.prototype.onAdd=function(Q){this.map=Q,this.load()},Z.prototype.setData=function(Q){var ye=this;return this._data=Q,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Le){if(Le){ye.fire(new t.ErrorEvent(Le));return}var De={dataType:"source",sourceDataType:"content"};ye._collectResourceTiming&&ye._resourceTiming&&ye._resourceTiming.length>0&&(De.resourceTiming=ye._resourceTiming,ye._resourceTiming=[]),ye.fire(new t.Event("data",De))}),this},Z.prototype.getClusterExpansionZoom=function(Q,ye){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:Q,source:this.id},ye),this},Z.prototype.getClusterChildren=function(Q,ye){return this.actor.send("geojson.getClusterChildren",{clusterId:Q,source:this.id},ye),this},Z.prototype.getClusterLeaves=function(Q,ye,Le,De){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:Q,limit:ye,offset:Le},De),this},Z.prototype._updateWorkerData=function(Q){var ye=this;this._loaded=!1;var Le=t.extend({},this.workerOptions),De=this._data;typeof De=="string"?(Le.request=this.map._requestManager.transformRequest(t.browser.resolveURL(De),t.ResourceType.Source),Le.request.collectResourceTiming=this._collectResourceTiming):Le.data=JSON.stringify(De),this.actor.send(this.type+".loadData",Le,function(Qe,vt){ye._removed||vt&&vt.abandoned||(ye._loaded=!0,vt&&vt.resourceTiming&&vt.resourceTiming[ye.id]&&(ye._resourceTiming=vt.resourceTiming[ye.id].slice(0)),ye.actor.send(ye.type+".coalesce",{source:Le.source},null),Q(Qe))})},Z.prototype.loaded=function(){return this._loaded},Z.prototype.loadTile=function(Q,ye){var Le=this,De=Q.actor?"reloadTile":"loadTile";Q.actor=this.actor;var Qe={type:this.type,uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Q.request=this.actor.send(De,Qe,function(vt,Mt){return delete Q.request,Q.unloadVectorData(),Q.aborted?ye(null):vt?ye(vt):(Q.loadVectorData(Mt,Le.map.painter,De==="reloadTile"),ye(null))})},Z.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.aborted=!0},Z.prototype.unloadTile=function(Q){Q.unloadVectorData(),this.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id})},Z.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Z.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},Z.prototype.hasTransition=function(){return!1},Z}(t.Evented),G=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),J=function(pe){function Z(ge,Q,ye,Le){pe.call(this),this.id=ge,this.dispatcher=ye,this.coordinates=Q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Le),this.options=Q}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.load=function(Q,ye){var Le=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(De,Qe){Le._loaded=!0,De?Le.fire(new t.ErrorEvent(De)):Qe&&(Le.image=Qe,Q&&(Le.coordinates=Q),ye&&ye(),Le._finishLoading())})},Z.prototype.loaded=function(){return this._loaded},Z.prototype.updateImage=function(Q){var ye=this;return!this.image||!Q.url?this:(this.options.url=Q.url,this.load(Q.coordinates,function(){ye.texture=null}),this)},Z.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Z.prototype.onAdd=function(Q){this.map=Q,this.load()},Z.prototype.setCoordinates=function(Q){var ye=this;this.coordinates=Q;var Le=Q.map(t.MercatorCoordinate.fromLngLat);this.tileID=le(Le),this.minzoom=this.maxzoom=this.tileID.z;var De=Le.map(function(Qe){return ye.tileID.getTilePoint(Qe)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(De[0].x,De[0].y,0,0),this._boundsArray.emplaceBack(De[1].x,De[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(De[3].x,De[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(De[2].x,De[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},Z.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var Q=this.map.painter.context,ye=Q.gl;this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(Q,this.image,ye.RGBA),this.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE));for(var Le in this.tiles){var De=this.tiles[Le];De.state!=="loaded"&&(De.state="loaded",De.texture=this.texture)}}},Z.prototype.loadTile=function(Q,ye){this.tileID&&this.tileID.equals(Q.tileID.canonical)?(this.tiles[String(Q.tileID.wrap)]=Q,Q.buckets={},ye(null)):(Q.state="errored",ye(null))},Z.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Z.prototype.hasTransition=function(){return!1},Z}(t.Evented);function le(pe){for(var Z=1/0,ge=1/0,Q=-1/0,ye=-1/0,Le=0,De=pe;Le<De.length;Le+=1){var Qe=De[Le];Z=Math.min(Z,Qe.x),ge=Math.min(ge,Qe.y),Q=Math.max(Q,Qe.x),ye=Math.max(ye,Qe.y)}var vt=Q-Z,Mt=ye-ge,Yt=Math.max(vt,Mt),ar=Math.max(0,Math.floor(-Math.log(Yt)/Math.LN2)),cr=Math.pow(2,ar);return new t.CanonicalTileID(ar,Math.floor((Z+Q)/2*cr),Math.floor((ge+ye)/2*cr))}var fe=function(pe){function Z(ge,Q,ye,Le){pe.call(this,ge,Q,ye,Le),this.roundZoom=!0,this.type="video",this.options=Q}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.load=function(){var Q=this;this._loaded=!1;var ye=this.options;this.urls=[];for(var Le=0,De=ye.urls;Le<De.length;Le+=1){var Qe=De[Le];this.urls.push(this.map._requestManager.transformRequest(Qe,t.ResourceType.Source).url)}t.getVideo(this.urls,function(vt,Mt){Q._loaded=!0,vt?Q.fire(new t.ErrorEvent(vt)):Mt&&(Q.video=Mt,Q.video.loop=!0,Q.video.addEventListener("playing",function(){Q.map.triggerRepaint()}),Q.map&&Q.video.play(),Q._finishLoading())})},Z.prototype.pause=function(){this.video&&this.video.pause()},Z.prototype.play=function(){this.video&&this.video.play()},Z.prototype.seek=function(Q){if(this.video){var ye=this.video.seekable;Q<ye.start(0)||Q>ye.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ye.start(0)+" and "+ye.end(0)+"-second mark."))):this.video.currentTime=Q}},Z.prototype.getVideo=function(){return this.video},Z.prototype.onAdd=function(Q){this.map||(this.map=Q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Z.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var Q=this.map.painter.context,ye=Q.gl;this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),ye.texSubImage2D(ye.TEXTURE_2D,0,0,0,ye.RGBA,ye.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(Q,this.video,ye.RGBA),this.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE));for(var Le in this.tiles){var De=this.tiles[Le];De.state!=="loaded"&&(De.state="loaded",De.texture=this.texture)}}},Z.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Z.prototype.hasTransition=function(){return this.video&&!this.video.paused},Z}(J),se=function(pe){function Z(ge,Q,ye,Le){pe.call(this,ge,Q,ye,Le),Q.coordinates?(!Array.isArray(Q.coordinates)||Q.coordinates.length!==4||Q.coordinates.some(function(De){return!Array.isArray(De)||De.length!==2||De.some(function(Qe){return typeof Qe!="number"})}))&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'missing required property "coordinates"'))),Q.animate&&typeof Q.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'optional "animate" property must be a boolean value'))),Q.canvas?typeof Q.canvas!="string"&&!(Q.canvas instanceof t.window.HTMLCanvasElement)&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'missing required property "canvas"'))),this.options=Q,this.animate=Q.animate!==void 0?Q.animate:!0}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},Z.prototype.getCanvas=function(){return this.canvas},Z.prototype.onAdd=function(Q){this.map=Q,this.load(),this.canvas&&this.animate&&this.play()},Z.prototype.onRemove=function(){this.pause()},Z.prototype.prepare=function(){var Q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,Q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,Q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ye=this.map.painter.context,Le=ye.gl;this.boundsBuffer||(this.boundsBuffer=ye.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(Q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(ye,this.canvas,Le.RGBA,{premultiply:!0});for(var De in this.tiles){var Qe=this.tiles[De];Qe.state!=="loaded"&&(Qe.state="loaded",Qe.texture=this.texture)}}},Z.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Z.prototype.hasTransition=function(){return this._playing},Z.prototype._hasInvalidDimensions=function(){for(var Q=0,ye=[this.canvas.width,this.canvas.height];Q<ye.length;Q+=1){var Le=ye[Q];if(isNaN(Le)||Le<=0)return!0}return!1},Z}(J),V={vector:X,raster:j,"raster-dem":ee,geojson:q,video:fe,image:J,canvas:se},Y=function(pe,Z,ge,Q){var ye=new V[Z.type](pe,Z,ge,Q);if(ye.id!==pe)throw new Error("Expected Source id to be "+pe+" instead of "+ye.id);return t.bindAll(["load","abort","unload","serialize","prepare"],ye),ye},ne=function(pe){return V[pe]},te=function(pe,Z){V[pe]=Z};function K(pe,Z){var ge=t.identity([]);return t.translate(ge,ge,[1,1,0]),t.scale(ge,ge,[pe.width*.5,pe.height*.5,1]),t.multiply(ge,ge,pe.calculatePosMatrix(Z.toUnwrapped()))}function $(pe,Z,ge){if(pe)for(var Q=0,ye=pe;Q<ye.length;Q+=1){var Le=ye[Q],De=Z[Le];if(De&&De.source===ge&&De.type==="fill-extrusion")return!0}else for(var Qe in Z){var vt=Z[Qe];if(vt.source===ge&&vt.type==="fill-extrusion")return!0}return!1}function ae(pe,Z,ge,Q,ye,Le){var De=$(ye&&ye.layers,Z,pe.id),Qe=Le.maxPitchScaleFactor(),vt=pe.tilesIn(Q,Qe,De);vt.sort(ue);for(var Mt=[],Yt=0,ar=vt;Yt<ar.length;Yt+=1){var cr=ar[Yt];Mt.push({wrappedTileID:cr.tileID.wrapped().key,queryResults:cr.tile.queryRenderedFeatures(Z,ge,pe._state,cr.queryGeometry,cr.cameraQueryGeometry,cr.scale,ye,Le,Qe,K(pe.transform,cr.tileID))})}var Dr=xe(Mt);for(var Xr in Dr)Dr[Xr].forEach(function(jr){var Vr=jr.feature,on=pe.getFeatureState(Vr.layer["source-layer"],Vr.id);Vr.source=Vr.layer.source,Vr.layer["source-layer"]&&(Vr.sourceLayer=Vr.layer["source-layer"]),Vr.state=on});return Dr}function ie(pe,Z,ge,Q,ye,Le,De){for(var Qe={},vt=Le.queryRenderedSymbols(Q),Mt=[],Yt=0,ar=Object.keys(vt).map(Number);Yt<ar.length;Yt+=1){var cr=ar[Yt];Mt.push(De[cr])}Mt.sort(ue);for(var Dr=function(){var _n=jr[Xr],Bn=_n.featureIndex.lookupSymbolFeatures(vt[_n.bucketInstanceId],Z,_n.bucketIndex,_n.sourceLayerIndex,ye.filter,ye.layers,ye.availableImages,pe);for(var Kn in Bn){var ca=Qe[Kn]=Qe[Kn]||[],pa=Bn[Kn];pa.sort(function(Ta,Ga){var ja=_n.featureSortOrder;if(ja){var li=ja.indexOf(Ta.featureIndex),_i=ja.indexOf(Ga.featureIndex);return _i-li}else return Ga.featureIndex-Ta.featureIndex});for(var ha=0,Da=pa;ha<Da.length;ha+=1){var Ia=Da[ha];ca.push(Ia)}}},Xr=0,jr=Mt;Xr<jr.length;Xr+=1)Dr();var Vr=function(_n){Qe[_n].forEach(function(Bn){var Kn=Bn.feature,ca=pe[_n],pa=ge[ca.source],ha=pa.getFeatureState(Kn.layer["source-layer"],Kn.id);Kn.source=Kn.layer.source,Kn.layer["source-layer"]&&(Kn.sourceLayer=Kn.layer["source-layer"]),Kn.state=ha})};for(var on in Qe)Vr(on);return Qe}function oe(pe,Z){for(var ge=pe.getRenderableIds().map(function(vt){return pe.getTileByID(vt)}),Q=[],ye={},Le=0;Le<ge.length;Le++){var De=ge[Le],Qe=De.tileID.canonical.key;ye[Qe]||(ye[Qe]=!0,De.querySourceFeatures(Q,Z))}return Q}function ue(pe,Z){var ge=pe.tileID,Q=Z.tileID;return ge.overscaledZ-Q.overscaledZ||ge.canonical.y-Q.canonical.y||ge.wrap-Q.wrap||ge.canonical.x-Q.canonical.x}function xe(pe){for(var Z={},ge={},Q=0,ye=pe;Q<ye.length;Q+=1){var Le=ye[Q],De=Le.queryResults,Qe=Le.wrappedTileID,vt=ge[Qe]=ge[Qe]||{};for(var Mt in De)for(var Yt=De[Mt],ar=vt[Mt]=vt[Mt]||{},cr=Z[Mt]=Z[Mt]||[],Dr=0,Xr=Yt;Dr<Xr.length;Dr+=1){var jr=Xr[Dr];ar[jr.featureIndex]||(ar[jr.featureIndex]=!0,cr.push(jr))}}return Z}var he=function(Z,ge){this.max=Z,this.onRemove=ge,this.reset()};he.prototype.reset=function(){for(var Z in this.data)for(var ge=0,Q=this.data[Z];ge<Q.length;ge+=1){var ye=Q[ge];ye.timeout&&clearTimeout(ye.timeout),this.onRemove(ye.value)}return this.data={},this.order=[],this},he.prototype.add=function(Z,ge,Q){var ye=this,Le=Z.wrapped().key;this.data[Le]===void 0&&(this.data[Le]=[]);var De={value:ge,timeout:void 0};if(Q!==void 0&&(De.timeout=setTimeout(function(){ye.remove(Z,De)},Q)),this.data[Le].push(De),this.order.push(Le),this.order.length>this.max){var Qe=this._getAndRemoveByKey(this.order[0]);Qe&&this.onRemove(Qe)}return this},he.prototype.has=function(Z){return Z.wrapped().key in this.data},he.prototype.getAndRemove=function(Z){return this.has(Z)?this._getAndRemoveByKey(Z.wrapped().key):null},he.prototype._getAndRemoveByKey=function(Z){var ge=this.data[Z].shift();return ge.timeout&&clearTimeout(ge.timeout),this.data[Z].length===0&&delete this.data[Z],this.order.splice(this.order.indexOf(Z),1),ge.value},he.prototype.getByKey=function(Z){var ge=this.data[Z];return ge?ge[0].value:null},he.prototype.get=function(Z){if(!this.has(Z))return null;var ge=this.data[Z.wrapped().key][0];return ge.value},he.prototype.remove=function(Z,ge){if(!this.has(Z))return this;var Q=Z.wrapped().key,ye=ge===void 0?0:this.data[Q].indexOf(ge),Le=this.data[Q][ye];return this.data[Q].splice(ye,1),Le.timeout&&clearTimeout(Le.timeout),this.data[Q].length===0&&delete this.data[Q],this.onRemove(Le.value),this.order.splice(this.order.indexOf(Q),1),this},he.prototype.setMaxSize=function(Z){for(this.max=Z;this.order.length>this.max;){var ge=this._getAndRemoveByKey(this.order[0]);ge&&this.onRemove(ge)}return this},he.prototype.filter=function(Z){var ge=[];for(var Q in this.data)for(var ye=0,Le=this.data[Q];ye<Le.length;ye+=1){var De=Le[ye];Z(De.value)||ge.push(De)}for(var Qe=0,vt=ge;Qe<vt.length;Qe+=1){var Mt=vt[Qe];this.remove(Mt.value.tileID,Mt)}};var me=function(Z,ge,Q){this.context=Z;var ye=Z.gl;this.buffer=ye.createBuffer(),this.dynamicDraw=Boolean(Q),this.context.unbindVAO(),Z.bindElementBuffer.set(this.buffer),ye.bufferData(ye.ELEMENT_ARRAY_BUFFER,ge.arrayBuffer,this.dynamicDraw?ye.DYNAMIC_DRAW:ye.STATIC_DRAW),this.dynamicDraw||delete ge.arrayBuffer};me.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},me.prototype.updateData=function(Z){var ge=this.context.gl;this.context.unbindVAO(),this.bind(),ge.bufferSubData(ge.ELEMENT_ARRAY_BUFFER,0,Z.arrayBuffer)},me.prototype.destroy=function(){var Z=this.context.gl;this.buffer&&(Z.deleteBuffer(this.buffer),delete this.buffer)};var be={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ce=function(Z,ge,Q,ye){this.length=ge.length,this.attributes=Q,this.itemSize=ge.bytesPerElement,this.dynamicDraw=ye,this.context=Z;var Le=Z.gl;this.buffer=Le.createBuffer(),Z.bindVertexBuffer.set(this.buffer),Le.bufferData(Le.ARRAY_BUFFER,ge.arrayBuffer,this.dynamicDraw?Le.DYNAMIC_DRAW:Le.STATIC_DRAW),this.dynamicDraw||delete ge.arrayBuffer};Ce.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Ce.prototype.updateData=function(Z){var ge=this.context.gl;this.bind(),ge.bufferSubData(ge.ARRAY_BUFFER,0,Z.arrayBuffer)},Ce.prototype.enableAttributes=function(Z,ge){for(var Q=0;Q<this.attributes.length;Q++){var ye=this.attributes[Q],Le=ge.attributes[ye.name];Le!==void 0&&Z.enableVertexAttribArray(Le)}},Ce.prototype.setVertexAttribPointers=function(Z,ge,Q){for(var ye=0;ye<this.attributes.length;ye++){var Le=this.attributes[ye],De=ge.attributes[Le.name];De!==void 0&&Z.vertexAttribPointer(De,Le.components,Z[be[Le.type]],!1,this.itemSize,Le.offset+this.itemSize*(Q||0))}},Ce.prototype.destroy=function(){var Z=this.context.gl;this.buffer&&(Z.deleteBuffer(this.buffer),delete this.buffer)};var Se=function(Z){this.gl=Z.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Se.prototype.get=function(){return this.current},Se.prototype.set=function(Z){},Se.prototype.getDefault=function(){return this.default},Se.prototype.setDefault=function(){this.set(this.default)};var Be=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return t.Color.transparent},Z.prototype.set=function(Q){var ye=this.current;Q.r===ye.r&&Q.g===ye.g&&Q.b===ye.b&&Q.a===ye.a&&!this.dirty||(this.gl.clearColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},Z}(Se),Ye=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return 1},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.clearDepth(Q),this.current=Q,this.dirty=!1)},Z}(Se),Xe=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return 0},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.clearStencil(Q),this.current=Q,this.dirty=!1)},Z}(Se),Te=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return[!0,!0,!0,!0]},Z.prototype.set=function(Q){var ye=this.current;Q[0]===ye[0]&&Q[1]===ye[1]&&Q[2]===ye[2]&&Q[3]===ye[3]&&!this.dirty||(this.gl.colorMask(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},Z}(Se),Ie=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return!0},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.depthMask(Q),this.current=Q,this.dirty=!1)},Z}(Se),Ze=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return 255},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.stencilMask(Q),this.current=Q,this.dirty=!1)},Z}(Se),rt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Z.prototype.set=function(Q){var ye=this.current;Q.func===ye.func&&Q.ref===ye.ref&&Q.mask===ye.mask&&!this.dirty||(this.gl.stencilFunc(Q.func,Q.ref,Q.mask),this.current=Q,this.dirty=!1)},Z}(Se),Ge=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){var Q=this.gl;return[Q.KEEP,Q.KEEP,Q.KEEP]},Z.prototype.set=function(Q){var ye=this.current;Q[0]===ye[0]&&Q[1]===ye[1]&&Q[2]===ye[2]&&!this.dirty||(this.gl.stencilOp(Q[0],Q[1],Q[2]),this.current=Q,this.dirty=!1)},Z}(Se),ze=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;Q?ye.enable(ye.STENCIL_TEST):ye.disable(ye.STENCIL_TEST),this.current=Q,this.dirty=!1}},Z}(Se),We=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return[0,1]},Z.prototype.set=function(Q){var ye=this.current;Q[0]===ye[0]&&Q[1]===ye[1]&&!this.dirty||(this.gl.depthRange(Q[0],Q[1]),this.current=Q,this.dirty=!1)},Z}(Se),mt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;Q?ye.enable(ye.DEPTH_TEST):ye.disable(ye.DEPTH_TEST),this.current=Q,this.dirty=!1}},Z}(Se),Ft=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return this.gl.LESS},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.depthFunc(Q),this.current=Q,this.dirty=!1)},Z}(Se),Xt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;Q?ye.enable(ye.BLEND):ye.disable(ye.BLEND),this.current=Q,this.dirty=!1}},Z}(Se),Pt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){var Q=this.gl;return[Q.ONE,Q.ZERO]},Z.prototype.set=function(Q){var ye=this.current;Q[0]===ye[0]&&Q[1]===ye[1]&&!this.dirty||(this.gl.blendFunc(Q[0],Q[1]),this.current=Q,this.dirty=!1)},Z}(Se),Ut=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return t.Color.transparent},Z.prototype.set=function(Q){var ye=this.current;Q.r===ye.r&&Q.g===ye.g&&Q.b===ye.b&&Q.a===ye.a&&!this.dirty||(this.gl.blendColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},Z}(Se),Gt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return this.gl.FUNC_ADD},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.blendEquation(Q),this.current=Q,this.dirty=!1)},Z}(Se),It=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;Q?ye.enable(ye.CULL_FACE):ye.disable(ye.CULL_FACE),this.current=Q,this.dirty=!1}},Z}(Se),Ct=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return this.gl.BACK},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.cullFace(Q),this.current=Q,this.dirty=!1)},Z}(Se),lt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return this.gl.CCW},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.frontFace(Q),this.current=Q,this.dirty=!1)},Z}(Se),dt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.useProgram(Q),this.current=Q,this.dirty=!1)},Z}(Se),et=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return this.gl.TEXTURE0},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.activeTexture(Q),this.current=Q,this.dirty=!1)},Z}(Se),Pe=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){var Q=this.gl;return[0,0,Q.drawingBufferWidth,Q.drawingBufferHeight]},Z.prototype.set=function(Q){var ye=this.current;Q[0]===ye[0]&&Q[1]===ye[1]&&Q[2]===ye[2]&&Q[3]===ye[3]&&!this.dirty||(this.gl.viewport(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},Z}(Se),Je=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;ye.bindFramebuffer(ye.FRAMEBUFFER,Q),this.current=Q,this.dirty=!1}},Z}(Se),it=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;ye.bindRenderbuffer(ye.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},Z}(Se),ht=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;ye.bindTexture(ye.TEXTURE_2D,Q),this.current=Q,this.dirty=!1}},Z}(Se),zt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;ye.bindBuffer(ye.ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1}},Z}(Se),Lt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){var ye=this.gl;ye.bindBuffer(ye.ELEMENT_ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1},Z}(Se),Vt=function(pe){function Z(ge){pe.call(this,ge),this.vao=ge.extVertexArrayObject}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){!this.vao||Q===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(Q),this.current=Q,this.dirty=!1)},Z}(Se),$t=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return 4},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;ye.pixelStorei(ye.UNPACK_ALIGNMENT,Q),this.current=Q,this.dirty=!1}},Z}(Se),Ht=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q),this.current=Q,this.dirty=!1}},Z}(Se),tr=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ye=this.gl;ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,Q),this.current=Q,this.dirty=!1}},Z}(Se),qe=function(pe){function Z(ge,Q){pe.call(this,ge),this.context=ge,this.parent=Q}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getDefault=function(){return null},Z}(Se),xt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.setDirty=function(){this.dirty=!0},Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ye=this.gl;ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,Q,0),this.current=Q,this.dirty=!1}},Z}(qe),Rt=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ye=this.gl;ye.framebufferRenderbuffer(ye.FRAMEBUFFER,ye.DEPTH_ATTACHMENT,ye.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},Z}(qe),fr=function(Z,ge,Q,ye){this.context=Z,this.width=ge,this.height=Q;var Le=Z.gl,De=this.framebuffer=Le.createFramebuffer();this.colorAttachment=new xt(Z,De),ye&&(this.depthAttachment=new Rt(Z,De))};fr.prototype.destroy=function(){var Z=this.context.gl,ge=this.colorAttachment.get();if(ge&&Z.deleteTexture(ge),this.depthAttachment){var Q=this.depthAttachment.get();Q&&Z.deleteRenderbuffer(Q)}Z.deleteFramebuffer(this.framebuffer)};var br=519,pr=function(Z,ge,Q){this.func=Z,this.mask=ge,this.range=Q};pr.ReadOnly=!1,pr.ReadWrite=!0,pr.disabled=new pr(br,pr.ReadOnly,[0,1]);var Tr=519,Nr=7680,Ir=function(Z,ge,Q,ye,Le,De){this.test=Z,this.ref=ge,this.mask=Q,this.fail=ye,this.depthFail=Le,this.pass=De};Ir.disabled=new Ir({func:Tr,mask:0},0,0,Nr,Nr,Nr);var lr=0,Yr=1,nt=771,Ae=function(Z,ge,Q){this.blendFunction=Z,this.blendColor=ge,this.mask=Q};Ae.Replace=[Yr,lr],Ae.disabled=new Ae(Ae.Replace,t.Color.transparent,[!1,!1,!1,!1]),Ae.unblended=new Ae(Ae.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ae.alphaBlended=new Ae([Yr,nt],t.Color.transparent,[!0,!0,!0,!0]);var Ee=1029,Fe=2305,Ke=function(Z,ge,Q){this.enable=Z,this.mode=ge,this.frontFace=Q};Ke.disabled=new Ke(!1,Ee,Fe),Ke.backCCW=new Ke(!0,Ee,Fe);var tt=function(Z){this.gl=Z,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Be(this),this.clearDepth=new Ye(this),this.clearStencil=new Xe(this),this.colorMask=new Te(this),this.depthMask=new Ie(this),this.stencilMask=new Ze(this),this.stencilFunc=new rt(this),this.stencilOp=new Ge(this),this.stencilTest=new ze(this),this.depthRange=new We(this),this.depthTest=new mt(this),this.depthFunc=new Ft(this),this.blend=new Xt(this),this.blendFunc=new Pt(this),this.blendColor=new Ut(this),this.blendEquation=new Gt(this),this.cullFace=new It(this),this.cullFaceSide=new Ct(this),this.frontFace=new lt(this),this.program=new dt(this),this.activeTexture=new et(this),this.viewport=new Pe(this),this.bindFramebuffer=new Je(this),this.bindRenderbuffer=new it(this),this.bindTexture=new ht(this),this.bindVertexBuffer=new zt(this),this.bindElementBuffer=new Lt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Vt(this),this.pixelStoreUnpack=new $t(this),this.pixelStoreUnpackPremultiplyAlpha=new Ht(this),this.pixelStoreUnpackFlipY=new tr(this),this.extTextureFilterAnisotropic=Z.getExtension("EXT_texture_filter_anisotropic")||Z.getExtension("MOZ_EXT_texture_filter_anisotropic")||Z.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=Z.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=Z.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(Z.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Z.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=Z.getExtension("EXT_disjoint_timer_query")};tt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},tt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},tt.prototype.createIndexBuffer=function(Z,ge){return new me(this,Z,ge)},tt.prototype.createVertexBuffer=function(Z,ge,Q){return new Ce(this,Z,ge,Q)},tt.prototype.createRenderbuffer=function(Z,ge,Q){var ye=this.gl,Le=ye.createRenderbuffer();return this.bindRenderbuffer.set(Le),ye.renderbufferStorage(ye.RENDERBUFFER,Z,ge,Q),this.bindRenderbuffer.set(null),Le},tt.prototype.createFramebuffer=function(Z,ge,Q){return new fr(this,Z,ge,Q)},tt.prototype.clear=function(Z){var ge=Z.color,Q=Z.depth,ye=this.gl,Le=0;ge&&(Le|=ye.COLOR_BUFFER_BIT,this.clearColor.set(ge),this.colorMask.set([!0,!0,!0,!0])),typeof Q!="undefined"&&(Le|=ye.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Q),this.depthMask.set(!0)),ye.clear(Le)},tt.prototype.setCullFace=function(Z){Z.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Z.mode),this.frontFace.set(Z.frontFace))},tt.prototype.setDepthMode=function(Z){Z.func===this.gl.ALWAYS&&!Z.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(Z.func),this.depthMask.set(Z.mask),this.depthRange.set(Z.range))},tt.prototype.setStencilMode=function(Z){Z.test.func===this.gl.ALWAYS&&!Z.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(Z.mask),this.stencilOp.set([Z.fail,Z.depthFail,Z.pass]),this.stencilFunc.set({func:Z.test.func,ref:Z.ref,mask:Z.test.mask}))},tt.prototype.setColorMode=function(Z){t.deepEqual(Z.blendFunction,Ae.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Z.blendFunction),this.blendColor.set(Z.blendColor)),this.colorMask.set(Z.mask)},tt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ut=function(pe){function Z(ge,Q,ye){var Le=this;pe.call(this),this.id=ge,this.dispatcher=ye,this.on("data",function(De){De.dataType==="source"&&De.sourceDataType==="metadata"&&(Le._sourceLoaded=!0),Le._sourceLoaded&&!Le._paused&&De.dataType==="source"&&De.sourceDataType==="content"&&(Le.reload(),Le.transform&&Le.update(Le.transform))}),this.on("error",function(){Le._sourceErrored=!0}),this._source=Y(ge,Q,ye,this),this._tiles={},this._cache=new he(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.onAdd=function(Q){this.map=Q,this._maxTileCacheSize=Q?Q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(Q)},Z.prototype.onRemove=function(Q){this._source&&this._source.onRemove&&this._source.onRemove(Q)},Z.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var Q in this._tiles){var ye=this._tiles[Q];if(ye.state!=="loaded"&&ye.state!=="errored")return!1}return!0},Z.prototype.getSource=function(){return this._source},Z.prototype.pause=function(){this._paused=!0},Z.prototype.resume=function(){if(!!this._paused){var Q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,Q&&this.reload(),this.transform&&this.update(this.transform)}},Z.prototype._loadTile=function(Q,ye){return this._source.loadTile(Q,ye)},Z.prototype._unloadTile=function(Q){if(this._source.unloadTile)return this._source.unloadTile(Q,function(){})},Z.prototype._abortTile=function(Q){if(this._source.abortTile)return this._source.abortTile(Q,function(){})},Z.prototype.serialize=function(){return this._source.serialize()},Z.prototype.prepare=function(Q){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ye in this._tiles){var Le=this._tiles[ye];Le.upload(Q),Le.prepare(this.map.style.imageManager)}},Z.prototype.getIds=function(){return t.values(this._tiles).map(function(Q){return Q.tileID}).sort(ct).map(function(Q){return Q.key})},Z.prototype.getRenderableIds=function(Q){var ye=this,Le=[];for(var De in this._tiles)this._isIdRenderable(De,Q)&&Le.push(this._tiles[De]);return Q?Le.sort(function(Qe,vt){var Mt=Qe.tileID,Yt=vt.tileID,ar=new t.Point(Mt.canonical.x,Mt.canonical.y)._rotate(ye.transform.angle),cr=new t.Point(Yt.canonical.x,Yt.canonical.y)._rotate(ye.transform.angle);return Mt.overscaledZ-Yt.overscaledZ||cr.y-ar.y||cr.x-ar.x}).map(function(Qe){return Qe.tileID.key}):Le.map(function(Qe){return Qe.tileID}).sort(ct).map(function(Qe){return Qe.key})},Z.prototype.hasRenderableParent=function(Q){var ye=this.findLoadedParent(Q,0);return ye?this._isIdRenderable(ye.tileID.key):!1},Z.prototype._isIdRenderable=function(Q,ye){return this._tiles[Q]&&this._tiles[Q].hasData()&&!this._coveredTiles[Q]&&(ye||!this._tiles[Q].holdingForFade())},Z.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var Q in this._tiles)this._tiles[Q].state!=="errored"&&this._reloadTile(Q,"reloading")},Z.prototype._reloadTile=function(Q,ye){var Le=this._tiles[Q];!Le||(Le.state!=="loading"&&(Le.state=ye),this._loadTile(Le,this._tileLoaded.bind(this,Le,Q,ye)))},Z.prototype._tileLoaded=function(Q,ye,Le,De){if(De){Q.state="errored",De.status!==404?this._source.fire(new t.ErrorEvent(De,{tile:Q})):this.update(this.transform);return}Q.timeAdded=t.browser.now(),Le==="expired"&&(Q.refreshedUponExpiration=!0),this._setTileReloadTimer(ye,Q),this.getSource().type==="raster-dem"&&Q.dem&&this._backfillDEM(Q),this._state.initializeTileState(Q,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:Q,coord:Q.tileID}))},Z.prototype._backfillDEM=function(Q){for(var ye=this.getRenderableIds(),Le=0;Le<ye.length;Le++){var De=ye[Le];if(Q.neighboringTiles&&Q.neighboringTiles[De]){var Qe=this.getTileByID(De);vt(Q,Qe),vt(Qe,Q)}}function vt(Mt,Yt){Mt.needsHillshadePrepare=!0;var ar=Yt.tileID.canonical.x-Mt.tileID.canonical.x,cr=Yt.tileID.canonical.y-Mt.tileID.canonical.y,Dr=Math.pow(2,Mt.tileID.canonical.z),Xr=Yt.tileID.key;ar===0&&cr===0||Math.abs(cr)>1||(Math.abs(ar)>1&&(Math.abs(ar+Dr)===1?ar+=Dr:Math.abs(ar-Dr)===1&&(ar-=Dr)),!(!Yt.dem||!Mt.dem)&&(Mt.dem.backfillBorder(Yt.dem,ar,cr),Mt.neighboringTiles&&Mt.neighboringTiles[Xr]&&(Mt.neighboringTiles[Xr].backfilled=!0)))}},Z.prototype.getTile=function(Q){return this.getTileByID(Q.key)},Z.prototype.getTileByID=function(Q){return this._tiles[Q]},Z.prototype._retainLoadedChildren=function(Q,ye,Le,De){for(var Qe in this._tiles){var vt=this._tiles[Qe];if(!(De[Qe]||!vt.hasData()||vt.tileID.overscaledZ<=ye||vt.tileID.overscaledZ>Le)){for(var Mt=vt.tileID;vt&&vt.tileID.overscaledZ>ye+1;){var Yt=vt.tileID.scaledTo(vt.tileID.overscaledZ-1);vt=this._tiles[Yt.key],vt&&vt.hasData()&&(Mt=Yt)}for(var ar=Mt;ar.overscaledZ>ye;)if(ar=ar.scaledTo(ar.overscaledZ-1),Q[ar.key]){De[Mt.key]=Mt;break}}}},Z.prototype.findLoadedParent=function(Q,ye){if(Q.key in this._loadedParentTiles){var Le=this._loadedParentTiles[Q.key];return Le&&Le.tileID.overscaledZ>=ye?Le:null}for(var De=Q.overscaledZ-1;De>=ye;De--){var Qe=Q.scaledTo(De),vt=this._getLoadedTile(Qe);if(vt)return vt}},Z.prototype._getLoadedTile=function(Q){var ye=this._tiles[Q.key];if(ye&&ye.hasData())return ye;var Le=this._cache.getByKey(Q.wrapped().key);return Le},Z.prototype.updateCacheSize=function(Q){var ye=Math.ceil(Q.width/this._source.tileSize)+1,Le=Math.ceil(Q.height/this._source.tileSize)+1,De=ye*Le,Qe=5,vt=Math.floor(De*Qe),Mt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,vt):vt;this._cache.setMaxSize(Mt)},Z.prototype.handleWrapJump=function(Q){var ye=this._prevLng===void 0?Q:this._prevLng,Le=Q-ye,De=Le/360,Qe=Math.round(De);if(this._prevLng=Q,Qe){var vt={};for(var Mt in this._tiles){var Yt=this._tiles[Mt];Yt.tileID=Yt.tileID.unwrapTo(Yt.tileID.wrap+Qe),vt[Yt.tileID.key]=Yt}this._tiles=vt;for(var ar in this._timers)clearTimeout(this._timers[ar]),delete this._timers[ar];for(var cr in this._tiles){var Dr=this._tiles[cr];this._setTileReloadTimer(cr,Dr)}}},Z.prototype.update=function(Q){var ye=this;if(this.transform=Q,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(Q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Le;this.used?this._source.tileID?Le=Q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ta){return new t.OverscaledTileID(Ta.canonical.z,Ta.wrap,Ta.canonical.z,Ta.canonical.x,Ta.canonical.y)}):(Le=Q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Le=Le.filter(function(Ta){return ye._source.hasTile(Ta)}))):Le=[];var De=Q.coveringZoomLevel(this._source),Qe=Math.max(De-Z.maxOverzooming,this._source.minzoom),vt=Math.max(De+Z.maxUnderzooming,this._source.minzoom),Mt=this._updateRetainedTiles(Le,De);if(yt(this._source.type)){for(var Yt={},ar={},cr=Object.keys(Mt),Dr=0,Xr=cr;Dr<Xr.length;Dr+=1){var jr=Xr[Dr],Vr=Mt[jr],on=this._tiles[jr];if(!(!on||on.fadeEndTime&&on.fadeEndTime<=t.browser.now())){var _n=this.findLoadedParent(Vr,Qe);_n&&(this._addTile(_n.tileID),Yt[_n.tileID.key]=_n.tileID),ar[jr]=Vr}}this._retainLoadedChildren(ar,De,vt,Mt);for(var Bn in Yt)Mt[Bn]||(this._coveredTiles[Bn]=!0,Mt[Bn]=Yt[Bn])}for(var Kn in Mt)this._tiles[Kn].clearFadeHold();for(var ca=t.keysDifference(this._tiles,Mt),pa=0,ha=ca;pa<ha.length;pa+=1){var Da=ha[pa],Ia=this._tiles[Da];Ia.hasSymbolBuckets&&!Ia.holdingForFade()?Ia.setHoldDuration(this.map._fadeDuration):(!Ia.hasSymbolBuckets||Ia.symbolFadeFinished())&&this._removeTile(Da)}this._updateLoadedParentTileCache()}},Z.prototype.releaseSymbolFadeTiles=function(){for(var Q in this._tiles)this._tiles[Q].holdingForFade()&&this._removeTile(Q)},Z.prototype._updateRetainedTiles=function(Q,ye){for(var Le={},De={},Qe=Math.max(ye-Z.maxOverzooming,this._source.minzoom),vt=Math.max(ye+Z.maxUnderzooming,this._source.minzoom),Mt={},Yt=0,ar=Q;Yt<ar.length;Yt+=1){var cr=ar[Yt],Dr=this._addTile(cr);Le[cr.key]=cr,!Dr.hasData()&&ye<this._source.maxzoom&&(Mt[cr.key]=cr)}this._retainLoadedChildren(Mt,ye,vt,Le);for(var Xr=0,jr=Q;Xr<jr.length;Xr+=1){var Vr=jr[Xr],on=this._tiles[Vr.key];if(!on.hasData()){if(ye+1>this._source.maxzoom){var _n=Vr.children(this._source.maxzoom)[0],Bn=this.getTile(_n);if(!!Bn&&Bn.hasData()){Le[_n.key]=_n;continue}}else{var Kn=Vr.children(this._source.maxzoom);if(Le[Kn[0].key]&&Le[Kn[1].key]&&Le[Kn[2].key]&&Le[Kn[3].key])continue}for(var ca=on.wasRequested(),pa=Vr.overscaledZ-1;pa>=Qe;--pa){var ha=Vr.scaledTo(pa);if(De[ha.key]||(De[ha.key]=!0,on=this.getTile(ha),!on&&ca&&(on=this._addTile(ha)),on&&(Le[ha.key]=ha,ca=on.wasRequested(),on.hasData())))break}}}return Le},Z.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var Q in this._tiles){for(var ye=[],Le=void 0,De=this._tiles[Q].tileID;De.overscaledZ>0;){if(De.key in this._loadedParentTiles){Le=this._loadedParentTiles[De.key];break}ye.push(De.key);var Qe=De.scaledTo(De.overscaledZ-1);if(Le=this._getLoadedTile(Qe),Le)break;De=Qe}for(var vt=0,Mt=ye;vt<Mt.length;vt+=1){var Yt=Mt[vt];this._loadedParentTiles[Yt]=Le}}},Z.prototype._addTile=function(Q){var ye=this._tiles[Q.key];if(ye)return ye;ye=this._cache.getAndRemove(Q),ye&&(this._setTileReloadTimer(Q.key,ye),ye.tileID=Q,this._state.initializeTileState(ye,this.map?this.map.painter:null),this._cacheTimers[Q.key]&&(clearTimeout(this._cacheTimers[Q.key]),delete this._cacheTimers[Q.key],this._setTileReloadTimer(Q.key,ye)));var Le=Boolean(ye);return Le||(ye=new t.Tile(Q,this._source.tileSize*Q.overscaleFactor()),this._loadTile(ye,this._tileLoaded.bind(this,ye,Q.key,ye.state))),ye?(ye.uses++,this._tiles[Q.key]=ye,Le||this._source.fire(new t.Event("dataloading",{tile:ye,coord:ye.tileID,dataType:"source"})),ye):null},Z.prototype._setTileReloadTimer=function(Q,ye){var Le=this;Q in this._timers&&(clearTimeout(this._timers[Q]),delete this._timers[Q]);var De=ye.getExpiryTimeout();De&&(this._timers[Q]=setTimeout(function(){Le._reloadTile(Q,"expired"),delete Le._timers[Q]},De))},Z.prototype._removeTile=function(Q){var ye=this._tiles[Q];!ye||(ye.uses--,delete this._tiles[Q],this._timers[Q]&&(clearTimeout(this._timers[Q]),delete this._timers[Q]),!(ye.uses>0)&&(ye.hasData()&&ye.state!=="reloading"?this._cache.add(ye.tileID,ye,ye.getExpiryTimeout()):(ye.aborted=!0,this._abortTile(ye),this._unloadTile(ye))))},Z.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var Q in this._tiles)this._removeTile(Q);this._cache.reset()},Z.prototype.tilesIn=function(Q,ye,Le){var De=this,Qe=[],vt=this.transform;if(!vt)return Qe;for(var Mt=Le?vt.getCameraQueryGeometry(Q):Q,Yt=Q.map(function(pa){return vt.pointCoordinate(pa)}),ar=Mt.map(function(pa){return vt.pointCoordinate(pa)}),cr=this.getIds(),Dr=1/0,Xr=1/0,jr=-1/0,Vr=-1/0,on=0,_n=ar;on<_n.length;on+=1){var Bn=_n[on];Dr=Math.min(Dr,Bn.x),Xr=Math.min(Xr,Bn.y),jr=Math.max(jr,Bn.x),Vr=Math.max(Vr,Bn.y)}for(var Kn=function(pa){var ha=De._tiles[cr[pa]];if(!ha.holdingForFade()){var Da=ha.tileID,Ia=Math.pow(2,vt.zoom-ha.tileID.overscaledZ),Ta=ye*ha.queryPadding*t.EXTENT/ha.tileSize/Ia,Ga=[Da.getTilePoint(new t.MercatorCoordinate(Dr,Xr)),Da.getTilePoint(new t.MercatorCoordinate(jr,Vr))];if(Ga[0].x-Ta<t.EXTENT&&Ga[0].y-Ta<t.EXTENT&&Ga[1].x+Ta>=0&&Ga[1].y+Ta>=0){var ja=Yt.map(function(_i){return Da.getTilePoint(_i)}),li=ar.map(function(_i){return Da.getTilePoint(_i)});Qe.push({tile:ha,tileID:Da,queryGeometry:ja,cameraQueryGeometry:li,scale:Ia})}}},ca=0;ca<cr.length;ca++)Kn(ca);return Qe},Z.prototype.getVisibleCoordinates=function(Q){for(var ye=this,Le=this.getRenderableIds(Q).map(function(Mt){return ye._tiles[Mt].tileID}),De=0,Qe=Le;De<Qe.length;De+=1){var vt=Qe[De];vt.posMatrix=this.transform.calculatePosMatrix(vt.toUnwrapped())}return Le},Z.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(yt(this._source.type))for(var Q in this._tiles){var ye=this._tiles[Q];if(ye.fadeEndTime!==void 0&&ye.fadeEndTime>=t.browser.now())return!0}return!1},Z.prototype.setFeatureState=function(Q,ye,Le){Q=Q||"_geojsonTileLayer",this._state.updateState(Q,ye,Le)},Z.prototype.removeFeatureState=function(Q,ye,Le){Q=Q||"_geojsonTileLayer",this._state.removeFeatureState(Q,ye,Le)},Z.prototype.getFeatureState=function(Q,ye){return Q=Q||"_geojsonTileLayer",this._state.getState(Q,ye)},Z.prototype.setDependencies=function(Q,ye,Le){var De=this._tiles[Q];De&&De.setDependencies(ye,Le)},Z.prototype.reloadTilesForDependencies=function(Q,ye){for(var Le in this._tiles){var De=this._tiles[Le];De.hasDependency(Q,ye)&&this._reloadTile(Le,"reloading")}this._cache.filter(function(Qe){return!Qe.hasDependency(Q,ye)})},Z}(t.Evented);ut.maxOverzooming=10,ut.maxUnderzooming=3;function ct(pe,Z){var ge=Math.abs(pe.wrap*2)-+(pe.wrap<0),Q=Math.abs(Z.wrap*2)-+(Z.wrap<0);return pe.overscaledZ-Z.overscaledZ||Q-ge||Z.canonical.y-pe.canonical.y||Z.canonical.x-pe.canonical.x}function yt(pe){return pe==="raster"||pe==="image"||pe==="video"}function kt(){return new t.window.Worker(np.workerUrl)}var jt="mapboxgl_preloaded_worker_pool",Mr=function(){this.active={}};Mr.prototype.acquire=function(Z){if(!this.workers)for(this.workers=[];this.workers.length<Mr.workerCount;)this.workers.push(new kt);return this.active[Z]=!0,this.workers.slice()},Mr.prototype.release=function(Z){delete this.active[Z],this.numActive()===0&&(this.workers.forEach(function(ge){ge.terminate()}),this.workers=null)},Mr.prototype.isPreloaded=function(){return!!this.active[jt]},Mr.prototype.numActive=function(){return Object.keys(this.active).length};var Sr=Math.floor(t.browser.hardwareConcurrency/2);Mr.workerCount=Math.max(Math.min(Sr,6),1);var Lr;function Ar(){return Lr||(Lr=new Mr),Lr}function Ur(){var pe=Ar();pe.acquire(jt)}function fn(){var pe=Lr;pe&&(pe.isPreloaded()&&pe.numActive()===1?(pe.release(jt),Lr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Cr(pe,Z){var ge={};for(var Q in pe)Q!=="ref"&&(ge[Q]=pe[Q]);return t.refProperties.forEach(function(ye){ye in Z&&(ge[ye]=Z[ye])}),ge}function _r(pe){pe=pe.slice();for(var Z=Object.create(null),ge=0;ge<pe.length;ge++)Z[pe[ge].id]=pe[ge];for(var Q=0;Q<pe.length;Q++)"ref"in pe[Q]&&(pe[Q]=Cr(pe[Q],Z[pe[Q].ref]));return pe}function En(){var pe={},Z=t.styleSpec.$version;for(var ge in t.styleSpec.$root){var Q=t.styleSpec.$root[ge];if(Q.required){var ye=null;ge==="version"?ye=Z:Q.type==="array"?ye=[]:ye={},ye!=null&&(pe[ge]=ye)}}return pe}var Jr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Pr(pe,Z,ge){ge.push({command:Jr.addSource,args:[pe,Z[pe]]})}function vn(pe,Z,ge){Z.push({command:Jr.removeSource,args:[pe]}),ge[pe]=!0}function xn(pe,Z,ge,Q){vn(pe,ge,Q),Pr(pe,Z,ge)}function qr(pe,Z,ge){var Q;for(Q in pe[ge])if(!!pe[ge].hasOwnProperty(Q)&&Q!=="data"&&!t.deepEqual(pe[ge][Q],Z[ge][Q]))return!1;for(Q in Z[ge])if(!!Z[ge].hasOwnProperty(Q)&&Q!=="data"&&!t.deepEqual(pe[ge][Q],Z[ge][Q]))return!1;return!0}function st(pe,Z,ge,Q){pe=pe||{},Z=Z||{};var ye;for(ye in pe)!pe.hasOwnProperty(ye)||Z.hasOwnProperty(ye)||vn(ye,ge,Q);for(ye in Z)!Z.hasOwnProperty(ye)||(pe.hasOwnProperty(ye)?t.deepEqual(pe[ye],Z[ye])||(pe[ye].type==="geojson"&&Z[ye].type==="geojson"&&qr(pe,Z,ye)?ge.push({command:Jr.setGeoJSONSourceData,args:[ye,Z[ye].data]}):xn(ye,Z,ge,Q)):Pr(ye,Z,ge))}function Bt(pe,Z,ge,Q,ye,Le){pe=pe||{},Z=Z||{};var De;for(De in pe)!pe.hasOwnProperty(De)||t.deepEqual(pe[De],Z[De])||ge.push({command:Le,args:[Q,De,Z[De],ye]});for(De in Z)!Z.hasOwnProperty(De)||pe.hasOwnProperty(De)||t.deepEqual(pe[De],Z[De])||ge.push({command:Le,args:[Q,De,Z[De],ye]})}function ir(pe){return pe.id}function xr(pe,Z){return pe[Z.id]=Z,pe}function Qr(pe,Z,ge){pe=pe||[],Z=Z||[];var Q=pe.map(ir),ye=Z.map(ir),Le=pe.reduce(xr,{}),De=Z.reduce(xr,{}),Qe=Q.slice(),vt=Object.create(null),Mt,Yt,ar,cr,Dr,Xr,jr;for(Mt=0,Yt=0;Mt<Q.length;Mt++)ar=Q[Mt],De.hasOwnProperty(ar)?Yt++:(ge.push({command:Jr.removeLayer,args:[ar]}),Qe.splice(Qe.indexOf(ar,Yt),1));for(Mt=0,Yt=0;Mt<ye.length;Mt++)ar=ye[ye.length-1-Mt],Qe[Qe.length-1-Mt]!==ar&&(Le.hasOwnProperty(ar)?(ge.push({command:Jr.removeLayer,args:[ar]}),Qe.splice(Qe.lastIndexOf(ar,Qe.length-Yt),1)):Yt++,Xr=Qe[Qe.length-Mt],ge.push({command:Jr.addLayer,args:[De[ar],Xr]}),Qe.splice(Qe.length-Mt,0,ar),vt[ar]=!0);for(Mt=0;Mt<ye.length;Mt++)if(ar=ye[Mt],cr=Le[ar],Dr=De[ar],!(vt[ar]||t.deepEqual(cr,Dr))){if(!t.deepEqual(cr.source,Dr.source)||!t.deepEqual(cr["source-layer"],Dr["source-layer"])||!t.deepEqual(cr.type,Dr.type)){ge.push({command:Jr.removeLayer,args:[ar]}),Xr=Qe[Qe.lastIndexOf(ar)+1],ge.push({command:Jr.addLayer,args:[Dr,Xr]});continue}Bt(cr.layout,Dr.layout,ge,ar,null,Jr.setLayoutProperty),Bt(cr.paint,Dr.paint,ge,ar,null,Jr.setPaintProperty),t.deepEqual(cr.filter,Dr.filter)||ge.push({command:Jr.setFilter,args:[ar,Dr.filter]}),(!t.deepEqual(cr.minzoom,Dr.minzoom)||!t.deepEqual(cr.maxzoom,Dr.maxzoom))&&ge.push({command:Jr.setLayerZoomRange,args:[ar,Dr.minzoom,Dr.maxzoom]});for(jr in cr)!cr.hasOwnProperty(jr)||jr==="layout"||jr==="paint"||jr==="filter"||jr==="metadata"||jr==="minzoom"||jr==="maxzoom"||(jr.indexOf("paint.")===0?Bt(cr[jr],Dr[jr],ge,ar,jr.slice(6),Jr.setPaintProperty):t.deepEqual(cr[jr],Dr[jr])||ge.push({command:Jr.setLayerProperty,args:[ar,jr,Dr[jr]]}));for(jr in Dr)!Dr.hasOwnProperty(jr)||cr.hasOwnProperty(jr)||jr==="layout"||jr==="paint"||jr==="filter"||jr==="metadata"||jr==="minzoom"||jr==="maxzoom"||(jr.indexOf("paint.")===0?Bt(cr[jr],Dr[jr],ge,ar,jr.slice(6),Jr.setPaintProperty):t.deepEqual(cr[jr],Dr[jr])||ge.push({command:Jr.setLayerProperty,args:[ar,jr,Dr[jr]]}))}}function Gr(pe,Z){if(!pe)return[{command:Jr.setStyle,args:[Z]}];var ge=[];try{if(!t.deepEqual(pe.version,Z.version))return[{command:Jr.setStyle,args:[Z]}];t.deepEqual(pe.center,Z.center)||ge.push({command:Jr.setCenter,args:[Z.center]}),t.deepEqual(pe.zoom,Z.zoom)||ge.push({command:Jr.setZoom,args:[Z.zoom]}),t.deepEqual(pe.bearing,Z.bearing)||ge.push({command:Jr.setBearing,args:[Z.bearing]}),t.deepEqual(pe.pitch,Z.pitch)||ge.push({command:Jr.setPitch,args:[Z.pitch]}),t.deepEqual(pe.sprite,Z.sprite)||ge.push({command:Jr.setSprite,args:[Z.sprite]}),t.deepEqual(pe.glyphs,Z.glyphs)||ge.push({command:Jr.setGlyphs,args:[Z.glyphs]}),t.deepEqual(pe.transition,Z.transition)||ge.push({command:Jr.setTransition,args:[Z.transition]}),t.deepEqual(pe.light,Z.light)||ge.push({command:Jr.setLight,args:[Z.light]});var Q={},ye=[];st(pe.sources,Z.sources,ye,Q);var Le=[];pe.layers&&pe.layers.forEach(function(De){Q[De.source]?ge.push({command:Jr.removeLayer,args:[De.id]}):Le.push(De)}),ge=ge.concat(ye),Qr(Le,Z.layers,ge)}catch(De){console.warn("Unable to compute style diff:",De),ge=[{command:Jr.setStyle,args:[Z]}]}return ge}var Br=function(Z,ge){this.reset(Z,ge)};Br.prototype.reset=function(Z,ge){this.points=Z||[],this._distances=[0];for(var Q=1;Q<this.points.length;Q++)this._distances[Q]=this._distances[Q-1]+this.points[Q].dist(this.points[Q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ge||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Br.prototype.lerp=function(Z){if(this.points.length===1)return this.points[0];Z=t.clamp(Z,0,1);for(var ge=1,Q=this._distances[ge],ye=Z*this.paddedLength+this.padding;Q<ye&&ge<this._distances.length;)Q=this._distances[++ge];var Le=ge-1,De=this._distances[Le],Qe=Q-De,vt=Qe>0?(ye-De)/Qe:0;return this.points[Le].mult(1-vt).add(this.points[ge].mult(vt))};var kr=function(Z,ge,Q){var ye=this.boxCells=[],Le=this.circleCells=[];this.xCellCount=Math.ceil(Z/Q),this.yCellCount=Math.ceil(ge/Q);for(var De=0;De<this.xCellCount*this.yCellCount;De++)ye.push([]),Le.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=Z,this.height=ge,this.xScale=this.xCellCount/Z,this.yScale=this.yCellCount/ge,this.boxUid=0,this.circleUid=0};kr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},kr.prototype.insert=function(Z,ge,Q,ye,Le){this._forEachCell(ge,Q,ye,Le,this._insertBoxCell,this.boxUid++),this.boxKeys.push(Z),this.bboxes.push(ge),this.bboxes.push(Q),this.bboxes.push(ye),this.bboxes.push(Le)},kr.prototype.insertCircle=function(Z,ge,Q,ye){this._forEachCell(ge-ye,Q-ye,ge+ye,Q+ye,this._insertCircleCell,this.circleUid++),this.circleKeys.push(Z),this.circles.push(ge),this.circles.push(Q),this.circles.push(ye)},kr.prototype._insertBoxCell=function(Z,ge,Q,ye,Le,De){this.boxCells[Le].push(De)},kr.prototype._insertCircleCell=function(Z,ge,Q,ye,Le,De){this.circleCells[Le].push(De)},kr.prototype._query=function(Z,ge,Q,ye,Le,De){if(Q<0||Z>this.width||ye<0||ge>this.height)return Le?!1:[];var Qe=[];if(Z<=0&&ge<=0&&this.width<=Q&&this.height<=ye){if(Le)return!0;for(var vt=0;vt<this.boxKeys.length;vt++)Qe.push({key:this.boxKeys[vt],x1:this.bboxes[vt*4],y1:this.bboxes[vt*4+1],x2:this.bboxes[vt*4+2],y2:this.bboxes[vt*4+3]});for(var Mt=0;Mt<this.circleKeys.length;Mt++){var Yt=this.circles[Mt*3],ar=this.circles[Mt*3+1],cr=this.circles[Mt*3+2];Qe.push({key:this.circleKeys[Mt],x1:Yt-cr,y1:ar-cr,x2:Yt+cr,y2:ar+cr})}return De?Qe.filter(De):Qe}else{var Dr={hitTest:Le,seenUids:{box:{},circle:{}}};return this._forEachCell(Z,ge,Q,ye,this._queryCell,Qe,Dr,De),Le?Qe.length>0:Qe}},kr.prototype._queryCircle=function(Z,ge,Q,ye,Le){var De=Z-Q,Qe=Z+Q,vt=ge-Q,Mt=ge+Q;if(Qe<0||De>this.width||Mt<0||vt>this.height)return ye?!1:[];var Yt=[],ar={hitTest:ye,circle:{x:Z,y:ge,radius:Q},seenUids:{box:{},circle:{}}};return this._forEachCell(De,vt,Qe,Mt,this._queryCellCircle,Yt,ar,Le),ye?Yt.length>0:Yt},kr.prototype.query=function(Z,ge,Q,ye,Le){return this._query(Z,ge,Q,ye,!1,Le)},kr.prototype.hitTest=function(Z,ge,Q,ye,Le){return this._query(Z,ge,Q,ye,!0,Le)},kr.prototype.hitTestCircle=function(Z,ge,Q,ye){return this._queryCircle(Z,ge,Q,!0,ye)},kr.prototype._queryCell=function(Z,ge,Q,ye,Le,De,Qe,vt){var Mt=Qe.seenUids,Yt=this.boxCells[Le];if(Yt!==null)for(var ar=this.bboxes,cr=0,Dr=Yt;cr<Dr.length;cr+=1){var Xr=Dr[cr];if(!Mt.box[Xr]){Mt.box[Xr]=!0;var jr=Xr*4;if(Z<=ar[jr+2]&&ge<=ar[jr+3]&&Q>=ar[jr+0]&&ye>=ar[jr+1]&&(!vt||vt(this.boxKeys[Xr]))){if(Qe.hitTest)return De.push(!0),!0;De.push({key:this.boxKeys[Xr],x1:ar[jr],y1:ar[jr+1],x2:ar[jr+2],y2:ar[jr+3]})}}}var Vr=this.circleCells[Le];if(Vr!==null)for(var on=this.circles,_n=0,Bn=Vr;_n<Bn.length;_n+=1){var Kn=Bn[_n];if(!Mt.circle[Kn]){Mt.circle[Kn]=!0;var ca=Kn*3;if(this._circleAndRectCollide(on[ca],on[ca+1],on[ca+2],Z,ge,Q,ye)&&(!vt||vt(this.circleKeys[Kn]))){if(Qe.hitTest)return De.push(!0),!0;var pa=on[ca],ha=on[ca+1],Da=on[ca+2];De.push({key:this.circleKeys[Kn],x1:pa-Da,y1:ha-Da,x2:pa+Da,y2:ha+Da})}}}},kr.prototype._queryCellCircle=function(Z,ge,Q,ye,Le,De,Qe,vt){var Mt=Qe.circle,Yt=Qe.seenUids,ar=this.boxCells[Le];if(ar!==null)for(var cr=this.bboxes,Dr=0,Xr=ar;Dr<Xr.length;Dr+=1){var jr=Xr[Dr];if(!Yt.box[jr]){Yt.box[jr]=!0;var Vr=jr*4;if(this._circleAndRectCollide(Mt.x,Mt.y,Mt.radius,cr[Vr+0],cr[Vr+1],cr[Vr+2],cr[Vr+3])&&(!vt||vt(this.boxKeys[jr])))return De.push(!0),!0}}var on=this.circleCells[Le];if(on!==null)for(var _n=this.circles,Bn=0,Kn=on;Bn<Kn.length;Bn+=1){var ca=Kn[Bn];if(!Yt.circle[ca]){Yt.circle[ca]=!0;var pa=ca*3;if(this._circlesCollide(_n[pa],_n[pa+1],_n[pa+2],Mt.x,Mt.y,Mt.radius)&&(!vt||vt(this.circleKeys[ca])))return De.push(!0),!0}}},kr.prototype._forEachCell=function(Z,ge,Q,ye,Le,De,Qe,vt){for(var Mt=this._convertToXCellCoord(Z),Yt=this._convertToYCellCoord(ge),ar=this._convertToXCellCoord(Q),cr=this._convertToYCellCoord(ye),Dr=Mt;Dr<=ar;Dr++)for(var Xr=Yt;Xr<=cr;Xr++){var jr=this.xCellCount*Xr+Dr;if(Le.call(this,Z,ge,Q,ye,jr,De,Qe,vt))return}},kr.prototype._convertToXCellCoord=function(Z){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Z*this.xScale)))},kr.prototype._convertToYCellCoord=function(Z){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Z*this.yScale)))},kr.prototype._circlesCollide=function(Z,ge,Q,ye,Le,De){var Qe=ye-Z,vt=Le-ge,Mt=Q+De;return Mt*Mt>Qe*Qe+vt*vt},kr.prototype._circleAndRectCollide=function(Z,ge,Q,ye,Le,De,Qe){var vt=(De-ye)/2,Mt=Math.abs(Z-(ye+vt));if(Mt>vt+Q)return!1;var Yt=(Qe-Le)/2,ar=Math.abs(ge-(Le+Yt));if(ar>Yt+Q)return!1;if(Mt<=vt||ar<=Yt)return!0;var cr=Mt-vt,Dr=ar-Yt;return cr*cr+Dr*Dr<=Q*Q};function en(pe,Z,ge,Q,ye){var Le=t.create();return Z?(t.scale(Le,Le,[1/ye,1/ye,1]),ge||t.rotateZ(Le,Le,Q.angle)):t.multiply(Le,Q.labelPlaneMatrix,pe),Le}function Zn(pe,Z,ge,Q,ye){if(Z){var Le=t.clone(pe);return t.scale(Le,Le,[ye,ye,1]),ge||t.rotateZ(Le,Le,-Q.angle),Le}else return Q.glCoordMatrix}function Hn(pe,Z){var ge=[pe.x,pe.y,0,1];ga(ge,ge,Z);var Q=ge[3];return{point:new t.Point(ge[0]/Q,ge[1]/Q),signedDistanceFromCamera:Q}}function da(pe,Z){return .5+.5*(pe/Z)}function wa(pe,Z){var ge=pe[0]/pe[3],Q=pe[1]/pe[3],ye=ge>=-Z[0]&&ge<=Z[0]&&Q>=-Z[1]&&Q<=Z[1];return ye}function Va(pe,Z,ge,Q,ye,Le,De,Qe){var vt=Q?pe.textSizeData:pe.iconSizeData,Mt=t.evaluateSizeForZoom(vt,ge.transform.zoom),Yt=[256/ge.width*2+1,256/ge.height*2+1],ar=Q?pe.text.dynamicLayoutVertexArray:pe.icon.dynamicLayoutVertexArray;ar.clear();for(var cr=pe.lineVertexArray,Dr=Q?pe.text.placedSymbolArray:pe.icon.placedSymbolArray,Xr=ge.transform.width/ge.transform.height,jr=!1,Vr=0;Vr<Dr.length;Vr++){var on=Dr.get(Vr);if(on.hidden||on.writingMode===t.WritingMode.vertical&&!jr){La(on.numGlyphs,ar);continue}jr=!1;var _n=[on.anchorX,on.anchorY,0,1];if(t.transformMat4(_n,_n,Z),!wa(_n,Yt)){La(on.numGlyphs,ar);continue}var Bn=_n[3],Kn=da(ge.transform.cameraToCenterDistance,Bn),ca=t.evaluateSizeForFeature(vt,Mt,on),pa=De?ca/Kn:ca*Kn,ha=new t.Point(on.anchorX,on.anchorY),Da=Hn(ha,ye).point,Ia={},Ta=wn(on,pa,!1,Qe,Z,ye,Le,pe.glyphOffsetArray,cr,ar,Da,ha,Ia,Xr);jr=Ta.useVertical,(Ta.notEnoughRoom||jr||Ta.needsFlipping&&wn(on,pa,!0,Qe,Z,ye,Le,pe.glyphOffsetArray,cr,ar,Da,ha,Ia,Xr).notEnoughRoom)&&La(on.numGlyphs,ar)}Q?pe.text.dynamicLayoutVertexBuffer.updateData(ar):pe.icon.dynamicLayoutVertexBuffer.updateData(ar)}function Oa(pe,Z,ge,Q,ye,Le,De,Qe,vt,Mt,Yt){var ar=Qe.glyphStartIndex+Qe.numGlyphs,cr=Qe.lineStartIndex,Dr=Qe.lineStartIndex+Qe.lineLength,Xr=Z.getoffsetX(Qe.glyphStartIndex),jr=Z.getoffsetX(ar-1),Vr=jn(pe*Xr,ge,Q,ye,Le,De,Qe.segment,cr,Dr,vt,Mt,Yt);if(!Vr)return null;var on=jn(pe*jr,ge,Q,ye,Le,De,Qe.segment,cr,Dr,vt,Mt,Yt);return on?{first:Vr,last:on}:null}function wr(pe,Z,ge,Q){if(pe===t.WritingMode.horizontal){var ye=Math.abs(ge.y-Z.y),Le=Math.abs(ge.x-Z.x)*Q;if(ye>Le)return{useVertical:!0}}return(pe===t.WritingMode.vertical?Z.y<ge.y:Z.x>ge.x)?{needsFlipping:!0}:null}function wn(pe,Z,ge,Q,ye,Le,De,Qe,vt,Mt,Yt,ar,cr,Dr){var Xr=Z/24,jr=pe.lineOffsetX*Xr,Vr=pe.lineOffsetY*Xr,on;if(pe.numGlyphs>1){var _n=pe.glyphStartIndex+pe.numGlyphs,Bn=pe.lineStartIndex,Kn=pe.lineStartIndex+pe.lineLength,ca=Oa(Xr,Qe,jr,Vr,ge,Yt,ar,pe,vt,Le,cr);if(!ca)return{notEnoughRoom:!0};var pa=Hn(ca.first.point,De).point,ha=Hn(ca.last.point,De).point;if(Q&&!ge){var Da=wr(pe.writingMode,pa,ha,Dr);if(Da)return Da}on=[ca.first];for(var Ia=pe.glyphStartIndex+1;Ia<_n-1;Ia++)on.push(jn(Xr*Qe.getoffsetX(Ia),jr,Vr,ge,Yt,ar,pe.segment,Bn,Kn,vt,Le,cr));on.push(ca.last)}else{if(Q&&!ge){var Ta=Hn(ar,ye).point,Ga=pe.lineStartIndex+pe.segment+1,ja=new t.Point(vt.getx(Ga),vt.gety(Ga)),li=Hn(ja,ye),_i=li.signedDistanceFromCamera>0?li.point:ln(ar,ja,Ta,1,ye),io=wr(pe.writingMode,Ta,_i,Dr);if(io)return io}var Mi=jn(Xr*Qe.getoffsetX(pe.glyphStartIndex),jr,Vr,ge,Yt,ar,pe.segment,pe.lineStartIndex,pe.lineStartIndex+pe.lineLength,vt,Le,cr);if(!Mi)return{notEnoughRoom:!0};on=[Mi]}for(var Fi=0,ri=on;Fi<ri.length;Fi+=1){var oo=ri[Fi];t.addDynamicAttributes(Mt,oo.point,oo.angle)}return{}}function ln(pe,Z,ge,Q,ye){var Le=Hn(pe.add(pe.sub(Z)._unit()),ye).point,De=ge.sub(Le);return ge.add(De._mult(Q/De.mag()))}function jn(pe,Z,ge,Q,ye,Le,De,Qe,vt,Mt,Yt,ar){var cr=Q?pe-Z:pe+Z,Dr=cr>0?1:-1,Xr=0;Q&&(Dr*=-1,Xr=Math.PI),Dr<0&&(Xr+=Math.PI);for(var jr=Dr>0?Qe+De:Qe+De+1,Vr=ye,on=ye,_n=0,Bn=0,Kn=Math.abs(cr),ca=[];_n+Bn<=Kn;){if(jr+=Dr,jr<Qe||jr>=vt)return null;if(on=Vr,ca.push(Vr),Vr=ar[jr],Vr===void 0){var pa=new t.Point(Mt.getx(jr),Mt.gety(jr)),ha=Hn(pa,Yt);if(ha.signedDistanceFromCamera>0)Vr=ar[jr]=ha.point;else{var Da=jr-Dr,Ia=_n===0?Le:new t.Point(Mt.getx(Da),Mt.gety(Da));Vr=ln(Ia,pa,on,Kn-_n+1,Yt)}}_n+=Bn,Bn=on.dist(Vr)}var Ta=(Kn-_n)/Bn,Ga=Vr.sub(on),ja=Ga.mult(Ta)._add(on);ja._add(Ga._unit()._perp()._mult(ge*Dr));var li=Xr+Math.atan2(Vr.y-on.y,Vr.x-on.x);return ca.push(ja),{point:ja,angle:li,path:ca}}var Jn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function La(pe,Z){for(var ge=0;ge<pe;ge++){var Q=Z.length;Z.resize(Q+4),Z.float32.set(Jn,Q*3)}}function ga(pe,Z,ge){var Q=Z[0],ye=Z[1];return pe[0]=ge[0]*Q+ge[4]*ye+ge[12],pe[1]=ge[1]*Q+ge[5]*ye+ge[13],pe[3]=ge[3]*Q+ge[7]*ye+ge[15],pe}var qn=100,Ea=function(Z,ge,Q){ge===void 0&&(ge=new kr(Z.width+2*qn,Z.height+2*qn,25)),Q===void 0&&(Q=new kr(Z.width+2*qn,Z.height+2*qn,25)),this.transform=Z,this.grid=ge,this.ignoredGrid=Q,this.pitchfactor=Math.cos(Z._pitch)*Z.cameraToCenterDistance,this.screenRightBoundary=Z.width+qn,this.screenBottomBoundary=Z.height+qn,this.gridRightBoundary=Z.width+2*qn,this.gridBottomBoundary=Z.height+2*qn};Ea.prototype.placeCollisionBox=function(Z,ge,Q,ye,Le){var De=this.projectAndGetPerspectiveRatio(ye,Z.anchorPointX,Z.anchorPointY),Qe=Q*De.perspectiveRatio,vt=Z.x1*Qe+De.point.x,Mt=Z.y1*Qe+De.point.y,Yt=Z.x2*Qe+De.point.x,ar=Z.y2*Qe+De.point.y;return!this.isInsideGrid(vt,Mt,Yt,ar)||!ge&&this.grid.hitTest(vt,Mt,Yt,ar,Le)?{box:[],offscreen:!1}:{box:[vt,Mt,Yt,ar],offscreen:this.isOffscreen(vt,Mt,Yt,ar)}},Ea.prototype.placeCollisionCircles=function(Z,ge,Q,ye,Le,De,Qe,vt,Mt,Yt,ar,cr,Dr){var Xr=[],jr=new t.Point(ge.anchorX,ge.anchorY),Vr=Hn(jr,De),on=da(this.transform.cameraToCenterDistance,Vr.signedDistanceFromCamera),_n=Yt?Le/on:Le*on,Bn=_n/t.ONE_EM,Kn=Hn(jr,Qe).point,ca={},pa=ge.lineOffsetX*Bn,ha=ge.lineOffsetY*Bn,Da=Oa(Bn,ye,pa,ha,!1,Kn,jr,ge,Q,Qe,ca),Ia=!1,Ta=!1,Ga=!0;if(Da){for(var ja=cr*.5*on+Dr,li=new t.Point(-qn,-qn),_i=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),io=new Br,Mi=Da.first,Fi=Da.last,ri=[],oo=Mi.path.length-1;oo>=1;oo--)ri.push(Mi.path[oo]);for(var yo=1;yo<Fi.path.length;yo++)ri.push(Fi.path[yo]);var Ao=ja*2.5;if(vt){var Zi=ri.map(function(kf){return Hn(kf,vt)});Zi.some(function(kf){return kf.signedDistanceFromCamera<=0})?ri=[]:ri=Zi.map(function(kf){return kf.point})}var Ro=[];if(ri.length>0){for(var wi=ri[0].clone(),Qi=ri[0].clone(),ls=1;ls<ri.length;ls++)wi.x=Math.min(wi.x,ri[ls].x),wi.y=Math.min(wi.y,ri[ls].y),Qi.x=Math.max(Qi.x,ri[ls].x),Qi.y=Math.max(Qi.y,ri[ls].y);wi.x>=li.x&&Qi.x<=_i.x&&wi.y>=li.y&&Qi.y<=_i.y?Ro=[ri]:Qi.x<li.x||wi.x>_i.x||Qi.y<li.y||wi.y>_i.y?Ro=[]:Ro=t.clipLine([ri],li.x,li.y,_i.x,_i.y)}for(var Ms=0,Bl=Ro;Ms<Bl.length;Ms+=1){var vu=Bl[Ms];io.reset(vu,ja*.25);var lf=0;io.length<=.5*ja?lf=1:lf=Math.ceil(io.paddedLength/Ao)+1;for(var uf=0;uf<lf;uf++){var Wu=uf/Math.max(lf-1,1),ff=io.lerp(Wu),ds=ff.x+qn,pu=ff.y+qn;Xr.push(ds,pu,ja,0);var bl=ds-ja,du=pu-ja,Sf=ds+ja,cf=pu+ja;if(Ga=Ga&&this.isOffscreen(bl,du,Sf,cf),Ta=Ta||this.isInsideGrid(bl,du,Sf,cf),!Z&&this.grid.hitTestCircle(ds,pu,ja,ar)&&(Ia=!0,!Mt))return{circles:[],offscreen:!1,collisionDetected:Ia}}}}return{circles:!Mt&&Ia||!Ta?[]:Xr,offscreen:Ga,collisionDetected:Ia}},Ea.prototype.queryRenderedSymbols=function(Z){if(Z.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ge=[],Q=1/0,ye=1/0,Le=-1/0,De=-1/0,Qe=0,vt=Z;Qe<vt.length;Qe+=1){var Mt=vt[Qe],Yt=new t.Point(Mt.x+qn,Mt.y+qn);Q=Math.min(Q,Yt.x),ye=Math.min(ye,Yt.y),Le=Math.max(Le,Yt.x),De=Math.max(De,Yt.y),ge.push(Yt)}for(var ar=this.grid.query(Q,ye,Le,De).concat(this.ignoredGrid.query(Q,ye,Le,De)),cr={},Dr={},Xr=0,jr=ar;Xr<jr.length;Xr+=1){var Vr=jr[Xr],on=Vr.key;if(cr[on.bucketInstanceId]===void 0&&(cr[on.bucketInstanceId]={}),!cr[on.bucketInstanceId][on.featureIndex]){var _n=[new t.Point(Vr.x1,Vr.y1),new t.Point(Vr.x2,Vr.y1),new t.Point(Vr.x2,Vr.y2),new t.Point(Vr.x1,Vr.y2)];!t.polygonIntersectsPolygon(ge,_n)||(cr[on.bucketInstanceId][on.featureIndex]=!0,Dr[on.bucketInstanceId]===void 0&&(Dr[on.bucketInstanceId]=[]),Dr[on.bucketInstanceId].push(on.featureIndex))}}return Dr},Ea.prototype.insertCollisionBox=function(Z,ge,Q,ye,Le){var De=ge?this.ignoredGrid:this.grid,Qe={bucketInstanceId:Q,featureIndex:ye,collisionGroupID:Le};De.insert(Qe,Z[0],Z[1],Z[2],Z[3])},Ea.prototype.insertCollisionCircles=function(Z,ge,Q,ye,Le){for(var De=ge?this.ignoredGrid:this.grid,Qe={bucketInstanceId:Q,featureIndex:ye,collisionGroupID:Le},vt=0;vt<Z.length;vt+=4)De.insertCircle(Qe,Z[vt],Z[vt+1],Z[vt+2])},Ea.prototype.projectAndGetPerspectiveRatio=function(Z,ge,Q){var ye=[ge,Q,0,1];ga(ye,ye,Z);var Le=new t.Point((ye[0]/ye[3]+1)/2*this.transform.width+qn,(-ye[1]/ye[3]+1)/2*this.transform.height+qn);return{point:Le,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ye[3])}},Ea.prototype.isOffscreen=function(Z,ge,Q,ye){return Q<qn||Z>=this.screenRightBoundary||ye<qn||ge>this.screenBottomBoundary},Ea.prototype.isInsideGrid=function(Z,ge,Q,ye){return Q>=0&&Z<this.gridRightBoundary&&ye>=0&&ge<this.gridBottomBoundary},Ea.prototype.getViewportMatrix=function(){var Z=t.identity([]);return t.translate(Z,Z,[-qn,-qn,0]),Z};function la(pe,Z,ge){return Z*(t.EXTENT/(pe.tileSize*Math.pow(2,ge-pe.tileID.overscaledZ)))}var sr=function(Z,ge,Q,ye){Z?this.opacity=Math.max(0,Math.min(1,Z.opacity+(Z.placed?ge:-ge))):this.opacity=ye&&Q?1:0,this.placed=Q};sr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Hr=function(Z,ge,Q,ye,Le){this.text=new sr(Z?Z.text:null,ge,Q,Le),this.icon=new sr(Z?Z.icon:null,ge,ye,Le)};Hr.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var dn=function(Z,ge,Q){this.text=Z,this.icon=ge,this.skipFade=Q},hn=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},Sn=function(Z,ge,Q,ye,Le){this.bucketInstanceId=Z,this.featureIndex=ge,this.sourceLayerIndex=Q,this.bucketIndex=ye,this.tileID=Le},Rn=function(Z){this.crossSourceCollisions=Z,this.maxGroupID=0,this.collisionGroups={}};Rn.prototype.get=function(Z){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Z]){var ge=++this.maxGroupID;this.collisionGroups[Z]={ID:ge,predicate:function(Q){return Q.collisionGroupID===ge}}}return this.collisionGroups[Z]};function Mn(pe,Z,ge,Q,ye){var Le=t.getAnchorAlignment(pe),De=Le.horizontalAlign,Qe=Le.verticalAlign,vt=-(De-.5)*Z,Mt=-(Qe-.5)*ge,Yt=t.evaluateVariableOffset(pe,Q);return new t.Point(vt+Yt[0]*ye,Mt+Yt[1]*ye)}function mr(pe,Z,ge,Q,ye,Le){var De=pe.x1,Qe=pe.x2,vt=pe.y1,Mt=pe.y2,Yt=pe.anchorPointX,ar=pe.anchorPointY,cr=new t.Point(Z,ge);return Q&&cr._rotate(ye?Le:-Le),{x1:De+cr.x,y1:vt+cr.y,x2:Qe+cr.x,y2:Mt+cr.y,anchorPointX:Yt,anchorPointY:ar}}var hr=function(Z,ge,Q,ye){this.transform=Z.clone(),this.collisionIndex=new Ea(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ge,this.retainedQueryData={},this.collisionGroups=new Rn(Q),this.collisionCircleArrays={},this.prevPlacement=ye,ye&&(ye.prevPlacement=void 0),this.placedOrientations={}};hr.prototype.getBucketParts=function(Z,ge,Q,ye){var Le=Q.getBucket(ge),De=Q.latestFeatureIndex;if(!(!Le||!De||ge.id!==Le.layerIds[0])){var Qe=Q.collisionBoxArray,vt=Le.layers[0].layout,Mt=Math.pow(2,this.transform.zoom-Q.tileID.overscaledZ),Yt=Q.tileSize/t.EXTENT,ar=this.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),cr=vt.get("text-pitch-alignment")==="map",Dr=vt.get("text-rotation-alignment")==="map",Xr=la(Q,1,this.transform.zoom),jr=en(ar,cr,Dr,this.transform,Xr),Vr=null;if(cr){var on=Zn(ar,cr,Dr,this.transform,Xr);Vr=t.multiply([],this.transform.labelPlaneMatrix,on)}this.retainedQueryData[Le.bucketInstanceId]=new Sn(Le.bucketInstanceId,De,Le.sourceLayerIndex,Le.index,Q.tileID);var _n={bucket:Le,layout:vt,posMatrix:ar,textLabelPlaneMatrix:jr,labelToScreenMatrix:Vr,scale:Mt,textPixelRatio:Yt,holdingForFade:Q.holdingForFade(),collisionBoxArray:Qe,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(Le.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Le.sourceID)};if(ye)for(var Bn=0,Kn=Le.sortKeyRanges;Bn<Kn.length;Bn+=1){var ca=Kn[Bn],pa=ca.sortKey,ha=ca.symbolInstanceStart,Da=ca.symbolInstanceEnd;Z.push({sortKey:pa,symbolInstanceStart:ha,symbolInstanceEnd:Da,parameters:_n})}else Z.push({symbolInstanceStart:0,symbolInstanceEnd:Le.symbolInstances.length,parameters:_n})}},hr.prototype.attemptAnchorPlacement=function(Z,ge,Q,ye,Le,De,Qe,vt,Mt,Yt,ar,cr,Dr,Xr,jr){var Vr=[cr.textOffset0,cr.textOffset1],on=Mn(Z,Q,ye,Vr,Le),_n=this.collisionIndex.placeCollisionBox(mr(ge,on.x,on.y,De,Qe,this.transform.angle),ar,vt,Mt,Yt.predicate);if(jr){var Bn=this.collisionIndex.placeCollisionBox(mr(jr,on.x,on.y,De,Qe,this.transform.angle),ar,vt,Mt,Yt.predicate);if(Bn.box.length===0)return}if(_n.box.length>0){var Kn;return this.prevPlacement&&this.prevPlacement.variableOffsets[cr.crossTileID]&&this.prevPlacement.placements[cr.crossTileID]&&this.prevPlacement.placements[cr.crossTileID].text&&(Kn=this.prevPlacement.variableOffsets[cr.crossTileID].anchor),this.variableOffsets[cr.crossTileID]={textOffset:Vr,width:Q,height:ye,anchor:Z,textBoxScale:Le,prevAnchor:Kn},this.markUsedJustification(Dr,Z,cr,Xr),Dr.allowVerticalPlacement&&(this.markUsedOrientation(Dr,Xr,cr),this.placedOrientations[cr.crossTileID]=Xr),{shift:on,placedGlyphBoxes:_n}}},hr.prototype.placeLayerBucketPart=function(Z,ge,Q){var ye=this,Le=Z.parameters,De=Le.bucket,Qe=Le.layout,vt=Le.posMatrix,Mt=Le.textLabelPlaneMatrix,Yt=Le.labelToScreenMatrix,ar=Le.textPixelRatio,cr=Le.holdingForFade,Dr=Le.collisionBoxArray,Xr=Le.partiallyEvaluatedTextSize,jr=Le.collisionGroup,Vr=Qe.get("text-optional"),on=Qe.get("icon-optional"),_n=Qe.get("text-allow-overlap"),Bn=Qe.get("icon-allow-overlap"),Kn=Qe.get("text-rotation-alignment")==="map",ca=Qe.get("text-pitch-alignment")==="map",pa=Qe.get("icon-text-fit")!=="none",ha=Qe.get("symbol-z-order")==="viewport-y",Da=_n&&(Bn||!De.hasIconData()||on),Ia=Bn&&(_n||!De.hasTextData()||Vr);!De.collisionArrays&&Dr&&De.deserializeCollisionBoxes(Dr);var Ta=function(Mi,Fi){if(!ge[Mi.crossTileID]){if(cr){ye.placements[Mi.crossTileID]=new dn(!1,!1,!1);return}var ri=!1,oo=!1,yo=!0,Ao=null,Zi={box:null,offscreen:null},Ro={box:null,offscreen:null},wi=null,Qi=null,ls=null,Ms=0,Bl=0,vu=0;Fi.textFeatureIndex?Ms=Fi.textFeatureIndex:Mi.useRuntimeCollisionCircles&&(Ms=Mi.featureIndex),Fi.verticalTextFeatureIndex&&(Bl=Fi.verticalTextFeatureIndex);var lf=Fi.textBox;if(lf){var uf=function(bs){var gu=t.WritingMode.horizontal;if(De.allowVerticalPlacement&&!bs&&ye.prevPlacement){var Ql=ye.prevPlacement.placedOrientations[Mi.crossTileID];Ql&&(ye.placedOrientations[Mi.crossTileID]=Ql,gu=Ql,ye.markUsedOrientation(De,gu,Mi))}return gu},Wu=function(bs,gu){if(De.allowVerticalPlacement&&Mi.numVerticalGlyphVertices>0&&Fi.verticalTextBox)for(var Ql=0,Fh=De.writingModes;Ql<Fh.length;Ql+=1){var Tv=Fh[Ql];if(Tv===t.WritingMode.vertical?(Zi=gu(),Ro=Zi):Zi=bs(),Zi&&Zi.box&&Zi.box.length)break}else Zi=bs()};if(Qe.get("text-variable-anchor")){var bl=Qe.get("text-variable-anchor");if(ye.prevPlacement&&ye.prevPlacement.variableOffsets[Mi.crossTileID]){var du=ye.prevPlacement.variableOffsets[Mi.crossTileID];bl.indexOf(du.anchor)>0&&(bl=bl.filter(function(bs){return bs!==du.anchor}),bl.unshift(du.anchor))}var Sf=function(bs,gu,Ql){for(var Fh=bs.x2-bs.x1,Tv=bs.y2-bs.y1,vd=Mi.textBoxScale,pd=pa&&!Bn?gu:null,fh={box:[],offscreen:!1},dd=_n?bl.length*2:bl.length,$l=0;$l<dd;++$l){var gd=bl[$l%bl.length],yd=$l>=bl.length,Av=ye.attemptAnchorPlacement(gd,bs,Fh,Tv,vd,Kn,ca,ar,vt,jr,yd,Mi,De,Ql,pd);if(Av&&(fh=Av.placedGlyphBoxes,fh&&fh.box&&fh.box.length)){ri=!0,Ao=Av.shift;break}}return fh},cf=function(){return Sf(lf,Fi.iconBox,t.WritingMode.horizontal)},kf=function(){var bs=Fi.verticalTextBox,gu=Zi&&Zi.box&&Zi.box.length;return De.allowVerticalPlacement&&!gu&&Mi.numVerticalGlyphVertices>0&&bs?Sf(bs,Fi.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}};Wu(cf,kf),Zi&&(ri=Zi.box,yo=Zi.offscreen);var Dh=uf(Zi&&Zi.box);if(!ri&&ye.prevPlacement){var Rc=ye.prevPlacement.variableOffsets[Mi.crossTileID];Rc&&(ye.variableOffsets[Mi.crossTileID]=Rc,ye.markUsedJustification(De,Rc.anchor,Mi,Dh))}}else{var ff=function(bs,gu){var Ql=ye.collisionIndex.placeCollisionBox(bs,_n,ar,vt,jr.predicate);return Ql&&Ql.box&&Ql.box.length&&(ye.markUsedOrientation(De,gu,Mi),ye.placedOrientations[Mi.crossTileID]=gu),Ql},ds=function(){return ff(lf,t.WritingMode.horizontal)},pu=function(){var bs=Fi.verticalTextBox;return De.allowVerticalPlacement&&Mi.numVerticalGlyphVertices>0&&bs?ff(bs,t.WritingMode.vertical):{box:null,offscreen:null}};Wu(ds,pu),uf(Zi&&Zi.box&&Zi.box.length)}}if(wi=Zi,ri=wi&&wi.box&&wi.box.length>0,yo=wi&&wi.offscreen,Mi.useRuntimeCollisionCircles){var ol=De.text.placedSymbolArray.get(Mi.centerJustifiedTextSymbolIndex),sh=t.evaluateSizeForFeature(De.textSizeData,Xr,ol),Ul=Qe.get("text-padding"),lh=Mi.collisionCircleDiameter;Qi=ye.collisionIndex.placeCollisionCircles(_n,ol,De.lineVertexArray,De.glyphOffsetArray,sh,vt,Mt,Yt,Q,ca,jr.predicate,lh,Ul),ri=_n||Qi.circles.length>0&&!Qi.collisionDetected,yo=yo&&Qi.offscreen}if(Fi.iconFeatureIndex&&(vu=Fi.iconFeatureIndex),Fi.iconBox){var Ih=function(bs){var gu=pa&&Ao?mr(bs,Ao.x,Ao.y,Kn,ca,ye.transform.angle):bs;return ye.collisionIndex.placeCollisionBox(gu,Bn,ar,vt,jr.predicate)};Ro&&Ro.box&&Ro.box.length&&Fi.verticalIconBox?(ls=Ih(Fi.verticalIconBox),oo=ls.box.length>0):(ls=Ih(Fi.iconBox),oo=ls.box.length>0),yo=yo&&ls.offscreen}var zh=Vr||Mi.numHorizontalGlyphVertices===0&&Mi.numVerticalGlyphVertices===0,wv=on||Mi.numIconVertices===0;if(!zh&&!wv?oo=ri=oo&&ri:wv?zh||(oo=oo&&ri):ri=oo&&ri,ri&&wi&&wi.box&&(Ro&&Ro.box&&Bl?ye.collisionIndex.insertCollisionBox(wi.box,Qe.get("text-ignore-placement"),De.bucketInstanceId,Bl,jr.ID):ye.collisionIndex.insertCollisionBox(wi.box,Qe.get("text-ignore-placement"),De.bucketInstanceId,Ms,jr.ID)),oo&&ls&&ye.collisionIndex.insertCollisionBox(ls.box,Qe.get("icon-ignore-placement"),De.bucketInstanceId,vu,jr.ID),Qi&&(ri&&ye.collisionIndex.insertCollisionCircles(Qi.circles,Qe.get("text-ignore-placement"),De.bucketInstanceId,Ms,jr.ID),Q)){var uh=De.bucketInstanceId,Dc=ye.collisionCircleArrays[uh];Dc===void 0&&(Dc=ye.collisionCircleArrays[uh]=new hn);for(var jc=0;jc<Qi.circles.length;jc+=4)Dc.circles.push(Qi.circles[jc+0]),Dc.circles.push(Qi.circles[jc+1]),Dc.circles.push(Qi.circles[jc+2]),Dc.circles.push(Qi.collisionDetected?1:0)}ye.placements[Mi.crossTileID]=new dn(ri||Da,oo||Ia,yo||De.justReloaded),ge[Mi.crossTileID]=!0}};if(ha)for(var Ga=De.getSortedSymbolIndexes(this.transform.angle),ja=Ga.length-1;ja>=0;--ja){var li=Ga[ja];Ta(De.symbolInstances.get(li),De.collisionArrays[li])}else for(var _i=Z.symbolInstanceStart;_i<Z.symbolInstanceEnd;_i++)Ta(De.symbolInstances.get(_i),De.collisionArrays[_i]);if(Q&&De.bucketInstanceId in this.collisionCircleArrays){var io=this.collisionCircleArrays[De.bucketInstanceId];t.invert(io.invProjMatrix,vt),io.viewportMatrix=this.collisionIndex.getViewportMatrix()}De.justReloaded=!1},hr.prototype.markUsedJustification=function(Z,ge,Q,ye){var Le={left:Q.leftJustifiedTextSymbolIndex,center:Q.centerJustifiedTextSymbolIndex,right:Q.rightJustifiedTextSymbolIndex},De;ye===t.WritingMode.vertical?De=Q.verticalPlacedTextSymbolIndex:De=Le[t.getAnchorJustification(ge)];for(var Qe=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex,Q.verticalPlacedTextSymbolIndex],vt=0,Mt=Qe;vt<Mt.length;vt+=1){var Yt=Mt[vt];Yt>=0&&(De>=0&&Yt!==De?Z.text.placedSymbolArray.get(Yt).crossTileID=0:Z.text.placedSymbolArray.get(Yt).crossTileID=Q.crossTileID)}},hr.prototype.markUsedOrientation=function(Z,ge,Q){for(var ye=ge===t.WritingMode.horizontal||ge===t.WritingMode.horizontalOnly?ge:0,Le=ge===t.WritingMode.vertical?ge:0,De=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex],Qe=0,vt=De;Qe<vt.length;Qe+=1){var Mt=vt[Qe];Z.text.placedSymbolArray.get(Mt).placedOrientation=ye}Q.verticalPlacedTextSymbolIndex&&(Z.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).placedOrientation=Le)},hr.prototype.commit=function(Z){this.commitTime=Z,this.zoomAtLastRecencyCheck=this.transform.zoom;var ge=this.prevPlacement,Q=!1;this.prevZoomAdjustment=ge?ge.zoomAdjustment(this.transform.zoom):0;var ye=ge?ge.symbolFadeChange(Z):1,Le=ge?ge.opacities:{},De=ge?ge.variableOffsets:{},Qe=ge?ge.placedOrientations:{};for(var vt in this.placements){var Mt=this.placements[vt],Yt=Le[vt];Yt?(this.opacities[vt]=new Hr(Yt,ye,Mt.text,Mt.icon),Q=Q||Mt.text!==Yt.text.placed||Mt.icon!==Yt.icon.placed):(this.opacities[vt]=new Hr(null,ye,Mt.text,Mt.icon,Mt.skipFade),Q=Q||Mt.text||Mt.icon)}for(var ar in Le){var cr=Le[ar];if(!this.opacities[ar]){var Dr=new Hr(cr,ye,!1,!1);Dr.isHidden()||(this.opacities[ar]=Dr,Q=Q||cr.text.placed||cr.icon.placed)}}for(var Xr in De)!this.variableOffsets[Xr]&&this.opacities[Xr]&&!this.opacities[Xr].isHidden()&&(this.variableOffsets[Xr]=De[Xr]);for(var jr in Qe)!this.placedOrientations[jr]&&this.opacities[jr]&&!this.opacities[jr].isHidden()&&(this.placedOrientations[jr]=Qe[jr]);Q?this.lastPlacementChangeTime=Z:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ge?ge.lastPlacementChangeTime:Z)},hr.prototype.updateLayerOpacities=function(Z,ge){for(var Q={},ye=0,Le=ge;ye<Le.length;ye+=1){var De=Le[ye],Qe=De.getBucket(Z);Qe&&De.latestFeatureIndex&&Z.id===Qe.layerIds[0]&&this.updateBucketOpacities(Qe,Q,De.collisionBoxArray)}},hr.prototype.updateBucketOpacities=function(Z,ge,Q){var ye=this;Z.hasTextData()&&Z.text.opacityVertexArray.clear(),Z.hasIconData()&&Z.icon.opacityVertexArray.clear(),Z.hasIconCollisionBoxData()&&Z.iconCollisionBox.collisionVertexArray.clear(),Z.hasTextCollisionBoxData()&&Z.textCollisionBox.collisionVertexArray.clear();var Le=Z.layers[0].layout,De=new Hr(null,0,!1,!1,!0),Qe=Le.get("text-allow-overlap"),vt=Le.get("icon-allow-overlap"),Mt=Le.get("text-variable-anchor"),Yt=Le.get("text-rotation-alignment")==="map",ar=Le.get("text-pitch-alignment")==="map",cr=Le.get("icon-text-fit")!=="none",Dr=new Hr(null,0,Qe&&(vt||!Z.hasIconData()||Le.get("icon-optional")),vt&&(Qe||!Z.hasTextData()||Le.get("text-optional")),!0);!Z.collisionArrays&&Q&&(Z.hasIconCollisionBoxData()||Z.hasTextCollisionBoxData())&&Z.deserializeCollisionBoxes(Q);for(var Xr=function(_n,Bn,Kn){for(var ca=0;ca<Bn/4;ca++)_n.opacityVertexArray.emplaceBack(Kn)},jr=function(_n){var Bn=Z.symbolInstances.get(_n),Kn=Bn.numHorizontalGlyphVertices,ca=Bn.numVerticalGlyphVertices,pa=Bn.crossTileID,ha=ge[pa],Da=ye.opacities[pa];ha?Da=De:Da||(Da=Dr,ye.opacities[pa]=Da),ge[pa]=!0;var Ia=Kn>0||ca>0,Ta=Bn.numIconVertices>0,Ga=ye.placedOrientations[Bn.crossTileID],ja=Ga===t.WritingMode.vertical,li=Ga===t.WritingMode.horizontal||Ga===t.WritingMode.horizontalOnly;if(Ia){var _i=Wn(Da.text),io=ja?aa:_i;Xr(Z.text,Kn,io);var Mi=li?aa:_i;Xr(Z.text,ca,Mi);var Fi=Da.text.isHidden();[Bn.rightJustifiedTextSymbolIndex,Bn.centerJustifiedTextSymbolIndex,Bn.leftJustifiedTextSymbolIndex].forEach(function(vu){vu>=0&&(Z.text.placedSymbolArray.get(vu).hidden=Fi||ja?1:0)}),Bn.verticalPlacedTextSymbolIndex>=0&&(Z.text.placedSymbolArray.get(Bn.verticalPlacedTextSymbolIndex).hidden=Fi||li?1:0);var ri=ye.variableOffsets[Bn.crossTileID];ri&&ye.markUsedJustification(Z,ri.anchor,Bn,Ga);var oo=ye.placedOrientations[Bn.crossTileID];oo&&(ye.markUsedJustification(Z,"left",Bn,oo),ye.markUsedOrientation(Z,oo,Bn))}if(Ta){var yo=Wn(Da.icon),Ao=!(cr&&Bn.verticalPlacedIconSymbolIndex&&ja);if(Bn.placedIconSymbolIndex>=0){var Zi=Ao?yo:aa;Xr(Z.icon,Bn.numIconVertices,Zi),Z.icon.placedSymbolArray.get(Bn.placedIconSymbolIndex).hidden=Da.icon.isHidden()}if(Bn.verticalPlacedIconSymbolIndex>=0){var Ro=Ao?aa:yo;Xr(Z.icon,Bn.numVerticalIconVertices,Ro),Z.icon.placedSymbolArray.get(Bn.verticalPlacedIconSymbolIndex).hidden=Da.icon.isHidden()}}if(Z.hasIconCollisionBoxData()||Z.hasTextCollisionBoxData()){var wi=Z.collisionArrays[_n];if(wi){var Qi=new t.Point(0,0);if(wi.textBox||wi.verticalTextBox){var ls=!0;if(Mt){var Ms=ye.variableOffsets[pa];Ms?(Qi=Mn(Ms.anchor,Ms.width,Ms.height,Ms.textOffset,Ms.textBoxScale),Yt&&Qi._rotate(ar?ye.transform.angle:-ye.transform.angle)):ls=!1}wi.textBox&&Fr(Z.textCollisionBox.collisionVertexArray,Da.text.placed,!ls||ja,Qi.x,Qi.y),wi.verticalTextBox&&Fr(Z.textCollisionBox.collisionVertexArray,Da.text.placed,!ls||li,Qi.x,Qi.y)}var Bl=Boolean(!li&&wi.verticalIconBox);wi.iconBox&&Fr(Z.iconCollisionBox.collisionVertexArray,Da.icon.placed,Bl,cr?Qi.x:0,cr?Qi.y:0),wi.verticalIconBox&&Fr(Z.iconCollisionBox.collisionVertexArray,Da.icon.placed,!Bl,cr?Qi.x:0,cr?Qi.y:0)}}},Vr=0;Vr<Z.symbolInstances.length;Vr++)jr(Vr);if(Z.sortFeatures(this.transform.angle),this.retainedQueryData[Z.bucketInstanceId]&&(this.retainedQueryData[Z.bucketInstanceId].featureSortOrder=Z.featureSortOrder),Z.hasTextData()&&Z.text.opacityVertexBuffer&&Z.text.opacityVertexBuffer.updateData(Z.text.opacityVertexArray),Z.hasIconData()&&Z.icon.opacityVertexBuffer&&Z.icon.opacityVertexBuffer.updateData(Z.icon.opacityVertexArray),Z.hasIconCollisionBoxData()&&Z.iconCollisionBox.collisionVertexBuffer&&Z.iconCollisionBox.collisionVertexBuffer.updateData(Z.iconCollisionBox.collisionVertexArray),Z.hasTextCollisionBoxData()&&Z.textCollisionBox.collisionVertexBuffer&&Z.textCollisionBox.collisionVertexBuffer.updateData(Z.textCollisionBox.collisionVertexArray),Z.bucketInstanceId in this.collisionCircleArrays){var on=this.collisionCircleArrays[Z.bucketInstanceId];Z.placementInvProjMatrix=on.invProjMatrix,Z.placementViewportMatrix=on.viewportMatrix,Z.collisionCircleArray=on.circles,delete this.collisionCircleArrays[Z.bucketInstanceId]}},hr.prototype.symbolFadeChange=function(Z){return this.fadeDuration===0?1:(Z-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},hr.prototype.zoomAdjustment=function(Z){return Math.max(0,(this.transform.zoom-Z)/1.5)},hr.prototype.hasTransitions=function(Z){return this.stale||Z-this.lastPlacementChangeTime<this.fadeDuration},hr.prototype.stillRecent=function(Z,ge){var Q=this.zoomAtLastRecencyCheck===ge?1-this.zoomAdjustment(ge):1;return this.zoomAtLastRecencyCheck=ge,this.commitTime+this.fadeDuration*Q>Z},hr.prototype.setStale=function(){this.stale=!0};function Fr(pe,Z,ge,Q,ye){pe.emplaceBack(Z?1:0,ge?1:0,Q||0,ye||0),pe.emplaceBack(Z?1:0,ge?1:0,Q||0,ye||0),pe.emplaceBack(Z?1:0,ge?1:0,Q||0,ye||0),pe.emplaceBack(Z?1:0,ge?1:0,Q||0,ye||0)}var nn=Math.pow(2,25),On=Math.pow(2,24),ra=Math.pow(2,17),ua=Math.pow(2,16),$n=Math.pow(2,9),Qn=Math.pow(2,8),kn=Math.pow(2,1);function Wn(pe){if(pe.opacity===0&&!pe.placed)return 0;if(pe.opacity===1&&pe.placed)return 4294967295;var Z=pe.placed?1:0,ge=Math.floor(pe.opacity*127);return ge*nn+Z*On+ge*ra+Z*ua+ge*$n+Z*Qn+ge*kn+Z}var aa=0,Ma=function(Z){this._sortAcrossTiles=Z.layout.get("symbol-z-order")!=="viewport-y"&&Z.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ma.prototype.continuePlacement=function(Z,ge,Q,ye,Le){for(var De=this._bucketParts;this._currentTileIndex<Z.length;){var Qe=Z[this._currentTileIndex];if(ge.getBucketParts(De,ye,Qe,this._sortAcrossTiles),this._currentTileIndex++,Le())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,De.sort(function(Mt,Yt){return Mt.sortKey-Yt.sortKey}));this._currentPartIndex<De.length;){var vt=De[this._currentPartIndex];if(ge.placeLayerBucketPart(vt,this._seenCrossTileIDs,Q),this._currentPartIndex++,Le())return!0}return!1};var ui=function(Z,ge,Q,ye,Le,De,Qe){this.placement=new hr(Z,Le,De,Qe),this._currentPlacementIndex=ge.length-1,this._forceFullPlacement=Q,this._showCollisionBoxes=ye,this._done=!1};ui.prototype.isDone=function(){return this._done},ui.prototype.continuePlacement=function(Z,ge,Q){for(var ye=this,Le=t.browser.now(),De=function(){var ar=t.browser.now()-Le;return ye._forceFullPlacement?!1:ar>2};this._currentPlacementIndex>=0;){var Qe=Z[this._currentPlacementIndex],vt=ge[Qe],Mt=this.placement.collisionIndex.transform.zoom;if(vt.type==="symbol"&&(!vt.minzoom||vt.minzoom<=Mt)&&(!vt.maxzoom||vt.maxzoom>Mt)){this._inProgressLayer||(this._inProgressLayer=new Ma(vt));var Yt=this._inProgressLayer.continuePlacement(Q[vt.source],this.placement,this._showCollisionBoxes,vt,De);if(Yt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ui.prototype.commit=function(Z){return this.placement.commit(Z),this.placement};var Na=512/t.EXTENT/2,nu=function(Z,ge,Q){this.tileID=Z,this.indexedSymbolInstances={},this.bucketInstanceId=Q;for(var ye=0;ye<ge.length;ye++){var Le=ge.get(ye),De=Le.key;this.indexedSymbolInstances[De]||(this.indexedSymbolInstances[De]=[]),this.indexedSymbolInstances[De].push({crossTileID:Le.crossTileID,coord:this.getScaledCoordinates(Le,Z)})}};nu.prototype.getScaledCoordinates=function(Z,ge){var Q=ge.canonical.z-this.tileID.canonical.z,ye=Na/Math.pow(2,Q);return{x:Math.floor((ge.canonical.x*t.EXTENT+Z.anchorX)*ye),y:Math.floor((ge.canonical.y*t.EXTENT+Z.anchorY)*ye)}},nu.prototype.findMatches=function(Z,ge,Q){for(var ye=this.tileID.canonical.z<ge.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ge.canonical.z),Le=0;Le<Z.length;Le++){var De=Z.get(Le);if(!De.crossTileID){var Qe=this.indexedSymbolInstances[De.key];if(!!Qe)for(var vt=this.getScaledCoordinates(De,ge),Mt=0,Yt=Qe;Mt<Yt.length;Mt+=1){var ar=Yt[Mt];if(Math.abs(ar.coord.x-vt.x)<=ye&&Math.abs(ar.coord.y-vt.y)<=ye&&!Q[ar.crossTileID]){Q[ar.crossTileID]=!0,De.crossTileID=ar.crossTileID;break}}}}};var Eo=function(){this.maxCrossTileID=0};Eo.prototype.generate=function(){return++this.maxCrossTileID};var Xs=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Xs.prototype.handleWrapJump=function(Z){var ge=Math.round((Z-this.lng)/360);if(ge!==0)for(var Q in this.indexes){var ye=this.indexes[Q],Le={};for(var De in ye){var Qe=ye[De];Qe.tileID=Qe.tileID.unwrapTo(Qe.tileID.wrap+ge),Le[Qe.tileID.key]=Qe}this.indexes[Q]=Le}this.lng=Z},Xs.prototype.addBucket=function(Z,ge,Q){if(this.indexes[Z.overscaledZ]&&this.indexes[Z.overscaledZ][Z.key]){if(this.indexes[Z.overscaledZ][Z.key].bucketInstanceId===ge.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Z.overscaledZ,this.indexes[Z.overscaledZ][Z.key])}for(var ye=0;ye<ge.symbolInstances.length;ye++){var Le=ge.symbolInstances.get(ye);Le.crossTileID=0}this.usedCrossTileIDs[Z.overscaledZ]||(this.usedCrossTileIDs[Z.overscaledZ]={});var De=this.usedCrossTileIDs[Z.overscaledZ];for(var Qe in this.indexes){var vt=this.indexes[Qe];if(Number(Qe)>Z.overscaledZ)for(var Mt in vt){var Yt=vt[Mt];Yt.tileID.isChildOf(Z)&&Yt.findMatches(ge.symbolInstances,Z,De)}else{var ar=Z.scaledTo(Number(Qe)),cr=vt[ar.key];cr&&cr.findMatches(ge.symbolInstances,Z,De)}}for(var Dr=0;Dr<ge.symbolInstances.length;Dr++){var Xr=ge.symbolInstances.get(Dr);Xr.crossTileID||(Xr.crossTileID=Q.generate(),De[Xr.crossTileID]=!0)}return this.indexes[Z.overscaledZ]===void 0&&(this.indexes[Z.overscaledZ]={}),this.indexes[Z.overscaledZ][Z.key]=new nu(Z,ge.symbolInstances,ge.bucketInstanceId),!0},Xs.prototype.removeBucketCrossTileIDs=function(Z,ge){for(var Q in ge.indexedSymbolInstances)for(var ye=0,Le=ge.indexedSymbolInstances[Q];ye<Le.length;ye+=1){var De=Le[ye];delete this.usedCrossTileIDs[Z][De.crossTileID]}},Xs.prototype.removeStaleBuckets=function(Z){var ge=!1;for(var Q in this.indexes){var ye=this.indexes[Q];for(var Le in ye)Z[ye[Le].bucketInstanceId]||(this.removeBucketCrossTileIDs(Q,ye[Le]),delete ye[Le],ge=!0)}return ge};var cl=function(){this.layerIndexes={},this.crossTileIDs=new Eo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};cl.prototype.addLayer=function(Z,ge,Q){var ye=this.layerIndexes[Z.id];ye===void 0&&(ye=this.layerIndexes[Z.id]=new Xs);var Le=!1,De={};ye.handleWrapJump(Q);for(var Qe=0,vt=ge;Qe<vt.length;Qe+=1){var Mt=vt[Qe],Yt=Mt.getBucket(Z);!Yt||Z.id!==Yt.layerIds[0]||(Yt.bucketInstanceId||(Yt.bucketInstanceId=++this.maxBucketInstanceId),ye.addBucket(Mt.tileID,Yt,this.crossTileIDs)&&(Le=!0),De[Yt.bucketInstanceId]=!0)}return ye.removeStaleBuckets(De)&&(Le=!0),Le},cl.prototype.pruneUnusedLayers=function(Z){var ge={};Z.forEach(function(ye){ge[ye]=!0});for(var Q in this.layerIndexes)ge[Q]||delete this.layerIndexes[Q]};var vo=function(pe,Z){return t.emitValidationErrors(pe,Z&&Z.filter(function(ge){return ge.identifier!=="source.canvas"}))},Ki=t.pick(Jr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),hl=t.pick(Jr,["setCenter","setZoom","setBearing","setPitch"]),ro=En(),is=function(pe){function Z(ge,Q){var ye=this;Q===void 0&&(Q={}),pe.call(this),this.map=ge,this.dispatcher=new R(Ar(),this),this.imageManager=new A,this.imageManager.setEventedParent(this),this.glyphManager=new S(ge._requestManager,Q.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new cl,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var Le=this;this._rtlTextPluginCallback=Z.registerForPluginStateChange(function(De){var Qe={pluginStatus:De.pluginStatus,pluginURL:De.pluginURL};Le.dispatcher.broadcast("syncRTLPluginState",Qe,function(vt,Mt){if(t.triggerPluginCompletionEvent(vt),Mt){var Yt=Mt.every(function(cr){return cr});if(Yt)for(var ar in Le.sourceCaches)Le.sourceCaches[ar].reload()}})}),this.on("data",function(De){if(!(De.dataType!=="source"||De.sourceDataType!=="metadata")){var Qe=ye.sourceCaches[De.sourceId];if(!!Qe){var vt=Qe.getSource();if(!(!vt||!vt.vectorLayerIds))for(var Mt in ye._layers){var Yt=ye._layers[Mt];Yt.source===vt.id&&ye._validateLayer(Yt)}}}})}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.loadURL=function(Q,ye){var Le=this;ye===void 0&&(ye={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var De=typeof ye.validate=="boolean"?ye.validate:!t.isMapboxURL(Q);Q=this.map._requestManager.normalizeStyleURL(Q,ye.accessToken);var Qe=this.map._requestManager.transformRequest(Q,t.ResourceType.Style);this._request=t.getJSON(Qe,function(vt,Mt){Le._request=null,vt?Le.fire(new t.ErrorEvent(vt)):Mt&&Le._load(Mt,De)})},Z.prototype.loadJSON=function(Q,ye){var Le=this;ye===void 0&&(ye={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){Le._request=null,Le._load(Q,ye.validate!==!1)})},Z.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(ro,!1)},Z.prototype._load=function(Q,ye){if(!(ye&&vo(this,t.validateStyle(Q)))){this._loaded=!0,this.stylesheet=Q;for(var Le in Q.sources)this.addSource(Le,Q.sources[Le],{validate:!1});Q.sprite?this._loadSprite(Q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Q.glyphs);var De=_r(this.stylesheet.layers);this._order=De.map(function(Yt){return Yt.id}),this._layers={},this._serializedLayers={};for(var Qe=0,vt=De;Qe<vt.length;Qe+=1){var Mt=vt[Qe];Mt=t.createStyleLayer(Mt),Mt.setEventedParent(this,{layer:{id:Mt.id}}),this._layers[Mt.id]=Mt,this._serializedLayers[Mt.id]=Mt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new F(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},Z.prototype._loadSprite=function(Q){var ye=this;this._spriteRequest=p(Q,this.map._requestManager,function(Le,De){if(ye._spriteRequest=null,Le)ye.fire(new t.ErrorEvent(Le));else if(De)for(var Qe in De)ye.imageManager.addImage(Qe,De[Qe]);ye.imageManager.setLoaded(!0),ye._availableImages=ye.imageManager.listImages(),ye.dispatcher.broadcast("setImages",ye._availableImages),ye.fire(new t.Event("data",{dataType:"style"}))})},Z.prototype._validateLayer=function(Q){var ye=this.sourceCaches[Q.source];if(!!ye){var Le=Q.sourceLayer;if(!!Le){var De=ye.getSource();(De.type==="geojson"||De.vectorLayerIds&&De.vectorLayerIds.indexOf(Le)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+Le+'" does not exist on source "'+De.id+'" as specified by style layer "'+Q.id+'"')))}}},Z.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var Q in this.sourceCaches)if(!this.sourceCaches[Q].loaded())return!1;return!!this.imageManager.isLoaded()},Z.prototype._serializeLayers=function(Q){for(var ye=[],Le=0,De=Q;Le<De.length;Le+=1){var Qe=De[Le],vt=this._layers[Qe];vt.type!=="custom"&&ye.push(vt.serialize())}return ye},Z.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var Q in this.sourceCaches)if(this.sourceCaches[Q].hasTransition())return!0;for(var ye in this._layers)if(this._layers[ye].hasTransition())return!0;return!1},Z.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Z.prototype.update=function(Q){if(!!this._loaded){var ye=this._changed;if(this._changed){var Le=Object.keys(this._updatedLayers),De=Object.keys(this._removedLayers);(Le.length||De.length)&&this._updateWorkerLayers(Le,De);for(var Qe in this._updatedSources){var vt=this._updatedSources[Qe];vt==="reload"?this._reloadSource(Qe):vt==="clear"&&this._clearSource(Qe)}this._updateTilesForChangedImages();for(var Mt in this._updatedPaintProps)this._layers[Mt].updateTransitions(Q);this.light.updateTransitions(Q),this._resetUpdates()}for(var Yt in this.sourceCaches)this.sourceCaches[Yt].used=!1;for(var ar=0,cr=this._order;ar<cr.length;ar+=1){var Dr=cr[ar],Xr=this._layers[Dr];Xr.recalculate(Q,this._availableImages),!Xr.isHidden(Q.zoom)&&Xr.source&&(this.sourceCaches[Xr.source].used=!0)}this.light.recalculate(Q),this.z=Q.zoom,ye&&this.fire(new t.Event("data",{dataType:"style"}))}},Z.prototype._updateTilesForChangedImages=function(){var Q=Object.keys(this._changedImages);if(Q.length){for(var ye in this.sourceCaches)this.sourceCaches[ye].reloadTilesForDependencies(["icons","patterns"],Q);this._changedImages={}}},Z.prototype._updateWorkerLayers=function(Q,ye){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(Q),removedIds:ye})},Z.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Z.prototype.setState=function(Q){var ye=this;if(this._checkLoaded(),vo(this,t.validateStyle(Q)))return!1;Q=t.clone$1(Q),Q.layers=_r(Q.layers);var Le=Gr(this.serialize(),Q).filter(function(Qe){return!(Qe.command in hl)});if(Le.length===0)return!1;var De=Le.filter(function(Qe){return!(Qe.command in Ki)});if(De.length>0)throw new Error("Unimplemented: "+De.map(function(Qe){return Qe.command}).join(", ")+".");return Le.forEach(function(Qe){Qe.command!=="setTransition"&&ye[Qe.command].apply(ye,Qe.args)}),this.stylesheet=Q,!0},Z.prototype.addImage=function(Q,ye){if(this.getImage(Q))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(Q,ye),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},Z.prototype.updateImage=function(Q,ye){this.imageManager.updateImage(Q,ye)},Z.prototype.getImage=function(Q){return this.imageManager.getImage(Q)},Z.prototype.removeImage=function(Q){if(!this.getImage(Q))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(Q),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},Z.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Z.prototype.addSource=function(Q,ye,Le){var De=this;if(Le===void 0&&(Le={}),this._checkLoaded(),this.sourceCaches[Q]!==void 0)throw new Error("There is already a source with this ID");if(!ye.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ye).join(", ")+".");var Qe=["vector","raster","geojson","video","image"],vt=Qe.indexOf(ye.type)>=0;if(!(vt&&this._validate(t.validateStyle.source,"sources."+Q,ye,null,Le))){this.map&&this.map._collectResourceTiming&&(ye.collectResourceTiming=!0);var Mt=this.sourceCaches[Q]=new ut(Q,ye,this.dispatcher);Mt.style=this,Mt.setEventedParent(this,function(){return{isSourceLoaded:De.loaded(),source:Mt.serialize(),sourceId:Q}}),Mt.onAdd(this.map),this._changed=!0}},Z.prototype.removeSource=function(Q){if(this._checkLoaded(),this.sourceCaches[Q]===void 0)throw new Error("There is no source with this ID");for(var ye in this._layers)if(this._layers[ye].source===Q)return this.fire(new t.ErrorEvent(new Error('Source "'+Q+'" cannot be removed while layer "'+ye+'" is using it.')));var Le=this.sourceCaches[Q];delete this.sourceCaches[Q],delete this._updatedSources[Q],Le.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Q})),Le.setEventedParent(null),Le.clearTiles(),Le.onRemove&&Le.onRemove(this.map),this._changed=!0},Z.prototype.setGeoJSONSourceData=function(Q,ye){this._checkLoaded();var Le=this.sourceCaches[Q].getSource();Le.setData(ye),this._changed=!0},Z.prototype.getSource=function(Q){return this.sourceCaches[Q]&&this.sourceCaches[Q].getSource()},Z.prototype.addLayer=function(Q,ye,Le){Le===void 0&&(Le={}),this._checkLoaded();var De=Q.id;if(this.getLayer(De)){this.fire(new t.ErrorEvent(new Error('Layer with id "'+De+'" already exists on this map')));return}var Qe;if(Q.type==="custom"){if(vo(this,t.validateCustomStyleLayer(Q)))return;Qe=t.createStyleLayer(Q)}else{if(typeof Q.source=="object"&&(this.addSource(De,Q.source),Q=t.clone$1(Q),Q=t.extend(Q,{source:De})),this._validate(t.validateStyle.layer,"layers."+De,Q,{arrayIndex:-1},Le))return;Qe=t.createStyleLayer(Q),this._validateLayer(Qe),Qe.setEventedParent(this,{layer:{id:De}}),this._serializedLayers[Qe.id]=Qe.serialize()}var vt=ye?this._order.indexOf(ye):this._order.length;if(ye&&vt===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+ye+'" does not exist on this map.')));return}if(this._order.splice(vt,0,De),this._layerOrderChanged=!0,this._layers[De]=Qe,this._removedLayers[De]&&Qe.source&&Qe.type!=="custom"){var Mt=this._removedLayers[De];delete this._removedLayers[De],Mt.type!==Qe.type?this._updatedSources[Qe.source]="clear":(this._updatedSources[Qe.source]="reload",this.sourceCaches[Qe.source].pause())}this._updateLayer(Qe),Qe.onAdd&&Qe.onAdd(this.map)},Z.prototype.moveLayer=function(Q,ye){this._checkLoaded(),this._changed=!0;var Le=this._layers[Q];if(!Le){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be moved.")));return}if(Q!==ye){var De=this._order.indexOf(Q);this._order.splice(De,1);var Qe=ye?this._order.indexOf(ye):this._order.length;if(ye&&Qe===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+ye+'" does not exist on this map.')));return}this._order.splice(Qe,0,Q),this._layerOrderChanged=!0}},Z.prototype.removeLayer=function(Q){this._checkLoaded();var ye=this._layers[Q];if(!ye){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be removed.")));return}ye.setEventedParent(null);var Le=this._order.indexOf(Q);this._order.splice(Le,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[Q]=ye,delete this._layers[Q],delete this._serializedLayers[Q],delete this._updatedLayers[Q],delete this._updatedPaintProps[Q],ye.onRemove&&ye.onRemove(this.map)},Z.prototype.getLayer=function(Q){return this._layers[Q]},Z.prototype.hasLayer=function(Q){return Q in this._layers},Z.prototype.setLayerZoomRange=function(Q,ye,Le){this._checkLoaded();var De=this.getLayer(Q);if(!De){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot have zoom extent.")));return}De.minzoom===ye&&De.maxzoom===Le||(ye!=null&&(De.minzoom=ye),Le!=null&&(De.maxzoom=Le),this._updateLayer(De))},Z.prototype.setFilter=function(Q,ye,Le){Le===void 0&&(Le={}),this._checkLoaded();var De=this.getLayer(Q);if(!De){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be filtered.")));return}if(!t.deepEqual(De.filter,ye)){if(ye==null){De.filter=void 0,this._updateLayer(De);return}this._validate(t.validateStyle.filter,"layers."+De.id+".filter",ye,null,Le)||(De.filter=t.clone$1(ye),this._updateLayer(De))}},Z.prototype.getFilter=function(Q){return t.clone$1(this.getLayer(Q).filter)},Z.prototype.setLayoutProperty=function(Q,ye,Le,De){De===void 0&&(De={}),this._checkLoaded();var Qe=this.getLayer(Q);if(!Qe){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")));return}t.deepEqual(Qe.getLayoutProperty(ye),Le)||(Qe.setLayoutProperty(ye,Le,De),this._updateLayer(Qe))},Z.prototype.getLayoutProperty=function(Q,ye){var Le=this.getLayer(Q);if(!Le){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style.")));return}return Le.getLayoutProperty(ye)},Z.prototype.setPaintProperty=function(Q,ye,Le,De){De===void 0&&(De={}),this._checkLoaded();var Qe=this.getLayer(Q);if(!Qe){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")));return}if(!t.deepEqual(Qe.getPaintProperty(ye),Le)){var vt=Qe.setPaintProperty(ye,Le,De);vt&&this._updateLayer(Qe),this._changed=!0,this._updatedPaintProps[Q]=!0}},Z.prototype.getPaintProperty=function(Q,ye){return this.getLayer(Q).getPaintProperty(ye)},Z.prototype.setFeatureState=function(Q,ye){this._checkLoaded();var Le=Q.source,De=Q.sourceLayer,Qe=this.sourceCaches[Le];if(Qe===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Le+"' does not exist in the map's style.")));return}var vt=Qe.getSource().type;if(vt==="geojson"&&De){this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(vt==="vector"&&!De){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}Q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Qe.setFeatureState(De,Q.id,ye)},Z.prototype.removeFeatureState=function(Q,ye){this._checkLoaded();var Le=Q.source,De=this.sourceCaches[Le];if(De===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Le+"' does not exist in the map's style.")));return}var Qe=De.getSource().type,vt=Qe==="vector"?Q.sourceLayer:void 0;if(Qe==="vector"&&!vt){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ye&&typeof Q.id!="string"&&typeof Q.id!="number"){this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}De.removeFeatureState(vt,Q.id,ye)},Z.prototype.getFeatureState=function(Q){this._checkLoaded();var ye=Q.source,Le=Q.sourceLayer,De=this.sourceCaches[ye];if(De===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+ye+"' does not exist in the map's style.")));return}var Qe=De.getSource().type;if(Qe==="vector"&&!Le){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return Q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),De.getFeatureState(Le,Q.id)},Z.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Z.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(Q){return Q.serialize()}),layers:this._serializeLayers(this._order)},function(Q){return Q!==void 0})},Z.prototype._updateLayer=function(Q){this._updatedLayers[Q.id]=!0,Q.source&&!this._updatedSources[Q.source]&&this.sourceCaches[Q.source].getSource().type!=="raster"&&(this._updatedSources[Q.source]="reload",this.sourceCaches[Q.source].pause()),this._changed=!0},Z.prototype._flattenAndSortRenderedFeatures=function(Q){for(var ye=this,Le=function(li){return ye._layers[li].type==="fill-extrusion"},De={},Qe=[],vt=this._order.length-1;vt>=0;vt--){var Mt=this._order[vt];if(Le(Mt)){De[Mt]=vt;for(var Yt=0,ar=Q;Yt<ar.length;Yt+=1){var cr=ar[Yt],Dr=cr[Mt];if(Dr)for(var Xr=0,jr=Dr;Xr<jr.length;Xr+=1){var Vr=jr[Xr];Qe.push(Vr)}}}}Qe.sort(function(li,_i){return _i.intersectionZ-li.intersectionZ});for(var on=[],_n=this._order.length-1;_n>=0;_n--){var Bn=this._order[_n];if(Le(Bn))for(var Kn=Qe.length-1;Kn>=0;Kn--){var ca=Qe[Kn].feature;if(De[ca.layer.id]<_n)break;on.push(ca),Qe.pop()}else for(var pa=0,ha=Q;pa<ha.length;pa+=1){var Da=ha[pa],Ia=Da[Bn];if(Ia)for(var Ta=0,Ga=Ia;Ta<Ga.length;Ta+=1){var ja=Ga[Ta];on.push(ja.feature)}}}return on},Z.prototype.queryRenderedFeatures=function(Q,ye,Le){ye&&ye.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",ye.filter,null,ye);var De={};if(ye&&ye.layers){if(!Array.isArray(ye.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Qe=0,vt=ye.layers;Qe<vt.length;Qe+=1){var Mt=vt[Qe],Yt=this._layers[Mt];if(!Yt)return this.fire(new t.ErrorEvent(new Error("The layer '"+Mt+"' does not exist in the map's style and cannot be queried for features."))),[];De[Yt.source]=!0}}var ar=[];ye.availableImages=this._availableImages;for(var cr in this.sourceCaches)ye.layers&&!De[cr]||ar.push(ae(this.sourceCaches[cr],this._layers,this._serializedLayers,Q,ye,Le));return this.placement&&ar.push(ie(this._layers,this._serializedLayers,this.sourceCaches,Q,ye,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ar)},Z.prototype.querySourceFeatures=function(Q,ye){ye&&ye.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",ye.filter,null,ye);var Le=this.sourceCaches[Q];return Le?oe(Le,ye):[]},Z.prototype.addSourceType=function(Q,ye,Le){if(Z.getSourceType(Q))return Le(new Error('A source type called "'+Q+'" already exists.'));if(Z.setSourceType(Q,ye),!ye.workerSourceURL)return Le(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:Q,url:ye.workerSourceURL},Le)},Z.prototype.getLight=function(){return this.light.getLight()},Z.prototype.setLight=function(Q,ye){ye===void 0&&(ye={}),this._checkLoaded();var Le=this.light.getLight(),De=!1;for(var Qe in Q)if(!t.deepEqual(Q[Qe],Le[Qe])){De=!0;break}if(!!De){var vt={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(Q,ye),this.light.updateTransitions(vt)}},Z.prototype._validate=function(Q,ye,Le,De,Qe){return Qe===void 0&&(Qe={}),Qe&&Qe.validate===!1?!1:vo(this,Q.call(t.validateStyle,t.extend({key:ye,style:this.serialize(),value:Le,styleSpec:t.styleSpec},De)))},Z.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var Q in this._layers){var ye=this._layers[Q];ye.setEventedParent(null)}for(var Le in this.sourceCaches)this.sourceCaches[Le].clearTiles(),this.sourceCaches[Le].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Z.prototype._clearSource=function(Q){this.sourceCaches[Q].clearTiles()},Z.prototype._reloadSource=function(Q){this.sourceCaches[Q].resume(),this.sourceCaches[Q].reload()},Z.prototype._updateSources=function(Q){for(var ye in this.sourceCaches)this.sourceCaches[ye].update(Q)},Z.prototype._generateCollisionBoxes=function(){for(var Q in this.sourceCaches)this._reloadSource(Q)},Z.prototype._updatePlacement=function(Q,ye,Le,De,Qe){Qe===void 0&&(Qe=!1);for(var vt=!1,Mt=!1,Yt={},ar=0,cr=this._order;ar<cr.length;ar+=1){var Dr=cr[ar],Xr=this._layers[Dr];if(Xr.type==="symbol"){if(!Yt[Xr.source]){var jr=this.sourceCaches[Xr.source];Yt[Xr.source]=jr.getRenderableIds(!0).map(function(pa){return jr.getTileByID(pa)}).sort(function(pa,ha){return ha.tileID.overscaledZ-pa.tileID.overscaledZ||(pa.tileID.isLessThan(ha.tileID)?-1:1)})}var Vr=this.crossTileSymbolIndex.addLayer(Xr,Yt[Xr.source],Q.center.lng);vt=vt||Vr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Qe=Qe||this._layerOrderChanged||Le===0,(Qe||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),Q.zoom))&&(this.pauseablePlacement=new ui(Q,this._order,Qe,ye,Le,De,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Yt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),Mt=!0),vt&&this.pauseablePlacement.placement.setStale()),Mt||vt)for(var on=0,_n=this._order;on<_n.length;on+=1){var Bn=_n[on],Kn=this._layers[Bn];Kn.type==="symbol"&&this.placement.updateLayerOpacities(Kn,Yt[Kn.source])}var ca=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now());return ca},Z.prototype._releaseSymbolFadeTiles=function(){for(var Q in this.sourceCaches)this.sourceCaches[Q].releaseSymbolFadeTiles()},Z.prototype.getImages=function(Q,ye,Le){this.imageManager.getImages(ye.icons,Le),this._updateTilesForChangedImages();var De=this.sourceCaches[ye.source];De&&De.setDependencies(ye.tileID.key,ye.type,ye.icons)},Z.prototype.getGlyphs=function(Q,ye,Le){this.glyphManager.getGlyphs(ye.stacks,Le)},Z.prototype.getResource=function(Q,ye,Le){return t.makeRequest(ye,Le)},Z}(t.Evented);is.getSourceType=ne,is.setSourceType=te,is.registerForPluginStateChange=t.registerForPluginStateChange;var Vl=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),zu=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Fu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Oi=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,au="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Gl=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,To="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",os=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,pl="void main() {gl_FragColor=vec4(1.0);}",no="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",iu=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Co=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,uo=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,Uo="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Oo="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Vs="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",kl="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Df="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",Gs="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Es="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",dl=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jo=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,If=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,El=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Cl=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,qu=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,sc=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lc=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,ou=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ll=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Pl=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,mf=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Wl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ef="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Rl=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,su="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",uc=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lu=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,xf=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Dl=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ko=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Au=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,bf=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zf=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Ff=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,tf="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",fc=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,uu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,Tn=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ta=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Gn=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ii=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,mi=Ji(zu,Fu),Ei=Ji(Oi,au),Ho=Ji(Gl,To),Bi=Ji(os,vl),qs=Ji(pl,no),Jo=Ji(iu,Co),gs=Ji(uo,Uo),Yl=Ji(Oo,Vs),fu=Ji(kl,Df),_s=Ji(Gs,Es),Xl=Ji(dl,jo),Il=Ji(If,El),qi=Ji(Cl,qu),Ou=Ji(sc,lc),Zl=Ji(ou,Ll),rf=Ji(Pl,mf),el=Ji(Wl,ef),Ec=Ji(Rl,su),_f=Ji(uc,lu),zl=Ji(xf,Dl),Zs=Ji(Ko,Au),yl=Ji(bf,zf),Mu=Ji(Ff,tf),Nu=Ji(fc,uu),wf=Ji(Tn,ta),cc=Ji(Gn,ii);function Ji(pe,Z){var ge=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Q={};return pe=pe.replace(ge,function(ye,Le,De,Qe,vt){return Q[vt]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+vt+`
varying `+De+" "+Qe+" "+vt+`;
#else
uniform `+De+" "+Qe+" u_"+vt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+vt+`
    `+De+" "+Qe+" "+vt+" = u_"+vt+`;
#endif
`}),Z=Z.replace(ge,function(ye,Le,De,Qe,vt){var Mt=Qe==="float"?"vec2":"vec4",Yt=vt.match(/color/)?"color":Mt;return Q[vt]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+vt+`
uniform lowp float u_`+vt+`_t;
attribute `+De+" "+Mt+" a_"+vt+`;
varying `+De+" "+Qe+" "+vt+`;
#else
uniform `+De+" "+Qe+" u_"+vt+`;
#endif
`:Yt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+vt+`
    `+vt+" = a_"+vt+`;
#else
    `+De+" "+Qe+" "+vt+" = u_"+vt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+vt+`
    `+vt+" = unpack_mix_"+Yt+"(a_"+vt+", u_"+vt+`_t);
#else
    `+De+" "+Qe+" "+vt+" = u_"+vt+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+vt+`
uniform lowp float u_`+vt+`_t;
attribute `+De+" "+Mt+" a_"+vt+`;
#else
uniform `+De+" "+Qe+" u_"+vt+`;
#endif
`:Yt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+vt+`
    `+De+" "+Qe+" "+vt+" = a_"+vt+`;
#else
    `+De+" "+Qe+" "+vt+" = u_"+vt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+vt+`
    `+De+" "+Qe+" "+vt+" = unpack_mix_"+Yt+"(a_"+vt+", u_"+vt+`_t);
#else
    `+De+" "+Qe+" "+vt+" = u_"+vt+`;
#endif
`}),{fragmentSource:pe,vertexSource:Z}}var cu=Object.freeze({__proto__:null,prelude:mi,background:Ei,backgroundPattern:Ho,circle:Bi,clippingMask:qs,heatmap:Jo,heatmapTexture:gs,collisionBox:Yl,collisionCircle:fu,debug:_s,fill:Xl,fillOutline:Il,fillOutlinePattern:qi,fillPattern:Ou,fillExtrusion:Zl,fillExtrusionPattern:rf,hillshadePrepare:el,hillshade:Ec,line:_f,lineGradient:zl,linePattern:Zs,lineSDF:yl,raster:Mu,symbolIcon:Nu,symbolSDF:wf,symbolTextAndIcon:cc}),tl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};tl.prototype.bind=function(Z,ge,Q,ye,Le,De,Qe,vt){this.context=Z;for(var Mt=this.boundPaintVertexBuffers.length!==ye.length,Yt=0;!Mt&&Yt<ye.length;Yt++)this.boundPaintVertexBuffers[Yt]!==ye[Yt]&&(Mt=!0);var ar=!this.vao||this.boundProgram!==ge||this.boundLayoutVertexBuffer!==Q||Mt||this.boundIndexBuffer!==Le||this.boundVertexOffset!==De||this.boundDynamicVertexBuffer!==Qe||this.boundDynamicVertexBuffer2!==vt;!Z.extVertexArrayObject||ar?this.freshBind(ge,Q,ye,Le,De,Qe,vt):(Z.bindVertexArrayOES.set(this.vao),Qe&&Qe.bind(),Le&&Le.dynamicDraw&&Le.bind(),vt&&vt.bind())},tl.prototype.freshBind=function(Z,ge,Q,ye,Le,De,Qe){var vt,Mt=Z.numAttributes,Yt=this.context,ar=Yt.gl;if(Yt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Yt.extVertexArrayObject.createVertexArrayOES(),Yt.bindVertexArrayOES.set(this.vao),vt=0,this.boundProgram=Z,this.boundLayoutVertexBuffer=ge,this.boundPaintVertexBuffers=Q,this.boundIndexBuffer=ye,this.boundVertexOffset=Le,this.boundDynamicVertexBuffer=De,this.boundDynamicVertexBuffer2=Qe;else{vt=Yt.currentNumAttributes||0;for(var cr=Mt;cr<vt;cr++)ar.disableVertexAttribArray(cr)}ge.enableAttributes(ar,Z);for(var Dr=0,Xr=Q;Dr<Xr.length;Dr+=1){var jr=Xr[Dr];jr.enableAttributes(ar,Z)}De&&De.enableAttributes(ar,Z),Qe&&Qe.enableAttributes(ar,Z),ge.bind(),ge.setVertexAttribPointers(ar,Z,Le);for(var Vr=0,on=Q;Vr<on.length;Vr+=1){var _n=on[Vr];_n.bind(),_n.setVertexAttribPointers(ar,Z,Le)}De&&(De.bind(),De.setVertexAttribPointers(ar,Z,Le)),ye&&ye.bind(),Qe&&(Qe.bind(),Qe.setVertexAttribPointers(ar,Z,Le)),Yt.currentNumAttributes=Mt},tl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var us=function(Z,ge,Q,ye,Le){var De=Z.gl;this.program=De.createProgram();var Qe=Q?Q.defines():[];Le&&Qe.push("#define OVERDRAW_INSPECTOR;");var vt=Qe.concat(mi.fragmentSource,ge.fragmentSource).join(`
`),Mt=Qe.concat(mi.vertexSource,ge.vertexSource).join(`
`),Yt=De.createShader(De.FRAGMENT_SHADER);if(De.isContextLost()){this.failedToCreate=!0;return}De.shaderSource(Yt,vt),De.compileShader(Yt),De.attachShader(this.program,Yt);var ar=De.createShader(De.VERTEX_SHADER);if(De.isContextLost()){this.failedToCreate=!0;return}De.shaderSource(ar,Mt),De.compileShader(ar),De.attachShader(this.program,ar);for(var cr=Q?Q.layoutAttributes:[],Dr=0;Dr<cr.length;Dr++)De.bindAttribLocation(this.program,Dr,cr[Dr].name);De.linkProgram(this.program),De.deleteShader(ar),De.deleteShader(Yt),this.numAttributes=De.getProgramParameter(this.program,De.ACTIVE_ATTRIBUTES),this.attributes={};for(var Xr={},jr=0;jr<this.numAttributes;jr++){var Vr=De.getActiveAttrib(this.program,jr);Vr&&(this.attributes[Vr.name]=De.getAttribLocation(this.program,Vr.name))}for(var on=De.getProgramParameter(this.program,De.ACTIVE_UNIFORMS),_n=0;_n<on;_n++){var Bn=De.getActiveUniform(this.program,_n);Bn&&(Xr[Bn.name]=De.getUniformLocation(this.program,Bn.name))}this.fixedUniforms=ye(Z,Xr),this.binderUniforms=Q?Q.getUniforms(Z,Xr):[]};us.prototype.draw=function(Z,ge,Q,ye,Le,De,Qe,vt,Mt,Yt,ar,cr,Dr,Xr,jr,Vr){var on,_n=Z.gl;if(!this.failedToCreate){Z.program.set(this.program),Z.setDepthMode(Q),Z.setStencilMode(ye),Z.setColorMode(Le),Z.setCullFace(De);for(var Bn in this.fixedUniforms)this.fixedUniforms[Bn].set(Qe[Bn]);Xr&&Xr.setUniforms(Z,this.binderUniforms,cr,{zoom:Dr});for(var Kn=(on={},on[_n.LINES]=2,on[_n.TRIANGLES]=3,on[_n.LINE_STRIP]=1,on)[ge],ca=0,pa=ar.get();ca<pa.length;ca+=1){var ha=pa[ca],Da=ha.vaos||(ha.vaos={}),Ia=Da[vt]||(Da[vt]=new tl);Ia.bind(Z,this,Mt,Xr?Xr.getPaintVertexBuffers():[],Yt,ha.vertexOffset,jr,Vr),_n.drawElements(ge,ha.primitiveLength*Kn,_n.UNSIGNED_SHORT,ha.primitiveOffset*Kn*2)}}};function Cs(pe,Z,ge){var Q=1/la(ge,1,Z.transform.tileZoom),ye=Math.pow(2,ge.tileID.overscaledZ),Le=ge.tileSize*Math.pow(2,Z.transform.tileZoom)/ye,De=Le*(ge.tileID.canonical.x+ge.tileID.wrap*ye),Qe=Le*ge.tileID.canonical.y;return{u_image:0,u_texsize:ge.imageAtlasTexture.size,u_scale:[Q,pe.fromScale,pe.toScale],u_fade:pe.t,u_pixel_coord_upper:[De>>16,Qe>>16],u_pixel_coord_lower:[De&65535,Qe&65535]}}function Bu(pe,Z,ge,Q){var ye=ge.imageManager.getPattern(pe.from.toString()),Le=ge.imageManager.getPattern(pe.to.toString()),De=ge.imageManager.getPixelSize(),Qe=De.width,vt=De.height,Mt=Math.pow(2,Q.tileID.overscaledZ),Yt=Q.tileSize*Math.pow(2,ge.transform.tileZoom)/Mt,ar=Yt*(Q.tileID.canonical.x+Q.tileID.wrap*Mt),cr=Yt*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ye.tl,u_pattern_br_a:ye.br,u_pattern_tl_b:Le.tl,u_pattern_br_b:Le.br,u_texsize:[Qe,vt],u_mix:Z.t,u_pattern_size_a:ye.displaySize,u_pattern_size_b:Le.displaySize,u_scale_a:Z.fromScale,u_scale_b:Z.toScale,u_tile_units_to_pixels:1/la(Q,1,ge.transform.tileZoom),u_pixel_coord_upper:[ar>>16,cr>>16],u_pixel_coord_lower:[ar&65535,cr&65535]}}var Qo=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_lightpos:new t.Uniform3f(pe,Z.u_lightpos),u_lightintensity:new t.Uniform1f(pe,Z.u_lightintensity),u_lightcolor:new t.Uniform3f(pe,Z.u_lightcolor),u_vertical_gradient:new t.Uniform1f(pe,Z.u_vertical_gradient),u_opacity:new t.Uniform1f(pe,Z.u_opacity)}},Of=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_lightpos:new t.Uniform3f(pe,Z.u_lightpos),u_lightintensity:new t.Uniform1f(pe,Z.u_lightintensity),u_lightcolor:new t.Uniform3f(pe,Z.u_lightcolor),u_vertical_gradient:new t.Uniform1f(pe,Z.u_vertical_gradient),u_height_factor:new t.Uniform1f(pe,Z.u_height_factor),u_image:new t.Uniform1i(pe,Z.u_image),u_texsize:new t.Uniform2f(pe,Z.u_texsize),u_pixel_coord_upper:new t.Uniform2f(pe,Z.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(pe,Z.u_pixel_coord_lower),u_scale:new t.Uniform3f(pe,Z.u_scale),u_fade:new t.Uniform1f(pe,Z.u_fade),u_opacity:new t.Uniform1f(pe,Z.u_opacity)}},Ls=function(pe,Z,ge,Q){var ye=Z.style.light,Le=ye.properties.get("position"),De=[Le.x,Le.y,Le.z],Qe=t.create$1();ye.properties.get("anchor")==="viewport"&&t.fromRotation(Qe,-Z.transform.angle),t.transformMat3(De,De,Qe);var vt=ye.properties.get("color");return{u_matrix:pe,u_lightpos:De,u_lightintensity:ye.properties.get("intensity"),u_lightcolor:[vt.r,vt.g,vt.b],u_vertical_gradient:+ge,u_opacity:Q}},rl=function(pe,Z,ge,Q,ye,Le,De){return t.extend(Ls(pe,Z,ge,Q),Cs(Le,Z,De),{u_height_factor:-Math.pow(2,ye.overscaledZ)/De.tileSize/8})},ml=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix)}},Fl=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_image:new t.Uniform1i(pe,Z.u_image),u_texsize:new t.Uniform2f(pe,Z.u_texsize),u_pixel_coord_upper:new t.Uniform2f(pe,Z.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(pe,Z.u_pixel_coord_lower),u_scale:new t.Uniform3f(pe,Z.u_scale),u_fade:new t.Uniform1f(pe,Z.u_fade)}},js=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_world:new t.Uniform2f(pe,Z.u_world)}},Lo=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_world:new t.Uniform2f(pe,Z.u_world),u_image:new t.Uniform1i(pe,Z.u_image),u_texsize:new t.Uniform2f(pe,Z.u_texsize),u_pixel_coord_upper:new t.Uniform2f(pe,Z.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(pe,Z.u_pixel_coord_lower),u_scale:new t.Uniform3f(pe,Z.u_scale),u_fade:new t.Uniform1f(pe,Z.u_fade)}},ys=function(pe){return{u_matrix:pe}},po=function(pe,Z,ge,Q){return t.extend(ys(pe),Cs(ge,Z,Q))},hs=function(pe,Z){return{u_matrix:pe,u_world:Z}},nf=function(pe,Z,ge,Q,ye){return t.extend(po(pe,Z,ge,Q),{u_world:ye})},Nf=function(pe,Z){return{u_camera_to_center_distance:new t.Uniform1f(pe,Z.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(pe,Z.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(pe,Z.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(pe,Z.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(pe,Z.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix)}},_t=function(pe,Z,ge,Q){var ye=pe.transform,Le,De;if(Q.paint.get("circle-pitch-alignment")==="map"){var Qe=la(ge,1,ye.zoom);Le=!0,De=[Qe,Qe]}else Le=!1,De=ye.pixelsToGLUnits;return{u_camera_to_center_distance:ye.cameraToCenterDistance,u_scale_with_map:+(Q.paint.get("circle-pitch-scale")==="map"),u_matrix:pe.translatePosMatrix(Z.posMatrix,ge,Q.paint.get("circle-translate"),Q.paint.get("circle-translate-anchor")),u_pitch_with_map:+Le,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:De}},Ot=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_camera_to_center_distance:new t.Uniform1f(pe,Z.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(pe,Z.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(pe,Z.u_extrude_scale),u_overscale_factor:new t.Uniform1f(pe,Z.u_overscale_factor)}},ur=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_inv_matrix:new t.UniformMatrix4f(pe,Z.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(pe,Z.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(pe,Z.u_viewport_size)}},rr=function(pe,Z,ge){var Q=la(ge,1,Z.zoom),ye=Math.pow(2,Z.zoom-ge.tileID.overscaledZ),Le=ge.tileID.overscaleFactor();return{u_matrix:pe,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pixels_to_tile_units:Q,u_extrude_scale:[Z.pixelsToGLUnits[0]/(Q*ye),Z.pixelsToGLUnits[1]/(Q*ye)],u_overscale_factor:Le}},zr=function(pe,Z,ge){return{u_matrix:pe,u_inv_matrix:Z,u_camera_to_center_distance:ge.cameraToCenterDistance,u_viewport_size:[ge.width,ge.height]}},pn=function(pe,Z){return{u_color:new t.UniformColor(pe,Z.u_color),u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_overlay:new t.Uniform1i(pe,Z.u_overlay),u_overlay_scale:new t.Uniform1f(pe,Z.u_overlay_scale)}},An=function(pe,Z,ge){return ge===void 0&&(ge=1),{u_matrix:pe,u_color:Z,u_overlay:0,u_overlay_scale:ge}},In=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix)}},Un=function(pe){return{u_matrix:pe}},ea=function(pe,Z){return{u_extrude_scale:new t.Uniform1f(pe,Z.u_extrude_scale),u_intensity:new t.Uniform1f(pe,Z.u_intensity),u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix)}},Cn=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_world:new t.Uniform2f(pe,Z.u_world),u_image:new t.Uniform1i(pe,Z.u_image),u_color_ramp:new t.Uniform1i(pe,Z.u_color_ramp),u_opacity:new t.Uniform1f(pe,Z.u_opacity)}},Yn=function(pe,Z,ge,Q){return{u_matrix:pe,u_extrude_scale:la(Z,1,ge),u_intensity:Q}},Vn=function(pe,Z,ge,Q){var ye=t.create();t.ortho(ye,0,pe.width,pe.height,0,0,1);var Le=pe.context.gl;return{u_matrix:ye,u_world:[Le.drawingBufferWidth,Le.drawingBufferHeight],u_image:ge,u_color_ramp:Q,u_opacity:Z.paint.get("heatmap-opacity")}},ia=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_image:new t.Uniform1i(pe,Z.u_image),u_latrange:new t.Uniform2f(pe,Z.u_latrange),u_light:new t.Uniform2f(pe,Z.u_light),u_shadow:new t.UniformColor(pe,Z.u_shadow),u_highlight:new t.UniformColor(pe,Z.u_highlight),u_accent:new t.UniformColor(pe,Z.u_accent)}},va=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_image:new t.Uniform1i(pe,Z.u_image),u_dimension:new t.Uniform2f(pe,Z.u_dimension),u_zoom:new t.Uniform1f(pe,Z.u_zoom),u_maxzoom:new t.Uniform1f(pe,Z.u_maxzoom),u_unpack:new t.Uniform4f(pe,Z.u_unpack)}},$a=function(pe,Z,ge){var Q=ge.paint.get("hillshade-shadow-color"),ye=ge.paint.get("hillshade-highlight-color"),Le=ge.paint.get("hillshade-accent-color"),De=ge.paint.get("hillshade-illumination-direction")*(Math.PI/180);ge.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=pe.transform.angle);var Qe=!pe.options.moving;return{u_matrix:pe.transform.calculatePosMatrix(Z.tileID.toUnwrapped(),Qe),u_image:0,u_latrange:ti(pe,Z.tileID),u_light:[ge.paint.get("hillshade-exaggeration"),De],u_shadow:Q,u_highlight:ye,u_accent:Le}},Ya=function(pe,Z,ge){var Q=Z.stride,ye=t.create();return t.ortho(ye,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(ye,ye,[0,-t.EXTENT,0]),{u_matrix:ye,u_image:1,u_dimension:[Q,Q],u_zoom:pe.overscaledZ,u_maxzoom:ge,u_unpack:Z.getUnpackVector()}};function ti(pe,Z){var ge=Math.pow(2,Z.canonical.z),Q=Z.canonical.y;return[new t.MercatorCoordinate(0,Q/ge).toLngLat().lat,new t.MercatorCoordinate(0,(Q+1)/ge).toLngLat().lat]}var Kt=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_ratio:new t.Uniform1f(pe,Z.u_ratio),u_device_pixel_ratio:new t.Uniform1f(pe,Z.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(pe,Z.u_units_to_pixels)}},fa=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_ratio:new t.Uniform1f(pe,Z.u_ratio),u_device_pixel_ratio:new t.Uniform1f(pe,Z.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(pe,Z.u_units_to_pixels),u_image:new t.Uniform1i(pe,Z.u_image)}},Ca=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_texsize:new t.Uniform2f(pe,Z.u_texsize),u_ratio:new t.Uniform1f(pe,Z.u_ratio),u_device_pixel_ratio:new t.Uniform1f(pe,Z.u_device_pixel_ratio),u_image:new t.Uniform1i(pe,Z.u_image),u_units_to_pixels:new t.Uniform2f(pe,Z.u_units_to_pixels),u_scale:new t.Uniform3f(pe,Z.u_scale),u_fade:new t.Uniform1f(pe,Z.u_fade)}},qa=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_ratio:new t.Uniform1f(pe,Z.u_ratio),u_device_pixel_ratio:new t.Uniform1f(pe,Z.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(pe,Z.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(pe,Z.u_patternscale_a),u_patternscale_b:new t.Uniform2f(pe,Z.u_patternscale_b),u_sdfgamma:new t.Uniform1f(pe,Z.u_sdfgamma),u_image:new t.Uniform1i(pe,Z.u_image),u_tex_y_a:new t.Uniform1f(pe,Z.u_tex_y_a),u_tex_y_b:new t.Uniform1f(pe,Z.u_tex_y_b),u_mix:new t.Uniform1f(pe,Z.u_mix)}},Ba=function(pe,Z,ge){var Q=pe.transform;return{u_matrix:ki(pe,Z,ge),u_ratio:1/la(Z,1,Q.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/Q.pixelsToGLUnits[0],1/Q.pixelsToGLUnits[1]]}},Ui=function(pe,Z,ge){return t.extend(Ba(pe,Z,ge),{u_image:0})},Hi=function(pe,Z,ge,Q){var ye=pe.transform,Le=zi(Z,ye);return{u_matrix:ki(pe,Z,ge),u_texsize:Z.imageAtlasTexture.size,u_ratio:1/la(Z,1,ye.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Le,Q.fromScale,Q.toScale],u_fade:Q.t,u_units_to_pixels:[1/ye.pixelsToGLUnits[0],1/ye.pixelsToGLUnits[1]]}},Xi=function(pe,Z,ge,Q,ye){var Le=pe.transform,De=pe.lineAtlas,Qe=zi(Z,Le),vt=ge.layout.get("line-cap")==="round",Mt=De.getDash(Q.from,vt),Yt=De.getDash(Q.to,vt),ar=Mt.width*ye.fromScale,cr=Yt.width*ye.toScale;return t.extend(Ba(pe,Z,ge),{u_patternscale_a:[Qe/ar,-Mt.height/2],u_patternscale_b:[Qe/cr,-Yt.height/2],u_sdfgamma:De.width/(Math.min(ar,cr)*256*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Mt.y,u_tex_y_b:Yt.y,u_mix:ye.t})};function zi(pe,Z){return 1/la(pe,1,Z.tileZoom)}function ki(pe,Z,ge){return pe.translatePosMatrix(Z.tileID.posMatrix,Z,ge.paint.get("line-translate"),ge.paint.get("line-translate-anchor"))}var fs=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_tl_parent:new t.Uniform2f(pe,Z.u_tl_parent),u_scale_parent:new t.Uniform1f(pe,Z.u_scale_parent),u_buffer_scale:new t.Uniform1f(pe,Z.u_buffer_scale),u_fade_t:new t.Uniform1f(pe,Z.u_fade_t),u_opacity:new t.Uniform1f(pe,Z.u_opacity),u_image0:new t.Uniform1i(pe,Z.u_image0),u_image1:new t.Uniform1i(pe,Z.u_image1),u_brightness_low:new t.Uniform1f(pe,Z.u_brightness_low),u_brightness_high:new t.Uniform1f(pe,Z.u_brightness_high),u_saturation_factor:new t.Uniform1f(pe,Z.u_saturation_factor),u_contrast_factor:new t.Uniform1f(pe,Z.u_contrast_factor),u_spin_weights:new t.Uniform3f(pe,Z.u_spin_weights)}},Vo=function(pe,Z,ge,Q,ye){return{u_matrix:pe,u_tl_parent:Z,u_scale_parent:ge,u_buffer_scale:1,u_fade_t:Q.mix,u_opacity:Q.opacity*ye.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ye.paint.get("raster-brightness-min"),u_brightness_high:ye.paint.get("raster-brightness-max"),u_saturation_factor:Li(ye.paint.get("raster-saturation")),u_contrast_factor:Fa(ye.paint.get("raster-contrast")),u_spin_weights:di(ye.paint.get("raster-hue-rotate"))}};function di(pe){pe*=Math.PI/180;var Z=Math.sin(pe),ge=Math.cos(pe);return[(2*ge+1)/3,(-Math.sqrt(3)*Z-ge+1)/3,(Math.sqrt(3)*Z-ge+1)/3]}function Fa(pe){return pe>0?1/(1-pe):1+pe}function Li(pe){return pe>0?1-1/(1.001-pe):-pe}var $o=function(pe,Z){return{u_is_size_zoom_constant:new t.Uniform1i(pe,Z.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(pe,Z.u_is_size_feature_constant),u_size_t:new t.Uniform1f(pe,Z.u_size_t),u_size:new t.Uniform1f(pe,Z.u_size),u_camera_to_center_distance:new t.Uniform1f(pe,Z.u_camera_to_center_distance),u_pitch:new t.Uniform1f(pe,Z.u_pitch),u_rotate_symbol:new t.Uniform1i(pe,Z.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(pe,Z.u_aspect_ratio),u_fade_change:new t.Uniform1f(pe,Z.u_fade_change),u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(pe,Z.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(pe,Z.u_coord_matrix),u_is_text:new t.Uniform1i(pe,Z.u_is_text),u_pitch_with_map:new t.Uniform1i(pe,Z.u_pitch_with_map),u_texsize:new t.Uniform2f(pe,Z.u_texsize),u_texture:new t.Uniform1i(pe,Z.u_texture)}},ss=function(pe,Z){return{u_is_size_zoom_constant:new t.Uniform1i(pe,Z.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(pe,Z.u_is_size_feature_constant),u_size_t:new t.Uniform1f(pe,Z.u_size_t),u_size:new t.Uniform1f(pe,Z.u_size),u_camera_to_center_distance:new t.Uniform1f(pe,Z.u_camera_to_center_distance),u_pitch:new t.Uniform1f(pe,Z.u_pitch),u_rotate_symbol:new t.Uniform1i(pe,Z.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(pe,Z.u_aspect_ratio),u_fade_change:new t.Uniform1f(pe,Z.u_fade_change),u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(pe,Z.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(pe,Z.u_coord_matrix),u_is_text:new t.Uniform1i(pe,Z.u_is_text),u_pitch_with_map:new t.Uniform1i(pe,Z.u_pitch_with_map),u_texsize:new t.Uniform2f(pe,Z.u_texsize),u_texture:new t.Uniform1i(pe,Z.u_texture),u_gamma_scale:new t.Uniform1f(pe,Z.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(pe,Z.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(pe,Z.u_is_halo)}},nl=function(pe,Z){return{u_is_size_zoom_constant:new t.Uniform1i(pe,Z.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(pe,Z.u_is_size_feature_constant),u_size_t:new t.Uniform1f(pe,Z.u_size_t),u_size:new t.Uniform1f(pe,Z.u_size),u_camera_to_center_distance:new t.Uniform1f(pe,Z.u_camera_to_center_distance),u_pitch:new t.Uniform1f(pe,Z.u_pitch),u_rotate_symbol:new t.Uniform1i(pe,Z.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(pe,Z.u_aspect_ratio),u_fade_change:new t.Uniform1f(pe,Z.u_fade_change),u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(pe,Z.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(pe,Z.u_coord_matrix),u_is_text:new t.Uniform1i(pe,Z.u_is_text),u_pitch_with_map:new t.Uniform1i(pe,Z.u_pitch_with_map),u_texsize:new t.Uniform2f(pe,Z.u_texsize),u_texsize_icon:new t.Uniform2f(pe,Z.u_texsize_icon),u_texture:new t.Uniform1i(pe,Z.u_texture),u_texture_icon:new t.Uniform1i(pe,Z.u_texture_icon),u_gamma_scale:new t.Uniform1f(pe,Z.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(pe,Z.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(pe,Z.u_is_halo)}},Ol=function(pe,Z,ge,Q,ye,Le,De,Qe,vt,Mt){var Yt=ye.transform;return{u_is_size_zoom_constant:+(pe==="constant"||pe==="source"),u_is_size_feature_constant:+(pe==="constant"||pe==="camera"),u_size_t:Z?Z.uSizeT:0,u_size:Z?Z.uSize:0,u_camera_to_center_distance:Yt.cameraToCenterDistance,u_pitch:Yt.pitch/360*2*Math.PI,u_rotate_symbol:+ge,u_aspect_ratio:Yt.width/Yt.height,u_fade_change:ye.options.fadeDuration?ye.symbolFadeChange:1,u_matrix:Le,u_label_plane_matrix:De,u_coord_matrix:Qe,u_is_text:+vt,u_pitch_with_map:+Q,u_texsize:Mt,u_texture:0}},Ps=function(pe,Z,ge,Q,ye,Le,De,Qe,vt,Mt,Yt){var ar=ye.transform;return t.extend(Ol(pe,Z,ge,Q,ye,Le,De,Qe,vt,Mt),{u_gamma_scale:Q?Math.cos(ar._pitch)*ar.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Yt})},ws=function(pe,Z,ge,Q,ye,Le,De,Qe,vt,Mt){return t.extend(Ps(pe,Z,ge,Q,ye,Le,De,Qe,!0,vt,!0),{u_texsize_icon:Mt,u_texture_icon:1})},xl=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_opacity:new t.Uniform1f(pe,Z.u_opacity),u_color:new t.UniformColor(pe,Z.u_color)}},al=function(pe,Z){return{u_matrix:new t.UniformMatrix4f(pe,Z.u_matrix),u_opacity:new t.Uniform1f(pe,Z.u_opacity),u_image:new t.Uniform1i(pe,Z.u_image),u_pattern_tl_a:new t.Uniform2f(pe,Z.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(pe,Z.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(pe,Z.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(pe,Z.u_pattern_br_b),u_texsize:new t.Uniform2f(pe,Z.u_texsize),u_mix:new t.Uniform1f(pe,Z.u_mix),u_pattern_size_a:new t.Uniform2f(pe,Z.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(pe,Z.u_pattern_size_b),u_scale_a:new t.Uniform1f(pe,Z.u_scale_a),u_scale_b:new t.Uniform1f(pe,Z.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(pe,Z.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(pe,Z.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(pe,Z.u_tile_units_to_pixels)}},cs=function(pe,Z,ge){return{u_matrix:pe,u_opacity:Z,u_color:ge}},af=function(pe,Z,ge,Q,ye,Le){return t.extend(Bu(Q,Le,ge,ye),{u_matrix:pe,u_opacity:Z})},Tf={fillExtrusion:Qo,fillExtrusionPattern:Of,fill:ml,fillPattern:Fl,fillOutline:js,fillOutlinePattern:Lo,circle:Nf,collisionBox:Ot,collisionCircle:ur,debug:pn,clippingMask:In,heatmap:ea,heatmapTexture:Cn,hillshade:ia,hillshadePrepare:va,line:Kt,lineGradient:fa,linePattern:Ca,lineSDF:qa,raster:fs,symbolIcon:$o,symbolSDF:ss,symbolTextAndIcon:nl,background:xl,backgroundPattern:al},vs;function Bf(pe,Z,ge,Q,ye,Le,De){for(var Qe=pe.context,vt=Qe.gl,Mt=pe.useProgram("collisionBox"),Yt=[],ar=0,cr=0,Dr=0;Dr<Q.length;Dr++){var Xr=Q[Dr],jr=Z.getTile(Xr),Vr=jr.getBucket(ge);if(!!Vr){var on=Xr.posMatrix;(ye[0]!==0||ye[1]!==0)&&(on=pe.translatePosMatrix(Xr.posMatrix,jr,ye,Le));var _n=De?Vr.textCollisionBox:Vr.iconCollisionBox,Bn=Vr.collisionCircleArray;if(Bn.length>0){var Kn=t.create(),ca=on;t.mul(Kn,Vr.placementInvProjMatrix,pe.transform.glCoordMatrix),t.mul(Kn,Kn,Vr.placementViewportMatrix),Yt.push({circleArray:Bn,circleOffset:cr,transform:ca,invTransform:Kn}),ar+=Bn.length/4,cr=ar}!_n||Mt.draw(Qe,vt.LINES,pr.disabled,Ir.disabled,pe.colorModeForRenderPass(),Ke.disabled,rr(on,pe.transform,jr),ge.id,_n.layoutVertexBuffer,_n.indexBuffer,_n.segments,null,pe.transform.zoom,null,null,_n.collisionVertexBuffer)}}if(!(!De||!Yt.length)){var pa=pe.useProgram("collisionCircle"),ha=new t.StructArrayLayout2f1f2i16;ha.resize(ar*4),ha._trim();for(var Da=0,Ia=0,Ta=Yt;Ia<Ta.length;Ia+=1)for(var Ga=Ta[Ia],ja=0;ja<Ga.circleArray.length/4;ja++){var li=ja*4,_i=Ga.circleArray[li+0],io=Ga.circleArray[li+1],Mi=Ga.circleArray[li+2],Fi=Ga.circleArray[li+3];ha.emplace(Da++,_i,io,Mi,Fi,0),ha.emplace(Da++,_i,io,Mi,Fi,1),ha.emplace(Da++,_i,io,Mi,Fi,2),ha.emplace(Da++,_i,io,Mi,Fi,3)}(!vs||vs.length<ar*2)&&(vs=of(ar));for(var ri=Qe.createIndexBuffer(vs,!0),oo=Qe.createVertexBuffer(ha,t.collisionCircleLayout.members,!0),yo=0,Ao=Yt;yo<Ao.length;yo+=1){var Zi=Ao[yo],Ro=zr(Zi.transform,Zi.invTransform,pe.transform);pa.draw(Qe,vt.TRIANGLES,pr.disabled,Ir.disabled,pe.colorModeForRenderPass(),Ke.disabled,Ro,ge.id,oo,ri,t.SegmentVector.simpleSegment(0,Zi.circleOffset*2,Zi.circleArray.length,Zi.circleArray.length/2),null,pe.transform.zoom,null,null,null)}oo.destroy(),ri.destroy()}}function of(pe){var Z=pe*2,ge=new t.StructArrayLayout3ui6;ge.resize(Z),ge._trim();for(var Q=0;Q<Z;Q++){var ye=Q*6;ge.uint16[ye+0]=Q*4+0,ge.uint16[ye+1]=Q*4+1,ge.uint16[ye+2]=Q*4+2,ge.uint16[ye+3]=Q*4+2,ge.uint16[ye+4]=Q*4+3,ge.uint16[ye+5]=Q*4+0}return ge}var jl=t.identity(new Float32Array(16));function hc(pe,Z,ge,Q,ye){if(pe.renderPass==="translucent"){var Le=Ir.disabled,De=pe.colorModeForRenderPass(),Qe=ge.layout.get("text-variable-anchor");Qe&&vc(Q,pe,ge,Z,ge.layout.get("text-rotation-alignment"),ge.layout.get("text-pitch-alignment"),ye),ge.paint.get("icon-opacity").constantOr(1)!==0&&Hf(pe,Z,ge,Q,!1,ge.paint.get("icon-translate"),ge.paint.get("icon-translate-anchor"),ge.layout.get("icon-rotation-alignment"),ge.layout.get("icon-pitch-alignment"),ge.layout.get("icon-keep-upright"),Le,De),ge.paint.get("text-opacity").constantOr(1)!==0&&Hf(pe,Z,ge,Q,!0,ge.paint.get("text-translate"),ge.paint.get("text-translate-anchor"),ge.layout.get("text-rotation-alignment"),ge.layout.get("text-pitch-alignment"),ge.layout.get("text-keep-upright"),Le,De),Z.map.showCollisionBoxes&&(Bf(pe,Z,ge,Q,ge.paint.get("text-translate"),ge.paint.get("text-translate-anchor"),!0),Bf(pe,Z,ge,Q,ge.paint.get("icon-translate"),ge.paint.get("icon-translate-anchor"),!1))}}function Uf(pe,Z,ge,Q,ye,Le){var De=t.getAnchorAlignment(pe),Qe=De.horizontalAlign,vt=De.verticalAlign,Mt=-(Qe-.5)*Z,Yt=-(vt-.5)*ge,ar=t.evaluateVariableOffset(pe,Q);return new t.Point((Mt/ye+ar[0])*Le,(Yt/ye+ar[1])*Le)}function vc(pe,Z,ge,Q,ye,Le,De){for(var Qe=Z.transform,vt=ye==="map",Mt=Le==="map",Yt=0,ar=pe;Yt<ar.length;Yt+=1){var cr=ar[Yt],Dr=Q.getTile(cr),Xr=Dr.getBucket(ge);if(!(!Xr||!Xr.text||!Xr.text.segments.get().length)){var jr=Xr.textSizeData,Vr=t.evaluateSizeForZoom(jr,Qe.zoom),on=la(Dr,1,Z.transform.zoom),_n=en(cr.posMatrix,Mt,vt,Z.transform,on),Bn=ge.layout.get("icon-text-fit")!=="none"&&Xr.hasIconData();if(Vr){var Kn=Math.pow(2,Qe.zoom-Dr.tileID.overscaledZ);Nl(Xr,vt,Mt,De,t.symbolSize,Qe,_n,cr.posMatrix,Kn,Vr,Bn)}}}}function Nl(pe,Z,ge,Q,ye,Le,De,Qe,vt,Mt,Yt){var ar=pe.text.placedSymbolArray,cr=pe.text.dynamicLayoutVertexArray,Dr=pe.icon.dynamicLayoutVertexArray,Xr={};cr.clear();for(var jr=0;jr<ar.length;jr++){var Vr=ar.get(jr),on=pe.allowVerticalPlacement&&!Vr.placedOrientation,_n=!Vr.hidden&&Vr.crossTileID&&!on?Q[Vr.crossTileID]:null;if(!_n)La(Vr.numGlyphs,cr);else{var Bn=new t.Point(Vr.anchorX,Vr.anchorY),Kn=Hn(Bn,ge?Qe:De),ca=da(Le.cameraToCenterDistance,Kn.signedDistanceFromCamera),pa=ye.evaluateSizeForFeature(pe.textSizeData,Mt,Vr)*ca/t.ONE_EM;ge&&(pa*=pe.tilePixelRatio/vt);for(var ha=_n.width,Da=_n.height,Ia=_n.anchor,Ta=_n.textOffset,Ga=_n.textBoxScale,ja=Uf(Ia,ha,Da,Ta,Ga,pa),li=ge?Hn(Bn.add(ja),De).point:Kn.point.add(Z?ja.rotate(-Le.angle):ja),_i=pe.allowVerticalPlacement&&Vr.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,io=0;io<Vr.numGlyphs;io++)t.addDynamicAttributes(cr,li,_i);Yt&&Vr.associatedIconIndex>=0&&(Xr[Vr.associatedIconIndex]={shiftedAnchor:li,angle:_i})}}if(Yt){Dr.clear();for(var Mi=pe.icon.placedSymbolArray,Fi=0;Fi<Mi.length;Fi++){var ri=Mi.get(Fi);if(ri.hidden)La(ri.numGlyphs,Dr);else{var oo=Xr[Fi];if(!oo)La(ri.numGlyphs,Dr);else for(var yo=0;yo<ri.numGlyphs;yo++)t.addDynamicAttributes(Dr,oo.shiftedAnchor,oo.angle)}}pe.icon.dynamicLayoutVertexBuffer.updateData(Dr)}pe.text.dynamicLayoutVertexBuffer.updateData(cr)}function Cc(pe,Z,ge){return ge.iconsInText&&Z?"symbolTextAndIcon":pe?"symbolSDF":"symbolIcon"}function Hf(pe,Z,ge,Q,ye,Le,De,Qe,vt,Mt,Yt,ar){for(var cr=pe.context,Dr=cr.gl,Xr=pe.transform,jr=Qe==="map",Vr=vt==="map",on=jr&&ge.layout.get("symbol-placement")!=="point",_n=jr&&!Vr&&!on,Bn=ge.layout.get("symbol-sort-key").constantOr(1)!==void 0,Kn=pe.depthModeForSublayer(0,pr.ReadOnly),ca=ge.layout.get("text-variable-anchor"),pa=[],ha=0,Da=Q;ha<Da.length;ha+=1){var Ia=Da[ha],Ta=Z.getTile(Ia),Ga=Ta.getBucket(ge);if(!!Ga){var ja=ye?Ga.text:Ga.icon;if(!(!ja||!ja.segments.get().length)){var li=ja.programConfigurations.get(ge.id),_i=ye||Ga.sdfIcons,io=ye?Ga.textSizeData:Ga.iconSizeData,Mi=Vr||Xr.pitch!==0,Fi=pe.useProgram(Cc(_i,ye,Ga),li),ri=t.evaluateSizeForZoom(io,Xr.zoom),oo=void 0,yo=[0,0],Ao=void 0,Zi=void 0,Ro=null,wi=void 0;if(ye){if(Ao=Ta.glyphAtlasTexture,Zi=Dr.LINEAR,oo=Ta.glyphAtlasTexture.size,Ga.iconsInText){yo=Ta.imageAtlasTexture.size,Ro=Ta.imageAtlasTexture;var Qi=io.kind==="composite"||io.kind==="camera";wi=Mi||pe.options.rotating||pe.options.zooming||Qi?Dr.LINEAR:Dr.NEAREST}}else{var ls=ge.layout.get("icon-size").constantOr(0)!==1||Ga.iconsNeedLinear;Ao=Ta.imageAtlasTexture,Zi=_i||pe.options.rotating||pe.options.zooming||ls||Mi?Dr.LINEAR:Dr.NEAREST,oo=Ta.imageAtlasTexture.size}var Ms=la(Ta,1,pe.transform.zoom),Bl=en(Ia.posMatrix,Vr,jr,pe.transform,Ms),vu=Zn(Ia.posMatrix,Vr,jr,pe.transform,Ms),lf=ca&&Ga.hasTextData(),uf=ge.layout.get("icon-text-fit")!=="none"&&lf&&Ga.hasIconData();on&&Va(Ga,Ia.posMatrix,pe,ye,Bl,vu,Vr,Mt);var Wu=pe.translatePosMatrix(Ia.posMatrix,Ta,Le,De),ff=on||ye&&ca||uf?jl:Bl,ds=pe.translatePosMatrix(vu,Ta,Le,De,!0),pu=_i&&ge.paint.get(ye?"text-halo-width":"icon-halo-width").constantOr(1)!==0,bl=void 0;_i?Ga.iconsInText?bl=ws(io.kind,ri,_n,Vr,pe,Wu,ff,ds,oo,yo):bl=Ps(io.kind,ri,_n,Vr,pe,Wu,ff,ds,ye,oo,!0):bl=Ol(io.kind,ri,_n,Vr,pe,Wu,ff,ds,ye,oo);var du={program:Fi,buffers:ja,uniformValues:bl,atlasTexture:Ao,atlasTextureIcon:Ro,atlasInterpolation:Zi,atlasInterpolationIcon:wi,isSDF:_i,hasHalo:pu};if(Bn)for(var Sf=ja.segments.get(),cf=0,kf=Sf;cf<kf.length;cf+=1){var Dh=kf[cf];pa.push({segments:new t.SegmentVector([Dh]),sortKey:Dh.sortKey,state:du})}else pa.push({segments:ja.segments,sortKey:0,state:du})}}}Bn&&pa.sort(function(Ih,zh){return Ih.sortKey-zh.sortKey});for(var Rc=0,ol=pa;Rc<ol.length;Rc+=1){var sh=ol[Rc],Ul=sh.state;if(cr.activeTexture.set(Dr.TEXTURE0),Ul.atlasTexture.bind(Ul.atlasInterpolation,Dr.CLAMP_TO_EDGE),Ul.atlasTextureIcon&&(cr.activeTexture.set(Dr.TEXTURE1),Ul.atlasTextureIcon&&Ul.atlasTextureIcon.bind(Ul.atlasInterpolationIcon,Dr.CLAMP_TO_EDGE)),Ul.isSDF){var lh=Ul.uniformValues;Ul.hasHalo&&(lh.u_is_halo=1,Vf(Ul.buffers,sh.segments,ge,pe,Ul.program,Kn,Yt,ar,lh)),lh.u_is_halo=0}Vf(Ul.buffers,sh.segments,ge,pe,Ul.program,Kn,Yt,ar,Ul.uniformValues)}}function Vf(pe,Z,ge,Q,ye,Le,De,Qe,vt){var Mt=Q.context,Yt=Mt.gl;ye.draw(Mt,Yt.TRIANGLES,Le,De,Qe,Ke.disabled,vt,ge.id,pe.layoutVertexBuffer,pe.indexBuffer,Z,ge.paint,Q.transform.zoom,pe.programConfigurations.get(ge.id),pe.dynamicLayoutVertexBuffer,pe.opacityVertexBuffer)}function Rs(pe,Z,ge,Q){if(pe.renderPass==="translucent"){var ye=ge.paint.get("circle-opacity"),Le=ge.paint.get("circle-stroke-width"),De=ge.paint.get("circle-stroke-opacity"),Qe=ge.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(ye.constantOr(1)===0&&(Le.constantOr(1)===0||De.constantOr(1)===0))){for(var vt=pe.context,Mt=vt.gl,Yt=pe.depthModeForSublayer(0,pr.ReadOnly),ar=Ir.disabled,cr=pe.colorModeForRenderPass(),Dr=[],Xr=0;Xr<Q.length;Xr++){var jr=Q[Xr],Vr=Z.getTile(jr),on=Vr.getBucket(ge);if(!!on){var _n=on.programConfigurations.get(ge.id),Bn=pe.useProgram("circle",_n),Kn=on.layoutVertexBuffer,ca=on.indexBuffer,pa=_t(pe,jr,Vr,ge),ha={programConfiguration:_n,program:Bn,layoutVertexBuffer:Kn,indexBuffer:ca,uniformValues:pa};if(Qe)for(var Da=on.segments.get(),Ia=0,Ta=Da;Ia<Ta.length;Ia+=1){var Ga=Ta[Ia];Dr.push({segments:new t.SegmentVector([Ga]),sortKey:Ga.sortKey,state:ha})}else Dr.push({segments:on.segments,sortKey:0,state:ha})}}Qe&&Dr.sort(function(Zi,Ro){return Zi.sortKey-Ro.sortKey});for(var ja=0,li=Dr;ja<li.length;ja+=1){var _i=li[ja],io=_i.state,Mi=io.programConfiguration,Fi=io.program,ri=io.layoutVertexBuffer,oo=io.indexBuffer,yo=io.uniformValues,Ao=_i.segments;Fi.draw(vt,Mt.TRIANGLES,Yt,ar,cr,Ke.disabled,yo,ge.id,ri,oo,Ao,ge.paint,pe.transform.zoom,Mi)}}}}function pc(pe,Z,ge,Q){if(ge.paint.get("heatmap-opacity")!==0)if(pe.renderPass==="offscreen"){var ye=pe.context,Le=ye.gl,De=Ir.disabled,Qe=new Ae([Le.ONE,Le.ONE],t.Color.transparent,[!0,!0,!0,!0]);dc(ye,pe,ge),ye.clear({color:t.Color.transparent});for(var vt=0;vt<Q.length;vt++){var Mt=Q[vt];if(!Z.hasRenderableParent(Mt)){var Yt=Z.getTile(Mt),ar=Yt.getBucket(ge);if(!!ar){var cr=ar.programConfigurations.get(ge.id),Dr=pe.useProgram("heatmap",cr),Xr=pe.transform,jr=Xr.zoom;Dr.draw(ye,Le.TRIANGLES,pr.disabled,De,Qe,Ke.disabled,Yn(Mt.posMatrix,Yt,jr,ge.paint.get("heatmap-intensity")),ge.id,ar.layoutVertexBuffer,ar.indexBuffer,ar.segments,ge.paint,pe.transform.zoom,cr)}}}ye.viewport.set([0,0,pe.width,pe.height])}else pe.renderPass==="translucent"&&(pe.context.setColorMode(pe.colorModeForRenderPass()),Uu(pe,ge))}function dc(pe,Z,ge){var Q=pe.gl;pe.activeTexture.set(Q.TEXTURE1),pe.viewport.set([0,0,Z.width/4,Z.height/4]);var ye=ge.heatmapFbo;if(ye)Q.bindTexture(Q.TEXTURE_2D,ye.colorAttachment.get()),pe.bindFramebuffer.set(ye.framebuffer);else{var Le=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,Le),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),ye=ge.heatmapFbo=pe.createFramebuffer(Z.width/4,Z.height/4,!1),Ds(pe,Z,Le,ye)}}function Ds(pe,Z,ge,Q){var ye=pe.gl,Le=pe.extRenderToTextureHalfFloat?pe.extTextureHalfFloat.HALF_FLOAT_OES:ye.UNSIGNED_BYTE;ye.texImage2D(ye.TEXTURE_2D,0,ye.RGBA,Z.width/4,Z.height/4,0,ye.RGBA,Le,null),Q.colorAttachment.set(ge)}function Uu(pe,Z){var ge=pe.context,Q=ge.gl,ye=Z.heatmapFbo;if(!!ye){ge.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,ye.colorAttachment.get()),ge.activeTexture.set(Q.TEXTURE1);var Le=Z.colorRampTexture;Le||(Le=Z.colorRampTexture=new t.Texture(ge,Z.colorRamp,Q.RGBA)),Le.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),pe.useProgram("heatmapTexture").draw(ge,Q.TRIANGLES,pr.disabled,Ir.disabled,pe.colorModeForRenderPass(),Ke.disabled,Vn(pe,Z,0,1),Z.id,pe.viewportBuffer,pe.quadTriangleIndexBuffer,pe.viewportSegments,Z.paint,pe.transform.zoom)}}function Gf(pe,Z,ge,Q){if(pe.renderPass==="translucent"){var ye=ge.paint.get("line-opacity"),Le=ge.paint.get("line-width");if(!(ye.constantOr(1)===0||Le.constantOr(1)===0)){var De=pe.depthModeForSublayer(0,pr.ReadOnly),Qe=pe.colorModeForRenderPass(),vt=ge.paint.get("line-dasharray"),Mt=ge.paint.get("line-pattern"),Yt=Mt.constantOr(1),ar=ge.paint.get("line-gradient"),cr=ge.getCrossfadeParameters(),Dr=Yt?"linePattern":vt?"lineSDF":ar?"lineGradient":"line",Xr=pe.context,jr=Xr.gl,Vr=!0;if(ar){Xr.activeTexture.set(jr.TEXTURE0);var on=ge.gradientTexture;if(!ge.gradient)return;on||(on=ge.gradientTexture=new t.Texture(Xr,ge.gradient,jr.RGBA)),on.bind(jr.LINEAR,jr.CLAMP_TO_EDGE)}for(var _n=0,Bn=Q;_n<Bn.length;_n+=1){var Kn=Bn[_n],ca=Z.getTile(Kn);if(!(Yt&&!ca.patternsLoaded())){var pa=ca.getBucket(ge);if(!!pa){var ha=pa.programConfigurations.get(ge.id),Da=pe.context.program.get(),Ia=pe.useProgram(Dr,ha),Ta=Vr||Ia.program!==Da,Ga=Mt.constantOr(null);if(Ga&&ca.imageAtlas){var ja=ca.imageAtlas,li=ja.patternPositions[Ga.to.toString()],_i=ja.patternPositions[Ga.from.toString()];li&&_i&&ha.setConstantPatternPositions(li,_i)}var io=Yt?Hi(pe,ca,ge,cr):vt?Xi(pe,ca,ge,vt,cr):ar?Ui(pe,ca,ge):Ba(pe,ca,ge);Yt?(Xr.activeTexture.set(jr.TEXTURE0),ca.imageAtlasTexture.bind(jr.LINEAR,jr.CLAMP_TO_EDGE),ha.updatePaintBuffers(cr)):vt&&(Ta||pe.lineAtlas.dirty)&&(Xr.activeTexture.set(jr.TEXTURE0),pe.lineAtlas.bind(Xr)),Ia.draw(Xr,jr.TRIANGLES,De,pe.stencilModeForClipping(Kn),Qe,Ke.disabled,io,ge.id,pa.layoutVertexBuffer,pa.indexBuffer,pa.segments,ge.paint,pe.transform.zoom,ha),Vr=!1}}}}}}function Wf(pe,Z,ge,Q){var ye=ge.paint.get("fill-color"),Le=ge.paint.get("fill-opacity");if(Le.constantOr(1)!==0){var De=pe.colorModeForRenderPass(),Qe=ge.paint.get("fill-pattern"),vt=pe.opaquePassEnabledForLayer()&&!Qe.constantOr(1)&&ye.constantOr(t.Color.transparent).a===1&&Le.constantOr(0)===1?"opaque":"translucent";if(pe.renderPass===vt){var Mt=pe.depthModeForSublayer(1,pe.renderPass==="opaque"?pr.ReadWrite:pr.ReadOnly);Oe(pe,Z,ge,Q,Mt,De,!1)}if(pe.renderPass==="translucent"&&ge.paint.get("fill-antialias")){var Yt=pe.depthModeForSublayer(ge.getPaintProperty("fill-outline-color")?2:0,pr.ReadOnly);Oe(pe,Z,ge,Q,Yt,De,!0)}}}function Oe(pe,Z,ge,Q,ye,Le,De){var Qe=pe.context.gl,vt=ge.paint.get("fill-pattern"),Mt=vt&&vt.constantOr(1),Yt=ge.getCrossfadeParameters(),ar,cr,Dr,Xr,jr;De?(cr=Mt&&!ge.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ar=Qe.LINES):(cr=Mt?"fillPattern":"fill",ar=Qe.TRIANGLES);for(var Vr=0,on=Q;Vr<on.length;Vr+=1){var _n=on[Vr],Bn=Z.getTile(_n);if(!(Mt&&!Bn.patternsLoaded())){var Kn=Bn.getBucket(ge);if(!!Kn){var ca=Kn.programConfigurations.get(ge.id),pa=pe.useProgram(cr,ca);Mt&&(pe.context.activeTexture.set(Qe.TEXTURE0),Bn.imageAtlasTexture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),ca.updatePaintBuffers(Yt));var ha=vt.constantOr(null);if(ha&&Bn.imageAtlas){var Da=Bn.imageAtlas,Ia=Da.patternPositions[ha.to.toString()],Ta=Da.patternPositions[ha.from.toString()];Ia&&Ta&&ca.setConstantPatternPositions(Ia,Ta)}var Ga=pe.translatePosMatrix(_n.posMatrix,Bn,ge.paint.get("fill-translate"),ge.paint.get("fill-translate-anchor"));if(!De)Xr=Kn.indexBuffer,jr=Kn.segments,Dr=Mt?po(Ga,pe,Yt,Bn):ys(Ga);else{Xr=Kn.indexBuffer2,jr=Kn.segments2;var ja=[Qe.drawingBufferWidth,Qe.drawingBufferHeight];Dr=cr==="fillOutlinePattern"&&Mt?nf(Ga,pe,Yt,Bn,ja):hs(Ga,ja)}pa.draw(pe.context,ar,ye,pe.stencilModeForClipping(_n),Le,Ke.disabled,Dr,ge.id,Kn.layoutVertexBuffer,Xr,jr,ge.paint,pe.transform.zoom,ca)}}}}function je(pe,Z,ge,Q){var ye=ge.paint.get("fill-extrusion-opacity");if(ye!==0&&pe.renderPass==="translucent"){var Le=new pr(pe.context.gl.LEQUAL,pr.ReadWrite,pe.depthRangeFor3D);if(ye===1&&!ge.paint.get("fill-extrusion-pattern").constantOr(1)){var De=pe.colorModeForRenderPass();ot(pe,Z,ge,Q,Le,Ir.disabled,De)}else ot(pe,Z,ge,Q,Le,Ir.disabled,Ae.disabled),ot(pe,Z,ge,Q,Le,pe.stencilModeFor3D(),pe.colorModeForRenderPass())}}function ot(pe,Z,ge,Q,ye,Le,De){for(var Qe=pe.context,vt=Qe.gl,Mt=ge.paint.get("fill-extrusion-pattern"),Yt=Mt.constantOr(1),ar=ge.getCrossfadeParameters(),cr=ge.paint.get("fill-extrusion-opacity"),Dr=0,Xr=Q;Dr<Xr.length;Dr+=1){var jr=Xr[Dr],Vr=Z.getTile(jr),on=Vr.getBucket(ge);if(!!on){var _n=on.programConfigurations.get(ge.id),Bn=pe.useProgram(Yt?"fillExtrusionPattern":"fillExtrusion",_n);Yt&&(pe.context.activeTexture.set(vt.TEXTURE0),Vr.imageAtlasTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE),_n.updatePaintBuffers(ar));var Kn=Mt.constantOr(null);if(Kn&&Vr.imageAtlas){var ca=Vr.imageAtlas,pa=ca.patternPositions[Kn.to.toString()],ha=ca.patternPositions[Kn.from.toString()];pa&&ha&&_n.setConstantPatternPositions(pa,ha)}var Da=pe.translatePosMatrix(jr.posMatrix,Vr,ge.paint.get("fill-extrusion-translate"),ge.paint.get("fill-extrusion-translate-anchor")),Ia=ge.paint.get("fill-extrusion-vertical-gradient"),Ta=Yt?rl(Da,pe,Ia,cr,jr,ar,Vr):Ls(Da,pe,Ia,cr);Bn.draw(Qe,Qe.gl.TRIANGLES,ye,Le,De,Ke.backCCW,Ta,ge.id,on.layoutVertexBuffer,on.indexBuffer,on.segments,ge.paint,pe.transform.zoom,_n)}}}function ft(pe,Z,ge,Q){if(!(pe.renderPass!=="offscreen"&&pe.renderPass!=="translucent")){for(var ye=pe.context,Le=Z.getSource().maxzoom,De=pe.depthModeForSublayer(0,pr.ReadOnly),Qe=pe.colorModeForRenderPass(),vt=pe.renderPass==="translucent"?pe.stencilConfigForOverlap(Q):[{},Q],Mt=vt[0],Yt=vt[1],ar=0,cr=Yt;ar<cr.length;ar+=1){var Dr=cr[ar],Xr=Z.getTile(Dr);Xr.needsHillshadePrepare&&pe.renderPass==="offscreen"?Tt(pe,Xr,ge,Le,De,Ir.disabled,Qe):pe.renderPass==="translucent"&&St(pe,Xr,ge,De,Mt[Dr.overscaledZ],Qe)}ye.viewport.set([0,0,pe.width,pe.height])}}function St(pe,Z,ge,Q,ye,Le){var De=pe.context,Qe=De.gl,vt=Z.fbo;if(!!vt){var Mt=pe.useProgram("hillshade");De.activeTexture.set(Qe.TEXTURE0),Qe.bindTexture(Qe.TEXTURE_2D,vt.colorAttachment.get());var Yt=$a(pe,Z,ge);Mt.draw(De,Qe.TRIANGLES,Q,ye,Le,Ke.disabled,Yt,ge.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments)}}function Tt(pe,Z,ge,Q,ye,Le,De){var Qe=pe.context,vt=Qe.gl,Mt=Z.dem;if(Mt&&Mt.data){var Yt=Mt.dim,ar=Mt.stride,cr=Mt.getPixels();if(Qe.activeTexture.set(vt.TEXTURE1),Qe.pixelStoreUnpackPremultiplyAlpha.set(!1),Z.demTexture=Z.demTexture||pe.getTileTexture(ar),Z.demTexture){var Dr=Z.demTexture;Dr.update(cr,{premultiply:!1}),Dr.bind(vt.NEAREST,vt.CLAMP_TO_EDGE)}else Z.demTexture=new t.Texture(Qe,cr,vt.RGBA,{premultiply:!1}),Z.demTexture.bind(vt.NEAREST,vt.CLAMP_TO_EDGE);Qe.activeTexture.set(vt.TEXTURE0);var Xr=Z.fbo;if(!Xr){var jr=new t.Texture(Qe,{width:Yt,height:Yt,data:null},vt.RGBA);jr.bind(vt.LINEAR,vt.CLAMP_TO_EDGE),Xr=Z.fbo=Qe.createFramebuffer(Yt,Yt,!0),Xr.colorAttachment.set(jr.texture)}Qe.bindFramebuffer.set(Xr.framebuffer),Qe.viewport.set([0,0,Yt,Yt]),pe.useProgram("hillshadePrepare").draw(Qe,vt.TRIANGLES,ye,Le,De,Ke.disabled,Ya(Z.tileID,Mt,Q),ge.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),Z.needsHillshadePrepare=!1}}function Et(pe,Z,ge,Q){if(pe.renderPass==="translucent"&&ge.paint.get("raster-opacity")!==0&&!!Q.length)for(var ye=pe.context,Le=ye.gl,De=Z.getSource(),Qe=pe.useProgram("raster"),vt=pe.colorModeForRenderPass(),Mt=De instanceof J?[{},Q]:pe.stencilConfigForOverlap(Q),Yt=Mt[0],ar=Mt[1],cr=ar[ar.length-1].overscaledZ,Dr=!pe.options.moving,Xr=0,jr=ar;Xr<jr.length;Xr+=1){var Vr=jr[Xr],on=pe.depthModeForSublayer(Vr.overscaledZ-cr,ge.paint.get("raster-opacity")===1?pr.ReadWrite:pr.ReadOnly,Le.LESS),_n=Z.getTile(Vr),Bn=pe.transform.calculatePosMatrix(Vr.toUnwrapped(),Dr);_n.registerFadeDuration(ge.paint.get("raster-fade-duration"));var Kn=Z.findLoadedParent(Vr,0),ca=or(_n,Kn,Z,ge,pe.transform),pa=void 0,ha=void 0,Da=ge.paint.get("raster-resampling")==="nearest"?Le.NEAREST:Le.LINEAR;ye.activeTexture.set(Le.TEXTURE0),_n.texture.bind(Da,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),ye.activeTexture.set(Le.TEXTURE1),Kn?(Kn.texture.bind(Da,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),pa=Math.pow(2,Kn.tileID.overscaledZ-_n.tileID.overscaledZ),ha=[_n.tileID.canonical.x*pa%1,_n.tileID.canonical.y*pa%1]):_n.texture.bind(Da,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST);var Ia=Vo(Bn,ha||[0,0],pa||1,ca,ge);De instanceof J?Qe.draw(ye,Le.TRIANGLES,on,Ir.disabled,vt,Ke.disabled,Ia,ge.id,De.boundsBuffer,pe.quadTriangleIndexBuffer,De.boundsSegments):Qe.draw(ye,Le.TRIANGLES,on,Yt[Vr.overscaledZ],vt,Ke.disabled,Ia,ge.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments)}}function or(pe,Z,ge,Q,ye){var Le=Q.paint.get("raster-fade-duration");if(Le>0){var De=t.browser.now(),Qe=(De-pe.timeAdded)/Le,vt=Z?(De-Z.timeAdded)/Le:-1,Mt=ge.getSource(),Yt=ye.coveringZoomLevel({tileSize:Mt.tileSize,roundZoom:Mt.roundZoom}),ar=!Z||Math.abs(Z.tileID.overscaledZ-Yt)>Math.abs(pe.tileID.overscaledZ-Yt),cr=ar&&pe.refreshedUponExpiration?1:t.clamp(ar?Qe:1-vt,0,1);return pe.refreshedUponExpiration&&Qe>=1&&(pe.refreshedUponExpiration=!1),Z?{opacity:1,mix:1-cr}:{opacity:cr,mix:0}}else return{opacity:1,mix:0}}function vr(pe,Z,ge){var Q=ge.paint.get("background-color"),ye=ge.paint.get("background-opacity");if(ye!==0){var Le=pe.context,De=Le.gl,Qe=pe.transform,vt=Qe.tileSize,Mt=ge.paint.get("background-pattern");if(!pe.isPatternMissing(Mt)){var Yt=!Mt&&Q.a===1&&ye===1&&pe.opaquePassEnabledForLayer()?"opaque":"translucent";if(pe.renderPass===Yt){var ar=Ir.disabled,cr=pe.depthModeForSublayer(0,Yt==="opaque"?pr.ReadWrite:pr.ReadOnly),Dr=pe.colorModeForRenderPass(),Xr=pe.useProgram(Mt?"backgroundPattern":"background"),jr=Qe.coveringTiles({tileSize:vt});Mt&&(Le.activeTexture.set(De.TEXTURE0),pe.imageManager.bind(pe.context));for(var Vr=ge.getCrossfadeParameters(),on=0,_n=jr;on<_n.length;on+=1){var Bn=_n[on],Kn=pe.transform.calculatePosMatrix(Bn.toUnwrapped()),ca=Mt?af(Kn,ye,pe,Mt,{tileID:Bn,tileSize:vt},Vr):cs(Kn,ye,Q);Xr.draw(Le,De.TRIANGLES,cr,ar,Dr,Ke.disabled,ca,ge.id,pe.tileExtentBuffer,pe.quadTriangleIndexBuffer,pe.tileExtentSegments)}}}}}var nr=new t.Color(1,0,0,1),gr=new t.Color(0,1,0,1),Or=new t.Color(0,0,1,1),Kr=new t.Color(1,0,1,1),cn=new t.Color(0,1,1,1);function Ln(pe){var Z=pe.transform.padding,ge=3;oa(pe,pe.transform.height-(Z.top||0),ge,nr),oa(pe,Z.bottom||0,ge,gr),Ua(pe,Z.left||0,ge,Or),Ua(pe,pe.transform.width-(Z.right||0),ge,Kr);var Q=pe.transform.centerPoint;zn(pe,Q.x,pe.transform.height-Q.y,cn)}function zn(pe,Z,ge,Q){var ye=20,Le=2;Pa(pe,Z-Le/2,ge-ye/2,Le,ye,Q),Pa(pe,Z-ye/2,ge-Le/2,ye,Le,Q)}function oa(pe,Z,ge,Q){Pa(pe,0,Z+ge/2,pe.transform.width,ge,Q)}function Ua(pe,Z,ge,Q){Pa(pe,Z-ge/2,0,ge,pe.transform.height,Q)}function Pa(pe,Z,ge,Q,ye,Le){var De=pe.context,Qe=De.gl;Qe.enable(Qe.SCISSOR_TEST),Qe.scissor(Z*t.browser.devicePixelRatio,ge*t.browser.devicePixelRatio,Q*t.browser.devicePixelRatio,ye*t.browser.devicePixelRatio),De.clear({color:Le}),Qe.disable(Qe.SCISSOR_TEST)}function ci(pe,Z,ge){for(var Q=0;Q<ge.length;Q++)si(pe,Z,ge[Q])}function si(pe,Z,ge){var Q=pe.context,ye=Q.gl,Le=ge.posMatrix,De=pe.useProgram("debug"),Qe=pr.disabled,vt=Ir.disabled,Mt=pe.colorModeForRenderPass(),Yt="$debug";Q.activeTexture.set(ye.TEXTURE0),pe.emptyTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),De.draw(Q,ye.LINE_STRIP,Qe,vt,Mt,Ke.disabled,An(Le,t.Color.red),Yt,pe.debugBuffer,pe.tileBorderIndexBuffer,pe.debugSegments);var ar=Z.getTileByID(ge.key).latestRawTileData,cr=ar&&ar.byteLength||0,Dr=Math.floor(cr/1024),Xr=Z.getTile(ge).tileSize,jr=512/Math.min(Xr,512)*(ge.overscaledZ/pe.transform.zoom)*.5,Vr=ge.canonical.toString();ge.overscaledZ!==ge.canonical.z&&(Vr+=" => "+ge.overscaledZ);var on=Vr+" "+Dr+"kb";hi(pe,on),De.draw(Q,ye.TRIANGLES,Qe,vt,Ae.alphaBlended,Ke.disabled,An(Le,t.Color.transparent,jr),Yt,pe.debugBuffer,pe.quadTriangleIndexBuffer,pe.debugSegments)}function hi(pe,Z){pe.initDebugOverlayCanvas();var ge=pe.debugOverlayCanvas,Q=pe.context.gl,ye=pe.debugOverlayCanvas.getContext("2d");ye.clearRect(0,0,ge.width,ge.height),ye.shadowColor="white",ye.shadowBlur=2,ye.lineWidth=1.5,ye.strokeStyle="white",ye.textBaseline="top",ye.font="bold "+36+"px Open Sans, sans-serif",ye.fillText(Z,5,5),ye.strokeText(Z,5,5),pe.debugOverlayTexture.update(ge),pe.debugOverlayTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}function Ri(pe,Z,ge){var Q=pe.context,ye=ge.implementation;if(pe.renderPass==="offscreen"){var Le=ye.prerender;Le&&(pe.setCustomLayerDefaults(),Q.setColorMode(pe.colorModeForRenderPass()),Le.call(ye,Q.gl,pe.transform.customLayerMatrix()),Q.setDirty(),pe.setBaseState())}else if(pe.renderPass==="translucent"){pe.setCustomLayerDefaults(),Q.setColorMode(pe.colorModeForRenderPass()),Q.setStencilMode(Ir.disabled);var De=ye.renderingMode==="3d"?new pr(pe.context.gl.LEQUAL,pr.ReadWrite,pe.depthRangeFor3D):pe.depthModeForSublayer(0,pr.ReadOnly);Q.setDepthMode(De),ye.render(Q.gl,pe.transform.customLayerMatrix()),Q.setDirty(),pe.setBaseState(),Q.bindFramebuffer.set(null)}}var Vi={symbol:hc,circle:Rs,heatmap:pc,line:Gf,fill:Wf,"fill-extrusion":je,hillshade:ft,raster:Et,background:vr,debug:ci,custom:Ri},xi=function(Z,ge){this.context=new tt(Z),this.transform=ge,this._tileTextures={},this.setup(),this.numSublayers=ut.maxUnderzooming+ut.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new cl,this.gpuTimers={}};xi.prototype.resize=function(Z,ge){if(this.width=Z*t.browser.devicePixelRatio,this.height=ge*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var Q=0,ye=this.style._order;Q<ye.length;Q+=1){var Le=ye[Q];this.style._layers[Le].resize()}},xi.prototype.setup=function(){var Z=this.context,ge=new t.StructArrayLayout2i4;ge.emplaceBack(0,0),ge.emplaceBack(t.EXTENT,0),ge.emplaceBack(0,t.EXTENT),ge.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=Z.createVertexBuffer(ge,Vl.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Q=new t.StructArrayLayout2i4;Q.emplaceBack(0,0),Q.emplaceBack(t.EXTENT,0),Q.emplaceBack(0,t.EXTENT),Q.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=Z.createVertexBuffer(Q,Vl.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var ye=new t.StructArrayLayout4i8;ye.emplaceBack(0,0,0,0),ye.emplaceBack(t.EXTENT,0,t.EXTENT,0),ye.emplaceBack(0,t.EXTENT,0,t.EXTENT),ye.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=Z.createVertexBuffer(ye,G.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Le=new t.StructArrayLayout2i4;Le.emplaceBack(0,0),Le.emplaceBack(1,0),Le.emplaceBack(0,1),Le.emplaceBack(1,1),this.viewportBuffer=Z.createVertexBuffer(Le,Vl.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var De=new t.StructArrayLayout1ui2;De.emplaceBack(0),De.emplaceBack(1),De.emplaceBack(3),De.emplaceBack(2),De.emplaceBack(0),this.tileBorderIndexBuffer=Z.createIndexBuffer(De);var Qe=new t.StructArrayLayout3ui6;Qe.emplaceBack(0,1,2),Qe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=Z.createIndexBuffer(Qe),this.emptyTexture=new t.Texture(Z,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Z.gl.RGBA);var vt=this.context.gl;this.stencilClearMode=new Ir({func:vt.ALWAYS,mask:0},0,255,vt.ZERO,vt.ZERO,vt.ZERO)},xi.prototype.clearStencil=function(){var Z=this.context,ge=Z.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var Q=t.create();t.ortho(Q,0,this.width,this.height,0,0,1),t.scale(Q,Q,[ge.drawingBufferWidth,ge.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(Z,ge.TRIANGLES,pr.disabled,this.stencilClearMode,Ae.disabled,Ke.disabled,Un(Q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},xi.prototype._renderTileClippingMasks=function(Z,ge){if(!(this.currentStencilSource===Z.source||!Z.isTileClipped()||!ge||!ge.length)){this.currentStencilSource=Z.source;var Q=this.context,ye=Q.gl;this.nextStencilID+ge.length>256&&this.clearStencil(),Q.setColorMode(Ae.disabled),Q.setDepthMode(pr.disabled);var Le=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var De=0,Qe=ge;De<Qe.length;De+=1){var vt=Qe[De],Mt=this._tileClippingMaskIDs[vt.key]=this.nextStencilID++;Le.draw(Q,ye.TRIANGLES,pr.disabled,new Ir({func:ye.ALWAYS,mask:0},Mt,255,ye.KEEP,ye.KEEP,ye.REPLACE),Ae.disabled,Ke.disabled,Un(vt.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},xi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var Z=this.nextStencilID++,ge=this.context.gl;return new Ir({func:ge.NOTEQUAL,mask:255},Z,255,ge.KEEP,ge.KEEP,ge.REPLACE)},xi.prototype.stencilModeForClipping=function(Z){var ge=this.context.gl;return new Ir({func:ge.EQUAL,mask:255},this._tileClippingMaskIDs[Z.key],0,ge.KEEP,ge.KEEP,ge.REPLACE)},xi.prototype.stencilConfigForOverlap=function(Z){var ge,Q=this.context.gl,ye=Z.sort(function(Mt,Yt){return Yt.overscaledZ-Mt.overscaledZ}),Le=ye[ye.length-1].overscaledZ,De=ye[0].overscaledZ-Le+1;if(De>1){this.currentStencilSource=void 0,this.nextStencilID+De>256&&this.clearStencil();for(var Qe={},vt=0;vt<De;vt++)Qe[vt+Le]=new Ir({func:Q.GEQUAL,mask:255},vt+this.nextStencilID,255,Q.KEEP,Q.KEEP,Q.REPLACE);return this.nextStencilID+=De,[Qe,ye]}return[(ge={},ge[Le]=Ir.disabled,ge),ye]},xi.prototype.colorModeForRenderPass=function(){var Z=this.context.gl;if(this._showOverdrawInspector){var ge=8,Q=1/ge;return new Ae([Z.CONSTANT_COLOR,Z.ONE],new t.Color(Q,Q,Q,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?Ae.unblended:Ae.alphaBlended},xi.prototype.depthModeForSublayer=function(Z,ge,Q){if(!this.opaquePassEnabledForLayer())return pr.disabled;var ye=1-((1+this.currentLayer)*this.numSublayers+Z)*this.depthEpsilon;return new pr(Q||this.context.gl.LEQUAL,ge,[ye,ye])},xi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},xi.prototype.render=function(Z,ge){var Q=this;this.style=Z,this.options=ge,this.lineAtlas=Z.lineAtlas,this.imageManager=Z.imageManager,this.glyphManager=Z.glyphManager,this.symbolFadeChange=Z.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var ye=this.style._order,Le=this.style.sourceCaches;for(var De in Le){var Qe=Le[De];Qe.used&&Qe.prepare(this.context)}var vt={},Mt={},Yt={};for(var ar in Le){var cr=Le[ar];vt[ar]=cr.getVisibleCoordinates(),Mt[ar]=vt[ar].slice().reverse(),Yt[ar]=cr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Dr=0;Dr<ye.length;Dr++){var Xr=ye[Dr];if(this.style._layers[Xr].is3D()){this.opaquePassCutoff=Dr;break}}this.renderPass="offscreen";for(var jr=0,Vr=ye;jr<Vr.length;jr+=1){var on=Vr[jr],_n=this.style._layers[on];if(!(!_n.hasOffscreenPass()||_n.isHidden(this.transform.zoom))){var Bn=Mt[_n.source];_n.type!=="custom"&&!Bn.length||this.renderLayer(this,Le[_n.source],_n,Bn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ge.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ge.showOverdrawInspector,this.depthRangeFor3D=[0,1-(Z._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ye.length-1;this.currentLayer>=0;this.currentLayer--){var Kn=this.style._layers[ye[this.currentLayer]],ca=Le[Kn.source],pa=vt[Kn.source];this._renderTileClippingMasks(Kn,pa),this.renderLayer(this,ca,Kn,pa)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ye.length;this.currentLayer++){var ha=this.style._layers[ye[this.currentLayer]],Da=Le[ha.source],Ia=(ha.type==="symbol"?Yt:Mt)[ha.source];this._renderTileClippingMasks(ha,vt[ha.source]),this.renderLayer(this,Da,ha,Ia)}if(this.options.showTileBoundaries){var Ta,Ga,ja=t.values(this.style._layers);ja.forEach(function(li){li.source&&!li.isHidden(Q.transform.zoom)&&(li.source!==(Ga&&Ga.id)&&(Ga=Q.style.sourceCaches[li.source]),(!Ta||Ta.getSource().maxzoom<Ga.getSource().maxzoom)&&(Ta=Ga))}),Ta&&Vi.debug(this,Ta,Ta.getVisibleCoordinates())}this.options.showPadding&&Ln(this),this.context.setDefault()},xi.prototype.renderLayer=function(Z,ge,Q,ye){Q.isHidden(this.transform.zoom)||Q.type!=="background"&&Q.type!=="custom"&&!ye.length||(this.id=Q.id,this.gpuTimingStart(Q),Vi[Q.type](Z,ge,Q,ye,this.style.placement.variableOffsets),this.gpuTimingEnd())},xi.prototype.gpuTimingStart=function(Z){if(!!this.options.gpuTiming){var ge=this.context.extTimerQuery,Q=this.gpuTimers[Z.id];Q||(Q=this.gpuTimers[Z.id]={calls:0,cpuTime:0,query:ge.createQueryEXT()}),Q.calls++,ge.beginQueryEXT(ge.TIME_ELAPSED_EXT,Q.query)}},xi.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var Z=this.context.extTimerQuery;Z.endQueryEXT(Z.TIME_ELAPSED_EXT)}},xi.prototype.collectGpuTimers=function(){var Z=this.gpuTimers;return this.gpuTimers={},Z},xi.prototype.queryGpuTimers=function(Z){var ge={};for(var Q in Z){var ye=Z[Q],Le=this.context.extTimerQuery,De=Le.getQueryObjectEXT(ye.query,Le.QUERY_RESULT_EXT)/(1e3*1e3);Le.deleteQueryEXT(ye.query),ge[Q]=De}return ge},xi.prototype.translatePosMatrix=function(Z,ge,Q,ye,Le){if(!Q[0]&&!Q[1])return Z;var De=Le?ye==="map"?this.transform.angle:0:ye==="viewport"?-this.transform.angle:0;if(De){var Qe=Math.sin(De),vt=Math.cos(De);Q=[Q[0]*vt-Q[1]*Qe,Q[0]*Qe+Q[1]*vt]}var Mt=[Le?Q[0]:la(ge,Q[0],this.transform.zoom),Le?Q[1]:la(ge,Q[1],this.transform.zoom),0],Yt=new Float32Array(16);return t.translate(Yt,Z,Mt),Yt},xi.prototype.saveTileTexture=function(Z){var ge=this._tileTextures[Z.size[0]];ge?ge.push(Z):this._tileTextures[Z.size[0]]=[Z]},xi.prototype.getTileTexture=function(Z){var ge=this._tileTextures[Z];return ge&&ge.length>0?ge.pop():null},xi.prototype.isPatternMissing=function(Z){if(!Z)return!1;if(!Z.from||!Z.to)return!0;var ge=this.imageManager.getPattern(Z.from.toString()),Q=this.imageManager.getPattern(Z.to.toString());return!ge||!Q},xi.prototype.useProgram=function(Z,ge){this.cache=this.cache||{};var Q=""+Z+(ge?ge.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[Q]||(this.cache[Q]=new us(this.context,cu[Z],ge,Tf[Z],this._showOverdrawInspector)),this.cache[Q]},xi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},xi.prototype.setBaseState=function(){var Z=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(Z.FUNC_ADD)},xi.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var Z=this.context.gl;this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,Z.RGBA)}},xi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Po=function(Z,ge){this.points=Z,this.planes=ge};Po.fromInvProjectionMatrix=function(Z,ge,Q){var ye=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Le=Math.pow(2,Q),De=ye.map(function(Mt){return t.transformMat4([],Mt,Z)}).map(function(Mt){return t.scale$1([],Mt,1/Mt[3]/ge*Le)}),Qe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],vt=Qe.map(function(Mt){var Yt=t.sub([],De[Mt[0]],De[Mt[1]]),ar=t.sub([],De[Mt[2]],De[Mt[1]]),cr=t.normalize([],t.cross([],Yt,ar)),Dr=-t.dot(cr,De[Mt[1]]);return cr.concat(Dr)});return new Po(De,vt)};var qo=function(Z,ge){this.min=Z,this.max=ge,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};qo.prototype.quadrant=function(Z){for(var ge=[Z%2==0,Z<2],Q=t.clone$2(this.min),ye=t.clone$2(this.max),Le=0;Le<ge.length;Le++)Q[Le]=ge[Le]?this.min[Le]:this.center[Le],ye[Le]=ge[Le]?this.center[Le]:this.max[Le];return ye[2]=this.max[2],new qo(Q,ye)},qo.prototype.distanceX=function(Z){var ge=Math.max(Math.min(this.max[0],Z[0]),this.min[0]);return ge-Z[0]},qo.prototype.distanceY=function(Z){var ge=Math.max(Math.min(this.max[1],Z[1]),this.min[1]);return ge-Z[1]},qo.prototype.intersects=function(Z){for(var ge=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],Q=!0,ye=0;ye<Z.planes.length;ye++){for(var Le=Z.planes[ye],De=0,Qe=0;Qe<ge.length;Qe++)De+=t.dot$1(Le,ge[Qe])>=0;if(De===0)return 0;De!==ge.length&&(Q=!1)}if(Q)return 2;for(var vt=0;vt<3;vt++){for(var Mt=Number.MAX_VALUE,Yt=-Number.MAX_VALUE,ar=0;ar<Z.points.length;ar++){var cr=Z.points[ar][vt]-this.min[vt];Mt=Math.min(Mt,cr),Yt=Math.max(Yt,cr)}if(Yt<0||Mt>this.max[vt]-this.min[vt])return 0}return 1};var ps=function(Z,ge,Q,ye){if(Z===void 0&&(Z=0),ge===void 0&&(ge=0),Q===void 0&&(Q=0),ye===void 0&&(ye=0),isNaN(Z)||Z<0||isNaN(ge)||ge<0||isNaN(Q)||Q<0||isNaN(ye)||ye<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Z,this.bottom=ge,this.left=Q,this.right=ye};ps.prototype.interpolate=function(Z,ge,Q){return ge.top!=null&&Z.top!=null&&(this.top=t.number(Z.top,ge.top,Q)),ge.bottom!=null&&Z.bottom!=null&&(this.bottom=t.number(Z.bottom,ge.bottom,Q)),ge.left!=null&&Z.left!=null&&(this.left=t.number(Z.left,ge.left,Q)),ge.right!=null&&Z.right!=null&&(this.right=t.number(Z.right,ge.right,Q)),this},ps.prototype.getCenter=function(Z,ge){var Q=t.clamp((this.left+Z-this.right)/2,0,Z),ye=t.clamp((this.top+ge-this.bottom)/2,0,ge);return new t.Point(Q,ye)},ps.prototype.equals=function(Z){return this.top===Z.top&&this.bottom===Z.bottom&&this.left===Z.left&&this.right===Z.right},ps.prototype.clone=function(){return new ps(this.top,this.bottom,this.left,this.right)},ps.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ni=function(Z,ge,Q,ye,Le){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Le===void 0?!0:Le,this._minZoom=Z||0,this._maxZoom=ge||22,this._minPitch=Q==null?0:Q,this._maxPitch=ye==null?60:ye,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ps,this._posMatrixCache={},this._alignedPosMatrixCache={}},eo={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ni.prototype.clone=function(){var Z=new Ni(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Z.tileSize=this.tileSize,Z.latRange=this.latRange,Z.width=this.width,Z.height=this.height,Z._center=this._center,Z.zoom=this.zoom,Z.angle=this.angle,Z._fov=this._fov,Z._pitch=this._pitch,Z._unmodified=this._unmodified,Z._edgeInsets=this._edgeInsets.clone(),Z._calcMatrices(),Z},eo.minZoom.get=function(){return this._minZoom},eo.minZoom.set=function(pe){this._minZoom!==pe&&(this._minZoom=pe,this.zoom=Math.max(this.zoom,pe))},eo.maxZoom.get=function(){return this._maxZoom},eo.maxZoom.set=function(pe){this._maxZoom!==pe&&(this._maxZoom=pe,this.zoom=Math.min(this.zoom,pe))},eo.minPitch.get=function(){return this._minPitch},eo.minPitch.set=function(pe){this._minPitch!==pe&&(this._minPitch=pe,this.pitch=Math.max(this.pitch,pe))},eo.maxPitch.get=function(){return this._maxPitch},eo.maxPitch.set=function(pe){this._maxPitch!==pe&&(this._maxPitch=pe,this.pitch=Math.min(this.pitch,pe))},eo.renderWorldCopies.get=function(){return this._renderWorldCopies},eo.renderWorldCopies.set=function(pe){pe===void 0?pe=!0:pe===null&&(pe=!1),this._renderWorldCopies=pe},eo.worldSize.get=function(){return this.tileSize*this.scale},eo.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},eo.size.get=function(){return new t.Point(this.width,this.height)},eo.bearing.get=function(){return-this.angle/Math.PI*180},eo.bearing.set=function(pe){var Z=-t.wrap(pe,-180,180)*Math.PI/180;this.angle!==Z&&(this._unmodified=!1,this.angle=Z,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},eo.pitch.get=function(){return this._pitch/Math.PI*180},eo.pitch.set=function(pe){var Z=t.clamp(pe,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Z&&(this._unmodified=!1,this._pitch=Z,this._calcMatrices())},eo.fov.get=function(){return this._fov/Math.PI*180},eo.fov.set=function(pe){pe=Math.max(.01,Math.min(60,pe)),this._fov!==pe&&(this._unmodified=!1,this._fov=pe/180*Math.PI,this._calcMatrices())},eo.zoom.get=function(){return this._zoom},eo.zoom.set=function(pe){var Z=Math.min(Math.max(pe,this.minZoom),this.maxZoom);this._zoom!==Z&&(this._unmodified=!1,this._zoom=Z,this.scale=this.zoomScale(Z),this.tileZoom=Math.floor(Z),this.zoomFraction=Z-this.tileZoom,this._constrain(),this._calcMatrices())},eo.center.get=function(){return this._center},eo.center.set=function(pe){pe.lat===this._center.lat&&pe.lng===this._center.lng||(this._unmodified=!1,this._center=pe,this._constrain(),this._calcMatrices())},eo.padding.get=function(){return this._edgeInsets.toJSON()},eo.padding.set=function(pe){this._edgeInsets.equals(pe)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,pe,1),this._calcMatrices())},eo.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ni.prototype.isPaddingEqual=function(Z){return this._edgeInsets.equals(Z)},Ni.prototype.interpolatePadding=function(Z,ge,Q){this._unmodified=!1,this._edgeInsets.interpolate(Z,ge,Q),this._constrain(),this._calcMatrices()},Ni.prototype.coveringZoomLevel=function(Z){var ge=(Z.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Z.tileSize));return Math.max(0,ge)},Ni.prototype.getVisibleUnwrappedCoordinates=function(Z){var ge=[new t.UnwrappedTileID(0,Z)];if(this._renderWorldCopies)for(var Q=this.pointCoordinate(new t.Point(0,0)),ye=this.pointCoordinate(new t.Point(this.width,0)),Le=this.pointCoordinate(new t.Point(this.width,this.height)),De=this.pointCoordinate(new t.Point(0,this.height)),Qe=Math.floor(Math.min(Q.x,ye.x,Le.x,De.x)),vt=Math.floor(Math.max(Q.x,ye.x,Le.x,De.x)),Mt=1,Yt=Qe-Mt;Yt<=vt+Mt;Yt++)Yt!==0&&ge.push(new t.UnwrappedTileID(Yt,Z));return ge},Ni.prototype.coveringTiles=function(Z){var ge=this.coveringZoomLevel(Z),Q=ge;if(Z.minzoom!==void 0&&ge<Z.minzoom)return[];Z.maxzoom!==void 0&&ge>Z.maxzoom&&(ge=Z.maxzoom);var ye=t.MercatorCoordinate.fromLngLat(this.center),Le=Math.pow(2,ge),De=[Le*ye.x,Le*ye.y,0],Qe=Po.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ge),vt=Z.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(vt=ge);var Mt=3,Yt=function(ja){return{aabb:new qo([ja*Le,0,0],[(ja+1)*Le,Le,0]),zoom:0,x:0,y:0,wrap:ja,fullyVisible:!1}},ar=[],cr=[],Dr=ge,Xr=Z.reparseOverscaled?Q:ge;if(this._renderWorldCopies)for(var jr=1;jr<=3;jr++)ar.push(Yt(-jr)),ar.push(Yt(jr));for(ar.push(Yt(0));ar.length>0;){var Vr=ar.pop(),on=Vr.x,_n=Vr.y,Bn=Vr.fullyVisible;if(!Bn){var Kn=Vr.aabb.intersects(Qe);if(Kn===0)continue;Bn=Kn===2}var ca=Vr.aabb.distanceX(De),pa=Vr.aabb.distanceY(De),ha=Math.max(Math.abs(ca),Math.abs(pa)),Da=Mt+(1<<Dr-Vr.zoom)-2;if(Vr.zoom===Dr||ha>Da&&Vr.zoom>=vt){cr.push({tileID:new t.OverscaledTileID(Vr.zoom===Dr?Xr:Vr.zoom,Vr.wrap,Vr.zoom,on,_n),distanceSq:t.sqrLen([De[0]-.5-on,De[1]-.5-_n])});continue}for(var Ia=0;Ia<4;Ia++){var Ta=(on<<1)+Ia%2,Ga=(_n<<1)+(Ia>>1);ar.push({aabb:Vr.aabb.quadrant(Ia),zoom:Vr.zoom+1,x:Ta,y:Ga,wrap:Vr.wrap,fullyVisible:Bn})}}return cr.sort(function(ja,li){return ja.distanceSq-li.distanceSq}).map(function(ja){return ja.tileID})},Ni.prototype.resize=function(Z,ge){this.width=Z,this.height=ge,this.pixelsToGLUnits=[2/Z,-2/ge],this._constrain(),this._calcMatrices()},eo.unmodified.get=function(){return this._unmodified},Ni.prototype.zoomScale=function(Z){return Math.pow(2,Z)},Ni.prototype.scaleZoom=function(Z){return Math.log(Z)/Math.LN2},Ni.prototype.project=function(Z){var ge=t.clamp(Z.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(Z.lng)*this.worldSize,t.mercatorYfromLat(ge)*this.worldSize)},Ni.prototype.unproject=function(Z){return new t.MercatorCoordinate(Z.x/this.worldSize,Z.y/this.worldSize).toLngLat()},eo.point.get=function(){return this.project(this.center)},Ni.prototype.setLocationAtPoint=function(Z,ge){var Q=this.pointCoordinate(ge),ye=this.pointCoordinate(this.centerPoint),Le=this.locationCoordinate(Z),De=new t.MercatorCoordinate(Le.x-(Q.x-ye.x),Le.y-(Q.y-ye.y));this.center=this.coordinateLocation(De),this._renderWorldCopies&&(this.center=this.center.wrap())},Ni.prototype.locationPoint=function(Z){return this.coordinatePoint(this.locationCoordinate(Z))},Ni.prototype.pointLocation=function(Z){return this.coordinateLocation(this.pointCoordinate(Z))},Ni.prototype.locationCoordinate=function(Z){return t.MercatorCoordinate.fromLngLat(Z)},Ni.prototype.coordinateLocation=function(Z){return Z.toLngLat()},Ni.prototype.pointCoordinate=function(Z){var ge=0,Q=[Z.x,Z.y,0,1],ye=[Z.x,Z.y,1,1];t.transformMat4(Q,Q,this.pixelMatrixInverse),t.transformMat4(ye,ye,this.pixelMatrixInverse);var Le=Q[3],De=ye[3],Qe=Q[0]/Le,vt=ye[0]/De,Mt=Q[1]/Le,Yt=ye[1]/De,ar=Q[2]/Le,cr=ye[2]/De,Dr=ar===cr?0:(ge-ar)/(cr-ar);return new t.MercatorCoordinate(t.number(Qe,vt,Dr)/this.worldSize,t.number(Mt,Yt,Dr)/this.worldSize)},Ni.prototype.coordinatePoint=function(Z){var ge=[Z.x*this.worldSize,Z.y*this.worldSize,0,1];return t.transformMat4(ge,ge,this.pixelMatrix),new t.Point(ge[0]/ge[3],ge[1]/ge[3])},Ni.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Ni.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},Ni.prototype.setMaxBounds=function(Z){Z?(this.lngRange=[Z.getWest(),Z.getEast()],this.latRange=[Z.getSouth(),Z.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ni.prototype.calculatePosMatrix=function(Z,ge){ge===void 0&&(ge=!1);var Q=Z.key,ye=ge?this._alignedPosMatrixCache:this._posMatrixCache;if(ye[Q])return ye[Q];var Le=Z.canonical,De=this.worldSize/this.zoomScale(Le.z),Qe=Le.x+Math.pow(2,Le.z)*Z.wrap,vt=t.identity(new Float64Array(16));return t.translate(vt,vt,[Qe*De,Le.y*De,0]),t.scale(vt,vt,[De/t.EXTENT,De/t.EXTENT,1]),t.multiply(vt,ge?this.alignedProjMatrix:this.projMatrix,vt),ye[Q]=new Float32Array(vt),ye[Q]},Ni.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ni.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var Z=-90,ge=90,Q=-180,ye=180,Le,De,Qe,vt,Mt=this.size,Yt=this._unmodified;if(this.latRange){var ar=this.latRange;Z=t.mercatorYfromLat(ar[1])*this.worldSize,ge=t.mercatorYfromLat(ar[0])*this.worldSize,Le=ge-Z<Mt.y?Mt.y/(ge-Z):0}if(this.lngRange){var cr=this.lngRange;Q=t.mercatorXfromLng(cr[0])*this.worldSize,ye=t.mercatorXfromLng(cr[1])*this.worldSize,De=ye-Q<Mt.x?Mt.x/(ye-Q):0}var Dr=this.point,Xr=Math.max(De||0,Le||0);if(Xr){this.center=this.unproject(new t.Point(De?(ye+Q)/2:Dr.x,Le?(ge+Z)/2:Dr.y)),this.zoom+=this.scaleZoom(Xr),this._unmodified=Yt,this._constraining=!1;return}if(this.latRange){var jr=Dr.y,Vr=Mt.y/2;jr-Vr<Z&&(vt=Z+Vr),jr+Vr>ge&&(vt=ge-Vr)}if(this.lngRange){var on=Dr.x,_n=Mt.x/2;on-_n<Q&&(Qe=Q+_n),on+_n>ye&&(Qe=ye-_n)}(Qe!==void 0||vt!==void 0)&&(this.center=this.unproject(new t.Point(Qe!==void 0?Qe:Dr.x,vt!==void 0?vt:Dr.y))),this._unmodified=Yt,this._constraining=!1}},Ni.prototype._calcMatrices=function(){if(!!this.height){var Z=this._fov/2,ge=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(Z)*this.height;var Q=Math.PI/2+this._pitch,ye=this._fov*(.5+ge.y/this.height),Le=Math.sin(ye)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-Q-ye,.01,Math.PI-.01)),De=this.point,Qe=De.x,vt=De.y,Mt=Math.cos(Math.PI/2-this._pitch)*Le+this.cameraToCenterDistance,Yt=Mt*1.01,ar=this.height/50,cr=new Float64Array(16);t.perspective(cr,this._fov,this.width/this.height,ar,Yt),cr[8]=-ge.x*2/this.width,cr[9]=ge.y*2/this.height,t.scale(cr,cr,[1,-1,1]),t.translate(cr,cr,[0,0,-this.cameraToCenterDistance]),t.rotateX(cr,cr,this._pitch),t.rotateZ(cr,cr,this.angle),t.translate(cr,cr,[-Qe,-vt,0]),this.mercatorMatrix=t.scale([],cr,[this.worldSize,this.worldSize,this.worldSize]),t.scale(cr,cr,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=cr,this.invProjMatrix=t.invert([],this.projMatrix);var Dr=this.width%2/2,Xr=this.height%2/2,jr=Math.cos(this.angle),Vr=Math.sin(this.angle),on=Qe-Math.round(Qe)+jr*Dr+Vr*Xr,_n=vt-Math.round(vt)+jr*Xr+Vr*Dr,Bn=new Float64Array(cr);if(t.translate(Bn,Bn,[on>.5?on-1:on,_n>.5?_n-1:_n,0]),this.alignedProjMatrix=Bn,cr=t.create(),t.scale(cr,cr,[this.width/2,-this.height/2,1]),t.translate(cr,cr,[1,-1,0]),this.labelPlaneMatrix=cr,cr=t.create(),t.scale(cr,cr,[1,-1,1]),t.translate(cr,cr,[-1,-1,0]),t.scale(cr,cr,[2/this.width,2/this.height,1]),this.glCoordMatrix=cr,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),cr=t.invert(new Float64Array(16),this.pixelMatrix),!cr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=cr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ni.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var Z=this.pointCoordinate(new t.Point(0,0)),ge=[Z.x*this.worldSize,Z.y*this.worldSize,0,1],Q=t.transformMat4(ge,ge,this.pixelMatrix);return Q[3]/this.cameraToCenterDistance},Ni.prototype.getCameraPoint=function(){var Z=this._pitch,ge=Math.tan(Z)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,ge))},Ni.prototype.getCameraQueryGeometry=function(Z){var ge=this.getCameraPoint();if(Z.length===1)return[Z[0],ge];for(var Q=ge.x,ye=ge.y,Le=ge.x,De=ge.y,Qe=0,vt=Z;Qe<vt.length;Qe+=1){var Mt=vt[Qe];Q=Math.min(Q,Mt.x),ye=Math.min(ye,Mt.y),Le=Math.max(Le,Mt.x),De=Math.max(De,Mt.y)}return[new t.Point(Q,ye),new t.Point(Le,ye),new t.Point(Le,De),new t.Point(Q,De),new t.Point(Q,ye)]},Object.defineProperties(Ni.prototype,eo);function Ts(pe,Z){var ge=!1,Q=null,ye=function(){Q=null,ge&&(pe(),Q=setTimeout(ye,Z),ge=!1)};return function(){return ge=!0,Q||ye(),Q}}var es=function(Z){this._hashName=Z&&encodeURIComponent(Z),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ts(this._updateHashUnthrottled.bind(this),30*1e3/100)};es.prototype.addTo=function(Z){return this._map=Z,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},es.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},es.prototype.getHashString=function(Z){var ge=this._map.getCenter(),Q=Math.round(this._map.getZoom()*100)/100,ye=Math.ceil((Q*Math.LN2+Math.log(512/360/.5))/Math.LN10),Le=Math.pow(10,ye),De=Math.round(ge.lng*Le)/Le,Qe=Math.round(ge.lat*Le)/Le,vt=this._map.getBearing(),Mt=this._map.getPitch(),Yt="";if(Z?Yt+="/"+De+"/"+Qe+"/"+Q:Yt+=Q+"/"+Qe+"/"+De,(vt||Mt)&&(Yt+="/"+Math.round(vt*10)/10),Mt&&(Yt+="/"+Math.round(Mt)),this._hashName){var ar=this._hashName,cr=!1,Dr=t.window.location.hash.slice(1).split("&").map(function(Xr){var jr=Xr.split("=")[0];return jr===ar?(cr=!0,jr+"="+Yt):Xr}).filter(function(Xr){return Xr});return cr||Dr.push(ar+"="+Yt),"#"+Dr.join("&")}return"#"+Yt},es.prototype._getCurrentHash=function(){var Z=this,ge=t.window.location.hash.replace("#","");if(this._hashName){var Q;return ge.split("&").map(function(ye){return ye.split("=")}).forEach(function(ye){ye[0]===Z._hashName&&(Q=ye)}),(Q&&Q[1]||"").split("/")}return ge.split("/")},es.prototype._onHashChange=function(){var Z=this._getCurrentHash();if(Z.length>=3&&!Z.some(function(Q){return isNaN(Q)})){var ge=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Z[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Z[2],+Z[1]],zoom:+Z[0],bearing:ge,pitch:+(Z[4]||0)}),!0}return!1},es.prototype._updateHashUnthrottled=function(){var Z=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",Z)}catch{}};var As={linearity:.3,easing:t.bezier(0,0,.3,1)},Ws=t.extend({deceleration:2500,maxSpeed:1400},As),ve=t.extend({deceleration:20,maxSpeed:1400},As),Me=t.extend({deceleration:1e3,maxSpeed:360},As),Re=t.extend({deceleration:1e3,maxSpeed:90},As),Ve=function(Z){this._map=Z,this.clear()};Ve.prototype.clear=function(){this._inertiaBuffer=[]},Ve.prototype.record=function(Z){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:Z})},Ve.prototype._drainInertiaBuffer=function(){for(var Z=this._inertiaBuffer,ge=t.browser.now(),Q=160;Z.length>0&&ge-Z[0].time>Q;)Z.shift()},Ve.prototype._onMoveEnd=function(Z){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ge={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},Q=0,ye=this._inertiaBuffer;Q<ye.length;Q+=1){var Le=ye[Q],De=Le.settings;ge.zoom+=De.zoomDelta||0,ge.bearing+=De.bearingDelta||0,ge.pitch+=De.pitchDelta||0,De.panDelta&&ge.pan._add(De.panDelta),De.around&&(ge.around=De.around),De.pinchAround&&(ge.pinchAround=De.pinchAround)}var Qe=this._inertiaBuffer[this._inertiaBuffer.length-1],vt=Qe.time-this._inertiaBuffer[0].time,Mt={};if(ge.pan.mag()){var Yt=$e(ge.pan.mag(),vt,t.extend({},Ws,Z||{}));Mt.offset=ge.pan.mult(Yt.amount/ge.pan.mag()),Mt.center=this._map.transform.center,Ue(Mt,Yt)}if(ge.zoom){var ar=$e(ge.zoom,vt,ve);Mt.zoom=this._map.transform.zoom+ar.amount,Ue(Mt,ar)}if(ge.bearing){var cr=$e(ge.bearing,vt,Me);Mt.bearing=this._map.transform.bearing+t.clamp(cr.amount,-179,179),Ue(Mt,cr)}if(ge.pitch){var Dr=$e(ge.pitch,vt,Re);Mt.pitch=this._map.transform.pitch+Dr.amount,Ue(Mt,Dr)}if(Mt.zoom||Mt.bearing){var Xr=ge.pinchAround===void 0?ge.around:ge.pinchAround;Mt.around=Xr?this._map.unproject(Xr):this._map.getCenter()}return this.clear(),t.extend(Mt,{noMoveStart:!0})}};function Ue(pe,Z){(!pe.duration||pe.duration<Z.duration)&&(pe.duration=Z.duration,pe.easing=Z.easing)}function $e(pe,Z,ge){var Q=ge.maxSpeed,ye=ge.linearity,Le=ge.deceleration,De=t.clamp(pe*ye/(Z/1e3),-Q,Q),Qe=Math.abs(De)/(Le*ye);return{easing:ge.easing,duration:Qe*1e3,amount:De*(Qe/2)}}var wt=function(pe){function Z(Q,ye,Le,De){De===void 0&&(De={});var Qe=a.mousePos(ye.getCanvasContainer(),Le),vt=ye.unproject(Qe);pe.call(this,Q,t.extend({point:Qe,lngLat:vt,originalEvent:Le},De)),this._defaultPrevented=!1,this.target=ye}pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z;var ge={defaultPrevented:{configurable:!0}};return Z.prototype.preventDefault=function(){this._defaultPrevented=!0},ge.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Z.prototype,ge),Z}(t.Event),gt=function(pe){function Z(Q,ye,Le){var De=Q==="touchend"?Le.changedTouches:Le.touches,Qe=a.touchPos(ye.getCanvasContainer(),De),vt=Qe.map(function(ar){return ye.unproject(ar)}),Mt=Qe.reduce(function(ar,cr,Dr,Xr){return ar.add(cr.div(Xr.length))},new t.Point(0,0)),Yt=ye.unproject(Mt);pe.call(this,Q,{points:Qe,point:Mt,lngLats:vt,lngLat:Yt,originalEvent:Le}),this._defaultPrevented=!1}pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z;var ge={defaultPrevented:{configurable:!0}};return Z.prototype.preventDefault=function(){this._defaultPrevented=!0},ge.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Z.prototype,ge),Z}(t.Event),Dt=function(pe){function Z(Q,ye,Le){pe.call(this,Q,{originalEvent:Le}),this._defaultPrevented=!1}pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z;var ge={defaultPrevented:{configurable:!0}};return Z.prototype.preventDefault=function(){this._defaultPrevented=!0},ge.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Z.prototype,ge),Z}(t.Event),Wt=function(Z,ge){this._map=Z,this._clickTolerance=ge.clickTolerance};Wt.prototype.reset=function(){delete this._mousedownPos},Wt.prototype.wheel=function(Z){return this._firePreventable(new Dt(Z.type,this._map,Z))},Wt.prototype.mousedown=function(Z,ge){return this._mousedownPos=ge,this._firePreventable(new wt(Z.type,this._map,Z))},Wt.prototype.mouseup=function(Z){this._map.fire(new wt(Z.type,this._map,Z))},Wt.prototype.click=function(Z,ge){this._mousedownPos&&this._mousedownPos.dist(ge)>=this._clickTolerance||this._map.fire(new wt(Z.type,this._map,Z))},Wt.prototype.dblclick=function(Z){return this._firePreventable(new wt(Z.type,this._map,Z))},Wt.prototype.mouseover=function(Z){this._map.fire(new wt(Z.type,this._map,Z))},Wt.prototype.mouseout=function(Z){this._map.fire(new wt(Z.type,this._map,Z))},Wt.prototype.touchstart=function(Z){return this._firePreventable(new gt(Z.type,this._map,Z))},Wt.prototype.touchmove=function(Z){this._map.fire(new gt(Z.type,this._map,Z))},Wt.prototype.touchend=function(Z){this._map.fire(new gt(Z.type,this._map,Z))},Wt.prototype.touchcancel=function(Z){this._map.fire(new gt(Z.type,this._map,Z))},Wt.prototype._firePreventable=function(Z){if(this._map.fire(Z),Z.defaultPrevented)return{}},Wt.prototype.isEnabled=function(){return!0},Wt.prototype.isActive=function(){return!1},Wt.prototype.enable=function(){},Wt.prototype.disable=function(){};var Jt=function(Z){this._map=Z};Jt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Jt.prototype.mousemove=function(Z){this._map.fire(new wt(Z.type,this._map,Z))},Jt.prototype.mousedown=function(){this._delayContextMenu=!0},Jt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Jt.prototype.contextmenu=function(Z){this._delayContextMenu?this._contextMenuEvent=Z:this._map.fire(new wt(Z.type,this._map,Z)),this._map.listens("contextmenu")&&Z.preventDefault()},Jt.prototype.isEnabled=function(){return!0},Jt.prototype.isActive=function(){return!1},Jt.prototype.enable=function(){},Jt.prototype.disable=function(){};var qt=function(Z,ge){this._map=Z,this._el=Z.getCanvasContainer(),this._container=Z.getContainer(),this._clickTolerance=ge.clickTolerance||1};qt.prototype.isEnabled=function(){return!!this._enabled},qt.prototype.isActive=function(){return!!this._active},qt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},qt.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},qt.prototype.mousedown=function(Z,ge){!this.isEnabled()||!(Z.shiftKey&&Z.button===0)||(a.disableDrag(),this._startPos=this._lastPos=ge,this._active=!0)},qt.prototype.mousemoveWindow=function(Z,ge){if(!!this._active){var Q=ge;if(!(this._lastPos.equals(Q)||!this._box&&Q.dist(this._startPos)<this._clickTolerance)){var ye=this._startPos;this._lastPos=Q,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",Z));var Le=Math.min(ye.x,Q.x),De=Math.max(ye.x,Q.x),Qe=Math.min(ye.y,Q.y),vt=Math.max(ye.y,Q.y);a.setTransform(this._box,"translate("+Le+"px,"+Qe+"px)"),this._box.style.width=De-Le+"px",this._box.style.height=vt-Qe+"px"}}},qt.prototype.mouseupWindow=function(Z,ge){var Q=this;if(!!this._active&&Z.button===0){var ye=this._startPos,Le=ge;if(this.reset(),a.suppressClick(),ye.x===Le.x&&ye.y===Le.y)this._fireEvent("boxzoomcancel",Z);else return this._map.fire(new t.Event("boxzoomend",{originalEvent:Z})),{cameraAnimation:function(De){return De.fitScreenCoordinates(ye,Le,Q._map.getBearing(),{linear:!0})}}}},qt.prototype.keydown=function(Z){!this._active||Z.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",Z))},qt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos},qt.prototype._fireEvent=function(Z,ge){return this._map.fire(new t.Event(Z,{originalEvent:ge}))};function Er(pe,Z){for(var ge={},Q=0;Q<pe.length;Q++)ge[pe[Q].identifier]=Z[Q];return ge}function an(pe){for(var Z=new t.Point(0,0),ge=0,Q=pe;ge<Q.length;ge+=1){var ye=Q[ge];Z._add(ye)}return Z.div(pe.length)}var bn=500,Rr=500,Zr=30,$r=function(Z){this.reset(),this.numTouches=Z.numTouches};$r.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},$r.prototype.touchstart=function(Z,ge,Q){(this.centroid||Q.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=Z.timeStamp),Q.length===this.numTouches&&(this.centroid=an(ge),this.touches=Er(Q,ge)))},$r.prototype.touchmove=function(Z,ge,Q){if(!(this.aborted||!this.centroid)){var ye=Er(Q,ge);for(var Le in this.touches){var De=this.touches[Le],Qe=ye[Le];(!Qe||Qe.dist(De)>Zr)&&(this.aborted=!0)}}},$r.prototype.touchend=function(Z,ge,Q){if((!this.centroid||Z.timeStamp-this.startTime>Rr)&&(this.aborted=!0),Q.length===0){var ye=!this.aborted&&this.centroid;if(this.reset(),ye)return ye}};var gn=function(Z){this.singleTap=new $r(Z),this.numTaps=Z.numTaps,this.reset()};gn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},gn.prototype.touchstart=function(Z,ge,Q){this.singleTap.touchstart(Z,ge,Q)},gn.prototype.touchmove=function(Z,ge,Q){this.singleTap.touchmove(Z,ge,Q)},gn.prototype.touchend=function(Z,ge,Q){var ye=this.singleTap.touchend(Z,ge,Q);if(ye){var Le=Z.timeStamp-this.lastTime<bn,De=!this.lastTap||this.lastTap.dist(ye)<Zr;if((!Le||!De)&&this.reset(),this.count++,this.lastTime=Z.timeStamp,this.lastTap=ye,this.count===this.numTaps)return this.reset(),ye}};var yn=function(){this._zoomIn=new gn({numTouches:1,numTaps:2}),this._zoomOut=new gn({numTouches:2,numTaps:1}),this.reset()};yn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},yn.prototype.touchstart=function(Z,ge,Q){this._zoomIn.touchstart(Z,ge,Q),this._zoomOut.touchstart(Z,ge,Q)},yn.prototype.touchmove=function(Z,ge,Q){this._zoomIn.touchmove(Z,ge,Q),this._zoomOut.touchmove(Z,ge,Q)},yn.prototype.touchend=function(Z,ge,Q){var ye=this,Le=this._zoomIn.touchend(Z,ge,Q),De=this._zoomOut.touchend(Z,ge,Q);if(Le)return this._active=!0,Z.preventDefault(),setTimeout(function(){return ye.reset()},0),{cameraAnimation:function(Qe){return Qe.easeTo({duration:300,zoom:Qe.getZoom()+1,around:Qe.unproject(Le)},{originalEvent:Z})}};if(De)return this._active=!0,Z.preventDefault(),setTimeout(function(){return ye.reset()},0),{cameraAnimation:function(Qe){return Qe.easeTo({duration:300,zoom:Qe.getZoom()-1,around:Qe.unproject(De)},{originalEvent:Z})}}},yn.prototype.touchcancel=function(){this.reset()},yn.prototype.enable=function(){this._enabled=!0},yn.prototype.disable=function(){this._enabled=!1,this.reset()},yn.prototype.isEnabled=function(){return this._enabled},yn.prototype.isActive=function(){return this._active};var tn=0,na=2,ya=function(Z){this.reset(),this._clickTolerance=Z.clickTolerance||1};ya.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ya.prototype._correctButton=function(Z,ge){return!1},ya.prototype._move=function(Z,ge){return{}},ya.prototype.mousedown=function(Z,ge){if(!this._lastPoint){var Q=a.mouseButton(Z);!this._correctButton(Z,Q)||(this._lastPoint=ge,this._eventButton=Q)}},ya.prototype.mousemoveWindow=function(Z,ge){var Q=this._lastPoint;if(!!Q&&(Z.preventDefault(),!(!this._moved&&ge.dist(Q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ge,this._move(Q,ge)},ya.prototype.mouseupWindow=function(Z){var ge=a.mouseButton(Z);ge===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())},ya.prototype.enable=function(){this._enabled=!0},ya.prototype.disable=function(){this._enabled=!1,this.reset()},ya.prototype.isEnabled=function(){return this._enabled},ya.prototype.isActive=function(){return this._active};var Ha=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.mousedown=function(Q,ye){pe.prototype.mousedown.call(this,Q,ye),this._lastPoint&&(this._active=!0)},Z.prototype._correctButton=function(Q,ye){return ye===tn&&!Q.ctrlKey},Z.prototype._move=function(Q,ye){return{around:ye,panDelta:ye.sub(Q)}},Z}(ya),_a=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype._correctButton=function(Q,ye){return ye===tn&&Q.ctrlKey||ye===na},Z.prototype._move=function(Q,ye){var Le=.8,De=(ye.x-Q.x)*Le;if(De)return this._active=!0,{bearingDelta:De}},Z.prototype.contextmenu=function(Q){Q.preventDefault()},Z}(ya),Xa=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype._correctButton=function(Q,ye){return ye===tn&&Q.ctrlKey||ye===na},Z.prototype._move=function(Q,ye){var Le=-.5,De=(ye.y-Q.y)*Le;if(De)return this._active=!0,{pitchDelta:De}},Z.prototype.contextmenu=function(Q){Q.preventDefault()},Z}(ya),Sa=function(Z){this._minTouches=1,this._clickTolerance=Z.clickTolerance||1,this.reset()};Sa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Sa.prototype.touchstart=function(Z,ge,Q){return this._calculateTransform(Z,ge,Q)},Sa.prototype.touchmove=function(Z,ge,Q){if(!!this._active)return Z.preventDefault(),this._calculateTransform(Z,ge,Q)},Sa.prototype.touchend=function(Z,ge,Q){this._calculateTransform(Z,ge,Q),this._active&&Q.length<this._minTouches&&this.reset()},Sa.prototype.touchcancel=function(){this.reset()},Sa.prototype._calculateTransform=function(Z,ge,Q){Q.length>0&&(this._active=!0);var ye=Er(Q,ge),Le=new t.Point(0,0),De=new t.Point(0,0),Qe=0;for(var vt in ye){var Mt=ye[vt],Yt=this._touches[vt];Yt&&(Le._add(Mt),De._add(Mt.sub(Yt)),Qe++,ye[vt]=Mt)}if(this._touches=ye,!(Qe<this._minTouches||!De.mag())){var ar=De.div(Qe);if(this._sum._add(ar),!(this._sum.mag()<this._clickTolerance)){var cr=Le.div(Qe);return{around:cr,panDelta:ar}}}},Sa.prototype.enable=function(){this._enabled=!0},Sa.prototype.disable=function(){this._enabled=!1,this.reset()},Sa.prototype.isEnabled=function(){return this._enabled},Sa.prototype.isActive=function(){return this._active};var ma=function(){this.reset()};ma.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ma.prototype._start=function(Z){},ma.prototype._move=function(Z,ge,Q){return{}},ma.prototype.touchstart=function(Z,ge,Q){this._firstTwoTouches||Q.length<2||(this._firstTwoTouches=[Q[0].identifier,Q[1].identifier],this._start([ge[0],ge[1]]))},ma.prototype.touchmove=function(Z,ge,Q){if(!!this._firstTwoTouches){Z.preventDefault();var ye=this._firstTwoTouches,Le=ye[0],De=ye[1],Qe=Ja(Q,ge,Le),vt=Ja(Q,ge,De);if(!(!Qe||!vt)){var Mt=this._aroundCenter?null:Qe.add(vt).div(2);return this._move([Qe,vt],Mt,Z)}}},ma.prototype.touchend=function(Z,ge,Q){if(!!this._firstTwoTouches){var ye=this._firstTwoTouches,Le=ye[0],De=ye[1],Qe=Ja(Q,ge,Le),vt=Ja(Q,ge,De);Qe&&vt||(this._active&&a.suppressClick(),this.reset())}},ma.prototype.touchcancel=function(){this.reset()},ma.prototype.enable=function(Z){this._enabled=!0,this._aroundCenter=!!Z&&Z.around==="center"},ma.prototype.disable=function(){this._enabled=!1,this.reset()},ma.prototype.isEnabled=function(){return this._enabled},ma.prototype.isActive=function(){return this._active};function Ja(pe,Z,ge){for(var Q=0;Q<pe.length;Q++)if(pe[Q].identifier===ge)return Z[Q]}var gi=.1;function Ii(pe,Z){return Math.log(pe/Z)/Math.LN2}var Xo=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.reset=function(){pe.prototype.reset.call(this),delete this._distance,delete this._startDistance},Z.prototype._start=function(Q){this._startDistance=this._distance=Q[0].dist(Q[1])},Z.prototype._move=function(Q,ye){var Le=this._distance;if(this._distance=Q[0].dist(Q[1]),!(!this._active&&Math.abs(Ii(this._distance,this._startDistance))<gi))return this._active=!0,{zoomDelta:Ii(this._distance,Le),pinchAround:ye}},Z}(ma),go=25;function Ra(pe,Z){return pe.angleWith(Z)*180/Math.PI}var fi=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.reset=function(){pe.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Z.prototype._start=function(Q){this._startVector=this._vector=Q[0].sub(Q[1]),this._minDiameter=Q[0].dist(Q[1])},Z.prototype._move=function(Q,ye){var Le=this._vector;if(this._vector=Q[0].sub(Q[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ra(this._vector,Le),pinchAround:ye}},Z.prototype._isBelowThreshold=function(Q){this._minDiameter=Math.min(this._minDiameter,Q.mag());var ye=Math.PI*this._minDiameter,Le=go/ye*360,De=Ra(Q,this._startVector);return Math.abs(De)<Le},Z}(ma);function pi(pe){return Math.abs(pe.y)>Math.abs(pe.x)}var Gi=100,Si=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.reset=function(){pe.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Z.prototype._start=function(Q){this._lastPoints=Q,pi(Q[0].sub(Q[1]))&&(this._valid=!1)},Z.prototype._move=function(Q,ye,Le){var De=Q[0].sub(this._lastPoints[0]),Qe=Q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(De,Qe,Le.timeStamp),!!this._valid){this._lastPoints=Q,this._active=!0;var vt=(De.y+Qe.y)/2,Mt=-.5;return{pitchDelta:vt*Mt}}},Z.prototype.gestureBeginsVertically=function(Q,ye,Le){if(this._valid!==void 0)return this._valid;var De=2,Qe=Q.mag()>=De,vt=ye.mag()>=De;if(!(!Qe&&!vt)){if(!Qe||!vt)return this._firstMove===void 0&&(this._firstMove=Le),Le-this._firstMove<Gi?void 0:!1;var Mt=Q.y>0==ye.y>0;return pi(Q)&&pi(ye)&&Mt}},Z}(ma),Go={panStep:100,bearingStep:15,pitchStep:10},Do=function(){var Z=Go;this._panStep=Z.panStep,this._bearingStep=Z.bearingStep,this._pitchStep=Z.pitchStep};Do.prototype.reset=function(){this._active=!1},Do.prototype.keydown=function(Z){var ge=this;if(!(Z.altKey||Z.ctrlKey||Z.metaKey)){var Q=0,ye=0,Le=0,De=0,Qe=0;switch(Z.keyCode){case 61:case 107:case 171:case 187:Q=1;break;case 189:case 109:case 173:Q=-1;break;case 37:Z.shiftKey?ye=-1:(Z.preventDefault(),De=-1);break;case 39:Z.shiftKey?ye=1:(Z.preventDefault(),De=1);break;case 38:Z.shiftKey?Le=1:(Z.preventDefault(),Qe=-1);break;case 40:Z.shiftKey?Le=-1:(Z.preventDefault(),Qe=1);break;default:return}return{cameraAnimation:function(vt){var Mt=vt.getZoom();vt.easeTo({duration:300,easeId:"keyboardHandler",easing:ao,zoom:Q?Math.round(Mt)+Q*(Z.shiftKey?2:1):Mt,bearing:vt.getBearing()+ye*ge._bearingStep,pitch:vt.getPitch()+Le*ge._pitchStep,offset:[-De*ge._panStep,-Qe*ge._panStep],center:vt.getCenter()},{originalEvent:Z})}}}},Do.prototype.enable=function(){this._enabled=!0},Do.prototype.disable=function(){this._enabled=!1,this.reset()},Do.prototype.isEnabled=function(){return this._enabled},Do.prototype.isActive=function(){return this._active};function ao(pe){return pe*(2-pe)}var ts=4.000244140625,ms=1/100,Is=1/450,xo=2,bo=function(Z,ge){this._map=Z,this._el=Z.getCanvasContainer(),this._handler=ge,this._delta=0,this._defaultZoomRate=ms,this._wheelZoomRate=Is,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};bo.prototype.setZoomRate=function(Z){this._defaultZoomRate=Z},bo.prototype.setWheelZoomRate=function(Z){this._wheelZoomRate=Z},bo.prototype.isEnabled=function(){return!!this._enabled},bo.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},bo.prototype.isZooming=function(){return!!this._zooming},bo.prototype.enable=function(Z){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Z&&Z.around==="center")},bo.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},bo.prototype.wheel=function(Z){if(!!this.isEnabled()){var ge=Z.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?Z.deltaY*40:Z.deltaY,Q=t.browser.now(),ye=Q-(this._lastWheelEventTime||0);this._lastWheelEventTime=Q,ge!==0&&ge%ts==0?this._type="wheel":ge!==0&&Math.abs(ge)<4?this._type="trackpad":ye>400?(this._type=null,this._lastValue=ge,this._timeout=setTimeout(this._onTimeout,40,Z)):this._type||(this._type=Math.abs(ye*ge)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ge+=this._lastValue)),Z.shiftKey&&ge&&(ge=ge/4),this._type&&(this._lastWheelEvent=Z,this._delta-=ge,this._active||this._start(Z)),Z.preventDefault()}},bo.prototype._onTimeout=function(Z){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(Z)},bo.prototype._start=function(Z){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ge=a.mousePos(this._el,Z);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ge)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},bo.prototype.renderFrame=function(){return this._onScrollFrame()},bo.prototype._onScrollFrame=function(){var Z=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var ge=this._map.transform;if(this._delta!==0){var Q=this._type==="wheel"&&Math.abs(this._delta)>ts?this._wheelZoomRate:this._defaultZoomRate,ye=xo/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&ye!==0&&(ye=1/ye);var Le=typeof this._targetZoom=="number"?ge.zoomScale(this._targetZoom):ge.scale;this._targetZoom=Math.min(ge.maxZoom,Math.max(ge.minZoom,ge.scaleZoom(Le*ye))),this._type==="wheel"&&(this._startZoom=ge.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var De=typeof this._targetZoom=="number"?this._targetZoom:ge.zoom,Qe=this._startZoom,vt=this._easing,Mt=!1,Yt;if(this._type==="wheel"&&Qe&&vt){var ar=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),cr=vt(ar);Yt=t.number(Qe,De,cr),ar<1?this._frameId||(this._frameId=!0):Mt=!0}else Yt=De,Mt=!0;return this._active=!0,Mt&&(this._active=!1,this._finishTimeout=setTimeout(function(){Z._zooming=!1,Z._handler._triggerRenderFrame(),delete Z._targetZoom,delete Z._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Mt,zoomDelta:Yt-ge.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},bo.prototype._smoothOutEasing=function(Z){var ge=t.ease;if(this._prevEase){var Q=this._prevEase,ye=(t.browser.now()-Q.start)/Q.duration,Le=Q.easing(ye+.01)-Q.easing(ye),De=.27/Math.sqrt(Le*Le+1e-4)*.01,Qe=Math.sqrt(.27*.27-De*De);ge=t.bezier(De,Qe,.25,1)}return this._prevEase={start:t.browser.now(),duration:Z,easing:ge},ge},bo.prototype.reset=function(){this._active=!1};var ei=function(Z,ge){this._clickZoom=Z,this._tapZoom=ge};ei.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ei.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ei.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ei.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var vi=function(){this.reset()};vi.prototype.reset=function(){this._active=!1},vi.prototype.dblclick=function(Z,ge){return Z.preventDefault(),{cameraAnimation:function(Q){Q.easeTo({duration:300,zoom:Q.getZoom()+(Z.shiftKey?-1:1),around:Q.unproject(ge)},{originalEvent:Z})}}},vi.prototype.enable=function(){this._enabled=!0},vi.prototype.disable=function(){this._enabled=!1,this.reset()},vi.prototype.isEnabled=function(){return this._enabled},vi.prototype.isActive=function(){return this._active};var rs=function(){this._tap=new gn({numTouches:1,numTaps:1}),this.reset()};rs.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},rs.prototype.touchstart=function(Z,ge,Q){this._swipePoint||(this._tapTime&&Z.timeStamp-this._tapTime>bn&&this.reset(),this._tapTime?Q.length>0&&(this._swipePoint=ge[0],this._swipeTouch=Q[0].identifier):this._tap.touchstart(Z,ge,Q))},rs.prototype.touchmove=function(Z,ge,Q){if(!this._tapTime)this._tap.touchmove(Z,ge,Q);else if(this._swipePoint){if(Q[0].identifier!==this._swipeTouch)return;var ye=ge[0],Le=ye.y-this._swipePoint.y;return this._swipePoint=ye,Z.preventDefault(),this._active=!0,{zoomDelta:Le/128}}},rs.prototype.touchend=function(Z,ge,Q){if(this._tapTime)this._swipePoint&&Q.length===0&&this.reset();else{var ye=this._tap.touchend(Z,ge,Q);ye&&(this._tapTime=Z.timeStamp)}},rs.prototype.touchcancel=function(){this.reset()},rs.prototype.enable=function(){this._enabled=!0},rs.prototype.disable=function(){this._enabled=!1,this.reset()},rs.prototype.isEnabled=function(){return this._enabled},rs.prototype.isActive=function(){return this._active};var Io=function(Z,ge,Q){this._el=Z,this._mousePan=ge,this._touchPan=Q};Io.prototype.enable=function(Z){this._inertiaOptions=Z||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Io.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Io.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Io.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Wo=function(Z,ge,Q){this._pitchWithRotate=Z.pitchWithRotate,this._mouseRotate=ge,this._mousePitch=Q};Wo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Wo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Wo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Wo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var zo=function(Z,ge,Q,ye){this._el=Z,this._touchZoom=ge,this._touchRotate=Q,this._tapDragZoom=ye,this._rotationDisabled=!1,this._enabled=!0};zo.prototype.enable=function(Z){this._touchZoom.enable(Z),this._rotationDisabled||this._touchRotate.enable(Z),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},zo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},zo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},zo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},zo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},zo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ns=function(pe){return pe.zoom||pe.drag||pe.pitch||pe.rotate},il=function(pe){function Z(){pe.apply(this,arguments)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z}(t.Event);function Hu(pe){return pe.panDelta&&pe.panDelta.mag()||pe.zoomDelta||pe.bearingDelta||pe.pitchDelta}var So=function(Z,ge){this._map=Z,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ve(Z),this._bearingSnap=ge.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ge),t.bindAll(["handleEvent","handleWindowEvent"],this);var Q=this._el;this._listeners=[[Q,"touchstart",{passive:!1}],[Q,"touchmove",{passive:!1}],[Q,"touchend",void 0],[Q,"touchcancel",void 0],[Q,"mousedown",void 0],[Q,"mousemove",void 0],[Q,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[Q,"mouseover",void 0],[Q,"mouseout",void 0],[Q,"dblclick",void 0],[Q,"click",void 0],[Q,"keydown",{capture:!1}],[Q,"keyup",void 0],[Q,"wheel",{passive:!1}],[Q,"contextmenu",void 0],[t.window,"blur",void 0]];for(var ye=0,Le=this._listeners;ye<Le.length;ye+=1){var De=Le[ye],Qe=De[0],vt=De[1],Mt=De[2];a.addEventListener(Qe,vt,Qe===t.window.document?this.handleWindowEvent:this.handleEvent,Mt)}};So.prototype.destroy=function(){for(var Z=0,ge=this._listeners;Z<ge.length;Z+=1){var Q=ge[Z],ye=Q[0],Le=Q[1],De=Q[2];a.removeEventListener(ye,Le,ye===t.window.document?this.handleWindowEvent:this.handleEvent,De)}},So.prototype._addDefaultHandlers=function(Z){var ge=this._map,Q=ge.getCanvasContainer();this._add("mapEvent",new Wt(ge,Z));var ye=ge.boxZoom=new qt(ge,Z);this._add("boxZoom",ye);var Le=new yn,De=new vi;ge.doubleClickZoom=new ei(De,Le),this._add("tapZoom",Le),this._add("clickZoom",De);var Qe=new rs;this._add("tapDragZoom",Qe);var vt=ge.touchPitch=new Si;this._add("touchPitch",vt);var Mt=new _a(Z),Yt=new Xa(Z);ge.dragRotate=new Wo(Z,Mt,Yt),this._add("mouseRotate",Mt,["mousePitch"]),this._add("mousePitch",Yt,["mouseRotate"]);var ar=new Ha(Z),cr=new Sa(Z);ge.dragPan=new Io(Q,ar,cr),this._add("mousePan",ar),this._add("touchPan",cr,["touchZoom","touchRotate"]);var Dr=new fi,Xr=new Xo;ge.touchZoomRotate=new zo(Q,Xr,Dr,Qe),this._add("touchRotate",Dr,["touchPan","touchZoom"]),this._add("touchZoom",Xr,["touchPan","touchRotate"]);var jr=ge.scrollZoom=new bo(ge,this);this._add("scrollZoom",jr,["mousePan"]);var Vr=ge.keyboard=new Do;this._add("keyboard",Vr),this._add("blockableMapEvent",new Jt(ge));for(var on=0,_n=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];on<_n.length;on+=1){var Bn=_n[on];Z.interactive&&Z[Bn]&&ge[Bn].enable(Z[Bn])}},So.prototype._add=function(Z,ge,Q){this._handlers.push({handlerName:Z,handler:ge,allowed:Q}),this._handlersById[Z]=ge},So.prototype.stop=function(){if(!this._updatingCamera){for(var Z=0,ge=this._handlers;Z<ge.length;Z+=1){var Q=ge[Z],ye=Q.handler;ye.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},So.prototype.isActive=function(){for(var Z=0,ge=this._handlers;Z<ge.length;Z+=1){var Q=ge[Z],ye=Q.handler;if(ye.isActive())return!0}return!1},So.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},So.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},So.prototype.isMoving=function(){return Boolean(ns(this._eventsInProgress))||this.isZooming()},So.prototype._blockedByActive=function(Z,ge,Q){for(var ye in Z)if(ye!==Q&&(!ge||ge.indexOf(ye)<0))return!0;return!1},So.prototype.handleWindowEvent=function(Z){this.handleEvent(Z,Z.type+"Window")},So.prototype._getMapTouches=function(Z){for(var ge=[],Q=0,ye=Z;Q<ye.length;Q+=1){var Le=ye[Q],De=Le.target;this._el.contains(De)&&ge.push(Le)}return ge},So.prototype.handleEvent=function(Z,ge){if(Z.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var Q=Z.type==="renderFrame"?void 0:Z,ye={needsRenderFrame:!1},Le={},De={},Qe=Z.touches?this._getMapTouches(Z.touches):void 0,vt=Qe?a.touchPos(this._el,Qe):a.mousePos(this._el,Z),Mt=0,Yt=this._handlers;Mt<Yt.length;Mt+=1){var ar=Yt[Mt],cr=ar.handlerName,Dr=ar.handler,Xr=ar.allowed;if(!!Dr.isEnabled()){var jr=void 0;this._blockedByActive(De,Xr,cr)?Dr.reset():Dr[ge||Z.type]&&(jr=Dr[ge||Z.type](Z,vt,Qe),this.mergeHandlerResult(ye,Le,jr,cr,Q),jr&&jr.needsRenderFrame&&this._triggerRenderFrame()),(jr||Dr.isActive())&&(De[cr]=Dr)}}var Vr={};for(var on in this._previousActiveHandlers)De[on]||(Vr[on]=Q);this._previousActiveHandlers=De,(Object.keys(Vr).length||Hu(ye))&&(this._changes.push([ye,Le,Vr]),this._triggerRenderFrame()),(Object.keys(De).length||Hu(ye))&&this._map._stop(!0),this._updatingCamera=!1;var _n=ye.cameraAnimation;_n&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],_n(this._map))},So.prototype.mergeHandlerResult=function(Z,ge,Q,ye,Le){if(!!Q){t.extend(Z,Q);var De={handlerName:ye,originalEvent:Q.originalEvent||Le};Q.zoomDelta!==void 0&&(ge.zoom=De),Q.panDelta!==void 0&&(ge.drag=De),Q.pitchDelta!==void 0&&(ge.pitch=De),Q.bearingDelta!==void 0&&(ge.rotate=De)}},So.prototype._applyChanges=function(){for(var Z={},ge={},Q={},ye=0,Le=this._changes;ye<Le.length;ye+=1){var De=Le[ye],Qe=De[0],vt=De[1],Mt=De[2];Qe.panDelta&&(Z.panDelta=(Z.panDelta||new t.Point(0,0))._add(Qe.panDelta)),Qe.zoomDelta&&(Z.zoomDelta=(Z.zoomDelta||0)+Qe.zoomDelta),Qe.bearingDelta&&(Z.bearingDelta=(Z.bearingDelta||0)+Qe.bearingDelta),Qe.pitchDelta&&(Z.pitchDelta=(Z.pitchDelta||0)+Qe.pitchDelta),Qe.around!==void 0&&(Z.around=Qe.around),Qe.pinchAround!==void 0&&(Z.pinchAround=Qe.pinchAround),Qe.noInertia&&(Z.noInertia=Qe.noInertia),t.extend(ge,vt),t.extend(Q,Mt)}this._updateMapTransform(Z,ge,Q),this._changes=[]},So.prototype._updateMapTransform=function(Z,ge,Q){var ye=this._map,Le=ye.transform;if(!Hu(Z))return this._fireEvents(ge,Q);var De=Z.panDelta,Qe=Z.zoomDelta,vt=Z.bearingDelta,Mt=Z.pitchDelta,Yt=Z.around,ar=Z.pinchAround;ar!==void 0&&(Yt=ar),ye._stop(!0),Yt=Yt||ye.transform.centerPoint;var cr=Le.pointLocation(De?Yt.sub(De):Yt);vt&&(Le.bearing+=vt),Mt&&(Le.pitch+=Mt),Qe&&(Le.zoom+=Qe),Le.setLocationAtPoint(cr,Yt),this._map._update(),Z.noInertia||this._inertia.record(Z),this._fireEvents(ge,Q)},So.prototype._fireEvents=function(Z,ge){var Q=this,ye=ns(this._eventsInProgress),Le=ns(Z),De={};for(var Qe in Z){var vt=Z[Qe],Mt=vt.originalEvent;this._eventsInProgress[Qe]||(De[Qe+"start"]=Mt),this._eventsInProgress[Qe]=Z[Qe]}!ye&&Le&&this._fireEvent("movestart",Le.originalEvent);for(var Yt in De)this._fireEvent(Yt,De[Yt]);Z.rotate&&(this._bearingChanged=!0),Le&&this._fireEvent("move",Le.originalEvent);for(var ar in Z){var cr=Z[ar],Dr=cr.originalEvent;this._fireEvent(ar,Dr)}var Xr={},jr;for(var Vr in this._eventsInProgress){var on=this._eventsInProgress[Vr],_n=on.handlerName,Bn=on.originalEvent;this._handlersById[_n].isActive()||(delete this._eventsInProgress[Vr],jr=ge[_n]||Bn,Xr[Vr+"end"]=jr)}for(var Kn in Xr)this._fireEvent(Kn,Xr[Kn]);var ca=ns(this._eventsInProgress);if((ye||Le)&&!ca){this._updatingCamera=!0;var pa=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ha=function(Da){return Da!==0&&-Q._bearingSnap<Da&&Da<Q._bearingSnap};pa?(ha(pa.bearing||this._map.getBearing())&&(pa.bearing=0),this._map.easeTo(pa,{originalEvent:jr})):(this._map.fire(new t.Event("moveend",{originalEvent:jr})),ha(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},So.prototype._fireEvent=function(Z,ge){this._map.fire(new t.Event(Z,ge?{originalEvent:ge}:{}))},So.prototype._triggerRenderFrame=function(){var Z=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(ge){delete Z._frameId,Z.handleEvent(new il("renderFrame",{timeStamp:ge})),Z._applyChanges()}))};var Hc=function(pe){function Z(ge,Q){pe.call(this),this._moving=!1,this._zooming=!1,this.transform=ge,this._bearingSnap=Q.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},Z.prototype.setCenter=function(Q,ye){return this.jumpTo({center:Q},ye)},Z.prototype.panBy=function(Q,ye,Le){return Q=t.Point.convert(Q).mult(-1),this.panTo(this.transform.center,t.extend({offset:Q},ye),Le)},Z.prototype.panTo=function(Q,ye,Le){return this.easeTo(t.extend({center:Q},ye),Le)},Z.prototype.getZoom=function(){return this.transform.zoom},Z.prototype.setZoom=function(Q,ye){return this.jumpTo({zoom:Q},ye),this},Z.prototype.zoomTo=function(Q,ye,Le){return this.easeTo(t.extend({zoom:Q},ye),Le)},Z.prototype.zoomIn=function(Q,ye){return this.zoomTo(this.getZoom()+1,Q,ye),this},Z.prototype.zoomOut=function(Q,ye){return this.zoomTo(this.getZoom()-1,Q,ye),this},Z.prototype.getBearing=function(){return this.transform.bearing},Z.prototype.setBearing=function(Q,ye){return this.jumpTo({bearing:Q},ye),this},Z.prototype.getPadding=function(){return this.transform.padding},Z.prototype.setPadding=function(Q,ye){return this.jumpTo({padding:Q},ye),this},Z.prototype.rotateTo=function(Q,ye,Le){return this.easeTo(t.extend({bearing:Q},ye),Le)},Z.prototype.resetNorth=function(Q,ye){return this.rotateTo(0,t.extend({duration:1e3},Q),ye),this},Z.prototype.resetNorthPitch=function(Q,ye){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},Q),ye),this},Z.prototype.snapToNorth=function(Q,ye){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(Q,ye):this},Z.prototype.getPitch=function(){return this.transform.pitch},Z.prototype.setPitch=function(Q,ye){return this.jumpTo({pitch:Q},ye),this},Z.prototype.cameraForBounds=function(Q,ye){return Q=t.LngLatBounds.convert(Q),this._cameraForBoxAndBearing(Q.getNorthWest(),Q.getSouthEast(),0,ye)},Z.prototype._cameraForBoxAndBearing=function(Q,ye,Le,De){var Qe={top:0,bottom:0,right:0,left:0};if(De=t.extend({padding:Qe,offset:[0,0],maxZoom:this.transform.maxZoom},De),typeof De.padding=="number"){var vt=De.padding;De.padding={top:vt,bottom:vt,right:vt,left:vt}}De.padding=t.extend(Qe,De.padding);var Mt=this.transform,Yt=Mt.padding,ar=Mt.project(t.LngLat.convert(Q)),cr=Mt.project(t.LngLat.convert(ye)),Dr=ar.rotate(-Le*Math.PI/180),Xr=cr.rotate(-Le*Math.PI/180),jr=new t.Point(Math.max(Dr.x,Xr.x),Math.max(Dr.y,Xr.y)),Vr=new t.Point(Math.min(Dr.x,Xr.x),Math.min(Dr.y,Xr.y)),on=jr.sub(Vr),_n=(Mt.width-(Yt.left+Yt.right+De.padding.left+De.padding.right))/on.x,Bn=(Mt.height-(Yt.top+Yt.bottom+De.padding.top+De.padding.bottom))/on.y;if(Bn<0||_n<0){t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Kn=Math.min(Mt.scaleZoom(Mt.scale*Math.min(_n,Bn)),De.maxZoom),ca=t.Point.convert(De.offset),pa=(De.padding.left-De.padding.right)/2,ha=(De.padding.top-De.padding.bottom)/2,Da=new t.Point(ca.x+pa,ca.y+ha),Ia=Da.mult(Mt.scale/Mt.zoomScale(Kn)),Ta=Mt.unproject(ar.add(cr).div(2).sub(Ia));return{center:Ta,zoom:Kn,bearing:Le}},Z.prototype.fitBounds=function(Q,ye,Le){return this._fitInternal(this.cameraForBounds(Q,ye),ye,Le)},Z.prototype.fitScreenCoordinates=function(Q,ye,Le,De,Qe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(Q)),this.transform.pointLocation(t.Point.convert(ye)),Le,De),De,Qe)},Z.prototype._fitInternal=function(Q,ye,Le){return Q?(ye=t.extend(Q,ye),delete ye.padding,ye.linear?this.easeTo(ye,Le):this.flyTo(ye,Le)):this},Z.prototype.jumpTo=function(Q,ye){this.stop();var Le=this.transform,De=!1,Qe=!1,vt=!1;return"zoom"in Q&&Le.zoom!==+Q.zoom&&(De=!0,Le.zoom=+Q.zoom),Q.center!==void 0&&(Le.center=t.LngLat.convert(Q.center)),"bearing"in Q&&Le.bearing!==+Q.bearing&&(Qe=!0,Le.bearing=+Q.bearing),"pitch"in Q&&Le.pitch!==+Q.pitch&&(vt=!0,Le.pitch=+Q.pitch),Q.padding!=null&&!Le.isPaddingEqual(Q.padding)&&(Le.padding=Q.padding),this.fire(new t.Event("movestart",ye)).fire(new t.Event("move",ye)),De&&this.fire(new t.Event("zoomstart",ye)).fire(new t.Event("zoom",ye)).fire(new t.Event("zoomend",ye)),Qe&&this.fire(new t.Event("rotatestart",ye)).fire(new t.Event("rotate",ye)).fire(new t.Event("rotateend",ye)),vt&&this.fire(new t.Event("pitchstart",ye)).fire(new t.Event("pitch",ye)).fire(new t.Event("pitchend",ye)),this.fire(new t.Event("moveend",ye))},Z.prototype.easeTo=function(Q,ye){var Le=this;this._stop(!1,Q.easeId),Q=t.extend({offset:[0,0],duration:500,easing:t.ease},Q),(Q.animate===!1||!Q.essential&&t.browser.prefersReducedMotion)&&(Q.duration=0);var De=this.transform,Qe=this.getZoom(),vt=this.getBearing(),Mt=this.getPitch(),Yt=this.getPadding(),ar="zoom"in Q?+Q.zoom:Qe,cr="bearing"in Q?this._normalizeBearing(Q.bearing,vt):vt,Dr="pitch"in Q?+Q.pitch:Mt,Xr="padding"in Q?Q.padding:De.padding,jr=t.Point.convert(Q.offset),Vr=De.centerPoint.add(jr),on=De.pointLocation(Vr),_n=t.LngLat.convert(Q.center||on);this._normalizeCenter(_n);var Bn=De.project(on),Kn=De.project(_n).sub(Bn),ca=De.zoomScale(ar-Qe),pa,ha;Q.around&&(pa=t.LngLat.convert(Q.around),ha=De.locationPoint(pa));var Da={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ar!==Qe,this._rotating=this._rotating||vt!==cr,this._pitching=this._pitching||Dr!==Mt,this._padding=!De.isPaddingEqual(Xr),this._easeId=Q.easeId,this._prepareEase(ye,Q.noMoveStart,Da),clearTimeout(this._easeEndTimeoutID),this._ease(function(Ia){if(Le._zooming&&(De.zoom=t.number(Qe,ar,Ia)),Le._rotating&&(De.bearing=t.number(vt,cr,Ia)),Le._pitching&&(De.pitch=t.number(Mt,Dr,Ia)),Le._padding&&(De.interpolatePadding(Yt,Xr,Ia),Vr=De.centerPoint.add(jr)),pa)De.setLocationAtPoint(pa,ha);else{var Ta=De.zoomScale(De.zoom-Qe),Ga=ar>Qe?Math.min(2,ca):Math.max(.5,ca),ja=Math.pow(Ga,1-Ia),li=De.unproject(Bn.add(Kn.mult(Ia*ja)).mult(Ta));De.setLocationAtPoint(De.renderWorldCopies?li.wrap():li,Vr)}Le._fireMoveEvents(ye)},function(Ia){Le._afterEase(ye,Ia)},Q),this},Z.prototype._prepareEase=function(Q,ye,Le){Le===void 0&&(Le={}),this._moving=!0,!ye&&!Le.moving&&this.fire(new t.Event("movestart",Q)),this._zooming&&!Le.zooming&&this.fire(new t.Event("zoomstart",Q)),this._rotating&&!Le.rotating&&this.fire(new t.Event("rotatestart",Q)),this._pitching&&!Le.pitching&&this.fire(new t.Event("pitchstart",Q))},Z.prototype._fireMoveEvents=function(Q){this.fire(new t.Event("move",Q)),this._zooming&&this.fire(new t.Event("zoom",Q)),this._rotating&&this.fire(new t.Event("rotate",Q)),this._pitching&&this.fire(new t.Event("pitch",Q))},Z.prototype._afterEase=function(Q,ye){if(!(this._easeId&&ye&&this._easeId===ye)){delete this._easeId;var Le=this._zooming,De=this._rotating,Qe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Le&&this.fire(new t.Event("zoomend",Q)),De&&this.fire(new t.Event("rotateend",Q)),Qe&&this.fire(new t.Event("pitchend",Q)),this.fire(new t.Event("moveend",Q))}},Z.prototype.flyTo=function(Q,ye){var Le=this;if(!Q.essential&&t.browser.prefersReducedMotion){var De=t.pick(Q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(De,ye)}this.stop(),Q=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},Q);var Qe=this.transform,vt=this.getZoom(),Mt=this.getBearing(),Yt=this.getPitch(),ar=this.getPadding(),cr="zoom"in Q?t.clamp(+Q.zoom,Qe.minZoom,Qe.maxZoom):vt,Dr="bearing"in Q?this._normalizeBearing(Q.bearing,Mt):Mt,Xr="pitch"in Q?+Q.pitch:Yt,jr="padding"in Q?Q.padding:Qe.padding,Vr=Qe.zoomScale(cr-vt),on=t.Point.convert(Q.offset),_n=Qe.centerPoint.add(on),Bn=Qe.pointLocation(_n),Kn=t.LngLat.convert(Q.center||Bn);this._normalizeCenter(Kn);var ca=Qe.project(Bn),pa=Qe.project(Kn).sub(ca),ha=Q.curve,Da=Math.max(Qe.width,Qe.height),Ia=Da/Vr,Ta=pa.mag();if("minZoom"in Q){var Ga=t.clamp(Math.min(Q.minZoom,vt,cr),Qe.minZoom,Qe.maxZoom),ja=Da/Qe.zoomScale(Ga-vt);ha=Math.sqrt(ja/Ta*2)}var li=ha*ha;function _i(wi){var Qi=(Ia*Ia-Da*Da+(wi?-1:1)*li*li*Ta*Ta)/(2*(wi?Ia:Da)*li*Ta);return Math.log(Math.sqrt(Qi*Qi+1)-Qi)}function io(wi){return(Math.exp(wi)-Math.exp(-wi))/2}function Mi(wi){return(Math.exp(wi)+Math.exp(-wi))/2}function Fi(wi){return io(wi)/Mi(wi)}var ri=_i(0),oo=function(wi){return Mi(ri)/Mi(ri+ha*wi)},yo=function(wi){return Da*((Mi(ri)*Fi(ri+ha*wi)-io(ri))/li)/Ta},Ao=(_i(1)-ri)/ha;if(Math.abs(Ta)<1e-6||!isFinite(Ao)){if(Math.abs(Da-Ia)<1e-6)return this.easeTo(Q,ye);var Zi=Ia<Da?-1:1;Ao=Math.abs(Math.log(Ia/Da))/ha,yo=function(){return 0},oo=function(wi){return Math.exp(Zi*ha*wi)}}if("duration"in Q)Q.duration=+Q.duration;else{var Ro="screenSpeed"in Q?+Q.screenSpeed/ha:+Q.speed;Q.duration=1e3*Ao/Ro}return Q.maxDuration&&Q.duration>Q.maxDuration&&(Q.duration=0),this._zooming=!0,this._rotating=Mt!==Dr,this._pitching=Xr!==Yt,this._padding=!Qe.isPaddingEqual(jr),this._prepareEase(ye,!1),this._ease(function(wi){var Qi=wi*Ao,ls=1/oo(Qi);Qe.zoom=wi===1?cr:vt+Qe.scaleZoom(ls),Le._rotating&&(Qe.bearing=t.number(Mt,Dr,wi)),Le._pitching&&(Qe.pitch=t.number(Yt,Xr,wi)),Le._padding&&(Qe.interpolatePadding(ar,jr,wi),_n=Qe.centerPoint.add(on));var Ms=wi===1?Kn:Qe.unproject(ca.add(pa.mult(yo(Qi))).mult(ls));Qe.setLocationAtPoint(Qe.renderWorldCopies?Ms.wrap():Ms,_n),Le._fireMoveEvents(ye)},function(){return Le._afterEase(ye)},Q),this},Z.prototype.isEasing=function(){return!!this._easeFrameId},Z.prototype.stop=function(){return this._stop()},Z.prototype._stop=function(Q,ye){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Le=this._onEaseEnd;delete this._onEaseEnd,Le.call(this,ye)}if(!Q){var De=this.handlers;De&&De.stop()}return this},Z.prototype._ease=function(Q,ye,Le){Le.animate===!1||Le.duration===0?(Q(1),ye()):(this._easeStart=t.browser.now(),this._easeOptions=Le,this._onEaseFrame=Q,this._onEaseEnd=ye,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Z.prototype._renderFrameCallback=function(){var Q=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(Q)),Q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Z.prototype._normalizeBearing=function(Q,ye){Q=t.wrap(Q,-180,180);var Le=Math.abs(Q-ye);return Math.abs(Q-360-ye)<Le&&(Q-=360),Math.abs(Q+360-ye)<Le&&(Q+=360),Q},Z.prototype._normalizeCenter=function(Q){var ye=this.transform;if(!(!ye.renderWorldCopies||ye.lngRange)){var Le=Q.lng-ye.center.lng;Q.lng+=Le>180?-360:Le<-180?360:0}},Z}(t.Evented),Vu=function(Z){Z===void 0&&(Z={}),this.options=Z,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Vu.prototype.getDefaultPosition=function(){return"bottom-right"},Vu.prototype.onAdd=function(Z){var ge=this.options&&this.options.compact;return this._map=Z,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),ge&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ge===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Vu.prototype.onRemove=function(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Vu.prototype._updateEditLink=function(){var Z=this._editLink;Z||(Z=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ge=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(Z){var Q=ge.reduce(function(ye,Le,De){return Le.value&&(ye+=Le.key+"="+Le.value+(De<ge.length-1?"&":"")),ye},"?");Z.href=t.config.FEEDBACK_URL+"/"+Q+(this._map._hash?this._map._hash.getHashString(!0):""),Z.rel="noopener nofollow"}},Vu.prototype._updateData=function(Z){Z&&(Z.sourceDataType==="metadata"||Z.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Vu.prototype._updateAttributions=function(){if(!!this._map.style){var Z=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Z=Z.concat(this.options.customAttribution.map(function(vt){return typeof vt!="string"?"":vt})):typeof this.options.customAttribution=="string"&&Z.push(this.options.customAttribution)),this._map.style.stylesheet){var ge=this._map.style.stylesheet;this.styleOwner=ge.owner,this.styleId=ge.id}var Q=this._map.style.sourceCaches;for(var ye in Q){var Le=Q[ye];if(Le.used){var De=Le.getSource();De.attribution&&Z.indexOf(De.attribution)<0&&Z.push(De.attribution)}}Z.sort(function(vt,Mt){return vt.length-Mt.length}),Z=Z.filter(function(vt,Mt){for(var Yt=Mt+1;Yt<Z.length;Yt++)if(Z[Yt].indexOf(vt)>=0)return!1;return!0});var Qe=Z.join(" | ");Qe!==this._attribHTML&&(this._attribHTML=Qe,Z.length?(this._innerContainer.innerHTML=Qe,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Vu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var _o=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};_o.prototype.onAdd=function(Z){this._map=Z,this._container=a.create("div","mapboxgl-ctrl");var ge=a.create("a","mapboxgl-ctrl-logo");return ge.target="_blank",ge.rel="noopener nofollow",ge.href="https://www.mapbox.com/",ge.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ge.setAttribute("rel","noopener nofollow"),this._container.appendChild(ge),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},_o.prototype.onRemove=function(){a.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},_o.prototype.getDefaultPosition=function(){return"bottom-left"},_o.prototype._updateLogo=function(Z){(!Z||Z.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},_o.prototype._logoRequired=function(){if(!!this._map.style){var Z=this._map.style.sourceCaches;for(var ge in Z){var Q=Z[ge].getSource();if(Q.mapbox_logo)return!0}return!1}},_o.prototype._updateCompact=function(){var Z=this._container.children;if(Z.length){var ge=Z[0];this._map.getCanvasContainer().offsetWidth<250?ge.classList.add("mapboxgl-compact"):ge.classList.remove("mapboxgl-compact")}};var xs=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xs.prototype.add=function(Z){var ge=++this._id,Q=this._queue;return Q.push({callback:Z,id:ge,cancelled:!1}),ge},xs.prototype.remove=function(Z){for(var ge=this._currentlyRunning,Q=ge?this._queue.concat(ge):this._queue,ye=0,Le=Q;ye<Le.length;ye+=1){var De=Le[ye];if(De.id===Z){De.cancelled=!0;return}}},xs.prototype.run=function(Z){Z===void 0&&(Z=0);var ge=this._currentlyRunning=this._queue;this._queue=[];for(var Q=0,ye=ge;Q<ye.length;Q+=1){var Le=ye[Q];if(!Le.cancelled&&(Le.callback(Z),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xs.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ep={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Eh=t.window.HTMLImageElement,Vc=t.window.HTMLElement,Yf=t.window.ImageBitmap,Ks=-2,Su=22,Kl=0,gc=60,Gc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:Ks,maxZoom:Su,minPitch:Kl,maxPitch:gc,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},yc=function(pe){function Z(Q){var ye=this;if(Q=t.extend({},Gc,Q),Q.minZoom!=null&&Q.maxZoom!=null&&Q.minZoom>Q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(Q.minPitch!=null&&Q.maxPitch!=null&&Q.minPitch>Q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(Q.minPitch!=null&&Q.minPitch<Kl)throw new Error("minPitch must be greater than or equal to "+Kl);if(Q.maxPitch!=null&&Q.maxPitch>gc)throw new Error("maxPitch must be less than or equal to "+gc);var Le=new Ni(Q.minZoom,Q.maxZoom,Q.minPitch,Q.maxPitch,Q.renderWorldCopies);if(pe.call(this,Le,Q),this._interactive=Q.interactive,this._maxTileCacheSize=Q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Q.preserveDrawingBuffer,this._antialias=Q.antialias,this._trackResize=Q.trackResize,this._bearingSnap=Q.bearingSnap,this._refreshExpiredTiles=Q.refreshExpiredTiles,this._fadeDuration=Q.fadeDuration,this._crossSourceCollisions=Q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Q.collectResourceTiming,this._renderTaskQueue=new xs,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},ep,Q.locale),this._requestManager=new t.RequestManager(Q.transformRequest,Q.accessToken),typeof Q.container=="string"){if(this._container=t.window.document.getElementById(Q.container),!this._container)throw new Error("Container '"+Q.container+"' not found.")}else if(Q.container instanceof Vc)this._container=Q.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(Q.maxBounds&&this.setMaxBounds(Q.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ye._update(!1)}),this.on("moveend",function(){return ye._update(!1)}),this.on("zoom",function(){return ye._update(!0)}),typeof t.window!="undefined"&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new So(this,Q);var De=typeof Q.hash=="string"&&Q.hash||void 0;this._hash=Q.hash&&new es(De).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:Q.center,zoom:Q.zoom,bearing:Q.bearing,pitch:Q.pitch}),Q.bounds&&(this.resize(),this.fitBounds(Q.bounds,t.extend({},Q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Q.localIdeographFontFamily,Q.style&&this.setStyle(Q.style,{localIdeographFontFamily:Q.localIdeographFontFamily}),Q.attributionControl&&this.addControl(new Vu({customAttribution:Q.customAttribution})),this.addControl(new _o,Q.logoPosition),this.on("style.load",function(){ye.transform.unmodified&&ye.jumpTo(ye.style.stylesheet)}),this.on("data",function(Qe){ye._update(Qe.dataType==="style"),ye.fire(new t.Event(Qe.dataType+"data",Qe))}),this.on("dataloading",function(Qe){ye.fire(new t.Event(Qe.dataType+"dataloading",Qe))})}pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z;var ge={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Z.prototype._getMapId=function(){return this._mapId},Z.prototype.addControl=function(ye,Le){if(Le===void 0&&ye.getDefaultPosition&&(Le=ye.getDefaultPosition()),Le===void 0&&(Le="top-right"),!ye||!ye.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var De=ye.onAdd(this);this._controls.push(ye);var Qe=this._controlPositions[Le];return Le.indexOf("bottom")!==-1?Qe.insertBefore(De,Qe.firstChild):Qe.appendChild(De),this},Z.prototype.removeControl=function(ye){if(!ye||!ye.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Le=this._controls.indexOf(ye);return Le>-1&&this._controls.splice(Le,1),ye.onRemove(this),this},Z.prototype.resize=function(ye){var Le=this._containerDimensions(),De=Le[0],Qe=Le[1];this._resizeCanvas(De,Qe),this.transform.resize(De,Qe),this.painter.resize(De,Qe);var vt=!this._moving;return vt&&(this.stop(),this.fire(new t.Event("movestart",ye)).fire(new t.Event("move",ye))),this.fire(new t.Event("resize",ye)),vt&&this.fire(new t.Event("moveend",ye)),this},Z.prototype.getBounds=function(){return this.transform.getBounds()},Z.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Z.prototype.setMaxBounds=function(ye){return this.transform.setMaxBounds(t.LngLatBounds.convert(ye)),this._update()},Z.prototype.setMinZoom=function(ye){if(ye=ye==null?Ks:ye,ye>=Ks&&ye<=this.transform.maxZoom)return this.transform.minZoom=ye,this._update(),this.getZoom()<ye&&this.setZoom(ye),this;throw new Error("minZoom must be between "+Ks+" and the current maxZoom, inclusive")},Z.prototype.getMinZoom=function(){return this.transform.minZoom},Z.prototype.setMaxZoom=function(ye){if(ye=ye==null?Su:ye,ye>=this.transform.minZoom)return this.transform.maxZoom=ye,this._update(),this.getZoom()>ye&&this.setZoom(ye),this;throw new Error("maxZoom must be greater than the current minZoom")},Z.prototype.getMaxZoom=function(){return this.transform.maxZoom},Z.prototype.setMinPitch=function(ye){if(ye=ye==null?Kl:ye,ye<Kl)throw new Error("minPitch must be greater than or equal to "+Kl);if(ye>=Kl&&ye<=this.transform.maxPitch)return this.transform.minPitch=ye,this._update(),this.getPitch()<ye&&this.setPitch(ye),this;throw new Error("minPitch must be between "+Kl+" and the current maxPitch, inclusive")},Z.prototype.getMinPitch=function(){return this.transform.minPitch},Z.prototype.setMaxPitch=function(ye){if(ye=ye==null?gc:ye,ye>gc)throw new Error("maxPitch must be less than or equal to "+gc);if(ye>=this.transform.minPitch)return this.transform.maxPitch=ye,this._update(),this.getPitch()>ye&&this.setPitch(ye),this;throw new Error("maxPitch must be greater than the current minPitch")},Z.prototype.getMaxPitch=function(){return this.transform.maxPitch},Z.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Z.prototype.setRenderWorldCopies=function(ye){return this.transform.renderWorldCopies=ye,this._update()},Z.prototype.project=function(ye){return this.transform.locationPoint(t.LngLat.convert(ye))},Z.prototype.unproject=function(ye){return this.transform.pointLocation(t.Point.convert(ye))},Z.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Z.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Z.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Z.prototype._createDelegatedListener=function(ye,Le,De){var Qe=this,vt;if(ye==="mouseenter"||ye==="mouseover"){var Mt=!1,Yt=function(Vr){var on=Qe.getLayer(Le)?Qe.queryRenderedFeatures(Vr.point,{layers:[Le]}):[];on.length?Mt||(Mt=!0,De.call(Qe,new wt(ye,Qe,Vr.originalEvent,{features:on}))):Mt=!1},ar=function(){Mt=!1};return{layer:Le,listener:De,delegates:{mousemove:Yt,mouseout:ar}}}else if(ye==="mouseleave"||ye==="mouseout"){var cr=!1,Dr=function(Vr){var on=Qe.getLayer(Le)?Qe.queryRenderedFeatures(Vr.point,{layers:[Le]}):[];on.length?cr=!0:cr&&(cr=!1,De.call(Qe,new wt(ye,Qe,Vr.originalEvent)))},Xr=function(Vr){cr&&(cr=!1,De.call(Qe,new wt(ye,Qe,Vr.originalEvent)))};return{layer:Le,listener:De,delegates:{mousemove:Dr,mouseout:Xr}}}else{var jr=function(Vr){var on=Qe.getLayer(Le)?Qe.queryRenderedFeatures(Vr.point,{layers:[Le]}):[];on.length&&(Vr.features=on,De.call(Qe,Vr),delete Vr.features)};return{layer:Le,listener:De,delegates:(vt={},vt[ye]=jr,vt)}}},Z.prototype.on=function(ye,Le,De){if(De===void 0)return pe.prototype.on.call(this,ye,Le);var Qe=this._createDelegatedListener(ye,Le,De);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ye]=this._delegatedListeners[ye]||[],this._delegatedListeners[ye].push(Qe);for(var vt in Qe.delegates)this.on(vt,Qe.delegates[vt]);return this},Z.prototype.once=function(ye,Le,De){if(De===void 0)return pe.prototype.once.call(this,ye,Le);var Qe=this._createDelegatedListener(ye,Le,De);for(var vt in Qe.delegates)this.once(vt,Qe.delegates[vt]);return this},Z.prototype.off=function(ye,Le,De){var Qe=this;if(De===void 0)return pe.prototype.off.call(this,ye,Le);var vt=function(Mt){for(var Yt=Mt[ye],ar=0;ar<Yt.length;ar++){var cr=Yt[ar];if(cr.layer===Le&&cr.listener===De){for(var Dr in cr.delegates)Qe.off(Dr,cr.delegates[Dr]);return Yt.splice(ar,1),Qe}}};return this._delegatedListeners&&this._delegatedListeners[ye]&&vt(this._delegatedListeners),this},Z.prototype.queryRenderedFeatures=function(ye,Le){if(!this.style)return[];Le===void 0&&ye!==void 0&&!(ye instanceof t.Point)&&!Array.isArray(ye)&&(Le=ye,ye=void 0),Le=Le||{},ye=ye||[[0,0],[this.transform.width,this.transform.height]];var De;if(ye instanceof t.Point||typeof ye[0]=="number")De=[t.Point.convert(ye)];else{var Qe=t.Point.convert(ye[0]),vt=t.Point.convert(ye[1]);De=[Qe,new t.Point(vt.x,Qe.y),vt,new t.Point(Qe.x,vt.y),Qe]}return this.style.queryRenderedFeatures(De,Le,this.transform)},Z.prototype.querySourceFeatures=function(ye,Le){return this.style.querySourceFeatures(ye,Le)},Z.prototype.setStyle=function(ye,Le){return Le=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Le),Le.diff!==!1&&Le.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ye?(this._diffStyle(ye,Le),this):(this._localIdeographFontFamily=Le.localIdeographFontFamily,this._updateStyle(ye,Le))},Z.prototype._getUIString=function(ye){var Le=this._locale[ye];if(Le==null)throw new Error("Missing UI string '"+ye+"'");return Le},Z.prototype._updateStyle=function(ye,Le){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ye)this.style=new is(this,Le||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ye=="string"?this.style.loadURL(ye):this.style.loadJSON(ye),this},Z.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new is(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Z.prototype._diffStyle=function(ye,Le){var De=this;if(typeof ye=="string"){var Qe=this._requestManager.normalizeStyleURL(ye),vt=this._requestManager.transformRequest(Qe,t.ResourceType.Style);t.getJSON(vt,function(Mt,Yt){Mt?De.fire(new t.ErrorEvent(Mt)):Yt&&De._updateDiff(Yt,Le)})}else typeof ye=="object"&&this._updateDiff(ye,Le)},Z.prototype._updateDiff=function(ye,Le){try{this.style.setState(ye)&&this._update(!0)}catch(De){t.warnOnce("Unable to perform style diff: "+(De.message||De.error||De)+".  Rebuilding the style from scratch."),this._updateStyle(ye,Le)}},Z.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Z.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},Z.prototype.addSource=function(ye,Le){return this._lazyInitEmptyStyle(),this.style.addSource(ye,Le),this._update(!0)},Z.prototype.isSourceLoaded=function(ye){var Le=this.style&&this.style.sourceCaches[ye];if(Le===void 0){this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+ye+"'")));return}return Le.loaded()},Z.prototype.areTilesLoaded=function(){var ye=this.style&&this.style.sourceCaches;for(var Le in ye){var De=ye[Le],Qe=De._tiles;for(var vt in Qe){var Mt=Qe[vt];if(!(Mt.state==="loaded"||Mt.state==="errored"))return!1}}return!0},Z.prototype.addSourceType=function(ye,Le,De){return this._lazyInitEmptyStyle(),this.style.addSourceType(ye,Le,De)},Z.prototype.removeSource=function(ye){return this.style.removeSource(ye),this._update(!0)},Z.prototype.getSource=function(ye){return this.style.getSource(ye)},Z.prototype.addImage=function(ye,Le,De){De===void 0&&(De={});var Qe=De.pixelRatio;Qe===void 0&&(Qe=1);var vt=De.sdf;vt===void 0&&(vt=!1);var Mt=De.stretchX,Yt=De.stretchY,ar=De.content;this._lazyInitEmptyStyle();var cr=0;if(Le instanceof Eh||Yf&&Le instanceof Yf){var Dr=t.browser.getImageData(Le),Xr=Dr.width,jr=Dr.height,Vr=Dr.data;this.style.addImage(ye,{data:new t.RGBAImage({width:Xr,height:jr},Vr),pixelRatio:Qe,stretchX:Mt,stretchY:Yt,content:ar,sdf:vt,version:cr})}else{if(Le.width===void 0||Le.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var on=Le.width,_n=Le.height,Bn=Le.data,Kn=Le;this.style.addImage(ye,{data:new t.RGBAImage({width:on,height:_n},new Uint8Array(Bn)),pixelRatio:Qe,stretchX:Mt,stretchY:Yt,content:ar,sdf:vt,version:cr,userImage:Kn}),Kn.onAdd&&Kn.onAdd(this,ye)}},Z.prototype.updateImage=function(ye,Le){var De=this.style.getImage(ye);if(!De)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Qe=Le instanceof Eh||Yf&&Le instanceof Yf?t.browser.getImageData(Le):Le,vt=Qe.width,Mt=Qe.height,Yt=Qe.data;if(vt===void 0||Mt===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(vt!==De.data.width||Mt!==De.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ar=!(Le instanceof Eh||Yf&&Le instanceof Yf);De.data.replace(Yt,ar),this.style.updateImage(ye,De)},Z.prototype.hasImage=function(ye){return ye?!!this.style.getImage(ye):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},Z.prototype.removeImage=function(ye){this.style.removeImage(ye)},Z.prototype.loadImage=function(ye,Le){t.getImage(this._requestManager.transformRequest(ye,t.ResourceType.Image),Le)},Z.prototype.listImages=function(){return this.style.listImages()},Z.prototype.addLayer=function(ye,Le){return this._lazyInitEmptyStyle(),this.style.addLayer(ye,Le),this._update(!0)},Z.prototype.moveLayer=function(ye,Le){return this.style.moveLayer(ye,Le),this._update(!0)},Z.prototype.removeLayer=function(ye){return this.style.removeLayer(ye),this._update(!0)},Z.prototype.getLayer=function(ye){return this.style.getLayer(ye)},Z.prototype.setLayerZoomRange=function(ye,Le,De){return this.style.setLayerZoomRange(ye,Le,De),this._update(!0)},Z.prototype.setFilter=function(ye,Le,De){return De===void 0&&(De={}),this.style.setFilter(ye,Le,De),this._update(!0)},Z.prototype.getFilter=function(ye){return this.style.getFilter(ye)},Z.prototype.setPaintProperty=function(ye,Le,De,Qe){return Qe===void 0&&(Qe={}),this.style.setPaintProperty(ye,Le,De,Qe),this._update(!0)},Z.prototype.getPaintProperty=function(ye,Le){return this.style.getPaintProperty(ye,Le)},Z.prototype.setLayoutProperty=function(ye,Le,De,Qe){return Qe===void 0&&(Qe={}),this.style.setLayoutProperty(ye,Le,De,Qe),this._update(!0)},Z.prototype.getLayoutProperty=function(ye,Le){return this.style.getLayoutProperty(ye,Le)},Z.prototype.setLight=function(ye,Le){return Le===void 0&&(Le={}),this._lazyInitEmptyStyle(),this.style.setLight(ye,Le),this._update(!0)},Z.prototype.getLight=function(){return this.style.getLight()},Z.prototype.setFeatureState=function(ye,Le){return this.style.setFeatureState(ye,Le),this._update()},Z.prototype.removeFeatureState=function(ye,Le){return this.style.removeFeatureState(ye,Le),this._update()},Z.prototype.getFeatureState=function(ye){return this.style.getFeatureState(ye)},Z.prototype.getContainer=function(){return this._container},Z.prototype.getCanvasContainer=function(){return this._canvasContainer},Z.prototype.getCanvas=function(){return this._canvas},Z.prototype._containerDimensions=function(){var ye=0,Le=0;return this._container&&(ye=this._container.clientWidth||400,Le=this._container.clientHeight||300),[ye,Le]},Z.prototype._detectMissingCSS=function(){var ye=t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ye!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Z.prototype._setupContainer=function(){var ye=this._container;ye.classList.add("mapboxgl-map");var Le=this._missingCSSCanary=a.create("div","mapboxgl-canary",ye);Le.style.visibility="hidden",this._detectMissingCSS();var De=this._canvasContainer=a.create("div","mapboxgl-canvas-container",ye);this._interactive&&De.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",De),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Qe=this._containerDimensions();this._resizeCanvas(Qe[0],Qe[1]);var vt=this._controlContainer=a.create("div","mapboxgl-control-container",ye),Mt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Yt){Mt[Yt]=a.create("div","mapboxgl-ctrl-"+Yt,vt)})},Z.prototype._resizeCanvas=function(ye,Le){var De=t.browser.devicePixelRatio||1;this._canvas.width=De*ye,this._canvas.height=De*Le,this._canvas.style.width=ye+"px",this._canvas.style.height=Le+"px"},Z.prototype._setupPainter=function(){var ye=t.extend({},i.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Le=this._canvas.getContext("webgl",ye)||this._canvas.getContext("experimental-webgl",ye);if(!Le){this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new xi(Le,this.transform),t.webpSupported.testSupport(Le)},Z.prototype._contextLost=function(ye){ye.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:ye}))},Z.prototype._contextRestored=function(ye){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:ye}))},Z.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Z.prototype._update=function(ye){return this.style?(this._styleDirty=this._styleDirty||ye,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Z.prototype._requestRenderFrame=function(ye){return this._update(),this._renderTaskQueue.add(ye)},Z.prototype._cancelRenderFrame=function(ye){this._renderTaskQueue.remove(ye)},Z.prototype._render=function(ye){var Le=this,De,Qe=0,vt=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(De=vt.createQueryEXT(),vt.beginQueryEXT(vt.TIME_ELAPSED_EXT,De),Qe=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ye),!this._removed){var Mt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Yt=this.transform.zoom,ar=t.browser.now();this.style.zoomHistory.update(Yt,ar);var cr=new t.EvaluationParameters(Yt,{now:ar,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Dr=cr.crossFadingFactor();(Dr!==1||Dr!==this._crossFadingFactor)&&(Mt=!0,this._crossFadingFactor=Dr),this.style.update(cr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||Mt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Xr=t.browser.now()-Qe;vt.endQueryEXT(vt.TIME_ELAPSED_EXT,De),setTimeout(function(){var on=vt.getQueryObjectEXT(De,vt.QUERY_RESULT_EXT)/(1e3*1e3);vt.deleteQueryEXT(De),Le.fire(new t.Event("gpu-timing-frame",{cpuTime:Xr,gpuTime:on}))},50)}if(this.listens("gpu-timing-layer")){var jr=this.painter.collectGpuTimers();setTimeout(function(){var on=Le.painter.queryGpuTimers(jr);Le.fire(new t.Event("gpu-timing-layer",{layerTimes:on}))},50)}var Vr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Vr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this}},Z.prototype.remove=function(){this._hash&&this._hash.remove();for(var ye=0,Le=this._controls;ye<Le.length;ye+=1){var De=Le[ye];De.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof t.window!="undefined"&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var Qe=this.painter.context.gl.getExtension("WEBGL_lose_context");Qe&&Qe.loseContext(),Wc(this._canvasContainer),Wc(this._controlContainer),Wc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},Z.prototype.triggerRepaint=function(){var ye=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(Le){ye._frame=null,ye._render(Le)}))},Z.prototype._onWindowOnline=function(){this._update()},Z.prototype._onWindowResize=function(ye){this._trackResize&&this.resize({originalEvent:ye})._update()},ge.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ge.showTileBoundaries.set=function(Q){this._showTileBoundaries!==Q&&(this._showTileBoundaries=Q,this._update())},ge.showPadding.get=function(){return!!this._showPadding},ge.showPadding.set=function(Q){this._showPadding!==Q&&(this._showPadding=Q,this._update())},ge.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ge.showCollisionBoxes.set=function(Q){this._showCollisionBoxes!==Q&&(this._showCollisionBoxes=Q,Q?this.style._generateCollisionBoxes():this._update())},ge.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ge.showOverdrawInspector.set=function(Q){this._showOverdrawInspector!==Q&&(this._showOverdrawInspector=Q,this._update())},ge.repaint.get=function(){return!!this._repaint},ge.repaint.set=function(Q){this._repaint!==Q&&(this._repaint=Q,this.triggerRepaint())},ge.vertices.get=function(){return!!this._vertices},ge.vertices.set=function(Q){this._vertices=Q,this._update()},Z.prototype._setCacheLimits=function(ye,Le){t.setCacheLimits(ye,Le)},ge.version.get=function(){return t.version},Object.defineProperties(Z.prototype,ge),Z}(Hc);function Wc(pe){pe.parentNode&&pe.parentNode.removeChild(pe)}var oh={showCompass:!0,showZoom:!0,visualizePitch:!1},Xf=function(Z){var ge=this;this.options=t.extend({},oh,Z),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(Q){return Q.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(Q){return ge._map.zoomIn({},{originalEvent:Q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(Q){return ge._map.zoomOut({},{originalEvent:Q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(Q){ge.options.visualizePitch?ge._map.resetNorthPitch({},{originalEvent:Q}):ge._map.resetNorth({},{originalEvent:Q})}),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Xf.prototype._updateZoomButtons=function(){var Z=this._map.getZoom();this._zoomInButton.disabled=Z===this._map.getMaxZoom(),this._zoomOutButton.disabled=Z===this._map.getMinZoom()},Xf.prototype._rotateCompassArrow=function(){var Z=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=Z},Xf.prototype.onAdd=function(Z){return this._map=Z,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jl(this._map,this._compass,this.options.visualizePitch)),this._container},Xf.prototype.onRemove=function(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Xf.prototype._createButton=function(Z,ge){var Q=a.create("button",Z,this._container);return Q.type="button",Q.addEventListener("click",ge),Q},Xf.prototype._setButtonTitle=function(Z,ge){var Q=this._map._getUIString("NavigationControl."+ge);Z.title=Q,Z.setAttribute("aria-label",Q)};var Jl=function(Z,ge,Q){Q===void 0&&(Q=!1),this._clickTolerance=10,this.element=ge,this.mouseRotate=new _a({clickTolerance:Z.dragRotate._mouseRotate._clickTolerance}),this.map=Z,Q&&(this.mousePitch=new Xa({clickTolerance:Z.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(ge,"mousedown",this.mousedown),a.addEventListener(ge,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(ge,"touchmove",this.touchmove),a.addEventListener(ge,"touchend",this.touchend),a.addEventListener(ge,"touchcancel",this.reset)};Jl.prototype.down=function(Z,ge){this.mouseRotate.mousedown(Z,ge),this.mousePitch&&this.mousePitch.mousedown(Z,ge),a.disableDrag()},Jl.prototype.move=function(Z,ge){var Q=this.map,ye=this.mouseRotate.mousemoveWindow(Z,ge);if(ye&&ye.bearingDelta&&Q.setBearing(Q.getBearing()+ye.bearingDelta),this.mousePitch){var Le=this.mousePitch.mousemoveWindow(Z,ge);Le&&Le.pitchDelta&&Q.setPitch(Q.getPitch()+Le.pitchDelta)}},Jl.prototype.off=function(){var Z=this.element;a.removeEventListener(Z,"mousedown",this.mousedown),a.removeEventListener(Z,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(Z,"touchmove",this.touchmove),a.removeEventListener(Z,"touchend",this.touchend),a.removeEventListener(Z,"touchcancel",this.reset),this.offTemp()},Jl.prototype.offTemp=function(){a.enableDrag(),a.removeEventListener(t.window,"mousemove",this.mousemove),a.removeEventListener(t.window,"mouseup",this.mouseup)},Jl.prototype.mousedown=function(Z){this.down(t.extend({},Z,{ctrlKey:!0,preventDefault:function(){return Z.preventDefault()}}),a.mousePos(this.element,Z)),a.addEventListener(t.window,"mousemove",this.mousemove),a.addEventListener(t.window,"mouseup",this.mouseup)},Jl.prototype.mousemove=function(Z){this.move(Z,a.mousePos(this.element,Z))},Jl.prototype.mouseup=function(Z){this.mouseRotate.mouseupWindow(Z),this.mousePitch&&this.mousePitch.mouseupWindow(Z),this.offTemp()},Jl.prototype.touchstart=function(Z){Z.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,Z.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Z.preventDefault()}},this._startPos))},Jl.prototype.touchmove=function(Z){Z.targetTouches.length!==1?this.reset():(this._lastPos=a.touchPos(this.element,Z.targetTouches)[0],this.move({preventDefault:function(){return Z.preventDefault()}},this._lastPos))},Jl.prototype.touchend=function(Z){Z.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Jl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function hu(pe,Z,ge){if(pe=new t.LngLat(pe.lng,pe.lat),Z){var Q=new t.LngLat(pe.lng-360,pe.lat),ye=new t.LngLat(pe.lng+360,pe.lat),Le=ge.locationPoint(pe).distSqr(Z);ge.locationPoint(Q).distSqr(Z)<Le?pe=Q:ge.locationPoint(ye).distSqr(Z)<Le&&(pe=ye)}for(;Math.abs(pe.lng-ge.center.lng)>180;){var De=ge.locationPoint(pe);if(De.x>=0&&De.y>=0&&De.x<=ge.width&&De.y<=ge.height)break;pe.lng>ge.center.lng?pe.lng-=360:pe.lng+=360}return pe}var Zf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ch(pe,Z,ge){var Q=pe.classList;for(var ye in Zf)Q.remove("mapboxgl-"+ge+"-anchor-"+ye);Q.add("mapboxgl-"+ge+"-anchor-"+Z)}var Lc=function(pe){function Z(ge,Q){var ye=this;if(pe.call(this),(ge instanceof t.window.HTMLElement||Q)&&(ge=t.extend({element:ge},Q)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ge&&ge.anchor||"center",this._color=ge&&ge.color||"#3FB1CE",this._draggable=ge&&ge.draggable||!1,this._state="inactive",this._rotation=ge&&ge.rotation||0,this._rotationAlignment=ge&&ge.rotationAlignment||"auto",this._pitchAlignment=ge&&ge.pitchAlignment&&ge.pitchAlignment!=="auto"?ge.pitchAlignment:this._rotationAlignment,!ge||!ge.element){this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");var Le=a.createNS("http://www.w3.org/2000/svg","svg");Le.setAttributeNS(null,"display","block"),Le.setAttributeNS(null,"height","41px"),Le.setAttributeNS(null,"width","27px"),Le.setAttributeNS(null,"viewBox","0 0 27 41");var De=a.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"stroke","none"),De.setAttributeNS(null,"stroke-width","1"),De.setAttributeNS(null,"fill","none"),De.setAttributeNS(null,"fill-rule","evenodd");var Qe=a.createNS("http://www.w3.org/2000/svg","g");Qe.setAttributeNS(null,"fill-rule","nonzero");var vt=a.createNS("http://www.w3.org/2000/svg","g");vt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),vt.setAttributeNS(null,"fill","#000000");for(var Mt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],Yt=0,ar=Mt;Yt<ar.length;Yt+=1){var cr=ar[Yt],Dr=a.createNS("http://www.w3.org/2000/svg","ellipse");Dr.setAttributeNS(null,"opacity","0.04"),Dr.setAttributeNS(null,"cx","10.5"),Dr.setAttributeNS(null,"cy","5.80029008"),Dr.setAttributeNS(null,"rx",cr.rx),Dr.setAttributeNS(null,"ry",cr.ry),vt.appendChild(Dr)}var Xr=a.createNS("http://www.w3.org/2000/svg","g");Xr.setAttributeNS(null,"fill",this._color);var jr=a.createNS("http://www.w3.org/2000/svg","path");jr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Xr.appendChild(jr);var Vr=a.createNS("http://www.w3.org/2000/svg","g");Vr.setAttributeNS(null,"opacity","0.25"),Vr.setAttributeNS(null,"fill","#000000");var on=a.createNS("http://www.w3.org/2000/svg","path");on.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Vr.appendChild(on);var _n=a.createNS("http://www.w3.org/2000/svg","g");_n.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_n.setAttributeNS(null,"fill","#FFFFFF");var Bn=a.createNS("http://www.w3.org/2000/svg","g");Bn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Kn=a.createNS("http://www.w3.org/2000/svg","circle");Kn.setAttributeNS(null,"fill","#000000"),Kn.setAttributeNS(null,"opacity","0.25"),Kn.setAttributeNS(null,"cx","5.5"),Kn.setAttributeNS(null,"cy","5.5"),Kn.setAttributeNS(null,"r","5.4999962");var ca=a.createNS("http://www.w3.org/2000/svg","circle");ca.setAttributeNS(null,"fill","#FFFFFF"),ca.setAttributeNS(null,"cx","5.5"),ca.setAttributeNS(null,"cy","5.5"),ca.setAttributeNS(null,"r","5.4999962"),Bn.appendChild(Kn),Bn.appendChild(ca),Qe.appendChild(vt),Qe.appendChild(Xr),Qe.appendChild(Vr),Qe.appendChild(_n),Qe.appendChild(Bn),Le.appendChild(Qe),this._element.appendChild(Le),this._offset=t.Point.convert(ge&&ge.offset||[0,-14])}else this._element=ge.element,this._offset=t.Point.convert(ge&&ge.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(pa){pa.preventDefault()}),this._element.addEventListener("mousedown",function(pa){pa.preventDefault()}),this._element.addEventListener("focus",function(){var pa=ye._map.getContainer();pa.scrollTop=0,pa.scrollLeft=0}),Ch(this._element,this._anchor,"marker"),this._popup=null}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.addTo=function(Q){return this.remove(),this._map=Q,Q.getCanvasContainer().appendChild(this._element),Q.on("move",this._update),Q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Z.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this},Z.prototype.getLngLat=function(){return this._lngLat},Z.prototype.setLngLat=function(Q){return this._lngLat=t.LngLat.convert(Q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Z.prototype.getElement=function(){return this._element},Z.prototype.setPopup=function(Q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),Q){if(!("offset"in Q.options)){var ye=41-5.8/2,Le=13.5,De=Math.sqrt(Math.pow(Le,2)/2);Q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ye],"bottom-left":[De,(ye-Le+De)*-1],"bottom-right":[-De,(ye-Le+De)*-1],left:[Le,(ye-Le)*-1],right:[-Le,(ye-Le)*-1]}:this._offset}this._popup=Q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Z.prototype._onKeyPress=function(Q){var ye=Q.code,Le=Q.charCode||Q.keyCode;(ye==="Space"||ye==="Enter"||Le===32||Le===13)&&this.togglePopup()},Z.prototype._onMapClick=function(Q){var ye=Q.originalEvent.target,Le=this._element;this._popup&&(ye===Le||Le.contains(ye))&&this.togglePopup()},Z.prototype.getPopup=function(){return this._popup},Z.prototype.togglePopup=function(){var Q=this._popup;if(Q)Q.isOpen()?Q.remove():Q.addTo(this._map);else return this;return this},Z.prototype._update=function(Q){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=hu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ye="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ye="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ye="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Le="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Le="rotateX(0deg)":this._pitchAlignment==="map"&&(Le="rotateX("+this._map.getPitch()+"deg)"),(!Q||Q.type==="moveend")&&(this._pos=this._pos.round()),a.setTransform(this._element,Zf[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Le+" "+ye)}},Z.prototype.getOffset=function(){return this._offset},Z.prototype.setOffset=function(Q){return this._offset=t.Point.convert(Q),this._update(),this},Z.prototype._onMove=function(Q){this._pos=Q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},Z.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},Z.prototype._addDragHandler=function(Q){this._element.contains(Q.originalEvent.target)&&(Q.preventDefault(),this._positionDelta=Q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Z.prototype.setDraggable=function(Q){return this._draggable=!!Q,this._map&&(Q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Z.prototype.isDraggable=function(){return this._draggable},Z.prototype.setRotation=function(Q){return this._rotation=Q||0,this._update(),this},Z.prototype.getRotation=function(){return this._rotation},Z.prototype.setRotationAlignment=function(Q){return this._rotationAlignment=Q||"auto",this._update(),this},Z.prototype.getRotationAlignment=function(){return this._rotationAlignment},Z.prototype.setPitchAlignment=function(Q){return this._pitchAlignment=Q&&Q!=="auto"?Q:this._rotationAlignment,this._update(),this},Z.prototype.getPitchAlignment=function(){return this._pitchAlignment},Z}(t.Evented),Lh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},sf;function Yc(pe){sf!==void 0?pe(sf):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(Z){sf=Z.state!=="denied",pe(sf)}):(sf=!!t.window.navigator.geolocation,pe(sf))}var jf=0,Af=!1,Xc=function(pe){function Z(ge){pe.call(this),this.options=t.extend({},Lh,ge),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.onAdd=function(Q){return this._map=Q,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Yc(this._setupUI),this._container},Z.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,jf=0,Af=!1},Z.prototype._isOutOfMapMaxBounds=function(Q){var ye=this._map.getMaxBounds(),Le=Q.coords;return ye&&(Le.longitude<ye.getWest()||Le.longitude>ye.getEast()||Le.latitude<ye.getSouth()||Le.latitude>ye.getNorth())},Z.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},Z.prototype._onSuccess=function(Q){if(!!this._map){if(this._isOutOfMapMaxBounds(Q)){this._setErrorState(),this.fire(new t.Event("outofmaxbounds",Q)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=Q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(Q),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(Q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",Q)),this._finish()}},Z.prototype._updateCamera=function(Q){var ye=new t.LngLat(Q.coords.longitude,Q.coords.latitude),Le=Q.coords.accuracy,De=this._map.getBearing(),Qe=t.extend({bearing:De},this.options.fitBoundsOptions);this._map.fitBounds(ye.toBounds(Le),Qe,{geolocateSource:!0})},Z.prototype._updateMarker=function(Q){if(Q){var ye=new t.LngLat(Q.coords.longitude,Q.coords.latitude);this._accuracyCircleMarker.setLngLat(ye).addTo(this._map),this._userLocationDotMarker.setLngLat(ye).addTo(this._map),this._accuracy=Q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Z.prototype._updateCircleRadius=function(){var Q=this._map._container.clientHeight/2,ye=this._map.unproject([0,Q]),Le=this._map.unproject([1,Q]),De=ye.distanceTo(Le),Qe=Math.ceil(2*this._accuracy/De);this._circleElement.style.width=Qe+"px",this._circleElement.style.height=Qe+"px"},Z.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Z.prototype._onError=function(Q){if(!!this._map){if(this.options.trackUserLocation)if(Q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ye=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ye,this._geolocateButton.setAttribute("aria-label",ye),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(Q.code===3&&Af)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",Q)),this._finish()}},Z.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Z.prototype._setupUI=function(Q){var ye=this;if(this._container.addEventListener("contextmenu",function(Qe){return Qe.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",Q===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Le=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Le,this._geolocateButton.setAttribute("aria-label",Le)}else{var De=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=De,this._geolocateButton.setAttribute("aria-label",De)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Lc(this._dotElement),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Lc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Qe){var vt=Qe.originalEvent&&Qe.originalEvent.type==="resize";!Qe.geolocateSource&&ye._watchState==="ACTIVE_LOCK"&&!vt&&(ye._watchState="BACKGROUND",ye._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ye._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ye.fire(new t.Event("trackuserlocationend")))})},Z.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jf--,Af=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),jf++;var Q;jf>1?(Q={maximumAge:6e5,timeout:0},Af=!0):(Q=this.options.positionOptions,Af=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,Q)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Z.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Z}(t.Evented),tp={maxWidth:100,unit:"metric"},Kf=function(Z){this.options=t.extend({},tp,Z),t.bindAll(["_onMove","setUnit"],this)};Kf.prototype.getDefaultPosition=function(){return"bottom-left"},Kf.prototype._onMove=function(){Zc(this._map,this._container,this.options)},Kf.prototype.onAdd=function(Z){return this._map=Z,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Z.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Kf.prototype.onRemove=function(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Kf.prototype.setUnit=function(Z){this.options.unit=Z,Zc(this._map,this._container,this.options)};function Zc(pe,Z,ge){var Q=ge&&ge.maxWidth||100,ye=pe._container.clientHeight/2,Le=pe.unproject([0,ye]),De=pe.unproject([Q,ye]),Qe=Le.distanceTo(De);if(ge&&ge.unit==="imperial"){var vt=3.2808*Qe;if(vt>5280){var Mt=vt/5280;Pc(Z,Q,Mt,pe._getUIString("ScaleControl.Miles"))}else Pc(Z,Q,vt,pe._getUIString("ScaleControl.Feet"))}else if(ge&&ge.unit==="nautical"){var Yt=Qe/1852;Pc(Z,Q,Yt,pe._getUIString("ScaleControl.NauticalMiles"))}else Qe>=1e3?Pc(Z,Q,Qe/1e3,pe._getUIString("ScaleControl.Kilometers")):Pc(Z,Q,Qe,pe._getUIString("ScaleControl.Meters"))}function Pc(pe,Z,ge,Q){var ye=rp(ge),Le=ye/ge;pe.style.width=Z*Le+"px",pe.innerHTML=ye+"&nbsp;"+Q}function Ph(pe){var Z=Math.pow(10,Math.ceil(-Math.log(pe)/Math.LN10));return Math.round(pe*Z)/Z}function rp(pe){var Z=Math.pow(10,(""+Math.floor(pe)).length-1),ge=pe/Z;return ge=ge>=10?10:ge>=5?5:ge>=3?3:ge>=2?2:ge>=1?1:Ph(ge),Z*ge}var Gu=function(Z){this._fullscreen=!1,Z&&Z.container&&(Z.container instanceof t.window.HTMLElement?this._container=Z.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Gu.prototype.onAdd=function(Z){return this._map=Z,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Gu.prototype.onRemove=function(){a.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Gu.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Gu.prototype._setupUI=function(){var Z=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",Z).setAttribute("aria-hidden",!0),Z.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Gu.prototype._updateTitle=function(){var Z=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Z),this._fullscreenButton.title=Z},Gu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Gu.prototype._isFullscreen=function(){return this._fullscreen},Gu.prototype._changeIcon=function(){var Z=t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement;Z===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Gu.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Mf={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},_v=function(pe){function Z(ge){pe.call(this),this.options=t.extend(Object.create(Mf),ge),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return pe&&(Z.__proto__=pe),Z.prototype=Object.create(pe&&pe.prototype),Z.prototype.constructor=Z,Z.prototype.addTo=function(Q){return this._map&&this.remove(),this._map=Q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},Z.prototype.isOpen=function(){return!!this._map},Z.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},Z.prototype.getLngLat=function(){return this._lngLat},Z.prototype.setLngLat=function(Q){return this._lngLat=t.LngLat.convert(Q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Z.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Z.prototype.getElement=function(){return this._container},Z.prototype.setText=function(Q){return this.setDOMContent(t.window.document.createTextNode(Q))},Z.prototype.setHTML=function(Q){var ye=t.window.document.createDocumentFragment(),Le=t.window.document.createElement("body"),De;for(Le.innerHTML=Q;De=Le.firstChild,!!De;)ye.appendChild(De);return this.setDOMContent(ye)},Z.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Z.prototype.setMaxWidth=function(Q){return this.options.maxWidth=Q,this._update(),this},Z.prototype.setDOMContent=function(Q){return this._createContent(),this._content.appendChild(Q),this._update(),this},Z.prototype.addClassName=function(Q){this._container&&this._container.classList.add(Q)},Z.prototype.removeClassName=function(Q){this._container&&this._container.classList.remove(Q)},Z.prototype.toggleClassName=function(Q){if(this._container)return this._container.classList.toggle(Q)},Z.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Z.prototype._onMouseUp=function(Q){this._update(Q.point)},Z.prototype._onMouseMove=function(Q){this._update(Q.point)},Z.prototype._onDrag=function(Q){this._update(Q.point)},Z.prototype._update=function(Q){var ye=this,Le=this._lngLat||this._trackPointer;if(!(!this._map||!Le||!this._content)&&(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Dr){return ye._container.classList.add(Dr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=hu(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!Q))){var De=this._pos=this._trackPointer&&Q?Q:this._map.project(this._lngLat),Qe=this.options.anchor,vt=Rh(this.options.offset);if(!Qe){var Mt=this._container.offsetWidth,Yt=this._container.offsetHeight,ar;De.y+vt.bottom.y<Yt?ar=["top"]:De.y>this._map.transform.height-Yt?ar=["bottom"]:ar=[],De.x<Mt/2?ar.push("left"):De.x>this._map.transform.width-Mt/2&&ar.push("right"),ar.length===0?Qe="bottom":Qe=ar.join("-")}var cr=De.add(vt[Qe]).round();a.setTransform(this._container,Zf[Qe]+" translate("+cr.x+"px,"+cr.y+"px)"),Ch(this._container,Qe,"popup")}},Z.prototype._onClose=function(){this.remove()},Z}(t.Evented);function Rh(pe){if(pe)if(typeof pe=="number"){var Z=Math.round(Math.sqrt(.5*Math.pow(pe,2)));return{center:new t.Point(0,0),top:new t.Point(0,pe),"top-left":new t.Point(Z,Z),"top-right":new t.Point(-Z,Z),bottom:new t.Point(0,-pe),"bottom-left":new t.Point(Z,-Z),"bottom-right":new t.Point(-Z,-Z),left:new t.Point(pe,0),right:new t.Point(-pe,0)}}else if(pe instanceof t.Point||Array.isArray(pe)){var ge=t.Point.convert(pe);return{center:ge,top:ge,"top-left":ge,"top-right":ge,bottom:ge,"bottom-left":ge,"bottom-right":ge,left:ge,right:ge}}else return{center:t.Point.convert(pe.center||[0,0]),top:t.Point.convert(pe.top||[0,0]),"top-left":t.Point.convert(pe["top-left"]||[0,0]),"top-right":t.Point.convert(pe["top-right"]||[0,0]),bottom:t.Point.convert(pe.bottom||[0,0]),"bottom-left":t.Point.convert(pe["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(pe["bottom-right"]||[0,0]),left:t.Point.convert(pe.left||[0,0]),right:t.Point.convert(pe.right||[0,0])};else return Rh(new t.Point(0,0))}var np={version:t.version,supported:i,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:yc,NavigationControl:Xf,GeolocateControl:Xc,AttributionControl:Vu,ScaleControl:Kf,FullscreenControl:Gu,Popup:_v,Marker:Lc,Style:is,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:Ur,clearPrewarmedResources:fn,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(pe){t.config.ACCESS_TOKEN=pe},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(pe){t.config.API_URL=pe},get workerCount(){return Mr.workerCount},set workerCount(pe){Mr.workerCount=pe},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(pe){t.config.MAX_PARALLEL_IMAGE_REQUESTS=pe},clearStorage:function(Z){t.clearTileCache(Z)},workerUrl:""};return np}),m})},{}],240:[function(e,I,B){I.exports=Math.log2||function(u){return Math.log(u)*Math.LOG2E}},{}],241:[function(e,I,B){I.exports=s;var u=e("mouse-event");function s(m,x){x||(x=m,m=window);var t=0,i=0,a=0,r={shift:!1,alt:!1,control:!1,meta:!1},n=!1;function f(M){var w=!1;return"altKey"in M&&(w=w||M.altKey!==r.alt,r.alt=!!M.altKey),"shiftKey"in M&&(w=w||M.shiftKey!==r.shift,r.shift=!!M.shiftKey),"ctrlKey"in M&&(w=w||M.ctrlKey!==r.control,r.control=!!M.ctrlKey),"metaKey"in M&&(w=w||M.metaKey!==r.meta,r.meta=!!M.metaKey),w}function l(M,w){var T=u.x(w),_=u.y(w);"buttons"in w&&(M=w.buttons|0),(M!==t||T!==i||_!==a||f(w))&&(t=M|0,i=T||0,a=_||0,x&&x(t,i,a,r))}function o(M){l(0,M)}function c(){(t||i||a||r.shift||r.alt||r.meta||r.control)&&(i=a=0,t=0,r.shift=r.alt=r.control=r.meta=!1,x&&x(0,0,0,r))}function v(M){f(M)&&x&&x(t,i,a,r)}function d(M){u.buttons(M)===0?l(0,M):l(t,M)}function p(M){l(t|u.buttons(M),M)}function y(M){l(t&~u.buttons(M),M)}function g(){n||(n=!0,m.addEventListener("mousemove",d),m.addEventListener("mousedown",p),m.addEventListener("mouseup",y),m.addEventListener("mouseleave",o),m.addEventListener("mouseenter",o),m.addEventListener("mouseout",o),m.addEventListener("mouseover",o),m.addEventListener("blur",c),m.addEventListener("keyup",v),m.addEventListener("keydown",v),m.addEventListener("keypress",v),m!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",v),window.addEventListener("keydown",v),window.addEventListener("keypress",v)))}function A(){!n||(n=!1,m.removeEventListener("mousemove",d),m.removeEventListener("mousedown",p),m.removeEventListener("mouseup",y),m.removeEventListener("mouseleave",o),m.removeEventListener("mouseenter",o),m.removeEventListener("mouseout",o),m.removeEventListener("mouseover",o),m.removeEventListener("blur",c),m.removeEventListener("keyup",v),m.removeEventListener("keydown",v),m.removeEventListener("keypress",v),m!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",v),window.removeEventListener("keydown",v),window.removeEventListener("keypress",v)))}g();var b={element:m};return Object.defineProperties(b,{enabled:{get:function(){return n},set:function(M){M?g():A()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),b}},{"mouse-event":243}],242:[function(e,I,B){var u={left:0,top:0};I.exports=s;function s(x,t,i){t=t||x.currentTarget||x.srcElement,Array.isArray(i)||(i=[0,0]);var a=x.clientX||0,r=x.clientY||0,n=m(t);return i[0]=a-n.left,i[1]=r-n.top,i}function m(x){return x===window||x===document||x===document.body?u:x.getBoundingClientRect()}},{}],243:[function(e,I,B){function u(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var i=t.which;if(i===2)return 4;if(i===3)return 2;if(i>0)return 1<<i-1}else if("button"in t){var i=t.button;if(i===1)return 4;if(i===2)return 2;if(i>=0)return 1<<i}}return 0}B.buttons=u;function s(t){return t.target||t.srcElement||window}B.element=s;function m(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var i=s(t),a=i.getBoundingClientRect();return t.clientX-a.left}return 0}B.x=m;function x(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var i=s(t),a=i.getBoundingClientRect();return t.clientY-a.top}return 0}B.y=x},{}],244:[function(e,I,B){var u=e("to-px");I.exports=s;function s(m,x,t){typeof m=="function"&&(t=!!x,x=m,m=window);var i=u("ex",m),a=function(r){t&&r.preventDefault();var n=r.deltaX||0,f=r.deltaY||0,l=r.deltaZ||0,o=r.deltaMode,c=1;switch(o){case 1:c=i;break;case 2:c=window.innerHeight;break}if(n*=c,f*=c,l*=c,n||f||l)return x(n,f,l,r)};return m.addEventListener("wheel",a),a}},{"to-px":314}],245:[function(e,I,B){(function(u,s){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(x,t,i){t[x]=t[x]||i(),typeof I!="undefined"&&I.exports&&(I.exports=t[x])})("Promise",typeof u!="undefined"?u:this,function(){var x,t,i,a=Object.prototype.toString,r=typeof s!="undefined"?function(M){return s(M)}:setTimeout;try{Object.defineProperty({},"x",{}),x=function(M,w,T,_){return Object.defineProperty(M,w,{value:T,writable:!0,configurable:_!==!1})}}catch{x=function(w,T,_){return w[T]=_,w}}i=function(){var M,w,T;function _(h,L){this.fn=h,this.self=L,this.next=void 0}return{add:function(L,S){T=new _(L,S),w?w.next=T:M=T,w=T,T=void 0},drain:function(){var L=M;for(M=w=t=void 0;L;)L.fn.call(L.self),L=L.next}}}();function n(b,M){i.add(b,M),t||(t=r(i.drain))}function f(b){var M,w=typeof b;return b!=null&&(w=="object"||w=="function")&&(M=b.then),typeof M=="function"?M:!1}function l(){for(var b=0;b<this.chain.length;b++)o(this,this.state===1?this.chain[b].success:this.chain[b].failure,this.chain[b]);this.chain.length=0}function o(b,M,w){var T,_;try{M===!1?w.reject(b.msg):(M===!0?T=b.msg:T=M.call(void 0,b.msg),T===w.promise?w.reject(TypeError("Promise-chain cycle")):(_=f(T))?_.call(T,w.resolve,w.reject):w.resolve(T))}catch(h){w.reject(h)}}function c(b){var M,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(M=f(b))?n(function(){var T=new p(w);try{M.call(b,function(){c.apply(T,arguments)},function(){v.apply(T,arguments)})}catch(_){v.call(T,_)}}):(w.msg=b,w.state=1,w.chain.length>0&&n(l,w))}catch(T){v.call(new p(w),T)}}}function v(b){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=b,M.state=2,M.chain.length>0&&n(l,M))}function d(b,M,w,T){for(var _=0;_<M.length;_++)(function(L){b.resolve(M[L]).then(function(k){w(L,k)},T)})(_)}function p(b){this.def=b,this.triggered=!1}function y(b){this.promise=b,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(b){if(typeof b!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new y(this);this.then=function(T,_){var h={success:typeof T=="function"?T:!0,failure:typeof _=="function"?_:!1};return h.promise=new this.constructor(function(S,k){if(typeof S!="function"||typeof k!="function")throw TypeError("Not a function");h.resolve=S,h.reject=k}),M.chain.push(h),M.state!==0&&n(l,M),h.promise},this.catch=function(T){return this.then(void 0,T)};try{b.call(void 0,function(T){c.call(M,T)},function(T){v.call(M,T)})}catch(w){v.call(M,w)}}var A=x({},"constructor",g,!1);return g.prototype=A,x(A,"__NPO__",0,!1),x(g,"resolve",function(M){var w=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new w(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");_(M)})}),x(g,"reject",function(M){return new this(function(T,_){if(typeof T!="function"||typeof _!="function")throw TypeError("Not a function");_(M)})}),x(g,"all",function(M){var w=this;return a.call(M)!="[object Array]"?w.reject(TypeError("Not an array")):M.length===0?w.resolve([]):new w(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");var L=M.length,S=Array(L),k=0;d(w,M,function(O,F){S[O]=F,++k===L&&_(S)},h)})}),x(g,"race",function(M){var w=this;return a.call(M)!="[object Array]"?w.reject(TypeError("Not an array")):new w(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");d(w,M,function(S,k){_(k)},h)})}),g})}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{},e("timers").setImmediate)},{timers:311}],246:[function(e,I,B){var u=Math.PI,s=r(120);I.exports=m;function m(n){for(var f,l=[],o=0,c=0,v=0,d=0,p=null,y=null,g=0,A=0,b=0,M=n.length;b<M;b++){var w=n[b],T=w[0];switch(T){case"M":v=w[1],d=w[2];break;case"A":w=i(g,A,w[1],w[2],r(w[3]),w[4],w[5],w[6],w[7]),w.unshift("C"),w.length>7&&(l.push(w.splice(0,7)),w.unshift("C"));break;case"S":var _=g,h=A;(f=="C"||f=="S")&&(_+=_-o,h+=h-c),w=["C",_,h,w[1],w[2],w[3],w[4]];break;case"T":f=="Q"||f=="T"?(p=g*2-p,y=A*2-y):(p=g,y=A),w=t(g,A,p,y,w[1],w[2]);break;case"Q":p=w[1],y=w[2],w=t(g,A,w[1],w[2],w[3],w[4]);break;case"L":w=x(g,A,w[1],w[2]);break;case"H":w=x(g,A,w[1],A);break;case"V":w=x(g,A,g,w[1]);break;case"Z":w=x(g,A,v,d);break}f=T,g=w[w.length-2],A=w[w.length-1],w.length>4?(o=w[w.length-4],c=w[w.length-3]):(o=g,c=A),l.push(w)}return l}function x(n,f,l,o){return["C",n,f,l,o,l,o]}function t(n,f,l,o,c,v){return["C",n/3+2/3*l,f/3+2/3*o,c/3+2/3*l,v/3+2/3*o,c,v]}function i(n,f,l,o,c,v,d,p,y,g){if(g)k=g[0],P=g[1],L=g[2],S=g[3];else{var A=a(n,f,-c);n=A.x,f=A.y,A=a(p,y,-c),p=A.x,y=A.y;var b=(n-p)/2,M=(f-y)/2,w=b*b/(l*l)+M*M/(o*o);w>1&&(w=Math.sqrt(w),l=w*l,o=w*o);var T=l*l,_=o*o,h=(v==d?-1:1)*Math.sqrt(Math.abs((T*_-T*M*M-_*b*b)/(T*M*M+_*b*b)));h==1/0&&(h=1);var L=h*l*M/o+(n+p)/2,S=h*-o*b/l+(f+y)/2,k=Math.asin(((f-S)/o).toFixed(9)),P=Math.asin(((y-S)/o).toFixed(9));k=n<L?u-k:k,P=p<L?u-P:P,k<0&&(k=u*2+k),P<0&&(P=u*2+P),d&&k>P&&(k=k-u*2),!d&&P>k&&(P=P-u*2)}if(Math.abs(P-k)>s){var O=P,F=p,D=y;P=k+s*(d&&P>k?1:-1),p=L+l*Math.cos(P),y=S+o*Math.sin(P);var R=i(p,y,l,o,c,0,d,F,D,[P,O,L,S])}var U=Math.tan((P-k)/4),N=4/3*l*U,X=4/3*o*U,j=[2*n-(n+N*Math.sin(k)),2*f-(f-X*Math.cos(k)),p+N*Math.sin(P),y-X*Math.cos(P),p,y];if(g)return j;R&&(j=j.concat(R));for(var ee=0;ee<j.length;){var q=a(j[ee],j[ee+1],c);j[ee++]=q.x,j[ee++]=q.y}return j}function a(n,f,l){return{x:n*Math.cos(l)-f*Math.sin(l),y:n*Math.sin(l)+f*Math.cos(l)}}function r(n){return n*(u/180)}},{}],247:[function(e,I,B){var u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function x(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function t(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var a={},r=0;r<10;r++)a["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(a).map(function(l){return a[l]});if(n.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(l){f[l]=l}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}I.exports=t()?Object.assign:function(i,a){for(var r,n=x(i),f,l=1;l<arguments.length;l++){r=Object(arguments[l]);for(var o in r)s.call(r,o)&&(n[o]=r[o]);if(u){f=u(r);for(var c=0;c<f.length;c++)m.call(r,f[c])&&(n[f[c]]=r[f[c]])}}return n}},{}],248:[function(e,I,B){function u(x,t){if(typeof x!="string")return[x];var i=[x];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var a=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],r=t.escape||"___",n=!!t.flat;a.forEach(function(o){var c=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),v=[];function d(p,y,g){var A=i.push(p.slice(o[0].length,-o[1].length))-1;return v.push(A),r+A+r}i.forEach(function(p,y){for(var g,A=0;p!=g;)if(g=p,p=p.replace(c,d),A++>1e4)throw Error("References have circular dependency. Please, check them.");i[y]=p}),v=v.reverse(),i=i.map(function(p){return v.forEach(function(y){p=p.replace(new RegExp("(\\"+r+y+"\\"+r+")","g"),o[0]+"$1"+o[1])}),p})});var f=new RegExp("\\"+r+"([0-9]+)\\"+r);function l(o,c,v){for(var d=[],p,y=0;p=f.exec(o);){if(y++>1e4)throw Error("Circular references in parenthesis");d.push(o.slice(0,p.index)),d.push(l(c[p[1]],c)),o=o.slice(p.index+p[0].length)}return d.push(o),d}return n?i:l(i[0],i)}function s(x,t){if(t&&t.flat){var i=t&&t.escape||"___",a=x[0],r;if(!a)return"";for(var n=new RegExp("\\"+i+"([0-9]+)\\"+i),f=0;a!=r;){if(f++>1e4)throw Error("Circular references in "+x);r=a,a=a.replace(n,l)}return a}return x.reduce(function o(c,v){return Array.isArray(v)&&(v=v.reduce(o,"")),c+v},"");function l(o,c){if(x[c]==null)throw Error("Reference "+c+"is undefined");return x[c]}}function m(x,t){return Array.isArray(x)?s(x,t):u(x,t)}m.parse=u,m.stringify=s,I.exports=m},{}],249:[function(e,I,B){var u=e("pick-by-alias");I.exports=s;function s(m){var x;return arguments.length>1&&(m=arguments),typeof m=="string"?m=m.split(/\s/).map(parseFloat):typeof m=="number"&&(m=[m]),m.length&&typeof m[0]=="number"?m.length===1?x={width:m[0],height:m[0],x:0,y:0}:m.length===2?x={width:m[0],height:m[1],x:0,y:0}:x={x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0}:m&&(m=u(m,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),x={x:m.left||0,y:m.top||0},m.width==null?m.right?x.width=m.right-x.x:x.width=0:x.width=m.width,m.height==null?m.bottom?x.height=m.bottom-x.y:x.height=0:x.height=m.height),x}},{"pick-by-alias":253}],250:[function(e,I,B){I.exports=m;var u={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function m(i){var a=[];return i.replace(s,function(r,n,f){var l=n.toLowerCase();for(f=t(f),l=="m"&&f.length>2&&(a.push([n].concat(f.splice(0,2))),l="l",n=n=="m"?"l":"L");;){if(f.length==u[l])return f.unshift(n),a.push(f);if(f.length<u[l])throw new Error("malformed path data");a.push([n].concat(f.splice(0,u[l])))}}),a}var x=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function t(i){var a=i.match(x);return a?a.map(Number):[]}},{}],251:[function(e,I,B){I.exports=function(s,m){m||(m=[0,""]),s=String(s);var x=parseFloat(s,10);return m[0]=x,m[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",m}},{}],252:[function(e,I,B){(function(u){(function(){(function(){var s,m,x,t,i,a;typeof performance!="undefined"&&performance!==null&&performance.now?I.exports=function(){return performance.now()}:typeof u!="undefined"&&u!==null&&u.hrtime?(I.exports=function(){return(s()-i)/1e6},m=u.hrtime,s=function(){var r;return r=m(),r[0]*1e9+r[1]},t=s(),a=u.uptime()*1e9,i=t-a):Date.now?(I.exports=function(){return Date.now()-x},x=Date.now()):(I.exports=function(){return new Date().getTime()-x},x=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:277}],253:[function(e,I,B){I.exports=function(x,t,i){var a={},r,n;if(typeof t=="string"&&(t=s(t)),Array.isArray(t)){var f={};for(n=0;n<t.length;n++)f[t[n]]=!0;t=f}for(r in t)t[r]=s(t[r]);var l={};for(r in t){var o=t[r];if(Array.isArray(o))for(n=0;n<o.length;n++){var c=o[n];if(i&&(l[c]=!0),c in x){if(a[r]=x[c],i)for(var v=n;v<o.length;v++)l[o[v]]=!0;break}}else r in x&&(t[r]&&(a[r]=x[r]),i&&(l[r]=!0))}if(i)for(r in x)l[r]||(a[r]=x[r]);return a};var u={};function s(m){return u[m]?u[m]:(typeof m=="string"&&(m=u[m]=m.split(/\s*,\s*|\s+/)),m)}},{}],254:[function(e,I,B){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var u=e("./lib/build-log"),s=e("./lib/epsilon"),m=e("./lib/intersecter"),x=e("./lib/segment-chainer"),t=e("./lib/segment-selector"),i=e("./lib/geojson"),a=!1,r=s(),n;n={buildLog:function(l){return l===!0?a=u():l===!1&&(a=!1),a===!1?!1:a.list},epsilon:function(l){return r.epsilon(l)},segments:function(l){var o=m(!0,r,a);return l.regions.forEach(o.addRegion),{segments:o.calculate(l.inverted),inverted:l.inverted}},combine:function(l,o){var c=m(!1,r,a);return{combined:c.calculate(l.segments,l.inverted,o.segments,o.inverted),inverted1:l.inverted,inverted2:o.inverted}},selectUnion:function(l){return{segments:t.union(l.combined,a),inverted:l.inverted1||l.inverted2}},selectIntersect:function(l){return{segments:t.intersect(l.combined,a),inverted:l.inverted1&&l.inverted2}},selectDifference:function(l){return{segments:t.difference(l.combined,a),inverted:l.inverted1&&!l.inverted2}},selectDifferenceRev:function(l){return{segments:t.differenceRev(l.combined,a),inverted:!l.inverted1&&l.inverted2}},selectXor:function(l){return{segments:t.xor(l.combined,a),inverted:l.inverted1!==l.inverted2}},polygon:function(l){return{regions:x(l.segments,r,a),inverted:l.inverted}},polygonFromGeoJSON:function(l){return i.toPolygon(n,l)},polygonToGeoJSON:function(l){return i.fromPolygon(n,r,l)},union:function(l,o){return f(l,o,n.selectUnion)},intersect:function(l,o){return f(l,o,n.selectIntersect)},difference:function(l,o){return f(l,o,n.selectDifference)},differenceRev:function(l,o){return f(l,o,n.selectDifferenceRev)},xor:function(l,o){return f(l,o,n.selectXor)}};function f(l,o,c){var v=n.segments(l),d=n.segments(o),p=n.combine(v,d),y=c(p);return n.polygon(y)}typeof window=="object"&&(window.PolyBool=n),I.exports=n},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(e,I,B){function u(){var s,m=0,x=!1;function t(i,a){return s.list.push({type:i,data:a?JSON.parse(JSON.stringify(a)):void 0}),s}return s={list:[],segmentId:function(){return m++},checkIntersection:function(i,a){return t("check",{seg1:i,seg2:a})},segmentChop:function(i,a){return t("div_seg",{seg:i,pt:a}),t("chop",{seg:i,pt:a})},statusRemove:function(i){return t("pop_seg",{seg:i})},segmentUpdate:function(i){return t("seg_update",{seg:i})},segmentNew:function(i,a){return t("new_seg",{seg:i,primary:a})},segmentRemove:function(i){return t("rem_seg",{seg:i})},tempStatus:function(i,a,r){return t("temp_status",{seg:i,above:a,below:r})},rewind:function(i){return t("rewind",{seg:i})},status:function(i,a,r){return t("status",{seg:i,above:a,below:r})},vert:function(i){return i===x?s:(x=i,t("vert",{x:i}))},log:function(i){return typeof i!="string"&&(i=JSON.stringify(i,!1,"  ")),t("log",{txt:i})},reset:function(){return t("reset")},selected:function(i){return t("selected",{segs:i})},chainStart:function(i){return t("chain_start",{seg:i})},chainRemoveHead:function(i,a){return t("chain_rem_head",{index:i,pt:a})},chainRemoveTail:function(i,a){return t("chain_rem_tail",{index:i,pt:a})},chainNew:function(i,a){return t("chain_new",{pt1:i,pt2:a})},chainMatch:function(i){return t("chain_match",{index:i})},chainClose:function(i){return t("chain_close",{index:i})},chainAddHead:function(i,a){return t("chain_add_head",{index:i,pt:a})},chainAddTail:function(i,a){return t("chain_add_tail",{index:i,pt:a})},chainConnect:function(i,a){return t("chain_con",{index1:i,index2:a})},chainReverse:function(i){return t("chain_rev",{index:i})},chainJoin:function(i,a){return t("chain_join",{index1:i,index2:a})},done:function(){return t("done")}},s}I.exports=u},{}],256:[function(e,I,B){function u(s){typeof s!="number"&&(s=1e-10);var m={epsilon:function(x){return typeof x=="number"&&(s=x),s},pointAboveOrOnLine:function(x,t,i){var a=t[0],r=t[1],n=i[0],f=i[1],l=x[0],o=x[1];return(n-a)*(o-r)-(f-r)*(l-a)>=-s},pointBetween:function(x,t,i){var a=x[1]-t[1],r=i[0]-t[0],n=x[0]-t[0],f=i[1]-t[1],l=n*r+a*f;if(l<s)return!1;var o=r*r+f*f;return!(l-o>-s)},pointsSameX:function(x,t){return Math.abs(x[0]-t[0])<s},pointsSameY:function(x,t){return Math.abs(x[1]-t[1])<s},pointsSame:function(x,t){return m.pointsSameX(x,t)&&m.pointsSameY(x,t)},pointsCompare:function(x,t){return m.pointsSameX(x,t)?m.pointsSameY(x,t)?0:x[1]<t[1]?-1:1:x[0]<t[0]?-1:1},pointsCollinear:function(x,t,i){var a=x[0]-t[0],r=x[1]-t[1],n=t[0]-i[0],f=t[1]-i[1];return Math.abs(a*f-n*r)<s},linesIntersect:function(x,t,i,a){var r=t[0]-x[0],n=t[1]-x[1],f=a[0]-i[0],l=a[1]-i[1],o=r*l-n*f;if(Math.abs(o)<s)return!1;var c=x[0]-i[0],v=x[1]-i[1],d=(f*v-l*c)/o,p=(r*v-n*c)/o,y={alongA:0,alongB:0,pt:[x[0]+d*r,x[1]+d*n]};return d<=-s?y.alongA=-2:d<s?y.alongA=-1:d-1<=-s?y.alongA=0:d-1<s?y.alongA=1:y.alongA=2,p<=-s?y.alongB=-2:p<s?y.alongB=-1:p-1<=-s?y.alongB=0:p-1<s?y.alongB=1:y.alongB=2,y},pointInsideRegion:function(x,t){for(var i=x[0],a=x[1],r=t[t.length-1][0],n=t[t.length-1][1],f=!1,l=0;l<t.length;l++){var o=t[l][0],c=t[l][1];c-a>s!=n-a>s&&(r-o)*(a-c)/(n-c)+o-i>s&&(f=!f),r=o,n=c}return f}};return m}I.exports=u},{}],257:[function(e,I,B){var u={toPolygon:function(s,m){function x(a){if(a.length<=0)return s.segments({inverted:!1,regions:[]});function r(l){var o=l.slice(0,l.length-1);return s.segments({inverted:!1,regions:[o]})}for(var n=r(a[0]),f=1;f<a.length;f++)n=s.selectDifference(s.combine(n,r(a[f])));return n}if(m.type==="Polygon")return s.polygon(x(m.coordinates));if(m.type==="MultiPolygon"){for(var t=s.segments({inverted:!1,regions:[]}),i=0;i<m.coordinates.length;i++)t=s.selectUnion(s.combine(t,x(m.coordinates[i])));return s.polygon(t)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(s,m,x){x=s.polygon(s.segments(x));function t(d,p){return m.pointInsideRegion([(d[0][0]+d[1][0])*.5,(d[0][1]+d[1][1])*.5],p)}function i(d){return{region:d,children:[]}}var a=i(null);function r(d,p){for(var y=0;y<d.children.length;y++){var g=d.children[y];if(t(p,g.region)){r(g,p);return}}for(var A=i(p),y=0;y<d.children.length;y++){var g=d.children[y];t(g.region,p)&&(A.children.push(g),d.children.splice(y,1),y--)}d.children.push(A)}for(var n=0;n<x.regions.length;n++){var f=x.regions[n];f.length<3||r(a,f)}function l(d,p){for(var y=0,g=d[d.length-1][0],A=d[d.length-1][1],b=[],M=0;M<d.length;M++){var w=d[M][0],T=d[M][1];b.push([w,T]),y+=T*g-w*A,g=w,A=T}var _=y<0;return _!==p&&b.reverse(),b.push([b[0][0],b[0][1]]),b}var o=[];function c(d){var p=[l(d.region,!1)];o.push(p);for(var y=0;y<d.children.length;y++)p.push(v(d.children[y]))}function v(d){for(var p=0;p<d.children.length;p++)c(d.children[p]);return l(d.region,!0)}for(var n=0;n<a.children.length;n++)c(a.children[n]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};I.exports=u},{}],258:[function(e,I,B){var u=e("./linked-list");function s(m,x,t){function i(y,g){return{id:t?t.segmentId():-1,start:y,end:g,myFill:{above:null,below:null},otherFill:null}}function a(y,g,A){return{id:t?t.segmentId():-1,start:y,end:g,myFill:{above:A.myFill.above,below:A.myFill.below},otherFill:null}}var r=u.create();function n(y,g,A,b,M,w){var T=x.pointsCompare(g,M);return T!==0?T:x.pointsSame(A,w)?0:y!==b?y?1:-1:x.pointAboveOrOnLine(A,b?M:w,b?w:M)?1:-1}function f(y,g){r.insertBefore(y,function(A){var b=n(y.isStart,y.pt,g,A.isStart,A.pt,A.other.pt);return b<0})}function l(y,g){var A=u.node({isStart:!0,pt:y.start,seg:y,primary:g,other:null,status:null});return f(A,y.end),A}function o(y,g,A){var b=u.node({isStart:!1,pt:g.end,seg:g,primary:A,other:y,status:null});y.other=b,f(b,y.pt)}function c(y,g){var A=l(y,g);return o(A,y,g),A}function v(y,g){t&&t.segmentChop(y.seg,g),y.other.remove(),y.seg.end=g,y.other.pt=g,f(y.other,y.pt)}function d(y,g){var A=a(g,y.seg.end,y.seg);return v(y,g),c(A,y.primary)}function p(y,g){var A=u.create();function b(R,U){var N=R.seg.start,X=R.seg.end,j=U.seg.start,ee=U.seg.end;return x.pointsCollinear(N,j,ee)?x.pointsCollinear(X,j,ee)||x.pointAboveOrOnLine(X,j,ee)?1:-1:x.pointAboveOrOnLine(N,j,ee)?1:-1}function M(R){return A.findTransition(function(U){var N=b(R,U.ev);return N>0})}function w(R,U){var N=R.seg,X=U.seg,j=N.start,ee=N.end,q=X.start,G=X.end;t&&t.checkIntersection(N,X);var J=x.linesIntersect(j,ee,q,G);if(J===!1){if(!x.pointsCollinear(j,ee,q)||x.pointsSame(j,G)||x.pointsSame(ee,q))return!1;var le=x.pointsSame(j,q),fe=x.pointsSame(ee,G);if(le&&fe)return U;var se=!le&&x.pointBetween(j,q,G),V=!fe&&x.pointBetween(ee,q,G);if(le)return V?d(U,ee):d(R,G),U;se&&(fe||(V?d(U,ee):d(R,G)),d(U,j))}else J.alongA===0&&(J.alongB===-1?d(R,q):J.alongB===0?d(R,J.pt):J.alongB===1&&d(R,G)),J.alongB===0&&(J.alongA===-1?d(U,j):J.alongA===0?d(U,J.pt):J.alongA===1&&d(U,ee));return!1}for(var T=[];!r.isEmpty();){var _=r.getHead();if(t&&t.vert(_.pt[0]),_.isStart){let R=function(){if(L){var U=w(_,L);if(U)return U}return S?w(_,S):!1};t&&t.segmentNew(_.seg,_.primary);var h=M(_),L=h.before?h.before.ev:null,S=h.after?h.after.ev:null;t&&t.tempStatus(_.seg,L?L.seg:!1,S?S.seg:!1);var k=R();if(k){if(m){var P;_.seg.myFill.below===null?P=!0:P=_.seg.myFill.above!==_.seg.myFill.below,P&&(k.seg.myFill.above=!k.seg.myFill.above)}else k.seg.otherFill=_.seg.myFill;t&&t.segmentUpdate(k.seg),_.other.remove(),_.remove()}if(r.getHead()!==_){t&&t.rewind(_.seg);continue}if(m){var P;_.seg.myFill.below===null?P=!0:P=_.seg.myFill.above!==_.seg.myFill.below,S?_.seg.myFill.below=S.seg.myFill.above:_.seg.myFill.below=y,P?_.seg.myFill.above=!_.seg.myFill.below:_.seg.myFill.above=_.seg.myFill.below}else if(_.seg.otherFill===null){var O;S?_.primary===S.primary?O=S.seg.otherFill.above:O=S.seg.myFill.above:O=_.primary?g:y,_.seg.otherFill={above:O,below:O}}t&&t.status(_.seg,L?L.seg:!1,S?S.seg:!1),_.other.status=h.insert(u.node({ev:_}))}else{var F=_.status;if(F===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(A.exists(F.prev)&&A.exists(F.next)&&w(F.prev.ev,F.next.ev),t&&t.statusRemove(F.ev.seg),F.remove(),!_.primary){var D=_.seg.myFill;_.seg.myFill=_.seg.otherFill,_.seg.otherFill=D}T.push(_.seg)}r.getHead().remove()}return t&&t.done(),T}return m?{addRegion:function(y){for(var g,A=y[y.length-1],b=0;b<y.length;b++){g=A,A=y[b];var M=x.pointsCompare(g,A);M!==0&&c(i(M<0?g:A,M<0?A:g),!0)}},calculate:function(y){return p(y,!1)}}:{calculate:function(y,g,A,b){return y.forEach(function(M){c(a(M.start,M.end,M),!0)}),A.forEach(function(M){c(a(M.start,M.end,M),!1)}),p(g,b)}}}I.exports=s},{"./linked-list":259}],259:[function(e,I,B){var u={create:function(){var s={root:{root:!0,next:null},exists:function(m){return!(m===null||m===s.root)},isEmpty:function(){return s.root.next===null},getHead:function(){return s.root.next},insertBefore:function(m,x){for(var t=s.root,i=s.root.next;i!==null;){if(x(i)){m.prev=i.prev,m.next=i,i.prev.next=m,i.prev=m;return}t=i,i=i.next}t.next=m,m.prev=t,m.next=null},findTransition:function(m){for(var x=s.root,t=s.root.next;t!==null&&!m(t);)x=t,t=t.next;return{before:x===s.root?null:x,after:t,insert:function(i){return i.prev=x,i.next=t,x.next=i,t!==null&&(t.prev=i),i}}}};return s},node:function(s){return s.prev=null,s.next=null,s.remove=function(){s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.prev=null,s.next=null},s}};I.exports=u},{}],260:[function(e,I,B){function u(s,m,x){var t=[],i=[];return s.forEach(function(a){var r=a.start,n=a.end;if(m.pointsSame(r,n)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}x&&x.chainStart(a);var f={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},o=f;function c(O,F,D){return o.index=O,o.matches_head=F,o.matches_pt1=D,o===f?(o=l,!1):(o=null,!0)}for(var v=0;v<t.length;v++){var d=t[v],p=d[0];d[1];var y=d[d.length-1];if(d[d.length-2],m.pointsSame(p,r)){if(c(v,!0,!0))break}else if(m.pointsSame(p,n)){if(c(v,!0,!1))break}else if(m.pointsSame(y,r)){if(c(v,!1,!0))break}else if(m.pointsSame(y,n)&&c(v,!1,!1))break}if(o===f){t.push([r,n]),x&&x.chainNew(r,n);return}if(o===l){x&&x.chainMatch(f.index);var g=f.index,A=f.matches_pt1?n:r,b=f.matches_head,d=t[g],M=b?d[0]:d[d.length-1],w=b?d[1]:d[d.length-2],T=b?d[d.length-1]:d[0],_=b?d[d.length-2]:d[1];if(m.pointsCollinear(w,M,A)&&(b?(x&&x.chainRemoveHead(f.index,A),d.shift()):(x&&x.chainRemoveTail(f.index,A),d.pop()),M=w),m.pointsSame(T,A)){t.splice(g,1),m.pointsCollinear(_,T,M)&&(b?(x&&x.chainRemoveTail(f.index,M),d.pop()):(x&&x.chainRemoveHead(f.index,M),d.shift())),x&&x.chainClose(f.index),i.push(d);return}b?(x&&x.chainAddHead(f.index,A),d.unshift(A)):(x&&x.chainAddTail(f.index,A),d.push(A));return}function h(O){x&&x.chainReverse(O),t[O].reverse()}function L(O,F){var D=t[O],R=t[F],U=D[D.length-1],N=D[D.length-2],X=R[0],j=R[1];m.pointsCollinear(N,U,X)&&(x&&x.chainRemoveTail(O,U),D.pop(),U=N),m.pointsCollinear(U,X,j)&&(x&&x.chainRemoveHead(F,X),R.shift()),x&&x.chainJoin(O,F),t[O]=D.concat(R),t.splice(F,1)}var S=f.index,k=l.index;x&&x.chainConnect(S,k);var P=t[S].length<t[k].length;f.matches_head?l.matches_head?P?(h(S),L(S,k)):(h(k),L(k,S)):L(k,S):l.matches_head?L(S,k):P?(h(S),L(k,S)):(h(k),L(S,k))}),i}I.exports=u},{}],261:[function(e,I,B){function u(m,x,t){var i=[];return m.forEach(function(a){var r=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);x[r]!==0&&i.push({id:t?t.segmentId():-1,start:a.start,end:a.end,myFill:{above:x[r]===1,below:x[r]===2},otherFill:null})}),t&&t.selected(i),i}var s={union:function(m,x){return u(m,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],x)},intersect:function(m,x){return u(m,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],x)},difference:function(m,x){return u(m,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],x)},differenceRev:function(m,x){return u(m,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],x)},xor:function(m,x){return u(m,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],x)}};I.exports=s},{}],262:[function(e,I,B){var u=e("stream").Transform,s=e("stream-parser");function m(){u.call(this,{readableObjectMode:!0})}m.prototype=Object.create(u.prototype),m.prototype.constructor=m,s(m.prototype),B.ParserStream=m,B.sliceEq=function(t,i,a){for(var r=i,n=0;n<a.length;)if(t[r++]!==a[n++])return!1;return!0},B.str2arr=function(t,i){var a=[],r=0;if(i&&i==="hex")for(;r<t.length;)a.push(parseInt(t.slice(r,r+2),16)),r+=2;else for(;r<t.length;r++)a.push(t.charCodeAt(r)&255);return a},B.readUInt16LE=function(t,i){return t[i]|t[i+1]<<8},B.readUInt16BE=function(t,i){return t[i+1]|t[i]<<8},B.readUInt32LE=function(t,i){return t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]*16777216},B.readUInt32BE=function(t,i){return t[i+3]|t[i+2]<<8|t[i+1]<<16|t[i]*16777216};function x(t,i,a){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=t,i&&(this.code=i),a&&(this.statusCode=a)}x.prototype=Object.create(Error.prototype),x.prototype.constructor=x,B.ProbeError=x},{stream:285,"stream-parser":301}],263:[function(e,I,B){function u(x,t){var i=new Error(x);return i.code=t,i}function s(x){try{return decodeURIComponent(escape(x))}catch{return x}}function m(x,t,i){this.input=x.subarray(t,i),this.start=t;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if(a!=="II*\0"&&a!=="MM\0*")throw u("invalid TIFF signature","EBADDATA");this.big_endian=a[0]==="M"}m.prototype.each=function(x){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var i=this.ifds_to_read.shift();!i.offset||this.scan_ifd(i.id,i.offset,x)}},m.prototype.read_uint16=function(x){var t=this.input;if(x+2>t.length)throw u("unexpected EOF","EBADDATA");return this.big_endian?t[x]*256+t[x+1]:t[x]+t[x+1]*256},m.prototype.read_uint32=function(x){var t=this.input;if(x+4>t.length)throw u("unexpected EOF","EBADDATA");return this.big_endian?t[x]*16777216+t[x+1]*65536+t[x+2]*256+t[x+3]:t[x]+t[x+1]*256+t[x+2]*65536+t[x+3]*16777216},m.prototype.is_subifd_link=function(x,t){return x===0&&t===34665||x===0&&t===34853||x===34665&&t===40965},m.prototype.exif_format_length=function(x){switch(x){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},m.prototype.exif_format_read=function(x,t){var i;switch(x){case 1:case 2:return i=this.input[t],i;case 6:return i=this.input[t],i|(i&128)*33554430;case 3:return i=this.read_uint16(t),i;case 8:return i=this.read_uint16(t),i|(i&32768)*131070;case 4:return i=this.read_uint32(t),i;case 9:return i=this.read_uint32(t),i|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},m.prototype.scan_ifd=function(x,t,i){var a=this.read_uint16(t);t+=2;for(var r=0;r<a;r++){var n=this.read_uint16(t),f=this.read_uint16(t+2),l=this.read_uint32(t+4),o=this.exif_format_length(f),c=l*o,v=c<=4?t+8:this.read_uint32(t+8),d=!1;if(v+c>this.input.length)throw u("unexpected EOF","EBADDATA");for(var p=[],y=v,g=0;g<l;g++,y+=o){var A=this.exif_format_read(f,y);if(A===null){p=null;break}p.push(A)}Array.isArray(p)&&f===2&&(p=s(String.fromCharCode.apply(null,p)),p&&p[p.length-1]==="\0"&&(p=p.slice(0,-1))),this.is_subifd_link(x,n)&&Array.isArray(p)&&Number.isInteger(p[0])&&p[0]>0&&(this.ifds_to_read.push({id:n,offset:p[0]}),d=!0);var b={is_big_endian:this.big_endian,ifd:x,tag:n,format:f,count:l,entry_offset:t+this.start,data_length:c,data_offset:v+this.start,value:p,is_subifd_link:d};if(i(b)===!1){this.aborted=!0;return}t+=12}x===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},I.exports.ExifParser=m,I.exports.get_orientation=function(x){var t=0;try{return new m(x,0,x.length).each(function(i){if(i.ifd===0&&i.tag===274&&Array.isArray(i.value))return t=i.value[0],!1}),t}catch{return-1}}},{}],264:[function(e,I,B){var u=e("./common").readUInt16BE,s=e("./common").readUInt32BE;function m(l,o){if(l.length<4+o)return null;var c=s(l,o);return l.length<c+o||c<8?null:{boxtype:String.fromCharCode.apply(null,l.slice(o+4,o+8)),data:l.slice(o+8,o+c),end:o+c}}I.exports.unbox=m;function x(l,o){for(var c=0;;){var v=m(l,c);if(!v)break;switch(v.boxtype){case"ispe":o.sizes.push({width:s(v.data,4),height:s(v.data,8)});break;case"irot":o.transforms.push({type:"irot",value:v.data[0]&3});break;case"imir":o.transforms.push({type:"imir",value:v.data[0]&1});break}c=v.end}}function t(l,o,c){for(var v=0,d=0;d<c;d++)v=v*256+(l[o+d]||0);return v}function i(l,o){for(var c=l[4]>>4&15,v=l[4]&15,d=l[5]>>4&15,p=u(l,6),y=8,g=0;g<p;g++){var A=u(l,y);y+=2;var b=u(l,y);y+=2;var M=t(l,y,d);y+=d;var w=u(l,y);if(y+=2,b===0&&w===1){var T=t(l,y,c),_=t(l,y+c,v);o.item_loc[A]={length:_,offset:T+M}}y+=w*(c+v)}}function a(l,o){for(var c=u(l,4),v=6,d=0;d<c;d++){var p=m(l,v);if(!p)break;if(p.boxtype==="infe"){for(var y=u(p.data,4),g="",A=8;A<p.data.length&&p.data[A];A++)g+=String.fromCharCode(p.data[A]);o.item_inf[g]=y}v=p.end}}function r(l,o){for(var c=0;;){var v=m(l,c);if(!v)break;v.boxtype==="ipco"&&x(v.data,o),c=v.end}}function n(l,o){for(var c=4;;){var v=m(l,c);if(!v)break;v.boxtype==="iprp"&&r(v.data,o),v.boxtype==="iloc"&&i(v.data,o),v.boxtype==="iinf"&&a(v.data,o),c=v.end}}function f(l){var o=l.reduce(function(d,p){return d.width>p.width||d.width===p.width&&d.height>p.height?d:p}),c=l.reduce(function(d,p){return d.height>p.height||d.height===p.height&&d.width>p.width?d:p}),v;return o.width>c.height||o.width===c.height&&o.height>c.width?v=o:v=c,v}I.exports.readSizeFromMeta=function(l){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(n(l,o),!!o.sizes.length){var c=f(o.sizes),v=1;o.transforms.forEach(function(p){var y={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(p.type==="imir"&&(p.value===0?v=g[v]:(v=g[v],v=y[v],v=y[v])),p.type==="irot")for(var A=0;A<p.value;A++)v=y[v]});var d=null;return o.item_inf.Exif&&(d=o.item_loc[o.item_inf.Exif]),{width:c.width,height:c.height,orientation:o.transforms.length?v:null,variants:o.sizes,exif_location:d}}},I.exports.getMimeType=function(l){var o=String.fromCharCode.apply(null,l.slice(0,4)),c={};c[o]=!0;for(var v=8;v<l.length;v+=4)c[String.fromCharCode.apply(null,l.slice(v,v+4))]=!0;if(!(!c.mif1&&!c.msf1&&!c.miaf))return o==="avif"||o==="avis"||o==="avio"?{type:"avif",mime:"image/avif"}:o==="heic"||o==="heix"?{type:"heic",mime:"image/heic"}:o==="hevc"||o==="hevx"?{type:"heic",mime:"image/heic-sequence"}:c.avif||c.avis?{type:"avif",mime:"image/avif"}:c.heic||c.heix||c.hevc||c.hevx||c.heis?c.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(e,I,B){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt32BE,x=e("../miaf_utils"),t=e("../exif_utils"),i=u("ftyp");I.exports=function(a){if(!!s(a,4,i)){var r=x.unbox(a,0);if(!!r){var n=x.getMimeType(r.data);if(!!n){for(var f,l=r.end;;){var o=x.unbox(a,l);if(!o)break;if(l=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){f=o.data;break}}if(!!f){var c=x.readSizeFromMeta(f);if(!!c){var v={width:c.width,height:c.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(c.variants.length>1&&(v.variants=c.variants),c.orientation&&(v.orientation=c.orientation),c.exif_location&&c.exif_location.offset+c.exif_location.length<=a.length){var d=m(a,c.exif_location.offset),p=a.slice(c.exif_location.offset+d+4,c.exif_location.offset+c.exif_location.length),y=t.get_orientation(p);y>0&&(v.orientation=y)}return v}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(e,I,B){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt16LE,x=u("BM");I.exports=function(t){if(!(t.length<26)&&!!s(t,0,x))return{width:m(t,18),height:m(t,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(e,I,B){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt16LE,x=u("GIF87a"),t=u("GIF89a");I.exports=function(i){if(!(i.length<10)&&!(!s(i,0,x)&&!s(i,0,t)))return{width:m(i,6),height:m(i,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(e,I,B){var u=e("../common").readUInt16LE,s=0,m=1,x=16;I.exports=function(t){var i=u(t,0),a=u(t,2),r=u(t,4);if(!(i!==s||a!==m||!r)){for(var n=[],f={width:0,height:0},l=0;l<r;l++){var o=t[6+x*l]||256,c=t[6+x*l+1]||256,v={width:o,height:c};n.push(v),(o>f.width||c>f.height)&&(f=v)}return{width:f.width,height:f.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(e,I,B){var u=e("../common").readUInt16BE,s=e("../common").str2arr,m=e("../common").sliceEq,x=e("../exif_utils"),t=s("Exif\0\0");I.exports=function(i){if(!(i.length<2)&&!(i[0]!==255||i[1]!==216||i[2]!==255))for(var a=2;;){for(;;){if(i.length-a<2)return;if(i[a++]===255)break}for(var r=i[a++],n;r===255;)r=i[a++];if(208<=r&&r<=217||r===1)n=0;else if(192<=r&&r<=254){if(i.length-a<2)return;n=u(i,a)-2,a+=2}else return;if(r===217||r===218)return;var f;if(r===225&&n>=10&&m(i,a,t)&&(f=x.get_orientation(i.slice(a+6,a+n))),n>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(i.length-a<n)return;var l={width:u(i,a+3),height:u(i,a+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return f>0&&(l.orientation=f),l}a+=n}}},{"../common":262,"../exif_utils":263}],270:[function(e,I,B){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt32BE,x=u(`\x89PNG\r

`),t=u("IHDR");I.exports=function(i){if(!(i.length<24)&&!!s(i,0,x)&&!!s(i,12,t))return{width:m(i,16),height:m(i,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(e,I,B){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt32BE,x=u("8BPS\0");I.exports=function(t){if(!(t.length<6+16)&&!!s(t,0,x))return{width:m(t,6+12),height:m(t,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(e,I,B){function u(o){return o===32||o===9||o===13||o===10}function s(o){return typeof o=="number"&&isFinite(o)&&o>0}function m(o){var c=0,v=o.length;for(o[0]===239&&o[1]===187&&o[2]===191&&(c=3);c<v&&u(o[c]);)c++;return c===v?!1:o[c]===60}var x=/<[-_.:a-zA-Z0-9][^>]*>/,t=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,i=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,a=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,n=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(o){var c=o.match(i),v=o.match(a),d=o.match(r);return{width:c&&(c[1]||c[2]),height:v&&(v[1]||v[2]),viewbox:d&&(d[1]||d[2])}}function l(o){return n.test(o)?o.match(n)[0]:"px"}I.exports=function(o){if(!!m(o)){for(var c="",v=0;v<o.length;v++)c+=String.fromCharCode(o[v]);var d=(c.match(x)||[""])[0];if(!!t.test(d)){var p=f(d),y=parseFloat(p.width),g=parseFloat(p.height);if(p.width&&p.height)return!s(y)||!s(g)?void 0:{width:y,height:g,type:"svg",mime:"image/svg+xml",wUnits:l(p.width),hUnits:l(p.height)};var A=(p.viewbox||"").split(" "),b={width:A[2],height:A[3]},M=parseFloat(b.width),w=parseFloat(b.height);if(!(!s(M)||!s(w))&&l(b.width)===l(b.height)){var T=M/w;return p.width?s(y)?{width:y,height:y/T,type:"svg",mime:"image/svg+xml",wUnits:l(p.width),hUnits:l(p.width)}:void 0:p.height?s(g)?{width:g*T,height:g,type:"svg",mime:"image/svg+xml",wUnits:l(p.height),hUnits:l(p.height)}:void 0:{width:M,height:w,type:"svg",mime:"image/svg+xml",wUnits:l(b.width),hUnits:l(b.height)}}}}}},{}],273:[function(e,I,B){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt16LE,x=e("../common").readUInt16BE,t=e("../common").readUInt32LE,i=e("../common").readUInt32BE,a=u("II*\0"),r=u("MM\0*");function n(o,c,v){return v?x(o,c):m(o,c)}function f(o,c,v){return v?i(o,c):t(o,c)}function l(o,c,v){var d=n(o,c+2,v),p=f(o,c+4,v);return p!==1||d!==3&&d!==4?null:d===3?n(o,c+8,v):f(o,c+8,v)}I.exports=function(o){if(!(o.length<8)&&!(!s(o,0,a)&&!s(o,0,r))){var c=o[0]===77,v=f(o,4,c)-8;if(!(v<0)){var d=v+8;if(!(o.length-d<2)){var p=n(o,d+0,c)*12;if(!(p<=0)&&(d+=2,!(o.length-d<p))){var y,g,A,b;for(y=0;y<p;y+=12)b=n(o,d+y,c),b===256?g=l(o,d+y,c):b===257&&(A=l(o,d+y,c));if(g&&A)return{width:g,height:A,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":262}],274:[function(e,I,B){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt16LE,x=e("../common").readUInt32LE,t=e("../exif_utils"),i=u("RIFF"),a=u("WEBP");function r(l,o){if(!(l[o+3]!==157||l[o+4]!==1||l[o+5]!==42))return{width:m(l,o+6)&16383,height:m(l,o+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(l,o){if(l[o]===47){var c=x(l,o+1);return{width:(c&16383)+1,height:(c>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function f(l,o){return{width:(l[o+6]<<16|l[o+5]<<8|l[o+4])+1,height:(l[o+9]<<o|l[o+8]<<8|l[o+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}I.exports=function(l){if(!(l.length<16)&&!(!s(l,0,i)&&!s(l,8,a))){var o=12,c=null,v=0,d=x(l,4)+8;if(!(d>l.length)){for(;o+8<d;){if(l[o]===0){o++;continue}var p=String.fromCharCode.apply(null,l.slice(o,o+4)),y=x(l,o+4);p==="VP8 "&&y>=10?c=c||r(l,o+8):p==="VP8L"&&y>=9?c=c||n(l,o+8):p==="VP8X"&&y>=10?c=c||f(l,o+8):p==="EXIF"&&(v=t.get_orientation(l.slice(o+8,o+8+y)),o=1/0),o+=8+y}if(!!c)return v>0&&(c.orientation=v),c}}}},{"../common":262,"../exif_utils":263}],275:[function(e,I,B){I.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(e,I,B){var u=e("./lib/parsers_sync");function s(m){for(var x=Object.keys(u),t=0;t<x.length;t++){var i=u[x[t]](m);if(i)return i}return null}I.exports=function(x){return s(x)},I.exports.parsers=u},{"./lib/parsers_sync":275}],277:[function(e,I,B){var u=I.exports={},s,m;function x(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=x}catch{s=x}try{typeof clearTimeout=="function"?m=clearTimeout:m=t}catch{m=t}})();function i(p){if(s===setTimeout)return setTimeout(p,0);if((s===x||!s)&&setTimeout)return s=setTimeout,setTimeout(p,0);try{return s(p,0)}catch{try{return s.call(null,p,0)}catch{return s.call(this,p,0)}}}function a(p){if(m===clearTimeout)return clearTimeout(p);if((m===t||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(p);try{return m(p)}catch{try{return m.call(null,p)}catch{return m.call(this,p)}}}var r=[],n=!1,f,l=-1;function o(){!n||!f||(n=!1,f.length?r=f.concat(r):l=-1,r.length&&c())}function c(){if(!n){var p=i(o);n=!0;for(var y=r.length;y;){for(f=r,r=[];++l<y;)f&&f[l].run();l=-1,y=r.length}f=null,n=!1,a(p)}}u.nextTick=function(p){var y=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)y[g-1]=arguments[g];r.push(new v(p,y)),r.length===1&&!n&&i(c)};function v(p,y){this.fun=p,this.array=y}v.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={};function d(){}u.on=d,u.addListener=d,u.once=d,u.off=d,u.removeListener=d,u.removeAllListeners=d,u.emit=d,u.prependListener=d,u.prependOnceListener=d,u.listeners=function(p){return[]},u.binding=function(p){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(p){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],278:[function(e,I,B){(function(u){(function(){for(var s=e("performance-now"),m=typeof window=="undefined"?u:window,x=["moz","webkit"],t="AnimationFrame",i=m["request"+t],a=m["cancel"+t]||m["cancelRequest"+t],r=0;!i&&r<x.length;r++)i=m[x[r]+"Request"+t],a=m[x[r]+"Cancel"+t]||m[x[r]+"CancelRequest"+t];if(!i||!a){var n=0,f=0,l=[],o=1e3/60;i=function(c){if(l.length===0){var v=s(),d=Math.max(0,o-(v-n));n=d+v,setTimeout(function(){var p=l.slice(0);l.length=0;for(var y=0;y<p.length;y++)if(!p[y].cancelled)try{p[y].callback(n)}catch(g){setTimeout(function(){throw g},0)}},Math.round(d))}return l.push({handle:++f,callback:c,cancelled:!1}),f},a=function(c){for(var v=0;v<l.length;v++)l[v].handle===c&&(l[v].cancelled=!0)}}I.exports=function(c){return i.call(m,c)},I.exports.cancel=function(){a.apply(m,arguments)},I.exports.polyfill=function(c){c||(c=m),c.requestAnimationFrame=i,c.cancelAnimationFrame=a}}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"performance-now":252}],279:[function(e,I,B){var u=e("array-bounds"),s=e("color-normalize"),m=e("update-diff"),x=e("pick-by-alias"),t=e("object-assign"),i=e("flatten-vertex-data"),a=e("to-float32"),r=a.float32,n=a.fract32;I.exports=l;var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function l(o,c){if(typeof o=="function"?(c||(c={}),c.regl=o):c=o,c.length&&(c.positions=c),o=c.regl,!o.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var v=o._gl,d,p,y,g,A,b,M={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return g=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),p=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),A=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),b=o.buffer({usage:"static",type:"float",data:f}),L(c),d=o({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(k,P){return[P.viewport.x,P.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{color:{buffer:g,offset:function(k,P){return P.offset*4},divisor:1},position:{buffer:p,offset:function(k,P){return P.offset*8},divisor:1},positionFract:{buffer:y,offset:function(k,P){return P.offset*8},divisor:1},error:{buffer:A,offset:function(k,P){return P.offset*16},divisor:1},direction:{buffer:b,stride:24,offset:0},lineOffset:{buffer:b,stride:24,offset:8},capOffset:{buffer:b,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:f.length}),t(T,{update:L,draw:_,destroy:S,regl:o,gl:v,canvas:v.canvas,groups:w}),T;function T(k){k?L(k):k===null&&S(),_()}function _(k){if(typeof k=="number")return h(k);k&&!Array.isArray(k)&&(k=[k]),o._refresh(),w.forEach(function(P,O){if(!!P){if(k&&(k[O]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}h(O)}})}function h(k){typeof k=="number"&&(k=w[k]),k!=null&&(!(k&&k.count&&k.color&&k.opacity&&k.positions&&k.positions.length>1)||(k.scaleRatio=[k.scale[0]*k.viewport.width,k.scale[1]*k.viewport.height],d(k),k.after&&k.after(k)))}function L(k){if(!!k){k.length!=null?typeof k[0]=="number"&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var P=0,O=0;if(T.groups=w=k.map(function(j,ee){var q=w[ee];if(j)typeof j=="function"?j={after:j}:typeof j[0]=="number"&&(j={positions:j});else return q;return j=x(j,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(w[ee]=q={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},j=t({},M,j)),m(q,j,[{lineWidth:function(G){return+G*.5},capSize:function(G){return+G*.5},opacity:parseFloat,errors:function(G){return G=i(G),O+=G.length,G},positions:function(G,J){return G=i(G,"float64"),J.count=Math.floor(G.length/2),J.bounds=u(G,2),J.offset=P,P+=J.count,G}},{color:function(G,J){var le=J.count;if(G||(G="transparent"),!Array.isArray(G)||typeof G[0]=="number"){var fe=G;G=Array(le);for(var se=0;se<le;se++)G[se]=fe}if(G.length<le)throw Error("Not enough colors");for(var V=new Uint8Array(le*4),Y=0;Y<le;Y++){var ne=s(G[Y],"uint8");V.set(ne,Y*4)}return V},range:function(G,J,le){var fe=J.bounds;return G||(G=fe),J.scale=[1/(G[2]-G[0]),1/(G[3]-G[1])],J.translate=[-G[0],-G[1]],J.scaleFract=n(J.scale),J.translateFract=n(J.translate),G},viewport:function(G){var J;return Array.isArray(G)?J={x:G[0],y:G[1],width:G[2]-G[0],height:G[3]-G[1]}:G?(J={x:G.x||G.left||0,y:G.y||G.top||0},G.right?J.width=G.right-J.x:J.width=G.w||G.width||0,G.bottom?J.height=G.bottom-J.y:J.height=G.h||G.height||0):J={x:0,y:0,width:v.drawingBufferWidth,height:v.drawingBufferHeight},J}}]),q}),P||O){var F=w.reduce(function(j,ee,q){return j+(ee?ee.count:0)},0),D=new Float64Array(F*2),R=new Uint8Array(F*4),U=new Float32Array(F*4);w.forEach(function(j,ee){if(!!j){var q=j.positions,G=j.count,J=j.offset,le=j.color,fe=j.errors;!G||(R.set(le,J*4),U.set(fe,J*4),D.set(q,J*2))}});var N=r(D);p(N);var X=n(D,N);y(X),g(R),A(U)}}}function S(){p.destroy(),y.destroy(),g.destroy(),A.destroy(),b.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(e,I,B){var u=e("color-normalize"),s=e("array-bounds"),m=e("object-assign"),x=e("glslify"),t=e("pick-by-alias"),i=e("flatten-vertex-data"),a=e("earcut"),r=e("array-normalize"),n=e("to-float32"),f=n.float32,l=n.fract32,o=e("es6-weak-map"),c=e("parse-rect"),v=e("array-find-index");I.exports=d;function d(p,y){if(!(this instanceof d))return new d(p,y);if(typeof p=="function"?(y||(y={}),y.regl=p):y=p,y.length&&(y.positions=y),p=y.regl,!p.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=p._gl,this.regl=p,this.passes=[],this.shaders=d.shaders.has(p)?d.shaders.get(p):d.shaders.set(p,d.createShaders(p)).get(p),this.update(y)}d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new o,d.createShaders=function(p){var y=p.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),g={primitive:"triangle strip",instances:p.prop("count"),count:4,offset:0,uniforms:{miterMode:function(w,T){return T.join==="round"?2:1},miterLimit:p.prop("miterLimit"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),thickness:p.prop("thickness"),dashTexture:p.prop("dashTexture"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),dashLength:p.prop("dashLength"),viewport:function(w,T){return[T.viewport.x,T.viewport.y,w.viewportWidth,w.viewportHeight]},depth:p.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(w,T){return!T.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport")},A=p(m({vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},g)),b;try{b=p(m({cull:{enable:!0,face:"back"},vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aColor:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:p.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},g))}catch{b=A}var M=p({primitive:"triangle",elements:function(w,T){return T.triangles},offset:0,vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:p.prop("scale"),color:p.prop("fill"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),viewport:function(w,T){return[T.viewport.x,T.viewport.y,w.viewportWidth,w.viewportHeight]}},attributes:{position:{buffer:p.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8}},blend:g.blend,depth:{enable:!1},scissor:g.scissor,stencil:g.stencil,viewport:g.viewport});return{fill:M,rect:A,miter:b}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var p,y=[],g=arguments.length;g--;)y[g]=arguments[g];y.length&&(p=this).update.apply(p,y),this.draw()},d.prototype.draw=function(){for(var p=this,y=[],g=arguments.length;g--;)y[g]=arguments[g];return(y.length?y:this.passes).forEach(function(A,b){var M;if(A&&Array.isArray(A))return(M=p).draw.apply(M,A);typeof A=="number"&&(A=p.passes[A]),!!(A&&A.count>1&&A.opacity)&&(p.regl._refresh(),A.fill&&A.triangles&&A.triangles.length>2&&p.shaders.fill(A),!!A.thickness&&(A.scale[0]*A.viewport.width>d.precisionThreshold||A.scale[1]*A.viewport.height>d.precisionThreshold||A.join==="rect"||!A.join&&(A.thickness<=2||A.count>=d.maxPoints)?p.shaders.rect(A):p.shaders.miter(A)))}),this},d.prototype.update=function(p){var y=this;if(!!p){p.length!=null?typeof p[0]=="number"&&(p=[{positions:p}]):Array.isArray(p)||(p=[p]);var g=this,A=g.regl,b=g.gl;if(p.forEach(function(h,L){var S=y.passes[L];if(h!==void 0){if(h===null){y.passes[L]=null;return}if(typeof h[0]=="number"&&(h={positions:h}),h=t(h,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(y.passes[L]=S={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:A.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:A.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},h=m({},d.defaults,h)),h.thickness!=null&&(S.thickness=parseFloat(h.thickness)),h.opacity!=null&&(S.opacity=parseFloat(h.opacity)),h.miterLimit!=null&&(S.miterLimit=parseFloat(h.miterLimit)),h.overlay!=null&&(S.overlay=!!h.overlay,L<d.maxLines&&(S.depth=2*(d.maxLines-1-L%d.maxLines)/d.maxLines-1)),h.join!=null&&(S.join=h.join),h.hole!=null&&(S.hole=h.hole),h.fill!=null&&(S.fill=h.fill?u(h.fill,"uint8"):null),h.viewport!=null&&(S.viewport=c(h.viewport)),S.viewport||(S.viewport=c([b.drawingBufferWidth,b.drawingBufferHeight])),h.close!=null&&(S.close=h.close),h.positions===null&&(h.positions=[]),h.positions){var k,P;if(h.positions.x&&h.positions.y){var O=h.positions.x,F=h.positions.y;P=S.count=Math.max(O.length,F.length),k=new Float64Array(P*2);for(var D=0;D<P;D++)k[D*2]=O[D],k[D*2+1]=F[D]}else k=i(h.positions,"float64"),P=S.count=Math.floor(k.length/2);var R=S.bounds=s(k,2);if(S.fill){for(var U=[],N={},X=0,j=0,ee=0,q=S.count;j<q;j++){var G=k[j*2],J=k[j*2+1];isNaN(G)||isNaN(J)||G==null||J==null?(G=k[X*2],J=k[X*2+1],N[j]=X):X=j,U[ee++]=G,U[ee++]=J}if(h.splitNull){S.count-1 in N||(N[S.count]=S.count-1);var le=Object.keys(N).map(Number).sort(function(lt,dt){return lt-dt}),fe=[],se=0,V=S.hole!=null?S.hole[0]:null;if(V!=null){var Y=v(le,function(lt){return lt>=V});le=le.slice(0,Y),le.push(V)}for(var ne=function(lt){var dt=U.slice(se*2,le[lt]*2).concat(V?U.slice(V*2):[]),et=(S.hole||[]).map(function(Je){return Je-V+(le[lt]-se)}),Pe=a(dt,et);Pe=Pe.map(function(Je){return Je+se+(Je+se<le[lt]?0:V-le[lt])}),fe.push.apply(fe,Pe),se=le[lt]+1},te=0;te<le.length;te++)ne(te);for(var K=0,$=fe.length;K<$;K++)N[fe[K]]!=null&&(fe[K]=N[fe[K]]);S.triangles=fe}else{for(var ae=a(U,S.hole||[]),ie=0,oe=ae.length;ie<oe;ie++)N[ae[ie]]!=null&&(ae[ie]=N[ae[ie]]);S.triangles=ae}}var ue=new Float64Array(k);r(ue,2,R);var xe=new Float64Array(P*2+6);S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(xe[0]=ue[P*2-4],xe[1]=ue[P*2-3]):(xe[0]=ue[P*2-2],xe[1]=ue[P*2-1]):(xe[0]=ue[0],xe[1]=ue[1]),xe.set(ue,2),S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(xe[P*2+2]=ue[2],xe[P*2+3]=ue[3],S.count-=1):(xe[P*2+2]=ue[0],xe[P*2+3]=ue[1],xe[P*2+4]=ue[2],xe[P*2+5]=ue[3]):(xe[P*2+2]=ue[P*2-2],xe[P*2+3]=ue[P*2-1],xe[P*2+4]=ue[P*2-2],xe[P*2+5]=ue[P*2-1]);var he=f(xe);S.positionBuffer(he);var me=l(xe,he);S.positionFractBuffer(me)}if(h.range?S.range=h.range:S.range||(S.range=S.bounds),(h.range||h.positions)&&S.count){var be=S.bounds,Ce=be[2]-be[0],Se=be[3]-be[1],Be=S.range[2]-S.range[0],Ye=S.range[3]-S.range[1];S.scale=[Ce/Be,Se/Ye],S.translate=[-S.range[0]/Be+be[0]/Be||0,-S.range[1]/Ye+be[1]/Ye||0],S.scaleFract=l(S.scale),S.translateFract=l(S.translate)}if(h.dashes){var Xe=0,Te;if(!h.dashes||h.dashes.length<2)Xe=1,Te=new Uint8Array([255,255,255,255,255,255,255,255]);else{Xe=0;for(var Ie=0;Ie<h.dashes.length;++Ie)Xe+=h.dashes[Ie];Te=new Uint8Array(Xe*d.dashMult);for(var Ze=0,rt=255,Ge=0;Ge<2;Ge++)for(var ze=0;ze<h.dashes.length;++ze){for(var We=0,mt=h.dashes[ze]*d.dashMult*.5;We<mt;++We)Te[Ze++]=rt;rt^=255}}S.dashLength=Xe,S.dashTexture({channels:1,data:Te,width:Te.length,height:1,mag:"linear",min:"linear"},0,0)}if(h.color){var Ft=S.count,Xt=h.color;Xt||(Xt="transparent");var Pt=new Uint8Array(Ft*4+4);if(!Array.isArray(Xt)||typeof Xt[0]=="number")for(var Ut=u(Xt,"uint8"),Gt=0;Gt<Ft+1;Gt++)Pt.set(Ut,Gt*4);else{for(var It=0;It<Ft;It++){var Ct=u(Xt[It],"uint8");Pt.set(Ct,It*4)}Pt.set(u(Xt[0],"uint8"),Ft*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:Pt})}}}),p.length<this.passes.length){for(var M=p.length;M<this.passes.length;M++){var w=this.passes[M];!w||(w.colorBuffer.destroy(),w.positionBuffer.destroy(),w.dashTexture.destroy())}this.passes.length=p.length}for(var T=[],_=0;_<this.passes.length;_++)this.passes[_]!==null&&T.push(this.passes[_]);return this.passes=T,this}},d.prototype.destroy=function(){return this.passes.forEach(function(p){p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(e,I,B){function u(S,k){return x(S)||i(S,k)||a(S,k)||f()}function s(S){return m(S)||t(S)||a(S)||n()}function m(S){if(Array.isArray(S))return r(S)}function x(S){if(Array.isArray(S))return S}function t(S){if(typeof Symbol!="undefined"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function i(S,k){var P=S==null?null:typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(P!=null){var O=[],F=!0,D=!1,R,U;try{for(P=P.call(S);!(F=(R=P.next()).done)&&(O.push(R.value),!(k&&O.length===k));F=!0);}catch(N){D=!0,U=N}finally{try{!F&&P.return!=null&&P.return()}finally{if(D)throw U}}return O}}function a(S,k){if(!!S){if(typeof S=="string")return r(S,k);var P=Object.prototype.toString.call(S).slice(8,-1);if(P==="Object"&&S.constructor&&(P=S.constructor.name),P==="Map"||P==="Set")return Array.from(S);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return r(S,k)}}function r(S,k){(k==null||k>S.length)&&(k=S.length);for(var P=0,O=new Array(k);P<k;P++)O[P]=S[P];return O}function n(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=e("color-normalize"),o=e("array-bounds"),c=e("color-id"),v=e("@plotly/point-cluster"),d=e("object-assign"),p=e("glslify"),y=e("pick-by-alias"),g=e("update-diff"),A=e("flatten-vertex-data"),b=e("is-iexplorer"),M=e("to-float32"),w=e("parse-rect"),T=_;function _(S,k){var P=this;if(!(this instanceof _))return new _(S,k);typeof S=="function"?(k||(k={}),k.regl=S):(k=S,S=null),k&&k.length&&(k.positions=k),S=k.regl;var O=S._gl,F,D=[],R={},U=[],N=[null],X=[null],j=255,ee=100;this.tooManyColors=b,F=S.texture({data:new Uint8Array(j*4),width:j,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),d(this,{regl:S,gl:O,groups:U,markerCache:X,markerTextures:N,palette:D,paletteIds:R,paletteTexture:F,maxColors:j,maxSize:ee,canvas:O.canvas}),this.update(k);var q={uniforms:{constPointSize:!!k.constPointSize,opacity:S.prop("opacity"),paletteSize:function(fe,se){return[P.tooManyColors?0:j,F.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:F},attributes:{x:function(fe,se){return se.xAttr||{buffer:se.positionBuffer,stride:8,offset:0}},y:function(fe,se){return se.yAttr||{buffer:se.positionBuffer,stride:8,offset:4}},xFract:function(fe,se){return se.xAttr?{constant:[0,0]}:{buffer:se.positionFractBuffer,stride:8,offset:0}},yFract:function(fe,se){return se.yAttr?{constant:[0,0]}:{buffer:se.positionFractBuffer,stride:8,offset:4}},size:function(fe,se){return se.size.length?{buffer:se.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(se.size*255/P.maxSize)]}},borderSize:function(fe,se){return se.borderSize.length?{buffer:se.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(se.borderSize*255/P.maxSize)]}},colorId:function(fe,se){return se.color.length?{buffer:se.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?D.slice(se.color*4,se.color*4+4):[se.color]}},borderColorId:function(fe,se){return se.borderColor.length?{buffer:se.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?D.slice(se.borderColor*4,se.borderColor*4+4):[se.borderColor]}},isActive:function(fe,se){return se.activation===!0?{constant:[1]}:se.activation?se.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},G=d({},q);G.frag=p([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),G.vert=p([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(G);var J=d({},q);J.frag=p([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),J.vert=p([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),b&&(J.frag=J.frag.replace("smoothstep","smoothStep"),G.frag=G.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(J)}_.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},_.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},_.prototype.draw=function(){for(var S=this,k=arguments.length,P=new Array(k),O=0;O<k;O++)P[O]=arguments[O];var F=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var D=0;D<P.length;D++)this.drawItem(D,P[D]);else F.forEach(function(R,U){S.drawItem(U)});return this},_.prototype.drawItem=function(S,k){var P=this.groups,O=P[S];if(typeof k=="number"&&(S=k,O=P[k],k=null),!!(O&&O.count&&O.opacity)){O.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,O,k));for(var F=[],D=1;D<O.activation.length;D++)!O.activation[D]||O.activation[D]!==!0&&!O.activation[D].data.length||F.push.apply(F,s(this.getMarkerDrawOptions(D,O,k)));F.length&&this.drawMarker(F)}},_.prototype.getMarkerDrawOptions=function(S,k,P){var O=k.range,F=k.tree,D=k.viewport,R=k.activation,U=k.selectionBuffer,N=k.count;if(this.regl,!F)return P?[d({},k,{markerTexture:this.markerTextures[S],activation:R[S],count:P.length,elements:P,offset:0})]:[d({},k,{markerTexture:this.markerTextures[S],activation:R[S],offset:0})];var X=[],j=F.range(O,{lod:!0,px:[(O[2]-O[0])/D.width,(O[3]-O[1])/D.height]});if(P){for(var ee=R[S],q=ee.data,G=new Uint8Array(N),J=0;J<P.length;J++){var le=P[J];G[le]=q?q[le]:1}U.subdata(G)}for(var fe=j.length;fe--;){var se=u(j[fe],2),V=se[0],Y=se[1];X.push(d({},k,{markerTexture:this.markerTextures[S],activation:P?U:R[S],offset:V,count:Y-V}))}return X},_.prototype.update=function(){for(var S=this,k=arguments.length,P=new Array(k),O=0;O<k;O++)P[O]=arguments[O];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var F=this.groups,D=this.gl,R=this.regl,U=this.maxSize,N=this.maxColors,X=this.palette;this.groups=F=P.map(function(j,ee){var q=F[ee];if(j===void 0)return q;j===null?j={positions:null}:typeof j=="function"?j={ondraw:j}:typeof j[0]=="number"&&(j={positions:j}),j=y(j,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),j.positions===null&&(j.positions=[]),j.tooManyColors!=null&&(S.tooManyColors=j.tooManyColors),q||(F[ee]=q={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},j=d({},_.defaults,j)),j.positions&&!("marker"in j)&&(j.marker=q.marker,delete q.marker),j.marker&&!("positions"in j)&&(j.positions=q.positions,delete q.positions);var G=0,J=0;if(g(q,j,[{snap:!0,size:function(Se,Be){return Se==null&&(Se=_.defaults.size),G+=Se&&Se.length?1:0,Se},borderSize:function(Se,Be){return Se==null&&(Se=_.defaults.borderSize),G+=Se&&Se.length?1:0,Se},opacity:parseFloat,color:function(Se,Be){return Se==null&&(Se=_.defaults.color),Se=S.updateColor(Se),J++,Se},borderColor:function(Se,Be){return Se==null&&(Se=_.defaults.borderColor),Se=S.updateColor(Se),J++,Se},bounds:function(Se,Be,Ye){return"range"in Ye||(Ye.range=null),Se},positions:function(Se,Be,Ye){var Xe=Be.snap,Te=Be.positionBuffer,Ie=Be.positionFractBuffer,Ze=Be.selectionBuffer;if(Se.x||Se.y)return Se.x.length?Be.xAttr={buffer:R.buffer(Se.x),offset:0,stride:4,count:Se.x.length}:Be.xAttr={buffer:Se.x.buffer,offset:Se.x.offset*4||0,stride:(Se.x.stride||1)*4,count:Se.x.count},Se.y.length?Be.yAttr={buffer:R.buffer(Se.y),offset:0,stride:4,count:Se.y.length}:Be.yAttr={buffer:Se.y.buffer,offset:Se.y.offset*4||0,stride:(Se.y.stride||1)*4,count:Se.y.count},Be.count=Math.max(Be.xAttr.count,Be.yAttr.count),Se;Se=A(Se,"float64");var rt=Be.count=Math.floor(Se.length/2),Ge=Be.bounds=rt?o(Se,2):null;if(!Ye.range&&!Be.range&&(delete Be.range,Ye.range=Ge),!Ye.marker&&!Be.marker&&(delete Be.marker,Ye.marker=null),Xe&&(Xe===!0||rt>Xe)?Be.tree=v(Se,{bounds:Ge}):Xe&&Xe.length&&(Be.tree=Xe),Be.tree){var ze={primitive:"points",usage:"static",data:Be.tree,type:"uint32"};Be.elements?Be.elements(ze):Be.elements=R.elements(ze)}var We=M.float32(Se);Te({data:We,usage:"dynamic"});var mt=M.fract32(Se,We);return Ie({data:mt,usage:"dynamic"}),Ze({data:new Uint8Array(rt),type:"uint8",usage:"stream"}),Se}},{marker:function(Se,Be,Ye){var Xe=Be.activation;if(Xe.forEach(function(mt){return mt&&mt.destroy&&mt.destroy()}),Xe.length=0,!Se||typeof Se[0]=="number"){var Te=S.addMarker(Se);Xe[Te]=!0}else{for(var Ie=[],Ze=0,rt=Math.min(Se.length,Be.count);Ze<rt;Ze++){var Ge=S.addMarker(Se[Ze]);Ie[Ge]||(Ie[Ge]=new Uint8Array(Be.count)),Ie[Ge][Ze]=1}for(var ze=0;ze<Ie.length;ze++)if(!!Ie[ze]){var We={data:Ie[ze],type:"uint8",usage:"static"};Xe[ze]?Xe[ze](We):Xe[ze]=R.buffer(We),Xe[ze].data=Ie[ze]}}return Se},range:function(Se,Be,Ye){var Xe=Be.bounds;if(!!Xe)return Se||(Se=Xe),Be.scale=[1/(Se[2]-Se[0]),1/(Se[3]-Se[1])],Be.translate=[-Se[0],-Se[1]],Be.scaleFract=M.fract(Be.scale),Be.translateFract=M.fract(Be.translate),Se},viewport:function(Se){var Be=w(Se||[D.drawingBufferWidth,D.drawingBufferHeight]);return Be}}]),G){var le=q,fe=le.count,se=le.size,V=le.borderSize,Y=le.sizeBuffer,ne=new Uint8Array(fe*2);if(se.length||V.length)for(var te=0;te<fe;te++)ne[te*2]=Math.round((se[te]==null?se:se[te])*255/U),ne[te*2+1]=Math.round((V[te]==null?V:V[te])*255/U);Y({data:ne,usage:"dynamic"})}if(J){var K=q,$=K.count,ae=K.color,ie=K.borderColor,oe=K.colorBuffer,ue;if(S.tooManyColors){if(ae.length||ie.length){ue=new Uint8Array($*8);for(var xe=0;xe<$;xe++){var he=ae[xe];ue[xe*8]=X[he*4],ue[xe*8+1]=X[he*4+1],ue[xe*8+2]=X[he*4+2],ue[xe*8+3]=X[he*4+3];var me=ie[xe];ue[xe*8+4]=X[me*4],ue[xe*8+5]=X[me*4+1],ue[xe*8+6]=X[me*4+2],ue[xe*8+7]=X[me*4+3]}}}else if(ae.length||ie.length){ue=new Uint8Array($*4+2);for(var be=0;be<$;be++)ae[be]!=null&&(ue[be*4]=ae[be]%N,ue[be*4+1]=Math.floor(ae[be]/N)),ie[be]!=null&&(ue[be*4+2]=ie[be]%N,ue[be*4+3]=Math.floor(ie[be]/N))}oe({data:ue||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return q})}},_.prototype.addMarker=function(S){var k=this.markerTextures,P=this.regl,O=this.markerCache,F=S==null?0:O.indexOf(S);if(F>=0)return F;var D;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)D=S;else{D=new Uint8Array(S.length);for(var R=0,U=S.length;R<U;R++)D[R]=S[R]*255}var N=Math.floor(Math.sqrt(D.length));return F=k.length,O.push(S),k.push(P.texture({channels:1,data:D,radius:N,mag:"linear",min:"linear"})),F},_.prototype.updateColor=function(S){var k=this.paletteIds,P=this.palette,O=this.maxColors;Array.isArray(S)||(S=[S]);var F=[];if(typeof S[0]=="number"){var D=[];if(Array.isArray(S))for(var R=0;R<S.length;R+=4)D.push(S.slice(R,R+4));else for(var U=0;U<S.length;U+=4)D.push(S.subarray(U,U+4));S=D}for(var N=0;N<S.length;N++){var X=S[N];X=l(X,"uint8");var j=c(X,!1);if(k[j]==null){var ee=P.length;k[j]=Math.floor(ee/4),P[ee]=X[0],P[ee+1]=X[1],P[ee+2]=X[2],P[ee+3]=X[3]}F[N]=k[j]}return!this.tooManyColors&&P.length>O*4&&(this.tooManyColors=!0),this.updatePalette(P),F.length===1?F[0]:F},_.prototype.updatePalette=function(S){if(!this.tooManyColors){var k=this.maxColors,P=this.paletteTexture,O=Math.ceil(S.length*.25/k);if(O>1){S=S.slice();for(var F=S.length*.25%k;F<O*k;F++)S.push(0,0,0,0)}P.height<O&&P.resize(k,O),P.subimage({width:Math.min(S.length*.25,k),height:O,data:S},0,0)}},_.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(k){return k&&k.destroy&&k.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var h=e("object-assign"),L=function(k,P){var O=new T(k,P),F=O.render.bind(O);return h(F,{render:F,update:O.update.bind(O),draw:O.draw.bind(O),destroy:O.destroy.bind(O),regl:O.regl,gl:O.gl,canvas:O.gl.canvas,groups:O.groups,markers:O.markerCache,palette:O.palette}),F};I.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(e,I,B){var u=e("regl-scatter2d"),s=e("pick-by-alias"),m=e("array-bounds"),x=e("raf"),t=e("array-range"),i=e("parse-rect"),a=e("flatten-vertex-data");I.exports=r;function r(o,c){if(!(this instanceof r))return new r(o,c);this.traces=[],this.passes={},this.regl=o,this.scatter=u(o),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var o=this,c,v=[],d=arguments.length;d--;)v[d]=arguments[d];return v.length&&(c=this).update.apply(c,v),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=x(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,x(function(){o.dirty=!1})),this)},r.prototype.update=function(){for(var o,c=[],v=arguments.length;v--;)c[v]=arguments[v];if(!!c.length){for(var d=0;d<c.length;d++)this.updateItem(d,c[d]);this.traces=this.traces.filter(Boolean);for(var p=[],y=0,g=0;g<this.traces.length;g++){for(var A=this.traces[g],b=this.traces[g].passes,M=0;M<b.length;M++)p.push(this.passes[b[M]]);A.passOffset=y,y+=A.passes.length}return(o=this.scatter).update.apply(o,p),this}},r.prototype.updateItem=function(o,c){var v=this,d=v.regl;if(c===null)return this.traces[o]=null,this;if(!c)return this;var p=s(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),y=this.traces[o]||(this.traces[o]={id:o,buffer:d.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:i([d._gl.drawingBufferWidth,d._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(p.color!=null&&(y.color=p.color),p.size!=null&&(y.size=p.size),p.marker!=null&&(y.marker=p.marker),p.borderColor!=null&&(y.borderColor=p.borderColor),p.borderSize!=null&&(y.borderSize=p.borderSize),p.opacity!=null&&(y.opacity=p.opacity),p.viewport&&(y.viewport=i(p.viewport)),p.diagonal!=null&&(y.diagonal=p.diagonal),p.upper!=null&&(y.upper=p.upper),p.lower!=null&&(y.lower=p.lower),p.data){y.buffer(a(p.data)),y.columns=p.data.length,y.count=p.data[0].length,y.bounds=[];for(var g=0;g<y.columns;g++)y.bounds[g]=m(p.data[g],1)}var A;p.range&&(y.range=p.range,A=y.range&&typeof y.range[0]!="number"),p.domain&&(y.domain=p.domain);var b=!1;p.padding!=null&&(Array.isArray(p.padding)&&p.padding.length===y.columns&&typeof p.padding[p.padding.length-1]=="number"?(y.padding=p.padding.map(l),b=!0):y.padding=l(p.padding));var M=y.columns,w=y.count,T=y.viewport.width,_=y.viewport.height,h=y.viewport.x,L=y.viewport.y,S=T/M,k=_/M;y.passes=[];for(var P=0;P<M;P++)for(var O=0;O<M;O++)if(!(!y.diagonal&&O===P)&&!(!y.upper&&P>O)&&!(!y.lower&&P<O)){var F=n(y.id,P,O),D=this.passes[F]||(this.passes[F]={});if(p.data&&(p.transpose?D.positions={x:{buffer:y.buffer,offset:O,count:w,stride:M},y:{buffer:y.buffer,offset:P,count:w,stride:M}}:D.positions={x:{buffer:y.buffer,offset:O*w,count:w},y:{buffer:y.buffer,offset:P*w,count:w}},D.bounds=f(y.bounds,P,O)),p.domain||p.viewport||p.data){var R=b?f(y.padding,P,O):y.padding;if(y.domain){var U=f(y.domain,P,O),N=U[0],X=U[1],j=U[2],ee=U[3];D.viewport=[h+N*T+R[0],L+X*_+R[1],h+j*T-R[2],L+ee*_-R[3]]}else D.viewport=[h+O*S+S*R[0],L+P*k+k*R[1],h+(O+1)*S-S*R[2],L+(P+1)*k-k*R[3]]}p.color&&(D.color=y.color),p.size&&(D.size=y.size),p.marker&&(D.marker=y.marker),p.borderSize&&(D.borderSize=y.borderSize),p.borderColor&&(D.borderColor=y.borderColor),p.opacity&&(D.opacity=y.opacity),p.range&&(D.range=A?f(y.range,P,O):y.range||D.bounds),y.passes.push(F)}return this},r.prototype.draw=function(){for(var o,c=[],v=arguments.length;v--;)c[v]=arguments[v];if(!c.length)this.scatter.draw();else{for(var d=[],p=0;p<c.length;p++)if(typeof c[p]=="number"){var y=this.traces[c[p]],g=y.passes,A=y.passOffset;d.push.apply(d,t(A,A+g.length))}else if(c[p].length){var b=c[p],M=this.traces[p],w=M.passes,T=M.passOffset;w=w.map(function(_,h){d[T+h]=b})}(o=this.scatter).draw.apply(o,d)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function n(o,c,v){var d=o.id!=null?o.id:o,p=c,y=v,g=d<<16|(p&255)<<8|y&255;return g}function f(o,c,v){var d,p,y,g,A=o[c],b=o[v];return A.length>2?(d=A[1],p=A[3]):A.length?(d=A[0],p=A[1]):(d=A.y,A.x+A.width,p=A.y+A.height),b.length>2?(y=b[0],g=b[2]):b.length?(y=b[0],g=b[1]):(y=b.x,g=b.x+b.width,b.y+b.height),[y,d,g,p]}function l(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var c=i(o);return[c.x,c.y,c.x+c.width,c.y+c.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?I.exports=s():u.createREGL=s()})(this,function(){function u(qe,xt){this.id=$++,this.type=qe,this.data=xt}function s(qe){if(qe.length===0)return[];var xt=qe.charAt(0),Rt=qe.charAt(qe.length-1);if(1<qe.length&&xt===Rt&&(xt==='"'||xt==="'"))return['"'+qe.substr(1,qe.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(xt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(qe))return s(qe.substr(0,xt.index)).concat(s(xt[1])).concat(s(qe.substr(xt.index+xt[0].length)));if(xt=qe.split("."),xt.length===1)return['"'+qe.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(qe=[],Rt=0;Rt<xt.length;++Rt)qe=qe.concat(s(xt[Rt]));return qe}function m(qe){return"["+s(qe).join("][")+"]"}function x(qe,xt){if(typeof qe=="function")return new u(0,qe);if(typeof qe=="number"||typeof qe=="boolean")return new u(5,qe);if(Array.isArray(qe))return new u(6,qe.map(function(Rt,fr){return x(Rt)}));if(qe instanceof u)return qe}function t(){var qe={"":0},xt=[""];return{id:function(Rt){var fr=qe[Rt];return fr||(fr=qe[Rt]=xt.length,xt.push(Rt),fr)},str:function(Rt){return xt[Rt]}}}function i(qe,xt,Rt){function fr(){var Tr=window.innerWidth,Nr=window.innerHeight;qe!==document.body&&(Nr=br.getBoundingClientRect(),Tr=Nr.right-Nr.left,Nr=Nr.bottom-Nr.top),br.width=Rt*Tr,br.height=Rt*Nr}var br=document.createElement("canvas");K(br.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),qe.appendChild(br),qe===document.body&&(br.style.position="absolute",K(qe.style,{margin:0,padding:0}));var pr;return qe!==document.body&&typeof ResizeObserver=="function"?(pr=new ResizeObserver(function(){setTimeout(fr)}),pr.observe(qe)):window.addEventListener("resize",fr,!1),fr(),{canvas:br,onDestroy:function(){pr?pr.disconnect():window.removeEventListener("resize",fr),qe.removeChild(br)}}}function a(qe,xt){function Rt(fr){try{return qe.getContext(fr,xt)}catch{return null}}return Rt("webgl")||Rt("experimental-webgl")||Rt("webgl-experimental")}function r(qe){return typeof qe=="string"?qe.split():qe}function n(qe){return typeof qe=="string"?document.querySelector(qe):qe}function f(qe){var xt=qe||{},Rt,fr,br,pr;qe={};var Tr=[],Nr=[],Ir=typeof window=="undefined"?1:window.devicePixelRatio,lr=!1,Yr=function(Ae){},nt=function(){};if(typeof xt=="string"?Rt=document.querySelector(xt):typeof xt=="object"&&(typeof xt.nodeName=="string"&&typeof xt.appendChild=="function"&&typeof xt.getBoundingClientRect=="function"?Rt=xt:typeof xt.drawArrays=="function"||typeof xt.drawElements=="function"?(pr=xt,br=pr.canvas):("gl"in xt?pr=xt.gl:"canvas"in xt?br=n(xt.canvas):"container"in xt&&(fr=n(xt.container)),"attributes"in xt&&(qe=xt.attributes),"extensions"in xt&&(Tr=r(xt.extensions)),"optionalExtensions"in xt&&(Nr=r(xt.optionalExtensions)),"onDone"in xt&&(Yr=xt.onDone),"profile"in xt&&(lr=!!xt.profile),"pixelRatio"in xt&&(Ir=+xt.pixelRatio))),Rt&&(Rt.nodeName.toLowerCase()==="canvas"?br=Rt:fr=Rt),!pr){if(!br){if(Rt=i(fr||document.body,Yr,Ir),!Rt)return null;br=Rt.canvas,nt=Rt.onDestroy}qe.premultipliedAlpha===void 0&&(qe.premultipliedAlpha=!0),pr=a(br,qe)}return pr?{gl:pr,canvas:br,container:fr,extensions:Tr,optionalExtensions:Nr,pixelRatio:Ir,profile:lr,onDone:Yr,onDestroy:nt}:(nt(),Yr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function l(qe,xt){function Rt(Tr){Tr=Tr.toLowerCase();var Nr;try{Nr=fr[Tr]=qe.getExtension(Tr)}catch{}return!!Nr}for(var fr={},br=0;br<xt.extensions.length;++br){var pr=xt.extensions[br];if(!Rt(pr))return xt.onDestroy(),xt.onDone('"'+pr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return xt.optionalExtensions.forEach(Rt),{extensions:fr,restore:function(){Object.keys(fr).forEach(function(Tr){if(fr[Tr]&&!Rt(Tr))throw Error("(regl): error restoring extension "+Tr)})}}}function o(qe,xt){for(var Rt=Array(qe),fr=0;fr<qe;++fr)Rt[fr]=xt(fr);return Rt}function c(qe){var xt,Rt;return xt=(65535<qe)<<4,qe>>>=xt,Rt=(255<qe)<<3,qe>>>=Rt,xt|=Rt,Rt=(15<qe)<<2,qe>>>=Rt,xt|=Rt,Rt=(3<qe)<<1,xt|Rt|qe>>>Rt>>1}function v(){function qe(fr){e:{for(var br=16;268435456>=br;br*=16)if(fr<=br){fr=br;break e}fr=0}return br=Rt[c(fr)>>2],0<br.length?br.pop():new ArrayBuffer(fr)}function xt(fr){Rt[c(fr.byteLength)>>2].push(fr)}var Rt=o(8,function(){return[]});return{alloc:qe,free:xt,allocType:function(fr,br){var pr=null;switch(fr){case 5120:pr=new Int8Array(qe(br),0,br);break;case 5121:pr=new Uint8Array(qe(br),0,br);break;case 5122:pr=new Int16Array(qe(2*br),0,br);break;case 5123:pr=new Uint16Array(qe(2*br),0,br);break;case 5124:pr=new Int32Array(qe(4*br),0,br);break;case 5125:pr=new Uint32Array(qe(4*br),0,br);break;case 5126:pr=new Float32Array(qe(4*br),0,br);break;default:return null}return pr.length!==br?pr.subarray(0,br):pr},freeType:function(fr){xt(fr.buffer)}}}function d(qe){return!!qe&&typeof qe=="object"&&Array.isArray(qe.shape)&&Array.isArray(qe.stride)&&typeof qe.offset=="number"&&qe.shape.length===qe.stride.length&&(Array.isArray(qe.data)||he(qe.data))}function p(qe,xt,Rt,fr,br,pr){for(var Tr=0;Tr<xt;++Tr)for(var Nr=qe[Tr],Ir=0;Ir<Rt;++Ir)for(var lr=Nr[Ir],Yr=0;Yr<fr;++Yr)br[pr++]=lr[Yr]}function y(qe,xt,Rt,fr,br){for(var pr=1,Tr=Rt+1;Tr<xt.length;++Tr)pr*=xt[Tr];var Nr=xt[Rt];if(xt.length-Rt==4){var Ir=xt[Rt+1],lr=xt[Rt+2];for(xt=xt[Rt+3],Tr=0;Tr<Nr;++Tr)p(qe[Tr],Ir,lr,xt,fr,br),br+=pr}else for(Tr=0;Tr<Nr;++Tr)y(qe[Tr],xt,Rt+1,fr,br),br+=pr}function g(qe){return Ce[Object.prototype.toString.call(qe)]|0}function A(qe,xt){for(var Rt=0;Rt<xt.length;++Rt)qe[Rt]=xt[Rt]}function b(qe,xt,Rt,fr,br,pr,Tr){for(var Nr=0,Ir=0;Ir<Rt;++Ir)for(var lr=0;lr<fr;++lr)qe[Nr++]=xt[br*Ir+pr*lr+Tr]}function M(qe,xt,Rt,fr){function br(nt){this.id=Ir++,this.buffer=qe.createBuffer(),this.type=nt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Rt.profile&&(this.stats={size:0})}function pr(nt,Ae,Ee){nt.byteLength=Ae.byteLength,qe.bufferData(nt.type,Ae,Ee)}function Tr(nt,Ae,Ee,Fe,Ke,tt){if(nt.usage=Ee,Array.isArray(Ae)){if(nt.dtype=Fe||5126,0<Ae.length)if(Array.isArray(Ae[0])){Ke=Xe(Ae);for(var ut=Fe=1;ut<Ke.length;++ut)Fe*=Ke[ut];nt.dimension=Fe,Ae=Ye(Ae,Ke,nt.dtype),pr(nt,Ae,Ee),tt?nt.persistentData=Ae:ue.freeType(Ae)}else typeof Ae[0]=="number"?(nt.dimension=Ke,Ke=ue.allocType(nt.dtype,Ae.length),A(Ke,Ae),pr(nt,Ke,Ee),tt?nt.persistentData=Ke:ue.freeType(Ke)):he(Ae[0])&&(nt.dimension=Ae[0].length,nt.dtype=Fe||g(Ae[0])||5126,Ae=Ye(Ae,[Ae.length,Ae[0].length],nt.dtype),pr(nt,Ae,Ee),tt?nt.persistentData=Ae:ue.freeType(Ae))}else if(he(Ae))nt.dtype=Fe||g(Ae),nt.dimension=Ke,pr(nt,Ae,Ee),tt&&(nt.persistentData=new Uint8Array(new Uint8Array(Ae.buffer)));else if(d(Ae)){Ke=Ae.shape;var ct=Ae.stride,ut=Ae.offset,yt=0,kt=0,jt=0,Mr=0;Ke.length===1?(yt=Ke[0],kt=1,jt=ct[0],Mr=0):Ke.length===2&&(yt=Ke[0],kt=Ke[1],jt=ct[0],Mr=ct[1]),nt.dtype=Fe||g(Ae.data)||5126,nt.dimension=kt,Ke=ue.allocType(nt.dtype,yt*kt),b(Ke,Ae.data,yt,kt,jt,Mr,ut),pr(nt,Ke,Ee),tt?nt.persistentData=Ke:ue.freeType(Ke)}else Ae instanceof ArrayBuffer&&(nt.dtype=5121,nt.dimension=Ke,pr(nt,Ae,Ee),tt&&(nt.persistentData=new Uint8Array(new Uint8Array(Ae))))}function Nr(nt){xt.bufferCount--,fr(nt),qe.deleteBuffer(nt.buffer),nt.buffer=null,delete lr[nt.id]}var Ir=0,lr={};br.prototype.bind=function(){qe.bindBuffer(this.type,this.buffer)},br.prototype.destroy=function(){Nr(this)};var Yr=[];return Rt.profile&&(xt.getTotalBufferSize=function(){var nt=0;return Object.keys(lr).forEach(function(Ae){nt+=lr[Ae].stats.size}),nt}),{create:function(nt,Ae,Ee,Fe){function Ke(ut){var ct=35044,yt=null,kt=0,jt=0,Mr=1;return Array.isArray(ut)||he(ut)||d(ut)||ut instanceof ArrayBuffer?yt=ut:typeof ut=="number"?kt=ut|0:ut&&("data"in ut&&(yt=ut.data),"usage"in ut&&(ct=Be[ut.usage]),"type"in ut&&(jt=Se[ut.type]),"dimension"in ut&&(Mr=ut.dimension|0),"length"in ut&&(kt=ut.length|0)),tt.bind(),yt?Tr(tt,yt,ct,jt,Mr,Fe):(kt&&qe.bufferData(tt.type,kt,ct),tt.dtype=jt||5121,tt.usage=ct,tt.dimension=Mr,tt.byteLength=kt),Rt.profile&&(tt.stats.size=tt.byteLength*Te[tt.dtype]),Ke}xt.bufferCount++;var tt=new br(Ae);return lr[tt.id]=tt,Ee||Ke(nt),Ke._reglType="buffer",Ke._buffer=tt,Ke.subdata=function(ut,ct){var yt=(ct||0)|0,kt;if(tt.bind(),he(ut)||ut instanceof ArrayBuffer)qe.bufferSubData(tt.type,yt,ut);else if(Array.isArray(ut)){if(0<ut.length)if(typeof ut[0]=="number"){var jt=ue.allocType(tt.dtype,ut.length);A(jt,ut),qe.bufferSubData(tt.type,yt,jt),ue.freeType(jt)}else(Array.isArray(ut[0])||he(ut[0]))&&(kt=Xe(ut),jt=Ye(ut,kt,tt.dtype),qe.bufferSubData(tt.type,yt,jt),ue.freeType(jt))}else if(d(ut)){kt=ut.shape;var Mr=ut.stride,Sr=jt=0,Lr=0,Ar=0;kt.length===1?(jt=kt[0],Sr=1,Lr=Mr[0],Ar=0):kt.length===2&&(jt=kt[0],Sr=kt[1],Lr=Mr[0],Ar=Mr[1]),kt=Array.isArray(ut.data)?tt.dtype:g(ut.data),kt=ue.allocType(kt,jt*Sr),b(kt,ut.data,jt,Sr,Lr,Ar,ut.offset),qe.bufferSubData(tt.type,yt,kt),ue.freeType(kt)}return Ke},Rt.profile&&(Ke.stats=tt.stats),Ke.destroy=function(){Nr(tt)},Ke},createStream:function(nt,Ae){var Ee=Yr.pop();return Ee||(Ee=new br(nt)),Ee.bind(),Tr(Ee,Ae,35040,0,1,!1),Ee},destroyStream:function(nt){Yr.push(nt)},clear:function(){me(lr).forEach(Nr),Yr.forEach(Nr)},getBuffer:function(nt){return nt&&nt._buffer instanceof br?nt._buffer:null},restore:function(){me(lr).forEach(function(nt){nt.buffer=qe.createBuffer(),qe.bindBuffer(nt.type,nt.buffer),qe.bufferData(nt.type,nt.persistentData||nt.byteLength,nt.usage)})},_initBuffer:Tr}}function w(qe,xt,Rt,fr){function br(nt){this.id=Ir++,Nr[this.id]=this,this.buffer=nt,this.primType=4,this.type=this.vertCount=0}function pr(nt,Ae,Ee,Fe,Ke,tt,ut){nt.buffer.bind();var ct;if(Ae?((ct=ut)||he(Ae)&&(!d(Ae)||he(Ae.data))||(ct=xt.oes_element_index_uint?5125:5123),Rt._initBuffer(nt.buffer,Ae,Ee,ct,3)):(qe.bufferData(34963,tt,Ee),nt.buffer.dtype=ct||5121,nt.buffer.usage=Ee,nt.buffer.dimension=3,nt.buffer.byteLength=tt),ct=ut,!ut){switch(nt.buffer.dtype){case 5121:case 5120:ct=5121;break;case 5123:case 5122:ct=5123;break;case 5125:case 5124:ct=5125}nt.buffer.dtype=ct}nt.type=ct,Ae=Ke,0>Ae&&(Ae=nt.buffer.byteLength,ct===5123?Ae>>=1:ct===5125&&(Ae>>=2)),nt.vertCount=Ae,Ae=Fe,0>Fe&&(Ae=4,Fe=nt.buffer.dimension,Fe===1&&(Ae=0),Fe===2&&(Ae=1),Fe===3&&(Ae=4)),nt.primType=Ae}function Tr(nt){fr.elementsCount--,delete Nr[nt.id],nt.buffer.destroy(),nt.buffer=null}var Nr={},Ir=0,lr={uint8:5121,uint16:5123};xt.oes_element_index_uint&&(lr.uint32=5125),br.prototype.bind=function(){this.buffer.bind()};var Yr=[];return{create:function(nt,Ae){function Ee(tt){if(tt)if(typeof tt=="number")Fe(tt),Ke.primType=4,Ke.vertCount=tt|0,Ke.type=5121;else{var ut=null,ct=35044,yt=-1,kt=-1,jt=0,Mr=0;Array.isArray(tt)||he(tt)||d(tt)?ut=tt:("data"in tt&&(ut=tt.data),"usage"in tt&&(ct=Be[tt.usage]),"primitive"in tt&&(yt=Ie[tt.primitive]),"count"in tt&&(kt=tt.count|0),"type"in tt&&(Mr=lr[tt.type]),"length"in tt?jt=tt.length|0:(jt=kt,Mr===5123||Mr===5122?jt*=2:(Mr===5125||Mr===5124)&&(jt*=4))),pr(Ke,ut,ct,yt,kt,jt,Mr)}else Fe(),Ke.primType=4,Ke.vertCount=0,Ke.type=5121;return Ee}var Fe=Rt.create(null,34963,!0),Ke=new br(Fe._buffer);return fr.elementsCount++,Ee(nt),Ee._reglType="elements",Ee._elements=Ke,Ee.subdata=function(tt,ut){return Fe.subdata(tt,ut),Ee},Ee.destroy=function(){Tr(Ke)},Ee},createStream:function(nt){var Ae=Yr.pop();return Ae||(Ae=new br(Rt.create(null,34963,!0,!1)._buffer)),pr(Ae,nt,35040,-1,-1,0,0),Ae},destroyStream:function(nt){Yr.push(nt)},getElements:function(nt){return typeof nt=="function"&&nt._elements instanceof br?nt._elements:null},clear:function(){me(Nr).forEach(Tr)}}}function T(qe){for(var xt=ue.allocType(5123,qe.length),Rt=0;Rt<qe.length;++Rt)if(isNaN(qe[Rt]))xt[Rt]=65535;else if(qe[Rt]===1/0)xt[Rt]=31744;else if(qe[Rt]===-1/0)xt[Rt]=64512;else{Ze[0]=qe[Rt];var fr=rt[0],br=fr>>>31<<15,pr=(fr<<1>>>24)-127,fr=fr>>13&1023;xt[Rt]=-24>pr?br:-14>pr?br+(fr+1024>>-14-pr):15<pr?br+31744:br+(pr+15<<10)+fr}return xt}function _(qe){return Array.isArray(qe)||he(qe)}function h(qe){return"[object "+qe+"]"}function L(qe){return Array.isArray(qe)&&(qe.length===0||typeof qe[0]=="number")}function S(qe){return!!(Array.isArray(qe)&&qe.length!==0&&_(qe[0]))}function k(qe){return Object.prototype.toString.call(qe)}function P(qe){if(!qe)return!1;var xt=k(qe);return 0<=It.indexOf(xt)?!0:L(qe)||S(qe)||d(qe)}function O(qe,xt){qe.type===36193?(qe.data=T(xt),ue.freeType(xt)):qe.data=xt}function F(qe,xt,Rt,fr,br,pr){if(qe=typeof lt[qe]!="undefined"?lt[qe]:We[qe]*Ct[xt],pr&&(qe*=6),br){for(fr=0;1<=Rt;)fr+=qe*Rt*Rt,Rt/=2;return fr}return qe*Rt*fr}function D(qe,xt,Rt,fr,br,pr,Tr){function Nr(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Ir(wr,wn){wr.internalformat=wn.internalformat,wr.format=wn.format,wr.type=wn.type,wr.compressed=wn.compressed,wr.premultiplyAlpha=wn.premultiplyAlpha,wr.flipY=wn.flipY,wr.unpackAlignment=wn.unpackAlignment,wr.colorSpace=wn.colorSpace,wr.width=wn.width,wr.height=wn.height,wr.channels=wn.channels}function lr(wr,wn){if(typeof wn=="object"&&wn){"premultiplyAlpha"in wn&&(wr.premultiplyAlpha=wn.premultiplyAlpha),"flipY"in wn&&(wr.flipY=wn.flipY),"alignment"in wn&&(wr.unpackAlignment=wn.alignment),"colorSpace"in wn&&(wr.colorSpace=vn[wn.colorSpace]),"type"in wn&&(wr.type=xn[wn.type]);var ln=wr.width,jn=wr.height,Jn=wr.channels,La=!1;"shape"in wn?(ln=wn.shape[0],jn=wn.shape[1],wn.shape.length===3&&(Jn=wn.shape[2],La=!0)):("radius"in wn&&(ln=jn=wn.radius),"width"in wn&&(ln=wn.width),"height"in wn&&(jn=wn.height),"channels"in wn&&(Jn=wn.channels,La=!0)),wr.width=ln|0,wr.height=jn|0,wr.channels=Jn|0,ln=!1,"format"in wn&&(ln=wn.format,jn=wr.internalformat=qr[ln],wr.format=en[jn],ln in xn&&!("type"in wn)&&(wr.type=xn[ln]),ln in st&&(wr.compressed=!0),ln=!0),!La&&ln?wr.channels=We[wr.format]:La&&!ln&&wr.channels!==ze[wr.format]&&(wr.format=wr.internalformat=ze[wr.channels])}}function Yr(wr){qe.pixelStorei(37440,wr.flipY),qe.pixelStorei(37441,wr.premultiplyAlpha),qe.pixelStorei(37443,wr.colorSpace),qe.pixelStorei(3317,wr.unpackAlignment)}function nt(){Nr.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ae(wr,wn){var ln=null;if(P(wn)?ln=wn:wn&&(lr(wr,wn),"x"in wn&&(wr.xOffset=wn.x|0),"y"in wn&&(wr.yOffset=wn.y|0),P(wn.data)&&(ln=wn.data)),wn.copy){var jn=br.viewportWidth,Jn=br.viewportHeight;wr.width=wr.width||jn-wr.xOffset,wr.height=wr.height||Jn-wr.yOffset,wr.needsCopy=!0}else if(!ln)wr.width=wr.width||1,wr.height=wr.height||1,wr.channels=wr.channels||4;else if(he(ln))wr.channels=wr.channels||4,wr.data=ln,"type"in wn||wr.type!==5121||(wr.type=Ce[Object.prototype.toString.call(ln)]|0);else if(L(ln)){switch(wr.channels=wr.channels||4,jn=ln,Jn=jn.length,wr.type){case 5121:case 5123:case 5125:case 5126:Jn=ue.allocType(wr.type,Jn),Jn.set(jn),wr.data=Jn;break;case 36193:wr.data=T(jn)}wr.alignment=1,wr.needsFree=!0}else if(d(ln)){jn=ln.data,Array.isArray(jn)||wr.type!==5121||(wr.type=Ce[Object.prototype.toString.call(jn)]|0);var Jn=ln.shape,La=ln.stride,ga,qn,Ea,la;Jn.length===3?(Ea=Jn[2],la=La[2]):la=Ea=1,ga=Jn[0],qn=Jn[1],Jn=La[0],La=La[1],wr.alignment=1,wr.width=ga,wr.height=qn,wr.channels=Ea,wr.format=wr.internalformat=ze[Ea],wr.needsFree=!0,ga=la,ln=ln.offset,Ea=wr.width,la=wr.height,qn=wr.channels;for(var sr=ue.allocType(wr.type===36193?5126:wr.type,Ea*la*qn),Hr=0,dn=0;dn<la;++dn)for(var hn=0;hn<Ea;++hn)for(var Sn=0;Sn<qn;++Sn)sr[Hr++]=jn[Jn*hn+La*dn+ga*Sn+ln];O(wr,sr)}else if(k(ln)===mt||k(ln)===Ft||k(ln)===Xt)k(ln)===mt||k(ln)===Ft?wr.element=ln:wr.element=ln.canvas,wr.width=wr.element.width,wr.height=wr.element.height,wr.channels=4;else if(k(ln)===Pt)wr.element=ln,wr.width=ln.width,wr.height=ln.height,wr.channels=4;else if(k(ln)===Ut)wr.element=ln,wr.width=ln.naturalWidth,wr.height=ln.naturalHeight,wr.channels=4;else if(k(ln)===Gt)wr.element=ln,wr.width=ln.videoWidth,wr.height=ln.videoHeight,wr.channels=4;else if(S(ln)){for(jn=wr.width||ln[0].length,Jn=wr.height||ln.length,La=wr.channels,La=_(ln[0][0])?La||ln[0][0].length:La||1,ga=be.shape(ln),Ea=1,la=0;la<ga.length;++la)Ea*=ga[la];Ea=ue.allocType(wr.type===36193?5126:wr.type,Ea),be.flatten(ln,ga,"",Ea),O(wr,Ea),wr.alignment=1,wr.width=jn,wr.height=Jn,wr.channels=La,wr.format=wr.internalformat=ze[La],wr.needsFree=!0}}function Ee(wr,wn,ln,jn,Jn){var La=wr.element,ga=wr.data,qn=wr.internalformat,Ea=wr.format,la=wr.type,sr=wr.width,Hr=wr.height;Yr(wr),La?qe.texSubImage2D(wn,Jn,ln,jn,Ea,la,La):wr.compressed?qe.compressedTexSubImage2D(wn,Jn,ln,jn,qn,sr,Hr,ga):wr.needsCopy?(fr(),qe.copyTexSubImage2D(wn,Jn,ln,jn,wr.xOffset,wr.yOffset,sr,Hr)):qe.texSubImage2D(wn,Jn,ln,jn,sr,Hr,Ea,la,ga)}function Fe(){return Zn.pop()||new nt}function Ke(wr){wr.needsFree&&ue.freeType(wr.data),nt.call(wr),Zn.push(wr)}function tt(){Nr.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ut(wr,wn,ln){var jn=wr.images[0]=Fe();wr.mipmask=1,jn.width=wr.width=wn,jn.height=wr.height=ln,jn.channels=wr.channels=4}function ct(wr,wn){var ln=null;if(P(wn))ln=wr.images[0]=Fe(),Ir(ln,wr),Ae(ln,wn),wr.mipmask=1;else if(lr(wr,wn),Array.isArray(wn.mipmap))for(var jn=wn.mipmap,Jn=0;Jn<jn.length;++Jn)ln=wr.images[Jn]=Fe(),Ir(ln,wr),ln.width>>=Jn,ln.height>>=Jn,Ae(ln,jn[Jn]),wr.mipmask|=1<<Jn;else ln=wr.images[0]=Fe(),Ir(ln,wr),Ae(ln,wn),wr.mipmask=1;Ir(wr,wr.images[0])}function yt(wr,wn){for(var ln=wr.images,jn=0;jn<ln.length&&ln[jn];++jn){var Jn=ln[jn],La=wn,ga=jn,qn=Jn.element,Ea=Jn.data,la=Jn.internalformat,sr=Jn.format,Hr=Jn.type,dn=Jn.width,hn=Jn.height;Yr(Jn),qn?qe.texImage2D(La,ga,sr,sr,Hr,qn):Jn.compressed?qe.compressedTexImage2D(La,ga,la,dn,hn,0,Ea):Jn.needsCopy?(fr(),qe.copyTexImage2D(La,ga,sr,Jn.xOffset,Jn.yOffset,dn,hn,0)):qe.texImage2D(La,ga,sr,dn,hn,0,sr,Hr,Ea||null)}}function kt(){var wr=Hn.pop()||new tt;Nr.call(wr);for(var wn=wr.mipmask=0;16>wn;++wn)wr.images[wn]=null;return wr}function jt(wr){for(var wn=wr.images,ln=0;ln<wn.length;++ln)wn[ln]&&Ke(wn[ln]),wn[ln]=null;Hn.push(wr)}function Mr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Sr(wr,wn){"min"in wn&&(wr.minFilter=Pr[wn.min],0<=Ge.indexOf(wr.minFilter)&&!("faces"in wn)&&(wr.genMipmaps=!0)),"mag"in wn&&(wr.magFilter=Jr[wn.mag]);var ln=wr.wrapS,jn=wr.wrapT;if("wrap"in wn){var Jn=wn.wrap;typeof Jn=="string"?ln=jn=En[Jn]:Array.isArray(Jn)&&(ln=En[Jn[0]],jn=En[Jn[1]])}else"wrapS"in wn&&(ln=En[wn.wrapS]),"wrapT"in wn&&(jn=En[wn.wrapT]);if(wr.wrapS=ln,wr.wrapT=jn,"anisotropic"in wn&&(wr.anisotropic=wn.anisotropic),"mipmap"in wn){switch(ln=!1,typeof wn.mipmap){case"string":wr.mipmapHint=_r[wn.mipmap],ln=wr.genMipmaps=!0;break;case"boolean":ln=wr.genMipmaps=wn.mipmap;break;case"object":wr.genMipmaps=!1,ln=!0}!ln||"min"in wn||(wr.minFilter=9984)}}function Lr(wr,wn){qe.texParameteri(wn,10241,wr.minFilter),qe.texParameteri(wn,10240,wr.magFilter),qe.texParameteri(wn,10242,wr.wrapS),qe.texParameteri(wn,10243,wr.wrapT),xt.ext_texture_filter_anisotropic&&qe.texParameteri(wn,34046,wr.anisotropic),wr.genMipmaps&&(qe.hint(33170,wr.mipmapHint),qe.generateMipmap(wn))}function Ar(wr){Nr.call(this),this.mipmask=0,this.internalformat=6408,this.id=da++,this.refCount=1,this.target=wr,this.texture=qe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Mr,Tr.profile&&(this.stats={size:0})}function Ur(wr){qe.activeTexture(33984),qe.bindTexture(wr.target,wr.texture)}function fn(){var wr=Oa[0];wr?qe.bindTexture(wr.target,wr.texture):qe.bindTexture(3553,null)}function Cr(wr){var wn=wr.texture,ln=wr.unit,jn=wr.target;0<=ln&&(qe.activeTexture(33984+ln),qe.bindTexture(jn,null),Oa[ln]=null),qe.deleteTexture(wn),wr.texture=null,wr.params=null,wr.pixels=null,wr.refCount=0,delete wa[wr.id],pr.textureCount--}var _r={"don't care":4352,"dont care":4352,nice:4354,fast:4353},En={repeat:10497,clamp:33071,mirror:33648},Jr={nearest:9728,linear:9729},Pr=K({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Jr),vn={none:0,browser:37444},xn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},qr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},st={};xt.ext_srgb&&(qr.srgb=35904,qr.srgba=35906),xt.oes_texture_float&&(xn.float32=xn.float=5126),xt.oes_texture_half_float&&(xn.float16=xn["half float"]=36193),xt.webgl_depth_texture&&(K(qr,{depth:6402,"depth stencil":34041}),K(xn,{uint16:5123,uint32:5125,"depth stencil":34042})),xt.webgl_compressed_texture_s3tc&&K(st,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),xt.webgl_compressed_texture_atc&&K(st,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),xt.webgl_compressed_texture_pvrtc&&K(st,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),xt.webgl_compressed_texture_etc1&&(st["rgb etc1"]=36196);var Bt=Array.prototype.slice.call(qe.getParameter(34467));Object.keys(st).forEach(function(wr){var wn=st[wr];0<=Bt.indexOf(wn)&&(qr[wr]=wn)});var ir=Object.keys(qr);Rt.textureFormats=ir;var xr=[];Object.keys(qr).forEach(function(wr){xr[qr[wr]]=wr});var Qr=[];Object.keys(xn).forEach(function(wr){Qr[xn[wr]]=wr});var Gr=[];Object.keys(Jr).forEach(function(wr){Gr[Jr[wr]]=wr});var Br=[];Object.keys(Pr).forEach(function(wr){Br[Pr[wr]]=wr});var kr=[];Object.keys(En).forEach(function(wr){kr[En[wr]]=wr});var en=ir.reduce(function(wr,wn){var ln=qr[wn];return ln===6409||ln===6406||ln===6409||ln===6410||ln===6402||ln===34041||xt.ext_srgb&&(ln===35904||ln===35906)?wr[ln]=ln:ln===32855||0<=wn.indexOf("rgba")?wr[ln]=6408:wr[ln]=6407,wr},{}),Zn=[],Hn=[],da=0,wa={},Va=Rt.maxTextureUnits,Oa=Array(Va).map(function(){return null});return K(Ar.prototype,{bind:function(){this.bindCount+=1;var wr=this.unit;if(0>wr){for(var wn=0;wn<Va;++wn){var ln=Oa[wn];if(ln){if(0<ln.bindCount)continue;ln.unit=-1}Oa[wn]=this,wr=wn;break}Tr.profile&&pr.maxTextureUnits<wr+1&&(pr.maxTextureUnits=wr+1),this.unit=wr,qe.activeTexture(33984+wr),qe.bindTexture(this.target,this.texture)}return wr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Cr(this)}}),Tr.profile&&(pr.getTotalTextureSize=function(){var wr=0;return Object.keys(wa).forEach(function(wn){wr+=wa[wn].stats.size}),wr}),{create2D:function(wr,wn){function ln(Jn,La){var ga=jn.texInfo;Mr.call(ga);var qn=kt();return typeof Jn=="number"?typeof La=="number"?ut(qn,Jn|0,La|0):ut(qn,Jn|0,Jn|0):Jn?(Sr(ga,Jn),ct(qn,Jn)):ut(qn,1,1),ga.genMipmaps&&(qn.mipmask=(qn.width<<1)-1),jn.mipmask=qn.mipmask,Ir(jn,qn),jn.internalformat=qn.internalformat,ln.width=qn.width,ln.height=qn.height,Ur(jn),yt(qn,3553),Lr(ga,3553),fn(),jt(qn),Tr.profile&&(jn.stats.size=F(jn.internalformat,jn.type,qn.width,qn.height,ga.genMipmaps,!1)),ln.format=xr[jn.internalformat],ln.type=Qr[jn.type],ln.mag=Gr[ga.magFilter],ln.min=Br[ga.minFilter],ln.wrapS=kr[ga.wrapS],ln.wrapT=kr[ga.wrapT],ln}var jn=new Ar(3553);return wa[jn.id]=jn,pr.textureCount++,ln(wr,wn),ln.subimage=function(Jn,La,ga,qn){La|=0,ga|=0,qn|=0;var Ea=Fe();return Ir(Ea,jn),Ea.width=0,Ea.height=0,Ae(Ea,Jn),Ea.width=Ea.width||(jn.width>>qn)-La,Ea.height=Ea.height||(jn.height>>qn)-ga,Ur(jn),Ee(Ea,3553,La,ga,qn),fn(),Ke(Ea),ln},ln.resize=function(Jn,La){var ga=Jn|0,qn=La|0||ga;if(ga===jn.width&&qn===jn.height)return ln;ln.width=jn.width=ga,ln.height=jn.height=qn,Ur(jn);for(var Ea=0;jn.mipmask>>Ea;++Ea){var la=ga>>Ea,sr=qn>>Ea;if(!la||!sr)break;qe.texImage2D(3553,Ea,jn.format,la,sr,0,jn.format,jn.type,null)}return fn(),Tr.profile&&(jn.stats.size=F(jn.internalformat,jn.type,ga,qn,!1,!1)),ln},ln._reglType="texture2d",ln._texture=jn,Tr.profile&&(ln.stats=jn.stats),ln.destroy=function(){jn.decRef()},ln},createCube:function(wr,wn,ln,jn,Jn,La){function ga(la,sr,Hr,dn,hn,Sn){var Rn,Mn=qn.texInfo;for(Mr.call(Mn),Rn=0;6>Rn;++Rn)Ea[Rn]=kt();if(typeof la=="number"||!la)for(la=la|0||1,Rn=0;6>Rn;++Rn)ut(Ea[Rn],la,la);else if(typeof la=="object")if(sr)ct(Ea[0],la),ct(Ea[1],sr),ct(Ea[2],Hr),ct(Ea[3],dn),ct(Ea[4],hn),ct(Ea[5],Sn);else if(Sr(Mn,la),lr(qn,la),"faces"in la)for(la=la.faces,Rn=0;6>Rn;++Rn)Ir(Ea[Rn],qn),ct(Ea[Rn],la[Rn]);else for(Rn=0;6>Rn;++Rn)ct(Ea[Rn],la);for(Ir(qn,Ea[0]),qn.mipmask=Mn.genMipmaps?(Ea[0].width<<1)-1:Ea[0].mipmask,qn.internalformat=Ea[0].internalformat,ga.width=Ea[0].width,ga.height=Ea[0].height,Ur(qn),Rn=0;6>Rn;++Rn)yt(Ea[Rn],34069+Rn);for(Lr(Mn,34067),fn(),Tr.profile&&(qn.stats.size=F(qn.internalformat,qn.type,ga.width,ga.height,Mn.genMipmaps,!0)),ga.format=xr[qn.internalformat],ga.type=Qr[qn.type],ga.mag=Gr[Mn.magFilter],ga.min=Br[Mn.minFilter],ga.wrapS=kr[Mn.wrapS],ga.wrapT=kr[Mn.wrapT],Rn=0;6>Rn;++Rn)jt(Ea[Rn]);return ga}var qn=new Ar(34067);wa[qn.id]=qn,pr.cubeCount++;var Ea=Array(6);return ga(wr,wn,ln,jn,Jn,La),ga.subimage=function(la,sr,Hr,dn,hn){Hr|=0,dn|=0,hn|=0;var Sn=Fe();return Ir(Sn,qn),Sn.width=0,Sn.height=0,Ae(Sn,sr),Sn.width=Sn.width||(qn.width>>hn)-Hr,Sn.height=Sn.height||(qn.height>>hn)-dn,Ur(qn),Ee(Sn,34069+la,Hr,dn,hn),fn(),Ke(Sn),ga},ga.resize=function(la){if(la|=0,la!==qn.width){ga.width=qn.width=la,ga.height=qn.height=la,Ur(qn);for(var sr=0;6>sr;++sr)for(var Hr=0;qn.mipmask>>Hr;++Hr)qe.texImage2D(34069+sr,Hr,qn.format,la>>Hr,la>>Hr,0,qn.format,qn.type,null);return fn(),Tr.profile&&(qn.stats.size=F(qn.internalformat,qn.type,ga.width,ga.height,!1,!0)),ga}},ga._reglType="textureCube",ga._texture=qn,Tr.profile&&(ga.stats=qn.stats),ga.destroy=function(){qn.decRef()},ga},clear:function(){for(var wr=0;wr<Va;++wr)qe.activeTexture(33984+wr),qe.bindTexture(3553,null),Oa[wr]=null;me(wa).forEach(Cr),pr.cubeCount=0,pr.textureCount=0},getTexture:function(wr){return null},restore:function(){for(var wr=0;wr<Va;++wr){var wn=Oa[wr];wn&&(wn.bindCount=0,wn.unit=-1,Oa[wr]=null)}me(wa).forEach(function(ln){ln.texture=qe.createTexture(),qe.bindTexture(ln.target,ln.texture);for(var jn=0;32>jn;++jn)if((ln.mipmask&1<<jn)!=0)if(ln.target===3553)qe.texImage2D(3553,jn,ln.internalformat,ln.width>>jn,ln.height>>jn,0,ln.internalformat,ln.type,null);else for(var Jn=0;6>Jn;++Jn)qe.texImage2D(34069+Jn,jn,ln.internalformat,ln.width>>jn,ln.height>>jn,0,ln.internalformat,ln.type,null);Lr(ln.texInfo,ln.target)})},refresh:function(){for(var wr=0;wr<Va;++wr){var wn=Oa[wr];wn&&(wn.bindCount=0,wn.unit=-1,Oa[wr]=null),qe.activeTexture(33984+wr),qe.bindTexture(3553,null),qe.bindTexture(34067,null)}}}}function R(qe,xt,Rt,fr,br,pr){function Tr(Ar,Ur,fn){this.target=Ar,this.texture=Ur,this.renderbuffer=fn;var Cr=Ar=0;Ur?(Ar=Ur.width,Cr=Ur.height):fn&&(Ar=fn.width,Cr=fn.height),this.width=Ar,this.height=Cr}function Nr(Ar){Ar&&(Ar.texture&&Ar.texture._texture.decRef(),Ar.renderbuffer&&Ar.renderbuffer._renderbuffer.decRef())}function Ir(Ar,Ur,fn){Ar&&(Ar.texture?Ar.texture._texture.refCount+=1:Ar.renderbuffer._renderbuffer.refCount+=1)}function lr(Ar,Ur){Ur&&(Ur.texture?qe.framebufferTexture2D(36160,Ar,Ur.target,Ur.texture._texture.texture,0):qe.framebufferRenderbuffer(36160,Ar,36161,Ur.renderbuffer._renderbuffer.renderbuffer))}function Yr(Ar){var Ur=3553,fn=null,Cr=null,_r=Ar;return typeof Ar=="object"&&(_r=Ar.data,"target"in Ar&&(Ur=Ar.target|0)),Ar=_r._reglType,Ar==="texture2d"||Ar==="textureCube"?fn=_r:Ar==="renderbuffer"&&(Cr=_r,Ur=36161),new Tr(Ur,fn,Cr)}function nt(Ar,Ur,fn,Cr,_r){return fn?(Ar=fr.create2D({width:Ar,height:Ur,format:Cr,type:_r}),Ar._texture.refCount=0,new Tr(3553,Ar,null)):(Ar=br.create({width:Ar,height:Ur,format:Cr}),Ar._renderbuffer.refCount=0,new Tr(36161,null,Ar))}function Ae(Ar){return Ar&&(Ar.texture||Ar.renderbuffer)}function Ee(Ar,Ur,fn){Ar&&(Ar.texture?Ar.texture.resize(Ur,fn):Ar.renderbuffer&&Ar.renderbuffer.resize(Ur,fn),Ar.width=Ur,Ar.height=fn)}function Fe(){this.id=Sr++,Lr[this.id]=this,this.framebuffer=qe.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ke(Ar){Ar.colorAttachments.forEach(Nr),Nr(Ar.depthAttachment),Nr(Ar.stencilAttachment),Nr(Ar.depthStencilAttachment)}function tt(Ar){qe.deleteFramebuffer(Ar.framebuffer),Ar.framebuffer=null,pr.framebufferCount--,delete Lr[Ar.id]}function ut(Ar){var Ur;qe.bindFramebuffer(36160,Ar.framebuffer);var fn=Ar.colorAttachments;for(Ur=0;Ur<fn.length;++Ur)lr(36064+Ur,fn[Ur]);for(Ur=fn.length;Ur<Rt.maxColorAttachments;++Ur)qe.framebufferTexture2D(36160,36064+Ur,3553,null,0);qe.framebufferTexture2D(36160,33306,3553,null,0),qe.framebufferTexture2D(36160,36096,3553,null,0),qe.framebufferTexture2D(36160,36128,3553,null,0),lr(36096,Ar.depthAttachment),lr(36128,Ar.stencilAttachment),lr(33306,Ar.depthStencilAttachment),qe.checkFramebufferStatus(36160),qe.isContextLost(),qe.bindFramebuffer(36160,yt.next?yt.next.framebuffer:null),yt.cur=yt.next,qe.getError()}function ct(Ar,Ur){function fn(_r,En){var Jr,Pr=0,vn=0,xn=!0,qr=!0;Jr=null;var st=!0,Bt="rgba",ir="uint8",xr=1,Qr=null,Gr=null,Br=null,kr=!1;typeof _r=="number"?(Pr=_r|0,vn=En|0||Pr):_r?("shape"in _r?(vn=_r.shape,Pr=vn[0],vn=vn[1]):("radius"in _r&&(Pr=vn=_r.radius),"width"in _r&&(Pr=_r.width),"height"in _r&&(vn=_r.height)),("color"in _r||"colors"in _r)&&(Jr=_r.color||_r.colors),Jr||("colorCount"in _r&&(xr=_r.colorCount|0),"colorTexture"in _r&&(st=!!_r.colorTexture,Bt="rgba4"),"colorType"in _r&&(ir=_r.colorType,!st)&&(ir==="half float"||ir==="float16"?Bt="rgba16f":(ir==="float"||ir==="float32")&&(Bt="rgba32f")),"colorFormat"in _r&&(Bt=_r.colorFormat,0<=kt.indexOf(Bt)?st=!0:0<=jt.indexOf(Bt)&&(st=!1))),("depthTexture"in _r||"depthStencilTexture"in _r)&&(kr=!(!_r.depthTexture&&!_r.depthStencilTexture)),"depth"in _r&&(typeof _r.depth=="boolean"?xn=_r.depth:(Qr=_r.depth,qr=!1)),"stencil"in _r&&(typeof _r.stencil=="boolean"?qr=_r.stencil:(Gr=_r.stencil,xn=!1)),"depthStencil"in _r&&(typeof _r.depthStencil=="boolean"?xn=qr=_r.depthStencil:(Br=_r.depthStencil,qr=xn=!1))):Pr=vn=1;var en=null,Zn=null,Hn=null,da=null;if(Array.isArray(Jr))en=Jr.map(Yr);else if(Jr)en=[Yr(Jr)];else for(en=Array(xr),Jr=0;Jr<xr;++Jr)en[Jr]=nt(Pr,vn,st,Bt,ir);for(Pr=Pr||en[0].width,vn=vn||en[0].height,Qr?Zn=Yr(Qr):xn&&!qr&&(Zn=nt(Pr,vn,kr,"depth","uint32")),Gr?Hn=Yr(Gr):qr&&!xn&&(Hn=nt(Pr,vn,!1,"stencil","uint8")),Br?da=Yr(Br):!Qr&&!Gr&&qr&&xn&&(da=nt(Pr,vn,kr,"depth stencil","depth stencil")),xn=null,Jr=0;Jr<en.length;++Jr)Ir(en[Jr]),en[Jr]&&en[Jr].texture&&(qr=Pe[en[Jr].texture._texture.format]*Je[en[Jr].texture._texture.type],xn===null&&(xn=qr));return Ir(Zn),Ir(Hn),Ir(da),Ke(Cr),Cr.width=Pr,Cr.height=vn,Cr.colorAttachments=en,Cr.depthAttachment=Zn,Cr.stencilAttachment=Hn,Cr.depthStencilAttachment=da,fn.color=en.map(Ae),fn.depth=Ae(Zn),fn.stencil=Ae(Hn),fn.depthStencil=Ae(da),fn.width=Cr.width,fn.height=Cr.height,ut(Cr),fn}var Cr=new Fe;return pr.framebufferCount++,fn(Ar,Ur),K(fn,{resize:function(_r,En){var Jr=Math.max(_r|0,1),Pr=Math.max(En|0||Jr,1);if(Jr===Cr.width&&Pr===Cr.height)return fn;for(var vn=Cr.colorAttachments,xn=0;xn<vn.length;++xn)Ee(vn[xn],Jr,Pr);return Ee(Cr.depthAttachment,Jr,Pr),Ee(Cr.stencilAttachment,Jr,Pr),Ee(Cr.depthStencilAttachment,Jr,Pr),Cr.width=fn.width=Jr,Cr.height=fn.height=Pr,ut(Cr),fn},_reglType:"framebuffer",_framebuffer:Cr,destroy:function(){tt(Cr),Ke(Cr)},use:function(_r){yt.setFBO({framebuffer:fn},_r)}})}var yt={cur:null,next:null,dirty:!1,setFBO:null},kt=["rgba"],jt=["rgba4","rgb565","rgb5 a1"];xt.ext_srgb&&jt.push("srgba"),xt.ext_color_buffer_half_float&&jt.push("rgba16f","rgb16f"),xt.webgl_color_buffer_float&&jt.push("rgba32f");var Mr=["uint8"];xt.oes_texture_half_float&&Mr.push("half float","float16"),xt.oes_texture_float&&Mr.push("float","float32");var Sr=0,Lr={};return K(yt,{getFramebuffer:function(Ar){return typeof Ar=="function"&&Ar._reglType==="framebuffer"&&(Ar=Ar._framebuffer,Ar instanceof Fe)?Ar:null},create:ct,createCube:function(Ar){function Ur(Cr){var _r,En={color:null},Jr=0,Pr=null;_r="rgba";var vn="uint8",xn=1;if(typeof Cr=="number"?Jr=Cr|0:Cr?("shape"in Cr?Jr=Cr.shape[0]:("radius"in Cr&&(Jr=Cr.radius|0),"width"in Cr?Jr=Cr.width|0:"height"in Cr&&(Jr=Cr.height|0)),("color"in Cr||"colors"in Cr)&&(Pr=Cr.color||Cr.colors),Pr||("colorCount"in Cr&&(xn=Cr.colorCount|0),"colorType"in Cr&&(vn=Cr.colorType),"colorFormat"in Cr&&(_r=Cr.colorFormat)),"depth"in Cr&&(En.depth=Cr.depth),"stencil"in Cr&&(En.stencil=Cr.stencil),"depthStencil"in Cr&&(En.depthStencil=Cr.depthStencil)):Jr=1,Pr)if(Array.isArray(Pr))for(Cr=[],_r=0;_r<Pr.length;++_r)Cr[_r]=Pr[_r];else Cr=[Pr];else for(Cr=Array(xn),Pr={radius:Jr,format:_r,type:vn},_r=0;_r<xn;++_r)Cr[_r]=fr.createCube(Pr);for(En.color=Array(Cr.length),_r=0;_r<Cr.length;++_r)xn=Cr[_r],Jr=Jr||xn.width,En.color[_r]={target:34069,data:Cr[_r]};for(_r=0;6>_r;++_r){for(xn=0;xn<Cr.length;++xn)En.color[xn].target=34069+_r;0<_r&&(En.depth=fn[0].depth,En.stencil=fn[0].stencil,En.depthStencil=fn[0].depthStencil),fn[_r]?fn[_r](En):fn[_r]=ct(En)}return K(Ur,{width:Jr,height:Jr,color:Cr})}var fn=Array(6);return Ur(Ar),K(Ur,{faces:fn,resize:function(Cr){var _r=Cr|0;if(_r===Ur.width)return Ur;var En=Ur.color;for(Cr=0;Cr<En.length;++Cr)En[Cr].resize(_r);for(Cr=0;6>Cr;++Cr)fn[Cr].resize(_r);return Ur.width=Ur.height=_r,Ur},_reglType:"framebufferCube",destroy:function(){fn.forEach(function(Cr){Cr.destroy()})}})},clear:function(){me(Lr).forEach(tt)},restore:function(){yt.cur=null,yt.next=null,yt.dirty=!0,me(Lr).forEach(function(Ar){Ar.framebuffer=qe.createFramebuffer(),ut(Ar)})}})}function U(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function N(qe,xt,Rt,fr,br,pr,Tr){function Nr(ut){if(ut!==tt.currentVAO){var ct=xt.oes_vertex_array_object;ut?ct.bindVertexArrayOES(ut.vao):ct.bindVertexArrayOES(null),tt.currentVAO=ut}}function Ir(ut){if(ut!==tt.currentVAO){if(ut)ut.bindAttrs();else{for(var ct=xt.angle_instanced_arrays,yt=0;yt<Ee.length;++yt){var kt=Ee[yt];kt.buffer?(qe.enableVertexAttribArray(yt),kt.buffer.bind(),qe.vertexAttribPointer(yt,kt.size,kt.type,kt.normalized,kt.stride,kt.offfset),ct&&kt.divisor&&ct.vertexAttribDivisorANGLE(yt,kt.divisor)):(qe.disableVertexAttribArray(yt),qe.vertexAttrib4f(yt,kt.x,kt.y,kt.z,kt.w))}Tr.elements?qe.bindBuffer(34963,Tr.elements.buffer.buffer):qe.bindBuffer(34963,null)}tt.currentVAO=ut}}function lr(){me(Ke).forEach(function(ut){ut.destroy()})}function Yr(){this.id=++Fe,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ut=xt.oes_vertex_array_object;this.vao=ut?ut.createVertexArrayOES():null,Ke[this.id]=this,this.buffers=[]}function nt(){xt.oes_vertex_array_object&&me(Ke).forEach(function(ut){ut.refresh()})}var Ae=Rt.maxAttributes,Ee=Array(Ae);for(Rt=0;Rt<Ae;++Rt)Ee[Rt]=new U;var Fe=0,Ke={},tt={Record:U,scope:{},state:Ee,currentVAO:null,targetVAO:null,restore:xt.oes_vertex_array_object?nt:function(){},createVAO:function(ut){function ct(kt){var jt;Array.isArray(kt)?(jt=kt,yt.elements&&yt.ownsElements&&yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1,yt.offset=0,yt.count=0,yt.instances=-1,yt.primitive=4):(kt.elements?(jt=kt.elements,yt.ownsElements?(typeof jt=="function"&&jt._reglType==="elements"?yt.elements.destroy():yt.elements(jt),yt.ownsElements=!1):pr.getElements(kt.elements)?(yt.elements=kt.elements,yt.ownsElements=!1):(yt.elements=pr.create(kt.elements),yt.ownsElements=!0)):(yt.elements=null,yt.ownsElements=!1),jt=kt.attributes,yt.offset=0,yt.count=-1,yt.instances=-1,yt.primitive=4,yt.elements&&(yt.count=yt.elements._elements.vertCount,yt.primitive=yt.elements._elements.primType),"offset"in kt&&(yt.offset=kt.offset|0),"count"in kt&&(yt.count=kt.count|0),"instances"in kt&&(yt.instances=kt.instances|0),"primitive"in kt&&(yt.primitive=Ie[kt.primitive])),kt={};var Mr=yt.attributes;Mr.length=jt.length;for(var Sr=0;Sr<jt.length;++Sr){var Lr=jt[Sr],Ar=Mr[Sr]=new U,Ur=Lr.data||Lr;if(Array.isArray(Ur)||he(Ur)||d(Ur)){var fn;yt.buffers[Sr]&&(fn=yt.buffers[Sr],he(Ur)&&fn._buffer.byteLength>=Ur.byteLength?fn.subdata(Ur):(fn.destroy(),yt.buffers[Sr]=null)),yt.buffers[Sr]||(fn=yt.buffers[Sr]=br.create(Lr,34962,!1,!0)),Ar.buffer=br.getBuffer(fn),Ar.size=Ar.buffer.dimension|0,Ar.normalized=!1,Ar.type=Ar.buffer.dtype,Ar.offset=0,Ar.stride=0,Ar.divisor=0,Ar.state=1,kt[Sr]=1}else br.getBuffer(Lr)?(Ar.buffer=br.getBuffer(Lr),Ar.size=Ar.buffer.dimension|0,Ar.normalized=!1,Ar.type=Ar.buffer.dtype,Ar.offset=0,Ar.stride=0,Ar.divisor=0,Ar.state=1):br.getBuffer(Lr.buffer)?(Ar.buffer=br.getBuffer(Lr.buffer),Ar.size=(+Lr.size||Ar.buffer.dimension)|0,Ar.normalized=!!Lr.normalized||!1,Ar.type="type"in Lr?Se[Lr.type]:Ar.buffer.dtype,Ar.offset=(Lr.offset||0)|0,Ar.stride=(Lr.stride||0)|0,Ar.divisor=(Lr.divisor||0)|0,Ar.state=1):"x"in Lr&&(Ar.x=+Lr.x||0,Ar.y=+Lr.y||0,Ar.z=+Lr.z||0,Ar.w=+Lr.w||0,Ar.state=2)}for(fn=0;fn<yt.buffers.length;++fn)!kt[fn]&&yt.buffers[fn]&&(yt.buffers[fn].destroy(),yt.buffers[fn]=null);return yt.refresh(),ct}var yt=new Yr;return fr.vaoCount+=1,ct.destroy=function(){for(var kt=0;kt<yt.buffers.length;++kt)yt.buffers[kt]&&yt.buffers[kt].destroy();yt.buffers.length=0,yt.ownsElements&&(yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1),yt.destroy()},ct._vao=yt,ct._reglType="vao",ct(ut)},getVAO:function(ut){return typeof ut=="function"&&ut._vao?ut._vao:null},destroyBuffer:function(ut){for(var ct=0;ct<Ee.length;++ct){var yt=Ee[ct];yt.buffer===ut&&(qe.disableVertexAttribArray(ct),yt.buffer=null)}},setVAO:xt.oes_vertex_array_object?Nr:Ir,clear:xt.oes_vertex_array_object?lr:function(){}};return Yr.prototype.bindAttrs=function(){for(var ut=xt.angle_instanced_arrays,ct=this.attributes,yt=0;yt<ct.length;++yt){var kt=ct[yt];kt.buffer?(qe.enableVertexAttribArray(yt),qe.bindBuffer(34962,kt.buffer.buffer),qe.vertexAttribPointer(yt,kt.size,kt.type,kt.normalized,kt.stride,kt.offset),ut&&kt.divisor&&ut.vertexAttribDivisorANGLE(yt,kt.divisor)):(qe.disableVertexAttribArray(yt),qe.vertexAttrib4f(yt,kt.x,kt.y,kt.z,kt.w))}for(ut=ct.length;ut<Ae;++ut)qe.disableVertexAttribArray(ut);(ut=pr.getElements(this.elements))?qe.bindBuffer(34963,ut.buffer.buffer):qe.bindBuffer(34963,null)},Yr.prototype.refresh=function(){var ut=xt.oes_vertex_array_object;ut&&(ut.bindVertexArrayOES(this.vao),this.bindAttrs(),tt.currentVAO=null,ut.bindVertexArrayOES(null))},Yr.prototype.destroy=function(){if(this.vao){var ut=xt.oes_vertex_array_object;this===tt.currentVAO&&(tt.currentVAO=null,ut.bindVertexArrayOES(null)),ut.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Ke[this.id]&&(delete Ke[this.id],--fr.vaoCount)},tt}function X(qe,xt,Rt,fr){function br(Fe,Ke,tt,ut){this.name=Fe,this.id=Ke,this.location=tt,this.info=ut}function pr(Fe,Ke){for(var tt=0;tt<Fe.length;++tt)if(Fe[tt].id===Ke.id){Fe[tt].location=Ke.location;return}Fe.push(Ke)}function Tr(Fe,Ke,tt){tt=Fe===35632?lr:Yr;var ut=tt[Ke];if(!ut){var ct=xt.str(Ke),ut=qe.createShader(Fe);qe.shaderSource(ut,ct),qe.compileShader(ut),tt[Ke]=ut}return ut}function Nr(Fe,Ke){this.id=Ee++,this.fragId=Fe,this.vertId=Ke,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,fr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ir(Fe,Ke,tt){var ut;ut=Tr(35632,Fe.fragId);var ct=Tr(35633,Fe.vertId);if(Ke=Fe.program=qe.createProgram(),qe.attachShader(Ke,ut),qe.attachShader(Ke,ct),tt)for(ut=0;ut<tt.length;++ut)ct=tt[ut],qe.bindAttribLocation(Ke,ct[0],ct[1]);qe.linkProgram(Ke),ct=qe.getProgramParameter(Ke,35718),fr.profile&&(Fe.stats.uniformsCount=ct);var yt=Fe.uniforms;for(ut=0;ut<ct;++ut)if(tt=qe.getActiveUniform(Ke,ut)){if(1<tt.size)for(var kt=0;kt<tt.size;++kt){var jt=tt.name.replace("[0]","["+kt+"]");pr(yt,new br(jt,xt.id(jt),qe.getUniformLocation(Ke,jt),tt))}kt=tt.name,1<tt.size&&(kt=kt.replace("[0]","")),pr(yt,new br(kt,xt.id(kt),qe.getUniformLocation(Ke,kt),tt))}for(ct=qe.getProgramParameter(Ke,35721),fr.profile&&(Fe.stats.attributesCount=ct),Fe=Fe.attributes,ut=0;ut<ct;++ut)(tt=qe.getActiveAttrib(Ke,ut))&&pr(Fe,new br(tt.name,xt.id(tt.name),qe.getAttribLocation(Ke,tt.name),tt))}var lr={},Yr={},nt={},Ae=[],Ee=0;return fr.profile&&(Rt.getMaxUniformsCount=function(){var Fe=0;return Ae.forEach(function(Ke){Ke.stats.uniformsCount>Fe&&(Fe=Ke.stats.uniformsCount)}),Fe},Rt.getMaxAttributesCount=function(){var Fe=0;return Ae.forEach(function(Ke){Ke.stats.attributesCount>Fe&&(Fe=Ke.stats.attributesCount)}),Fe}),{clear:function(){var Fe=qe.deleteShader.bind(qe);me(lr).forEach(Fe),lr={},me(Yr).forEach(Fe),Yr={},Ae.forEach(function(Ke){qe.deleteProgram(Ke.program)}),Ae.length=0,nt={},Rt.shaderCount=0},program:function(Fe,Ke,tt,ut){var ct=nt[Ke];ct||(ct=nt[Ke]={});var yt=ct[Fe];if(yt&&(yt.refCount++,!ut))return yt;var kt=new Nr(Ke,Fe);return Rt.shaderCount++,Ir(kt,tt,ut),yt||(ct[Fe]=kt),Ae.push(kt),K(kt,{destroy:function(){if(kt.refCount--,0>=kt.refCount){qe.deleteProgram(kt.program);var jt=Ae.indexOf(kt);Ae.splice(jt,1),Rt.shaderCount--}0>=ct[kt.vertId].refCount&&(qe.deleteShader(Yr[kt.vertId]),delete Yr[kt.vertId],delete nt[kt.fragId][kt.vertId]),Object.keys(nt[kt.fragId]).length||(qe.deleteShader(lr[kt.fragId]),delete lr[kt.fragId],delete nt[kt.fragId])}})},restore:function(){lr={},Yr={};for(var Fe=0;Fe<Ae.length;++Fe)Ir(Ae[Fe],null,Ae[Fe].attributes.map(function(Ke){return[Ke.location,Ke.name]}))},shader:Tr,frag:-1,vert:-1}}function j(qe,xt,Rt,fr,br,pr,Tr){function Nr(lr){var Yr;Yr=xt.next===null?5121:xt.next.colorAttachments[0].texture._texture.type;var nt=0,Ae=0,Ee=fr.framebufferWidth,Fe=fr.framebufferHeight,Ke=null;return he(lr)?Ke=lr:lr&&(nt=lr.x|0,Ae=lr.y|0,Ee=(lr.width||fr.framebufferWidth-nt)|0,Fe=(lr.height||fr.framebufferHeight-Ae)|0,Ke=lr.data||null),Rt(),lr=Ee*Fe*4,Ke||(Yr===5121?Ke=new Uint8Array(lr):Yr===5126&&(Ke=Ke||new Float32Array(lr))),qe.pixelStorei(3333,4),qe.readPixels(nt,Ae,Ee,Fe,6408,Yr,Ke),Ke}function Ir(lr){var Yr;return xt.setFBO({framebuffer:lr.framebuffer},function(){Yr=Nr(lr)}),Yr}return function(lr){return lr&&"framebuffer"in lr?Ir(lr):Nr(lr)}}function ee(qe){return Array.prototype.slice.call(qe)}function q(qe){return ee(qe).join("")}function G(){function qe(){var Nr=[],Ir=[];return K(function(){Nr.push.apply(Nr,ee(arguments))},{def:function(){var lr="v"+Rt++;return Ir.push(lr),0<arguments.length&&(Nr.push(lr,"="),Nr.push.apply(Nr,ee(arguments)),Nr.push(";")),lr},toString:function(){return q([0<Ir.length?"var "+Ir.join(",")+";":"",q(Nr)])}})}function xt(){function Nr(Ae,Ee){lr(Ae,Ee,"=",Ir.def(Ae,Ee),";")}var Ir=qe(),lr=qe(),Yr=Ir.toString,nt=lr.toString;return K(function(){Ir.apply(Ir,ee(arguments))},{def:Ir.def,entry:Ir,exit:lr,save:Nr,set:function(Ae,Ee,Fe){Nr(Ae,Ee),Ir(Ae,Ee,"=",Fe,";")},toString:function(){return Yr()+nt()}})}var Rt=0,fr=[],br=[],pr=qe(),Tr={};return{global:pr,link:function(Nr){for(var Ir=0;Ir<br.length;++Ir)if(br[Ir]===Nr)return fr[Ir];return Ir="g"+Rt++,fr.push(Ir),br.push(Nr),Ir},block:qe,proc:function(Nr,Ir){function lr(){var Ee="a"+Yr.length;return Yr.push(Ee),Ee}var Yr=[];Ir=Ir||0;for(var nt=0;nt<Ir;++nt)lr();var nt=xt(),Ae=nt.toString;return Tr[Nr]=K(nt,{arg:lr,toString:function(){return q(["function(",Yr.join(),"){",Ae(),"}"])}})},scope:xt,cond:function(){var Nr=q(arguments),Ir=xt(),lr=xt(),Yr=Ir.toString,nt=lr.toString;return K(Ir,{then:function(){return Ir.apply(Ir,ee(arguments)),this},else:function(){return lr.apply(lr,ee(arguments)),this},toString:function(){var Ae=nt();return Ae&&(Ae="else{"+Ae+"}"),q(["if(",Nr,"){",Yr(),"}",Ae])}})},compile:function(){var Nr=['"use strict";',pr,"return {"];Object.keys(Tr).forEach(function(lr){Nr.push('"',lr,'":',Tr[lr].toString(),",")}),Nr.push("}");var Ir=q(Nr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,fr.concat(Ir)).apply(null,br)}}}function J(qe){return Array.isArray(qe)||he(qe)||d(qe)}function le(qe){return qe.sort(function(xt,Rt){return xt==="viewport"?-1:Rt==="viewport"?1:xt<Rt?-1:1})}function fe(qe,xt,Rt,fr){this.thisDep=qe,this.contextDep=xt,this.propDep=Rt,this.append=fr}function se(qe){return qe&&!(qe.thisDep||qe.contextDep||qe.propDep)}function V(qe){return new fe(!1,!1,!1,qe)}function Y(qe,xt){var Rt=qe.type;if(Rt===0)return Rt=qe.data.length,new fe(!0,1<=Rt,2<=Rt,xt);if(Rt===4)return Rt=qe.data,new fe(Rt.thisDep,Rt.contextDep,Rt.propDep,xt);if(Rt===5)return new fe(!1,!1,!1,xt);if(Rt===6){for(var fr=Rt=!1,br=!1,pr=0;pr<qe.data.length;++pr){var Tr=qe.data[pr];Tr.type===1?br=!0:Tr.type===2?fr=!0:Tr.type===3?Rt=!0:Tr.type===0?(Rt=!0,Tr=Tr.data,1<=Tr&&(fr=!0),2<=Tr&&(br=!0)):Tr.type===4&&(Rt=Rt||Tr.data.thisDep,fr=fr||Tr.data.contextDep,br=br||Tr.data.propDep)}return new fe(Rt,fr,br,xt)}return new fe(Rt===3,Rt===2,Rt===1,xt)}function ne(qe,xt,Rt,fr,br,pr,Tr,Nr,Ir,lr,Yr,nt,Ae,Ee,Fe){function Ke(sr){return sr.replace(".","_")}function tt(sr,Hr,dn){var hn=Ke(sr);Jn.push(sr),jn[hn]=ln[hn]=!!dn,La[hn]=Hr}function ut(sr,Hr,dn){var hn=Ke(sr);Jn.push(sr),Array.isArray(dn)?(ln[hn]=dn.slice(),jn[hn]=dn.slice()):ln[hn]=jn[hn]=dn,ga[hn]=Hr}function ct(){var sr=G(),Hr=sr.link,dn=sr.global;sr.id=la++,sr.batchId="0";var hn=Hr(qn),Sn=sr.shared={props:"a0"};Object.keys(qn).forEach(function(Fr){Sn[Fr]=dn.def(hn,".",Fr)});var Rn=sr.next={},Mn=sr.current={};Object.keys(ga).forEach(function(Fr){Array.isArray(ln[Fr])&&(Rn[Fr]=dn.def(Sn.next,".",Fr),Mn[Fr]=dn.def(Sn.current,".",Fr))});var mr=sr.constants={};Object.keys(Ea).forEach(function(Fr){mr[Fr]=dn.def(JSON.stringify(Ea[Fr]))}),sr.invoke=function(Fr,nn){switch(nn.type){case 0:var On=["this",Sn.context,Sn.props,sr.batchId];return Fr.def(Hr(nn.data),".call(",On.slice(0,Math.max(nn.data.length+1,4)),")");case 1:return Fr.def(Sn.props,nn.data);case 2:return Fr.def(Sn.context,nn.data);case 3:return Fr.def("this",nn.data);case 4:return nn.data.append(sr,Fr),nn.data.ref;case 5:return nn.data.toString();case 6:return nn.data.map(function(ra){return sr.invoke(Fr,ra)})}},sr.attribCache={};var hr={};return sr.scopeAttrib=function(Fr){if(Fr=xt.id(Fr),Fr in hr)return hr[Fr];var nn=lr.scope[Fr];return nn||(nn=lr.scope[Fr]=new wa),hr[Fr]=Hr(nn)},sr}function yt(sr){var Hr=sr.static;sr=sr.dynamic;var dn;if("profile"in Hr){var hn=!!Hr.profile;dn=V(function(Rn,Mn){return hn}),dn.enable=hn}else if("profile"in sr){var Sn=sr.profile;dn=Y(Sn,function(Rn,Mn){return Rn.invoke(Mn,Sn)})}return dn}function kt(sr,Hr){var dn=sr.static,hn=sr.dynamic;if("framebuffer"in dn){var Sn=dn.framebuffer;return Sn?(Sn=Nr.getFramebuffer(Sn),V(function(Mn,mr){var hr=Mn.link(Sn),Fr=Mn.shared;return mr.set(Fr.framebuffer,".next",hr),Fr=Fr.context,mr.set(Fr,".framebufferWidth",hr+".width"),mr.set(Fr,".framebufferHeight",hr+".height"),hr})):V(function(Mn,mr){var hr=Mn.shared;return mr.set(hr.framebuffer,".next","null"),hr=hr.context,mr.set(hr,".framebufferWidth",hr+".drawingBufferWidth"),mr.set(hr,".framebufferHeight",hr+".drawingBufferHeight"),"null"})}if("framebuffer"in hn){var Rn=hn.framebuffer;return Y(Rn,function(Mn,mr){var hr=Mn.invoke(mr,Rn),Fr=Mn.shared,nn=Fr.framebuffer,hr=mr.def(nn,".getFramebuffer(",hr,")");return mr.set(nn,".next",hr),Fr=Fr.context,mr.set(Fr,".framebufferWidth",hr+"?"+hr+".width:"+Fr+".drawingBufferWidth"),mr.set(Fr,".framebufferHeight",hr+"?"+hr+".height:"+Fr+".drawingBufferHeight"),hr})}return null}function jt(sr,Hr,dn){function hn(mr){if(mr in Sn){var hr=Sn[mr];mr=!0;var Fr=hr.x|0,nn=hr.y|0,On,ra;return"width"in hr?On=hr.width|0:mr=!1,"height"in hr?ra=hr.height|0:mr=!1,new fe(!mr&&Hr&&Hr.thisDep,!mr&&Hr&&Hr.contextDep,!mr&&Hr&&Hr.propDep,function($n,Qn){var kn=$n.shared.context,Wn=On;"width"in hr||(Wn=Qn.def(kn,".","framebufferWidth","-",Fr));var aa=ra;return"height"in hr||(aa=Qn.def(kn,".","framebufferHeight","-",nn)),[Fr,nn,Wn,aa]})}if(mr in Rn){var ua=Rn[mr];return mr=Y(ua,function($n,Qn){var kn=$n.invoke(Qn,ua),Wn=$n.shared.context,aa=Qn.def(kn,".x|0"),Ma=Qn.def(kn,".y|0"),ui=Qn.def('"width" in ',kn,"?",kn,".width|0:","(",Wn,".","framebufferWidth","-",aa,")"),kn=Qn.def('"height" in ',kn,"?",kn,".height|0:","(",Wn,".","framebufferHeight","-",Ma,")");return[aa,Ma,ui,kn]}),Hr&&(mr.thisDep=mr.thisDep||Hr.thisDep,mr.contextDep=mr.contextDep||Hr.contextDep,mr.propDep=mr.propDep||Hr.propDep),mr}return Hr?new fe(Hr.thisDep,Hr.contextDep,Hr.propDep,function($n,Qn){var kn=$n.shared.context;return[0,0,Qn.def(kn,".","framebufferWidth"),Qn.def(kn,".","framebufferHeight")]}):null}var Sn=sr.static,Rn=sr.dynamic;if(sr=hn("viewport")){var Mn=sr;sr=new fe(sr.thisDep,sr.contextDep,sr.propDep,function(mr,hr){var Fr=Mn.append(mr,hr),nn=mr.shared.context;return hr.set(nn,".viewportWidth",Fr[2]),hr.set(nn,".viewportHeight",Fr[3]),Fr})}return{viewport:sr,scissor_box:hn("scissor.box")}}function Mr(sr,Hr){var dn=sr.static;if(typeof dn.frag=="string"&&typeof dn.vert=="string"){if(0<Object.keys(Hr.dynamic).length)return null;var dn=Hr.static,hn=Object.keys(dn);if(0<hn.length&&typeof dn[hn[0]]=="number"){for(var Sn=[],Rn=0;Rn<hn.length;++Rn)Sn.push([dn[hn[Rn]]|0,hn[Rn]]);return Sn}}return null}function Sr(sr,Hr,dn){function hn(Fr){if(Fr in Sn){var nn=xt.id(Sn[Fr]);return Fr=V(function(){return nn}),Fr.id=nn,Fr}if(Fr in Rn){var On=Rn[Fr];return Y(On,function(ra,ua){var $n=ra.invoke(ua,On);return ua.def(ra.shared.strings,".id(",$n,")")})}return null}var Sn=sr.static,Rn=sr.dynamic,Mn=hn("frag"),mr=hn("vert"),hr=null;return se(Mn)&&se(mr)?(hr=Yr.program(mr.id,Mn.id,null,dn),sr=V(function(Fr,nn){return Fr.link(hr)})):sr=new fe(Mn&&Mn.thisDep||mr&&mr.thisDep,Mn&&Mn.contextDep||mr&&mr.contextDep,Mn&&Mn.propDep||mr&&mr.propDep,function(Fr,nn){var On=Fr.shared.shader,ra;ra=Mn?Mn.append(Fr,nn):nn.def(On,".","frag");var ua;return ua=mr?mr.append(Fr,nn):nn.def(On,".","vert"),nn.def(On+".program("+ua+","+ra+")")}),{frag:Mn,vert:mr,progVar:sr,program:hr}}function Lr(sr,Hr){function dn($n,Qn){if($n in hn){var kn=hn[$n]|0;return Qn?Rn.offset=kn:Rn.instances=kn,V(function(aa,Ma){return Qn&&(aa.OFFSET=kn),kn})}if($n in Sn){var Wn=Sn[$n];return Y(Wn,function(aa,Ma){var ui=aa.invoke(Ma,Wn);return Qn&&(aa.OFFSET=ui),ui})}if(Qn){if(hr)return V(function(aa,Ma){return aa.OFFSET=0});if(Mn)return new fe(mr.thisDep,mr.contextDep,mr.propDep,function(aa,Ma){return Ma.def(aa.shared.vao+".currentVAO?"+aa.shared.vao+".currentVAO.offset:0")})}else if(Mn)return new fe(mr.thisDep,mr.contextDep,mr.propDep,function(aa,Ma){return Ma.def(aa.shared.vao+".currentVAO?"+aa.shared.vao+".currentVAO.instances:-1")});return null}var hn=sr.static,Sn=sr.dynamic,Rn={},Mn=!1,mr=function(){if("vao"in hn){var $n=hn.vao;return $n!==null&&lr.getVAO($n)===null&&($n=lr.createVAO($n)),Mn=!0,Rn.vao=$n,V(function(kn){var Wn=lr.getVAO($n);return Wn?kn.link(Wn):"null"})}if("vao"in Sn){Mn=!0;var Qn=Sn.vao;return Y(Qn,function(kn,Wn){var aa=kn.invoke(Wn,Qn);return Wn.def(kn.shared.vao+".getVAO("+aa+")")})}return null}(),hr=!1,Fr=function(){if("elements"in hn){var $n=hn.elements;if(Rn.elements=$n,J($n)){var Qn=Rn.elements=pr.create($n,!0),$n=pr.getElements(Qn);hr=!0}else $n&&($n=pr.getElements($n),hr=!0);return Qn=V(function(Wn,aa){if($n){var Ma=Wn.link($n);return Wn.ELEMENTS=Ma}return Wn.ELEMENTS=null}),Qn.value=$n,Qn}if("elements"in Sn){hr=!0;var kn=Sn.elements;return Y(kn,function(Wn,aa){var Ma=Wn.shared,ui=Ma.isBufferArgs,Ma=Ma.elements,Na=Wn.invoke(aa,kn),nu=aa.def("null"),ui=aa.def(ui,"(",Na,")"),Na=Wn.cond(ui).then(nu,"=",Ma,".createStream(",Na,");").else(nu,"=",Ma,".getElements(",Na,");");return aa.entry(Na),aa.exit(Wn.cond(ui).then(Ma,".destroyStream(",nu,");")),Wn.ELEMENTS=nu})}return Mn?new fe(mr.thisDep,mr.contextDep,mr.propDep,function(Wn,aa){return aa.def(Wn.shared.vao+".currentVAO?"+Wn.shared.elements+".getElements("+Wn.shared.vao+".currentVAO.elements):null")}):null}(),nn=dn("offset",!0),On=function(){if("primitive"in hn){var $n=hn.primitive;return Rn.primitive=$n,V(function(kn,Wn){return Ie[$n]})}if("primitive"in Sn){var Qn=Sn.primitive;return Y(Qn,function(kn,Wn){var aa=kn.constants.primTypes,Ma=kn.invoke(Wn,Qn);return Wn.def(aa,"[",Ma,"]")})}return hr?se(Fr)?Fr.value?V(function(kn,Wn){return Wn.def(kn.ELEMENTS,".primType")}):V(function(){return 4}):new fe(Fr.thisDep,Fr.contextDep,Fr.propDep,function(kn,Wn){var aa=kn.ELEMENTS;return Wn.def(aa,"?",aa,".primType:",4)}):Mn?new fe(mr.thisDep,mr.contextDep,mr.propDep,function(kn,Wn){return Wn.def(kn.shared.vao+".currentVAO?"+kn.shared.vao+".currentVAO.primitive:4")}):null}(),ra=function(){if("count"in hn){var $n=hn.count|0;return Rn.count=$n,V(function(){return $n})}if("count"in Sn){var Qn=Sn.count;return Y(Qn,function(kn,Wn){return kn.invoke(Wn,Qn)})}return hr?se(Fr)?Fr?nn?new fe(nn.thisDep,nn.contextDep,nn.propDep,function(kn,Wn){return Wn.def(kn.ELEMENTS,".vertCount-",kn.OFFSET)}):V(function(kn,Wn){return Wn.def(kn.ELEMENTS,".vertCount")}):V(function(){return-1}):new fe(Fr.thisDep||nn.thisDep,Fr.contextDep||nn.contextDep,Fr.propDep||nn.propDep,function(kn,Wn){var aa=kn.ELEMENTS;return kn.OFFSET?Wn.def(aa,"?",aa,".vertCount-",kn.OFFSET,":-1"):Wn.def(aa,"?",aa,".vertCount:-1")}):Mn?new fe(mr.thisDep,mr.contextDep,mr.propDep,function(kn,Wn){return Wn.def(kn.shared.vao,".currentVAO?",kn.shared.vao,".currentVAO.count:-1")}):null}(),ua=dn("instances",!1);return{elements:Fr,primitive:On,count:ra,instances:ua,offset:nn,vao:mr,vaoActive:Mn,elementsActive:hr,static:Rn}}function Ar(sr,Hr){var dn=sr.static,hn=sr.dynamic,Sn={};return Jn.forEach(function(Rn){function Mn(hr,Fr){if(Rn in dn){var nn=hr(dn[Rn]);Sn[mr]=V(function(){return nn})}else if(Rn in hn){var On=hn[Rn];Sn[mr]=Y(On,function(ra,ua){return Fr(ra,ua,ra.invoke(ua,On))})}}var mr=Ke(Rn);switch(Rn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return Mn(function(hr){return hr},function(hr,Fr,nn){return nn});case"depth.func":return Mn(function(hr){return Lt[hr]},function(hr,Fr,nn){return Fr.def(hr.constants.compareFuncs,"[",nn,"]")});case"depth.range":return Mn(function(hr){return hr},function(hr,Fr,nn){return hr=Fr.def("+",nn,"[0]"),Fr=Fr.def("+",nn,"[1]"),[hr,Fr]});case"blend.func":return Mn(function(hr){return[zt["srcRGB"in hr?hr.srcRGB:hr.src],zt["dstRGB"in hr?hr.dstRGB:hr.dst],zt["srcAlpha"in hr?hr.srcAlpha:hr.src],zt["dstAlpha"in hr?hr.dstAlpha:hr.dst]]},function(hr,Fr,nn){function On(Qn,kn){return Fr.def('"',Qn,kn,'" in ',nn,"?",nn,".",Qn,kn,":",nn,".",Qn)}hr=hr.constants.blendFuncs;var ra=On("src","RGB"),ua=On("dst","RGB"),ra=Fr.def(hr,"[",ra,"]"),$n=Fr.def(hr,"[",On("src","Alpha"),"]"),ua=Fr.def(hr,"[",ua,"]");return hr=Fr.def(hr,"[",On("dst","Alpha"),"]"),[ra,ua,$n,hr]});case"blend.equation":return Mn(function(hr){if(typeof hr=="string")return[Va[hr],Va[hr]];if(typeof hr=="object")return[Va[hr.rgb],Va[hr.alpha]]},function(hr,Fr,nn){var On=hr.constants.blendEquations,ra=Fr.def(),ua=Fr.def();return hr=hr.cond("typeof ",nn,'==="string"'),hr.then(ra,"=",ua,"=",On,"[",nn,"];"),hr.else(ra,"=",On,"[",nn,".rgb];",ua,"=",On,"[",nn,".alpha];"),Fr(hr),[ra,ua]});case"blend.color":return Mn(function(hr){return o(4,function(Fr){return+hr[Fr]})},function(hr,Fr,nn){return o(4,function(On){return Fr.def("+",nn,"[",On,"]")})});case"stencil.mask":return Mn(function(hr){return hr|0},function(hr,Fr,nn){return Fr.def(nn,"|0")});case"stencil.func":return Mn(function(hr){return[Lt[hr.cmp||"keep"],hr.ref||0,"mask"in hr?hr.mask:-1]},function(hr,Fr,nn){hr=Fr.def('"cmp" in ',nn,"?",hr.constants.compareFuncs,"[",nn,".cmp]",":",7680);var On=Fr.def(nn,".ref|0");return Fr=Fr.def('"mask" in ',nn,"?",nn,".mask|0:-1"),[hr,On,Fr]});case"stencil.opFront":case"stencil.opBack":return Mn(function(hr){return[Rn==="stencil.opBack"?1029:1028,Vt[hr.fail||"keep"],Vt[hr.zfail||"keep"],Vt[hr.zpass||"keep"]]},function(hr,Fr,nn){function On(ua){return Fr.def('"',ua,'" in ',nn,"?",ra,"[",nn,".",ua,"]:",7680)}var ra=hr.constants.stencilOps;return[Rn==="stencil.opBack"?1029:1028,On("fail"),On("zfail"),On("zpass")]});case"polygonOffset.offset":return Mn(function(hr){return[hr.factor|0,hr.units|0]},function(hr,Fr,nn){return hr=Fr.def(nn,".factor|0"),Fr=Fr.def(nn,".units|0"),[hr,Fr]});case"cull.face":return Mn(function(hr){var Fr=0;return hr==="front"?Fr=1028:hr==="back"&&(Fr=1029),Fr},function(hr,Fr,nn){return Fr.def(nn,'==="front"?',1028,":",1029)});case"lineWidth":return Mn(function(hr){return hr},function(hr,Fr,nn){return nn});case"frontFace":return Mn(function(hr){return $t[hr]},function(hr,Fr,nn){return Fr.def(nn+'==="cw"?2304:2305')});case"colorMask":return Mn(function(hr){return hr.map(function(Fr){return!!Fr})},function(hr,Fr,nn){return o(4,function(On){return"!!"+nn+"["+On+"]"})});case"sample.coverage":return Mn(function(hr){return["value"in hr?hr.value:1,!!hr.invert]},function(hr,Fr,nn){return hr=Fr.def('"value" in ',nn,"?+",nn,".value:1"),Fr=Fr.def("!!",nn,".invert"),[hr,Fr]})}}),Sn}function Ur(sr,Hr){var dn=sr.static,hn=sr.dynamic,Sn={};return Object.keys(dn).forEach(function(Rn){var Mn=dn[Rn],mr;if(typeof Mn=="number"||typeof Mn=="boolean")mr=V(function(){return Mn});else if(typeof Mn=="function"){var hr=Mn._reglType;hr==="texture2d"||hr==="textureCube"?mr=V(function(Fr){return Fr.link(Mn)}):(hr==="framebuffer"||hr==="framebufferCube")&&(mr=V(function(Fr){return Fr.link(Mn.color[0])}))}else _(Mn)&&(mr=V(function(Fr){return Fr.global.def("[",o(Mn.length,function(nn){return Mn[nn]}),"]")}));mr.value=Mn,Sn[Rn]=mr}),Object.keys(hn).forEach(function(Rn){var Mn=hn[Rn];Sn[Rn]=Y(Mn,function(mr,hr){return mr.invoke(hr,Mn)})}),Sn}function fn(sr,Hr){var dn=sr.static,hn=sr.dynamic,Sn={};return Object.keys(dn).forEach(function(Rn){var Mn=dn[Rn],mr=xt.id(Rn),hr=new wa;if(J(Mn))hr.state=1,hr.buffer=br.getBuffer(br.create(Mn,34962,!1,!0)),hr.type=0;else{var Fr=br.getBuffer(Mn);if(Fr)hr.state=1,hr.buffer=Fr,hr.type=0;else if("constant"in Mn){var nn=Mn.constant;hr.buffer="null",hr.state=2,typeof nn=="number"?hr.x=nn:it.forEach(function(kn,Wn){Wn<nn.length&&(hr[kn]=nn[Wn])})}else{var Fr=J(Mn.buffer)?br.getBuffer(br.create(Mn.buffer,34962,!1,!0)):br.getBuffer(Mn.buffer),On=Mn.offset|0,ra=Mn.stride|0,ua=Mn.size|0,$n=!!Mn.normalized,Qn=0;"type"in Mn&&(Qn=Se[Mn.type]),Mn=Mn.divisor|0,hr.buffer=Fr,hr.state=1,hr.size=ua,hr.normalized=$n,hr.type=Qn||Fr.dtype,hr.offset=On,hr.stride=ra,hr.divisor=Mn}}Sn[Rn]=V(function(kn,Wn){var aa=kn.attribCache;if(mr in aa)return aa[mr];var Ma={isStream:!1};return Object.keys(hr).forEach(function(ui){Ma[ui]=hr[ui]}),hr.buffer&&(Ma.buffer=kn.link(hr.buffer),Ma.type=Ma.type||Ma.buffer+".dtype"),aa[mr]=Ma})}),Object.keys(hn).forEach(function(Rn){var Mn=hn[Rn];Sn[Rn]=Y(Mn,function(mr,hr){function Fr(aa){hr($n[aa],"=",nn,".",aa,"|0;")}var nn=mr.invoke(hr,Mn),On=mr.shared,ra=mr.constants,ua=On.isBufferArgs,On=On.buffer,$n={isStream:hr.def(!1)},Qn=new wa;Qn.state=1,Object.keys(Qn).forEach(function(aa){$n[aa]=hr.def(""+Qn[aa])});var kn=$n.buffer,Wn=$n.type;return hr("if(",ua,"(",nn,")){",$n.isStream,"=true;",kn,"=",On,".createStream(",34962,",",nn,");",Wn,"=",kn,".dtype;","}else{",kn,"=",On,".getBuffer(",nn,");","if(",kn,"){",Wn,"=",kn,".dtype;",'}else if("constant" in ',nn,"){",$n.state,"=",2,";","if(typeof "+nn+'.constant === "number"){',$n[it[0]],"=",nn,".constant;",it.slice(1).map(function(aa){return $n[aa]}).join("="),"=0;","}else{",it.map(function(aa,Ma){return $n[aa]+"="+nn+".constant.length>"+Ma+"?"+nn+".constant["+Ma+"]:0;"}).join(""),"}}else{","if(",ua,"(",nn,".buffer)){",kn,"=",On,".createStream(",34962,",",nn,".buffer);","}else{",kn,"=",On,".getBuffer(",nn,".buffer);","}",Wn,'="type" in ',nn,"?",ra.glTypes,"[",nn,".type]:",kn,".dtype;",$n.normalized,"=!!",nn,".normalized;"),Fr("size"),Fr("offset"),Fr("stride"),Fr("divisor"),hr("}}"),hr.exit("if(",$n.isStream,"){",On,".destroyStream(",kn,");","}"),$n})}),Sn}function Cr(sr){var Hr=sr.static,dn=sr.dynamic,hn={};return Object.keys(Hr).forEach(function(Sn){var Rn=Hr[Sn];hn[Sn]=V(function(Mn,mr){return typeof Rn=="number"||typeof Rn=="boolean"?""+Rn:Mn.link(Rn)})}),Object.keys(dn).forEach(function(Sn){var Rn=dn[Sn];hn[Sn]=Y(Rn,function(Mn,mr){return Mn.invoke(mr,Rn)})}),hn}function _r(sr,Hr,dn,hn,Sn){function Rn(Qn){var kn=hr[Qn];kn&&(nn[Qn]=kn)}var Mn=Mr(sr,Hr),mr=kt(sr),hr=jt(sr,mr),Fr=Lr(sr),nn=Ar(sr),On=Sr(sr,Sn,Mn);Rn("viewport"),Rn(Ke("scissor.box"));var ra=0<Object.keys(nn).length,mr={framebuffer:mr,draw:Fr,shader:On,state:nn,dirty:ra,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(mr.profile=yt(sr),mr.uniforms=Ur(dn),mr.drawVAO=mr.scopeVAO=Fr.vao,!mr.drawVAO&&On.program&&!Mn&&Rt.angle_instanced_arrays&&Fr.static.elements){var ua=!0;if(sr=On.program.attributes.map(function(Qn){return Qn=Hr.static[Qn],ua=ua&&!!Qn,Qn}),ua&&0<sr.length){var $n=lr.getVAO(lr.createVAO({attributes:sr,elements:Fr.static.elements}));mr.drawVAO=new fe(null,null,null,function(Qn,kn){return Qn.link($n)}),mr.useVAO=!0}}return Mn?mr.useVAO=!0:mr.attributes=fn(Hr),mr.context=Cr(hn),mr}function En(sr,Hr,dn){var hn=sr.shared.context,Sn=sr.scope();Object.keys(dn).forEach(function(Rn){Hr.save(hn,"."+Rn);var Mn=dn[Rn].append(sr,Hr);Array.isArray(Mn)?Sn(hn,".",Rn,"=[",Mn.join(),"];"):Sn(hn,".",Rn,"=",Mn,";")}),Hr(Sn)}function Jr(sr,Hr,dn,hn){var Sn=sr.shared,Rn=Sn.gl,Mn=Sn.framebuffer,mr;wr&&(mr=Hr.def(Sn.extensions,".webgl_draw_buffers"));var hr=sr.constants,Sn=hr.drawBuffer,hr=hr.backBuffer;sr=dn?dn.append(sr,Hr):Hr.def(Mn,".next"),hn||Hr("if(",sr,"!==",Mn,".cur){"),Hr("if(",sr,"){",Rn,".bindFramebuffer(",36160,",",sr,".framebuffer);"),wr&&Hr(mr,".drawBuffersWEBGL(",Sn,"[",sr,".colorAttachments.length]);"),Hr("}else{",Rn,".bindFramebuffer(",36160,",null);"),wr&&Hr(mr,".drawBuffersWEBGL(",hr,");"),Hr("}",Mn,".cur=",sr,";"),hn||Hr("}")}function Pr(sr,Hr,dn){var hn=sr.shared,Sn=hn.gl,Rn=sr.current,Mn=sr.next,mr=hn.current,hr=hn.next,Fr=sr.cond(mr,".dirty");Jn.forEach(function(nn){if(nn=Ke(nn),!(nn in dn.state)){var On,ra;if(nn in Mn){On=Mn[nn],ra=Rn[nn];var ua=o(ln[nn].length,function($n){return Fr.def(On,"[",$n,"]")});Fr(sr.cond(ua.map(function($n,Qn){return $n+"!=="+ra+"["+Qn+"]"}).join("||")).then(Sn,".",ga[nn],"(",ua,");",ua.map(function($n,Qn){return ra+"["+Qn+"]="+$n}).join(";"),";"))}else On=Fr.def(hr,".",nn),ua=sr.cond(On,"!==",mr,".",nn),Fr(ua),nn in La?ua(sr.cond(On).then(Sn,".enable(",La[nn],");").else(Sn,".disable(",La[nn],");"),mr,".",nn,"=",On,";"):ua(Sn,".",ga[nn],"(",On,");",mr,".",nn,"=",On,";")}}),Object.keys(dn.state).length===0&&Fr(mr,".dirty=false;"),Hr(Fr)}function vn(sr,Hr,dn,hn){var Sn=sr.shared,Rn=sr.current,Mn=Sn.current,mr=Sn.gl;le(Object.keys(dn)).forEach(function(hr){var Fr=dn[hr];if(!hn||hn(Fr)){var nn=Fr.append(sr,Hr);if(La[hr]){var On=La[hr];se(Fr)?nn?Hr(mr,".enable(",On,");"):Hr(mr,".disable(",On,");"):Hr(sr.cond(nn).then(mr,".enable(",On,");").else(mr,".disable(",On,");")),Hr(Mn,".",hr,"=",nn,";")}else if(_(nn)){var ra=Rn[hr];Hr(mr,".",ga[hr],"(",nn,");",nn.map(function(ua,$n){return ra+"["+$n+"]="+ua}).join(";"),";")}else Hr(mr,".",ga[hr],"(",nn,");",Mn,".",hr,"=",nn,";")}})}function xn(sr,Hr){Oa&&(sr.instancing=Hr.def(sr.shared.extensions,".angle_instanced_arrays"))}function qr(sr,Hr,dn,hn,Sn){function Rn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function Mn(Qn){ua=Hr.def(),Qn(ua,"=",Rn(),";"),typeof Sn=="string"?Qn(nn,".count+=",Sn,";"):Qn(nn,".count++;"),Ee&&(hn?($n=Hr.def(),Qn($n,"=",ra,".getNumPendingQueries();")):Qn(ra,".beginQuery(",nn,");"))}function mr(Qn){Qn(nn,".cpuTime+=",Rn(),"-",ua,";"),Ee&&(hn?Qn(ra,".pushScopeStats(",$n,",",ra,".getNumPendingQueries(),",nn,");"):Qn(ra,".endQuery();"))}function hr(Qn){var kn=Hr.def(On,".profile");Hr(On,".profile=",Qn,";"),Hr.exit(On,".profile=",kn,";")}var Fr=sr.shared,nn=sr.stats,On=Fr.current,ra=Fr.timer;dn=dn.profile;var ua,$n;if(dn){if(se(dn)){dn.enable?(Mn(Hr),mr(Hr.exit),hr("true")):hr("false");return}dn=dn.append(sr,Hr),hr(dn)}else dn=Hr.def(On,".profile");Fr=sr.block(),Mn(Fr),Hr("if(",dn,"){",Fr,"}"),sr=sr.block(),mr(sr),Hr.exit("if(",dn,"){",sr,"}")}function st(sr,Hr,dn,hn,Sn){function Rn(hr){switch(hr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function Mn(hr,Fr,nn){function On(){Hr("if(!",Qn,".buffer){",ua,".enableVertexAttribArray(",$n,");}");var Ma=nn.type,ui;ui=nn.size?Hr.def(nn.size,"||",Fr):Fr,Hr("if(",Qn,".type!==",Ma,"||",Qn,".size!==",ui,"||",aa.map(function(Na){return Qn+"."+Na+"!=="+nn[Na]}).join("||"),"){",ua,".bindBuffer(",34962,",",kn,".buffer);",ua,".vertexAttribPointer(",[$n,ui,Ma,nn.normalized,nn.stride,nn.offset],");",Qn,".type=",Ma,";",Qn,".size=",ui,";",aa.map(function(Na){return Qn+"."+Na+"="+nn[Na]+";"}).join(""),"}"),Oa&&(Ma=nn.divisor,Hr("if(",Qn,".divisor!==",Ma,"){",sr.instancing,".vertexAttribDivisorANGLE(",[$n,Ma],");",Qn,".divisor=",Ma,";}"))}function ra(){Hr("if(",Qn,".buffer){",ua,".disableVertexAttribArray(",$n,");",Qn,".buffer=null;","}if(",it.map(function(Ma,ui){return Qn+"."+Ma+"!=="+Wn[ui]}).join("||"),"){",ua,".vertexAttrib4f(",$n,",",Wn,");",it.map(function(Ma,ui){return Qn+"."+Ma+"="+Wn[ui]+";"}).join(""),"}")}var ua=mr.gl,$n=Hr.def(hr,".location"),Qn=Hr.def(mr.attributes,"[",$n,"]");hr=nn.state;var kn=nn.buffer,Wn=[nn.x,nn.y,nn.z,nn.w],aa=["buffer","normalized","offset","stride"];hr===1?On():hr===2?ra():(Hr("if(",hr,"===",1,"){"),On(),Hr("}else{"),ra(),Hr("}"))}var mr=sr.shared;hn.forEach(function(hr){var Fr=hr.name,nn=dn.attributes[Fr],On;if(nn){if(!Sn(nn))return;On=nn.append(sr,Hr)}else{if(!Sn(Ht))return;var ra=sr.scopeAttrib(Fr);On={},Object.keys(new wa).forEach(function(ua){On[ua]=Hr.def(ra,".",ua)})}Mn(sr.link(hr),Rn(hr.info.type),On)})}function Bt(sr,Hr,dn,hn,Sn,Rn){for(var Mn=sr.shared,mr=Mn.gl,hr={},Fr,nn=0;nn<hn.length;++nn){var On=hn[nn],ra=On.name,ua=On.info.type,$n=On.info.size,Qn=dn.uniforms[ra];if(1<$n){if(!Qn)continue;var kn=ra.replace("[0]","");if(hr[kn])continue;hr[kn]=1}var On=sr.link(On)+".location",Wn;if(Qn){if(!Sn(Qn))continue;if(se(Qn)){if(ra=Qn.value,ua===35678||ua===35680)ua=sr.link(ra._texture||ra.color[0]._texture),Hr(mr,".uniform1i(",On,",",ua+".bind());"),Hr.exit(ua,".unbind();");else if(ua===35674||ua===35675||ua===35676)$n=sr.global.def("new Float32Array(["+Array.prototype.slice.call(ra)+"])"),ra=2,ua===35675?ra=3:ua===35676&&(ra=4),Hr(mr,".uniformMatrix",ra,"fv(",On,",false,",$n,");");else{switch(ua){case 5126:Fr="1f";break;case 35664:Fr="2f";break;case 35665:Fr="3f";break;case 35666:Fr="4f";break;case 35670:Fr="1i";break;case 5124:Fr="1i";break;case 35671:Fr="2i";break;case 35667:Fr="2i";break;case 35672:Fr="3i";break;case 35668:Fr="3i";break;case 35673:Fr="4i";break;case 35669:Fr="4i"}1<$n?(Fr+="v",ra=sr.global.def("["+Array.prototype.slice.call(ra)+"]")):ra=_(ra)?Array.prototype.slice.call(ra):ra,Hr(mr,".uniform",Fr,"(",On,",",ra,");")}continue}else Wn=Qn.append(sr,Hr)}else{if(!Sn(Ht))continue;Wn=Hr.def(Mn.uniforms,"[",xt.id(ra),"]")}switch(ua===35678?Hr("if(",Wn,"&&",Wn,'._reglType==="framebuffer"){',Wn,"=",Wn,".color[0];","}"):ua===35680&&Hr("if(",Wn,"&&",Wn,'._reglType==="framebufferCube"){',Wn,"=",Wn,".color[0];","}"),ra=1,ua){case 35678:case 35680:ua=Hr.def(Wn,"._texture"),Hr(mr,".uniform1i(",On,",",ua,".bind());"),Hr.exit(ua,".unbind();");continue;case 5124:case 35670:Fr="1i";break;case 35667:case 35671:Fr="2i",ra=2;break;case 35668:case 35672:Fr="3i",ra=3;break;case 35669:case 35673:Fr="4i",ra=4;break;case 5126:Fr="1f";break;case 35664:Fr="2f",ra=2;break;case 35665:Fr="3f",ra=3;break;case 35666:Fr="4f",ra=4;break;case 35674:Fr="Matrix2fv";break;case 35675:Fr="Matrix3fv";break;case 35676:Fr="Matrix4fv"}if(Fr.indexOf("Matrix")===-1&&1<$n&&(Fr+="v",ra=1),Fr.charAt(0)==="M"){Hr(mr,".uniform",Fr,"(",On,",");var On=Math.pow(ua-35674+2,2),aa=sr.global.def("new Float32Array(",On,")");Array.isArray(Wn)?Hr("false,(",o(On,function(Na){return aa+"["+Na+"]="+Wn[Na]}),",",aa,")"):Hr("false,(Array.isArray(",Wn,")||",Wn," instanceof Float32Array)?",Wn,":(",o(On,function(Na){return aa+"["+Na+"]="+Wn+"["+Na+"]"}),",",aa,")"),Hr(");")}else{if(1<ra){for(var ua=[],Ma=[],$n=0;$n<ra;++$n)Array.isArray(Wn)?Ma.push(Wn[$n]):Ma.push(Hr.def(Wn+"["+$n+"]")),Rn&&ua.push(Hr.def());Rn&&Hr("if(!",sr.batchId,"||",ua.map(function(ui,Na){return ui+"!=="+Ma[Na]}).join("||"),"){",ua.map(function(ui,Na){return ui+"="+Ma[Na]+";"}).join("")),Hr(mr,".uniform",Fr,"(",On,",",Ma.join(","),");")}else Rn&&(ua=Hr.def(),Hr("if(!",sr.batchId,"||",ua,"!==",Wn,"){",ua,"=",Wn,";")),Hr(mr,".uniform",Fr,"(",On,",",Wn,");");Rn&&Hr("}")}}}function ir(sr,Hr,dn,hn){function Sn(Ma){var ui=nn[Ma];return ui?ui.contextDep&&hn.contextDynamic||ui.propDep?ui.append(sr,dn):ui.append(sr,Hr):Hr.def(Fr,".",Ma)}function Rn(){function Ma(){dn(kn,".drawElementsInstancedANGLE(",[ra,$n,Wn,ua+"<<(("+Wn+"-5121)>>1)",Qn],");")}function ui(){dn(kn,".drawArraysInstancedANGLE(",[ra,ua,$n,Qn],");")}On&&On!=="null"?aa?Ma():(dn("if(",On,"){"),Ma(),dn("}else{"),ui(),dn("}")):ui()}function Mn(){function Ma(){dn(hr+".drawElements("+[ra,$n,Wn,ua+"<<(("+Wn+"-5121)>>1)"]+");")}function ui(){dn(hr+".drawArrays("+[ra,ua,$n]+");")}On&&On!=="null"?aa?Ma():(dn("if(",On,"){"),Ma(),dn("}else{"),ui(),dn("}")):ui()}var mr=sr.shared,hr=mr.gl,Fr=mr.draw,nn=hn.draw,On=function(){var Ma=nn.elements,ui=Hr;return Ma?((Ma.contextDep&&hn.contextDynamic||Ma.propDep)&&(ui=dn),Ma=Ma.append(sr,ui),nn.elementsActive&&ui("if("+Ma+")"+hr+".bindBuffer(34963,"+Ma+".buffer.buffer);")):(Ma=ui.def(),ui(Ma,"=",Fr,".","elements",";","if(",Ma,"){",hr,".bindBuffer(",34963,",",Ma,".buffer.buffer);}","else if(",mr.vao,".currentVAO){",Ma,"=",sr.shared.elements+".getElements("+mr.vao,".currentVAO.elements);",wn?"":"if("+Ma+")"+hr+".bindBuffer(34963,"+Ma+".buffer.buffer);","}")),Ma}(),ra=Sn("primitive"),ua=Sn("offset"),$n=function(){var Ma=nn.count,ui=Hr;return Ma?((Ma.contextDep&&hn.contextDynamic||Ma.propDep)&&(ui=dn),Ma=Ma.append(sr,ui)):Ma=ui.def(Fr,".","count"),Ma}();if(typeof $n=="number"){if($n===0)return}else dn("if(",$n,"){"),dn.exit("}");var Qn,kn;Oa&&(Qn=Sn("instances"),kn=sr.instancing);var Wn=On+".type",aa=nn.elements&&se(nn.elements)&&!nn.vaoActive;Oa&&(typeof Qn!="number"||0<=Qn)?typeof Qn=="string"?(dn("if(",Qn,">0){"),Rn(),dn("}else if(",Qn,"<0){"),Mn(),dn("}")):Rn():Mn()}function xr(sr,Hr,dn,hn,Sn){return Hr=ct(),Sn=Hr.proc("body",Sn),Oa&&(Hr.instancing=Sn.def(Hr.shared.extensions,".angle_instanced_arrays")),sr(Hr,Sn,dn,hn),Hr.compile().body}function Qr(sr,Hr,dn,hn){xn(sr,Hr),dn.useVAO?dn.drawVAO?Hr(sr.shared.vao,".setVAO(",dn.drawVAO.append(sr,Hr),");"):Hr(sr.shared.vao,".setVAO(",sr.shared.vao,".targetVAO);"):(Hr(sr.shared.vao,".setVAO(null);"),st(sr,Hr,dn,hn.attributes,function(){return!0})),Bt(sr,Hr,dn,hn.uniforms,function(){return!0},!1),ir(sr,Hr,Hr,dn)}function Gr(sr,Hr){var dn=sr.proc("draw",1);xn(sr,dn),En(sr,dn,Hr.context),Jr(sr,dn,Hr.framebuffer),Pr(sr,dn,Hr),vn(sr,dn,Hr.state),qr(sr,dn,Hr,!1,!0);var hn=Hr.shader.progVar.append(sr,dn);if(dn(sr.shared.gl,".useProgram(",hn,".program);"),Hr.shader.program)Qr(sr,dn,Hr,Hr.shader.program);else{dn(sr.shared.vao,".setVAO(null);");var Sn=sr.global.def("{}"),Rn=dn.def(hn,".id"),Mn=dn.def(Sn,"[",Rn,"]");dn(sr.cond(Mn).then(Mn,".call(this,a0);").else(Mn,"=",Sn,"[",Rn,"]=",sr.link(function(mr){return xr(Qr,sr,Hr,mr,1)}),"(",hn,");",Mn,".call(this,a0);"))}0<Object.keys(Hr.state).length&&dn(sr.shared.current,".dirty=true;"),sr.shared.vao&&dn(sr.shared.vao,".setVAO(null);")}function Br(sr,Hr,dn,hn){function Sn(){return!0}sr.batchId="a1",xn(sr,Hr),st(sr,Hr,dn,hn.attributes,Sn),Bt(sr,Hr,dn,hn.uniforms,Sn,!1),ir(sr,Hr,Hr,dn)}function kr(sr,Hr,dn,hn){function Sn(On){return On.contextDep&&Mn||On.propDep}function Rn(On){return!Sn(On)}xn(sr,Hr);var Mn=dn.contextDep,mr=Hr.def(),hr=Hr.def();sr.shared.props=hr,sr.batchId=mr;var Fr=sr.scope(),nn=sr.scope();Hr(Fr.entry,"for(",mr,"=0;",mr,"<","a1",";++",mr,"){",hr,"=","a0","[",mr,"];",nn,"}",Fr.exit),dn.needsContext&&En(sr,nn,dn.context),dn.needsFramebuffer&&Jr(sr,nn,dn.framebuffer),vn(sr,nn,dn.state,Sn),dn.profile&&Sn(dn.profile)&&qr(sr,nn,dn,!1,!0),hn?(dn.useVAO?dn.drawVAO?Sn(dn.drawVAO)?nn(sr.shared.vao,".setVAO(",dn.drawVAO.append(sr,nn),");"):Fr(sr.shared.vao,".setVAO(",dn.drawVAO.append(sr,Fr),");"):Fr(sr.shared.vao,".setVAO(",sr.shared.vao,".targetVAO);"):(Fr(sr.shared.vao,".setVAO(null);"),st(sr,Fr,dn,hn.attributes,Rn),st(sr,nn,dn,hn.attributes,Sn)),Bt(sr,Fr,dn,hn.uniforms,Rn,!1),Bt(sr,nn,dn,hn.uniforms,Sn,!0),ir(sr,Fr,nn,dn)):(Hr=sr.global.def("{}"),hn=dn.shader.progVar.append(sr,nn),hr=nn.def(hn,".id"),Fr=nn.def(Hr,"[",hr,"]"),nn(sr.shared.gl,".useProgram(",hn,".program);","if(!",Fr,"){",Fr,"=",Hr,"[",hr,"]=",sr.link(function(On){return xr(Br,sr,dn,On,2)}),"(",hn,");}",Fr,".call(this,a0[",mr,"],",mr,");"))}function en(sr,Hr){function dn(Fr){return Fr.contextDep&&Sn||Fr.propDep}var hn=sr.proc("batch",2);sr.batchId="0",xn(sr,hn);var Sn=!1,Rn=!0;Object.keys(Hr.context).forEach(function(Fr){Sn=Sn||Hr.context[Fr].propDep}),Sn||(En(sr,hn,Hr.context),Rn=!1);var Mn=Hr.framebuffer,mr=!1;if(Mn?(Mn.propDep?Sn=mr=!0:Mn.contextDep&&Sn&&(mr=!0),mr||Jr(sr,hn,Mn)):Jr(sr,hn,null),Hr.state.viewport&&Hr.state.viewport.propDep&&(Sn=!0),Pr(sr,hn,Hr),vn(sr,hn,Hr.state,function(Fr){return!dn(Fr)}),Hr.profile&&dn(Hr.profile)||qr(sr,hn,Hr,!1,"a1"),Hr.contextDep=Sn,Hr.needsContext=Rn,Hr.needsFramebuffer=mr,Rn=Hr.shader.progVar,Rn.contextDep&&Sn||Rn.propDep)kr(sr,hn,Hr,null);else if(Rn=Rn.append(sr,hn),hn(sr.shared.gl,".useProgram(",Rn,".program);"),Hr.shader.program)kr(sr,hn,Hr,Hr.shader.program);else{hn(sr.shared.vao,".setVAO(null);");var Mn=sr.global.def("{}"),mr=hn.def(Rn,".id"),hr=hn.def(Mn,"[",mr,"]");hn(sr.cond(hr).then(hr,".call(this,a0,a1);").else(hr,"=",Mn,"[",mr,"]=",sr.link(function(On){return xr(kr,sr,Hr,On,2)}),"(",Rn,");",hr,".call(this,a0,a1);"))}0<Object.keys(Hr.state).length&&hn(sr.shared.current,".dirty=true;"),sr.shared.vao&&hn(sr.shared.vao,".setVAO(null);")}function Zn(sr,Hr){function dn(Mn){var mr=Hr.shader[Mn];mr&&hn.set(Sn.shader,"."+Mn,mr.append(sr,hn))}var hn=sr.proc("scope",3);sr.batchId="a2";var Sn=sr.shared,Rn=Sn.current;En(sr,hn,Hr.context),Hr.framebuffer&&Hr.framebuffer.append(sr,hn),le(Object.keys(Hr.state)).forEach(function(Mn){var mr=Hr.state[Mn].append(sr,hn);_(mr)?mr.forEach(function(hr,Fr){hn.set(sr.next[Mn],"["+Fr+"]",hr)}):hn.set(Sn.next,"."+Mn,mr)}),qr(sr,hn,Hr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Mn){var mr=Hr.draw[Mn];mr&&hn.set(Sn.draw,"."+Mn,""+mr.append(sr,hn))}),Object.keys(Hr.uniforms).forEach(function(Mn){var mr=Hr.uniforms[Mn].append(sr,hn);Array.isArray(mr)&&(mr="["+mr.join()+"]"),hn.set(Sn.uniforms,"["+xt.id(Mn)+"]",mr)}),Object.keys(Hr.attributes).forEach(function(Mn){var mr=Hr.attributes[Mn].append(sr,hn),hr=sr.scopeAttrib(Mn);Object.keys(new wa).forEach(function(Fr){hn.set(hr,"."+Fr,mr[Fr])})}),Hr.scopeVAO&&hn.set(Sn.vao,".targetVAO",Hr.scopeVAO.append(sr,hn)),dn("vert"),dn("frag"),0<Object.keys(Hr.state).length&&(hn(Rn,".dirty=true;"),hn.exit(Rn,".dirty=true;")),hn("a1(",sr.shared.context,",a0,",sr.batchId,");")}function Hn(sr){if(typeof sr=="object"&&!_(sr)){for(var Hr=Object.keys(sr),dn=0;dn<Hr.length;++dn)if(ae.isDynamic(sr[Hr[dn]]))return!0;return!1}}function da(sr,Hr,dn){function hn(On,ra){Mn.forEach(function(ua){var $n=Sn[ua];ae.isDynamic($n)&&($n=On.invoke(ra,$n),ra(nn,".",ua,"=",$n,";"))})}var Sn=Hr.static[dn];if(Sn&&Hn(Sn)){var Rn=sr.global,Mn=Object.keys(Sn),mr=!1,hr=!1,Fr=!1,nn=sr.global.def("{}");Mn.forEach(function(On){var ra=Sn[On];if(ae.isDynamic(ra))typeof ra=="function"&&(ra=Sn[On]=ae.unbox(ra)),On=Y(ra,null),mr=mr||On.thisDep,Fr=Fr||On.propDep,hr=hr||On.contextDep;else{switch(Rn(nn,".",On,"="),typeof ra){case"number":Rn(ra);break;case"string":Rn('"',ra,'"');break;case"object":Array.isArray(ra)&&Rn("[",ra.join(),"]");break;default:Rn(sr.link(ra))}Rn(";")}}),Hr.dynamic[dn]=new ae.DynamicVariable(4,{thisDep:mr,contextDep:hr,propDep:Fr,ref:nn,append:hn}),delete Hr.static[dn]}}var wa=lr.Record,Va={add:32774,subtract:32778,"reverse subtract":32779};Rt.ext_blend_minmax&&(Va.min=32775,Va.max=32776);var Oa=Rt.angle_instanced_arrays,wr=Rt.webgl_draw_buffers,wn=Rt.oes_vertex_array_object,ln={dirty:!0,profile:Fe.profile},jn={},Jn=[],La={},ga={};tt("dither",3024),tt("blend.enable",3042),ut("blend.color","blendColor",[0,0,0,0]),ut("blend.equation","blendEquationSeparate",[32774,32774]),ut("blend.func","blendFuncSeparate",[1,0,1,0]),tt("depth.enable",2929,!0),ut("depth.func","depthFunc",513),ut("depth.range","depthRange",[0,1]),ut("depth.mask","depthMask",!0),ut("colorMask","colorMask",[!0,!0,!0,!0]),tt("cull.enable",2884),ut("cull.face","cullFace",1029),ut("frontFace","frontFace",2305),ut("lineWidth","lineWidth",1),tt("polygonOffset.enable",32823),ut("polygonOffset.offset","polygonOffset",[0,0]),tt("sample.alpha",32926),tt("sample.enable",32928),ut("sample.coverage","sampleCoverage",[1,!1]),tt("stencil.enable",2960),ut("stencil.mask","stencilMask",-1),ut("stencil.func","stencilFunc",[519,0,-1]),ut("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),ut("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),tt("scissor.enable",3089),ut("scissor.box","scissor",[0,0,qe.drawingBufferWidth,qe.drawingBufferHeight]),ut("viewport","viewport",[0,0,qe.drawingBufferWidth,qe.drawingBufferHeight]);var qn={gl:qe,context:Ae,strings:xt,next:jn,current:ln,draw:nt,elements:pr,buffer:br,shader:Yr,attributes:lr.state,vao:lr,uniforms:Ir,framebuffer:Nr,extensions:Rt,timer:Ee,isBufferArgs:J},Ea={primTypes:Ie,compareFuncs:Lt,blendFuncs:zt,blendEquations:Va,stencilOps:Vt,glTypes:Se,orientationType:$t};wr&&(Ea.backBuffer=[1029],Ea.drawBuffer=o(fr.maxDrawbuffers,function(sr){return sr===0?[0]:o(sr,function(Hr){return 36064+Hr})}));var la=0;return{next:jn,current:ln,procs:function(){var sr=ct(),Hr=sr.proc("poll"),dn=sr.proc("refresh"),hn=sr.block();Hr(hn),dn(hn);var Sn=sr.shared,Rn=Sn.gl,Mn=Sn.next,mr=Sn.current;hn(mr,".dirty=false;"),Jr(sr,Hr),Jr(sr,dn,null,!0);var hr;Oa&&(hr=sr.link(Oa)),Rt.oes_vertex_array_object&&dn(sr.link(Rt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Fr=0;Fr<fr.maxAttributes;++Fr){var nn=dn.def(Sn.attributes,"[",Fr,"]"),On=sr.cond(nn,".buffer");On.then(Rn,".enableVertexAttribArray(",Fr,");",Rn,".bindBuffer(",34962,",",nn,".buffer.buffer);",Rn,".vertexAttribPointer(",Fr,",",nn,".size,",nn,".type,",nn,".normalized,",nn,".stride,",nn,".offset);").else(Rn,".disableVertexAttribArray(",Fr,");",Rn,".vertexAttrib4f(",Fr,",",nn,".x,",nn,".y,",nn,".z,",nn,".w);",nn,".buffer=null;"),dn(On),Oa&&dn(hr,".vertexAttribDivisorANGLE(",Fr,",",nn,".divisor);")}return dn(sr.shared.vao,".currentVAO=null;",sr.shared.vao,".setVAO(",sr.shared.vao,".targetVAO);"),Object.keys(La).forEach(function(ra){var ua=La[ra],$n=hn.def(Mn,".",ra),Qn=sr.block();Qn("if(",$n,"){",Rn,".enable(",ua,")}else{",Rn,".disable(",ua,")}",mr,".",ra,"=",$n,";"),dn(Qn),Hr("if(",$n,"!==",mr,".",ra,"){",Qn,"}")}),Object.keys(ga).forEach(function(ra){var ua=ga[ra],$n=ln[ra],Qn,kn,Wn=sr.block();Wn(Rn,".",ua,"("),_($n)?(ua=$n.length,Qn=sr.global.def(Mn,".",ra),kn=sr.global.def(mr,".",ra),Wn(o(ua,function(aa){return Qn+"["+aa+"]"}),");",o(ua,function(aa){return kn+"["+aa+"]="+Qn+"["+aa+"];"}).join("")),Hr("if(",o(ua,function(aa){return Qn+"["+aa+"]!=="+kn+"["+aa+"]"}).join("||"),"){",Wn,"}")):(Qn=hn.def(Mn,".",ra),kn=hn.def(mr,".",ra),Wn(Qn,");",mr,".",ra,"=",Qn,";"),Hr("if(",Qn,"!==",kn,"){",Wn,"}")),dn(Wn)}),sr.compile()}(),compile:function(sr,Hr,dn,hn,Sn){var Rn=ct();Rn.stats=Rn.link(Sn),Object.keys(Hr.static).forEach(function(mr){da(Rn,Hr,mr)}),ht.forEach(function(mr){da(Rn,sr,mr)});var Mn=_r(sr,Hr,dn,hn,Rn);return Gr(Rn,Mn),Zn(Rn,Mn),en(Rn,Mn),K(Rn.compile(),{destroy:function(){Mn.shader.program.destroy()}})}}}function te(qe,xt){for(var Rt=0;Rt<qe.length;++Rt)if(qe[Rt]===xt)return Rt;return-1}var K=function(qe,xt){for(var Rt=Object.keys(xt),fr=0;fr<Rt.length;++fr)qe[Rt[fr]]=xt[Rt[fr]];return qe},$=0,ae={DynamicVariable:u,define:function(qe,xt){return new u(qe,m(xt+""))},isDynamic:function(qe){return typeof qe=="function"&&!qe._reglType||qe instanceof u},unbox:x,accessor:m},ie={next:typeof requestAnimationFrame=="function"?function(qe){return requestAnimationFrame(qe)}:function(qe){return setTimeout(qe,16)},cancel:typeof cancelAnimationFrame=="function"?function(qe){return cancelAnimationFrame(qe)}:clearTimeout},oe=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date},ue=v();ue.zero=v();var xe=function(qe,xt){var Rt=1;xt.ext_texture_filter_anisotropic&&(Rt=qe.getParameter(34047));var fr=1,br=1;xt.webgl_draw_buffers&&(fr=qe.getParameter(34852),br=qe.getParameter(36063));var pr=!!xt.oes_texture_float;if(pr){pr=qe.createTexture(),qe.bindTexture(3553,pr),qe.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Tr=qe.createFramebuffer();if(qe.bindFramebuffer(36160,Tr),qe.framebufferTexture2D(36160,36064,3553,pr,0),qe.bindTexture(3553,null),qe.checkFramebufferStatus(36160)!==36053)pr=!1;else{qe.viewport(0,0,1,1),qe.clearColor(1,0,0,1),qe.clear(16384);var Nr=ue.allocType(5126,4);qe.readPixels(0,0,1,1,6408,5126,Nr),qe.getError()?pr=!1:(qe.deleteFramebuffer(Tr),qe.deleteTexture(pr),pr=Nr[0]===1),ue.freeType(Nr)}}return Nr=!0,typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Nr=qe.createTexture(),Tr=ue.allocType(5121,36),qe.activeTexture(33984),qe.bindTexture(34067,Nr),qe.texImage2D(34069,0,6408,3,3,0,6408,5121,Tr),ue.freeType(Tr),qe.bindTexture(34067,null),qe.deleteTexture(Nr),Nr=!qe.getError()),{colorBits:[qe.getParameter(3410),qe.getParameter(3411),qe.getParameter(3412),qe.getParameter(3413)],depthBits:qe.getParameter(3414),stencilBits:qe.getParameter(3415),subpixelBits:qe.getParameter(3408),extensions:Object.keys(xt).filter(function(Ir){return!!xt[Ir]}),maxAnisotropic:Rt,maxDrawbuffers:fr,maxColorAttachments:br,pointSizeDims:qe.getParameter(33901),lineWidthDims:qe.getParameter(33902),maxViewportDims:qe.getParameter(3386),maxCombinedTextureUnits:qe.getParameter(35661),maxCubeMapSize:qe.getParameter(34076),maxRenderbufferSize:qe.getParameter(34024),maxTextureUnits:qe.getParameter(34930),maxTextureSize:qe.getParameter(3379),maxAttributes:qe.getParameter(34921),maxVertexUniforms:qe.getParameter(36347),maxVertexTextureUnits:qe.getParameter(35660),maxVaryingVectors:qe.getParameter(36348),maxFragmentUniforms:qe.getParameter(36349),glsl:qe.getParameter(35724),renderer:qe.getParameter(7937),vendor:qe.getParameter(7936),version:qe.getParameter(7938),readFloat:pr,npotTextureCube:Nr}},he=function(qe){return qe instanceof Uint8Array||qe instanceof Uint16Array||qe instanceof Uint32Array||qe instanceof Int8Array||qe instanceof Int16Array||qe instanceof Int32Array||qe instanceof Float32Array||qe instanceof Float64Array||qe instanceof Uint8ClampedArray},me=function(qe){return Object.keys(qe).map(function(xt){return qe[xt]})},be={shape:function(qe){for(var xt=[];qe.length;qe=qe[0])xt.push(qe.length);return xt},flatten:function(qe,xt,Rt,fr){var br=1;if(xt.length)for(var pr=0;pr<xt.length;++pr)br*=xt[pr];else br=0;switch(Rt=fr||ue.allocType(Rt,br),xt.length){case 0:break;case 1:for(fr=xt[0],xt=0;xt<fr;++xt)Rt[xt]=qe[xt];break;case 2:for(fr=xt[0],xt=xt[1],pr=br=0;pr<fr;++pr)for(var Tr=qe[pr],Nr=0;Nr<xt;++Nr)Rt[br++]=Tr[Nr];break;case 3:p(qe,xt[0],xt[1],xt[2],Rt,0);break;default:y(qe,xt,0,Rt,0)}return Rt}},Ce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Se={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Be={dynamic:35048,stream:35040,static:35044},Ye=be.flatten,Xe=be.shape,Te=[];Te[5120]=1,Te[5122]=2,Te[5124]=4,Te[5121]=1,Te[5123]=2,Te[5125]=4,Te[5126]=4;var Ie={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ze=new Float32Array(1),rt=new Uint32Array(Ze.buffer),Ge=[9984,9986,9985,9987],ze=[0,6409,6410,6407,6408],We={};We[6409]=We[6406]=We[6402]=1,We[34041]=We[6410]=2,We[6407]=We[35904]=3,We[6408]=We[35906]=4;var mt=h("HTMLCanvasElement"),Ft=h("OffscreenCanvas"),Xt=h("CanvasRenderingContext2D"),Pt=h("ImageBitmap"),Ut=h("HTMLImageElement"),Gt=h("HTMLVideoElement"),It=Object.keys(Ce).concat([mt,Ft,Xt,Pt,Ut,Gt]),Ct=[];Ct[5121]=1,Ct[5126]=4,Ct[36193]=2,Ct[5123]=2,Ct[5125]=4;var lt=[];lt[32854]=2,lt[32855]=2,lt[36194]=2,lt[34041]=4,lt[33776]=.5,lt[33777]=.5,lt[33778]=1,lt[33779]=1,lt[35986]=.5,lt[35987]=1,lt[34798]=1,lt[35840]=.5,lt[35841]=.25,lt[35842]=.5,lt[35843]=.25,lt[36196]=.5;var dt=[];dt[32854]=2,dt[32855]=2,dt[36194]=2,dt[33189]=2,dt[36168]=1,dt[34041]=4,dt[35907]=4,dt[34836]=16,dt[34842]=8,dt[34843]=6;var et=function(qe,xt,Rt,fr,br){function pr(nt){this.id=lr++,this.refCount=1,this.renderbuffer=nt,this.format=32854,this.height=this.width=0,br.profile&&(this.stats={size:0})}function Tr(nt){var Ae=nt.renderbuffer;qe.bindRenderbuffer(36161,null),qe.deleteRenderbuffer(Ae),nt.renderbuffer=null,nt.refCount=0,delete Yr[nt.id],fr.renderbufferCount--}var Nr={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};xt.ext_srgb&&(Nr.srgba=35907),xt.ext_color_buffer_half_float&&(Nr.rgba16f=34842,Nr.rgb16f=34843),xt.webgl_color_buffer_float&&(Nr.rgba32f=34836);var Ir=[];Object.keys(Nr).forEach(function(nt){Ir[Nr[nt]]=nt});var lr=0,Yr={};return pr.prototype.decRef=function(){0>=--this.refCount&&Tr(this)},br.profile&&(fr.getTotalRenderbufferSize=function(){var nt=0;return Object.keys(Yr).forEach(function(Ae){nt+=Yr[Ae].stats.size}),nt}),{create:function(nt,Ae){function Ee(Ke,tt){var ut=0,ct=0,yt=32854;if(typeof Ke=="object"&&Ke?("shape"in Ke?(ct=Ke.shape,ut=ct[0]|0,ct=ct[1]|0):("radius"in Ke&&(ut=ct=Ke.radius|0),"width"in Ke&&(ut=Ke.width|0),"height"in Ke&&(ct=Ke.height|0)),"format"in Ke&&(yt=Nr[Ke.format])):typeof Ke=="number"?(ut=Ke|0,ct=typeof tt=="number"?tt|0:ut):Ke||(ut=ct=1),ut!==Fe.width||ct!==Fe.height||yt!==Fe.format)return Ee.width=Fe.width=ut,Ee.height=Fe.height=ct,Fe.format=yt,qe.bindRenderbuffer(36161,Fe.renderbuffer),qe.renderbufferStorage(36161,yt,ut,ct),br.profile&&(Fe.stats.size=dt[Fe.format]*Fe.width*Fe.height),Ee.format=Ir[Fe.format],Ee}var Fe=new pr(qe.createRenderbuffer());return Yr[Fe.id]=Fe,fr.renderbufferCount++,Ee(nt,Ae),Ee.resize=function(Ke,tt){var ut=Ke|0,ct=tt|0||ut;return ut===Fe.width&&ct===Fe.height||(Ee.width=Fe.width=ut,Ee.height=Fe.height=ct,qe.bindRenderbuffer(36161,Fe.renderbuffer),qe.renderbufferStorage(36161,Fe.format,ut,ct),br.profile&&(Fe.stats.size=dt[Fe.format]*Fe.width*Fe.height)),Ee},Ee._reglType="renderbuffer",Ee._renderbuffer=Fe,br.profile&&(Ee.stats=Fe.stats),Ee.destroy=function(){Fe.decRef()},Ee},clear:function(){me(Yr).forEach(Tr)},restore:function(){me(Yr).forEach(function(nt){nt.renderbuffer=qe.createRenderbuffer(),qe.bindRenderbuffer(36161,nt.renderbuffer),qe.renderbufferStorage(36161,nt.format,nt.width,nt.height)}),qe.bindRenderbuffer(36161,null)}}},Pe=[];Pe[6408]=4,Pe[6407]=3;var Je=[];Je[5121]=1,Je[5126]=4,Je[36193]=2;var it=["x","y","z","w"],ht="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),zt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Lt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Vt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},$t={cw:2304,ccw:2305},Ht=new fe(!1,!1,!1,function(){}),tr=function(qe,xt){function Rt(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function fr(Yr,nt,Ae){var Ee=Tr.pop()||new Rt;Ee.startQueryIndex=Yr,Ee.endQueryIndex=nt,Ee.sum=0,Ee.stats=Ae,Nr.push(Ee)}if(!xt.ext_disjoint_timer_query)return null;var br=[],pr=[],Tr=[],Nr=[],Ir=[],lr=[];return{beginQuery:function(Yr){var nt=br.pop()||xt.ext_disjoint_timer_query.createQueryEXT();xt.ext_disjoint_timer_query.beginQueryEXT(35007,nt),pr.push(nt),fr(pr.length-1,pr.length,Yr)},endQuery:function(){xt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:fr,update:function(){var Yr,nt;if(Yr=pr.length,Yr!==0){lr.length=Math.max(lr.length,Yr+1),Ir.length=Math.max(Ir.length,Yr+1),Ir[0]=0;var Ae=lr[0]=0;for(nt=Yr=0;nt<pr.length;++nt){var Ee=pr[nt];xt.ext_disjoint_timer_query.getQueryObjectEXT(Ee,34919)?(Ae+=xt.ext_disjoint_timer_query.getQueryObjectEXT(Ee,34918),br.push(Ee)):pr[Yr++]=Ee,Ir[nt+1]=Ae,lr[nt+1]=Yr}for(pr.length=Yr,nt=Yr=0;nt<Nr.length;++nt){var Ae=Nr[nt],Fe=Ae.startQueryIndex,Ee=Ae.endQueryIndex;Ae.sum+=Ir[Ee]-Ir[Fe],Fe=lr[Fe],Ee=lr[Ee],Ee===Fe?(Ae.stats.gpuTime+=Ae.sum/1e6,Tr.push(Ae)):(Ae.startQueryIndex=Fe,Ae.endQueryIndex=Ee,Nr[Yr++]=Ae)}Nr.length=Yr}},getNumPendingQueries:function(){return pr.length},clear:function(){br.push.apply(br,pr);for(var Yr=0;Yr<br.length;Yr++)xt.ext_disjoint_timer_query.deleteQueryEXT(br[Yr]);pr.length=0,br.length=0},restore:function(){pr.length=0,br.length=0}}};return function(qe){function xt(){if(qr.length===0)yt&&yt.update(),xr=null;else{xr=ie.next(xt),Yr();for(var Gr=qr.length-1;0<=Gr;--Gr){var Br=qr[Gr];Br&&Br(Sr,null,0)}Ee.flush(),yt&&yt.update()}}function Rt(){!xr&&0<qr.length&&(xr=ie.next(xt))}function fr(){xr&&(ie.cancel(xt),xr=null)}function br(Gr){Gr.preventDefault(),fr(),st.forEach(function(Br){Br()})}function pr(Gr){Ee.getError(),Ke.restore(),Cr.restore(),Ar.restore(),_r.restore(),En.restore(),Jr.restore(),fn.restore(),yt&&yt.restore(),Pr.procs.refresh(),Rt(),Bt.forEach(function(Br){Br()})}function Tr(Gr){function Br(ln,jn){var Jn={},La={};return Object.keys(ln).forEach(function(ga){var qn=ln[ga];if(ae.isDynamic(qn))La[ga]=ae.unbox(qn,ga);else{if(jn&&Array.isArray(qn)){for(var Ea=0;Ea<qn.length;++Ea)if(ae.isDynamic(qn[Ea])){La[ga]=ae.unbox(qn,ga);return}}Jn[ga]=qn}}),{dynamic:La,static:Jn}}function kr(ln){for(;wn.length<ln;)wn.push(null);return wn}var en=Br(Gr.context||{},!0),Zn=Br(Gr.uniforms||{},!0),Hn=Br(Gr.attributes||{},!1);Gr=Br(function(ln){function jn(La){if(La in Jn){var ga=Jn[La];delete Jn[La],Object.keys(ga).forEach(function(qn){Jn[La+"."+qn]=ga[qn]})}}var Jn=K({},ln);return delete Jn.uniforms,delete Jn.attributes,delete Jn.context,delete Jn.vao,"stencil"in Jn&&Jn.stencil.op&&(Jn.stencil.opBack=Jn.stencil.opFront=Jn.stencil.op,delete Jn.stencil.op),jn("blend"),jn("depth"),jn("cull"),jn("stencil"),jn("polygonOffset"),jn("scissor"),jn("sample"),"vao"in ln&&(Jn.vao=ln.vao),Jn}(Gr),!1);var da={gpuTime:0,cpuTime:0,count:0},wa=Pr.compile(Gr,Hn,Zn,en,da),Va=wa.draw,Oa=wa.batch,wr=wa.scope,wn=[];return K(function(ln,jn){var Jn;if(typeof ln=="function")return wr.call(this,null,ln,0);if(typeof jn=="function")if(typeof ln=="number")for(Jn=0;Jn<ln;++Jn)wr.call(this,null,jn,Jn);else if(Array.isArray(ln))for(Jn=0;Jn<ln.length;++Jn)wr.call(this,ln[Jn],jn,Jn);else return wr.call(this,ln,jn,0);else if(typeof ln=="number"){if(0<ln)return Oa.call(this,kr(ln|0),ln|0)}else if(Array.isArray(ln)){if(ln.length)return Oa.call(this,ln,ln.length)}else return Va.call(this,ln)},{stats:da,destroy:function(){wa.destroy()}})}function Nr(Gr,Br){var kr=0;Pr.procs.poll();var en=Br.color;en&&(Ee.clearColor(+en[0]||0,+en[1]||0,+en[2]||0,+en[3]||0),kr|=16384),"depth"in Br&&(Ee.clearDepth(+Br.depth),kr|=256),"stencil"in Br&&(Ee.clearStencil(Br.stencil|0),kr|=1024),Ee.clear(kr)}function Ir(Gr){return qr.push(Gr),Rt(),{cancel:function(){function Br(){var en=te(qr,Br);qr[en]=qr[qr.length-1],--qr.length,0>=qr.length&&fr()}var kr=te(qr,Gr);qr[kr]=Br}}}function lr(){var Gr=vn.viewport,Br=vn.scissor_box;Gr[0]=Gr[1]=Br[0]=Br[1]=0,Sr.viewportWidth=Sr.framebufferWidth=Sr.drawingBufferWidth=Gr[2]=Br[2]=Ee.drawingBufferWidth,Sr.viewportHeight=Sr.framebufferHeight=Sr.drawingBufferHeight=Gr[3]=Br[3]=Ee.drawingBufferHeight}function Yr(){Sr.tick+=1,Sr.time=Ae(),lr(),Pr.procs.poll()}function nt(){_r.refresh(),lr(),Pr.procs.refresh(),yt&&yt.update()}function Ae(){return(oe()-kt)/1e3}if(qe=f(qe),!qe)return null;var Ee=qe.gl,Fe=Ee.getContextAttributes();Ee.isContextLost();var Ke=l(Ee,qe);if(!Ke)return null;var tt=t(),ut={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},ct=Ke.extensions,yt=tr(Ee,ct),kt=oe(),jt=Ee.drawingBufferWidth,Mr=Ee.drawingBufferHeight,Sr={tick:0,time:0,viewportWidth:jt,viewportHeight:Mr,framebufferWidth:jt,framebufferHeight:Mr,drawingBufferWidth:jt,drawingBufferHeight:Mr,pixelRatio:qe.pixelRatio},jt={elements:null,primitive:4,count:-1,offset:0,instances:-1},Lr=xe(Ee,ct),Ar=M(Ee,ut,qe,function(Gr){return fn.destroyBuffer(Gr)}),Ur=w(Ee,ct,Ar,ut),fn=N(Ee,ct,Lr,ut,Ar,Ur,jt),Cr=X(Ee,tt,ut,qe),_r=D(Ee,ct,Lr,function(){Pr.procs.poll()},Sr,ut,qe),En=et(Ee,ct,Lr,ut,qe),Jr=R(Ee,ct,Lr,_r,En,ut),Pr=ne(Ee,tt,ct,Lr,Ar,Ur,_r,Jr,{},fn,Cr,jt,Sr,yt,qe),tt=j(Ee,Jr,Pr.procs.poll,Sr),vn=Pr.next,xn=Ee.canvas,qr=[],st=[],Bt=[],ir=[qe.onDestroy],xr=null;xn&&(xn.addEventListener("webglcontextlost",br,!1),xn.addEventListener("webglcontextrestored",pr,!1));var Qr=Jr.setFBO=Tr({framebuffer:ae.define.call(null,1,"framebuffer")});return nt(),Fe=K(Tr,{clear:function(Gr){if("framebuffer"in Gr)if(Gr.framebuffer&&Gr.framebuffer_reglType==="framebufferCube")for(var Br=0;6>Br;++Br)Qr(K({framebuffer:Gr.framebuffer.faces[Br]},Gr),Nr);else Qr(Gr,Nr);else Nr(null,Gr)},prop:ae.define.bind(null,1),context:ae.define.bind(null,2),this:ae.define.bind(null,3),draw:Tr({}),buffer:function(Gr){return Ar.create(Gr,34962,!1,!1)},elements:function(Gr){return Ur.create(Gr,!1)},texture:_r.create2D,cube:_r.createCube,renderbuffer:En.create,framebuffer:Jr.create,framebufferCube:Jr.createCube,vao:fn.createVAO,attributes:Fe,frame:Ir,on:function(Gr,Br){var kr;switch(Gr){case"frame":return Ir(Br);case"lost":kr=st;break;case"restore":kr=Bt;break;case"destroy":kr=ir}return kr.push(Br),{cancel:function(){for(var en=0;en<kr.length;++en)if(kr[en]===Br){kr[en]=kr[kr.length-1],kr.pop();break}}}},limits:Lr,hasExtension:function(Gr){return 0<=Lr.extensions.indexOf(Gr.toLowerCase())},read:tt,destroy:function(){qr.length=0,fr(),xn&&(xn.removeEventListener("webglcontextlost",br),xn.removeEventListener("webglcontextrestored",pr)),Cr.clear(),Jr.clear(),En.clear(),fn.clear(),_r.clear(),Ur.clear(),Ar.clear(),yt&&yt.clear(),ir.forEach(function(Gr){Gr()})},_gl:Ee,_refresh:nt,poll:function(){Yr(),yt&&yt.update()},now:Ae,stats:ut}),qe.onDone(null,Fe),Fe}})},{}],284:[function(e,I,B){var u=e("buffer"),s=u.Buffer;function m(t,i){for(var a in t)i[a]=t[a]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?I.exports=u:(m(u,B),B.Buffer=x);function x(t,i,a){return s(t,i,a)}x.prototype=Object.create(s.prototype),m(s,x),x.from=function(t,i,a){if(typeof t=="number")throw new TypeError("Argument must not be a number");return s(t,i,a)},x.alloc=function(t,i,a){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=s(t);return i!==void 0?typeof a=="string"?r.fill(i,a):r.fill(i):r.fill(0),r},x.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s(t)},x.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(t)}},{buffer:85}],285:[function(e,I,B){I.exports=m;var u=e("events").EventEmitter,s=e("inherits");s(m,u),m.Readable=e("readable-stream/lib/_stream_readable.js"),m.Writable=e("readable-stream/lib/_stream_writable.js"),m.Duplex=e("readable-stream/lib/_stream_duplex.js"),m.Transform=e("readable-stream/lib/_stream_transform.js"),m.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),m.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),m.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),m.Stream=m;function m(){u.call(this)}m.prototype.pipe=function(x,t){var i=this;function a(v){x.writable&&x.write(v)===!1&&i.pause&&i.pause()}i.on("data",a);function r(){i.readable&&i.resume&&i.resume()}x.on("drain",r),!x._isStdio&&(!t||t.end!==!1)&&(i.on("end",f),i.on("close",l));var n=!1;function f(){n||(n=!0,x.end())}function l(){n||(n=!0,typeof x.destroy=="function"&&x.destroy())}function o(v){if(c(),u.listenerCount(this,"error")===0)throw v}i.on("error",o),x.on("error",o);function c(){i.removeListener("data",a),x.removeListener("drain",r),i.removeListener("end",f),i.removeListener("close",l),i.removeListener("error",o),x.removeListener("error",o),i.removeListener("end",c),i.removeListener("close",c),x.removeListener("close",c)}return i.on("end",c),i.on("close",c),x.on("close",c),x.emit("pipe",i),x}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(e,I,B){function u(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var s={};function m(r,n,f){f||(f=Error);function l(c,v,d){return typeof n=="string"?n:n(c,v,d)}var o=function(c){u(v,c);function v(d,p,y){return c.call(this,l(d,p,y))||this}return v}(f);o.prototype.name=f.name,o.prototype.code=r,s[r]=o}function x(r,n){if(Array.isArray(r)){var f=r.length;return r=r.map(function(l){return String(l)}),f>2?"one of ".concat(n," ").concat(r.slice(0,f-1).join(", "),", or ")+r[f-1]:f===2?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}else return"of ".concat(n," ").concat(String(r))}function t(r,n,f){return r.substr(!f||f<0?0:+f,n.length)===n}function i(r,n,f){return(f===void 0||f>r.length)&&(f=r.length),r.substring(f-n.length,f)===n}function a(r,n,f){return typeof f!="number"&&(f=0),f+n.length>r.length?!1:r.indexOf(n,f)!==-1}m("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError),m("ERR_INVALID_ARG_TYPE",function(r,n,f){var l;typeof n=="string"&&t(n,"not ")?(l="must not be",n=n.replace(/^not /,"")):l="must be";var o;if(i(r," argument"))o="The ".concat(r," ").concat(l," ").concat(x(n,"type"));else{var c=a(r,".")?"property":"argument";o='The "'.concat(r,'" ').concat(c," ").concat(l," ").concat(x(n,"type"))}return o+=". Received type ".concat(typeof f),o},TypeError),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),m("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),m("ERR_STREAM_PREMATURE_CLOSE","Premature close"),m("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),m("ERR_STREAM_WRITE_AFTER_END","write after end"),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),I.exports.codes=s},{}],287:[function(e,I,B){(function(u){(function(){var s=Object.keys||function(l){var o=[];for(var c in l)o.push(c);return o};I.exports=r;var m=e("./_stream_readable"),x=e("./_stream_writable");e("inherits")(r,m);for(var t=s(x.prototype),i=0;i<t.length;i++){var a=t[i];r.prototype[a]||(r.prototype[a]=x.prototype[a])}function r(l){if(!(this instanceof r))return new r(l);m.call(this,l),x.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function n(){this._writableState.ended||u.nextTick(f,this)}function f(l){l.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(o){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=o,this._writableState.destroyed=o)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(e,I,B){I.exports=s;var u=e("./_stream_transform");e("inherits")(s,u);function s(m){if(!(this instanceof s))return new s(m);u.call(this,m)}s.prototype._transform=function(m,x,t){t(null,m)}},{"./_stream_transform":290,inherits:231}],289:[function(e,I,B){(function(u,s){(function(){I.exports=k;var m;k.ReadableState=S,e("events").EventEmitter;var x=function(ae,ie){return ae.listeners(ie).length},t=e("./internal/streams/stream"),i=e("buffer").Buffer,a=s.Uint8Array||function(){};function r($){return i.from($)}function n($){return i.isBuffer($)||$ instanceof a}var f=e("util"),l;f&&f.debuglog?l=f.debuglog("stream"):l=function(){};var o=e("./internal/streams/buffer_list"),c=e("./internal/streams/destroy"),v=e("./internal/streams/state"),d=v.getHighWaterMark,p=e("../errors").codes,y=p.ERR_INVALID_ARG_TYPE,g=p.ERR_STREAM_PUSH_AFTER_EOF,A=p.ERR_METHOD_NOT_IMPLEMENTED,b=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,M,w,T;e("inherits")(k,t);var _=c.errorOrDestroy,h=["error","close","destroy","pause","resume"];function L($,ae,ie){if(typeof $.prependListener=="function")return $.prependListener(ae,ie);!$._events||!$._events[ae]?$.on(ae,ie):Array.isArray($._events[ae])?$._events[ae].unshift(ie):$._events[ae]=[ie,$._events[ae]]}function S($,ae,ie){m=m||e("./_stream_duplex"),$=$||{},typeof ie!="boolean"&&(ie=ae instanceof m),this.objectMode=!!$.objectMode,ie&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=d(this,$,"readableHighWaterMark",ie),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(M||(M=e("string_decoder/").StringDecoder),this.decoder=new M($.encoding),this.encoding=$.encoding)}function k($){if(m=m||e("./_stream_duplex"),!(this instanceof k))return new k($);var ae=this instanceof m;this._readableState=new S($,this,ae),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),t.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ae){!this._readableState||(this._readableState.destroyed=ae)}}),k.prototype.destroy=c.destroy,k.prototype._undestroy=c.undestroy,k.prototype._destroy=function($,ae){ae($)},k.prototype.push=function($,ae){var ie=this._readableState,oe;return ie.objectMode?oe=!0:typeof $=="string"&&(ae=ae||ie.defaultEncoding,ae!==ie.encoding&&($=i.from($,ae),ae=""),oe=!0),P(this,$,ae,!1,oe)},k.prototype.unshift=function($){return P(this,$,null,!0,!1)};function P($,ae,ie,oe,ue){l("readableAddChunk",ae);var xe=$._readableState;if(ae===null)xe.reading=!1,N($,xe);else{var he;if(ue||(he=F(xe,ae)),he)_($,he);else if(xe.objectMode||ae&&ae.length>0)if(typeof ae!="string"&&!xe.objectMode&&Object.getPrototypeOf(ae)!==i.prototype&&(ae=r(ae)),oe)xe.endEmitted?_($,new b):O($,xe,ae,!0);else if(xe.ended)_($,new g);else{if(xe.destroyed)return!1;xe.reading=!1,xe.decoder&&!ie?(ae=xe.decoder.write(ae),xe.objectMode||ae.length!==0?O($,xe,ae,!1):ee($,xe)):O($,xe,ae,!1)}else oe||(xe.reading=!1,ee($,xe))}return!xe.ended&&(xe.length<xe.highWaterMark||xe.length===0)}function O($,ae,ie,oe){ae.flowing&&ae.length===0&&!ae.sync?(ae.awaitDrain=0,$.emit("data",ie)):(ae.length+=ae.objectMode?1:ie.length,oe?ae.buffer.unshift(ie):ae.buffer.push(ie),ae.needReadable&&X($)),ee($,ae)}function F($,ae){var ie;return!n(ae)&&typeof ae!="string"&&ae!==void 0&&!$.objectMode&&(ie=new y("chunk",["string","Buffer","Uint8Array"],ae)),ie}k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function($){M||(M=e("string_decoder/").StringDecoder);var ae=new M($);this._readableState.decoder=ae,this._readableState.encoding=this._readableState.decoder.encoding;for(var ie=this._readableState.buffer.head,oe="";ie!==null;)oe+=ae.write(ie.data),ie=ie.next;return this._readableState.buffer.clear(),oe!==""&&this._readableState.buffer.push(oe),this._readableState.length=oe.length,this};var D=1073741824;function R($){return $>=D?$=D:($--,$|=$>>>1,$|=$>>>2,$|=$>>>4,$|=$>>>8,$|=$>>>16,$++),$}function U($,ae){return $<=0||ae.length===0&&ae.ended?0:ae.objectMode?1:$!==$?ae.flowing&&ae.length?ae.buffer.head.data.length:ae.length:($>ae.highWaterMark&&(ae.highWaterMark=R($)),$<=ae.length?$:ae.ended?ae.length:(ae.needReadable=!0,0))}k.prototype.read=function($){l("read",$),$=parseInt($,10);var ae=this._readableState,ie=$;if($!==0&&(ae.emittedReadable=!1),$===0&&ae.needReadable&&((ae.highWaterMark!==0?ae.length>=ae.highWaterMark:ae.length>0)||ae.ended))return l("read: emitReadable",ae.length,ae.ended),ae.length===0&&ae.ended?ne(this):X(this),null;if($=U($,ae),$===0&&ae.ended)return ae.length===0&&ne(this),null;var oe=ae.needReadable;l("need readable",oe),(ae.length===0||ae.length-$<ae.highWaterMark)&&(oe=!0,l("length less than watermark",oe)),ae.ended||ae.reading?(oe=!1,l("reading or ended",oe)):oe&&(l("do read"),ae.reading=!0,ae.sync=!0,ae.length===0&&(ae.needReadable=!0),this._read(ae.highWaterMark),ae.sync=!1,ae.reading||($=U(ie,ae)));var ue;return $>0?ue=Y($,ae):ue=null,ue===null?(ae.needReadable=ae.length<=ae.highWaterMark,$=0):(ae.length-=$,ae.awaitDrain=0),ae.length===0&&(ae.ended||(ae.needReadable=!0),ie!==$&&ae.ended&&ne(this)),ue!==null&&this.emit("data",ue),ue};function N($,ae){if(l("onEofChunk"),!ae.ended){if(ae.decoder){var ie=ae.decoder.end();ie&&ie.length&&(ae.buffer.push(ie),ae.length+=ae.objectMode?1:ie.length)}ae.ended=!0,ae.sync?X($):(ae.needReadable=!1,ae.emittedReadable||(ae.emittedReadable=!0,j($)))}}function X($){var ae=$._readableState;l("emitReadable",ae.needReadable,ae.emittedReadable),ae.needReadable=!1,ae.emittedReadable||(l("emitReadable",ae.flowing),ae.emittedReadable=!0,u.nextTick(j,$))}function j($){var ae=$._readableState;l("emitReadable_",ae.destroyed,ae.length,ae.ended),!ae.destroyed&&(ae.length||ae.ended)&&($.emit("readable"),ae.emittedReadable=!1),ae.needReadable=!ae.flowing&&!ae.ended&&ae.length<=ae.highWaterMark,V($)}function ee($,ae){ae.readingMore||(ae.readingMore=!0,u.nextTick(q,$,ae))}function q($,ae){for(;!ae.reading&&!ae.ended&&(ae.length<ae.highWaterMark||ae.flowing&&ae.length===0);){var ie=ae.length;if(l("maybeReadMore read 0"),$.read(0),ie===ae.length)break}ae.readingMore=!1}k.prototype._read=function($){_(this,new A("_read()"))},k.prototype.pipe=function($,ae){var ie=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=$;break;case 1:oe.pipes=[oe.pipes,$];break;default:oe.pipes.push($);break}oe.pipesCount+=1,l("pipe count=%d opts=%j",oe.pipesCount,ae);var ue=(!ae||ae.end!==!1)&&$!==u.stdout&&$!==u.stderr,xe=ue?me:Ie;oe.endEmitted?u.nextTick(xe):ie.once("end",xe),$.on("unpipe",he);function he(Ze,rt){l("onunpipe"),Ze===ie&&rt&&rt.hasUnpiped===!1&&(rt.hasUnpiped=!0,Se())}function me(){l("onend"),$.end()}var be=G(ie);$.on("drain",be);var Ce=!1;function Se(){l("cleanup"),$.removeListener("close",Xe),$.removeListener("finish",Te),$.removeListener("drain",be),$.removeListener("error",Ye),$.removeListener("unpipe",he),ie.removeListener("end",me),ie.removeListener("end",Ie),ie.removeListener("data",Be),Ce=!0,oe.awaitDrain&&(!$._writableState||$._writableState.needDrain)&&be()}ie.on("data",Be);function Be(Ze){l("ondata");var rt=$.write(Ze);l("dest.write",rt),rt===!1&&((oe.pipesCount===1&&oe.pipes===$||oe.pipesCount>1&&K(oe.pipes,$)!==-1)&&!Ce&&(l("false write response, pause",oe.awaitDrain),oe.awaitDrain++),ie.pause())}function Ye(Ze){l("onerror",Ze),Ie(),$.removeListener("error",Ye),x($,"error")===0&&_($,Ze)}L($,"error",Ye);function Xe(){$.removeListener("finish",Te),Ie()}$.once("close",Xe);function Te(){l("onfinish"),$.removeListener("close",Xe),Ie()}$.once("finish",Te);function Ie(){l("unpipe"),ie.unpipe($)}return $.emit("pipe",ie),oe.flowing||(l("pipe resume"),ie.resume()),$};function G($){return function(){var ie=$._readableState;l("pipeOnDrain",ie.awaitDrain),ie.awaitDrain&&ie.awaitDrain--,ie.awaitDrain===0&&x($,"data")&&(ie.flowing=!0,V($))}}k.prototype.unpipe=function($){var ae=this._readableState,ie={hasUnpiped:!1};if(ae.pipesCount===0)return this;if(ae.pipesCount===1)return $&&$!==ae.pipes?this:($||($=ae.pipes),ae.pipes=null,ae.pipesCount=0,ae.flowing=!1,$&&$.emit("unpipe",this,ie),this);if(!$){var oe=ae.pipes,ue=ae.pipesCount;ae.pipes=null,ae.pipesCount=0,ae.flowing=!1;for(var xe=0;xe<ue;xe++)oe[xe].emit("unpipe",this,{hasUnpiped:!1});return this}var he=K(ae.pipes,$);return he===-1?this:(ae.pipes.splice(he,1),ae.pipesCount-=1,ae.pipesCount===1&&(ae.pipes=ae.pipes[0]),$.emit("unpipe",this,ie),this)},k.prototype.on=function($,ae){var ie=t.prototype.on.call(this,$,ae),oe=this._readableState;return $==="data"?(oe.readableListening=this.listenerCount("readable")>0,oe.flowing!==!1&&this.resume()):$==="readable"&&!oe.endEmitted&&!oe.readableListening&&(oe.readableListening=oe.needReadable=!0,oe.flowing=!1,oe.emittedReadable=!1,l("on readable",oe.length,oe.reading),oe.length?X(this):oe.reading||u.nextTick(le,this)),ie},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function($,ae){var ie=t.prototype.removeListener.call(this,$,ae);return $==="readable"&&u.nextTick(J,this),ie},k.prototype.removeAllListeners=function($){var ae=t.prototype.removeAllListeners.apply(this,arguments);return($==="readable"||$===void 0)&&u.nextTick(J,this),ae};function J($){var ae=$._readableState;ae.readableListening=$.listenerCount("readable")>0,ae.resumeScheduled&&!ae.paused?ae.flowing=!0:$.listenerCount("data")>0&&$.resume()}function le($){l("readable nexttick read 0"),$.read(0)}k.prototype.resume=function(){var $=this._readableState;return $.flowing||(l("resume"),$.flowing=!$.readableListening,fe(this,$)),$.paused=!1,this};function fe($,ae){ae.resumeScheduled||(ae.resumeScheduled=!0,u.nextTick(se,$,ae))}function se($,ae){l("resume",ae.reading),ae.reading||$.read(0),ae.resumeScheduled=!1,$.emit("resume"),V($),ae.flowing&&!ae.reading&&$.read(0)}k.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function V($){var ae=$._readableState;for(l("flow",ae.flowing);ae.flowing&&$.read()!==null;);}k.prototype.wrap=function($){var ae=this,ie=this._readableState,oe=!1;$.on("end",function(){if(l("wrapped end"),ie.decoder&&!ie.ended){var he=ie.decoder.end();he&&he.length&&ae.push(he)}ae.push(null)}),$.on("data",function(he){if(l("wrapped data"),ie.decoder&&(he=ie.decoder.write(he)),!(ie.objectMode&&he==null)&&!(!ie.objectMode&&(!he||!he.length))){var me=ae.push(he);me||(oe=!0,$.pause())}});for(var ue in $)this[ue]===void 0&&typeof $[ue]=="function"&&(this[ue]=function(me){return function(){return $[me].apply($,arguments)}}(ue));for(var xe=0;xe<h.length;xe++)$.on(h[xe],this.emit.bind(this,h[xe]));return this._read=function(he){l("wrapped _read",he),oe&&(oe=!1,$.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=e("./internal/streams/async_iterator")),w(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ae){this._readableState&&(this._readableState.flowing=ae)}}),k._fromList=Y,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Y($,ae){if(ae.length===0)return null;var ie;return ae.objectMode?ie=ae.buffer.shift():!$||$>=ae.length?(ae.decoder?ie=ae.buffer.join(""):ae.buffer.length===1?ie=ae.buffer.first():ie=ae.buffer.concat(ae.length),ae.buffer.clear()):ie=ae.buffer.consume($,ae.decoder),ie}function ne($){var ae=$._readableState;l("endReadable",ae.endEmitted),ae.endEmitted||(ae.ended=!0,u.nextTick(te,ae,$))}function te($,ae){if(l("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,ae.readable=!1,ae.emit("end"),$.autoDestroy)){var ie=ae._writableState;(!ie||ie.autoDestroy&&ie.finished)&&ae.destroy()}}typeof Symbol=="function"&&(k.from=function($,ae){return T===void 0&&(T=e("./internal/streams/from")),T(k,$,ae)});function K($,ae){for(var ie=0,oe=$.length;ie<oe;ie++)if($[ie]===ae)return ie;return-1}}).call(this)}).call(this,e("_process"),typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(e,I,B){I.exports=r;var u=e("../errors").codes,s=u.ERR_METHOD_NOT_IMPLEMENTED,m=u.ERR_MULTIPLE_CALLBACK,x=u.ERR_TRANSFORM_ALREADY_TRANSFORMING,t=u.ERR_TRANSFORM_WITH_LENGTH_0,i=e("./_stream_duplex");e("inherits")(r,i);function a(l,o){var c=this._transformState;c.transforming=!1;var v=c.writecb;if(v===null)return this.emit("error",new m);c.writechunk=null,c.writecb=null,o!=null&&this.push(o),v(l);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function r(l){if(!(this instanceof r))return new r(l);i.call(this,l),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",n)}function n(){var l=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(o,c){f(l,o,c)}):f(this,null,null)}r.prototype.push=function(l,o){return this._transformState.needTransform=!1,i.prototype.push.call(this,l,o)},r.prototype._transform=function(l,o,c){c(new s("_transform()"))},r.prototype._write=function(l,o,c){var v=this._transformState;if(v.writecb=c,v.writechunk=l,v.writeencoding=o,!v.transforming){var d=this._readableState;(v.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},r.prototype._read=function(l){var o=this._transformState;o.writechunk!==null&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},r.prototype._destroy=function(l,o){i.prototype._destroy.call(this,l,function(c){o(c)})};function f(l,o,c){if(o)return l.emit("error",o);if(c!=null&&l.push(c),l._writableState.length)throw new t;if(l._transformState.transforming)throw new x;return l.push(null)}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(e,I,B){(function(u,s){(function(){I.exports=S;function m(V){var Y=this;this.next=null,this.entry=null,this.finish=function(){se(Y,V)}}var x;S.WritableState=h;var t={deprecate:e("util-deprecate")},i=e("./internal/streams/stream"),a=e("buffer").Buffer,r=s.Uint8Array||function(){};function n(V){return a.from(V)}function f(V){return a.isBuffer(V)||V instanceof r}var l=e("./internal/streams/destroy"),o=e("./internal/streams/state"),c=o.getHighWaterMark,v=e("../errors").codes,d=v.ERR_INVALID_ARG_TYPE,p=v.ERR_METHOD_NOT_IMPLEMENTED,y=v.ERR_MULTIPLE_CALLBACK,g=v.ERR_STREAM_CANNOT_PIPE,A=v.ERR_STREAM_DESTROYED,b=v.ERR_STREAM_NULL_VALUES,M=v.ERR_STREAM_WRITE_AFTER_END,w=v.ERR_UNKNOWN_ENCODING,T=l.errorOrDestroy;e("inherits")(S,i);function _(){}function h(V,Y,ne){x=x||e("./_stream_duplex"),V=V||{},typeof ne!="boolean"&&(ne=Y instanceof x),this.objectMode=!!V.objectMode,ne&&(this.objectMode=this.objectMode||!!V.writableObjectMode),this.highWaterMark=c(this,V,"writableHighWaterMark",ne),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var te=V.decodeStrings===!1;this.decodeStrings=!te,this.defaultEncoding=V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(K){N(Y,K)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new m(this)}h.prototype.getBuffer=function(){for(var Y=this.bufferedRequest,ne=[];Y;)ne.push(Y),Y=Y.next;return ne},function(){try{Object.defineProperty(h.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(Y){return L.call(this,Y)?!0:this!==S?!1:Y&&Y._writableState instanceof h}})):L=function(Y){return Y instanceof this};function S(V){x=x||e("./_stream_duplex");var Y=this instanceof x;if(!Y&&!L.call(S,this))return new S(V);this._writableState=new h(V,this,Y),this.writable=!0,V&&(typeof V.write=="function"&&(this._write=V.write),typeof V.writev=="function"&&(this._writev=V.writev),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.final=="function"&&(this._final=V.final)),i.call(this)}S.prototype.pipe=function(){T(this,new g)};function k(V,Y){var ne=new M;T(V,ne),u.nextTick(Y,ne)}function P(V,Y,ne,te){var K;return ne===null?K=new b:typeof ne!="string"&&!Y.objectMode&&(K=new d("chunk",["string","Buffer"],ne)),K?(T(V,K),u.nextTick(te,K),!1):!0}S.prototype.write=function(V,Y,ne){var te=this._writableState,K=!1,$=!te.objectMode&&f(V);return $&&!a.isBuffer(V)&&(V=n(V)),typeof Y=="function"&&(ne=Y,Y=null),$?Y="buffer":Y||(Y=te.defaultEncoding),typeof ne!="function"&&(ne=_),te.ending?k(this,ne):($||P(this,te,V,ne))&&(te.pendingcb++,K=F(this,te,$,V,Y,ne)),K},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var V=this._writableState;V.corked&&(V.corked--,!V.writing&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&ee(this,V))},S.prototype.setDefaultEncoding=function(Y){if(typeof Y=="string"&&(Y=Y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Y+"").toLowerCase())>-1))throw new w(Y);return this._writableState.defaultEncoding=Y,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function O(V,Y,ne){return!V.objectMode&&V.decodeStrings!==!1&&typeof Y=="string"&&(Y=a.from(Y,ne)),Y}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function F(V,Y,ne,te,K,$){if(!ne){var ae=O(Y,te,K);te!==ae&&(ne=!0,K="buffer",te=ae)}var ie=Y.objectMode?1:te.length;Y.length+=ie;var oe=Y.length<Y.highWaterMark;if(oe||(Y.needDrain=!0),Y.writing||Y.corked){var ue=Y.lastBufferedRequest;Y.lastBufferedRequest={chunk:te,encoding:K,isBuf:ne,callback:$,next:null},ue?ue.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1}else D(V,Y,!1,ie,te,K,$);return oe}function D(V,Y,ne,te,K,$,ae){Y.writelen=te,Y.writecb=ae,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new A("write")):ne?V._writev(K,Y.onwrite):V._write(K,$,Y.onwrite),Y.sync=!1}function R(V,Y,ne,te,K){--Y.pendingcb,ne?(u.nextTick(K,te),u.nextTick(le,V,Y),V._writableState.errorEmitted=!0,T(V,te)):(K(te),V._writableState.errorEmitted=!0,T(V,te),le(V,Y))}function U(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}function N(V,Y){var ne=V._writableState,te=ne.sync,K=ne.writecb;if(typeof K!="function")throw new y;if(U(ne),Y)R(V,ne,te,Y,K);else{var $=q(ne)||V.destroyed;!$&&!ne.corked&&!ne.bufferProcessing&&ne.bufferedRequest&&ee(V,ne),te?u.nextTick(X,V,ne,$,K):X(V,ne,$,K)}}function X(V,Y,ne,te){ne||j(V,Y),Y.pendingcb--,te(),le(V,Y)}function j(V,Y){Y.length===0&&Y.needDrain&&(Y.needDrain=!1,V.emit("drain"))}function ee(V,Y){Y.bufferProcessing=!0;var ne=Y.bufferedRequest;if(V._writev&&ne&&ne.next){var te=Y.bufferedRequestCount,K=new Array(te),$=Y.corkedRequestsFree;$.entry=ne;for(var ae=0,ie=!0;ne;)K[ae]=ne,ne.isBuf||(ie=!1),ne=ne.next,ae+=1;K.allBuffers=ie,D(V,Y,!0,Y.length,K,"",$.finish),Y.pendingcb++,Y.lastBufferedRequest=null,$.next?(Y.corkedRequestsFree=$.next,$.next=null):Y.corkedRequestsFree=new m(Y),Y.bufferedRequestCount=0}else{for(;ne;){var oe=ne.chunk,ue=ne.encoding,xe=ne.callback,he=Y.objectMode?1:oe.length;if(D(V,Y,!1,he,oe,ue,xe),ne=ne.next,Y.bufferedRequestCount--,Y.writing)break}ne===null&&(Y.lastBufferedRequest=null)}Y.bufferedRequest=ne,Y.bufferProcessing=!1}S.prototype._write=function(V,Y,ne){ne(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(V,Y,ne){var te=this._writableState;return typeof V=="function"?(ne=V,V=null,Y=null):typeof Y=="function"&&(ne=Y,Y=null),V!=null&&this.write(V,Y),te.corked&&(te.corked=1,this.uncork()),te.ending||fe(this,te,ne),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function q(V){return V.ending&&V.length===0&&V.bufferedRequest===null&&!V.finished&&!V.writing}function G(V,Y){V._final(function(ne){Y.pendingcb--,ne&&T(V,ne),Y.prefinished=!0,V.emit("prefinish"),le(V,Y)})}function J(V,Y){!Y.prefinished&&!Y.finalCalled&&(typeof V._final=="function"&&!Y.destroyed?(Y.pendingcb++,Y.finalCalled=!0,u.nextTick(G,V,Y)):(Y.prefinished=!0,V.emit("prefinish")))}function le(V,Y){var ne=q(Y);if(ne&&(J(V,Y),Y.pendingcb===0&&(Y.finished=!0,V.emit("finish"),Y.autoDestroy))){var te=V._readableState;(!te||te.autoDestroy&&te.endEmitted)&&V.destroy()}return ne}function fe(V,Y,ne){Y.ending=!0,le(V,Y),ne&&(Y.finished?u.nextTick(ne):V.once("finish",ne)),Y.ended=!0,V.writable=!1}function se(V,Y,ne){var te=V.entry;for(V.entry=null;te;){var K=te.callback;Y.pendingcb--,K(ne),te=te.next}Y.corkedRequestsFree.next=V}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Y){!this._writableState||(this._writableState.destroyed=Y)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(V,Y){Y(V)}}).call(this)}).call(this,e("_process"),typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(e,I,B){(function(u){(function(){var s;function m(A,b,M){return b in A?Object.defineProperty(A,b,{value:M,enumerable:!0,configurable:!0,writable:!0}):A[b]=M,A}var x=e("./end-of-stream"),t=Symbol("lastResolve"),i=Symbol("lastReject"),a=Symbol("error"),r=Symbol("ended"),n=Symbol("lastPromise"),f=Symbol("handlePromise"),l=Symbol("stream");function o(A,b){return{value:A,done:b}}function c(A){var b=A[t];if(b!==null){var M=A[l].read();M!==null&&(A[n]=null,A[t]=null,A[i]=null,b(o(M,!1)))}}function v(A){u.nextTick(c,A)}function d(A,b){return function(M,w){A.then(function(){if(b[r]){M(o(void 0,!0));return}b[f](M,w)},w)}}var p=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((s={get stream(){return this[l]},next:function(){var b=this,M=this[a];if(M!==null)return Promise.reject(M);if(this[r])return Promise.resolve(o(void 0,!0));if(this[l].destroyed)return new Promise(function(h,L){u.nextTick(function(){b[a]?L(b[a]):h(o(void 0,!0))})});var w=this[n],T;if(w)T=new Promise(d(w,this));else{var _=this[l].read();if(_!==null)return Promise.resolve(o(_,!1));T=new Promise(this[f])}return this[n]=T,T}},m(s,Symbol.asyncIterator,function(){return this}),m(s,"return",function(){var b=this;return new Promise(function(M,w){b[l].destroy(null,function(T){if(T){w(T);return}M(o(void 0,!0))})})}),s),p),g=function(b){var M,w=Object.create(y,(M={},m(M,l,{value:b,writable:!0}),m(M,t,{value:null,writable:!0}),m(M,i,{value:null,writable:!0}),m(M,a,{value:null,writable:!0}),m(M,r,{value:b._readableState.endEmitted,writable:!0}),m(M,f,{value:function(_,h){var L=w[l].read();L?(w[n]=null,w[t]=null,w[i]=null,_(o(L,!1))):(w[t]=_,w[i]=h)},writable:!0}),M));return w[n]=null,x(b,function(T){if(T&&T.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=w[i];_!==null&&(w[n]=null,w[t]=null,w[i]=null,_(T)),w[a]=T;return}var h=w[t];h!==null&&(w[n]=null,w[t]=null,w[i]=null,h(o(void 0,!0))),w[r]=!0}),b.on("readable",v.bind(null,w)),w};I.exports=g}).call(this)}).call(this,e("_process"))},{"./end-of-stream":295,_process:277}],293:[function(e,I,B){function u(c,v){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(c);v&&(p=p.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),d.push.apply(d,p)}return d}function s(c){for(var v=1;v<arguments.length;v++){var d=arguments[v]!=null?arguments[v]:{};v%2?u(Object(d),!0).forEach(function(p){m(c,p,d[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):u(Object(d)).forEach(function(p){Object.defineProperty(c,p,Object.getOwnPropertyDescriptor(d,p))})}return c}function m(c,v,d){return v in c?Object.defineProperty(c,v,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[v]=d,c}function x(c,v){if(!(c instanceof v))throw new TypeError("Cannot call a class as a function")}function t(c,v){for(var d=0;d<v.length;d++){var p=v[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}function i(c,v,d){return v&&t(c.prototype,v),d&&t(c,d),c}var a=e("buffer"),r=a.Buffer,n=e("util"),f=n.inspect,l=f&&f.custom||"inspect";function o(c,v,d){r.prototype.copy.call(c,v,d)}I.exports=function(){function c(){x(this,c),this.head=null,this.tail=null,this.length=0}return i(c,[{key:"push",value:function(d){var p={data:d,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}},{key:"unshift",value:function(d){var p={data:d,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var p=this.head,y=""+p.data;p=p.next;)y+=d+p.data;return y}},{key:"concat",value:function(d){if(this.length===0)return r.alloc(0);for(var p=r.allocUnsafe(d>>>0),y=this.head,g=0;y;)o(y.data,p,g),g+=y.data.length,y=y.next;return p}},{key:"consume",value:function(d,p){var y;return d<this.head.data.length?(y=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):d===this.head.data.length?y=this.shift():y=p?this._getString(d):this._getBuffer(d),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var p=this.head,y=1,g=p.data;for(d-=g.length;p=p.next;){var A=p.data,b=d>A.length?A.length:d;if(b===A.length?g+=A:g+=A.slice(0,d),d-=b,d===0){b===A.length?(++y,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=A.slice(b));break}++y}return this.length-=y,g}},{key:"_getBuffer",value:function(d){var p=r.allocUnsafe(d),y=this.head,g=1;for(y.data.copy(p),d-=y.data.length;y=y.next;){var A=y.data,b=d>A.length?A.length:d;if(A.copy(p,p.length-d,0,b),d-=b,d===0){b===A.length?(++g,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=A.slice(b));break}++g}return this.length-=g,p}},{key:l,value:function(d,p){return f(this,s({},p,{depth:0,customInspect:!1}))}}]),c}()},{buffer:85,util:83}],294:[function(e,I,B){(function(u){(function(){function s(r,n){var f=this,l=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return l||o?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,u.nextTick(i,this,r)):u.nextTick(i,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(c){!n&&c?f._writableState?f._writableState.errorEmitted?u.nextTick(x,f):(f._writableState.errorEmitted=!0,u.nextTick(m,f,c)):u.nextTick(m,f,c):n?(u.nextTick(x,f),n(c)):u.nextTick(x,f)}),this)}function m(r,n){i(r,n),x(r)}function x(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(r,n){r.emit("error",n)}function a(r,n){var f=r._readableState,l=r._writableState;f&&f.autoDestroy||l&&l.autoDestroy?r.destroy(n):r.emit("error",n)}I.exports={destroy:s,undestroy:t,errorOrDestroy:a}}).call(this)}).call(this,e("_process"))},{_process:277}],295:[function(e,I,B){var u=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(i){var a=!1;return function(){if(!a){a=!0;for(var r=arguments.length,n=new Array(r),f=0;f<r;f++)n[f]=arguments[f];i.apply(this,n)}}}function m(){}function x(i){return i.setHeader&&typeof i.abort=="function"}function t(i,a,r){if(typeof a=="function")return t(i,null,a);a||(a={}),r=s(r||m);var n=a.readable||a.readable!==!1&&i.readable,f=a.writable||a.writable!==!1&&i.writable,l=function(){i.writable||c()},o=i._writableState&&i._writableState.finished,c=function(){f=!1,o=!0,n||r.call(i)},v=i._readableState&&i._readableState.endEmitted,d=function(){n=!1,v=!0,f||r.call(i)},p=function(b){r.call(i,b)},y=function(){var b;if(n&&!v)return(!i._readableState||!i._readableState.ended)&&(b=new u),r.call(i,b);if(f&&!o)return(!i._writableState||!i._writableState.ended)&&(b=new u),r.call(i,b)},g=function(){i.req.on("finish",c)};return x(i)?(i.on("complete",c),i.on("abort",y),i.req?g():i.on("request",g)):f&&!i._writableState&&(i.on("end",l),i.on("close",l)),i.on("end",d),i.on("finish",c),a.error!==!1&&i.on("error",p),i.on("close",y),function(){i.removeListener("complete",c),i.removeListener("abort",y),i.removeListener("request",g),i.req&&i.req.removeListener("finish",c),i.removeListener("end",l),i.removeListener("close",l),i.removeListener("finish",c),i.removeListener("end",d),i.removeListener("error",p),i.removeListener("close",y)}}I.exports=t},{"../../../errors":286}],296:[function(e,I,B){I.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(e,I,B){var u;function s(c){var v=!1;return function(){v||(v=!0,c.apply(void 0,arguments))}}var m=e("../../../errors").codes,x=m.ERR_MISSING_ARGS,t=m.ERR_STREAM_DESTROYED;function i(c){if(c)throw c}function a(c){return c.setHeader&&typeof c.abort=="function"}function r(c,v,d,p){p=s(p);var y=!1;c.on("close",function(){y=!0}),u===void 0&&(u=e("./end-of-stream")),u(c,{readable:v,writable:d},function(A){if(A)return p(A);y=!0,p()});var g=!1;return function(A){if(!y&&!g){if(g=!0,a(c))return c.abort();if(typeof c.destroy=="function")return c.destroy();p(A||new t("pipe"))}}}function n(c){c()}function f(c,v){return c.pipe(v)}function l(c){return!c.length||typeof c[c.length-1]!="function"?i:c.pop()}function o(){for(var c=arguments.length,v=new Array(c),d=0;d<c;d++)v[d]=arguments[d];var p=l(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new x("streams");var y,g=v.map(function(A,b){var M=b<v.length-1,w=b>0;return r(A,M,w,function(T){y||(y=T),T&&g.forEach(n),!M&&(g.forEach(n),p(y))})});return v.reduce(f)}I.exports=o},{"../../../errors":286,"./end-of-stream":295}],298:[function(e,I,B){var u=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function s(x,t,i){return x.highWaterMark!=null?x.highWaterMark:t?x[i]:null}function m(x,t,i,a){var r=s(t,a,i);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var n=a?i:"highWaterMark";throw new u(n,r)}return Math.floor(r)}return x.objectMode?16:16*1024}I.exports={getHighWaterMark:m}},{"../../../errors":286}],299:[function(e,I,B){I.exports=e("events").EventEmitter},{events:84}],300:[function(e,I,B){var u=e("safe-buffer").Buffer,s=u.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function m(g){if(!g)return"utf8";for(var A;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(A)return;g=(""+g).toLowerCase(),A=!0}}function x(g){var A=m(g);if(typeof A!="string"&&(u.isEncoding===s||!s(g)))throw new Error("Unknown encoding: "+g);return A||g}B.StringDecoder=t;function t(g){this.encoding=x(g);var A;switch(this.encoding){case"utf16le":this.text=o,this.end=c,A=4;break;case"utf8":this.fillLast=n,A=4;break;case"base64":this.text=v,this.end=d,A=3;break;default:this.write=p,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=u.allocUnsafe(A)}t.prototype.write=function(g){if(g.length===0)return"";var A,b;if(this.lastNeed){if(A=this.fillLast(g),A===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<g.length?A?A+this.text(g,b):this.text(g,b):A||""},t.prototype.end=l,t.prototype.text=f,t.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function i(g){return g<=127?0:g>>5==6?2:g>>4==14?3:g>>3==30?4:g>>6==2?-1:-2}function a(g,A,b){var M=A.length-1;if(M<b)return 0;var w=i(A[M]);return w>=0?(w>0&&(g.lastNeed=w-1),w):--M<b||w===-2?0:(w=i(A[M]),w>=0?(w>0&&(g.lastNeed=w-2),w):--M<b||w===-2?0:(w=i(A[M]),w>=0?(w>0&&(w===2?w=0:g.lastNeed=w-3),w):0))}function r(g,A,b){if((A[0]&192)!=128)return g.lastNeed=0,"\uFFFD";if(g.lastNeed>1&&A.length>1){if((A[1]&192)!=128)return g.lastNeed=1,"\uFFFD";if(g.lastNeed>2&&A.length>2&&(A[2]&192)!=128)return g.lastNeed=2,"\uFFFD"}}function n(g){var A=this.lastTotal-this.lastNeed,b=r(this,g);if(b!==void 0)return b;if(this.lastNeed<=g.length)return g.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,A,0,g.length),this.lastNeed-=g.length}function f(g,A){var b=a(this,g,A);if(!this.lastNeed)return g.toString("utf8",A);this.lastTotal=b;var M=g.length-(b-this.lastNeed);return g.copy(this.lastChar,0,M),g.toString("utf8",A,M)}function l(g){var A=g&&g.length?this.write(g):"";return this.lastNeed?A+"\uFFFD":A}function o(g,A){if((g.length-A)%2==0){var b=g.toString("utf16le",A);if(b){var M=b.charCodeAt(b.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",A,g.length-1)}function c(g){var A=g&&g.length?this.write(g):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,b)}return A}function v(g,A){var b=(g.length-A)%3;return b===0?g.toString("base64",A):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",A,g.length-b))}function d(g){var A=g&&g.length?this.write(g):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function p(g){return g.toString(this.encoding)}function y(g){return g&&g.length?this.write(g):""}},{"safe-buffer":284}],301:[function(e,I,B){(function(u,s){(function(){var m=e("assert"),x=e("debug")("stream-parser");I.exports=n;var t=-1,i=0,a=1,r=2;function n(b){var M=b&&typeof b._transform=="function",w=b&&typeof b._write=="function";if(!M&&!w)throw new Error("must pass a Writable or Transform stream in");x("extending Parser into stream"),b._bytes=l,b._skipBytes=o,M&&(b._passthrough=c),M?b._transform=d:b._write=v}function f(b){x("initializing parser stream"),b._parserBytesLeft=0,b._parserBuffers=[],b._parserBuffered=0,b._parserState=t,b._parserCallback=null,typeof b.push=="function"&&(b._parserOutput=b.push.bind(b)),b._parserInit=!0}function l(b,M){m(!this._parserCallback,'there is already a "callback" set!'),m(isFinite(b)&&b>0,'can only buffer a finite number of bytes > 0, got "'+b+'"'),this._parserInit||f(this),x("buffering %o bytes",b),this._parserBytesLeft=b,this._parserCallback=M,this._parserState=i}function o(b,M){m(!this._parserCallback,'there is already a "callback" set!'),m(b>0,'can only skip > 0 bytes, got "'+b+'"'),this._parserInit||f(this),x("skipping %o bytes",b),this._parserBytesLeft=b,this._parserCallback=M,this._parserState=a}function c(b,M){m(!this._parserCallback,'There is already a "callback" set!'),m(b>0,'can only pass through > 0 bytes, got "'+b+'"'),this._parserInit||f(this),x("passing through %o bytes",b),this._parserBytesLeft=b,this._parserCallback=M,this._parserState=r}function v(b,M,w){this._parserInit||f(this),x("write(%o bytes)",b.length),typeof M=="function"&&(w=M),g(this,b,null,w)}function d(b,M,w){this._parserInit||f(this),x("transform(%o bytes)",b.length),typeof M!="function"&&(M=this._parserOutput),g(this,b,M,w)}function p(b,M,w,T){return b._parserBytesLeft<=0?T(new Error("got data but not currently parsing anything")):M.length<=b._parserBytesLeft?function(){return y(b,M,w,T)}:function(){var _=M.slice(0,b._parserBytesLeft);return y(b,_,w,function(h){if(h)return T(h);if(M.length>_.length)return function(){return p(b,M.slice(_.length),w,T)}})}}function y(b,M,w,T){if(b._parserBytesLeft-=M.length,x("%o bytes left for stream piece",b._parserBytesLeft),b._parserState===i?(b._parserBuffers.push(M),b._parserBuffered+=M.length):b._parserState===r&&w(M),b._parserBytesLeft===0){var _=b._parserCallback;if(_&&b._parserState===i&&b._parserBuffers.length>1&&(M=s.concat(b._parserBuffers,b._parserBuffered)),b._parserState!==i&&(M=null),b._parserCallback=null,b._parserBuffered=0,b._parserState=t,b._parserBuffers.splice(0),_){var h=[];M&&h.push(M),w&&h.push(w);var L=_.length>h.length;L&&h.push(A(T));var S=_.apply(b,h);if(!L||T===S)return T}}else return T}var g=A(p);function A(b){return function(){for(var M=b.apply(this,arguments);typeof M=="function";)M=M();return M}}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(e,I,B){(function(u){(function(){B=I.exports=e("./debug"),B.log=x,B.formatArgs=m,B.save=t,B.load=i,B.useColors=s,B.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:a(),B.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function s(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}B.formatters.j=function(r){try{return JSON.stringify(r)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}};function m(r){var n=this.useColors;if(r[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+r[0]+(n?"%c ":" ")+"+"+B.humanize(this.diff),!!n){var f="color: "+this.color;r.splice(1,0,f,"color: inherit");var l=0,o=0;r[0].replace(/%[a-zA-Z%]/g,function(c){c!=="%%"&&(l++,c==="%c"&&(o=l))}),r.splice(o,0,f)}}function x(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function t(r){try{r==null?B.storage.removeItem("debug"):B.storage.debug=r}catch{}}function i(){var r;try{r=B.storage.debug}catch{}return!r&&typeof u!="undefined"&&"env"in u&&(r={}.DEBUG),r}B.enable(i());function a(){try{return window.localStorage}catch{}}}).call(this)}).call(this,e("_process"))},{"./debug":303,_process:277}],303:[function(e,I,B){B=I.exports=m.debug=m.default=m,B.coerce=a,B.disable=t,B.enable=x,B.enabled=i,B.humanize=e("ms"),B.names=[],B.skips=[],B.formatters={};var u;function s(r){var n=0,f;for(f in r)n=(n<<5)-n+r.charCodeAt(f),n|=0;return B.colors[Math.abs(n)%B.colors.length]}function m(r){function n(){if(!!n.enabled){var f=n,l=+new Date,o=l-(u||l);f.diff=o,f.prev=u,f.curr=l,u=l;for(var c=new Array(arguments.length),v=0;v<c.length;v++)c[v]=arguments[v];c[0]=B.coerce(c[0]),typeof c[0]!="string"&&c.unshift("%O");var d=0;c[0]=c[0].replace(/%([a-zA-Z%])/g,function(y,g){if(y==="%%")return y;d++;var A=B.formatters[g];if(typeof A=="function"){var b=c[d];y=A.call(f,b),c.splice(d,1),d--}return y}),B.formatArgs.call(f,c);var p=n.log||B.log||console.log.bind(console);p.apply(f,c)}}return n.namespace=r,n.enabled=B.enabled(r),n.useColors=B.useColors(),n.color=s(r),typeof B.init=="function"&&B.init(n),n}function x(r){B.save(r),B.names=[],B.skips=[];for(var n=(typeof r=="string"?r:"").split(/[\s,]+/),f=n.length,l=0;l<f;l++)!n[l]||(r=n[l].replace(/\*/g,".*?"),r[0]==="-"?B.skips.push(new RegExp("^"+r.substr(1)+"$")):B.names.push(new RegExp("^"+r+"$")))}function t(){B.enable("")}function i(r){var n,f;for(n=0,f=B.skips.length;n<f;n++)if(B.skips[n].test(r))return!1;for(n=0,f=B.names.length;n<f;n++)if(B.names[n].test(r))return!0;return!1}function a(r){return r instanceof Error?r.stack||r.message:r}},{ms:304}],304:[function(e,I,B){var u=1e3,s=u*60,m=s*60,x=m*24,t=x*365.25;I.exports=function(f,l){l=l||{};var o=typeof f;if(o==="string"&&f.length>0)return i(f);if(o==="number"&&isNaN(f)===!1)return l.long?r(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function i(f){if(f=String(f),!(f.length>100)){var l=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(f);if(!!l){var o=parseFloat(l[1]),c=(l[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return o*t;case"days":case"day":case"d":return o*x;case"hours":case"hour":case"hrs":case"hr":case"h":return o*m;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function a(f){return f>=x?Math.round(f/x)+"d":f>=m?Math.round(f/m)+"h":f>=s?Math.round(f/s)+"m":f>=u?Math.round(f/u)+"s":f+"ms"}function r(f){return n(f,x,"day")||n(f,m,"hour")||n(f,s,"minute")||n(f,u,"second")||f+" ms"}function n(f,l,o){if(!(f<l))return f<l*1.5?Math.floor(f/l)+" "+o:Math.ceil(f/l)+" "+o+"s"}},{}],305:[function(e,I,B){var u=e("parenthesis");I.exports=function(m,x,t){if(m==null)throw Error("First argument should be a string");if(x==null)throw Error("Separator should be a string or a RegExp");t?(typeof t=="string"||Array.isArray(t))&&(t={ignore:t}):t={},t.escape==null&&(t.escape=!0),t.ignore==null?t.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof t.ignore=="string"&&(t.ignore=[t.ignore]),t.ignore=t.ignore.map(function(c){return c.length===1&&(c=c+c),c}));var i=u.parse(m,{flat:!0,brackets:t.ignore}),a=i[0],r=a.split(x);if(t.escape){for(var n=[],f=0;f<r.length;f++){var l=r[f],o=r[f+1];l[l.length-1]==="\\"&&l[l.length-2]!=="\\"?(n.push(l+x+o),f++):n.push(l)}r=n}for(var f=0;f<r.length;f++)i[0]=r[f],r[f]=u.stringify(i,{flat:!0});return r}},{parenthesis:248}],306:[function(e,I,B){I.exports=u;function u(s){for(var m=s.length,x=new Array(m),t=new Array(m),i=new Array(m),a=new Array(m),r=new Array(m),n=new Array(m),f=0;f<m;++f)x[f]=-1,t[f]=0,i[f]=!1,a[f]=0,r[f]=-1,n[f]=[];var l=0,o=[],c=[];function v(g){var A=[g],b=[g];for(x[g]=t[g]=l,i[g]=!0,l+=1;b.length>0;){g=b[b.length-1];var M=s[g];if(a[g]<M.length){for(var w=a[g];w<M.length;++w){var T=M[w];if(x[T]<0){x[T]=t[T]=l,i[T]=!0,l+=1,A.push(T),b.push(T);break}else i[T]&&(t[g]=Math.min(t[g],t[T])|0);r[T]>=0&&n[g].push(r[T])}a[g]=w}else{if(t[g]===x[g]){for(var _=[],h=[],L=0,w=A.length-1;w>=0;--w){var S=A[w];if(i[S]=!1,_.push(S),h.push(n[S]),L+=n[S].length,r[S]=o.length,S===g){A.length=w;break}}o.push(_);for(var k=new Array(L),w=0;w<h.length;w++)for(var P=0;P<h[w].length;P++)k[--L]=h[w][P];c.push(k)}b.pop()}}}for(var f=0;f<m;++f)x[f]<0&&v(f);for(var d,f=0;f<c.length;f++){var p=c[f];if(p.length!==0){p.sort(function(A,b){return A-b}),d=[p[0]];for(var y=1;y<p.length;y++)p[y]!==p[y-1]&&d.push(p[y]);c[f]=d}}return{components:o,adjacencyList:c}}},{}],307:[function(e,I,B){Object.defineProperty(B,"__esModule",{value:!0});var u=function(){function r(n,f){var l=[],o=!0,c=!1,v=void 0;try{for(var d=n[Symbol.iterator](),p;!(o=(p=d.next()).done)&&(l.push(p.value),!(f&&l.length===f));o=!0);}catch(y){c=!0,v=y}finally{try{!o&&d.return&&d.return()}finally{if(c)throw v}}return l}return function(n,f){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return r(n,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Math.PI*2,m=function(n,f,l,o,c,v,d){var p=n.x,y=n.y;p*=f,y*=l;var g=o*p-c*y,A=c*p+o*y;return{x:g+v,y:A+d}},x=function(n,f){var l=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:4/3*Math.tan(f/4),o=Math.cos(n),c=Math.sin(n),v=Math.cos(n+f),d=Math.sin(n+f);return[{x:o-c*l,y:c+o*l},{x:v+d*l,y:d-v*l},{x:v,y:d}]},t=function(n,f,l,o){var c=n*o-f*l<0?-1:1,v=n*l+f*o;return v>1&&(v=1),v<-1&&(v=-1),c*Math.acos(v)},i=function(n,f,l,o,c,v,d,p,y,g,A,b){var M=Math.pow(c,2),w=Math.pow(v,2),T=Math.pow(A,2),_=Math.pow(b,2),h=M*w-M*_-w*T;h<0&&(h=0),h/=M*_+w*T,h=Math.sqrt(h)*(d===p?-1:1);var L=h*c/v*b,S=h*-v/c*A,k=g*L-y*S+(n+l)/2,P=y*L+g*S+(f+o)/2,O=(A-L)/c,F=(b-S)/v,D=(-A-L)/c,R=(-b-S)/v,U=t(1,0,O,F),N=t(O,F,D,R);return p===0&&N>0&&(N-=s),p===1&&N<0&&(N+=s),[k,P,U,N]},a=function(n){var f=n.px,l=n.py,o=n.cx,c=n.cy,v=n.rx,d=n.ry,p=n.xAxisRotation,y=p===void 0?0:p,g=n.largeArcFlag,A=g===void 0?0:g,b=n.sweepFlag,M=b===void 0?0:b,w=[];if(v===0||d===0)return[];var T=Math.sin(y*s/360),_=Math.cos(y*s/360),h=_*(f-o)/2+T*(l-c)/2,L=-T*(f-o)/2+_*(l-c)/2;if(h===0&&L===0)return[];v=Math.abs(v),d=Math.abs(d);var S=Math.pow(h,2)/Math.pow(v,2)+Math.pow(L,2)/Math.pow(d,2);S>1&&(v*=Math.sqrt(S),d*=Math.sqrt(S));var k=i(f,l,o,c,v,d,A,M,T,_,h,L),P=u(k,4),O=P[0],F=P[1],D=P[2],R=P[3],U=Math.abs(R)/(s/4);Math.abs(1-U)<1e-7&&(U=1);var N=Math.max(Math.ceil(U),1);R/=N;for(var X=0;X<N;X++)w.push(x(D,R)),D+=R;return w.map(function(j){var ee=m(j[0],v,d,_,T,O,F),q=ee.x,G=ee.y,J=m(j[1],v,d,_,T,O,F),le=J.x,fe=J.y,se=m(j[2],v,d,_,T,O,F),V=se.x,Y=se.y;return{x1:q,y1:G,x2:le,y2:fe,x:V,y:Y}})};B.default=a,I.exports=B.default},{}],308:[function(e,I,B){var u=e("parse-svg-path"),s=e("abs-svg-path"),m=e("normalize-svg-path"),x=e("is-svg-path"),t=e("assert");I.exports=i;function i(a){if(Array.isArray(a)&&a.length===1&&typeof a[0]=="string"&&(a=a[0]),typeof a=="string"&&(t(x(a),"String is not an SVG path."),a=u(a)),t(Array.isArray(a),"Argument should be a string or an array of path segments."),a=s(a),a=m(a),!a.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],n=0,f=a.length;n<f;n++)for(var l=a[n].slice(1),o=0;o<l.length;o+=2)l[o+0]<r[0]&&(r[0]=l[o+0]),l[o+1]<r[1]&&(r[1]=l[o+1]),l[o+0]>r[2]&&(r[2]=l[o+0]),l[o+1]>r[3]&&(r[3]=l[o+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(e,I,B){I.exports=s;var u=e("svg-arc-to-cubic-bezier");function s(t){for(var i,a=[],r=0,n=0,f=0,l=0,o=null,c=null,v=0,d=0,p=0,y=t.length;p<y;p++){var g=t[p],A=g[0];switch(A){case"M":f=g[1],l=g[2];break;case"A":var b=u({px:v,py:d,cx:g[6],cy:g[7],rx:g[1],ry:g[2],xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5]});if(!b.length)continue;for(var M=0,w;M<b.length;M++)w=b[M],g=["C",w.x1,w.y1,w.x2,w.y2,w.x,w.y],M<b.length-1&&a.push(g);break;case"S":var T=v,_=d;(i=="C"||i=="S")&&(T+=T-r,_+=_-n),g=["C",T,_,g[1],g[2],g[3],g[4]];break;case"T":i=="Q"||i=="T"?(o=v*2-o,c=d*2-c):(o=v,c=d),g=x(v,d,o,c,g[1],g[2]);break;case"Q":o=g[1],c=g[2],g=x(v,d,g[1],g[2],g[3],g[4]);break;case"L":g=m(v,d,g[1],g[2]);break;case"H":g=m(v,d,g[1],d);break;case"V":g=m(v,d,v,g[1]);break;case"Z":g=m(v,d,f,l);break}i=A,v=g[g.length-2],d=g[g.length-1],g.length>4?(r=g[g.length-4],n=g[g.length-3]):(r=v,n=d),a.push(g)}return a}function m(t,i,a,r){return["C",t,i,a,r,a,r]}function x(t,i,a,r,n,f){return["C",t/3+2/3*a,i/3+2/3*r,n/3+2/3*a,f/3+2/3*r,n,f]}},{"svg-arc-to-cubic-bezier":307}],310:[function(e,I,B){var u=e("svg-path-bounds"),s=e("parse-svg-path"),m=e("draw-svg-path"),x=e("is-svg-path"),t=e("bitmap-sdf"),i=document.createElement("canvas"),a=i.getContext("2d");I.exports=r;function r(l,o){if(!x(l))throw Error("Argument should be valid svg path string");o||(o={});var c,v;o.shape?(c=o.shape[0],v=o.shape[1]):(c=i.width=o.w||o.width||200,v=i.height=o.h||o.height||200);var d=Math.min(c,v),p=o.stroke||0,y=o.viewbox||o.viewBox||u(l),g=[c/(y[2]-y[0]),v/(y[3]-y[1])],A=Math.min(g[0]||0,g[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,c,v),a.fillStyle="white",p&&(typeof p!="number"&&(p=1),p>0?a.strokeStyle="white":a.strokeStyle="black",a.lineWidth=Math.abs(p)),a.translate(c*.5,v*.5),a.scale(A,A),f()){var b=new Path2D(l);a.fill(b),p&&a.stroke(b)}else{var M=s(l);m(a,M),a.fill(),p&&a.stroke()}a.setTransform(1,0,0,1,0,0);var w=t(a,{cutoff:o.cutoff!=null?o.cutoff:.5,radius:o.radius!=null?o.radius:d*.5});return w}var n;function f(){if(n!=null)return n;var l=document.createElement("canvas").getContext("2d");if(l.canvas.width=l.canvas.height=1,!window.Path2D)return n=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");l.fillStyle="black",l.fill(o);var c=l.getImageData(0,0,1,1);return n=c&&c.data&&c.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(e,I,B){(function(u,s){(function(){var m=e("process/browser.js").nextTick,x=Function.prototype.apply,t=Array.prototype.slice,i={},a=0;B.setTimeout=function(){return new r(x.call(setTimeout,window,arguments),clearTimeout)},B.setInterval=function(){return new r(x.call(setInterval,window,arguments),clearInterval)},B.clearTimeout=B.clearInterval=function(n){n.close()};function r(n,f){this._id=n,this._clearFn=f}r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},B.enroll=function(n,f){clearTimeout(n._idleTimeoutId),n._idleTimeout=f},B.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},B._unrefActive=B.active=function(n){clearTimeout(n._idleTimeoutId);var f=n._idleTimeout;f>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},f))},B.setImmediate=typeof u=="function"?u:function(n){var f=a++,l=arguments.length<2?!1:t.call(arguments,1);return i[f]=!0,m(function(){i[f]&&(l?n.apply(null,l):n.call(null),B.clearImmediate(f))}),f},B.clearImmediate=typeof s=="function"?s:function(n){delete i[n]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(e,I,B){(function(u){var s=/^\s+/,m=/\s+$/,x=0,t=u.round,i=u.min,a=u.max,r=u.random;function n(K,$){if(K=K||"",$=$||{},K instanceof n)return K;if(!(this instanceof n))return new n(K,$);var ae=f(K);this._originalInput=K,this._r=ae.r,this._g=ae.g,this._b=ae.b,this._a=ae.a,this._roundA=t(100*this._a)/100,this._format=$.format||ae.format,this._gradientType=$.gradientType,this._r<1&&(this._r=t(this._r)),this._g<1&&(this._g=t(this._g)),this._b<1&&(this._b=t(this._b)),this._ok=ae.ok,this._tc_id=x++}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var K=this.toRgb();return(K.r*299+K.g*587+K.b*114)/1e3},getLuminance:function(){var K=this.toRgb(),$,ae,ie,oe,ue,xe;return $=K.r/255,ae=K.g/255,ie=K.b/255,$<=.03928?oe=$/12.92:oe=u.pow(($+.055)/1.055,2.4),ae<=.03928?ue=ae/12.92:ue=u.pow((ae+.055)/1.055,2.4),ie<=.03928?xe=ie/12.92:xe=u.pow((ie+.055)/1.055,2.4),.2126*oe+.7152*ue+.0722*xe},setAlpha:function(K){return this._a=N(K),this._roundA=t(100*this._a)/100,this},toHsv:function(){var K=v(this._r,this._g,this._b);return{h:K.h*360,s:K.s,v:K.v,a:this._a}},toHsvString:function(){var K=v(this._r,this._g,this._b),$=t(K.h*360),ae=t(K.s*100),ie=t(K.v*100);return this._a==1?"hsv("+$+", "+ae+"%, "+ie+"%)":"hsva("+$+", "+ae+"%, "+ie+"%, "+this._roundA+")"},toHsl:function(){var K=o(this._r,this._g,this._b);return{h:K.h*360,s:K.s,l:K.l,a:this._a}},toHslString:function(){var K=o(this._r,this._g,this._b),$=t(K.h*360),ae=t(K.s*100),ie=t(K.l*100);return this._a==1?"hsl("+$+", "+ae+"%, "+ie+"%)":"hsla("+$+", "+ae+"%, "+ie+"%, "+this._roundA+")"},toHex:function(K){return p(this._r,this._g,this._b,K)},toHexString:function(K){return"#"+this.toHex(K)},toHex8:function(K){return y(this._r,this._g,this._b,this._a,K)},toHex8String:function(K){return"#"+this.toHex8(K)},toRgb:function(){return{r:t(this._r),g:t(this._g),b:t(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+t(this._r)+", "+t(this._g)+", "+t(this._b)+")":"rgba("+t(this._r)+", "+t(this._g)+", "+t(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:t(X(this._r,255)*100)+"%",g:t(X(this._g,255)*100)+"%",b:t(X(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+t(X(this._r,255)*100)+"%, "+t(X(this._g,255)*100)+"%, "+t(X(this._b,255)*100)+"%)":"rgba("+t(X(this._r,255)*100)+"%, "+t(X(this._g,255)*100)+"%, "+t(X(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[p(this._r,this._g,this._b,!0)]||!1},toFilter:function(K){var $="#"+g(this._r,this._g,this._b,this._a),ae=$,ie=this._gradientType?"GradientType = 1, ":"";if(K){var oe=n(K);ae="#"+g(oe._r,oe._g,oe._b,oe._a)}return"progid:DXImageTransform.Microsoft.gradient("+ie+"startColorstr="+$+",endColorstr="+ae+")"},toString:function(K){var $=!!K;K=K||this._format;var ae=!1,ie=this._a<1&&this._a>=0,oe=!$&&ie&&(K==="hex"||K==="hex6"||K==="hex3"||K==="hex4"||K==="hex8"||K==="name");return oe?K==="name"&&this._a===0?this.toName():this.toRgbString():(K==="rgb"&&(ae=this.toRgbString()),K==="prgb"&&(ae=this.toPercentageRgbString()),(K==="hex"||K==="hex6")&&(ae=this.toHexString()),K==="hex3"&&(ae=this.toHexString(!0)),K==="hex4"&&(ae=this.toHex8String(!0)),K==="hex8"&&(ae=this.toHex8String()),K==="name"&&(ae=this.toName()),K==="hsl"&&(ae=this.toHslString()),K==="hsv"&&(ae=this.toHsvString()),ae||this.toHexString())},clone:function(){return n(this.toString())},_applyModification:function(K,$){var ae=K.apply(null,[this].concat([].slice.call($)));return this._r=ae._r,this._g=ae._g,this._b=ae._b,this.setAlpha(ae._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(T,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(K,$){return K.apply(null,[this].concat([].slice.call($)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(F,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},n.fromRatio=function(K,$){if(typeof K=="object"){var ae={};for(var ie in K)K.hasOwnProperty(ie)&&(ie==="a"?ae[ie]=K[ie]:ae[ie]=le(K[ie]));K=ae}return n(K,$)};function f(K){var $={r:0,g:0,b:0},ae=1,ie=null,oe=null,ue=null,xe=!1,he=!1;return typeof K=="string"&&(K=ne(K)),typeof K=="object"&&(Y(K.r)&&Y(K.g)&&Y(K.b)?($=l(K.r,K.g,K.b),xe=!0,he=String(K.r).substr(-1)==="%"?"prgb":"rgb"):Y(K.h)&&Y(K.s)&&Y(K.v)?(ie=le(K.s),oe=le(K.v),$=d(K.h,ie,oe),xe=!0,he="hsv"):Y(K.h)&&Y(K.s)&&Y(K.l)&&(ie=le(K.s),ue=le(K.l),$=c(K.h,ie,ue),xe=!0,he="hsl"),K.hasOwnProperty("a")&&(ae=K.a)),ae=N(ae),{ok:xe,format:K.format||he,r:i(255,a($.r,0)),g:i(255,a($.g,0)),b:i(255,a($.b,0)),a:ae}}function l(K,$,ae){return{r:X(K,255)*255,g:X($,255)*255,b:X(ae,255)*255}}function o(K,$,ae){K=X(K,255),$=X($,255),ae=X(ae,255);var ie=a(K,$,ae),oe=i(K,$,ae),ue,xe,he=(ie+oe)/2;if(ie==oe)ue=xe=0;else{var me=ie-oe;switch(xe=he>.5?me/(2-ie-oe):me/(ie+oe),ie){case K:ue=($-ae)/me+($<ae?6:0);break;case $:ue=(ae-K)/me+2;break;case ae:ue=(K-$)/me+4;break}ue/=6}return{h:ue,s:xe,l:he}}function c(K,$,ae){var ie,oe,ue;K=X(K,360),$=X($,100),ae=X(ae,100);function xe(be,Ce,Se){return Se<0&&(Se+=1),Se>1&&(Se-=1),Se<1/6?be+(Ce-be)*6*Se:Se<1/2?Ce:Se<2/3?be+(Ce-be)*(2/3-Se)*6:be}if($===0)ie=oe=ue=ae;else{var he=ae<.5?ae*(1+$):ae+$-ae*$,me=2*ae-he;ie=xe(me,he,K+1/3),oe=xe(me,he,K),ue=xe(me,he,K-1/3)}return{r:ie*255,g:oe*255,b:ue*255}}function v(K,$,ae){K=X(K,255),$=X($,255),ae=X(ae,255);var ie=a(K,$,ae),oe=i(K,$,ae),ue,xe,he=ie,me=ie-oe;if(xe=ie===0?0:me/ie,ie==oe)ue=0;else{switch(ie){case K:ue=($-ae)/me+($<ae?6:0);break;case $:ue=(ae-K)/me+2;break;case ae:ue=(K-$)/me+4;break}ue/=6}return{h:ue,s:xe,v:he}}function d(K,$,ae){K=X(K,360)*6,$=X($,100),ae=X(ae,100);var ie=u.floor(K),oe=K-ie,ue=ae*(1-$),xe=ae*(1-oe*$),he=ae*(1-(1-oe)*$),me=ie%6,be=[ae,xe,ue,ue,he,ae][me],Ce=[he,ae,ae,xe,ue,ue][me],Se=[ue,ue,he,ae,ae,xe][me];return{r:be*255,g:Ce*255,b:Se*255}}function p(K,$,ae,ie){var oe=[J(t(K).toString(16)),J(t($).toString(16)),J(t(ae).toString(16))];return ie&&oe[0].charAt(0)==oe[0].charAt(1)&&oe[1].charAt(0)==oe[1].charAt(1)&&oe[2].charAt(0)==oe[2].charAt(1)?oe[0].charAt(0)+oe[1].charAt(0)+oe[2].charAt(0):oe.join("")}function y(K,$,ae,ie,oe){var ue=[J(t(K).toString(16)),J(t($).toString(16)),J(t(ae).toString(16)),J(fe(ie))];return oe&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("")}function g(K,$,ae,ie){var oe=[J(fe(ie)),J(t(K).toString(16)),J(t($).toString(16)),J(t(ae).toString(16))];return oe.join("")}n.equals=function(K,$){return!K||!$?!1:n(K).toRgbString()==n($).toRgbString()},n.random=function(){return n.fromRatio({r:r(),g:r(),b:r()})};function A(K,$){$=$===0?0:$||10;var ae=n(K).toHsl();return ae.s-=$/100,ae.s=j(ae.s),n(ae)}function b(K,$){$=$===0?0:$||10;var ae=n(K).toHsl();return ae.s+=$/100,ae.s=j(ae.s),n(ae)}function M(K){return n(K).desaturate(100)}function w(K,$){$=$===0?0:$||10;var ae=n(K).toHsl();return ae.l+=$/100,ae.l=j(ae.l),n(ae)}function T(K,$){$=$===0?0:$||10;var ae=n(K).toRgb();return ae.r=a(0,i(255,ae.r-t(255*-($/100)))),ae.g=a(0,i(255,ae.g-t(255*-($/100)))),ae.b=a(0,i(255,ae.b-t(255*-($/100)))),n(ae)}function _(K,$){$=$===0?0:$||10;var ae=n(K).toHsl();return ae.l-=$/100,ae.l=j(ae.l),n(ae)}function h(K,$){var ae=n(K).toHsl(),ie=(ae.h+$)%360;return ae.h=ie<0?360+ie:ie,n(ae)}function L(K){var $=n(K).toHsl();return $.h=($.h+180)%360,n($)}function S(K){var $=n(K).toHsl(),ae=$.h;return[n(K),n({h:(ae+120)%360,s:$.s,l:$.l}),n({h:(ae+240)%360,s:$.s,l:$.l})]}function k(K){var $=n(K).toHsl(),ae=$.h;return[n(K),n({h:(ae+90)%360,s:$.s,l:$.l}),n({h:(ae+180)%360,s:$.s,l:$.l}),n({h:(ae+270)%360,s:$.s,l:$.l})]}function P(K){var $=n(K).toHsl(),ae=$.h;return[n(K),n({h:(ae+72)%360,s:$.s,l:$.l}),n({h:(ae+216)%360,s:$.s,l:$.l})]}function O(K,$,ae){$=$||6,ae=ae||30;var ie=n(K).toHsl(),oe=360/ae,ue=[n(K)];for(ie.h=(ie.h-(oe*$>>1)+720)%360;--$;)ie.h=(ie.h+oe)%360,ue.push(n(ie));return ue}function F(K,$){$=$||6;for(var ae=n(K).toHsv(),ie=ae.h,oe=ae.s,ue=ae.v,xe=[],he=1/$;$--;)xe.push(n({h:ie,s:oe,v:ue})),ue=(ue+he)%1;return xe}n.mix=function(K,$,ae){ae=ae===0?0:ae||50;var ie=n(K).toRgb(),oe=n($).toRgb(),ue=ae/100,xe={r:(oe.r-ie.r)*ue+ie.r,g:(oe.g-ie.g)*ue+ie.g,b:(oe.b-ie.b)*ue+ie.b,a:(oe.a-ie.a)*ue+ie.a};return n(xe)},n.readability=function(K,$){var ae=n(K),ie=n($);return(u.max(ae.getLuminance(),ie.getLuminance())+.05)/(u.min(ae.getLuminance(),ie.getLuminance())+.05)},n.isReadable=function(K,$,ae){var ie=n.readability(K,$),oe,ue;switch(ue=!1,oe=te(ae),oe.level+oe.size){case"AAsmall":case"AAAlarge":ue=ie>=4.5;break;case"AAlarge":ue=ie>=3;break;case"AAAsmall":ue=ie>=7;break}return ue},n.mostReadable=function(K,$,ae){var ie=null,oe=0,ue,xe,he,me;ae=ae||{},xe=ae.includeFallbackColors,he=ae.level,me=ae.size;for(var be=0;be<$.length;be++)ue=n.readability(K,$[be]),ue>oe&&(oe=ue,ie=n($[be]));return n.isReadable(K,ie,{level:he,size:me})||!xe?ie:(ae.includeFallbackColors=!1,n.mostReadable(K,["#fff","#000"],ae))};var D=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=n.hexNames=U(D);function U(K){var $={};for(var ae in K)K.hasOwnProperty(ae)&&($[K[ae]]=ae);return $}function N(K){return K=parseFloat(K),(isNaN(K)||K<0||K>1)&&(K=1),K}function X(K,$){q(K)&&(K="100%");var ae=G(K);return K=i($,a(0,parseFloat(K))),ae&&(K=parseInt(K*$,10)/100),u.abs(K-$)<1e-6?1:K%$/parseFloat($)}function j(K){return i(1,a(0,K))}function ee(K){return parseInt(K,16)}function q(K){return typeof K=="string"&&K.indexOf(".")!=-1&&parseFloat(K)===1}function G(K){return typeof K=="string"&&K.indexOf("%")!=-1}function J(K){return K.length==1?"0"+K:""+K}function le(K){return K<=1&&(K=K*100+"%"),K}function fe(K){return u.round(parseFloat(K)*255).toString(16)}function se(K){return ee(K)/255}var V=function(){var K="[-\\+]?\\d+%?",$="[-\\+]?\\d*\\.\\d+%?",ae="(?:"+$+")|(?:"+K+")",ie="[\\s|\\(]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")\\s*\\)?",oe="[\\s|\\(]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")\\s*\\)?";return{CSS_UNIT:new RegExp(ae),rgb:new RegExp("rgb"+ie),rgba:new RegExp("rgba"+oe),hsl:new RegExp("hsl"+ie),hsla:new RegExp("hsla"+oe),hsv:new RegExp("hsv"+ie),hsva:new RegExp("hsva"+oe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y(K){return!!V.CSS_UNIT.exec(K)}function ne(K){K=K.replace(s,"").replace(m,"").toLowerCase();var $=!1;if(D[K])K=D[K],$=!0;else if(K=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ae;return(ae=V.rgb.exec(K))?{r:ae[1],g:ae[2],b:ae[3]}:(ae=V.rgba.exec(K))?{r:ae[1],g:ae[2],b:ae[3],a:ae[4]}:(ae=V.hsl.exec(K))?{h:ae[1],s:ae[2],l:ae[3]}:(ae=V.hsla.exec(K))?{h:ae[1],s:ae[2],l:ae[3],a:ae[4]}:(ae=V.hsv.exec(K))?{h:ae[1],s:ae[2],v:ae[3]}:(ae=V.hsva.exec(K))?{h:ae[1],s:ae[2],v:ae[3],a:ae[4]}:(ae=V.hex8.exec(K))?{r:ee(ae[1]),g:ee(ae[2]),b:ee(ae[3]),a:se(ae[4]),format:$?"name":"hex8"}:(ae=V.hex6.exec(K))?{r:ee(ae[1]),g:ee(ae[2]),b:ee(ae[3]),format:$?"name":"hex"}:(ae=V.hex4.exec(K))?{r:ee(ae[1]+""+ae[1]),g:ee(ae[2]+""+ae[2]),b:ee(ae[3]+""+ae[3]),a:se(ae[4]+""+ae[4]),format:$?"name":"hex8"}:(ae=V.hex3.exec(K))?{r:ee(ae[1]+""+ae[1]),g:ee(ae[2]+""+ae[2]),b:ee(ae[3]+""+ae[3]),format:$?"name":"hex"}:!1}function te(K){var $,ae;return K=K||{level:"AA",size:"small"},$=(K.level||"AA").toUpperCase(),ae=(K.size||"small").toLowerCase(),$!=="AA"&&$!=="AAA"&&($="AA"),ae!=="small"&&ae!=="large"&&(ae="small"),{level:$,size:ae}}typeof I!="undefined"&&I.exports?I.exports=n:window.tinycolor=n})(Math)},{}],313:[function(e,I,B){I.exports=m,I.exports.float32=I.exports.float=m,I.exports.fract32=I.exports.fract=s;var u=new Float32Array(1);function s(x,t){if(x.length){if(x instanceof Float32Array)return new Float32Array(x.length);t instanceof Float32Array||(t=m(x));for(var i=0,a=t.length;i<a;i++)t[i]=x[i]-t[i];return t}return m(x-m(x))}function m(x){return x.length?x instanceof Float32Array?x:new Float32Array(x):(u[0]=x,u[0])}},{}],314:[function(e,I,B){var u=e("parse-unit");I.exports=t;var s=96;function m(i,a){var r=u(getComputedStyle(i).getPropertyValue(a));return r[0]*t(r[1],i)}function x(i,a){var r=document.createElement("div");r.style["font-size"]="128"+i,a.appendChild(r);var n=m(r,"font-size")/128;return a.removeChild(r),n}function t(i,a){switch(a=a||document.body,i=(i||"px").trim().toLowerCase(),(a===window||a===document)&&(a=document.body),i){case"%":return a.clientHeight/100;case"ch":case"ex":return x(i,a);case"em":return m(a,"font-size");case"rem":return m(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return s;case"cm":return s/2.54;case"mm":return s/25.4;case"pt":return s/72;case"pc":return s/6}return 1}},{"parse-unit":251}],315:[function(e,I,B){(function(u,s){typeof B=="object"&&typeof I!="undefined"?s(B):(u=u||self,s(u.topojson=u.topojson||{}))})(this,function(u){function s(b){return b}function m(b){if(b==null)return s;var M,w,T=b.scale[0],_=b.scale[1],h=b.translate[0],L=b.translate[1];return function(S,k){k||(M=w=0);var P=2,O=S.length,F=new Array(O);for(F[0]=(M+=S[0])*T+h,F[1]=(w+=S[1])*_+L;P<O;)F[P]=S[P],++P;return F}}function x(b){var M=m(b.transform),w,T=1/0,_=T,h=-T,L=-T;function S(P){P=M(P),P[0]<T&&(T=P[0]),P[0]>h&&(h=P[0]),P[1]<_&&(_=P[1]),P[1]>L&&(L=P[1])}function k(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(k);break;case"Point":S(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(S);break}}b.arcs.forEach(function(P){for(var O=-1,F=P.length,D;++O<F;)D=M(P[O],O),D[0]<T&&(T=D[0]),D[0]>h&&(h=D[0]),D[1]<_&&(_=D[1]),D[1]>L&&(L=D[1])});for(w in b.objects)k(b.objects[w]);return[T,_,h,L]}function t(b,M){for(var w,T=b.length,_=T-M;_<--T;)w=b[_],b[_++]=b[T],b[T]=w}function i(b,M){return typeof M=="string"&&(M=b.objects[M]),M.type==="GeometryCollection"?{type:"FeatureCollection",features:M.geometries.map(function(w){return a(b,w)})}:a(b,M)}function a(b,M){var w=M.id,T=M.bbox,_=M.properties==null?{}:M.properties,h=r(b,M);return w==null&&T==null?{type:"Feature",properties:_,geometry:h}:T==null?{type:"Feature",id:w,properties:_,geometry:h}:{type:"Feature",id:w,bbox:T,properties:_,geometry:h}}function r(b,M){var w=m(b.transform),T=b.arcs;function _(O,F){F.length&&F.pop();for(var D=T[O<0?~O:O],R=0,U=D.length;R<U;++R)F.push(w(D[R],R));O<0&&t(F,U)}function h(O){return w(O)}function L(O){for(var F=[],D=0,R=O.length;D<R;++D)_(O[D],F);return F.length<2&&F.push(F[0]),F}function S(O){for(var F=L(O);F.length<4;)F.push(F[0]);return F}function k(O){return O.map(S)}function P(O){var F=O.type,D;switch(F){case"GeometryCollection":return{type:F,geometries:O.geometries.map(P)};case"Point":D=h(O.coordinates);break;case"MultiPoint":D=O.coordinates.map(h);break;case"LineString":D=L(O.arcs);break;case"MultiLineString":D=O.arcs.map(L);break;case"Polygon":D=k(O.arcs);break;case"MultiPolygon":D=O.arcs.map(k);break;default:return null}return{type:F,coordinates:D}}return P(M)}function n(b,M){var w={},T={},_={},h=[],L=-1;M.forEach(function(P,O){var F=b.arcs[P<0?~P:P],D;F.length<3&&!F[1][0]&&!F[1][1]&&(D=M[++L],M[L]=P,M[O]=D)}),M.forEach(function(P){var O=S(P),F=O[0],D=O[1],R,U;if(R=_[F])if(delete _[R.end],R.push(P),R.end=D,U=T[D]){delete T[U.start];var N=U===R?R:R.concat(U);T[N.start=R.start]=_[N.end=U.end]=N}else T[R.start]=_[R.end]=R;else if(R=T[D])if(delete T[R.start],R.unshift(P),R.start=F,U=_[F]){delete _[U.end];var X=U===R?R:U.concat(R);T[X.start=U.start]=_[X.end=R.end]=X}else T[R.start]=_[R.end]=R;else R=[P],T[R.start=F]=_[R.end=D]=R});function S(P){var O=b.arcs[P<0?~P:P],F=O[0],D;return b.transform?(D=[0,0],O.forEach(function(R){D[0]+=R[0],D[1]+=R[1]})):D=O[O.length-1],P<0?[D,F]:[F,D]}function k(P,O){for(var F in P){var D=P[F];delete O[D.start],delete D.start,delete D.end,D.forEach(function(R){w[R<0?~R:R]=1}),h.push(D)}}return k(_,T),k(T,_),M.forEach(function(P){w[P<0?~P:P]||h.push([P])}),h}function f(b){return r(b,l.apply(this,arguments))}function l(b,M,w){var T,_,h;if(arguments.length>1)T=o(b,M,w);else for(_=0,T=new Array(h=b.arcs.length);_<h;++_)T[_]=_;return{type:"MultiLineString",arcs:n(b,T)}}function o(b,M,w){var T=[],_=[],h;function L(F){var D=F<0?~F:F;(_[D]||(_[D]=[])).push({i:F,g:h})}function S(F){F.forEach(L)}function k(F){F.forEach(S)}function P(F){F.forEach(k)}function O(F){switch(h=F,F.type){case"GeometryCollection":F.geometries.forEach(O);break;case"LineString":S(F.arcs);break;case"MultiLineString":case"Polygon":k(F.arcs);break;case"MultiPolygon":P(F.arcs);break}}return O(M),_.forEach(w==null?function(F){T.push(F[0].i)}:function(F){w(F[0].g,F[F.length-1].g)&&T.push(F[0].i)}),T}function c(b){for(var M=-1,w=b.length,T,_=b[w-1],h=0;++M<w;)T=_,_=b[M],h+=T[0]*_[1]-T[1]*_[0];return Math.abs(h)}function v(b){return r(b,d.apply(this,arguments))}function d(b,M){var w={},T=[],_=[];M.forEach(h);function h(k){switch(k.type){case"GeometryCollection":k.geometries.forEach(h);break;case"Polygon":L(k.arcs);break;case"MultiPolygon":k.arcs.forEach(L);break}}function L(k){k.forEach(function(P){P.forEach(function(O){(w[O=O<0?~O:O]||(w[O]=[])).push(k)})}),T.push(k)}function S(k){return c(r(b,{type:"Polygon",arcs:[k]}).coordinates[0])}return T.forEach(function(k){if(!k._){var P=[],O=[k];for(k._=1,_.push(P);k=O.pop();)P.push(k),k.forEach(function(F){F.forEach(function(D){w[D<0?~D:D].forEach(function(R){R._||(R._=1,O.push(R))})})})}}),T.forEach(function(k){delete k._}),{type:"MultiPolygon",arcs:_.map(function(k){var P=[],O;if(k.forEach(function(N){N.forEach(function(X){X.forEach(function(j){w[j<0?~j:j].length<2&&P.push(j)})})}),P=n(b,P),(O=P.length)>1)for(var F=1,D=S(P[0]),R,U;F<O;++F)(R=S(P[F]))>D&&(U=P[0],P[0]=P[F],P[F]=U,D=R);return P}).filter(function(k){return k.length>0})}}function p(b,M){for(var w=0,T=b.length;w<T;){var _=w+T>>>1;b[_]<M?w=_+1:T=_}return w}function y(b){var M={},w=b.map(function(){return[]});function T(N,X){N.forEach(function(j){j<0&&(j=~j);var ee=M[j];ee?ee.push(X):M[j]=[X]})}function _(N,X){N.forEach(function(j){T(j,X)})}function h(N,X){N.type==="GeometryCollection"?N.geometries.forEach(function(j){h(j,X)}):N.type in L&&L[N.type](N.arcs,X)}var L={LineString:T,MultiLineString:_,Polygon:_,MultiPolygon:function(N,X){N.forEach(function(j){_(j,X)})}};b.forEach(h);for(var S in M)for(var k=M[S],P=k.length,O=0;O<P;++O)for(var F=O+1;F<P;++F){var D=k[O],R=k[F],U;(U=w[D])[S=p(U,R)]!==R&&U.splice(S,0,R),(U=w[R])[S=p(U,D)]!==D&&U.splice(S,0,D)}return w}function g(b){if(b==null)return s;var M,w,T=b.scale[0],_=b.scale[1],h=b.translate[0],L=b.translate[1];return function(S,k){k||(M=w=0);var P=2,O=S.length,F=new Array(O),D=Math.round((S[0]-h)/T),R=Math.round((S[1]-L)/_);for(F[0]=D-M,M=D,F[1]=R-w,w=R;P<O;)F[P]=S[P],++P;return F}}function A(b,M){if(b.transform)throw new Error("already quantized");if(!M||!M.scale){if(!((L=Math.floor(M))>=2))throw new Error("n must be \u22652");k=b.bbox||x(b);var w=k[0],T=k[1],_=k[2],h=k[3],L;M={scale:[_-w?(_-w)/(L-1):1,h-T?(h-T)/(L-1):1],translate:[w,T]}}else k=b.bbox;var S=g(M),k,P,O=b.objects,F={};function D(N){return S(N)}function R(N){var X;switch(N.type){case"GeometryCollection":X={type:"GeometryCollection",geometries:N.geometries.map(R)};break;case"Point":X={type:"Point",coordinates:D(N.coordinates)};break;case"MultiPoint":X={type:"MultiPoint",coordinates:N.coordinates.map(D)};break;default:return N}return N.id!=null&&(X.id=N.id),N.bbox!=null&&(X.bbox=N.bbox),N.properties!=null&&(X.properties=N.properties),X}function U(N){var X=0,j=1,ee=N.length,q,G=new Array(ee);for(G[0]=S(N[0],0);++X<ee;)((q=S(N[X],X))[0]||q[1])&&(G[j++]=q);return j===1&&(G[j++]=[0,0]),G.length=j,G}for(P in O)F[P]=R(O[P]);return{type:"Topology",bbox:k,transform:M,objects:F,arcs:b.arcs.map(U)}}u.bbox=x,u.feature=i,u.merge=v,u.mergeArcs=d,u.mesh=f,u.meshArcs=l,u.neighbors=y,u.quantize=A,u.transform=m,u.untransform=g,Object.defineProperty(u,"__esModule",{value:!0})})},{}],316:[function(e,I,B){var u=e("../prototype/is");I.exports=function(s){if(typeof s!="function"||!hasOwnProperty.call(s,"length"))return!1;try{if(typeof s.length!="number"||typeof s.call!="function"||typeof s.apply!="function")return!1}catch{return!1}return!u(s)}},{"../prototype/is":323}],317:[function(e,I,B){var u=e("../value/is"),s=e("../object/is"),m=e("../string/coerce"),x=e("./to-short-string"),t=function(i,a){return i.replace("%v",x(a))};I.exports=function(i,a,r){if(!s(r))throw new TypeError(t(a,i));if(!u(i)){if("default"in r)return r.default;if(r.isOptional)return null}var n=m(r.errorMessage);throw u(n)||(n=a),new TypeError(t(n,i))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(e,I,B){I.exports=function(u){try{return u.toString()}catch{try{return String(u)}catch{return null}}}},{}],319:[function(e,I,B){var u=e("./safe-to-string"),s=/[\n\r\u2028\u2029]/g;I.exports=function(m){var x=u(m);return x===null?"<Non-coercible to string value>":(x.length>100&&(x=x.slice(0,99)+"\u2026"),x=x.replace(s,function(t){switch(t){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),x)}},{"./safe-to-string":318}],320:[function(e,I,B){var u=e("../value/is"),s={object:!0,function:!0,undefined:!0};I.exports=function(m){return u(m)?hasOwnProperty.call(s,typeof m):!1}},{"../value/is":326}],321:[function(e,I,B){var u=e("../lib/resolve-exception"),s=e("./is");I.exports=function(m){return s(m)?m:u(m,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(e,I,B){var u=e("../function/is"),s=/^\s*class[\s{/}]/,m=Function.prototype.toString;I.exports=function(x){return!(!u(x)||s.test(m.call(x)))}},{"../function/is":316}],323:[function(e,I,B){var u=e("../object/is");I.exports=function(s){if(!u(s))return!1;try{return s.constructor?s.constructor.prototype===s:!1}catch{return!1}}},{"../object/is":320}],324:[function(e,I,B){var u=e("../value/is"),s=e("../object/is"),m=Object.prototype.toString;I.exports=function(x){if(!u(x))return null;if(s(x)){var t=x.toString;if(typeof t!="function"||t===m)return null}try{return""+x}catch{return null}}},{"../object/is":320,"../value/is":326}],325:[function(e,I,B){var u=e("../lib/resolve-exception"),s=e("./is");I.exports=function(m){return s(m)?m:u(m,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(e,I,B){var u=void 0;I.exports=function(s){return s!==u&&s!==null}},{}],327:[function(e,I,B){(function(u){(function(){var s=e("bit-twiddle"),m=e("dup"),x=e("buffer").Buffer;u.__TYPEDARRAY_POOL||(u.__TYPEDARRAY_POOL={UINT8:m([32,0]),UINT16:m([32,0]),UINT32:m([32,0]),BIGUINT64:m([32,0]),INT8:m([32,0]),INT16:m([32,0]),INT32:m([32,0]),BIGINT64:m([32,0]),FLOAT:m([32,0]),DOUBLE:m([32,0]),DATA:m([32,0]),UINT8C:m([32,0]),BUFFER:m([32,0])});var t=typeof Uint8ClampedArray!="undefined",i=typeof BigUint64Array!="undefined",a=typeof BigInt64Array!="undefined",r=u.__TYPEDARRAY_POOL;r.UINT8C||(r.UINT8C=m([32,0])),r.BIGUINT64||(r.BIGUINT64=m([32,0])),r.BIGINT64||(r.BIGINT64=m([32,0])),r.BUFFER||(r.BUFFER=m([32,0]));var n=r.DATA,f=r.BUFFER;B.free=function(k){if(x.isBuffer(k))f[s.log2(k.length)].push(k);else{if(Object.prototype.toString.call(k)!=="[object ArrayBuffer]"&&(k=k.buffer),!k)return;var P=k.length||k.byteLength,O=s.log2(P)|0;n[O].push(k)}};function l(S){if(!!S){var k=S.length||S.byteLength,P=s.log2(k);n[P].push(S)}}function o(S){l(S.buffer)}B.freeUint8=B.freeUint16=B.freeUint32=B.freeBigUint64=B.freeInt8=B.freeInt16=B.freeInt32=B.freeBigInt64=B.freeFloat32=B.freeFloat=B.freeFloat64=B.freeDouble=B.freeUint8Clamped=B.freeDataView=o,B.freeArrayBuffer=l,B.freeBuffer=function(k){f[s.log2(k.length)].push(k)},B.malloc=function(k,P){if(P===void 0||P==="arraybuffer")return c(k);switch(P){case"uint8":return v(k);case"uint16":return d(k);case"uint32":return p(k);case"int8":return y(k);case"int16":return g(k);case"int32":return A(k);case"float":case"float32":return b(k);case"double":case"float64":return M(k);case"uint8_clamped":return w(k);case"bigint64":return _(k);case"biguint64":return T(k);case"buffer":return L(k);case"data":case"dataview":return h(k);default:return null}return null};function c(S){var S=s.nextPow2(S),k=s.log2(S),P=n[k];return P.length>0?P.pop():new ArrayBuffer(S)}B.mallocArrayBuffer=c;function v(S){return new Uint8Array(c(S),0,S)}B.mallocUint8=v;function d(S){return new Uint16Array(c(2*S),0,S)}B.mallocUint16=d;function p(S){return new Uint32Array(c(4*S),0,S)}B.mallocUint32=p;function y(S){return new Int8Array(c(S),0,S)}B.mallocInt8=y;function g(S){return new Int16Array(c(2*S),0,S)}B.mallocInt16=g;function A(S){return new Int32Array(c(4*S),0,S)}B.mallocInt32=A;function b(S){return new Float32Array(c(4*S),0,S)}B.mallocFloat32=B.mallocFloat=b;function M(S){return new Float64Array(c(8*S),0,S)}B.mallocFloat64=B.mallocDouble=M;function w(S){return t?new Uint8ClampedArray(c(S),0,S):v(S)}B.mallocUint8Clamped=w;function T(S){return i?new BigUint64Array(c(8*S),0,S):null}B.mallocBigUint64=T;function _(S){return a?new BigInt64Array(c(8*S),0,S):null}B.mallocBigInt64=_;function h(S){return new DataView(c(S),0,S)}B.mallocDataView=h;function L(S){S=s.nextPow2(S);var k=s.log2(S),P=f[k];return P.length>0?P.pop():new x(S)}B.mallocBuffer=L,B.clearCache=function(){for(var k=0;k<32;++k)r.UINT8[k].length=0,r.UINT16[k].length=0,r.UINT32[k].length=0,r.INT8[k].length=0,r.INT16[k].length=0,r.INT32[k].length=0,r.FLOAT[k].length=0,r.DOUBLE[k].length=0,r.BIGUINT64[k].length=0,r.BIGINT64[k].length=0,r.UINT8C[k].length=0,n[k].length=0,f[k].length=0}}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(e,I,B){var u=/[\'\"]/;I.exports=function(m){return m?(u.test(m.charAt(0))&&(m=m.substr(1)),u.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1)),m):""}},{}],329:[function(e,I,B){I.exports=function(s,m,x){Array.isArray(x)||(x=[].slice.call(arguments,2));for(var t=0,i=x.length;t<i;t++){var a=x[t];for(var r in a)if(!(m[r]!==void 0&&!Array.isArray(m[r])&&s[r]===m[r])&&r in m){var n;if(a[r]===!0)n=m[r];else{if(a[r]===!1)continue;if(typeof a[r]=="function"&&(n=a[r](m[r],s,m),n===void 0))continue}s[r]=n}}return s}},{}],330:[function(e,I,B){(function(u){(function(){I.exports=s;function s(x,t){if(m("noDeprecation"))return x;var i=!1;function a(){if(!i){if(m("throwDeprecation"))throw new Error(t);m("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return x.apply(this,arguments)}return a}function m(x){try{if(!u.localStorage)return!1}catch{return!1}var t=u.localStorage[x];return t==null?!1:String(t).toLowerCase()==="true"}}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],331:[function(e,I,B){var u=e("get-canvas-context");I.exports=function(m){return u("webgl",m)}},{"get-canvas-context":194}],332:[function(e,I,B){var u=e("../main"),s=e("object-assign"),m=u.instance();function x(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}x.prototype=new u.baseCalendar,s(x.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(c,v){if(typeof c=="string"){var d=c.match(i);return d?d[0]:""}var p=this._validateYear(c),y=c.month(),g=""+this.toChineseMonth(p,y);return v&&g.length<2&&(g="0"+g),this.isIntercalaryMonth(p,y)&&(g+="i"),g},monthNames:function(c){if(typeof c=="string"){var v=c.match(a);return v?v[0]:""}var d=this._validateYear(c),p=c.month(),y=this.toChineseMonth(d,p),g=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][y-1];return this.isIntercalaryMonth(d,p)&&(g="\u95F0"+g),g},monthNamesShort:function(c){if(typeof c=="string"){var v=c.match(r);return v?v[0]:""}var d=this._validateYear(c),p=c.month(),y=this.toChineseMonth(d,p),g=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][y-1];return this.isIntercalaryMonth(d,p)&&(g="\u95F0"+g),g},parseMonth:function(c,v){c=this._validateYear(c);var d=parseInt(v),p;if(isNaN(d))v[0]==="\u95F0"&&(p=!0,v=v.substring(1)),v[v.length-1]==="\u6708"&&(v=v.substring(0,v.length-1)),d=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(v);else{var y=v[v.length-1];p=y==="i"||y==="I"}var g=this.toMonthIndex(c,d,p);return g},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,v){if(c.year&&(c=c.year()),typeof c!="number"||c<1888||c>2111)throw v.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,v,d){var p=this.intercalaryMonth(c),y=d&&v!==p;if(y||v<1||v>12)throw u.local.invalidMonth.replace(/\{0\}/,this.local.name);var g;return p?!d&&v<=p?g=v-1:g=v:g=v-1,g},toChineseMonth:function(c,v){c.year&&(c=c.year(),v=c.month());var d=this.intercalaryMonth(c),p=d?12:11;if(v<0||v>p)throw u.local.invalidMonth.replace(/\{0\}/,this.local.name);var y;return d?v<d?y=v+1:y=v:y=v+1,y},intercalaryMonth:function(c){c=this._validateYear(c);var v=n[c-n[0]],d=v>>13;return d},isIntercalaryMonth:function(c,v){c.year&&(c=c.year(),v=c.month());var d=this.intercalaryMonth(c);return!!d&&d===v},leapYear:function(c){return this.intercalaryMonth(c)!==0},weekOfYear:function(c,v,d){var p=this._validateYear(c,u.local.invalidyear),y=f[p-f[0]],g=y>>9&4095,A=y>>5&15,b=y&31,M;M=m.newDate(g,A,b),M.add(4-(M.dayOfWeek()||7),"d");var w=this.toJD(c,v,d)-M.toJD();return 1+Math.floor(w/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,v){c.year&&(v=c.month(),c=c.year()),c=this._validateYear(c);var d=n[c-n[0]],p=d>>13,y=p?12:11;if(v>y)throw u.local.invalidMonth.replace(/\{0\}/,this.local.name);var g=d&1<<12-v?30:29;return g},weekDay:function(c,v,d){return(this.dayOfWeek(c,v,d)||7)<6},toJD:function(c,v,d){var p=this._validate(c,g,d,u.local.invalidDate);c=this._validateYear(p.year()),v=p.month(),d=p.day();var y=this.isIntercalaryMonth(c,v),g=this.toChineseMonth(c,v),A=o(c,g,d,y);return m.toJD(A.year,A.month,A.day)},fromJD:function(c){var v=m.fromJD(c),d=l(v.year(),v.month(),v.day()),p=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,p,d.day)},fromString:function(c){var v=c.match(t),d=this._validateYear(+v[1]),p=+v[2],y=!!v[3],g=this.toMonthIndex(d,p,y),A=+v[4];return this.newDate(d,g,A)},add:function(c,v,d){var p=c.year(),y=c.month(),g=this.isIntercalaryMonth(p,y),A=this.toChineseMonth(p,y),b=Object.getPrototypeOf(x.prototype).add.call(this,c,v,d);if(d==="y"){var M=b.year(),w=b.month(),T=this.isIntercalaryMonth(M,A),_=g&&T?this.toMonthIndex(M,A,!0):this.toMonthIndex(M,A,!1);_!==w&&b.month(_)}return b}});var t=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,i=/^\d?\d[iI]?/m,a=/^??[]?/m,r=/^??[]?/m;u.calendars.chinese=x;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function l(c,v,d,p){var y,g;if(typeof c=="object")y=c,g=v||{};else{var A=typeof c=="number"&&c>=1888&&c<=2111;if(!A)throw new Error("Solar year outside range 1888-2111");var b=typeof v=="number"&&v>=1&&v<=12;if(!b)throw new Error("Solar month outside range 1 - 12");var M=typeof d=="number"&&d>=1&&d<=31;if(!M)throw new Error("Solar day outside range 1 - 31");y={year:c,month:v,day:d},g=p||{}}var w=f[y.year-f[0]],T=y.year<<9|y.month<<5|y.day;g.year=T>=w?y.year:y.year-1,w=f[g.year-f[0]];var _=w>>9&4095,h=w>>5&15,L=w&31,S,k=new Date(_,h-1,L),P=new Date(y.year,y.month-1,y.day);S=Math.round((P-k)/(24*3600*1e3));var O=n[g.year-n[0]],F;for(F=0;F<13;F++){var D=O&1<<12-F?30:29;if(S<D)break;S-=D}var R=O>>13;return!R||F<R?(g.isIntercalary=!1,g.month=1+F):F===R?(g.isIntercalary=!0,g.month=F):(g.isIntercalary=!1,g.month=F),g.day=1+S,g}function o(c,v,d,p,y){var g,A;if(typeof c=="object")A=c,g=v||{};else{var b=typeof c=="number"&&c>=1888&&c<=2111;if(!b)throw new Error("Lunar year outside range 1888-2111");var M=typeof v=="number"&&v>=1&&v<=12;if(!M)throw new Error("Lunar month outside range 1 - 12");var w=typeof d=="number"&&d>=1&&d<=30;if(!w)throw new Error("Lunar day outside range 1 - 30");var T;typeof p=="object"?(T=!1,g=p):(T=!!p,g=y||{}),A={year:c,month:v,day:d,isIntercalary:T}}var _;_=A.day-1;var h=n[A.year-n[0]],L=h>>13,S;L&&(A.month>L||A.isIntercalary)?S=A.month:S=A.month-1;for(var k=0;k<S;k++){var P=h&1<<12-k?30:29;_+=P}var O=f[A.year-f[0]],F=O>>9&4095,D=O>>5&15,R=O&31,U=new Date(F,D-1,R+_);return g.year=U.getFullYear(),g.month=1+U.getMonth(),g.day=U.getDate(),g}},{"../main":346,"object-assign":247}],333:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear),x=t.year()+(t.year()<0?1:0);return x%4==3||x%4==-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear),13},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(x,t){var i=this._validate(x,t,this.minDay,u.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===13&&this.leapYear(i.year())?1:0)},weekDay:function(x,t,i){return(this.dayOfWeek(x,t,i)||7)<6},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);return x=a.year(),x<0&&x++,a.day()+(a.month()-1)*30+(x-1)*365+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var t=Math.floor(x)+.5-this.jdEpoch,i=Math.floor((t-Math.floor((t+366)/1461))/365)+1;i<=0&&i--,t=Math.floor(x)+.5-this.newDate(i,1,1).toJD();var a=Math.floor(t/30)+1,r=t-(a-1)*30+1;return this.newDate(i,a,r)}}),u.calendars.coptic=m},{"../main":346,"object-assign":247}],334:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(t){return this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),!1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),13},daysInYear:function(t){return this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),400},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);return(r.day()+1)%8},weekDay:function(t,i,a){var r=this.dayOfWeek(t,i,a);return r>=2&&r<=6},extraInfo:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);return{century:x[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);return t=r.year()+(r.year()<0?1:0),i=r.month(),a=r.day(),a+(i>1?16:0)+(i>2?(i-2)*32:0)+(t-1)*400+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t+.5)-Math.floor(this.jdEpoch)-1;var i=Math.floor(t/400)+1;t-=(i-1)*400,t+=t>15?16:0;var a=Math.floor(t/32)+1,r=t-(a-1)*32+1;return this.newDate(i<=0?i-1:i,a,r)}});var x={20:"Fruitbat",21:"Anchovy"};u.calendars.discworld=m},{"../main":346,"object-assign":247}],335:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear),x=t.year()+(t.year()<0?1:0);return x%4==3||x%4==-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear),13},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(x,t){var i=this._validate(x,t,this.minDay,u.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===13&&this.leapYear(i.year())?1:0)},weekDay:function(x,t,i){return(this.dayOfWeek(x,t,i)||7)<6},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);return x=a.year(),x<0&&x++,a.day()+(a.month()-1)*30+(x-1)*365+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var t=Math.floor(x)+.5-this.jdEpoch,i=Math.floor((t-Math.floor((t+366)/1461))/365)+1;i<=0&&i--,t=Math.floor(x)+.5-this.newDate(i,1,1).toJD();var a=Math.floor(t/30)+1,r=t-(a-1)*30+1;return this.newDate(i,a,r)}}),u.calendars.ethiopian=m},{"../main":346,"object-assign":247}],336:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear);return this._leapYear(i.year())},_leapYear:function(t){return t=t<0?t+1:t,x(t*7+1,19)<7},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),this._leapYear(t.year?t.year():t)?13:12},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear);return t=i.year(),this.toJD(t===-1?1:t+1,7,1)-this.toJD(t,7,1)},daysInMonth:function(t,i){return t.year&&(i=t.month(),t=t.year()),this._validate(t,i,this.minDay,u.local.invalidMonth),i===12&&this.leapYear(t)||i===8&&x(this.daysInYear(t),10)===5?30:i===9&&x(this.daysInYear(t),10)===3?29:this.daysPerMonth[i-1]},weekDay:function(t,i,a){return this.dayOfWeek(t,i,a)!==6},extraInfo:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);t=r.year(),i=r.month(),a=r.day();var n=t<=0?t+1:t,f=this.jdEpoch+this._delay1(n)+this._delay2(n)+a+1;if(i<7){for(var l=7;l<=this.monthsInYear(t);l++)f+=this.daysInMonth(t,l);for(var l=1;l<i;l++)f+=this.daysInMonth(t,l)}else for(var l=7;l<i;l++)f+=this.daysInMonth(t,l);return f},_delay1:function(t){var i=Math.floor((235*t-234)/19),a=12084+13753*i,r=i*29+Math.floor(a/25920);return x(3*(r+1),7)<3&&r++,r},_delay2:function(t){var i=this._delay1(t-1),a=this._delay1(t),r=this._delay1(t+1);return r-a==356?2:a-i==382?1:0},fromJD:function(t){t=Math.floor(t)+.5;for(var i=Math.floor((t-this.jdEpoch)*98496/35975351)-1;t>=this.toJD(i===-1?1:i+1,7,1);)i++;for(var a=t<this.toJD(i,1,1)?7:1;t>this.toJD(i,a,this.daysInMonth(i,a));)a++;var r=t-this.toJD(i,a,1)+1;return this.newDate(i,a,r)}});function x(t,i){return t-i*Math.floor(t/i)}u.calendars.hebrew=m},{"../main":346,"object-assign":247}],337:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(x){return this.leapYear(x)?355:354},daysInMonth:function(x,t){var i=this._validate(x,t,this.minDay,u.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(x,t,i){return this.dayOfWeek(x,t,i)!==5},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);return x=a.year(),t=a.month(),i=a.day(),x=x<=0?x+1:x,i+Math.ceil(29.5*(t-1))+(x-1)*354+Math.floor((3+11*x)/30)+this.jdEpoch-1},fromJD:function(x){x=Math.floor(x)+.5;var t=Math.floor((30*(x-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var i=Math.min(12,Math.ceil((x-29-this.toJD(t,1,1))/29.5)+1),a=x-this.toJD(t,i,1)+1;return this.newDate(t,i,a)}}),u.calendars.islamic=m},{"../main":346,"object-assign":247}],338:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear),x=t.year()<0?t.year()+1:t.year();return x%4==0},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(x,t){var i=this._validate(x,t,this.minDay,u.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(x,t,i){return(this.dayOfWeek(x,t,i)||7)<6},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);return x=a.year(),t=a.month(),i=a.day(),x<0&&x++,t<=2&&(x--,t+=12),Math.floor(365.25*(x+4716))+Math.floor(30.6001*(t+1))+i-1524.5},fromJD:function(x){var t=Math.floor(x+.5),i=t+1524,a=Math.floor((i-122.1)/365.25),r=Math.floor(365.25*a),n=Math.floor((i-r)/30.6001),f=n-Math.floor(n<14?1:13),l=a-Math.floor(f>2?4716:4715),o=i-r-Math.floor(30.6001*n);return l<=0&&l--,this.newDate(l,f,o)}}),u.calendars.julian=m},{"../main":346,"object-assign":247}],339:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(i){return this._validate(i,this.minMonth,this.minDay,u.local.invalidYear),!1},formatYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,u.local.invalidYear);i=a.year();var r=Math.floor(i/400);i=i%400,i+=i<0?400:0;var n=Math.floor(i/20);return r+"."+n+"."+i%20},forYear:function(i){if(i=i.split("."),i.length<3)throw"Invalid Mayan year";for(var a=0,r=0;r<i.length;r++){var n=parseInt(i[r],10);if(Math.abs(n)>19||r>0&&n<0)throw"Invalid Mayan year";a=a*20+n}return a},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,u.local.invalidYear),18},weekOfYear:function(i,a,r){return this._validate(i,a,r,u.local.invalidDate),0},daysInYear:function(i){return this._validate(i,this.minMonth,this.minDay,u.local.invalidYear),360},daysInMonth:function(i,a){return this._validate(i,a,this.minDay,u.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(i,a,r){var n=this._validate(i,a,r,u.local.invalidDate);return n.day()},weekDay:function(i,a,r){return this._validate(i,a,r,u.local.invalidDate),!0},extraInfo:function(i,a,r){var n=this._validate(i,a,r,u.local.invalidDate),f=n.toJD(),l=this._toHaab(f),o=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[l[0]-1],haabMonth:l[0],haabDay:l[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(i){i-=this.jdEpoch;var a=x(i+8+(18-1)*20,365);return[Math.floor(a/20)+1,x(a,20)]},_toTzolkin:function(i){return i-=this.jdEpoch,[t(i+20,20),t(i+4,13)]},toJD:function(i,a,r){var n=this._validate(i,a,r,u.local.invalidDate);return n.day()+n.month()*20+n.year()*360+this.jdEpoch},fromJD:function(i){i=Math.floor(i)+.5-this.jdEpoch;var a=Math.floor(i/360);i=i%360,i+=i<0?360:0;var r=Math.floor(i/20),n=i%20;return this.newDate(a,r,n)}});function x(i,a){return i-a*Math.floor(i/a)}function t(i,a){return x(i-1,a)+1}u.calendars.mayan=m},{"../main":346,"object-assign":247}],340:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar;var x=u.instance("gregorian");s(m.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return x.leapYear(i.year()+(i.year()<1?1:0)+1469)},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(t,i,a){return(this.dayOfWeek(t,i,a)||7)<6},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidMonth),t=r.year();t<0&&t++;for(var n=r.day(),f=1;f<r.month();f++)n+=this.daysPerMonth[f-1];return n+x.toJD(t+1468,3,13)},fromJD:function(t){t=Math.floor(t+.5);for(var i=Math.floor((t-(this.jdEpoch-1))/366);t>=this.toJD(i+1,1,1);)i++;for(var a=t-Math.floor(this.toJD(i,1,1)+.5)+1,r=1;a>this.daysInMonth(i,r);)a-=this.daysInMonth(i,r),r++;return this.newDate(i,r,a)}}),u.calendars.nanakshahi=m},{"../main":346,"object-assign":247}],341:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(x){return this.daysInYear(x)!==this.daysPerYear},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear);if(x=t.year(),typeof this.NEPALI_CALENDAR_DATA[x]=="undefined")return this.daysPerYear;for(var i=0,a=this.minMonth;a<=12;a++)i+=this.NEPALI_CALENDAR_DATA[x][a];return i},daysInMonth:function(x,t){return x.year&&(t=x.month(),x=x.year()),this._validate(x,t,this.minDay,u.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[x]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[x][t]},weekDay:function(x,t,i){return this.dayOfWeek(x,t,i)!==6},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);x=a.year(),t=a.month(),i=a.day();var r=u.instance(),n=0,f=t,l=x;this._createMissingCalendarData(x);var o=x-(f>9||f===9&&i>=this.NEPALI_CALENDAR_DATA[l][0]?56:57);for(t!==9&&(n=i,f--);f!==9;)f<=0&&(f=12,l--),n+=this.NEPALI_CALENDAR_DATA[l][f],f--;return t===9?(n+=i-this.NEPALI_CALENDAR_DATA[l][0],n<0&&(n+=r.daysInYear(o))):n+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0],r.newDate(o,1,1).add(n,"d").toJD()},fromJD:function(x){var t=u.instance(),i=t.fromJD(x),a=i.year(),r=i.dayOfYear(),n=a+56;this._createMissingCalendarData(n);for(var f=9,l=this.NEPALI_CALENDAR_DATA[n][0],o=this.NEPALI_CALENDAR_DATA[n][f]-l+1;r>o;)f++,f>12&&(f=1,n++),o+=this.NEPALI_CALENDAR_DATA[n][f];var c=this.NEPALI_CALENDAR_DATA[n][f]-(o-r);return this.newDate(n,f,c)},_createMissingCalendarData:function(x){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var i=x-1;i<x+2;i++)typeof this.NEPALI_CALENDAR_DATA[i]=="undefined"&&(this.NEPALI_CALENDAR_DATA[i]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),u.calendars.nepali=m},{"../main":346,"object-assign":247}],342:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear);return((i.year()-(i.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(t,i,a){return this.dayOfWeek(t,i,a)!==5},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);t=r.year(),i=r.month(),a=r.day();var n=t-(t>=0?474:473),f=474+x(n,2820);return a+(i<=7?(i-1)*31:(i-1)*30+6)+Math.floor((f*682-110)/2816)+(f-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t)+.5;var i=t-this.toJD(475,1,1),a=Math.floor(i/1029983),r=x(i,1029983),n=2820;if(r!==1029982){var f=Math.floor(r/366),l=x(r,366);n=Math.floor((2134*f+2816*l+2815)/1028522)+f+1}var o=n+2820*a+474;o=o<=0?o-1:o;var c=t-this.toJD(o,1,1)+1,v=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),d=t-this.toJD(o,v,1)+1;return this.newDate(o,v,d)}});function x(t,i){return t-i*Math.floor(t/i)}u.calendars.persian=m,u.calendars.jalali=m},{"../main":346,"object-assign":247}],343:[function(e,I,B){var u=e("../main"),s=e("object-assign"),m=u.instance();function x(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}x.prototype=new u.baseCalendar,s(x.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),t=this._t2gYear(i.year());return m.leapYear(t)},weekOfYear:function(t,i,a){var r=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),t=this._t2gYear(r.year());return m.weekOfYear(t,r.month(),r.day())},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(t,i,a){return(this.dayOfWeek(t,i,a)||7)<6},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate),t=this._t2gYear(r.year());return m.toJD(t,r.month(),r.day())},fromJD:function(t){var i=m.fromJD(t),a=this._g2tYear(i.year());return this.newDate(a,i.month(),i.day())},_t2gYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)},_g2tYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)}}),u.calendars.taiwan=x},{"../main":346,"object-assign":247}],344:[function(e,I,B){var u=e("../main"),s=e("object-assign"),m=u.instance();function x(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}x.prototype=new u.baseCalendar,s(x.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),t=this._t2gYear(i.year());return m.leapYear(t)},weekOfYear:function(t,i,a){var r=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),t=this._t2gYear(r.year());return m.weekOfYear(t,r.month(),r.day())},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(t,i,a){return(this.dayOfWeek(t,i,a)||7)<6},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate),t=this._t2gYear(r.year());return m.toJD(t,r.month(),r.day())},fromJD:function(t){var i=m.fromJD(t),a=this._g2tYear(i.year());return this.newDate(a,i.month(),i.day())},_t2gYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)},_g2tYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)}}),u.calendars.thai=x},{"../main":346,"object-assign":247}],345:[function(e,I,B){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear);return this.daysInYear(i.year())===355},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(t){for(var i=0,a=1;a<=12;a++)i+=this.daysInMonth(t,a);return i},daysInMonth:function(t,i){for(var a=this._validate(t,i,this.minDay,u.local.invalidMonth),r=a.toJD()-24e5+.5,n=0,f=0;f<x.length;f++){if(x[f]>r)return x[n]-x[n-1];n++}return 30},weekDay:function(t,i,a){return this.dayOfWeek(t,i,a)!==5},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate),n=12*(r.year()-1)+r.month()-15292,f=r.day()+x[n-1]-1;return f+24e5-.5},fromJD:function(t){for(var i=t-24e5+.5,a=0,r=0;r<x.length&&!(x[r]>i);r++)a++;var n=a+15292,f=Math.floor((n-1)/12),l=f+1,o=n-12*f,c=i-x[a-1]+1;return this.newDate(l,o,c)},isValid:function(t,i,a){var r=u.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(t=t.year!=null?t.year:t,r=t>=1276&&t<=1500),r},_validate:function(t,i,a,r){var n=u.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw r.replace(/\{0\}/,this.local.name);return n}}),u.calendars.ummalqura=m;var x=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(e,I,B){var u=e("object-assign");function s(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}u(s.prototype,{instance:function(r,n){r=(r||"gregorian").toLowerCase(),n=n||"";var f=this._localCals[r+"-"+n];if(!f&&this.calendars[r]&&(f=new this.calendars[r](n),this._localCals[r+"-"+n]=f),!f)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return f},newDate:function(r,n,f,l,o){return l=(r!=null&&r.year?r.calendar():typeof l=="string"?this.instance(l,o):l)||this.instance(),l.newDate(r,n,f)},substituteDigits:function(r){return function(n){return(n+"").replace(/[0-9]/g,function(f){return r[f]})}},substituteChineseDigits:function(r,n){return function(f){for(var l="",o=0;f>0;){var c=f%10;l=(c===0?"":r[c]+n[o])+l,o++,f=Math.floor(f/10)}return l.indexOf(r[1]+n[1])===0&&(l=l.substr(1)),l||r[0]}}});function m(r,n,f,l){if(this._calendar=r,this._year=n,this._month=f,this._day=l,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function x(r,n){return r=""+r,"000000".substring(0,n-r.length)+r}u(m.prototype,{newDate:function(r,n,f){return this._calendar.newDate(r==null?this:r,n,f)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,n,f){if(!this._calendar.isValid(r,n,f))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=n,this._day=f,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,n){return this._calendar.add(this,r,n)},set:function(r,n){return this._calendar.set(this,r,n)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var n=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return n===0?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+x(Math.abs(this.year()),4)+"-"+x(this.month(),2)+"-"+x(this.day(),2)}});function t(){this.shortYearCutoff="+10"}u(t.prototype,{_validateLevel:0,newDate:function(r,n,f){return r==null?this.today():(r.year&&(this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),f=r.day(),n=r.month(),r=r.year()),new m(this,r,n,f))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return n.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+x(Math.abs(n.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(r,n){var f=this._validate(r,n,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(r,n){var f=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,f,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),f},daysInYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return l.toJD()-this.newDate(l.year(),this.fromMonthOfYear(l.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(l))+2)%this.daysInWeek()},extraInfo:function(r,n,f){return this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(r,n,f){return this._validate(r,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,n,f),n,f)},_add:function(r,n,f){if(this._validateLevel++,f==="d"||f==="w"){var l=r.toJD()+n*(f==="w"?this.daysInWeek():1),o=r.calendar().fromJD(l);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var c=r.year()+(f==="y"?n:0),v=r.monthOfYear()+(f==="m"?n:0),o=r.day(),d=function(g){for(;v<g.minMonth;)c--,v+=g.monthsInYear(c);for(var A=g.monthsInYear(c);v>A-1+g.minMonth;)c++,v-=A,A=g.monthsInYear(c)};f==="y"?(r.month()!==this.fromMonthOfYear(c,v)&&(v=this.newDate(c,r.month(),this.minDay).monthOfYear()),v=Math.min(v,this.monthsInYear(c)),o=Math.min(o,this.daysInMonth(c,this.fromMonthOfYear(c,v)))):f==="m"&&(d(this),o=Math.min(o,this.daysInMonth(c,this.fromMonthOfYear(c,v))));var p=[c,this.fromMonthOfYear(c,v),o];return this._validateLevel--,p}catch(y){throw this._validateLevel--,y}},_correctAdd:function(r,n,f,l){if(!this.hasYearZero&&(l==="y"||l==="m")&&(n[0]===0||r.year()>0!=n[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[l],c=f<0?-1:1;n=this._add(r,f*o[0]+c*o[1],o[2])}return r.date(n[0],n[1],n[2])},set:function(r,n,f){this._validate(r,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var l=f==="y"?n:r.year(),o=f==="m"?n:r.month(),c=f==="d"?n:r.day();return(f==="y"||f==="m")&&(c=Math.min(c,this.daysInMonth(l,o))),r.date(l,o,c)},isValid:function(r,n,f){this._validateLevel++;var l=this.hasYearZero||r!==0;if(l){var o=this.newDate(r,n,this.minDay);l=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(o)&&f>=this.minDay&&f-this.minDay<this.daysInMonth(o)}return this._validateLevel--,l},toJSDate:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(l)).toJSDate()},fromJSDate:function(r){return this.fromJD(a.instance().fromJSDate(r).toJD())},_validate:function(r,n,f,l){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,n,f))throw l.replace(/\{0\}/,this.local.name);var o=this.newDate(r,n,f);return this._validateLevel--,o}catch(c){throw this._validateLevel--,c}}});function i(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}i.prototype=new t,u(i.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),r=n.year()+(n.year()<0?1:0);return r%4==0&&(r%100!=0||r%400==0)},weekOfYear:function(r,n,f){var l=this.newDate(r,n,f);return l.add(4-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var f=this._validate(r,n,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(r,n,f){return(this.dayOfWeek(r,n,f)||7)<6},toJD:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);r=l.year(),n=l.month(),f=l.day(),r<0&&r++,n<3&&(n+=12,r--);var o=Math.floor(r/100),c=2-o+Math.floor(o/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(n+1))+f+c-1524.5},fromJD:function(r){var n=Math.floor(r+.5),f=Math.floor((n-186721625e-2)/36524.25);f=n+1+f-Math.floor(f/4);var l=f+1524,o=Math.floor((l-122.1)/365.25),c=Math.floor(365.25*o),v=Math.floor((l-c)/30.6001),d=l-c-Math.floor(v*30.6001),p=v-(v>13.5?13:1),y=o-(p>2.5?4716:4715);return y<=0&&y--,this.newDate(y,p,d)},toJSDate:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),o=new Date(l.year(),l.month()-1,l.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var a=I.exports=new s;a.cdate=m,a.baseCalendar=t,a.calendars.gregorian=i},{"object-assign":247}],347:[function(e,I,B){var u=e("object-assign"),s=e("./main");u(s.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),s.local=s.regionalOptions[""],u(s.cdate.prototype,{formatDate:function(m,x){return typeof m!="string"&&(x=m,m=""),this._calendar.formatDate(m||"",this,x)}}),u(s.baseCalendar.prototype,{UNIX_EPOCH:s.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:s.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(m,x,t){if(typeof m!="string"&&(t=x,x=m,m=""),!x)return"";if(x.calendar()!==this)throw s.local.invalidFormat||s.regionalOptions[""].invalidFormat;m=m||this.local.dateFormat,t=t||{};var i=t.dayNamesShort||this.local.dayNamesShort,a=t.dayNames||this.local.dayNames,r=t.monthNumbers||this.local.monthNumbers,n=t.monthNamesShort||this.local.monthNamesShort,f=t.monthNames||this.local.monthNames;t.calculateWeek||this.local.calculateWeek;for(var l=function(w,T){for(var _=1;M+_<m.length&&m.charAt(M+_)===w;)_++;return M+=_-1,Math.floor(_/(T||1))>1},o=function(w,T,_,h){var L=""+T;if(l(w,h))for(;L.length<_;)L="0"+L;return L},c=function(w,T,_,h){return l(w)?h[T]:_[T]},v=this,d=function(w){return typeof r=="function"?r.call(v,w,l("m")):g(o("m",w.month(),2))},p=function(w,T){return T?typeof f=="function"?f.call(v,w):f[w.month()-v.minMonth]:typeof n=="function"?n.call(v,w):n[w.month()-v.minMonth]},y=this.local.digits,g=function(w){return t.localNumbers&&y?y(w):w},A="",b=!1,M=0;M<m.length;M++)if(b)m.charAt(M)==="'"&&!l("'")?b=!1:A+=m.charAt(M);else switch(m.charAt(M)){case"d":A+=g(o("d",x.day(),2));break;case"D":A+=c("D",x.dayOfWeek(),i,a);break;case"o":A+=o("o",x.dayOfYear(),3);break;case"w":A+=o("w",x.weekOfYear(),2);break;case"m":A+=d(x);break;case"M":A+=p(x,l("M"));break;case"y":A+=l("y",2)?x.year():(x.year()%100<10?"0":"")+x.year()%100;break;case"Y":l("Y",2),A+=x.formatYear();break;case"J":A+=x.toJD();break;case"@":A+=(x.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":A+=(x.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?A+="'":b=!0;break;default:A+=m.charAt(M)}return A},parseDate:function(m,x,t){if(x==null)throw s.local.invalidArguments||s.regionalOptions[""].invalidArguments;if(x=typeof x=="object"?x.toString():x+"",x==="")return null;m=m||this.local.dateFormat,t=t||{};var i=t.shortYearCutoff||this.shortYearCutoff;i=typeof i!="string"?i:this.today().year()%100+parseInt(i,10);for(var a=t.dayNamesShort||this.local.dayNamesShort,r=t.dayNames||this.local.dayNames,n=t.parseMonth||this.local.parseMonth,f=t.monthNumbers||this.local.monthNumbers,l=t.monthNamesShort||this.local.monthNamesShort,o=t.monthNames||this.local.monthNames,c=-1,v=-1,d=-1,p=-1,y=-1,g=!1,A=!1,b=function(F,D){for(var R=1;k+R<m.length&&m.charAt(k+R)===F;)R++;return k+=R-1,Math.floor(R/(D||1))>1},M=function(F,D){var R=b(F,D),U=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(F)+1],N=new RegExp("^-?\\d{1,"+U+"}"),X=x.substring(S).match(N);if(!X)throw(s.local.missingNumberAt||s.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=X[0].length,parseInt(X[0],10)},w=this,T=function(){if(typeof f=="function"){b("m");var F=f.call(w,x.substring(S));return S+=F.length,F}return M("m")},_=function(F,D,R,U){for(var N=b(F,U)?R:D,X=0;X<N.length;X++)if(x.substr(S,N[X].length).toLowerCase()===N[X].toLowerCase())return S+=N[X].length,X+w.minMonth;throw(s.local.unknownNameAt||s.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},h=function(){if(typeof o=="function"){var F=b("M")?o.call(w,x.substring(S)):l.call(w,x.substring(S));return S+=F.length,F}return _("M",l,o)},L=function(){if(x.charAt(S)!==m.charAt(k))throw(s.local.unexpectedLiteralAt||s.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,k=0;k<m.length;k++)if(A)m.charAt(k)==="'"&&!b("'")?A=!1:L();else switch(m.charAt(k)){case"d":p=M("d");break;case"D":_("D",a,r);break;case"o":y=M("o");break;case"w":M("w");break;case"m":d=T();break;case"M":d=h();break;case"y":var P=k;g=!b("y",2),k=P,v=M("y",2);break;case"Y":v=M("Y",2);break;case"J":c=M("J")+.5,x.charAt(S)==="."&&(S++,M("J"));break;case"@":c=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=x.length;break;case"'":b("'")?L():A=!0;break;default:L()}if(S<x.length)throw s.local.unexpectedText||s.regionalOptions[""].unexpectedText;if(v===-1?v=this.today().year():v<100&&g&&(v+=i===-1?1900:this.today().year()-this.today().year()%100-(v<=i?0:100)),typeof d=="string"&&(d=n.call(this,v,d)),y>-1){d=1,p=y;for(var O=this.daysInMonth(v,d);p>O;O=this.daysInMonth(v,d))d++,p-=O}return c>-1?this.fromJD(c):this.newDate(v,d,p)},determineDate:function(m,x,t,i,a){t&&typeof t!="object"&&(a=i,i=t,t=null),typeof i!="string"&&(a=i,i="");var r=this,n=function(f){try{return r.parseDate(i,f,a)}catch{}f=f.toLowerCase();for(var l=(f.match(/^c/)&&t?t.newDate():null)||r.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,c=o.exec(f);c;)l.add(parseInt(c[1],10),c[2]||"d"),c=o.exec(f);return l};return x=x?x.newDate():null,m=m==null?x:typeof m=="string"?n(m):typeof m=="number"?isNaN(m)||m===1/0||m===-1/0?x:r.today().add(m,"d"):r.newDate(m),m}})},{"./main":346,"object-assign":247}],348:[function(e,I,B){I.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(e,I,B){var u=e("./arrow_paths"),s=e("../../plots/font_attributes"),m=e("../../plots/cartesian/constants"),x=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),I.exports=x("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:s({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:u.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:u.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:s({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("./draw").draw;I.exports=function(a){var r=a._fullLayout,n=u.filterVisible(r.annotations);if(n.length&&a._fullData.length)return u.syncOrAsync([m,x],a)};function x(i){var a=i._fullLayout;u.filterVisible(a.annotations).forEach(function(r){var n=s.getFromId(i,r.xref),f=s.getFromId(i,r.yref),l=s.getRefType(r.xref),o=s.getRefType(r.yref);r._extremes={},l==="range"&&t(r,n),o==="range"&&t(r,f)})}function t(i,a){var r=a._id,n=r.charAt(0),f=i[n],l=i["a"+n],o=i[n+"ref"],c=i["a"+n+"ref"],v=i["_"+n+"padplus"],d=i["_"+n+"padminus"],p={x:1,y:-1}[n]*i[n+"shift"],y=3*i.arrowsize*i.arrowwidth||0,g=y+p,A=y-p,b=3*i.startarrowsize*i.arrowwidth||0,M=b+p,w=b-p,T;if(c===o){var _=s.findExtremes(a,[a.r2c(f)],{ppadplus:g,ppadminus:A}),h=s.findExtremes(a,[a.r2c(l)],{ppadplus:Math.max(v,M),ppadminus:Math.max(d,w)});T={min:[_.min[0],h.min[0]],max:[_.max[0],h.max[0]]}}else M=l?M+l:M,w=l?w-l:w,T=s.findExtremes(a,[a.r2c(f)],{ppadplus:Math.max(v,g,M),ppadminus:Math.max(d,A,w)});i._extremes[r]=T}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(e,I,B){var u=e("../../lib"),s=e("../../registry"),m=e("../../plot_api/plot_template").arrayEditor;I.exports={hasClickToShow:x,onClick:t};function x(r,n){var f=i(r,n);return f.on.length>0||f.explicitOff.length>0}function t(r,n){var f=i(r,n),l=f.on,o=f.off.concat(f.explicitOff),c={},v=r._fullLayout.annotations,d,p;if(!!(l.length||o.length)){for(d=0;d<l.length;d++)p=m(r.layout,"annotations",v[l[d]]),p.modifyItem("visible",!0),u.extendFlat(c,p.getUpdateObj());for(d=0;d<o.length;d++)p=m(r.layout,"annotations",v[o[d]]),p.modifyItem("visible",!1),u.extendFlat(c,p.getUpdateObj());return s.call("update",r,{},c)}}function i(r,n){var f=r._fullLayout.annotations,l=[],o=[],c=[],v=(n||[]).length,d,p,y,g,A,b,M,w;for(d=0;d<f.length;d++)if(y=f[d],g=y.clicktoshow,g){for(p=0;p<v;p++)if(A=n[p],b=A.xaxis,M=A.yaxis,b._id===y.xref&&M._id===y.yref&&b.d2r(A.x)===a(y._xclick,b)&&M.d2r(A.y)===a(y._yclick,M)){y.visible?g==="onout"?w=o:w=c:w=l,w.push(d);break}p===v&&y.visible&&g==="onout"&&o.push(d)}return{on:l,off:o,explicitOff:c}}function a(r,n){return n.type==="log"?n.l2r(r):n.d2r(r)}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(e,I,B){var u=e("../../lib"),s=e("../color");I.exports=function(x,t,i,a){a("opacity");var r=a("bgcolor"),n=a("bordercolor"),f=s.opacity(n);a("borderpad");var l=a("borderwidth"),o=a("showarrow");a("text",o?" ":i._dfltTitle.annotation),a("textangle"),u.coerceFont(a,"font",i.font),a("width"),a("align");var c=a("height");if(c&&a("valign"),o){var v=a("arrowside"),d,p;v.indexOf("end")!==-1&&(d=a("arrowhead"),p=a("arrowsize")),v.indexOf("start")!==-1&&(a("startarrowhead",d),a("startarrowsize",p)),a("arrowcolor",f?t.bordercolor:s.defaultLine),a("arrowwidth",(f&&l||1)*2),a("standoff"),a("startstandoff")}var y=a("hovertext"),g=i.hoverlabel||{};if(y){var A=a("hoverlabel.bgcolor",g.bgcolor||(s.opacity(r)?s.rgb(r):s.defaultLine)),b=a("hoverlabel.bordercolor",g.bordercolor||s.contrast(A));u.coerceFont(a,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||b})}a("captureevents",!!y)}},{"../../lib":503,"../color":366}],353:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib/to_log_range");I.exports=function(x,t,i,a){t=t||{};var r=i==="log"&&t.type==="linear",n=i==="linear"&&t.type==="log";if(!(r||n))return;var f=x._fullLayout.annotations,l=t._id.charAt(0),o,c;function v(p){var y=o[p],g=null;r?g=s(y,t.range):g=Math.pow(10,y),u(g)||(g=null),a(c+p,g)}for(var d=0;d<f.length;d++)o=f[d],c="annotations["+d+"].",o[l+"ref"]===t._id&&v(l),o["a"+l+"ref"]===t._id&&v("a"+l)}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./common_defaults"),t=e("./attributes");I.exports=function(r,n){m(r,n,{name:"annotations",handleItemDefaults:i})};function i(a,r,n){function f(L,S){return u.coerce(a,r,t,L,S)}var l=f("visible"),o=f("clicktoshow");if(!!(l||o)){x(a,r,n,f);for(var c=r.showarrow,v=["x","y"],d=[-10,-30],p={_fullLayout:n},y=0;y<2;y++){var g=v[y],A=s.coerceRef(a,r,p,g,"","paper");if(A!=="paper"){var b=s.getFromId(p,A);b._annIndices.push(r._index)}if(s.coercePosition(r,p,f,A,g,.5),c){var M="a"+g,w=s.coerceRef(a,r,p,M,"pixel",["pixel","paper"]);w!=="pixel"&&w!==A&&(w=r[M]="pixel");var T=w==="pixel"?d[y]:.4;s.coercePosition(r,p,f,w,M,T)}f(g+"anchor"),f(g+"shift")}if(u.noneOrAll(a,r,["x","y"]),c&&u.noneOrAll(a,r,["ax","ay"]),o){var _=f("xclick"),h=f("yclick");r._xclick=_===void 0?r.x:s.cleanPosition(_,p,r.xref),r._yclick=h===void 0?r.y:s.cleanPosition(h,p,r.yref)}}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../plots/plots"),x=e("../../lib"),t=x.strTranslate,i=e("../../plots/cartesian/axes"),a=e("../color"),r=e("../drawing"),n=e("../fx"),f=e("../../lib/svg_text_utils"),l=e("../../lib/setcursor"),o=e("../dragelement"),c=e("../../plot_api/plot_template").arrayEditor,v=e("./draw_arrow_head");I.exports={draw:d,drawOne:p,drawRaw:g};function d(A){var b=A._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var M=0;M<b.annotations.length;M++)b.annotations[M].visible&&p(A,M);return m.previousPromises(A)}function p(A,b){var M=A._fullLayout,w=M.annotations[b]||{},T=i.getFromId(A,w.xref),_=i.getFromId(A,w.yref);T&&T.setScale(),_&&_.setScale(),g(A,w,b,!1,T,_)}function y(A,b,M,w,T){var _=T[M],h=T[M+"ref"],L=M.indexOf("y")!==-1,S=i.getRefType(h)==="domain",k=L?w.h:w.w;return A?S?_+(L?-b:b)/A._length:A.p2r(A.r2p(_)+b):_+(L?-b:b)/k}function g(A,b,M,w,T,_){var h=A._fullLayout,L=A._fullLayout._size,S=A._context.edits,k,P;w?(k="annotation-"+w,P=w+".annotations"):(k="annotation",P="annotations");var O=c(A.layout,P,b),F=O.modifyBase,D=O.modifyItem,R=O.getUpdateObj;h._infolayer.selectAll("."+k+'[data-index="'+M+'"]').remove();var U="clip"+h._uid+"_ann"+M;if(!b._input||b.visible===!1){u.selectAll("#"+U).remove();return}var N={x:{},y:{}},X=+b.textangle||0,j=h._infolayer.append("g").classed(k,!0).attr("data-index",String(M)).style("opacity",b.opacity),ee=j.append("g").classed("annotation-text-g",!0),q=S[b.showarrow?"annotationTail":"annotationPosition"],G=b.captureevents||S.annotationText||q;function J(ue){var xe={index:M,annotation:b._input,fullAnnotation:b,event:ue};return w&&(xe.subplotId=w),xe}var le=ee.append("g").style("pointer-events",G?"all":null).call(l,"pointer").on("click",function(){A._dragging=!1,A.emit("plotly_clickannotation",J(u.event))});b.hovertext&&le.on("mouseover",function(){var ue=b.hoverlabel,xe=ue.font,he=this.getBoundingClientRect(),me=A.getBoundingClientRect();n.loneHover({x0:he.left-me.left,x1:he.right-me.left,y:(he.top+he.bottom)/2-me.top,text:b.hovertext,color:ue.bgcolor,borderColor:ue.bordercolor,fontFamily:xe.family,fontSize:xe.size,fontColor:xe.color},{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:A})}).on("mouseout",function(){n.loneUnhover(h._hoverlayer.node())});var fe=b.borderwidth,se=b.borderpad,V=fe+se,Y=le.append("rect").attr("class","bg").style("stroke-width",fe+"px").call(a.stroke,b.bordercolor).call(a.fill,b.bgcolor),ne=b.width||b.height,te=h._topclips.selectAll("#"+U).data(ne?[0]:[]);te.enter().append("clipPath").classed("annclip",!0).attr("id",U).append("rect"),te.exit().remove();var K=b.font,$=h._meta?x.templateString(b.text,h._meta):b.text,ae=le.append("text").classed("annotation-text",!0).text($);function ie(ue){return ue.call(r.font,K).attr({"text-anchor":{left:"start",right:"end"}[b.align]||"middle"}),f.convertToTspans(ue,A,oe),ue}function oe(){var ue=ae.selectAll("a");if(ue.size()===1&&ue.text()===ae.text()){var xe=le.insert("a",":first-child").attr({"xlink:xlink:href":ue.attr("xlink:href"),"xlink:xlink:show":ue.attr("xlink:show")}).style({cursor:"pointer"});xe.node().appendChild(Y.node())}var he=le.select(".annotation-text-math-group"),me=!he.empty(),be=r.bBox((me?he:ae).node()),Ce=be.width,Se=be.height,Be=b.width||Ce,Ye=b.height||Se,Xe=Math.round(Be+2*V),Te=Math.round(Ye+2*V);function Ie(Nr,Ir){return Ir==="auto"&&(Nr<1/3?Ir="left":Nr>2/3?Ir="right":Ir="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Ir]}for(var Ze=!1,rt=["x","y"],Ge=0;Ge<rt.length;Ge++){var ze=rt[Ge],We=b[ze+"ref"]||ze,mt=b["a"+ze+"ref"],Ft={x:T,y:_}[ze],Xt=(X+(ze==="x"?0:-90))*Math.PI/180,Pt=Xe*Math.cos(Xt),Ut=Te*Math.sin(Xt),Gt=Math.abs(Pt)+Math.abs(Ut),It=b[ze+"anchor"],Ct=b[ze+"shift"]*(ze==="x"?1:-1),lt=N[ze],dt,et,Pe,Je,it,ht=i.getRefType(We);if(Ft&&ht!=="domain"){var zt=Ft.r2fraction(b[ze]);(zt<0||zt>1)&&(mt===We?(zt=Ft.r2fraction(b["a"+ze]),(zt<0||zt>1)&&(Ze=!0)):Ze=!0),dt=Ft._offset+Ft.r2p(b[ze]),Je=.5}else{var Lt=ht==="domain";ze==="x"?(Pe=b[ze],dt=Lt?Ft._offset+Ft._length*Pe:dt=L.l+L.w*Pe):(Pe=1-b[ze],dt=Lt?Ft._offset+Ft._length*Pe:dt=L.t+L.h*Pe),Je=b.showarrow?.5:Pe}if(b.showarrow){lt.head=dt;var Vt=b["a"+ze];if(it=Pt*Ie(.5,b.xanchor)-Ut*Ie(.5,b.yanchor),mt===We){var $t=i.getRefType(mt);$t==="domain"?(ze==="y"&&(Vt=1-Vt),lt.tail=Ft._offset+Ft._length*Vt):$t==="paper"?ze==="y"?(Vt=1-Vt,lt.tail=L.t+L.h*Vt):lt.tail=L.l+L.w*Vt:lt.tail=Ft._offset+Ft.r2p(Vt),et=it}else lt.tail=dt+Vt,et=it+Vt;lt.text=lt.tail+it;var Ht=h[ze==="x"?"width":"height"];if(We==="paper"&&(lt.head=x.constrain(lt.head,1,Ht-1)),mt==="pixel"){var tr=-Math.max(lt.tail-3,lt.text),qe=Math.min(lt.tail+3,lt.text)-Ht;tr>0?(lt.tail+=tr,lt.text+=tr):qe>0&&(lt.tail-=qe,lt.text-=qe)}lt.tail+=Ct,lt.head+=Ct}else it=Gt*Ie(Je,It),et=it,lt.text=dt+it;lt.text+=Ct,it+=Ct,et+=Ct,b["_"+ze+"padplus"]=Gt/2+et,b["_"+ze+"padminus"]=Gt/2-et,b["_"+ze+"size"]=Gt,b["_"+ze+"shift"]=it}if(Ze){le.remove();return}var xt=0,Rt=0;if(b.align!=="left"&&(xt=(Be-Ce)*(b.align==="center"?.5:1)),b.valign!=="top"&&(Rt=(Ye-Se)*(b.valign==="middle"?.5:1)),me)he.select("svg").attr({x:V+xt-1,y:V+Rt}).call(r.setClipUrl,ne?U:null,A);else{var fr=V+Rt-be.top,br=V+xt-be.left;ae.call(f.positionText,br,fr).call(r.setClipUrl,ne?U:null,A)}te.select("rect").call(r.setRect,V,V,Be,Ye),Y.call(r.setRect,fe/2,fe/2,Xe-fe,Te-fe),le.call(r.setTranslate,Math.round(N.x.text-Xe/2),Math.round(N.y.text-Te/2)),ee.attr({transform:"rotate("+X+","+N.x.text+","+N.y.text+")"});var pr=function(Nr,Ir){j.selectAll(".annotation-arrow-g").remove();var lr=N.x.head,Yr=N.y.head,nt=N.x.tail+Nr,Ae=N.y.tail+Ir,Ee=N.x.text+Nr,Fe=N.y.text+Ir,Ke=x.rotationXYMatrix(X,Ee,Fe),tt=x.apply2DTransform(Ke),ut=x.apply2DTransform2(Ke),ct=+Y.attr("width"),yt=+Y.attr("height"),kt=Ee-.5*ct,jt=kt+ct,Mr=Fe-.5*yt,Sr=Mr+yt,Lr=[[kt,Mr,kt,Sr],[kt,Sr,jt,Sr],[jt,Sr,jt,Mr],[jt,Mr,kt,Mr]].map(ut);if(!Lr.reduce(function(st,Bt){return st^!!x.segmentsIntersect(lr,Yr,lr+1e6,Yr+1e6,Bt[0],Bt[1],Bt[2],Bt[3])},!1)){Lr.forEach(function(st){var Bt=x.segmentsIntersect(nt,Ae,lr,Yr,st[0],st[1],st[2],st[3]);Bt&&(nt=Bt.x,Ae=Bt.y)});var Ar=b.arrowwidth,Ur=b.arrowcolor,fn=b.arrowside,Cr=j.append("g").style({opacity:a.opacity(Ur)}).classed("annotation-arrow-g",!0),_r=Cr.append("path").attr("d","M"+nt+","+Ae+"L"+lr+","+Yr).style("stroke-width",Ar+"px").call(a.stroke,a.rgb(Ur));if(v(_r,fn,b),S.annotationPosition&&_r.node().parentNode&&!w){var En=lr,Jr=Yr;if(b.standoff){var Pr=Math.sqrt(Math.pow(lr-nt,2)+Math.pow(Yr-Ae,2));En+=b.standoff*(nt-lr)/Pr,Jr+=b.standoff*(Ae-Yr)/Pr}var vn=Cr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(nt-En)+","+(Ae-Jr),transform:t(En,Jr)}).style("stroke-width",Ar+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)"),xn,qr;o.init({element:vn.node(),gd:A,prepFn:function(){var st=r.getTranslate(le);xn=st.x,qr=st.y,T&&T.autorange&&F(T._name+".autorange",!0),_&&_.autorange&&F(_._name+".autorange",!0)},moveFn:function(st,Bt){var ir=tt(xn,qr),xr=ir[0]+st,Qr=ir[1]+Bt;le.call(r.setTranslate,xr,Qr),D("x",y(T,st,"x",L,b)),D("y",y(_,Bt,"y",L,b)),b.axref===b.xref&&D("ax",y(T,st,"ax",L,b)),b.ayref===b.yref&&D("ay",y(_,Bt,"ay",L,b)),Cr.attr("transform",t(st,Bt)),ee.attr({transform:"rotate("+X+","+xr+","+Qr+")"})},doneFn:function(){s.call("_guiRelayout",A,R());var st=document.querySelector(".js-notes-box-panel");st&&st.redraw(st.selectedObj)}})}}};if(b.showarrow&&pr(0,0),q){var Tr;o.init({element:le.node(),gd:A,prepFn:function(){Tr=ee.attr("transform")},moveFn:function(Nr,Ir){var lr="pointer";if(b.showarrow)b.axref===b.xref?D("ax",y(T,Nr,"ax",L,b)):D("ax",b.ax+Nr),b.ayref===b.yref?D("ay",y(_,Ir,"ay",L.w,b)):D("ay",b.ay+Ir),pr(Nr,Ir);else{if(w)return;var Yr,nt;if(T)Yr=y(T,Nr,"x",L,b);else{var Ae=b._xsize/L.w,Ee=b.x+(b._xshift-b.xshift)/L.w-Ae/2;Yr=o.align(Ee+Nr/L.w,Ae,0,1,b.xanchor)}if(_)nt=y(_,Ir,"y",L,b);else{var Fe=b._ysize/L.h,Ke=b.y-(b._yshift+b.yshift)/L.h-Fe/2;nt=o.align(Ke-Ir/L.h,Fe,0,1,b.yanchor)}D("x",Yr),D("y",nt),(!T||!_)&&(lr=o.getCursor(T?.5:Yr,_?.5:nt,b.xanchor,b.yanchor))}ee.attr({transform:t(Nr,Ir)+Tr}),l(le,lr)},clickFn:function(Nr,Ir){b.captureevents&&A.emit("plotly_clickannotation",J(Ir))},doneFn:function(){l(le),s.call("_guiRelayout",A,R());var Nr=document.querySelector(".js-notes-box-panel");Nr&&Nr.redraw(Nr.selectedObj)}})}}S.annotationText?ae.call(f.makeEditable,{delegate:le,gd:A}).call(ie).on("edit",function(ue){b.text=ue,this.call(ie),D("text",ue),T&&T.autorange&&F(T._name+".autorange",!0),_&&_.autorange&&F(_._name+".autorange",!0),s.call("_guiRelayout",A,R())}):ae.call(ie)}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(e,I,B){var u=e("@plotly/d3"),s=e("../color"),m=e("./arrow_paths"),x=e("../../lib"),t=x.strScale,i=x.strRotate,a=x.strTranslate;I.exports=function(n,f,l){var o=n.node(),c=m[l.arrowhead||0],v=m[l.startarrowhead||0],d=(l.arrowwidth||1)*(l.arrowsize||1),p=(l.arrowwidth||1)*(l.startarrowsize||1),y=f.indexOf("start")>=0,g=f.indexOf("end")>=0,A=c.backoff*d+l.standoff,b=v.backoff*p+l.startstandoff,M,w,T,_;if(o.nodeName==="line"){M={x:+n.attr("x1"),y:+n.attr("y1")},w={x:+n.attr("x2"),y:+n.attr("y2")};var h=M.x-w.x,L=M.y-w.y;if(T=Math.atan2(L,h),_=T+Math.PI,A&&b&&A+b>Math.sqrt(h*h+L*L)){ee();return}if(A){if(A*A>h*h+L*L){ee();return}var S=A*Math.cos(T),k=A*Math.sin(T);w.x+=S,w.y+=k,n.attr({x2:w.x,y2:w.y})}if(b){if(b*b>h*h+L*L){ee();return}var P=b*Math.cos(T),O=b*Math.sin(T);M.x-=P,M.y-=O,n.attr({x1:M.x,y1:M.y})}}else if(o.nodeName==="path"){var F=o.getTotalLength(),D="";if(F<A+b){ee();return}var R=o.getPointAtLength(0),U=o.getPointAtLength(.1);T=Math.atan2(R.y-U.y,R.x-U.x),M=o.getPointAtLength(Math.min(b,F)),D="0px,"+b+"px,";var N=o.getPointAtLength(F),X=o.getPointAtLength(F-.1);_=Math.atan2(N.y-X.y,N.x-X.x),w=o.getPointAtLength(Math.max(0,F-A));var j=D?b+A:A;D+=F-j+"px,"+F+"px",n.style("stroke-dasharray",D)}function ee(){n.style("stroke-dasharray","0px,100px")}function q(G,J,le,fe){!G.path||(G.noRotate&&(le=0),u.select(o.parentNode).append("path").attr({class:n.attr("class"),d:G.path,transform:a(J.x,J.y)+i(le*180/Math.PI)+t(fe)}).style({fill:s.rgb(l.arrowcolor),"stroke-width":0}))}y&&q(v,M,T,p),g&&q(c,w,_,d)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(e,I,B){var u=e("./draw"),s=e("./click");I.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:u.draw,drawOne:u.drawOne,drawRaw:u.drawRaw,hasClickToShow:s.hasClickToShow,onClick:s.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(e,I,B){var u=e("../annotations/attributes"),s=e("../../plot_api/edit_types").overrideAll,m=e("../../plot_api/plot_template").templatedArray;I.exports=s(m("annotation",{visible:u.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:u.xanchor,xshift:u.xshift,yanchor:u.yanchor,yshift:u.yshift,text:u.text,textangle:u.textangle,font:u.font,width:u.width,height:u.height,opacity:u.opacity,align:u.align,valign:u.valign,bgcolor:u.bgcolor,bordercolor:u.bordercolor,borderpad:u.borderpad,borderwidth:u.borderwidth,showarrow:u.showarrow,arrowcolor:u.arrowcolor,arrowhead:u.arrowhead,startarrowhead:u.startarrowhead,arrowside:u.arrowside,arrowsize:u.arrowsize,startarrowsize:u.startarrowsize,arrowwidth:u.arrowwidth,standoff:u.standoff,startstandoff:u.startstandoff,hovertext:u.hovertext,hoverlabel:u.hoverlabel,captureevents:u.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes");I.exports=function(t){for(var i=t.fullSceneLayout,a=i.annotations,r=0;r<a.length;r++)m(a[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function m(x,t){var i=t.fullSceneLayout,a=i.domain,r=t.fullLayout._size,n={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};x._xa={},u.extendFlat(x._xa,n),s.setConvert(x._xa),x._xa._offset=r.l+a.x[0]*r.w,x._xa.l2p=function(){return .5*(1+x._pdata[0]/x._pdata[3])*r.w*(a.x[1]-a.x[0])},x._ya={},u.extendFlat(x._ya,n),s.setConvert(x._ya),x._ya._offset=r.t+(1-a.y[1])*r.h,x._ya.l2p=function(){return .5*(1-x._pdata[1]/x._pdata[3])*r.h*(a.y[1]-a.y[0])}}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("../annotations/common_defaults"),t=e("./attributes");I.exports=function(r,n,f){m(r,n,{name:"annotations",handleItemDefaults:i,fullLayout:f.fullLayout})};function i(a,r,n,f){function l(v,d){return u.coerce(a,r,t,v,d)}function o(v){var d=v+"axis",p={_fullLayout:{}};return p._fullLayout[d]=n[d],s.coercePosition(r,p,l,v,v,.5)}var c=l("visible");!c||(x(a,r,f.fullLayout,l),o("x"),o("y"),o("z"),u.noneOrAll(a,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",l("ax",-10),l("ay",-30),u.noneOrAll(a,r,["ax","ay"])))}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(e,I,B){var u=e("../annotations/draw").drawRaw,s=e("../../plots/gl3d/project"),m=["x","y","z"];I.exports=function(t){for(var i=t.fullSceneLayout,a=t.dataScale,r=i.annotations,n=0;n<r.length;n++){for(var f=r[n],l=!1,o=0;o<3;o++){var c=m[o],v=f[c],d=i[c+"axis"],p=d.r2fraction(v);if(p<0||p>1){l=!0;break}}l?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+n+'"]').remove():(f._pdata=s(t.glplot.cameraParams,[i.xaxis.r2l(f.x)*a[0],i.yaxis.r2l(f.y)*a[1],i.zaxis.r2l(f.z)*a[2]]),u(t.graphDiv,f,n,t.id,f._xa,f._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(e,I,B){var u=e("../../registry"),s=e("../../lib");I.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:m,convert:e("./convert"),draw:e("./draw")};function m(x,t){var i=u.subplotsRegistry.gl3d;if(!!i)for(var a=i.attrRegex,r=Object.keys(x),n=0;n<r.length;n++){var f=r[n];a.test(f)&&(x[f].annotations||[]).length&&(s.pushUnique(t._basePlotModules,i),s.pushUnique(t._subplots.gl3d,f))}}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(e,I,B){I.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(e,I,B){var u=e("./calendars"),s=e("../../lib"),m=e("../../constants/numerical"),x=m.EPOCHJD,t=m.ONEDAY,i={valType:"enumerated",values:s.sortObjectKeys(u.calendars),editType:"calc",dflt:"gregorian"},a=function(T,_,h,L){var S={};return S[h]=i,s.coerce(T,_,S,h,L)},r=function(T,_,h,L){for(var S=0;S<h.length;S++)a(T,_,h[S]+"calendar",L.calendar)},n={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},f={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},l={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},o="##",c={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:o,w:o,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function v(T,_,h){for(var L=Math.floor((_+.05)/t)+x,S=p(h).fromJD(L),k=0,P,O,F,D,R;(k=T.indexOf("%",k))!==-1;)P=T.charAt(k+1),P==="0"||P==="-"||P==="_"?(F=3,O=T.charAt(k+2),P==="_"&&(P="-")):(O=P,P="0",F=2),D=c[O],D?(D===o?R=o:R=S.formatDate(D[P]),T=T.substr(0,k)+R+T.substr(k+F),k+=R.length):k+=F;return T}var d={};function p(T){var _=d[T];return _||(_=d[T]=u.instance(T),_)}function y(T){return s.extendFlat({},i,{description:T})}function g(T){return"Sets the calendar system to use with `"+T+"` date data."}var A={xcalendar:y(g("x"))},b=s.extendFlat({},A,{ycalendar:y(g("y"))}),M=s.extendFlat({},b,{zcalendar:y(g("z"))}),w=y(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));I.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:b,bar:b,box:b,heatmap:b,contour:b,histogram:b,histogram2d:b,histogram2dcontour:b,scatter3d:M,surface:M,mesh3d:M,scattergl:b,ohlc:A,candlestick:A},layout:{calendar:y(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:w},yaxis:{calendar:w},scene:{xaxis:{calendar:w},yaxis:{calendar:w},zaxis:{calendar:w}},polar:{radialaxis:{calendar:w}}},transforms:{filter:{valuecalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:i,handleDefaults:a,handleTraceDefaults:r,CANONICAL_SUNDAY:f,CANONICAL_TICK:n,DFLTRANGE:l,getCal:p,worldCalFmt:v}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(e,I,B){B.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],B.defaultLine="#444",B.lightLine="#eee",B.background="#fff",B.borderLine="#BEC8D9",B.lightFraction=100*(14-4)/(15-4)},{}],366:[function(e,I,B){var u=e("tinycolor2"),s=e("fast-isnumeric"),m=e("../../lib/array").isTypedArray,x=I.exports={},t=e("./attributes");x.defaults=t.defaults;var i=x.defaultLine=t.defaultLine;x.lightLine=t.lightLine;var a=x.background=t.background;x.tinyRGB=function(n){var f=n.toRgb();return"rgb("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+")"},x.rgb=function(n){return x.tinyRGB(u(n))},x.opacity=function(n){return n?u(n).getAlpha():0},x.addOpacity=function(n,f){var l=u(n).toRgb();return"rgba("+Math.round(l.r)+", "+Math.round(l.g)+", "+Math.round(l.b)+", "+f+")"},x.combine=function(n,f){var l=u(n).toRgb();if(l.a===1)return u(n).toRgbString();var o=u(f||a).toRgb(),c=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},v={r:c.r*(1-l.a)+l.r*l.a,g:c.g*(1-l.a)+l.g*l.a,b:c.b*(1-l.a)+l.b*l.a};return u(v).toRgbString()},x.contrast=function(n,f,l){var o=u(n);o.getAlpha()!==1&&(o=u(x.combine(n,a)));var c=o.isDark()?f?o.lighten(f):a:l?o.darken(l):i;return c.toString()},x.stroke=function(n,f){var l=u(f);n.style({stroke:x.tinyRGB(l),"stroke-opacity":l.getAlpha()})},x.fill=function(n,f){var l=u(f);n.style({fill:x.tinyRGB(l),"fill-opacity":l.getAlpha()})},x.clean=function(n){if(!(!n||typeof n!="object")){var f=Object.keys(n),l,o,c,v;for(l=0;l<f.length;l++)if(c=f[l],v=n[c],c.substr(c.length-5)==="color")if(Array.isArray(v))for(o=0;o<v.length;o++)v[o]=r(v[o]);else n[c]=r(v);else if(c.substr(c.length-10)==="colorscale"&&Array.isArray(v))for(o=0;o<v.length;o++)Array.isArray(v[o])&&(v[o][1]=r(v[o][1]));else if(Array.isArray(v)){var d=v[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(o=0;o<v.length;o++)x.clean(v[o])}else v&&typeof v=="object"&&!m(v)&&x.clean(v)}};function r(n){if(s(n)||typeof n!="string")return n;var f=n.trim();if(f.substr(0,3)!=="rgb")return n;var l=f.match(/^rgba?\s*\(([^()]*)\)$/);if(!l)return n;var o=l[1].trim().split(/\s*[\s,]\s*/),c=f.charAt(3)==="a"&&o.length===4;if(!c&&o.length!==3)return n;for(var v=0;v<o.length;v++){if(!o[v].length||(o[v]=Number(o[v]),!(o[v]>=0)))return n;if(v===3)o[v]>1&&(o[v]=1);else if(o[v]>=1)return n}var d=Math.round(o[0]*255)+", "+Math.round(o[1]*255)+", "+Math.round(o[2]*255);return c?"rgba("+d+", "+o[3]+")":"rgb("+d+")"}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(e,I,B){var u=e("../../plots/cartesian/layout_attributes"),s=e("../../plots/font_attributes"),m=e("../../lib/extend").extendFlat,x=e("../../plot_api/edit_types").overrideAll;I.exports=x({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:u.linecolor,outlinewidth:u.linewidth,bordercolor:u.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:u.tickmode,nticks:u.nticks,tick0:u.tick0,dtick:u.dtick,tickvals:u.tickvals,ticktext:u.ticktext,ticks:m({},u.ticks,{dflt:""}),ticklabeloverflow:m({},u.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:u.ticklen,tickwidth:u.tickwidth,tickcolor:u.tickcolor,showticklabels:u.showticklabels,tickfont:s({}),tickangle:u.tickangle,tickformat:u.tickformat,tickformatstops:u.tickformatstops,tickprefix:u.tickprefix,showtickprefix:u.showtickprefix,ticksuffix:u.ticksuffix,showticksuffix:u.showticksuffix,separatethousands:u.separatethousands,exponentformat:u.exponentformat,minexponent:u.minexponent,showexponent:u.showexponent,title:{text:{valType:"string"},font:s({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:s({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(e,I,B){I.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(e,I,B){var u=e("../../lib"),s=e("../../plot_api/plot_template"),m=e("../../plots/cartesian/tick_value_defaults"),x=e("../../plots/cartesian/tick_mark_defaults"),t=e("../../plots/cartesian/tick_label_defaults"),i=e("../../plots/cartesian/prefix_suffix_defaults"),a=e("./attributes");I.exports=function(n,f,l){var o=s.newContainer(f,"colorbar"),c=n.colorbar||{};function v(S,k){return u.coerce(c,o,a,S,k)}var d=l.margin||{t:0,b:0,l:0,r:0},p=l.width-d.l-d.r,y=l.height-d.t-d.b,g=v("orientation"),A=g==="v",b=v("thicknessmode");v("thickness",b==="fraction"?30/(A?p:y):30);var M=v("lenmode");v("len",M==="fraction"?1:A?y:p),v("x",A?1.02:.5),v("xanchor",A?"left":"center"),v("xpad"),v("y",A?.5:1.02),v("yanchor",A?"middle":"bottom"),v("ypad"),u.noneOrAll(c,o,["x","y"]),v("outlinecolor"),v("outlinewidth"),v("bordercolor"),v("borderwidth"),v("bgcolor");var w=u.coerce(c,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:A?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");v("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),m(c,o,v,"linear");var T=l.font,_={outerTicks:!1,font:T};w.indexOf("inside")!==-1&&(_.bgColor="black"),i(c,o,v,"linear",_),t(c,o,v,"linear",_),x(c,o,v,"linear",_),v("title.text",l._dfltTitle.colorbar);var h=o.tickfont,L=u.extendFlat({},h,{color:T.color,size:u.bigFont(h.size)});u.coerceFont(v,"title.font",L),v("title.side",A?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(e,I,B){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../plots/cartesian/axes"),i=e("../dragelement"),a=e("../../lib"),r=a.strTranslate,n=e("../../lib/extend").extendFlat,f=e("../../lib/setcursor"),l=e("../drawing"),o=e("../color"),c=e("../titles"),v=e("../../lib/svg_text_utils"),d=e("../colorscale/helpers").flipScale,p=e("../../plots/cartesian/axis_defaults"),y=e("../../plots/cartesian/position_defaults"),g=e("../../plots/cartesian/layout_attributes"),A=e("../../constants/alignment"),b=A.LINE_SPACING,M=A.FROM_TL,w=A.FROM_BR,T=e("./constants").cn;function _(O){var F=O._fullLayout,D=F._infolayer.selectAll("g."+T.colorbar).data(h(O),function(R){return R._id});D.enter().append("g").attr("class",function(R){return R._id}).classed(T.colorbar,!0),D.each(function(R){var U=u.select(this);a.ensureSingle(U,"rect",T.cbbg),a.ensureSingle(U,"g",T.cbfills),a.ensureSingle(U,"g",T.cblines),a.ensureSingle(U,"g",T.cbaxis,function(X){X.classed(T.crisp,!0)}),a.ensureSingle(U,"g",T.cbtitleunshift,function(X){X.append("g").classed(T.cbtitle,!0)}),a.ensureSingle(U,"rect",T.cboutline);var N=L(U,R,O);N&&N.then&&(O._promises||[]).push(N),O._context.edits.colorbarPosition&&S(U,R,O)}),D.exit().each(function(R){m.autoMargin(O,R._id)}).remove(),D.order()}function h(O){var F=O._fullLayout,D=O.calcdata,R=[],U,N,X,j;function ee(K){return n(K,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function q(){typeof j.calc=="function"?j.calc(O,X,U):(U._fillgradient=N.reversescale?d(N.colorscale):N.colorscale,U._zrange=[N[j.min],N[j.max]])}for(var G=0;G<D.length;G++){var J=D[G];X=J[0].trace;var le=X._module.colorbar;if(X.visible===!0&&le)for(var fe=Array.isArray(le),se=fe?le:[le],V=0;V<se.length;V++){j=se[V];var Y=j.container;N=Y?X[Y]:X,N&&N.showscale&&(U=ee(N.colorbar),U._id="cb"+X.uid+(fe&&Y?"-"+Y:""),U._traceIndex=X.index,U._propPrefix=(Y?Y+".":"")+"colorbar.",U._meta=X._meta,q(),R.push(U))}}for(var ne in F._colorAxes)if(N=F[ne],N.showscale){var te=F._colorAxes[ne];U=ee(N.colorbar),U._id="cb"+ne,U._propPrefix=ne+".colorbar.",U._meta=F._meta,j={min:"cmin",max:"cmax"},te[0]!=="heatmap"&&(X=te[1],j.calc=X._module.colorbar.calc),q(),R.push(U)}return R}function L(O,F,D){var R=F.orientation==="v",U=F.len,N=F.lenmode,X=F.thickness,j=F.thicknessmode,ee=F.outlinewidth,q=F.borderwidth,G=F.bgcolor,J=F.xanchor,le=F.yanchor,fe=F.xpad,se=F.ypad,V=F.x,Y=R?F.y:1-F.y,ne=D._fullLayout,te=ne._size,K=F._fillcolor,$=F._line,ae=F.title,ie=ae.side,oe=F._zrange||u.extent((typeof K=="function"?K:$.color).domain()),ue=typeof $.color=="function"?$.color:function(){return $.color},xe=typeof K=="function"?K:function(){return K},he=F._levels,me=k(D,F,oe),be=me.fill,Ce=me.line,Se=Math.round(X*(j==="fraction"?R?te.w:te.h:1)),Be=Se/(R?te.w:te.h),Ye=Math.round(U*(N==="fraction"?R?te.h:te.w:1)),Xe=Ye/(R?te.h:te.w),Te=Math.round(R?V*te.w+fe:Y*te.h+se),Ie={center:.5,right:1}[J]||0,Ze={top:1,middle:.5}[le]||0,rt=R?V-Ie*Be:Y-Ze*Be,Ge=R?Y-Ze*Xe:V-Ie*Xe,ze=Math.round(R?te.h*(1-Ge):te.w*Ge);F._lenFrac=Xe,F._thickFrac=Be,F._uFrac=rt,F._vFrac=Ge;var We=F._axis=P(D,F,oe);We.position=Be+(R?V+fe/te.w:Y+se/te.h);var mt=["top","bottom"].indexOf(ie)!==-1;if(R&&mt&&(We.title.side=ie,We.titlex=V+fe/te.w,We.titley=Ge+(ae.side==="top"?Xe-se/te.h:se/te.h)),!R&&!mt&&(We.title.side=ie,We.titley=Y+se/te.h,We.titlex=Ge+fe/te.w),$.color&&F.tickmode==="auto"){We.tickmode="linear",We.tick0=he.start;var Ft=he.size,Xt=a.constrain(Ye/50,4,15)+1,Pt=(oe[1]-oe[0])/((F.nticks||Xt)*Ft);if(Pt>1){var Ut=Math.pow(10,Math.floor(Math.log(Pt)/Math.LN10));Ft*=Ut*a.roundUp(Pt/Ut,[2,5,10]),(Math.abs(he.start)/he.size+1e-6)%1<2e-6&&(We.tick0=0)}We.dtick=Ft}We.domain=R?[Ge+se/te.h,Ge+Xe-se/te.h]:[Ge+fe/te.w,Ge+Xe-fe/te.w],We.setScale(),O.attr("transform",r(Math.round(te.l),Math.round(te.t)));var Gt=O.select("."+T.cbtitleunshift).attr("transform",r(-Math.round(te.l),-Math.round(te.t))),It=We.ticklabelposition,Ct=We.title.font.size,lt=O.select("."+T.cbaxis),dt,et=0,Pe=0;function Je(Vt,$t){var Ht={propContainer:We,propName:F._propPrefix+"title",traceIndex:F._traceIndex,_meta:F._meta,placeholder:ne._dfltTitle.colorbar,containerGroup:O.select("."+T.cbtitle)},tr=Vt.charAt(0)==="h"?Vt.substr(1):"h"+Vt;O.selectAll("."+tr+",."+tr+"-math-group").remove(),c.draw(D,Vt,n(Ht,$t||{}))}function it(){if(R&&mt||!R&&!mt){var Vt,$t;ie==="top"&&(Vt=fe+te.l+te.w*V,$t=se+te.t+te.h*(1-Ge-Xe)+3+Ct*.75),ie==="bottom"&&(Vt=fe+te.l+te.w*V,$t=se+te.t+te.h*(1-Ge)-3-Ct*.25),ie==="right"&&($t=se+te.t+te.h*Y+3+Ct*.75,Vt=fe+te.l+te.w*Ge),Je(We._id+"title",{attributes:{x:Vt,y:$t,"text-anchor":R?"start":"middle"}})}}function ht(){if(R&&!mt||!R&&mt){var Vt=We.position||0,$t=We._offset+We._length/2,Ht,tr;if(ie==="right")tr=$t,Ht=te.l+te.w*Vt+10+Ct*(We.showticklabels?1:.5);else if(Ht=$t,ie==="bottom"&&(tr=te.t+te.h*Vt+10+(It.indexOf("inside")===-1?We.tickfont.size:0)+(We.ticks!=="intside"&&F.ticklen||0)),ie==="top"){var qe=ae.text.split("<br>").length;tr=te.t+te.h*Vt+10-Se-b*Ct*qe}Je((R?"h":"v")+We._id+"title",{avoid:{selection:u.select(D).selectAll("g."+We._id+"tick"),side:ie,offsetTop:R?0:te.t,offsetLeft:R?te.l:0,maxShift:R?ne.width:ne.height},attributes:{x:Ht,y:tr,"text-anchor":"middle"},transform:{rotate:R?-90:0,offset:0}})}}function zt(){if(!R&&!mt||R&&mt){var Vt=O.select("."+T.cbtitle),$t=Vt.select("text"),Ht=[-ee/2,ee/2],tr=Vt.select(".h"+We._id+"title-math-group").node(),qe=15.6;$t.node()&&(qe=parseInt($t.node().style.fontSize,10)*b);var xt;if(tr?(xt=l.bBox(tr),Pe=xt.width,et=xt.height,et>qe&&(Ht[1]-=(et-qe)/2)):$t.node()&&!$t.classed(T.jsPlaceholder)&&(xt=l.bBox($t.node()),Pe=xt.width,et=xt.height),R){if(et){if(et+=5,ie==="top")We.domain[1]-=et/te.h,Ht[1]*=-1;else{We.domain[0]+=et/te.h;var Rt=v.lineCount($t);Ht[1]+=(1-Rt)*qe}Vt.attr("transform",r(Ht[0],Ht[1])),We.setScale()}}else Pe&&(ie==="right"&&(We.domain[0]+=(Pe+Ct/2)/te.w),Vt.attr("transform",r(Ht[0],Ht[1])),We.setScale())}O.selectAll("."+T.cbfills+",."+T.cblines).attr("transform",R?r(0,Math.round(te.h*(1-We.domain[1]))):r(Math.round(te.w*We.domain[0]),0)),lt.attr("transform",R?r(0,Math.round(-te.t)):r(Math.round(-te.l),0));var fr=O.select("."+T.cbfills).selectAll("rect."+T.cbfill).attr("style","").data(be);fr.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),fr.exit().remove();var br=oe.map(We.c2p).map(Math.round).sort(function(lr,Yr){return lr-Yr});fr.each(function(lr,Yr){var nt=[Yr===0?oe[0]:(be[Yr]+be[Yr-1])/2,Yr===be.length-1?oe[1]:(be[Yr]+be[Yr+1])/2].map(We.c2p).map(Math.round);R&&(nt[1]=a.constrain(nt[1]+(nt[1]>nt[0])?1:-1,br[0],br[1]));var Ae=u.select(this).attr(R?"x":"y",Te).attr(R?"y":"x",u.min(nt)).attr(R?"width":"height",Math.max(Se,2)).attr(R?"height":"width",Math.max(u.max(nt)-u.min(nt),2));if(F._fillgradient)l.gradient(Ae,D,F._id,R?"vertical":"horizontalreversed",F._fillgradient,"fill");else{var Ee=xe(lr).replace("e-","");Ae.attr("fill",s(Ee).toHexString())}});var pr=O.select("."+T.cblines).selectAll("path."+T.cbline).data($.color&&$.width?Ce:[]);pr.enter().append("path").classed(T.cbline,!0),pr.exit().remove(),pr.each(function(lr){var Yr=Te,nt=Math.round(We.c2p(lr))+$.width/2%1;u.select(this).attr("d","M"+(R?Yr+","+nt:nt+","+Yr)+(R?"h":"v")+Se).call(l.lineGroupStyle,$.width,ue(lr),$.dash)}),lt.selectAll("g."+We._id+"tick,path").remove();var Tr=Te+Se+(ee||0)/2-(F.ticks==="outside"?1:0),Nr=t.calcTicks(We),Ir=t.getTickSigns(We)[2];return t.drawTicks(D,We,{vals:We.ticks==="inside"?t.clipEnds(We,Nr):Nr,layer:lt,path:t.makeTickPath(We,Tr,Ir),transFn:t.makeTransTickFn(We)}),t.drawLabels(D,We,{vals:Nr,layer:lt,transFn:t.makeTransTickLabelFn(We),labelFns:t.makeLabelFns(We,Tr)})}function Lt(){var Vt,$t=Se+ee/2;It.indexOf("inside")===-1&&(Vt=l.bBox(lt.node()),$t+=R?Vt.width:Vt.height),dt=Gt.select("text");var Ht=0,tr=R&&ie==="top",qe=!R&&ie==="right",xt=0;if(dt.node()&&!dt.classed(T.jsPlaceholder)){var Rt,fr=Gt.select(".h"+We._id+"title-math-group").node();fr&&(R&&mt||!R&&!mt)?(Vt=l.bBox(fr),Ht=Vt.width,Rt=Vt.height):(Vt=l.bBox(Gt.node()),Ht=Vt.right-te.l-(R?Te:ze),Rt=Vt.bottom-te.t-(R?ze:Te),!R&&ie==="top"&&($t+=Vt.height,xt=Vt.height)),qe&&(dt.attr("transform",r(Ht/2+Ct/2,0)),Ht*=2),$t=Math.max($t,R?Ht:Rt)}var br=(R?fe:se)*2+$t+q+ee/2,pr=0;!R&&ae.text&&le==="bottom"&&Y<=0&&(pr=br/2,br+=pr,xt+=pr),ne._hColorbarMoveTitle=pr,ne._hColorbarMoveCBTitle=xt;var Tr=q+ee;O.select("."+T.cbbg).attr("x",(R?Te:ze)-Tr/2-(R?fe:0)).attr("y",(R?ze:Te)-(R?Ye:se+xt-pr)).attr(R?"width":"height",Math.max(br-pr,2)).attr(R?"height":"width",Math.max(Ye+Tr,2)).call(o.fill,G).call(o.stroke,F.bordercolor).style("stroke-width",q);var Nr=qe?Math.max(Ht-10,0):0;if(O.selectAll("."+T.cboutline).attr("x",(R?Te:ze+fe)+Nr).attr("y",(R?ze+se-Ye:Te)+(tr?et:0)).attr(R?"width":"height",Math.max(Se,2)).attr(R?"height":"width",Math.max(Ye-(R?2*se+et:2*fe+Nr),2)).call(o.stroke,F.outlinecolor).style({fill:"none","stroke-width":ee}),O.attr("transform",r(te.l-(R?Ie*br:0),te.t-(R?0:(1-Ze)*br-xt))),!R&&(q||s(G).getAlpha()&&!s.equals(ne.paper_bgcolor,G))){var Ir=lt.selectAll("text"),lr=Ir[0].length,Yr=O.select("."+T.cbbg).node(),nt=l.bBox(Yr),Ae=l.getTranslate(O),Ee=2;Ir.each(function(kt,jt){var Mr=0,Sr=lr-1;if(jt===Mr||jt===Sr){var Lr=l.bBox(this),Ar=l.getTranslate(this),Ur;if(jt===Sr){var fn=Lr.right+Ar.x,Cr=nt.right+Ae.x+ze-q-Ee+V;Ur=Cr-fn,Ur>0&&(Ur=0)}else if(jt===Mr){var _r=Lr.left+Ar.x,En=nt.left+Ae.x+ze+q+Ee;Ur=En-_r,Ur<0&&(Ur=0)}Ur&&(lr<3?this.setAttribute("transform","translate("+Ur+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Fe={},Ke=M[J],tt=w[J],ut=M[le],ct=w[le],yt=br-Se;R?(N==="pixels"?(Fe.y=Y,Fe.t=Ye*ut,Fe.b=Ye*ct):(Fe.t=Fe.b=0,Fe.yt=Y+U*ut,Fe.yb=Y-U*ct),j==="pixels"?(Fe.x=V,Fe.l=br*Ke,Fe.r=br*tt):(Fe.l=yt*Ke,Fe.r=yt*tt,Fe.xl=V-X*Ke,Fe.xr=V+X*tt)):(N==="pixels"?(Fe.x=V,Fe.l=Ye*Ke,Fe.r=Ye*tt):(Fe.l=Fe.r=0,Fe.xl=V+U*Ke,Fe.xr=V-U*tt),j==="pixels"?(Fe.y=1-Y,Fe.t=br*ut,Fe.b=br*ct):(Fe.t=yt*ut,Fe.b=yt*ct,Fe.yt=Y-X*ut,Fe.yb=Y+X*ct)),m.autoMargin(D,F._id,Fe)}return a.syncOrAsync([m.previousPromises,it,zt,ht,m.previousPromises,Lt],D)}function S(O,F,D){var R=F.orientation==="v",U=D._fullLayout,N=U._size,X,j,ee;i.init({element:O.node(),gd:D,prepFn:function(){X=O.attr("transform"),f(O)},moveFn:function(q,G){O.attr("transform",X+r(q,G)),j=i.align((R?F._uFrac:F._vFrac)+q/N.w,R?F._thickFrac:F._lenFrac,0,1,F.xanchor),ee=i.align((R?F._vFrac:1-F._uFrac)-G/N.h,R?F._lenFrac:F._thickFrac,0,1,F.yanchor);var J=i.getCursor(j,ee,F.xanchor,F.yanchor);f(O,J)},doneFn:function(){if(f(O),j!==void 0&&ee!==void 0){var q={};q[F._propPrefix+"x"]=j,q[F._propPrefix+"y"]=ee,F._traceIndex!==void 0?x.call("_guiRestyle",D,q,F._traceIndex):x.call("_guiRelayout",D,q)}}})}function k(O,F,D){var R=F._levels,U=[],N=[],X,j,ee=R.end+R.size/100,q=R.size,G=1.001*D[0]-.001*D[1],J=1.001*D[1]-.001*D[0];for(j=0;j<1e5&&(X=R.start+j*q,!(q>0?X>=ee:X<=ee));j++)X>G&&X<J&&U.push(X);if(F._fillgradient)N=[0];else if(typeof F._fillcolor=="function"){var le=F._filllevels;if(le)for(ee=le.end+le.size/100,q=le.size,j=0;j<1e5&&(X=le.start+j*q,!(q>0?X>=ee:X<=ee));j++)X>D[0]&&X<D[1]&&N.push(X);else N=U.map(function(fe){return fe-R.size/2}),N.push(N[N.length-1]+R.size)}else F._fillcolor&&typeof F._fillcolor=="string"&&(N=[0]);return R.size<0&&(U.reverse(),N.reverse()),{line:U,fill:N}}function P(O,F,D){var R=O._fullLayout,U=F.orientation==="v",N={type:"linear",range:D,tickmode:F.tickmode,nticks:F.nticks,tick0:F.tick0,dtick:F.dtick,tickvals:F.tickvals,ticktext:F.ticktext,ticks:F.ticks,ticklen:F.ticklen,tickwidth:F.tickwidth,tickcolor:F.tickcolor,showticklabels:F.showticklabels,ticklabelposition:F.ticklabelposition,ticklabeloverflow:F.ticklabeloverflow,tickfont:F.tickfont,tickangle:F.tickangle,tickformat:F.tickformat,exponentformat:F.exponentformat,minexponent:F.minexponent,separatethousands:F.separatethousands,showexponent:F.showexponent,showtickprefix:F.showtickprefix,tickprefix:F.tickprefix,showticksuffix:F.showticksuffix,ticksuffix:F.ticksuffix,title:F.title,showline:!0,anchor:"free",side:U?"right":"bottom",position:1},X=U?"y":"x",j={type:"linear",_id:X+F._id},ee={letter:X,font:R.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:R.calendar};function q(G,J){return a.coerce(N,j,g,G,J)}return p(N,j,q,ee,R),y(N,j,q,ee),j}I.exports={draw:_}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(e,I,B){var u=e("../../lib");I.exports=function(m){return u.isPlainObject(m.colorbar)}},{"../../lib":503}],372:[function(e,I,B){I.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(e,I,B){var u=e("../colorbar/attributes"),s=e("../../lib/regex").counter,m=e("../../lib/sort_object_keys"),x=e("./scales.js").scales;m(x),I.exports=function(i,a){i=i||"",a=a||{};var r=a.cLetter||"c";"onlyIfNumerical"in a?a.onlyIfNumerical:Boolean(i);var n="noScale"in a?a.noScale:i==="marker.line",f="showScaleDflt"in a?a.showScaleDflt:r==="z",l=typeof a.colorscaleDflt=="string"?x[a.colorscaleDflt]:null,o=a.editTypeOverride||"",c;"colorAttr"in a?c=a.colorAttr:c={z:"z",c:"color"}[r];var v=r+"auto",d=r+"min",p=r+"max",y=r+"mid",g={};g[d]=g[p]=void 0;var A={};A[v]=!1;var b={};return c==="color"&&(b.color={valType:"color",arrayOk:!0,editType:o||"style"},a.anim&&(b.color.anim=!0)),b[v]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},b[d]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:A},b[p]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:A},b[y]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},b.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:a.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(b.showscale={valType:"boolean",dflt:f,editType:"calc"},b.colorbar=u),a.noColorAxis||(b.coloraxis={valType:"subplotid",regex:s("coloraxis"),dflt:null,editType:"calc"}),b}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("./helpers").extractOpts;I.exports=function(t,i,a){var r=t._fullLayout,n=a.vals,f=a.containerStr,l=f?s.nestedProperty(i,f).get():i,o=m(l),c=o.auto!==!1,v=o.min,d=o.max,p=o.mid,y=function(){return s.aggNums(Math.min,null,n)},g=function(){return s.aggNums(Math.max,null,n)};if(v===void 0?v=y():c&&(l._colorAx&&u(v)?v=Math.min(v,y()):v=y()),d===void 0?d=g():c&&(l._colorAx&&u(d)?d=Math.max(d,g()):d=g()),c&&p!==void 0&&(d-p>p-v?v=p-(d-p):d-p<p-v&&(d=p+(p-v))),v===d&&(v-=.5,d+=.5),o._sync("min",v),o._sync("max",d),o.autocolorscale){var A;v*d<0?A=r.colorscale.diverging:v>=0?A=r.colorscale.sequential:A=r.colorscale.sequentialminus,o._sync("colorscale",A)}}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(e,I,B){var u=e("../../lib"),s=e("./helpers").hasColorscale,m=e("./helpers").extractOpts;I.exports=function(t,i){function a(v,d){var p=v["_"+d];p!==void 0&&(v[d]=p)}function r(v,d){var p=d.container?u.nestedProperty(v,d.container).get():v;if(p)if(p.coloraxis)p._colorAx=i[p.coloraxis];else{var y=m(p),g=y.auto;(g||y.min===void 0)&&a(p,d.min),(g||y.max===void 0)&&a(p,d.max),y.autocolorscale&&a(p,"colorscale")}}for(var n=0;n<t.length;n++){var f=t[n],l=f._module.colorbar;if(l)if(Array.isArray(l))for(var o=0;o<l.length;o++)r(f,l[o]);else r(f,l);s(f,"marker.line")&&r(f,{container:"marker.line",min:"cmin",max:"cmax"})}for(var c in i._colorAxes)r(i[c],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../colorbar/has_colorbar"),x=e("../colorbar/defaults"),t=e("./scales").isValid,i=e("../../registry").traceIs;function a(r,n){var f=n.slice(0,n.length-1);return n?s.nestedProperty(r,f).get()||{}:r}I.exports=function r(n,f,l,o,c){var v=c.prefix,d=c.cLetter,p="_module"in f,y=a(n,v),g=a(f,v),A=a(f._template||{},v)||{},b=function(){return delete n.coloraxis,delete f.coloraxis,r(n,f,l,o,c)};if(p){var M=l._colorAxes||{},w=o(v+"coloraxis");if(w){var T=i(f,"contour")&&s.nestedProperty(f,"contours.coloring").get()||"heatmap",_=M[w];_?(_[2].push(b),_[0]!==T&&(_[0]=!1,s.warn(["Ignoring coloraxis:",w,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[w]=[T,f,[b]];return}}var h=y[d+"min"],L=y[d+"max"],S=u(h)&&u(L)&&h<L,k=o(v+d+"auto",!S);k?o(v+d+"mid"):(o(v+d+"min"),o(v+d+"max"));var P=y.colorscale,O=A.colorscale,F;if(P!==void 0&&(F=!t(P)),O!==void 0&&(F=!t(O)),o(v+"autocolorscale",F),o(v+"colorscale"),o(v+"reversescale"),v!=="marker.line."){var D;v&&p&&(D=m(y));var R=o(v+"showscale",D);R&&(v&&A&&(g._template=A),x(y,g,l))}}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(e,I,B){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("fast-isnumeric"),x=e("../../lib"),t=e("../color"),i=e("./scales").isValid;function a(p,y,g){var A=y?x.nestedProperty(p,y).get()||{}:p,b=A[g||"color"],M=!1;if(x.isArrayOrTypedArray(b)){for(var w=0;w<b.length;w++)if(m(b[w])){M=!0;break}}return x.isPlainObject(A)&&(M||A.showscale===!0||m(A.cmin)&&m(A.cmax)||i(A.colorscale)||x.isPlainObject(A.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],n=["min","max","mid","auto"];function f(p){var y=p._colorAx,g=y||p,A={},b,M,w;for(M=0;M<r.length;M++)w=r[M],A[w]=g[w];if(y)for(b="c",M=0;M<n.length;M++)w=n[M],A[w]=g["c"+w];else{var T;for(M=0;M<n.length;M++){if(w=n[M],T="c"+w,T in g){A[w]=g[T];continue}T="z"+w,T in g&&(A[w]=g[T])}b=T.charAt(0)}return A._sync=function(_,h){var L=n.indexOf(_)!==-1?b+_:_;g[L]=g["_"+L]=h},A}function l(p){for(var y=f(p),g=y.min,A=y.max,b=y.reversescale?o(y.colorscale):y.colorscale,M=b.length,w=new Array(M),T=new Array(M),_=0;_<M;_++){var h=b[_];w[_]=g+h[0]*(A-g),T[_]=h[1]}return{domain:w,range:T}}function o(p){for(var y=p.length,g=new Array(y),A=y-1,b=0;A>=0;A--,b++){var M=p[A];g[b]=[1-M[0],M[1]]}return g}function c(p,y){y=y||{};for(var g=p.domain,A=p.range,b=A.length,M=new Array(b),w=0;w<b;w++){var T=s(A[w]).toRgb();M[w]=[T.r,T.g,T.b,T.a]}var _=u.scale.linear().domain(g).range(M).clamp(!0),h=y.noNumericCheck,L=y.returnArray,S;return h&&L?S=_:h?S=function(k){return d(_(k))}:L?S=function(k){return m(k)?_(k):s(k).isValid()?k:t.defaultLine}:S=function(k){return m(k)?d(_(k)):s(k).isValid()?k:t.defaultLine},S.domain=_.domain,S.range=function(){return A},S}function v(p,y){return c(l(p),y)}function d(p){var y={r:p[0],g:p[1],b:p[2],a:p[3]};return s(y).toRgbString()}I.exports={hasColorscale:a,extractOpts:f,extractScale:l,flipScale:o,makeColorScaleFunc:c,makeColorScaleFuncFromTrace:v}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(e,I,B){var u=e("./scales"),s=e("./helpers");I.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:u.scales,defaultScale:u.defaultScale,getScale:u.get,isValidScale:u.isValid,hasColorscale:s.hasColorscale,extractOpts:s.extractOpts,extractScale:s.extractScale,flipScale:s.flipScale,makeColorScaleFunc:s.makeColorScaleFunc,makeColorScaleFuncFromTrace:s.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(e,I,B){var u=e("../../lib/extend").extendFlat,s=e("./attributes"),m=e("./scales").scales;I.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:m.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:m.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:m.RdBu,editType:"calc"}},coloraxis:u({_isSubplotObj:!0,editType:"calc"},s("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(e,I,B){var u=e("../../lib"),s=e("../../plot_api/plot_template"),m=e("./layout_attributes"),x=e("./defaults");I.exports=function(i,a){function r(p,y){return u.coerce(i,a,m,p,y)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var n=a._colorAxes,f,l;function o(p,y){return u.coerce(f,l,m.coloraxis,p,y)}for(var c in n){var v=n[c];if(v[0])f=i[c]||{},l=s.newContainer(a,c,"coloraxis"),l._name=c,x(f,l,a,o,{prefix:"",cLetter:"c"});else{for(var d=0;d<v[2].length;d++)v[2][d]();delete a._colorAxes[c]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(e,I,B){var u=e("tinycolor2"),s={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},m=s.RdBu;function x(a,r){if(r||(r=m),!a)return r;function n(){try{a=s[a]||JSON.parse(a)}catch{a=r}}return typeof a=="string"&&(n(),typeof a=="string"&&n()),t(a)?a:r}function t(a){var r=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var n=0;n<a.length;n++){var f=a[n];if(f.length!==2||+f[0]<r||!u(f[1]).isValid())return!1;r=+f[0]}return!0}function i(a){return s[a]!==void 0?!0:t(a)}I.exports={scales:s,defaultScale:m,get:x,isValid:i}},{tinycolor2:312}],382:[function(e,I,B){I.exports=function(s,m,x,t,i){var a=(s-x)/(t-x),r=a+m/(t-x),n=(a+r)/2;return i==="left"||i==="bottom"?a:i==="center"||i==="middle"?n:i==="right"||i==="top"?r:a<2/3-n?a:r>4/3-n?r:n}},{}],383:[function(e,I,B){var u=e("../../lib"),s=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];I.exports=function(x,t,i,a){return i==="left"?x=0:i==="center"?x=1:i==="right"?x=2:x=u.constrain(Math.floor(x*3),0,2),a==="bottom"?t=0:a==="middle"?t=1:a==="top"?t=2:t=u.constrain(Math.floor(t*3),0,2),s[t][x]}},{"../../lib":503}],384:[function(e,I,B){B.selectMode=function(u){return u==="lasso"||u==="select"},B.drawMode=function(u){return u==="drawclosedpath"||u==="drawopenpath"||u==="drawline"||u==="drawrect"||u==="drawcircle"},B.openMode=function(u){return u==="drawline"||u==="drawopenpath"},B.rectMode=function(u){return u==="select"||u==="drawline"||u==="drawrect"||u==="drawcircle"},B.freeMode=function(u){return u==="lasso"||u==="drawclosedpath"||u==="drawopenpath"},B.selectingOrDrawing=function(u){return B.freeMode(u)||B.rectMode(u)}},{}],385:[function(e,I,B){var u=e("mouse-event-offset"),s=e("has-hover"),m=e("has-passive-events"),x=e("../../lib").removeElement,t=e("../../plots/cartesian/constants"),i=I.exports={};i.align=e("./align"),i.getCursor=e("./cursor");var a=e("./unhover");i.unhover=a.wrapped,i.unhoverRaw=a.raw,i.init=function(l){var o=l.gd,c=1,v=o._context.doubleClickDelay,d=l.element,p,y,g,A,b,M,w,T;o._mouseDownTime||(o._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=L,m?(d._ontouchstart&&d.removeEventListener("touchstart",d._ontouchstart),d._ontouchstart=L,d.addEventListener("touchstart",L,{passive:!1})):d.ontouchstart=L;function _(P,O,F){return Math.abs(P)<F&&(P=0),Math.abs(O)<F&&(O=0),[P,O]}var h=l.clampFn||_;function L(P){o._dragged=!1,o._dragging=!0;var O=n(P);p=O[0],y=O[1],w=P.target,M=P,T=P.buttons===2||P.ctrlKey,typeof P.clientX=="undefined"&&typeof P.clientY=="undefined"&&(P.clientX=p,P.clientY=y),g=new Date().getTime(),g-o._mouseDownTime<v?c+=1:(c=1,o._mouseDownTime=g),l.prepFn&&l.prepFn(P,p,y),s&&!T?(b=r(),b.style.cursor=window.getComputedStyle(d).cursor):s||(b=document,A=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),l.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(P){P.preventDefault();var O=n(P),F=l.minDrag||t.MINDRAG,D=h(O[0]-p,O[1]-y,F),R=D[0],U=D[1];(R||U)&&(o._dragged=!0,i.unhover(o,P)),o._dragged&&l.moveFn&&!T&&(o._dragdata={element:d,dx:R,dy:U},l.moveFn(R,U))}function k(P){if(delete o._dragdata,l.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),s?x(b):A&&(b.documentElement.style.cursor=A,A=null),!o._dragging){o._dragged=!1;return}if(o._dragging=!1,new Date().getTime()-o._mouseDownTime>v&&(c=Math.max(c-1,1)),o._dragged)l.doneFn&&l.doneFn();else if(l.clickFn&&l.clickFn(c,M),!T){var O;try{O=new MouseEvent("click",P)}catch{var F=n(P);O=document.createEvent("MouseEvents"),O.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,F[0],F[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}w.dispatchEvent(O)}o._dragging=!1,o._dragged=!1}};function r(){var f=document.createElement("div");f.className="dragcover";var l=f.style;return l.position="fixed",l.left=0,l.right=0,l.top=0,l.bottom=0,l.zIndex=999999999,l.background="none",document.body.appendChild(f),f}i.coverSlip=r;function n(f){return u(f.changedTouches?f.changedTouches[0]:f,document.body)}},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(e,I,B){var u=e("../../lib/events"),s=e("../../lib/throttle"),m=e("../../lib/dom").getGraphDiv,x=e("../fx/constants"),t=I.exports={};t.wrapped=function(i,a,r){i=m(i),i._fullLayout&&s.clear(i._fullLayout._uid+x.HOVERID),t.raw(i,a,r)},t.raw=function(a,r){var n=a._fullLayout,f=a._hoverdata;r||(r={}),!(r.target&&!a._dragged&&u.triggerHandler(a,"plotly_beforehover",r)===!1)&&(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),a._hoverdata=void 0,r.target&&f&&a.emit("plotly_unhover",{event:r,points:f}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(e,I,B){B.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},B.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=s.numberFormat,x=e("fast-isnumeric"),t=e("tinycolor2"),i=e("../../registry"),a=e("../color"),r=e("../colorscale"),n=s.strTranslate,f=e("../../lib/svg_text_utils"),l=e("../../constants/xmlns_namespaces"),o=e("../../constants/alignment"),c=o.LINE_SPACING,v=e("../../constants/interactions").DESELECTDIM,d=e("../../traces/scatter/subtypes"),p=e("../../traces/scatter/make_bubble_size_func"),y=e("../../components/fx/helpers").appendArrayPointValue,g=I.exports={};g.font=function(G,J,le,fe){s.isPlainObject(J)&&(fe=J.color,le=J.size,J=J.family),J&&G.style("font-family",J),le+1&&G.style("font-size",le+"px"),fe&&G.call(a.fill,fe)},g.setPosition=function(G,J,le){G.attr("x",J).attr("y",le)},g.setSize=function(G,J,le){G.attr("width",J).attr("height",le)},g.setRect=function(G,J,le,fe,se){G.call(g.setPosition,J,le).call(g.setSize,fe,se)},g.translatePoint=function(G,J,le,fe){var se=le.c2p(G.x),V=fe.c2p(G.y);if(x(se)&&x(V)&&J.node())J.node().nodeName==="text"?J.attr("x",se).attr("y",V):J.attr("transform",n(se,V));else return!1;return!0},g.translatePoints=function(G,J,le){G.each(function(fe){var se=u.select(this);g.translatePoint(fe,se,J,le)})},g.hideOutsideRangePoint=function(G,J,le,fe,se,V){J.attr("display",le.isPtWithinRange(G,se)&&fe.isPtWithinRange(G,V)?null:"none")},g.hideOutsideRangePoints=function(G,J){if(!!J._hasClipOnAxisFalse){var le=J.xaxis,fe=J.yaxis;G.each(function(se){var V=se[0].trace,Y=V.xcalendar,ne=V.ycalendar,te=i.traceIs(V,"bar-like")?".bartext":".point,.textpoint";G.selectAll(te).each(function(K){g.hideOutsideRangePoint(K,u.select(this),le,fe,Y,ne)})})}},g.crispRound=function(G,J,le){return!J||!x(J)?le||0:G._context.staticPlot?J:J<1?1:Math.round(J)},g.singleLineStyle=function(G,J,le,fe,se){J.style("fill","none");var V=(((G||[])[0]||{}).trace||{}).line||{},Y=le||V.width||0,ne=se||V.dash||"";a.stroke(J,fe||V.color),g.dashLine(J,ne,Y)},g.lineGroupStyle=function(G,J,le,fe){G.style("fill","none").each(function(se){var V=(((se||[])[0]||{}).trace||{}).line||{},Y=J||V.width||0,ne=fe||V.dash||"";u.select(this).call(a.stroke,le||V.color).call(g.dashLine,ne,Y)})},g.dashLine=function(G,J,le){le=+le||0,J=g.dashStyle(J,le),G.style({"stroke-dasharray":J,"stroke-width":le+"px"})},g.dashStyle=function(G,J){J=+J||1;var le=Math.max(J,3);return G==="solid"?G="":G==="dot"?G=le+"px,"+le+"px":G==="dash"?G=3*le+"px,"+3*le+"px":G==="longdash"?G=5*le+"px,"+5*le+"px":G==="dashdot"?G=3*le+"px,"+le+"px,"+le+"px,"+le+"px":G==="longdashdot"&&(G=5*le+"px,"+2*le+"px,"+le+"px,"+2*le+"px"),G},g.singleFillStyle=function(G){var J=u.select(G.node()),le=J.data(),fe=(((le[0]||[])[0]||{}).trace||{}).fillcolor;fe&&G.call(a.fill,fe)},g.fillGroupStyle=function(G){G.style("stroke-width",0).each(function(J){var le=u.select(this);J[0].trace&&le.call(a.fill,J[0].trace.fillcolor)})};var A=e("./symbol_defs");g.symbolNames=[],g.symbolFuncs=[],g.symbolNeedLines={},g.symbolNoDot={},g.symbolNoFill={},g.symbolList=[],Object.keys(A).forEach(function(G){var J=A[G],le=J.n;g.symbolList.push(le,String(le),G,le+100,String(le+100),G+"-open"),g.symbolNames[le]=G,g.symbolFuncs[le]=J.f,J.needLine&&(g.symbolNeedLines[le]=!0),J.noDot?g.symbolNoDot[le]=!0:g.symbolList.push(le+200,String(le+200),G+"-dot",le+300,String(le+300),G+"-open-dot"),J.noFill&&(g.symbolNoFill[le]=!0)});var b=g.symbolNames.length,M="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";g.symbolNumber=function(G){if(x(G))G=+G;else if(typeof G=="string"){var J=0;G.indexOf("-open")>0&&(J=100,G=G.replace("-open","")),G.indexOf("-dot")>0&&(J+=200,G=G.replace("-dot","")),G=g.symbolNames.indexOf(G),G>=0&&(G+=J)}return G%100>=b||G>=400?0:Math.floor(Math.max(G,0))};function w(G,J){var le=G%100;return g.symbolFuncs[le](J)+(G>=200?M:"")}var T={x1:1,x2:0,y1:0,y2:0},_={x1:0,x2:0,y1:1,y2:0},h=m("~f"),L={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:T},horizontalreversed:{node:"linearGradient",attrs:T,reversed:!0},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:!0}};g.gradient=function(G,J,le,fe,se,V){for(var Y=se.length,ne=L[fe],te=new Array(Y),K=0;K<Y;K++)ne.reversed?te[Y-1-K]=[h((1-se[K][0])*100),se[K][1]]:te[K]=[h(se[K][0]*100),se[K][1]];var $=J._fullLayout,ae="g"+$._uid+"-"+le,ie=$._defs.select(".gradients").selectAll("#"+ae).data([fe+te.join(";")],s.identity);ie.exit().remove(),ie.enter().append(ne.node).each(function(){var xe=u.select(this);ne.attrs&&xe.attr(ne.attrs),xe.attr("id",ae);var he=xe.selectAll("stop").data(te);he.exit().remove(),he.enter().append("stop"),he.each(function(me){var be=t(me[1]);u.select(this).attr({offset:me[0]+"%","stop-color":a.tinyRGB(be),"stop-opacity":be.getAlpha()})})}),G.style(V,j(ae,J)).style(V+"-opacity",null);var oe=function(xe){return"."+xe.attr("class").replace(/\s/g,".")},ue=oe(u.select(G.node().parentNode))+">"+oe(G);$._gradientUrlQueryParts[ue]=1},g.pattern=function(G,J,le,fe,se,V,Y,ne,te,K,$,ae){var ie=J==="legend";ne&&(te==="overlay"?(K=ne,$=a.contrast(K)):(K=void 0,$=ne));var oe=le._fullLayout,ue="p"+oe._uid+"-"+fe,xe,he,me=function(rt,Ge,ze,We,mt){return We+(mt-We)*(rt-Ge)/(ze-Ge)},be,Ce,Se,Be,Ye={};switch(se){case"/":xe=V*Math.sqrt(2),he=V*Math.sqrt(2),be="M-"+xe/4+","+he/4+"l"+xe/2+",-"+he/2+"M0,"+he+"L"+xe+",0M"+xe/4*3+","+he/4*5+"l"+xe/2+",-"+he/2,Ce=Y*V,Be="path",Ye={d:be,opacity:ae,stroke:$,"stroke-width":Ce+"px"};break;case"\\":xe=V*Math.sqrt(2),he=V*Math.sqrt(2),be="M"+xe/4*3+",-"+he/4+"l"+xe/2+","+he/2+"M0,0L"+xe+","+he+"M-"+xe/4+","+he/4*3+"l"+xe/2+","+he/2,Ce=Y*V,Be="path",Ye={d:be,opacity:ae,stroke:$,"stroke-width":Ce+"px"};break;case"x":xe=V*Math.sqrt(2),he=V*Math.sqrt(2),be="M-"+xe/4+","+he/4+"l"+xe/2+",-"+he/2+"M0,"+he+"L"+xe+",0M"+xe/4*3+","+he/4*5+"l"+xe/2+",-"+he/2+"M"+xe/4*3+",-"+he/4+"l"+xe/2+","+he/2+"M0,0L"+xe+","+he+"M-"+xe/4+","+he/4*3+"l"+xe/2+","+he/2,Ce=V-V*Math.sqrt(1-Y),Be="path",Ye={d:be,opacity:ae,stroke:$,"stroke-width":Ce+"px"};break;case"|":xe=V,he=V,Be="path",be="M"+xe/2+",0L"+xe/2+","+he,Ce=Y*V,Be="path",Ye={d:be,opacity:ae,stroke:$,"stroke-width":Ce+"px"};break;case"-":xe=V,he=V,Be="path",be="M0,"+he/2+"L"+xe+","+he/2,Ce=Y*V,Be="path",Ye={d:be,opacity:ae,stroke:$,"stroke-width":Ce+"px"};break;case"+":xe=V,he=V,Be="path",be="M"+xe/2+",0L"+xe/2+","+he+"M0,"+he/2+"L"+xe+","+he/2,Ce=V-V*Math.sqrt(1-Y),Be="path",Ye={d:be,opacity:ae,stroke:$,"stroke-width":Ce+"px"};break;case".":xe=V,he=V,Y<Math.PI/4?Se=Math.sqrt(Y*V*V/Math.PI):Se=me(Y,Math.PI/4,1,V/2,V/Math.sqrt(2)),Be="circle",Ye={cx:xe/2,cy:he/2,r:Se,opacity:ae,fill:$};break}var Xe=[se||"noSh",K||"noBg",$||"noFg",V,Y].join(";"),Te=oe._defs.select(".patterns").selectAll("#"+ue).data([Xe],s.identity);Te.exit().remove(),Te.enter().append("pattern").each(function(){var rt=u.select(this);if(rt.attr({id:ue,width:xe+"px",height:he+"px",patternUnits:"userSpaceOnUse",patternTransform:ie?"scale(0.8)":""}),K){var Ge=rt.selectAll("rect").data([0]);Ge.exit().remove(),Ge.enter().append("rect").attr({width:xe+"px",height:he+"px",fill:K})}var ze=rt.selectAll(Be).data([0]);ze.exit().remove(),ze.enter().append(Be).attr(Ye)}),G.style("fill",j(ue,le)).style("fill-opacity",null),G.classed("pattern_filled",!0);var Ie=function(rt){return"."+rt.attr("class").replace(/\s/g,".")},Ze=Ie(u.select(G.node().parentNode))+">.pattern_filled";oe._patternUrlQueryParts[Ze]=1},g.initGradients=function(G){var J=G._fullLayout,le=s.ensureSingle(J._defs,"g","gradients");le.selectAll("linearGradient,radialGradient").remove(),J._gradientUrlQueryParts={}},g.initPatterns=function(G){var J=G._fullLayout,le=s.ensureSingle(J._defs,"g","patterns");le.selectAll("pattern").remove(),J._patternUrlQueryParts={}},g.getPatternAttr=function(G,J,le){return G&&s.isArrayOrTypedArray(G)?J<G.length?G[J]:le:G},g.pointStyle=function(G,J,le){if(!!G.size()){var fe=g.makePointStyleFns(J);G.each(function(se){g.singlePointStyle(se,u.select(this),J,fe,le)})}},g.singlePointStyle=function(G,J,le,fe,se){var V=le.marker,Y=V.line;if(J.style("opacity",fe.selectedOpacityFn?fe.selectedOpacityFn(G):G.mo===void 0?V.opacity:G.mo),fe.ms2mrc){var ne;G.ms==="various"||V.size==="various"?ne=3:ne=fe.ms2mrc(G.ms),G.mrc=ne,fe.selectedSizeFn&&(ne=G.mrc=fe.selectedSizeFn(G));var te=g.symbolNumber(G.mx||V.symbol)||0;G.om=te%200>=100,J.attr("d",w(te,ne))}var K=!1,$,ae,ie;if(G.so)ie=Y.outlierwidth,ae=Y.outliercolor,$=V.outliercolor;else{var oe=(Y||{}).width;ie=(G.mlw+1||oe+1||(G.trace?(G.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in G?ae=G.mlcc=fe.lineScale(G.mlc):s.isArrayOrTypedArray(Y.color)?ae=a.defaultLine:ae=Y.color,s.isArrayOrTypedArray(V.color)&&($=a.defaultLine,K=!0),"mc"in G?$=G.mcc=fe.markerScale(G.mc):$=V.color||"rgba(0,0,0,0)",fe.selectedColorFn&&($=fe.selectedColorFn(G))}if(G.om)J.call(a.stroke,$).style({"stroke-width":(ie||1)+"px",fill:"none"});else{J.style("stroke-width",(G.isBlank?0:ie)+"px");var ue=V.gradient,xe=G.mgt;xe?K=!0:xe=ue&&ue.type,s.isArrayOrTypedArray(xe)&&(xe=xe[0],L[xe]||(xe=0));var he=V.pattern,me=he&&g.getPatternAttr(he.shape,G.i,"");if(xe&&xe!=="none"){var be=G.mgc;be?K=!0:be=ue.color;var Ce=le.uid;K&&(Ce+="-"+G.i),g.gradient(J,se,Ce,xe,[[0,be],[1,$]],"fill")}else if(me){var Se=g.getPatternAttr(he.bgcolor,G.i,null),Be=g.getPatternAttr(he.fgcolor,G.i,null),Ye=he.fgopacity,Xe=g.getPatternAttr(he.size,G.i,8),Te=g.getPatternAttr(he.solidity,G.i,.3),Ie=G.mcc||s.isArrayOrTypedArray(he.shape)||s.isArrayOrTypedArray(he.bgcolor)||s.isArrayOrTypedArray(he.size)||s.isArrayOrTypedArray(he.solidity),Ze=le.uid;Ie&&(Ze+="-"+G.i),g.pattern(J,"point",se,Ze,me,Xe,Te,G.mcc,he.fillmode,Se,Be,Ye)}else a.fill(J,$);ie&&a.stroke(J,ae)}},g.makePointStyleFns=function(G){var J={},le=G.marker;return J.markerScale=g.tryColorscale(le,""),J.lineScale=g.tryColorscale(le,"line"),i.traceIs(G,"symbols")&&(J.ms2mrc=d.isBubble(G)?p(G):function(){return(le.size||6)/2}),G.selectedpoints&&s.extendFlat(J,g.makeSelectedPointStyleFns(G)),J},g.makeSelectedPointStyleFns=function(G){var J={},le=G.selected||{},fe=G.unselected||{},se=G.marker||{},V=le.marker||{},Y=fe.marker||{},ne=se.opacity,te=V.opacity,K=Y.opacity,$=te!==void 0,ae=K!==void 0;(s.isArrayOrTypedArray(ne)||$||ae)&&(J.selectedOpacityFn=function(Se){var Be=Se.mo===void 0?se.opacity:Se.mo;return Se.selected?$?te:Be:ae?K:v*Be});var ie=se.color,oe=V.color,ue=Y.color;(oe||ue)&&(J.selectedColorFn=function(Se){var Be=Se.mcc||ie;return Se.selected?oe||Be:ue||Be});var xe=se.size,he=V.size,me=Y.size,be=he!==void 0,Ce=me!==void 0;return i.traceIs(G,"symbols")&&(be||Ce)&&(J.selectedSizeFn=function(Se){var Be=Se.mrc||xe/2;return Se.selected?be?he/2:Be:Ce?me/2:Be}),J},g.makeSelectedTextStyleFns=function(G){var J={},le=G.selected||{},fe=G.unselected||{},se=G.textfont||{},V=le.textfont||{},Y=fe.textfont||{},ne=se.color,te=V.color,K=Y.color;return J.selectedTextColorFn=function($){var ae=$.tc||ne;return $.selected?te||ae:K||(te?ae:a.addOpacity(ae,v))},J},g.selectedPointStyle=function(G,J){if(!(!G.size()||!J.selectedpoints)){var le=g.makeSelectedPointStyleFns(J),fe=J.marker||{},se=[];le.selectedOpacityFn&&se.push(function(V,Y){V.style("opacity",le.selectedOpacityFn(Y))}),le.selectedColorFn&&se.push(function(V,Y){a.fill(V,le.selectedColorFn(Y))}),le.selectedSizeFn&&se.push(function(V,Y){var ne=Y.mx||fe.symbol||0,te=le.selectedSizeFn(Y);V.attr("d",w(g.symbolNumber(ne),te)),Y.mrc2=te}),se.length&&G.each(function(V){for(var Y=u.select(this),ne=0;ne<se.length;ne++)se[ne](Y,V)})}},g.tryColorscale=function(G,J){var le=J?s.nestedProperty(G,J).get():G;if(le){var fe=le.color;if((le.colorscale||le._colorAx)&&s.isArrayOrTypedArray(fe))return r.makeColorScaleFuncFromTrace(le)}return s.identity};var S={start:1,end:-1,middle:0,bottom:1,top:-1};function k(G,J,le,fe,se){var V=u.select(G.node().parentNode),Y=J.indexOf("top")!==-1?"top":J.indexOf("bottom")!==-1?"bottom":"middle",ne=J.indexOf("left")!==-1?"end":J.indexOf("right")!==-1?"start":"middle",te=fe?fe/.8+1:0,K=(f.lineCount(G)-1)*c+1,$=S[ne]*te,ae=le*.75+S[Y]*te+(S[Y]-1)*K*le/2;G.attr("text-anchor",ne),se||V.attr("transform",n($,ae))}function P(G,J){var le=G.ts||J.textfont.size;return x(le)&&le>0?le:0}g.textPointStyle=function(G,J,le){if(!!G.size()){var fe;if(J.selectedpoints){var se=g.makeSelectedTextStyleFns(J);fe=se.selectedTextColorFn}var V=J.texttemplate,Y=le._fullLayout;G.each(function(ne){var te=u.select(this),K=V?s.extractOption(ne,J,"txt","texttemplate"):s.extractOption(ne,J,"tx","text");if(!K&&K!==0){te.remove();return}if(V){var $=J._module.formatLabels,ae=$?$(ne,J,Y):{},ie={};y(ie,J,ne.i);var oe=J._meta||{};K=s.texttemplateString(K,ae,Y._d3locale,ie,ne,oe)}var ue=ne.tp||J.textposition,xe=P(ne,J),he=fe?fe(ne):ne.tc||J.textfont.color;te.call(g.font,ne.tf||J.textfont.family,xe,he).text(K).call(f.convertToTspans,le).call(k,ue,xe,ne.mrc)})}},g.selectedTextStyle=function(G,J){if(!(!G.size()||!J.selectedpoints)){var le=g.makeSelectedTextStyleFns(J);G.each(function(fe){var se=u.select(this),V=le.selectedTextColorFn(fe),Y=fe.tp||J.textposition,ne=P(fe,J);a.fill(se,V);var te=i.traceIs(J,"bar-like");k(se,Y,ne,fe.mrc2||fe.mrc,te)})}};var O=.5;g.smoothopen=function(G,J){if(G.length<3)return"M"+G.join("L");var le="M"+G[0],fe=[],se;for(se=1;se<G.length-1;se++)fe.push(F(G[se-1],G[se],G[se+1],J));for(le+="Q"+fe[0][0]+" "+G[1],se=2;se<G.length-1;se++)le+="C"+fe[se-2][1]+" "+fe[se-1][0]+" "+G[se];return le+="Q"+fe[G.length-3][1]+" "+G[G.length-1],le},g.smoothclosed=function(G,J){if(G.length<3)return"M"+G.join("L")+"Z";var le="M"+G[0],fe=G.length-1,se=[F(G[fe],G[0],G[1],J)],V;for(V=1;V<fe;V++)se.push(F(G[V-1],G[V],G[V+1],J));for(se.push(F(G[fe-1],G[fe],G[0],J)),V=1;V<=fe;V++)le+="C"+se[V-1][1]+" "+se[V][0]+" "+G[V];return le+="C"+se[fe][1]+" "+se[0][0]+" "+G[0]+"Z",le};function F(G,J,le,fe){var se=G[0]-J[0],V=G[1]-J[1],Y=le[0]-J[0],ne=le[1]-J[1],te=Math.pow(se*se+V*V,O/2),K=Math.pow(Y*Y+ne*ne,O/2),$=(K*K*se-te*te*Y)*fe,ae=(K*K*V-te*te*ne)*fe,ie=3*K*(te+K),oe=3*te*(te+K);return[[u.round(J[0]+(ie&&$/ie),2),u.round(J[1]+(ie&&ae/ie),2)],[u.round(J[0]-(oe&&$/oe),2),u.round(J[1]-(oe&&ae/oe),2)]]}var D={hv:function(G,J){return"H"+u.round(J[0],2)+"V"+u.round(J[1],2)},vh:function(G,J){return"V"+u.round(J[1],2)+"H"+u.round(J[0],2)},hvh:function(G,J){return"H"+u.round((G[0]+J[0])/2,2)+"V"+u.round(J[1],2)+"H"+u.round(J[0],2)},vhv:function(G,J){return"V"+u.round((G[1]+J[1])/2,2)+"H"+u.round(J[0],2)+"V"+u.round(J[1],2)}},R=function(G,J){return"L"+u.round(J[0],2)+","+u.round(J[1],2)};g.steps=function(G){var J=D[G]||R;return function(le){for(var fe="M"+u.round(le[0][0],2)+","+u.round(le[0][1],2),se=1;se<le.length;se++)fe+=J(le[se-1],le[se]);return fe}},g.makeTester=function(){var G=s.ensureSingleById(u.select("body"),"svg","js-plotly-tester",function(le){le.attr(l.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),J=s.ensureSingle(G,"path","js-reference-point",function(le){le.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});g.tester=G,g.testref=J},g.savedBBoxes={};var U=0,N=1e4;g.bBox=function(G,J,le){le||(le=X(G));var fe;if(le){if(fe=g.savedBBoxes[le],fe)return s.extendFlat({},fe)}else if(G.childNodes.length===1){var se=G.childNodes[0];if(le=X(se),le){var V=+se.getAttribute("x")||0,Y=+se.getAttribute("y")||0,ne=se.getAttribute("transform");if(!ne){var te=g.bBox(se,!1,le);return V&&(te.left+=V,te.right+=V),Y&&(te.top+=Y,te.bottom+=Y),te}if(le+="~"+V+"~"+Y+"~"+ne,fe=g.savedBBoxes[le],fe)return s.extendFlat({},fe)}}var K,$;J?K=G:($=g.tester.node(),K=G.cloneNode(!0),$.appendChild(K)),u.select(K).attr("transform",null).call(f.positionText,0,0);var ae=K.getBoundingClientRect(),ie=g.testref.node().getBoundingClientRect();J||$.removeChild(K);var oe={height:ae.height,width:ae.width,left:ae.left-ie.left,top:ae.top-ie.top,right:ae.right-ie.left,bottom:ae.bottom-ie.top};return U>=N&&(g.savedBBoxes={},U=0),le&&(g.savedBBoxes[le]=oe),U++,s.extendFlat({},oe)};function X(G){var J=G.getAttribute("data-unformatted");if(J!==null)return J+G.getAttribute("data-math")+G.getAttribute("text-anchor")+G.getAttribute("style")}g.setClipUrl=function(G,J,le){G.attr("clip-path",j(J,le))};function j(G,J){if(!G)return null;var le=J._context,fe=le._exportedPlot?"":le._baseUrl||"";return fe?"url('"+fe+"#"+G+"')":"url(#"+G+")"}g.getTranslate=function(G){var J=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,le=G.attr?"attr":"getAttribute",fe=G[le]("transform")||"",se=fe.replace(J,function(V,Y,ne){return[Y,ne].join(" ")}).split(" ");return{x:+se[0]||0,y:+se[1]||0}},g.setTranslate=function(G,J,le){var fe=/(\btranslate\(.*?\);?)/,se=G.attr?"attr":"getAttribute",V=G.attr?"attr":"setAttribute",Y=G[se]("transform")||"";return J=J||0,le=le||0,Y=Y.replace(fe,"").trim(),Y+=n(J,le),Y=Y.trim(),G[V]("transform",Y),Y},g.getScale=function(G){var J=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,le=G.attr?"attr":"getAttribute",fe=G[le]("transform")||"",se=fe.replace(J,function(V,Y,ne){return[Y,ne].join(" ")}).split(" ");return{x:+se[0]||1,y:+se[1]||1}},g.setScale=function(G,J,le){var fe=/(\bscale\(.*?\);?)/,se=G.attr?"attr":"getAttribute",V=G.attr?"attr":"setAttribute",Y=G[se]("transform")||"";return J=J||1,le=le||1,Y=Y.replace(fe,"").trim(),Y+="scale("+J+","+le+")",Y=Y.trim(),G[V]("transform",Y),Y};var ee=/\s*sc.*/;g.setPointGroupScale=function(G,J,le){if(J=J||1,le=le||1,!!G){var fe=J===1&&le===1?"":"scale("+J+","+le+")";G.each(function(){var se=(this.getAttribute("transform")||"").replace(ee,"");se+=fe,se=se.trim(),this.setAttribute("transform",se)})}};var q=/translate\([^)]*\)\s*$/;g.setTextPointsScale=function(G,J,le){!G||G.each(function(){var fe,se=u.select(this),V=se.select("text");if(!!V.node()){var Y=parseFloat(V.attr("x")||0),ne=parseFloat(V.attr("y")||0),te=(se.attr("transform")||"").match(q);J===1&&le===1?fe=[]:fe=[n(Y,ne),"scale("+J+","+le+")",n(-Y,-ne)],te&&fe.push(te),se.attr("transform",fe.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":943,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(e,I,B){var u=e("@plotly/d3");I.exports={circle:{n:0,f:function(s){var m=u.round(s,2);return"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"}},square:{n:1,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"}},diamond:{n:2,f:function(s){var m=u.round(s*1.3,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"Z"}},cross:{n:3,f:function(s){var m=u.round(s*.4,2),x=u.round(s*1.2,2);return"M"+x+","+m+"H"+m+"V"+x+"H-"+m+"V"+m+"H-"+x+"V-"+m+"H-"+m+"V-"+x+"H"+m+"V-"+m+"H"+x+"Z"}},x:{n:4,f:function(s){var m=u.round(s*.8/Math.sqrt(2),2),x="l"+m+","+m,t="l"+m+",-"+m,i="l-"+m+",-"+m,a="l-"+m+","+m;return"M0,"+m+x+t+i+t+i+a+i+a+x+a+x+"Z"}},"triangle-up":{n:5,f:function(s){var m=u.round(s*2/Math.sqrt(3),2),x=u.round(s/2,2),t=u.round(s,2);return"M-"+m+","+x+"H"+m+"L0,-"+t+"Z"}},"triangle-down":{n:6,f:function(s){var m=u.round(s*2/Math.sqrt(3),2),x=u.round(s/2,2),t=u.round(s,2);return"M-"+m+",-"+x+"H"+m+"L0,"+t+"Z"}},"triangle-left":{n:7,f:function(s){var m=u.round(s*2/Math.sqrt(3),2),x=u.round(s/2,2),t=u.round(s,2);return"M"+x+",-"+m+"V"+m+"L-"+t+",0Z"}},"triangle-right":{n:8,f:function(s){var m=u.round(s*2/Math.sqrt(3),2),x=u.round(s/2,2),t=u.round(s,2);return"M-"+x+",-"+m+"V"+m+"L"+t+",0Z"}},"triangle-ne":{n:9,f:function(s){var m=u.round(s*.6,2),x=u.round(s*1.2,2);return"M-"+x+",-"+m+"H"+m+"V"+x+"Z"}},"triangle-se":{n:10,f:function(s){var m=u.round(s*.6,2),x=u.round(s*1.2,2);return"M"+m+",-"+x+"V"+m+"H-"+x+"Z"}},"triangle-sw":{n:11,f:function(s){var m=u.round(s*.6,2),x=u.round(s*1.2,2);return"M"+x+","+m+"H-"+m+"V-"+x+"Z"}},"triangle-nw":{n:12,f:function(s){var m=u.round(s*.6,2),x=u.round(s*1.2,2);return"M-"+m+","+x+"V-"+m+"H"+x+"Z"}},pentagon:{n:13,f:function(s){var m=u.round(s*.951,2),x=u.round(s*.588,2),t=u.round(-s,2),i=u.round(s*-.309,2),a=u.round(s*.809,2);return"M"+m+","+i+"L"+x+","+a+"H-"+x+"L-"+m+","+i+"L0,"+t+"Z"}},hexagon:{n:14,f:function(s){var m=u.round(s,2),x=u.round(s/2,2),t=u.round(s*Math.sqrt(3)/2,2);return"M"+t+",-"+x+"V"+x+"L0,"+m+"L-"+t+","+x+"V-"+x+"L0,-"+m+"Z"}},hexagon2:{n:15,f:function(s){var m=u.round(s,2),x=u.round(s/2,2),t=u.round(s*Math.sqrt(3)/2,2);return"M-"+x+","+t+"H"+x+"L"+m+",0L"+x+",-"+t+"H-"+x+"L-"+m+",0Z"}},octagon:{n:16,f:function(s){var m=u.round(s*.924,2),x=u.round(s*.383,2);return"M-"+x+",-"+m+"H"+x+"L"+m+",-"+x+"V"+x+"L"+x+","+m+"H-"+x+"L-"+m+","+x+"V-"+x+"Z"}},star:{n:17,f:function(s){var m=s*1.4,x=u.round(m*.225,2),t=u.round(m*.951,2),i=u.round(m*.363,2),a=u.round(m*.588,2),r=u.round(-m,2),n=u.round(m*-.309,2),f=u.round(m*.118,2),l=u.round(m*.809,2),o=u.round(m*.382,2);return"M"+x+","+n+"H"+t+"L"+i+","+f+"L"+a+","+l+"L0,"+o+"L-"+a+","+l+"L-"+i+","+f+"L-"+t+","+n+"H-"+x+"L0,"+r+"Z"}},hexagram:{n:18,f:function(s){var m=u.round(s*.66,2),x=u.round(s*.38,2),t=u.round(s*.76,2);return"M-"+t+",0l-"+x+",-"+m+"h"+t+"l"+x+",-"+m+"l"+x+","+m+"h"+t+"l-"+x+","+m+"l"+x+","+m+"h-"+t+"l-"+x+","+m+"l-"+x+",-"+m+"h-"+t+"Z"}},"star-triangle-up":{n:19,f:function(s){var m=u.round(s*Math.sqrt(3)*.8,2),x=u.round(s*.8,2),t=u.round(s*1.6,2),i=u.round(s*4,2),a="A "+i+","+i+" 0 0 1 ";return"M-"+m+","+x+a+m+","+x+a+"0,-"+t+a+"-"+m+","+x+"Z"}},"star-triangle-down":{n:20,f:function(s){var m=u.round(s*Math.sqrt(3)*.8,2),x=u.round(s*.8,2),t=u.round(s*1.6,2),i=u.round(s*4,2),a="A "+i+","+i+" 0 0 1 ";return"M"+m+",-"+x+a+"-"+m+",-"+x+a+"0,"+t+a+m+",-"+x+"Z"}},"star-square":{n:21,f:function(s){var m=u.round(s*1.1,2),x=u.round(s*2,2),t="A "+x+","+x+" 0 0 1 ";return"M-"+m+",-"+m+t+"-"+m+","+m+t+m+","+m+t+m+",-"+m+t+"-"+m+",-"+m+"Z"}},"star-diamond":{n:22,f:function(s){var m=u.round(s*1.4,2),x=u.round(s*1.9,2),t="A "+x+","+x+" 0 0 1 ";return"M-"+m+",0"+t+"0,"+m+t+m+",0"+t+"0,-"+m+t+"-"+m+",0Z"}},"diamond-tall":{n:23,f:function(s){var m=u.round(s*.7,2),x=u.round(s*1.4,2);return"M0,"+x+"L"+m+",0L0,-"+x+"L-"+m+",0Z"}},"diamond-wide":{n:24,f:function(s){var m=u.round(s*1.4,2),x=u.round(s*.7,2);return"M0,"+x+"L"+m+",0L0,-"+x+"L-"+m+",0Z"}},hourglass:{n:25,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"H-"+m+"L"+m+",-"+m+"H-"+m+"Z"},noDot:!0},bowtie:{n:26,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"V-"+m+"L-"+m+","+m+"V-"+m+"Z"},noDot:!0},"circle-cross":{n:27,f:function(s){var m=u.round(s,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(s){var m=u.round(s,2),x=u.round(s/Math.sqrt(2),2);return"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(s){var m=u.round(s,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(s){var m=u.round(s*1.3,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM0,-"+m+"V"+m+"M-"+m+",0H"+m},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(s){var m=u.round(s*1.3,2),x=u.round(s*.65,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM-"+x+",-"+x+"L"+x+","+x+"M-"+x+","+x+"L"+x+",-"+x},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(s){var m=u.round(s*1.4,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*.85,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(s){var m=u.round(s/2,2),x=u.round(s,2);return"M"+m+","+x+"V-"+x+"m-"+x+",0V"+x+"M"+x+","+m+"H-"+x+"m0,-"+x+"H"+x},needLine:!0,noFill:!0},"y-up":{n:37,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*1.6,2),t=u.round(s*.8,2);return"M-"+m+","+t+"L0,0M"+m+","+t+"L0,0M0,-"+x+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*1.6,2),t=u.round(s*.8,2);return"M-"+m+",-"+t+"L0,0M"+m+",-"+t+"L0,0M0,"+x+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*1.6,2),t=u.round(s*.8,2);return"M"+t+","+m+"L0,0M"+t+",-"+m+"L0,0M-"+x+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*1.6,2),t=u.round(s*.8,2);return"M-"+t+","+m+"L0,0M-"+t+",-"+m+"L0,0M"+x+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(s){var m=u.round(s*1.4,2);return"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(s){var m=u.round(s*1.4,2);return"M0,"+m+"V-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(s){var m=u.round(s,2);return"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"L-"+m+",-"+m},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(s){var m=u.round(s,2),x=u.round(s*2,2);return"M0,0L-"+m+","+x+"H"+m+"Z"},noDot:!0},"arrow-down":{n:46,f:function(s){var m=u.round(s,2),x=u.round(s*2,2);return"M0,0L-"+m+",-"+x+"H"+m+"Z"},noDot:!0},"arrow-left":{n:47,f:function(s){var m=u.round(s*2,2),x=u.round(s,2);return"M0,0L"+m+",-"+x+"V"+x+"Z"},noDot:!0},"arrow-right":{n:48,f:function(s){var m=u.round(s*2,2),x=u.round(s,2);return"M0,0L-"+m+",-"+x+"V"+x+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(s){var m=u.round(s,2),x=u.round(s*2,2);return"M-"+m+",0H"+m+"M0,0L-"+m+","+x+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(s){var m=u.round(s,2),x=u.round(s*2,2);return"M-"+m+",0H"+m+"M0,0L-"+m+",-"+x+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(s){var m=u.round(s*2,2),x=u.round(s,2);return"M0,-"+x+"V"+x+"M0,0L"+m+",-"+x+"V"+x+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(s){var m=u.round(s*2,2),x=u.round(s,2);return"M0,-"+x+"V"+x+"M0,0L-"+m+",-"+x+"V"+x+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(e,I,B){I.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../registry"),m=e("../../plots/cartesian/axes"),x=e("../../lib"),t=e("./compute_error");I.exports=function(r){for(var n=r.calcdata,f=0;f<n.length;f++){var l=n[f],o=l[0].trace;if(o.visible===!0&&s.traceIs(o,"errorBarsOK")){var c=m.getFromId(r,o.xaxis),v=m.getFromId(r,o.yaxis);i(l,o,c,"x"),i(l,o,v,"y")}}};function i(a,r,n,f){var l=r["error_"+f]||{},o=l.visible&&["linear","log"].indexOf(n.type)!==-1,c=[];if(!!o){for(var v=t(l),d=0;d<a.length;d++){var p=a[d],y=p.i;if(y===void 0)y=d;else if(y===null)continue;var g=p[f];if(!!u(n.c2l(g))){var A=v(g,y);if(u(A[0])&&u(A[1])){var b=p[f+"s"]=g-A[0],M=p[f+"h"]=g+A[1];c.push(b,M)}}}var w=n._id,T=r._extremes[w],_=m.findExtremes(n,c,x.extendFlat({tozero:T.opts.tozero},{padded:!0}));T.min=T.min.concat(_.min),T.max=T.max.concat(_.max)}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(e,I,B){I.exports=function(m){var x=m.type,t=m.symmetric;if(x==="data"){var i=m.array||[];if(t)return function(l,o){var c=+i[o];return[c,c]};var a=m.arrayminus||[];return function(l,o){var c=+i[o],v=+a[o];return!isNaN(c)||!isNaN(v)?[v||0,c||0]:[NaN,NaN]}}else{var r=u(x,m.value),n=u(x,m.valueminus);return t||m.valueminus===void 0?function(l){var o=r(l);return[o,o]}:function(l){return[n(l),r(l)]}}};function u(s,m){if(s==="percent")return function(x){return Math.abs(x*m/100)};if(s==="constant")return function(){return Math.abs(m)};if(s==="sqrt")return function(x){return Math.sqrt(Math.abs(x))}}},{}],393:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../registry"),m=e("../../lib"),x=e("../../plot_api/plot_template"),t=e("./attributes");I.exports=function(i,a,r,n){var f="error_"+n.axis,l=x.newContainer(a,f),o=i[f]||{};function c(b,M){return m.coerce(o,l,t,b,M)}var v=o.array!==void 0||o.value!==void 0||o.type==="sqrt",d=c("visible",v);if(d!==!1){var p=c("type","array"in o?"data":"percent"),y=!0;p!=="sqrt"&&(y=c("symmetric",!((p==="data"?"arrayminus":"valueminus")in o))),p==="data"?(c("array"),c("traceref"),y||(c("arrayminus"),c("tracerefminus"))):(p==="percent"||p==="constant")&&(c("value"),y||c("valueminus"));var g="copy_"+n.inherit+"style";if(n.inherit){var A=a["error_"+n.inherit];(A||{}).visible&&c(g,!(o.color||u(o.thickness)||u(o.width)))}(!n.inherit||!l[g])&&(c("color",r),c("thickness"),c("width",s.traceIs(a,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(e,I,B){var u=e("../../lib"),s=e("../../plot_api/edit_types").overrideAll,m=e("./attributes"),x={error_x:u.extendFlat({},m),error_y:u.extendFlat({},m)};delete x.error_x.copy_zstyle,delete x.error_y.copy_zstyle,delete x.error_y.copy_ystyle;var t={error_x:u.extendFlat({},m),error_y:u.extendFlat({},m),error_z:u.extendFlat({},m)};delete t.error_x.copy_ystyle,delete t.error_y.copy_ystyle,delete t.error_z.copy_ystyle,delete t.error_z.copy_zstyle,I.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:x,bar:x,histogram:x,scatter3d:s(t,"calc","nested"),scattergl:s(x,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:i};function i(a,r,n){(r.error_y||{}).visible&&(n.yerr=a.yh-a.y,r.error_y.symmetric||(n.yerrneg=a.y-a.ys)),(r.error_x||{}).visible&&(n.xerr=a.xh-a.x,r.error_x.symmetric||(n.xerrneg=a.x-a.xs))}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../drawing"),x=e("../../traces/scatter/subtypes");I.exports=function(a,r,n,f){var l,o=n.xaxis,c=n.yaxis,v=f&&f.duration>0;r.each(function(d){var p=d[0].trace,y=p.error_x||{},g=p.error_y||{},A;p.ids&&(A=function(T){return T.id});var b=x.hasMarkers(p)&&p.marker.maxdisplayed>0;!g.visible&&!y.visible&&(d=[]);var M=u.select(this).selectAll("g.errorbar").data(d,A);if(M.exit().remove(),!!d.length){y.visible||M.selectAll("path.xerror").remove(),g.visible||M.selectAll("path.yerror").remove(),M.style("opacity",1);var w=M.enter().append("g").classed("errorbar",!0);v&&w.style("opacity",0).transition().duration(f.duration).style("opacity",1),m.setClipUrl(M,n.layerClipId,a),M.each(function(T){var _=u.select(this),h=t(T,o,c);if(!(b&&!T.vis)){var L,S=_.select("path.yerror");if(g.visible&&s(h.x)&&s(h.yh)&&s(h.ys)){var k=g.width;L="M"+(h.x-k)+","+h.yh+"h"+2*k+"m-"+k+",0V"+h.ys,h.noYS||(L+="m-"+k+",0h"+2*k),l=!S.size(),l?S=_.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):v&&(S=S.transition().duration(f.duration).ease(f.easing)),S.attr("d",L)}else S.remove();var P=_.select("path.xerror");if(y.visible&&s(h.y)&&s(h.xh)&&s(h.xs)){var O=(y.copy_ystyle?g:y).width;L="M"+h.xh+","+(h.y-O)+"v"+2*O+"m0,-"+O+"H"+h.xs,h.noXS||(L+="m0,-"+O+"v"+2*O),l=!P.size(),l?P=_.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):v&&(P=P.transition().duration(f.duration).ease(f.easing)),P.attr("d",L)}else P.remove()}})}})};function t(i,a,r){var n={x:a.c2p(i.x),y:r.c2p(i.y)};return i.yh!==void 0&&(n.yh=r.c2p(i.yh),n.ys=r.c2p(i.ys),s(n.ys)||(n.noYS=!0,n.ys=r.c2p(i.ys,!0))),i.xh!==void 0&&(n.xh=a.c2p(i.xh),n.xs=a.c2p(i.xs),s(n.xs)||(n.noXS=!0,n.xs=a.c2p(i.xs,!0))),n}},{"../../traces/scatter/subtypes":951,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(e,I,B){var u=e("@plotly/d3"),s=e("../color");I.exports=function(x){x.each(function(t){var i=t[0].trace,a=i.error_y||{},r=i.error_x||{},n=u.select(this);n.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(s.stroke,a.color),r.copy_ystyle&&(r=a),n.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(s.stroke,r.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(e,I,B){var u=e("../../plots/font_attributes"),s=e("./layout_attributes").hoverlabel,m=e("../../lib/extend").extendFlat;I.exports={hoverlabel:{bgcolor:m({},s.bgcolor,{arrayOk:!0}),bordercolor:m({},s.bordercolor,{arrayOk:!0}),font:u({arrayOk:!0,editType:"none"}),align:m({},s.align,{arrayOk:!0}),namelength:m({},s.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(e,I,B){var u=e("../../lib"),s=e("../../registry");I.exports=function(t){var i=t.calcdata,a=t._fullLayout;function r(c){return function(v){return u.coerceHoverinfo({hoverinfo:v},{_module:c._module},a)}}for(var n=0;n<i.length;n++){var f=i[n],l=f[0].trace;if(!s.traceIs(l,"pie-like")){var o=s.traceIs(l,"2dMap")?m:u.fillArray;o(l.hoverinfo,f,"hi",r(l)),l.hovertemplate&&o(l.hovertemplate,f,"ht"),!!l.hoverlabel&&(o(l.hoverlabel.bgcolor,f,"hbg"),o(l.hoverlabel.bordercolor,f,"hbc"),o(l.hoverlabel.font.size,f,"hts"),o(l.hoverlabel.font.color,f,"htc"),o(l.hoverlabel.font.family,f,"htf"),o(l.hoverlabel.namelength,f,"hnl"),o(l.hoverlabel.align,f,"hta"))}}};function m(x,t,i,a){a=a||u.identity,Array.isArray(x)&&(t[0][i]=a(x))}},{"../../lib":503,"../../registry":638}],399:[function(e,I,B){var u=e("../../registry"),s=e("./hover").hover;I.exports=function(x,t,i){var a=u.getComponentMethod("annotations","onClick")(x,x._hoverdata);i!==void 0&&s(x,t,i,!0);function r(){x.emit("plotly_click",{points:x._hoverdata,event:t})}x._hoverdata&&t&&t.target&&(a&&a.then?a.then(r):r(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(e,I,B){I.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("./hoverlabel_defaults");I.exports=function(t,i,a,r){function n(l,o){return u.coerce(t,i,s,l,o)}var f=u.extendFlat({},r.hoverlabel);i.hovertemplate&&(f.namelength=-1),m(t,i,n,f)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(e,I,B){var u=e("../../lib");B.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},B.isTraceInSubplots=function(a,r){if(a.type==="splom"){for(var n=a.xaxes||[],f=a.yaxes||[],l=0;l<n.length;l++)for(var o=0;o<f.length;o++)if(r.indexOf(n[l]+f[o])!==-1)return!0;return!1}return r.indexOf(B.getSubplot(a))!==-1},B.flat=function(a,r){for(var n=new Array(a.length),f=0;f<a.length;f++)n[f]=r;return n},B.p2c=function(a,r){for(var n=new Array(a.length),f=0;f<a.length;f++)n[f]=a[f].p2c(r);return n},B.getDistanceFunction=function(a,r,n,f){return a==="closest"?f||B.quadrature(r,n):a.charAt(0)==="x"?r:n},B.getClosest=function(a,r,n){if(n.index!==!1)n.index>=0&&n.index<a.length?n.distance=0:n.index=!1;else for(var f=0;f<a.length;f++){var l=r(a[f]);l<=n.distance&&(n.index=f,n.distance=l)}return n},B.inbox=function(a,r,n){return a*r<0||a===0?n:1/0},B.quadrature=function(a,r){return function(n){var f=a(n),l=r(n);return Math.sqrt(f*f+l*l)}},B.makeEventData=function(a,r,n){var f="index"in a?a.index:a.pointNumber,l={data:r._input,fullData:r,curveNumber:r.index,pointNumber:f};if(r._indexToPoints){var o=r._indexToPoints[f];o.length===1?l.pointIndex=o[0]:l.pointIndices=o}else l.pointIndex=f;return r._module.eventData?l=r._module.eventData(l,a,r,n,f):("xVal"in a?l.x=a.xVal:"x"in a&&(l.x=a.x),"yVal"in a?l.y=a.yVal:"y"in a&&(l.y=a.y),a.xa&&(l.xaxis=a.xa),a.ya&&(l.yaxis=a.ya),a.zLabelVal!==void 0&&(l.z=a.zLabelVal)),B.appendArrayPointValue(l,r,f),l},B.appendArrayPointValue=function(a,r,n){var f=r._arrayAttrs;if(!!f)for(var l=0;l<f.length;l++){var o=f[l],c=m(o);if(a[c]===void 0){var v=u.nestedProperty(r,o).get(),d=x(v,n);d!==void 0&&(a[c]=d)}}},B.appendArrayMultiPointValues=function(a,r,n){var f=r._arrayAttrs;if(!!f)for(var l=0;l<f.length;l++){var o=f[l],c=m(o);if(a[c]===void 0){for(var v=u.nestedProperty(r,o).get(),d=new Array(n.length),p=0;p<n.length;p++)d[p]=x(v,n[p]);a[c]=d}}};var s={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function m(a){return s[a]||a}function x(a,r){if(Array.isArray(r)){if(Array.isArray(a)&&Array.isArray(a[r[0]]))return a[r[0]][r[1]]}else return a[r]}var t={x:!0,y:!0},i={"x unified":!0,"y unified":!0};B.isUnifiedHover=function(a){return typeof a!="string"?!1:!!i[a]},B.isXYhover=function(a){return typeof a!="string"?!1:!!t[a]}},{"../../lib":503}],403:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("tinycolor2"),x=e("../../lib"),t=x.strTranslate,i=x.strRotate,a=e("../../lib/events"),r=e("../../lib/svg_text_utils"),n=e("../../lib/override_cursor"),f=e("../drawing"),l=e("../color"),o=e("../dragelement"),c=e("../../plots/cartesian/axes"),v=e("../../registry"),d=e("./helpers"),p=e("./constants"),y=e("../legend/defaults"),g=e("../legend/draw"),A=p.YANGLE,b=Math.PI*A/180,M=1/Math.sin(b),w=Math.cos(b),T=Math.sin(b),_=p.HOVERARROWSIZE,h=p.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};B.hover=function(Y,ne,te,K){Y=x.getGraphDiv(Y);var $=ne.target;x.throttle(Y._fullLayout._uid+p.HOVERID,p.HOVERMINTIME,function(){k(Y,ne,te,K,$)})},B.loneHover=function(Y,ne){var te=!0;Array.isArray(Y)||(te=!1,Y=[Y]);var K=ne.gd,$=le(K),ae=fe(K),ie=Y.map(function(Se){var Be=Se._x0||Se.x0||Se.x||0,Ye=Se._x1||Se.x1||Se.x||0,Xe=Se._y0||Se.y0||Se.y||0,Te=Se._y1||Se.y1||Se.y||0,Ie=Se.eventData;if(Ie){var Ze=Math.min(Be,Ye),rt=Math.max(Be,Ye),Ge=Math.min(Xe,Te),ze=Math.max(Xe,Te),We=Se.trace;if(v.traceIs(We,"gl3d")){var mt=K._fullLayout[We.scene]._scene.container,Ft=mt.offsetLeft,Xt=mt.offsetTop;Ze+=Ft,rt+=Ft,Ge+=Xt,ze+=Xt}Ie.bbox={x0:Ze+ae,x1:rt+ae,y0:Ge+$,y1:ze+$},ne.inOut_bbox&&ne.inOut_bbox.push(Ie.bbox)}else Ie=!1;return{color:Se.color||l.defaultLine,x0:Se.x0||Se.x||0,x1:Se.x1||Se.x||0,y0:Se.y0||Se.y||0,y1:Se.y1||Se.y||0,xLabel:Se.xLabel,yLabel:Se.yLabel,zLabel:Se.zLabel,text:Se.text,name:Se.name,idealAlign:Se.idealAlign,borderColor:Se.borderColor,fontFamily:Se.fontFamily,fontSize:Se.fontSize,fontColor:Se.fontColor,nameLength:Se.nameLength,textAlign:Se.textAlign,trace:Se.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Se.hovertemplate||!1,hovertemplateLabels:Se.hovertemplateLabels||!1,eventData:Ie}}),oe=!1,ue=F(ie,{gd:K,hovermode:"closest",rotateLabels:oe,bgColor:ne.bgColor||l.background,container:u.select(ne.container),outerContainer:ne.outerContainer||ne.container}),xe=5,he=0,me=0;ue.sort(function(Se,Be){return Se.y0-Be.y0}).each(function(Se,Be){var Ye=Se.y0-Se.by/2;Ye-xe<he?Se.offset=he-Ye+xe:Se.offset=0,he=Ye+Se.by+Se.offset,Be===ne.anchorIndex&&(me=Se.offset)}).each(function(Se){Se.offset-=me});var be=K._fullLayout._invScaleX,Ce=K._fullLayout._invScaleY;return U(ue,oe,be,Ce),te?ue:ue.node()};function k(V,Y,ne,te,K){ne||(ne="xy");var $=Array.isArray(ne)?ne:[ne],ae=V._fullLayout,ie=ae._plots||[],oe=ie[ne],ue=ae._has("cartesian");if(oe){var xe=oe.overlays.map(function(xr){return xr.id});$=$.concat(xe)}for(var he=$.length,me=new Array(he),be=new Array(he),Ce=!1,Se=0;Se<he;Se++){var Be=$[Se];if(ie[Be])Ce=!0,me[Se]=ie[Be].xaxis,be[Se]=ie[Be].yaxis;else if(ae[Be]&&ae[Be]._subplot){var Ye=ae[Be]._subplot;me[Se]=Ye.xaxis,be[Se]=Ye.yaxis}else{x.warn("Unrecognized subplot: "+Be);return}}var Xe=Y.hovermode||ae.hovermode;if(Xe&&!Ce&&(Xe="closest"),["x","y","closest","x unified","y unified"].indexOf(Xe)===-1||!V.calcdata||V.querySelector(".zoombox")||V._dragging)return o.unhoverRaw(V,Y);var Te=ae.hoverdistance;Te===-1&&(Te=1/0);var Ie=ae.spikedistance;Ie===-1&&(Ie=1/0);var Ze=[],rt=[],Ge,ze,We,mt,Ft,Xt,Pt,Ut,Gt,It,Ct,lt,dt,et={hLinePoint:null,vLinePoint:null},Pe=!1;if(Array.isArray(Y))for(Xe="array",We=0;We<Y.length;We++)Ft=V.calcdata[Y[We].curveNumber||0],Ft&&(Xt=Ft[0].trace,Ft[0].trace.hoverinfo!=="skip"&&(rt.push(Ft),Xt.orientation==="h"&&(Pe=!0)));else{for(mt=0;mt<V.calcdata.length;mt++)Ft=V.calcdata[mt],Xt=Ft[0].trace,Xt.hoverinfo!=="skip"&&d.isTraceInSubplots(Xt,$)&&(rt.push(Ft),Xt.orientation==="h"&&(Pe=!0));var Je=!K,it,ht;if(Je)"xpx"in Y?it=Y.xpx:it=me[0]._length/2,"ypx"in Y?ht=Y.ypx:ht=be[0]._length/2;else{if(a.triggerHandler(V,"plotly_beforehover",Y)===!1)return;var zt=K.getBoundingClientRect();it=Y.clientX-zt.left,ht=Y.clientY-zt.top,ae._calcInverseTransform(V);var Lt=x.apply3DTransform(ae._invTransform)(it,ht);if(it=Lt[0],ht=Lt[1],it<0||it>me[0]._length||ht<0||ht>be[0]._length)return o.unhoverRaw(V,Y)}if(Y.pointerX=it+me[0]._offset,Y.pointerY=ht+be[0]._offset,"xval"in Y?Ge=d.flat($,Y.xval):Ge=d.p2c(me,it),"yval"in Y?ze=d.flat($,Y.yval):ze=d.p2c(be,ht),!s(Ge[0])||!s(ze[0]))return x.warn("Fx.hover failed",Y,V),o.unhoverRaw(V,Y)}var Vt=1/0;function $t(xr,Qr){for(mt=0;mt<rt.length;mt++)if(Ft=rt[mt],!(!Ft||!Ft[0]||!Ft[0].trace)&&(Xt=Ft[0].trace,!(Xt.visible!==!0||Xt._length===0)&&["carpet","contourcarpet"].indexOf(Xt._module.name)===-1)){if(Xt.type==="splom"?(Ut=0,Pt=$[Ut]):(Pt=d.getSubplot(Xt),Ut=$.indexOf(Pt)),Gt=Xe,d.isUnifiedHover(Gt)&&(Gt=Gt.charAt(0)),lt={cd:Ft,trace:Xt,xa:me[Ut],ya:be[Ut],maxHoverDistance:Te,maxSpikeDistance:Ie,index:!1,distance:Math.min(Vt,Te),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:l.defaultLine,name:Xt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ae[Pt]&&(lt.subplot=ae[Pt]._subplot),ae._splomScenes&&ae._splomScenes[Xt.uid]&&(lt.scene=ae._splomScenes[Xt.uid]),dt=Ze.length,Gt==="array"){var Gr=Y[mt];"pointNumber"in Gr?(lt.index=Gr.pointNumber,Gt="closest"):(Gt="","xval"in Gr&&(It=Gr.xval,Gt="x"),"yval"in Gr&&(Ct=Gr.yval,Gt=Gt?"closest":"y"))}else xr!==void 0&&Qr!==void 0?(It=xr,Ct=Qr):(It=Ge[Ut],Ct=ze[Ut]);if(Te!==0)if(Xt._module&&Xt._module.hoverPoints){var Br=Xt._module.hoverPoints(lt,It,Ct,Gt,{finiteRange:!0,hoverLayer:ae._hoverlayer});if(Br)for(var kr,en=0;en<Br.length;en++)kr=Br[en],s(kr.x0)&&s(kr.y0)&&Ze.push(N(kr,Xe))}else x.log("Unrecognized trace type in hover:",Xt);if(Xe==="closest"&&Ze.length>dt&&(Ze.splice(0,dt),Vt=Ze[0].distance),ue&&Ie!==0&&Ze.length===0){lt.distance=Ie,lt.index=!1;var Zn=Xt._module.hoverPoints(lt,It,Ct,"closest",{hoverLayer:ae._hoverlayer});if(Zn&&(Zn=Zn.filter(function(wr){return wr.spikeDistance<=Ie})),Zn&&Zn.length){var Hn,da=Zn.filter(function(wr){return wr.xa.showspikes&&wr.xa.spikesnap!=="hovered data"});if(da.length){var wa=da[0];s(wa.x0)&&s(wa.y0)&&(Hn=tr(wa),(!et.vLinePoint||et.vLinePoint.spikeDistance>Hn.spikeDistance)&&(et.vLinePoint=Hn))}var Va=Zn.filter(function(wr){return wr.ya.showspikes&&wr.ya.spikesnap!=="hovered data"});if(Va.length){var Oa=Va[0];s(Oa.x0)&&s(Oa.y0)&&(Hn=tr(Oa),(!et.hLinePoint||et.hLinePoint.spikeDistance>Hn.spikeDistance)&&(et.hLinePoint=Hn))}}}}}$t();function Ht(xr,Qr,Gr){for(var Br=null,kr=1/0,en,Zn=0;Zn<xr.length;Zn++)en=xr[Zn].spikeDistance,Gr&&Zn===0&&(en=-1/0),en<=kr&&en<=Qr&&(Br=xr[Zn],kr=en);return Br}function tr(xr){return xr?{xa:xr.xa,ya:xr.ya,x:xr.xSpike!==void 0?xr.xSpike:(xr.x0+xr.x1)/2,y:xr.ySpike!==void 0?xr.ySpike:(xr.y0+xr.y1)/2,distance:xr.distance,spikeDistance:xr.spikeDistance,curveNumber:xr.trace.index,color:xr.color,pointNumber:xr.index}:null}var qe={fullLayout:ae,container:ae._hoverlayer,event:Y},xt=V._spikepoints,Rt={vLinePoint:et.vLinePoint,hLinePoint:et.hLinePoint};V._spikepoints=Rt;var fr=function(){Ze.sort(function(xr,Qr){return xr.distance-Qr.distance}),Ze=G(Ze,Xe)};fr();var br=Xe.charAt(0),pr=(br==="x"||br==="y")&&Ze[0]&&S[Ze[0].trace.type];if(ue&&Ie!==0&&Ze.length!==0){var Tr=Ze.filter(function(xr){return xr.ya.showspikes}),Nr=Ht(Tr,Ie,pr);et.hLinePoint=tr(Nr);var Ir=Ze.filter(function(xr){return xr.xa.showspikes}),lr=Ht(Ir,Ie,pr);et.vLinePoint=tr(lr)}if(Ze.length===0){var Yr=o.unhoverRaw(V,Y);return ue&&(et.hLinePoint!==null||et.vLinePoint!==null)&&ee(xt)&&X(V,et,qe),Yr}if(ue&&ee(xt)&&X(V,et,qe),d.isXYhover(Gt)&&Ze[0].length!==0&&Ze[0].trace.type!=="splom"){var nt=Ze[0];L[nt.trace.type]?Ze=Ze.filter(function(xr){return xr.trace.index===nt.trace.index}):Ze=[nt];var Ae=Ze.length,Ee=J("x",nt,ae),Fe=J("y",nt,ae);$t(Ee,Fe);var Ke=[],tt={},ut=0,ct=function(xr){var Qr=L[xr.trace.type]?P(xr):xr.trace.index;if(!tt[Qr])ut++,tt[Qr]=ut,Ke.push(xr);else{var Gr=tt[Qr]-1,Br=Ke[Gr];Gr>0&&Math.abs(xr.distance)<Math.abs(Br.distance)&&(Ke[Gr]=xr)}},yt;for(yt=0;yt<Ae;yt++)ct(Ze[yt]);for(yt=Ze.length-1;yt>Ae-1;yt--)ct(Ze[yt]);Ze=Ke,fr()}var kt=V._hoverdata,jt=[],Mr=le(V),Sr=fe(V);for(We=0;We<Ze.length;We++){var Lr=Ze[We],Ar=d.makeEventData(Lr,Lr.trace,Lr.cd);if(Lr.hovertemplate!==!1){var Ur=!1;Lr.cd[Lr.index]&&Lr.cd[Lr.index].ht&&(Ur=Lr.cd[Lr.index].ht),Lr.hovertemplate=Ur||Lr.trace.hovertemplate||!1}if(Lr.xa&&Lr.ya){var fn=Lr.x0+Lr.xa._offset,Cr=Lr.x1+Lr.xa._offset,_r=Lr.y0+Lr.ya._offset,En=Lr.y1+Lr.ya._offset,Jr=Math.min(fn,Cr),Pr=Math.max(fn,Cr),vn=Math.min(_r,En),xn=Math.max(_r,En);Ar.bbox={x0:Jr+Sr,x1:Pr+Sr,y0:vn+Mr,y1:xn+Mr}}Lr.eventData=[Ar],jt.push(Ar)}V._hoverdata=jt;var qr=Xe==="y"&&(rt.length>1||Ze.length>1)||Xe==="closest"&&Pe&&Ze.length>1,st=l.combine(ae.plot_bgcolor||l.background,ae.paper_bgcolor),Bt=F(Ze,{gd:V,hovermode:Xe,rotateLabels:qr,bgColor:st,container:ae._hoverlayer,outerContainer:ae._paper.node(),commonLabelOpts:ae.hoverlabel,hoverdistance:ae.hoverdistance});if(d.isUnifiedHover(Xe)||(R(Bt,qr?"xa":"ya",ae),U(Bt,qr,ae._invScaleX,ae._invScaleY)),K&&K.tagName){var ir=v.getComponentMethod("annotations","hasClickToShow")(V,jt);n(u.select(K),ir?"pointer":"")}!K||te||!j(V,Y,kt)||(kt&&V.emit("plotly_unhover",{event:Y,points:kt}),V.emit("plotly_hover",{event:Y,points:V._hoverdata,xaxes:me,yaxes:be,xvals:Ge,yvals:ze}))}function P(V){return[V.trace.index,V.index,V.x0,V.y0,V.name,V.attr,V.xa?V.xa._id:"",V.ya?V.ya._id:""].join(",")}var O=/<extra>([\s\S]*)<\/extra>/;function F(V,Y){var ne=Y.gd,te=ne._fullLayout,K=Y.hovermode,$=Y.rotateLabels,ae=Y.bgColor,ie=Y.container,oe=Y.outerContainer,ue=Y.commonLabelOpts||{};if(V.length===0)return[[]];var xe=Y.fontFamily||p.HOVERFONT,he=Y.fontSize||p.HOVERFONTSIZE,me=V[0],be=me.xa,Ce=me.ya,Se=K.charAt(0),Be=me[Se+"Label"],Ye=se(ne,oe),Xe=Ye.top,Te=Ye.width,Ie=Ye.height,Ze=Be!==void 0&&me.distance<=Y.hoverdistance&&(K==="x"||K==="y");if(Ze){var rt=!0,Ge,ze;for(Ge=0;Ge<V.length;Ge++)if(rt&&V[Ge].zLabel===void 0&&(rt=!1),ze=V[Ge].hoverinfo||V[Ge].trace.hoverinfo,ze){var We=Array.isArray(ze)?ze:ze.split("+");if(We.indexOf("all")===-1&&We.indexOf(K)===-1){Ze=!1;break}}rt&&(Ze=!1)}var mt=ie.selectAll("g.axistext").data(Ze?[0]:[]);if(mt.enter().append("g").classed("axistext",!0),mt.exit().remove(),mt.each(function(){var lr=u.select(this),Yr=x.ensureSingle(lr,"path","",function(En){En.style({"stroke-width":"1px"})}),nt=x.ensureSingle(lr,"text","",function(En){En.attr("data-notex",1)}),Ae=ue.bgcolor||l.defaultLine,Ee=ue.bordercolor||l.contrast(Ae),Fe=l.contrast(Ae),Ke={family:ue.font.family||xe,size:ue.font.size||he,color:ue.font.color||Fe};Yr.style({fill:Ae,stroke:Ee}),nt.text(Be).call(f.font,Ke).call(r.positionText,0,0).call(r.convertToTspans,ne),lr.attr("transform","");var tt=se(ne,nt.node()),ut,ct;if(K==="x"){var yt=be.side==="top"?"-":"";nt.attr("text-anchor","middle").call(r.positionText,0,be.side==="top"?Xe-tt.bottom-_-h:Xe-tt.top+_+h),ut=be._offset+(me.x0+me.x1)/2,ct=Ce._offset+(be.side==="top"?0:Ce._length);var kt=tt.width/2+h;ut<kt?(ut=kt,Yr.attr("d","M-"+(kt-_)+",0L-"+(kt-_*2)+","+yt+_+"H"+(h+tt.width/2)+"v"+yt+(h*2+tt.height)+"H-"+kt+"V"+yt+_+"Z")):ut>te.width-kt?(ut=te.width-kt,Yr.attr("d","M"+(kt-_)+",0L"+kt+","+yt+_+"v"+yt+(h*2+tt.height)+"H-"+kt+"V"+yt+_+"H"+(kt-_*2)+"Z")):Yr.attr("d","M0,0L"+_+","+yt+_+"H"+(h+tt.width/2)+"v"+yt+(h*2+tt.height)+"H-"+(h+tt.width/2)+"V"+yt+_+"H-"+_+"Z")}else{var jt,Mr,Sr;Ce.side==="right"?(jt="start",Mr=1,Sr="",ut=be._offset+be._length):(jt="end",Mr=-1,Sr="-",ut=be._offset),ct=Ce._offset+(me.y0+me.y1)/2,nt.attr("text-anchor",jt),Yr.attr("d","M0,0L"+Sr+_+","+_+"V"+(h+tt.height/2)+"h"+Sr+(h*2+tt.width)+"V-"+(h+tt.height/2)+"H"+Sr+_+"V-"+_+"Z");var Lr=tt.height/2,Ar=Xe-tt.top-Lr,Ur="clip"+te._uid+"commonlabel"+Ce._id,fn;if(ut<tt.width+2*h+_){fn="M-"+(_+h)+"-"+Lr+"h-"+(tt.width-h)+"V"+Lr+"h"+(tt.width-h)+"Z";var Cr=tt.width-ut+h;r.positionText(nt,Cr,Ar),jt==="end"&&nt.selectAll("tspan").each(function(){var En=u.select(this),Jr=f.tester.append("text").text(En.text()).call(f.font,Ke),Pr=se(ne,Jr.node());Math.round(Pr.width)<Math.round(tt.width)&&En.attr("x",Cr-Pr.width),Jr.remove()})}else r.positionText(nt,Mr*(h+_),Ar),fn=null;var _r=te._topclips.selectAll("#"+Ur).data(fn?[0]:[]);_r.enter().append("clipPath").attr("id",Ur).append("path"),_r.exit().remove(),_r.select("path").attr("d",fn),f.setClipUrl(nt,fn?Ur:null,ne)}lr.attr("transform",t(ut,ct))}),d.isUnifiedHover(K)){ie.selectAll("g.hovertext").remove();var Ft=V.filter(function(lr){return lr.hoverinfo!=="none"});if(Ft.length===0)return;var Xt=te.hoverlabel,Pt=Xt.font,Ut={showlegend:!0,legend:{title:{text:Be,font:Pt},font:Pt,bgcolor:Xt.bgcolor,bordercolor:Xt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:te.legend?te.legend.traceorder:void 0,orientation:"v"}},Gt={font:Pt};y(Ut,Gt,ne._fullData);var It=Gt.legend;It.entries=[];for(var Ct=0;Ct<Ft.length;Ct++){var lt=Ft[Ct];if(lt.hoverinfo!=="none"){var dt=D(lt,!0,K,te,Be),et=dt[0],Pe=dt[1];lt.name=Pe,Pe!==""?lt.text=Pe+" : "+et:lt.text=et;var Je=lt.cd[lt.index];Je&&(Je.mc&&(lt.mc=Je.mc),Je.mcc&&(lt.mc=Je.mcc),Je.mlc&&(lt.mlc=Je.mlc),Je.mlcc&&(lt.mlc=Je.mlcc),Je.mlw&&(lt.mlw=Je.mlw),Je.mrc&&(lt.mrc=Je.mrc),Je.dir&&(lt.dir=Je.dir)),lt._distinct=!0,It.entries.push([lt])}}It.entries.sort(function(lr,Yr){return lr[0].trace.index-Yr[0].trace.index}),It.layer=ie,It._inHover=!0,It._groupTitleFont=Xt.grouptitlefont,g(ne,It);var it=ie.select("g.legend"),ht=se(ne,it.node()),zt=ht.width+2*h,Lt=ht.height+2*h,Vt=Ft[0],$t=(Vt.x0+Vt.x1)/2,Ht=(Vt.y0+Vt.y1)/2,tr=!(v.traceIs(Vt.trace,"bar-like")||v.traceIs(Vt.trace,"box-violin")),qe,xt;Se==="y"?tr?(xt=Ht-h,qe=Ht+h):(xt=Math.min.apply(null,Ft.map(function(lr){return Math.min(lr.y0,lr.y1)})),qe=Math.max.apply(null,Ft.map(function(lr){return Math.max(lr.y0,lr.y1)}))):xt=qe=x.mean(Ft.map(function(lr){return(lr.y0+lr.y1)/2}))-Lt/2;var Rt,fr;Se==="x"?tr?(Rt=$t+h,fr=$t-h):(Rt=Math.max.apply(null,Ft.map(function(lr){return Math.max(lr.x0,lr.x1)})),fr=Math.min.apply(null,Ft.map(function(lr){return Math.min(lr.x0,lr.x1)}))):Rt=fr=x.mean(Ft.map(function(lr){return(lr.x0+lr.x1)/2}))-zt/2;var br=be._offset,pr=Ce._offset;qe+=pr,Rt+=br,fr+=br-zt,xt+=pr-Lt;var Tr,Nr;return Rt+zt<Te&&Rt>=0?Tr=Rt:fr+zt<Te&&fr>=0?Tr=fr:br+zt<Te?Tr=br:Rt-$t<$t-fr+zt?Tr=Te-zt:Tr=0,Tr+=h,qe+Lt<Ie&&qe>=0?Nr=qe:xt+Lt<Ie&&xt>=0?Nr=xt:pr+Lt<Ie?Nr=pr:qe-Ht<Ht-xt+Lt?Nr=Ie-Lt:Nr=0,Nr+=h,it.attr("transform",t(Tr-1,Nr-1)),it}var Ir=ie.selectAll("g.hovertext").data(V,function(lr){return P(lr)});return Ir.enter().append("g").classed("hovertext",!0).each(function(){var lr=u.select(this);lr.append("rect").call(l.fill,l.addOpacity(ae,.8)),lr.append("text").classed("name",!0),lr.append("path").style("stroke-width","1px"),lr.append("text").classed("nums",!0).call(f.font,xe,he)}),Ir.exit().remove(),Ir.each(function(lr){var Yr=u.select(this).attr("transform",""),nt=lr.color;Array.isArray(nt)&&(nt=nt[lr.eventData[0].pointNumber]);var Ae=lr.bgcolor||nt,Ee=l.combine(l.opacity(Ae)?Ae:l.defaultLine,ae),Fe=l.combine(l.opacity(nt)?nt:l.defaultLine,ae),Ke=lr.borderColor||l.contrast(Ee),tt=D(lr,Ze,K,te,Be,Yr),ut=tt[0],ct=tt[1],yt=Yr.select("text.nums").call(f.font,lr.fontFamily||xe,lr.fontSize||he,lr.fontColor||Ke).text(ut).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,ne),kt=Yr.select("text.name"),jt=0,Mr=0;if(ct&&ct!==ut){kt.call(f.font,lr.fontFamily||xe,lr.fontSize||he,Fe).text(ct).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,ne);var Sr=se(ne,kt.node());jt=Sr.width+2*h,Mr=Sr.height+2*h}else kt.remove(),Yr.select("rect").remove();Yr.select("path").style({fill:Ee,stroke:Ke});var Lr=lr.xa._offset+(lr.x0+lr.x1)/2,Ar=lr.ya._offset+(lr.y0+lr.y1)/2,Ur=Math.abs(lr.x1-lr.x0),fn=Math.abs(lr.y1-lr.y0),Cr=se(ne,yt.node()),_r=Cr.width/te._invScaleX,En=Cr.height/te._invScaleY;lr.ty0=(Xe-Cr.top)/te._invScaleY,lr.bx=_r+2*h,lr.by=Math.max(En+2*h,Mr),lr.anchor="start",lr.txwidth=_r,lr.tx2width=jt,lr.offset=0;var Jr=(_r+_+h+jt)*te._invScaleX,Pr,vn;if($)lr.pos=Lr,Pr=Ar+fn/2+Jr<=Ie,vn=Ar-fn/2-Jr>=0,(lr.idealAlign==="top"||!Pr)&&vn?(Ar-=fn/2,lr.anchor="end"):Pr?(Ar+=fn/2,lr.anchor="start"):lr.anchor="middle";else if(lr.pos=Ar,Pr=Lr+Ur/2+Jr<=Te,vn=Lr-Ur/2-Jr>=0,(lr.idealAlign==="left"||!Pr)&&vn)Lr-=Ur/2,lr.anchor="end";else if(Pr)Lr+=Ur/2,lr.anchor="start";else{lr.anchor="middle";var xn=Jr/2,qr=Lr+xn-Te,st=Lr-xn;qr>0&&(Lr-=qr),st<0&&(Lr+=-st)}yt.attr("text-anchor",lr.anchor),jt&&kt.attr("text-anchor",lr.anchor),Yr.attr("transform",t(Lr,Ar)+($?i(A):""))}),Ir}function D(V,Y,ne,te,K,$){var ae="",ie="";V.nameOverride!==void 0&&(V.name=V.nameOverride),V.name&&(V.trace._meta&&(V.name=x.templateString(V.name,V.trace._meta)),ae=q(V.name,V.nameLength));var oe=ne.charAt(0),ue=oe==="x"?"y":"x";V.zLabel!==void 0?(V.xLabel!==void 0&&(ie+="x: "+V.xLabel+"<br>"),V.yLabel!==void 0&&(ie+="y: "+V.yLabel+"<br>"),V.trace.type!=="choropleth"&&V.trace.type!=="choroplethmapbox"&&(ie+=(ie?"z: ":"")+V.zLabel)):Y&&V[oe+"Label"]===K?ie=V[ue+"Label"]||"":V.xLabel===void 0?V.yLabel!==void 0&&V.trace.type!=="scattercarpet"&&(ie=V.yLabel):V.yLabel===void 0?ie=V.xLabel:ie="("+V.xLabel+", "+V.yLabel+")",(V.text||V.text===0)&&!Array.isArray(V.text)&&(ie+=(ie?"<br>":"")+V.text),V.extraText!==void 0&&(ie+=(ie?"<br>":"")+V.extraText),$&&ie===""&&!V.hovertemplate&&(ae===""&&$.remove(),ie=ae);var xe=V.hovertemplate||!1;if(xe){var he=V.hovertemplateLabels||V;V[oe+"Label"]!==K&&(he[oe+"other"]=he[oe+"Val"],he[oe+"otherLabel"]=he[oe+"Label"]),ie=x.hovertemplateString(xe,he,te._d3locale,V.eventData[0]||{},V.trace._meta),ie=ie.replace(O,function(me,be){return ae=q(be,V.nameLength),""})}return[ie,ae]}function R(V,Y,ne){var te=0,K=1,$=V.size(),ae=new Array($),ie=0;V.each(function(Ge){var ze=Ge[Y],We=ze._id.charAt(0)==="x",mt=ze.range;ie===0&&mt&&mt[0]>mt[1]!==We&&(K=-1),ae[ie++]=[{datum:Ge,traceIndex:Ge.trace.index,dp:0,pos:Ge.pos,posref:Ge.posref,size:Ge.by*(We?M:1)/2,pmin:0,pmax:We?ne.width:ne.height}]}),ae.sort(function(Ge,ze){return Ge[0].posref-ze[0].posref||K*(ze[0].traceIndex-Ge[0].traceIndex)});var oe,ue,xe,he,me,be,Ce;function Se(Ge){var ze=Ge[0],We=Ge[Ge.length-1];if(ue=ze.pmin-ze.pos-ze.dp+ze.size,xe=We.pos+We.dp+We.size-ze.pmax,ue>.01){for(me=Ge.length-1;me>=0;me--)Ge[me].dp+=ue;oe=!1}if(!(xe<.01)){if(ue<-.01){for(me=Ge.length-1;me>=0;me--)Ge[me].dp-=xe;oe=!1}if(!!oe){var mt=0;for(he=0;he<Ge.length;he++)be=Ge[he],be.pos+be.dp+be.size>ze.pmax&&mt++;for(he=Ge.length-1;he>=0&&!(mt<=0);he--)be=Ge[he],be.pos>ze.pmax-1&&(be.del=!0,mt--);for(he=0;he<Ge.length&&!(mt<=0);he++)if(be=Ge[he],be.pos<ze.pmin+1)for(be.del=!0,mt--,xe=be.size*2,me=Ge.length-1;me>=0;me--)Ge[me].dp-=xe;for(he=Ge.length-1;he>=0&&!(mt<=0);he--)be=Ge[he],be.pos+be.dp+be.size>ze.pmax&&(be.del=!0,mt--)}}}for(;!oe&&te<=$;){for(te++,oe=!0,he=0;he<ae.length-1;){var Be=ae[he],Ye=ae[he+1],Xe=Be[Be.length-1],Te=Ye[0];if(ue=Xe.pos+Xe.dp+Xe.size-Te.pos-Te.dp+Te.size,ue>.01&&Xe.pmin===Te.pmin&&Xe.pmax===Te.pmax){for(me=Ye.length-1;me>=0;me--)Ye[me].dp+=ue;for(Be.push.apply(Be,Ye),ae.splice(he+1,1),Ce=0,me=Be.length-1;me>=0;me--)Ce+=Be[me].dp;for(xe=Ce/Be.length,me=Be.length-1;me>=0;me--)Be[me].dp-=xe;oe=!1}else he++}ae.forEach(Se)}for(he=ae.length-1;he>=0;he--){var Ie=ae[he];for(me=Ie.length-1;me>=0;me--){var Ze=Ie[me],rt=Ze.datum;rt.offset=Ze.dp,rt.del=Ze.del}}}function U(V,Y,ne,te){var K=function(ae){return ae*ne},$=function(ae){return ae*te};V.each(function(ae){var ie=u.select(this);if(ae.del)return ie.remove();var oe=ie.select("text.nums"),ue=ae.anchor,xe=ue==="end"?-1:1,he={start:1,end:-1,middle:0}[ue],me=he*(_+h),be=me+he*(ae.txwidth+h),Ce=0,Se=ae.offset,Be=ue==="middle";Be&&(me-=ae.tx2width/2,be+=ae.txwidth/2+h),Y&&(Se*=-T,Ce=ae.offset*w),ie.select("path").attr("d",Be?"M-"+K(ae.bx/2+ae.tx2width/2)+","+$(Se-ae.by/2)+"h"+K(ae.bx)+"v"+$(ae.by)+"h-"+K(ae.bx)+"Z":"M0,0L"+K(xe*_+Ce)+","+$(_+Se)+"v"+$(ae.by/2-_)+"h"+K(xe*ae.bx)+"v-"+$(ae.by)+"H"+K(xe*_+Ce)+"V"+$(Se-_)+"Z");var Ye=Ce+me,Xe=Se+ae.ty0-ae.by/2+h,Te=ae.textAlign||"auto";Te!=="auto"&&(Te==="left"&&ue!=="start"?(oe.attr("text-anchor","start"),Ye=Be?-ae.bx/2-ae.tx2width/2+h:-ae.bx-h):Te==="right"&&ue!=="end"&&(oe.attr("text-anchor","end"),Ye=Be?ae.bx/2-ae.tx2width/2-h:ae.bx+h)),oe.call(r.positionText,K(Ye),$(Xe)),ae.tx2width&&(ie.select("text.name").call(r.positionText,K(be+he*h+Ce),$(Se+ae.ty0-ae.by/2+h)),ie.select("rect").call(f.setRect,K(be+(he-1)*ae.tx2width/2+Ce),$(Se-ae.by/2-1),K(ae.tx2width),$(ae.by+2)))})}function N(V,Y){var ne=V.index,te=V.trace||{},K=V.cd[0],$=V.cd[ne]||{};function ae(me){return me||s(me)&&me===0}var ie=Array.isArray(ne)?function(me,be){var Ce=x.castOption(K,ne,me);return ae(Ce)?Ce:x.extractOption({},te,"",be)}:function(me,be){return x.extractOption($,te,me,be)};function oe(me,be,Ce){var Se=ie(be,Ce);ae(Se)&&(V[me]=Se)}if(oe("hoverinfo","hi","hoverinfo"),oe("bgcolor","hbg","hoverlabel.bgcolor"),oe("borderColor","hbc","hoverlabel.bordercolor"),oe("fontFamily","htf","hoverlabel.font.family"),oe("fontSize","hts","hoverlabel.font.size"),oe("fontColor","htc","hoverlabel.font.color"),oe("nameLength","hnl","hoverlabel.namelength"),oe("textAlign","hta","hoverlabel.align"),V.posref=Y==="y"||Y==="closest"&&te.orientation==="h"?V.xa._offset+(V.x0+V.x1)/2:V.ya._offset+(V.y0+V.y1)/2,V.x0=x.constrain(V.x0,0,V.xa._length),V.x1=x.constrain(V.x1,0,V.xa._length),V.y0=x.constrain(V.y0,0,V.ya._length),V.y1=x.constrain(V.y1,0,V.ya._length),V.xLabelVal!==void 0&&(V.xLabel="xLabel"in V?V.xLabel:c.hoverLabelText(V.xa,V.xLabelVal,te.xhoverformat),V.xVal=V.xa.c2d(V.xLabelVal)),V.yLabelVal!==void 0&&(V.yLabel="yLabel"in V?V.yLabel:c.hoverLabelText(V.ya,V.yLabelVal,te.yhoverformat),V.yVal=V.ya.c2d(V.yLabelVal)),V.zLabelVal!==void 0&&V.zLabel===void 0&&(V.zLabel=String(V.zLabelVal)),!isNaN(V.xerr)&&!(V.xa.type==="log"&&V.xerr<=0)){var ue=c.tickText(V.xa,V.xa.c2l(V.xerr),"hover").text;V.xerrneg!==void 0?V.xLabel+=" +"+ue+" / -"+c.tickText(V.xa,V.xa.c2l(V.xerrneg),"hover").text:V.xLabel+=" \xB1 "+ue,Y==="x"&&(V.distance+=1)}if(!isNaN(V.yerr)&&!(V.ya.type==="log"&&V.yerr<=0)){var xe=c.tickText(V.ya,V.ya.c2l(V.yerr),"hover").text;V.yerrneg!==void 0?V.yLabel+=" +"+xe+" / -"+c.tickText(V.ya,V.ya.c2l(V.yerrneg),"hover").text:V.yLabel+=" \xB1 "+xe,Y==="y"&&(V.distance+=1)}var he=V.hoverinfo||V.trace.hoverinfo;return he&&he!=="all"&&(he=Array.isArray(he)?he:he.split("+"),he.indexOf("x")===-1&&(V.xLabel=void 0),he.indexOf("y")===-1&&(V.yLabel=void 0),he.indexOf("z")===-1&&(V.zLabel=void 0),he.indexOf("text")===-1&&(V.text=void 0),he.indexOf("name")===-1&&(V.name=void 0)),V}function X(V,Y,ne){var te=ne.container,K=ne.fullLayout,$=K._size,ae=ne.event,ie=!!Y.hLinePoint,oe=!!Y.vLinePoint,ue,xe;if(te.selectAll(".spikeline").remove(),!!(oe||ie)){var he=l.combine(K.plot_bgcolor,K.paper_bgcolor);if(ie){var me=Y.hLinePoint,be,Ce;ue=me&&me.xa,xe=me&&me.ya;var Se=xe.spikesnap;Se==="cursor"?(be=ae.pointerX,Ce=ae.pointerY):(be=ue._offset+me.x,Ce=xe._offset+me.y);var Be=m.readability(me.color,he)<1.5?l.contrast(he):me.color,Ye=xe.spikemode,Xe=xe.spikethickness,Te=xe.spikecolor||Be,Ie=c.getPxPosition(V,xe),Ze,rt;if(Ye.indexOf("toaxis")!==-1||Ye.indexOf("across")!==-1){if(Ye.indexOf("toaxis")!==-1&&(Ze=Ie,rt=be),Ye.indexOf("across")!==-1){var Ge=xe._counterDomainMin,ze=xe._counterDomainMax;xe.anchor==="free"&&(Ge=Math.min(Ge,xe.position),ze=Math.max(ze,xe.position)),Ze=$.l+Ge*$.w,rt=$.l+ze*$.w}te.insert("line",":first-child").attr({x1:Ze,x2:rt,y1:Ce,y2:Ce,"stroke-width":Xe,stroke:Te,"stroke-dasharray":f.dashStyle(xe.spikedash,Xe)}).classed("spikeline",!0).classed("crisp",!0),te.insert("line",":first-child").attr({x1:Ze,x2:rt,y1:Ce,y2:Ce,"stroke-width":Xe+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}Ye.indexOf("marker")!==-1&&te.insert("circle",":first-child").attr({cx:Ie+(xe.side!=="right"?Xe:-Xe),cy:Ce,r:Xe,fill:Te}).classed("spikeline",!0)}if(oe){var We=Y.vLinePoint,mt,Ft;ue=We&&We.xa,xe=We&&We.ya;var Xt=ue.spikesnap;Xt==="cursor"?(mt=ae.pointerX,Ft=ae.pointerY):(mt=ue._offset+We.x,Ft=xe._offset+We.y);var Pt=m.readability(We.color,he)<1.5?l.contrast(he):We.color,Ut=ue.spikemode,Gt=ue.spikethickness,It=ue.spikecolor||Pt,Ct=c.getPxPosition(V,ue),lt,dt;if(Ut.indexOf("toaxis")!==-1||Ut.indexOf("across")!==-1){if(Ut.indexOf("toaxis")!==-1&&(lt=Ct,dt=Ft),Ut.indexOf("across")!==-1){var et=ue._counterDomainMin,Pe=ue._counterDomainMax;ue.anchor==="free"&&(et=Math.min(et,ue.position),Pe=Math.max(Pe,ue.position)),lt=$.t+(1-Pe)*$.h,dt=$.t+(1-et)*$.h}te.insert("line",":first-child").attr({x1:mt,x2:mt,y1:lt,y2:dt,"stroke-width":Gt,stroke:It,"stroke-dasharray":f.dashStyle(ue.spikedash,Gt)}).classed("spikeline",!0).classed("crisp",!0),te.insert("line",":first-child").attr({x1:mt,x2:mt,y1:lt,y2:dt,"stroke-width":Gt+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}Ut.indexOf("marker")!==-1&&te.insert("circle",":first-child").attr({cx:mt,cy:Ct-(ue.side!=="top"?Gt:-Gt),r:Gt,fill:It}).classed("spikeline",!0)}}}function j(V,Y,ne){if(!ne||ne.length!==V._hoverdata.length)return!0;for(var te=ne.length-1;te>=0;te--){var K=ne[te],$=V._hoverdata[te];if(K.curveNumber!==$.curveNumber||String(K.pointNumber)!==String($.pointNumber)||String(K.pointNumbers)!==String($.pointNumbers))return!0}return!1}function ee(V,Y){return!Y||Y.vLinePoint!==V._spikepoints.vLinePoint||Y.hLinePoint!==V._spikepoints.hLinePoint}function q(V,Y){return r.plainText(V||"",{len:Y,allowedTags:["br","sub","sup","b","i","em"]})}function G(V,Y){for(var ne=Y.charAt(0),te=[],K=[],$=[],ae=0;ae<V.length;ae++){var ie=V[ae];v.traceIs(ie.trace,"bar-like")||v.traceIs(ie.trace,"box-violin")?$.push(ie):ie.trace[ne+"period"]?K.push(ie):te.push(ie)}return te.concat(K).concat($)}function J(V,Y,ne){var te=Y[V+"a"],K=Y[V+"Val"],$=Y.cd[0];if(te.type==="category")K=te._categoriesMap[K];else if(te.type==="date"){var ae=Y.trace[V+"periodalignment"];if(ae){var ie=Y.cd[Y.index],oe=ie[V+"Start"];oe===void 0&&(oe=ie[V]);var ue=ie[V+"End"];ue===void 0&&(ue=ie[V]);var xe=ue-oe;ae==="end"?K+=xe:ae==="middle"&&(K+=xe/2)}K=te.d2c(K)}return $&&$.t&&$.t.posLetter===te._id&&(ne.boxmode==="group"||ne.violinmode==="group")&&(K+=$.t.dPos),K}function le(V){return V.offsetTop+V.clientTop}function fe(V){return V.offsetLeft+V.clientLeft}function se(V,Y){var ne=V._fullLayout,te=Y.getBoundingClientRect(),K=te.x,$=te.y,ae=K+te.width,ie=$+te.height,oe=x.apply3DTransform(ne._invTransform)(K,$),ue=x.apply3DTransform(ne._invTransform)(ae,ie),xe=oe[0],he=oe[1],me=ue[0],be=ue[1];return{x:xe,y:he,width:me-xe,height:be-he,top:Math.min(he,be),left:Math.min(xe,me),right:Math.max(xe,me),bottom:Math.max(he,be)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(e,I,B){var u=e("../../lib"),s=e("../color"),m=e("./helpers").isUnifiedHover;I.exports=function(t,i,a,r){r=r||{};var n=i.legend;function f(l){r.font[l]||(r.font[l]=n?i.legend.font[l]:i.font[l])}i&&m(i.hovermode)&&(r.font||(r.font={}),f("size"),f("family"),f("color"),n?(r.bgcolor||(r.bgcolor=s.combine(i.legend.bgcolor,i.paper_bgcolor)),r.bordercolor||(r.bordercolor=i.legend.bordercolor)):r.bgcolor||(r.bgcolor=i.paper_bgcolor)),a("hoverlabel.bgcolor",r.bgcolor),a("hoverlabel.bordercolor",r.bordercolor),a("hoverlabel.namelength",r.namelength),u.coerceFont(a,"hoverlabel.font",r.font),a("hoverlabel.align",r.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(x,t){function i(a,r){return t[a]!==void 0?t[a]:u.coerce(x,t,s,a,r)}return i("clickmode"),i("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../dragelement"),x=e("./helpers"),t=e("./layout_attributes"),i=e("./hover");I.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:t},attributes:e("./attributes"),layoutAttributes:t,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:x.getDistanceFunction,getClosest:x.getClosest,inbox:x.inbox,quadrature:x.quadrature,appendArrayPointValue:x.appendArrayPointValue,castHoverOption:r,castHoverinfo:n,hover:i.hover,unhover:m.unhover,loneHover:i.loneHover,loneUnhover:a,click:e("./click")};function a(f){var l=s.isD3Selection(f)?f:u.select(f);l.selectAll("g.hovertext").remove(),l.selectAll(".spikeline").remove()}function r(f,l,o){return s.castOption(f,l,"hoverlabel."+o)}function n(f,l,o){function c(v){return s.coerceHoverinfo({hoverinfo:v},{_module:f._module},l)}return s.castOption(f,o,"hoverinfo",c)}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(e,I,B){var u=e("./constants"),s=e("../../plots/font_attributes"),m=s({editType:"none"});m.family.dflt=u.HOVERFONT,m.size.dflt=u.HOVERFONTSIZE,I.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:m,grouptitlefont:s({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes"),m=e("./hovermode_defaults"),x=e("./hoverlabel_defaults");I.exports=function(i,a){function r(v,d){return u.coerce(i,a,s,v,d)}var n=m(i,a);n&&(r("hoverdistance"),r("spikedistance"));var f=r("dragmode");f==="select"&&r("selectdirection");var l=a._has("mapbox"),o=a._has("geo"),c=a._basePlotModules.length;a.dragmode==="zoom"&&((l||o)&&c===1||l&&o&&c===2)&&(a.dragmode="pan"),x(i,a,r),u.coerceFont(r,"hoverlabel.grouptitlefont",a.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(e,I,B){var u=e("../../lib"),s=e("./hoverlabel_defaults"),m=e("./layout_attributes");I.exports=function(t,i){function a(r,n){return u.coerce(t,i,m,r,n)}s(t,i,a)}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(e,I,B){var u=e("../../lib"),s=e("../../lib/regex").counter,m=e("../../plots/domain").attributes,x=e("../../plots/cartesian/constants").idRegex,t=e("../../plot_api/plot_template"),i={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[s("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:m({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function a(o,c,v){var d=c[v+"axes"],p=Object.keys((o._splomAxes||{})[v]||{});if(Array.isArray(d))return d;if(p.length)return p}function r(o,c){var v=o.grid||{},d=a(c,v,"x"),p=a(c,v,"y");if(!o.grid&&!d&&!p)return;var y=Array.isArray(v.subplots)&&Array.isArray(v.subplots[0]),g=Array.isArray(d),A=Array.isArray(p),b=g&&d!==v.xaxes&&A&&p!==v.yaxes,M,w;y?(M=v.subplots.length,w=v.subplots[0].length):(A&&(M=p.length),g&&(w=d.length));var T=t.newContainer(c,"grid");function _(U,N){return u.coerce(v,T,i,U,N)}var h=_("rows",M),L=_("columns",w);if(!(h*L>1)){delete c.grid;return}if(!y&&!g&&!A){var S=_("pattern")==="independent";S&&(y=!0)}T._hasSubplotGrid=y;var k=_("roworder"),P=k==="top to bottom",O=y?.2:.1,F=y?.3:.1,D,R;b&&c._splomGridDflt&&(D=c._splomGridDflt.xside,R=c._splomGridDflt.yside),T._domains={x:n("x",_,O,D,L),y:n("y",_,F,R,h,P)}}function n(o,c,v,d,p,y){var g=c(o+"gap",v),A=c("domain."+o);c(o+"side",d);for(var b=new Array(p),M=A[0],w=(A[1]-M)/(p-g),T=w*(1-g),_=0;_<p;_++){var h=M+w*_;b[y?p-1-_:_]=[h,h+T]}return b}function f(o,c){var v=c.grid;if(!(!v||!v._domains)){var d=o.grid||{},p=c._subplots,y=v._hasSubplotGrid,g=v.rows,A=v.columns,b=v.pattern==="independent",M,w,T,_,h,L,S,k=v._axisMap={};if(y){var P=d.subplots||[];L=v.subplots=new Array(g);var O=1;for(M=0;M<g;M++){var F=L[M]=new Array(A),D=P[M]||[];for(w=0;w<A;w++)if(b?(h=O===1?"xy":"x"+O+"y"+O,O++):h=D[w],F[w]="",p.cartesian.indexOf(h)!==-1){if(S=h.indexOf("y"),T=h.slice(0,S),_=h.slice(S),k[T]!==void 0&&k[T]!==w||k[_]!==void 0&&k[_]!==M)continue;F[w]=h,k[T]=w,k[_]=M}}}else{var R=a(c,d,"x"),U=a(c,d,"y");v.xaxes=l(R,p.xaxis,A,k,"x"),v.yaxes=l(U,p.yaxis,g,k,"y")}var N=v._anchors={},X=v.roworder==="top to bottom";for(var j in k){var ee=j.charAt(0),q=v[ee+"side"],G,J,le;if(q.length<8)N[j]="free";else if(ee==="x"){if(q.charAt(0)==="t"===X?(G=0,J=1,le=g):(G=g-1,J=-1,le=-1),y){var fe=k[j];for(M=G;M!==le;M+=J)if(h=L[M][fe],!!h&&(S=h.indexOf("y"),h.slice(0,S)===j)){N[j]=h.slice(S);break}}else for(M=G;M!==le;M+=J)if(_=v.yaxes[M],p.cartesian.indexOf(j+_)!==-1){N[j]=_;break}}else if(q.charAt(0)==="l"?(G=0,J=1,le=A):(G=A-1,J=-1,le=-1),y){var se=k[j];for(M=G;M!==le;M+=J)if(h=L[se][M],!!h&&(S=h.indexOf("y"),h.slice(S)===j)){N[j]=h.slice(0,S);break}}else for(M=G;M!==le;M+=J)if(T=v.xaxes[M],p.cartesian.indexOf(T+j)!==-1){N[j]=T;break}}}}function l(o,c,v,d,p){var y=new Array(v),g;function A(b,M){c.indexOf(M)!==-1&&d[M]===void 0?(y[b]=M,d[M]=b):y[b]=""}if(Array.isArray(o))for(g=0;g<v;g++)A(g,o[g]);else for(A(0,p),g=1;g<v;g++)A(g,p+(g+1));return y}I.exports={moduleType:"component",name:"grid",schema:{layout:{grid:i}},layoutAttributes:i,sizeDefaults:r,contentDefaults:f}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(e,I,B){var u=e("../../plots/cartesian/constants"),s=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),I.exports=s("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",u.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",u.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib/to_log_range");I.exports=function(x,t,i,a){t=t||{};var r=i==="log"&&t.type==="linear",n=i==="linear"&&t.type==="log";if(!!(r||n)){for(var f=x._fullLayout.images,l=t._id.charAt(0),o,c,v=0;v<f.length;v++)if(o=f[v],c="images["+v+"].",o[l+"ref"]===t._id){var d=o[l],p=o["size"+l],y=null,g=null;if(r){y=s(d,t.range);var A=p/Math.pow(10,y)/2;g=2*Math.log(A+Math.sqrt(1+A*A))/Math.LN10}else y=Math.pow(10,d),g=y*(Math.pow(10,p/2)-Math.pow(10,-p/2));u(y)?u(g)||(g=null):(y=null,g=null),a(c+l,y),a(c+"size"+l,g)}}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./attributes"),t="images";I.exports=function(r,n){var f={name:t,handleItemDefaults:i};m(r,n,f)};function i(a,r,n){function f(A,b){return u.coerce(a,r,x,A,b)}var l=f("source"),o=f("visible",!!l);if(!o)return r;f("layer"),f("xanchor"),f("yanchor"),f("sizex"),f("sizey"),f("sizing"),f("opacity");for(var c={_fullLayout:n},v=["x","y"],d=0;d<2;d++){var p=v[d],y=s.coerceRef(a,r,c,p,"paper",void 0);if(y!=="paper"){var g=s.getFromId(c,y);g._imgIndices.push(r._index)}s.coercePosition(r,c,f,y,p,0)}return r}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(e,I,B){var u=e("@plotly/d3"),s=e("../drawing"),m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/axis_ids"),t=e("../../constants/xmlns_namespaces");I.exports=function(a){var r=a._fullLayout,n=[],f={},l=[],o,c;for(c=0;c<r.images.length;c++){var v=r.images[c];if(v.visible)if(v.layer==="below"&&v.xref!=="paper"&&v.yref!=="paper"){o=x.ref2id(v.xref)+x.ref2id(v.yref);var d=r._plots[o];if(!d){l.push(v);continue}d.mainplot&&(o=d.mainplot.id),f[o]||(f[o]=[]),f[o].push(v)}else v.layer==="above"?n.push(v):l.push(v)}var p={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function y(_){var h=u.select(this);if(this._imgSrc!==_.source)if(h.attr("xmlns",t.svg),_.source&&_.source.slice(0,5)==="data:")h.attr("xlink:href",_.source),this._imgSrc=_.source;else{var L=new Promise(function(S){var k=new Image;this.img=k,k.setAttribute("crossOrigin","anonymous"),k.onerror=P,k.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height;var F=O.getContext("2d");F.drawImage(this,0,0);var D=O.toDataURL("image/png");h.attr("xlink:href",D),S()},h.on("error",P),k.src=_.source,this._imgSrc=_.source;function P(){h.remove(),S()}}.bind(this));a._promises.push(L)}}function g(_){var h=u.select(this),L=m.getFromId(a,_.xref),S=m.getFromId(a,_.yref),k=m.getRefType(_.xref)==="domain",P=m.getRefType(_.yref)==="domain",O=r._size,F,D;L!==void 0?F=typeof _.xref=="string"&&k?L._length*_.sizex:Math.abs(L.l2p(_.sizex)-L.l2p(0)):F=_.sizex*O.w,S!==void 0?D=typeof _.yref=="string"&&P?S._length*_.sizey:Math.abs(S.l2p(_.sizey)-S.l2p(0)):D=_.sizey*O.h;var R=F*p.x[_.xanchor].offset,U=D*p.y[_.yanchor].offset,N=p.x[_.xanchor].sizing+p.y[_.yanchor].sizing,X,j;switch(L!==void 0?X=typeof _.xref=="string"&&k?L._length*_.x+L._offset:L.r2p(_.x)+L._offset:X=_.x*O.w+O.l,X+=R,S!==void 0?j=typeof _.yref=="string"&&P?S._length*(1-_.y)+S._offset:S.r2p(_.y)+S._offset:j=O.h-_.y*O.h+O.t,j+=U,_.sizing){case"fill":N+=" slice";break;case"stretch":N="none";break}h.attr({x:X,y:j,width:F,height:D,preserveAspectRatio:N,opacity:_.opacity});var ee=L&&m.getRefType(_.xref)!=="domain"?L._id:"",q=S&&m.getRefType(_.yref)!=="domain"?S._id:"",G=ee+q;s.setClipUrl(h,G?"clip"+r._uid+G:null,a)}var A=r._imageLowerLayer.selectAll("image").data(l),b=r._imageUpperLayer.selectAll("image").data(n);A.enter().append("image"),b.enter().append("image"),A.exit().remove(),b.exit().remove(),A.each(function(_){y.bind(this)(_),g.bind(this)(_)}),b.each(function(_){y.bind(this)(_),g.bind(this)(_)});var M=Object.keys(r._plots);for(c=0;c<M.length;c++){o=M[c];var w=r._plots[o];if(!!w.imagelayer){var T=w.imagelayer.selectAll("image").data(f[o]||[]);T.enter().append("image"),T.exit().remove(),T.each(function(_){y.bind(this)(_),g.bind(this)(_)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(e,I,B){I.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(e,I,B){var u=e("../../plots/font_attributes"),s=e("../color/attributes");I.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:u({editType:"legend"}),grouptitlefont:u({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:u({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(e,I,B){I.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("../../plot_api/plot_template"),x=e("../../plots/attributes"),t=e("./attributes"),i=e("../../plots/layout_attributes"),a=e("./helpers");I.exports=function(n,f,l){var o=n.legend||{},c=m.newContainer(f,"legend");function v(D,R){return s.coerce(o,c,t,D,R)}for(var d,p=function(D,R){var U=d._input,N=d;return s.coerce(U,N,x,D,R)},y=f.font||{},g=s.coerceFont(v,"grouptitlefont",s.extendFlat({},y,{size:Math.round(y.size*1.1)})),A=0,b=!1,M="normal",w=0;w<l.length;w++)d=l[w],!!d.visible&&((d.showlegend||d._dfltShowLegend&&!(d._module&&d._module.attributes&&d._module.attributes.showlegend&&d._module.attributes.showlegend.dflt===!1))&&(A++,d.showlegend&&(b=!0,(u.traceIs(d,"pie-like")||d._input.showlegend===!0)&&A++),s.coerceFont(p,"legendgrouptitle.font",g)),(u.traceIs(d,"bar")&&f.barmode==="stack"||["tonextx","tonexty"].indexOf(d.fill)!==-1)&&(M=a.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),d.legendgroup!==void 0&&d.legendgroup!==""&&(M=a.isReversed({traceorder:M})?"reversed+grouped":"grouped"));var T=s.coerce(n,f,i,"showlegend",b&&A>1);if(T===!1&&(f.legend=void 0),!(T===!1&&!o.uirevision)&&(v("uirevision",f.uirevision),T!==!1)){v("bgcolor",f.paper_bgcolor),v("bordercolor"),v("borderwidth");var _=s.coerceFont(v,"font",f.font),h=v("orientation"),L=h==="h",S,k,P;L?(S=0,u.getComponentMethod("rangeslider","isVisible")(n.xaxis)?(k=1.1,P="bottom"):(k=-.1,P="top")):(S=1.02,k=1,P="auto"),v("traceorder",M),a.isGrouped(f.legend)&&v("tracegroupgap"),v("itemsizing"),v("itemwidth"),v("itemclick"),v("itemdoubleclick"),v("groupclick"),v("x",S),v("xanchor"),v("y",k),v("yanchor",P),v("valign"),s.noneOrAll(o,c,["x","y"]);var O=v("title.text");if(O){v("title.side",L?"left":"top");var F=s.extendFlat({},_,{size:s.bigFont(_.size)});s.coerceFont(v,"title.font",F)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../lib/events"),i=e("../dragelement"),a=e("../drawing"),r=e("../color"),n=e("../../lib/svg_text_utils"),f=e("./handle_click"),l=e("./constants"),o=e("../../constants/alignment"),c=o.LINE_SPACING,v=o.FROM_TL,d=o.FROM_BR,p=e("./get_legend_data"),y=e("./style"),g=e("./helpers"),A=1;I.exports=function(R,U){return U||(U=R._fullLayout.legend||{}),b(R,U)};function b(D,R){var U=D._fullLayout,N="legend"+U._uid,X,j=R._inHover;if(j?(X=R.layer,N+="-hover"):X=U._infolayer,!!X){D._legendMouseDownTime||(D._legendMouseDownTime=0);var ee;if(j){if(!R.entries)return;ee=p(R.entries,R)}else{if(!D.calcdata)return;ee=U.showlegend&&p(D.calcdata,R)}var q=U.hiddenlabels||[];if(!j&&(!U.showlegend||!ee.length))return X.selectAll(".legend").remove(),U._topdefs.select("#"+N).remove(),m.autoMargin(D,"legend");var G=s.ensureSingle(X,"g","legend",function(K){j||K.attr("pointer-events","all")}),J=s.ensureSingleById(U._topdefs,"clipPath",N,function(K){K.append("rect")}),le=s.ensureSingle(G,"rect","bg",function(K){K.attr("shape-rendering","crispEdges")});le.call(r.stroke,R.bordercolor).call(r.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px");var fe=s.ensureSingle(G,"g","scrollbox"),se=R.title;if(R._titleWidth=0,R._titleHeight=0,se.text){var V=s.ensureSingle(fe,"text","legendtitletext");V.attr("text-anchor","start").call(a.font,se.font).text(se.text),h(V,fe,D,R,A)}else fe.selectAll(".legendtitletext").remove();var Y=s.ensureSingle(G,"rect","scrollbar",function(K){K.attr(l.scrollBarEnterAttrs).call(r.fill,l.scrollBarColor)}),ne=fe.selectAll("g.groups").data(ee);ne.enter().append("g").attr("class","groups"),ne.exit().remove();var te=ne.selectAll("g.traces").data(s.identity);te.enter().append("g").attr("class","traces"),te.exit().remove(),te.style("opacity",function(K){var $=K[0].trace;return x.traceIs($,"pie-like")?q.indexOf(K[0].label)!==-1?.5:1:$.visible==="legendonly"?.5:1}).each(function(){u.select(this).call(w,D,R)}).call(y,D,R).each(function(){j||u.select(this).call(_,D)}),s.syncOrAsync([m.previousPromises,function(){return k(D,ne,te,R)},function(){var K=U._size,$=R.borderwidth;if(!j){var ae=P(D);if(ae)return;var ie=K.l+K.w*R.x-v[O(R)]*R._width,oe=K.t+K.h*(1-R.y)-v[F(R)]*R._effHeight;if(U.margin.autoexpand){var ue=ie,xe=oe;ie=s.constrain(ie,0,U.width-R._width),oe=s.constrain(oe,0,U.height-R._effHeight),ie!==ue&&s.log("Constrain legend.x to make legend fit inside graph"),oe!==xe&&s.log("Constrain legend.y to make legend fit inside graph")}a.setTranslate(G,ie,oe)}if(Y.on(".drag",null),G.on("wheel",null),j||R._height<=R._maxHeight||D._context.staticPlot){var he=R._effHeight;j&&(he=R._height),le.attr({width:R._width-$,height:he-$,x:$/2,y:$/2}),a.setTranslate(fe,0,0),J.select("rect").attr({width:R._width-2*$,height:he-2*$,x:$,y:$}),a.setClipUrl(fe,N,D),a.setRect(Y,0,0,0,0),delete R._scrollY}else{var me=Math.max(l.scrollBarMinHeight,R._effHeight*R._effHeight/R._height),be=R._effHeight-me-2*l.scrollBarMargin,Ce=R._height-R._effHeight,Se=be/Ce,Be=Math.min(R._scrollY||0,Ce);le.attr({width:R._width-2*$+l.scrollBarWidth+l.scrollBarMargin,height:R._effHeight-$,x:$/2,y:$/2}),J.select("rect").attr({width:R._width-2*$+l.scrollBarWidth+l.scrollBarMargin,height:R._effHeight-2*$,x:$,y:$+Be}),a.setClipUrl(fe,N,D),ze(Be,me,Se),G.on("wheel",function(){Be=s.constrain(R._scrollY+u.event.deltaY/be*Ce,0,Ce),ze(Be,me,Se),Be!==0&&Be!==Ce&&u.event.preventDefault()});var Ye,Xe,Te,Ie=function(Pt,Ut,Gt){var It=(Gt-Ut)/Se+Pt;return s.constrain(It,0,Ce)},Ze=function(Pt,Ut,Gt){var It=(Ut-Gt)/Se+Pt;return s.constrain(It,0,Ce)},rt=u.behavior.drag().on("dragstart",function(){var Pt=u.event.sourceEvent;Pt.type==="touchstart"?Ye=Pt.changedTouches[0].clientY:Ye=Pt.clientY,Te=Be}).on("drag",function(){var Pt=u.event.sourceEvent;Pt.buttons===2||Pt.ctrlKey||(Pt.type==="touchmove"?Xe=Pt.changedTouches[0].clientY:Xe=Pt.clientY,Be=Ie(Te,Ye,Xe),ze(Be,me,Se))});Y.call(rt);var Ge=u.behavior.drag().on("dragstart",function(){var Pt=u.event.sourceEvent;Pt.type==="touchstart"&&(Ye=Pt.changedTouches[0].clientY,Te=Be)}).on("drag",function(){var Pt=u.event.sourceEvent;Pt.type==="touchmove"&&(Xe=Pt.changedTouches[0].clientY,Be=Ze(Te,Ye,Xe),ze(Be,me,Se))});fe.call(Ge)}function ze(Pt,Ut,Gt){R._scrollY=D._fullLayout.legend._scrollY=Pt,a.setTranslate(fe,0,-Pt),a.setRect(Y,R._width,l.scrollBarMargin+Pt*Gt,l.scrollBarWidth,Ut),J.select("rect").attr("y",$+Pt)}if(D._context.edits.legendPosition){var We,mt,Ft,Xt;G.classed("cursor-move",!0),i.init({element:G.node(),gd:D,prepFn:function(){var Pt=a.getTranslate(G);Ft=Pt.x,Xt=Pt.y},moveFn:function(Pt,Ut){var Gt=Ft+Pt,It=Xt+Ut;a.setTranslate(G,Gt,It),We=i.align(Gt,0,K.l,K.l+K.w,R.xanchor),mt=i.align(It,0,K.t+K.h,K.t,R.yanchor)},doneFn:function(){We!==void 0&&mt!==void 0&&x.call("_guiRelayout",D,{"legend.x":We,"legend.y":mt})},clickFn:function(Pt,Ut){var Gt=X.selectAll("g.traces").filter(function(){var It=this.getBoundingClientRect();return Ut.clientX>=It.left&&Ut.clientX<=It.right&&Ut.clientY>=It.top&&Ut.clientY<=It.bottom});Gt.size()>0&&M(D,G,Gt,Pt,Ut)}})}}],D)}}function M(D,R,U,N,X){var j=U.data()[0][0].trace,ee={event:X,node:U.node(),curveNumber:j.index,expandedIndex:j._expandedIndex,data:D.data,layout:D.layout,frames:D._transitionData._frames,config:D._context,fullData:D._fullData,fullLayout:D._fullLayout};j._group&&(ee.group=j._group),x.traceIs(j,"pie-like")&&(ee.label=U.datum()[0].label);var q=t.triggerHandler(D,"plotly_legendclick",ee);if(q!==!1){if(N===1)R._clickTimeout=setTimeout(function(){!D._fullLayout||f(U,D,N)},D._context.doubleClickDelay);else if(N===2){R._clickTimeout&&clearTimeout(R._clickTimeout),D._legendMouseDownTime=0;var G=t.triggerHandler(D,"plotly_legenddoubleclick",ee);G!==!1&&f(U,D,N)}}}function w(D,R,U){var N=D.data()[0][0],X=N.trace,j=x.traceIs(X,"pie-like"),ee=!U._inHover&&R._context.edits.legendText&&!j,q=U._maxNameLength,G,J;N.groupTitle?(G=N.groupTitle.text,J=N.groupTitle.font):(J=U.font,U.entries?G=N.text:(G=j?N.label:X.name,X._meta&&(G=s.templateString(G,X._meta))));var le=s.ensureSingle(D,"text","legendtext");le.attr("text-anchor","start").call(a.font,J).text(ee?T(G,q):G);var fe=U.itemwidth+l.itemGap*2;n.positionText(le,fe,0),ee?le.call(n.makeEditable,{gd:R,text:G}).call(h,D,R,U).on("edit",function(se){this.text(T(se,q)).call(h,D,R,U);var V=N.trace._fullInput||{},Y={};if(x.hasTransform(V,"groupby")){var ne=x.getTransformIndices(V,"groupby"),te=ne[ne.length-1],K=s.keyedContainer(V,"transforms["+te+"].styles","target","value.name");K.set(N.trace._group,se),Y=K.constructUpdate()}else Y.name=se;return x.call("_guiRestyle",R,Y,X.index)}):h(le,D,R,U)}function T(D,R){var U=Math.max(4,R);if(D&&D.trim().length>=U/2)return D;D=D||"";for(var N=U-D.length;N>0;N--)D+=" ";return D}function _(D,R){var U=R._context.doubleClickDelay,N,X=1,j=s.ensureSingle(D,"rect","legendtoggle",function(ee){R._context.staticPlot||ee.style("cursor","pointer").attr("pointer-events","all"),ee.call(r.fill,"rgba(0,0,0,0)")});R._context.staticPlot||(j.on("mousedown",function(){N=new Date().getTime(),N-R._legendMouseDownTime<U?X+=1:(X=1,R._legendMouseDownTime=N)}),j.on("mouseup",function(){if(!(R._dragged||R._editing)){var ee=R._fullLayout.legend;new Date().getTime()-R._legendMouseDownTime>U&&(X=Math.max(X-1,1)),M(R,ee,D,X,u.event)}}))}function h(D,R,U,N,X){N._inHover&&D.attr("data-notex",!0),n.convertToTspans(D,U,function(){L(R,U,N,X)})}function L(D,R,U,N){var X=D.data()[0][0];if(!U._inHover&&X&&!X.trace.showlegend){D.remove();return}var j=D.select("g[class*=math-group]"),ee=j.node();U||(U=R._fullLayout.legend);var q=U.borderwidth,G;N===A?G=U.title.font:X.groupTitle?G=X.groupTitle.font:G=U.font;var J=G.size*c,le,fe;if(ee){var se=a.bBox(ee);le=se.height,fe=se.width,N===A?a.setTranslate(j,q,q+le*.75):a.setTranslate(j,0,le*.25)}else{var V=D.select(N===A?".legendtitletext":".legendtext"),Y=n.lineCount(V),ne=V.node();if(le=J*Y,fe=ne?a.bBox(ne).width:0,N===A)U.title.side==="left"&&(fe+=l.itemGap*2),n.positionText(V,q+l.titlePad,q+J);else{var te=l.itemGap*2+U.itemwidth;X.groupTitle&&(te=l.itemGap,fe-=U.itemwidth),n.positionText(V,te,-J*((Y-1)/2-.3))}}N===A?(U._titleWidth=fe,U._titleHeight=le):(X.lineHeight=J,X.height=Math.max(le,16)+3,X.width=fe)}function S(D){var R=0,U=0,N=D.title.side;return N&&(N.indexOf("left")!==-1&&(R=D._titleWidth),N.indexOf("top")!==-1&&(U=D._titleHeight)),[R,U]}function k(D,R,U,N){var X=D._fullLayout;N||(N=X.legend);var j=X._size,ee=g.isVertical(N),q=g.isGrouped(N),G=N.borderwidth,J=2*G,le=l.itemGap,fe=N.itemwidth+le*2,se=2*(G+le),V=F(N),Y=N.y<0||N.y===0&&V==="top",ne=N.y>1||N.y===1&&V==="bottom",te=N.tracegroupgap;N._maxHeight=Math.max(Y||ne?X.height/2:j.h,30);var K=0;N._width=0,N._height=0;var $=S(N);if(ee)U.each(function(We){var mt=We[0].height;a.setTranslate(this,G+$[0],G+$[1]+N._height+mt/2+le),N._height+=mt,N._width=Math.max(N._width,We[0].width)}),K=fe+N._width,N._width+=le+fe+J,N._height+=se,q&&(R.each(function(We,mt){a.setTranslate(this,0,mt*N.tracegroupgap)}),N._height+=(N._lgroupsLength-1)*N.tracegroupgap);else{var ae=O(N),ie=N.x<0||N.x===0&&ae==="right",oe=N.x>1||N.x===1&&ae==="left",ue=ne||Y,xe=X.width/2;N._maxWidth=Math.max(ie?ue&&ae==="left"?j.l+j.w:xe:oe?ue&&ae==="right"?j.r+j.w:xe:j.w,2*fe);var he=0,me=0;U.each(function(We){var mt=We[0].width+fe;he=Math.max(he,mt),me+=mt}),K=null;var be=0;if(q){var Ce=0,Se=0,Be=0;R.each(function(){var We=0,mt=0;u.select(this).selectAll("g.traces").each(function(Xt){var Pt=Xt[0].width,Ut=Xt[0].height;a.setTranslate(this,$[0],$[1]+G+le+Ut/2+mt),mt+=Ut,We=Math.max(We,fe+Pt)}),Ce=Math.max(Ce,mt);var Ft=We+le;Se>0&&Ft+G+Se>N._maxWidth&&(be=Math.max(be,Se),Se=0,Be+=Ce+te,Ce=mt),a.setTranslate(this,Se,Be),Se+=Ft}),N._width=Math.max(be,Se)+G,N._height=Be+Ce+se}else{var Ye=U.size(),Xe=me+J+(Ye-1)*le<N._maxWidth,Te=0,Ie=0,Ze=0,rt=0;U.each(function(We){var mt=We[0].height,Ft=fe+We[0].width,Xt=(Xe?Ft:he)+le;Xt+G+Ie-le>=N._maxWidth&&(be=Math.max(be,rt),Ie=0,Ze+=Te,N._height+=Te,Te=0),a.setTranslate(this,$[0]+G+Ie,$[1]+G+Ze+mt/2+le),rt=Ie+Ft+le,Ie+=Xt,Te=Math.max(Te,mt)}),Xe?(N._width=Ie+J,N._height=Te+se):(N._width=Math.max(be,rt)+J,N._height+=Te+se)}}N._width=Math.ceil(Math.max(N._width+$[0],N._titleWidth+2*(G+l.titlePad))),N._height=Math.ceil(Math.max(N._height+$[1],N._titleHeight+2*(G+l.itemGap))),N._effHeight=Math.min(N._height,N._maxHeight);var Ge=D._context.edits,ze=Ge.legendText||Ge.legendPosition;U.each(function(We){var mt=u.select(this).select(".legendtoggle"),Ft=We[0].height,Xt=ze?fe:K||fe+We[0].width;ee||(Xt+=le/2),a.setRect(mt,0,-Ft/2,Xt,Ft)})}function P(D){var R=D._fullLayout,U=R.legend,N=O(U),X=F(U);return m.autoMargin(D,"legend",{x:U.x,y:U.y,l:U._width*v[N],r:U._width*d[N],b:U._effHeight*d[X],t:U._effHeight*v[X]})}function O(D){return s.isRightAnchor(D)?"right":s.isCenterAnchor(D)?"center":"left"}function F(D){return s.isBottomAnchor(D)?"bottom":s.isMiddleAnchor(D)?"middle":"top"}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(e,I,B){var u=e("../../registry"),s=e("./helpers");I.exports=function(x,t){var i=t._inHover,a=s.isGrouped(t),r=s.isReversed(t),n={},f=[],l=!1,o={},c=0,v=0,d,p;function y(U,N){if(U===""||!s.isGrouped(t)){var X="~~i"+c;f.push(X),n[X]=[N],c++}else f.indexOf(U)===-1?(f.push(U),l=!0,n[U]=[N]):n[U].push(N)}for(d=0;d<x.length;d++){var g=x[d],A=g[0],b=A.trace,M=b.legendgroup;if(!(!i&&(!b.visible||!b.showlegend)))if(u.traceIs(b,"pie-like"))for(o[M]||(o[M]={}),p=0;p<g.length;p++){var w=g[p].label;o[M][w]||(y(M,{label:w,color:g[p].color,i:g[p].i,trace:b,pts:g[p].pts}),o[M][w]=!0,v=Math.max(v,(w||"").length))}else y(M,A),v=Math.max(v,(b.name||"").length)}if(!f.length)return[];var T=!l||!a,_=[];for(d=0;d<f.length;d++){var h=n[f[d]];T?_.push(h[0]):_.push(h)}for(T&&(_=[_]),d=0;d<_.length;d++){var L=1/0;for(p=0;p<_[d].length;p++){var S=_[d][p].trace.legendrank;L>S&&(L=S)}_[d][0]._groupMinRank=L,_[d][0]._preGroupSort=d}var k=function(U,N){return U[0]._groupMinRank-N[0]._groupMinRank||U[0]._preGroupSort-N[0]._preGroupSort},P=function(U,N){return U.trace.legendrank-N.trace.legendrank||U._preSort-N._preSort};for(_.forEach(function(U,N){U[0]._preGroupSort=N}),_.sort(k),d=0;d<_.length;d++){_[d].forEach(function(U,N){U._preSort=N}),_[d].sort(P);var O=_[d][0].trace,F=null;for(p=0;p<_[d].length;p++){var D=_[d][p].trace.legendgrouptitle;if(D&&D.text){F=D,i&&(D.font=t._groupTitleFont);break}}if(r&&_[d].reverse(),F){var R=!1;for(p=0;p<_[d].length;p++)if(u.traceIs(_[d][p].trace,"pie-like")){R=!0;break}_[d].unshift({i:-1,groupTitle:F,noClick:R,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:t.groupclick==="toggleitem"?!0:O.visible}})}for(p=0;p<_[d].length;p++)_[d][p]=[_[d][p]]}return t._lgroupsLength=_.length,t._maxNameLength=v,_}},{"../../registry":638,"./helpers":422}],421:[function(e,I,B){var u=e("../../lib"),s=e("../../registry"),m=!0;I.exports=function(t,i,a){var r=i._fullLayout;if(i._dragged||i._editing)return;var n=r.legend.itemclick,f=r.legend.itemdoubleclick,l=r.legend.groupclick;a===1&&n==="toggle"&&f==="toggleothers"&&m&&i.data&&i._context.showTips&&u.notifier(u._(i,"Double-click on legend to isolate one trace"),"long"),m=!1;var o;if(a===1?o=n:a===2&&(o=f),!o)return;var c=l==="togglegroup",v=r.hiddenlabels?r.hiddenlabels.slice():[],d=t.data()[0][0];if(d.groupTitle&&d.noClick)return;var p=i._fullData,y=d.trace,g=y.legendgroup,A,b,M,w,T,_,h={},L=[],S=[],k=[];function P(se,V,Y){var ne=L.indexOf(se),te=h[V];return te||(te=h[V]=[]),L.indexOf(se)===-1&&(L.push(se),ne=L.length-1),te[ne]=Y,ne}function O(se,V){if(!(d.groupTitle&&!c)){var Y=se._fullInput;if(s.hasTransform(Y,"groupby")){var ne=S[Y.index];if(!ne){var te=s.getTransformIndices(Y,"groupby"),K=te[te.length-1];ne=u.keyedContainer(Y,"transforms["+K+"].styles","target","value.visible"),S[Y.index]=ne}var $=ne.get(se._group);$===void 0&&($=!0),$!==!1&&ne.set(se._group,V),k[Y.index]=P(Y.index,"visible",Y.visible!==!1)}else{var ae=Y.visible===!1?!1:V;P(Y.index,"visible",ae)}}}if(s.traceIs(y,"pie-like")){var F=d.label,D=v.indexOf(F);o==="toggle"?D===-1?v.push(F):v.splice(D,1):o==="toggleothers"&&(v=[],i.calcdata[0].forEach(function(se){F!==se.label&&v.push(se.label)}),i._fullLayout.hiddenlabels&&i._fullLayout.hiddenlabels.length===v.length&&D===-1&&(v=[])),s.call("_guiRelayout",i,"hiddenlabels",v)}else{var R=g&&g.length,U=[],N;if(R)for(A=0;A<p.length;A++)N=p[A],!!N.visible&&N.legendgroup===g&&U.push(A);if(o==="toggle"){var X;switch(y.visible){case!0:X="legendonly";break;case!1:X=!1;break;case"legendonly":X=!0;break}if(R)if(c)for(A=0;A<p.length;A++)p[A].visible!==!1&&p[A].legendgroup===g&&O(p[A],X);else O(y,X);else O(y,X)}else if(o==="toggleothers"){var j,ee,q,G,J=!0;for(A=0;A<p.length;A++)if(j=p[A]===y,q=p[A].showlegend!==!0,!(j||q)&&(ee=R&&p[A].legendgroup===g,!ee&&p[A].visible===!0&&!s.traceIs(p[A],"notLegendIsolatable"))){J=!1;break}for(A=0;A<p.length;A++)if(p[A].visible!==!1&&!s.traceIs(p[A],"notLegendIsolatable"))switch(y.visible){case"legendonly":O(p[A],!0);break;case!0:G=J?!0:"legendonly",j=p[A]===y,q=p[A].showlegend!==!0&&!p[A].legendgroup,ee=j||R&&p[A].legendgroup===g,O(p[A],ee||q?!0:G);break}}for(A=0;A<S.length;A++)if(M=S[A],!!M){var le=M.constructUpdate(),fe=Object.keys(le);for(b=0;b<fe.length;b++)w=fe[b],_=h[w]=h[w]||[],_[k[A]]=le[w]}for(T=Object.keys(h),A=0;A<T.length;A++)for(w=T[A],b=0;b<L.length;b++)h[w].hasOwnProperty(b)||(h[w][b]=void 0);s.call("_guiRestyle",i,h,L)}}},{"../../lib":503,"../../registry":638}],422:[function(e,I,B){B.isGrouped=function(s){return(s.traceorder||"").indexOf("grouped")!==-1},B.isVertical=function(s){return s.orientation!=="h"},B.isReversed=function(s){return(s.traceorder||"").indexOf("reversed")!==-1}},{}],423:[function(e,I,B){I.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../lib"),x=m.strTranslate,t=e("../drawing"),i=e("../color"),a=e("../colorscale/helpers").extractOpts,r=e("../../traces/scatter/subtypes"),n=e("../../traces/pie/style_one"),f=e("../../traces/pie/helpers").castOption,l=e("./constants"),o=12,c=5,v=2,d=10,p=5;I.exports=function(M,w,T){var _=w._fullLayout;T||(T=_.legend);var h=T.itemsizing==="constant",L=T.itemwidth,S=(L+l.itemGap*2)/2,k=x(S,0),P=function(fe,se,V,Y){var ne;if(fe+1)ne=fe;else if(se&&se.width>0)ne=se.width;else return 0;return h?Y:Math.min(ne,V)};M.each(function(fe){var se=u.select(this),V=m.ensureSingle(se,"g","layers");V.style("opacity",fe[0].trace.opacity);var Y=T.valign,ne=fe[0].lineHeight,te=fe[0].height;if(Y==="middle"||!ne||!te)V.attr("transform",null);else{var K={top:1,bottom:-1}[Y],$=K*(.5*(ne-te+3));V.attr("transform",x(0,$))}var ae=V.selectAll("g.legendfill").data([fe]);ae.enter().append("g").classed("legendfill",!0);var ie=V.selectAll("g.legendlines").data([fe]);ie.enter().append("g").classed("legendlines",!0);var oe=V.selectAll("g.legendsymbols").data([fe]);oe.enter().append("g").classed("legendsymbols",!0),oe.selectAll("g.legendpoints").data([fe]).enter().append("g").classed("legendpoints",!0)}).each(le).each(D).each(U).each(R).each(X).each(G).each(q).each(O).each(F).each(j).each(ee);function O(fe){var se=g(fe),V=se.showFill,Y=se.showLine,ne=se.showGradientLine,te=se.showGradientFill,K=se.anyFill,$=se.anyLine,ae=fe[0],ie=ae.trace,oe,ue,xe=a(ie),he=xe.colorscale,me=xe.reversescale,be=function(Ie){if(Ie.size()){var Ze="legendfill-"+ie.uid;t.gradient(Ie,w,Ze,y(me),he,"fill")}},Ce=function(Ie){if(Ie.size()){var Ze="legendline-"+ie.uid;t.lineGroupStyle(Ie),t.gradient(Ie,w,Ze,y(me),he,"stroke")}},Se=r.hasMarkers(ie)||!K?"M5,0":$?"M5,-2":"M5,-3",Be=u.select(this),Ye=Be.select(".legendfill").selectAll("path").data(V||te?[fe]:[]);if(Ye.enter().append("path").classed("js-fill",!0),Ye.exit().remove(),Ye.attr("d",Se+"h"+L+"v6h-"+L+"z").call(V?t.fillGroupStyle:be),Y||ne){var Xe=P(void 0,ie.line,d,c);ue=m.minExtend(ie,{line:{width:Xe}}),oe=[m.minExtend(ae,{trace:ue})]}var Te=Be.select(".legendlines").selectAll("path").data(Y||ne?[oe]:[]);Te.enter().append("path").classed("js-line",!0),Te.exit().remove(),Te.attr("d",Se+(ne?"l"+L+",0.0001":"h"+L)).call(Y?t.lineGroupStyle:Ce)}function F(fe){var se=g(fe),V=se.anyFill,Y=se.anyLine,ne=se.showLine,te=se.showMarker,K=fe[0],$=K.trace,ae=!te&&!Y&&!V&&r.hasText($),ie,oe;function ue(Ye,Xe,Te,Ie){var Ze=m.nestedProperty($,Ye).get(),rt=m.isArrayOrTypedArray(Ze)&&Xe?Xe(Ze):Ze;if(h&&rt&&Ie!==void 0&&(rt=Ie),Te){if(rt<Te[0])return Te[0];if(rt>Te[1])return Te[1]}return rt}function xe(Ye){return K._distinct&&K.index&&Ye[K.index]?Ye[K.index]:Ye[0]}if(te||ae||ne){var he={},me={};if(te){he.mc=ue("marker.color",xe),he.mx=ue("marker.symbol",xe),he.mo=ue("marker.opacity",m.mean,[.2,1]),he.mlc=ue("marker.line.color",xe),he.mlw=ue("marker.line.width",m.mean,[0,5],v),me.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var be=ue("marker.size",m.mean,[2,16],o);he.ms=be,me.marker.size=be}ne&&(me.line={width:ue("line.width",xe,[0,10],c)}),ae&&(he.tx="Aa",he.tp=ue("textposition",xe),he.ts=10,he.tc=ue("textfont.color",xe),he.tf=ue("textfont.family",xe)),ie=[m.minExtend(K,he)],oe=m.minExtend($,me),oe.selectedpoints=null,oe.texttemplate=null}var Ce=u.select(this).select("g.legendpoints"),Se=Ce.selectAll("path.scatterpts").data(te?ie:[]);Se.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",k),Se.exit().remove(),Se.call(t.pointStyle,oe,w),te&&(ie[0].mrc=3);var Be=Ce.selectAll("g.pointtext").data(ae?ie:[]);Be.enter().append("g").classed("pointtext",!0).append("text").attr("transform",k),Be.exit().remove(),Be.selectAll("text").call(t.textPointStyle,oe,w)}function D(fe){var se=fe[0].trace,V=se.type==="waterfall";if(fe[0]._distinct&&V){var Y=fe[0].trace[fe[0].dir].marker;return fe[0].mc=Y.color,fe[0].mlw=Y.line.width,fe[0].mlc=Y.line.color,N(fe,this,"waterfall")}var ne=[];se.visible&&V&&(ne=fe[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var te=u.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ne);te.enter().append("path").classed("legendwaterfall",!0).attr("transform",k).style("stroke-miterlimit",1),te.exit().remove(),te.each(function(K){var $=u.select(this),ae=se[K[0]].marker,ie=P(void 0,ae.line,p,v);$.attr("d",K[1]).style("stroke-width",ie+"px").call(i.fill,ae.color),ie&&$.call(i.stroke,ae.line.color)})}function R(fe){N(fe,this)}function U(fe){N(fe,this,"funnel")}function N(fe,se,V){var Y=fe[0].trace,ne=Y.marker||{},te=ne.line||{},K=V?Y.visible&&Y.type===V:s.traceIs(Y,"bar"),$=u.select(se).select("g.legendpoints").selectAll("path.legend"+V).data(K?[fe]:[]);$.enter().append("path").classed("legend"+V,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),$.exit().remove(),$.each(function(ae){var ie=u.select(this),oe=ae[0],ue=P(oe.mlw,ne.line,p,v);ie.style("stroke-width",ue+"px");var xe=oe.mcc;if(!T._inHover&&"mc"in oe){var he=a(ne),me=he.mid;me===void 0&&(me=(he.max+he.min)/2),xe=t.tryColorscale(ne,"")(me)}var be=xe||oe.mc||ne.color,Ce=ne.pattern,Se=Ce&&t.getPatternAttr(Ce.shape,0,"");if(Se){var Be=t.getPatternAttr(Ce.bgcolor,0,null),Ye=t.getPatternAttr(Ce.fgcolor,0,null),Xe=Ce.fgopacity,Te=A(Ce.size,8,10),Ie=A(Ce.solidity,.5,1),Ze="legend-"+Y.uid;ie.call(t.pattern,"legend",w,Ze,Se,Te,Ie,xe,Ce.fillmode,Be,Ye,Xe)}else ie.call(i.fill,be);ue&&i.stroke(ie,oe.mlc||te.color)})}function X(fe){var se=fe[0].trace,V=u.select(this).select("g.legendpoints").selectAll("path.legendbox").data(se.visible&&s.traceIs(se,"box-violin")?[fe]:[]);V.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),V.exit().remove(),V.each(function(){var Y=u.select(this);if((se.boxpoints==="all"||se.points==="all")&&i.opacity(se.fillcolor)===0&&i.opacity((se.line||{}).color)===0){var ne=m.minExtend(se,{marker:{size:h?o:m.constrain(se.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});V.call(t.pointStyle,ne,w)}else{var te=P(void 0,se.line,p,v);Y.style("stroke-width",te+"px").call(i.fill,se.fillcolor),te&&i.stroke(Y,se.line.color)}})}function j(fe){var se=fe[0].trace,V=u.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(se.visible&&se.type==="candlestick"?[fe,fe]:[]);V.enter().append("path").classed("legendcandle",!0).attr("d",function(Y,ne){return ne?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",k).style("stroke-miterlimit",1),V.exit().remove(),V.each(function(Y,ne){var te=u.select(this),K=se[ne?"increasing":"decreasing"],$=P(void 0,K.line,p,v);te.style("stroke-width",$+"px").call(i.fill,K.fillcolor),$&&i.stroke(te,K.line.color)})}function ee(fe){var se=fe[0].trace,V=u.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(se.visible&&se.type==="ohlc"?[fe,fe]:[]);V.enter().append("path").classed("legendohlc",!0).attr("d",function(Y,ne){return ne?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",k).style("stroke-miterlimit",1),V.exit().remove(),V.each(function(Y,ne){var te=u.select(this),K=se[ne?"increasing":"decreasing"],$=P(void 0,K.line,p,v);te.style("fill","none").call(t.dashLine,K.line.dash,$),$&&i.stroke(te,K.line.color)})}function q(fe){J(fe,this,"pie")}function G(fe){J(fe,this,"funnelarea")}function J(fe,se,V){var Y=fe[0],ne=Y.trace,te=V?ne.visible&&ne.type===V:s.traceIs(ne,V),K=u.select(se).select("g.legendpoints").selectAll("path.legend"+V).data(te?[fe]:[]);if(K.enter().append("path").classed("legend"+V,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),K.exit().remove(),K.size()){var $=(ne.marker||{}).line,ae=P(f($.width,Y.pts),$,p,v),ie=m.minExtend(ne,{marker:{line:{width:ae}}});ie.marker.line.color=$.color;var oe=m.minExtend(Y,{trace:ie});n(K,oe,ie)}}function le(fe){var se=fe[0].trace,V,Y=[];if(se.visible)switch(se.type){case"histogram2d":case"heatmap":Y=[["M-15,-2V4H15V-2Z"]],V=!0;break;case"choropleth":case"choroplethmapbox":Y=[["M-6,-6V6H6V-6Z"]],V=!0;break;case"densitymapbox":Y=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],V="radial";break;case"cone":Y=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],V=!1;break;case"streamtube":Y=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],V=!1;break;case"surface":Y=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],V=!0;break;case"mesh3d":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],V=!1;break;case"volume":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],V=!0;break;case"isosurface":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],V=!1;break}var ne=u.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(Y);ne.enter().append("path").classed("legend3dandfriends",!0).attr("transform",k).style("stroke-miterlimit",1),ne.exit().remove(),ne.each(function(te,K){var $=u.select(this),ae=a(se),ie=ae.colorscale,oe=ae.reversescale,ue=function(be){if(be.size()){var Ce="legendfill-"+se.uid;t.gradient(be,w,Ce,y(oe,V==="radial"),ie,"fill")}},xe;if(ie){if(!V){var me=ie.length;xe=K===0?ie[oe?me-1:0][1]:K===1?ie[oe?0:me-1][1]:ie[Math.floor((me-1)/2)][1]}}else{var he=se.vertexcolor||se.facecolor||se.color;xe=m.isArrayOrTypedArray(he)?he[K]||he[0]:he}$.attr("d",te[0]),xe?$.call(i.fill,xe):$.call(ue)})}};function y(b,M){var w=M?"radial":"horizontal";return w+(b?"":"reversed")}function g(b){var M=b[0].trace,w=M.contours,T=r.hasLines(M),_=r.hasMarkers(M),h=M.visible&&M.fill&&M.fill!=="none",L=!1,S=!1;if(w){var k=w.coloring;k==="lines"?L=!0:T=k==="none"||k==="heatmap"||w.showlines,w.type==="constraint"?h=w._operation!=="=":(k==="fill"||k==="heatmap")&&(S=!0)}return{showMarker:_,showLine:T,showFill:h,showGradientLine:L,showGradientFill:S,anyLine:T||L,anyFill:h||S}}function A(b,M,w){return b&&m.isArrayOrTypedArray(b)?M:b>w?w:b}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":905,"../../traces/pie/style_one":911,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(e,I,B){e("./constants"),I.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(e,I,B){var u=e("../../registry"),s=e("../../plots/plots"),m=e("../../plots/cartesian/axis_ids"),x=e("../../fonts/ploticon"),t=e("../shapes/draw").eraseActiveShape,i=e("../../lib"),a=i._,r=I.exports={};r.toImage={name:"toImage",title:function(b){var M=b._context.toImageButtonOptions||{},w=M.format||"png";return w==="png"?a(b,"Download plot as a png"):a(b,"Download plot")},icon:x.camera,click:function(b){var M=b._context.toImageButtonOptions,w={format:M.format||"png"};i.notifier(a(b,"Taking snapshot - this may take a few seconds"),"long"),w.format!=="svg"&&i.isIE()&&(i.notifier(a(b,"IE only supports svg.  Changing format to svg."),"long"),w.format="svg"),["filename","width","height","scale"].forEach(function(T){T in M&&(w[T]=M[T])}),u.call("downloadImage",b,w).then(function(T){i.notifier(a(b,"Snapshot succeeded")+" - "+T,"long")}).catch(function(){i.notifier(a(b,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(b){return a(b,"Edit in Chart Studio")},icon:x.disk,click:function(b){s.sendDataToCloud(b)}},r.editInChartStudio={name:"editInChartStudio",title:function(b){return a(b,"Edit in Chart Studio")},icon:x.pencil,click:function(b){s.sendDataToCloud(b)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(b){return a(b,"Zoom")},attr:"dragmode",val:"zoom",icon:x.zoombox,click:n},r.pan2d={name:"pan2d",_cat:"pan",title:function(b){return a(b,"Pan")},attr:"dragmode",val:"pan",icon:x.pan,click:n},r.select2d={name:"select2d",_cat:"select",title:function(b){return a(b,"Box Select")},attr:"dragmode",val:"select",icon:x.selectbox,click:n},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(b){return a(b,"Lasso Select")},attr:"dragmode",val:"lasso",icon:x.lasso,click:n},r.drawclosedpath={name:"drawclosedpath",title:function(b){return a(b,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:x.drawclosedpath,click:n},r.drawopenpath={name:"drawopenpath",title:function(b){return a(b,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:x.drawopenpath,click:n},r.drawline={name:"drawline",title:function(b){return a(b,"Draw line")},attr:"dragmode",val:"drawline",icon:x.drawline,click:n},r.drawrect={name:"drawrect",title:function(b){return a(b,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:x.drawrect,click:n},r.drawcircle={name:"drawcircle",title:function(b){return a(b,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:x.drawcircle,click:n},r.eraseshape={name:"eraseshape",title:function(b){return a(b,"Erase active shape")},icon:x.eraseshape,click:t},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(b){return a(b,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:n},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(b){return a(b,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:n},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(b){return a(b,"Autoscale")},attr:"zoom",val:"auto",icon:x.autoscale,click:n},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(b){return a(b,"Reset axes")},attr:"zoom",val:"reset",icon:x.home,click:n},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(b){return a(b,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:n},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(b){return a(b,"Compare data on hover")},attr:"hovermode",val:function(b){return b._fullLayout._isHoriz?"y":"x"},icon:x.tooltip_compare,gravity:"ne",click:n};function n(b,M){var w=M.currentTarget,T=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,h=b._fullLayout,L={},S=m.list(b,null,!0),k=h._cartesianSpikesEnabled,P,O;if(T==="zoom"){var F=_==="in"?.5:2,D=(1+F)/2,R=(1-F)/2,U;for(O=0;O<S.length;O++)if(P=S[O],!P.fixedrange)if(U=P._name,_==="auto")L[U+".autorange"]=!0;else if(_==="reset"){if(P._rangeInitial===void 0)L[U+".autorange"]=!0;else{var N=P._rangeInitial.slice();L[U+".range[0]"]=N[0],L[U+".range[1]"]=N[1]}P._showSpikeInitial!==void 0&&(L[U+".showspikes"]=P._showSpikeInitial,k==="on"&&!P._showSpikeInitial&&(k="off"))}else{var X=[P.r2l(P.range[0]),P.r2l(P.range[1])],j=[D*X[0]+R*X[1],D*X[1]+R*X[0]];L[U+".range[0]"]=P.l2r(j[0]),L[U+".range[1]"]=P.l2r(j[1])}}else T==="hovermode"&&(_==="x"||_==="y")&&(_=h._isHoriz?"y":"x",w.setAttribute("data-val",_)),L[T]=_;h._cartesianSpikesEnabled=k,u.call("_guiRelayout",b,L)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(b){return a(b,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:x.zoombox,click:f},r.pan3d={name:"pan3d",_cat:"pan",title:function(b){return a(b,"Pan")},attr:"scene.dragmode",val:"pan",icon:x.pan,click:f},r.orbitRotation={name:"orbitRotation",title:function(b){return a(b,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:x["3d_rotate"],click:f},r.tableRotation={name:"tableRotation",title:function(b){return a(b,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:x["z-axis"],click:f};function f(b,M){for(var w=M.currentTarget,T=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,h=b._fullLayout._subplots.gl3d||[],L={},S=T.split("."),k=0;k<h.length;k++)L[h[k]+"."+S[1]]=_;var P=_==="pan"?_:"zoom";L.dragmode=P,u.call("_guiRelayout",b,L)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(b){return a(b,"Reset camera to default")},attr:"resetDefault",icon:x.home,click:l},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(b){return a(b,"Reset camera to last save")},attr:"resetLastSave",icon:x.movie,click:l};function l(b,M){for(var w=M.currentTarget,T=w.getAttribute("data-attr"),_=T==="resetLastSave",h=T==="resetDefault",L=b._fullLayout,S=L._subplots.gl3d||[],k={},P=0;P<S.length;P++){var O=S[P],F=O+".camera",D=O+".aspectratio",R=O+".aspectmode",U=L[O]._scene,N;_?(k[F+".up"]=U.viewInitial.up,k[F+".eye"]=U.viewInitial.eye,k[F+".center"]=U.viewInitial.center,N=!0):h&&(k[F+".up"]=null,k[F+".eye"]=null,k[F+".center"]=null,N=!0),N&&(k[D+".x"]=U.viewInitial.aspectratio.x,k[D+".y"]=U.viewInitial.aspectratio.y,k[D+".z"]=U.viewInitial.aspectratio.z,k[R]=U.viewInitial.aspectmode)}u.call("_guiRelayout",b,k)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:c};function o(b,M){var w=M.currentTarget,T=w._previousVal,_=b._fullLayout,h=_._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],S={},k={};if(T)k=T,w._previousVal=null;else{for(var P=0;P<h.length;P++){var O=h[P],F=_[O],D=O+".hovermode";S[D]=F.hovermode,k[D]=!1;for(var R=0;R<3;R++){var U=L[R],N=O+"."+U+".showspikes";k[N]=!1,S[N]=F[U].showspikes}}w._previousVal=S}return k}function c(b,M){var w=o(b,M);u.call("_guiRelayout",b,w)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(b){return a(b,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:v},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(b){return a(b,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:v},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(b){return a(b,"Reset")},attr:"reset",val:null,icon:x.autoscale,click:v},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:p};function v(b,M){for(var w=M.currentTarget,T=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,h=b._fullLayout,L=h._subplots.geo||[],S=0;S<L.length;S++){var k=L[S],P=h[k];if(T==="zoom"){var O=P.projection.scale,F=_==="in"?2*O:.5*O;u.call("_guiRelayout",b,k+".projection.scale",F)}}T==="reset"&&A(b,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:p},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:p};function d(b){var M=b._fullLayout;return M.hovermode?!1:M._has("cartesian")?M._isHoriz?"y":"x":"closest"}function p(b){var M=d(b);u.call("_guiRelayout",b,"hovermode",M)}r.resetViewSankey={name:"resetSankeyGroup",title:function(b){return a(b,"Reset view")},icon:x.home,click:function(b){for(var M={"node.groups":[],"node.x":[],"node.y":[]},w=0;w<b._fullData.length;w++){var T=b._fullData[w]._viewInitial;M["node.groups"].push(T.node.groups.slice()),M["node.x"].push(T.node.x.slice()),M["node.y"].push(T.node.y.slice())}u.call("restyle",b,M)}},r.toggleHover={name:"toggleHover",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:function(b,M){var w=o(b,M);w.hovermode=d(b),u.call("_guiRelayout",b,w)}},r.resetViews={name:"resetViews",title:function(b){return a(b,"Reset views")},icon:x.home,click:function(b,M){var w=M.currentTarget;w.setAttribute("data-attr","zoom"),w.setAttribute("data-val","reset"),n(b,M),w.setAttribute("data-attr","resetLastSave"),l(b,M),A(b,"geo"),A(b,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(b){return a(b,"Toggle Spike Lines")},icon:x.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(b){var M=b._fullLayout,w=M._cartesianSpikesEnabled;M._cartesianSpikesEnabled=w==="on"?"off":"on",u.call("_guiRelayout",b,y(b))}};function y(b){for(var M=b._fullLayout,w=M._cartesianSpikesEnabled==="on",T=m.list(b,null,!0),_={},h=0;h<T.length;h++){var L=T[h];_[L._name+".showspikes"]=w?!0:L._showSpikeInitial}return _}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(b){return a(b,"Reset view")},attr:"reset",icon:x.home,click:function(b){A(b,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(b){return a(b,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:g},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(b){return a(b,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:g};function g(b,M){for(var w=M.currentTarget,T=w.getAttribute("data-val"),_=b._fullLayout,h=_._subplots.mapbox||[],L=1.05,S={},k=0;k<h.length;k++){var P=h[k],O=_[P].zoom,F=T==="in"?L*O:O/L;S[P+".zoom"]=F}u.call("_guiRelayout",b,S)}function A(b,M){for(var w=b._fullLayout,T=w._subplots[M]||[],_={},h=0;h<T.length;h++)for(var L=T[h],S=w[L]._subplot,k=S.viewInitial,P=Object.keys(k),O=0;O<P.length;O++){var F=P[O];_[L+"."+F]=k[F]}u.call("_guiRelayout",b,_)}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(e,I,B){var u=e("./buttons"),s=Object.keys(u),m=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],x=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(m),t=[],i=function(a){if(x.indexOf(a._cat||a.name)===-1){var r=a.name,n=(a._cat||a.name).toLowerCase();t.indexOf(r)===-1&&t.push(r),t.indexOf(n)===-1&&t.push(n)}};s.forEach(function(a){i(u[a])}),t.sort(),I.exports={DRAW_MODES:m,backButtons:x,foreButtons:t}},{"./buttons":426}],428:[function(e,I,B){var u=e("../../lib"),s=e("../color"),m=e("../../plot_api/plot_template"),x=e("./attributes");I.exports=function(i,a){var r=i.modebar||{},n=m.newContainer(a,"modebar");function f(o,c){return u.coerce(r,n,x,o,c)}f("orientation"),f("bgcolor",s.addOpacity(a.paper_bgcolor,.5));var l=s.contrast(s.rgb(a.modebar.bgcolor));f("color",s.addOpacity(l,.3)),f("activecolor",s.addOpacity(l,.7)),f("uirevision",a.uirevision),f("add"),f("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(e,I,B){I.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(e,I,B){var u=e("../../plots/cartesian/axis_ids"),s=e("../../traces/scatter/subtypes"),m=e("../../registry"),x=e("../fx/helpers").isUnifiedHover,t=e("./modebar"),i=e("./buttons"),a=e("./constants").DRAW_MODES;I.exports=function(d){var p=d._fullLayout,y=d._context,g=p._modeBar;if(!y.displayModeBar&&!y.watermark){g&&(g.destroy(),delete p._modeBar);return}if(!Array.isArray(y.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(y.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var A=y.modeBarButtons,b;Array.isArray(A)&&A.length?b=c(A):!y.displayModeBar&&y.watermark?b=[]:b=r(d),g?g.update(d,b):p._modeBar=t(d,b)};function r(v){var d=v._fullLayout,p=v._fullData,y=v._context;function g(te,K){if(typeof K=="string"){if(K.toLowerCase()===te.toLowerCase())return!0}else{var $=K.name,ae=K._cat||K.name;if($===te||ae===te.toLowerCase())return!0}return!1}var A=d.modebar.add;typeof A=="string"&&(A=[A]);var b=d.modebar.remove;typeof b=="string"&&(b=[b]);var M=y.modeBarButtonsToAdd.concat(A.filter(function(te){for(var K=0;K<y.modeBarButtonsToRemove.length;K++)if(g(te,y.modeBarButtonsToRemove[K]))return!1;return!0})),w=y.modeBarButtonsToRemove.concat(b.filter(function(te){for(var K=0;K<y.modeBarButtonsToAdd.length;K++)if(g(te,y.modeBarButtonsToAdd[K]))return!1;return!0})),T=d._has("cartesian"),_=d._has("gl3d"),h=d._has("geo"),L=d._has("pie"),S=d._has("funnelarea"),k=d._has("gl2d"),P=d._has("ternary"),O=d._has("mapbox"),F=d._has("polar"),D=d._has("smith"),R=d._has("sankey"),U=n(d),N=x(d.hovermode),X=[];function j(te){if(!!te.length){for(var K=[],$=0;$<te.length;$++){for(var ae=te[$],ie=i[ae],oe=ie.name.toLowerCase(),ue=(ie._cat||ie.name).toLowerCase(),xe=!1,he=0;he<w.length;he++){var me=w[he].toLowerCase();if(me===oe||me===ue){xe=!0;break}}xe||K.push(i[ae])}X.push(K)}}var ee=["toImage"];y.showEditInChartStudio?ee.push("editInChartStudio"):y.showSendToCloud&&ee.push("sendDataToCloud"),j(ee);var q=[],G=[],J=[],le=[];(T||k||L||S||P)+h+_+O+F+D>1?(G=["toggleHover"],J=["resetViews"]):h?(q=["zoomInGeo","zoomOutGeo"],G=["hoverClosestGeo"],J=["resetGeo"]):_?(G=["hoverClosest3d"],J=["resetCameraDefault3d","resetCameraLastSave3d"]):O?(q=["zoomInMapbox","zoomOutMapbox"],G=["toggleHover"],J=["resetViewMapbox"]):k?G=["hoverClosestGl2d"]:L?G=["hoverClosestPie"]:R?(G=["hoverClosestCartesian","hoverCompareCartesian"],J=["resetViewSankey"]):G=["toggleHover"],T&&(G=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(l(p)||N)&&(G=[]),(T||k)&&!U&&(q=["zoomIn2d","zoomOut2d","autoScale2d"],J[0]!=="resetViews"&&(J=["resetScale2d"])),_?le=["zoom3d","pan3d","orbitRotation","tableRotation"]:(T||k)&&!U||P?le=["zoom2d","pan2d"]:O||h?le=["pan2d"]:F&&(le=["zoom2d"]),f(p)&&le.push("select2d","lasso2d");var fe=[],se=function(te){fe.indexOf(te)===-1&&G.indexOf(te)!==-1&&fe.push(te)};if(Array.isArray(M)){for(var V=[],Y=0;Y<M.length;Y++){var ne=M[Y];typeof ne=="string"?(ne=ne.toLowerCase(),a.indexOf(ne)!==-1?(d._has("mapbox")||d._has("cartesian"))&&le.push(ne):ne==="togglespikelines"?se("toggleSpikelines"):ne==="togglehover"?se("toggleHover"):ne==="hovercompare"?se("hoverCompareCartesian"):ne==="hoverclosest"?(se("hoverClosestCartesian"),se("hoverClosestGeo"),se("hoverClosest3d"),se("hoverClosestGl2d"),se("hoverClosestPie")):ne==="v1hovermode"&&(se("toggleHover"),se("hoverClosestCartesian"),se("hoverCompareCartesian"),se("hoverClosestGeo"),se("hoverClosest3d"),se("hoverClosestGl2d"),se("hoverClosestPie"))):V.push(ne)}M=V}return j(le),j(q.concat(J)),j(fe),o(X,M)}function n(v){for(var d=u.list({_fullLayout:v},null,!0),p=0;p<d.length;p++)if(!d[p].fixedrange)return!1;return!0}function f(v){for(var d=!1,p=0;p<v.length&&!d;p++){var y=v[p];!y._module||!y._module.selectPoints||(m.traceIs(y,"scatter-like")?(s.hasMarkers(y)||s.hasText(y))&&(d=!0):m.traceIs(y,"box-violin")?(y.boxpoints==="all"||y.points==="all")&&(d=!0):d=!0)}return d}function l(v){for(var d=0;d<v.length;d++)if(!m.traceIs(v[d],"noHover"))return!1;return!0}function o(v,d){if(d.length)if(Array.isArray(d[0]))for(var p=0;p<d.length;p++)v.push(d[p]);else v.push(d);return v}function c(v){for(var d=0;d<v.length;d++)for(var p=v[d],y=0;y<p.length;y++){var g=p[y];if(typeof g=="string")if(i[g]!==void 0)v[d][y]=i[g];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return v}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":951,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../fonts/ploticon"),t=new DOMParser;function i(n){this.container=n.container,this.element=document.createElement("div"),this.update(n.graphInfo,n.buttons),this.container.appendChild(this.element)}var a=i.prototype;a.update=function(n,f){this.graphInfo=n;var l=this.graphInfo._context,o=this.graphInfo._fullLayout,c="modebar-"+o._uid;this.element.setAttribute("id",c),this._uid=c,this.element.className="modebar",l.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),o.modebar.orientation==="v"&&(this.element.className+=" vertical",f=f.reverse());var v=o.modebar,d=l.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";m.deleteRelatedStyleRule(c),m.addRelatedStyleRule(c,d+"#"+c+" .modebar-group","background-color: "+v.bgcolor),m.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path","fill: "+v.color),m.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+v.activecolor),m.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+v.activecolor);var p=!this.hasButtons(f),y=this.hasLogo!==l.displaylogo,g=this.locale!==l.locale;if(this.locale=l.locale,(p||y||g)&&(this.removeAllButtons(),this.updateButtons(f),l.watermark||l.displaylogo)){var A=this.getLogo();l.watermark&&(A.className=A.className+" watermark"),o.modebar.orientation==="v"?this.element.insertBefore(A,this.element.childNodes[0]):this.element.appendChild(A),this.hasLogo=!0}this.updateActiveButton()},a.updateButtons=function(n){var f=this;this.buttons=n,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(l){var o=f.createGroup();l.forEach(function(c){var v=c.name;if(!v)throw new Error("must provide button 'name' in button config");if(f.buttonsNames.indexOf(v)!==-1)throw new Error("button name '"+v+"' is taken");f.buttonsNames.push(v);var d=f.createButton(c);f.buttonElements.push(d),o.appendChild(d)}),f.element.appendChild(o)})},a.createGroup=function(){var n=document.createElement("div");return n.className="modebar-group",n},a.createButton=function(n){var f=this,l=document.createElement("a");l.setAttribute("rel","tooltip"),l.className="modebar-btn";var o=n.title;o===void 0?o=n.name:typeof o=="function"&&(o=o(this.graphInfo)),(o||o===0)&&l.setAttribute("data-title",o),n.attr!==void 0&&l.setAttribute("data-attr",n.attr);var c=n.val;c!==void 0&&(typeof c=="function"&&(c=c(this.graphInfo)),l.setAttribute("data-val",c));var v=n.click;if(typeof v!="function")throw new Error("must provide button 'click' function in button config");l.addEventListener("click",function(p){n.click(f.graphInfo,p),f.updateActiveButton(p.currentTarget)}),l.setAttribute("data-toggle",n.toggle||!1),n.toggle&&u.select(l).classed("active",!0);var d=n.icon;return typeof d=="function"?l.appendChild(d()):l.appendChild(this.createIcon(d||x.question)),l.setAttribute("data-gravity",n.gravity||"n"),l},a.createIcon=function(n){var f=s(n.height)?Number(n.height):n.ascent-n.descent,l="http://www.w3.org/2000/svg",o;if(n.path){o=document.createElementNS(l,"svg"),o.setAttribute("viewBox",[0,0,n.width,f].join(" ")),o.setAttribute("class","icon");var c=document.createElementNS(l,"path");c.setAttribute("d",n.path),n.transform?c.setAttribute("transform",n.transform):n.ascent!==void 0&&c.setAttribute("transform","matrix(1 0 0 -1 0 "+n.ascent+")"),o.appendChild(c)}if(n.svg){var v=t.parseFromString(n.svg,"application/xml");o=v.childNodes[0]}return o.setAttribute("height","1em"),o.setAttribute("width","1em"),o},a.updateActiveButton=function(n){var f=this.graphInfo._fullLayout,l=n!==void 0?n.getAttribute("data-attr"):null;this.buttonElements.forEach(function(o){var c=o.getAttribute("data-val")||!0,v=o.getAttribute("data-attr"),d=o.getAttribute("data-toggle")==="true",p=u.select(o);if(d)v===l&&p.classed("active",!p.classed("active"));else{var y=v===null?v:m.nestedProperty(f,v).get();p.classed("active",y===c)}})},a.hasButtons=function(n){var f=this.buttons;if(!f||n.length!==f.length)return!1;for(var l=0;l<n.length;++l){if(n[l].length!==f[l].length)return!1;for(var o=0;o<n[l].length;o++)if(n[l][o].name!==f[l][o].name)return!1}return!0},a.getLogo=function(){var n=this.createGroup(),f=document.createElement("a");return f.href="https://plotly.com/",f.target="_blank",f.setAttribute("data-title",m._(this.graphInfo,"Produced with Plotly")),f.className="modebar-btn plotlyjsicon modebar-btn--logo",f.appendChild(this.createIcon(x.newplotlylogo)),n.appendChild(f),n},a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},a.destroy=function(){m.removeElement(this.container.querySelector(".modebar")),m.deleteRelatedStyleRule(this._uid)};function r(n,f){var l=n._fullLayout,o=new i({graphInfo:n,container:l._modebardiv.node(),buttons:f});return l._privateplot&&u.select(o.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),o}I.exports=r},{"../../fonts/ploticon":482,"../../lib":503,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(e,I,B){var u=e("../../plots/font_attributes"),s=e("../color/attributes"),m=e("../../plot_api/plot_template").templatedArray,x=m("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});I.exports={visible:{valType:"boolean",editType:"plot"},buttons:x,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:u({editType:"plot"}),bgcolor:{valType:"color",dflt:s.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(e,I,B){I.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(e,I,B){var u=e("../../lib"),s=e("../color"),m=e("../../plot_api/plot_template"),x=e("../../plots/array_container_defaults"),t=e("./attributes"),i=e("./constants");I.exports=function(f,l,o,c,v){var d=f.rangeselector||{},p=m.newContainer(l,"rangeselector");function y(w,T){return u.coerce(d,p,t,w,T)}var g=x(d,p,{name:"buttons",handleItemDefaults:a,calendar:v}),A=y("visible",g.length>0);if(A){var b=r(l,o,c);y("x",b[0]),y("y",b[1]),u.noneOrAll(f,l,["x","y"]),y("xanchor"),y("yanchor"),u.coerceFont(y,"font",o.font);var M=y("bgcolor");y("activecolor",s.contrast(M,i.lightAmount,i.darkAmount)),y("bordercolor"),y("borderwidth")}};function a(n,f,l,o){var c=o.calendar;function v(y,g){return u.coerce(n,f,t.buttons,y,g)}var d=v("visible");if(d){var p=v("step");p!=="all"&&(c&&c!=="gregorian"&&(p==="month"||p==="year")?f.stepmode="backward":v("stepmode"),v("count")),v("label")}}function r(n,f,l){for(var o=l.filter(function(p){return f[p].anchor===n._id}),c=0,v=0;v<o.length;v++){var d=f[o[v]].domain;d&&(c=Math.max(d[1],c))}return[n.domain[0],c+i.yPad]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../plots/plots"),x=e("../color"),t=e("../drawing"),i=e("../../lib"),a=i.strTranslate,r=e("../../lib/svg_text_utils"),n=e("../../plots/cartesian/axis_ids"),f=e("../../constants/alignment"),l=f.LINE_SPACING,o=f.FROM_TL,c=f.FROM_BR,v=e("./constants"),d=e("./get_update_object");I.exports=function(h){var L=h._fullLayout,S=L._infolayer.selectAll(".rangeselector").data(p(h),y);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(k){var P=u.select(this),O=k,F=O.rangeselector,D=P.selectAll("g.button").data(i.filterVisible(F.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(R){var U=u.select(this),N=d(O,R);R._isActive=g(O,R,N),U.call(A,F,R),U.call(M,F,R,h),U.on("click",function(){h._dragged||s.call("_guiRelayout",h,N)}),U.on("mouseover",function(){R._isHovered=!0,U.call(A,F,R)}),U.on("mouseout",function(){R._isHovered=!1,U.call(A,F,R)})}),T(h,D,F,O._name,P)})};function p(_){for(var h=n.list(_,"x",!0),L=[],S=0;S<h.length;S++){var k=h[S];k.rangeselector&&k.rangeselector.visible&&L.push(k)}return L}function y(_){return _._id}function g(_,h,L){if(h.step==="all")return _.autorange===!0;var S=Object.keys(L);return _.range[0]===L[S[0]]&&_.range[1]===L[S[1]]}function A(_,h,L){var S=i.ensureSingle(_,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});S.attr({rx:v.rx,ry:v.ry}),S.call(x.stroke,h.bordercolor).call(x.fill,b(h,L)).style("stroke-width",h.borderwidth+"px")}function b(_,h){return h._isActive||h._isHovered?_.activecolor:_.bgcolor}function M(_,h,L,S){function k(O){r.convertToTspans(O,S)}var P=i.ensureSingle(_,"text","selector-text",function(O){O.attr("text-anchor","middle")});P.call(t.font,h.font).text(w(L,S._fullLayout._meta)).call(k)}function w(_,h){return _.label?h?i.templateString(_.label,h):_.label:_.step==="all"?"all":_.count+_.step.charAt(0)}function T(_,h,L,S,k){var P=0,O=0,F=L.borderwidth;h.each(function(){var j=u.select(this),ee=j.select(".selector-text"),q=L.font.size*l,G=Math.max(q*r.lineCount(ee),16)+3;O=Math.max(O,G)}),h.each(function(){var j=u.select(this),ee=j.select(".selector-rect"),q=j.select(".selector-text"),G=q.node()&&t.bBox(q.node()).width,J=L.font.size*l,le=r.lineCount(q),fe=Math.max(G+10,v.minButtonWidth);j.attr("transform",a(F+P,F)),ee.attr({x:0,y:0,width:fe,height:O}),r.positionText(q,fe/2,O/2-(le-1)*J/2+3),P+=fe+5});var D=_._fullLayout._size,R=D.l+D.w*L.x,U=D.t+D.h*(1-L.y),N="left";i.isRightAnchor(L)&&(R-=P,N="right"),i.isCenterAnchor(L)&&(R-=P/2,N="center");var X="top";i.isBottomAnchor(L)&&(U-=O,X="bottom"),i.isMiddleAnchor(L)&&(U-=O/2,X="middle"),P=Math.ceil(P),O=Math.ceil(O),R=Math.round(R),U=Math.round(U),m.autoMargin(_,S+"-range-selector",{x:L.x,y:L.y,l:P*o[N],r:P*c[N],b:O*c[X],t:O*o[X]}),k.attr("transform",a(R,U))}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(e,I,B){var u=e("d3-time"),s=e("../../lib").titleCase;I.exports=function(t,i){var a=t._name,r={};if(i.step==="all")r[a+".autorange"]=!0;else{var n=m(t,i);r[a+".range[0]"]=n[0],r[a+".range[1]"]=n[1]}return r};function m(x,t){var i=x.range,a=new Date(x.r2l(i[1])),r=t.step,n=u["utc"+s(r)],f=t.count,l;switch(t.stepmode){case"backward":l=x.l2r(+n.offset(a,-f));break;case"todate":var o=n.offset(a,-f);l=x.l2r(+n.ceil(o));break}var c=i[1];return[l,c]}},{"../../lib":503,"d3-time":122}],437:[function(e,I,B){I.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(e,I,B){var u=e("../color/attributes");I.exports={bgcolor:{valType:"color",dflt:u.background,editType:"plot"},bordercolor:{valType:"color",dflt:u.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(e,I,B){var u=e("../../plots/cartesian/axis_ids").list,s=e("../../plots/cartesian/autorange").getAutoRange,m=e("./constants");I.exports=function(t){for(var i=u(t,"x",!0),a=0;a<i.length;a++){var r=i[a],n=r[m.name];n&&n.visible&&n.autorange&&(n._input.autorange=!0,n._input.range=n.range=s(t,r))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(e,I,B){I.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(e,I,B){var u=e("../../lib"),s=e("../../plot_api/plot_template"),m=e("../../plots/cartesian/axis_ids"),x=e("./attributes"),t=e("./oppaxis_attributes");I.exports=function(a,r,n){var f=a[n],l=r[n];if(!(f.rangeslider||r._requestRangeslider[l._id]))return;u.isPlainObject(f.rangeslider)||(f.rangeslider={});var o=f.rangeslider,c=s.newContainer(l,"rangeslider");function v(S,k){return u.coerce(o,c,x,S,k)}var d,p;function y(S,k){return u.coerce(d,p,t,S,k)}var g=v("visible");if(!!g){v("bgcolor",r.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),v("autorange",!l.isValidRange(o.range)),v("range");var A=r._subplots;if(A)for(var b=A.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===m.name2id(n)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),M=u.simpleMap(b,m.id2name),w=0;w<M.length;w++){var T=M[w];d=o[T]||{},p=s.newContainer(c,T,"yaxis");var _=r[T],h;d.range&&_.isValidRange(d.range)&&(h="fixed");var L=y("rangemode",h);L!=="match"&&y("range",_.range.slice())}c._input=o}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../plots/plots"),x=e("../../lib"),t=x.strTranslate,i=e("../drawing"),a=e("../color"),r=e("../titles"),n=e("../../plots/cartesian"),f=e("../../plots/cartesian/axis_ids"),l=e("../dragelement"),o=e("../../lib/setcursor"),c=e("./constants");I.exports=function(_){for(var h=_._fullLayout,L=h._rangeSliderData,S=0;S<L.length;S++){var k=L[S][c.name];k._clipId=k._id+"-"+h._uid}function P(F){return F._name}var O=h._infolayer.selectAll("g."+c.containerClassName).data(L,P);O.exit().each(function(F){var D=F[c.name];h._topdefs.select("#"+D._clipId).remove()}).remove(),L.length!==0&&(O.enter().append("g").classed(c.containerClassName,!0).attr("pointer-events","all"),O.each(function(F){var D=u.select(this),R=F[c.name],U=h[f.id2name(F.anchor)],N=R[f.id2name(F.anchor)];if(R.range){var X=x.simpleMap(R.range,F.r2l),j=x.simpleMap(F.range,F.r2l),ee;j[0]<j[1]?ee=[Math.min(X[0],j[0]),Math.max(X[1],j[1])]:ee=[Math.max(X[0],j[0]),Math.min(X[1],j[1])],R.range=R._input.range=x.simpleMap(ee,F.l2r)}F.cleanRange("rangeslider.range");var q=h._size,G=F.domain;R._width=q.w*(G[1]-G[0]);var J=Math.round(q.l+q.w*G[0]),le=Math.round(q.t+q.h*(1-F._counterDomainMin)+(F.side==="bottom"?F._depth:0)+R._offsetShift+c.extraPad);D.attr("transform",t(J,le)),R._rl=x.simpleMap(R.range,F.r2l);var fe=R._rl[0],se=R._rl[1],V=se-fe;if(R.p2d=function(xe){return xe/R._width*V+fe},R.d2p=function(xe){return(xe-fe)/V*R._width},F.rangebreaks){var Y=F.locateBreaks(fe,se);if(Y.length){var ne,te,K=0;for(ne=0;ne<Y.length;ne++)te=Y[ne],K+=te.max-te.min;var $=R._width/(se-fe-K),ae=[-$*fe];for(ne=0;ne<Y.length;ne++)te=Y[ne],ae.push(ae[ae.length-1]-$*(te.max-te.min));for(R.d2p=function(xe){for(var he=ae[0],me=0;me<Y.length;me++){var be=Y[me];if(xe>=be.max)he=ae[me+1];else if(xe<be.min)break}return he+$*xe},ne=0;ne<Y.length;ne++)te=Y[ne],te.pmin=R.d2p(te.min),te.pmax=R.d2p(te.max);R.p2d=function(xe){for(var he=ae[0],me=0;me<Y.length;me++){var be=Y[me];if(xe>=be.pmax)he=ae[me+1];else if(xe<be.pmin)break}return(xe-he)/$}}}if(N.rangemode!=="match"){var ie=U.r2l(N.range[0]),oe=U.r2l(N.range[1]),ue=oe-ie;R.d2pOppAxis=function(xe){return(xe-ie)/ue*R._height}}D.call(y,_,F,R).call(g,_,F,R).call(A,_,F,R).call(M,_,F,R,N).call(w,_,F,R).call(T,_,F,R),v(D,_,F,R),p(D,_,F,R,U,N),F.side==="bottom"&&r.draw(_,F._id+"title",{propContainer:F,propName:F._name+".title",placeholder:h._dfltTitle.x,attributes:{x:F._offset+F._length/2,y:le+R._height+R._offsetShift+10+1.5*F.title.font.size,"text-anchor":"middle"}})}))};function v(_,h,L,S){if(h._context.staticPlot)return;var k=_.select("rect."+c.slideBoxClassName).node(),P=_.select("rect."+c.grabAreaMinClassName).node(),O=_.select("rect."+c.grabAreaMaxClassName).node();function F(){var D=u.event,R=D.target,U=D.clientX||D.touches[0].clientX,N=U-_.node().getBoundingClientRect().left,X=S.d2p(L._rl[0]),j=S.d2p(L._rl[1]),ee=l.coverSlip();this.addEventListener("touchmove",q),this.addEventListener("touchend",G),ee.addEventListener("mousemove",q),ee.addEventListener("mouseup",G);function q(J){var le=J.clientX||J.touches[0].clientX,fe=+le-U,se,V,Y;switch(R){case k:Y="ew-resize",se=X+fe,V=j+fe;break;case P:Y="col-resize",se=X+fe,V=j;break;case O:Y="col-resize",se=X,V=j+fe;break;default:Y="ew-resize",se=N,V=N+fe;break}if(V<se){var ne=V;V=se,se=ne}S._pixelMin=se,S._pixelMax=V,o(u.select(ee),Y),d(_,h,L,S)}function G(){ee.removeEventListener("mousemove",q),ee.removeEventListener("mouseup",G),this.removeEventListener("touchmove",q),this.removeEventListener("touchend",G),x.removeElement(ee)}}_.on("mousedown",F),_.on("touchstart",F)}function d(_,h,L,S){function k(F){return L.l2r(x.constrain(F,S._rl[0],S._rl[1]))}var P=k(S.p2d(S._pixelMin)),O=k(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){s.call("_guiRelayout",h,L._name+".range",[P,O])})}function p(_,h,L,S,k,P){var O=c.handleWidth/2;function F(J){return x.constrain(J,0,S._width)}function D(J){return x.constrain(J,0,S._height)}function R(J){return x.constrain(J,-O,S._width+O)}var U=F(S.d2p(L._rl[0])),N=F(S.d2p(L._rl[1]));if(_.select("rect."+c.slideBoxClassName).attr("x",U).attr("width",N-U),_.select("rect."+c.maskMinClassName).attr("width",U),_.select("rect."+c.maskMaxClassName).attr("x",N).attr("width",S._width-N),P.rangemode!=="match"){var X=S._height-D(S.d2pOppAxis(k._rl[1])),j=S._height-D(S.d2pOppAxis(k._rl[0]));_.select("rect."+c.maskMinOppAxisClassName).attr("x",U).attr("height",X).attr("width",N-U),_.select("rect."+c.maskMaxOppAxisClassName).attr("x",U).attr("y",j).attr("height",S._height-j).attr("width",N-U),_.select("rect."+c.slideBoxClassName).attr("y",X).attr("height",j-X)}var ee=.5,q=Math.round(R(U-O))-ee,G=Math.round(R(N-O))+ee;_.select("g."+c.grabberMinClassName).attr("transform",t(q,ee)),_.select("g."+c.grabberMaxClassName).attr("transform",t(G,ee))}function y(_,h,L,S){var k=x.ensureSingle(_,"rect",c.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=S.borderwidth%2==0?S.borderwidth:S.borderwidth-1,O=-S._offsetShift,F=i.crispRound(h,S.borderwidth);k.attr({width:S._width+P,height:S._height+P,transform:t(O,O),fill:S.bgcolor,stroke:S.bordercolor,"stroke-width":F})}function g(_,h,L,S){var k=h._fullLayout,P=x.ensureSingleById(k._topdefs,"clipPath",S._clipId,function(O){O.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:S._width,height:S._height})}function A(_,h,L,S){var k=h.calcdata,P=_.selectAll("g."+c.rangePlotClassName).data(L._subplotsWith,x.identity);P.enter().append("g").attr("class",function(F){return c.rangePlotClassName+" "+F}).call(i.setClipUrl,S._clipId,h),P.order(),P.exit().remove();var O;P.each(function(F,D){var R=u.select(this),U=D===0,N=f.getFromId(h,F,"y"),X=N._name,j=S[X],ee={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:S.range.slice(),calendar:L.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:h._context};L.rangebreaks&&(ee.layout.xaxis.rangebreaks=L.rangebreaks),ee.layout[X]={type:N.type,domain:[0,1],range:j.rangemode!=="match"?j.range.slice():N.range.slice(),calendar:N.calendar},N.rangebreaks&&(ee.layout[X].rangebreaks=N.rangebreaks),m.supplyDefaults(ee);var q=ee._fullLayout.xaxis,G=ee._fullLayout[X];q.clearCalc(),q.setScale(),G.clearCalc(),G.setScale();var J={id:F,plotgroup:R,xaxis:q,yaxis:G,isRangePlot:!0};U?O=J:(J.mainplot="xy",J.mainplotinfo=O),n.rangePlot(h,J,b(k,F))})}function b(_,h){for(var L=[],S=0;S<_.length;S++){var k=_[S],P=k[0].trace;P.xaxis+P.yaxis===h&&L.push(k)}return L}function M(_,h,L,S,k){var P=x.ensureSingle(_,"rect",c.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",S._height).call(a.fill,c.maskColor);var O=x.ensureSingle(_,"rect",c.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(O.attr("height",S._height).call(a.fill,c.maskColor),k.rangemode!=="match"){var F=x.ensureSingle(_,"rect",c.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});F.attr("width",S._width).call(a.fill,c.maskOppAxisColor);var D=x.ensureSingle(_,"rect",c.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",S._width).style("border-top",c.maskOppBorder).call(a.fill,c.maskOppAxisColor)}}function w(_,h,L,S){if(!h._context.staticPlot){var k=x.ensureSingle(_,"rect",c.slideBoxClassName,function(P){P.attr({y:0,cursor:c.slideBoxCursor,"shape-rendering":"crispEdges"})});k.attr({height:S._height,fill:c.slideBoxFill})}}function T(_,h,L,S){var k=x.ensureSingle(_,"g",c.grabberMinClassName),P=x.ensureSingle(_,"g",c.grabberMaxClassName),O={x:0,width:c.handleWidth,rx:c.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":c.handleStrokeWidth,"shape-rendering":"crispEdges"},F={y:Math.round(S._height/4),height:Math.round(S._height/2)},D=x.ensureSingle(k,"rect",c.handleMinClassName,function(j){j.attr(O)});D.attr(F);var R=x.ensureSingle(P,"rect",c.handleMaxClassName,function(j){j.attr(O)});R.attr(F);var U={width:c.grabAreaWidth,x:0,y:0,fill:c.grabAreaFill,cursor:h._context.staticPlot?void 0:c.grabAreaCursor},N=x.ensureSingle(k,"rect",c.grabAreaMinClassName,function(j){j.attr(U)});N.attr("height",S._height);var X=x.ensureSingle(P,"rect",c.grabAreaMaxClassName,function(j){j.attr(U)});X.attr("height",S._height)}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(e,I,B){var u=e("../../plots/cartesian/axis_ids"),s=e("../../lib/svg_text_utils"),m=e("./constants"),x=e("../../constants/alignment").LINE_SPACING,t=m.name;function i(a){var r=a&&a[t];return r&&r.visible}B.isVisible=i,B.makeData=function(a){var r=u.list({_fullLayout:a},"x",!0),n=a.margin,f=[];if(!a._has("gl2d"))for(var l=0;l<r.length;l++){var o=r[l];if(i(o)){f.push(o);var c=o[t];c._id=t+o._id,c._height=(a.height-n.b-n.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}a._rangeSliderData=f},B.autoMarginOpts=function(a,r){var n=a._fullLayout,f=r[t],l=r._id.charAt(0),o=0,c=0;if(r.side==="bottom"&&(o=r._depth,r.title.text!==n._dfltTitle[l])){c=1.5*r.title.font.size+10+f._offsetShift;var v=(r.title.text.match(s.BR_TAG_ALL)||[]).length;c+=v*r.title.font.size*x}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:f._height+o+Math.max(n.margin.b,c),pad:m.extraPad+f._offsetShift*2}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("./oppaxis_attributes"),x=e("./helpers");I.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:u.extendFlat({},s,{yaxis:m})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:x.isVisible,makeData:x.makeData,autoMarginOpts:x.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(e,I,B){I.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(e,I,B){var u=e("../annotations/attributes"),s=e("../../traces/scatter/attributes").line,m=e("../drawing/attributes").dash,x=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),I.exports=t("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:x({},u.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:x({},u.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:x({},s.color,{editType:"arraydraw"}),width:x({},s.width,{editType:"calc+arraydraw"}),dash:x({},m,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("./constants"),x=e("./helpers");I.exports=function(f){var l=f._fullLayout,o=u.filterVisible(l.shapes);if(!(!o.length||!f._fullData.length))for(var c=0;c<o.length;c++){var v=o[c];v._extremes={};var d,p,y=s.getRefType(v.xref),g=s.getRefType(v.yref);if(v.xref!=="paper"&&y!=="domain"){var A=v.xsizemode==="pixel"?v.xanchor:v.x0,b=v.xsizemode==="pixel"?v.xanchor:v.x1;d=s.getFromId(f,v.xref),p=r(d,A,b,v.path,m.paramIsX),p&&(v._extremes[d._id]=s.findExtremes(d,p,t(v)))}if(v.yref!=="paper"&&g!=="domain"){var M=v.ysizemode==="pixel"?v.yanchor:v.y0,w=v.ysizemode==="pixel"?v.yanchor:v.y1;d=s.getFromId(f,v.yref),p=r(d,M,w,v.path,m.paramIsY),p&&(v._extremes[d._id]=s.findExtremes(d,p,i(v)))}}};function t(n){return a(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function i(n){return a(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function a(n,f,l,o,c,v){var d=n/2,p=v;if(f==="pixel"){var y=c?x.extractPathCoords(c,v?m.paramIsY:m.paramIsX):[l,o],g=u.aggNums(Math.max,null,y),A=u.aggNums(Math.min,null,y),b=A<0?Math.abs(A)+d:d,M=g>0?g+d:d;return{ppad:d,ppadplus:p?b:M,ppadminus:p?M:b}}else return{ppad:d}}function r(n,f,l,o,c){var v=n.type==="category"||n.type==="multicategory"?n.r2c:n.d2c;if(f!==void 0)return[v(f),v(l)];if(!!o){var d=1/0,p=-1/0,y=o.match(m.segmentRE),g,A,b,M,w;for(n.type==="date"&&(v=x.decodeDate(v)),g=0;g<y.length;g++)A=y[g],b=c[A.charAt(0)].drawn,b!==void 0&&(M=y[g].substr(1).match(m.paramRE),!(!M||M.length<b)&&(w=v(M[b]),w<d&&(d=w),w>p&&(p=w)));if(p>=d)return[d,p]}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(e,I,B){I.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./attributes"),t=e("./helpers");I.exports=function(r,n){m(r,n,{name:"shapes",handleItemDefaults:i})};function i(a,r,n){function f(X,j){return u.coerce(a,r,x,X,j)}var l=f("visible");if(!!l){var o=f("path"),c=o?"path":"rect",v=f("type",c);r.type!=="path"&&delete r.path,f("editable"),f("layer"),f("opacity"),f("fillcolor"),f("fillrule");var d=f("line.width");d&&(f("line.color"),f("line.dash"));for(var p=f("xsizemode"),y=f("ysizemode"),g=["x","y"],A=0;A<2;A++){var b=g[A],M=b+"anchor",w=b==="x"?p:y,T={_fullLayout:n},_,h,L,S=s.coerceRef(a,r,T,b,void 0,"paper"),k=s.getRefType(S);if(k==="range"?(_=s.getFromId(T,S),_._shapeIndices.push(r._index),L=t.rangeToShapePosition(_),h=t.shapePositionToRange(_)):h=L=u.identity,v!=="path"){var P=.25,O=.75,F=b+"0",D=b+"1",R=a[F],U=a[D];a[F]=h(a[F],!0),a[D]=h(a[D],!0),w==="pixel"?(f(F,0),f(D,10)):(s.coercePosition(r,T,f,S,F,P),s.coercePosition(r,T,f,S,D,O)),r[F]=L(r[F]),r[D]=L(r[D]),a[F]=R,a[D]=U}if(w==="pixel"){var N=a[M];a[M]=h(a[M],!0),s.coercePosition(r,T,f,S,M,.25),r[M]=L(r[M]),a[M]=N}}v==="path"?f("path"):u.noneOrAll(a,r,["x0","x1","y0","y1"])}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("./draw_newshape/helpers").readPaths,t=e("./draw_newshape/display_outlines"),i=e("../../plots/cartesian/handle_outline").clearOutlineControllers,a=e("../color"),r=e("../drawing"),n=e("../../plot_api/plot_template").arrayEditor,f=e("../dragelement"),l=e("../../lib/setcursor"),o=e("./constants"),c=e("./helpers");I.exports={draw:v,drawOne:y,eraseActiveShape:h};function v(L){var S=L._fullLayout;S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove();for(var k in S._plots){var P=S._plots[k].shapelayer;P&&P.selectAll("path").remove()}for(var O=0;O<S.shapes.length;O++)S.shapes[O].visible&&y(L,O)}function d(L){return!!L._fullLayout._drawing}function p(L){return!L._context.edits.shapePosition}function y(L,S){L._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var k=c.makeOptionsAndPlotinfo(L,S),P=k.options,O=k.plotinfo;if(!P._input||P.visible===!1)return;if(P.layer!=="below")D(L._fullLayout._shapeUpperLayer);else if(P.xref==="paper"||P.yref==="paper")D(L._fullLayout._shapeLowerLayer);else if(O._hadPlotinfo){var F=O.mainplotinfo||O;D(F.shapelayer)}else D(L._fullLayout._shapeLowerLayer);function D(R){var U=b(L,P),N={"data-index":S,"fill-rule":P.fillrule,d:U},X=P.opacity,j=P.fillcolor,ee=P.line.width?P.line.color:"rgba(0,0,0,0)",q=P.line.width,G=P.line.dash;!q&&P.editable===!0&&(q=5,G="solid");var J=U[U.length-1]!=="Z",le=p(L)&&P.editable&&L._fullLayout._activeShapeIndex===S;le&&(j=J?"rgba(0,0,0,0)":L._fullLayout.activeshape.fillcolor,X=L._fullLayout.activeshape.opacity);var fe=R.append("path").attr(N).style("opacity",X).call(a.stroke,ee).call(a.fill,j).call(r.dashLine,G,q);g(fe,L,P);var se;if((le||L._context.edits.shapePosition)&&(se=n(L.layout,"shapes",P)),le){fe.style({cursor:"move"});var V={element:fe.node(),plotinfo:O,gd:L,editHelpers:se,isActiveShape:!0},Y=x(U,L);t(Y,fe,V)}else L._context.edits.shapePosition?A(L,fe,P,S,R,se):P.editable===!0&&fe.style("pointer-events",J||a.opacity(j)*X<=.5?"stroke":"all");fe.node().addEventListener("click",function(){return T(L,fe)})}}function g(L,S,k){var P=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(L,P?"clip"+S._fullLayout._uid+P:null,S)}function A(L,S,k,P,O,F){var D=10,R=10,U=k.xsizemode==="pixel",N=k.ysizemode==="pixel",X=k.type==="line",j=k.type==="path",ee=F.modifyItem,q,G,J,le,fe,se,V,Y,ne,te,K,$,ae,ie,oe,ue=m.getFromId(L,k.xref),xe=m.getRefType(k.xref),he=m.getFromId(L,k.yref),me=m.getRefType(k.yref),be=c.getDataToPixel(L,ue,!1,xe),Ce=c.getDataToPixel(L,he,!0,me),Se=c.getPixelToData(L,ue,!1,xe),Be=c.getPixelToData(L,he,!0,me),Ye=Ie(),Xe={element:Ye.node(),gd:L,prepFn:Ge,doneFn:ze,clickFn:We},Te;f.init(Xe),Ye.node().onmousemove=rt;function Ie(){return X?Ze():S}function Ze(){var Gt=10,It=Math.max(k.line.width,Gt),Ct=O.append("g").attr("data-index",P);Ct.append("path").attr("d",S.attr("d")).style({cursor:"move","stroke-width":It,"stroke-opacity":"0"});var lt={"fill-opacity":"0"},dt=Math.max(It/2,Gt);return Ct.append("circle").attr({"data-line-point":"start-point",cx:U?be(k.xanchor)+k.x0:be(k.x0),cy:N?Ce(k.yanchor)-k.y0:Ce(k.y0),r:dt}).style(lt).classed("cursor-grab",!0),Ct.append("circle").attr({"data-line-point":"end-point",cx:U?be(k.xanchor)+k.x1:be(k.x1),cy:N?Ce(k.yanchor)-k.y1:Ce(k.y1),r:dt}).style(lt).classed("cursor-grab",!0),Ct}function rt(Gt){if(d(L)){Te=null;return}if(X)Gt.target.tagName==="path"?Te="move":Te=Gt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var It=Xe.element.getBoundingClientRect(),Ct=It.right-It.left,lt=It.bottom-It.top,dt=Gt.clientX-It.left,et=Gt.clientY-It.top,Pe=!j&&Ct>D&&lt>R&&!Gt.shiftKey?f.getCursor(dt/Ct,1-et/lt):"move";l(S,Pe),Te=Pe.split("-")[0]}}function Ge(Gt){d(L)||(U&&(fe=be(k.xanchor)),N&&(se=Ce(k.yanchor)),k.type==="path"?oe=k.path:(q=U?k.x0:be(k.x0),G=N?k.y0:Ce(k.y0),J=U?k.x1:be(k.x1),le=N?k.y1:Ce(k.y1)),q<J?(ne=q,ae="x0",te=J,ie="x1"):(ne=J,ae="x1",te=q,ie="x0"),!N&&G<le||N&&G>le?(V=G,K="y0",Y=le,$="y1"):(V=le,K="y1",Y=G,$="y0"),rt(Gt),Xt(O,k),Ut(S,k,L),Xe.moveFn=Te==="move"?mt:Ft,Xe.altKey=Gt.altKey)}function ze(){d(L)||(l(S),Pt(O),g(S,L,k),u.call("_guiRelayout",L,F.getUpdateObj()))}function We(){d(L)||Pt(O)}function mt(Gt,It){if(k.type==="path"){var Ct=function(et){return et},lt=Ct,dt=Ct;U?ee("xanchor",k.xanchor=Se(fe+Gt)):(lt=function(Pe){return Se(be(Pe)+Gt)},ue&&ue.type==="date"&&(lt=c.encodeDate(lt))),N?ee("yanchor",k.yanchor=Be(se+It)):(dt=function(Pe){return Be(Ce(Pe)+It)},he&&he.type==="date"&&(dt=c.encodeDate(dt))),ee("path",k.path=w(oe,lt,dt))}else U?ee("xanchor",k.xanchor=Se(fe+Gt)):(ee("x0",k.x0=Se(q+Gt)),ee("x1",k.x1=Se(J+Gt))),N?ee("yanchor",k.yanchor=Be(se+It)):(ee("y0",k.y0=Be(G+It)),ee("y1",k.y1=Be(le+It)));S.attr("d",b(L,k)),Xt(O,k)}function Ft(Gt,It){if(j){var Ct=function(Rt){return Rt},lt=Ct,dt=Ct;U?ee("xanchor",k.xanchor=Se(fe+Gt)):(lt=function(fr){return Se(be(fr)+Gt)},ue&&ue.type==="date"&&(lt=c.encodeDate(lt))),N?ee("yanchor",k.yanchor=Be(se+It)):(dt=function(fr){return Be(Ce(fr)+It)},he&&he.type==="date"&&(dt=c.encodeDate(dt))),ee("path",k.path=w(oe,lt,dt))}else if(X){if(Te==="resize-over-start-point"){var et=q+Gt,Pe=N?G-It:G+It;ee("x0",k.x0=U?et:Se(et)),ee("y0",k.y0=N?Pe:Be(Pe))}else if(Te==="resize-over-end-point"){var Je=J+Gt,it=N?le-It:le+It;ee("x1",k.x1=U?Je:Se(Je)),ee("y1",k.y1=N?it:Be(it))}}else{var ht=function(Rt){return Te.indexOf(Rt)!==-1},zt=ht("n"),Lt=ht("s"),Vt=ht("w"),$t=ht("e"),Ht=zt?V+It:V,tr=Lt?Y+It:Y,qe=Vt?ne+Gt:ne,xt=$t?te+Gt:te;N&&(zt&&(Ht=V-It),Lt&&(tr=Y-It)),(!N&&tr-Ht>R||N&&Ht-tr>R)&&(ee(K,k[K]=N?Ht:Be(Ht)),ee($,k[$]=N?tr:Be(tr))),xt-qe>D&&(ee(ae,k[ae]=U?qe:Se(qe)),ee(ie,k[ie]=U?xt:Se(xt)))}S.attr("d",b(L,k)),Xt(O,k)}function Xt(Gt,It){(U||N)&&Ct();function Ct(){var lt=It.type!=="path",dt=Gt.selectAll(".visual-cue").data([0]),et=1;dt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":et}).classed("visual-cue",!0);var Pe=be(U?It.xanchor:s.midRange(lt?[It.x0,It.x1]:c.extractPathCoords(It.path,o.paramIsX))),Je=Ce(N?It.yanchor:s.midRange(lt?[It.y0,It.y1]:c.extractPathCoords(It.path,o.paramIsY)));if(Pe=c.roundPositionForSharpStrokeRendering(Pe,et),Je=c.roundPositionForSharpStrokeRendering(Je,et),U&&N){var it="M"+(Pe-1-et)+","+(Je-1-et)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";dt.attr("d",it)}else if(U){var ht="M"+(Pe-1-et)+","+(Je-9-et)+"v18 h2 v-18 Z";dt.attr("d",ht)}else{var zt="M"+(Pe-9-et)+","+(Je-1-et)+"h18 v2 h-18 Z";dt.attr("d",zt)}}}function Pt(Gt){Gt.selectAll(".visual-cue").remove()}function Ut(Gt,It,Ct){var lt=It.xref,dt=It.yref,et=m.getFromId(Ct,lt),Pe=m.getFromId(Ct,dt),Je="";lt!=="paper"&&!et.autorange&&(Je+=lt),dt!=="paper"&&!Pe.autorange&&(Je+=dt),r.setClipUrl(Gt,Je?"clip"+Ct._fullLayout._uid+Je:null,Ct)}}function b(L,S){var k=S.type,P=m.getRefType(S.xref),O=m.getRefType(S.yref),F=m.getFromId(L,S.xref),D=m.getFromId(L,S.yref),R=L._fullLayout._size,U,N,X,j,ee,q,G,J;if(F?P==="domain"?N=function(ae){return F._offset+F._length*ae}:(U=c.shapePositionToRange(F),N=function(ae){return F._offset+F.r2p(U(ae,!0))}):N=function(ae){return R.l+R.w*ae},D?O==="domain"?j=function(ae){return D._offset+D._length*(1-ae)}:(X=c.shapePositionToRange(D),j=function(ae){return D._offset+D.r2p(X(ae,!0))}):j=function(ae){return R.t+R.h*(1-ae)},k==="path")return F&&F.type==="date"&&(N=c.decodeDate(N)),D&&D.type==="date"&&(j=c.decodeDate(j)),M(S,N,j);if(S.xsizemode==="pixel"){var le=N(S.xanchor);ee=le+S.x0,q=le+S.x1}else ee=N(S.x0),q=N(S.x1);if(S.ysizemode==="pixel"){var fe=j(S.yanchor);G=fe-S.y0,J=fe-S.y1}else G=j(S.y0),J=j(S.y1);if(k==="line")return"M"+ee+","+G+"L"+q+","+J;if(k==="rect")return"M"+ee+","+G+"H"+q+"V"+J+"H"+ee+"Z";var se=(ee+q)/2,V=(G+J)/2,Y=Math.abs(se-ee),ne=Math.abs(V-G),te="A"+Y+","+ne,K=se+Y+","+V,$=se+","+(V-ne);return"M"+K+te+" 0 1,1 "+$+te+" 0 0,1 "+K+"Z"}function M(L,S,k){var P=L.path,O=L.xsizemode,F=L.ysizemode,D=L.xanchor,R=L.yanchor;return P.replace(o.segmentRE,function(U){var N=0,X=U.charAt(0),j=o.paramIsX[X],ee=o.paramIsY[X],q=o.numParams[X],G=U.substr(1).replace(o.paramRE,function(J){return j[N]?O==="pixel"?J=S(D)+Number(J):J=S(J):ee[N]&&(F==="pixel"?J=k(R)-Number(J):J=k(J)),N++,N>q&&(J="X"),J});return N>q&&(G=G.replace(/[\s,]*X.*/,""),s.log("Ignoring extra params in segment "+U)),X+G})}function w(L,S,k){return L.replace(o.segmentRE,function(P){var O=0,F=P.charAt(0),D=o.paramIsX[F],R=o.paramIsY[F],U=o.numParams[F],N=P.substr(1).replace(o.paramRE,function(X){return O>=U||(D[O]?X=S(X):R[O]&&(X=k(X)),O++),X});return F+N})}function T(L,S){if(!!p(L)){var k=S.node(),P=+k.getAttribute("data-index");if(P>=0){if(P===L._fullLayout._activeShapeIndex){_(L);return}L._fullLayout._activeShapeIndex=P,L._fullLayout._deactivateShape=_,v(L)}}}function _(L){if(!!p(L)){var S=L._fullLayout._activeShapeIndex;S>=0&&(i(L),delete L._fullLayout._activeShapeIndex,v(L))}}function h(L){if(!!p(L)){i(L);var S=L._fullLayout._activeShapeIndex,k=(L.layout||{}).shapes||[];if(S<k.length){for(var P=[],O=0;O<k.length;O++)O!==S&&P.push(k[O]);delete L._fullLayout._activeShapeIndex,u.call("_guiRelayout",L,{shapes:P})}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(e,I,B){var u=e("../../drawing/attributes").dash,s=e("../../../lib/extend").extendFlat;I.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:s({},u,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(e,I,B){var u=32;I.exports={CIRCLE_SIDES:u,i000:0,i090:u/4,i180:u/2,i270:u/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(e,I,B){var u=e("../../color");I.exports=function(m,x,t){t("newshape.drawdirection"),t("newshape.layer"),t("newshape.fillcolor"),t("newshape.fillrule"),t("newshape.opacity");var i=t("newshape.line.width");if(i){var a=(m||{}).plot_bgcolor||"#FFF";t("newshape.line.color",u.contrast(a)),t("newshape.line.dash")}t("activeshape.fillcolor"),t("activeshape.opacity")}},{"../../color":366}],454:[function(e,I,B){var u=e("../../dragelement"),s=e("../../dragelement/helpers"),m=s.drawMode,x=e("../../../registry"),t=e("./constants"),i=t.i000,a=t.i090,r=t.i180,n=t.i270,f=e("../../../plots/cartesian/handle_outline"),l=f.clearOutlineControllers,o=e("./helpers"),c=o.pointsShapeRectangle,v=o.pointsShapeEllipse,d=o.writePaths,p=e("./newshapes");I.exports=function g(A,b,M,w){w||(w=0);var T=M.gd;function _(){g(A,b,M,w++),v(A[0])&&h({redrawing:!0})}function h(te){M.isActiveShape=!1;var K=p(b,M);Object.keys(K).length&&x.call((te||{}).redrawing?"relayout":"_guiRelayout",T,K)}var L=M.isActiveShape,S=T._fullLayout,k=S._zoomlayer,P=M.dragmode,O=m(P);O?T._fullLayout._drawing=!0:T._fullLayout._activeShapeIndex>=0&&l(T),b.attr("d",d(A));var F,D,R,U,N;if(L&&!w){N=y([],A);var X=k.append("g").attr("class","outline-controllers");le(X),ne()}function j(te){R=+te.srcElement.getAttribute("data-i"),U=+te.srcElement.getAttribute("data-j"),F[R][U].moveFn=ee}function ee(te,K){if(!!A.length){var $=N[R][U][1],ae=N[R][U][2],ie=A[R],oe=ie.length;if(c(ie)){for(var ue=0;ue<oe;ue++)if(ue!==U){var xe=ie[ue];xe[1]===ie[U][1]&&(xe[1]=$+te),xe[2]===ie[U][2]&&(xe[2]=ae+K)}if(ie[U][1]=$+te,ie[U][2]=ae+K,!c(ie))for(var he=0;he<oe;he++)for(var me=0;me<ie[he].length;me++)ie[he][me]=N[R][he][me]}else ie[U][1]=$+te,ie[U][2]=ae+K;_()}}function q(){h()}function G(){if(!!A.length&&!!A[R]&&!!A[R].length){for(var te=[],K=0;K<A[R].length;K++)K!==U&&te.push(A[R][K]);te.length>1&&!(te.length===2&&te[1][0]==="Z")&&(U===0&&(te[0][0]="M"),A[R]=te,_(),h())}}function J(te,K){if(te===2){R=+K.srcElement.getAttribute("data-i"),U=+K.srcElement.getAttribute("data-j");var $=A[R];!c($)&&!v($)&&G()}}function le(te){F=[];for(var K=0;K<A.length;K++){var $=A[K],ae=c($),ie=!ae&&v($);F[K]=[];for(var oe=0;oe<$.length;oe++)if($[oe][0]!=="Z"&&!(ie&&oe!==i&&oe!==a&&oe!==r&&oe!==n)){var ue=$[oe][1],xe=$[oe][2],he=te.append("circle").classed("cursor-grab",!0).attr("data-i",K).attr("data-j",oe).attr("cx",ue).attr("cy",xe).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});F[K][oe]={element:he.node(),gd:T,prepFn:j,doneFn:q,clickFn:J},u.init(F[K][oe])}}}function fe(te,K){if(!!A.length)for(var $=0;$<A.length;$++)for(var ae=0;ae<A[$].length;ae++)for(var ie=0;ie+2<A[$][ae].length;ie+=2)A[$][ae][ie+1]=N[$][ae][ie+1]+te,A[$][ae][ie+2]=N[$][ae][ie+2]+K}function se(te,K){fe(te,K),_()}function V(te){R=+te.srcElement.getAttribute("data-i"),R||(R=0),D[R].moveFn=se}function Y(){h()}function ne(){if(D=[],!!A.length){var te=0;D[te]={element:b[0][0],gd:T,prepFn:V,doneFn:Y},u.init(D[te])}}};function y(g,A){for(var b=0;b<A.length;b++){var M=A[b];g[b]=[];for(var w=0;w<M.length;w++){g[b][w]=[];for(var T=0;T<M[w].length;T++)g[b][w][T]=M[w][T]}}return g}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(e,I,B){var u=e("parse-svg-path"),s=e("./constants"),m=s.CIRCLE_SIDES,x=s.SQRT2,t=e("../../../plots/cartesian/helpers"),i=t.p2r,a=t.r2p,r=[0,3,4,5,6,1,2],n=[0,3,4,1,2];B.writePaths=function(o){var c=o.length;if(!c)return"M0,0Z";for(var v="",d=0;d<c;d++)for(var p=o[d].length,y=0;y<p;y++){var g=o[d][y][0];if(g==="Z")v+="Z";else for(var A=o[d][y].length,b=0;b<A;b++){var M=b;g==="Q"||g==="S"?M=n[b]:g==="C"&&(M=r[b]),v+=o[d][y][M],b>0&&b<A-1&&(v+=",")}}return v},B.readPaths=function(o,c,v,d){var p=u(o),y=[],g=-1,A=function(){g++,y[g]=[]},b,M=0,w=0,T,_,h=function(){T=M,_=w};h();for(var L=0;L<p.length;L++){var S=[],k,P,O,F,D=p[L][0],R=D;switch(D){case"M":A(),M=+p[L][1],w=+p[L][2],S.push([R,M,w]),h();break;case"Q":case"S":k=+p[L][1],O=+p[L][2],M=+p[L][3],w=+p[L][4],S.push([R,M,w,k,O]);break;case"C":k=+p[L][1],O=+p[L][2],P=+p[L][3],F=+p[L][4],M=+p[L][5],w=+p[L][6],S.push([R,M,w,k,O,P,F]);break;case"T":case"L":M=+p[L][1],w=+p[L][2],S.push([R,M,w]);break;case"H":R="L",M=+p[L][1],S.push([R,M,w]);break;case"V":R="L",w=+p[L][1],S.push([R,M,w]);break;case"A":R="L";var U=+p[L][1],N=+p[L][2];+p[L][4]||(U=-U,N=-N);var X=M-U,j=w;for(b=1;b<=m/2;b++){var ee=2*Math.PI*b/m;S.push([R,X+U*Math.cos(ee),j+N*Math.sin(ee)])}break;case"Z":(M!==T||w!==_)&&(M=T,w=_,S.push([R,M,w]));break}for(var q=(v||{}).domain,G=c._fullLayout._size,J=v&&v.xsizemode==="pixel",le=v&&v.ysizemode==="pixel",fe=d===!1,se=0;se<S.length;se++){for(b=0;b+2<7;b+=2){var V=S[se][b+1],Y=S[se][b+2];V===void 0||Y===void 0||(M=V,w=Y,v&&(v.xaxis&&v.xaxis.p2r?(fe&&(V-=v.xaxis._offset),J?V=a(v.xaxis,v.xanchor)+V:V=i(v.xaxis,V)):(fe&&(V-=G.l),q?V=q.x[0]+V/G.w:V=V/G.w),v.yaxis&&v.yaxis.p2r?(fe&&(Y-=v.yaxis._offset),le?Y=a(v.yaxis,v.yanchor)-Y:Y=i(v.yaxis,Y)):(fe&&(Y-=G.t),q?Y=q.y[1]-Y/G.h:Y=1-Y/G.h)),S[se][b+1]=V,S[se][b+2]=Y)}y[g].push(S[se].slice())}}return y};function f(o,c){return Math.abs(o-c)<=1e-6}function l(o,c){var v=c[1]-o[1],d=c[2]-o[2];return Math.sqrt(v*v+d*d)}B.pointsShapeRectangle=function(o){var c=o.length;if(c!==5)return!1;for(var v=1;v<3;v++){var d=o[0][v]-o[1][v],p=o[3][v]-o[2][v];if(!f(d,p))return!1;var y=o[0][v]-o[3][v],g=o[1][v]-o[2][v];if(!f(y,g))return!1}return!f(o[0][1],o[1][1])&&!f(o[0][1],o[3][1])?!1:!!(l(o[0],o[1])*l(o[0],o[3]))},B.pointsShapeEllipse=function(o){var c=o.length;if(c!==m+1)return!1;c=m;for(var v=0;v<c;v++){var d=(c*2-v)%c,p=(c/2+d)%c,y=(c/2+v)%c;if(!f(l(o[v],o[y]),l(o[d],o[p])))return!1}return!0},B.handleEllipse=function(o,c,v){if(!o)return[c,v];var d=B.ellipseOver({x0:c[0],y0:c[1],x1:v[0],y1:v[1]}),p=(d.x1+d.x0)/2,y=(d.y1+d.y0)/2,g=(d.x1-d.x0)/2,A=(d.y1-d.y0)/2;g||(g=A=A/x),A||(A=g=g/x);for(var b=[],M=0;M<m;M++){var w=M*2*Math.PI/m;b.push([p+g*Math.cos(w),y+A*Math.sin(w)])}return b},B.ellipseOver=function(o){var c=o.x0,v=o.y0,d=o.x1,p=o.y1,y=d-c,g=p-v;c-=y,v-=g;var A=(c+d)/2,b=(v+p)/2,M=x;return y*=M,g*=M,{x0:A-y,y0:b-g,x1:A+y,y1:b+g}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(e,I,B){var u=e("../../dragelement/helpers"),s=u.drawMode,m=u.openMode,x=e("./constants"),t=x.i000,i=x.i090,a=x.i180,r=x.i270,n=x.cos45,f=x.sin45,l=e("../../../plots/cartesian/helpers"),o=l.p2r,c=l.r2p,v=e("../../../plots/cartesian/handle_outline"),d=v.clearSelect,p=e("./helpers"),y=p.readPaths,g=p.writePaths,A=p.ellipseOver;I.exports=function(w,T){if(!!w.length){var _=w[0][0];if(!!_){var h=_.getAttribute("d"),L=T.gd,S=L._fullLayout.newshape,k=T.plotinfo,P=k.xaxis,O=k.yaxis,F=!!k.domain||!k.xaxis,D=!!k.domain||!k.yaxis,R=T.isActiveShape,U=T.dragmode,N=(L.layout||{}).shapes||[];if(!s(U)&&R!==void 0){var X=L._fullLayout._activeShapeIndex;if(X<N.length)switch(L._fullLayout.shapes[X].type){case"rect":U="drawrect";break;case"circle":U="drawcircle";break;case"line":U="drawline";break;case"path":var j=N[X].path||"";j[j.length-1]==="Z"?U="drawclosedpath":U="drawopenpath";break}}var ee=m(U),q=y(h,L,k,R),G={editable:!0,xref:F?"paper":P._id,yref:D?"paper":O._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};ee||(G.fillcolor=S.fillcolor,G.fillrule=S.fillrule);var J;if(q.length===1&&(J=q[0]),J&&U==="drawrect")G.type="rect",G.x0=J[0][1],G.y0=J[0][2],G.x1=J[2][1],G.y1=J[2][2];else if(J&&U==="drawline")G.type="line",G.x0=J[0][1],G.y0=J[0][2],G.x1=J[1][1],G.y1=J[1][2];else if(J&&U==="drawcircle"){G.type="circle";var le=J[t][1],fe=J[i][1],se=J[a][1],V=J[r][1],Y=J[t][2],ne=J[i][2],te=J[a][2],K=J[r][2],$=k.xaxis&&(k.xaxis.type==="date"||k.xaxis.type==="log"),ae=k.yaxis&&(k.yaxis.type==="date"||k.yaxis.type==="log");$&&(le=c(k.xaxis,le),fe=c(k.xaxis,fe),se=c(k.xaxis,se),V=c(k.xaxis,V)),ae&&(Y=c(k.yaxis,Y),ne=c(k.yaxis,ne),te=c(k.yaxis,te),K=c(k.yaxis,K));var ie=(fe+V)/2,oe=(Y+te)/2,ue=(V-fe+se-le)/2,xe=(K-ne+te-Y)/2,he=A({x0:ie,y0:oe,x1:ie+ue*n,y1:oe+xe*f});$&&(he.x0=o(k.xaxis,he.x0),he.x1=o(k.xaxis,he.x1)),ae&&(he.y0=o(k.yaxis,he.y0),he.y1=o(k.yaxis,he.y1)),G.x0=he.x0,G.y0=he.y0,G.x1=he.x1,G.y1=he.y1}else G.type="path",P&&O&&b(q,P,O),G.path=g(q),J=null;d(L);for(var me=T.editHelpers,be=(me||{}).modifyItem,Ce=[],Se=0;Se<N.length;Se++){var Be=L._fullLayout.shapes[Se];if(Ce[Se]=Be._input,R!==void 0&&Se===L._fullLayout._activeShapeIndex){var Ye=G;switch(Be.type){case"line":case"rect":case"circle":be("x0",Ye.x0),be("x1",Ye.x1),be("y0",Ye.y0),be("y1",Ye.y1);break;case"path":be("path",Ye.path);break}}}return R===void 0?(Ce.push(G),Ce):me?me.getUpdateObj():{}}}};function b(M,w,T){var _=w.type==="date",h=T.type==="date";if(!_&&!h)return M;for(var L=0;L<M.length;L++)for(var S=0;S<M[L].length;S++)for(var k=0;k+2<M[L][S].length;k+=2)_&&(M[L][S][k+1]=M[L][S][k+1].replace(" ","_")),h&&(M[L][S][k+2]=M[L][S][k+2].replace(" ","_"));return M}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(e,I,B){var u=e("./constants"),s=e("../../lib");B.rangeToShapePosition=function(m){return m.type==="log"?m.r2d:function(x){return x}},B.shapePositionToRange=function(m){return m.type==="log"?m.d2r:function(x){return x}},B.decodeDate=function(m){return function(x){return x.replace&&(x=x.replace("_"," ")),m(x)}},B.encodeDate=function(m){return function(x){return m(x).replace(" ","_")}},B.extractPathCoords=function(m,x){var t=[],i=m.match(u.segmentRE);return i.forEach(function(a){var r=x[a.charAt(0)].drawn;if(r!==void 0){var n=a.substr(1).match(u.paramRE);!n||n.length<r||t.push(s.cleanNumber(n[r]))}}),t},B.getDataToPixel=function(m,x,t,i){var a=m._fullLayout._size,r;if(x)if(i==="domain")r=function(f){return x._length*(t?1-f:f)+x._offset};else{var n=B.shapePositionToRange(x);r=function(f){return x._offset+x.r2p(n(f,!0))},x.type==="date"&&(r=B.decodeDate(r))}else t?r=function(f){return a.t+a.h*(1-f)}:r=function(f){return a.l+a.w*f};return r},B.getPixelToData=function(m,x,t,i){var a=m._fullLayout._size,r;if(x)if(i==="domain")r=function(f){var l=(f-x._offset)/x._length;return t?1-l:l};else{var n=B.rangeToShapePosition(x);r=function(f){return n(x.p2r(f-x._offset))}}else t?r=function(f){return 1-(f-a.t)/a.h}:r=function(f){return(f-a.l)/a.w};return r},B.roundPositionForSharpStrokeRendering=function(m,x){var t=Math.round(x%2)===1,i=Math.round(m);return t?i+.5:i},B.makeOptionsAndPlotinfo=function(m,x){var t=m._fullLayout.shapes[x]||{},i=m._fullLayout._plots[t.xref+t.yref],a=!!i;return a?i._hadPlotinfo=!0:(i={},t.xref&&t.xref!=="paper"&&(i.xaxis=m._fullLayout[t.xref+"axis"]),t.yref&&t.yref!=="paper"&&(i.yaxis=m._fullLayout[t.yref+"axis"])),i.xsizemode=t.xsizemode,i.ysizemode=t.ysizemode,i.xanchor=t.xanchor,i.yanchor=t.yanchor,{options:t,plotinfo:i}}},{"../../lib":503,"./constants":448}],458:[function(e,I,B){var u=e("./draw");I.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:u.draw,drawOne:u.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(e,I,B){var u=e("../../plots/font_attributes"),s=e("../../plots/pad_attributes"),m=e("../../lib/extend").extendDeepAll,x=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/animation_attributes"),i=e("../../plot_api/plot_template").templatedArray,a=e("./constants"),r=i("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});I.exports=x(i("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:m(s({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:t.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:u({})},font:u({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(e,I,B){I.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/array_container_defaults"),m=e("./attributes"),x=e("./constants"),t=x.name,i=m.steps;I.exports=function(f,l){s(f,l,{name:t,handleItemDefaults:a})};function a(n,f,l){function o(b,M){return u.coerce(n,f,m,b,M)}for(var c=s(n,f,{name:"steps",handleItemDefaults:r}),v=0,d=0;d<c.length;d++)c[d].visible&&v++;var p;if(v<2?p=f.visible=!1:p=o("visible"),!!p){f._stepCount=v;var y=f._visibleSteps=u.filterVisible(c),g=o("active");(c[g]||{}).visible||(f.active=y[0]._index),o("x"),o("y"),u.noneOrAll(n,f,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),u.coerceFont(o,"font",l.font);var A=o("currentvalue.visible");A&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),u.coerceFont(o,"currentvalue.font",f.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function r(n,f){function l(v,d){return u.coerce(n,f,i,v,d)}var o;if(n.method!=="skip"&&!Array.isArray(n.args)?o=f.visible=!1:o=l("visible"),o){l("method"),l("args");var c=l("label","step-"+f._index);l("value",c),l("execute")}}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../plots/plots"),m=e("../color"),x=e("../drawing"),t=e("../../lib"),i=t.strTranslate,a=e("../../lib/svg_text_utils"),r=e("../../plot_api/plot_template").arrayEditor,n=e("./constants"),f=e("../../constants/alignment"),l=f.LINE_SPACING,o=f.FROM_TL,c=f.FROM_BR;I.exports=function(U){var N=U._fullLayout,X=d(N,U),j=N._infolayer.selectAll("g."+n.containerClassName).data(X.length>0?[0]:[]);j.enter().append("g").classed(n.containerClassName,!0).style("cursor","ew-resize");function ee(le){le._commandObserver&&(le._commandObserver.remove(),delete le._commandObserver),s.autoMargin(U,v(le))}if(j.exit().each(function(){u.select(this).selectAll("g."+n.groupClassName).each(ee)}).remove(),X.length!==0){var q=j.selectAll("g."+n.groupClassName).data(X,p);q.enter().append("g").classed(n.groupClassName,!0),q.exit().each(ee).remove();for(var G=0;G<X.length;G++){var J=X[G];y(U,J)}q.each(function(le){var fe=u.select(this);S(le),s.manageCommandObserver(U,le,le._visibleSteps,function(se){var V=fe.data()[0];V.active!==se.index&&(V._dragging||_(U,fe,V,se.index,!1,!0))}),g(U,u.select(this),le)})}};function v(R){return n.autoMarginIdRoot+R._index}function d(R,U){for(var N=R[n.name],X=[],j=0;j<N.length;j++){var ee=N[j];!ee.visible||(ee._gd=U,X.push(ee))}return X}function p(R){return R._index}function y(R,U){var N=x.tester.selectAll("g."+n.labelGroupClass).data(U._visibleSteps);N.enter().append("g").classed(n.labelGroupClass,!0);var X=0,j=0;N.each(function(ne){var te=u.select(this),K=M(te,{step:ne},U),$=K.node();if($){var ae=x.bBox($);j=Math.max(j,ae.height),X=Math.max(X,ae.width)}}),N.remove();var ee=U._dims={};ee.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var q=R._fullLayout._size;ee.lx=q.l+q.w*U.x,ee.ly=q.t+q.h*(1-U.y),U.lenmode==="fraction"?ee.outerLength=Math.round(q.w*U.len):ee.outerLength=U.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-U.pad.l-U.pad.r);var G=ee.inputAreaLength-2*n.stepInset,J=G/(U._stepCount-1),le=X+n.labelPadding;if(ee.labelStride=Math.max(1,Math.ceil(le/J)),ee.labelHeight=j,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,U.currentvalue.visible){var fe=x.tester.append("g");N.each(function(ne){var te=A(fe,U,ne.label),K=te.node()&&x.bBox(te.node())||{width:0,height:0},$=a.lineCount(te);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(K.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(K.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,$)}),ee.currentValueTotalHeight=ee.currentValueHeight+U.currentvalue.offset,fe.remove()}ee.height=ee.currentValueTotalHeight+n.tickOffset+U.ticklen+n.labelOffset+ee.labelHeight+U.pad.t+U.pad.b;var se="left";t.isRightAnchor(U)&&(ee.lx-=ee.outerLength,se="right"),t.isCenterAnchor(U)&&(ee.lx-=ee.outerLength/2,se="center");var V="top";t.isBottomAnchor(U)&&(ee.ly-=ee.height,V="bottom"),t.isMiddleAnchor(U)&&(ee.ly-=ee.height/2,V="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var Y={y:U.y,b:ee.height*c[V],t:ee.height*o[V]};U.lenmode==="fraction"?(Y.l=0,Y.xl=U.x-U.len*o[se],Y.r=0,Y.xr=U.x+U.len*c[se]):(Y.x=U.x,Y.l=ee.outerLength*o[se],Y.r=ee.outerLength*c[se]),s.autoMargin(R,v(U),Y)}function g(R,U,N){(N.steps[N.active]||{}).visible||(N.active=N._visibleSteps[0]._index),U.call(A,N).call(D,N).call(w,N).call(L,N).call(F,R,N).call(b,R,N);var X=N._dims;x.setTranslate(U,X.lx+N.pad.l,X.ly+N.pad.t),U.call(k,N,!1),U.call(A,N)}function A(R,U,N){if(!!U.currentvalue.visible){var X=U._dims,j,ee;switch(U.currentvalue.xanchor){case"right":j=X.inputAreaLength-n.currentValueInset-X.currentValueMaxWidth,ee="left";break;case"center":j=X.inputAreaLength*.5,ee="middle";break;default:j=n.currentValueInset,ee="left"}var q=t.ensureSingle(R,"text",n.labelClass,function(V){V.attr({"text-anchor":ee,"data-notex":1})}),G=U.currentvalue.prefix?U.currentvalue.prefix:"";if(typeof N=="string")G+=N;else{var J=U.steps[U.active].label,le=U._gd._fullLayout._meta;le&&(J=t.templateString(J,le)),G+=J}U.currentvalue.suffix&&(G+=U.currentvalue.suffix),q.call(x.font,U.currentvalue.font).text(G).call(a.convertToTspans,U._gd);var fe=a.lineCount(q),se=(X.currentValueMaxLines+1-fe)*U.currentvalue.font.size*l;return a.positionText(q,j,se),q}}function b(R,U,N){var X=t.ensureSingle(R,"rect",n.gripRectClass,function(j){j.call(h,U,R,N).style("pointer-events","all")});X.attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(m.stroke,N.bordercolor).call(m.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px")}function M(R,U,N){var X=t.ensureSingle(R,"text",n.labelClass,function(q){q.attr({"text-anchor":"middle","data-notex":1})}),j=U.step.label,ee=N._gd._fullLayout._meta;return ee&&(j=t.templateString(j,ee)),X.call(x.font,N.font).text(j).call(a.convertToTspans,N._gd),X}function w(R,U){var N=t.ensureSingle(R,"g",n.labelsClass),X=U._dims,j=N.selectAll("g."+n.labelGroupClass).data(X.labelSteps);j.enter().append("g").classed(n.labelGroupClass,!0),j.exit().remove(),j.each(function(ee){var q=u.select(this);q.call(M,ee,U),x.setTranslate(q,P(U,ee.fraction),n.tickOffset+U.ticklen+U.font.size*l+n.labelOffset+X.currentValueTotalHeight)})}function T(R,U,N,X,j){var ee=Math.round(X*(N._stepCount-1)),q=N._visibleSteps[ee]._index;q!==N.active&&_(R,U,N,q,!0,j)}function _(R,U,N,X,j,ee){var q=N.active;N.active=X,r(R.layout,n.name,N).applyUpdate("active",X);var G=N.steps[N.active];U.call(k,N,ee),U.call(A,N),R.emit("plotly_sliderchange",{slider:N,step:N.steps[N.active],interaction:j,previousActive:q}),G&&G.method&&j&&(U._nextMethod?(U._nextMethod.step=G,U._nextMethod.doCallback=j,U._nextMethod.doTransition=ee):(U._nextMethod={step:G,doCallback:j,doTransition:ee},U._nextMethodRaf=window.requestAnimationFrame(function(){var J=U._nextMethod.step;!J.method||(J.execute&&s.executeAPICommand(R,J.method,J.args),U._nextMethod=null,U._nextMethodRaf=null)})))}function h(R,U,N){var X=N.node(),j=u.select(U);function ee(){return N.data()[0]}function q(){var G=ee();U.emit("plotly_sliderstart",{slider:G});var J=N.select("."+n.gripRectClass);u.event.stopPropagation(),u.event.preventDefault(),J.call(m.fill,G.activebgcolor);var le=O(G,u.mouse(X)[0]);T(U,N,G,le,!0),G._dragging=!0;function fe(){var V=ee(),Y=O(V,u.mouse(X)[0]);T(U,N,V,Y,!1)}j.on("mousemove",fe),j.on("touchmove",fe);function se(){var V=ee();V._dragging=!1,J.call(m.fill,V.bgcolor),j.on("mouseup",null),j.on("mousemove",null),j.on("touchend",null),j.on("touchmove",null),U.emit("plotly_sliderend",{slider:V,step:V.steps[V.active]})}j.on("mouseup",se),j.on("touchend",se)}R.on("mousedown",q),R.on("touchstart",q)}function L(R,U){var N=R.selectAll("rect."+n.tickRectClass).data(U._visibleSteps),X=U._dims;N.enter().append("rect").classed(n.tickRectClass,!0),N.exit().remove(),N.attr({width:U.tickwidth+"px","shape-rendering":"crispEdges"}),N.each(function(j,ee){var q=ee%X.labelStride==0,G=u.select(this);G.attr({height:q?U.ticklen:U.minorticklen}).call(m.fill,U.tickcolor),x.setTranslate(G,P(U,ee/(U._stepCount-1))-.5*U.tickwidth,(q?n.tickOffset:n.minorTickOffset)+X.currentValueTotalHeight)})}function S(R){var U=R._dims;U.labelSteps=[];for(var N=R._stepCount,X=0;X<N;X+=U.labelStride)U.labelSteps.push({fraction:X/(N-1),step:R._visibleSteps[X]})}function k(R,U,N){for(var X=R.select("rect."+n.gripRectClass),j=0,ee=0;ee<U._stepCount;ee++)if(U._visibleSteps[ee]._index===U.active){j=ee;break}var q=P(U,j/(U._stepCount-1));if(!U._invokingCommand){var G=X;N&&U.transition.duration>0&&(G=G.transition().duration(U.transition.duration).ease(U.transition.easing)),G.attr("transform",i(q-n.gripWidth*.5,U._dims.currentValueTotalHeight))}}function P(R,U){var N=R._dims;return N.inputAreaStart+n.stepInset+(N.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,U))}function O(R,U){var N=R._dims;return Math.min(1,Math.max(0,(U-n.stepInset-N.inputAreaStart)/(N.inputAreaLength-2*n.stepInset-2*N.inputAreaStart)))}function F(R,U,N){var X=N._dims,j=t.ensureSingle(R,"rect",n.railTouchRectClass,function(ee){ee.call(h,U,R,N).style("pointer-events","all")});j.attr({width:X.inputAreaLength,height:Math.max(X.inputAreaWidth,n.tickOffset+N.ticklen+X.labelHeight)}).call(m.fill,N.bgcolor).attr("opacity",0),x.setTranslate(j,0,X.currentValueTotalHeight)}function D(R,U){var N=U._dims,X=N.inputAreaLength-n.railInset*2,j=t.ensureSingle(R,"rect",n.railRectClass);j.attr({width:X,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(m.stroke,U.bordercolor).call(m.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px"),x.setTranslate(j,n.railInset,(N.inputAreaWidth-n.railWidth)*.5+N.currentValueTotalHeight)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(e,I,B){var u=e("./constants");I.exports={moduleType:"component",name:u.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../lib"),i=t.strTranslate,a=e("../drawing"),r=e("../color"),n=e("../../lib/svg_text_utils"),f=e("../../constants/interactions"),l=e("../../constants/alignment").OPPOSITE_SIDE,o=/ [XY][0-9]* /;function c(v,d,p){var y=p.propContainer,g=p.propName,A=p.placeholder,b=p.traceIndex,M=p.avoid||{},w=p.attributes,T=p.transform,_=p.containerGroup,h=v._fullLayout,L=1,S=!1,k=y.title,P=(k&&k.text?k.text:"").trim(),O=k&&k.font?k.font:{},F=O.family,D=O.size,R=O.color,U;g==="title.text"?U="titleText":g.indexOf("axis")!==-1?U="axisTitleText":g.indexOf("colorbar"!==-1)&&(U="colorbarTitleText");var N=v._context.edits[U];P===""?L=0:P.replace(o," % ")===A.replace(o," % ")&&(L=.2,S=!0,N||(P="")),p._meta?P=t.templateString(P,p._meta):h._meta&&(P=t.templateString(P,h._meta));var X=P||N,j;_||(_=t.ensureSingle(h._infolayer,"g","g-"+d),j=h._hColorbarMoveTitle);var ee=_.selectAll("text").data(X?[0]:[]);if(ee.enter().append("text"),ee.text(P).attr("class",d),ee.exit().remove(),!X)return _;function q(fe){t.syncOrAsync([G,J],fe)}function G(fe){var se;return!T&&j&&(T={}),T?(se="",T.rotate&&(se+="rotate("+[T.rotate,w.x,w.y]+")"),(T.offset||j)&&(se+=i(0,(T.offset||0)-(j||0)))):se=null,fe.attr("transform",se),fe.style({"font-family":F,"font-size":u.round(D,2)+"px",fill:r.rgb(R),opacity:L*r.opacity(R),"font-weight":m.fontWeight}).attr(w).call(n.convertToTspans,v),m.previousPromises(v)}function J(fe){var se=u.select(fe.node().parentNode);if(M&&M.selection&&M.side&&P){se.attr("transform",null);var V=l[M.side],Y=M.side==="left"||M.side==="top"?-1:1,ne=s(M.pad)?M.pad:2,te=a.bBox(se.node()),K={left:0,top:0,right:h.width,bottom:h.height},$=M.maxShift||Y*(K[M.side]-te[M.side]),ae=0;if($<0)ae=$;else{var ie=M.offsetLeft||0,oe=M.offsetTop||0;te.left-=ie,te.right-=ie,te.top-=oe,te.bottom-=oe,M.selection.each(function(){var xe=a.bBox(this);t.bBoxIntersect(te,xe,ne)&&(ae=Math.max(ae,Y*(xe[M.side]-te[V])+ne))}),ae=Math.min($,ae)}if(ae>0||$<0){var ue={left:[-ae,0],right:[ae,0],top:[0,-ae],bottom:[0,ae]}[M.side];se.attr("transform",i(ue[0],ue[1]))}}}ee.call(q);function le(){L=0,S=!0,ee.text(A).on("mouseover.opacity",function(){u.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){u.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})}return N&&(P?ee.on(".opacity",null):le(),ee.call(n.makeEditable,{gd:v}).on("edit",function(fe){b!==void 0?x.call("_guiRestyle",v,g,fe,b):x.call("_guiRelayout",v,g,fe)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(q)}).on("input",function(fe){this.text(fe||" ").call(n.positionText,w.x,w.y)})),ee.classed("js-placeholder",S),_}I.exports={draw:c}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(e,I,B){var u=e("../../plots/font_attributes"),s=e("../color/attributes"),m=e("../../lib/extend").extendFlat,x=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/pad_attributes"),i=e("../../plot_api/plot_template").templatedArray,a=i("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});I.exports=x(i("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:m(t({editType:"arraydraw"}),{}),font:u({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:s.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(e,I,B){I.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],467:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/array_container_defaults"),m=e("./attributes"),x=e("./constants"),t=x.name,i=m.buttons;I.exports=function(f,l){var o={name:t,handleItemDefaults:a};s(f,l,o)};function a(n,f,l){function o(d,p){return u.coerce(n,f,m,d,p)}var c=s(n,f,{name:"buttons",handleItemDefaults:r}),v=o("visible",c.length>0);!v||(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),u.noneOrAll(n,f,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),u.coerceFont(o,"font",l.font),o("bgcolor",l.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function r(n,f){function l(c,v){return u.coerce(n,f,i,c,v)}var o=l("visible",n.method==="skip"||Array.isArray(n.args));o&&(l("method"),l("args"),l("args2"),l("label"),l("execute"))}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../plots/plots"),m=e("../color"),x=e("../drawing"),t=e("../../lib"),i=e("../../lib/svg_text_utils"),a=e("../../plot_api/plot_template").arrayEditor,r=e("../../constants/alignment").LINE_SPACING,n=e("./constants"),f=e("./scrollbox");I.exports=function(O){var F=O._fullLayout,D=t.filterVisible(F[n.name]);function R(J){s.autoMargin(O,L(J))}var U=F._menulayer.selectAll("g."+n.containerClassName).data(D.length>0?[0]:[]);if(U.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),U.exit().each(function(){u.select(this).selectAll("g."+n.headerGroupClassName).each(R)}).remove(),D.length!==0){var N=U.selectAll("g."+n.headerGroupClassName).data(D,l);N.enter().append("g").classed(n.headerGroupClassName,!0);for(var X=t.ensureSingle(U,"g",n.dropdownButtonGroupClassName,function(J){J.style("pointer-events","all")}),j=0;j<D.length;j++){var ee=D[j];h(O,ee)}var q="updatemenus"+F._uid,G=new f(O,X,q);N.enter().size()&&(X.node().parentNode.appendChild(X.node()),X.call(k)),N.exit().each(function(J){X.call(k),R(J)}).remove(),N.each(function(J){var le=u.select(this),fe=J.type==="dropdown"?X:null;s.manageCommandObserver(O,J,J.buttons,function(se){v(O,J,J.buttons[se.index],le,fe,G,se.index,!0)}),J.type==="dropdown"?(d(O,le,X,G,J),c(X,J)&&p(O,le,X,G,J)):p(O,le,null,null,J)})}};function l(P){return P._index}function o(P){return+P.attr(n.menuIndexAttrName)==-1}function c(P,O){return+P.attr(n.menuIndexAttrName)===O._index}function v(P,O,F,D,R,U,N,X){O.active=N,a(P.layout,n.name,O).applyUpdate("active",N),O.type==="buttons"?p(P,D,null,null,O):O.type==="dropdown"&&(R.attr(n.menuIndexAttrName,"-1"),d(P,D,R,U,O),X||p(P,D,R,U,O))}function d(P,O,F,D,R){var U=t.ensureSingle(O,"g",n.headerClassName,function(J){J.style("pointer-events","all")}),N=R._dims,X=R.active,j=R.buttons[X]||n.blankHeaderOpts,ee={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},q={width:N.headerWidth,height:N.headerHeight};U.call(A,R,j,P).call(S,R,ee,q);var G=t.ensureSingle(O,"text",n.headerArrowClassName,function(J){J.attr("text-anchor","end").call(x.font,R.font).text(n.arrowSymbol[R.direction])});G.attr({x:N.headerWidth-n.arrowOffsetX+R.pad.l,y:N.headerHeight/2+n.textOffsetY+R.pad.t}),U.on("click",function(){F.call(k,String(c(F,R)?-1:R._index)),p(P,O,F,D,R)}),U.on("mouseover",function(){U.call(T)}),U.on("mouseout",function(){U.call(_,R)}),x.setTranslate(O,N.lx,N.ly)}function p(P,O,F,D,R){F||(F=O,F.attr("pointer-events","all"));var U=!o(F)||R.type==="buttons"?R.buttons:[],N=R.type==="dropdown"?n.dropdownButtonClassName:n.buttonClassName,X=F.selectAll("g."+N).data(t.filterVisible(U)),j=X.enter().append("g").classed(N,!0),ee=X.exit();R.type==="dropdown"?(j.attr("opacity","0").transition().attr("opacity","1"),ee.transition().attr("opacity","0").remove()):ee.remove();var q=0,G=0,J=R._dims,le=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(le?G=J.headerHeight+n.gapButtonHeader:q=J.headerWidth+n.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(G=-n.gapButtonHeader+n.gapButton-J.openHeight),R.type==="dropdown"&&R.direction==="left"&&(q=-n.gapButtonHeader+n.gapButton-J.openWidth);var fe={x:J.lx+q+R.pad.l,y:J.ly+G+R.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},se={l:fe.x+R.borderwidth,t:fe.y+R.borderwidth};X.each(function(V,Y){var ne=u.select(this);ne.call(A,R,V,P).call(S,R,fe),ne.on("click",function(){u.event.defaultPrevented||(V.execute&&(V.args2&&R.active===Y?(v(P,R,V,O,F,D,-1),s.executeAPICommand(P,V.method,V.args2)):(v(P,R,V,O,F,D,Y),s.executeAPICommand(P,V.method,V.args))),P.emit("plotly_buttonclicked",{menu:R,button:V,active:R.active}))}),ne.on("mouseover",function(){ne.call(T)}),ne.on("mouseout",function(){ne.call(_,R),X.call(w,R)})}),X.call(w,R),le?(se.w=Math.max(J.openWidth,J.headerWidth),se.h=fe.y-se.t):(se.w=fe.x-se.l,se.h=Math.max(J.openHeight,J.headerHeight)),se.direction=R.direction,D&&(X.size()?y(P,O,F,D,R,se):g(D))}function y(P,O,F,D,R,U){var N=R.direction,X=N==="up"||N==="down",j=R._dims,ee=R.active,q,G,J;if(X)for(G=0,J=0;J<ee;J++)G+=j.heights[J]+n.gapButton;else for(q=0,J=0;J<ee;J++)q+=j.widths[J]+n.gapButton;D.enable(U,q,G),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function g(P){var O=!!P.hbar,F=!!P.vbar;O&&P.hbar.transition().attr("opacity","0").each("end",function(){O=!1,F||P.disable()}),F&&P.vbar.transition().attr("opacity","0").each("end",function(){F=!1,O||P.disable()})}function A(P,O,F,D){P.call(b,O).call(M,O,F,D)}function b(P,O){var F=t.ensureSingle(P,"rect",n.itemRectClassName,function(D){D.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})});F.call(m.stroke,O.bordercolor).call(m.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function M(P,O,F,D){var R=t.ensureSingle(P,"text",n.itemTextClassName,function(X){X.attr({"text-anchor":"start","data-notex":1})}),U=F.label,N=D._fullLayout._meta;N&&(U=t.templateString(U,N)),R.call(x.font,O.font).text(U).call(i.convertToTspans,D)}function w(P,O){var F=O.active;P.each(function(D,R){var U=u.select(this);R===F&&O.showactive&&U.select("rect."+n.itemRectClassName).call(m.fill,n.activeColor)})}function T(P){P.select("rect."+n.itemRectClassName).call(m.fill,n.hoverColor)}function _(P,O){P.select("rect."+n.itemRectClassName).call(m.fill,O.bgcolor)}function h(P,O){var F=O._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=x.tester.selectAll("g."+n.dropdownButtonClassName).data(t.filterVisible(O.buttons));D.enter().append("g").classed(n.dropdownButtonClassName,!0);var R=["up","down"].indexOf(O.direction)!==-1;D.each(function(q,G){var J=u.select(this);J.call(A,O,q,P);var le=J.select("."+n.itemTextClassName),fe=le.node()&&x.bBox(le.node()).width,se=Math.max(fe+n.textPadX,n.minWidth),V=O.font.size*r,Y=i.lineCount(le),ne=Math.max(V*Y,n.minHeight)+n.textOffsetY;ne=Math.ceil(ne),se=Math.ceil(se),F.widths[G]=se,F.heights[G]=ne,F.height1=Math.max(F.height1,ne),F.width1=Math.max(F.width1,se),R?(F.totalWidth=Math.max(F.totalWidth,se),F.openWidth=F.totalWidth,F.totalHeight+=ne+n.gapButton,F.openHeight+=ne+n.gapButton):(F.totalWidth+=se+n.gapButton,F.openWidth+=se+n.gapButton,F.totalHeight=Math.max(F.totalHeight,ne),F.openHeight=F.totalHeight)}),R?F.totalHeight-=n.gapButton:F.totalWidth-=n.gapButton,F.headerWidth=F.width1+n.arrowPadX,F.headerHeight=F.height1,O.type==="dropdown"&&(R?(F.width1+=n.arrowPadX,F.totalHeight=F.height1):F.totalWidth=F.width1,F.totalWidth+=n.arrowPadX),D.remove();var U=F.totalWidth+O.pad.l+O.pad.r,N=F.totalHeight+O.pad.t+O.pad.b,X=P._fullLayout._size;F.lx=X.l+X.w*O.x,F.ly=X.t+X.h*(1-O.y);var j="left";t.isRightAnchor(O)&&(F.lx-=U,j="right"),t.isCenterAnchor(O)&&(F.lx-=U/2,j="center");var ee="top";t.isBottomAnchor(O)&&(F.ly-=N,ee="bottom"),t.isMiddleAnchor(O)&&(F.ly-=N/2,ee="middle"),F.totalWidth=Math.ceil(F.totalWidth),F.totalHeight=Math.ceil(F.totalHeight),F.lx=Math.round(F.lx),F.ly=Math.round(F.ly),s.autoMargin(P,L(O),{x:O.x,y:O.y,l:U*({right:1,center:.5}[j]||0),r:U*({left:1,center:.5}[j]||0),b:N*({top:1,middle:.5}[ee]||0),t:N*({bottom:1,middle:.5}[ee]||0)})}function L(P){return n.autoMarginIdRoot+P._index}function S(P,O,F,D){D=D||{};var R=P.select("."+n.itemRectClassName),U=P.select("."+n.itemTextClassName),N=O.borderwidth,X=F.index,j=O._dims;x.setTranslate(P,N+F.x,N+F.y);var ee=["up","down"].indexOf(O.direction)!==-1,q=D.height||(ee?j.heights[X]:j.height1);R.attr({x:0,y:0,width:D.width||(ee?j.width1:j.widths[X]),height:q});var G=O.font.size*r,J=i.lineCount(U),le=(J-1)*G/2;i.positionText(U,n.textOffsetX,q/2-le+n.textOffsetY),ee?F.y+=j.heights[X]+F.yPad:F.x+=j.widths[X]+F.xPad,F.index++}function k(P,O){P.attr(n.menuIndexAttrName,O||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(e,I,B){arguments[4][463][0].apply(B,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(e,I,B){I.exports=t;var u=e("@plotly/d3"),s=e("../color"),m=e("../drawing"),x=e("../../lib");function t(i,a,r){this.gd=i,this.container=a,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t.barWidth=2,t.barLength=20,t.barRadius=2,t.barPad=1,t.barColor="#808BA4",t.prototype.enable=function(a,r,n){var f=this.gd._fullLayout,l=f.width,o=f.height;this.position=a;var c=this.position.l,v=this.position.w,d=this.position.t,p=this.position.h,y=this.position.direction,g=y==="down",A=y==="left",b=y==="right",M=y==="up",w=v,T=p,_,h,L,S;!g&&!A&&!b&&!M&&(this.position.direction="down",g=!0);var k=g||M;k?(_=c,h=_+w,g?(L=d,S=Math.min(L+T,o),T=S-L):(S=d+T,L=Math.max(S-T,0),T=S-L)):(L=d,S=L+T,A?(h=c+w,_=Math.max(h-w,0),w=h-_):(_=c,h=Math.min(_+w,l),w=h-_)),this._box={l:_,t:L,w,h:T};var P=v>w,O=t.barLength+2*t.barPad,F=t.barWidth+2*t.barPad,D=c,R=d+p;R+F>o&&(R=o-F);var U=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);U.exit().on(".drag",null).remove(),U.enter().append("rect").classed("scrollbar-horizontal",!0).call(s.fill,t.barColor),P?(this.hbar=U.attr({rx:t.barRadius,ry:t.barRadius,x:D,y:R,width:O,height:F}),this._hbarXMin=D+O/2,this._hbarTranslateMax=w-O):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var N=p>T,X=t.barWidth+2*t.barPad,j=t.barLength+2*t.barPad,ee=c+v,q=d;ee+X>l&&(ee=l-X);var G=this.container.selectAll("rect.scrollbar-vertical").data(N?[0]:[]);G.exit().on(".drag",null).remove(),G.enter().append("rect").classed("scrollbar-vertical",!0).call(s.fill,t.barColor),N?(this.vbar=G.attr({rx:t.barRadius,ry:t.barRadius,x:ee,y:q,width:X,height:j}),this._vbarYMin=q+j/2,this._vbarTranslateMax=T-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var J=this.id,le=_-.5,fe=N?h+X+.5:h+.5,se=L-.5,V=P?S+F+.5:S+.5,Y=f._topdefs.selectAll("#"+J).data(P||N?[0]:[]);if(Y.exit().remove(),Y.enter().append("clipPath").attr("id",J).append("rect"),P||N?(this._clipRect=Y.select("rect").attr({x:Math.floor(le),y:Math.floor(se),width:Math.ceil(fe)-Math.floor(le),height:Math.ceil(V)-Math.floor(se)}),this.container.call(m.setClipUrl,J,this.gd),this.bg.attr({x:c,y:d,width:v,height:p})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),P||N){var ne=u.behavior.drag().on("dragstart",function(){u.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ne);var te=u.behavior.drag().on("dragstart",function(){u.event.sourceEvent.preventDefault(),u.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(te),N&&this.vbar.on(".drag",null).call(te)}this.setTranslate(r,n)},t.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},t.prototype._onBoxDrag=function(){var a=this.translateX,r=this.translateY;this.hbar&&(a-=u.event.dx),this.vbar&&(r-=u.event.dy),this.setTranslate(a,r)},t.prototype._onBoxWheel=function(){var a=this.translateX,r=this.translateY;this.hbar&&(a+=u.event.deltaY),this.vbar&&(r+=u.event.deltaY),this.setTranslate(a,r)},t.prototype._onBarDrag=function(){var a=this.translateX,r=this.translateY;if(this.hbar){var n=a+this._hbarXMin,f=n+this._hbarTranslateMax,l=x.constrain(u.event.x,n,f),o=(l-n)/(f-n),c=this.position.w-this._box.w;a=o*c}if(this.vbar){var v=r+this._vbarYMin,d=v+this._vbarTranslateMax,p=x.constrain(u.event.y,v,d),y=(p-v)/(d-v),g=this.position.h-this._box.h;r=y*g}this.setTranslate(a,r)},t.prototype.setTranslate=function(a,r){var n=this.position.w-this._box.w,f=this.position.h-this._box.h;if(a=x.constrain(a||0,0,n),r=x.constrain(r||0,0,f),this.translateX=a,this.translateY=r,this.container.call(m.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var l=a/n;this.hbar.call(m.setTranslate,a+l*this._hbarTranslateMax,r)}if(this.vbar){var o=r/f;this.vbar.call(m.setTranslate,a,r+o*this._vbarTranslateMax)}}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(e,I,B){I.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(e,I,B){I.exports={axisRefDescription:function(u,s,m){return["If set to a",u,"axis id (e.g. *"+u+"* or","*"+u+"2*), the `"+u+"` position refers to a",u,"coordinate. If set to *paper*, the `"+u+"`","position refers to the distance from the",s,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",s,"("+m+"). If set to a",u,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",s,"of the domain of that axis: e.g.,","*"+u+"2 domain* refers to the domain of the second",u," axis and a",u,"position of 0.5 refers to the","point between the",s,"and the",m,"of the domain of the","second",u,"axis."].join(" ")}}},{}],473:[function(e,I,B){I.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],474:[function(e,I,B){I.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(e,I,B){I.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(e,I,B){I.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(e,I,B){I.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],478:[function(e,I,B){I.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(e,I,B){I.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(e,I,B){B.xmlns="http://www.w3.org/2000/xmlns/",B.svg="http://www.w3.org/2000/svg",B.xlink="http://www.w3.org/1999/xlink",B.svgAttrs={xmlns:B.svg,"xmlns:xlink":B.xlink}},{}],481:[function(e,I,B){B.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var u=e("./registry"),s=B.register=u.register,m=e("./plot_api"),x=Object.keys(m),t=0;t<x.length;t++){var i=x[t];i.charAt(0)!=="_"&&(B[i]=m[i]),s({moduleType:"apiMethod",name:i,fn:m[i]})}s(e("./traces/scatter")),s([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),s([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(s(window.PlotlyLocales),delete window.PlotlyLocales),B.Icons=e("./fonts/ploticon");var a=e("./components/fx"),r=e("./plots/plots");B.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},B.Fx={hover:a.hover,unhover:a.unhover,loneHover:a.loneHover,loneUnhover:a.loneUnhover},B.Snapshot=e("./snapshot"),B.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":938,"./version":1119,"native-promise-only":245}],482:[function(e,I,B){I.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(e,I,B){B.isLeftAnchor=function(s){return s.xanchor==="left"||s.xanchor==="auto"&&s.x<=1/3},B.isCenterAnchor=function(s){return s.xanchor==="center"||s.xanchor==="auto"&&s.x>1/3&&s.x<2/3},B.isRightAnchor=function(s){return s.xanchor==="right"||s.xanchor==="auto"&&s.x>=2/3},B.isTopAnchor=function(s){return s.yanchor==="top"||s.yanchor==="auto"&&s.y>=2/3},B.isMiddleAnchor=function(s){return s.yanchor==="middle"||s.yanchor==="auto"&&s.y>1/3&&s.y<2/3},B.isBottomAnchor=function(s){return s.yanchor==="bottom"||s.yanchor==="auto"&&s.y<=1/3}},{}],484:[function(e,I,B){var u=e("./mod"),s=u.mod,m=u.modHalf,x=Math.PI,t=2*x;function i(y){return y/180*x}function a(y){return y/x*180}function r(y){return Math.abs(y[1]-y[0])>t-1e-14}function n(y,g){return m(g-y,t)}function f(y,g){return Math.abs(n(y,g))}function l(y,g){if(r(g))return!0;var A,b;g[0]<g[1]?(A=g[0],b=g[1]):(A=g[1],b=g[0]),A=s(A,t),b=s(b,t),A>b&&(b+=t);var M=s(y,t),w=M+t;return M>=A&&M<=b||w>=A&&w<=b}function o(y,g,A,b){if(!l(g,b))return!1;var M,w;return A[0]<A[1]?(M=A[0],w=A[1]):(M=A[1],w=A[0]),y>=M&&y<=w}function c(y,g,A,b,M,w,T){M=M||0,w=w||0;var _=r([A,b]),h,L,S,k,P;_?(h=0,L=x,S=t):A<b?(h=A,S=b):(h=b,S=A),y<g?(k=y,P=g):(k=g,P=y);function O(U,N){return[U*Math.cos(N)+M,w-U*Math.sin(N)]}var F=Math.abs(S-h)<=x?0:1;function D(U,N,X){return"A"+[U,U]+" "+[0,F,X]+" "+O(U,N)}var R;return _?k===null?R="M"+O(P,h)+D(P,L,0)+D(P,S,0)+"Z":R="M"+O(k,h)+D(k,L,0)+D(k,S,0)+"ZM"+O(P,h)+D(P,L,1)+D(P,S,1)+"Z":k===null?(R="M"+O(P,h)+D(P,S,0),T&&(R+="L0,0Z")):R="M"+O(k,h)+"L"+O(P,h)+D(P,S,0)+"L"+O(k,S)+D(k,h,1)+"Z",R}function v(y,g,A,b,M){return c(null,y,g,A,b,M,0)}function d(y,g,A,b,M){return c(null,y,g,A,b,M,1)}function p(y,g,A,b,M,w){return c(y,g,A,b,M,w,1)}I.exports={deg2rad:i,rad2deg:a,angleDelta:n,angleDist:f,isFullCircle:r,isAngleInsideSector:l,isPtInsideSector:o,pathArc:v,pathSector:d,pathAnnulus:p}},{"./mod":510}],485:[function(e,I,B){var u=Array.isArray,s=ArrayBuffer,m=DataView;function x(r){return s.isView(r)&&!(r instanceof m)}B.isTypedArray=x;function t(r){return u(r)||x(r)}B.isArrayOrTypedArray=t;function i(r){return!t(r[0])}B.isArray1D=i,B.ensureArray=function(r,n){return u(r)||(r=[]),r.length=n,r},B.concat=function(){var r=[],n=!0,f=0,l,o,c,v,d,p,y,g;for(c=0;c<arguments.length;c++)v=arguments[c],p=v.length,p&&(o?r.push(v):(o=v,d=p),u(v)?l=!1:(n=!1,f?l!==v.constructor&&(l=!1):l=v.constructor),f+=p);if(!f)return[];if(!r.length)return o;if(n)return o.concat.apply(o,r);if(l){for(y=new l(f),y.set(o),c=0;c<r.length;c++)v=r[c],y.set(v,d),d+=v.length;return y}for(y=new Array(f),g=0;g<o.length;g++)y[g]=o[g];for(c=0;c<r.length;c++){for(v=r[c],g=0;g<v.length;g++)y[d+g]=v[g];d+=g}return y},B.maxRowLength=function(r){return a(r,Math.max,0)},B.minRowLength=function(r){return a(r,Math.min,1/0)};function a(r,n,f){if(t(r))if(t(r[0])){for(var l=f,o=0;o<r.length;o++)l=n(l,r[o].length);return l}else return r.length;return 0}},{}],486:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../constants/numerical").BADNUM,m=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;I.exports=function(t){return typeof t=="string"&&(t=t.replace(m,"")),u(t)?Number(t):s}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(e,I,B){I.exports=function(s){var m=s._fullLayout;m._glcanvas&&m._glcanvas.size()&&m._glcanvas.each(function(x){x.regl&&x.regl.clear({color:!0,depth:!0})})}},{}],488:[function(e,I,B){I.exports=function(s){s._responsiveChartHandler&&(window.removeEventListener("resize",s._responsiveChartHandler),delete s._responsiveChartHandler)}},{}],489:[function(e,I,B){var u=e("fast-isnumeric"),s=e("tinycolor2"),m=e("../plots/attributes"),x=e("../components/colorscale/scales"),t=e("../components/color"),i=e("../constants/interactions").DESELECTDIM,a=e("./nested_property"),r=e("./regex").counter,n=e("./mod").modHalf,f=e("./array").isArrayOrTypedArray;B.valObjectMeta={data_array:{coerceFunction:function(o,c,v){f(o)?c.set(o):v!==void 0&&c.set(v)}},enumerated:{coerceFunction:function(o,c,v,d){d.coerceNumber&&(o=+o),d.values.indexOf(o)===-1?c.set(v):c.set(o)},validateFunction:function(o,c){c.coerceNumber&&(o=+o);for(var v=c.values,d=0;d<v.length;d++){var p=String(v[d]);if(p.charAt(0)==="/"&&p.charAt(p.length-1)==="/"){var y=new RegExp(p.substr(1,p.length-2));if(y.test(o))return!0}else if(o===v[d])return!0}return!1}},boolean:{coerceFunction:function(o,c,v){o===!0||o===!1?c.set(o):c.set(v)}},number:{coerceFunction:function(o,c,v,d){!u(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?c.set(v):c.set(+o)}},integer:{coerceFunction:function(o,c,v,d){o%1||!u(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?c.set(v):c.set(+o)}},string:{coerceFunction:function(o,c,v,d){if(typeof o!="string"){var p=typeof o=="number";d.strict===!0||!p?c.set(v):c.set(String(o))}else d.noBlank&&!o?c.set(v):c.set(o)}},color:{coerceFunction:function(o,c,v){s(o).isValid()?c.set(o):c.set(v)}},colorlist:{coerceFunction:function(o,c,v){function d(p){return s(p).isValid()}!Array.isArray(o)||!o.length?c.set(v):o.every(d)?c.set(o):c.set(v)}},colorscale:{coerceFunction:function(o,c,v){c.set(x.get(o,v))}},angle:{coerceFunction:function(o,c,v){o==="auto"?c.set("auto"):u(o)?c.set(n(+o,360)):c.set(v)}},subplotid:{coerceFunction:function(o,c,v,d){var p=d.regex||r(v);if(typeof o=="string"&&p.test(o)){c.set(o);return}c.set(v)},validateFunction:function(o,c){var v=c.dflt;return o===v?!0:typeof o!="string"?!1:!!r(v).test(o)}},flaglist:{coerceFunction:function(o,c,v,d){if(typeof o!="string"){c.set(v);return}if((d.extras||[]).indexOf(o)!==-1){c.set(o);return}for(var p=o.split("+"),y=0;y<p.length;){var g=p[y];d.flags.indexOf(g)===-1||p.indexOf(g)<y?p.splice(y,1):y++}p.length?c.set(p.join("+")):c.set(v)}},any:{coerceFunction:function(o,c,v){o===void 0?c.set(v):c.set(o)}},info_array:{coerceFunction:function(o,c,v,d){function p(O,F,D){var R,U={set:function(N){R=N}};return D===void 0&&(D=F.dflt),B.valObjectMeta[F.valType].coerceFunction(O,U,D,F),R}var y=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(!Array.isArray(o)){c.set(v);return}var g=d.items,A=[],b=Array.isArray(g),M=b&&y&&Array.isArray(g[0]),w=y&&b&&!M,T=b&&!w?g.length:o.length,_,h,L,S,k,P;if(v=Array.isArray(v)?v:[],y)for(_=0;_<T;_++)for(A[_]=[],L=Array.isArray(o[_])?o[_]:[],w?k=g.length:b?k=g[_].length:k=L.length,h=0;h<k;h++)w?S=g[h]:b?S=g[_][h]:S=g,P=p(L[h],S,(v[_]||[])[h]),P!==void 0&&(A[_][h]=P);else for(_=0;_<T;_++)P=p(o[_],b?g[_]:g,v[_]),P!==void 0&&(A[_]=P);c.set(A)},validateFunction:function(o,c){if(!Array.isArray(o))return!1;var v=c.items,d=Array.isArray(v),p=c.dimensions===2;if(!c.freeLength&&o.length!==v.length)return!1;for(var y=0;y<o.length;y++)if(p){if(!Array.isArray(o[y])||!c.freeLength&&o[y].length!==v[y].length)return!1;for(var g=0;g<o[y].length;g++)if(!l(o[y][g],d?v[y][g]:v))return!1}else if(!l(o[y],d?v[y]:v))return!1;return!0}}},B.coerce=function(o,c,v,d,p){var y=a(v,d).get(),g=a(o,d),A=a(c,d),b=g.get(),M=c._template;if(b===void 0&&M&&(b=a(M,d).get(),M=0),p===void 0&&(p=y.dflt),y.arrayOk&&f(b))return A.set(b),b;var w=B.valObjectMeta[y.valType].coerceFunction;w(b,A,p,y);var T=A.get();return M&&T===p&&!l(b,y)&&(b=a(M,d).get(),w(b,A,p,y),T=A.get()),T},B.coerce2=function(o,c,v,d,p){var y=a(o,d),g=B.coerce(o,c,v,d,p),A=y.get();return A!=null?g:!1},B.coerceFont=function(o,c,v){var d={};return v=v||{},d.family=o(c+".family",v.family),d.size=o(c+".size",v.size),d.color=o(c+".color",v.color),d},B.coercePattern=function(o,c,v,d){var p=o(c+".shape");if(p){o(c+".solidity"),o(c+".size");var y=o(c+".fillmode"),g=y==="overlay";if(!d){var A=o(c+".bgcolor",g?v:void 0);o(c+".fgcolor",g?t.contrast(A):v)}o(c+".fgopacity",g?.5:1)}},B.coerceHoverinfo=function(o,c,v){var d=c._module.attributes,p=d.hoverinfo?d:m,y=p.hoverinfo,g;if(v._dataLength===1){var A=y.dflt==="all"?y.flags.slice():y.dflt.split("+");A.splice(A.indexOf("name"),1),g=A.join("+")}return B.coerce(o,c,p,"hoverinfo",g)},B.coerceSelectionMarkerOpacity=function(o,c){if(!!o.marker){var v=o.marker.opacity;if(v!==void 0){var d,p;!f(v)&&!o.selected&&!o.unselected&&(d=v,p=i*v),c("selected.marker.opacity",d),c("unselected.marker.opacity",p)}}};function l(o,c){var v=B.valObjectMeta[c.valType];if(c.arrayOk&&f(o))return!0;if(v.validateFunction)return v.validateFunction(o,c);var d={},p=d,y={set:function(g){p=g}};return v.coerceFunction(o,y,d,c),p!==d}B.validate=l},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(e,I,B){var u=e("d3-time-format").timeFormat,s=e("fast-isnumeric"),m=e("./loggers"),x=e("./mod").mod,t=e("../constants/numerical"),i=t.BADNUM,a=t.ONEDAY,r=t.ONEHOUR,n=t.ONEMIN,f=t.ONESEC,l=t.EPOCHJD,o=e("../registry"),c=e("d3-time-format").utcFormat,v=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=new Date().getFullYear()-70;function y(R){return R&&o.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}B.dateTick0=function(R,U){var N=g(R,!!U);if(U<2)return N;var X=B.dateTime2ms(N,R);return X+=a*(U-1),B.ms2DateTime(X,0,R)};function g(R,U){return y(R)?U?o.getComponentMethod("calendars","CANONICAL_SUNDAY")[R]:o.getComponentMethod("calendars","CANONICAL_TICK")[R]:U?"2000-01-02":"2000-01-01"}B.dfltRange=function(R){return y(R)?o.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},B.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"};var A,b;B.dateTime2ms=function(R,U){if(B.isJSDate(R)){var N=R.getTimezoneOffset()*n,X=(R.getUTCMinutes()-R.getMinutes())*n+(R.getUTCSeconds()-R.getSeconds())*f+(R.getUTCMilliseconds()-R.getMilliseconds());if(X){var j=3*n;N=N-j/2+x(X-N+j/2,j)}return R=Number(R)-N,R>=A&&R<=b?R:i}if(typeof R!="string"&&typeof R!="number")return i;R=String(R);var ee=y(U),q=R.charAt(0);ee&&(q==="G"||q==="g")&&(R=R.substr(1),U="");var G=ee&&U.substr(0,7)==="chinese",J=R.match(G?d:v);if(!J)return i;var le=J[1],fe=J[3]||"1",se=Number(J[5]||1),V=Number(J[7]||0),Y=Number(J[9]||0),ne=Number(J[11]||0);if(ee){if(le.length===2)return i;le=Number(le);var te;try{var K=o.getComponentMethod("calendars","getCal")(U);if(G){var $=fe.charAt(fe.length-1)==="i";fe=parseInt(fe,10),te=K.newDate(le,K.toMonthIndex(le,fe,$),se)}else te=K.newDate(le,Number(fe),se)}catch{return i}return te?(te.toJD()-l)*a+V*r+Y*n+ne*f:i}le.length===2?le=(Number(le)+2e3-p)%100+p:le=Number(le),fe-=1;var ae=new Date(Date.UTC(2e3,fe,se,V,Y));return ae.setUTCFullYear(le),ae.getUTCMonth()!==fe||ae.getUTCDate()!==se?i:ae.getTime()+ne*f},A=B.MIN_MS=B.dateTime2ms("-9999"),b=B.MAX_MS=B.dateTime2ms("9999-12-31 23:59:59.9999"),B.isDateTime=function(R,U){return B.dateTime2ms(R,U)!==i};function M(R,U){return String(R+Math.pow(10,U)).substr(1)}var w=90*a,T=3*r,_=5*n;B.ms2DateTime=function(R,U,N){if(typeof R!="number"||!(R>=A&&R<=b))return i;U||(U=0);var X=Math.floor(x(R+.05,1)*10),j=Math.round(R-X/10),ee,q,G,J,le,fe;if(y(N)){var se=Math.floor(j/a)+l,V=Math.floor(x(R,a));try{ee=o.getComponentMethod("calendars","getCal")(N).fromJD(se).formatDate("yyyy-mm-dd")}catch{ee=c("G%Y-%m-%d")(new Date(j))}if(ee.charAt(0)==="-")for(;ee.length<11;)ee="-0"+ee.substr(1);else for(;ee.length<10;)ee="0"+ee;q=U<w?Math.floor(V/r):0,G=U<w?Math.floor(V%r/n):0,J=U<T?Math.floor(V%n/f):0,le=U<_?V%f*10+X:0}else fe=new Date(j),ee=c("%Y-%m-%d")(fe),q=U<w?fe.getUTCHours():0,G=U<w?fe.getUTCMinutes():0,J=U<T?fe.getUTCSeconds():0,le=U<_?fe.getUTCMilliseconds()*10+X:0;return h(ee,q,G,J,le)},B.ms2DateTimeLocal=function(R){if(!(R>=A+a&&R<=b-a))return i;var U=Math.floor(x(R+.05,1)*10),N=new Date(Math.round(R-U/10)),X=u("%Y-%m-%d")(N),j=N.getHours(),ee=N.getMinutes(),q=N.getSeconds(),G=N.getUTCMilliseconds()*10+U;return h(X,j,ee,q,G)};function h(R,U,N,X,j){if((U||N||X||j)&&(R+=" "+M(U,2)+":"+M(N,2),(X||j)&&(R+=":"+M(X,2),j))){for(var ee=4;j%10==0;)ee-=1,j/=10;R+="."+M(j,ee)}return R}B.cleanDate=function(R,U,N){if(R===i)return U;if(B.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(y(N))return m.error("JS Dates and milliseconds are incompatible with world calendars",R),U;if(R=B.ms2DateTimeLocal(+R),!R&&U!==void 0)return U}else if(!B.isDateTime(R,N))return m.error("unrecognized date",R),U;return R};var L=/%\d?f/g,S=/%h/g,k={"1":"1","2":"1","3":"2","4":"2"};function P(R,U,N,X){R=R.replace(L,function(ee){var q=Math.min(+ee.charAt(1)||6,6),G=(U/1e3%1+2).toFixed(q).substr(2).replace(/0+$/,"")||"0";return G});var j=new Date(Math.floor(U+.05));if(R=R.replace(S,function(){return k[N("%q")(j)]}),y(X))try{R=o.getComponentMethod("calendars","worldCalFmt")(R,U,X)}catch{return"Invalid"}return N(R)(j)}var O=[59,59.9,59.99,59.999,59.9999];function F(R,U){var N=x(R+.05,a),X=M(Math.floor(N/r),2)+":"+M(x(Math.floor(N/n),60),2);if(U!=="M"){s(U)||(U=0);var j=Math.min(x(R/f,60),O[U]),ee=(100+j).toFixed(U).substr(1);U>0&&(ee=ee.replace(/0+$/,"").replace(/[\.]$/,"")),X+=":"+ee}return X}B.formatDate=function(R,U,N,X,j,ee){if(j=y(j)&&j,!U)if(N==="y")U=ee.year;else if(N==="m")U=ee.month;else if(N==="d")U=ee.dayMonth+`
`+ee.year;else return F(R,N)+`
`+P(ee.dayMonthYear,R,X,j);return P(U,R,X,j)};var D=3*a;B.incrementMonth=function(R,U,N){N=y(N)&&N;var X=x(R,a);if(R=Math.round(R-X),N)try{var j=Math.round(R/a)+l,ee=o.getComponentMethod("calendars","getCal")(N),q=ee.fromJD(j);return U%12?ee.add(q,U,"m"):ee.add(q,U/12,"y"),(q.toJD()-l)*a+X}catch{m.error("invalid ms "+R+" in calendar "+N)}var G=new Date(R+D);return G.setUTCMonth(G.getUTCMonth()+U)+X-D},B.findExactDates=function(R,U){for(var N=0,X=0,j=0,ee=0,q,G,J=y(U)&&o.getComponentMethod("calendars","getCal")(U),le=0;le<R.length;le++){if(G=R[le],!s(G)){ee++;continue}if(!(G%a))if(J)try{q=J.fromJD(G/a+l),q.day()===1?q.month()===1?N++:X++:j++}catch{}else q=new Date(G),q.getUTCDate()===1?q.getUTCMonth()===0?N++:X++:j++}X+=N,j+=X;var fe=R.length-ee;return{exactYears:N/fe,exactMonths:X/fe,exactDays:j/fe}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(e,I,B){var u=e("@plotly/d3"),s=e("./loggers"),m=e("./matrix"),x=e("gl-mat4");function t(p){var y;if(typeof p=="string"){if(y=document.getElementById(p),y===null)throw new Error("No DOM element with id '"+p+"' exists on the page.");return y}else if(p==null)throw new Error("DOM element provided is null or undefined");return p}function i(p){var y=u.select(p);return y.node()instanceof HTMLElement&&y.size()&&y.classed("js-plotly-plot")}function a(p){var y=p&&p.parentNode;y&&y.removeChild(p)}function r(p,y){n("global",p,y)}function n(p,y,g){var A="plotly.js-style-"+p,b=document.getElementById(A);b||(b=document.createElement("style"),b.setAttribute("id",A),b.appendChild(document.createTextNode("")),document.head.appendChild(b));var M=b.sheet;M.insertRule?M.insertRule(y+"{"+g+"}",0):M.addRule?M.addRule(y,g,0):s.warn("addStyleRule failed")}function f(p){var y="plotly.js-style-"+p,g=document.getElementById(y);g&&a(g)}function l(p){var y=c(p),g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return y.forEach(function(A){var b=o(A);if(b){var M=m.convertCssMatrix(b);g=x.multiply(g,g,M)}}),g}function o(p){var y=window.getComputedStyle(p,null),g=y.getPropertyValue("-webkit-transform")||y.getPropertyValue("-moz-transform")||y.getPropertyValue("-ms-transform")||y.getPropertyValue("-o-transform")||y.getPropertyValue("transform");return g==="none"?null:g.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(A){return+A})}function c(p){for(var y=[];v(p);)y.push(p),p=p.parentNode;return y}function v(p){return p&&(p instanceof Element||p instanceof HTMLElement)}function d(p,y){return p&&y&&p.x===y.x&&p.y===y.y&&p.top===y.top&&p.left===y.left&&p.right===y.right&&p.bottom===y.bottom}I.exports={getGraphDiv:t,isPlotDiv:i,removeElement:a,addStyleRule:r,addRelatedStyleRule:n,deleteRelatedStyleRule:f,getFullTransformMatrix:l,getElementTransformMatrix:o,getElementAndAncestors:c,equalDomRects:d}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(e,I,B){var u=e("events").EventEmitter,s={init:function(m){if(m._ev instanceof u)return m;var x=new u,t=new u;return m._ev=x,m._internalEv=t,m.on=x.on.bind(x),m.once=x.once.bind(x),m.removeListener=x.removeListener.bind(x),m.removeAllListeners=x.removeAllListeners.bind(x),m._internalOn=t.on.bind(t),m._internalOnce=t.once.bind(t),m._removeInternalListener=t.removeListener.bind(t),m._removeAllInternalListeners=t.removeAllListeners.bind(t),m.emit=function(i,a){typeof jQuery!="undefined"&&jQuery(m).trigger(i,a),x.emit(i,a),t.emit(i,a)},m},triggerHandler:function(m,x,t){var i,a;typeof jQuery!="undefined"&&(i=jQuery(m).triggerHandler(x,t));var r=m._ev;if(!r)return i;var n=r._events[x];if(!n)return i;function f(o){if(o.listener){if(r.removeListener(x,o.listener),!o.fired)return o.fired=!0,o.listener.apply(r,[t])}else return o.apply(r,[t])}n=Array.isArray(n)?n:[n];var l;for(l=0;l<n.length-1;l++)f(n[l]);return a=f(n[l]),i!==void 0?i:a},purge:function(m){return delete m._ev,delete m.on,delete m.once,delete m.removeListener,delete m.removeAllListeners,delete m.emit,delete m._ev,delete m._internalEv,delete m._internalOn,delete m._internalOnce,delete m._removeInternalListener,delete m._removeAllInternalListeners,m}};I.exports=s},{events:84}],493:[function(e,I,B){var u=e("./is_plain_object.js"),s=Array.isArray;function m(t,i){var a,r;for(a=0;a<t.length;a++){if(r=t[a],r!==null&&typeof r=="object")return!1;r!==void 0&&(i[a]=r)}return!0}B.extendFlat=function(){return x(arguments,!1,!1,!1)},B.extendDeep=function(){return x(arguments,!0,!1,!1)},B.extendDeepAll=function(){return x(arguments,!0,!0,!1)},B.extendDeepNoArrays=function(){return x(arguments,!0,!1,!0)};function x(t,i,a,r){var n=t[0],f=t.length,l,o,c,v,d,p,y;if(f===2&&s(n)&&s(t[1])&&n.length===0){if(y=m(t[1],n),y)return n;n.splice(0,n.length)}for(var g=1;g<f;g++){l=t[g];for(o in l)c=n[o],v=l[o],r&&s(v)?n[o]=v:i&&v&&(u(v)||(d=s(v)))?(d?(d=!1,p=c&&s(c)?c:[]):p=c&&u(c)?c:{},n[o]=x([p,v],i,a,r)):(typeof v!="undefined"||a)&&(n[o]=v)}return n}},{"./is_plain_object.js":504}],494:[function(e,I,B){I.exports=function(s){for(var m={},x=[],t=0,i=0;i<s.length;i++){var a=s[i];m[a]!==1&&(m[a]=1,x[t++]=a)}return x}},{}],495:[function(e,I,B){I.exports=function(t){for(var i=m(t)?s:u,a=[],r=0;r<t.length;r++){var n=t[r];i(n)&&a.push(n)}return a};function u(x){return x.visible===!0}function s(x){var t=x[0].trace;return t.visible===!0&&t._length!==0}function m(x){return Array.isArray(x)&&Array.isArray(x[0])&&x[0][0]&&x[0][0].trace}},{}],496:[function(e,I,B){var u=e("@plotly/d3"),s=e("country-regex"),m=e("@turf/area"),x=e("@turf/centroid"),t=e("@turf/bbox"),i=e("./identity"),a=e("./loggers"),r=e("./is_plain_object"),n=e("./nested_property"),f=e("./polygon"),l=Object.keys(s),o={"ISO-3":i,"USA-states":i,"country names":c};function c(M){for(var w=0;w<l.length;w++){var T=l[w],_=new RegExp(s[T]);if(_.test(M.trim().toLowerCase()))return T}return a.log("Unrecognized country name: "+M+"."),!1}function v(M,w,T){if(!w||typeof w!="string")return!1;var _=o[M](w),h,L,S;if(_){if(M==="USA-states")for(h=[],S=0;S<T.length;S++)L=T[S],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&h.push(L);else h=T;for(S=0;S<h.length;S++)if(L=h[S],L.id===_)return L;a.log(["Location with id",_,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function d(M){var w=M.geometry,T=w.coordinates,_=M.id,h=[],L,S,k,P;function O(F){for(var D=0;D<F.length-1;D++)if(F[D][0]>0&&F[D+1][0]<0)return D;return null}switch(_==="RUS"||_==="FJI"?L=function(F){var D;if(O(F)===null)D=F;else for(D=new Array(F.length),P=0;P<F.length;P++)D[P]=[F[P][0]<0?F[P][0]+360:F[P][0],F[P][1]];h.push(f.tester(D))}:_==="ATA"?L=function(F){var D=O(F);if(D===null)return h.push(f.tester(F));var R=new Array(F.length+1),U=0;for(P=0;P<F.length;P++)P>D?R[U++]=[F[P][0]+360,F[P][1]]:P===D?(R[U++]=F[P],R[U++]=[F[P][0],-90]):R[U++]=F[P];var N=f.tester(R);N.pts.pop(),h.push(N)}:L=function(F){h.push(f.tester(F))},w.type){case"MultiPolygon":for(S=0;S<T.length;S++)for(k=0;k<T[S].length;k++)L(T[S][k]);break;case"Polygon":for(S=0;S<T.length;S++)L(T[S]);break}return h}function p(M){var w=M.geojson,T=window.PlotlyGeoAssets||{},_=typeof w=="string"?T[w]:w;return r(_)?_:(a.error("Oops ... something went wrong when fetching "+w),!1)}function y(M){var w=M[0].trace,T=p(w);if(!T)return!1;var _={},h=[],L;for(L=0;L<w._length;L++){var S=M[L];(S.loc||S.loc===0)&&(_[S.loc]=S)}function k(F){var D=n(F,w.featureidkey||"id").get(),R=_[D];if(R){var U=F.geometry;if(U.type==="Polygon"||U.type==="MultiPolygon"){var N={type:"Feature",id:D,geometry:U,properties:{}};N.properties.ct=g(N),R.fIn=F,R.fOut=N,h.push(N)}else a.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete _[D]}switch(T.type){case"FeatureCollection":var P=T.features;for(L=0;L<P.length;L++)k(P[L]);break;case"Feature":k(T);break;default:return a.warn(["Invalid GeoJSON type",(T.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var O in _)a.log(["Location *"+O+"*","does not have a matching feature with id-key","*"+w.featureidkey+"*."].join(" "));return h}function g(M){var w=M.geometry,T;if(w.type==="MultiPolygon")for(var _=w.coordinates,h=0,L=0;L<_.length;L++){var S={type:"Polygon",coordinates:_[L]},k=m.default(S);k>h&&(h=k,T=S)}else T=w;return x.default(T).geometry.coordinates}function A(M){var w=window.PlotlyGeoAssets||{},T=[];function _(P){return new Promise(function(O,F){u.json(P,function(D,R){if(D){delete w[P];var U=D.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return F(new Error(U))}return w[P]=R,O(R)})})}function h(P){return new Promise(function(O,F){var D=0,R=setInterval(function(){if(w[P]&&w[P]!=="pending")return clearInterval(R),O(w[P]);if(D>100)return clearInterval(R),F("Unexpected error while fetching from "+P);D++},50)})}for(var L=0;L<M.length;L++){var S=M[L][0].trace,k=S.geojson;typeof k=="string"&&(w[k]?w[k]==="pending"&&T.push(h(k)):(w[k]="pending",T.push(_(k))))}return T}function b(M){return t.default(M)}I.exports={locationToFeature:v,feature2polygons:d,getTraceGeojson:p,extractTraceFeature:y,fetchTraceGeoData:A,computeBbox:b}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(e,I,B){var u=e("../constants/numerical").BADNUM;B.calcTraceToLineCoords=function(s){for(var m=s[0].trace,x=m.connectgaps,t=[],i=[],a=0;a<s.length;a++){var r=s[a],n=r.lonlat;n[0]!==u?i.push(n):!x&&i.length>0&&(t.push(i),i=[])}return i.length>0&&t.push(i),t},B.makeLine=function(s){return s.length===1?{type:"LineString",coordinates:s[0]}:{type:"MultiLineString",coordinates:s}},B.makePolygon=function(s){if(s.length===1)return{type:"Polygon",coordinates:s};for(var m=new Array(s.length),x=0;x<s.length;x++)m[x]=[s[x]];return{type:"MultiPolygon",coordinates:m}},B.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(e,I,B){var u=e("./mod").mod;B.segmentsIntersect=s;function s(a,r,n,f,l,o,c,v){var d=n-a,p=l-a,y=c-l,g=f-r,A=o-r,b=v-o,M=d*b-y*g;if(M===0)return null;var w=(p*b-y*A)/M,T=(p*g-d*A)/M;return T<0||T>1||w<0||w>1?null:{x:a+d*w,y:r+g*w}}B.segmentDistance=function(r,n,f,l,o,c,v,d){if(s(r,n,f,l,o,c,v,d))return 0;var p=f-r,y=l-n,g=v-o,A=d-c,b=p*p+y*y,M=g*g+A*A,w=Math.min(m(p,y,b,o-r,c-n),m(p,y,b,v-r,d-n),m(g,A,M,r-o,n-c),m(g,A,M,f-o,l-c));return Math.sqrt(w)};function m(a,r,n,f,l){var o=f*a+l*r;if(o<0)return f*f+l*l;if(o>n){var c=f-a,v=l-r;return c*c+v*v}else{var d=f*r-l*a;return d*d/n}}var x,t,i;B.getTextLocation=function(r,n,f,l){if((r!==t||l!==i)&&(x={},t=r,i=l),x[f])return x[f];var o=r.getPointAtLength(u(f-l/2,n)),c=r.getPointAtLength(u(f+l/2,n)),v=Math.atan((c.y-o.y)/(c.x-o.x)),d=r.getPointAtLength(u(f,n)),p=(d.x*4+o.x+c.x)/6,y=(d.y*4+o.y+c.y)/6,g={x:p,y,theta:v};return x[f]=g,g},B.clearLocationCache=function(){t=null},B.getVisibleSegment=function(r,n,f){var l=n.left,o=n.right,c=n.top,v=n.bottom,d=0,p=r.getTotalLength(),y=p,g,A;function b(w){var T=r.getPointAtLength(w);w===0?g=T:w===p&&(A=T);var _=T.x<l?l-T.x:T.x>o?T.x-o:0,h=T.y<c?c-T.y:T.y>v?T.y-v:0;return Math.sqrt(_*_+h*h)}for(var M=b(d);M;){if(d+=M+f,d>y)return;M=b(d)}for(M=b(y);M;){if(y-=M+f,d>y)return;M=b(y)}return{min:d,max:y,len:y-d,total:p,isClosed:d===0&&y===p&&Math.abs(g.x-A.x)<.1&&Math.abs(g.y-A.y)<.1}},B.findPointOnPath=function(r,n,f,l){l=l||{};for(var o=l.pathLength||r.getTotalLength(),c=l.tolerance||.001,v=l.iterationLimit||30,d=r.getPointAtLength(0)[f]>r.getPointAtLength(o)[f]?-1:1,p=0,y=0,g=o,A,b,M;p<v;){if(A=(y+g)/2,b=r.getPointAtLength(A),M=b[f]-n,Math.abs(M)<c)return b;d*M>0?g=A:y=A,p++}return b}},{"./mod":510}],499:[function(e,I,B){var u=e("fast-isnumeric"),s=e("tinycolor2"),m=e("color-normalize"),x=e("../components/colorscale"),t=e("../components/color/attributes").defaultLine,i=e("./array").isArrayOrTypedArray,a=m(t),r=1;function n(v,d){var p=v;return p[3]*=d,p}function f(v){if(u(v))return a;var d=m(v);return d.length?d:a}function l(v){return u(v)?v:r}function o(v,d,p){var y=v.color,g=i(y),A=i(d),b=x.extractOpts(v),M=[],w,T,_,h,L;if(b.colorscale!==void 0?w=x.makeColorScaleFuncFromTrace(v):w=f,g?T=function(k,P){return k[P]===void 0?a:m(w(k[P]))}:T=f,A?_=function(k,P){return k[P]===void 0?r:l(k[P])}:_=l,g||A)for(var S=0;S<p;S++)h=T(y,S),L=_(d,S),M[S]=n(h,L);else M=n(m(y),d);return M}function c(v){var d=x.extractOpts(v),p=d.colorscale;return d.reversescale&&(p=x.flipScale(d.colorscale)),p.map(function(y){var g=y[0],A=s(y[1]),b=A.toRgb();return{index:g,rgb:[b.r,b.g,b.b,b.a]}})}I.exports={formatColor:o,parseColorScale:c}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(e,I,B){var u=e("./identity");function s(m){return[m]}I.exports={keyFun:function(m){return m.key},repeat:s,descend:u,wrap:s,unwrap:function(m){return m[0]}}},{"./identity":501}],501:[function(e,I,B){I.exports=function(s){return s}},{}],502:[function(e,I,B){I.exports=function(s,m){if(!m)return s;var x=1/Math.abs(m),t=x>1?(x*s+x*m)/x:s+m,i=String(t).length;if(i>16){var a=String(m).length,r=String(s).length;if(i>=r+a){var n=parseFloat(t).toPrecision(12);n.indexOf("e+")===-1&&(t=+n)}}return t}},{}],503:[function(e,I,B){var u=e("@plotly/d3"),s=e("d3-time-format").utcFormat,m=e("d3-format").format,x=e("fast-isnumeric"),t=e("../constants/numerical"),i=t.FP_SAFE,a=-i,r=t.BADNUM,n=I.exports={};n.adjustFormat=function(fe){return!fe||/^\d[.]\df/.test(fe)||/[.]\d%/.test(fe)?fe:fe==="0.f"?"~f":/^\d%/.test(fe)?"~%":/^\ds/.test(fe)?"~s":!/^[~,.0$]/.test(fe)&&/[&fps]/.test(fe)?"~"+fe:fe};var f={};n.warnBadFormat=function(le){var fe=String(le);f[fe]||(f[fe]=1,n.warn('encountered bad format: "'+fe+'"'))},n.noFormat=function(le){return String(le)},n.numberFormat=function(le){var fe;try{fe=m(n.adjustFormat(le))}catch{return n.warnBadFormat(le),n.noFormat}return fe},n.nestedProperty=e("./nested_property"),n.keyedContainer=e("./keyed_container"),n.relativeAttr=e("./relative_attr"),n.isPlainObject=e("./is_plain_object"),n.toLogRange=e("./to_log_range"),n.relinkPrivateKeys=e("./relink_private");var l=e("./array");n.isTypedArray=l.isTypedArray,n.isArrayOrTypedArray=l.isArrayOrTypedArray,n.isArray1D=l.isArray1D,n.ensureArray=l.ensureArray,n.concat=l.concat,n.maxRowLength=l.maxRowLength,n.minRowLength=l.minRowLength;var o=e("./mod");n.mod=o.mod,n.modHalf=o.modHalf;var c=e("./coerce");n.valObjectMeta=c.valObjectMeta,n.coerce=c.coerce,n.coerce2=c.coerce2,n.coerceFont=c.coerceFont,n.coercePattern=c.coercePattern,n.coerceHoverinfo=c.coerceHoverinfo,n.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity,n.validate=c.validate;var v=e("./dates");n.dateTime2ms=v.dateTime2ms,n.isDateTime=v.isDateTime,n.ms2DateTime=v.ms2DateTime,n.ms2DateTimeLocal=v.ms2DateTimeLocal,n.cleanDate=v.cleanDate,n.isJSDate=v.isJSDate,n.formatDate=v.formatDate,n.incrementMonth=v.incrementMonth,n.dateTick0=v.dateTick0,n.dfltRange=v.dfltRange,n.findExactDates=v.findExactDates,n.MIN_MS=v.MIN_MS,n.MAX_MS=v.MAX_MS;var d=e("./search");n.findBin=d.findBin,n.sorterAsc=d.sorterAsc,n.sorterDes=d.sorterDes,n.distinctVals=d.distinctVals,n.roundUp=d.roundUp,n.sort=d.sort,n.findIndexOfMin=d.findIndexOfMin,n.sortObjectKeys=e("./sort_object_keys");var p=e("./stats");n.aggNums=p.aggNums,n.len=p.len,n.mean=p.mean,n.median=p.median,n.midRange=p.midRange,n.variance=p.variance,n.stdev=p.stdev,n.interp=p.interp;var y=e("./matrix");n.init2dArray=y.init2dArray,n.transposeRagged=y.transposeRagged,n.dot=y.dot,n.translationMatrix=y.translationMatrix,n.rotationMatrix=y.rotationMatrix,n.rotationXYMatrix=y.rotationXYMatrix,n.apply3DTransform=y.apply3DTransform,n.apply2DTransform=y.apply2DTransform,n.apply2DTransform2=y.apply2DTransform2,n.convertCssMatrix=y.convertCssMatrix,n.inverseTransformMatrix=y.inverseTransformMatrix;var g=e("./angles");n.deg2rad=g.deg2rad,n.rad2deg=g.rad2deg,n.angleDelta=g.angleDelta,n.angleDist=g.angleDist,n.isFullCircle=g.isFullCircle,n.isAngleInsideSector=g.isAngleInsideSector,n.isPtInsideSector=g.isPtInsideSector,n.pathArc=g.pathArc,n.pathSector=g.pathSector,n.pathAnnulus=g.pathAnnulus;var A=e("./anchor_utils");n.isLeftAnchor=A.isLeftAnchor,n.isCenterAnchor=A.isCenterAnchor,n.isRightAnchor=A.isRightAnchor,n.isTopAnchor=A.isTopAnchor,n.isMiddleAnchor=A.isMiddleAnchor,n.isBottomAnchor=A.isBottomAnchor;var b=e("./geometry2d");n.segmentsIntersect=b.segmentsIntersect,n.segmentDistance=b.segmentDistance,n.getTextLocation=b.getTextLocation,n.clearLocationCache=b.clearLocationCache,n.getVisibleSegment=b.getVisibleSegment,n.findPointOnPath=b.findPointOnPath;var M=e("./extend");n.extendFlat=M.extendFlat,n.extendDeep=M.extendDeep,n.extendDeepAll=M.extendDeepAll,n.extendDeepNoArrays=M.extendDeepNoArrays;var w=e("./loggers");n.log=w.log,n.warn=w.warn,n.error=w.error;var T=e("./regex");n.counterRegex=T.counter;var _=e("./throttle");n.throttle=_.throttle,n.throttleDone=_.done,n.clearThrottle=_.clear;var h=e("./dom");n.getGraphDiv=h.getGraphDiv,n.isPlotDiv=h.isPlotDiv,n.removeElement=h.removeElement,n.addStyleRule=h.addStyleRule,n.addRelatedStyleRule=h.addRelatedStyleRule,n.deleteRelatedStyleRule=h.deleteRelatedStyleRule,n.getFullTransformMatrix=h.getFullTransformMatrix,n.getElementTransformMatrix=h.getElementTransformMatrix,n.getElementAndAncestors=h.getElementAndAncestors,n.equalDomRects=h.equalDomRects,n.clearResponsive=e("./clear_responsive"),n.preserveDrawingBuffer=e("./preserve_drawing_buffer"),n.makeTraceGroups=e("./make_trace_groups"),n._=e("./localize"),n.notifier=e("./notifier"),n.filterUnique=e("./filter_unique"),n.filterVisible=e("./filter_visible"),n.pushUnique=e("./push_unique"),n.increment=e("./increment"),n.cleanNumber=e("./clean_number"),n.ensureNumber=function(fe){return x(fe)?(fe=Number(fe),fe>i||fe<a?r:fe):r},n.isIndex=function(le,fe){return fe!==void 0&&le>=fe?!1:x(le)&&le>=0&&le%1==0},n.noop=e("./noop"),n.identity=e("./identity"),n.repeat=function(le,fe){for(var se=new Array(fe),V=0;V<fe;V++)se[V]=le;return se},n.swapAttrs=function(le,fe,se,V){se||(se="x"),V||(V="y");for(var Y=0;Y<fe.length;Y++){var ne=fe[Y],te=n.nestedProperty(le,ne.replace("?",se)),K=n.nestedProperty(le,ne.replace("?",V)),$=te.get();te.set(K.get()),K.set($)}},n.raiseToTop=function(fe){fe.parentNode.appendChild(fe)},n.cancelTransition=function(le){return le.transition().duration(0)},n.constrain=function(le,fe,se){return fe>se?Math.max(se,Math.min(fe,le)):Math.max(fe,Math.min(se,le))},n.bBoxIntersect=function(le,fe,se){return se=se||0,le.left<=fe.right+se&&fe.left<=le.right+se&&le.top<=fe.bottom+se&&fe.top<=le.bottom+se},n.simpleMap=function(le,fe,se,V,Y){for(var ne=le.length,te=new Array(ne),K=0;K<ne;K++)te[K]=fe(le[K],se,V,Y);return te},n.randstr=function le(fe,se,V,Y){if(V||(V=16),se===void 0&&(se=24),se<=0)return"0";var ne=Math.log(Math.pow(2,se))/Math.log(V),te="",K,$,ae;for(K=2;ne===1/0;K*=2)ne=Math.log(Math.pow(2,se/K))/Math.log(V)*K;var ie=ne-Math.floor(ne);for(K=0;K<Math.floor(ne);K++)ae=Math.floor(Math.random()*V).toString(V),te=ae+te;ie&&($=Math.pow(V,ie),ae=Math.floor(Math.random()*$).toString(V),te=ae+te);var oe=parseInt(te,V);return fe&&fe[te]||oe!==1/0&&oe>=Math.pow(2,se)?Y>10?(n.warn("randstr failed uniqueness"),te):le(fe,se,V,(Y||0)+1):te},n.OptionControl=function(le,fe){le||(le={}),fe||(fe="opt");var se={};return se.optionList=[],se._newoption=function(V){V[fe]=le,se[V.name]=V,se.optionList.push(V)},se["_"+fe]=le,se},n.smooth=function(le,fe){if(fe=Math.round(fe)||0,fe<2)return le;var se=le.length,V=2*se,Y=2*fe-1,ne=new Array(Y),te=new Array(se),K,$,ae,ie;for(K=0;K<Y;K++)ne[K]=(1-Math.cos(Math.PI*(K+1)/fe))/(2*fe);for(K=0;K<se;K++){for(ie=0,$=0;$<Y;$++)ae=K+$+1-fe,ae<-se?ae-=V*Math.round(ae/V):ae>=V&&(ae-=V*Math.floor(ae/V)),ae<0?ae=-1-ae:ae>=se&&(ae=V-1-ae),ie+=le[ae]*ne[$];te[K]=ie}return te},n.syncOrAsync=function(le,fe,se){var V,Y;function ne(){return n.syncOrAsync(le,fe,se)}for(;le.length;)if(Y=le.splice(0,1)[0],V=Y(fe),V&&V.then)return V.then(ne);return se&&se(fe)},n.stripTrailingSlash=function(le){return le.substr(-1)==="/"?le.substr(0,le.length-1):le},n.noneOrAll=function(le,fe,se){if(!!le){var V=!1,Y=!0,ne,te;for(ne=0;ne<se.length;ne++)te=le[se[ne]],te!=null?V=!0:Y=!1;if(V&&!Y)for(ne=0;ne<se.length;ne++)le[se[ne]]=fe[se[ne]]}},n.mergeArray=function(le,fe,se,V){var Y=typeof V=="function";if(n.isArrayOrTypedArray(le))for(var ne=Math.min(le.length,fe.length),te=0;te<ne;te++){var K=le[te];fe[te][se]=Y?V(K):K}},n.mergeArrayCastPositive=function(le,fe,se){return n.mergeArray(le,fe,se,function(V){var Y=+V;return isFinite(Y)&&Y>0?Y:0})},n.fillArray=function(le,fe,se,V){if(V=V||n.identity,n.isArrayOrTypedArray(le))for(var Y=0;Y<fe.length;Y++)fe[Y][se]=V(le[Y])},n.castOption=function(le,fe,se,V){V=V||n.identity;var Y=n.nestedProperty(le,se).get();return n.isArrayOrTypedArray(Y)?Array.isArray(fe)&&n.isArrayOrTypedArray(Y[fe[0]])?V(Y[fe[0]][fe[1]]):V(Y[fe]):Y},n.extractOption=function(le,fe,se,V){if(se in le)return le[se];var Y=n.nestedProperty(fe,V).get();if(!Array.isArray(Y))return Y};function L(le){var fe={};for(var se in le)for(var V=le[se],Y=0;Y<V.length;Y++)fe[V[Y]]=+se;return fe}n.tagSelected=function(le,fe,se){var V=fe.selectedpoints,Y=fe._indexToPoints,ne;Y&&(ne=L(Y));function te(oe){return oe!==void 0&&oe<le.length}for(var K=0;K<V.length;K++){var $=V[K];if(n.isIndex($)||n.isArrayOrTypedArray($)&&n.isIndex($[0])&&n.isIndex($[1])){var ae=ne?ne[$]:$,ie=se?se[ae]:ae;te(ie)&&(le[ie].selected=1)}}},n.selIndices2selPoints=function(le){var fe=le.selectedpoints,se=le._indexToPoints;if(se){for(var V=L(se),Y=[],ne=0;ne<fe.length;ne++){var te=fe[ne];if(n.isIndex(te)){var K=V[te];n.isIndex(K)&&Y.push(K)}}return Y}else return fe},n.getTargetArray=function(le,fe){var se=fe.target;if(typeof se=="string"&&se){var V=n.nestedProperty(le,se).get();return Array.isArray(V)?V:!1}else if(Array.isArray(se))return se;return!1},n.minExtend=function(le,fe){var se={};typeof fe!="object"&&(fe={});var V=3,Y=Object.keys(le),ne,te,K;for(ne=0;ne<Y.length;ne++)te=Y[ne],K=le[te],!(te.charAt(0)==="_"||typeof K=="function")&&(te==="module"?se[te]=K:Array.isArray(K)?te==="colorscale"?se[te]=K.slice():se[te]=K.slice(0,V):n.isTypedArray(K)?se[te]=K.subarray(0,V):K&&typeof K=="object"?se[te]=n.minExtend(le[te],fe[te]):se[te]=K);for(Y=Object.keys(fe),ne=0;ne<Y.length;ne++)te=Y[ne],K=fe[te],(typeof K!="object"||!(te in se)||typeof se[te]!="object")&&(se[te]=K);return se},n.titleCase=function(le){return le.charAt(0).toUpperCase()+le.substr(1)},n.containsAny=function(le,fe){for(var se=0;se<fe.length;se++)if(le.indexOf(fe[se])!==-1)return!0;return!1},n.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var S=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return S.test(window.navigator.userAgent)};var k=/iPad|iPhone|iPod/;n.isIOS=function(){return k.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var le=P.exec(window.navigator.userAgent);if(le&&le.length===2){var fe=parseInt(le[1]);if(!isNaN(fe))return fe}return null},n.isD3Selection=function(le){return le instanceof u.selection},n.ensureSingle=function(le,fe,se,V){var Y=le.select(fe+(se?"."+se:""));if(Y.size())return Y;var ne=le.append(fe);return se&&ne.classed(se,!0),V&&ne.call(V),ne},n.ensureSingleById=function(le,fe,se,V){var Y=le.select(fe+"#"+se);if(Y.size())return Y;var ne=le.append(fe).attr("id",se);return V&&ne.call(V),ne},n.objectFromPath=function(le,fe){for(var se=le.split("."),V,Y=V={},ne=0;ne<se.length;ne++){var te=se[ne],K=null,$=se[ne].match(/(.*)\[([0-9]+)\]/);$?(te=$[1],K=$[2],V=V[te]=[],ne===se.length-1?V[K]=fe:V[K]={},V=V[K]):(ne===se.length-1?V[te]=fe:V[te]={},V=V[te])}return Y};var O=/^([^\[\.]+)\.(.+)?/,F=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(le){var fe,se,V,Y,ne,te,K;if(typeof le=="object"&&!Array.isArray(le))for(se in le)le.hasOwnProperty(se)&&((fe=se.match(O))?(Y=le[se],V=fe[1],delete le[se],le[V]=n.extendDeepNoArrays(le[V]||{},n.objectFromPath(se,n.expandObjectPaths(Y))[V])):(fe=se.match(F))?(Y=le[se],V=fe[1],ne=parseInt(fe[2]),delete le[se],le[V]=le[V]||[],fe[3]==="."?(K=fe[4],te=le[V][ne]=le[V][ne]||{},n.extendDeepNoArrays(te,n.objectFromPath(K,n.expandObjectPaths(Y)))):le[V][ne]=n.expandObjectPaths(Y)):le[se]=n.expandObjectPaths(le[se]));return le},n.numSeparate=function(le,fe,se){if(se||(se=!1),typeof fe!="string"||fe.length===0)throw new Error("Separator string required for formatting!");typeof le=="number"&&(le=String(le));var V=/(\d+)(\d{3})/,Y=fe.charAt(0),ne=fe.charAt(1),te=le.split("."),K=te[0],$=te.length>1?Y+te[1]:"";if(ne&&(te.length>1||K.length>4||se))for(;V.test(K);)K=K.replace(V,"$1"+ne+"$2");return K+$},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;n.templateString=function(le,fe){var se={};return le.replace(n.TEMPLATE_STRING_REGEX,function(V,Y){var ne;return D.test(Y)?ne=fe[Y]:(se[Y]=se[Y]||n.nestedProperty(fe,Y).get,ne=se[Y]()),n.isValidTextValue(ne)?ne:""})};var R={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return X.apply(R,arguments)};var U={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return X.apply(U,arguments)};var N=/^[:|\|]/;function X(le,fe,se){var V=this,Y=arguments;fe||(fe={});var ne={};return le.replace(n.TEMPLATE_STRING_REGEX,function(te,K,$){var ae=K==="xother"||K==="yother",ie=K==="_xother"||K==="_yother",oe=K==="_xother_"||K==="_yother_",ue=K==="xother_"||K==="yother_",xe=ae||ie||ue||oe,he=K;(ie||oe)&&(he=he.substring(1)),(ue||oe)&&(he=he.substring(0,he.length-1));var me;if(xe){if(me=fe[he],me===void 0)return""}else{var be,Ce;for(Ce=3;Ce<Y.length;Ce++)if(be=Y[Ce],!!be){if(be.hasOwnProperty(he)){me=be[he];break}if(D.test(he)||(me=n.nestedProperty(be,he).get(),me=ne[he]||n.nestedProperty(be,he).get(),me&&(ne[he]=me)),me!==void 0)break}}if(me===void 0&&V)return V.count<V.max&&(n.warn("Variable '"+he+"' in "+V.name+" could not be found!"),me=te),V.count===V.max&&n.warn("Too many "+V.name+" warnings - additional warnings will be suppressed"),V.count++,te;if($){var Se;if($[0]===":"&&(Se=se?se.numberFormat:n.numberFormat,me=Se($.replace(N,""))(me)),$[0]==="|"){Se=se?se.timeFormat:s;var Be=n.dateTime2ms(me);me=n.formatDate(Be,$.replace(N,""),!1,Se)}}else{var Ye=he+"Label";fe.hasOwnProperty(Ye)&&(me=fe[Ye])}return xe&&(me="("+me+")",(ie||oe)&&(me=" "+me),(ue||oe)&&(me=me+" ")),me})}var j=48,ee=57;n.subplotSort=function(le,fe){for(var se=Math.min(le.length,fe.length)+1,V=0,Y=0,ne=0;ne<se;ne++){var te=le.charCodeAt(ne)||0,K=fe.charCodeAt(ne)||0,$=te>=j&&te<=ee,ae=K>=j&&K<=ee;if($&&(V=10*V+te-j),ae&&(Y=10*Y+K-j),!$||!ae){if(V!==Y)return V-Y;if(te!==K)return te-K}}return Y-V};var q=2e9;n.seedPseudoRandom=function(){q=2e9},n.pseudoRandom=function(){var le=q;return q=(69069*q+1)%4294967296,Math.abs(q-le)<429496729?n.pseudoRandom():q/4294967296},n.fillText=function(le,fe,se){var V=Array.isArray(se)?function(te){se.push(te)}:function(te){se.text=te},Y=n.extractOption(le,fe,"htx","hovertext");if(n.isValidTextValue(Y))return V(Y);var ne=n.extractOption(le,fe,"tx","text");if(n.isValidTextValue(ne))return V(ne)},n.isValidTextValue=function(le){return le||le===0},n.formatPercent=function(le,fe){fe=fe||0;for(var se=(Math.round(100*le*Math.pow(10,fe))*Math.pow(.1,fe)).toFixed(fe)+"%",V=0;V<fe;V++)se.indexOf(".")!==-1&&(se=se.replace("0%","%"),se=se.replace(".%","%"));return se},n.isHidden=function(le){var fe=window.getComputedStyle(le).display;return!fe||fe==="none"},n.strTranslate=function(le,fe){return le||fe?"translate("+le+","+fe+")":""},n.strRotate=function(le){return le?"rotate("+le+")":""},n.strScale=function(le){return le!==1?"scale("+le+")":""},n.getTextTransform=function(le){var fe=le.noCenter,se=le.textX,V=le.textY,Y=le.targetX,ne=le.targetY,te=le.anchorX||0,K=le.anchorY||0,$=le.rotate,ae=le.scale;return ae?ae>1&&(ae=1):ae=0,n.strTranslate(Y-ae*(se+te),ne-ae*(V+K))+n.strScale(ae)+($?"rotate("+$+(fe?"":" "+se+" "+V)+")":"")},n.ensureUniformFontSize=function(le,fe){var se=n.extendFlat({},fe);return se.size=Math.max(fe.size,le._fullLayout.uniformtext.minsize||0),se},n.join2=function(le,fe,se){var V=le.length;return V>1?le.slice(0,-1).join(fe)+se+le[V-1]:le.join(fe)},n.bigFont=function(le){return Math.round(1.2*le)};var G=n.getFirefoxVersion(),J=G!==null&&G<86;n.getPositionFromD3Event=function(){return J?[u.event.layerX,u.event.layerY]:[u.event.offsetX,u.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(e,I,B){I.exports=function(s){return window&&window.process&&window.process.versions?Object.prototype.toString.call(s)==="[object Object]":Object.prototype.toString.call(s)==="[object Object]"&&Object.getPrototypeOf(s).hasOwnProperty("hasOwnProperty")}},{}],505:[function(e,I,B){var u=e("./nested_property"),s=/^\w*$/,m=0,x=1,t=2,i=3,a=4;I.exports=function(n,f,l,o){l=l||"name",o=o||"value";var c,v,d,p={};f&&f.length?(d=u(n,f),v=d.get()):v=n,f=f||"";var y={};if(v)for(c=0;c<v.length;c++)y[v[c][l]]=c;var g=s.test(o),A={set:function(b,M){var w=M===null?a:m;if(!v){if(!d||w===a)return;v=[],d.set(v)}var T=y[b];if(T===void 0){if(w===a)return;w=w|i,T=v.length,y[b]=T}else M!==(g?v[T][o]:u(v[T],o).get())&&(w=w|t);var _=v[T]=v[T]||{};return _[l]=b,g?_[o]=M:u(_,o).set(M),M!==null&&(w=w&~a),p[T]=p[T]|w,A},get:function(b){if(!!v){var M=y[b];if(M!==void 0)return g?v[M][o]:u(v[M],o).get()}},rename:function(b,M){var w=y[b];return w===void 0||(p[w]=p[w]|x,y[M]=w,delete y[b],v[w][l]=M),A},remove:function(b){var M=y[b];if(M===void 0)return A;var w=v[M];if(Object.keys(w).length>2)return p[M]=p[M]|t,A.set(b,null);if(g){for(c=M;c<v.length;c++)p[c]=p[c]|i;for(c=M;c<v.length;c++)y[v[c][l]]--;v.splice(M,1),delete y[b]}else u(w,o).set(null),p[M]=p[M]|t|a;return A},constructUpdate:function(){for(var b,M,w={},T=Object.keys(p),_=0;_<T.length;_++)M=T[_],b=f+"["+M+"]",v[M]?(p[M]&x&&(w[b+"."+l]=v[M][l]),p[M]&t&&(g?w[b+"."+o]=p[M]&a?null:v[M][o]:w[b+"."+o]=p[M]&a?null:u(v[M],o).get())):w[b]=null;return w}};return A}},{"./nested_property":511}],506:[function(e,I,B){var u=e("../registry");I.exports=function(m,x){for(var t=m._context.locale,i=0;i<2;i++){for(var a=m._context.locales,r=0;r<2;r++){var n=(a[t]||{}).dictionary;if(n){var f=n[x];if(f)return f}a=u.localeRegistry}var l=t.split("-")[0];if(l===t)break;t=l}return x}},{"../registry":638}],507:[function(e,I,B){var u=e("../plot_api/plot_config").dfltConfig,s=e("./notifier"),m=I.exports={};m.log=function(){var x;if(u.logging>1){var t=["LOG:"];for(x=0;x<arguments.length;x++)t.push(arguments[x]);console.trace.apply(console,t)}if(u.notifyOnLogging>1){var i=[];for(x=0;x<arguments.length;x++)i.push(arguments[x]);s(i.join("<br>"),"long")}},m.warn=function(){var x;if(u.logging>0){var t=["WARN:"];for(x=0;x<arguments.length;x++)t.push(arguments[x]);console.trace.apply(console,t)}if(u.notifyOnLogging>0){var i=[];for(x=0;x<arguments.length;x++)i.push(arguments[x]);s(i.join("<br>"),"stick")}},m.error=function(){var x;if(u.logging>0){var t=["ERROR:"];for(x=0;x<arguments.length;x++)t.push(arguments[x]);console.error.apply(console,t)}if(u.notifyOnLogging>0){var i=[];for(x=0;x<arguments.length;x++)i.push(arguments[x]);s(i.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(e,I,B){var u=e("@plotly/d3");I.exports=function(m,x,t){var i=m.selectAll("g."+t.replace(/\s/g,".")).data(x,function(r){return r[0].trace.uid});i.exit().remove(),i.enter().append("g").attr("class",t),i.order();var a=m.classed("rangeplot")?"nodeRangePlot3":"node3";return i.each(function(r){r[0][a]=u.select(this)}),i}},{"@plotly/d3":58}],509:[function(e,I,B){var u=e("gl-mat4");B.init2dArray=function(s,m){for(var x=new Array(s),t=0;t<s;t++)x[t]=new Array(m);return x},B.transposeRagged=function(s){var m=0,x=s.length,t,i;for(t=0;t<x;t++)m=Math.max(m,s[t].length);var a=new Array(m);for(t=0;t<m;t++)for(a[t]=new Array(x),i=0;i<x;i++)a[t][i]=s[i][t];return a},B.dot=function(s,m){if(!(s.length&&m.length)||s.length!==m.length)return null;var x=s.length,t,i;if(s[0].length)for(t=new Array(x),i=0;i<x;i++)t[i]=B.dot(s[i],m);else if(m[0].length){var a=B.transposeRagged(m);for(t=new Array(a.length),i=0;i<a.length;i++)t[i]=B.dot(s,a[i])}else for(t=0,i=0;i<x;i++)t+=s[i]*m[i];return t},B.translationMatrix=function(s,m){return[[1,0,s],[0,1,m],[0,0,1]]},B.rotationMatrix=function(s){var m=s*Math.PI/180;return[[Math.cos(m),-Math.sin(m),0],[Math.sin(m),Math.cos(m),0],[0,0,1]]},B.rotationXYMatrix=function(s,m,x){return B.dot(B.dot(B.translationMatrix(m,x),B.rotationMatrix(s)),B.translationMatrix(-m,-x))},B.apply3DTransform=function(s){return function(){var m=arguments,x=arguments.length===1?m[0]:[m[0],m[1],m[2]||0];return B.dot(s,[x[0],x[1],x[2],1]).slice(0,3)}},B.apply2DTransform=function(s){return function(){var m=arguments;m.length===3&&(m=m[0]);var x=arguments.length===1?m[0]:[m[0],m[1]];return B.dot(s,[x[0],x[1],1]).slice(0,2)}},B.apply2DTransform2=function(s){var m=B.apply2DTransform(s);return function(x){return m(x.slice(0,2)).concat(m(x.slice(2,4)))}},B.convertCssMatrix=function(s){if(s){var m=s.length;if(m===16)return s;if(m===6)return[s[0],s[1],0,0,s[2],s[3],0,0,0,0,1,0,s[4],s[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},B.inverseTransformMatrix=function(s){var m=[];return u.invert(m,s),[[m[0],m[1],m[2],m[3]],[m[4],m[5],m[6],m[7]],[m[8],m[9],m[10],m[11]],[m[12],m[13],m[14],m[15]]]}},{"gl-mat4":210}],510:[function(e,I,B){function u(m,x){var t=m%x;return t<0?t+x:t}function s(m,x){return Math.abs(m)>x/2?m-Math.round(m/x)*x:m}I.exports={mod:u,modHalf:s}},{}],511:[function(e,I,B){var u=e("fast-isnumeric"),s=e("./array").isArrayOrTypedArray;I.exports=function(o,c){if(u(c))c=String(c);else if(typeof c!="string"||c.substr(c.length-4)==="[-1]")throw"bad property string";for(var v=0,d=c.split("."),p,y,g;v<d.length;){if(p=String(d[v]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),p){if(p[1])d[v]=p[1];else if(v===0)d.splice(0,1);else throw"bad property string";for(y=p[2].substr(1,p[2].length-2).split("]["),g=0;g<y.length;g++)v++,d.splice(v,0,Number(y[g]))}v++}return typeof o!="object"?f(o,c,d):{set:i(o,d,c),get:m(o,d),astr:c,parts:d,obj:o}};function m(l,o){return function(){var c=l,v,d,p,y,g;for(y=0;y<o.length-1;y++){if(v=o[y],v===-1){for(d=!0,p=[],g=0;g<c.length;g++)p[g]=m(c[g],o.slice(y+1))(),p[g]!==p[0]&&(d=!1);return d?p[0]:p}if(typeof v=="number"&&!s(c)||(c=c[v],typeof c!="object"||c===null))return}if(!(typeof c!="object"||c===null)&&(p=c[o[y]],p!==null))return p}}var x=/(^|\.)args\[/;function t(l,o){return l===void 0||l===null&&!o.match(x)}function i(l,o,c){return function(v){var d=l,p="",y=t(v,c),g,A;for(A=0;A<o.length-1;A++){if(g=o[A],typeof g=="number"&&!s(d))throw"array index but container is not an array";if(g===-1){if(y=!r(d,o.slice(A+1),v,c),y)break;return}if(!n(d,g,o[A+1],y))break;if(d=d[g],typeof d!="object"||d===null)throw"container is not an object";p=a(p,g)}if(y){if(A===o.length-1&&(delete d[o[A]],Array.isArray(d)&&+o[A]==d.length-1))for(;d.length&&d[d.length-1]===void 0;)d.pop()}else d[o[A]]=v}}function a(l,o){var c=o;return u(o)?c="["+o+"]":l&&(c="."+o),l+c}function r(l,o,c,v){var d=s(c),p=!0,y=c,g=v.replace("-1",0),A=d?!1:t(c,g),b=o[0],M;for(M=0;M<l.length;M++)g=v.replace("-1",M),d&&(y=c[M%c.length],A=t(y,g)),A&&(p=!1),!!n(l,M,b,A)&&i(l[M],o,v.replace("-1",M))(y);return p}function n(l,o,c,v){if(l[o]===void 0){if(v)return!1;typeof c=="number"?l[o]=[]:l[o]={}}return!0}function f(l,o,c){return{set:function(){throw"bad container"},get:function(){},astr:o,parts:c,obj:l}}},{"./array":485,"fast-isnumeric":190}],512:[function(e,I,B){I.exports=function(){}},{}],513:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=[];I.exports=function(x,t){if(m.indexOf(x)!==-1)return;m.push(x);var i=1e3;s(t)?i=t:t==="long"&&(i=3e3);var a=u.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0);var r=a.selectAll(".notifier-note").data(m);function n(f){f.duration(700).style("opacity",0).each("end",function(l){var o=m.indexOf(l);o!==-1&&m.splice(o,1),u.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(f){var l=u.select(this);l.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){l.transition().call(n)});for(var o=l.append("p"),c=f.split(/<br\s*\/?>/g),v=0;v<c.length;v++)v&&o.append("br"),o.append("span").text(c[v]);t==="stick"?l.transition().duration(350).style("opacity",1):l.transition().duration(700).style("opacity",1).transition().delay(i).call(n)})}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(e,I,B){var u=e("./setcursor"),s="data-savedcursor",m="!!";I.exports=function(t,i){var a=t.attr(s);if(i){if(!a){for(var r=(t.attr("class")||"").split(" "),n=0;n<r.length;n++){var f=r[n];f.indexOf("cursor-")===0&&t.attr(s,f.substr(7)).classed(f,!1)}t.attr(s)||t.attr(s,m)}u(t,i)}else a&&(t.attr(s,null),a===m?u(t):u(t,a))}},{"./setcursor":524}],515:[function(e,I,B){var u=e("./matrix").dot,s=e("../constants/numerical").BADNUM,m=I.exports={};m.tester=function(t){var i=t.slice(),a=i[0][0],r=a,n=i[0][1],f=n,l;for(i.push(i[0]),l=1;l<i.length;l++)a=Math.min(a,i[l][0]),r=Math.max(r,i[l][0]),n=Math.min(n,i[l][1]),f=Math.max(f,i[l][1]);var o=!1,c;i.length===5&&(i[0][0]===i[1][0]?i[2][0]===i[3][0]&&i[0][1]===i[3][1]&&i[1][1]===i[2][1]&&(o=!0,c=function(g){return g[0]===i[0][0]}):i[0][1]===i[1][1]&&i[2][1]===i[3][1]&&i[0][0]===i[3][0]&&i[1][0]===i[2][0]&&(o=!0,c=function(g){return g[1]===i[0][1]}));function v(g,A){var b=g[0],M=g[1];return!(b===s||b<a||b>r||M===s||M<n||M>f||A&&c(g))}function d(g,A){var b=g[0],M=g[1];if(b===s||b<a||b>r||M===s||M<n||M>f)return!1;var w=i.length,T=i[0][0],_=i[0][1],h=0,L,S,k,P,O;for(L=1;L<w;L++)if(S=T,k=_,T=i[L][0],_=i[L][1],P=Math.min(S,T),!(b<P||b>Math.max(S,T)||M>Math.max(k,_)))if(M<Math.min(k,_))b!==P&&h++;else{if(T===S?O=M:O=k+(b-S)*(_-k)/(T-S),M===O)return!(L===1&&A);M<=O&&b!==P&&h++}return h%2==1}var p=!0,y=i[0];for(l=1;l<i.length;l++)if(y[0]!==i[l][0]||y[1]!==i[l][1]){p=!1;break}return{xmin:a,xmax:r,ymin:n,ymax:f,pts:i,contains:o?v:d,isRect:o,degenerate:p}},m.isSegmentBent=function(t,i,a,r){var n=t[i],f=[t[a][0]-n[0],t[a][1]-n[1]],l=u(f,f),o=Math.sqrt(l),c=[-f[1]/o,f[0]/o],v,d,p;for(v=i+1;v<a;v++)if(d=[t[v][0]-n[0],t[v][1]-n[1]],p=u(d,f),p<0||p>l||Math.abs(u(d,c))>r)return!0;return!1},m.filter=function(t,i){var a=[t[0]],r=0,n=0;function f(o){t.push(o);var c=a.length,v=r;a.splice(n+1);for(var d=v+1;d<t.length;d++)(d===t.length-1||m.isSegmentBent(t,v,d+1,i))&&(a.push(t[d]),a.length<c-2&&(r=d,n=a.length-1),v=d)}if(t.length>1){var l=t.pop();f(l)}return{addPt:f,raw:t,filtered:a}}},{"../constants/numerical":479,"./matrix":509}],516:[function(e,I,B){(function(u){(function(){var s=e("./show_no_webgl_msg"),m=e("regl");I.exports=function(t,i){var a=t._fullLayout,r=!0;return a._glcanvas.each(function(n){if(!n.regl&&!(n.pick&&!a._has("parcoords"))){try{n.regl=m({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||u.devicePixelRatio,extensions:i||[]})}catch{r=!1}n.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(f){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:f,layer:n.key})},!1)}}),r||s({container:a._glcontainer.node()}),r}}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(e,I,B){var u=e("fast-isnumeric"),s=e("is-mobile");I.exports=function(t){var i;if(t&&t.hasOwnProperty("userAgent")?i=t.userAgent:i=m(),typeof i!="string")return!0;var a=s({ua:{headers:{"user-agent":i}},tablet:!0,featureDetect:!1});if(!a)for(var r=i.split(" "),n=1;n<r.length;n++){var f=r[n];if(f.indexOf("Safari")!==-1)for(var l=n-1;l>-1;l--){var o=r[l];if(o.substr(0,8)==="Version/"){var c=o.substr(8).split(".")[0];if(u(c)&&(c=+c),c>=13)return!0}}}return a};function m(){var x;return typeof navigator!="undefined"&&(x=navigator.userAgent),x&&x.headers&&typeof x.headers["user-agent"]=="string"&&(x=x.headers["user-agent"]),x}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(e,I,B){I.exports=function(s,m){if(m instanceof RegExp){for(var x=m.toString(),t=0;t<s.length;t++)if(s[t]instanceof RegExp&&s[t].toString()===x)return s;s.push(m)}else(m||m===0)&&s.indexOf(m)===-1&&s.push(m);return s}},{}],519:[function(e,I,B){var u=e("../lib"),s=e("../plot_api/plot_config").dfltConfig;function m(t,i){for(var a=[],r,n=0;n<i.length;n++)r=i[n],r===t?a[n]=r:typeof r=="object"?a[n]=Array.isArray(r)?u.extendDeep([],r):u.extendDeepAll({},r):a[n]=r;return a}var x={};x.add=function(t,i,a,r,n){var f,l;if(t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},l=t.undoQueue.index,t.autoplay){t.undoQueue.inSequence||(t.autoplay=!1);return}!t.undoQueue.sequence||t.undoQueue.beginSequence?(f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(l,t.undoQueue.queue.length-l,f),t.undoQueue.index+=1):f=t.undoQueue.queue[l-1],t.undoQueue.beginSequence=!1,f&&(f.undo.calls.unshift(i),f.undo.args.unshift(a),f.redo.calls.push(r),f.redo.args.push(n)),t.undoQueue.queue.length>s.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--)},x.startSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},x.stopSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},x.undo=function(i){var a,r;if(!(i.undoQueue===void 0||isNaN(i.undoQueue.index)||i.undoQueue.index<=0)){for(i.undoQueue.index--,a=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0,r=0;r<a.undo.calls.length;r++)x.plotDo(i,a.undo.calls[r],a.undo.args[r]);i.undoQueue.inSequence=!1,i.autoplay=!1}},x.redo=function(i){var a,r;if(!(i.undoQueue===void 0||isNaN(i.undoQueue.index)||i.undoQueue.index>=i.undoQueue.queue.length)){for(a=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0,r=0;r<a.redo.calls.length;r++)x.plotDo(i,a.redo.calls[r],a.redo.args[r]);i.undoQueue.inSequence=!1,i.autoplay=!1,i.undoQueue.index++}},x.plotDo=function(t,i,a){t.autoplay=!0,a=m(t,a),i.apply(null,a)},I.exports=x},{"../lib":503,"../plot_api/plot_config":541}],520:[function(e,I,B){B.counter=function(u,s,m,x){var t=(s||"")+(m?"":"$"),i=x===!1?"":"^";return u==="xy"?new RegExp(i+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+t):new RegExp(i+u+"([2-9]|[1-9][0-9]+)?"+t)}},{}],521:[function(e,I,B){var u=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,s=/^[^\.\[\]]+$/;I.exports=function(m,x){for(;x;){var t=m.match(u);if(t)m=t[1];else if(m.match(s))m="";else throw new Error("bad relativeAttr call:"+[m,x]);if(x.charAt(0)==="^")x=x.slice(1);else break}return m&&x.charAt(0)!=="["?m+"."+x:m+x}},{}],522:[function(e,I,B){var u=e("./array").isArrayOrTypedArray,s=e("./is_plain_object");I.exports=function m(x,t){for(var i in t){var a=t[i],r=x[i];if(r!==a)if(i.charAt(0)==="_"||typeof a=="function"){if(i in x)continue;x[i]=a}else if(u(a)&&u(r)&&s(a[0])){if(i==="customdata"||i==="ids")continue;for(var n=Math.min(a.length,r.length),f=0;f<n;f++)r[f]!==a[f]&&s(a[f])&&s(r[f])&&m(r[f],a[f])}else s(a)&&s(r)&&(m(r,a),Object.keys(r).length||delete x[i])}}},{"./array":485,"./is_plain_object":504}],523:[function(e,I,B){var u=e("fast-isnumeric"),s=e("./loggers"),m=e("./identity"),x=e("../constants/numerical").BADNUM,t=1e-9;B.findBin=function(f,l,o){if(u(l.start))return o?Math.ceil((f-l.start)/l.size-t)-1:Math.floor((f-l.start)/l.size+t);var c=0,v=l.length,d=0,p=v>1?(l[v-1]-l[0])/(v-1):1,y,g;for(p>=0?g=o?i:a:g=o?n:r,f+=p*t*(o?-1:1)*(p>=0?1:-1);c<v&&d++<100;)y=Math.floor((c+v)/2),g(l[y],f)?c=y+1:v=y;return d>90&&s.log("Long binary search..."),c-1};function i(f,l){return f<l}function a(f,l){return f<=l}function r(f,l){return f>l}function n(f,l){return f>=l}B.sorterAsc=function(f,l){return f-l},B.sorterDes=function(f,l){return l-f},B.distinctVals=function(f){var l=f.slice();l.sort(B.sorterAsc);var o;for(o=l.length-1;o>-1&&l[o]===x;o--);for(var c=l[o]-l[0]||1,v=c/(o||1)/1e4,d=[],p,y=0;y<=o;y++){var g=l[y],A=g-p;p===void 0?(d.push(g),p=g):A>v&&(c=Math.min(c,A),d.push(g),p=g)}return{vals:d,minDiff:c}},B.roundUp=function(f,l,o){for(var c=0,v=l.length-1,d,p=0,y=o?0:1,g=o?1:0,A=o?Math.ceil:Math.floor;c<v&&p++<100;)d=A((c+v)/2),l[d]<=f?c=d+y:v=d-g;return l[c]},B.sort=function(f,l){for(var o=0,c=0,v=1;v<f.length;v++){var d=l(f[v],f[v-1]);if(d<0?o=1:d>0&&(c=1),o&&c)return f.sort(l)}return c?f:f.reverse()},B.findIndexOfMin=function(f,l){l=l||m;for(var o=1/0,c,v=0;v<f.length;v++){var d=l(f[v]);d<o&&(o=d,c=v)}return c}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(e,I,B){I.exports=function(s,m){(s.attr("class")||"").split(" ").forEach(function(x){x.indexOf("cursor-")===0&&s.classed(x,!1)}),m&&s.classed("cursor-"+m,!0)}},{}],525:[function(e,I,B){var u=e("../components/color"),s=function(){};I.exports=function(x){for(var t in x)typeof x[t]=="function"&&(x[t]=s);x.destroy=function(){x.container.parentNode.removeChild(x.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=u.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=u.lightLine,i.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",i.appendChild(a),x.container.appendChild(i),x.container.style.background="#FFFFFF",x.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(e,I,B){I.exports=function(s){return Object.keys(s).sort()}},{}],527:[function(e,I,B){var u=e("fast-isnumeric"),s=e("./array").isArrayOrTypedArray;B.aggNums=function(m,x,t,i){var a,r;if((!i||i>t.length)&&(i=t.length),u(x)||(x=!1),s(t[0])){for(r=new Array(i),a=0;a<i;a++)r[a]=B.aggNums(m,x,t[a]);t=r}for(a=0;a<i;a++)u(x)?u(t[a])&&(x=m(+x,+t[a])):x=t[a];return x},B.len=function(m){return B.aggNums(function(x){return x+1},0,m)},B.mean=function(m,x){return x||(x=B.len(m)),B.aggNums(function(t,i){return t+i},0,m)/x},B.midRange=function(m){if(!(m===void 0||m.length===0))return(B.aggNums(Math.max,null,m)+B.aggNums(Math.min,null,m))/2},B.variance=function(m,x,t){return x||(x=B.len(m)),u(t)||(t=B.mean(m,x)),B.aggNums(function(i,a){return i+Math.pow(a-t,2)},0,m)/x},B.stdev=function(m,x,t){return Math.sqrt(B.variance(m,x,t))},B.median=function(m){var x=m.slice().sort();return B.interp(x,.5)},B.interp=function(m,x){if(!u(x))throw"n should be a finite number";if(x=x*m.length-.5,x<0)return m[0];if(x>m.length-1)return m[m.length-1];var t=x%1;return t*m[Math.ceil(x)]+(1-t)*m[Math.floor(x)]}},{"./array":485,"fast-isnumeric":190}],528:[function(e,I,B){var u=e("color-normalize");function s(m){return m?u(m):[0,0,0,1]}I.exports=s},{"color-normalize":89}],529:[function(e,I,B){var u=e("@plotly/d3"),s=e("../lib"),m=s.strTranslate,x=e("../constants/xmlns_namespaces"),t=e("../constants/alignment").LINE_SPACING,i=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;B.convertToTspans=function(U,N,X){var j=U.text(),ee=!U.attr("data-notex")&&typeof MathJax!="undefined"&&j.match(i),q=u.select(U.node().parentNode);if(q.empty())return;var G=U.attr("class")?U.attr("class").split(" ")[0]:"text";G+="-math",q.selectAll("svg."+G).remove(),q.selectAll("g."+G+"-group").remove(),U.style("display",null).attr({"data-unformatted":j,"data-math":"N"});function J(){q.empty()||(G=U.attr("class")+"-math",q.select("svg."+G).remove()),U.text("").style("white-space","pre");var le=O(U.node(),j);le&&U.style("pointer-events","all"),B.positionText(U),X&&X.call(U)}return ee?(N&&N._promises||[]).push(new Promise(function(le){U.style("display","none");var fe=parseInt(U.node().style.fontSize,10),se={fontSize:fe};f(ee[2],se,function(V,Y,ne){q.selectAll("svg."+G).remove(),q.selectAll("g."+G+"-group").remove();var te=V&&V.select("svg");if(!te||!te.node()){J(),le();return}var K=q.append("g").classed(G+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});K.node().appendChild(te.node()),Y&&Y.node()&&te.node().insertBefore(Y.node().cloneNode(!0),te.node().firstChild);var $=ne.width,ae=ne.height;te.attr({class:G,height:ae,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ie=U.node().style.fill||"black",oe=te.select("g");oe.attr({fill:ie,stroke:ie});var ue=oe.node().getBoundingClientRect(),xe=ue.width,he=ue.height;(xe>$||he>ae)&&(te.style("overflow","hidden"),ue=te.node().getBoundingClientRect(),xe=ue.width,he=ue.height);var me=+U.attr("x"),be=+U.attr("y"),Ce=fe||U.node().getBoundingClientRect().height,Se=-Ce/4;if(G[0]==="y")K.attr({transform:"rotate("+[-90,me,be]+")"+m(-xe/2,Se-he/2)});else if(G[0]==="l")be=Se-he/2;else if(G[0]==="a"&&G.indexOf("atitle")!==0)me=0,be=Se;else{var Be=U.attr("text-anchor");me=me-xe*(Be==="middle"?.5:Be==="end"?1:0),be=be+Se-he/2}te.attr({x:me,y:be}),X&&X.call(U,K),le(K)})})):J(),U};var a=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function n(U){return U.replace(a,"\\lt ").replace(r,"\\gt ")}function f(U,N,X){var j,ee,q,G;MathJax.Hub.Queue(function(){return ee=s.extendDeepAll({},MathJax.Hub.config),q=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if(j=MathJax.Hub.config.menuSettings.renderer,j!=="SVG")return MathJax.Hub.setRenderer("SVG")},function(){var J="math-output-"+s.randstr({},64);return G=u.select("body").append("div").attr({id:J}).style({visibility:"hidden",position:"absolute"}).style({"font-size":N.fontSize+"px"}).text(n(U)),MathJax.Hub.Typeset(G.node())},function(){var J=u.select("body").select("#MathJax_SVG_glyphs");if(G.select(".MathJax_SVG").empty()||!G.select("svg").node())s.log("There was an error in the tex syntax.",U),X();else{var le=G.select("svg").node().getBoundingClientRect();X(G.select(".MathJax_SVG"),J,le)}if(G.remove(),j!=="SVG")return MathJax.Hub.setRenderer(j)},function(){return q!==void 0&&(MathJax.Hub.processSectionDelay=q),MathJax.Hub.Config(ee)})}var l={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},o={sub:"0.3em",sup:"-0.6em"},c={sub:"-0.21em",sup:"0.42em"},v="\u200B",d=["http:","https:","mailto:","",void 0,":"],p=B.NEWLINES=/(\r\n?|\n)/g,y=/(<[^<>]*>)/,g=/<(\/?)([^ >]*)(\s+(.*))?>/i,A=/<br(\s+.*)?>/i;B.BR_TAG_ALL=/<br(\s+.*)?>/gi;var b=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,M=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,w=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,T=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(U,N){if(!U)return null;var X=U.match(N),j=X&&(X[3]||X[4]);return j&&k(j)}var h=/(^|;)\s*color:/;B.plainText=function(U,N){N=N||{};for(var X=N.len!==void 0&&N.len!==-1?N.len:1/0,j=N.allowedTags!==void 0?N.allowedTags:["br"],ee="...",q=ee.length,G=U.split(y),J=[],le="",fe=0,se=0;se<G.length;se++){var V=G[se],Y=V.match(g),ne=Y&&Y[2].toLowerCase();if(ne)j.indexOf(ne)!==-1&&(J.push(V),le=ne);else{var te=V.length;if(fe+te<X)J.push(V),fe+=te;else if(fe<X){var K=X-fe;le&&(le!=="br"||K<=q||te<=q)&&J.pop(),X>q?J.push(V.substr(0,K-q)+ee):J.push(V.substr(0,K));break}le=""}}return J.join("")};var L={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function k(U){return U.replace(S,function(N,X){var j;return X.charAt(0)==="#"?j=P(X.charAt(1)==="x"?parseInt(X.substr(2),16):parseInt(X.substr(1),10)):j=L[X],j||N})}B.convertEntities=k;function P(U){if(!(U>1114111)){var N=String.fromCodePoint;if(N)return N(U);var X=String.fromCharCode;return U<=65535?X(U):X((U>>10)+55232,U%1024+56320)}}function O(U,N){N=N.replace(p," ");var X=!1,j=[],ee,q=-1;function G(){q++;var he=document.createElementNS(x.svg,"tspan");u.select(he).attr({class:"line",dy:q*t+"em"}),U.appendChild(he),ee=he;var me=j;if(j=[{node:he}],me.length>1)for(var be=1;be<me.length;be++)J(me[be])}function J(he){var me=he.type,be={},Ce;if(me==="a"){Ce="a";var Se=he.target,Be=he.href,Ye=he.popup;Be&&(be={"xlink:xlink:show":Se==="_blank"||Se.charAt(0)!=="_"?"new":"replace",target:Se,"xlink:xlink:href":Be},Ye&&(be.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ye+'");return false;'))}else Ce="tspan";he.style&&(be.style=he.style);var Xe=document.createElementNS(x.svg,Ce);if(me==="sup"||me==="sub"){le(ee,v),ee.appendChild(Xe);var Te=document.createElementNS(x.svg,"tspan");le(Te,v),u.select(Te).attr("dy",c[me]),be.dy=o[me],ee.appendChild(Xe),ee.appendChild(Te)}else ee.appendChild(Xe);u.select(Xe).attr(be),ee=he.node=Xe,j.push(he)}function le(he,me){he.appendChild(document.createTextNode(me))}function fe(he){if(j.length===1){s.log("Ignoring unexpected end tag </"+he+">.",N);return}var me=j.pop();he!==me.type&&s.log("Start tag <"+me.type+"> doesnt match end tag <"+he+">. Pretending it did match.",N),ee=j[j.length-1].node}var se=A.test(N);se?G():(ee=U,j=[{node:U}]);for(var V=N.split(y),Y=0;Y<V.length;Y++){var ne=V[Y],te=ne.match(g),K=te&&te[2].toLowerCase(),$=l[K];if(K==="br")G();else if($===void 0)le(ee,k(ne));else if(te[1])fe(K);else{var ae=te[4],ie={type:K},oe=_(ae,b);if(oe?(oe=oe.replace(h,"$1 fill:"),$&&(oe+=";"+$)):$&&(oe=$),oe&&(ie.style=oe),K==="a"){X=!0;var ue=_(ae,M);if(ue){var xe=F(ue);xe&&(ie.href=xe,ie.target=_(ae,w)||"_blank",ie.popup=_(ae,T))}}J(ie)}}return X}function F(U){var N=encodeURI(decodeURI(U)),X=document.createElement("a"),j=document.createElement("a");X.href=U,j.href=N;var ee=X.protocol,q=j.protocol;return d.indexOf(ee)!==-1&&d.indexOf(q)!==-1?N:""}B.sanitizeHTML=function(N){N=N.replace(p," ");for(var X=document.createElement("p"),j=X,ee=[],q=N.split(y),G=0;G<q.length;G++){var J=q[G],le=J.match(g),fe=le&&le[2].toLowerCase();if(fe in l)if(le[1])ee.length&&(j=ee.pop());else{var se=le[4],V=_(se,b),Y=V?{style:V}:{};if(fe==="a"){var ne=_(se,M);if(ne){var te=F(ne);if(te){Y.href=te;var K=_(se,w);K&&(Y.target=K)}}}var $=document.createElement(fe);j.appendChild($),u.select($).attr(Y),j=$,ee.push($)}else j.appendChild(document.createTextNode(k(J)))}var ae="innerHTML";return X[ae]},B.lineCount=function(N){return N.selectAll("tspan.line").size()||1},B.positionText=function(N,X,j){return N.each(function(){var ee=u.select(this);function q(le,fe){return fe===void 0?(fe=ee.attr(le),fe===null&&(ee.attr(le,0),fe=0)):ee.attr(le,fe),fe}var G=q("x",X),J=q("y",j);this.nodeName==="text"&&ee.selectAll("tspan.line").attr({x:G,y:J})})};function D(U,N,X){var j=X.horizontalAlign,ee=X.verticalAlign||"top",q=U.node().getBoundingClientRect(),G=N.node().getBoundingClientRect(),J,le,fe;return ee==="bottom"?le=function(){return q.bottom-J.height}:ee==="middle"?le=function(){return q.top+(q.height-J.height)/2}:le=function(){return q.top},j==="right"?fe=function(){return q.right-J.width}:j==="center"?fe=function(){return q.left+(q.width-J.width)/2}:fe=function(){return q.left},function(){J=this.node().getBoundingClientRect();var se=fe()-G.left,V=le()-G.top,Y=X.gd||{};if(X.gd){Y._fullLayout._calcInverseTransform(Y);var ne=s.apply3DTransform(Y._fullLayout._invTransform)(se,V);se=ne[0],V=ne[1]}return this.style({top:V+"px",left:se+"px","z-index":1e3}),this}}var R="1px ";B.makeTextShadow=function(U){var N=R,X=R,j=R;return N+X+j+U+", -"+N+"-"+X+j+U+", "+N+"-"+X+j+U+", -"+N+X+j+U},B.makeEditable=function(U,N){var X=N.gd,j=N.delegate,ee=u.dispatch("edit","input","cancel"),q=j||U;if(U.style({"pointer-events":j?"none":"all"}),U.size()!==1)throw new Error("boo");function G(){le(),U.style({opacity:0});var fe=q.attr("class"),se;fe?se="."+fe.split(" ")[0]+"-math-group":se="[class*=-math-group]",se&&u.select(U.node().parentNode).select(se).style({opacity:0})}function J(fe){var se=fe.node(),V=document.createRange();V.selectNodeContents(se);var Y=window.getSelection();Y.removeAllRanges(),Y.addRange(V),se.focus()}function le(){var fe=u.select(X),se=fe.select(".svg-container"),V=se.append("div"),Y=U.node().style,ne=parseFloat(Y.fontSize||12),te=N.text;te===void 0&&(te=U.attr("data-unformatted")),V.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Y.fontFamily||"Arial","font-size":ne,color:N.fill||Y.fill||"black",opacity:1,"background-color":N.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ne/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(te).call(D(U,se,N)).on("blur",function(){X._editing=!1,U.text(this.textContent).style({opacity:1});var K=u.select(this).attr("class"),$;K?$="."+K.split(" ")[0]+"-math-group":$="[class*=-math-group]",$&&u.select(U.node().parentNode).select($).style({opacity:0});var ae=this.textContent;u.select(this).transition().duration(0).remove(),u.select(document).on("mouseup",null),ee.edit.call(U,ae)}).on("focus",function(){var K=this;X._editing=!0,u.select(document).on("mouseup",function(){if(u.event.target===K)return!1;document.activeElement===V.node()&&V.node().blur()})}).on("keyup",function(){u.event.which===27?(X._editing=!1,U.style({opacity:1}),u.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),ee.cancel.call(U,this.textContent)):(ee.input.call(U,this.textContent),u.select(this).call(D(U,se,N)))}).on("keydown",function(){u.event.which===13&&this.blur()}).call(J)}return N.immediate?G():q.on("click",G),u.rebind(U,ee,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(e,I,B){var u={};B.throttle=function(x,t,i){var a=u[x],r=Date.now();if(!a){for(var n in u)u[n].ts<r-6e4&&delete u[n];a=u[x]={ts:0,timer:null}}s(a);function f(){i(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}if(r>a.ts+t){f();return}a.timer=setTimeout(function(){f(),a.timer=null},t)},B.done=function(m){var x=u[m];return!x||!x.timer?Promise.resolve():new Promise(function(t){var i=x.onDone;x.onDone=function(){i&&i(),t(),x.onDone=null}})},B.clear=function(m){if(m)s(u[m]),delete u[m];else for(var x in u)B.clear(x)};function s(m){m&&m.timer!==null&&(clearTimeout(m.timer),m.timer=null)}},{}],531:[function(e,I,B){var u=e("fast-isnumeric");I.exports=function(m,x){if(m>0)return Math.log(m)/Math.LN10;var t=Math.log(Math.min(x[0],x[1]))/Math.LN10;return u(t)||(t=Math.log(Math.max(x[0],x[1]))/Math.LN10-6),t}},{"fast-isnumeric":190}],532:[function(e,I,B){var u=I.exports={},s=e("../plots/geo/constants").locationmodeToLayer,m=e("topojson-client").feature;u.getTopojsonName=function(x){return[x.scope.replace(/ /g,"-"),"_",x.resolution.toString(),"m"].join("")},u.getTopojsonPath=function(x,t){return x+t+".json"},u.getTopojsonFeatures=function(x,t){var i=s[x.locationmode],a=t.objects[i];return m(t,a).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(e,I,B){I.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(e,I,B){I.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(e,I,B){var u=e("../registry");I.exports=function(m){for(var x=u.layoutArrayContainers,t=u.layoutArrayRegexes,i=m.split("[")[0],a,r,n=0;n<t.length;n++)if(r=m.match(t[n]),r&&r.index===0){a=r[0];break}if(a||(a=x[x.indexOf(i)]),!a)return!1;var f=m.substr(a.length);return f?(r=f.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),r?{array:a,index:Number(r[1]),property:r[3]||""}:!1):{array:a,index:"",property:""}}},{"../registry":638}],536:[function(e,I,B){var u=e("../lib"),s=u.extendFlat,m=u.isPlainObject,x={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},t={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},i=x.flags.slice().concat(["fullReplot"]),a=t.flags.slice().concat("layoutReplot");I.exports={traces:x,layout:t,traceFlags:function(){return r(i)},layoutFlags:function(){return r(a)},update:function(l,o){var c=o.editType;if(c&&c!=="none")for(var v=c.split("+"),d=0;d<v.length;d++)l[v[d]]=!0},overrideAll:n};function r(l){for(var o={},c=0;c<l.length;c++)o[l[c]]=!1;return o}function n(l,o,c){var v=s({},l);for(var d in v){var p=v[d];m(p)&&(v[d]=f(p,o,c,d))}return c==="from-root"&&(v.editType=o),v}function f(l,o,c,v){if(l.valType){var d=s({},l);if(d.editType=o,Array.isArray(l.items)){d.items=new Array(l.items.length);for(var p=0;p<l.items.length;p++)d.items[p]=f(l.items[p],o)}return d}else return n(l,o,v.charAt(0)==="_"?"nested":"from-root")}},{"../lib":503}],537:[function(e,I,B){var u=e("fast-isnumeric"),s=e("gl-mat4/fromQuat"),m=e("../registry"),x=e("../lib"),t=e("../plots/plots"),i=e("../plots/cartesian/axis_ids"),a=e("../components/color"),r=i.cleanId,n=i.getFromTrace,f=m.traceIs;B.clearPromiseQueue=function(b){Array.isArray(b._promises)&&b._promises.length>0&&x.log("Clearing previous rejected promises from queue."),b._promises=[]},B.cleanLayout=function(b){var M,w;b||(b={}),b.xaxis1&&(b.xaxis||(b.xaxis=b.xaxis1),delete b.xaxis1),b.yaxis1&&(b.yaxis||(b.yaxis=b.yaxis1),delete b.yaxis1),b.scene1&&(b.scene||(b.scene=b.scene1),delete b.scene1);var T=(t.subplotsRegistry.cartesian||{}).attrRegex,_=(t.subplotsRegistry.polar||{}).attrRegex,h=(t.subplotsRegistry.ternary||{}).attrRegex,L=(t.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(b);for(M=0;M<S.length;M++){var k=S[M];if(T&&T.test(k)){var P=b[k];P.anchor&&P.anchor!=="free"&&(P.anchor=r(P.anchor)),P.overlaying&&(P.overlaying=r(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,p(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),o(P)}else if(_&&_.test(k)){var O=b[k];o(O.radialaxis)}else if(h&&h.test(k)){var F=b[k];o(F.aaxis),o(F.baxis),o(F.caxis)}else if(L&&L.test(k)){var D=b[k],R=D.cameraposition;if(Array.isArray(R)&&R[0].length===4){var U=R[0],N=R[1],X=R[2],j=s([],U),ee=[];for(w=0;w<3;++w)ee[w]=N[w]+X*j[2+4*w];D.camera={eye:{x:ee[0],y:ee[1],z:ee[2]},center:{x:N[0],y:N[1],z:N[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}o(D.xaxis),o(D.yaxis),o(D.zaxis)}}var q=Array.isArray(b.annotations)?b.annotations.length:0;for(M=0;M<q;M++){var G=b.annotations[M];!x.isPlainObject(G)||(G.ref&&(G.ref==="paper"?(G.xref="paper",G.yref="paper"):G.ref==="data"&&(G.xref="x",G.yref="y"),delete G.ref),l(G,"xref"),l(G,"yref"))}var J=Array.isArray(b.shapes)?b.shapes.length:0;for(M=0;M<J;M++){var le=b.shapes[M];!x.isPlainObject(le)||(l(le,"xref"),l(le,"yref"))}var fe=Array.isArray(b.images)?b.images.length:0;for(M=0;M<fe;M++){var se=b.images[M];!x.isPlainObject(se)||(l(se,"xref"),l(se,"yref"))}var V=b.legend;return V&&(V.x>3?(V.x=1.02,V.xanchor="left"):V.x<-2&&(V.x=-.02,V.xanchor="right"),V.y>3?(V.y=1.02,V.yanchor="bottom"):V.y<-2&&(V.y=-.02,V.yanchor="top")),o(b),b.dragmode==="rotate"&&(b.dragmode="orbit"),a.clean(b),b.template&&b.template.layout&&B.cleanLayout(b.template.layout),b};function l(b,M){var w=b[M],T=M.charAt(0);w&&w!=="paper"&&(b[M]=r(w,T,!0))}function o(b){b&&((typeof b.title=="string"||typeof b.title=="number")&&(b.title={text:b.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(w,T){var _=b[w],h=b.title&&b.title[T];_&&!h&&(b.title||(b.title={}),b.title[T]=b[w],delete b[w])}}B.cleanData=function(b){for(var M=0;M<b.length;M++){var w=b[M],T;if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var _=a.defaults,h=w.error_y.color||(f(w,"bar")?a.defaultLine:_[M%_.length]);w.error_y.color=a.addOpacity(a.rgb(h),a.opacity(h)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir==="h"&&(f(w,"bar")||w.type.substr(0,9)==="histogram")&&(w.orientation="h",B.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&B.swapXYData(w),(w.type==="histogramx"||w.type==="histogramy")&&(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=r(w.xaxis,"x")),w.yaxis&&(w.yaxis=r(w.yaxis,"y")),f(w,"gl3d")&&w.scene&&(w.scene=t.subplotsRegistry.gl3d.cleanId(w.scene)),!f(w,"pie-like")&&!f(w,"bar-like"))if(Array.isArray(w.textposition))for(T=0;T<w.textposition.length;T++)w.textposition[T]=d(w.textposition[T]);else w.textposition&&(w.textposition=d(w.textposition));var L=m.getModule(w);if(L&&L.colorbar){var S=L.colorbar.container,k=S?w[S]:w;k&&k.colorscale&&(k.colorscale==="YIGnBu"&&(k.colorscale="YlGnBu"),k.colorscale==="YIOrRd"&&(k.colorscale="YlOrRd"))}if(w.type==="surface"&&x.isPlainObject(w.contours)){var P=["x","y","z"];for(T=0;T<P.length;T++){var O=w.contours[P[T]];!x.isPlainObject(O)||(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var F=(w.increasing||{}).showlegend!==!1,D=(w.decreasing||{}).showlegend!==!1,R=c(w.increasing),U=c(w.decreasing);if(R!==!1&&U!==!1){var N=v(R,U,F,D);N&&(w.name=N)}else(R||U)&&!w.name&&(w.name=R||U)}if(Array.isArray(w.transforms)){var X=w.transforms;for(T=0;T<X.length;T++){var j=X[T];if(!!x.isPlainObject(j))switch(j.type){case"filter":j.filtersrc&&(j.target=j.filtersrc,delete j.filtersrc),j.calendar&&(j.valuecalendar||(j.valuecalendar=j.calendar),delete j.calendar);break;case"groupby":if(j.styles=j.styles||j.style,j.styles&&!Array.isArray(j.styles)){var ee=j.styles,q=Object.keys(ee);j.styles=[];for(var G=0;G<q.length;G++)j.styles.push({target:q[G],value:ee[q[G]]})}break}}}p(w,"line")&&delete w.line,"marker"in w&&(p(w.marker,"line")&&delete w.marker.line,p(w,"marker")&&delete w.marker),a.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),o(w),w.colorbar&&o(w.colorbar),w.marker&&w.marker.colorbar&&o(w.marker.colorbar),w.line&&w.line.colorbar&&o(w.line.colorbar),w.aaxis&&o(w.aaxis),w.baxis&&o(w.baxis)}};function c(b){if(!x.isPlainObject(b))return!1;var M=b.name;return delete b.name,delete b.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}function v(b,M,w,T){if(w&&!T)return b;if(T&&!w||!b.trim())return M;if(!M.trim())return b;var _=Math.min(b.length,M.length),h;for(h=0;h<_&&b.charAt(h)===M.charAt(h);h++);var L=b.substr(0,h);return L.trim()}function d(b){var M="middle",w="center";return typeof b=="string"&&(b.indexOf("top")!==-1?M="top":b.indexOf("bottom")!==-1&&(M="bottom"),b.indexOf("left")!==-1?w="left":b.indexOf("right")!==-1&&(w="right")),M+" "+w}function p(b,M){return M in b&&typeof b[M]=="object"&&Object.keys(b[M]).length===0}B.swapXYData=function(b){var M;if(x.swapAttrs(b,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(b.z)&&Array.isArray(b.z[0])&&(b.transpose?delete b.transpose:b.transpose=!0),b.error_x&&b.error_y){var w=b.error_y,T="copy_ystyle"in w?w.copy_ystyle:!(w.color||w.thickness||w.width);x.swapAttrs(b,["error_?.copy_ystyle"]),T&&x.swapAttrs(b,["error_?.color","error_?.thickness","error_?.width"])}if(typeof b.hoverinfo=="string"){var _=b.hoverinfo.split("+");for(M=0;M<_.length;M++)_[M]==="x"?_[M]="y":_[M]==="y"&&(_[M]="x");b.hoverinfo=_.join("+")}},B.coerceTraceIndices=function(b,M){if(u(M))return[M];if(!Array.isArray(M)||!M.length)return b.data.map(function(_,h){return h});if(Array.isArray(M)){for(var w=[],T=0;T<M.length;T++)x.isIndex(M[T],b.data.length)?w.push(M[T]):x.warn("trace index (",M[T],") is not a number or is out of bounds");return w}return M},B.manageArrayContainers=function(b,M,w){var T=b.obj,_=b.parts,h=_.length,L=_[h-1],S=u(L);if(S&&M===null){var k=_.slice(0,h-1).join("."),P=x.nestedProperty(T,k).get();P.splice(L,1)}else S&&b.get()===void 0&&b.get()===void 0&&(w[b.astr]=null),b.set(M)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function g(b){var M=b.search(y);if(M>0)return b.substr(0,M)}B.hasParent=function(b,M){for(var w=g(M);w;){if(w in b)return!0;w=g(w)}return!1};var A=["x","y","z"];B.clearAxisTypes=function(b,M,w){for(var T=0;T<M.length;T++)for(var _=b._fullData[T],h=0;h<3;h++){var L=n(b,_,A[h]);if(L&&L.type!=="log"){var S=L._name,k=L._id.substr(1);if(k.substr(0,5)==="scene"){if(w[k]!==void 0)continue;S=k+"."+S}var P=S+".type";w[S]===void 0&&w[P]===void 0&&x.nestedProperty(b.layout,P).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(e,I,B){var u=e("./plot_api");B._doPlot=u._doPlot,B.newPlot=u.newPlot,B.restyle=u.restyle,B.relayout=u.relayout,B.redraw=u.redraw,B.update=u.update,B._guiRestyle=u._guiRestyle,B._guiRelayout=u._guiRelayout,B._guiUpdate=u._guiUpdate,B._storeDirectGUIEdit=u._storeDirectGUIEdit,B.react=u.react,B.extendTraces=u.extendTraces,B.prependTraces=u.prependTraces,B.addTraces=u.addTraces,B.deleteTraces=u.deleteTraces,B.moveTraces=u.moveTraces,B.purge=u.purge,B.addFrames=u.addFrames,B.deleteFrames=u.deleteFrames,B.animate=u.animate,B.setPlotConfig=u.setPlotConfig,B.toImage=e("./to_image"),B.validate=e("./validate"),B.downloadImage=e("../snapshot/download");var s=e("./template_api");B.makeTemplate=s.makeTemplate,B.validateTemplate=s.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(e,I,B){var u=e("../lib/is_plain_object"),s=e("../lib/noop"),m=e("../lib/loggers"),x=e("../lib/search").sorterAsc,t=e("../registry");B.containerArrayMatch=e("./container_array_match");var i=B.isAddVal=function(n){return n==="add"||u(n)},a=B.isRemoveVal=function(n){return n===null||n==="remove"};B.applyContainerArrayChanges=function(n,f,l,o,c){var v=f.astr,d=t.getComponentMethod(v,"supplyLayoutDefaults"),p=t.getComponentMethod(v,"draw"),y=t.getComponentMethod(v,"drawOne"),g=o.replot||o.recalc||d===s||p===s,A=n.layout,b=n._fullLayout;if(l[""]){Object.keys(l).length>1&&m.warn("Full array edits are incompatible with other edits",v);var M=l[""][""];if(a(M))f.set(null);else if(Array.isArray(M))f.set(M);else return m.warn("Unrecognized full array edit value",v,M),!0;return g?!1:(d(A,b),p(n),!0)}var w=Object.keys(l).map(Number).sort(x),T=f.get(),_=T||[],h=c(b,v).get(),L=[],S=-1,k=_.length,P,O,F,D,R,U,N,X;for(P=0;P<w.length;P++){if(F=w[P],D=l[F],R=Object.keys(D),U=D[""],N=i(U),F<0||F>_.length-(N?0:1)){m.warn("index out of range",v,F);continue}if(U!==void 0)R.length>1&&m.warn("Insertion & removal are incompatible with edits to the same index.",v,F),a(U)?L.push(F):N?(U==="add"&&(U={}),_.splice(F,0,U),h&&h.splice(F,0,{})):m.warn("Unrecognized full object edit value",v,F,U),S===-1&&(S=F);else for(O=0;O<R.length;O++)X=v+"["+F+"].",c(_[F],R[O],X).set(D[R[O]])}for(P=L.length-1;P>=0;P--)_.splice(L[P],1),h&&h.splice(L[P],1);if(_.length?T||f.set(_):f.set(null),g)return!1;if(d(A,b),y!==s){var j;if(S===-1)j=w;else{for(k=Math.max(_.length,k),j=[],P=0;P<w.length&&(F=w[P],!(F>=S));P++)j.push(F);for(P=S;P<k;P++)j.push(P)}for(P=0;P<j.length;P++)y(n,j[P])}else p(n);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("has-hover"),x=e("../lib"),t=x.nestedProperty,i=e("../lib/events"),a=e("../lib/queue"),r=e("../registry"),n=e("./plot_schema"),f=e("../plots/plots"),l=e("../plots/cartesian/axes"),o=e("../components/drawing"),c=e("../components/color"),v=e("../plots/cartesian/graph_interact").initInteractions,d=e("../constants/xmlns_namespaces"),p=e("../plots/cartesian/select").clearSelect,y=e("./plot_config").dfltConfig,g=e("./manage_arrays"),A=e("./helpers"),b=e("./subroutines"),M=e("./edit_types"),w=e("../plots/cartesian/constants").AX_NAME_PATTERN,T=0,_=5;function h(Pe,Je,it,ht){var zt;if(Pe=x.getGraphDiv(Pe),i.init(Pe),x.isPlainObject(Je)){var Lt=Je;Je=Lt.data,it=Lt.layout,ht=Lt.config,zt=Lt.frames}var Vt=i.triggerHandler(Pe,"plotly_beforeplot",[Je,it,ht]);if(Vt===!1)return Promise.reject();!Je&&!it&&!x.isPlotDiv(Pe)&&x.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Pe);function $t(){if(zt)return B.addFrames(Pe,zt)}O(Pe,ht),it||(it={}),u.select(Pe).classed("js-plotly-plot",!0),o.makeTester(),Array.isArray(Pe._promises)||(Pe._promises=[]);var Ht=(Pe.data||[]).length===0&&Array.isArray(Je);Array.isArray(Je)&&(A.cleanData(Je),Ht?Pe.data=Je:Pe.data.push.apply(Pe.data,Je),Pe.empty=!1),(!Pe.layout||Ht)&&(Pe.layout=A.cleanLayout(it)),f.supplyDefaults(Pe);var tr=Pe._fullLayout,qe=tr._has("cartesian");tr._replotting=!0,(Ht||tr._shouldCreateBgLayer)&&(et(Pe),tr._shouldCreateBgLayer&&delete tr._shouldCreateBgLayer),o.initGradients(Pe),o.initPatterns(Pe),Ht&&l.saveShowSpikeInitial(Pe);var xt=!Pe.calcdata||Pe.calcdata.length!==(Pe._fullData||[]).length;xt&&f.doCalcdata(Pe);for(var Rt=0;Rt<Pe.calcdata.length;Rt++)Pe.calcdata[Rt][0].trace=Pe._fullData[Rt];Pe._context.responsive?Pe._responsiveChartHandler||(Pe._responsiveChartHandler=function(){x.isHidden(Pe)||f.resize(Pe)},window.addEventListener("resize",Pe._responsiveChartHandler)):x.clearResponsive(Pe);var fr=x.extendFlat({},tr._size),br=0;function pr(){for(var Fe=tr._basePlotModules,Ke=0;Ke<Fe.length;Ke++)Fe[Ke].drawFramework&&Fe[Ke].drawFramework(Pe);!tr._glcanvas&&tr._has("gl")&&(tr._glcanvas=tr._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(yt){return yt.key}),tr._glcanvas.enter().append("canvas").attr("class",function(yt){return"gl-canvas gl-canvas-"+yt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var tt=Pe._context.plotGlPixelRatio;if(tr._glcanvas){tr._glcanvas.attr("width",tr.width*tt).attr("height",tr.height*tt).style("width",tr.width+"px").style("height",tr.height+"px");var ut=tr._glcanvas.data()[0].regl;if(ut&&(Math.floor(tr.width*tt)!==ut._gl.drawingBufferWidth||Math.floor(tr.height*tt)!==ut._gl.drawingBufferHeight)){var ct="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(br)x.error(ct);else return x.log(ct+" Clearing graph and plotting again."),f.cleanPlot([],{},Pe._fullData,tr),f.supplyDefaults(Pe),tr=Pe._fullLayout,f.doCalcdata(Pe),br++,pr()}}return tr.modebar.orientation==="h"?tr._modebardiv.style("height",null).style("width","100%"):tr._modebardiv.style("width",null).style("height",tr.height+"px"),f.previousPromises(Pe)}function Tr(){if(f.clearAutoMarginIds(Pe),b.drawMarginPushers(Pe),l.allowAutoMargin(Pe),tr._has("pie"))for(var Fe=Pe._fullData,Ke=0;Ke<Fe.length;Ke++){var tt=Fe[Ke];tt.type==="pie"&&tt.automargin&&f.allowAutoMargin(Pe,"pie."+tt.uid+".automargin")}return f.doAutoMargin(Pe),f.previousPromises(Pe)}function Nr(){if(!!f.didMarginChange(fr,tr._size))return x.syncOrAsync([Tr,b.layoutStyles],Pe)}function Ir(){if(!xt){lr();return}return x.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),lr],Pe)}function lr(){Pe._transitioning||(b.doAutoRangeAndConstraints(Pe),Ht&&l.saveRangeInitial(Pe),r.getComponentMethod("rangeslider","calcAutorange")(Pe))}function Yr(){return l.draw(Pe,Ht?"":"redraw")}var nt=[f.previousPromises,$t,pr,Tr,Nr];qe&&nt.push(Ir),nt.push(b.layoutStyles),qe&&nt.push(Yr,function(Ke){Ke._fullLayout._insideTickLabelsAutorange&&oe(Ke,Ke._fullLayout._insideTickLabelsAutorange).then(function(){Ke._fullLayout._insideTickLabelsAutorange=void 0})}),nt.push(b.drawData,b.finalDraw,v,f.addLinks,f.rehover,f.redrag,f.doAutoMargin,Ae,f.previousPromises);function Ae(Fe){Fe._fullLayout._insideTickLabelsAutorange&&Ht&&l.saveRangeInitial(Fe,!0)}var Ee=x.syncOrAsync(nt,Pe);return(!Ee||!Ee.then)&&(Ee=Promise.resolve()),Ee.then(function(){return L(Pe),Pe})}function L(Pe){var Je=Pe._fullLayout;Je._redrawFromAutoMarginCount?Je._redrawFromAutoMarginCount--:Pe.emit("plotly_afterplot")}function S(Pe){return x.extendFlat(y,Pe)}function k(Pe,Je){try{Pe._fullLayout._paper.style("background",Je)}catch(it){x.error(it)}}function P(Pe,Je){var it=c.combine(Je,"white");k(Pe,it)}function O(Pe,Je){if(!Pe._context){Pe._context=x.extendDeep({},y);var it=u.select("base");Pe._context._baseUrl=it.size()&&it.attr("href")?window.location.href.split("#")[0]:""}var ht=Pe._context,zt,Lt,Vt;if(Je){for(Lt=Object.keys(Je),zt=0;zt<Lt.length;zt++)Vt=Lt[zt],!(Vt==="editable"||Vt==="edits")&&Vt in ht&&(Vt==="setBackground"&&Je[Vt]==="opaque"?ht[Vt]=P:ht[Vt]=Je[Vt]);Je.plot3dPixelRatio&&!ht.plotGlPixelRatio&&(ht.plotGlPixelRatio=ht.plot3dPixelRatio);var $t=Je.editable;if($t!==void 0)for(ht.editable=$t,Lt=Object.keys(ht.edits),zt=0;zt<Lt.length;zt++)ht.edits[Lt[zt]]=$t;if(Je.edits)for(Lt=Object.keys(Je.edits),zt=0;zt<Lt.length;zt++)Vt=Lt[zt],Vt in ht.edits&&(ht.edits[Vt]=Je.edits[Vt]);ht._exportedPlot=Je._exportedPlot}ht.staticPlot&&(ht.editable=!1,ht.edits={},ht.autosizable=!1,ht.scrollZoom=!1,ht.doubleClick=!1,ht.showTips=!1,ht.showLink=!1,ht.displayModeBar=!1),ht.displayModeBar==="hover"&&!m&&(ht.displayModeBar=!0),(ht.setBackground==="transparent"||typeof ht.setBackground!="function")&&(ht.setBackground=k),ht._hasZeroHeight=ht._hasZeroHeight||Pe.clientHeight===0,ht._hasZeroWidth=ht._hasZeroWidth||Pe.clientWidth===0;var Ht=ht.scrollZoom,tr=ht._scrollZoom={};if(Ht===!0)tr.cartesian=1,tr.gl3d=1,tr.geo=1,tr.mapbox=1;else if(typeof Ht=="string"){var qe=Ht.split("+");for(zt=0;zt<qe.length;zt++)tr[qe[zt]]=1}else Ht!==!1&&(tr.gl3d=1,tr.geo=1,tr.mapbox=1)}function F(Pe){if(Pe=x.getGraphDiv(Pe),!x.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe);return A.cleanData(Pe.data),A.cleanLayout(Pe.layout),Pe.calcdata=void 0,B._doPlot(Pe).then(function(){return Pe.emit("plotly_redraw"),Pe})}function D(Pe,Je,it,ht){return Pe=x.getGraphDiv(Pe),f.cleanPlot([],{},Pe._fullData||[],Pe._fullLayout||{}),f.purge(Pe),B._doPlot(Pe,Je,it,ht)}function R(Pe,Je){var it=Je+1,ht=[],zt,Lt;for(zt=0;zt<Pe.length;zt++)Lt=Pe[zt],Lt<0?ht.push(it+Lt):ht.push(Lt);return ht}function U(Pe,Je,it){var ht,zt;for(ht=0;ht<Je.length;ht++){if(zt=Je[ht],zt!==parseInt(zt,10))throw new Error("all values in "+it+" must be integers");if(zt>=Pe.data.length||zt<-Pe.data.length)throw new Error(it+" must be valid indices for gd.data.");if(Je.indexOf(zt,ht+1)>-1||zt>=0&&Je.indexOf(-Pe.data.length+zt)>-1||zt<0&&Je.indexOf(Pe.data.length+zt)>-1)throw new Error("each index in "+it+" must be unique.")}}function N(Pe,Je,it){if(!Array.isArray(Pe.data))throw new Error("gd.data must be an array.");if(typeof Je=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(Je)||(Je=[Je]),U(Pe,Je,"currentIndices"),typeof it!="undefined"&&!Array.isArray(it)&&(it=[it]),typeof it!="undefined"&&U(Pe,it,"newIndices"),typeof it!="undefined"&&Je.length!==it.length)throw new Error("current and new indices must be of equal length.")}function X(Pe,Je,it){var ht,zt;if(!Array.isArray(Pe.data))throw new Error("gd.data must be an array.");if(typeof Je=="undefined")throw new Error("traces must be defined.");for(Array.isArray(Je)||(Je=[Je]),ht=0;ht<Je.length;ht++)if(zt=Je[ht],typeof zt!="object"||Array.isArray(zt)||zt===null)throw new Error("all values in traces array must be non-array objects");if(typeof it!="undefined"&&!Array.isArray(it)&&(it=[it]),typeof it!="undefined"&&it.length!==Je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function j(Pe,Je,it,ht){var zt=x.isPlainObject(ht);if(!Array.isArray(Pe.data))throw new Error("gd.data must be an array");if(!x.isPlainObject(Je))throw new Error("update must be a key:value object");if(typeof it=="undefined")throw new Error("indices must be an integer or array of integers");U(Pe,it,"indices");for(var Lt in Je){if(!Array.isArray(Je[Lt])||Je[Lt].length!==it.length)throw new Error("attribute "+Lt+" must be an array of length equal to indices array length");if(zt&&(!(Lt in ht)||!Array.isArray(ht[Lt])||ht[Lt].length!==Je[Lt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function ee(Pe,Je,it,ht){var zt=x.isPlainObject(ht),Lt=[],Vt,$t,Ht,tr,qe;Array.isArray(it)||(it=[it]),it=R(it,Pe.data.length-1);for(var xt in Je)for(var Rt=0;Rt<it.length;Rt++){if(Vt=Pe.data[it[Rt]],Ht=t(Vt,xt),$t=Ht.get(),tr=Je[xt][Rt],!x.isArrayOrTypedArray(tr))throw new Error("attribute: "+xt+" index: "+Rt+" must be an array");if(!x.isArrayOrTypedArray($t))throw new Error("cannot extend missing or non-array attribute: "+xt);if($t.constructor!==tr.constructor)throw new Error("cannot extend array with an array of a different type: "+xt);qe=zt?ht[xt][Rt]:ht,s(qe)||(qe=-1),Lt.push({prop:Ht,target:$t,insert:tr,maxp:Math.floor(qe)})}return Lt}function q(Pe,Je,it,ht,zt){j(Pe,Je,it,ht);for(var Lt=ee(Pe,Je,it,ht),Vt={},$t={},Ht=0;Ht<Lt.length;Ht++){var tr=Lt[Ht].prop,qe=Lt[Ht].maxp,xt=zt(Lt[Ht].target,Lt[Ht].insert,qe);tr.set(xt[0]),Array.isArray(Vt[tr.astr])||(Vt[tr.astr]=[]),Vt[tr.astr].push(xt[1]),Array.isArray($t[tr.astr])||($t[tr.astr]=[]),$t[tr.astr].push(Lt[Ht].target.length)}return{update:Vt,maxPoints:$t}}function G(Pe,Je){var it=new Pe.constructor(Pe.length+Je.length);return it.set(Pe),it.set(Je,Pe.length),it}function J(Pe,Je,it,ht){Pe=x.getGraphDiv(Pe);function zt(Ht,tr,qe){var xt,Rt;if(x.isTypedArray(Ht))if(qe<0){var fr=new Ht.constructor(0),br=G(Ht,tr);qe<0?(xt=br,Rt=fr):(xt=fr,Rt=br)}else if(xt=new Ht.constructor(qe),Rt=new Ht.constructor(Ht.length+tr.length-qe),qe===tr.length)xt.set(tr),Rt.set(Ht);else if(qe<tr.length){var pr=tr.length-qe;xt.set(tr.subarray(pr)),Rt.set(Ht),Rt.set(tr.subarray(0,pr),Ht.length)}else{var Tr=qe-tr.length,Nr=Ht.length-Tr;xt.set(Ht.subarray(Nr)),xt.set(tr,Tr),Rt.set(Ht.subarray(0,Nr))}else xt=Ht.concat(tr),Rt=qe>=0&&qe<xt.length?xt.splice(0,xt.length-qe):[];return[xt,Rt]}var Lt=q(Pe,Je,it,ht,zt),Vt=B.redraw(Pe),$t=[Pe,Lt.update,it,Lt.maxPoints];return a.add(Pe,B.prependTraces,$t,J,arguments),Vt}function le(Pe,Je,it,ht){Pe=x.getGraphDiv(Pe);function zt(Ht,tr,qe){var xt,Rt;if(x.isTypedArray(Ht))if(qe<=0){var fr=new Ht.constructor(0),br=G(tr,Ht);qe<0?(xt=br,Rt=fr):(xt=fr,Rt=br)}else if(xt=new Ht.constructor(qe),Rt=new Ht.constructor(Ht.length+tr.length-qe),qe===tr.length)xt.set(tr),Rt.set(Ht);else if(qe<tr.length){var pr=tr.length-qe;xt.set(tr.subarray(0,pr)),Rt.set(tr.subarray(pr)),Rt.set(Ht,pr)}else{var Tr=qe-tr.length;xt.set(tr),xt.set(Ht.subarray(0,Tr),tr.length),Rt.set(Ht.subarray(Tr))}else xt=tr.concat(Ht),Rt=qe>=0&&qe<xt.length?xt.splice(qe,xt.length):[];return[xt,Rt]}var Lt=q(Pe,Je,it,ht,zt),Vt=B.redraw(Pe),$t=[Pe,Lt.update,it,Lt.maxPoints];return a.add(Pe,B.extendTraces,$t,le,arguments),Vt}function fe(Pe,Je,it){Pe=x.getGraphDiv(Pe);var ht=[],zt=B.deleteTraces,Lt=fe,Vt=[Pe,ht],$t=[Pe,Je],Ht,tr;for(X(Pe,Je,it),Array.isArray(Je)||(Je=[Je]),Je=Je.map(function(qe){return x.extendFlat({},qe)}),A.cleanData(Je),Ht=0;Ht<Je.length;Ht++)Pe.data.push(Je[Ht]);for(Ht=0;Ht<Je.length;Ht++)ht.push(-Je.length+Ht);if(typeof it=="undefined")return tr=B.redraw(Pe),a.add(Pe,zt,Vt,Lt,$t),tr;Array.isArray(it)||(it=[it]);try{N(Pe,ht,it)}catch(qe){throw Pe.data.splice(Pe.data.length-Je.length,Je.length),qe}return a.startSequence(Pe),a.add(Pe,zt,Vt,Lt,$t),tr=B.moveTraces(Pe,ht,it),a.stopSequence(Pe),tr}function se(Pe,Je){Pe=x.getGraphDiv(Pe);var it=[],ht=B.addTraces,zt=se,Lt=[Pe,it,Je],Vt=[Pe,Je],$t,Ht;if(typeof Je=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Je)||(Je=[Je]),U(Pe,Je,"indices"),Je=R(Je,Pe.data.length-1),Je.sort(x.sorterDes),$t=0;$t<Je.length;$t+=1)Ht=Pe.data.splice(Je[$t],1)[0],it.push(Ht);var tr=B.redraw(Pe);return a.add(Pe,ht,Lt,zt,Vt),tr}function V(Pe,Je,it){Pe=x.getGraphDiv(Pe);var ht=[],zt=[],Lt=V,Vt=V,$t=[Pe,it,Je],Ht=[Pe,Je,it],tr;if(N(Pe,Je,it),Je=Array.isArray(Je)?Je:[Je],typeof it=="undefined")for(it=[],tr=0;tr<Je.length;tr++)it.push(-Je.length+tr);for(it=Array.isArray(it)?it:[it],Je=R(Je,Pe.data.length-1),it=R(it,Pe.data.length-1),tr=0;tr<Pe.data.length;tr++)Je.indexOf(tr)===-1&&ht.push(Pe.data[tr]);for(tr=0;tr<Je.length;tr++)zt.push({newIndex:it[tr],trace:Pe.data[Je[tr]]});for(zt.sort(function(xt,Rt){return xt.newIndex-Rt.newIndex}),tr=0;tr<zt.length;tr+=1)ht.splice(zt[tr].newIndex,0,zt[tr].trace);Pe.data=ht;var qe=B.redraw(Pe);return a.add(Pe,Lt,$t,Vt,Ht),qe}function Y(Pe,Je,it,ht){Pe=x.getGraphDiv(Pe),A.clearPromiseQueue(Pe);var zt={};if(typeof Je=="string")zt[Je]=it;else if(x.isPlainObject(Je))zt=x.extendFlat({},Je),ht===void 0&&(ht=it);else return x.warn("Restyle fail.",Je,it,ht),Promise.reject();Object.keys(zt).length&&(Pe.changed=!0);var Lt=A.coerceTraceIndices(Pe,ht),Vt=ae(Pe,zt,Lt),$t=Vt.flags;$t.calc&&(Pe.calcdata=void 0),$t.clearAxisTypes&&A.clearAxisTypes(Pe,Lt,{});var Ht=[];$t.fullReplot?Ht.push(B._doPlot):(Ht.push(f.previousPromises),f.supplyDefaults(Pe),$t.markerSize&&(f.doCalcdata(Pe),xe(Ht)),$t.style&&Ht.push(b.doTraceStyle),$t.colorbars&&Ht.push(b.doColorBars),Ht.push(L)),Ht.push(f.rehover,f.redrag),a.add(Pe,Y,[Pe,Vt.undoit,Vt.traces],Y,[Pe,Vt.redoit,Vt.traces]);var tr=x.syncOrAsync(Ht,Pe);return(!tr||!tr.then)&&(tr=Promise.resolve()),tr.then(function(){return Pe.emit("plotly_restyle",Vt.eventData),Pe})}function ne(Pe){return Pe===void 0?null:Pe}function te(Pe,Je){return Je?function(it,ht,zt){var Lt=t(it,ht),Vt=Lt.set;return Lt.set=function($t){var Ht=(zt||"")+ht;K(Ht,Lt.get(),$t,Pe),Vt($t)},Lt}:t}function K(Pe,Je,it,ht){if(Array.isArray(Je)||Array.isArray(it))for(var zt=Array.isArray(Je)?Je:[],Lt=Array.isArray(it)?it:[],Vt=Math.max(zt.length,Lt.length),$t=0;$t<Vt;$t++)K(Pe+"["+$t+"]",zt[$t],Lt[$t],ht);else if(x.isPlainObject(Je)||x.isPlainObject(it)){var Ht=x.isPlainObject(Je)?Je:{},tr=x.isPlainObject(it)?it:{},qe=x.extendFlat({},Ht,tr);for(var xt in qe)K(Pe+"."+xt,Ht[xt],tr[xt],ht)}else ht[Pe]===void 0&&(ht[Pe]=ne(Je))}function $(Pe,Je,it){for(var ht in it){var zt=t(Pe,ht);K(ht,zt.get(),it[ht],Je)}}function ae(Pe,Je,it){var ht=Pe._fullLayout,zt=Pe._fullData,Lt=Pe.data,Vt=ht._guiEditing,$t=te(ht._preGUI,Vt),Ht=x.extendDeepAll({},Je),tr;ie(Je);var qe=M.traceFlags(),xt={},Rt={},fr;function br(){return it.map(function(){})}function pr(ir){var xr=l.id2name(ir);fr.indexOf(xr)===-1&&fr.push(xr)}function Tr(ir){return"LAYOUT"+ir+".autorange"}function Nr(ir){return"LAYOUT"+ir+".range"}function Ir(ir){for(var xr=ir;xr<zt.length;xr++)if(zt[xr]._input===Lt[ir])return zt[xr]}function lr(ir,xr,Qr){if(Array.isArray(ir)){ir.forEach(function(en){lr(en,xr,Qr)});return}if(!(ir in Je||A.hasParent(Je,ir))){var Gr;if(ir.substr(0,6)==="LAYOUT")Gr=$t(Pe.layout,ir.replace("LAYOUT",""));else{var Br=it[Qr],kr=ht._tracePreGUI[Ir(Br)._fullInput.uid];Gr=te(kr,Vt)(Lt[Br],ir)}ir in Rt||(Rt[ir]=br()),Rt[ir][Qr]===void 0&&(Rt[ir][Qr]=ne(Gr.get())),xr!==void 0&&Gr.set(xr)}}function Yr(ir){return function(xr){return zt[xr][ir]}}function nt(ir){return function(xr,Qr){return xr===!1?zt[it[Qr]][ir]:null}}for(var Ae in Je){if(A.hasParent(Je,Ae))throw new Error("cannot set "+Ae+" and a parent attribute simultaneously");var Ee=Je[Ae],Fe,Ke,tt,ut,ct,yt;if((Ae==="autobinx"||Ae==="autobiny")&&(Ae=Ae.charAt(Ae.length-1)+"bins",Array.isArray(Ee)?Ee=Ee.map(nt(Ae)):Ee===!1?Ee=it.map(Yr(Ae)):Ee=null),xt[Ae]=Ee,Ae.substr(0,6)==="LAYOUT"){tt=$t(Pe.layout,Ae.replace("LAYOUT","")),Rt[Ae]=[ne(tt.get())],tt.set(Array.isArray(Ee)?Ee[0]:Ee),qe.calc=!0;continue}for(Rt[Ae]=br(),tr=0;tr<it.length;tr++){Fe=Lt[it[tr]],Ke=Ir(it[tr]);var kt=ht._tracePreGUI[Ke._fullInput.uid];if(tt=te(kt,Vt)(Fe,Ae),ut=tt.get(),ct=Array.isArray(Ee)?Ee[tr%Ee.length]:Ee,ct!==void 0){var jt=tt.parts[tt.parts.length-1],Mr=Ae.substr(0,Ae.length-jt.length-1),Sr=Mr?Mr+".":"",Lr=Mr?t(Ke,Mr).get():Ke;if(yt=n.getTraceValObject(Ke,tt.parts),yt&&yt.impliedEdits&&ct!==null)for(var Ar in yt.impliedEdits)lr(x.relativeAttr(Ae,Ar),yt.impliedEdits[Ar],tr);else if((jt==="thicknessmode"||jt==="lenmode")&&ut!==ct&&(ct==="fraction"||ct==="pixels")&&Lr){var Ur=ht._size,fn=Lr.orient,Cr=fn==="top"||fn==="bottom";if(jt==="thicknessmode"){var _r=Cr?Ur.h:Ur.w;lr(Sr+"thickness",Lr.thickness*(ct==="fraction"?1/_r:_r),tr)}else{var En=Cr?Ur.w:Ur.h;lr(Sr+"len",Lr.len*(ct==="fraction"?1/En:En),tr)}}else if(Ae==="type"&&(ct==="pie"!=(ut==="pie")||ct==="funnelarea"!=(ut==="funnelarea"))){var Jr="x",Pr="y";(ct==="bar"||ut==="bar")&&Fe.orientation==="h"&&(Jr="y",Pr="x"),x.swapAttrs(Fe,["?","?src"],"labels",Jr),x.swapAttrs(Fe,["d?","?0"],"label",Jr),x.swapAttrs(Fe,["?","?src"],"values",Pr),ut==="pie"||ut==="funnelarea"?(t(Fe,"marker.color").set(t(Fe,"marker.colors").get()),ht._pielayer.selectAll("g.trace").remove()):r.traceIs(Fe,"cartesian")&&t(Fe,"marker.colors").set(t(Fe,"marker.color").get())}Rt[Ae][tr]=ne(ut);var vn=["swapxy","swapxyaxes","orientation","orientationaxes"];if(vn.indexOf(Ae)!==-1){if(Ae==="orientation"){tt.set(ct);var xn=Fe.x&&!Fe.y?"h":"v";if((tt.get()||xn)===Ke.orientation)continue}else Ae==="orientationaxes"&&(Fe.orientation={v:"h",h:"v"}[Ke.orientation]);A.swapXYData(Fe),qe.calc=qe.clearAxisTypes=!0}else f.dataArrayContainers.indexOf(tt.parts[0])!==-1?(A.manageArrayContainers(tt,ct,Rt),qe.calc=!0):(yt?yt.arrayOk&&!r.traceIs(Ke,"regl")&&(x.isArrayOrTypedArray(ct)||x.isArrayOrTypedArray(ut))?qe.calc=!0:M.update(qe,yt):qe.calc=!0,tt.set(ct))}}if(["swapxyaxes","orientationaxes"].indexOf(Ae)!==-1&&l.swap(Pe,it),Ae==="orientationaxes"){var qr=t(Pe.layout,"hovermode"),st=qr.get();st==="x"?qr.set("y"):st==="y"?qr.set("x"):st==="x unified"?qr.set("y unified"):st==="y unified"&&qr.set("x unified")}if(["orientation","type"].indexOf(Ae)!==-1){for(fr=[],tr=0;tr<it.length;tr++){var Bt=Lt[it[tr]];r.traceIs(Bt,"cartesian")&&(pr(Bt.xaxis||"x"),pr(Bt.yaxis||"y"))}lr(fr.map(Tr),!0,0),lr(fr.map(Nr),[0,1],0)}}return(qe.calc||qe.plot)&&(qe.fullReplot=!0),{flags:qe,undoit:Rt,redoit:xt,traces:it,eventData:x.extendDeepNoArrays([],[Ht,it])}}function ie(Pe){var Je=x.counterRegex("axis",".title",!1,!1),it=/colorbar\.title$/,ht=Object.keys(Pe),zt,Lt,Vt;for(zt=0;zt<ht.length;zt++)Lt=ht[zt],Vt=Pe[Lt],(Lt==="title"||Je.test(Lt)||it.test(Lt))&&(typeof Vt=="string"||typeof Vt=="number")?$t(Lt,Lt.replace("title","title.text")):Lt.indexOf("titlefont")>-1&&Lt.indexOf("grouptitlefont")===-1?$t(Lt,Lt.replace("titlefont","title.font")):Lt.indexOf("titleposition")>-1?$t(Lt,Lt.replace("titleposition","title.position")):Lt.indexOf("titleside")>-1?$t(Lt,Lt.replace("titleside","title.side")):Lt.indexOf("titleoffset")>-1&&$t(Lt,Lt.replace("titleoffset","title.offset"));function $t(Ht,tr){Pe[tr]=Pe[Ht],delete Pe[Ht]}}function oe(Pe,Je,it){Pe=x.getGraphDiv(Pe),A.clearPromiseQueue(Pe);var ht={};if(typeof Je=="string")ht[Je]=it;else if(x.isPlainObject(Je))ht=x.extendFlat({},Je);else return x.warn("Relayout fail.",Je,it),Promise.reject();Object.keys(ht).length&&(Pe.changed=!0);var zt=Ce(Pe,ht),Lt=zt.flags;Lt.calc&&(Pe.calcdata=void 0);var Vt=[f.previousPromises];Lt.layoutReplot?Vt.push(b.layoutReplot):Object.keys(ht).length&&(ue(Pe,Lt,zt)||f.supplyDefaults(Pe),Lt.legend&&Vt.push(b.doLegend),Lt.layoutstyle&&Vt.push(b.layoutStyles),Lt.axrange&&xe(Vt,zt.rangesAltered),Lt.ticks&&Vt.push(b.doTicksRelayout),Lt.modebar&&Vt.push(b.doModeBar),Lt.camera&&Vt.push(b.doCamera),Lt.colorbars&&Vt.push(b.doColorBars),Vt.push(L)),Vt.push(f.rehover,f.redrag),a.add(Pe,oe,[Pe,zt.undoit],oe,[Pe,zt.redoit]);var $t=x.syncOrAsync(Vt,Pe);return(!$t||!$t.then)&&($t=Promise.resolve(Pe)),$t.then(function(){return Pe.emit("plotly_relayout",zt.eventData),Pe})}function ue(Pe,Je,it){var ht=Pe._fullLayout;if(!Je.axrange)return!1;for(var zt in Je)if(zt!=="axrange"&&Je[zt])return!1;for(var Lt in it.rangesAltered){var Vt=l.id2name(Lt),$t=Pe.layout[Vt],Ht=ht[Vt];if(Ht.autorange=$t.autorange,$t.range&&(Ht.range=$t.range.slice()),Ht.cleanRange(),Ht._matchGroup){for(var tr in Ht._matchGroup)if(tr!==Lt){var qe=ht[l.id2name(tr)];qe.autorange=Ht.autorange,qe.range=Ht.range.slice(),qe._input.range=Ht.range.slice()}}}return!0}function xe(Pe,Je){var it=Je?function(ht){var zt=[],Lt=!0;for(var Vt in Je){var $t=l.getFromId(ht,Vt);if(zt.push(Vt),($t.ticklabelposition||"").indexOf("inside")!==-1&&$t._anchorAxis&&zt.push($t._anchorAxis._id),$t._matchGroup)for(var Ht in $t._matchGroup)Je[Ht]||zt.push(Ht);$t.automargin&&(Lt=!1)}return l.draw(ht,zt,{skipTitle:Lt})}:function(ht){return l.draw(ht,"redraw")};Pe.push(p,b.doAutoRangeAndConstraints,it,b.drawData,b.finalDraw)}var he=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,me=/^[xyz]axis[0-9]*\.autorange$/,be=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Ce(Pe,Je){var it=Pe.layout,ht=Pe._fullLayout,zt=ht._guiEditing,Lt=te(ht._preGUI,zt),Vt=Object.keys(Je),$t=l.list(Pe),Ht=x.extendDeepAll({},Je),tr={},qe,xt,Rt;for(ie(Je),Vt=Object.keys(Je),xt=0;xt<Vt.length;xt++)if(Vt[xt].indexOf("allaxes")===0){for(Rt=0;Rt<$t.length;Rt++){var fr=$t[Rt]._id.substr(1),br=fr.indexOf("scene")!==-1?fr+".":"",pr=Vt[xt].replace("allaxes",br+$t[Rt]._name);Je[pr]||(Je[pr]=Je[Vt[xt]])}delete Je[Vt[xt]]}var Tr=M.layoutFlags(),Nr={},Ir={};function lr(Br,kr){if(Array.isArray(Br)){Br.forEach(function(Zn){lr(Zn,kr)});return}if(!(Br in Je||A.hasParent(Je,Br))){var en=Lt(it,Br);Br in Ir||(Ir[Br]=ne(en.get())),kr!==void 0&&en.set(kr)}}var Yr={},nt;function Ae(Br){var kr=l.name2id(Br.split(".")[0]);return Yr[kr]=1,kr}for(var Ee in Je){if(A.hasParent(Je,Ee))throw new Error("cannot set "+Ee+" and a parent attribute simultaneously");for(var Fe=Lt(it,Ee),Ke=Je[Ee],tt=Fe.parts.length,ut=tt-1;ut>0&&typeof Fe.parts[ut]!="string";)ut--;var ct=Fe.parts[ut],yt=Fe.parts[ut-1]+"."+ct,kt=Fe.parts.slice(0,ut).join("."),jt=t(Pe.layout,kt).get(),Mr=t(ht,kt).get(),Sr=Fe.get();if(Ke!==void 0){Nr[Ee]=Ke,Ir[Ee]=ct==="reverse"?Ke:ne(Sr);var Lr=n.getLayoutValObject(ht,Fe.parts);if(Lr&&Lr.impliedEdits&&Ke!==null)for(var Ar in Lr.impliedEdits)lr(x.relativeAttr(Ee,Ar),Lr.impliedEdits[Ar]);if(["width","height"].indexOf(Ee)!==-1)if(Ke){lr("autosize",null);var Ur=Ee==="height"?"width":"height";lr(Ur,ht[Ur])}else ht[Ee]=Pe._initialAutoSize[Ee];else if(Ee==="autosize")lr("width",Ke?null:ht.width),lr("height",Ke?null:ht.height);else if(yt.match(he))Ae(yt),t(ht,kt+"._inputRange").set(null);else if(yt.match(me)){Ae(yt),t(ht,kt+"._inputRange").set(null);var fn=t(ht,kt).get();fn._inputDomain&&(fn._input.domain=fn._inputDomain.slice())}else yt.match(be)&&t(ht,kt+"._inputDomain").set(null);if(ct==="type"){nt=jt;var Cr=Mr.type==="linear"&&Ke==="log",_r=Mr.type==="log"&&Ke==="linear";if(Cr||_r){if(!nt||!nt.range)lr(kt+".autorange",!0);else if(Mr.autorange)Cr&&(nt.range=nt.range[1]>nt.range[0]?[1,2]:[2,1]);else{var En=nt.range[0],Jr=nt.range[1];Cr?(En<=0&&Jr<=0&&lr(kt+".autorange",!0),En<=0?En=Jr/1e6:Jr<=0&&(Jr=En/1e6),lr(kt+".range[0]",Math.log(En)/Math.LN10),lr(kt+".range[1]",Math.log(Jr)/Math.LN10)):(lr(kt+".range[0]",Math.pow(10,En)),lr(kt+".range[1]",Math.pow(10,Jr)))}Array.isArray(ht._subplots.polar)&&ht._subplots.polar.length&&ht[Fe.parts[0]]&&Fe.parts[1]==="radialaxis"&&delete ht[Fe.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(Pe,Mr,Ke,lr),r.getComponentMethod("images","convertCoords")(Pe,Mr,Ke,lr)}else lr(kt+".autorange",!0),lr(kt+".range",null);t(ht,kt+"._inputRange").set(null)}else if(ct.match(w)){var Pr=t(ht,Ee).get(),vn=(Ke||{}).type;(!vn||vn==="-")&&(vn="linear"),r.getComponentMethod("annotations","convertCoords")(Pe,Pr,vn,lr),r.getComponentMethod("images","convertCoords")(Pe,Pr,vn,lr)}var xn=g.containerArrayMatch(Ee);if(xn){qe=xn.array,xt=xn.index;var qr=xn.property,st=Lr||{editType:"calc"};xt!==""&&qr===""&&(g.isAddVal(Ke)?Ir[Ee]=null:g.isRemoveVal(Ke)?Ir[Ee]=(t(it,qe).get()||[])[xt]:x.warn("unrecognized full object value",Je)),M.update(Tr,st),tr[qe]||(tr[qe]={});var Bt=tr[qe][xt];Bt||(Bt=tr[qe][xt]={}),Bt[qr]=Ke,delete Je[Ee]}else ct==="reverse"?(jt.range?jt.range.reverse():(lr(kt+".autorange",!0),jt.range=[1,0]),Mr.autorange?Tr.calc=!0:Tr.plot=!0):(ht._has("scatter-like")&&ht._has("regl")&&Ee==="dragmode"&&(Ke==="lasso"||Ke==="select")&&!(Sr==="lasso"||Sr==="select")||ht._has("gl2d")?Tr.plot=!0:Lr?M.update(Tr,Lr):Tr.calc=!0,Fe.set(Ke))}}for(qe in tr){var ir=g.applyContainerArrayChanges(Pe,Lt(it,qe),tr[qe],Tr,Lt);ir||(Tr.plot=!0)}for(var xr in Yr){nt=l.getFromId(Pe,xr);var Qr=nt&&nt._constraintGroup;if(Qr){Tr.calc=!0;for(var Gr in Qr)Yr[Gr]||(l.getFromId(Pe,Gr)._constraintShrinkable=!0)}}return(Se(Pe)||Je.height||Je.width)&&(Tr.plot=!0),(Tr.plot||Tr.calc)&&(Tr.layoutReplot=!0),{flags:Tr,rangesAltered:Yr,undoit:Ir,redoit:Nr,eventData:Ht}}function Se(Pe){var Je=Pe._fullLayout,it=Je.width,ht=Je.height;return Pe.layout.autosize&&f.plotAutoSize(Pe,Pe.layout,Je),Je.width!==it||Je.height!==ht}function Be(Pe,Je,it,ht){Pe=x.getGraphDiv(Pe),A.clearPromiseQueue(Pe),x.isPlainObject(Je)||(Je={}),x.isPlainObject(it)||(it={}),Object.keys(Je).length&&(Pe.changed=!0),Object.keys(it).length&&(Pe.changed=!0);var zt=A.coerceTraceIndices(Pe,ht),Lt=ae(Pe,x.extendFlat({},Je),zt),Vt=Lt.flags,$t=Ce(Pe,x.extendFlat({},it)),Ht=$t.flags;(Vt.calc||Ht.calc)&&(Pe.calcdata=void 0),Vt.clearAxisTypes&&A.clearAxisTypes(Pe,zt,it);var tr=[];Ht.layoutReplot?tr.push(b.layoutReplot):Vt.fullReplot?tr.push(B._doPlot):(tr.push(f.previousPromises),ue(Pe,Ht,$t)||f.supplyDefaults(Pe),Vt.style&&tr.push(b.doTraceStyle),(Vt.colorbars||Ht.colorbars)&&tr.push(b.doColorBars),Ht.legend&&tr.push(b.doLegend),Ht.layoutstyle&&tr.push(b.layoutStyles),Ht.axrange&&xe(tr,$t.rangesAltered),Ht.ticks&&tr.push(b.doTicksRelayout),Ht.modebar&&tr.push(b.doModeBar),Ht.camera&&tr.push(b.doCamera),tr.push(L)),tr.push(f.rehover,f.redrag),a.add(Pe,Be,[Pe,Lt.undoit,$t.undoit,Lt.traces],Be,[Pe,Lt.redoit,$t.redoit,Lt.traces]);var qe=x.syncOrAsync(tr,Pe);return(!qe||!qe.then)&&(qe=Promise.resolve(Pe)),qe.then(function(){return Pe.emit("plotly_update",{data:Lt.eventData,layout:$t.eventData}),Pe})}function Ye(Pe){return function(it){it._fullLayout._guiEditing=!0;var ht=Pe.apply(null,arguments);return it._fullLayout._guiEditing=!1,ht}}var Xe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Te=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ie(Pe,Je){for(var it=0;it<Je.length;it++){var ht=Je[it],zt=Pe.match(ht.pattern);if(zt){var Lt=zt[1]||"";return{head:Lt,tail:Pe.substr(Lt.length+1),attr:ht.attr}}}}function Ze(Pe,Je){var it=t(Je,Pe).get();if(it!==void 0)return it;var ht=Pe.split(".");for(ht.pop();ht.length>1;)if(ht.pop(),it=t(Je,ht.join(".")+".uirevision").get(),it!==void 0)return it;return Je.uirevision}function rt(Pe,Je){for(var it=0;it<Je.length;it++)if(Je[it]._fullInput.uid===Pe)return it;return-1}function Ge(Pe,Je,it){for(var ht=0;ht<Je.length;ht++)if(Je[ht].uid===Pe)return ht;return!Je[it]||Je[it].uid?-1:it}function ze(Pe,Je){var it=x.isPlainObject(Pe),ht=Array.isArray(Pe);return it||ht?(it&&x.isPlainObject(Je)||ht&&Array.isArray(Je))&&JSON.stringify(Pe)===JSON.stringify(Je):Pe===Je}function We(Pe,Je,it,ht){var zt=ht._preGUI,Lt,Vt,$t,Ht,tr,qe,xt,Rt,fr,br,pr=[],Tr={},Nr={};for(Lt in zt){if(tr=Ie(Lt,Xe),tr){if(fr=tr.head,br=tr.tail,Vt=tr.attr||fr+".uirevision",$t=t(ht,Vt).get(),Ht=$t&&Ze(Vt,Je),Ht&&Ht===$t){if(qe=zt[Lt],qe===null&&(qe=void 0),xt=t(Je,Lt),Rt=xt.get(),ze(Rt,qe)){Rt===void 0&&br==="autorange"&&pr.push(fr),xt.set(ne(t(ht,Lt).get()));continue}else if(br==="autorange"||br.substr(0,6)==="range["){var Ir=zt[fr+".range[0]"],lr=zt[fr+".range[1]"],Yr=zt[fr+".autorange"];if(Yr||Yr===null&&Ir===null&&lr===null){if(!(fr in Tr)){var nt=t(Je,fr).get();Tr[fr]=nt&&(nt.autorange||nt.autorange!==!1&&(!nt.range||nt.range.length!==2))}if(Tr[fr]){xt.set(ne(t(ht,Lt).get()));continue}}}}}else x.warn("unrecognized GUI edit: "+Lt);delete zt[Lt],tr&&tr.tail.substr(0,6)==="range["&&(Nr[tr.head]=1)}for(var Ae=0;Ae<pr.length;Ae++){var Ee=pr[Ae];if(Nr[Ee]){var Fe=t(Je,Ee).get();Fe&&delete Fe.autorange}}var Ke=ht._tracePreGUI;for(var tt in Ke){var ut=Ke[tt],ct=null,yt;for(Lt in ut){if(!ct){var kt=rt(tt,it);if(kt<0){delete Ke[tt];break}var jt=it[kt];yt=jt._fullInput;var Mr=Ge(tt,Pe,yt.index);if(Mr<0){delete Ke[tt];break}ct=Pe[Mr]}if(tr=Ie(Lt,Te),tr){if(tr.attr?($t=t(ht,tr.attr).get(),Ht=$t&&Ze(tr.attr,Je)):($t=yt.uirevision,Ht=ct.uirevision,Ht===void 0&&(Ht=Je.uirevision)),Ht&&Ht===$t&&(qe=ut[Lt],qe===null&&(qe=void 0),xt=t(ct,Lt),Rt=xt.get(),ze(Rt,qe))){xt.set(ne(t(yt,Lt).get()));continue}}else x.warn("unrecognized GUI edit: "+Lt+" in trace uid "+tt);delete ut[Lt]}}}function mt(Pe,Je,it,ht){var zt,Lt;function Vt(){return B.addFrames(Pe,zt)}Pe=x.getGraphDiv(Pe),A.clearPromiseQueue(Pe);var $t=Pe._fullData,Ht=Pe._fullLayout;if(!x.isPlotDiv(Pe)||!$t||!Ht)Lt=B.newPlot(Pe,Je,it,ht);else{if(x.isPlainObject(Je)){var tr=Je;Je=tr.data,it=tr.layout,ht=tr.config,zt=tr.frames}var qe=!1;if(ht){var xt=x.extendDeep({},Pe._context);Pe._context=void 0,O(Pe,ht),qe=Ut(xt,Pe._context)}Pe.data=Je||[],A.cleanData(Pe.data),Pe.layout=it||{},A.cleanLayout(Pe.layout),We(Pe.data,Pe.layout,$t,Ht),f.supplyDefaults(Pe,{skipUpdateCalc:!0});var Rt=Pe._fullData,fr=Pe._fullLayout,br=fr.datarevision===void 0,pr=fr.transition,Tr=Xt(Pe,Ht,fr,br,pr),Nr=Tr.newDataRevision,Ir=Ft(Pe,$t,Rt,br,pr,Nr);if(Se(Pe)&&(Tr.layoutReplot=!0),Ir.calc||Tr.calc){Pe.calcdata=void 0;for(var lr=Object.getOwnPropertyNames(fr),Yr=0;Yr<lr.length;Yr++){var nt=lr[Yr],Ae=nt.substring(0,5);if(Ae==="xaxis"||Ae==="yaxis"){var Ee=fr[nt]._emptyCategories;Ee&&Ee()}}}else f.supplyDefaultsUpdateCalc(Pe.calcdata,Rt);var Fe=[];if(zt&&(Pe._transitionData={},f.createTransitionData(Pe),Fe.push(Vt)),fr.transition&&!qe&&(Ir.anim||Tr.anim))Tr.ticks&&Fe.push(b.doTicksRelayout),f.doCalcdata(Pe),b.doAutoRangeAndConstraints(Pe),Fe.push(function(){return f.transitionFromReact(Pe,Ir,Tr,Ht)});else if(Ir.fullReplot||Tr.layoutReplot||qe)Pe._fullLayout._skipDefaults=!0,Fe.push(B._doPlot);else{for(var Ke in Tr.arrays){var tt=Tr.arrays[Ke];if(tt.length){var ut=r.getComponentMethod(Ke,"drawOne");if(ut!==x.noop)for(var ct=0;ct<tt.length;ct++)ut(Pe,tt[ct]);else{var yt=r.getComponentMethod(Ke,"draw");if(yt===x.noop)throw new Error("cannot draw components: "+Ke);yt(Pe)}}}Fe.push(f.previousPromises),Ir.style&&Fe.push(b.doTraceStyle),(Ir.colorbars||Tr.colorbars)&&Fe.push(b.doColorBars),Tr.legend&&Fe.push(b.doLegend),Tr.layoutstyle&&Fe.push(b.layoutStyles),Tr.axrange&&xe(Fe),Tr.ticks&&Fe.push(b.doTicksRelayout),Tr.modebar&&Fe.push(b.doModeBar),Tr.camera&&Fe.push(b.doCamera),Fe.push(L)}Fe.push(f.rehover,f.redrag),Lt=x.syncOrAsync(Fe,Pe),(!Lt||!Lt.then)&&(Lt=Promise.resolve(Pe))}return Lt.then(function(){return Pe.emit("plotly_react",{data:Je,layout:it}),Pe})}function Ft(Pe,Je,it,ht,zt,Lt){var Vt=Je.length===it.length;if(!zt&&!Vt)return{fullReplot:!0,calc:!0};var $t=M.traceFlags();$t.arrays={},$t.nChanges=0,$t.nChangesAnim=0;var Ht,tr;function qe(fr){var br=n.getTraceValObject(tr,fr);return!tr._module.animatable&&br.anim&&(br.anim=!1),br}var xt={getValObject:qe,flags:$t,immutable:ht,transition:zt,newDataRevision:Lt,gd:Pe},Rt={};for(Ht=0;Ht<Je.length;Ht++)if(it[Ht]){if(tr=it[Ht]._fullInput,f.hasMakesDataTransform(tr)&&(tr=it[Ht]),Rt[tr.uid])continue;Rt[tr.uid]=1,Pt(Je[Ht]._fullInput,tr,[],xt)}return($t.calc||$t.plot)&&($t.fullReplot=!0),zt&&$t.nChanges&&$t.nChangesAnim&&($t.anim=$t.nChanges===$t.nChangesAnim&&Vt?"all":"some"),$t}function Xt(Pe,Je,it,ht,zt){var Lt=M.layoutFlags();Lt.arrays={},Lt.rangesAltered={},Lt.nChanges=0,Lt.nChangesAnim=0;function Vt(Ht){return n.getLayoutValObject(it,Ht)}var $t={getValObject:Vt,flags:Lt,immutable:ht,transition:zt,gd:Pe};return Pt(Je,it,[],$t),(Lt.plot||Lt.calc)&&(Lt.layoutReplot=!0),zt&&Lt.nChanges&&Lt.nChangesAnim&&(Lt.anim=Lt.nChanges===Lt.nChangesAnim?"all":"some"),Lt}function Pt(Pe,Je,it,ht){var zt,Lt,Vt,$t=ht.getValObject,Ht=ht.flags,tr=ht.immutable,qe=ht.inArray,xt=ht.arrayIndex;function Rt(){var kt=zt.editType;if(qe&&kt.indexOf("arraydraw")!==-1){x.pushUnique(Ht.arrays[qe],xt);return}M.update(Ht,zt),kt!=="none"&&Ht.nChanges++,ht.transition&&zt.anim&&Ht.nChangesAnim++,(he.test(Vt)||me.test(Vt))&&(Ht.rangesAltered[it[0]]=1),be.test(Vt)&&t(Je,"_inputDomain").set(null),Lt==="datarevision"&&(Ht.newDataRevision=1)}function fr(kt){return kt.valType==="data_array"||kt.arrayOk}for(Lt in Pe){if(Ht.calc&&!ht.transition)return;var br=Pe[Lt],pr=Je[Lt],Tr=it.concat(Lt);if(Vt=Tr.join("."),!(Lt.charAt(0)==="_"||typeof br=="function"||br===pr)){if((Lt==="tick0"||Lt==="dtick")&&it[0]!=="geo"){var Nr=Je.tickmode;if(Nr==="auto"||Nr==="array"||!Nr)continue}if(!(Lt==="range"&&Je.autorange)&&!((Lt==="zmin"||Lt==="zmax")&&Je.type==="contourcarpet")&&(zt=$t(Tr),!!zt&&!(zt._compareAsJSON&&JSON.stringify(br)===JSON.stringify(pr)))){var Ir=zt.valType,lr,Yr=fr(zt),nt=Array.isArray(br),Ae=Array.isArray(pr);if(nt&&Ae){var Ee="_input_"+Lt,Fe=Pe[Ee],Ke=Je[Ee];if(Array.isArray(Fe)&&Fe===Ke)continue}if(pr===void 0)Yr&&nt?Ht.calc=!0:Rt();else if(zt._isLinkedToArray){var tt=[],ut=!1;qe||(Ht.arrays[Lt]=tt);var ct=Math.min(br.length,pr.length),yt=Math.max(br.length,pr.length);if(ct!==yt)if(zt.editType==="arraydraw")ut=!0;else{Rt();continue}for(lr=0;lr<ct;lr++)Pt(br[lr],pr[lr],Tr.concat(lr),x.extendFlat({inArray:Lt,arrayIndex:lr},ht));if(ut)for(lr=ct;lr<yt;lr++)tt.push(lr)}else!Ir&&x.isPlainObject(br)?Pt(br,pr,Tr,ht):Yr?nt&&Ae?(tr&&(Ht.calc=!0),(tr||ht.newDataRevision)&&Rt()):nt!==Ae?Ht.calc=!0:Rt():nt&&Ae?(br.length!==pr.length||String(br)!==String(pr))&&Rt():Rt()}}}for(Lt in Je)if(!(Lt in Pe||Lt.charAt(0)==="_"||typeof Je[Lt]=="function"))if(zt=$t(it.concat(Lt)),fr(zt)&&Array.isArray(Je[Lt])){Ht.calc=!0;return}else Rt()}function Ut(Pe,Je){var it;for(it in Pe)if(it.charAt(0)!=="_"){var ht=Pe[it],zt=Je[it];if(ht!==zt)if(x.isPlainObject(ht)&&x.isPlainObject(zt)){if(Ut(ht,zt))return!0}else if(Array.isArray(ht)&&Array.isArray(zt)){if(ht.length!==zt.length)return!0;for(var Lt=0;Lt<ht.length;Lt++)if(ht[Lt]!==zt[Lt])if(x.isPlainObject(ht[Lt])&&x.isPlainObject(zt[Lt])){if(Ut(ht[Lt],zt[Lt]))return!0}else return!0}else return!0}}function Gt(Pe,Je,it){if(Pe=x.getGraphDiv(Pe),!x.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ht=Pe._transitionData;ht._frameQueue||(ht._frameQueue=[]),it=f.supplyAnimationDefaults(it);var zt=it.transition,Lt=it.frame;ht._frameWaitingCnt===void 0&&(ht._frameWaitingCnt=0);function Vt(tr){return Array.isArray(zt)?tr>=zt.length?zt[0]:zt[tr]:zt}function $t(tr){return Array.isArray(Lt)?tr>=Lt.length?Lt[0]:Lt[tr]:Lt}function Ht(tr,qe){var xt=0;return function(){if(tr&&++xt===qe)return tr()}}return new Promise(function(tr,qe){function xt(){if(ht._frameQueue.length!==0){for(;ht._frameQueue.length;){var ct=ht._frameQueue.pop();ct.onInterrupt&&ct.onInterrupt()}Pe.emit("plotly_animationinterrupted",[])}}function Rt(ct){if(ct.length!==0){for(var yt=0;yt<ct.length;yt++){var kt;ct[yt].type==="byname"?kt=f.computeFrame(Pe,ct[yt].name):kt=ct[yt].data;var jt=$t(yt),Mr=Vt(yt);Mr.duration=Math.min(Mr.duration,jt.duration);var Sr={frame:kt,name:ct[yt].name,frameOpts:jt,transitionOpts:Mr};yt===ct.length-1&&(Sr.onComplete=Ht(tr,2),Sr.onInterrupt=qe),ht._frameQueue.push(Sr)}it.mode==="immediate"&&(ht._lastFrameAt=-1/0),ht._animationRaf||pr()}}function fr(){Pe.emit("plotly_animated"),window.cancelAnimationFrame(ht._animationRaf),ht._animationRaf=null}function br(){ht._currentFrame&&ht._currentFrame.onComplete&&ht._currentFrame.onComplete();var ct=ht._currentFrame=ht._frameQueue.shift();if(ct){var yt=ct.name?ct.name.toString():null;Pe._fullLayout._currentFrame=yt,ht._lastFrameAt=Date.now(),ht._timeToNext=ct.frameOpts.duration,f.transition(Pe,ct.frame.data,ct.frame.layout,A.coerceTraceIndices(Pe,ct.frame.traces),ct.frameOpts,ct.transitionOpts).then(function(){ct.onComplete&&ct.onComplete()}),Pe.emit("plotly_animatingframe",{name:yt,frame:ct.frame,animation:{frame:ct.frameOpts,transition:ct.transitionOpts}})}else fr()}function pr(){Pe.emit("plotly_animating"),ht._lastFrameAt=-1/0,ht._timeToNext=0,ht._runningTransitions=0,ht._currentFrame=null;var ct=function(){ht._animationRaf=window.requestAnimationFrame(ct),Date.now()-ht._lastFrameAt>ht._timeToNext&&br()};ct()}var Tr=0;function Nr(ct){return Array.isArray(zt)?Tr>=zt.length?ct.transitionOpts=zt[Tr]:ct.transitionOpts=zt[0]:ct.transitionOpts=zt,Tr++,ct}var Ir,lr,Yr=[],nt=Je==null,Ae=Array.isArray(Je),Ee=!nt&&!Ae&&x.isPlainObject(Je);if(Ee)Yr.push({type:"object",data:Nr(x.extendFlat({},Je))});else if(nt||["string","number"].indexOf(typeof Je)!==-1)for(Ir=0;Ir<ht._frames.length;Ir++)lr=ht._frames[Ir],!!lr&&(nt||String(lr.group)===String(Je))&&Yr.push({type:"byname",name:String(lr.name),data:Nr({name:lr.name})});else if(Ae)for(Ir=0;Ir<Je.length;Ir++){var Fe=Je[Ir];["number","string"].indexOf(typeof Fe)!==-1?(Fe=String(Fe),Yr.push({type:"byname",name:Fe,data:Nr({name:Fe})})):x.isPlainObject(Fe)&&Yr.push({type:"object",data:Nr(x.extendFlat({},Fe))})}for(Ir=0;Ir<Yr.length;Ir++)if(lr=Yr[Ir],lr.type==="byname"&&!ht._frameHash[lr.data.name]){x.warn('animate failure: frame not found: "'+lr.data.name+'"'),qe();return}["next","immediate"].indexOf(it.mode)!==-1&&xt(),it.direction==="reverse"&&Yr.reverse();var Ke=Pe._fullLayout._currentFrame;if(Ke&&it.fromcurrent){var tt=-1;for(Ir=0;Ir<Yr.length;Ir++)if(lr=Yr[Ir],lr.type==="byname"&&lr.name===Ke){tt=Ir;break}if(tt>0&&tt<Yr.length-1){var ut=[];for(Ir=0;Ir<Yr.length;Ir++)lr=Yr[Ir],(Yr[Ir].type!=="byname"||Ir>tt)&&ut.push(lr);Yr=ut}}Yr.length>0?Rt(Yr):(Pe.emit("plotly_animated"),tr())})}function It(Pe,Je,it){if(Pe=x.getGraphDiv(Pe),Je==null)return Promise.resolve();if(!x.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ht,zt,Lt,Vt,$t=Pe._transitionData._frames,Ht=Pe._transitionData._frameHash;if(!Array.isArray(Je))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Je);var tr=$t.length+Je.length*2,qe=[],xt={};for(ht=Je.length-1;ht>=0;ht--)if(!!x.isPlainObject(Je[ht])){var Rt=Je[ht].name,fr=(Ht[Rt]||xt[Rt]||{}).name,br=Je[ht].name,pr=Ht[fr]||xt[fr];fr&&br&&typeof br=="number"&&pr&&T<_&&(T++,x.warn('addFrames: overwriting frame "'+(Ht[fr]||xt[fr]).name+'" with a frame whose name of type "number" also equates to "'+fr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),T===_&&x.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),xt[Rt]={name:Rt},qe.push({frame:f.supplyFrameDefaults(Je[ht]),index:it&&it[ht]!==void 0&&it[ht]!==null?it[ht]:tr+ht})}qe.sort(function(Ee,Fe){return Ee.index>Fe.index?-1:Ee.index<Fe.index?1:0});var Tr=[],Nr=[],Ir=$t.length;for(ht=qe.length-1;ht>=0;ht--){if(zt=qe[ht].frame,typeof zt.name=="number"&&x.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!zt.name)for(;Ht[zt.name="frame "+Pe._transitionData._counter++];);if(Ht[zt.name]){for(Lt=0;Lt<$t.length&&($t[Lt]||{}).name!==zt.name;Lt++);Tr.push({type:"replace",index:Lt,value:zt}),Nr.unshift({type:"replace",index:Lt,value:$t[Lt]})}else Vt=Math.max(0,Math.min(qe[ht].index,Ir)),Tr.push({type:"insert",index:Vt,value:zt}),Nr.unshift({type:"delete",index:Vt}),Ir++}var lr=f.modifyFrames,Yr=f.modifyFrames,nt=[Pe,Nr],Ae=[Pe,Tr];return a&&a.add(Pe,lr,nt,Yr,Ae),f.modifyFrames(Pe,Tr)}function Ct(Pe,Je){if(Pe=x.getGraphDiv(Pe),!x.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe);var it,ht,zt=Pe._transitionData._frames,Lt=[],Vt=[];if(!Je)for(Je=[],it=0;it<zt.length;it++)Je.push(it);for(Je=Je.slice(),Je.sort(),it=Je.length-1;it>=0;it--)ht=Je[it],Lt.push({type:"delete",index:ht}),Vt.unshift({type:"insert",index:ht,value:zt[ht]});var $t=f.modifyFrames,Ht=f.modifyFrames,tr=[Pe,Vt],qe=[Pe,Lt];return a&&a.add(Pe,$t,tr,Ht,qe),f.modifyFrames(Pe,Lt)}function lt(Pe){Pe=x.getGraphDiv(Pe);var Je=Pe._fullLayout||{},it=Pe._fullData||[];return f.cleanPlot([],{},it,Je),f.purge(Pe),i.purge(Pe),Je._container&&Je._container.remove(),delete Pe._context,Pe}function dt(Pe){var Je=Pe._fullLayout,it=Pe.getBoundingClientRect();if(!x.equalDomRects(it,Je._lastBBox)){var ht=Je._invTransform=x.inverseTransformMatrix(x.getFullTransformMatrix(Pe));Je._invScaleX=Math.sqrt(ht[0][0]*ht[0][0]+ht[0][1]*ht[0][1]+ht[0][2]*ht[0][2]),Je._invScaleY=Math.sqrt(ht[1][0]*ht[1][0]+ht[1][1]*ht[1][1]+ht[1][2]*ht[1][2]),Je._lastBBox=it}}function et(Pe){var Je=u.select(Pe),it=Pe._fullLayout;if(it._calcInverseTransform=dt,it._calcInverseTransform(Pe),it._container=Je.selectAll(".plot-container").data([0]),it._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),it._paperdiv=it._container.selectAll(".svg-container").data([0]),it._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),it._glcontainer=it._paperdiv.selectAll(".gl-container").data([{}]),it._glcontainer.enter().append("div").classed("gl-container",!0),it._paperdiv.selectAll(".main-svg").remove(),it._paperdiv.select(".modebar-container").remove(),it._paper=it._paperdiv.insert("svg",":first-child").classed("main-svg",!0),it._toppaper=it._paperdiv.append("svg").classed("main-svg",!0),it._modebardiv=it._paperdiv.append("div"),delete it._modeBar,it._hoverpaper=it._paperdiv.append("svg").classed("main-svg",!0),!it._uid){var ht={};u.selectAll("defs").each(function(){this.id&&(ht[this.id.split("-")[1]]=1)}),it._uid=x.randstr(ht)}it._paperdiv.selectAll(".main-svg").attr(d.svgAttrs),it._defs=it._paper.append("defs").attr("id","defs-"+it._uid),it._clips=it._defs.append("g").classed("clips",!0),it._topdefs=it._toppaper.append("defs").attr("id","topdefs-"+it._uid),it._topclips=it._topdefs.append("g").classed("clips",!0),it._bgLayer=it._paper.append("g").classed("bglayer",!0),it._draggers=it._paper.append("g").classed("draglayer",!0);var zt=it._paper.append("g").classed("layer-below",!0);it._imageLowerLayer=zt.append("g").classed("imagelayer",!0),it._shapeLowerLayer=zt.append("g").classed("shapelayer",!0),it._cartesianlayer=it._paper.append("g").classed("cartesianlayer",!0),it._polarlayer=it._paper.append("g").classed("polarlayer",!0),it._smithlayer=it._paper.append("g").classed("smithlayer",!0),it._ternarylayer=it._paper.append("g").classed("ternarylayer",!0),it._geolayer=it._paper.append("g").classed("geolayer",!0),it._funnelarealayer=it._paper.append("g").classed("funnelarealayer",!0),it._pielayer=it._paper.append("g").classed("pielayer",!0),it._iciclelayer=it._paper.append("g").classed("iciclelayer",!0),it._treemaplayer=it._paper.append("g").classed("treemaplayer",!0),it._sunburstlayer=it._paper.append("g").classed("sunburstlayer",!0),it._indicatorlayer=it._toppaper.append("g").classed("indicatorlayer",!0),it._glimages=it._paper.append("g").classed("glimages",!0);var Lt=it._toppaper.append("g").classed("layer-above",!0);it._imageUpperLayer=Lt.append("g").classed("imagelayer",!0),it._shapeUpperLayer=Lt.append("g").classed("shapelayer",!0),it._infolayer=it._toppaper.append("g").classed("infolayer",!0),it._menulayer=it._toppaper.append("g").classed("menulayer",!0),it._zoomlayer=it._toppaper.append("g").classed("zoomlayer",!0),it._hoverlayer=it._hoverpaper.append("g").classed("hoverlayer",!0),it._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Pe.emit("plotly_framework")}B.animate=Gt,B.addFrames=It,B.deleteFrames=Ct,B.addTraces=fe,B.deleteTraces=se,B.extendTraces=J,B.moveTraces=V,B.prependTraces=le,B.newPlot=D,B._doPlot=h,B.purge=lt,B.react=mt,B.redraw=F,B.relayout=oe,B.restyle=Y,B.setPlotConfig=S,B.update=Be,B._guiRelayout=Ye(oe),B._guiRestyle=Ye(Y),B._guiUpdate=Ye(Be),B._storeDirectGUIEdit=$},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(e,I,B){var u={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},s={};function m(x,t){for(var i in x){var a=x[i];a.valType?t[i]=a.dflt:(t[i]||(t[i]={}),m(a,t[i]))}}m(u,s),I.exports={configAttributes:u,dfltConfig:s}},{}],542:[function(e,I,B){var u=e("../registry"),s=e("../lib"),m=e("../plots/attributes"),x=e("../plots/layout_attributes"),t=e("../plots/frame_attributes"),i=e("../plots/animation_attributes"),a=e("./plot_config").configAttributes,r=e("./edit_types"),n=s.extendDeepAll,f=s.isPlainObject,l=s.isArrayOrTypedArray,o=s.nestedProperty,c=s.valObjectMeta,v="_isSubplotObj",d="_isLinkedToArray",p="_arrayAttrRegexps",y="_deprecated",g=[v,d,p,y];B.IS_SUBPLOT_OBJ=v,B.IS_LINKED_TO_ARRAY=d,B.DEPRECATED=y,B.UNDERSCORE_ATTRS=g,B.get=function(){var D={};u.allTypes.forEach(function(U){D[U]=w(U)});var R={};return Object.keys(u.transformsRegistry).forEach(function(U){R[U]=_(U)}),{defs:{valObjects:c,metaKeys:g.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:D,layout:T(),transforms:R,frames:h(),animation:L(i),config:L(a)}},B.crawl=function(D,R,U,N){var X=U||0;N=N||"",Object.keys(D).forEach(function(j){var ee=D[j];if(g.indexOf(j)===-1){var q=(N?N+".":"")+j;R(ee,j,D,X,q),!B.isValObject(ee)&&f(ee)&&j!=="impliedEdits"&&B.crawl(ee,R,X+1,q)}})},B.isValObject=function(D){return D&&D.valType!==void 0},B.findArrayAttributes=function(D){var R=[],U=[],N=[],X,j;function ee(se,V,Y,ne){U=U.slice(0,ne).concat([V]),N=N.slice(0,ne).concat([se&&se._isLinkedToArray]);var te=se&&(se.valType==="data_array"||se.arrayOk===!0)&&!(U[ne-1]==="colorbar"&&(V==="ticktext"||V==="tickvals"));!te||q(X,0,"")}function q(se,V,Y){var ne=se[U[V]],te=Y+U[V];if(V===U.length-1)l(ne)&&R.push(j+te);else if(N[V]){if(Array.isArray(ne))for(var K=0;K<ne.length;K++)f(ne[K])&&q(ne[K],V+1,te+"["+K+"].")}else f(ne)&&q(ne,V+1,te+".")}X=D,j="",B.crawl(m,ee),D._module&&D._module.attributes&&B.crawl(D._module.attributes,ee);var G=D.transforms;if(G)for(var J=0;J<G.length;J++){var le=G[J],fe=le._module;fe&&(j="transforms["+J+"].",X=le,B.crawl(fe.attributes,ee))}return R},B.getTraceValObject=function(D,R){var U=R[0],N=1,X,j;if(U==="transforms"){if(R.length===1)return m.transforms;var ee=D.transforms;if(!Array.isArray(ee)||!ee.length)return!1;var q=R[1];if(!M(q)||q>=ee.length)return!1;X=(u.transformsRegistry[ee[q].type]||{}).attributes,j=X&&X[R[2]],N=3}else{var G=D._module;if(G||(G=(u.modules[D.type||m.type.dflt]||{})._module),!G)return!1;if(X=G.attributes,j=X&&X[U],!j){var J=G.basePlotModule;J&&J.attributes&&(j=J.attributes[U])}j||(j=m[U])}return b(j,R,N)},B.getLayoutValObject=function(D,R){var U=A(D,R[0]);return b(U,R,1)};function A(D,R){var U,N,X,j,ee=D._basePlotModules;if(ee){var q;for(U=0;U<ee.length;U++){if(X=ee[U],X.attrRegex&&X.attrRegex.test(R)){if(X.layoutAttrOverrides)return X.layoutAttrOverrides;!q&&X.layoutAttributes&&(q=X.layoutAttributes)}var G=X.baseLayoutAttrOverrides;if(G&&R in G)return G[R]}if(q)return q}var J=D._modules;if(J){for(U=0;U<J.length;U++)if(j=J[U].layoutAttributes,j&&R in j)return j[R]}for(N in u.componentsRegistry){if(X=u.componentsRegistry[N],X.name==="colorscale"&&R.indexOf("coloraxis")===0)return X.layoutAttributes[R];if(!X.schema&&R===X.name)return X.layoutAttributes}return R in x?x[R]:!1}function b(D,R,U){if(!D)return!1;if(D._isLinkedToArray){if(M(R[U]))U++;else if(U<R.length)return!1}for(;U<R.length;U++){var N=D[R[U]];if(f(N))D=N;else break;if(U===R.length-1)break;if(D._isLinkedToArray){if(U++,!M(R[U]))return!1}else if(D.valType==="info_array"){U++;var X=R[U];if(!M(X))return!1;var j=D.items;if(Array.isArray(j)){if(X>=j.length)return!1;if(D.dimensions===2){if(U++,R.length===U)return D;var ee=R[U];if(!M(ee))return!1;D=j[X][ee]}else D=j[X]}else D=j}}return D}function M(D){return D===Math.round(D)&&D>=0}function w(D){var R,U;R=u.modules[D]._module,U=R.basePlotModule;var N={};N.type=null;var X=n({},m),j=n({},R.attributes);B.crawl(j,function(G,J,le,fe,se){o(X,se).set(void 0),G===void 0&&o(j,se).set(void 0)}),n(N,X),u.traceIs(D,"noOpacity")&&delete N.opacity,u.traceIs(D,"showLegend")||(delete N.showlegend,delete N.legendgroup),u.traceIs(D,"noHover")&&(delete N.hoverinfo,delete N.hoverlabel),R.selectPoints||delete N.selectedpoints,n(N,j),U.attributes&&n(N,U.attributes),N.type=D;var ee={meta:R.meta||{},categories:R.categories||{},animatable:Boolean(R.animatable),type:D,attributes:L(N)};if(R.layoutAttributes){var q={};n(q,R.layoutAttributes),ee.layoutAttributes=L(q)}return R.animatable||B.crawl(ee,function(G){B.isValObject(G)&&"anim"in G&&delete G.anim}),ee}function T(){var D={},R,U;n(D,x);for(R in u.subplotsRegistry)if(U=u.subplotsRegistry[R],!!U.layoutAttributes)if(Array.isArray(U.attr))for(var N=0;N<U.attr.length;N++)O(D,U,U.attr[N]);else{var X=U.attr==="subplot"?U.name:U.attr;O(D,U,X)}for(R in u.componentsRegistry){U=u.componentsRegistry[R];var j=U.schema;if(j&&(j.subplots||j.layout)){var ee=j.subplots;if(ee&&ee.xaxis&&!ee.yaxis)for(var q in ee.xaxis)delete D.yaxis[q]}else U.name==="colorscale"?n(D,U.layoutAttributes):U.layoutAttributes&&F(D,U.layoutAttributes,U.name)}return{layoutAttributes:L(D)}}function _(D){var R=u.transformsRegistry[D],U=n({},R.attributes);return Object.keys(u.componentsRegistry).forEach(function(N){var X=u.componentsRegistry[N];X.schema&&X.schema.transforms&&X.schema.transforms[D]&&Object.keys(X.schema.transforms[D]).forEach(function(j){F(U,X.schema.transforms[D][j],j)})}),{attributes:L(U)}}function h(){var D={frames:n({},t)};return L(D),D.frames}function L(D){return S(D),k(D),P(D),D}function S(D){function R(N){return{valType:"string",editType:"none"}}function U(N,X,j){B.isValObject(N)?(N.arrayOk===!0||N.valType==="data_array")&&(j[X+"src"]=R()):f(N)&&(N.role="object")}B.crawl(D,U)}function k(D){function R(U,N,X){if(!!U){var j=U[d];!j||(delete U[d],X[N]={items:{}},X[N].items[j]=U,X[N].role="object")}}B.crawl(D,R)}function P(D){function R(U){for(var N in U)if(f(U[N]))R(U[N]);else if(Array.isArray(U[N]))for(var X=0;X<U[N].length;X++)R(U[N][X]);else U[N]instanceof RegExp&&(U[N]=U[N].toString())}R(D)}function O(D,R,U){var N=o(D,U),X=n({},R.layoutAttributes);X[v]=!0,N.set(X)}function F(D,R,U){var N=o(D,U);N.set(n(N.get()||{},R))}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(e,I,B){var u=e("../lib"),s=e("../plots/attributes"),m="templateitemname",x={name:{valType:"string",editType:"none"}};x[m]={valType:"string",editType:"calc"},B.templatedArray=function(a,r){return r._isLinkedToArray=a,r.name=x.name,r[m]=x[m],r},B.traceTemplater=function(a){var r={},n,f;for(n in a)f=a[n],Array.isArray(f)&&f.length&&(r[n]=0);function l(o){n=u.coerce(o,{},s,"type");var c={type:n,_template:null};if(n in r){f=a[n];var v=r[n]%f.length;r[n]++,c._template=f[v]}return c}return{newTrace:l}},B.newContainer=function(a,r,n){var f=a._template,l=f&&(f[r]||n&&f[n]);u.isPlainObject(l)||(l=null);var o=a[r]={_template:l};return o},B.arrayTemplater=function(a,r,n){var f=a._template,l=f&&f[i(r)],o=f&&f[r];(!Array.isArray(o)||!o.length)&&(o=[]);var c={};function v(p){var y={name:p.name,_input:p},g=y[m]=p[m];if(!t(g))return y._template=l,y;for(var A=0;A<o.length;A++){var b=o[A];if(b.name===g)return c[g]=1,y._template=b,y}return y[n]=p[n]||!1,y._template=!1,y}function d(){for(var p=[],y=0;y<o.length;y++){var g=o[y],A=g.name;if(t(A)&&!c[A]){var b={_template:g,name:A,_input:{_templateitemname:A}};b[m]=g[m],p.push(b),c[A]=1}}return p}return{newItem:v,defaultItems:d}};function t(a){return a&&typeof a=="string"}function i(a){var r=a.length-1;return a.charAt(r)!=="s"&&u.warn("bad argument to arrayDefaultKey: "+a),a.substr(0,a.length-1)+"defaults"}B.arrayDefaultKey=i,B.arrayEditor=function(a,r,n){var f=(u.nestedProperty(a,r).get()||[]).length,l=n._index,o=l>=f&&(n._input||{})._templateitemname;o&&(l=f);var c=r+"["+l+"]",v;function d(){v={},o&&(v[c]={},v[c][m]=o)}d();function p(b,M){v[b]=M}function y(b,M){o?u.nestedProperty(v[c],b).set(M):v[c+"."+b]=M}function g(){var b=v;return d(),b}function A(b,M){b&&y(b,M);var w=g();for(var T in w)u.nestedProperty(a,T).set(w[T])}return{modifyBase:p,modifyItem:y,getUpdateObj:g,applyUpdate:A}}},{"../lib":503,"../plots/attributes":550}],544:[function(e,I,B){var u=e("@plotly/d3"),s=e("../registry"),m=e("../plots/plots"),x=e("../lib"),t=e("../lib/clear_gl_canvases"),i=e("../components/color"),a=e("../components/drawing"),r=e("../components/titles"),n=e("../components/modebar"),f=e("../plots/cartesian/axes"),l=e("../constants/alignment"),o=e("../plots/cartesian/constraints"),c=o.enforce,v=o.clean,d=e("../plots/cartesian/autorange").doAutoRange,p="start",y="middle",g="end";B.layoutStyles=function(k){return x.syncOrAsync([m.doAutoMargin,b],k)};function A(k,P,O){for(var F=0;F<O.length;F++){var D=O[F][0],R=O[F][1];if(!(D[0]>=k[1]||D[1]<=k[0])&&R[0]<P[1]&&R[1]>P[0])return!0}return!1}function b(k){var P=k._fullLayout,O=P._size,F=O.p,D=f.list(k,"",!0),R,U,N,X,j,ee;if(P._paperdiv.style({width:k._context.responsive&&P.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":P.width+"px",height:k._context.responsive&&P.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(a.setSize,P.width,P.height),k._context.setBackground(k,P.paper_bgcolor),B.drawMainTitle(k),n.manage(k),!P._has("cartesian"))return m.previousPromises(k);function q(Ut,Gt,It){var Ct=Ut._lw/2;if(Ut._id.charAt(0)==="x"){if(Gt){if(It==="top")return Gt._offset-F-Ct}else return O.t+O.h*(1-(Ut.position||0))+Ct%1;return Gt._offset+Gt._length+F+Ct}if(Gt){if(It==="right")return Gt._offset+Gt._length+F+Ct}else return O.l+O.w*(Ut.position||0)+Ct%1;return Gt._offset-F-Ct}for(R=0;R<D.length;R++){X=D[R];var G=X._anchorAxis;X._linepositions={},X._lw=a.crispRound(k,X.linewidth,1),X._mainLinePosition=q(X,G,X.side),X._mainMirrorPosition=X.mirror&&G?q(X,G,l.OPPOSITE_SIDE[X.side]):null}var J=[],le=[],fe=[],se=i.opacity(P.paper_bgcolor)===1&&i.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(U in P._plots)if(N=P._plots[U],N.mainplot)N.bg&&N.bg.remove(),N.bg=void 0;else{var V=N.xaxis.domain,Y=N.yaxis.domain,ne=N.plotgroup;if(A(V,Y,fe)){var te=ne.node(),K=N.bg=x.ensureSingle(ne,"rect","bg");te.insertBefore(K.node(),te.childNodes[0]),le.push(U)}else ne.select("rect.bg").remove(),fe.push([V,Y]),se||(J.push(U),le.push(U))}var $=P._bgLayer.selectAll(".bg").data(J);for($.enter().append("rect").classed("bg",!0),$.exit().remove(),$.each(function(Ut){P._plots[Ut].bg=u.select(this)}),R=0;R<le.length;R++)N=P._plots[le[R]],j=N.xaxis,ee=N.yaxis,N.bg&&j._offset!==void 0&&ee._offset!==void 0&&N.bg.call(a.setRect,j._offset-F,ee._offset-F,j._length+2*F,ee._length+2*F).call(i.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(U in P._plots){N=P._plots[U],j=N.xaxis,ee=N.yaxis;var ae=N.clipId="clip"+P._uid+U+"plot",ie=x.ensureSingleById(P._clips,"clipPath",ae,function(Ut){Ut.classed("plotclip",!0).append("rect")});N.clipRect=ie.select("rect").attr({width:j._length,height:ee._length}),a.setTranslate(N.plot,j._offset,ee._offset);var oe,ue;N._hasClipOnAxisFalse?(oe=null,ue=ae):(oe=ae,ue=null),a.setClipUrl(N.plot,oe,k),N.layerClipId=ue}var xe,he,me,be,Ce,Se,Be,Ye,Xe,Te,Ie,Ze,rt;function Ge(Ut){return"M"+xe+","+Ut+"H"+he}function ze(Ut){return"M"+j._offset+","+Ut+"h"+j._length}function We(Ut){return"M"+Ut+","+Ye+"V"+Be}function mt(Ut){return"M"+Ut+","+ee._offset+"v"+ee._length}function Ft(Ut,Gt,It){if(!Ut.showline||U!==Ut._mainSubplot)return"";if(!Ut._anchorAxis)return It(Ut._mainLinePosition);var Ct=Gt(Ut._mainLinePosition);return Ut.mirror&&(Ct+=Gt(Ut._mainMirrorPosition)),Ct}for(U in P._plots){N=P._plots[U],j=N.xaxis,ee=N.yaxis;var Xt="M0,0";M(j,U)&&(Ce=T(j,"left",ee,D),xe=j._offset-(Ce?F+Ce:0),Se=T(j,"right",ee,D),he=j._offset+j._length+(Se?F+Se:0),me=q(j,ee,"bottom"),be=q(j,ee,"top"),rt=!j._anchorAxis||U!==j._mainSubplot,rt&&(j.mirror==="allticks"||j.mirror==="all")&&(j._linepositions[U]=[me,be]),Xt=Ft(j,Ge,ze),rt&&j.showline&&(j.mirror==="all"||j.mirror==="allticks")&&(Xt+=Ge(me)+Ge(be)),N.xlines.style("stroke-width",j._lw+"px").call(i.stroke,j.showline?j.linecolor:"rgba(0,0,0,0)")),N.xlines.attr("d",Xt);var Pt="M0,0";M(ee,U)&&(Ie=T(ee,"bottom",j,D),Be=ee._offset+ee._length+(Ie?F:0),Ze=T(ee,"top",j,D),Ye=ee._offset-(Ze?F:0),Xe=q(ee,j,"left"),Te=q(ee,j,"right"),rt=!ee._anchorAxis||U!==ee._mainSubplot,rt&&(ee.mirror==="allticks"||ee.mirror==="all")&&(ee._linepositions[U]=[Xe,Te]),Pt=Ft(ee,We,mt),rt&&ee.showline&&(ee.mirror==="all"||ee.mirror==="allticks")&&(Pt+=We(Xe)+We(Te)),N.ylines.style("stroke-width",ee._lw+"px").call(i.stroke,ee.showline?ee.linecolor:"rgba(0,0,0,0)")),N.ylines.attr("d",Pt)}return f.makeClipPaths(k),m.previousPromises(k)}function M(k,P){return(k.ticks||k.showline)&&(P===k._mainSubplot||k.mirror==="all"||k.mirror==="allticks")}function w(k,P,O){if(!O.showline||!O._lw)return!1;if(O.mirror==="all"||O.mirror==="allticks")return!0;var F=O._anchorAxis;if(!F)return!1;var D=l.FROM_BL[P];return O.side===P?F.domain[D]===k.domain[D]:O.mirror&&F.domain[1-D]===k.domain[1-D]}function T(k,P,O,F){if(w(k,P,O))return O._lw;for(var D=0;D<F.length;D++){var R=F[D];if(R._mainAxis===O._mainAxis&&w(k,P,R))return R._lw}return 0}B.drawMainTitle=function(k){var P=k._fullLayout,O=L(P),F=S(P);r.draw(k,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:_(P,O),y:h(P,F),"text-anchor":O,dy:F}})};function _(k,P){var O=k.title,F=k._size,D=0;switch(P===p?D=O.pad.l:P===g&&(D=-O.pad.r),O.xref){case"paper":return F.l+F.w*O.x+D;case"container":default:return k.width*O.x+D}}function h(k,P){var O=k.title,F=k._size,D=0;if(P==="0em"||!P?D=-O.pad.b:P===l.CAP_SHIFT+"em"&&(D=O.pad.t),O.y==="auto")return F.t/2;switch(O.yref){case"paper":return F.t+F.h-F.h*O.y+D;case"container":default:return k.height-k.height*O.y+D}}function L(k){var P=k.title,O=y;return x.isRightAnchor(P)?O=g:x.isLeftAnchor(P)&&(O=p),O}function S(k){var P=k.title,O="0em";return x.isTopAnchor(P)?O=l.CAP_SHIFT+"em":x.isMiddleAnchor(P)&&(O=l.MID_SHIFT+"em"),O}B.doTraceStyle=function(k){var P=k.calcdata,O=[],F;for(F=0;F<P.length;F++){var D=P[F],R=D[0]||{},U=R.trace||{},N=U._module||{},X=N.arraysToCalcdata;X&&X(D,U);var j=N.editStyle;j&&O.push({fn:j,cd0:R})}if(O.length){for(F=0;F<O.length;F++){var ee=O[F];ee.fn(k,ee.cd0)}t(k),B.redrawReglTraces(k)}return m.style(k),s.getComponentMethod("legend","draw")(k),m.previousPromises(k)},B.doColorBars=function(k){return s.getComponentMethod("colorbar","draw")(k),m.previousPromises(k)},B.layoutReplot=function(k){var P=k.layout;return k.layout=void 0,s.call("_doPlot",k,"",P)},B.doLegend=function(k){return s.getComponentMethod("legend","draw")(k),m.previousPromises(k)},B.doTicksRelayout=function(k){return f.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(s.subplotsRegistry.splom.updateGrid(k),t(k),B.redrawReglTraces(k)),B.drawMainTitle(k),m.previousPromises(k)},B.doModeBar=function(k){var P=k._fullLayout;n.manage(k);for(var O=0;O<P._basePlotModules.length;O++){var F=P._basePlotModules[O].updateFx;F&&F(k)}return m.previousPromises(k)},B.doCamera=function(k){for(var P=k._fullLayout,O=P._subplots.gl3d,F=0;F<O.length;F++){var D=P[O[F]],R=D._scene;R.setViewport(D)}},B.drawData=function(k){var P=k._fullLayout;t(k);for(var O=P._basePlotModules,F=0;F<O.length;F++)O[F].plot(k);return B.redrawReglTraces(k),m.style(k),s.getComponentMethod("shapes","draw")(k),s.getComponentMethod("annotations","draw")(k),s.getComponentMethod("images","draw")(k),P._replotting=!1,m.previousPromises(k)},B.redrawReglTraces=function(k){var P=k._fullLayout;if(P._has("regl")){var O=k._fullData,F=[],D=[],R,U;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),R=0;R<O.length;R++){var N=O[R];N.visible===!0&&N._length!==0&&(N.type==="splom"?P._splomScenes[N.uid].draw():N.type==="scattergl"?x.pushUnique(F,N.xaxis+N.yaxis):N.type==="scatterpolargl"&&x.pushUnique(D,N.subplot))}for(R=0;R<F.length;R++)U=P._plots[F[R]],U._scene&&U._scene.draw();for(R=0;R<D.length;R++)U=P[D[R]]._subplot,U._scene&&U._scene.draw()}},B.doAutoRangeAndConstraints=function(k){for(var P=f.list(k,"",!0),O,F={},D=0;D<P.length;D++)if(O=P[D],!F[O._id]){F[O._id]=1,v(k,O),d(k,O);var R=O._matchGroup;if(R)for(var U in R){var N=f.getFromId(k,U);d(k,N,O.range),F[U]=1}}c(k)},B.finalDraw=function(k){s.getComponentMethod("rangeslider","draw")(k),s.getComponentMethod("rangeselector","draw")(k)},B.drawMarginPushers=function(k){s.getComponentMethod("legend","draw")(k),s.getComponentMethod("rangeselector","draw")(k),s.getComponentMethod("sliders","draw")(k),s.getComponentMethod("updatemenus","draw")(k),s.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(e,I,B){var u=e("../lib"),s=u.isPlainObject,m=e("./plot_schema"),x=e("../plots/plots"),t=e("../plots/attributes"),i=e("./plot_template"),a=e("./plot_config").dfltConfig;B.makeTemplate=function(p){p=u.isPlainObject(p)?p:u.getGraphDiv(p),p=u.extendDeep({_context:a},{data:p.data,layout:p.layout}),x.supplyDefaults(p);var y=p.data||[],g=p.layout||{};g._basePlotModules=p._fullLayout._basePlotModules,g._modules=p._fullLayout._modules;var A={data:{},layout:{}};y.forEach(function(P){var O={};f(P,O,o.bind(null,P));var F=u.coerce(P,{},t,"type"),D=A.data[F];D||(D=A.data[F]=[]),D.push(O)}),f(g,A.layout,l.bind(null,g)),delete A.layout.template;var b=g.template;if(s(b)){var M=b.layout,w,T,_,h,L,S;s(M)&&r(M,A.layout);var k=b.data;if(s(k)){for(T in A.data)if(_=k[T],Array.isArray(_)){for(L=A.data[T],S=L.length,h=_.length,w=0;w<S;w++)r(_[w%h],L[w]);for(w=S;w<h;w++)L.push(u.extendDeep({},_[w]))}for(T in k)T in A.data||(A.data[T]=u.extendDeep([],k[T]))}}return A};function r(p,y){p=u.extendDeep({},p);var g=Object.keys(p).sort(),A,b;function M(L,S,k){if(s(S)&&s(L))r(L,S);else if(Array.isArray(S)&&Array.isArray(L)){var P=i.arrayTemplater({_template:p},k);for(b=0;b<S.length;b++){var O=S[b],F=P.newItem(O)._template;F&&r(F,O)}var D=P.defaultItems();for(b=0;b<D.length;b++)S.push(D[b]._template);for(b=0;b<S.length;b++)delete S[b].templateitemname}}for(A=0;A<g.length;A++){var w=g[A],T=p[w];if(w in y?M(T,y[w],w):y[w]=T,n(w)===w)for(var _ in y){var h=n(_);_!==h&&h===w&&!(_ in p)&&M(T,y[_],w)}}}function n(p){return p.replace(/[0-9]+$/,"")}function f(p,y,g,A,b){var M=b&&g(b);for(var w in p){var T=p[w],_=c(p,w,A),h=c(p,w,b),L=g(h);if(!L){var S=n(w);S!==w&&(h=c(p,S,b),L=g(h))}if(!(M&&M===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(T)))if(!L.valType&&s(T))f(T,y,g,_,h);else if(L._isLinkedToArray&&Array.isArray(T))for(var k=!1,P=0,O={},F=0;F<T.length;F++){var D=T[F];if(s(D)){var R=D.name;if(R)O[R]||(f(D,y,g,c(T,P,_),c(T,P,h)),P++,O[R]=1);else if(!k){var U=i.arrayDefaultKey(w),N=c(p,U,A),X=c(T,P,_);f(D,y,g,X,c(T,P,h));var j=u.nestedProperty(y,X),ee=u.nestedProperty(y,N);ee.set(j.get()),j.set(null),k=!0}}}else{var q=u.nestedProperty(y,_);q.set(T)}}}function l(p,y){return m.getLayoutValObject(p,u.nestedProperty({},y).parts)}function o(p,y){return m.getTraceValObject(p,u.nestedProperty({},y).parts)}function c(p,y,g){var A;return g?Array.isArray(p)?A=g+"["+y+"]":A=g+"."+y:A=y,A}B.validateTemplate=function(p,y){var g=u.extendDeep({},{_context:a,data:p.data,layout:p.layout}),A=g.layout||{};s(y)||(y=A.template||{});var b=y.layout,M=y.data,w=[];g.layout=A,g.layout.template=y,x.supplyDefaults(g);var T=g._fullLayout,_=g._fullData,h={};function L(N,X){for(var j in N)if(j.charAt(0)!=="_"&&s(N[j])){var ee=n(j),q=[],G;for(G=0;G<X.length;G++)q.push(c(N,j,X[G])),ee!==j&&q.push(c(N,ee,X[G]));for(G=0;G<q.length;G++)h[q[G]]=1;L(N[j],q)}}function S(N,X){for(var j in N)if(j.indexOf("defaults")===-1&&s(N[j])){var ee=c(N,j,X);h[ee]?S(N[j],ee):w.push({code:"unused",path:ee})}}if(s(b)?(L(T,["layout"]),S(b,"layout")):w.push({code:"layout"}),!s(M))w.push({code:"data"});else{for(var k={},P,O=0;O<_.length;O++){var F=_[O];P=F.type,k[P]=(k[P]||0)+1,F._fullInput._template||w.push({code:"missing",index:F._fullInput.index,traceType:P})}for(P in M){var D=M[P].length,R=k[P]||0;D>R?w.push({code:"unused",traceType:P,templateCount:D,dataCount:R}):R>D&&w.push({code:"reused",traceType:P,templateCount:D,dataCount:R})}}function U(N,X){for(var j in N)if(j.charAt(0)!=="_"){var ee=N[j],q=c(N,j,X);s(ee)?(Array.isArray(N)&&ee._template===!1&&ee.templateitemname&&w.push({code:"missing",path:q,templateitemname:ee.templateitemname}),U(ee,q)):Array.isArray(ee)&&v(ee)&&U(ee,q)}}if(U({data:_,layout:T},""),w.length)return w.map(d)};function v(p){for(var y=0;y<p.length;y++)if(s(p[y]))return!0}function d(p){var y;switch(p.code){case"data":y="The template has no key data.";break;case"layout":y="The template has no key layout.";break;case"missing":p.path?y="There are no templates for item "+p.path+" with name "+p.templateitemname:y="There are no templates for trace "+p.index+", of type "+p.traceType+".";break;case"unused":p.path?y="The template item at "+p.path+" was not used in constructing the plot.":p.dataCount?y="Some of the templates of type "+p.traceType+" were not used. The template has "+p.templateCount+" traces, the data only has "+p.dataCount+" of this type.":y="The template has "+p.templateCount+" traces of type "+p.traceType+" but there are none in the data.";break;case"reused":y="Some of the templates of type "+p.traceType+" were used more than once. The template has "+p.templateCount+" traces, the data has "+p.dataCount+" of this type.";break}return p.msg=y,p}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(e,I,B){var u=e("fast-isnumeric"),s=e("./plot_api"),m=e("../plots/plots"),x=e("../lib"),t=e("../snapshot/helpers"),i=e("../snapshot/tosvg"),a=e("../snapshot/svgtoimg"),r=e("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function f(l,o){o=o||{};var c,v,d,p;x.isPlainObject(l)?(c=l.data||[],v=l.layout||{},d=l.config||{},p={}):(l=x.getGraphDiv(l),c=x.extendDeep([],l.data),v=x.extendDeep({},l.layout),d=l._context,p=l._fullLayout||{});function y(R){return!(R in o)||x.validate(o[R],n[R])}if(!y("width")&&o.width!==null||!y("height")&&o.height!==null)throw new Error("Height and width should be pixel values.");if(!y("format"))throw new Error("Export format is not "+x.join2(n.format.values,", "," or ")+".");var g={};function A(R,U){return x.coerce(o,g,n,R,U)}var b=A("format"),M=A("width"),w=A("height"),T=A("scale"),_=A("setBackground"),h=A("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var S=x.extendFlat({},v);M?S.width=M:o.width===null&&u(p.width)&&(S.width=p.width),w?S.height=w:o.height===null&&u(p.height)&&(S.height=p.height);var k=x.extendFlat({},d,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),P=t.getRedrawFunc(L);function O(){return new Promise(function(R){setTimeout(R,t.getDelay(L._fullLayout))})}function F(){return new Promise(function(R,U){var N=i(L,b,T),X=L._fullLayout.width,j=L._fullLayout.height;function ee(){s.purge(L),document.body.removeChild(L)}if(b==="full-json"){var q=m.graphJson(L,!1,"keepdata","object",!0,!0);return q.version=r,q=JSON.stringify(q),ee(),R(h?q:t.encodeJSON(q))}if(ee(),b==="svg")return R(h?N:t.encodeSVG(N));var G=document.createElement("canvas");G.id=x.randstr(),a({format:b,width:X,height:j,scale:T,canvas:G,svg:N,promise:!0}).then(R).catch(U)})}function D(R){return h?R.replace(t.IMAGE_URL_PREFIX,""):R}return new Promise(function(R,U){s.newPlot(L,c,S,k).then(P).then(O).then(F).then(function(N){R(D(N))}).catch(function(N){U(N)})})}I.exports=f},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1119,"./plot_api":540,"fast-isnumeric":190}],547:[function(e,I,B){var u=e("../lib"),s=e("../plots/plots"),m=e("./plot_schema"),x=e("./plot_config").dfltConfig,t=u.isPlainObject,i=Array.isArray,a=u.isArrayOrTypedArray;I.exports=function(A,b){A===void 0&&(A=[]),b===void 0&&(b={});var M=m.get(),w=[],T={_context:u.extendFlat({},x)},_,h;i(A)?(T.data=u.extendDeep([],A),_=A):(T.data=[],_=[],w.push(o("array","data"))),t(b)?(T.layout=u.extendDeep({},b),h=b):(T.layout={},h={},arguments.length>1&&w.push(o("object","layout"))),s.supplyDefaults(T);for(var L=T._fullData,S=_.length,k=0;k<S;k++){var P=_[k],O=["data",k];if(!t(P)){w.push(o("object",O));continue}var F=L[k],D=F.type,R=M.traces[D].attributes;R.type={valType:"enumerated",values:[D]},F.visible===!1&&P.visible!==!1&&w.push(o("invisible",O)),r(P,F,R,w,O);var U=P.transforms,N=F.transforms;if(U){i(U)||w.push(o("array",O,["transforms"])),O.push("transforms");for(var X=0;X<U.length;X++){var j=["transforms",X],ee=U[X].type;if(!t(U[X])){w.push(o("object",O,j));continue}var q=M.transforms[ee]?M.transforms[ee].attributes:{};q.type={valType:"enumerated",values:Object.keys(M.transforms)},r(U[X],N[X],q,w,O,j)}}}var G=T._fullLayout,J=n(M,L);return r(h,G,J,w,"layout"),w.length===0?void 0:w};function r(g,A,b,M,w,T){T=T||[];for(var _=Object.keys(g),h=0;h<_.length;h++){var L=_[h];if(L!=="transforms"){var S=T.slice();S.push(L);var k=g[L],P=A[L],O=v(b,L),F=(O||{}).valType,D=F==="info_array",R=F==="colorscale",U=(O||{}).items;if(!c(b,L))M.push(o("schema",w,S));else if(t(k)&&t(P)&&F!=="any")r(k,P,O,M,w,S);else if(D&&i(k)){k.length>P.length&&M.push(o("unused",w,S.concat(P.length)));var N=P.length,X=Array.isArray(U);X&&(N=Math.min(N,U.length));var j,ee,q,G,J;if(O.dimensions===2)for(ee=0;ee<N;ee++)if(i(k[ee])){k[ee].length>P[ee].length&&M.push(o("unused",w,S.concat(ee,P[ee].length)));var le=P[ee].length;for(j=0;j<(X?Math.min(le,U[ee].length):le);j++)q=X?U[ee][j]:U,G=k[ee][j],J=P[ee][j],u.validate(G,q)?J!==G&&J!==+G&&M.push(o("dynamic",w,S.concat(ee,j),G,J)):M.push(o("value",w,S.concat(ee,j),G))}else M.push(o("array",w,S.concat(ee),k[ee]));else for(ee=0;ee<N;ee++)q=X?U[ee]:U,G=k[ee],J=P[ee],u.validate(G,q)?J!==G&&J!==+G&&M.push(o("dynamic",w,S.concat(ee),G,J)):M.push(o("value",w,S.concat(ee),G))}else if(O.items&&!D&&i(k)){var fe=U[Object.keys(U)[0]],se=[],V,Y;for(V=0;V<P.length;V++){var ne=P[V]._index||V;if(Y=S.slice(),Y.push(ne),t(k[ne])&&t(P[V])){se.push(ne);var te=k[ne],K=P[V];t(te)&&te.visible!==!1&&K.visible===!1?M.push(o("invisible",w,Y)):r(te,K,fe,M,w,Y)}}for(V=0;V<k.length;V++)Y=S.slice(),Y.push(V),t(k[V])?se.indexOf(V)===-1&&M.push(o("unused",w,Y)):M.push(o("object",w,Y,k[V]))}else!t(k)&&t(P)?M.push(o("object",w,S,k)):!a(k)&&a(P)&&!D&&!R?M.push(o("array",w,S,k)):L in A?u.validate(k,O)?O.valType==="enumerated"&&(O.coerceNumber&&k!==+P||k!==P)&&M.push(o("dynamic",w,S,k,P)):M.push(o("value",w,S,k)):M.push(o("unused",w,S,k))}}return M}function n(g,A){for(var b=g.layout.layoutAttributes,M=0;M<A.length;M++){var w=A[M],T=g.traces[w.type],_=T.layoutAttributes;_&&(w.subplot?u.extendFlat(b[T.attributes.subplot.dflt],_):u.extendFlat(b,_))}return b}var f={object:function(g,A){var b;return g==="layout"&&A===""?b="The layout argument":g[0]==="data"&&A===""?b="Trace "+g[1]+" in the data argument":b=l(g)+"key "+A,b+" must be linked to an object container"},array:function(g,A){var b;return g==="data"?b="The data argument":b=l(g)+"key "+A,b+" must be linked to an array container"},schema:function(g,A){return l(g)+"key "+A+" is not part of the schema"},unused:function(g,A,b){var M=t(b)?"container":"key";return l(g)+M+" "+A+" did not get coerced"},dynamic:function(g,A,b,M){return[l(g)+"key",A,"(set to '"+b+"')","got reset to","'"+M+"'","during defaults."].join(" ")},invisible:function(g,A){return(A?l(g)+"item "+A:"Trace "+g[1])+" got defaulted to be not visible"},value:function(g,A,b){return[l(g)+"key "+A,"is set to an invalid value ("+b+")"].join(" ")}};function l(g){return i(g)?"In data trace "+g[1]+", ":"In "+g+", "}function o(g,A,b,M,w){b=b||"";var T,_;i(A)?(T=A[0],_=A[1]):(T=A,_=null);var h=y(b),L=f[g](A,h,M,w);return u.log(L),{code:g,container:T,trace:_,path:b,astr:h,msg:L}}function c(g,A){var b=p(A),M=b.keyMinusId,w=b.id;return M in g&&g[M]._isSubplotObj&&w?!0:A in g}function v(g,A){if(A in g)return g[A];var b=p(A);return g[b.keyMinusId]}var d=u.counterRegex("([a-z]+)");function p(g){var A=g.match(d);return{keyMinusId:A&&A[1],id:A&&A[2]}}function y(g){if(!i(g))return String(g);for(var A="",b=0;b<g.length;b++){var M=g[b];typeof M=="number"?A=A.substr(0,A.length-1)+"["+M+"]":A+=M,b<g.length-1&&(A+=".")}return A}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(e,I,B){I.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(e,I,B){var u=e("../lib"),s=e("../plot_api/plot_template");I.exports=function(x,t,i){var a=i.name,r=i.inclusionAttr||"visible",n=t[a],f=u.isArrayOrTypedArray(x[a])?x[a]:[],l=t[a]=[],o=s.arrayTemplater(t,a,r),c,v;for(c=0;c<f.length;c++){var d=f[c];u.isPlainObject(d)?v=o.newItem(d):(v=o.newItem({}),v[r]=!1),v._index=c,v[r]!==!1&&i.handleItemDefaults(d,v,t,i),l.push(v)}var p=o.defaultItems();for(c=0;c<p.length;c++)v=p[c],v._index=l.length,i.handleItemDefaults({},v,t,i,{}),l.push(v);if(u.isArrayOrTypedArray(n)){var y=Math.min(n.length,l.length);for(c=0;c<y;c++)u.relinkPrivateKeys(l[c],n[c])}return l}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(e,I,B){var u=e("./font_attributes"),s=e("../components/fx/attributes");I.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:u({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:s.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=s.dateTime2ms,x=s.incrementMonth,t=e("../../constants/numerical"),i=t.ONEAVGMONTH;I.exports=function(r,n,f,l){if(n.type!=="date")return{vals:l};var o=r[f+"periodalignment"];if(!o)return{vals:l};var c=r[f+"period"],v;if(u(c)){if(c=+c,c<=0)return{vals:l}}else if(typeof c=="string"&&c.charAt(0)==="M"){var d=+c.substring(1);if(d>0&&Math.round(d)===d)v=d;else return{vals:l}}for(var p=n.calendar,y=o==="start",g=o==="end",A=r[f+"period0"],b=m(A,p)||0,M=[],w=[],T=[],_=l.length,h=0;h<_;h++){var L=l[h],S,k,P;if(v){for(S=Math.round((L-b)/(v*i)),P=x(b,v*S,p);P>L;)P=x(P,-v,p);for(;P<=L;)P=x(P,v,p);k=x(P,-v,p)}else{for(S=Math.round((L-b)/c),P=b+S*c;P>L;)P-=c;for(;P<=L;)P+=c;k=P-c}M[h]=y?k:g?P:(k+P)/2,w[h]=k,T[h]=P}return{vals:M,starts:w,ends:T}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(e,I,B){I.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../constants/numerical").FP_SAFE,t=e("../../registry"),i=e("../../components/drawing"),a=e("./axis_ids"),r=a.getFromId,n=a.isLinked;I.exports={getAutoRange:f,makePadFn:o,doAutoRange:p,findExtremes:y,concatExtremes:d};function f(_,h){var L,S,k=[],P=_._fullLayout,O=o(P,h,0),F=o(P,h,1),D=d(_,h),R=D.min,U=D.max;if(R.length===0||U.length===0)return m.simpleMap(h.range,h.r2l);var N=R[0].val,X=U[0].val;for(L=1;L<R.length&&N===X;L++)N=Math.min(N,R[L].val);for(L=1;L<U.length&&N===X;L++)X=Math.max(X,U[L].val);var j=!1;if(h.range){var ee=m.simpleMap(h.range,h.r2l);j=ee[1]<ee[0]}h.autorange==="reversed"&&(j=!0,h.autorange=!0);var q=h.rangemode,G=q==="tozero",J=q==="nonnegative",le=h._length,fe=le/10,se=0,V,Y,ne,te,K,$;for(L=0;L<R.length;L++)for(V=R[L],S=0;S<U.length;S++)Y=U[S],$=Y.val-V.val-l(h,V.val,Y.val),$>0&&(K=le-O(V)-F(Y),K>fe?$/K>se&&(ne=V,te=Y,se=$/K):$/le>se&&(ne={val:V.val,nopad:1},te={val:Y.val,nopad:1},se=$/le));function ae(he,me){return Math.max(he,F(me))}if(N===X){var ie=N-1,oe=N+1;if(G)if(N===0)k=[0,1];else{var ue=(N>0?U:R).reduce(ae,0),xe=N/(1-Math.min(.5,ue/le));k=N>0?[0,xe]:[xe,0]}else J?k=[Math.max(0,ie),Math.max(1,oe)]:k=[ie,oe]}else G?(ne.val>=0&&(ne={val:0,nopad:1}),te.val<=0&&(te={val:0,nopad:1})):J&&(ne.val-se*O(ne)<0&&(ne={val:0,nopad:1}),te.val<=0&&(te={val:1,nopad:1})),se=(te.val-ne.val-l(h,V.val,Y.val))/(le-O(ne)-F(te)),k=[ne.val-se*O(ne),te.val+se*F(te)];return j&&k.reverse(),m.simpleMap(k,h.l2r||Number)}function l(_,h,L){var S=0;if(_.rangebreaks)for(var k=_.locateBreaks(h,L),P=0;P<k.length;P++){var O=k[P];S+=O.max-O.min}return S}function o(_,h,L){var S=.05*h._length,k=h._anchorAxis||{};if((h.ticklabelposition||"").indexOf("inside")!==-1||(k.ticklabelposition||"").indexOf("inside")!==-1){var P=h.autorange==="reversed";if(!P){var O=m.simpleMap(h.range,h.r2l);P=O[1]<O[0]}P&&(L=!L)}var F=0;return n(_,h._id)||(F=v(_,h,L)),S=Math.max(F,S),h.constrain==="domain"&&h._inputDomain&&(S*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?S:F)}}var c=3;function v(_,h,L){var S=0,k=h._id.charAt(0)==="x";for(var P in _._plots){var O=_._plots[P];if(!(h._id!==O.xaxis._id&&h._id!==O.yaxis._id)){var F=(k?O.yaxis:O.xaxis)||{};if((F.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(F.side==="left"||F.side==="bottom")||L&&(F.side==="top"||F.side==="right"))){if(F._vals){var D=m.deg2rad(F._tickAngles[F._id+"tick"]||0),R=Math.abs(Math.cos(D)),U=Math.abs(Math.sin(D));if(!F._vals[0].bb){var N=F._id+"tick",X=F._selections[N];X.each(function(le){var fe=u.select(this),se=fe.select(".text-math-group");se.empty()&&(le.bb=i.bBox(fe.node()))})}for(var j=0;j<F._vals.length;j++){var ee=F._vals[j],q=ee.bb;if(q){var G=2*c+q.width,J=2*c+q.height;S=Math.max(S,k?Math.max(G*R,J*U):Math.max(J*R,G*U))}}}F.ticks==="inside"&&F.ticklabelposition==="inside"&&(S+=F.ticklen||0)}}}return S}function d(_,h,L){var S=h._id,k=_._fullData,P=_._fullLayout,O=[],F=[],D,R,U;function N(G,J){for(D=0;D<J.length;D++){var le=G[J[D]],fe=(le._extremes||{})[S];if(le.visible===!0&&fe){for(R=0;R<fe.min.length;R++)U=fe.min[R],g(O,U.val,U.pad,{extrapad:U.extrapad});for(R=0;R<fe.max.length;R++)U=fe.max[R],A(F,U.val,U.pad,{extrapad:U.extrapad})}}}if(N(k,h._traceIndices),N(P.annotations||[],h._annIndices||[]),N(P.shapes||[],h._shapeIndices||[]),h._matchGroup&&!L){for(var X in h._matchGroup)if(X!==h._id){var j=r(_,X),ee=d(_,j,!0),q=h._length/j._length;for(R=0;R<ee.min.length;R++)U=ee.min[R],g(O,U.val,U.pad*q,{extrapad:U.extrapad});for(R=0;R<ee.max.length;R++)U=ee.max[R],A(F,U.val,U.pad*q,{extrapad:U.extrapad})}}return{min:O,max:F}}function p(_,h,L){if(h.setScale(),h.autorange){h.range=L?L.slice():f(_,h),h._r=h.range.slice(),h._rl=m.simpleMap(h._r,h.r2l);var S=h._input,k={};k[h._attr+".range"]=h.range,k[h._attr+".autorange"]=h.autorange,t.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,k),S.range=h.range.slice(),S.autorange=h.autorange}var P=h._anchorAxis;if(P&&P.rangeslider){var O=P.rangeslider[h._name];O&&O.rangemode==="auto"&&(O.range=f(_,h)),P._input.rangeslider[h._name]=m.extendFlat({},O)}}function y(_,h,L){L||(L={}),_._m||_.setScale();var S=[],k=[],P=h.length,O=L.padded||!1,F=L.tozero&&(_.type==="linear"||_.type==="-"),D=_.type==="log",R=!1,U=L.vpadLinearized||!1,N,X,j,ee,q,G,J,le,fe;function se(ie){if(Array.isArray(ie))return R=!0,function(ue){return Math.max(Number(ie[ue]||0),0)};var oe=Math.max(Number(ie||0),0);return function(){return oe}}var V=se((_._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),Y=se((_._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),ne=se(L.vpadplus||L.vpad),te=se(L.vpadminus||L.vpad);if(!R){if(le=1/0,fe=-1/0,D)for(N=0;N<P;N++)X=h[N],X<le&&X>0&&(le=X),X>fe&&X<x&&(fe=X);else for(N=0;N<P;N++)X=h[N],X<le&&X>-x&&(le=X),X>fe&&X<x&&(fe=X);h=[le,fe],P=2}var K={tozero:F,extrapad:O};function $(ie){j=h[ie],!!s(j)&&(G=V(ie),J=Y(ie),U?(ee=_.c2l(j)-te(ie),q=_.c2l(j)+ne(ie)):(le=j-te(ie),fe=j+ne(ie),D&&le<fe/10&&(le=fe/10),ee=_.c2l(le),q=_.c2l(fe)),F&&(ee=Math.min(0,ee),q=Math.max(0,q)),M(ee)&&g(S,ee,J,K),M(q)&&A(k,q,G,K))}var ae=Math.min(6,P);for(N=0;N<ae;N++)$(N);for(N=P-1;N>=ae;N--)$(N);return{min:S,max:k,opts:L}}function g(_,h,L,S){b(_,h,L,S,w)}function A(_,h,L,S){b(_,h,L,S,T)}function b(_,h,L,S,k){for(var P=S.tozero,O=S.extrapad,F=!0,D=0;D<_.length&&F;D++){var R=_[D];if(k(R.val,h)&&R.pad>=L&&(R.extrapad||!O)){F=!1;break}else k(h,R.val)&&R.pad<=L&&(O||!R.extrapad)&&(_.splice(D,1),D--)}if(F){var U=P&&h===0;_.push({val:h,pad:U?0:L,extrapad:U?!1:O})}}function M(_){return s(_)&&Math.abs(_)<x}function w(_,h){return _<=h}function T(_,h){return _>=h}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../lib"),i=t.strTranslate,a=e("../../lib/svg_text_utils"),r=e("../../components/titles"),n=e("../../components/color"),f=e("../../components/drawing"),l=e("./layout_attributes"),o=e("./clean_ticks"),c=e("../../constants/numerical"),v=c.ONEMAXYEAR,d=c.ONEAVGYEAR,p=c.ONEMINYEAR,y=c.ONEMAXQUARTER,g=c.ONEAVGQUARTER,A=c.ONEMINQUARTER,b=c.ONEMAXMONTH,M=c.ONEAVGMONTH,w=c.ONEMINMONTH,T=c.ONEWEEK,_=c.ONEDAY,h=_/2,L=c.ONEHOUR,S=c.ONEMIN,k=c.ONESEC,P=c.MINUS_SIGN,O=c.BADNUM,F={K:"zeroline"},D={K:"gridline",L:"path"},R={K:"tick",L:"path"},U={K:"tick",L:"text"},N=e("../../constants/alignment"),X=N.MID_SHIFT,j=N.CAP_SHIFT,ee=N.LINE_SPACING,q=N.OPPOSITE_SIDE,G=3,J=I.exports={};J.setConvert=e("./set_convert");var le=e("./axis_autotype"),fe=e("./axis_ids"),se=fe.idSort,V=fe.isLinked;J.id2name=fe.id2name,J.name2id=fe.name2id,J.cleanId=fe.cleanId,J.list=fe.list,J.listIds=fe.listIds,J.getFromId=fe.getFromId,J.getFromTrace=fe.getFromTrace;var Y=e("./autorange");J.getAutoRange=Y.getAutoRange,J.findExtremes=Y.findExtremes;var ne=1e-4;function te(Ae){var Ee=(Ae[1]-Ae[0])*ne;return[Ae[0]-Ee,Ae[1]+Ee]}J.coerceRef=function(Ae,Ee,Fe,Ke,tt,ut){var ct=Ke.charAt(Ke.length-1),yt=Fe._fullLayout._subplots[ct+"axis"],kt=Ke+"ref",jt={};return tt||(tt=yt[0]||(typeof ut=="string"?ut:ut[0])),ut||(ut=tt),yt=yt.concat(yt.map(function(Mr){return Mr+" domain"})),jt[kt]={valType:"enumerated",values:yt.concat(ut?typeof ut=="string"?[ut]:ut:[]),dflt:tt},t.coerce(Ae,Ee,jt,kt)},J.getRefType=function(Ae){return Ae===void 0?Ae:Ae==="paper"?"paper":Ae==="pixel"?"pixel":/( domain)$/.test(Ae)?"domain":"range"},J.coercePosition=function(Ae,Ee,Fe,Ke,tt,ut){var ct,yt,kt=J.getRefType(Ke);if(kt!=="range")ct=t.ensureNumber,yt=Fe(tt,ut);else{var jt=J.getFromId(Ee,Ke);ut=jt.fraction2r(ut),yt=Fe(tt,ut),ct=jt.cleanPos}Ae[tt]=ct(yt)},J.cleanPosition=function(Ae,Ee,Fe){var Ke=Fe==="paper"||Fe==="pixel"?t.ensureNumber:J.getFromId(Ee,Fe).cleanPos;return Ke(Ae)},J.redrawComponents=function(Ae,Ee){Ee=Ee||J.listIds(Ae);var Fe=Ae._fullLayout;function Ke(tt,ut,ct,yt){for(var kt=x.getComponentMethod(tt,ut),jt={},Mr=0;Mr<Ee.length;Mr++)for(var Sr=Fe[J.id2name(Ee[Mr])],Lr=Sr[ct],Ar=0;Ar<Lr.length;Ar++){var Ur=Lr[Ar];if(!jt[Ur]&&(kt(Ae,Ur),jt[Ur]=1,yt))return}}Ke("annotations","drawOne","_annIndices"),Ke("shapes","drawOne","_shapeIndices"),Ke("images","draw","_imgIndices",!0)};var K=J.getDataConversions=function(Ae,Ee,Fe,Ke){var tt,ut=Fe==="x"||Fe==="y"||Fe==="z"?Fe:Ke;if(Array.isArray(ut)){if(tt={type:le(Ke,void 0,{autotypenumbers:Ae._fullLayout.autotypenumbers}),_categories:[]},J.setConvert(tt),tt.type==="category")for(var ct=0;ct<Ke.length;ct++)tt.d2c(Ke[ct])}else tt=J.getFromTrace(Ae,Ee,ut);return tt?{d2c:tt.d2c,c2d:tt.c2d}:ut==="ids"?{d2c:ae,c2d:ae}:{d2c:$,c2d:$}};function $(Ae){return+Ae}function ae(Ae){return String(Ae)}J.getDataToCoordFunc=function(Ae,Ee,Fe,Ke){return K(Ae,Ee,Fe,Ke).d2c},J.counterLetter=function(Ae){var Ee=Ae.charAt(0);if(Ee==="x")return"y";if(Ee==="y")return"x"},J.minDtick=function(Ae,Ee,Fe,Ke){["log","category","multicategory"].indexOf(Ae.type)!==-1||!Ke?Ae._minDtick=0:Ae._minDtick===void 0?(Ae._minDtick=Ee,Ae._forceTick0=Fe):Ae._minDtick&&((Ae._minDtick/Ee+1e-6)%1<2e-6&&((Fe-Ae._forceTick0)/Ee%1+1.000001)%1<2e-6?(Ae._minDtick=Ee,Ae._forceTick0=Fe):((Ee/Ae._minDtick+1e-6)%1>2e-6||((Fe-Ae._forceTick0)/Ae._minDtick%1+1.000001)%1>2e-6)&&(Ae._minDtick=0))},J.saveRangeInitial=function(Ae,Ee){for(var Fe=J.list(Ae,"",!0),Ke=!1,tt=0;tt<Fe.length;tt++){var ut=Fe[tt],ct=ut._rangeInitial===void 0,yt=ct||!(ut.range[0]===ut._rangeInitial[0]&&ut.range[1]===ut._rangeInitial[1]);(ct&&ut.autorange===!1||Ee&&yt)&&(ut._rangeInitial=ut.range.slice(),Ke=!0)}return Ke},J.saveShowSpikeInitial=function(Ae,Ee){for(var Fe=J.list(Ae,"",!0),Ke=!1,tt="on",ut=0;ut<Fe.length;ut++){var ct=Fe[ut],yt=ct._showSpikeInitial===void 0,kt=yt||ct.showspikes!==ct._showspikes;(yt||Ee&&kt)&&(ct._showSpikeInitial=ct.showspikes,Ke=!0),tt==="on"&&!ct.showspikes&&(tt="off")}return Ae._fullLayout._cartesianSpikesEnabled=tt,Ke},J.autoBin=function(Ae,Ee,Fe,Ke,tt,ut){var ct=t.aggNums(Math.min,null,Ae),yt=t.aggNums(Math.max,null,Ae);if(Ee.type==="category"||Ee.type==="multicategory")return{start:ct-.5,end:yt+.5,size:Math.max(1,Math.round(ut)||1),_dataSpan:yt-ct};tt||(tt=Ee.calendar);var kt;if(Ee.type==="log"?kt={type:"linear",range:[ct,yt]}:kt={type:Ee.type,range:t.simpleMap([ct,yt],Ee.c2r,0,tt),calendar:tt},J.setConvert(kt),ut=ut&&o.dtick(ut,kt.type),ut)kt.dtick=ut,kt.tick0=o.tick0(void 0,kt.type,tt);else{var jt;if(Fe)jt=(yt-ct)/Fe;else{var Mr=t.distinctVals(Ae),Sr=Math.pow(10,Math.floor(Math.log(Mr.minDiff)/Math.LN10)),Lr=Sr*t.roundUp(Mr.minDiff/Sr,[.9,1.9,4.9,9.9],!0);jt=Math.max(Lr,2*t.stdev(Ae)/Math.pow(Ae.length,Ke?.25:.4)),s(jt)||(jt=1)}J.autoTicks(kt,jt)}var Ar=kt.dtick,Ur=J.tickIncrement(J.tickFirst(kt),Ar,"reverse",tt),fn,Cr;if(typeof Ar=="number")Ur=ie(Ur,Ae,kt,ct,yt),Cr=1+Math.floor((yt-Ur)/Ar),fn=Ur+Cr*Ar;else for(kt.dtick.charAt(0)==="M"&&(Ur=oe(Ur,Ae,Ar,ct,tt)),fn=Ur,Cr=0;fn<=yt;)fn=J.tickIncrement(fn,Ar,!1,tt),Cr++;return{start:Ee.c2r(Ur,0,tt),end:Ee.c2r(fn,0,tt),size:Ar,_dataSpan:yt-ct}};function ie(Ae,Ee,Fe,Ke,tt){var ut=0,ct=0,yt=0,kt=0;function jt(Ar){return(1+(Ar-Ae)*100/Fe.dtick)%100<2}for(var Mr=0;Mr<Ee.length;Mr++)Ee[Mr]%1==0?yt++:s(Ee[Mr])||kt++,jt(Ee[Mr])&&ut++,jt(Ee[Mr]+Fe.dtick/2)&&ct++;var Sr=Ee.length-kt;if(yt===Sr&&Fe.type!=="date")Fe.dtick<1?Ae=Ke-.5*Fe.dtick:(Ae-=.5,Ae+Fe.dtick<Ke&&(Ae+=Fe.dtick));else if(ct<Sr*.1&&(ut>Sr*.3||jt(Ke)||jt(tt))){var Lr=Fe.dtick/2;Ae+=Ae+Lr<Ke?Lr:-Lr}return Ae}function oe(Ae,Ee,Fe,Ke,tt){var ut=t.findExactDates(Ee,tt),ct=.8;if(ut.exactDays>ct){var yt=Number(Fe.substr(1));ut.exactYears>ct&&yt%12==0?Ae=J.tickIncrement(Ae,"M6","reverse")+_*1.5:ut.exactMonths>ct?Ae=J.tickIncrement(Ae,"M1","reverse")+_*15.5:Ae-=h;var kt=J.tickIncrement(Ae,Fe);if(kt<=Ke)return kt}return Ae}J.prepTicks=function(Ae,Ee){var Fe=t.simpleMap(Ae.range,Ae.r2l,void 0,void 0,Ee);if(Ae._dtickInit=Ae.dtick,Ae._tick0Init=Ae.tick0,Ae.tickmode==="auto"||!Ae.dtick){var Ke=Ae.nticks,tt;Ke||(Ae.type==="category"||Ae.type==="multicategory"?(tt=Ae.tickfont?t.bigFont(Ae.tickfont.size||12):15,Ke=Ae._length/tt):(tt=Ae._id.charAt(0)==="y"?40:80,Ke=t.constrain(Ae._length/tt,4,9)+1),Ae._name==="radialaxis"&&(Ke*=2)),Ae.tickmode==="array"&&(Ke*=100),Ae._roughDTick=Math.abs(Fe[1]-Fe[0])/Ke,J.autoTicks(Ae,Ae._roughDTick),Ae._minDtick>0&&Ae.dtick<Ae._minDtick*2&&(Ae.dtick=Ae._minDtick,Ae.tick0=Ae.l2r(Ae._forceTick0))}Ae.ticklabelmode==="period"&&xe(Ae),Ae.tick0||(Ae.tick0=Ae.type==="date"?"2000-01-01":0),Ae.type==="date"&&Ae.dtick<.1&&(Ae.dtick=.1),Ze(Ae)};function ue(Ae){return+Ae.substring(1)}function xe(Ae){var Ee;function Fe(){return!(s(Ae.dtick)||Ae.dtick.charAt(0)!=="M")}var Ke=Fe(),tt=J.getTickFormat(Ae);if(tt){var ut=Ae._dtickInit!==Ae.dtick;/%[fLQsSMX]/.test(tt)||(/%[HI]/.test(tt)?(Ee=L,ut&&!Ke&&Ae.dtick<L&&(Ae.dtick=L)):/%p/.test(tt)?(Ee=h,ut&&!Ke&&Ae.dtick<h&&(Ae.dtick=h)):/%[Aadejuwx]/.test(tt)?(Ee=_,ut&&!Ke&&Ae.dtick<_&&(Ae.dtick=_)):/%[UVW]/.test(tt)?(Ee=T,ut&&!Ke&&Ae.dtick<T&&(Ae.dtick=T)):/%[Bbm]/.test(tt)?(Ee=M,ut&&(Ke?ue(Ae.dtick)<1:Ae.dtick<w)&&(Ae.dtick="M1")):/%[q]/.test(tt)?(Ee=g,ut&&(Ke?ue(Ae.dtick)<3:Ae.dtick<A)&&(Ae.dtick="M3")):/%[Yy]/.test(tt)&&(Ee=d,ut&&(Ke?ue(Ae.dtick)<12:Ae.dtick<p)&&(Ae.dtick="M12")))}Ke=Fe(),Ke&&Ae.tick0===Ae._dowTick0&&(Ae.tick0=Ae._rawTick0),Ae._definedDelta=Ee}function he(Ae,Ee,Fe){for(var Ke=0;Ke<Ae.length;Ke++){var tt=Ae[Ke].value,ut=Ke,ct=Ke+1;Ke<Ae.length-1?(ut=Ke,ct=Ke+1):Ke>0?(ut=Ke-1,ct=Ke):(ut=Ke,ct=Ke);var yt=Ae[ut].value,kt=Ae[ct].value,jt=Math.abs(kt-yt),Mr=Fe||jt,Sr=0;Mr>=p?jt>=p&&jt<=v?Sr=jt:Sr=d:Fe===g&&Mr>=A?jt>=A&&jt<=y?Sr=jt:Sr=g:Mr>=w?jt>=w&&jt<=b?Sr=jt:Sr=M:Fe===T&&Mr>=T?Sr=T:Mr>=_?Sr=_:Fe===h&&Mr>=h?Sr=h:Fe===L&&Mr>=L&&(Sr=L);var Lr;Sr>=jt&&(Sr=jt,Lr=!0);var Ar=tt+Sr;if(Ee.rangebreaks&&Sr>0){for(var Ur=84,fn=0,Cr=0;Cr<Ur;Cr++){var _r=(Cr+.5)/Ur;Ee.maskBreaks(tt*(1-_r)+_r*Ar)!==O&&fn++}Sr*=fn/Ur,Sr||(Ae[Ke].drop=!0),Lr&&jt>T&&(Sr=jt)}(Sr>0||Ke===0)&&(Ae[Ke].periodX=tt+Sr/2)}}J.calcTicks=function(Ee,Fe){J.prepTicks(Ee,Fe);var Ke=t.simpleMap(Ee.range,Ee.r2l,void 0,void 0,Fe);if(Ee.tickmode==="array")return me(Ee);var tt=te(Ke),ut=tt[0],ct=tt[1],yt=Ke[1]<Ke[0],kt=Math.min(Ke[0],Ke[1]),jt=Math.max(Ke[0],Ke[1]),Mr=Ee.type==="log"&&!(s(Ee.dtick)||Ee.dtick.charAt(0)==="L"),Sr=Ee.ticklabelmode==="period";if(Ee._tmin=J.tickFirst(Ee,Fe),Ee._tmin<ut!==yt)return[];(Ee.type==="category"||Ee.type==="multicategory")&&(ct=yt?Math.max(-.5,ct):Math.min(Ee._categories.length-.5,ct));var Lr=Ee._tmin;Ee.rangebreaks&&Ee._tick0Init!==Ee.tick0&&(Lr=lr(Lr,Ee),yt||(Lr=J.tickIncrement(Lr,Ee.dtick,!yt,Ee.calendar))),Sr&&(Lr=J.tickIncrement(Lr,Ee.dtick,!yt,Ee.calendar));for(var Ar=Math.max(1e3,Ee._length||0),Ur=[],fn=null;yt?Lr>=ct:Lr<=ct;Lr=J.tickIncrement(Lr,Ee.dtick,yt,Ee.calendar)){if(Ee.rangebreaks&&!yt){if(Lr<ut)continue;if(Ee.maskBreaks(Lr)===O&&lr(Lr,Ee)>=jt)break}if(Ur.length>Ar||Lr===fn)break;fn=Lr;var Cr=!1;Mr&&Lr!==(Lr|0)&&(Cr=!0),Ur.push({minor:Cr,value:Lr})}Sr&&he(Ur,Ee,Ee._definedDelta);var _r;if(Ee.rangebreaks){var En=Ee._id.charAt(0)==="y",Jr=1;Ee.tickmode==="auto"&&(Jr=Ee.tickfont?Ee.tickfont.size:12);var Pr=NaN;for(_r=Ur.length-1;_r>-1;_r--){if(Ur[_r].drop){Ur.splice(_r,1);continue}Ur[_r].value=lr(Ur[_r].value,Ee);var vn=Ee.c2p(Ur[_r].value);(En?Pr>vn-Jr:Pr<vn+Jr)?Ur.splice(yt?_r+1:_r,1):Pr=vn}}Ir(Ee)&&Math.abs(Ke[1]-Ke[0])===360&&Ur.pop(),Ee._tmax=(Ur[Ur.length-1]||{}).value,Ee._prevDateHead="",Ee._inCalcTicks=!0;var xn=[],qr,st;for(_r=0;_r<Ur.length;_r++){var Bt=Ur[_r].minor,ir=Ur[_r].value;qr=J.tickText(Ee,ir,!1,Bt),st=Ur[_r].periodX,st!==void 0&&(qr.periodX=st,(st>jt||st<kt)&&(st>jt&&(qr.periodX=jt),st<kt&&(qr.periodX=kt),qr.text=" ",Ee._prevDateHead="")),xn.push(qr)}return Ee._inCalcTicks=!1,xn};function me(Ae){var Ee=Ae.tickvals,Fe=Ae.ticktext,Ke=new Array(Ee.length),tt=t.simpleMap(Ae.range,Ae.r2l),ut=te(tt),ct=Math.min(ut[0],ut[1]),yt=Math.max(ut[0],ut[1]),kt=0;Array.isArray(Fe)||(Fe=[]);var jt=Ae.type==="category"?Ae.d2l_noadd:Ae.d2l;Ae.type==="log"&&String(Ae.dtick).charAt(0)!=="L"&&(Ae.dtick="L"+Math.pow(10,Math.floor(Math.min(Ae.range[0],Ae.range[1]))-1));for(var Mr=0;Mr<Ee.length;Mr++){var Sr=jt(Ee[Mr]);Sr>ct&&Sr<yt&&(Fe[Mr]===void 0?Ke[kt]=J.tickText(Ae,Sr):Ke[kt]=rt(Ae,Sr,String(Fe[Mr])),kt++)}return kt<Ee.length&&Ke.splice(kt,Ee.length-kt),Ae.rangebreaks&&(Ke=Ke.filter(function(Lr){return Ae.maskBreaks(Lr.x)!==O})),Ke}var be=[2,5,10],Ce=[1,2,3,6,12],Se=[1,2,5,10,15,30],Be=[1,2,3,7,14],Ye=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Xe=[-.301,0,.301,.699,1],Te=[15,30,45,90,180];function Ie(Ae,Ee,Fe){return Ee*t.roundUp(Ae/Ee,Fe)}J.autoTicks=function(Ae,Ee){var Fe;function Ke(Mr){return Math.pow(Mr,Math.floor(Math.log(Ee)/Math.LN10))}if(Ae.type==="date"){Ae.tick0=t.dateTick0(Ae.calendar,0);var tt=2*Ee;if(tt>d)Ee/=d,Fe=Ke(10),Ae.dtick="M"+12*Ie(Ee,Fe,be);else if(tt>M)Ee/=M,Ae.dtick="M"+Ie(Ee,1,Ce);else if(tt>_){Ae.dtick=Ie(Ee,_,Ae._hasDayOfWeekBreaks?[1,2,7,14]:Be);var ut=J.getTickFormat(Ae),ct=Ae.ticklabelmode==="period";ct&&(Ae._rawTick0=Ae.tick0),/%[uVW]/.test(ut)?Ae.tick0=t.dateTick0(Ae.calendar,2):Ae.tick0=t.dateTick0(Ae.calendar,1),ct&&(Ae._dowTick0=Ae.tick0)}else tt>L?Ae.dtick=Ie(Ee,L,Ce):tt>S?Ae.dtick=Ie(Ee,S,Se):tt>k?Ae.dtick=Ie(Ee,k,Se):(Fe=Ke(10),Ae.dtick=Ie(Ee,Fe,be))}else if(Ae.type==="log"){Ae.tick0=0;var yt=t.simpleMap(Ae.range,Ae.r2l);if(Ee>.7)Ae.dtick=Math.ceil(Ee);else if(Math.abs(yt[1]-yt[0])<1){var kt=1.5*Math.abs((yt[1]-yt[0])/Ee);Ee=Math.abs(Math.pow(10,yt[1])-Math.pow(10,yt[0]))/kt,Fe=Ke(10),Ae.dtick="L"+Ie(Ee,Fe,be)}else Ae.dtick=Ee>.3?"D2":"D1"}else Ae.type==="category"||Ae.type==="multicategory"?(Ae.tick0=0,Ae.dtick=Math.ceil(Math.max(Ee,1))):Ir(Ae)?(Ae.tick0=0,Fe=1,Ae.dtick=Ie(Ee,Fe,Te)):(Ae.tick0=0,Fe=Ke(10),Ae.dtick=Ie(Ee,Fe,be));if(Ae.dtick===0&&(Ae.dtick=1),!s(Ae.dtick)&&typeof Ae.dtick!="string"){var jt=Ae.dtick;throw Ae.dtick=1,"ax.dtick error: "+String(jt)}};function Ze(Ae){var Ee=Ae.dtick;if(Ae._tickexponent=0,!s(Ee)&&typeof Ee!="string"&&(Ee=1),(Ae.type==="category"||Ae.type==="multicategory")&&(Ae._tickround=null),Ae.type==="date"){var Fe=Ae.r2l(Ae.tick0),Ke=Ae.l2r(Fe).replace(/(^-|i)/g,""),tt=Ke.length;if(String(Ee).charAt(0)==="M")tt>10||Ke.substr(5)!=="01-01"?Ae._tickround="d":Ae._tickround=+Ee.substr(1)%12==0?"y":"m";else if(Ee>=_&&tt<=10||Ee>=_*15)Ae._tickround="d";else if(Ee>=S&&tt<=16||Ee>=L)Ae._tickround="M";else if(Ee>=k&&tt<=19||Ee>=S)Ae._tickround="S";else{var ut=Ae.l2r(Fe+Ee).replace(/^-/,"").length;Ae._tickround=Math.max(tt,ut)-20,Ae._tickround<0&&(Ae._tickround=4)}}else if(s(Ee)||Ee.charAt(0)==="L"){var ct=Ae.range.map(Ae.r2d||Number);s(Ee)||(Ee=Number(Ee.substr(1))),Ae._tickround=2-Math.floor(Math.log(Ee)/Math.LN10+.01);var yt=Math.max(Math.abs(ct[0]),Math.abs(ct[1])),kt=Math.floor(Math.log(yt)/Math.LN10+.01),jt=Ae.minexponent===void 0?3:Ae.minexponent;Math.abs(kt)>jt&&(Gt(Ae.exponentformat)&&!It(kt)?Ae._tickexponent=3*Math.round((kt-1)/3):Ae._tickexponent=kt)}else Ae._tickround=null}J.tickIncrement=function(Ae,Ee,Fe,Ke){var tt=Fe?-1:1;if(s(Ee))return t.increment(Ae,tt*Ee);var ut=Ee.charAt(0),ct=tt*Number(Ee.substr(1));if(ut==="M")return t.incrementMonth(Ae,ct,Ke);if(ut==="L")return Math.log(Math.pow(10,Ae)+ct)/Math.LN10;if(ut==="D"){var yt=Ee==="D2"?Xe:Ye,kt=Ae+tt*.01,jt=t.roundUp(t.mod(kt,1),yt,Fe);return Math.floor(kt)+Math.log(u.round(Math.pow(10,jt),1))/Math.LN10}throw"unrecognized dtick "+String(Ee)},J.tickFirst=function(Ae,Ee){var Fe=Ae.r2l||Number,Ke=t.simpleMap(Ae.range,Fe,void 0,void 0,Ee),tt=Ke[1]<Ke[0],ut=tt?Math.floor:Math.ceil,ct=te(Ke)[0],yt=Ae.dtick,kt=Fe(Ae.tick0);if(s(yt)){var jt=ut((ct-kt)/yt)*yt+kt;return(Ae.type==="category"||Ae.type==="multicategory")&&(jt=t.constrain(jt,0,Ae._categories.length-1)),jt}var Mr=yt.charAt(0),Sr=Number(yt.substr(1));if(Mr==="M"){for(var Lr=0,Ar=kt,Ur,fn,Cr;Lr<10;){if(Ur=J.tickIncrement(Ar,yt,tt,Ae.calendar),(Ur-ct)*(Ar-ct)<=0)return tt?Math.min(Ar,Ur):Math.max(Ar,Ur);fn=(ct-(Ar+Ur)/2)/(Ur-Ar),Cr=Mr+(Math.abs(Math.round(fn))||1)*Sr,Ar=J.tickIncrement(Ar,Cr,fn<0?!tt:tt,Ae.calendar),Lr++}return t.error("tickFirst did not converge",Ae),Ar}else{if(Mr==="L")return Math.log(ut((Math.pow(10,ct)-kt)/Sr)*Sr+kt)/Math.LN10;if(Mr==="D"){var _r=yt==="D2"?Xe:Ye,En=t.roundUp(t.mod(ct,1),_r,tt);return Math.floor(ct)+Math.log(u.round(Math.pow(10,En),1))/Math.LN10}else throw"unrecognized dtick "+String(yt)}},J.tickText=function(Ae,Ee,Fe,Ke){var tt=rt(Ae,Ee),ut=Ae.tickmode==="array",ct=Fe||ut,yt=Ae.type,kt=yt==="category"?Ae.d2l_noadd:Ae.d2l,jt;if(ut&&Array.isArray(Ae.ticktext)){var Mr=t.simpleMap(Ae.range,Ae.r2l),Sr=(Math.abs(Mr[1]-Mr[0])-(Ae._lBreaks||0))/1e4;for(jt=0;jt<Ae.ticktext.length&&!(Math.abs(Ee-kt(Ae.tickvals[jt]))<Sr);jt++);if(jt<Ae.ticktext.length)return tt.text=String(Ae.ticktext[jt]),tt}function Lr(fn){if(fn===void 0)return!0;if(Fe)return fn==="none";var Cr={first:Ae._tmin,last:Ae._tmax}[fn];return fn!=="all"&&Ee!==Cr}var Ar=Fe?"never":Ae.exponentformat!=="none"&&Lr(Ae.showexponent)?"hide":"";if(yt==="date"?Ge(Ae,tt,Fe,ct):yt==="log"?ze(Ae,tt,Fe,ct,Ar):yt==="category"?We(Ae,tt):yt==="multicategory"?mt(Ae,tt,Fe):Ir(Ae)?Xt(Ae,tt,Fe,ct,Ar):Ft(Ae,tt,Fe,ct,Ar),Ke||(Ae.tickprefix&&!Lr(Ae.showtickprefix)&&(tt.text=Ae.tickprefix+tt.text),Ae.ticksuffix&&!Lr(Ae.showticksuffix)&&(tt.text+=Ae.ticksuffix)),Ae.tickson==="boundaries"||Ae.showdividers){var Ur=function(fn){var Cr=Ae.l2p(fn);return Cr>=0&&Cr<=Ae._length?fn:null};tt.xbnd=[Ur(tt.x-.5),Ur(tt.x+Ae.dtick-.5)]}return tt},J.hoverLabelText=function(Ae,Ee,Fe){Fe&&(Ae=t.extendFlat({},Ae,{hoverformat:Fe}));var Ke=Array.isArray(Ee)?Ee[0]:Ee,tt=Array.isArray(Ee)?Ee[1]:void 0;if(tt!==void 0&&tt!==Ke)return J.hoverLabelText(Ae,Ke,Fe)+" - "+J.hoverLabelText(Ae,tt,Fe);var ut=Ae.type==="log"&&Ke<=0,ct=J.tickText(Ae,Ae.c2l(ut?-Ke:Ke),"hover").text;return ut?Ke===0?"0":P+ct:ct};function rt(Ae,Ee,Fe){var Ke=Ae.tickfont||{};return{x:Ee,dx:0,dy:0,text:Fe||"",fontSize:Ke.size,font:Ke.family,fontColor:Ke.color}}function Ge(Ae,Ee,Fe,Ke){var tt=Ae._tickround,ut=Fe&&Ae.hoverformat||J.getTickFormat(Ae);Ke&&(s(tt)?tt=4:tt={y:"m",m:"d",d:"M",M:"S",S:4}[tt]);var ct=t.formatDate(Ee.x,ut,tt,Ae._dateFormat,Ae.calendar,Ae._extraFormat),yt,kt=ct.indexOf(`
`);if(kt!==-1&&(yt=ct.substr(kt+1),ct=ct.substr(0,kt)),Ke&&(ct==="00:00:00"||ct==="00:00"?(ct=yt,yt=""):ct.length===8&&(ct=ct.replace(/:00$/,""))),yt)if(Fe)tt==="d"?ct+=", "+yt:ct=yt+(ct?", "+ct:"");else if(!Ae._inCalcTicks||Ae._prevDateHead!==yt)Ae._prevDateHead=yt,ct+="<br>"+yt;else{var jt=Yr(Ae),Mr=Ae._trueSide||Ae.side;(!jt&&Mr==="top"||jt&&Mr==="bottom")&&(ct+="<br> ")}Ee.text=ct}function ze(Ae,Ee,Fe,Ke,tt){var ut=Ae.dtick,ct=Ee.x,yt=Ae.tickformat,kt=typeof ut=="string"&&ut.charAt(0);if(tt==="never"&&(tt=""),Ke&&kt!=="L"&&(ut="L3",kt="L"),yt||kt==="L")Ee.text=Ct(Math.pow(10,ct),Ae,tt,Ke);else if(s(ut)||kt==="D"&&t.mod(ct+.01,1)<.1){var jt=Math.round(ct),Mr=Math.abs(jt),Sr=Ae.exponentformat;Sr==="power"||Gt(Sr)&&It(jt)?(jt===0?Ee.text=1:jt===1?Ee.text="10":Ee.text="10<sup>"+(jt>1?"":P)+Mr+"</sup>",Ee.fontSize*=1.25):(Sr==="e"||Sr==="E")&&Mr>2?Ee.text="1"+Sr+(jt>0?"+":P)+Mr:(Ee.text=Ct(Math.pow(10,ct),Ae,"","fakehover"),ut==="D1"&&Ae._id.charAt(0)==="y"&&(Ee.dy-=Ee.fontSize/6))}else if(kt==="D")Ee.text=String(Math.round(Math.pow(10,t.mod(ct,1)))),Ee.fontSize*=.75;else throw"unrecognized dtick "+String(ut);if(Ae.dtick==="D1"){var Lr=String(Ee.text).charAt(0);(Lr==="0"||Lr==="1")&&(Ae._id.charAt(0)==="y"?Ee.dx-=Ee.fontSize/4:(Ee.dy+=Ee.fontSize/2,Ee.dx+=(Ae.range[1]>Ae.range[0]?1:-1)*Ee.fontSize*(ct<0?.5:.25)))}}function We(Ae,Ee){var Fe=Ae._categories[Math.round(Ee.x)];Fe===void 0&&(Fe=""),Ee.text=String(Fe)}function mt(Ae,Ee,Fe){var Ke=Math.round(Ee.x),tt=Ae._categories[Ke]||[],ut=tt[1]===void 0?"":String(tt[1]),ct=tt[0]===void 0?"":String(tt[0]);Fe?Ee.text=ct+" - "+ut:(Ee.text=ut,Ee.text2=ct)}function Ft(Ae,Ee,Fe,Ke,tt){tt==="never"?tt="":Ae.showexponent==="all"&&Math.abs(Ee.x/Ae.dtick)<1e-6&&(tt="hide"),Ee.text=Ct(Ee.x,Ae,tt,Ke)}function Xt(Ae,Ee,Fe,Ke,tt){if(Ae.thetaunit==="radians"&&!Fe){var ut=Ee.x/180;if(ut===0)Ee.text="0";else{var ct=Pt(ut);if(ct[1]>=100)Ee.text=Ct(t.deg2rad(Ee.x),Ae,tt,Ke);else{var yt=Ee.x<0;ct[1]===1?ct[0]===1?Ee.text="\u03C0":Ee.text=ct[0]+"\u03C0":Ee.text=["<sup>",ct[0],"</sup>","\u2044","<sub>",ct[1],"</sub>","\u03C0"].join(""),yt&&(Ee.text=P+Ee.text)}}}else Ee.text=Ct(Ee.x,Ae,tt,Ke)}function Pt(Ae){function Ee(yt,kt){return Math.abs(yt-kt)<=1e-6}function Fe(yt,kt){return Ee(kt,0)?yt:Fe(kt,yt%kt)}function Ke(yt){for(var kt=1;!Ee(Math.round(yt*kt)/kt,yt);)kt*=10;return kt}var tt=Ke(Ae),ut=Ae*tt,ct=Math.abs(Fe(ut,tt));return[Math.round(ut/ct),Math.round(tt/ct)]}var Ut=["f","p","n","\u03BC","m","","k","M","G","T"];function Gt(Ae){return Ae==="SI"||Ae==="B"}function It(Ae){return Ae>14||Ae<-15}function Ct(Ae,Ee,Fe,Ke){var tt=Ae<0,ut=Ee._tickround,ct=Fe||Ee.exponentformat||"B",yt=Ee._tickexponent,kt=J.getTickFormat(Ee),jt=Ee.separatethousands;if(Ke){var Mr={exponentformat:ct,minexponent:Ee.minexponent,dtick:Ee.showexponent==="none"?Ee.dtick:s(Ae)&&Math.abs(Ae)||1,range:Ee.showexponent==="none"?Ee.range.map(Ee.r2d):[0,Ae||1]};Ze(Mr),ut=(Number(Mr._tickround)||0)+4,yt=Mr._tickexponent,Ee.hoverformat&&(kt=Ee.hoverformat)}if(kt)return Ee._numFormat(kt)(Ae).replace(/-/g,P);var Sr=Math.pow(10,-ut)/2;if(ct==="none"&&(yt=0),Ae=Math.abs(Ae),Ae<Sr)Ae="0",tt=!1;else{if(Ae+=Sr,yt&&(Ae*=Math.pow(10,-yt),ut+=yt),ut===0)Ae=String(Math.floor(Ae));else if(ut<0){Ae=String(Math.round(Ae)),Ae=Ae.substr(0,Ae.length+ut);for(var Lr=ut;Lr<0;Lr++)Ae+="0"}else{Ae=String(Ae);var Ar=Ae.indexOf(".")+1;Ar&&(Ae=Ae.substr(0,Ar+ut).replace(/\.?0+$/,""))}Ae=t.numSeparate(Ae,Ee._separators,jt)}if(yt&&ct!=="hide"){Gt(ct)&&It(yt)&&(ct="power");var Ur;yt<0?Ur=P+-yt:ct!=="power"?Ur="+"+yt:Ur=String(yt),ct==="e"||ct==="E"?Ae+=ct+Ur:ct==="power"?Ae+="\xD710<sup>"+Ur+"</sup>":ct==="B"&&yt===9?Ae+="B":Gt(ct)&&(Ae+=Ut[yt/3+5])}return tt?P+Ae:Ae}J.getTickFormat=function(Ae){var Ee;function Fe(kt){return typeof kt!="string"?kt:Number(kt.replace("M",""))*M}function Ke(kt,jt){var Mr=["L","D"];if(typeof kt==typeof jt){if(typeof kt=="number")return kt-jt;var Sr=Mr.indexOf(kt.charAt(0)),Lr=Mr.indexOf(jt.charAt(0));return Sr===Lr?Number(kt.replace(/(L|D)/g,""))-Number(jt.replace(/(L|D)/g,"")):Sr-Lr}else return typeof kt=="number"?1:-1}function tt(kt,jt,Mr){var Sr=Mr||function(Ur){return Ur},Lr=jt[0],Ar=jt[1];return(!Lr&&typeof Lr!="number"||Sr(Lr)<=Sr(kt))&&(!Ar&&typeof Ar!="number"||Sr(Ar)>=Sr(kt))}function ut(kt,jt){var Mr=jt[0]===null,Sr=jt[1]===null,Lr=Ke(kt,jt[0])>=0,Ar=Ke(kt,jt[1])<=0;return(Mr||Lr)&&(Sr||Ar)}var ct,yt;if(Ae.tickformatstops&&Ae.tickformatstops.length>0)switch(Ae.type){case"date":case"linear":{for(Ee=0;Ee<Ae.tickformatstops.length;Ee++)if(yt=Ae.tickformatstops[Ee],yt.enabled&&tt(Ae.dtick,yt.dtickrange,Fe)){ct=yt;break}break}case"log":{for(Ee=0;Ee<Ae.tickformatstops.length;Ee++)if(yt=Ae.tickformatstops[Ee],yt.enabled&&ut(Ae.dtick,yt.dtickrange)){ct=yt;break}break}}return ct?ct.value:Ae.tickformat},J.getSubplots=function(Ae,Ee){var Fe=Ae._fullLayout._subplots,Ke=Fe.cartesian.concat(Fe.gl2d||[]),tt=Ee?J.findSubplotsWithAxis(Ke,Ee):Ke;return tt.sort(function(ut,ct){var yt=ut.substr(1).split("y"),kt=ct.substr(1).split("y");return yt[0]===kt[0]?+yt[1]-+kt[1]:+yt[0]-+kt[0]}),tt},J.findSubplotsWithAxis=function(Ae,Ee){for(var Fe=new RegExp(Ee._id.charAt(0)==="x"?"^"+Ee._id+"y":Ee._id+"$"),Ke=[],tt=0;tt<Ae.length;tt++){var ut=Ae[tt];Fe.test(ut)&&Ke.push(ut)}return Ke},J.makeClipPaths=function(Ae){var Ee=Ae._fullLayout;if(!Ee._hasOnlyLargeSploms){var Fe={_offset:0,_length:Ee.width,_id:""},Ke={_offset:0,_length:Ee.height,_id:""},tt=J.list(Ae,"x",!0),ut=J.list(Ae,"y",!0),ct=[],yt,kt;for(yt=0;yt<tt.length;yt++)for(ct.push({x:tt[yt],y:Ke}),kt=0;kt<ut.length;kt++)yt===0&&ct.push({x:Fe,y:ut[kt]}),ct.push({x:tt[yt],y:ut[kt]});var jt=Ee._clips.selectAll(".axesclip").data(ct,function(Mr){return Mr.x._id+Mr.y._id});jt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Mr){return"clip"+Ee._uid+Mr.x._id+Mr.y._id}).append("rect"),jt.exit().remove(),jt.each(function(Mr){u.select(this).select("rect").attr({x:Mr.x._offset||0,y:Mr.y._offset||0,width:Mr.x._length||1,height:Mr.y._length||1})})}},J.draw=function(Ae,Ee,Fe){var Ke=Ae._fullLayout;Ee==="redraw"&&Ke._paper.selectAll("g.subplot").each(function(ut){var ct=ut[0],yt=Ke._plots[ct];if(yt){var kt=yt.xaxis,jt=yt.yaxis;yt.xaxislayer.selectAll("."+kt._id+"tick").remove(),yt.yaxislayer.selectAll("."+jt._id+"tick").remove(),yt.xaxislayer.selectAll("."+kt._id+"tick2").remove(),yt.yaxislayer.selectAll("."+jt._id+"tick2").remove(),yt.xaxislayer.selectAll("."+kt._id+"divider").remove(),yt.yaxislayer.selectAll("."+jt._id+"divider").remove(),yt.gridlayer&&yt.gridlayer.selectAll("path").remove(),yt.zerolinelayer&&yt.zerolinelayer.selectAll("path").remove(),Ke._infolayer.select(".g-"+kt._id+"title").remove(),Ke._infolayer.select(".g-"+jt._id+"title").remove()}});var tt=!Ee||Ee==="redraw"?J.listIds(Ae):Ee;return t.syncOrAsync(tt.map(function(ut){return function(){if(!!ut){var ct=J.getFromId(Ae,ut),yt=J.drawOne(Ae,ct,Fe);return ct._r=ct.range.slice(),ct._rl=t.simpleMap(ct._r,ct.r2l),yt}}}))},J.drawOne=function(Ae,Ee,Fe){Fe=Fe||{};var Ke,tt,ut;Ee.setScale();var ct=Ae._fullLayout,yt=Ee._id,kt=yt.charAt(0),jt=J.counterLetter(yt),Mr=ct._plots[Ee._mainSubplot];if(!Mr)return;var Sr=Mr[kt+"axislayer"],Lr=Ee._mainLinePosition,Ar=Ee._mainMirrorPosition,Ur=Ee._vals=J.calcTicks(Ee),fn=[Ee.mirror,Lr,Ar].join("_");for(Ke=0;Ke<Ur.length;Ke++)Ur[Ke].axInfo=fn;Ee._selections={},Ee._tickAngles&&(Ee._prevTickAngles=Ee._tickAngles),Ee._tickAngles={},Ee._depth=null;var Cr={};function _r(La){var ga=yt+(La||"tick");return Cr[ga]||(Cr[ga]=Pe(Ee,ga)),Cr[ga]}if(!!Ee.visible){var En=J.makeTransTickFn(Ee),Jr=J.makeTransTickLabelFn(Ee),Pr,vn,xn=Ee.ticks==="inside",qr=Ee.ticks==="outside";if(Ee.tickson==="boundaries"){var st=lt(Ee,Ur);vn=J.clipEnds(Ee,st),Pr=xn?vn:st}else vn=J.clipEnds(Ee,Ur),Pr=xn&&Ee.ticklabelmode!=="period"?vn:Ur;var Bt=Ee._gridVals=vn,ir=et(Ee,Ur);if(!ct._hasOnlyLargeSploms){var xr=Ee._subplotsWith,Qr={};for(Ke=0;Ke<xr.length;Ke++){tt=xr[Ke],ut=ct._plots[tt];var Gr=ut[jt+"axis"],Br=Gr._mainAxis._id;if(!Qr[Br]){Qr[Br]=1;var kr=kt==="x"?"M0,"+Gr._offset+"v"+Gr._length:"M"+Gr._offset+",0h"+Gr._length;J.drawGrid(Ae,Ee,{vals:Bt,counterAxis:Gr,layer:ut.gridlayer.select("."+yt),path:kr,transFn:En}),J.drawZeroLine(Ae,Ee,{counterAxis:Gr,layer:ut.zerolinelayer,path:kr,transFn:En})}}}var en=J.getTickSigns(Ee),Zn=[];if(Ee.ticks){var Hn=J.makeTickPath(Ee,Lr,en[2]),da,wa;Ee._anchorAxis&&Ee.mirror&&Ee.mirror!==!0?(da=J.makeTickPath(Ee,Ar,en[3]),wa=Hn+da):(da="",wa=Hn);var Va;if(Ee.showdividers&&qr&&Ee.tickson==="boundaries"){var Oa={};for(Ke=0;Ke<ir.length;Ke++)Oa[ir[Ke].x]=1;Va=function(La){return Oa[La.x]?da:wa}}else Va=wa;J.drawTicks(Ae,Ee,{vals:Pr,layer:Sr,path:Va,transFn:En}),Ee.mirror==="allticks"&&(Zn=Object.keys(Ee._linepositions||{}))}for(Ke=0;Ke<Zn.length;Ke++){tt=Zn[Ke],ut=ct._plots[tt];var wr=Ee._linepositions[tt]||[],wn=J.makeTickPath(Ee,wr[0],en[0])+J.makeTickPath(Ee,wr[1],en[1]);J.drawTicks(Ae,Ee,{vals:Pr,layer:ut[kt+"axislayer"],path:wn,transFn:En})}var ln=[];if(ln.push(function(){return J.drawLabels(Ae,Ee,{vals:Ur,layer:Sr,plotinfo:ut,transFn:Jr,labelFns:J.makeLabelFns(Ee,Lr)})}),Ee.type==="multicategory"){var jn={x:2,y:10}[kt];ln.push(function(){var La={x:"height",y:"width"}[kt],ga=_r()[La]+jn+(Ee._tickAngles[yt+"tick"]?Ee.tickfont.size*ee:0);return J.drawLabels(Ae,Ee,{vals:dt(Ee,Ur),layer:Sr,cls:yt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:En,labelFns:J.makeLabelFns(Ee,Lr+ga*en[4])})}),ln.push(function(){return Ee._depth=en[4]*(_r("tick2")[Ee.side]-Lr),zt(Ae,Ee,{vals:ir,layer:Sr,path:J.makeTickPath(Ee,Lr,en[4],Ee._depth),transFn:En})})}else Ee.title.hasOwnProperty("standoff")&&ln.push(function(){Ee._depth=en[4]*(_r()[Ee.side]-Lr)});var Jn=x.getComponentMethod("rangeslider","isVisible")(Ee);return ln.push(function(){var La=Ee.side.charAt(0),ga=q[Ee.side].charAt(0),qn=J.getPxPosition(Ae,Ee),Ea=qr?Ee.ticklen:0,la,sr,Hr,dn;if((Ee.automargin||Jn)&&(Ee.type==="multicategory"?la=_r("tick2"):(la=_r(),kt==="x"&&La==="b"&&(Ee._depth=Math.max(la.width>0?la.bottom-qn:0,Ea)))),Ee.automargin){sr={x:0,y:0,r:0,l:0,t:0,b:0};var hn=[0,1];if(kt==="x"){if(La==="b"?sr[La]=Ee._depth:(sr[La]=Ee._depth=Math.max(la.width>0?qn-la.top:0,Ea),hn.reverse()),la.width>0){var Sn=la.right-(Ee._offset+Ee._length);Sn>0&&(sr.xr=1,sr.r=Sn);var Rn=Ee._offset-la.left;Rn>0&&(sr.xl=0,sr.l=Rn)}}else if(La==="l"?sr[La]=Ee._depth=Math.max(la.height>0?qn-la.left:0,Ea):(sr[La]=Ee._depth=Math.max(la.height>0?la.right-qn:0,Ea),hn.reverse()),la.height>0){var Mn=la.bottom-(Ee._offset+Ee._length);Mn>0&&(sr.yb=0,sr.b=Mn);var mr=Ee._offset-la.top;mr>0&&(sr.yt=1,sr.t=mr)}sr[jt]=Ee.anchor==="free"?Ee.position:Ee._anchorAxis.domain[hn[0]],Ee.title.text!==ct._dfltTitle[kt]&&(sr[La]+=Lt(Ee)+(Ee.title.standoff||0)),Ee.mirror&&Ee.anchor!=="free"&&(Hr={x:0,y:0,r:0,l:0,t:0,b:0},Hr[ga]=Ee.linewidth,Ee.mirror&&Ee.mirror!==!0&&(Hr[ga]+=Ea),Ee.mirror===!0||Ee.mirror==="ticks"?Hr[jt]=Ee._anchorAxis.domain[hn[1]]:(Ee.mirror==="all"||Ee.mirror==="allticks")&&(Hr[jt]=[Ee._counterDomainMin,Ee._counterDomainMax][hn[1]]))}Jn&&(dn=x.getComponentMethod("rangeslider","autoMarginOpts")(Ae,Ee)),m.autoMargin(Ae,xt(Ee),sr),m.autoMargin(Ae,Rt(Ee),Hr),m.autoMargin(Ae,fr(Ee),dn)}),!Fe.skipTitle&&!(Jn&&Ee.side==="bottom")&&ln.push(function(){return Vt(Ae,Ee)}),t.syncOrAsync(ln)}};function lt(Ae,Ee){var Fe=[],Ke,tt=function(ut,ct){var yt=ut.xbnd[ct];yt!==null&&Fe.push(t.extendFlat({},ut,{x:yt}))};if(Ee.length){for(Ke=0;Ke<Ee.length;Ke++)tt(Ee[Ke],0);tt(Ee[Ke-1],1)}return Fe}function dt(Ae,Ee){for(var Fe=[],Ke={},tt=0;tt<Ee.length;tt++){var ut=Ee[tt];Ke[ut.text2]?Ke[ut.text2].push(ut.x):Ke[ut.text2]=[ut.x]}for(var ct in Ke)Fe.push(rt(Ae,t.interp(Ke[ct],.5),ct));return Fe}function et(Ae,Ee){var Fe=[],Ke,tt,ut=Ee.length&&Ee[Ee.length-1].x<Ee[0].x,ct=function(kt,jt){var Mr=kt.xbnd[jt];Mr!==null&&Fe.push(t.extendFlat({},kt,{x:Mr}))};if(Ae.showdividers&&Ee.length){for(Ke=0;Ke<Ee.length;Ke++){var yt=Ee[Ke];yt.text2!==tt&&ct(yt,ut?1:0),tt=yt.text2}ct(Ee[Ke-1],ut?0:1)}return Fe}function Pe(Ae,Ee){var Fe,Ke,tt,ut;return Ae._selections[Ee].size()?(Fe=1/0,Ke=-1/0,tt=1/0,ut=-1/0,Ae._selections[Ee].each(function(){var ct=qe(this),yt=f.bBox(ct.node().parentNode);Fe=Math.min(Fe,yt.top),Ke=Math.max(Ke,yt.bottom),tt=Math.min(tt,yt.left),ut=Math.max(ut,yt.right)})):(Fe=0,Ke=0,tt=0,ut=0),{top:Fe,bottom:Ke,left:tt,right:ut,height:Ke-Fe,width:ut-tt}}J.getTickSigns=function(Ae){var Ee=Ae._id.charAt(0),Fe={x:"top",y:"right"}[Ee],Ke=Ae.side===Fe?1:-1,tt=[-1,1,Ke,-Ke];return Ae.ticks!=="inside"==(Ee==="x")&&(tt=tt.map(function(ut){return-ut})),Ae.side&&tt.push({l:-1,t:-1,r:1,b:1}[Ae.side.charAt(0)]),tt},J.makeTransTickFn=function(Ae){return Ae._id.charAt(0)==="x"?function(Ee){return i(Ae._offset+Ae.l2p(Ee.x),0)}:function(Ee){return i(0,Ae._offset+Ae.l2p(Ee.x))}},J.makeTransTickLabelFn=function(Ae){var Ee=it(Ae),Fe=Ee[0],Ke=Ee[1];return Ae._id.charAt(0)==="x"?function(tt){return i(Fe+Ae._offset+Ae.l2p(Je(tt)),Ke)}:function(tt){return i(Ke,Fe+Ae._offset+Ae.l2p(Je(tt)))}};function Je(Ae){return Ae.periodX!==void 0?Ae.periodX:Ae.x}function it(Ae){var Ee=Ae.ticklabelposition||"",Fe=function(Ar){return Ee.indexOf(Ar)!==-1},Ke=Fe("top"),tt=Fe("left"),ut=Fe("right"),ct=Fe("bottom"),yt=Fe("inside"),kt=ct||tt||Ke||ut;if(!kt&&!yt)return[0,0];var jt=Ae.side,Mr=kt?(Ae.tickwidth||0)/2:0,Sr=G,Lr=Ae.tickfont?Ae.tickfont.size:12;return(ct||Ke)&&(Mr+=Lr*j,Sr+=(Ae.linewidth||0)/2),(tt||ut)&&(Mr+=(Ae.linewidth||0)/2,Sr+=G),yt&&jt==="top"&&(Sr-=Lr*(1-j)),(tt||Ke)&&(Mr=-Mr),(jt==="bottom"||jt==="right")&&(Sr=-Sr),[kt?Mr:0,yt?Sr:0]}J.makeTickPath=function(Ae,Ee,Fe,Ke){Ke=Ke!==void 0?Ke:Ae.ticklen;var tt=Ae._id.charAt(0),ut=(Ae.linewidth||1)/2;return tt==="x"?"M0,"+(Ee+ut*Fe)+"v"+Ke*Fe:"M"+(Ee+ut*Fe)+",0h"+Ke*Fe},J.makeLabelFns=function(Ae,Ee,Fe){var Ke=Ae.ticklabelposition||"",tt=function(Qr){return Ke.indexOf(Qr)!==-1},ut=tt("top"),ct=tt("left"),yt=tt("right"),kt=tt("bottom"),jt=kt||ct||ut||yt,Mr=tt("inside"),Sr=Ke==="inside"&&Ae.ticks==="inside"||!Mr&&Ae.ticks==="outside"&&Ae.tickson!=="boundaries",Lr=0,Ar=0,Ur=Sr?Ae.ticklen:0;if(Mr?Ur*=-1:jt&&(Ur=0),Sr&&(Lr+=Ur,Fe)){var fn=t.deg2rad(Fe);Lr=Ur*Math.cos(fn)+1,Ar=Ur*Math.sin(fn)}Ae.showticklabels&&(Sr||Ae.showline)&&(Lr+=.2*Ae.tickfont.size),Lr+=(Ae.linewidth||1)/2*(Mr?-1:1);var Cr={labelStandoff:Lr,labelShift:Ar},_r,En,Jr,Pr,vn=0,xn=Ae.side,qr=Ae._id.charAt(0),st=Ae.tickangle,Bt;if(qr==="x")Bt=!Mr&&xn==="bottom"||Mr&&xn==="top",Pr=Bt?1:-1,Mr&&(Pr*=-1),_r=Ar*Pr,En=Ee+Lr*Pr,Jr=Bt?1:-.2,Math.abs(st)===90&&(Mr?Jr+=X:st===-90&&xn==="bottom"?Jr=j:st===90&&xn==="top"?Jr=X:Jr=.5,vn=X/2*(st/90)),Cr.xFn=function(Qr){return Qr.dx+_r+vn*Qr.fontSize},Cr.yFn=function(Qr){return Qr.dy+En+Qr.fontSize*Jr},Cr.anchorFn=function(Qr,Gr){if(jt){if(ct)return"end";if(yt)return"start"}return!s(Gr)||Gr===0||Gr===180?"middle":Gr*Pr<0!==Mr?"end":"start"},Cr.heightFn=function(Qr,Gr,Br){return Gr<-60||Gr>60?-.5*Br:Ae.side==="top"!==Mr?-Br:0};else if(qr==="y"){if(Bt=!Mr&&xn==="left"||Mr&&xn==="right",Pr=Bt?1:-1,Mr&&(Pr*=-1),_r=Lr,En=Ar*Pr,Jr=0,!Mr&&Math.abs(st)===90&&(st===-90&&xn==="left"||st===90&&xn==="right"?Jr=j:Jr=.5),Mr){var ir=s(st)?+st:0;if(ir!==0){var xr=t.deg2rad(ir);vn=Math.abs(Math.sin(xr))*j*Pr,Jr=0}}Cr.xFn=function(Qr){return Qr.dx+Ee-(_r+Qr.fontSize*Jr)*Pr+vn*Qr.fontSize},Cr.yFn=function(Qr){return Qr.dy+En+Qr.fontSize*X},Cr.anchorFn=function(Qr,Gr){return s(Gr)&&Math.abs(Gr)===90?"middle":Bt?"end":"start"},Cr.heightFn=function(Qr,Gr,Br){return Ae.side==="right"&&(Gr*=-1),Gr<-30?-Br:Gr<30?-.5*Br:0}}return Cr};function ht(Ae){return[Ae.text,Ae.x,Ae.axInfo,Ae.font,Ae.fontSize,Ae.fontColor].join("_")}J.drawTicks=function(Ae,Ee,Fe){Fe=Fe||{};var Ke=Ee._id+"tick",tt=Fe.vals;Ee.ticklabelmode==="period"&&(tt=tt.slice(),tt.shift());var ut=Fe.layer.selectAll("path."+Ke).data(Ee.ticks?tt:[],ht);ut.exit().remove(),ut.enter().append("path").classed(Ke,1).classed("ticks",1).classed("crisp",Fe.crisp!==!1).call(n.stroke,Ee.tickcolor).style("stroke-width",f.crispRound(Ae,Ee.tickwidth,1)+"px").attr("d",Fe.path).style("display",null),nt(Ee,[R]),ut.attr("transform",Fe.transFn)},J.drawGrid=function(Ae,Ee,Fe){Fe=Fe||{};var Ke=Ee._id+"grid",tt=Fe.vals,ut=Fe.counterAxis;if(Ee.showgrid===!1)tt=[];else if(ut&&J.shouldShowZeroLine(Ae,Ee,ut))for(var ct=Ee.tickmode==="array",yt=0;yt<tt.length;yt++){var kt=tt[yt].x;if(ct?!kt:Math.abs(kt)<Ee.dtick/100)if(tt=tt.slice(0,yt).concat(tt.slice(yt+1)),ct)yt--;else break}var jt=Fe.layer.selectAll("path."+Ke).data(tt,ht);jt.exit().remove(),jt.enter().append("path").classed(Ke,1).classed("crisp",Fe.crisp!==!1),Ee._gw=f.crispRound(Ae,Ee.gridwidth,1),jt.attr("transform",Fe.transFn).attr("d",Fe.path).call(n.stroke,Ee.gridcolor||"#ddd").style("stroke-width",Ee._gw+"px").style("display",null),nt(Ee,[D]),typeof Fe.path=="function"&&jt.attr("d",Fe.path)},J.drawZeroLine=function(Ae,Ee,Fe){Fe=Fe||Fe;var Ke=Ee._id+"zl",tt=J.shouldShowZeroLine(Ae,Ee,Fe.counterAxis),ut=Fe.layer.selectAll("path."+Ke).data(tt?[{x:0,id:Ee._id}]:[]);ut.exit().remove(),ut.enter().append("path").classed(Ke,1).classed("zl",1).classed("crisp",Fe.crisp!==!1).each(function(){Fe.layer.selectAll("path").sort(function(ct,yt){return se(ct.id,yt.id)})}),ut.attr("transform",Fe.transFn).attr("d",Fe.path).call(n.stroke,Ee.zerolinecolor||n.defaultLine).style("stroke-width",f.crispRound(Ae,Ee.zerolinewidth,Ee._gw||1)+"px").style("display",null),nt(Ee,[F])},J.drawLabels=function(Ae,Ee,Fe){Fe=Fe||{};var Ke=Ae._fullLayout,tt=Ee._id,ut=tt.charAt(0),ct=Fe.cls||tt+"tick",yt=Fe.vals,kt=Fe.labelFns,jt=Fe.secondary?0:Ee.tickangle,Mr=(Ee._prevTickAngles||{})[ct],Sr=Fe.layer.selectAll("g."+ct).data(Ee.showticklabels?yt:[],ht),Lr=[];Sr.enter().append("g").classed(ct,1).append("text").attr("text-anchor","middle").each(function(Pr){var vn=u.select(this),xn=Ae._promises.length;vn.call(a.positionText,kt.xFn(Pr),kt.yFn(Pr)).call(f.font,Pr.font,Pr.fontSize,Pr.fontColor).text(Pr.text).call(a.convertToTspans,Ae),Ae._promises[xn]?Lr.push(Ae._promises.pop().then(function(){Ar(vn,jt)})):Ar(vn,jt)}),nt(Ee,[U]),Sr.exit().remove(),Fe.repositionOnUpdate&&Sr.each(function(Pr){u.select(this).select("text").call(a.positionText,kt.xFn(Pr),kt.yFn(Pr))});function Ar(Pr,vn){Pr.each(function(xn){var qr=u.select(this),st=qr.select(".text-math-group"),Bt=kt.anchorFn(xn,vn),ir=Fe.transFn.call(qr.node(),xn)+(s(vn)&&+vn!=0?" rotate("+vn+","+kt.xFn(xn)+","+(kt.yFn(xn)-xn.fontSize/2)+")":""),xr=a.lineCount(qr),Qr=ee*xn.fontSize,Gr=kt.heightFn(xn,s(vn)?+vn:0,(xr-1)*Qr);if(Gr&&(ir+=i(0,Gr)),st.empty()){var Br=qr.select("text");Br.attr({transform:ir,"text-anchor":Bt}),Br.style("opacity",1),Ee._adjustTickLabelsOverflow&&Ee._adjustTickLabelsOverflow()}else{var kr=f.bBox(st.node()).width,en=kr*{end:-.5,start:.5}[Bt];st.attr("transform",ir+i(en,0))}})}Ee._adjustTickLabelsOverflow=function(){var Pr=Ee.ticklabeloverflow;if(!(!Pr||Pr==="allow")){var vn=Pr.indexOf("hide")!==-1,xn=Ee._id.charAt(0)==="x",qr=0,st=xn?Ae._fullLayout.width:Ae._fullLayout.height;if(Pr.indexOf("domain")!==-1){var Bt=t.simpleMap(Ee.range,Ee.r2l);qr=Ee.l2p(Bt[0])+Ee._offset,st=Ee.l2p(Bt[1])+Ee._offset}var ir=Math.min(qr,st),xr=Math.max(qr,st),Qr=Ee.side,Gr=1/0,Br=-1/0;Sr.each(function(Hn){var da=u.select(this),wa=da.select(".text-math-group");if(wa.empty()){var Va=f.bBox(da.node()),Oa=0;xn?(Va.right>xr||Va.left<ir)&&(Oa=1):(Va.bottom>xr||Va.top+(Ee.tickangle?0:Hn.fontSize/4)<ir)&&(Oa=1);var wr=da.select("text");Oa?vn&&wr.style("opacity",0):(wr.style("opacity",1),Qr==="bottom"||Qr==="right"?Gr=Math.min(Gr,xn?Va.top:Va.left):Gr=-1/0,Qr==="top"||Qr==="left"?Br=Math.max(Br,xn?Va.bottom:Va.right):Br=1/0)}});for(var kr in Ke._plots){var en=Ke._plots[kr];if(!(Ee._id!==en.xaxis._id&&Ee._id!==en.yaxis._id)){var Zn=xn?en.yaxis:en.xaxis;Zn&&(Zn["_visibleLabelMin_"+Ee._id]=Gr,Zn["_visibleLabelMax_"+Ee._id]=Br)}}}},Ee._hideCounterAxisInsideTickLabels=function(Pr){var vn=Ee._id.charAt(0)==="x",xn=[];for(var qr in Ke._plots){var st=Ke._plots[qr];Ee._id!==st.xaxis._id&&Ee._id!==st.yaxis._id||xn.push(vn?st.yaxis:st.xaxis)}xn.forEach(function(Bt,ir){Bt&&Yr(Bt)&&(Pr||[F,D,R,U]).forEach(function(xr){var Qr=xr.K==="tick"&&xr.L==="text"&&Ee.ticklabelmode==="period",Gr=Ke._plots[Ee._mainSubplot],Br;xr.K===F.K?Br=Gr.zerolinelayer.selectAll("."+Ee._id+"zl"):xr.K===D.K?Br=Gr.gridlayer.selectAll("."+Ee._id):Br=Gr[Ee._id.charAt(0)+"axislayer"],Br.each(function(){var kr=u.select(this);xr.L&&(kr=kr.selectAll(xr.L)),kr.each(function(en){var Zn=Ee.l2p(Qr?Je(en):en.x)+Ee._offset,Hn=u.select(this);Zn<Ee["_visibleLabelMax_"+Bt._id]&&Zn>Ee["_visibleLabelMin_"+Bt._id]?Hn.style("display","none"):xr.K==="tick"&&!ir&&Hn.style("display",null)})})})})},Ar(Sr,Mr+1?Mr:jt);function Ur(){return Lr.length&&Promise.all(Lr)}var fn=null;function Cr(){if(Ar(Sr,jt),yt.length&&ut==="x"&&!s(jt)&&(Ee.type!=="log"||String(Ee.dtick).charAt(0)!=="D")){fn=0;var Pr=0,vn=[],xn;if(Sr.each(function(Va){Pr=Math.max(Pr,Va.fontSize);var Oa=Ee.l2p(Va.x),wr=qe(this),wn=f.bBox(wr.node());vn.push({top:0,bottom:10,height:10,left:Oa-wn.width/2,right:Oa+wn.width/2+2,width:wn.width+2})}),(Ee.tickson==="boundaries"||Ee.showdividers)&&!Fe.secondary){var qr=2;for(Ee.ticks&&(qr+=Ee.tickwidth/2),xn=0;xn<vn.length;xn++){var st=yt[xn].xbnd,Bt=vn[xn];if(st[0]!==null&&Bt.left-Ee.l2p(st[0])<qr||st[1]!==null&&Ee.l2p(st[1])-Bt.right<qr){fn=90;break}}}else{var ir=yt.length,xr=Math.abs((yt[ir-1].x-yt[0].x)*Ee._m)/(ir-1),Qr=Ee.ticklabelposition||"",Gr=function(Va){return Qr.indexOf(Va)!==-1},Br=Gr("top"),kr=Gr("left"),en=Gr("right"),Zn=Gr("bottom"),Hn=Zn||kr||Br||en,da=Hn?(Ee.tickwidth||0)+2*G:0,wa=xr<Pr*2.5||Ee.type==="multicategory"||Ee._name==="realaxis";for(xn=0;xn<vn.length-1;xn++)if(t.bBoxIntersect(vn[xn],vn[xn+1],da)){fn=wa?90:30;break}}fn&&Ar(Sr,fn)}}Ee._selections&&(Ee._selections[ct]=Sr);var _r=[Ur];Ee.automargin&&Ke._redrawFromAutoMarginCount&&Mr===90?(fn=90,_r.push(function(){Ar(Sr,Mr)})):_r.push(Cr),Ee._tickAngles&&_r.push(function(){Ee._tickAngles[ct]=fn===null?s(jt)?jt:0:fn});var En=Ee._anchorAxis;En&&En.autorange&&Yr(Ee)&&!V(Ke,Ee._id)&&(Ke._insideTickLabelsAutorange||(Ke._insideTickLabelsAutorange={}),Ke._insideTickLabelsAutorange[En._name+".autorange"]=En.autorange,_r.push(function(){Sr.each(function(vn,xn){var qr=qe(this),st=qr.select(".text-math-group");st.empty()&&(Ee._vals[xn].bb=f.bBox(qr.node()))})}));var Jr=t.syncOrAsync(_r);return Jr&&Jr.then&&Ae._promises.push(Jr),Jr};function zt(Ae,Ee,Fe){var Ke=Ee._id+"divider",tt=Fe.vals,ut=Fe.layer.selectAll("path."+Ke).data(tt,ht);ut.exit().remove(),ut.enter().insert("path",":first-child").classed(Ke,1).classed("crisp",1).call(n.stroke,Ee.dividercolor).style("stroke-width",f.crispRound(Ae,Ee.dividerwidth,1)+"px"),ut.attr("transform",Fe.transFn).attr("d",Fe.path)}J.getPxPosition=function(Ae,Ee){var Fe=Ae._fullLayout._size,Ke=Ee._id.charAt(0),tt=Ee.side,ut;if(Ee.anchor!=="free"?ut=Ee._anchorAxis:Ke==="x"?ut={_offset:Fe.t+(1-(Ee.position||0))*Fe.h,_length:0}:Ke==="y"&&(ut={_offset:Fe.l+(Ee.position||0)*Fe.w,_length:0}),tt==="top"||tt==="left")return ut._offset;if(tt==="bottom"||tt==="right")return ut._offset+ut._length};function Lt(Ae){var Ee=Ae.title.font.size,Fe=(Ae.title.text.match(a.BR_TAG_ALL)||[]).length;return Ae.title.hasOwnProperty("standoff")?Fe?Ee*(j+Fe*ee):Ee*j:Fe?Ee*(Fe+1)*ee:Ee}function Vt(Ae,Ee){var Fe=Ae._fullLayout,Ke=Ee._id,tt=Ke.charAt(0),ut=Ee.title.font.size,ct;if(Ee.title.hasOwnProperty("standoff"))ct=Ee._depth+Ee.title.standoff+Lt(Ee);else{var yt=Yr(Ee);if(Ee.type==="multicategory")ct=Ee._depth;else{var kt=1.5*ut;yt&&(kt=.5*ut,Ee.ticks==="outside"&&(kt+=Ee.ticklen)),ct=10+kt+(Ee.linewidth?Ee.linewidth-1:0)}yt||(tt==="x"?ct+=Ee.side==="top"?ut*(Ee.showticklabels?1:0):ut*(Ee.showticklabels?1.5:.5):ct+=Ee.side==="right"?ut*(Ee.showticklabels?1:.5):ut*(Ee.showticklabels?.5:0))}var jt=J.getPxPosition(Ae,Ee),Mr,Sr,Lr;tt==="x"?(Sr=Ee._offset+Ee._length/2,Lr=Ee.side==="top"?jt-ct:jt+ct):(Lr=Ee._offset+Ee._length/2,Sr=Ee.side==="right"?jt+ct:jt-ct,Mr={rotate:"-90",offset:0});var Ar;if(Ee.type!=="multicategory"){var Ur=Ee._selections[Ee._id+"tick"];if(Ar={selection:Ur,side:Ee.side},Ur&&Ur.node()&&Ur.node().parentNode){var fn=f.getTranslate(Ur.node().parentNode);Ar.offsetLeft=fn.x,Ar.offsetTop=fn.y}Ee.title.hasOwnProperty("standoff")&&(Ar.pad=0)}return r.draw(Ae,Ke+"title",{propContainer:Ee,propName:Ee._name+".title.text",placeholder:Fe._dfltTitle[tt],avoid:Ar,transform:Mr,attributes:{x:Sr,y:Lr,"text-anchor":"middle"}})}J.shouldShowZeroLine=function(Ae,Ee,Fe){var Ke=t.simpleMap(Ee.range,Ee.r2l);return Ke[0]*Ke[1]<=0&&Ee.zeroline&&(Ee.type==="linear"||Ee.type==="-")&&!(Ee.rangebreaks&&Ee.maskBreaks(0)===O)&&($t(Ee,0)||!Ht(Ae,Ee,Fe,Ke)||tr(Ae,Ee))},J.clipEnds=function(Ae,Ee){return Ee.filter(function(Fe){return $t(Ae,Fe.x)})};function $t(Ae,Ee){var Fe=Ae.l2p(Ee);return Fe>1&&Fe<Ae._length-1}function Ht(Ae,Ee,Fe,Ke){var tt=Fe._mainAxis;if(!tt)return;var ut=Ae._fullLayout,ct=Ee._id.charAt(0),yt=J.counterLetter(Ee._id),kt=Ee._offset+(Math.abs(Ke[0])<Math.abs(Ke[1])==(ct==="x")?0:Ee._length);function jt(Ur){if(!Ur.showline||!Ur.linewidth)return!1;var fn=Math.max((Ur.linewidth+Ee.zerolinewidth)/2,1);function Cr(Jr){return typeof Jr=="number"&&Math.abs(Jr-kt)<fn}if(Cr(Ur._mainLinePosition)||Cr(Ur._mainMirrorPosition))return!0;var _r=Ur._linepositions||{};for(var En in _r)if(Cr(_r[En][0])||Cr(_r[En][1]))return!0}var Mr=ut._plots[Fe._mainSubplot];if(!(Mr.mainplotinfo||Mr).overlays.length)return jt(Fe);for(var Sr=J.list(Ae,yt),Lr=0;Lr<Sr.length;Lr++){var Ar=Sr[Lr];if(Ar._mainAxis===tt&&jt(Ar))return!0}}function tr(Ae,Ee){for(var Fe=Ae._fullData,Ke=Ee._mainSubplot,tt=Ee._id.charAt(0),ut=0;ut<Fe.length;ut++){var ct=Fe[ut];if(ct.visible===!0&&ct.xaxis+ct.yaxis===Ke&&(x.traceIs(ct,"bar-like")&&ct.orientation==={x:"h",y:"v"}[tt]||ct.fill&&ct.fill.charAt(ct.fill.length-1)===tt))return!0}return!1}function qe(Ae){var Ee=u.select(Ae),Fe=Ee.select(".text-math-group");return Fe.empty()?Ee.select("text"):Fe}J.allowAutoMargin=function(Ae){for(var Ee=J.list(Ae,"",!0),Fe=0;Fe<Ee.length;Fe++){var Ke=Ee[Fe];Ke.automargin&&(m.allowAutoMargin(Ae,xt(Ke)),Ke.mirror&&m.allowAutoMargin(Ae,Rt(Ke))),x.getComponentMethod("rangeslider","isVisible")(Ke)&&m.allowAutoMargin(Ae,fr(Ke))}};function xt(Ae){return Ae._id+".automargin"}function Rt(Ae){return xt(Ae)+".mirror"}function fr(Ae){return Ae._id+".rangeslider"}J.swap=function(Ae,Ee){for(var Fe=br(Ae,Ee),Ke=0;Ke<Fe.length;Ke++)Tr(Ae,Fe[Ke].x,Fe[Ke].y)};function br(Ae,Ee){var Fe=[],Ke,tt;for(Ke=0;Ke<Ee.length;Ke++){var ut=[],ct=Ae._fullData[Ee[Ke]].xaxis,yt=Ae._fullData[Ee[Ke]].yaxis;if(!(!ct||!yt)){for(tt=0;tt<Fe.length;tt++)(Fe[tt].x.indexOf(ct)!==-1||Fe[tt].y.indexOf(yt)!==-1)&&ut.push(tt);if(!ut.length){Fe.push({x:[ct],y:[yt]});continue}var kt=Fe[ut[0]],jt;if(ut.length>1)for(tt=1;tt<ut.length;tt++)jt=Fe[ut[tt]],pr(kt.x,jt.x),pr(kt.y,jt.y);pr(kt.x,[ct]),pr(kt.y,[yt])}}return Fe}function pr(Ae,Ee){for(var Fe=0;Fe<Ee.length;Fe++)Ae.indexOf(Ee[Fe])===-1&&Ae.push(Ee[Fe])}function Tr(Ae,Ee,Fe){var Ke=[],tt=[],ut=Ae.layout,ct,yt;for(ct=0;ct<Ee.length;ct++)Ke.push(J.getFromId(Ae,Ee[ct]));for(ct=0;ct<Fe.length;ct++)tt.push(J.getFromId(Ae,Fe[ct]));var kt=Object.keys(l),jt=["anchor","domain","overlaying","position","side","tickangle","editType"],Mr=["linear","log"];for(ct=0;ct<kt.length;ct++){var Sr=kt[ct],Lr=Ke[0][Sr],Ar=tt[0][Sr],Ur=!0,fn=!1,Cr=!1;if(!(Sr.charAt(0)==="_"||typeof Lr=="function"||jt.indexOf(Sr)!==-1)){for(yt=1;yt<Ke.length&&Ur;yt++){var _r=Ke[yt][Sr];Sr==="type"&&Mr.indexOf(Lr)!==-1&&Mr.indexOf(_r)!==-1&&Lr!==_r?fn=!0:_r!==Lr&&(Ur=!1)}for(yt=1;yt<tt.length&&Ur;yt++){var En=tt[yt][Sr];Sr==="type"&&Mr.indexOf(Ar)!==-1&&Mr.indexOf(En)!==-1&&Ar!==En?Cr=!0:tt[yt][Sr]!==Ar&&(Ur=!1)}Ur&&(fn&&(ut[Ke[0]._name].type="linear"),Cr&&(ut[tt[0]._name].type="linear"),Nr(ut,Sr,Ke,tt,Ae._fullLayout._dfltTitle))}}for(ct=0;ct<Ae._fullLayout.annotations.length;ct++){var Jr=Ae._fullLayout.annotations[ct];Ee.indexOf(Jr.xref)!==-1&&Fe.indexOf(Jr.yref)!==-1&&t.swapAttrs(ut.annotations[ct],["?"])}}function Nr(Ae,Ee,Fe,Ke,tt){var ut=t.nestedProperty,ct=ut(Ae[Fe[0]._name],Ee).get(),yt=ut(Ae[Ke[0]._name],Ee).get(),kt;for(Ee==="title"&&(ct&&ct.text===tt.x&&(ct.text=tt.y),yt&&yt.text===tt.y&&(yt.text=tt.x)),kt=0;kt<Fe.length;kt++)ut(Ae,Fe[kt]._name+"."+Ee).set(yt);for(kt=0;kt<Ke.length;kt++)ut(Ae,Ke[kt]._name+"."+Ee).set(ct)}function Ir(Ae){return Ae._id==="angularaxis"}function lr(Ae,Ee){for(var Fe=Ee._rangebreaks.length,Ke=0;Ke<Fe;Ke++){var tt=Ee._rangebreaks[Ke];if(Ae>=tt.min&&Ae<tt.max)return tt.max}return Ae}function Yr(Ae){return(Ae.ticklabelposition||"").indexOf("inside")!==-1}function nt(Ae,Ee){Yr(Ae._anchorAxis||{})&&Ae._hideCounterAxisInsideTickLabels&&Ae._hideCounterAxisInsideTickLabels(Ee)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../constants/numerical").BADNUM,x=s.isArrayOrTypedArray,t=s.isDateTime,i=s.cleanNumber,a=Math.round;I.exports=function(d,p,y){var g=d,A=y.noMultiCategory;if(x(g)&&!g.length)return"-";if(!A&&c(g))return"multicategory";if(A&&Array.isArray(g[0])){for(var b=[],M=0;M<g.length;M++)if(x(g[M]))for(var w=0;w<g[M].length;w++)b.push(g[M][w]);g=b}if(f(g,p))return"date";var T=y.autotypenumbers!=="strict";return o(g,T)?"category":n(g,T)?"linear":"-"};function r(v,d){return d?u(v):typeof v=="number"}function n(v,d){for(var p=v.length,y=0;y<p;y++)if(r(v[y],d))return!0;return!1}function f(v,d){for(var p=v.length,y=l(p),g=0,A=0,b={},M=0;M<p;M+=y){var w=a(M),T=v[w],_=String(T);b[_]||(b[_]=1,t(T,d)&&g++,u(T)&&A++)}return g>A*2}function l(v){return Math.max(1,(v-1)/1e3)}function o(v,d){for(var p=v.length,y=l(p),g=0,A=0,b={},M=0;M<p;M+=y){var w=a(M),T=v[w],_=String(T);if(!b[_]){b[_]=1;var h=typeof T;h==="boolean"?A++:(d?i(T)!==m:h==="number")?g++:h==="string"&&A++}}return A>g*2}function c(v){return x(v[0])&&x(v[1])}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../registry"),m=e("../../lib"),x=e("../array_container_defaults"),t=e("./layout_attributes"),i=e("./tick_value_defaults"),a=e("./tick_mark_defaults"),r=e("./tick_label_defaults"),n=e("./prefix_suffix_defaults"),f=e("./category_order_defaults"),l=e("./line_grid_defaults"),o=e("./set_convert"),c=e("./constants").WEEKDAY_PATTERN,v=e("./constants").HOUR_PATTERN;I.exports=function(A,b,M,w,T){var _=w.letter,h=w.font||{},L=w.splomStash||{},S=M("visible",!w.visibleDflt),k=b._template||{},P=b.type||k.type||"-",O;if(P==="date"){var F=s.getComponentMethod("calendars","handleDefaults");F(A,b,"calendar",w.calendar),w.noTicklabelmode||(O=M("ticklabelmode"))}var D="";(!w.noTicklabelposition||P==="multicategory")&&(D=m.coerce(A,b,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:O==="period"?["outside","inside"]:_==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),w.noTicklabeloverflow||M("ticklabeloverflow",D.indexOf("inside")!==-1?"hide past domain":P==="category"||P==="multicategory"?"allow":"hide past div"),o(b,T);var R=!b.isValidRange(A.range);R&&w.reverseDflt&&(R="reversed");var U=M("autorange",R);U&&(P==="linear"||P==="-")&&M("rangemode"),M("range"),b.cleanRange(),f(A,b,M,w),P!=="category"&&!w.noHover&&M("hoverformat");var N=M("color"),X=N!==t.color.dflt?N:h.color,j=L.label||T._dfltTitle[_];if(n(A,b,M,P,w),!S)return b;M("title.text",j),m.coerceFont(M,"title.font",{family:h.family,size:m.bigFont(h.size),color:X}),i(A,b,M,P),r(A,b,M,P,w),a(A,b,M,w),l(A,b,M,{dfltColor:N,bgColor:w.bgColor,showGrid:w.showGrid,attributes:t}),(b.showline||b.ticks)&&M("mirror"),w.automargin&&M("automargin");var ee=P==="multicategory";if(!w.noTickson&&(P==="category"||ee)&&(b.ticks||b.showgrid)){var q;ee&&(q="boundaries");var G=M("tickson",q);G==="boundaries"&&delete b.ticklabelposition}if(ee){var J=M("showdividers");J&&(M("dividercolor"),M("dividerwidth"))}if(P==="date")if(x(A,b,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:d}),!b.rangebreaks.length)delete b.rangebreaks;else{for(var le=0;le<b.rangebreaks.length;le++)if(b.rangebreaks[le].pattern===c){b._hasDayOfWeekBreaks=!0;break}if(o(b,T),T._has("scattergl")||T._has("splom"))for(var fe=0;fe<w.data.length;fe++){var se=w.data[fe];(se.type==="scattergl"||se.type==="splom")&&(se.visible=!1,m.warn(se.type+" traces do not work on axes with rangebreaks. Setting trace "+se.index+" to `visible: false`."))}}return b};function d(g,A,b){function M(O,F){return m.coerce(g,A,t.rangebreaks,O,F)}var w=M("enabled");if(w){var T=M("bounds");if(T&&T.length>=2){var _="",h,L;if(T.length===2){for(h=0;h<2;h++)if(L=y(T[h]),L){_=c;break}}var S=M("pattern",_);if(S===c)for(h=0;h<2;h++)L=y(T[h]),L&&(A.bounds[h]=T[h]=L-1);if(S)for(h=0;h<2;h++)switch(L=T[h],S){case c:if(!u(L)){A.enabled=!1;return}if(L=+L,L!==Math.floor(L)||L<0||L>=7){A.enabled=!1;return}A.bounds[h]=T[h]=L;break;case v:if(!u(L)){A.enabled=!1;return}if(L=+L,L<0||L>24){A.enabled=!1;return}A.bounds[h]=T[h]=L;break}if(b.autorange===!1){var k=b.range;if(k[0]<k[1]){if(T[0]<k[0]&&T[1]>k[1]){A.enabled=!1;return}}else if(T[0]>k[0]&&T[1]<k[1]){A.enabled=!1;return}}}else{var P=M("values");if(P&&P.length)M("dvalue");else{A.enabled=!1;return}}}}var p={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function y(g){if(typeof g=="string")return p[g.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(e,I,B){var u=e("../../constants/docs"),s=u.FORMAT_LINK,m=u.DATE_FORMAT_LINK;function x(a,r){return{valType:"string",dflt:"",editType:"none",description:(r?t:i)("hover text",a)+["By default the values are formatted using "+(r?"generic number format":"`"+a+"axis.hoverformat`")+"."].join(" ")}}function t(a,r){return["Sets the "+a+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+s+"."].join(" ")}function i(a,r){return t(a,r)+[" And for dates see: "+m+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}I.exports={axisHoverFormat:x,descriptionOnlyNumbers:t,descriptionWithDates:i}},{"../../constants/docs":474}],558:[function(e,I,B){var u=e("../../registry"),s=e("./constants");B.id2name=function(t){if(!(typeof t!="string"||!t.match(s.AX_ID_PATTERN))){var i=t.split(" ")[0].substr(1);return i==="1"&&(i=""),t.charAt(0)+"axis"+i}},B.name2id=function(t){if(!!t.match(s.AX_NAME_PATTERN)){var i=t.substr(5);return i==="1"&&(i=""),t.charAt(0)+i}},B.cleanId=function(t,i,a){var r=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(s.AX_ID_PATTERN))&&!(i&&t.charAt(0)!==i)&&!(r&&!a)){var n=t.split(" ")[0].substr(1).replace(/^0+/,"");return n==="1"&&(n=""),t.charAt(0)+n+(r&&a?" domain":"")}},B.list=function(x,t,i){var a=x._fullLayout;if(!a)return[];var r=B.listIds(x,t),n=new Array(r.length),f;for(f=0;f<r.length;f++){var l=r[f];n[f]=a[l.charAt(0)+"axis"+l.substr(1)]}if(!i){var o=a._subplots.gl3d||[];for(f=0;f<o.length;f++){var c=a[o[f]];t?n.push(c[t+"axis"]):n.push(c.xaxis,c.yaxis,c.zaxis)}}return n},B.listIds=function(x,t){var i=x._fullLayout;if(!i)return[];var a=i._subplots;return t?a[t+"axis"]:a.xaxis.concat(a.yaxis)},B.getFromId=function(x,t,i){var a=x._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),i==="x"?t=t.replace(/y[0-9]*/,""):i==="y"&&(t=t.replace(/x[0-9]*/,"")),a[B.id2name(t)]},B.getFromTrace=function(x,t,i){var a=x._fullLayout,r=null;if(u.traceIs(t,"gl3d")){var n=t.scene;n.substr(0,5)==="scene"&&(r=a[n][i+"axis"])}else r=B.getFromId(x,t[i+"axis"]||i);return r},B.idSort=function(x,t){var i=x.charAt(0),a=t.charAt(0);return i!==a?i>a?1:-1:+(x.substr(1)||1)-+(t.substr(1)||1)},B.ref2id=function(x){return/^[xyz]/.test(x)?x.split(" ")[0]:!1};function m(x,t){if(t&&t.length){for(var i=0;i<t.length;i++)if(t[i][x])return!0}return!1}B.isLinked=function(x,t){return m(t,x._axisMatchGroups)||m(t,x._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(e,I,B){function u(s,m){var x=m.dataAttr||s._id.charAt(0),t={},i,a,r;if(m.axData)i=m.axData;else for(i=[],a=0;a<m.data.length;a++){var n=m.data[a];n[x+"axis"]===s._id&&i.push(n)}for(a=0;a<i.length;a++){var f=i[a][x];for(r=0;r<f.length;r++){var l=f[r];l!=null&&(t[l]=1)}}return Object.keys(t)}I.exports=function(m,x,t,i){if(x.type==="category"){var a=m.categoryarray,r=Array.isArray(a)&&a.length>0,n;r&&(n="array");var f=t("categoryorder",n),l;f==="array"&&(l=t("categoryarray")),!r&&f==="array"&&(f=x.categoryorder="trace"),f==="trace"?x._initialCategories=[]:f==="array"?x._initialCategories=l.slice():(l=u(x,i).sort(),f==="category ascending"?x._initialCategories=l:f==="category descending"&&(x._initialCategories=l.reverse()))}}},{}],560:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../constants/numerical"),x=m.ONEDAY,t=m.ONEWEEK;B.dtick=function(i,a){var r=a==="log",n=a==="date",f=a==="category",l=n?x:1;if(!i)return l;if(u(i))return i=Number(i),i<=0?l:f?Math.max(1,Math.round(i)):n?Math.max(.1,i):i;if(typeof i!="string"||!(n||r))return l;var o=i.charAt(0),c=i.substr(1);return c=u(c)?Number(c):0,c<=0||!(n&&o==="M"&&c===Math.round(c)||r&&o==="L"||r&&o==="D"&&(c===1||c===2))?l:i},B.tick0=function(i,a,r,n){if(a==="date")return s.cleanDate(i,s.dateTick0(r,n%t==0?1:0));if(!(n==="D1"||n==="D2"))return u(i)?Number(i):0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(e,I,B){var u=e("../../lib/regex").counter;I.exports={idRegex:{x:u("x","( domain)?"),y:u("y","( domain)?")},attrRegex:u("[xy]axis"),xAxisMatch:u("xaxis"),yAxisMatch:u("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(e,I,B){var u=e("../../lib"),s=e("./autorange"),m=e("./axis_ids").id2name,x=e("./layout_attributes"),t=e("./scale_zoom"),i=e("./set_convert"),a=e("../../constants/numerical").ALMOST_EQUAL,r=e("../../constants/alignment").FROM_BL;B.handleDefaults=function(p,y,g){var A=g.axIds,b=g.axHasImage,M=y._axisConstraintGroups=[],w=y._axisMatchGroups=[],T,_,h,L,S,k,P,O;for(T=0;T<A.length;T++)L=m(A[T]),S=p[L],k=y[L],n(S,k,{axIds:A,layoutOut:y,hasImage:b[L]});function F(G,J){for(T=0;T<G.length;T++){_=G[T];for(h in _)y[m(h)][J]=_}}for(F(w,"_matchGroup"),T=0;T<M.length;T++){_=M[T];for(h in _)if(k=y[m(h)],k.fixedrange){for(var D in _){var R=m(D);(p[R]||{}).fixedrange===!1&&u.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),y[R].fixedrange=!0}break}}for(T=0;T<M.length;){_=M[T];for(h in _){k=y[m(h)],k._matchGroup&&Object.keys(k._matchGroup).length===Object.keys(_).length&&(M.splice(T,1),T--);break}T++}F(M,"_constraintGroup");var U=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],N=!1,X=!1;function j(){O=k[P],P==="rangebreaks"&&(X=k._hasDayOfWeekBreaks)}for(T=0;T<w.length;T++){_=w[T];for(var ee=0;ee<U.length;ee++){P=U[ee],O=null;var q;for(h in _)if(L=m(h),S=p[L],k=y[L],P in k){if(!k.matches&&(q=k,P in S)){j();break}O===null&&P in S&&j()}if(P==="range"&&O&&(N=!0),P==="autorange"&&O===null&&N&&(O=!1),O===null&&P in q&&(O=q[P]),O!==null)for(h in _)k=y[m(h)],k[P]=P==="range"?O.slice():O,P==="rangebreaks"&&(k._hasDayOfWeekBreaks=X,i(k,y))}}};function n(p,y,g){var A=g.axIds,b=g.layoutOut,M=g.hasImage,w=b._axisConstraintGroups,T=b._axisMatchGroups,_=y._id,h=_.charAt(0),L=((b._splomAxes||{})[h]||{})[_]||{},S=y._id,k=S.charAt(0)==="x";y._matchGroup=null,y._constraintGroup=null;function P(se,V){return u.coerce(p,y,x,se,V)}P("constrain",M?"domain":"range"),u.coerce(p,y,{constraintoward:{valType:"enumerated",values:k?["left","center","right"]:["bottom","middle","top"],dflt:k?"center":"middle"}},"constraintoward");var O=y.type,F,D,R=[];for(F=0;F<A.length;F++)if(D=A[F],D!==S){var U=b[m(D)];U.type===O&&R.push(D)}var N=l(w,S);if(N){var X=[];for(F=0;F<R.length;F++)D=R[F],N[D]||X.push(D);R=X}var j=R.length,ee,q;j&&(p.matches||L.matches)&&(ee=u.coerce(p,y,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var G=M&&!k?y.anchor:void 0;if(j&&!ee&&(p.scaleanchor||G)&&(q=u.coerce(p,y,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",G)),ee){y._matchGroup=o(T,S,ee,1);var J=b[m(ee)],le=f(b,y)/f(b,J);k!==(ee.charAt(0)==="x")&&(le=(k?"x":"y")+le),o(w,S,ee,le)}else p.matches&&A.indexOf(p.matches)!==-1&&u.warn("ignored "+y._name+'.matches: "'+p.matches+'" to avoid an infinite loop');if(q){var fe=P("scaleratio");fe||(fe=y.scaleratio=1),o(w,S,q,fe)}else p.scaleanchor&&A.indexOf(p.scaleanchor)!==-1&&u.warn("ignored "+y._name+'.scaleanchor: "'+p.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(p,y){var g=y.domain;return g||(g=p[m(y.overlaying)].domain),g[1]-g[0]}function l(p,y){for(var g=0;g<p.length;g++)if(p[g][y])return p[g];return null}function o(p,y,g,A){var b,M,w,T,_,h=l(p,y);h===null?(h={},h[y]=1,_=p.length,p.push(h)):_=p.indexOf(h);var L=Object.keys(h);for(b=0;b<p.length;b++)if(w=p[b],b!==_&&w[g]){var S=w[g];for(M=0;M<L.length;M++)T=L[M],w[T]=c(S,c(A,h[T]));p.splice(_,1);return}if(A!==1)for(M=0;M<L.length;M++){var k=L[M];h[k]=c(A,h[k])}h[g]=1}function c(p,y){var g="",A="",b,M;typeof p=="string"&&(g=p.match(/^[xy]*/)[0],b=g.length,p=+p.substr(b)),typeof y=="string"&&(A=y.match(/^[xy]*/)[0],M=A.length,y=+y.substr(M));var w=p*y;return!b&&!M?w:!b||!M||g.charAt(0)===A.charAt(0)?g+A+p*y:b===M?w:(b>M?g.substr(M):A.substr(b))+w}function v(p,y){for(var g=y._size,A=g.h/g.w,b={},M=Object.keys(p),w=0;w<M.length;w++){var T=M[w],_=p[T];if(typeof _=="string"){var h=_.match(/^[xy]*/)[0],L=h.length;_=+_.substr(L);for(var S=h.charAt(0)==="y"?A:1/A,k=0;k<L;k++)_*=S}b[T]=_}return b}B.enforce=function(y){var g=y._fullLayout,A=g._axisConstraintGroups||[],b,M,w,T,_,h,L,S;for(b=0;b<A.length;b++){w=v(A[b],g);var k=Object.keys(w),P=1/0,O=0,F=1/0,D={},R={},U=!1;for(M=0;M<k.length;M++)T=k[M],R[T]=_=g[m(T)],_._inputDomain?_.domain=_._inputDomain.slice():_._inputDomain=_.domain.slice(),_._inputRange||(_._inputRange=_.range.slice()),_.setScale(),D[T]=h=Math.abs(_._m)/w[T],P=Math.min(P,h),(_.constrain==="domain"||!_._constraintShrinkable)&&(F=Math.min(F,h)),delete _._constraintShrinkable,O=Math.max(O,h),_.constrain==="domain"&&(U=!0);if(!(P>a*O&&!U)){for(M=0;M<k.length;M++)if(T=k[M],h=D[T],_=R[T],L=_.constrain,h!==F||L==="domain")if(S=h/F,L==="range")t(_,S);else{var N=_._inputDomain,X=(_.domain[1]-_.domain[0])/(N[1]-N[0]),j=(_.r2l(_.range[1])-_.r2l(_.range[0]))/(_.r2l(_._inputRange[1])-_.r2l(_._inputRange[0]));if(S/=X,S*j<1){_.domain=_._input.domain=N.slice(),t(_,S);continue}if(j<1&&(_.range=_._input.range=_._inputRange.slice(),S*=j),_.autorange){var ee=_.r2l(_.range[0]),q=_.r2l(_.range[1]),G=(ee+q)/2,J=G,le=G,fe=Math.abs(q-G),se=G-fe*S*1.0001,V=G+fe*S*1.0001,Y=s.makePadFn(g,_,0),ne=s.makePadFn(g,_,1);d(_,S);var te=Math.abs(_._m),K=s.concatExtremes(y,_),$=K.min,ae=K.max,ie,oe;for(oe=0;oe<$.length;oe++)ie=$[oe].val-Y($[oe])/te,ie>se&&ie<J&&(J=ie);for(oe=0;oe<ae.length;oe++)ie=ae[oe].val+ne(ae[oe])/te,ie<V&&ie>le&&(le=ie);var ue=(le-J)/(2*fe);S/=ue,J=_.l2r(J),le=_.l2r(le),_.range=_._input.range=ee<q?[J,le]:[le,J]}d(_,S)}}}},B.getAxisGroup=function(y,g){for(var A=y._axisMatchGroups,b=0;b<A.length;b++){var M=A[b];if(M[g])return"g"+b}return g},B.clean=function(y,g){if(g._inputDomain){for(var A=!1,b=g._id,M=y._fullLayout._axisConstraintGroups,w=0;w<M.length;w++)if(M[w][b]){A=!0;break}(!A||g.constrain!=="domain")&&(g._input.domain=g.domain=g._inputDomain,delete g._inputDomain)}};function d(p,y){var g=p._inputDomain,A=r[p.constraintoward],b=g[0]+(g[1]-g[0])*A;p.domain=p._input.domain=[b+(g[0]-b)/y,b+(g[1]-b)/y],p.setScale()}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=s.numberFormat,x=e("tinycolor2"),t=e("has-passive-events"),i=e("../../registry"),a=s.strTranslate,r=e("../../lib/svg_text_utils"),n=e("../../components/color"),f=e("../../components/drawing"),l=e("../../components/fx"),o=e("./axes"),c=e("../../lib/setcursor"),v=e("../../components/dragelement"),d=e("../../components/dragelement/helpers"),p=d.selectingOrDrawing,y=d.freeMode,g=e("../../constants/alignment").FROM_TL,A=e("../../lib/clear_gl_canvases"),b=e("../../plot_api/subroutines").redrawReglTraces,M=e("../plots"),w=e("./axis_ids").getFromId,T=e("./select").prepSelect,_=e("./select").clearSelect,h=e("./select").selectOnClick,L=e("./scale_zoom"),S=e("./constants"),k=S.MINDRAG,P=S.MINZOOM,O=!0;function F(ie,oe,ue,xe,he,me,be,Ce){var Se=ie._fullLayout._zoomlayer,Be=be+Ce==="nsew",Ye=(be+Ce).length===1,Xe,Te,Ie,Ze,rt,Ge,ze,We,mt,Ft,Xt,Pt,Ut,Gt,It,Ct,lt,dt,et,Pe,Je,it,ht;function zt(){if(Xe=oe.xaxis,Te=oe.yaxis,mt=Xe._length,Ft=Te._length,ze=Xe._offset,We=Te._offset,Ie={},Ie[Xe._id]=Xe,Ze={},Ze[Te._id]=Te,be&&Ce)for(var Cr=oe.overlays,_r=0;_r<Cr.length;_r++){var En=Cr[_r].xaxis;Ie[En._id]=En;var Jr=Cr[_r].yaxis;Ze[Jr._id]=Jr}rt=ae(Ie),Ge=ae(Ze),Ut=U(rt,Ce),Gt=U(Ge,be),It=!Gt&&!Ut,Pt=K(ie,ie._fullLayout._axisMatchGroups,Ie,Ze),Xt=K(ie,ie._fullLayout._axisConstraintGroups,Ie,Ze,Pt);var Pr=Xt.isSubplotConstrained||Pt.isSubplotConstrained;Ct=Ce||Pr,lt=be||Pr;var vn=ie._fullLayout;dt=vn._has("scattergl"),et=vn._has("splom"),Pe=vn._has("svg")}zt();var Lt=q(Gt+Ut,ie._fullLayout.dragmode,Be),Vt=R(oe,be+Ce+"drag",Lt,ue,xe,he,me);if(It&&!Be)return Vt.onmousedown=null,Vt.style.pointerEvents="none",Vt;var $t={element:Vt,gd:ie,plotinfo:oe};$t.prepFn=function(Cr,_r,En){var Jr=$t.dragmode,Pr=ie._fullLayout.dragmode;Pr!==Jr&&($t.dragmode=Pr),zt(),it=ie._fullLayout._invScaleX,ht=ie._fullLayout._invScaleY,It||(Be?Cr.shiftKey?Pr==="pan"?Pr="zoom":p(Pr)||(Pr="pan"):Cr.ctrlKey&&(Pr="pan"):Pr="pan"),y(Pr)?$t.minDrag=1:$t.minDrag=void 0,p(Pr)?($t.xaxes=rt,$t.yaxes=Ge,T(Cr,_r,En,$t,Pr)):($t.clickFn=tr,p(Jr)&&Ht(),It||(Pr==="zoom"?($t.moveFn=nt,$t.doneFn=Ee,$t.minDrag=1,Yr(Cr,_r,En)):Pr==="pan"&&($t.moveFn=yt,$t.doneFn=Sr))),ie._fullLayout._redrag=function(){var vn=ie._dragdata;if(vn&&vn.element===Vt){var xn=ie._fullLayout.dragmode;p(xn)||(zt(),Lr([0,0,mt,Ft]),$t.moveFn(vn.dx,vn.dy))}}};function Ht(){$t.plotinfo.selection=!1,_(ie)}function tr(Cr,_r){var En=$t.gd;if(En._fullLayout._activeShapeIndex>=0){En._fullLayout._deactivateShape(En);return}var Jr=En._fullLayout.clickmode;if(se(En),Cr===2&&!Ye&&Mr(),Be)Jr.indexOf("select")>-1&&h(_r,En,rt,Ge,oe.id,$t),Jr.indexOf("event")>-1&&l.click(En,_r,oe.id);else if(Cr===1&&Ye){var Pr=be?Te:Xe,vn=be==="s"||Ce==="w"?0:1,xn=Pr._name+".range["+vn+"]",qr=N(Pr,vn),st="left",Bt="middle";if(Pr.fixedrange)return;be?(Bt=be==="n"?"top":"bottom",Pr.side==="right"&&(st="right")):Ce==="e"&&(st="right"),En._context.showAxisRangeEntryBoxes&&u.select(Vt).call(r.makeEditable,{gd:En,immediate:!0,background:En._fullLayout.paper_bgcolor,text:String(qr),fill:Pr.tickfont?Pr.tickfont.color:"#444",horizontalAlign:st,verticalAlign:Bt}).on("edit",function(ir){var xr=Pr.d2r(ir);xr!==void 0&&i.call("_guiRelayout",En,xn,xr)})}}v.init($t);var qe,xt,Rt,fr,br,pr,Tr,Nr,Ir,lr;function Yr(Cr,_r,En){var Jr=Vt.getBoundingClientRect();qe=_r-Jr.left,xt=En-Jr.top,ie._fullLayout._calcInverseTransform(ie);var Pr=s.apply3DTransform(ie._fullLayout._invTransform)(qe,xt);qe=Pr[0],xt=Pr[1],Rt={l:qe,r:qe,w:0,t:xt,b:xt,h:0},fr=ie._hmpixcount?ie._hmlumcount/ie._hmpixcount:x(ie._fullLayout.plot_bgcolor).getLuminance(),br="M0,0H"+mt+"V"+Ft+"H0V0",pr=!1,Tr="xy",lr=!1,Nr=G(Se,fr,ze,We,br),Ir=J(Se,ze,We)}function nt(Cr,_r){if(ie._transitioningWithDuration)return!1;var En=Math.max(0,Math.min(mt,it*Cr+qe)),Jr=Math.max(0,Math.min(Ft,ht*_r+xt)),Pr=Math.abs(En-qe),vn=Math.abs(Jr-xt);Rt.l=Math.min(qe,En),Rt.r=Math.max(qe,En),Rt.t=Math.min(xt,Jr),Rt.b=Math.max(xt,Jr);function xn(){Tr="",Rt.r=Rt.l,Rt.t=Rt.b,Ir.attr("d","M0,0Z")}if(Xt.isSubplotConstrained)Pr>P||vn>P?(Tr="xy",Pr/mt>vn/Ft?(vn=Pr*Ft/mt,xt>Jr?Rt.t=xt-vn:Rt.b=xt+vn):(Pr=vn*mt/Ft,qe>En?Rt.l=qe-Pr:Rt.r=qe+Pr),Ir.attr("d",te(Rt))):xn();else if(Pt.isSubplotConstrained)if(Pr>P||vn>P){Tr="xy";var qr=Math.min(Rt.l/mt,(Ft-Rt.b)/Ft),st=Math.max(Rt.r/mt,(Ft-Rt.t)/Ft);Rt.l=qr*mt,Rt.r=st*mt,Rt.b=(1-qr)*Ft,Rt.t=(1-st)*Ft,Ir.attr("d",te(Rt))}else xn();else!Gt||vn<Math.min(Math.max(Pr*.6,k),P)?Pr<k||!Ut?xn():(Rt.t=0,Rt.b=Ft,Tr="x",Ir.attr("d",Y(Rt,xt))):!Ut||Pr<Math.min(vn*.6,P)?(Rt.l=0,Rt.r=mt,Tr="y",Ir.attr("d",ne(Rt,qe))):(Tr="xy",Ir.attr("d",te(Rt)));Rt.w=Rt.r-Rt.l,Rt.h=Rt.b-Rt.t,Tr&&(lr=!0),ie._dragged=lr,le(Nr,Ir,Rt,br,pr,fr),Ae(),ie.emit("plotly_relayouting",Je),pr=!0}function Ae(){Je={},(Tr==="xy"||Tr==="x")&&(X(rt,Rt.l/mt,Rt.r/mt,Je,Xt.xaxes),kt("x",Je)),(Tr==="xy"||Tr==="y")&&(X(Ge,(Ft-Rt.b)/Ft,(Ft-Rt.t)/Ft,Je,Xt.yaxes),kt("y",Je))}function Ee(){Ae(),se(ie),Sr(),V(ie)}var Fe=[0,0,mt,Ft],Ke=null,tt=S.REDRAWDELAY,ut=oe.mainplot?ie._fullLayout._plots[oe.mainplot]:oe;function ct(Cr){if(!ie._context._scrollZoom.cartesian&&!ie._fullLayout._enablescrollzoom)return;if(Ht(),ie._transitioningWithDuration){Cr.preventDefault(),Cr.stopPropagation();return}zt(),clearTimeout(Ke);var _r=-Cr.deltaY;if(isFinite(_r)||(_r=Cr.wheelDelta/10),!isFinite(_r)){s.log("Did not find wheel motion attributes: ",Cr);return}var En=Math.exp(-Math.min(Math.max(_r,-20),20)/200),Jr=ut.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Pr=(Cr.clientX-Jr.left)/Jr.width,vn=(Jr.bottom-Cr.clientY)/Jr.height,xn;function qr(st,Bt,ir){if(st.fixedrange)return;var xr=s.simpleMap(st.range,st.r2l),Qr=xr[0]+(xr[1]-xr[0])*Bt;function Gr(Br){return st.l2r(Qr+(Br-Qr)*ir)}st.range=xr.map(Gr)}if(Ct){for(Ce||(Pr=.5),xn=0;xn<rt.length;xn++)qr(rt[xn],Pr,En);kt("x"),Fe[2]*=En,Fe[0]+=Fe[2]*Pr*(1/En-1)}if(lt){for(be||(vn=.5),xn=0;xn<Ge.length;xn++)qr(Ge[xn],vn,En);kt("y"),Fe[3]*=En,Fe[1]+=Fe[3]*(1-vn)*(1/En-1)}Lr(Fe),jt(),ie.emit("plotly_relayouting",Je),Ke=setTimeout(function(){!ie._fullLayout||(Fe=[0,0,mt,Ft],Sr())},tt),Cr.preventDefault()}be.length*Ce.length!=1&&$(Vt,ct);function yt(Cr,_r){if(Cr=Cr*it,_r=_r*ht,ie._transitioningWithDuration)return;if(ie._fullLayout._replotting=!0,Ut==="ew"||Gt==="ns"){var En=Ut?-Cr:0,Jr=Gt?-_r:0;if(Pt.isSubplotConstrained){if(Ut&&Gt){var Pr=(Cr/mt-_r/Ft)/2;Cr=Pr*mt,_r=-Pr*Ft,En=-Cr,Jr=-_r}Gt?En=-Jr*mt/Ft:Jr=-En*Ft/mt}Ut&&(j(rt,Cr),kt("x")),Gt&&(j(Ge,_r),kt("y")),Lr([En,Jr,mt,Ft]),jt(),ie.emit("plotly_relayouting",Je);return}function vn(Gr,Br,kr){for(var en=1-Br,Zn,Hn,da=0;da<Gr.length;da++){var wa=Gr[da];if(!wa.fixedrange){Zn=wa,Hn=wa._rl[en]+(wa._rl[Br]-wa._rl[en])/ee(kr/wa._length);var Va=wa.l2r(Hn);Va!==!1&&Va!==void 0&&(wa.range[Br]=Va)}}return Zn._length*(Zn._rl[Br]-Hn)/(Zn._rl[Br]-Zn._rl[en])}var xn=Ut==="w"==(Gt==="n")?1:-1;if(Ut&&Gt&&(Xt.isSubplotConstrained||Pt.isSubplotConstrained)){var qr=(Cr/mt+xn*_r/Ft)/2;Cr=qr*mt,_r=xn*qr*Ft}var st,Bt;if(Ut==="w"?Cr=vn(rt,0,Cr):Ut==="e"?Cr=vn(rt,1,-Cr):Ut||(Cr=0),Gt==="n"?_r=vn(Ge,1,_r):Gt==="s"?_r=vn(Ge,0,-_r):Gt||(_r=0),st=Ut==="w"?Cr:0,Bt=Gt==="n"?_r:0,Xt.isSubplotConstrained&&!Pt.isSubplotConstrained||Pt.isSubplotConstrained&&Ut&&Gt&&xn>0){var ir;if(Pt.isSubplotConstrained||!Ut&&Gt.length===1){for(ir=0;ir<rt.length;ir++)rt[ir].range=rt[ir]._r.slice(),L(rt[ir],1-_r/Ft);Cr=_r*mt/Ft,st=Cr/2}if(Pt.isSubplotConstrained||!Gt&&Ut.length===1){for(ir=0;ir<Ge.length;ir++)Ge[ir].range=Ge[ir]._r.slice(),L(Ge[ir],1-Cr/mt);_r=Cr*Ft/mt,Bt=_r/2}}(!Pt.isSubplotConstrained||!Gt)&&kt("x"),(!Pt.isSubplotConstrained||!Ut)&&kt("y");var xr=mt-Cr,Qr=Ft-_r;Pt.isSubplotConstrained&&!(Ut&&Gt)&&(Ut?(Bt=st?0:Cr*Ft/mt,Qr=xr*Ft/mt):(st=Bt?0:_r*mt/Ft,xr=Qr*mt/Ft)),Lr([st,Bt,xr,Qr]),jt(),ie.emit("plotly_relayouting",Je)}function kt(Cr,_r){for(var En=Pt.isSubplotConstrained?{x:Ge,y:rt}[Cr]:Pt[Cr+"axes"],Jr=Pt.isSubplotConstrained?{x:rt,y:Ge}[Cr]:[],Pr=0;Pr<En.length;Pr++){var vn=En[Pr],xn=vn._id,qr=Pt.xLinks[xn]||Pt.yLinks[xn],st=Jr[0]||Ie[qr]||Ze[qr];st&&(_r?(_r[vn._name+".range[0]"]=_r[st._name+".range[0]"],_r[vn._name+".range[1]"]=_r[st._name+".range[1]"]):vn.range=st.range.slice())}}function jt(){var Cr=[],_r;function En(vn){for(_r=0;_r<vn.length;_r++)vn[_r].fixedrange||Cr.push(vn[_r]._id)}for(Ct&&(En(rt),En(Xt.xaxes),En(Pt.xaxes)),lt&&(En(Ge),En(Xt.yaxes),En(Pt.yaxes)),Je={},_r=0;_r<Cr.length;_r++){var Jr=Cr[_r],Pr=w(ie,Jr);o.drawOne(ie,Pr,{skipTitle:!0}),Je[Pr._name+".range[0]"]=Pr.range[0],Je[Pr._name+".range[1]"]=Pr.range[1]}o.redrawComponents(ie,Cr)}function Mr(){if(!ie._transitioningWithDuration){var Cr=ie._context.doubleClick,_r=[];Ut&&(_r=_r.concat(rt)),Gt&&(_r=_r.concat(Ge)),Pt.xaxes&&(_r=_r.concat(Pt.xaxes)),Pt.yaxes&&(_r=_r.concat(Pt.yaxes));var En={},Jr,Pr,vn;if(Cr==="reset+autosize"){for(Cr="autosize",Pr=0;Pr<_r.length;Pr++)if(Jr=_r[Pr],Jr._rangeInitial&&(Jr.range[0]!==Jr._rangeInitial[0]||Jr.range[1]!==Jr._rangeInitial[1])||!Jr._rangeInitial&&!Jr.autorange){Cr="reset";break}}if(Cr==="autosize")for(Pr=0;Pr<_r.length;Pr++)Jr=_r[Pr],Jr.fixedrange||(En[Jr._name+".autorange"]=!0);else if(Cr==="reset")for((Ut||Xt.isSubplotConstrained)&&(_r=_r.concat(Xt.xaxes)),Gt&&!Xt.isSubplotConstrained&&(_r=_r.concat(Xt.yaxes)),Xt.isSubplotConstrained&&(Ut?Gt||(_r=_r.concat(Ge)):_r=_r.concat(rt)),Pr=0;Pr<_r.length;Pr++)Jr=_r[Pr],Jr.fixedrange||(Jr._rangeInitial?(vn=Jr._rangeInitial,En[Jr._name+".range[0]"]=vn[0],En[Jr._name+".range[1]"]=vn[1]):En[Jr._name+".autorange"]=!0);ie.emit("plotly_doubleclick",null),i.call("_guiRelayout",ie,En)}}function Sr(){Lr([0,0,mt,Ft]),s.syncOrAsync([M.previousPromises,function(){ie._fullLayout._replotting=!1,i.call("_guiRelayout",ie,Je)}],ie)}function Lr(Cr){var _r=ie._fullLayout,En=_r._plots,Jr=_r._subplots.cartesian,Pr,vn,xn,qr;if(et&&i.subplotsRegistry.splom.drag(ie),dt){for(Pr=0;Pr<Jr.length;Pr++)if(vn=En[Jr[Pr]],xn=vn.xaxis,qr=vn.yaxis,vn._scene){var st=s.simpleMap(xn.range,xn.r2l),Bt=s.simpleMap(qr.range,qr.r2l);vn._scene.update({range:[st[0],Bt[0],st[1],Bt[1]]})}}if((et||dt)&&(A(ie),b(ie)),Pe){var ir=Cr[2]/Xe._length,xr=Cr[3]/Te._length;for(Pr=0;Pr<Jr.length;Pr++){vn=En[Jr[Pr]],xn=vn.xaxis,qr=vn.yaxis;var Qr=(Ct||Pt.isSubplotConstrained)&&!xn.fixedrange&&Ie[xn._id],Gr=(lt||Pt.isSubplotConstrained)&&!qr.fixedrange&&Ze[qr._id],Br,kr,en,Zn;if(Qr?(Br=ir,en=Ce||Pt.isSubplotConstrained?Cr[0]:fn(xn,Br)):Pt.xaHash[xn._id]?(Br=ir,en=Cr[0]*xn._length/Xe._length):Pt.yaHash[xn._id]?(Br=xr,en=Gt==="ns"?-Cr[1]*xn._length/Te._length:fn(xn,Br,{n:"top",s:"bottom"}[Gt])):(Br=Ar(xn,ir,xr),en=Ur(xn,Br)),Gr?(kr=xr,Zn=be||Pt.isSubplotConstrained?Cr[1]:fn(qr,kr)):Pt.yaHash[qr._id]?(kr=xr,Zn=Cr[1]*qr._length/Te._length):Pt.xaHash[qr._id]?(kr=ir,Zn=Ut==="ew"?-Cr[0]*qr._length/Xe._length:fn(qr,kr,{e:"right",w:"left"}[Ut])):(kr=Ar(qr,ir,xr),Zn=Ur(qr,kr)),!(!Br&&!kr)){Br||(Br=1),kr||(kr=1);var Hn=xn._offset-en/Br,da=qr._offset-Zn/kr;vn.clipRect.call(f.setTranslate,en,Zn).call(f.setScale,Br,kr),vn.plot.call(f.setTranslate,Hn,da).call(f.setScale,1/Br,1/kr),(Br!==vn.xScaleFactor||kr!==vn.yScaleFactor)&&(f.setPointGroupScale(vn.zoomScalePts,Br,kr),f.setTextPointsScale(vn.zoomScaleTxt,Br,kr)),f.hideOutsideRangePoints(vn.clipOnAxisFalseTraces,vn),vn.xScaleFactor=Br,vn.yScaleFactor=kr}}}}function Ar(Cr,_r,En){return Cr.fixedrange?0:Ct&&Xt.xaHash[Cr._id]?_r:lt&&(Xt.isSubplotConstrained?Xt.xaHash:Xt.yaHash)[Cr._id]?En:0}function Ur(Cr,_r){return _r?(Cr.range=Cr._r.slice(),L(Cr,_r),fn(Cr,_r)):0}function fn(Cr,_r,En){return Cr._length*(1-_r)*g[En||Cr.constraintoward||"middle"]}return Vt}function D(ie,oe,ue,xe){var he=s.ensureSingle(ie.draglayer,oe,ue,function(me){me.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ie.id)});return he.call(c,xe),he.node()}function R(ie,oe,ue,xe,he,me,be){var Ce=D(ie,"rect",oe,ue);return u.select(Ce).call(f.setRect,xe,he,me,be),Ce}function U(ie,oe){for(var ue=0;ue<ie.length;ue++)if(!ie[ue].fixedrange)return oe;return""}function N(ie,oe){var ue=ie.range[oe],xe=Math.abs(ue-ie.range[1-oe]),he;return ie.type==="date"?ue:ie.type==="log"?(he=Math.ceil(Math.max(0,-Math.log(xe)/Math.LN10))+3,m("."+he+"g")(Math.pow(10,ue))):(he=Math.floor(Math.log(Math.abs(ue))/Math.LN10)-Math.floor(Math.log(xe)/Math.LN10)+4,m("."+String(he)+"g")(ue))}function X(ie,oe,ue,xe,he){for(var me=0;me<ie.length;me++){var be=ie[me];if(!be.fixedrange)if(be.rangebreaks){var Ce=be._id.charAt(0)==="y",Se=Ce?1-oe:oe,Be=Ce?1-ue:ue;xe[be._name+".range[0]"]=be.l2r(be.p2l(Se*be._length)),xe[be._name+".range[1]"]=be.l2r(be.p2l(Be*be._length))}else{var Ye=be._rl[0],Xe=be._rl[1]-Ye;xe[be._name+".range[0]"]=be.l2r(Ye+Xe*oe),xe[be._name+".range[1]"]=be.l2r(Ye+Xe*ue)}}if(he&&he.length){var Te=(oe+(1-ue))/2;X(he,Te,1-Te,xe,[])}}function j(ie,oe){for(var ue=0;ue<ie.length;ue++){var xe=ie[ue];if(!xe.fixedrange)if(xe.rangebreaks){var he=0,me=xe._length,be=xe.p2l(he+oe)-xe.p2l(he),Ce=xe.p2l(me+oe)-xe.p2l(me),Se=(be+Ce)/2;xe.range=[xe.l2r(xe._rl[0]-Se),xe.l2r(xe._rl[1]-Se)]}else xe.range=[xe.l2r(xe._rl[0]-oe/xe._m),xe.l2r(xe._rl[1]-oe/xe._m)]}}function ee(ie){return 1-(ie>=0?Math.min(ie,.9):1/(1/Math.max(ie,-.3)+3.222))}function q(ie,oe,ue){return ie?ie==="nsew"?ue?"":oe==="pan"?"move":"crosshair":ie.toLowerCase()+"-resize":"pointer"}function G(ie,oe,ue,xe,he){return ie.append("path").attr("class","zoombox").style({fill:oe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(ue,xe)).attr("d",he+"Z")}function J(ie,oe,ue){return ie.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(oe,ue)).attr("d","M0,0Z")}function le(ie,oe,ue,xe,he,me){ie.attr("d",xe+"M"+ue.l+","+ue.t+"v"+ue.h+"h"+ue.w+"v-"+ue.h+"h-"+ue.w+"Z"),fe(ie,oe,he,me)}function fe(ie,oe,ue,xe){ue||(ie.transition().style("fill",xe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),oe.transition().style("opacity",1).duration(200))}function se(ie){u.select(ie).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function V(ie){O&&ie.data&&ie._context.showTips&&(s.notifier(s._(ie,"Double-click to zoom back out"),"long"),O=!1)}function Y(ie,oe){return"M"+(ie.l-.5)+","+(oe-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(ie.r+.5)+","+(oe-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function ne(ie,oe){return"M"+(oe-P-.5)+","+(ie.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(oe-P-.5)+","+(ie.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function te(ie){var oe=Math.floor(Math.min(ie.b-ie.t,ie.r-ie.l,P)/2);return"M"+(ie.l-3.5)+","+(ie.t-.5+oe)+"h3v"+-oe+"h"+oe+"v-3h-"+(oe+3)+"ZM"+(ie.r+3.5)+","+(ie.t-.5+oe)+"h-3v"+-oe+"h"+-oe+"v-3h"+(oe+3)+"ZM"+(ie.r+3.5)+","+(ie.b+.5-oe)+"h-3v"+oe+"h"+-oe+"v3h"+(oe+3)+"ZM"+(ie.l-3.5)+","+(ie.b+.5-oe)+"h3v"+oe+"h"+oe+"v3h-"+(oe+3)+"Z"}function K(ie,oe,ue,xe,he){for(var me=!1,be={},Ce={},Se,Be,Ye,Xe,Te=(he||{}).xaHash,Ie=(he||{}).yaHash,Ze=0;Ze<oe.length;Ze++){var rt=oe[Ze];for(Se in ue)if(rt[Se]){for(Ye in rt)!(he&&(Te[Ye]||Ie[Ye]))&&!(Ye.charAt(0)==="x"?ue:xe)[Ye]&&(be[Ye]=Se);for(Be in xe)!(he&&(Te[Be]||Ie[Be]))&&rt[Be]&&(me=!0)}for(Be in xe)if(rt[Be])for(Xe in rt)!(he&&(Te[Xe]||Ie[Xe]))&&!(Xe.charAt(0)==="x"?ue:xe)[Xe]&&(Ce[Xe]=Be)}me&&(s.extendFlat(be,Ce),Ce={});var Ge={},ze=[];for(Ye in be){var We=w(ie,Ye);ze.push(We),Ge[We._id]=We}var mt={},Ft=[];for(Xe in Ce){var Xt=w(ie,Xe);Ft.push(Xt),mt[Xt._id]=Xt}return{xaHash:Ge,yaHash:mt,xaxes:ze,yaxes:Ft,xLinks:be,yLinks:Ce,isSubplotConstrained:me}}function $(ie,oe){if(!t)ie.onwheel!==void 0?ie.onwheel=oe:ie.onmousewheel!==void 0?ie.onmousewheel=oe:ie.isAddedWheelEvent||(ie.isAddedWheelEvent=!0,ie.addEventListener("wheel",oe,{passive:!1}));else{var ue=ie.onwheel!==void 0?"wheel":"mousewheel";ie._onwheel&&ie.removeEventListener(ue,ie._onwheel),ie._onwheel=oe,ie.addEventListener(ue,oe,{passive:!1})}}function ae(ie){var oe=[];for(var ue in ie)oe.push(ie[ue]);return oe}I.exports={makeDragBox:F,makeDragger:D,makeRectDragger:R,makeZoombox:G,makeCorners:J,updateZoombox:le,xyCorners:te,transitionZoombox:fe,removeZoombox:se,showDoubleClickNotifier:V,attachWheelEventHandler:$}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/fx"),m=e("../../components/dragelement"),x=e("../../lib/setcursor"),t=e("./dragbox").makeDragBox,i=e("./constants").DRAGGERSIZE;B.initInteractions=function(r){var n=r._fullLayout;if(r._context.staticPlot){u.select(r).selectAll(".drag").remove();return}if(!(!n._has("cartesian")&&!n._has("splom"))){var f=Object.keys(n._plots||{}).sort(function(o,c){if((n._plots[o].mainplot&&!0)===(n._plots[c].mainplot&&!0)){var v=o.split("y"),d=c.split("y");return v[0]===d[0]?Number(v[1]||1)-Number(d[1]||1):Number(v[0]||1)-Number(d[0]||1)}return n._plots[o].mainplot?1:-1});f.forEach(function(o){var c=n._plots[o],v=c.xaxis,d=c.yaxis;if(!c.mainplot){var p=t(r,c,v._offset,d._offset,v._length,d._length,"ns","ew");p.onmousemove=function(A){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===o&&r._fullLayout._plots[o]&&s.hover(r,A,o)},s.hover(r,A,o),r._fullLayout._lasthover=p,r._fullLayout._hoversubplot=o},p.onmouseout=function(A){r._dragging||(r._fullLayout._hoversubplot=null,m.unhover(r,A))},r._context.showAxisDragHandles&&(t(r,c,v._offset-i,d._offset-i,i,i,"n","w"),t(r,c,v._offset+v._length,d._offset-i,i,i,"n","e"),t(r,c,v._offset-i,d._offset+d._length,i,i,"s","w"),t(r,c,v._offset+v._length,d._offset+d._length,i,i,"s","e"))}if(r._context.showAxisDragHandles){if(o===v._mainSubplot){var y=v._mainLinePosition;v.side==="top"&&(y-=i),t(r,c,v._offset+v._length*.1,y,v._length*.8,i,"","ew"),t(r,c,v._offset,y,v._length*.1,i,"","w"),t(r,c,v._offset+v._length*.9,y,v._length*.1,i,"","e")}if(o===d._mainSubplot){var g=d._mainLinePosition;d.side!=="right"&&(g-=i),t(r,c,g,d._offset+d._length*.1,i,d._length*.8,"ns",""),t(r,c,g,d._offset+d._length*.9,i,d._length*.1,"s",""),t(r,c,g,d._offset,i,d._length*.1,"n","")}}});var l=n._hoverlayer.node();l.onmousemove=function(o){o.target=r._fullLayout._lasthover,s.hover(r,o,n._hoversubplot)},l.onclick=function(o){o.target=r._fullLayout._lasthover,s.click(r,o)},l.onmousedown=function(o){r._fullLayout._lasthover.onmousedown(o)},B.updateFx(r)}},B.updateFx=function(a){var r=a._fullLayout,n=r.dragmode==="pan"?"move":"crosshair";x(r._draggers,n)}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(e,I,B){function u(m){var x=m._fullLayout._zoomlayer;x&&x.selectAll(".outline-controllers").remove()}function s(m){var x=m._fullLayout._zoomlayer;x&&x.selectAll(".select-outline").remove(),m._fullLayout._drawing=!1}I.exports={clearOutlineControllers:u,clearSelect:s}},{}],566:[function(e,I,B){var u=e("../../lib").strTranslate;function s(i,a){switch(i.type){case"log":return i.p2d(a);case"date":return i.p2r(a,0,i.calendar);default:return i.p2r(a)}}function m(i,a){switch(i.type){case"log":return i.d2p(a);case"date":return i.r2p(a,0,i.calendar);default:return i.r2p(a)}}function x(i){var a=i._id.charAt(0)==="y"?1:0;return function(r){return s(i,r[a])}}function t(i){return u(i.xaxis._offset,i.yaxis._offset)}I.exports={p2r:s,r2p:m,axValue:x,getTransform:t}},{"../../lib":503}],567:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("./axis_ids");I.exports=function(t){return function(a,r){var n=a[t];if(!!Array.isArray(n))for(var f=u.subplotsRegistry.cartesian,l=f.idRegex,o=r._subplots,c=o.xaxis,v=o.yaxis,d=o.cartesian,p=r._has("cartesian")||r._has("gl2d"),y=0;y<n.length;y++){var g=n[y];if(!!s.isPlainObject(g)){var A=m.cleanId(g.xref,"x",!1),b=m.cleanId(g.yref,"y",!1),M=l.x.test(A),w=l.y.test(b);if(M||w){p||s.pushUnique(r._basePlotModules,f);var T=!1;M&&c.indexOf(A)===-1&&(c.push(A),T=!0),w&&v.indexOf(b)===-1&&(v.push(b),T=!0),T&&M&&w&&d.push(A+b)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../lib"),x=e("../plots"),t=e("../../components/drawing"),i=e("../get_data").getModuleCalcData,a=e("./axis_ids"),r=e("./constants"),n=e("../../constants/xmlns_namespaces"),f=m.ensureSingle;function l(y,g,A){return m.ensureSingle(y,g,A,function(b){b.datum(A)})}B.name="cartesian",B.attr=["xaxis","yaxis"],B.idRoot=["x","y"],B.idRegex=r.idRegex,B.attrRegex=r.attrRegex,B.attributes=e("./attributes"),B.layoutAttributes=e("./layout_attributes"),B.supplyLayoutDefaults=e("./layout_defaults"),B.transitionAxes=e("./transition_axes"),B.finalizeSubplots=function(y,g){var A=g._subplots,b=A.xaxis,M=A.yaxis,w=A.cartesian,T=w.concat(A.gl2d||[]),_={},h={},L,S,k;for(L=0;L<T.length;L++){var P=T[L].split("y");_[P[0]]=1,h["y"+P[1]]=1}for(L=0;L<b.length;L++)S=b[L],_[S]||(k=(y[a.id2name(S)]||{}).anchor,r.idRegex.y.test(k)||(k="y"),w.push(S+k),T.push(S+k),h[k]||(h[k]=1,m.pushUnique(M,k)));for(L=0;L<M.length;L++)k=M[L],h[k]||(S=(y[a.id2name(k)]||{}).anchor,r.idRegex.x.test(S)||(S="x"),w.push(S+k),T.push(S+k),_[S]||(_[S]=1,m.pushUnique(b,S)));if(!T.length){S="",k="";for(var O in y)if(r.attrRegex.test(O)){var F=O.charAt(0);F==="x"?(!S||+O.substr(5)<+S.substr(5))&&(S=O):(!k||+O.substr(5)<+k.substr(5))&&(k=O)}S=S?a.name2id(S):"x",k=k?a.name2id(k):"y",b.push(S),M.push(k),w.push(S+k)}},B.plot=function(y,g,A,b){var M=y._fullLayout,w=M._subplots.cartesian,T=y.calcdata,_;if(!Array.isArray(g))for(g=[],_=0;_<T.length;_++)g.push(_);for(_=0;_<w.length;_++){for(var h=w[_],L=M._plots[h],S=[],k,P=0;P<T.length;P++){var O=T[P],F=O[0].trace;F.xaxis+F.yaxis===h&&((g.indexOf(F.index)!==-1||F.carpet)&&(k&&k[0].trace.xaxis+k[0].trace.yaxis===h&&["tonextx","tonexty","tonext"].indexOf(F.fill)!==-1&&S.indexOf(k)===-1&&S.push(k),S.push(O)),k=O)}o(y,L,S,A,b)}};function o(y,g,A,b,M){for(var w=r.traceLayerClasses,T=y._fullLayout,_=T._modules,h,L,S,k=[],P=[],O=0;O<_.length;O++){h=_[O];var F=h.name,D=s.modules[F].categories;if(D.svg){var R=h.layerName||F+"layer",U=h.plot;L=i(A,U),S=L[0],A=L[1],S.length&&k.push({i:w.indexOf(R),className:R,plotMethod:U,cdModule:S}),D.zoomScale&&P.push("."+R)}}k.sort(function(j,ee){return j.i-ee.i});var N=g.plot.selectAll("g.mlayer").data(k,function(j){return j.className});if(N.enter().append("g").attr("class",function(j){return j.className}).classed("mlayer",!0).classed("rangeplot",g.isRangePlot),N.exit().remove(),N.order(),N.each(function(j){var ee=u.select(this),q=j.className;j.plotMethod(y,g,j.cdModule,ee,b,M),r.clipOnAxisFalseQuery.indexOf("."+q)===-1&&t.setClipUrl(ee,g.layerClipId,y)}),T._has("scattergl")&&(h=s.getModule("scattergl"),S=i(A,h)[0],h.plot(y,g,S)),!y._context.staticPlot&&(g._hasClipOnAxisFalse&&(g.clipOnAxisFalseTraces=g.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var X=g.plot.selectAll(P.join(",")).selectAll(".trace");g.zoomScalePts=X.selectAll("path.point"),g.zoomScaleTxt=X.selectAll(".textpoint")}}B.clean=function(y,g,A,b){var M=b._plots||{},w=g._plots||{},T=b._subplots||{},_,h,L;if(b._hasOnlyLargeSploms&&!g._hasOnlyLargeSploms)for(L in M)_=M[L],_.plotgroup&&_.plotgroup.remove();var S=b._has&&b._has("gl"),k=g._has&&g._has("gl");if(S&&!k)for(L in M)_=M[L],_._scene&&_._scene.destroy();if(T.xaxis&&T.yaxis){var P=a.listIds({_fullLayout:b});for(h=0;h<P.length;h++){var O=P[h];g[a.id2name(O)]||b._infolayer.selectAll(".g-"+O+"title").remove()}}var F=b._has&&b._has("cartesian"),D=g._has&&g._has("cartesian");if(F&&!D)d(b._cartesianlayer.selectAll(".subplot"),b),b._defs.selectAll(".axesclip").remove(),delete b._axisConstraintGroups,delete b._axisMatchGroups;else if(T.cartesian)for(h=0;h<T.cartesian.length;h++){var R=T.cartesian[h];if(!w[R]){var U="."+R+",."+R+"-x,."+R+"-y";b._cartesianlayer.selectAll(U).remove(),p(R,b)}}},B.drawFramework=function(y){var g=y._fullLayout,A=c(y),b=g._cartesianlayer.selectAll(".subplot").data(A,String);b.enter().append("g").attr("class",function(M){return"subplot "+M[0]}),b.order(),b.exit().call(d,g),b.each(function(M){var w=M[0],T=g._plots[w];T.plotgroup=u.select(this),v(y,T),T.draglayer=f(g._draggers,"g",w)})},B.rangePlot=function(y,g,A){v(y,g),o(y,g,A),x.style(y)};function c(y){var g=y._fullLayout,A=g._subplots.cartesian,b=A.length,M,w,T,_,h,L,S=[],k=[];for(M=0;M<b;M++){T=A[M],_=g._plots[T],h=_.xaxis,L=_.yaxis;var P=h._mainAxis,O=L._mainAxis,F=P._id+O._id,D=g._plots[F];_.overlays=[],F!==T&&D?(_.mainplot=F,_.mainplotinfo=D,k.push(T)):(_.mainplot=void 0,_.mainplotinfo=void 0,S.push(T))}for(M=0;M<k.length;M++)T=k[M],_=g._plots[T],_.mainplotinfo.overlays.push(_);var R=S.concat(k),U=new Array(b);for(M=0;M<b;M++){T=R[M],_=g._plots[T],h=_.xaxis,L=_.yaxis;var N=[T,h.layer,L.layer,h.overlaying||"",L.overlaying||""];for(w=0;w<_.overlays.length;w++)N.push(_.overlays[w].id);U[M]=N}return U}function v(y,g){var A=g.plotgroup,b=g.id,M=r.layerValue2layerClass[g.xaxis.layer],w=r.layerValue2layerClass[g.yaxis.layer],T=y._fullLayout._hasOnlyLargeSploms;if(g.mainplot){var h=g.mainplotinfo,L=h.plotgroup,S=b+"-x",k=b+"-y";g.gridlayer=h.gridlayer,g.zerolinelayer=h.zerolinelayer,f(h.overlinesBelow,"path",S),f(h.overlinesBelow,"path",k),f(h.overaxesBelow,"g",S),f(h.overaxesBelow,"g",k),g.plot=f(h.overplot,"g",b),f(h.overlinesAbove,"path",S),f(h.overlinesAbove,"path",k),f(h.overaxesAbove,"g",S),f(h.overaxesAbove,"g",k),g.xlines=L.select(".overlines-"+M).select("."+S),g.ylines=L.select(".overlines-"+w).select("."+k),g.xaxislayer=L.select(".overaxes-"+M).select("."+S),g.yaxislayer=L.select(".overaxes-"+w).select("."+k)}else if(T)g.xlines=f(A,"path","xlines-above"),g.ylines=f(A,"path","ylines-above"),g.xaxislayer=f(A,"g","xaxislayer-above"),g.yaxislayer=f(A,"g","yaxislayer-above");else{var _=f(A,"g","layer-subplot");g.shapelayer=f(_,"g","shapelayer"),g.imagelayer=f(_,"g","imagelayer"),g.gridlayer=f(A,"g","gridlayer"),g.zerolinelayer=f(A,"g","zerolinelayer"),f(A,"path","xlines-below"),f(A,"path","ylines-below"),g.overlinesBelow=f(A,"g","overlines-below"),f(A,"g","xaxislayer-below"),f(A,"g","yaxislayer-below"),g.overaxesBelow=f(A,"g","overaxes-below"),g.plot=f(A,"g","plot"),g.overplot=f(A,"g","overplot"),g.xlines=f(A,"path","xlines-above"),g.ylines=f(A,"path","ylines-above"),g.overlinesAbove=f(A,"g","overlines-above"),f(A,"g","xaxislayer-above"),f(A,"g","yaxislayer-above"),g.overaxesAbove=f(A,"g","overaxes-above"),g.xlines=A.select(".xlines-"+M),g.ylines=A.select(".ylines-"+w),g.xaxislayer=A.select(".xaxislayer-"+M),g.yaxislayer=A.select(".yaxislayer-"+w)}T||(l(g.gridlayer,"g",g.xaxis._id),l(g.gridlayer,"g",g.yaxis._id),g.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(a.idSort)),g.xlines.style("fill","none").classed("crisp",!0),g.ylines.style("fill","none").classed("crisp",!0)}function d(y,g){if(!!y){var A={};y.each(function(h){var L=h[0],S=u.select(this);S.remove(),p(L,g),A[L]=!0});for(var b in g._plots)for(var M=g._plots[b],w=M.overlays||[],T=0;T<w.length;T++){var _=w[T];A[_.id]&&_.plot.selectAll(".trace").remove()}}}function p(y,g){g._draggers.selectAll("g."+y).remove(),g._defs.select("#clip"+g._uid+y+"plot").remove()}B.toSVG=function(y){var g=y._fullLayout._glimages,A=u.select(y).selectAll(".svg-container"),b=A.filter(function(w,T){return T===A.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function M(){var w=this,T=w.toDataURL("image/png"),_=g.append("svg:image");_.attr({xmlns:n.svg,"xlink:href":T,preserveAspectRatio:"none",x:0,y:0,width:w.style.width,height:w.style.height})}b.each(M)},B.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(e,I,B){var u=e("../font_attributes"),s=e("../../components/color/attributes"),m=e("../../components/drawing/attributes").dash,x=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray,i=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,a=e("../../constants/numerical").ONEDAY,r=e("./constants"),n=r.HOUR_PATTERN,f=r.WEEKDAY_PATTERN;I.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:s.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:u({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:t("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:x({},m,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:u({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:i("tick label")},tickformatstops:t("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:i("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:s.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:s.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:u({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color"),m=e("../../components/fx/helpers").isUnifiedHover,x=e("../../components/fx/hovermode_defaults"),t=e("../../plot_api/plot_template"),i=e("../layout_attributes"),a=e("./layout_attributes"),r=e("./type_defaults"),n=e("./axis_defaults"),f=e("./constraints"),l=e("./position_defaults"),o=e("./axis_ids"),c=o.id2name,v=o.name2id,d=e("./constants").AX_ID_PATTERN,p=e("../../registry"),y=p.traceIs,g=p.getComponentMethod;function A(b,M,w){Array.isArray(b[M])?b[M].push(w):b[M]=[w]}I.exports=function(M,w,T){var _=w.autotypenumbers,h={},L={},S={},k={},P={},O={},F={},D={},R={},U={},N,X;for(N=0;N<T.length;N++){var j=T[N];if(!(!y(j,"cartesian")&&!y(j,"gl2d"))){var ee;if(j.xaxis)ee=c(j.xaxis),A(h,ee,j);else if(j.xaxes)for(X=0;X<j.xaxes.length;X++)A(h,c(j.xaxes[X]),j);var q;if(j.yaxis)q=c(j.yaxis),A(h,q,j);else if(j.yaxes)for(X=0;X<j.yaxes.length;X++)A(h,c(j.yaxes[X]),j);if(j.type==="funnel"?j.orientation==="h"?(ee&&(L[ee]=!0),q&&(F[q]=!0)):q&&(S[q]=!0):j.type==="image"?(q&&(D[q]=!0),ee&&(D[ee]=!0)):(q&&(P[q]=!0,O[q]=!0),(!y(j,"carpet")||j.type==="carpet"&&!j._cheater)&&ee&&(k[ee]=!0)),j.type==="carpet"&&j._cheater&&ee&&(L[ee]=!0),y(j,"2dMap")&&(R[ee]=!0,R[q]=!0),y(j,"oriented")){var G=j.orientation==="h"?q:ee;U[G]=!0}}}var J=w._subplots,le=J.xaxis,fe=J.yaxis,se=u.simpleMap(le,c),V=u.simpleMap(fe,c),Y=se.concat(V),ne=s.background;le.length&&fe.length&&(ne=u.coerce(M,w,i,"plot_bgcolor"));var te=s.combine(ne,w.paper_bgcolor),K,$,ae,ie,oe;function ue(){var et=h[K]||[];oe._traceIndices=et.map(function(Pe){return Pe._expandedIndex}),oe._annIndices=[],oe._shapeIndices=[],oe._imgIndices=[],oe._subplotsWith=[],oe._counterAxes=[],oe._name=oe._attr=K,oe._id=$}function xe(et,Pe){return u.coerce(ie,oe,a,et,Pe)}function he(et,Pe){return u.coerce2(ie,oe,a,et,Pe)}function me(et){return et==="x"?fe:le}function be(et,Pe){for(var Je=et==="x"?se:V,it=[],ht=0;ht<Je.length;ht++){var zt=Je[ht];zt!==Pe&&!(M[zt]||{}).overlaying&&it.push(v(zt))}return it}var Ce={x:me("x"),y:me("y")},Se=Ce.x.concat(Ce.y),Be={},Ye=[];function Xe(){var et=ie.matches;d.test(et)&&Se.indexOf(et)===-1&&(Be[et]=ie.type,Ye=Object.keys(Be))}var Te=x(M,w),Ie=m(Te);for(N=0;N<Y.length;N++){K=Y[N],$=v(K),ae=K.charAt(0),u.isPlainObject(M[K])||(M[K]={}),ie=M[K],oe=t.newContainer(w,K,ae+"axis"),ue();var Ze=ae==="x"&&!k[K]&&L[K]||ae==="y"&&!P[K]&&S[K],rt=ae==="y"&&(!O[K]&&F[K]||D[K]),Ge={letter:ae,font:w.font,outerTicks:R[K],showGrid:!U[K],data:h[K]||[],bgColor:te,calendar:w.calendar,automargin:!0,visibleDflt:Ze,reverseDflt:rt,autotypenumbersDflt:_,splomStash:((w._splomAxes||{})[ae]||{})[$]};xe("uirevision",w.uirevision),r(ie,oe,xe,Ge),n(ie,oe,xe,Ge,w);var ze=Ie&&ae===Te.charAt(0),We=he("spikecolor",Ie?oe.color:void 0),mt=he("spikethickness",Ie?1.5:void 0),Ft=he("spikedash",Ie?"dot":void 0),Xt=he("spikemode",Ie?"across":void 0),Pt=he("spikesnap"),Ut=xe("showspikes",!!ze||!!We||!!mt||!!Ft||!!Xt||!!Pt);Ut||(delete oe.spikecolor,delete oe.spikethickness,delete oe.spikedash,delete oe.spikemode,delete oe.spikesnap),l(ie,oe,xe,{letter:ae,counterAxes:Ce[ae],overlayableAxes:be(ae,K),grid:w.grid}),xe("title.standoff"),Xe(),oe._input=ie}for(N=0;N<Ye.length;){$=Ye[N++],K=c($),ae=K.charAt(0),u.isPlainObject(M[K])||(M[K]={}),ie=M[K],oe=t.newContainer(w,K,ae+"axis"),ue();var Gt={letter:ae,font:w.font,outerTicks:R[K],showGrid:!U[K],data:[],bgColor:te,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:_,splomStash:((w._splomAxes||{})[ae]||{})[$]};xe("uirevision",w.uirevision),oe.type=Be[$]||"linear",n(ie,oe,xe,Gt,w),l(ie,oe,xe,{letter:ae,counterAxes:Ce[ae],overlayableAxes:be(ae,K),grid:w.grid}),xe("fixedrange"),Xe(),oe._input=ie}var It=g("rangeslider","handleDefaults"),Ct=g("rangeselector","handleDefaults");for(N=0;N<se.length;N++)K=se[N],ie=M[K],oe=w[K],It(M,w,K),oe.type==="date"&&Ct(ie,oe,w,V,oe.calendar),xe("fixedrange");for(N=0;N<V.length;N++){K=V[N],ie=M[K],oe=w[K];var lt=w[c(oe.anchor)],dt=g("rangeslider","isVisible")(lt);xe("fixedrange",dt)}f.handleDefaults(M,w,{axIds:Se.concat(Ye).sort(o.idSort),axHasImage:D})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(e,I,B){var u=e("tinycolor2").mix,s=e("../../components/color/attributes").lightFraction,m=e("../../lib");I.exports=function(t,i,a,r){r=r||{};var n=r.dfltColor;function f(M,w){return m.coerce2(t,i,r.attributes,M,w)}var l=f("linecolor",n),o=f("linewidth"),c=a("showline",r.showLine||!!l||!!o);c||(delete i.linecolor,delete i.linewidth);var v=u(n,r.bgColor,r.blend||s).toRgbString(),d=f("gridcolor",v),p=f("gridwidth"),y=a("showgrid",r.showGrid||!!d||!!p);if(y||(delete i.gridcolor,delete i.gridwidth),!r.noZeroLine){var g=f("zerolinecolor",n),A=f("zerolinewidth"),b=a("zeroline",r.showGrid||!!g||!!A);b||(delete i.zerolinecolor,delete i.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib");I.exports=function(x,t,i,a){var r=a.counterAxes||[],n=a.overlayableAxes||[],f=a.letter,l=a.grid,o,c,v,d;l&&(c=l._domains[f][l._axisMap[t._id]],o=l._anchors[t._id],c&&(v=l[f+"side"].split(" ")[0],d=l.domain[f][v==="right"||v==="top"?1:0])),c=c||[0,1],o=o||(u(x.position)?"free":r[0]||"free"),v=v||(f==="x"?"bottom":"left"),d=d||0;var p=s.coerce(x,t,{anchor:{valType:"enumerated",values:["free"].concat(r),dflt:o}},"anchor");p==="free"&&i("position",d),s.coerce(x,t,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:v}},"side");var y=!1;if(n.length&&(y=s.coerce(x,t,{overlaying:{valType:"enumerated",values:[!1].concat(n),dflt:!1}},"overlaying")),!y){var g=i("domain",c);g[0]>g[1]-1/4096&&(t.domain=c),s.noneOrAll(x.domain,t.domain,c)}return i("layer"),t}},{"../../lib":503,"fast-isnumeric":190}],573:[function(e,I,B){var u=e("./show_dflt");I.exports=function(m,x,t,i,a){a||(a={});var r=a.tickSuffixDflt,n=u(m),f=t("tickprefix");f&&t("showtickprefix",n);var l=t("ticksuffix",r);l&&t("showticksuffix",n)}},{"./show_dflt":577}],574:[function(e,I,B){var u=e("../../constants/alignment").FROM_BL;I.exports=function(m,x,t){t===void 0&&(t=u[m.constraintoward||"center"]);var i=[m.r2l(m.range[0]),m.r2l(m.range[1])],a=i[0]+(i[1]-i[0])*t;m.range=m._input.range=[m.l2r(a+(i[0]-a)*x),m.l2r(a+(i[1]-a)*x)],m.setScale()}},{"../../constants/alignment":471}],575:[function(e,I,B){var u=e("polybooljs"),s=e("../../registry"),m=e("../../components/drawing").dashStyle,x=e("../../components/color"),t=e("../../components/fx"),i=e("../../components/fx/helpers").makeEventData,a=e("../../components/dragelement/helpers"),r=a.freeMode,n=a.rectMode,f=a.drawMode,l=a.openMode,o=a.selectMode,c=e("../../components/shapes/draw_newshape/display_outlines"),v=e("../../components/shapes/draw_newshape/helpers").handleEllipse,d=e("../../components/shapes/draw_newshape/newshapes"),p=e("../../lib"),y=e("../../lib/polygon"),g=e("../../lib/throttle"),A=e("./axis_ids").getFromId,b=e("../../lib/clear_gl_canvases"),M=e("../../plot_api/subroutines").redrawReglTraces,w=e("./constants"),T=w.MINSELECT,_=y.filter,h=y.tester,L=e("./handle_outline").clearSelect,S=e("./helpers"),k=S.p2r,P=S.axValue,O=S.getTransform;function F(K,$,ae,ie,oe){var ue=r(oe),xe=n(oe),he=l(oe),me=f(oe),be=o(oe),Ce=oe==="drawline",Se=oe==="drawcircle",Be=Ce||Se,Ye=ie.gd,Xe=Ye._fullLayout,Te=Xe._zoomlayer,Ie=ie.element.getBoundingClientRect(),Ze=ie.plotinfo,rt=O(Ze),Ge=$-Ie.left,ze=ae-Ie.top;Xe._calcInverseTransform(Ye);var We=p.apply3DTransform(Xe._invTransform)(Ge,ze);Ge=We[0],ze=We[1];var mt=Xe._invScaleX,Ft=Xe._invScaleY,Xt=Ge,Pt=ze,Ut="M"+Ge+","+ze,Gt=ie.xaxes[0]._length,It=ie.yaxes[0]._length,Ct=ie.xaxes.concat(ie.yaxes),lt=K.altKey&&!(f(oe)&&he),dt,et,Pe,Je,it,ht,zt;j(K,Ye,ie),ue&&(dt=_([[Ge,ze]],w.BENDPX));var Lt=Te.selectAll("path.select-outline-"+Ze.id).data(me?[0]:[1,2]),Vt=Xe.newshape;Lt.enter().append("path").attr("class",function(fr){return"select-outline select-outline-"+fr+" select-outline-"+Ze.id}).style(me?{opacity:Vt.opacity/2,fill:he?void 0:Vt.fillcolor,stroke:Vt.line.color,"stroke-dasharray":m(Vt.line.dash,Vt.line.width),"stroke-width":Vt.line.width+"px"}:{}).attr("fill-rule",Vt.fillrule).classed("cursor-move",!!me).attr("transform",rt).attr("d",Ut+"Z");var $t=Te.append("path").attr("class","zoombox-corners").style({fill:x.background,stroke:x.defaultLine,"stroke-width":1}).attr("transform",rt).attr("d","M0,0Z"),Ht=Xe._uid+w.SELECTID,tr=[],qe=q(Ye,ie.xaxes,ie.yaxes,ie.subplot);function xt(fr,br){return fr-br}var Rt;Ze.fillRangeItems?Rt=Ze.fillRangeItems:xe?Rt=function(fr,br){var pr=fr.range={};for(it=0;it<Ct.length;it++){var Tr=Ct[it],Nr=Tr._id.charAt(0);pr[Tr._id]=[k(Tr,br[Nr+"min"]),k(Tr,br[Nr+"max"])].sort(xt)}}:Rt=function(fr,br,pr){var Tr=fr.lassoPoints={};for(it=0;it<Ct.length;it++){var Nr=Ct[it];Tr[Nr._id]=pr.filtered.map(P(Nr))}},ie.moveFn=function(fr,br){Xt=Math.max(0,Math.min(Gt,mt*fr+Ge)),Pt=Math.max(0,Math.min(It,Ft*br+ze));var pr=Math.abs(Xt-Ge),Tr=Math.abs(Pt-ze);if(xe){var Nr,Ir,lr;if(be){var Yr=Xe.selectdirection;switch(Yr==="any"?Tr<Math.min(pr*.6,T)?Nr="h":pr<Math.min(Tr*.6,T)?Nr="v":Nr="d":Nr=Yr,Nr){case"h":Ir=Se?It/2:0,lr=It;break;case"v":Ir=Se?Gt/2:0,lr=Gt;break}}if(me)switch(Xe.newshape.drawdirection){case"vertical":Nr="h",Ir=Se?It/2:0,lr=It;break;case"horizontal":Nr="v",Ir=Se?Gt/2:0,lr=Gt;break;case"ortho":pr<Tr?(Nr="h",Ir=ze,lr=Pt):(Nr="v",Ir=Ge,lr=Xt);break;default:Nr="d"}Nr==="h"?(Je=Be?v(Se,[Xt,Ir],[Xt,lr]):[[Ge,Ir],[Ge,lr],[Xt,lr],[Xt,Ir]],Je.xmin=Be?Xt:Math.min(Ge,Xt),Je.xmax=Be?Xt:Math.max(Ge,Xt),Je.ymin=Math.min(Ir,lr),Je.ymax=Math.max(Ir,lr),$t.attr("d","M"+Je.xmin+","+(ze-T)+"h-4v"+2*T+"h4ZM"+(Je.xmax-1)+","+(ze-T)+"h4v"+2*T+"h-4Z")):Nr==="v"?(Je=Be?v(Se,[Ir,Pt],[lr,Pt]):[[Ir,ze],[Ir,Pt],[lr,Pt],[lr,ze]],Je.xmin=Math.min(Ir,lr),Je.xmax=Math.max(Ir,lr),Je.ymin=Be?Pt:Math.min(ze,Pt),Je.ymax=Be?Pt:Math.max(ze,Pt),$t.attr("d","M"+(Ge-T)+","+Je.ymin+"v-4h"+2*T+"v4ZM"+(Ge-T)+","+(Je.ymax-1)+"v4h"+2*T+"v-4Z")):Nr==="d"&&(Je=Be?v(Se,[Ge,ze],[Xt,Pt]):[[Ge,ze],[Ge,Pt],[Xt,Pt],[Xt,ze]],Je.xmin=Math.min(Ge,Xt),Je.xmax=Math.max(Ge,Xt),Je.ymin=Math.min(ze,Pt),Je.ymax=Math.max(ze,Pt),$t.attr("d","M0,0Z"))}else ue&&(dt.addPt([Xt,Pt]),Je=dt.filtered);ie.selectionDefs&&ie.selectionDefs.length?(Pe=Y(ie.mergedPolygons,Je,lt),Je.subtract=lt,et=X(ie.selectionDefs.concat([Je]))):(Pe=[Je],et=h(Je)),c(te(Pe,he),Lt,ie),be&&g.throttle(Ht,w.SELECTDELAY,function(){tr=[];var nt,Ae;for(it=0;it<qe.length;it++)if(ht=qe[it],Ae=ht._module.selectPoints(ht,et),nt=ne(Ae,ht),tr.length)for(var Ee=0;Ee<nt.length;Ee++)tr.push(nt[Ee]);else tr=nt;zt={points:tr},V(Ye,qe,zt),Rt(zt,Je,dt),ie.gd.emit("plotly_selecting",zt)})},ie.clickFn=function(fr,br){if($t.remove(),Ye._fullLayout._activeShapeIndex>=0){Ye._fullLayout._deactivateShape(Ye);return}if(!me){var pr=Xe.clickmode;g.done(Ht).then(function(){if(g.clear(Ht),fr===2){for(Lt.remove(),it=0;it<qe.length;it++)ht=qe[it],ht._module.selectPoints(ht,!1);V(Ye,qe),ee(ie),Ye.emit("plotly_deselect",null)}else pr.indexOf("select")>-1&&D(br,Ye,ie.xaxes,ie.yaxes,ie.subplot,ie,Lt),pr==="event"&&Ye.emit("plotly_selected",void 0);t.click(Ye,br)}).catch(p.error)}},ie.doneFn=function(){$t.remove(),g.done(Ht).then(function(){g.clear(Ht),ie.gd.emit("plotly_selected",zt),Je&&ie.selectionDefs&&(Je.subtract=lt,ie.selectionDefs.push(Je),ie.mergedPolygons.length=0,[].push.apply(ie.mergedPolygons,Pe)),ie.doneFnCompleted&&ie.doneFnCompleted(tr)}).catch(p.error),me&&ee(ie)}}function D(K,$,ae,ie,oe,ue,xe){var he=$._hoverdata,me=$._fullLayout,be=me.clickmode,Ce=be.indexOf("event")>-1,Se=[],Be,Ye,Xe,Te,Ie,Ze,rt,Ge,ze,We;if(G(he)){j(K,$,ue),Be=q($,ae,ie,oe);var mt=J(he,Be),Ft=mt.pointNumbers.length>0;if(Ft?fe(Be,mt):se(Be)&&(rt=le(mt))){for(xe&&xe.remove(),We=0;We<Be.length;We++)Ye=Be[We],Ye._module.selectPoints(Ye,!1);V($,Be),ee(ue),Ce&&$.emit("plotly_deselect",null)}else{Ge=K.shiftKey&&(rt!==void 0?rt:le(mt)),Xe=R(mt.pointNumber,mt.searchInfo,Ge);var Xt=ue.selectionDefs.concat([Xe]);for(Te=X(Xt),We=0;We<Be.length;We++)if(Ie=Be[We]._module.selectPoints(Be[We],Te),Ze=ne(Ie,Be[We]),Se.length)for(var Pt=0;Pt<Ze.length;Pt++)Se.push(Ze[Pt]);else Se=Ze;if(ze={points:Se},V($,Be,ze),Xe&&ue&&ue.selectionDefs.push(Xe),xe){var Ut=ue.mergedPolygons,Gt=l(ue.dragmode);c(te(Ut,Gt),xe,ue)}Ce&&$.emit("plotly_selected",ze)}}}function R(K,$,ae){return{pointNumber:K,searchInfo:$,subtract:ae}}function U(K){return"pointNumber"in K&&"searchInfo"in K}function N(K){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function($,ae,ie,oe){var ue=K.searchInfo.cd[0].trace._expandedIndex,xe=oe.cd[0].trace._expandedIndex;return xe===ue&&ie===K.pointNumber},isRect:!1,degenerate:!1,subtract:K.subtract}}function X(K){for(var $=[],ae=U(K[0])?0:K[0][0][0],ie=ae,oe=U(K[0])?0:K[0][0][1],ue=oe,xe=0;xe<K.length;xe++)if(U(K[xe]))$.push(N(K[xe]));else{var he=y.tester(K[xe]);he.subtract=K[xe].subtract,$.push(he),ae=Math.min(ae,he.xmin),ie=Math.max(ie,he.xmax),oe=Math.min(oe,he.ymin),ue=Math.max(ue,he.ymax)}function me(be,Ce,Se,Be){for(var Ye=!1,Xe=0;Xe<$.length;Xe++)$[Xe].contains(be,Ce,Se,Be)&&(Ye=$[Xe].subtract===!1);return Ye}return{xmin:ae,xmax:ie,ymin:oe,ymax:ue,pts:[],contains:me,isRect:!1,degenerate:!1}}function j(K,$,ae){$._fullLayout._drawing=!1;var ie=$._fullLayout,oe=ae.plotinfo,ue=ae.dragmode,xe=ie._lastSelectedSubplot&&ie._lastSelectedSubplot===oe.id,he=(K.shiftKey||K.altKey)&&!(f(ue)&&l(ue));xe&&he&&oe.selection&&oe.selection.selectionDefs&&!ae.selectionDefs?(ae.selectionDefs=oe.selection.selectionDefs,ae.mergedPolygons=oe.selection.mergedPolygons):(!he||!oe.selection)&&ee(ae),xe||(L($),ie._lastSelectedSubplot=oe.id)}function ee(K){var $=K.dragmode,ae=K.plotinfo,ie=K.gd;if(ie._fullLayout._activeShapeIndex>=0&&ie._fullLayout._deactivateShape(ie),f($)){var oe=ie._fullLayout,ue=oe._zoomlayer,xe=ue.selectAll(".select-outline-"+ae.id);if(xe&&ie._fullLayout._drawing){var he=d(xe,K);he&&s.call("_guiRelayout",ie,{shapes:he}),ie._fullLayout._drawing=!1}}ae.selection={},ae.selection.selectionDefs=K.selectionDefs=[],ae.selection.mergedPolygons=K.mergedPolygons=[]}function q(K,$,ae,ie){var oe=[],ue=$.map(function(Ye){return Ye._id}),xe=ae.map(function(Ye){return Ye._id}),he,me,be;for(be=0;be<K.calcdata.length;be++)if(he=K.calcdata[be],me=he[0].trace,!(me.visible!==!0||!me._module||!me._module.selectPoints))if(ie&&(me.subplot===ie||me.geo===ie))oe.push(Be(me._module,he,$[0],ae[0]));else if(me.type==="splom"&&me._xaxes[ue[0]]&&me._yaxes[xe[0]]){var Ce=Be(me._module,he,$[0],ae[0]);Ce.scene=K._fullLayout._splomScenes[me.uid],oe.push(Ce)}else if(me.type==="sankey"){var Se=Be(me._module,he,$[0],ae[0]);oe.push(Se)}else{if(ue.indexOf(me.xaxis)===-1||xe.indexOf(me.yaxis)===-1)continue;oe.push(Be(me._module,he,A(K,me.xaxis),A(K,me.yaxis)))}return oe;function Be(Ye,Xe,Te,Ie){return{_module:Ye,cd:Xe,xaxis:Te,yaxis:Ie}}}function G(K){return K&&Array.isArray(K)&&K[0].hoverOnBox!==!0}function J(K,$){var ae=K[0],ie=-1,oe=[],ue,xe;for(xe=0;xe<$.length;xe++)if(ue=$[xe],ae.fullData._expandedIndex===ue.cd[0].trace._expandedIndex){if(ae.hoverOnBox===!0)break;ae.pointNumber!==void 0?ie=ae.pointNumber:ae.binNumber!==void 0&&(ie=ae.binNumber,oe=ae.pointNumbers);break}return{pointNumber:ie,pointNumbers:oe,searchInfo:ue}}function le(K){var $=K.searchInfo.cd[0].trace,ae=K.pointNumber,ie=K.pointNumbers,oe=ie.length>0,ue=oe?ie[0]:ae;return $.selectedpoints?$.selectedpoints.indexOf(ue)>-1:!1}function fe(K,$){var ae=[],ie,oe,ue,xe;for(xe=0;xe<K.length;xe++)ie=K[xe],ie.cd[0].trace.selectedpoints&&ie.cd[0].trace.selectedpoints.length>0&&ae.push(ie);if(ae.length===1&&(ue=ae[0]===$.searchInfo,ue&&(oe=$.searchInfo.cd[0].trace,oe.selectedpoints.length===$.pointNumbers.length))){for(xe=0;xe<$.pointNumbers.length;xe++)if(oe.selectedpoints.indexOf($.pointNumbers[xe])<0)return!1;return!0}return!1}function se(K){var $=0,ae,ie,oe;for(oe=0;oe<K.length;oe++)if(ae=K[oe],ie=ae.cd[0].trace,ie.selectedpoints&&(ie.selectedpoints.length>1||($+=ie.selectedpoints.length,$>1)))return!1;return $===1}function V(K,$,ae){var ie,oe,ue,xe;for(ie=0;ie<$.length;ie++){var he=$[ie].cd[0].trace._fullInput,me=K._fullLayout._tracePreGUI[he.uid]||{};me.selectedpoints===void 0&&(me.selectedpoints=he._input.selectedpoints||null)}if(ae){var be=ae.points||[];for(ie=0;ie<$.length;ie++)xe=$[ie].cd[0].trace,xe._input.selectedpoints=xe._fullInput.selectedpoints=[],xe._fullInput!==xe&&(xe.selectedpoints=[]);for(ie=0;ie<be.length;ie++){var Ce=be[ie],Se=Ce.data,Be=Ce.fullData;Ce.pointIndices?([].push.apply(Se.selectedpoints,Ce.pointIndices),xe._fullInput!==xe&&[].push.apply(Be.selectedpoints,Ce.pointIndices)):(Se.selectedpoints.push(Ce.pointIndex),xe._fullInput!==xe&&Be.selectedpoints.push(Ce.pointIndex))}}else for(ie=0;ie<$.length;ie++)xe=$[ie].cd[0].trace,delete xe.selectedpoints,delete xe._input.selectedpoints,xe._fullInput!==xe&&delete xe._fullInput.selectedpoints;var Ye=!1;for(ie=0;ie<$.length;ie++){oe=$[ie],ue=oe.cd,xe=ue[0].trace,s.traceIs(xe,"regl")&&(Ye=!0);var Xe=oe._module,Te=Xe.styleOnSelect||Xe.style;Te&&(Te(K,ue,ue[0].node3),ue[0].nodeRangePlot3&&Te(K,ue,ue[0].nodeRangePlot3))}Ye&&(b(K),M(K))}function Y(K,$,ae){var ie;return ae?(ie=u.difference({regions:K,inverted:!1},{regions:[$],inverted:!1}),ie.regions):(ie=u.union({regions:K,inverted:!1},{regions:[$],inverted:!1}),ie.regions)}function ne(K,$){if(Array.isArray(K))for(var ae=$.cd,ie=$.cd[0].trace,oe=0;oe<K.length;oe++)K[oe]=i(K[oe],ie,ae);return K}function te(K,$){for(var ae=[],ie=0;ie<K.length;ie++){ae[ie]=[];for(var oe=0;oe<K[ie].length;oe++){ae[ie][oe]=[],ae[ie][oe][0]=oe?"L":"M";for(var ue=0;ue<K[ie][oe].length;ue++)ae[ie][oe].push(K[ie][oe][ue])}$||ae[ie].push(["Z",ae[ie][0][1],ae[ie][0][2]])}return ae}I.exports={prepSelect:F,clearSelect:L,clearSelectionsCache:ee,selectOnClick:D}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(e,I,B){var u=e("@plotly/d3"),s=e("d3-time-format").utcFormat,m=e("../../lib"),x=m.numberFormat,t=e("fast-isnumeric"),i=m.cleanNumber,a=m.ms2DateTime,r=m.dateTime2ms,n=m.ensureNumber,f=m.isArrayOrTypedArray,l=e("../../constants/numerical"),o=l.FP_SAFE,c=l.BADNUM,v=l.LOG_CLIP,d=l.ONEWEEK,p=l.ONEDAY,y=l.ONEHOUR,g=l.ONEMIN,A=l.ONESEC,b=e("./axis_ids"),M=e("./constants"),w=M.HOUR_PATTERN,T=M.WEEKDAY_PATTERN;function _(L){return Math.pow(10,L)}function h(L){return L!=null}I.exports=function(S,k){k=k||{};var P=S._id||"x",O=P.charAt(0);function F(Y,ne){if(Y>0)return Math.log(Y)/Math.LN10;if(Y<=0&&ne&&S.range&&S.range.length===2){var te=S.range[0],K=S.range[1];return .5*(te+K-2*v*Math.abs(te-K))}else return c}function D(Y,ne,te,K){if((K||{}).msUTC&&t(Y))return+Y;var $=r(Y,te||S.calendar);if($===c)if(t(Y)){Y=+Y;var ae=Math.floor(m.mod(Y+.05,1)*10),ie=Math.round(Y-ae/10);$=r(new Date(ie))+ae/10}else return c;return $}function R(Y,ne,te){return a(Y,ne,te||S.calendar)}function U(Y){return S._categories[Math.round(Y)]}function N(Y){if(h(Y)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[Y]!==void 0)return S._categoriesMap[Y];S._categories.push(typeof Y=="number"?String(Y):Y);var ne=S._categories.length-1;return S._categoriesMap[Y]=ne,ne}return c}function X(Y,ne){for(var te=new Array(ne),K=0;K<ne;K++){var $=(Y[0]||[])[K],ae=(Y[1]||[])[K];te[K]=j([$,ae])}return te}function j(Y){if(S._categoriesMap)return S._categoriesMap[Y]}function ee(Y){var ne=j(Y);if(ne!==void 0)return ne;if(t(Y))return+Y}function q(Y){return t(Y)?+Y:j(Y)}function G(Y,ne,te){return u.round(te+ne*Y,2)}function J(Y,ne,te){return(Y-te)/ne}var le=function(ne){return t(ne)?G(ne,S._m,S._b):c},fe=function(Y){return J(Y,S._m,S._b)};if(S.rangebreaks){var se=O==="y";le=function(Y){if(!t(Y))return c;var ne=S._rangebreaks.length;if(!ne)return G(Y,S._m,S._b);var te=se;S.range[0]>S.range[1]&&(te=!te);for(var K=te?-1:1,$=K*Y,ae=0,ie=0;ie<ne;ie++){var oe=K*S._rangebreaks[ie].min,ue=K*S._rangebreaks[ie].max;if($<oe)break;if($>ue)ae=ie+1;else{ae=$<(oe+ue)/2?ie:ie+1;break}}var xe=S._B[ae]||0;return isFinite(xe)?G(Y,S._m2,xe):0},fe=function(Y){var ne=S._rangebreaks.length;if(!ne)return J(Y,S._m,S._b);for(var te=0,K=0;K<ne&&!(Y<S._rangebreaks[K].pmin);K++)Y>S._rangebreaks[K].pmax&&(te=K+1);return J(Y,S._m2,S._B[te])}}S.c2l=S.type==="log"?F:n,S.l2c=S.type==="log"?_:n,S.l2p=le,S.p2l=fe,S.c2p=S.type==="log"?function(Y,ne){return le(F(Y,ne))}:le,S.p2c=S.type==="log"?function(Y){return _(fe(Y))}:fe,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=i,S.c2d=S.c2r=S.l2d=S.l2r=n,S.d2p=S.r2p=function(Y){return S.l2p(i(Y))},S.p2d=S.p2r=fe,S.cleanPos=n):S.type==="log"?(S.d2r=S.d2l=function(Y,ne){return F(i(Y),ne)},S.r2d=S.r2c=function(Y){return _(i(Y))},S.d2c=S.r2l=i,S.c2d=S.l2r=n,S.c2r=F,S.l2d=_,S.d2p=function(Y,ne){return S.l2p(S.d2r(Y,ne))},S.p2d=function(Y){return _(fe(Y))},S.r2p=function(Y){return S.l2p(i(Y))},S.p2r=fe,S.cleanPos=n):S.type==="date"?(S.d2r=S.r2d=m.identity,S.d2c=S.r2c=S.d2l=S.r2l=D,S.c2d=S.c2r=S.l2d=S.l2r=R,S.d2p=S.r2p=function(Y,ne,te){return S.l2p(D(Y,0,te))},S.p2d=S.p2r=function(Y,ne,te){return R(fe(Y),ne,te)},S.cleanPos=function(Y){return m.cleanDate(Y,c,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=N,S.r2d=S.c2d=S.l2d=U,S.d2r=S.d2l_noadd=ee,S.r2c=function(Y){var ne=q(Y);return ne!==void 0?ne:S.fraction2r(.5)},S.l2r=S.c2r=n,S.r2l=q,S.d2p=function(Y){return S.l2p(S.r2c(Y))},S.p2d=function(Y){return U(fe(Y))},S.r2p=S.d2p,S.p2r=fe,S.cleanPos=function(Y){return typeof Y=="string"&&Y!==""?Y:n(Y)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=U,S.d2r=S.d2l_noadd=ee,S.r2c=function(Y){var ne=ee(Y);return ne!==void 0?ne:S.fraction2r(.5)},S.r2c_just_indices=j,S.l2r=S.c2r=n,S.r2l=ee,S.d2p=function(Y){return S.l2p(S.r2c(Y))},S.p2d=function(Y){return U(fe(Y))},S.r2p=S.d2p,S.p2r=fe,S.cleanPos=function(Y){return Array.isArray(Y)||typeof Y=="string"&&Y!==""?Y:n(Y)},S.setupMultiCategory=function(Y){var ne=S._traceIndices,te,K,$=S._matchGroup;if($&&S._categories.length===0){for(var ae in $)if(ae!==P){var ie=k[b.id2name(ae)];ne=ne.concat(ie._traceIndices)}}var oe=[[0,{}],[0,{}]],ue=[];for(te=0;te<ne.length;te++){var xe=Y[ne[te]];if(O in xe){var he=xe[O],me=xe._length||m.minRowLength(he);if(f(he[0])&&f(he[1]))for(K=0;K<me;K++){var be=he[0][K],Ce=he[1][K];h(be)&&h(Ce)&&(ue.push([be,Ce]),be in oe[0][1]||(oe[0][1][be]=oe[0][0]++),Ce in oe[1][1]||(oe[1][1][Ce]=oe[1][0]++))}}}for(ue.sort(function(Se,Be){var Ye=oe[0][1],Xe=Ye[Se[0]]-Ye[Be[0]];if(Xe)return Xe;var Te=oe[1][1];return Te[Se[1]]-Te[Be[1]]}),te=0;te<ue.length;te++)N(ue[te])}),S.fraction2r=function(Y){var ne=S.r2l(S.range[0]),te=S.r2l(S.range[1]);return S.l2r(ne+Y*(te-ne))},S.r2fraction=function(Y){var ne=S.r2l(S.range[0]),te=S.r2l(S.range[1]);return(S.r2l(Y)-ne)/(te-ne)},S.cleanRange=function(Y,ne){ne||(ne={}),Y||(Y="range");var te=m.nestedProperty(S,Y).get(),K,$;if(S.type==="date"?$=m.dfltRange(S.calendar):O==="y"?$=M.DFLTRANGEY:S._name==="realaxis"?$=[0,1]:$=ne.dfltRange||M.DFLTRANGEX,$=$.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&($[0]=0),!te||te.length!==2){m.nestedProperty(S,Y).set($);return}for(S.type==="date"&&!S.autorange&&(te[0]=m.cleanDate(te[0],c,S.calendar),te[1]=m.cleanDate(te[1],c,S.calendar)),K=0;K<2;K++)if(S.type==="date"){if(!m.isDateTime(te[K],S.calendar)){S[Y]=$;break}if(S.r2l(te[0])===S.r2l(te[1])){var ae=m.constrain(S.r2l(te[0]),m.MIN_MS+1e3,m.MAX_MS-1e3);te[0]=S.l2r(ae-1e3),te[1]=S.l2r(ae+1e3);break}}else{if(!t(te[K]))if(t(te[1-K]))te[K]=te[1-K]*(K?10:.1);else{S[Y]=$;break}if(te[K]<-o?te[K]=-o:te[K]>o&&(te[K]=o),te[0]===te[1]){var ie=Math.max(1,Math.abs(te[0]*1e-6));te[0]-=ie,te[1]+=ie}}},S.setScale=function(Y){var ne=k._size;if(S.overlaying){var te=b.getFromId({_fullLayout:k},S.overlaying);S.domain=te.domain}var K=Y&&S._r?"_r":"range",$=S.calendar;S.cleanRange(K);var ae=S.r2l(S[K][0],$),ie=S.r2l(S[K][1],$),oe=O==="y";if(oe?(S._offset=ne.t+(1-S.domain[1])*ne.h,S._length=ne.h*(S.domain[1]-S.domain[0]),S._m=S._length/(ae-ie),S._b=-S._m*ie):(S._offset=ne.l+S.domain[0]*ne.w,S._length=ne.w*(S.domain[1]-S.domain[0]),S._m=S._length/(ie-ae),S._b=-S._m*ae),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var ue,xe;if(S._rangebreaks=S.locateBreaks(Math.min(ae,ie),Math.max(ae,ie)),S._rangebreaks.length){for(ue=0;ue<S._rangebreaks.length;ue++)xe=S._rangebreaks[ue],S._lBreaks+=Math.abs(xe.max-xe.min);var he=oe;ae>ie&&(he=!he),he&&S._rangebreaks.reverse();var me=he?-1:1;for(S._m2=me*S._length/(Math.abs(ie-ae)-S._lBreaks),S._B.push(-S._m2*(oe?ie:ae)),ue=0;ue<S._rangebreaks.length;ue++)xe=S._rangebreaks[ue],S._B.push(S._B[S._B.length-1]-me*S._m2*(xe.max-xe.min));for(ue=0;ue<S._rangebreaks.length;ue++)xe=S._rangebreaks[ue],xe.pmin=le(xe.min),xe.pmax=le(xe.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(Y){var ne=S.rangebreaks||[],te,K,$,ae,ie;ne._cachedPatterns||(ne._cachedPatterns=ne.map(function(Ye){return Ye.enabled&&Ye.bounds?m.simpleMap(Ye.bounds,Ye.pattern?i:S.d2c):null})),ne._cachedValues||(ne._cachedValues=ne.map(function(Ye){return Ye.enabled&&Ye.values?m.simpleMap(Ye.values,S.d2c).sort(m.sorterAsc):null}));for(var oe=0;oe<ne.length;oe++){var ue=ne[oe];if(ue.enabled){if(ue.bounds){var xe=ue.pattern;switch(te=ne._cachedPatterns[oe],K=te[0],$=te[1],xe){case T:ie=new Date(Y),ae=ie.getUTCDay(),K>$&&($+=7,ae<K&&(ae+=7));break;case w:ie=new Date(Y);var he=ie.getUTCHours(),me=ie.getUTCMinutes(),be=ie.getUTCSeconds(),Ce=ie.getUTCMilliseconds();ae=he+(me/60+be/3600+Ce/36e5),K>$&&($+=24,ae<K&&(ae+=24));break;case"":ae=Y;break}if(ae>=K&&ae<$)return c}else for(var Se=ne._cachedValues[oe],Be=0;Be<Se.length;Be++)if(K=Se[Be],$=K+ue.dvalue,Y>=K&&Y<$)return c}}return Y},S.locateBreaks=function(Y,ne){var te,K,$,ae,ie=[];if(!S.rangebreaks)return ie;var oe=S.rangebreaks.slice().sort(function(Te,Ie){return Te.pattern===T&&Ie.pattern===w?-1:Ie.pattern===T&&Te.pattern===w?1:0}),ue=function(Te,Ie){if(Te=m.constrain(Te,Y,ne),Ie=m.constrain(Ie,Y,ne),Te!==Ie){for(var Ze=!0,rt=0;rt<ie.length;rt++){var Ge=ie[rt];Te<Ge.max&&Ie>=Ge.min&&(Te<Ge.min&&(Ge.min=Te),Ie>Ge.max&&(Ge.max=Ie),Ze=!1)}Ze&&ie.push({min:Te,max:Ie})}};for(te=0;te<oe.length;te++){var xe=oe[te];if(xe.enabled)if(xe.bounds){var he=Y,me=ne;xe.pattern&&(he=Math.floor(he)),K=m.simpleMap(xe.bounds,xe.pattern?i:S.r2l),$=K[0],ae=K[1];var be=new Date(he),Ce,Se;switch(xe.pattern){case T:Se=d,Ce=((ae<$?7:0)+(ae-$))*p,he+=$*p-(be.getUTCDay()*p+be.getUTCHours()*y+be.getUTCMinutes()*g+be.getUTCSeconds()*A+be.getUTCMilliseconds());break;case w:Se=p,Ce=((ae<$?24:0)+(ae-$))*y,he+=$*y-(be.getUTCHours()*y+be.getUTCMinutes()*g+be.getUTCSeconds()*A+be.getUTCMilliseconds());break;default:he=Math.min(K[0],K[1]),me=Math.max(K[0],K[1]),Se=me-he,Ce=Se}for(var Be=he;Be<me;Be+=Se)ue(Be,Be+Ce)}else for(var Ye=m.simpleMap(xe.values,S.d2c),Xe=0;Xe<Ye.length;Xe++)$=Ye[Xe],ae=$+xe.dvalue,ue($,ae)}return ie.sort(function(Te,Ie){return Te.min-Ie.min}),ie},S.makeCalcdata=function(Y,ne,te){var K,$,ae,ie,oe=S.type,ue=oe==="date"&&Y[ne+"calendar"];if(ne in Y){if(K=Y[ne],ie=Y._length||m.minRowLength(K),m.isTypedArray(K)&&(oe==="linear"||oe==="log")){if(ie===K.length)return K;if(K.subarray)return K.subarray(0,ie)}if(oe==="multicategory")return X(K,ie);for($=new Array(ie),ae=0;ae<ie;ae++)$[ae]=S.d2c(K[ae],0,ue,te)}else{var xe=ne+"0"in Y?S.d2c(Y[ne+"0"],0,ue):0,he=Y["d"+ne]?Number(Y["d"+ne]):1;for(K=Y[{x:"y",y:"x"}[ne]],ie=Y._length||K.length,$=new Array(ie),ae=0;ae<ie;ae++)$[ae]=xe+ae*he}if(S.rangebreaks)for(ae=0;ae<ie;ae++)$[ae]=S.maskBreaks($[ae]);return $},S.isValidRange=function(Y){return Array.isArray(Y)&&Y.length===2&&t(S.r2l(Y[0]))&&t(S.r2l(Y[1]))},S.isPtWithinRange=function(Y,ne){var te=S.c2l(Y[O],null,ne),K=S.r2l(S.range[0]),$=S.r2l(S.range[1]);return K<$?K<=te&&te<=$:$<=te&&te<=K},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var Y=S._matchGroup;if(Y){var ne=null,te=null;for(var K in Y){var $=k[b.id2name(K)];if($._categories){ne=$._categories,te=$._categoriesMap;break}}ne&&te?(S._categories=ne,S._categoriesMap=te):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var ae=0;ae<S._initialCategories.length;ae++)N(S._initialCategories[ae])},S.sortByInitialCategories=function(){var Y=[];if(S._emptyCategories(),S._initialCategories)for(var ne=0;ne<S._initialCategories.length;ne++)N(S._initialCategories[ne]);Y=Y.concat(S._traceIndices);var te=S._matchGroup;for(var K in te)if(P!==K){var $=k[b.id2name(K)];$._categories=S._categories,$._categoriesMap=S._categoriesMap,Y=Y.concat($._traceIndices)}return Y};var V=k._d3locale;S.type==="date"&&(S._dateFormat=V?V.timeFormat:s,S._extraFormat=k._extraFormat),S._separators=k.separators,S._numFormat=V?V.numberFormat:x,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(e,I,B){I.exports=function(s){var m=["showexponent","showtickprefix","showticksuffix"],x=m.filter(function(i){return s[i]!==void 0}),t=function(i){return s[i]===s[x[0]]};if(x.every(t)||x.length===1)return s[x[0]]}},{}],578:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color").contrast,m=e("./layout_attributes"),x=e("./show_dflt"),t=e("../array_container_defaults");I.exports=function(r,n,f,l,o){o||(o={});var c=x(r),v=f("showticklabels");if(v){var d=o.font||{},p=n.color,y=n.ticklabelposition||"",g=y.indexOf("inside")!==-1?s(o.bgColor):p&&p!==m.color.dflt?p:d.color;if(u.coerceFont(f,"tickfont",{family:d.family,size:d.size,color:g}),o.noAng||f("tickangle"),l!=="category"){var A=f("tickformat");t(r,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:i}),n.tickformatstops.length||delete n.tickformatstops,!o.noExp&&!A&&l!=="date"&&(f("showexponent",c),f("exponentformat"),f("minexponent"),f("separatethousands"))}}};function i(a,r){function n(l,o){return u.coerce(a,r,m.tickformatstops,l,o)}var f=n("enabled");f&&(n("dtickrange"),n("value"))}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(x,t,i,a){var r=u.coerce2(x,t,s,"ticklen"),n=u.coerce2(x,t,s,"tickwidth"),f=u.coerce2(x,t,s,"tickcolor",t.color),l=i("ticks",a.outerTicks||r||n||f?"outside":"");l||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(e,I,B){var u=e("./clean_ticks"),s=e("../../lib").isArrayOrTypedArray;I.exports=function(x,t,i,a){function r(p){var y=x[p];return y!==void 0?y:(t._template||{})[p]}var n=r("tick0"),f=r("dtick"),l=r("tickvals"),o=s(l)?"array":f?"linear":"auto",c=i("tickmode",o);if(c==="auto")i("nticks");else if(c==="linear"){var v=t.dtick=u.dtick(f,a);t.tick0=u.tick0(n,a,t.calendar,v)}else if(a!=="multicategory"){var d=i("tickvals");d===void 0?t.tickmode="auto":i("ticktext")}}},{"../../lib":503,"./clean_ticks":560}],581:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../lib"),x=e("../../components/drawing"),t=e("./axes");I.exports=function(a,r,n,f){var l=a._fullLayout;if(r.length===0){t.redrawComponents(a);return}function o(w){var T=w.xaxis,_=w.yaxis;l._defs.select("#"+w.clipId+"> rect").call(x.setTranslate,0,0).call(x.setScale,1,1),w.plot.call(x.setTranslate,T._offset,_._offset).call(x.setScale,1,1);var h=w.plot.selectAll(".scatterlayer .trace");h.selectAll(".point").call(x.setPointGroupScale,1,1),h.selectAll(".textpoint").call(x.setTextPointsScale,1,1),h.call(x.hideOutsideRangePoints,w)}function c(w,T){var _=w.plotinfo,h=_.xaxis,L=_.yaxis,S=h._length,k=L._length,P=!!w.xr1,O=!!w.yr1,F=[];if(P){var D=m.simpleMap(w.xr0,h.r2l),R=m.simpleMap(w.xr1,h.r2l),U=D[1]-D[0],N=R[1]-R[0];F[0]=(D[0]*(1-T)+T*R[0]-D[0])/(D[1]-D[0])*S,F[2]=S*(1-T+T*N/U),h.range[0]=h.l2r(D[0]*(1-T)+T*R[0]),h.range[1]=h.l2r(D[1]*(1-T)+T*R[1])}else F[0]=0,F[2]=S;if(O){var X=m.simpleMap(w.yr0,L.r2l),j=m.simpleMap(w.yr1,L.r2l),ee=X[1]-X[0],q=j[1]-j[0];F[1]=(X[1]*(1-T)+T*j[1]-X[1])/(X[0]-X[1])*k,F[3]=k*(1-T+T*q/ee),L.range[0]=h.l2r(X[0]*(1-T)+T*j[0]),L.range[1]=L.l2r(X[1]*(1-T)+T*j[1])}else F[1]=0,F[3]=k;t.drawOne(a,h,{skipTitle:!0}),t.drawOne(a,L,{skipTitle:!0}),t.redrawComponents(a,[h._id,L._id]);var G=P?S/F[2]:1,J=O?k/F[3]:1,le=P?F[0]:0,fe=O?F[1]:0,se=P?F[0]/F[2]*S:0,V=O?F[1]/F[3]*k:0,Y=h._offset-se,ne=L._offset-V;_.clipRect.call(x.setTranslate,le,fe).call(x.setScale,1/G,1/J),_.plot.call(x.setTranslate,Y,ne).call(x.setScale,G,J),x.setPointGroupScale(_.zoomScalePts,1/G,1/J),x.setTextPointsScale(_.zoomScaleTxt,1/G,1/J)}var v;f&&(v=f());function d(){for(var w={},T=0;T<r.length;T++){var _=r[T],h=_.plotinfo.xaxis,L=_.plotinfo.yaxis;_.xr1&&(w[h._name+".range"]=_.xr1.slice()),_.yr1&&(w[L._name+".range"]=_.yr1.slice())}return v&&v(),s.call("relayout",a,w).then(function(){for(var S=0;S<r.length;S++)o(r[S].plotinfo)})}function p(){for(var w={},T=0;T<r.length;T++){var _=r[T],h=_.plotinfo.xaxis,L=_.plotinfo.yaxis;_.xr0&&(w[h._name+".range"]=_.xr0.slice()),_.yr0&&(w[L._name+".range"]=_.yr0.slice())}return s.call("relayout",a,w).then(function(){for(var S=0;S<r.length;S++)o(r[S].plotinfo)})}var y,g,A,b=u.ease(n.easing);a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(A),A=null,p()});function M(){g=Date.now();for(var w=Math.min(1,(g-y)/n.duration),T=b(w),_=0;_<r.length;_++)c(r[_],T);g-y>n.duration?(d(),A=window.cancelAnimationFrame(M)):A=window.requestAnimationFrame(M)}return y=Date.now(),A=window.requestAnimationFrame(M),Promise.resolve()}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(e,I,B){var u=e("../../registry").traceIs,s=e("./axis_autotype");I.exports=function(r,n,f,l){f("autotypenumbers",l.autotypenumbersDflt);var o=f("type",(l.splomStash||{}).type);o==="-"&&(m(n,l.data),n.type==="-"?n.type="linear":r.type=n.type)};function m(a,r){if(a.type==="-"){var n=a._id,f=n.charAt(0),l;n.indexOf("scene")!==-1&&(n=f);var o=x(r,n,f);if(!!o){if(o.type==="histogram"&&f==={v:"y",h:"x"}[o.orientation||"v"]){a.type="linear";return}var c=f+"calendar",v=o[c],d={noMultiCategory:!u(o,"cartesian")||u(o,"noMultiCategory")};if(o.type==="box"&&o._hasPreCompStats&&f==={h:"x",v:"y"}[o.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=a.autotypenumbers,i(o,f)){var p=t(o),y=[];for(l=0;l<r.length;l++){var g=r[l];!u(g,"box-violin")||(g[f+"axis"]||f)!==n||(g[p]!==void 0?y.push(g[p][0]):g.name!==void 0?y.push(g.name):y.push("text"),g[c]!==v&&(v=void 0))}a.type=s(y,v,d)}else if(o.type==="splom"){var A=o.dimensions,b=A[o._axesDim[n]];b.visible&&(a.type=s(b.values,v,d))}else a.type=s(o[f]||[o[f+"0"]],v,d)}}}function x(a,r,n){for(var f=0;f<a.length;f++){var l=a[f];if(l.type==="splom"&&l._length>0&&(l["_"+n+"axes"]||{})[r])return l;if((l[n+"axis"]||n)===r){if(i(l,n))return l;if((l[n]||[]).length||l[n+"0"])return l}}}function t(a){return{v:"x",h:"y"}[a.orientation||"v"]}function i(a,r){var n=t(a),f=u(a,"box-violin"),l=u(a._fullInput||{},"candlestick");return f&&!l&&r===n&&a[n]===void 0&&a[n+"0"]===void 0}},{"../../registry":638,"./axis_autotype":555}],583:[function(e,I,B){var u=e("../registry"),s=e("../lib");B.manageCommandObserver=function(r,n,f,l){var o={},c=!0;n&&n._commandObserver&&(o=n._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var v=B.hasSimpleAPICommandBindings(r,f,o.lookupTable);if(n&&n._commandObserver){if(v)return o;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,o}if(v){m(r,v,o.cache),o.check=function(){if(!!c){var g=m(r,v,o.cache);return g.changed&&l&&o.lookupTable[g.value]!==void 0&&(o.disable(),Promise.resolve(l({value:g.value,type:v.type,prop:v.prop,traces:v.traces,index:o.lookupTable[g.value]})).then(o.enable,o.enable)),g.changed}};for(var d=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<d.length;p++)r._internalOn(d[p],o.check);o.remove=function(){for(var y=0;y<d.length;y++)r._removeInternalListener(d[y],o.check)}}else s.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){c=!1},o.enable=function(){c=!0},n&&(n._commandObserver=o),o},B.hasSimpleAPICommandBindings=function(r,n,f){var l,o=n.length,c;for(l=0;l<o;l++){var v,d=n[l],p=d.method,y=d.args;if(Array.isArray(y)||(y=[]),!p)return!1;var g=B.computeAPICommandBindings(r,p,y);if(g.length!==1)return!1;if(!c)c=g[0],Array.isArray(c.traces)&&c.traces.sort();else{if(v=g[0],v.type!==c.type||v.prop!==c.prop)return!1;if(Array.isArray(c.traces))if(Array.isArray(v.traces)){v.traces.sort();for(var A=0;A<c.traces.length;A++)if(c.traces[A]!==v.traces[A])return!1}else return!1;else if(v.prop!==c.prop)return!1}v=g[0];var b=v.value;if(Array.isArray(b))if(b.length===1)b=b[0];else return!1;f&&(f[b]=l)}return c};function m(r,n,f){var l,o,c,v=!1;if(n.type==="data")l=r._fullData[n.traces!==null?n.traces[0]:0];else if(n.type==="layout")l=r._fullLayout;else return!1;return o=s.nestedProperty(l,n.prop).get(),c=f[n.type]=f[n.type]||{},c.hasOwnProperty(n.prop)&&c[n.prop]!==o&&(v=!0),c[n.prop]=o,{changed:v,value:o}}B.executeAPICommand=function(r,n,f){if(n==="skip")return Promise.resolve();var l=u.apiMethodRegistry[n],o=[r];Array.isArray(f)||(f=[]);for(var c=0;c<f.length;c++)o.push(f[c]);return l.apply(null,o).catch(function(v){return s.warn("API call to Plotly."+n+" rejected.",v),Promise.reject(v)})},B.computeAPICommandBindings=function(r,n,f){var l;switch(Array.isArray(f)||(f=[]),n){case"restyle":l=i(r,f);break;case"relayout":l=t(r,f);break;case"update":l=i(r,[f[0],f[2]]).concat(t(r,[f[1]]));break;case"animate":l=x(r,f);break;default:l=[]}return l};function x(r,n){return Array.isArray(n[0])&&n[0].length===1&&["string","number"].indexOf(typeof n[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:n[0][0].toString()}]:[]}function t(r,n){var f=[],l=n[0],o={};if(typeof l=="string")o[l]=n[1];else if(s.isPlainObject(l))o=l;else return f;return a(o,function(c,v,d){f.push({type:"layout",prop:c,value:d})},"",0),f}function i(r,n){var f,l,o,c,v=[];if(l=n[0],o=n[1],f=n[2],c={},typeof l=="string")c[l]=o;else if(s.isPlainObject(l))c=l,f===void 0&&(f=o);else return v;return f===void 0&&(f=null),a(c,function(d,p,y){var g,A;if(Array.isArray(y)){A=y.slice();var b=Math.min(A.length,r.data.length);f&&(b=Math.min(b,f.length)),g=[];for(var M=0;M<b;M++)g[M]=f?f[M]:M}else A=y,g=f?f.slice():null;if(g===null)Array.isArray(A)&&(A=A[0]);else if(Array.isArray(g)){if(!Array.isArray(A)){var w=A;A=[];for(var T=0;T<g.length;T++)A[T]=w}A.length=Math.min(g.length,A.length)}v.push({type:"data",prop:d,traces:g,value:A})},"",0),v}function a(r,n,f,l){Object.keys(r).forEach(function(o){var c=r[o];if(o[0]!=="_"){var v=f+(l>0?".":"")+o;s.isPlainObject(c)?a(c,n,v,l+1):n(v,o,c)}})}},{"../lib":503,"../registry":638}],584:[function(e,I,B){var u=e("../lib/extend").extendFlat;B.attributes=function(s,m){s=s||{},m=m||{};var x={valType:"info_array",editType:s.editType,items:[{valType:"number",min:0,max:1,editType:s.editType},{valType:"number",min:0,max:1,editType:s.editType}],dflt:[0,1]};s.name&&s.name+"",s.trace,m.description&&""+m.description;var t={x:u({},x,{}),y:u({},x,{}),editType:s.editType};return s.noGridCell||(t.row={valType:"integer",min:0,dflt:0,editType:s.editType},t.column={valType:"integer",min:0,dflt:0,editType:s.editType}),t},B.defaults=function(s,m,x,t){var i=t&&t.x||[0,1],a=t&&t.y||[0,1],r=m.grid;if(r){var n=x("domain.column");n!==void 0&&(n<r.columns?i=r._domains.x[n]:delete s.domain.column);var f=x("domain.row");f!==void 0&&(f<r.rows?a=r._domains.y[f]:delete s.domain.row)}var l=x("domain.x",i),o=x("domain.y",a);l[0]<l[1]||(s.domain.x=i.slice()),o[0]<o[1]||(s.domain.y=a.slice())}},{"../lib/extend":493}],585:[function(e,I,B){I.exports=function(u){var s=u.editType,m=u.colorEditType;m===void 0&&(m=s);var x={family:{valType:"string",noBlank:!0,strict:!0,editType:s},size:{valType:"number",min:1,editType:s},color:{valType:"color",editType:m},editType:s};return u.autoSize&&(x.size.dflt="auto"),u.autoColor&&(x.color.dflt="auto"),u.arrayOk&&(x.family.arrayOk=!0,x.size.arrayOk=!0,x.color.arrayOk=!0),x}},{}],586:[function(e,I,B){I.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(e,I,B){B.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},B.axesNames=["lonaxis","lataxis"],B.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},B.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},B.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},B.clipPad=.001,B.precision=.1,B.landColor="#F0DC82",B.waterColor="#3399FF",B.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},B.sphereSVG={type:"Sphere"},B.fillLayers={ocean:1,land:1,lakes:1},B.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},B.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],B.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],B.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(e,I,B){var u=e("@plotly/d3"),s=e("d3-geo"),m=s.geoPath,x=s.geoDistance,t=e("d3-geo-projection"),i=e("../../registry"),a=e("../../lib"),r=a.strTranslate,n=e("../../components/color"),f=e("../../components/drawing"),l=e("../../components/fx"),o=e("../plots"),c=e("../cartesian/axes"),v=e("../cartesian/autorange").getAutoRange,d=e("../../components/dragelement"),p=e("../cartesian/select").prepSelect,y=e("../cartesian/select").clearSelect,g=e("../cartesian/select").selectOnClick,A=e("./zoom"),b=e("./constants"),M=e("../../lib/geo_location_utils"),w=e("../../lib/topojson_utils"),T=e("topojson-client").feature;function _(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var h=_.prototype;I.exports=function(O){return new _(O)},h.plot=function(P,O,F){var D=this,R=O[this.id],U=[],N=!1;for(var X in b.layerNameToAdjective)if(X!=="frame"&&R["show"+X]){N=!0;break}for(var j=0;j<P.length;j++)if(P[0][0].trace.locationmode){N=!0;break}if(N){var ee=w.getTopojsonName(R);(D.topojson===null||ee!==D.topojsonName)&&(D.topojsonName=ee,PlotlyGeoAssets.topojson[D.topojsonName]===void 0&&U.push(D.fetchTopojson()))}U=U.concat(M.fetchTraceGeoData(P)),F.push(new Promise(function(q,G){Promise.all(U).then(function(){D.topojson=PlotlyGeoAssets.topojson[D.topojsonName],D.update(P,O),q()}).catch(G)}))},h.fetchTopojson=function(){var P=this,O=w.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(F,D){u.json(O,function(R,U){if(R)return R.status===404?D(new Error(["plotly.js could not find topojson file at",O,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",O].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=U,F()})})},h.update=function(P,O){var F=O[this.id];this.hasChoropleth=!1;for(var D=0;D<P.length;D++){var R=P[D],U=R[0].trace;U.type==="choropleth"&&(this.hasChoropleth=!0),U.visible===!0&&U._length>0&&U._module.calcGeoJSON(R,O)}var N=this.updateProjection(P,O);if(!N){(!this.viewInitial||this.scope!==F.scope)&&this.saveViewInitial(F),this.scope=F.scope,this.updateBaseLayers(O,F),this.updateDims(O,F),this.updateFx(O,F),o.generalUpdatePerTraceModule(this.graphDiv,this,P,F);var X=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=X.selectAll(".point"),this.dataPoints.text=X.selectAll("text"),this.dataPaths.line=X.selectAll(".js-line");var j=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=j.selectAll("path"),this.render()}},h.updateProjection=function(P,O){var F=this.graphDiv,D=O[this.id],R=O._size,U=D.domain,N=D.projection,X=D.lonaxis,j=D.lataxis,ee=X._ax,q=j._ax,G=this.projection=L(D),J=[[R.l+R.w*U.x[0],R.t+R.h*(1-U.y[1])],[R.l+R.w*U.x[1],R.t+R.h*(1-U.y[0])]],le=D.center||{},fe=N.rotation||{},se=X.range||[],V=j.range||[];if(D.fitbounds){ee._length=J[1][0]-J[0][0],q._length=J[1][1]-J[0][1],ee.range=v(F,ee),q.range=v(F,q);var Y=(ee.range[0]+ee.range[1])/2,ne=(q.range[0]+q.range[1])/2;if(D._isScoped)le={lon:Y,lat:ne};else if(D._isClipped){le={lon:Y,lat:ne},fe={lon:Y,lat:ne,roll:fe.roll};var te=N.type,K=b.lonaxisSpan[te]/2||180,$=b.lataxisSpan[te]/2||90;se=[Y-K,Y+K],V=[ne-$,ne+$]}else le={lon:Y,lat:ne},fe={lon:Y,lat:fe.lat,roll:fe.roll}}G.center([le.lon-fe.lon,le.lat-fe.lat]).rotate([-fe.lon,-fe.lat,fe.roll]).parallels(N.parallels);var ae=k(se,V);G.fitExtent(J,ae);var ie=this.bounds=G.getBounds(ae),oe=this.fitScale=G.scale(),ue=G.translate();if(D.fitbounds){var xe=G.getBounds(k(ee.range,q.range)),he=Math.min((ie[1][0]-ie[0][0])/(xe[1][0]-xe[0][0]),(ie[1][1]-ie[0][1])/(xe[1][1]-xe[0][1]));isFinite(he)?G.scale(he*oe):a.warn("Something went wrong during"+this.id+"fitbounds computations.")}else G.scale(N.scale*oe);var me=this.midPt=[(ie[0][0]+ie[1][0])/2,(ie[0][1]+ie[1][1])/2];if(G.translate([ue[0]+(me[0]-ue[0]),ue[1]+(me[1]-ue[1])]).clipExtent(ie),D._isAlbersUsa){var be=G([le.lon,le.lat]),Ce=G.translate();G.translate([Ce[0]-(be[0]-Ce[0]),Ce[1]-(be[1]-Ce[1])])}},h.updateBaseLayers=function(P,O){var F=this,D=F.topojson,R=F.layers,U=F.basePaths;function N(J){return J==="lonaxis"||J==="lataxis"}function X(J){return Boolean(b.lineLayers[J])}function j(J){return Boolean(b.fillLayers[J])}var ee=this.hasChoropleth?b.layersForChoropleth:b.layers,q=ee.filter(function(J){return X(J)||j(J)?O["show"+J]:N(J)?O[J].showgrid:!0}),G=F.framework.selectAll(".layer").data(q,String);G.exit().each(function(J){delete R[J],delete U[J],u.select(this).remove()}),G.enter().append("g").attr("class",function(J){return"layer "+J}).each(function(J){var le=R[J]=u.select(this);J==="bg"?F.bgRect=le.append("rect").style("pointer-events","all"):N(J)?U[J]=le.append("path").style("fill","none"):J==="backplot"?le.append("g").classed("choroplethlayer",!0):J==="frontplot"?le.append("g").classed("scatterlayer",!0):X(J)?U[J]=le.append("path").style("fill","none").style("stroke-miterlimit",2):j(J)&&(U[J]=le.append("path").style("stroke","none"))}),G.order(),G.each(function(J){var le=U[J],fe=b.layerNameToAdjective[J];J==="frame"?le.datum(b.sphereSVG):X(J)||j(J)?le.datum(T(D,D.objects[J])):N(J)&&le.datum(S(J,O,P)).call(n.stroke,O[J].gridcolor).call(f.dashLine,"",O[J].gridwidth),X(J)?le.call(n.stroke,O[fe+"color"]).call(f.dashLine,"",O[fe+"width"]):j(J)&&le.call(n.fill,O[fe+"color"])})},h.updateDims=function(P,O){var F=this.bounds,D=(O.framewidth||0)/2,R=F[0][0]-D,U=F[0][1]-D,N=F[1][0]-R+D,X=F[1][1]-U+D;f.setRect(this.clipRect,R,U,N,X),this.bgRect.call(f.setRect,R,U,N,X).call(n.fill,O.bgcolor),this.xaxis._offset=R,this.xaxis._length=N,this.yaxis._offset=U,this.yaxis._length=X},h.updateFx=function(P,O){var F=this,D=F.graphDiv,R=F.bgRect,U=P.dragmode,N=P.clickmode;if(F.isStatic)return;function X(){var G=F.viewInitial,J={};for(var le in G)J[F.id+"."+le]=G[le];i.call("_guiRelayout",D,J),D.emit("plotly_doubleclick",null)}function j(G){return F.projection.invert([G[0]+F.xaxis._offset,G[1]+F.yaxis._offset])}var ee;U==="select"?ee=function(G,J){var le=G.range={};le[F.id]=[j([J.xmin,J.ymin]),j([J.xmax,J.ymax])]}:U==="lasso"&&(ee=function(G,J,le){var fe=G.lassoPoints={};fe[F.id]=le.filtered.map(j)});var q={element:F.bgRect.node(),gd:D,plotinfo:{id:F.id,xaxis:F.xaxis,yaxis:F.yaxis,fillRangeItems:ee},xaxes:[F.xaxis],yaxes:[F.yaxis],subplot:F.id,clickFn:function(G){G===2&&y(D)}};U==="pan"?(R.node().onmousedown=null,R.call(A(F,O)),R.on("dblclick.zoom",X),D._context._scrollZoom.geo||R.on("wheel.zoom",null)):(U==="select"||U==="lasso")&&(R.on(".zoom",null),q.prepFn=function(G,J,le){p(G,J,le,q,U)},d.init(q)),R.on("mousemove",function(){var G=F.projection.invert(a.getPositionFromD3Event());if(!G)return d.unhover(D,u.event);F.xaxis.p2c=function(){return G[0]},F.yaxis.p2c=function(){return G[1]},l.hover(D,u.event,F.id)}),R.on("mouseout",function(){D._dragging||d.unhover(D,u.event)}),R.on("click",function(){U!=="select"&&U!=="lasso"&&(N.indexOf("select")>-1&&g(u.event,D,[F.xaxis],[F.yaxis],F.id,q),N.indexOf("event")>-1&&l.click(D,u.event))})},h.makeFramework=function(){var P=this,O=P.graphDiv,F=O._fullLayout,D="clip"+F._uid+P.id;P.clipDef=F._clips.append("clipPath").attr("id",D),P.clipRect=P.clipDef.append("rect"),P.framework=u.select(P.container).append("g").attr("class","geo "+P.id).call(f.setClipUrl,D,O),P.project=function(R){var U=P.projection(R);return U?[U[0]-P.xaxis._offset,U[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(R){return P.project(R)[0]}},P.yaxis={_id:"y",c2p:function(R){return P.project(R)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},c.setConvert(P.mockAxis,F)},h.saveViewInitial=function(P){var O=P.center||{},F=P.projection,D=F.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":F.scale};var R;P._isScoped?R={"center.lon":O.lon,"center.lat":O.lat}:P._isClipped?R={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:R={"center.lon":O.lon,"center.lat":O.lat,"projection.rotation.lon":D.lon},a.extendFlat(this.viewInitial,R)},h.render=function(){var P=this.projection,O=P.getPath(),F;function D(U){var N=P(U.lonlat);return N?r(N[0],N[1]):null}function R(U){return P.isLonLatOverEdges(U.lonlat)?"none":null}for(F in this.basePaths)this.basePaths[F].attr("d",O);for(F in this.dataPaths)this.dataPaths[F].attr("d",function(U){return O(U.geojson)});for(F in this.dataPoints)this.dataPoints[F].attr("display",R).attr("transform",D)};function L(P){var O=P.projection,F=O.type,D=b.projNames[F];D="geo"+a.titleCase(D);for(var R=s[D]||t[D],U=R(),N=P._isSatellite?Math.acos(1/O.distance)*180/Math.PI:P._isClipped?b.lonaxisSpan[F]/2:null,X=["center","rotate","parallels","clipExtent"],j=function(G){return G?U:[]},ee=0;ee<X.length;ee++){var q=X[ee];typeof U[q]!="function"&&(U[q]=j)}return U.isLonLatOverEdges=function(G){if(U(G)===null)return!0;if(N){var J=U.rotate(),le=x(G,[-J[0],-J[1]]),fe=N*Math.PI/180;return le>fe}else return!1},U.getPath=function(){return m().projection(U)},U.getBounds=function(G){return U.getPath().bounds(G)},U.precision(b.precision),P._isSatellite&&U.tilt(O.tilt).distance(O.distance),N&&U.clipAngle(N-b.clipPad),U}function S(P,O,F){var D=1e-6,R=2.5,U=O[P],N=b.scopeDefaults[O.scope],X,j,ee;P==="lonaxis"?(X=N.lonaxisRange,j=N.lataxisRange,ee=function(ne,te){return[ne,te]}):P==="lataxis"&&(X=N.lataxisRange,j=N.lonaxisRange,ee=function(ne,te){return[te,ne]});var q={type:"linear",range:[X[0],X[1]-D],tick0:U.tick0,dtick:U.dtick};c.setConvert(q,F);var G=c.calcTicks(q);!O.isScoped&&P==="lonaxis"&&G.pop();for(var J=G.length,le=new Array(J),fe=0;fe<J;fe++)for(var se=G[fe].x,V=le[fe]=[],Y=j[0];Y<j[1]+R;Y+=R)V.push(ee(se,Y));return{type:"MultiLineString",coordinates:le}}function k(P,O){var F=b.clipPad,D=P[0]+F,R=P[1]-F,U=O[0]+F,N=O[1]-F;D>0&&R<0&&(R+=360);var X=(R-D)/4;return{type:"Polygon",coordinates:[[[D,U],[D,N],[D+X,N],[D+2*X,N],[D+3*X,N],[R,N],[R,U],[R-X,U],[R-2*X,U],[R-3*X,U],[D,U]]]}}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(e,I,B){var u=e("../../plots/get_data").getSubplotCalcData,s=e("../../lib").counterRegex,m=e("./geo"),x="geo",t=s(x),i={};i[x]={valType:"subplotid",dflt:x,editType:"calc"};function a(f){for(var l=f._fullLayout,o=f.calcdata,c=l._subplots[x],v=0;v<c.length;v++){var d=c[v],p=u(o,x,d),y=l[d],g=y._subplot;g||(g=m({id:d,graphDiv:f,container:l._geolayer.node(),topojsonURL:f._context.topojsonURL,staticPlot:f._context.staticPlot}),l[d]._subplot=g),g.plot(p,l,f._promises)}}function r(f,l,o,c){for(var v=c._subplots[x]||[],d=0;d<v.length;d++){var p=v[d],y=c[p]._subplot;!l[p]&&!!y&&(y.framework.remove(),y.clipDef.remove())}}function n(f){for(var l=f._fullLayout,o=l._subplots[x],c=0;c<o.length;c++){var v=l[o[c]],d=v._subplot;d.updateFx(l,v)}}I.exports={attr:x,name:x,idRoot:x,idRegex:t,attrRegex:t,attributes:i,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:a,updateFx:n,clean:r}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(e,I,B){var u=e("../../components/color/attributes"),s=e("../domain").attributes,m=e("./constants"),x=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/sort_object_keys"),i={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:u.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},a=I.exports=x({domain:s({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:t(m.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:t(m.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:u.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:m.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:m.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:m.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:m.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:u.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:u.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:u.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:u.background},lonaxis:i,lataxis:i},"plot","from-root");a.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(e,I,B){var u=e("../../lib"),s=e("../subplot_defaults"),m=e("../get_data").getSubplotData,x=e("./constants"),t=e("./layout_attributes"),i=x.axesNames;I.exports=function(n,f,l){s(n,f,l,{type:"geo",attributes:t,handleDefaults:a,fullData:l,partition:"y"})};function a(r,n,f,l){var o=m(l.fullData,"geo",l.id),c=o.map(function(V){return V._expandedIndex}),v=f("resolution"),d=f("scope"),p=x.scopeDefaults[d],y=f("projection.type",p.projType),g=n._isAlbersUsa=y==="albers usa";g&&(d=n.scope="usa");var A=n._isScoped=d!=="world",b=n._isSatellite=y==="satellite",M=n._isConic=y.indexOf("conic")!==-1||y==="albers",w=n._isClipped=!!x.lonaxisSpan[y];if(r.visible===!1){var T=u.extendDeep({},n._template);T.showcoastlines=!1,T.showcountries=!1,T.showframe=!1,T.showlakes=!1,T.showland=!1,T.showocean=!1,T.showrivers=!1,T.showsubunits=!1,T.lonaxis&&(T.lonaxis.showgrid=!1),T.lataxis&&(T.lataxis.showgrid=!1),n._template=T}for(var _=f("visible"),h,L=0;L<i.length;L++){var S=i[L],k=[30,10][L],P;if(A)P=p[S+"Range"];else{var O=x[S+"Span"],F=(O[y]||O["*"])/2,D=f("projection.rotation."+S.substr(0,3),p.projRotate[L]);P=[D-F,D+F]}var R=f(S+".range",P);f(S+".tick0"),f(S+".dtick",k),h=f(S+".showgrid",_?void 0:!1),h&&(f(S+".gridcolor"),f(S+".gridwidth")),n[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:c,setScale:u.identity,c2l:u.identity,r2l:u.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var U=n.lonaxis.range,N=n.lataxis.range,X=U[0],j=U[1];X>0&&j<0&&(j+=360);var ee=(X+j)/2,q;if(!g){var G=A?p.projRotate:[ee,0,0];q=f("projection.rotation.lon",G[0]),f("projection.rotation.lat",G[1]),f("projection.rotation.roll",G[2]),h=f("showcoastlines",!A&&_),h&&(f("coastlinecolor"),f("coastlinewidth")),h=f("showocean",_?void 0:!1),h&&f("oceancolor")}var J,le;if(g?(J=-96.6,le=38.7):(J=A?ee:q,le=(N[0]+N[1])/2),f("center.lon",J),f("center.lat",le),b&&(f("projection.tilt"),f("projection.distance")),M){var fe=p.projParallels||[0,60];f("projection.parallels",fe)}f("projection.scale"),h=f("showland",_?void 0:!1),h&&f("landcolor"),h=f("showlakes",_?void 0:!1),h&&f("lakecolor"),h=f("showrivers",_?void 0:!1),h&&(f("rivercolor"),f("riverwidth")),h=f("showcountries",A&&d!=="usa"&&_),h&&(f("countrycolor"),f("countrywidth")),(d==="usa"||d==="north america"&&v===50)&&(f("showsubunits",_),f("subunitcolor"),f("subunitwidth")),A||(h=f("showframe",_),h&&(f("framecolor"),f("framewidth"))),f("bgcolor");var se=f("fitbounds");se&&(delete n.projection.scale,A?(delete n.center.lon,delete n.center.lat):w?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../registry"),x=Math.PI/180,t=180/Math.PI,i={cursor:"pointer"},a={cursor:"auto"};function r(S,k){var P=S.projection,O;return k._isScoped?O=l:k._isClipped?O=c:O=o,O(S,P)}I.exports=r;function n(S,k){return u.behavior.zoom().translate(k.translate()).scale(k.scale())}function f(S,k,P){var O=S.id,F=S.graphDiv,D=F.layout,R=D[O],U=F._fullLayout,N=U[O],X={},j={};function ee(q,G){X[O+"."+q]=s.nestedProperty(R,q).get(),m.call("_storeDirectGUIEdit",D,U._preGUI,X);var J=s.nestedProperty(N,q);J.get()!==G&&(J.set(G),s.nestedProperty(R,q).set(G),j[O+"."+q]=G)}P(ee),ee("projection.scale",k.scale()/S.fitScale),ee("fitbounds",!1),F.emit("plotly_relayout",j)}function l(S,k){var P=n(S,k);function O(){u.select(this).style(i)}function F(){k.scale(u.event.scale).translate(u.event.translate),S.render();var U=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":U[0],"geo.center.lat":U[1]})}function D(U){var N=k.invert(S.midPt);U("center.lon",N[0]),U("center.lat",N[1])}function R(){u.select(this).style(a),f(S,k,D)}return P.on("zoomstart",O).on("zoom",F).on("zoomend",R),P}function o(S,k){var P=n(S,k),O=2,F,D,R,U,N,X,j,ee,q;function G(Y){return k.invert(Y)}function J(Y){var ne=G(Y);if(!ne)return!0;var te=k(ne);return Math.abs(te[0]-Y[0])>O||Math.abs(te[1]-Y[1])>O}function le(){u.select(this).style(i),F=u.mouse(this),D=k.rotate(),R=k.translate(),U=D,N=G(F)}function fe(){if(X=u.mouse(this),J(F)){P.scale(k.scale()),P.translate(k.translate());return}k.scale(u.event.scale),k.translate([R[0],u.event.translate[1]]),N?G(X)&&(ee=G(X),j=[U[0]+(ee[0]-N[0]),D[1],D[2]],k.rotate(j),U=j):(F=X,N=G(F)),q=!0,S.render();var Y=k.rotate(),ne=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":ne[0],"geo.center.lat":ne[1],"geo.projection.rotation.lon":-Y[0]})}function se(){u.select(this).style(a),q&&f(S,k,V)}function V(Y){var ne=k.rotate(),te=k.invert(S.midPt);Y("projection.rotation.lon",-ne[0]),Y("center.lon",te[0]),Y("center.lat",te[1])}return P.on("zoomstart",le).on("zoom",fe).on("zoomend",se),P}function c(S,k){k.rotate(),k.scale();var P=n(S,k),O=L(P,"zoomstart","zoom","zoomend"),F=0,D=P.on,R;P.on("zoomstart",function(){u.select(this).style(i);var ee=u.mouse(this),q=k.rotate(),G=q,J=k.translate(),le=d(q);R=v(k,ee),D.call(P,"zoom",function(){var fe=u.mouse(this);if(k.scale(u.event.scale),!R)ee=fe,R=v(k,ee);else if(v(k,fe)){k.rotate(q).translate(J);var se=v(k,fe),V=y(R,se),Y=w(p(le,V)),ne=g(Y,R,G);(!isFinite(ne[0])||!isFinite(ne[1])||!isFinite(ne[2]))&&(ne=G),k.rotate(ne),G=ne}N(O.of(this,arguments))}),U(O.of(this,arguments))}).on("zoomend",function(){u.select(this).style(a),D.call(P,"zoom",null),X(O.of(this,arguments)),f(S,k,j)}).on("zoom.redraw",function(){S.render();var ee=k.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})});function U(ee){F++||ee({type:"zoomstart"})}function N(ee){ee({type:"zoom"})}function X(ee){--F||ee({type:"zoomend"})}function j(ee){var q=k.rotate();ee("projection.rotation.lon",-q[0]),ee("projection.rotation.lat",-q[1])}return u.rebind(P,O,"on")}function v(S,k){var P=S.invert(k);return P&&isFinite(P[0])&&isFinite(P[1])&&T(P)}function d(S){var k=.5*S[0]*x,P=.5*S[1]*x,O=.5*S[2]*x,F=Math.sin(k),D=Math.cos(k),R=Math.sin(P),U=Math.cos(P),N=Math.sin(O),X=Math.cos(O);return[D*U*X+F*R*N,F*U*X-D*R*N,D*R*X+F*U*N,D*U*N-F*R*X]}function p(S,k){var P=S[0],O=S[1],F=S[2],D=S[3],R=k[0],U=k[1],N=k[2],X=k[3];return[P*R-O*U-F*N-D*X,P*U+O*R+F*X-D*N,P*N-O*X+F*R+D*U,P*X+O*N-F*U+D*R]}function y(S,k){if(!(!S||!k)){var P=h(S,k),O=Math.sqrt(_(P,P)),F=.5*Math.acos(Math.max(-1,Math.min(1,_(S,k)))),D=Math.sin(F)/O;return O&&[Math.cos(F),P[2]*D,-P[1]*D,P[0]*D]}}function g(S,k,P){var O=M(k,2,S[0]);O=M(O,1,S[1]),O=M(O,0,S[2]-P[2]);var F=k[0],D=k[1],R=k[2],U=O[0],N=O[1],X=O[2],j=Math.atan2(D,F)*t,ee=Math.sqrt(F*F+D*D),q,G;Math.abs(N)>ee?(G=(N>0?90:-90)-j,q=0):(G=Math.asin(N/ee)*t-j,q=Math.sqrt(ee*ee-N*N));var J=180-G-2*j,le=(Math.atan2(X,U)-Math.atan2(R,q))*t,fe=(Math.atan2(X,U)-Math.atan2(R,-q))*t,se=A(P[0],P[1],G,le),V=A(P[0],P[1],J,fe);return se<=V?[G,le,P[2]]:[J,fe,P[2]]}function A(S,k,P,O){var F=b(P-S),D=b(O-k);return Math.sqrt(F*F+D*D)}function b(S){return(S%360+540)%360-180}function M(S,k,P){var O=P*x,F=S.slice(),D=k===0?1:0,R=k===2?1:2,U=Math.cos(O),N=Math.sin(O);return F[D]=S[D]*U-S[R]*N,F[R]=S[R]*U+S[D]*N,F}function w(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*t,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*t,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*t]}function T(S){var k=S[0]*x,P=S[1]*x,O=Math.cos(P);return[O*Math.cos(k),O*Math.sin(k),Math.sin(P)]}function _(S,k){for(var P=0,O=0,F=S.length;O<F;++O)P+=S[O]*k[O];return P}function h(S,k){return[S[1]*k[2]-S[2]*k[1],S[2]*k[0]-S[0]*k[2],S[0]*k[1]-S[1]*k[0]]}function L(S){for(var k=0,P=arguments.length,O=[];++k<P;)O.push(arguments[k]);var F=u.dispatch.apply(null,O);return F.of=function(D,R){return function(U){var N;try{N=U.sourceEvent=u.event,U.target=S,u.event=U,F[U.type].apply(D,R)}finally{u.event=N}}},F}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(e,I,B){var u=e("../registry"),s=e("./cartesian/constants").SUBPLOT_PATTERN;B.getSubplotCalcData=function(m,x,t){var i=u.subplotsRegistry[x];if(!i)return[];for(var a=i.attr,r=[],n=0;n<m.length;n++){var f=m[n],l=f[0].trace;l[a]===t&&r.push(f)}return r},B.getModuleCalcData=function(m,x){var t=[],i=[],a;if(typeof x=="string"?a=u.getModule(x).plot:typeof x=="function"?a=x:a=x.plot,!a)return[t,m];for(var r=0;r<m.length;r++){var n=m[r],f=n[0].trace;f.visible!==!0||f._length===0||(f._module.plot===a?t.push(n):i.push(n))}return[t,i]},B.getSubplotData=function(x,t,i){if(!u.subplotsRegistry[t])return[];var a=u.subplotsRegistry[t].attr,r=[],n,f,l;if(t==="gl2d"){var o=i.match(s);f="x"+o[1],l="y"+o[2]}for(var c=0;c<x.length;c++)n=x[c],t==="gl2d"&&u.traceIs(n,"gl2d")?n[a[0]]===f&&n[a[1]]===l&&r.push(n):n[a]===i&&r.push(n);return r}},{"../registry":638,"./cartesian/constants":561}],594:[function(e,I,B){var u=e("mouse-change"),s=e("mouse-wheel"),m=e("mouse-event-offset"),x=e("../cartesian/constants"),t=e("has-passive-events");I.exports=a;function i(r,n){this.element=r,this.plot=n,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function a(r){var n=r.mouseContainer,f=r.glplot,l=new i(n,f);function o(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function c(){for(var d=r.graphDiv._fullLayout._axisConstraintGroups,p=r.xaxis._id,y=r.yaxis._id,g=0;g<d.length;g++)if(d[g][p]!==-1){if(d[g][y]!==-1)return!0;break}return!1}l.mouseListener=u(n,v),n.addEventListener("touchstart",function(d){var p=m(d.changedTouches[0],n);v(0,p[0],p[1]),v(1,p[0],p[1]),d.preventDefault()},t?{passive:!1}:!1),n.addEventListener("touchmove",function(d){d.preventDefault();var p=m(d.changedTouches[0],n);v(1,p[0],p[1]),d.preventDefault()},t?{passive:!1}:!1),n.addEventListener("touchend",function(d){v(0,l.lastPos[0],l.lastPos[1]),d.preventDefault()},t?{passive:!1}:!1);function v(d,p,y){var g=r.calcDataBox(),A=f.viewBox,b=l.lastPos[0],M=l.lastPos[1],w=x.MINDRAG*f.pixelRatio,T=x.MINZOOM*f.pixelRatio,_,h;p*=f.pixelRatio,y*=f.pixelRatio,y=A[3]-A[1]-y;function L(D,R,U){var N=Math.min(R,U),X=Math.max(R,U);N!==X?(g[D]=N,g[D+2]=X,l.dataBox=g,r.setRanges(g)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(d){var S=p/(A[2]-A[0])*(g[2]-g[0])+g[0],k=y/(A[3]-A[1])*(g[3]-g[1])+g[1];l.boxInited||(l.boxStart[0]=S,l.boxStart[1]=k,l.dragStart[0]=p,l.dragStart[1]=y),l.boxEnd[0]=S,l.boxEnd[1]=k,l.boxInited=!0,!l.boxEnabled&&(l.boxStart[0]!==l.boxEnd[0]||l.boxStart[1]!==l.boxEnd[1])&&(l.boxEnabled=!0);var P=Math.abs(l.dragStart[0]-p)<T,O=Math.abs(l.dragStart[1]-y)<T;if(c()&&!(P&&O)){_=l.boxEnd[0]-l.boxStart[0],h=l.boxEnd[1]-l.boxStart[1];var F=(g[3]-g[1])/(g[2]-g[0]);Math.abs(_*F)>Math.abs(h)?(l.boxEnd[1]=l.boxStart[1]+Math.abs(_)*F*(h>=0?1:-1),l.boxEnd[1]<g[1]?(l.boxEnd[1]=g[1],l.boxEnd[0]=l.boxStart[0]+(g[1]-l.boxStart[1])/Math.abs(F)):l.boxEnd[1]>g[3]&&(l.boxEnd[1]=g[3],l.boxEnd[0]=l.boxStart[0]+(g[3]-l.boxStart[1])/Math.abs(F))):(l.boxEnd[0]=l.boxStart[0]+Math.abs(h)/F*(_>=0?1:-1),l.boxEnd[0]<g[0]?(l.boxEnd[0]=g[0],l.boxEnd[1]=l.boxStart[1]+(g[0]-l.boxStart[0])*Math.abs(F)):l.boxEnd[0]>g[2]&&(l.boxEnd[0]=g[2],l.boxEnd[1]=l.boxStart[1]+(g[2]-l.boxStart[0])*Math.abs(F)))}else P&&(l.boxEnd[0]=l.boxStart[0]),O&&(l.boxEnd[1]=l.boxStart[1])}else l.boxEnabled?(_=l.boxStart[0]!==l.boxEnd[0],h=l.boxStart[1]!==l.boxEnd[1],_||h?(_&&(L(0,l.boxStart[0],l.boxEnd[0]),r.xaxis.autorange=!1),h&&(L(1,l.boxStart[1],l.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),l.boxEnabled=!1,l.boxInited=!1):l.boxInited&&(l.boxInited=!1);break;case"pan":l.boxEnabled=!1,l.boxInited=!1,d?(l.panning||(l.dragStart[0]=p,l.dragStart[1]=y),Math.abs(l.dragStart[0]-p)<w&&(p=l.dragStart[0]),Math.abs(l.dragStart[1]-y)<w&&(y=l.dragStart[1]),_=(b-p)*(g[2]-g[0])/(f.viewBox[2]-f.viewBox[0]),h=(M-y)*(g[3]-g[1])/(f.viewBox[3]-f.viewBox[1]),g[0]+=_,g[2]+=_,g[1]+=h,g[3]+=h,r.setRanges(g),l.panning=!0,l.lastInputTime=Date.now(),o(),r.cameraChanged(),r.handleAnnotations()):l.panning&&(l.panning=!1,r.relayoutCallback());break}l.lastPos[0]=p,l.lastPos[1]=y}return l.wheelListener=s(n,function(d,p){if(!r.scrollZoom)return!1;var y=r.calcDataBox(),g=f.viewBox,A=l.lastPos[0],b=l.lastPos[1],M=Math.exp(5*p/(g[3]-g[1])),w=A/(g[2]-g[0])*(y[2]-y[0])+y[0],T=b/(g[3]-g[1])*(y[3]-y[1])+y[1];return y[0]=(y[0]-w)*M+w,y[2]=(y[2]-w)*M+w,y[1]=(y[1]-T)*M+T,y[3]=(y[3]-T)*M+T,r.setRanges(y),l.lastInputTime=Date.now(),o(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),l}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(e,I,B){var u=e("../cartesian/axes"),s=e("../../lib/str2rgbarray");function m(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var x=m.prototype,t=["xaxis","yaxis"];x.merge=function(a){this.titleEnable=!1,this.backgroundColor=s(a.plot_bgcolor);var r,n,f,l,o,c,v,d,p,y,g;for(y=0;y<2;++y){r=t[y];var A=r.charAt(0);for(n=a[this.scene[r]._name],f=n.title.text===this.scene.fullLayout._dfltTitle[A]?"":n.title.text,g=0;g<=2;g+=2)this.labelEnable[y+g]=!1,this.labels[y+g]=f,this.labelColor[y+g]=s(n.title.font.color),this.labelFont[y+g]=n.title.font.family,this.labelSize[y+g]=n.title.font.size,this.labelPad[y+g]=this.getLabelPad(r,n),this.tickEnable[y+g]=!1,this.tickColor[y+g]=s((n.tickfont||{}).color),this.tickAngle[y+g]=n.tickangle==="auto"?0:Math.PI*-n.tickangle/180,this.tickPad[y+g]=this.getTickPad(n),this.tickMarkLength[y+g]=0,this.tickMarkWidth[y+g]=n.tickwidth||0,this.tickMarkColor[y+g]=s(n.tickcolor),this.borderLineEnable[y+g]=!1,this.borderLineColor[y+g]=s(n.linecolor),this.borderLineWidth[y+g]=n.linewidth||0;v=this.hasSharedAxis(n),o=this.hasAxisInDfltPos(r,n)&&!v,c=this.hasAxisInAltrPos(r,n)&&!v,l=n.mirror||!1,d=v?String(l).indexOf("all")!==-1:!!l,p=v?l==="allticks":String(l).indexOf("ticks")!==-1,o?this.labelEnable[y]=!0:c&&(this.labelEnable[y+2]=!0),o?this.tickEnable[y]=n.showticklabels:c&&(this.tickEnable[y+2]=n.showticklabels),(o||d)&&(this.borderLineEnable[y]=n.showline),(c||d)&&(this.borderLineEnable[y+2]=n.showline),(o||p)&&(this.tickMarkLength[y]=this.getTickMarkLength(n)),(c||p)&&(this.tickMarkLength[y+2]=this.getTickMarkLength(n)),this.gridLineEnable[y]=n.showgrid,this.gridLineColor[y]=s(n.gridcolor),this.gridLineWidth[y]=n.gridwidth,this.zeroLineEnable[y]=n.zeroline,this.zeroLineColor[y]=s(n.zerolinecolor),this.zeroLineWidth[y]=n.zerolinewidth}},x.hasSharedAxis=function(a){var r=this.scene,n=r.fullLayout._subplots.gl2d,f=u.findSubplotsWithAxis(n,a);return f.indexOf(r.id)!==0},x.hasAxisInDfltPos=function(a,r){var n=r.side;if(a==="xaxis")return n==="bottom";if(a==="yaxis")return n==="left"},x.hasAxisInAltrPos=function(a,r){var n=r.side;if(a==="xaxis")return n==="top";if(a==="yaxis")return n==="right"},x.getLabelPad=function(a,r){var n=1.5,f=r.title.font.size,l=r.showticklabels;if(a==="xaxis")return r.side==="top"?-10+f*(n+(l?1:0)):-10+f*(n+(l?.5:0));if(a==="yaxis")return r.side==="right"?10+f*(n+(l?1:.5)):10+f*(n+(l?.5:0))},x.getTickPad=function(a){return a.ticks==="outside"?10+a.ticklen:15},x.getTickMarkLength=function(a){if(!a.ticks)return 0;var r=a.ticklen;return a.ticks==="inside"?-r:r};function i(a){return new m(a)}I.exports=i},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(e,I,B){var u=e("../../plot_api/edit_types").overrideAll,s=e("./scene2d"),m=e("../layout_attributes"),x=e("../../constants/xmlns_namespaces"),t=e("../cartesian/constants"),i=e("../cartesian"),a=e("../../components/fx/layout_attributes"),r=e("../get_data").getSubplotData;B.name="gl2d",B.attr=["xaxis","yaxis"],B.idRoot=["x","y"],B.idRegex=t.idRegex,B.attrRegex=t.attrRegex,B.attributes=e("../cartesian/attributes"),B.supplyLayoutDefaults=function(n,f,l){f._has("cartesian")||i.supplyLayoutDefaults(n,f,l)},B.layoutAttrOverrides=u(i.layoutAttributes,"plot","from-root"),B.baseLayoutAttrOverrides=u({plot_bgcolor:m.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),B.plot=function(f){for(var l=f._fullLayout,o=f._fullData,c=l._subplots.gl2d,v=0;v<c.length;v++){var d=c[v],p=l._plots[d],y=r(o,"gl2d",d),g=p._scene2d;g===void 0&&(g=new s({id:d,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio},l),p._scene2d=g),g.plot(y,f.calcdata,l,f.layout)}},B.clean=function(n,f,l,o){for(var c=o._subplots.gl2d||[],v=0;v<c.length;v++){var d=c[v],p=o._plots[d];if(!!p._scene2d){var y=r(n,"gl2d",d);y.length===0&&(p._scene2d.destroy(),delete o._plots[d])}}i.clean.apply(this,arguments)},B.drawFramework=function(n){n._context.staticPlot||i.drawFramework(n)},B.toSVG=function(n){for(var f=n._fullLayout,l=f._subplots.gl2d,o=0;o<l.length;o++){var c=f._plots[l[o]],v=c._scene2d,d=v.toImage("png"),p=f._glimages.append("svg:image");p.attr({xmlns:x.svg,"xlink:href":d,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),v.destroy()}},B.updateFx=function(n){for(var f=n._fullLayout,l=f._subplots.gl2d,o=0;o<l.length;o++){var c=f._plots[l[o]]._scene2d;c.updateFx(f.dragmode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(e,I,B){var u=e("../../registry"),s=e("../../plots/cartesian/axes"),m=e("../../components/fx"),x=e("../../../stackgl_modules").gl_plot2d,t=e("../../../stackgl_modules").gl_spikes2d,i=e("../../../stackgl_modules").gl_select_box,a=e("webgl-context"),r=e("./convert"),n=e("./camera"),f=e("../../lib/show_no_webgl_msg"),l=e("../cartesian/constraints"),o=l.enforce,c=l.clean,v=e("../cartesian/autorange").doAutoRange,d=e("../../components/dragelement/helpers"),p=d.drawMode,y=d.selectMode,g=["xaxis","yaxis"],A,b,M=e("../cartesian/constants").SUBPLOT_PATTERN;function w(h,L){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(L),this.glplot=x(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=i(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}I.exports=w;var T=w.prototype;T.makeFramework=function(){if(this.staticPlot){if(!b&&(A=document.createElement("canvas"),b=a({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!b))throw new Error("Error creating static canvas/context for image server");this.canvas=A,this.gl=b}else{var h=this.container.querySelector(".gl-canvas-focus"),L=a({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){f(this),this.stopped=!0;return}this.canvas=h,this.gl=L}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var k=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",k.style["z-index"]=20,k.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var O=this.container;O.appendChild(k),O.appendChild(P);var F=this;P.addEventListener("mouseout",function(){F.isMouseOver=!1,F.unhover()}),P.addEventListener("mouseover",function(){F.isMouseOver=!0})},T.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(A),this.updateSize(this.canvas);var L=this.glplot.gl,S=L.drawingBufferWidth,k=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(S*k*4);L.readPixels(0,0,S,k,L.RGBA,L.UNSIGNED_BYTE,P);for(var O=0,F=k-1;O<F;++O,--F)for(var D=0;D<S;++D)for(var R=0;R<4;++R){var U=P[4*(S*O+D)+R];P[4*(S*O+D)+R]=P[4*(S*F+D)+R],P[4*(S*F+D)+R]=U}var N=document.createElement("canvas");N.width=S,N.height=k;var X=N.getContext("2d"),j=X.createImageData(S,k);j.data.set(P),X.putImageData(j,0,0);var ee;switch(h){case"jpeg":ee=N.toDataURL("image/jpeg");break;case"webp":ee=N.toDataURL("image/webp");break;default:ee=N.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(A),ee},T.updateSize=function(h){h||(h=this.canvas);var L=this.pixelRatio,S=this.fullLayout,k=S.width,P=S.height,O=Math.ceil(L*k)|0,F=Math.ceil(L*P)|0;return(h.width!==O||h.height!==F)&&(h.width=O,h.height=F),h},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[s.calcTicks(this.xaxis),s.calcTicks(this.yaxis)],L=0;L<2;++L)for(var S=0;S<h[L].length;++S)h[L][S].text=h[L][S].text+"";return h};function _(h,L){for(var S=0;S<2;++S){var k=h[S],P=L[S];if(k.length!==P.length)return!0;for(var O=0;O<k.length;++O)if(k[O].x!==P[O].x)return!0}return!1}T.updateRefs=function(h){this.fullLayout=h;var L=this.id.match(M),S="xaxis"+L[1],k="yaxis"+L[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[k]},T.relayoutCallback=function(){var h=this.graphDiv,L=this.xaxis,S=this.yaxis,k=h.layout,P={},O=P[L._name+".range"]=L.range.slice(),F=P[S._name+".range"]=S.range.slice();P[L._name+".autorange"]=L.autorange,P[S._name+".autorange"]=S.autorange,u.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,P);var D=k[L._name];D.range=O,D.autorange=L.autorange;var R=k[S._name];R.range=F,R.autorange=S.autorange,P.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",P)},T.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),S=this.glplotOptions.ticks;_(L,S)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var h=this.graphDiv,L=this.fullLayout.annotations,S=0;S<L.length;S++){var k=L[S];k.xref===this.xaxis._id&&k.yref===this.yaxis._id&&u.getComponentMethod("annotations","drawOne")(h,S)}},T.destroy=function(){if(!!this.glplot){var h=this.traces;h&&Object.keys(h).map(function(L){h[L].dispose(),delete h[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(h,L,S){var k=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,L),this.updateFx(S.dragmode);var P=S.width,O=S.height;this.updateSize(this.canvas);var F=this.glplotOptions;F.merge(S),F.screenBox=[0,0,P,O];var D={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};c(D,this.xaxis),c(D,this.yaxis);var R=S._size,U=this.xaxis.domain,N=this.yaxis.domain;F.viewBox=[R.l+U[0]*R.w,R.b+N[0]*R.h,P-R.r-(1-U[1])*R.w,O-R.t-(1-N[1])*R.h],this.mouseContainer.style.width=R.w*(U[1]-U[0])+"px",this.mouseContainer.style.height=R.h*(N[1]-N[0])+"px",this.mouseContainer.height=R.h*(N[1]-N[0]),this.mouseContainer.style.left=R.l+U[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-N[1])*R.h+"px";var X,j;for(j=0;j<2;++j)X=this[g[j]],X._length=F.viewBox[j+2]-F.viewBox[j],v(this.graphDiv,X),X.setScale();o(D),F.ticks=this.computeTickMarks(),F.dataBox=this.calcDataBox(),F.merge(S),k.update(F),this.glplot.draw()},T.calcDataBox=function(){var h=this.xaxis,L=this.yaxis,S=h.range,k=L.range,P=h.r2l,O=L.r2l;return[P(S[0]),O(k[0]),P(S[1]),O(k[1])]},T.setRanges=function(h){var L=this.xaxis,S=this.yaxis,k=L.l2r,P=S.l2r;L.range=[k(h[0]),k(h[2])],S.range=[P(h[1]),P(h[3])]},T.updateTraces=function(h,L){var S=Object.keys(this.traces),k,P,O;this.fullData=h;e:for(k=0;k<S.length;k++){var F=S[k],D=this.traces[F];for(P=0;P<h.length;P++)if(O=h[P],O.uid===F&&O.type===D.type)continue e;D.dispose(),delete this.traces[F]}for(k=0;k<h.length;k++){O=h[k];var R=L[k],U=this.traces[O.uid];U?U.update(O,R):(U=O._module.plot(this,O,R),this.traces[O.uid]=U)}this.glplot.objects.sort(function(N,X){return N._trace.index-X._trace.index})},T.updateFx=function(h){y(h)||p(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),h==="pan"?this.mouseContainer.style.cursor="move":h==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},T.emitPointAction=function(h,L){for(var S=h.trace.uid,k=h.pointIndex,P,O=0;O<this.fullData.length;O++)this.fullData[O].uid===S&&(P=this.fullData[O]);var F={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:P.index,pointNumber:k,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};m.appendArrayPointValue(F,P,k),this.graphDiv.emit(L,{points:[F]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,L=this.camera,S=L.mouseListener,k=this.lastButtonState===1&&S.buttons===0,P=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var O=S.x*h.pixelRatio,F=this.canvas.height-h.pixelRatio*S.y,D;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],U=0;U<2;U++)L.boxStart[U]===L.boxEnd[U]&&(R[U]=h.dataBox[U],R[U+2]=h.dataBox[U+2]);h.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var N=P._size,X=this.xaxis.domain,j=this.yaxis.domain;D=h.pick(O/h.pixelRatio+N.l+X[0]*N.w,F/h.pixelRatio-(N.t+(1-j[1])*N.h));var ee=D&&D.object._trace.handlePick(D);if(ee&&k&&this.emitPointAction(ee,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&P.hovermode&&ee&&(!this.lastPickResult||this.lastPickResult.traceUid!==ee.trace.uid||this.lastPickResult.dataCoord[0]!==ee.dataCoord[0]||this.lastPickResult.dataCoord[1]!==ee.dataCoord[1])){var q=ee;this.lastPickResult={traceUid:ee.trace?ee.trace.uid:null,dataCoord:ee.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),q.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(D.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(D.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(ee,"plotly_hover");var G=this.fullData[q.trace.index]||{},J=q.pointIndex,le=m.castHoverinfo(G,P,J);if(le&&le!=="all"){var fe=le.split("+");fe.indexOf("x")===-1&&(q.traceCoord[0]=void 0),fe.indexOf("y")===-1&&(q.traceCoord[1]=void 0),fe.indexOf("z")===-1&&(q.traceCoord[2]=void 0),fe.indexOf("text")===-1&&(q.textLabel=void 0),fe.indexOf("name")===-1&&(q.name=void 0)}m.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:m.castHoverOption(G,J,"bgcolor")||q.color,borderColor:m.castHoverOption(G,J,"bordercolor"),fontFamily:m.castHoverOption(G,J,"font.family"),fontSize:m.castHoverOption(G,J,"font.size"),fontColor:m.castHoverOption(G,J,"font.color"),nameLength:m.castHoverOption(G,J,"namelength"),textAlign:m.castHoverOption(G,J,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),h.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),m.loneUnhover(this.svgContainer))},T.hoverFormatter=function(h,L){if(L!==void 0){var S=this[h];return s.tickText(S,S.c2l(L),"hover").text}}},{"../../../stackgl_modules":1120,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(e,I,B){var u=e("../../plot_api/edit_types").overrideAll,s=e("../../components/fx/layout_attributes"),m=e("./scene"),x=e("../get_data").getSubplotData,t=e("../../lib"),i=e("../../constants/xmlns_namespaces"),a="gl3d",r="scene";B.name=a,B.attr=r,B.idRoot=r,B.idRegex=B.attrRegex=t.counterRegex("scene"),B.attributes=e("./layout/attributes"),B.layoutAttributes=e("./layout/layout_attributes"),B.baseLayoutAttrOverrides=u({hoverlabel:s.hoverlabel},"plot","nested"),B.supplyLayoutDefaults=e("./layout/defaults"),B.plot=function(f){for(var l=f._fullLayout,o=f._fullData,c=l._subplots[a],v=0;v<c.length;v++){var d=c[v],p=x(o,a,d),y=l[d],g=y.camera,A=y._scene;A||(A=new m({id:d,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio,camera:g},l),y._scene=A),A.viewInitial||(A.viewInitial={up:{x:g.up.x,y:g.up.y,z:g.up.z},eye:{x:g.eye.x,y:g.eye.y,z:g.eye.z},center:{x:g.center.x,y:g.center.y,z:g.center.z}}),A.plot(p,l,f.layout)}},B.clean=function(n,f,l,o){for(var c=o._subplots[a]||[],v=0;v<c.length;v++){var d=c[v];!f[d]&&!!o[d]._scene&&(o[d]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+d).remove())}},B.toSVG=function(n){for(var f=n._fullLayout,l=f._subplots[a],o=f._size,c=0;c<l.length;c++){var v=f[l[c]],d=v.domain,p=v._scene,y=p.toImage("png"),g=f._glimages.append("svg:image");g.attr({xmlns:i.svg,"xlink:href":y,x:o.l+o.w*d.x[0],y:o.t+o.h*(1-d.y[1]),width:o.w*(d.x[1]-d.x[0]),height:o.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),p.destroy()}},B.cleanId=function(f){if(!!f.match(/^scene[0-9]*$/)){var l=f.substr(5);return l==="1"&&(l=""),r+l}},B.updateFx=function(n){for(var f=n._fullLayout,l=f._subplots[a],o=0;o<l.length;o++){var c=f[l[o]]._scene;c.updateFx(f.dragmode,f.hovermode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(e,I,B){I.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(e,I,B){var u=e("../../../components/color"),s=e("../../cartesian/layout_attributes"),m=e("../../../lib/extend").extendFlat,x=e("../../../plot_api/edit_types").overrideAll;I.exports=x({visible:s.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:u.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:s.color,categoryorder:s.categoryorder,categoryarray:s.categoryarray,title:{text:s.title.text,font:s.title.font},type:m({},s.type,{values:["-","linear","log","date","category"]}),autotypenumbers:s.autotypenumbers,autorange:s.autorange,rangemode:s.rangemode,range:m({},s.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:s.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,mirror:s.mirror,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,showticklabels:s.showticklabels,tickfont:s.tickfont,tickangle:s.tickangle,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickformat:s.tickformat,tickformatstops:s.tickformatstops,hoverformat:s.hoverformat,showline:s.showline,linecolor:s.linecolor,linewidth:s.linewidth,showgrid:s.showgrid,gridcolor:m({},s.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:s.gridwidth,zeroline:s.zeroline,zerolinecolor:s.zerolinecolor,zerolinewidth:s.zerolinewidth,_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(e,I,B){var u=e("tinycolor2").mix,s=e("../../../lib"),m=e("../../../plot_api/plot_template"),x=e("./axis_attributes"),t=e("../../cartesian/type_defaults"),i=e("../../cartesian/axis_defaults"),a=["xaxis","yaxis","zaxis"],r=100*(204-68)/(255-68);I.exports=function(f,l,o){var c,v;function d(g,A){return s.coerce(c,v,x,g,A)}for(var p=0;p<a.length;p++){var y=a[p];c=f[y]||{},v=m.newContainer(l,y),v._id=y[0]+o.scene,v._name=y,t(c,v,d,o),i(c,v,d,{font:o.font,letter:y[0],data:o.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:o.bgColor,calendar:o.calendar},o.fullLayout),d("gridcolor",u(v.color,o.bgColor,r).toRgbString()),d("title.text",y[0]),v.setScale=s.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",v.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(e,I,B){var u=e("../../../lib/str2rgbarray"),s=e("../../../lib"),m=["xaxis","yaxis","zaxis"];function x(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var t=x.prototype;t.merge=function(a,r){for(var n=this,f=0;f<3;++f){var l=r[m[f]];if(!l.visible){n.tickEnable[f]=!1,n.labelEnable[f]=!1,n.lineEnable[f]=!1,n.lineTickEnable[f]=!1,n.gridEnable[f]=!1,n.zeroEnable[f]=!1,n.backgroundEnable[f]=!1;continue}n.labels[f]=a._meta?s.templateString(l.title.text,a._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(n.labelColor[f]=u(l.title.font.color)),l.title.font.family&&(n.labelFont[f]=l.title.font.family),l.title.font.size&&(n.labelSize[f]=l.title.font.size)),"showline"in l&&(n.lineEnable[f]=l.showline),"linecolor"in l&&(n.lineColor[f]=u(l.linecolor)),"linewidth"in l&&(n.lineWidth[f]=l.linewidth),"showgrid"in l&&(n.gridEnable[f]=l.showgrid),"gridcolor"in l&&(n.gridColor[f]=u(l.gridcolor)),"gridwidth"in l&&(n.gridWidth[f]=l.gridwidth),l.type==="log"?n.zeroEnable[f]=!1:"zeroline"in l&&(n.zeroEnable[f]=l.zeroline),"zerolinecolor"in l&&(n.zeroLineColor[f]=u(l.zerolinecolor)),"zerolinewidth"in l&&(n.zeroLineWidth[f]=l.zerolinewidth),"ticks"in l&&!!l.ticks?n.lineTickEnable[f]=!0:n.lineTickEnable[f]=!1,"ticklen"in l&&(n.lineTickLength[f]=n._defaultLineTickLength[f]=l.ticklen),"tickcolor"in l&&(n.lineTickColor[f]=u(l.tickcolor)),"tickwidth"in l&&(n.lineTickWidth[f]=l.tickwidth),"tickangle"in l&&(n.tickAngle[f]=l.tickangle==="auto"?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(n.tickEnable[f]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(n.tickColor[f]=u(l.tickfont.color)),l.tickfont.family&&(n.tickFont[f]=l.tickfont.family),l.tickfont.size&&(n.tickSize[f]=l.tickfont.size)),"mirror"in l?["ticks","all","allticks"].indexOf(l.mirror)!==-1?(n.lineTickMirror[f]=!0,n.lineMirror[f]=!0):l.mirror===!0?(n.lineTickMirror[f]=!1,n.lineMirror[f]=!0):(n.lineTickMirror[f]=!1,n.lineMirror[f]=!1):n.lineMirror[f]=!1,"showbackground"in l&&l.showbackground!==!1?(n.backgroundEnable[f]=!0,n.backgroundColor[f]=u(l.backgroundcolor)):n.backgroundEnable[f]=!1}};function i(a,r){var n=new x;return n.merge(a,r),n}I.exports=i},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(e,I,B){var u=e("../../../lib"),s=e("../../../components/color"),m=e("../../../registry"),x=e("../../subplot_defaults"),t=e("./axis_defaults"),i=e("./layout_attributes"),a=e("../../get_data").getSubplotData,r="gl3d";I.exports=function(l,o,c){var v=o._basePlotModules.length>1;function d(p){if(!v){var y=u.validate(l[p],i[p]);if(y)return l[p]}}x(l,o,c,{type:r,attributes:i,handleDefaults:n,fullLayout:o,font:o.font,fullData:c,getDfltFromLayout:d,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})};function n(f,l,o,c){for(var v=o("bgcolor"),d=s.combine(v,c.paper_bgcolor),p=["up","center","eye"],y=0;y<p.length;y++)o("camera."+p[y]+".x"),o("camera."+p[y]+".y"),o("camera."+p[y]+".z");o("camera.projection.type");var g=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),A=g?"manual":"auto",b=o("aspectmode",A);g||(f.aspectratio=l.aspectratio={x:1,y:1,z:1},b==="manual"&&(l.aspectmode="auto"),f.aspectmode=l.aspectmode);var M=a(c.fullData,r,c.id);t(f,l,{font:c.font,scene:c.id,data:M,bgColor:d,calendar:c.calendar,autotypenumbersDflt:c.autotypenumbersDflt,fullLayout:c.fullLayout}),m.getComponentMethod("annotations3d","handleDefaults")(f,l,c);var w=c.getDfltFromLayout("dragmode");if(w!==!1&&!w)if(w="orbit",f.camera&&f.camera.up){var T=f.camera.up.x,_=f.camera.up.y,h=f.camera.up.z;h!==0&&(!T||!_||!h||h/Math.sqrt(T*T+_*_+h*h)>.999)&&(w="turntable")}else w="turntable";o("dragmode",w),o("hovermode",c.getDfltFromLayout("hovermode"))}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(e,I,B){var u=e("./axis_attributes"),s=e("../../domain").attributes,m=e("../../../lib/extend").extendFlat,x=e("../../../lib").counterRegex;function t(i,a,r){return{x:{valType:"number",dflt:i,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}I.exports={_arrayAttrRegexps:[x("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:m(t(0,0,1),{}),center:m(t(0,0,0),{}),eye:m(t(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:s({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:u,yaxis:u,zaxis:u,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(e,I,B){var u=e("../../../lib/str2rgbarray"),s=["xaxis","yaxis","zaxis"];function m(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var x=m.prototype;x.merge=function(i){for(var a=0;a<3;++a){var r=i[s[a]];if(!r.visible){this.enabled[a]=!1,this.drawSides[a]=!1;continue}this.enabled[a]=r.showspikes,this.colors[a]=u(r.spikecolor),this.drawSides[a]=r.spikesides,this.lineWidth[a]=r.spikethickness}};function t(i){var a=new m;return a.merge(i),a}I.exports=t},{"../../../lib/str2rgbarray":528}],606:[function(e,I,B){I.exports=i;var u=e("../../cartesian/axes"),s=e("../../../lib"),m=["xaxis","yaxis","zaxis"],x=[0,0,0];function t(a){for(var r=new Array(3),n=0;n<3;++n){for(var f=a[n],l=new Array(f.length),o=0;o<f.length;++o)l[o]=f[o].x;r[n]=l}return r}function i(a){for(var r=a.axesOptions,n=a.glplot.axesPixels,f=a.fullSceneLayout,l=[[],[],[]],o=0;o<3;++o){var c=f[m[o]];if(c._length=(n[o].hi-n[o].lo)*n[o].pixelsPerDataUnit/a.dataScale[o],Math.abs(c._length)===1/0||isNaN(c._length))l[o]=[];else{c._input_range=c.range.slice(),c.range[0]=n[o].lo/a.dataScale[o],c.range[1]=n[o].hi/a.dataScale[o],c._m=1/(a.dataScale[o]*n[o].pixelsPerDataUnit),c.range[0]===c.range[1]&&(c.range[0]-=1,c.range[1]+=1);var v=c.tickmode;if(c.tickmode==="auto"){c.tickmode="linear";var d=c.nticks||s.constrain(c._length/40,4,9);u.autoTicks(c,Math.abs(c.range[1]-c.range[0])/d)}for(var p=u.calcTicks(c,{msUTC:!0}),y=0;y<p.length;++y)p[y].x=p[y].x*a.dataScale[o],c.type==="date"&&(p[y].text=p[y].text.replace(/\<br\>/g," "));l[o]=p,c.tickmode=v}}r.ticks=l;for(var o=0;o<3;++o){x[o]=.5*(a.glplot.bounds[0][o]+a.glplot.bounds[1][o]);for(var y=0;y<2;++y)r.bounds[y][o]=a.glplot.bounds[y][o]}a.contourLevels=t(l)}},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(e,I,B){function u(m,x){var t=[0,0,0,0],i,a;for(i=0;i<4;++i)for(a=0;a<4;++a)t[a]+=m[4*i+a]*x[i];return t}function s(m,x){var t=u(m.projection,u(m.view,u(m.model,[x[0],x[1],x[2],1])));return t}I.exports=s},{}],608:[function(e,I,B){var u=e("../../../stackgl_modules").gl_plot3d,s=u.createCamera,m=u.createScene,x=e("webgl-context"),t=e("has-passive-events"),i=e("../../registry"),a=e("../../lib"),r=a.preserveDrawingBuffer(),n=e("../../plots/cartesian/axes"),f=e("../../components/fx"),l=e("../../lib/str2rgbarray"),o=e("../../lib/show_no_webgl_msg"),c=e("./project"),v=e("./layout/convert"),d=e("./layout/spikes"),p=e("./layout/tick_marks"),y,g;function A(P,O){var F=document.createElement("div"),D=P.container;this.graphDiv=P.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",F.appendChild(R),this.svgContainer=R,F.id=P.id,F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",D.appendChild(F),this.fullLayout=O,this.id=P.id||"scene",this.fullSceneLayout=O[this.id],this.plotArgs=[[],{},{}],this.axesOptions=v(O,O[this.id]),this.spikeOptions=d(O[this.id]),this.container=F,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=i.getComponentMethod("annotations3d","convert"),this.drawAnnotations=i.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var b=A.prototype;b.prepareOptions=function(){var P=this,O={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!g&&(y=document.createElement("canvas"),g=x({canvas:y,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!g))throw new Error("error creating static canvas/context for image server");O.gl=g,O.canvas=y}return O};var M=!0;b.tryCreatePlot=function(){var P=this,O=P.prepareOptions(),F=!0;try{P.glplot=m(O)}catch{if(P.staticMode||!M||r)F=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=O.glOptions.preserveDrawingBuffer=!0,P.glplot=m(O)}catch{r=O.glOptions.preserveDrawingBuffer=!1,F=!1}}}return M=!1,F},b.initializeGLCamera=function(){var P=this,O=P.fullSceneLayout.camera,F=O.projection.type==="orthographic";P.camera=s(P.container,{center:[O.center.x,O.center.y,O.center.z],eye:[O.eye.x,O.eye.y,O.eye.z],up:[O.up.x,O.up.y,O.up.z],_ortho:F,zoomMin:.01,zoomMax:100,mode:"orbit"})},b.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var O=P.tryCreatePlot();if(!O)return o(P);P.traces={},P.make4thDimension();var F=P.graphDiv,D=F.layout,R=function(){var N={};return P.isCameraChanged(D)&&(N[P.id+".camera"]=P.getCamera()),P.isAspectChanged(D)&&(N[P.id+".aspectratio"]=P.glplot.getAspectratio(),D[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=D[P.id].aspectmode=N[P.id+".aspectmode"]="manual")),N},U=function(N){if(N.fullSceneLayout.dragmode!==!1){var X=R();N.saveLayout(D),N.graphDiv.emit("plotly_relayout",X)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){U(P)}),P.glplot.canvas.addEventListener("wheel",function(N){if(F._context._scrollZoom.gl3d){if(P.camera._ortho){var X=N.deltaX>N.deltaY?1.1:1/1.1,j=P.glplot.getAspectratio();P.glplot.setAspectratio({x:X*j.x,y:X*j.y,z:X*j.z})}U(P)}},t?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var N=R();P.graphDiv.emit("plotly_relayouting",N)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(N){F&&F.emit&&F.emit("plotly_webglcontextlost",{event:N,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},b.render=function(){var P=this,O=P.graphDiv,F,D=P.svgContainer,R=P.container.getBoundingClientRect();O._fullLayout._calcInverseTransform(O);var U=O._fullLayout._invScaleX,N=O._fullLayout._invScaleY,X=R.width*U,j=R.height*N;D.setAttributeNS(null,"viewBox","0 0 "+X+" "+j),D.setAttributeNS(null,"width",X),D.setAttributeNS(null,"height",j),p(P),P.glplot.axes.update(P.axesOptions);for(var ee=Object.keys(P.traces),q=null,G=P.glplot.selection,J=0;J<ee.length;++J)F=P.traces[ee[J]],F.data.hoverinfo!=="skip"&&F.handlePick(G)&&(q=F),F.setContourLevels&&F.setContourLevels();function le(xe,he,me){var be=P.fullSceneLayout[xe+"axis"];return be.type!=="log"&&(he=be.d2l(he)),n.hoverLabelText(be,he,me)}if(q!==null){var fe=c(P.glplot.cameraParams,G.dataCoordinate);F=q.data;var se=O._fullData[F.index],V=G.index,Y={xLabel:le("x",G.traceCoordinate[0],F.xhoverformat),yLabel:le("y",G.traceCoordinate[1],F.yhoverformat),zLabel:le("z",G.traceCoordinate[2],F.zhoverformat)},ne=f.castHoverinfo(se,P.fullLayout,V),te=(ne||"").split("+"),K=ne&&ne==="all";!se.hovertemplate&&!K&&(te.indexOf("x")===-1&&(Y.xLabel=void 0),te.indexOf("y")===-1&&(Y.yLabel=void 0),te.indexOf("z")===-1&&(Y.zLabel=void 0),te.indexOf("text")===-1&&(G.textLabel=void 0),te.indexOf("name")===-1&&(q.name=void 0));var $,ae=[];F.type==="cone"||F.type==="streamtube"?(Y.uLabel=le("x",G.traceCoordinate[3],F.uhoverformat),(K||te.indexOf("u")!==-1)&&ae.push("u: "+Y.uLabel),Y.vLabel=le("y",G.traceCoordinate[4],F.vhoverformat),(K||te.indexOf("v")!==-1)&&ae.push("v: "+Y.vLabel),Y.wLabel=le("z",G.traceCoordinate[5],F.whoverformat),(K||te.indexOf("w")!==-1)&&ae.push("w: "+Y.wLabel),Y.normLabel=G.traceCoordinate[6].toPrecision(3),(K||te.indexOf("norm")!==-1)&&ae.push("norm: "+Y.normLabel),F.type==="streamtube"&&(Y.divergenceLabel=G.traceCoordinate[7].toPrecision(3),(K||te.indexOf("divergence")!==-1)&&ae.push("divergence: "+Y.divergenceLabel)),G.textLabel&&ae.push(G.textLabel),$=ae.join("<br>")):F.type==="isosurface"||F.type==="volume"?(Y.valueLabel=n.hoverLabelText(P._mockAxis,P._mockAxis.d2l(G.traceCoordinate[3]),F.valuehoverformat),ae.push("value: "+Y.valueLabel),G.textLabel&&ae.push(G.textLabel),$=ae.join("<br>")):$=G.textLabel;var ie={x:G.traceCoordinate[0],y:G.traceCoordinate[1],z:G.traceCoordinate[2],data:se._input,fullData:se,curveNumber:se.index,pointNumber:V};f.appendArrayPointValue(ie,se,V),F._module.eventData&&(ie=se._module.eventData(ie,G,se,{},V));var oe={points:[ie]};if(P.fullSceneLayout.hovermode){var ue=[];f.loneHover({trace:se,x:(.5+.5*fe[0]/fe[3])*X,y:(.5-.5*fe[1]/fe[3])*j,xLabel:Y.xLabel,yLabel:Y.yLabel,zLabel:Y.zLabel,text:$,name:q.name,color:f.castHoverOption(se,V,"bgcolor")||q.color,borderColor:f.castHoverOption(se,V,"bordercolor"),fontFamily:f.castHoverOption(se,V,"font.family"),fontSize:f.castHoverOption(se,V,"font.size"),fontColor:f.castHoverOption(se,V,"font.color"),nameLength:f.castHoverOption(se,V,"namelength"),textAlign:f.castHoverOption(se,V,"align"),hovertemplate:a.castOption(se,V,"hovertemplate"),hovertemplateLabels:a.extendFlat({},ie,Y),eventData:[ie]},{container:D,gd:O,inOut_bbox:ue}),ie.bbox=ue[0]}G.buttons&&G.distance<5?O.emit("plotly_click",oe):O.emit("plotly_hover",oe),this.oldEventData=oe}else f.loneUnhover(D),this.oldEventData&&O.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},b.recoverContext=function(){var P=this;P.glplot.dispose();var O=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(O);return}if(!P.initializeGLPlot()){a.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(O)};var w=["xaxis","yaxis","zaxis"];function T(P,O,F){for(var D=P.fullSceneLayout,R=0;R<3;R++){var U=w[R],N=U.charAt(0),X=D[U],j=O[N],ee=O[N+"calendar"],q=O["_"+N+"length"];if(!a.isArrayOrTypedArray(j))F[0][R]=Math.min(F[0][R],0),F[1][R]=Math.max(F[1][R],q-1);else for(var G,J=0;J<(q||j.length);J++)if(a.isArrayOrTypedArray(j[J]))for(var le=0;le<j[J].length;++le)G=X.d2l(j[J][le],0,ee),!isNaN(G)&&isFinite(G)&&(F[0][R]=Math.min(F[0][R],G),F[1][R]=Math.max(F[1][R],G));else G=X.d2l(j[J],0,ee),!isNaN(G)&&isFinite(G)&&(F[0][R]=Math.min(F[0][R],G),F[1][R]=Math.max(F[1][R],G))}}function _(P,O){for(var F=P.fullSceneLayout,D=F.annotations||[],R=0;R<3;R++)for(var U=w[R],N=U.charAt(0),X=F[U],j=0;j<D.length;j++){var ee=D[j];if(ee.visible){var q=X.r2l(ee[N]);!isNaN(q)&&isFinite(q)&&(O[0][R]=Math.min(O[0][R],q),O[1][R]=Math.max(O[1][R],q))}}}b.plot=function(P,O,F){var D=this;if(D.plotArgs=[P,O,F],D.glplot.contextLost)return;var R,U,N,X,j,ee,q=O[D.id],G=F[D.id];D.fullLayout=O,D.fullSceneLayout=q,D.axesOptions.merge(O,q),D.spikeOptions.merge(q),D.setViewport(q),D.updateFx(q.dragmode,q.hovermode),D.camera.enableWheel=D.graphDiv._context._scrollZoom.gl3d,D.glplot.setClearColor(l(q.bgcolor)),D.setConvert(j),P?Array.isArray(P)||(P=[P]):P=[];var J=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(N=0;N<P.length;++N)R=P[N],!(R.visible!==!0||R._length===0)&&T(this,R,J);_(this,J);var le=[1,1,1];for(X=0;X<3;++X)J[1][X]===J[0][X]?le[X]=1:le[X]=1/(J[1][X]-J[0][X]);for(D.dataScale=le,D.convertAnnotations(this),N=0;N<P.length;++N)R=P[N],!(R.visible!==!0||R._length===0)&&(U=D.traces[R.uid],U?U.data.type===R.type?U.update(R):(U.dispose(),U=R._module.plot(this,R),D.traces[R.uid]=U):(U=R._module.plot(this,R),D.traces[R.uid]=U),U.name=R.name);var fe=Object.keys(D.traces);e:for(N=0;N<fe.length;++N){for(X=0;X<P.length;++X)if(P[X].uid===fe[N]&&P[X].visible===!0&&P[X]._length!==0)continue e;U=D.traces[fe[N]],U.dispose(),delete D.traces[fe[N]]}D.glplot.objects.sort(function(Ze,rt){return Ze._trace.data.index-rt._trace.data.index});var se=[[0,0,0],[0,0,0]],V=[],Y={};for(N=0;N<3;++N){if(j=q[w[N]],ee=j.type,ee in Y?(Y[ee].acc*=le[N],Y[ee].count+=1):Y[ee]={acc:le[N],count:1},j.autorange){se[0][N]=1/0,se[1][N]=-1/0;var ne=D.glplot.objects,te=D.fullSceneLayout.annotations||[],K=j._name.charAt(0);for(X=0;X<ne.length;X++){var $=ne[X],ae=$.bounds,ie=$._trace.data._pad||0;$.constructor.name==="ErrorBars"&&j._lowerLogErrorBound?se[0][N]=Math.min(se[0][N],j._lowerLogErrorBound):se[0][N]=Math.min(se[0][N],ae[0][N]/le[N]-ie),se[1][N]=Math.max(se[1][N],ae[1][N]/le[N]+ie)}for(X=0;X<te.length;X++){var oe=te[X];if(oe.visible){var ue=j.r2l(oe[K]);se[0][N]=Math.min(se[0][N],ue),se[1][N]=Math.max(se[1][N],ue)}}if("rangemode"in j&&j.rangemode==="tozero"&&(se[0][N]=Math.min(se[0][N],0),se[1][N]=Math.max(se[1][N],0)),se[0][N]>se[1][N])se[0][N]=-1,se[1][N]=1;else{var xe=se[1][N]-se[0][N];se[0][N]-=xe/32,se[1][N]+=xe/32}if(j.autorange==="reversed"){var he=se[0][N];se[0][N]=se[1][N],se[1][N]=he}}else{var me=j.range;se[0][N]=j.r2l(me[0]),se[1][N]=j.r2l(me[1])}se[0][N]===se[1][N]&&(se[0][N]-=1,se[1][N]+=1),V[N]=se[1][N]-se[0][N],D.glplot.setBounds(N,{min:se[0][N]*le[N],max:se[1][N]*le[N]})}var be,Ce=q.aspectmode;if(Ce==="cube")be=[1,1,1];else if(Ce==="manual"){var Se=q.aspectratio;be=[Se.x,Se.y,Se.z]}else if(Ce==="auto"||Ce==="data"){var Be=[1,1,1];for(N=0;N<3;++N){j=q[w[N]],ee=j.type;var Ye=Y[ee];Be[N]=Math.pow(Ye.acc,1/Ye.count)/le[N]}Ce==="data"||Math.max.apply(null,Be)/Math.min.apply(null,Be)<=4?be=Be:be=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");q.aspectratio.x=G.aspectratio.x=be[0],q.aspectratio.y=G.aspectratio.y=be[1],q.aspectratio.z=G.aspectratio.z=be[2],D.glplot.setAspectratio(q.aspectratio),D.viewInitial.aspectratio||(D.viewInitial.aspectratio={x:q.aspectratio.x,y:q.aspectratio.y,z:q.aspectratio.z}),D.viewInitial.aspectmode||(D.viewInitial.aspectmode=q.aspectmode);var Xe=q.domain||null,Te=O._size||null;if(Xe&&Te){var Ie=D.container.style;Ie.position="absolute",Ie.left=Te.l+Xe.x[0]*Te.w+"px",Ie.top=Te.t+(1-Xe.y[1])*Te.h+"px",Ie.width=Te.w*(Xe.x[1]-Xe.x[0])+"px",Ie.height=Te.h*(Xe.y[1]-Xe.y[0])+"px"}D.glplot.redraw()},b.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function h(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}b.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},b.setViewport=function(P){var O=this,F=P.camera;O.camera.lookAt.apply(this,h(F)),O.glplot.setAspectratio(P.aspectratio);var D=F.projection.type==="orthographic",R=O.camera._ortho;D!==R&&(O.glplot.redraw(),O.glplot.clearRGBA(),O.glplot.dispose(),O.initializeGLPlot())},b.isCameraChanged=function(P){var O=this,F=O.getCamera(),D=a.nestedProperty(P,O.id+".camera"),R=D.get();function U(ee,q,G,J){var le=["up","center","eye"],fe=["x","y","z"];return q[le[G]]&&ee[le[G]][fe[J]]===q[le[G]][fe[J]]}var N=!1;if(R===void 0)N=!0;else{for(var X=0;X<3;X++)for(var j=0;j<3;j++)if(!U(F,R,X,j)){N=!0;break}(!R.projection||F.projection&&F.projection.type!==R.projection.type)&&(N=!0)}return N},b.isAspectChanged=function(P){var O=this,F=O.glplot.getAspectratio(),D=a.nestedProperty(P,O.id+".aspectratio"),R=D.get();return R===void 0||R.x!==F.x||R.y!==F.y||R.z!==F.z},b.saveLayout=function(P){var O=this,F=O.fullLayout,D,R,U,N,X,j,ee=O.isCameraChanged(P),q=O.isAspectChanged(P),G=ee||q;if(G){var J={};if(ee&&(D=O.getCamera(),R=a.nestedProperty(P,O.id+".camera"),U=R.get(),J[O.id+".camera"]=U),q&&(N=O.glplot.getAspectratio(),X=a.nestedProperty(P,O.id+".aspectratio"),j=X.get(),J[O.id+".aspectratio"]=j),i.call("_storeDirectGUIEdit",P,F._preGUI,J),ee){R.set(D);var le=a.nestedProperty(F,O.id+".camera");le.set(D)}if(q){X.set(N);var fe=a.nestedProperty(F,O.id+".aspectratio");fe.set(N),O.glplot.redraw()}}return G},b.updateFx=function(P,O){var F=this,D=F.camera;if(D)if(P==="orbit")D.mode="orbit",D.keyBindingMode="rotate";else if(P==="turntable"){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=F.graphDiv,U=R._fullLayout,N=F.fullSceneLayout.camera,X=N.up.x,j=N.up.y,ee=N.up.z;if(ee/Math.sqrt(X*X+j*j+ee*ee)<.999){var q=F.id+".camera.up",G={x:0,y:0,z:1},J={};J[q]=G;var le=R.layout;i.call("_storeDirectGUIEdit",le,U._preGUI,J),N.up=G,a.nestedProperty(le,q).set(G)}}else D.keyBindingMode=P;F.fullSceneLayout.hovermode=O};function S(P,O,F){for(var D=0,R=F-1;D<R;++D,--R)for(var U=0;U<O;++U)for(var N=0;N<4;++N){var X=4*(O*D+U)+N,j=4*(O*R+U)+N,ee=P[X];P[X]=P[j],P[j]=ee}}function k(P,O,F){for(var D=0;D<F;++D)for(var R=0;R<O;++R){var U=4*(O*D+R),N=P[U+3];if(N>0)for(var X=255/N,j=0;j<3;++j)P[U+j]=Math.min(X*P[U+j],255)}}b.toImage=function(P){var O=this;P||(P="png"),O.staticMode&&O.container.appendChild(y),O.glplot.redraw();var F=O.glplot.gl,D=F.drawingBufferWidth,R=F.drawingBufferHeight;F.bindFramebuffer(F.FRAMEBUFFER,null);var U=new Uint8Array(D*R*4);F.readPixels(0,0,D,R,F.RGBA,F.UNSIGNED_BYTE,U),S(U,D,R),k(U,D,R);var N=document.createElement("canvas");N.width=D,N.height=R;var X=N.getContext("2d"),j=X.createImageData(D,R);j.data.set(U),X.putImageData(j,0,0);var ee;switch(P){case"jpeg":ee=N.toDataURL("image/jpeg");break;case"webp":ee=N.toDataURL("image/webp");break;default:ee=N.toDataURL("image/png")}return O.staticMode&&O.container.removeChild(y),ee},b.setConvert=function(){for(var P=this,O=0;O<3;O++){var F=P.fullSceneLayout[w[O]];n.setConvert(F,P.fullLayout),F.setScale=a.noop}},b.make4thDimension=function(){var P=this,O=P.graphDiv,F=O._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(P._mockAxis,F)},I.exports=A},{"../../../stackgl_modules":1120,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(e,I,B){I.exports=function(s,m,x,t){t=t||s.length;for(var i=new Array(t),a=0;a<t;a++)i[a]=[s[a],m[a],x[a]];return i}},{}],610:[function(e,I,B){var u=e("./font_attributes"),s=e("./animation_attributes"),m=e("../components/color/attributes"),x=e("../components/shapes/draw_newshape/attributes"),t=e("./pad_attributes"),i=e("../lib/extend").extendFlat,a=u({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=m.defaultLine,I.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:u({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:i(t({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:m.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:m.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:m.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:x.newshape,activeshape:x.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:i({},s.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:u({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(e,I,B){var u=e("../../lib/sort_object_keys"),s="1.10.1",m='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',x=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',m].join(" "),t=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),i=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:m,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:x,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:x,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:i,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=u(a);I.exports={requiredVersion:s,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+s+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":526}],612:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x){var t=m.split(" "),i=t[0],a=t[1],r=u.isArrayOrTypedArray(x)?u.mean(x):x,n=.5+r/100,f=1.5+r/100,l=["",""],o=[0,0];switch(i){case"top":l[0]="top",o[1]=-f;break;case"bottom":l[0]="bottom",o[1]=f;break}switch(a){case"left":l[1]="right",o[0]=-n;break;case"right":l[1]="left",o[0]=n;break}var c;return l[0]&&l[1]?c=l.join("-"):l[0]?c=l[0]:l[1]?c=l[1]:c="center",{anchor:c,offset:o}}},{"../../lib":503}],613:[function(e,I,B){var u=e("mapbox-gl/dist/mapbox-gl-unminified"),s=e("../../lib"),m=s.strTranslate,x=s.strScale,t=e("../../plots/get_data").getSubplotCalcData,i=e("../../constants/xmlns_namespaces"),a=e("@plotly/d3"),r=e("../../components/drawing"),n=e("../../lib/svg_text_utils"),f=e("./mapbox"),l="mapbox",o=B.constants=e("./constants");B.name=l,B.attr="subplot",B.idRoot=l,B.idRegex=B.attrRegex=s.counterRegex(l),B.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},B.layoutAttributes=e("./layout_attributes"),B.supplyLayoutDefaults=e("./layout_defaults"),B.plot=function(p){var y=p._fullLayout,g=p.calcdata,A=y._subplots[l];if(u.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var b=c(p,A);u.accessToken=b;for(var M=0;M<A.length;M++){var w=A[M],T=t(g,l,w),_=y[w],h=_._subplot;h||(h=new f(p,w),y[w]._subplot=h),h.viewInitial||(h.viewInitial={center:s.extendFlat({},_.center),zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),h.plot(T,y,p._promises)}},B.clean=function(d,p,y,g){for(var A=g._subplots[l]||[],b=0;b<A.length;b++){var M=A[b];!p[M]&&!!g[M]._subplot&&g[M]._subplot.destroy()}},B.toSVG=function(d){for(var p=d._fullLayout,y=p._subplots[l],g=p._size,A=0;A<y.length;A++){var b=p[y[A]],M=b.domain,w=b._subplot,T=w.toImage("png"),_=p._glimages.append("svg:image");_.attr({xmlns:i.svg,"xlink:href":T,x:g.l+g.w*M.x[0],y:g.t+g.h*(1-M.y[1]),width:g.w*(M.x[1]-M.x[0]),height:g.h*(M.y[1]-M.y[0]),preserveAspectRatio:"none"});var h=a.select(b._subplot.div),L=h.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var S=p._glimages.append("g");S.attr("transform",m(g.l+g.w*M.x[0]+10,g.t+g.h*(1-M.y[0])-31)),S.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=h.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=p._glimages.append("g"),O=P.append("text");O.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var F=r.bBox(O.node()),D=g.w*(M.x[1]-M.x[0]);if(F.width>D/2){var R=k.split("|").join("<br>");O.text(R).attr("data-unformatted",R).call(n.convertToTspans,d),F=r.bBox(O.node())}O.attr("transform",m(-3,-F.height+8)),P.insert("rect",".static-attribution").attr({x:-F.width-6,y:-F.height-3,width:F.width+6,height:F.height+3,fill:"rgba(255, 255, 255, 0.75)"});var U=1;F.width+6>D&&(U=D/(F.width+6));var N=[g.l+g.w*M.x[1],g.t+g.h*(1-M.y[0])];P.attr("transform",m(N[0],N[1])+x(U))}};function c(d,p){var y=d._fullLayout,g=d._context;if(g.mapboxAccessToken==="")return"";for(var A=[],b=[],M=!1,w=!1,T=0;T<p.length;T++){var _=y[p[T]],h=_.accesstoken;v(_.style)&&(h?s.pushUnique(A,h):(v(_._input.style)&&(s.error("Uses Mapbox map style, but did not set an access token."),M=!0),w=!0)),h&&s.pushUnique(b,h)}if(w){var L=M?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw s.error(L),new Error(L)}return A.length?(A.length>1&&s.warn(o.multipleTokensErrorMsg),A[0]):(b.length&&s.log(["Listed mapbox access token(s)",b.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function v(d){return typeof d=="string"&&(o.styleValuesMapbox.indexOf(d)!==-1||d.indexOf("mapbox://")===0)}B.updateFx=function(d){for(var p=d._fullLayout,y=p._subplots[l],g=0;g<y.length;g++){var A=p[y[g]]._subplot;A.updateFx(p)}}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(e,I,B){var u=e("../../lib"),s=e("../../lib/svg_text_utils").sanitizeHTML,m=e("./convert_text_opts"),x=e("./constants");function t(f,l){this.subplot=f,this.uid=f.uid+"-"+l,this.index=l,this.idSource="source-"+this.uid,this.idLayer=x.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var i=t.prototype;i.update=function(l){this.visible?this.needsNewImage(l)?this.updateImage(l):this.needsNewSource(l)?(this.removeLayer(),this.updateSource(l),this.updateLayer(l)):this.needsNewLayer(l)?this.updateLayer(l):this.updateStyle(l):(this.updateSource(l),this.updateLayer(l)),this.visible=a(l)},i.needsNewImage=function(f){var l=this.subplot.map;return l.getSource(this.idSource)&&this.sourceType==="image"&&f.sourcetype==="image"&&(this.source!==f.source||JSON.stringify(this.coordinates)!==JSON.stringify(f.coordinates))},i.needsNewSource=function(f){return this.sourceType!==f.sourcetype||JSON.stringify(this.source)!==JSON.stringify(f.source)||this.layerType!==f.type},i.needsNewLayer=function(f){return this.layerType!==f.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},i.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},i.updateImage=function(f){var l=this.subplot.map;l.getSource(this.idSource).updateImage({url:f.source,coordinates:f.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());o!==null&&this.subplot.map.moveLayer(this.idLayer,o)},i.updateSource=function(f){var l=this.subplot.map;if(l.getSource(this.idSource)&&l.removeSource(this.idSource),this.sourceType=f.sourcetype,this.source=f.source,!!a(f)){var o=n(f);l.addSource(this.idSource,o)}},i.findFollowingMapboxLayerId=function(f){if(f==="traces")for(var l=this.subplot.getMapLayers(),o=0;o<l.length;o++){var c=l[o].id;if(typeof c=="string"&&c.indexOf(x.traceLayerPrefix)===0){f=c;break}}return f},i.updateLayer=function(f){var l=this.subplot,o=r(f),c=this.lookupBelow(),v=this.findFollowingMapboxLayerId(c);this.removeLayer(),a(f)&&l.addLayer({id:this.idLayer,source:this.idSource,"source-layer":f.sourcelayer||"",type:f.type,minzoom:f.minzoom,maxzoom:f.maxzoom,layout:o.layout,paint:o.paint},v),this.layerType=f.type,this.below=c},i.updateStyle=function(f){if(a(f)){var l=r(f);this.subplot.setOptions(this.idLayer,"setLayoutProperty",l.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",l.paint)}},i.removeLayer=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer)},i.dispose=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer),f.getSource(this.idSource)&&f.removeSource(this.idSource)};function a(f){if(!f.visible)return!1;var l=f.source;if(Array.isArray(l)&&l.length>0){for(var o=0;o<l.length;o++)if(typeof l[o]!="string"||l[o].length===0)return!1;return!0}return u.isPlainObject(l)||typeof l=="string"&&l.length>0}function r(f){var l={},o={};switch(f.type){case"circle":u.extendFlat(o,{"circle-radius":f.circle.radius,"circle-color":f.color,"circle-opacity":f.opacity});break;case"line":u.extendFlat(o,{"line-width":f.line.width,"line-color":f.color,"line-opacity":f.opacity,"line-dasharray":f.line.dash});break;case"fill":u.extendFlat(o,{"fill-color":f.color,"fill-outline-color":f.fill.outlinecolor,"fill-opacity":f.opacity});break;case"symbol":var c=f.symbol,v=m(c.textposition,c.iconsize);u.extendFlat(l,{"icon-image":c.icon+"-15","icon-size":c.iconsize/10,"text-field":c.text,"text-size":c.textfont.size,"text-anchor":v.anchor,"text-offset":v.offset,"symbol-placement":c.placement}),u.extendFlat(o,{"icon-color":f.color,"text-color":c.textfont.color,"text-opacity":f.opacity});break;case"raster":u.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":f.opacity});break}return{layout:l,paint:o}}function n(f){var l=f.sourcetype,o=f.source,c={type:l},v;return l==="geojson"?v="data":l==="vector"?v=typeof o=="string"?"url":"tiles":l==="raster"?(v="tiles",c.tileSize=256):l==="image"&&(v="url",c.coordinates=f.coordinates),c[v]=o,f.sourceattribution&&(c.attribution=s(f.sourceattribution)),c}I.exports=function(l,o,c){var v=new t(l,o);return v.update(c),v}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color").defaultLine,m=e("../domain").attributes,x=e("../font_attributes"),t=e("../../traces/scatter/attributes").textposition,i=e("../../plot_api/edit_types").overrideAll,a=e("../../plot_api/plot_template").templatedArray,r=e("./constants"),n=x({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var f=I.exports=i({_arrayAttrRegexps:[u.counterRegex("mapbox",".layers",!0)],domain:m({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:s},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:s}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:u.extendFlat({},t,{arrayOk:!1})}})},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(e,I,B){var u=e("../../lib"),s=e("../subplot_defaults"),m=e("../array_container_defaults"),x=e("./layout_attributes");I.exports=function(r,n,f){s(r,n,f,{type:"mapbox",attributes:x,handleDefaults:t,partition:"y",accessToken:n._mapboxAccessToken})};function t(a,r,n,f){n("accesstoken",f.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),m(a,r,{name:"layers",handleItemDefaults:i}),r._input=a}function i(a,r){function n(d,p){return u.coerce(a,r,x.layers,d,p)}var f=n("visible");if(f){var l=n("sourcetype"),o=l==="raster"||l==="image";n("source"),n("sourceattribution"),l==="vector"&&n("sourcelayer"),l==="image"&&n("coordinates");var c;o&&(c="raster");var v=n("type",c);o&&v!=="raster"&&(v=r.type="raster",u.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),v==="circle"&&n("circle.radius"),v==="line"&&(n("line.width"),n("line.dash")),v==="fill"&&n("fill.outlinecolor"),v==="symbol"&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),u.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(e,I,B){var u=e("mapbox-gl/dist/mapbox-gl-unminified"),s=e("../../lib"),m=e("../../lib/geo_location_utils"),x=e("../../registry"),t=e("../cartesian/axes"),i=e("../../components/dragelement"),a=e("../../components/fx"),r=e("../../components/dragelement/helpers"),n=r.rectMode,f=r.drawMode,l=r.selectMode,o=e("../cartesian/select").prepSelect,c=e("../cartesian/select").clearSelect,v=e("../cartesian/select").clearSelectionsCache,d=e("../cartesian/select").selectOnClick,p=e("./constants"),y=e("./layers");function g(_,h){this.id=h,this.gd=_;var L=_._fullLayout,S=_._context;this.container=L._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=L._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(L),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var A=g.prototype;A.plot=function(_,h,L){var S=this,k=h[S.id];S.map&&k.accesstoken!==S.accessToken&&(S.map.remove(),S.map=null,S.styleObj=null,S.traceHash={},S.layerList=[]);var P;S.map?P=new Promise(function(O,F){S.updateMap(_,h,O,F)}):P=new Promise(function(O,F){S.createMap(_,h,O,F)}),L.push(P)},A.createMap=function(_,h,L,S){var k=this,P=h[k.id],O=k.styleObj=M(P.style);k.accessToken=P.accesstoken;var F=k.map=new u.Map({container:k.div,style:O.style,center:T(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new u.AttributionControl({compact:!0}));F._canvas.style.left="0px",F._canvas.style.top="0px",k.rejectOnError(S),k.isStatic||k.initFx(_,h);var D=[];D.push(new Promise(function(R){F.once("load",R)})),D=D.concat(m.fetchTraceGeoData(_)),Promise.all(D).then(function(){k.fillBelowLookup(_,h),k.updateData(_),k.updateLayout(h),k.resolveOnRender(L)}).catch(S)},A.updateMap=function(_,h,L,S){var k=this,P=k.map,O=h[this.id];k.rejectOnError(S);var F=[],D=M(O.style);JSON.stringify(k.styleObj)!==JSON.stringify(D)&&(k.styleObj=D,P.setStyle(D.style),k.traceHash={},F.push(new Promise(function(R){P.once("styledata",R)}))),F=F.concat(m.fetchTraceGeoData(_)),Promise.all(F).then(function(){k.fillBelowLookup(_,h),k.updateData(_),k.updateLayout(h),k.resolveOnRender(L)}).catch(S)},A.fillBelowLookup=function(_,h){var L=h[this.id],S=L.layers,k,P,O=this.belowLookup={},F=!1;for(k=0;k<_.length;k++){var D=_[k][0].trace,R=D._module;typeof D.below=="string"?P=D.below:R.getBelow&&(P=R.getBelow(D,this)),P===""&&(F=!0),O["trace-"+D.uid]=P||""}for(k=0;k<S.length;k++){var U=S[k];typeof U.below=="string"?P=U.below:F?P="traces":P="",O["layout-"+k]=P}var N={},X,j;for(X in O)P=O[X],N[P]?N[P].push(X):N[P]=[X];for(P in N){var ee=N[P];if(ee.length>1)for(k=0;k<ee.length;k++)X=ee[k],X.indexOf("trace-")===0?(j=X.split("trace-")[1],this.traceHash[j]&&(this.traceHash[j].below=null)):X.indexOf("layout-")===0&&(j=X.split("layout-")[1],this.layerList[j]&&(this.layerList[j].below=null))}};var b={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};A.updateData=function(_){var h=this.traceHash,L,S,k,P,O=_.slice().sort(function(N,X){return b[N[0].trace.type]-b[X[0].trace.type]});for(k=0;k<O.length;k++){var F=O[k];S=F[0].trace,L=h[S.uid];var D=!1;L&&(L.type===S.type?(L.update(F),D=!0):L.dispose()),!D&&S._module&&(h[S.uid]=S._module.plot(this,F))}var R=Object.keys(h);e:for(k=0;k<R.length;k++){var U=R[k];for(P=0;P<_.length;P++)if(S=_[P][0].trace,U===S.uid)continue e;L=h[U],L.dispose(),delete h[U]}},A.updateLayout=function(_){var h=this.map,L=_[this.id];!this.dragging&&!this.wheeling&&(h.setCenter(T(L.center)),h.setZoom(L.zoom),h.setBearing(L.bearing),h.setPitch(L.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?h.scrollZoom.enable():h.scrollZoom.disable()},A.resolveOnRender=function(_){var h=this.map;h.on("render",function L(){h.loaded()&&(h.off("render",L),setTimeout(_,10))})},A.rejectOnError=function(_){var h=this.map;function L(){_(new Error(p.mapOnErrorMsg))}h.once("error",L),h.once("style.error",L),h.once("source.error",L),h.once("tile.error",L),h.once("layer.error",L)},A.createFramework=function(_){var h=this,L=h.div=document.createElement("div");L.id=h.uid,L.style.position="absolute",h.container.appendChild(L),h.xaxis={_id:"x",c2p:function(S){return h.project(S).x}},h.yaxis={_id:"y",c2p:function(S){return h.project(S).y}},h.updateFramework(_),h.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(h.mockAxis,_)},A.initFx=function(_,h){var L=this,S=L.gd,k=L.map;k.on("moveend",function(F){if(!!L.map){var D=S._fullLayout;if(F.originalEvent||L.wheeling){var R=D[L.id];x.call("_storeDirectGUIEdit",S.layout,D._preGUI,L.getViewEdits(R));var U=L.getView();R._input.center=R.center=U.center,R._input.zoom=R.zoom=U.zoom,R._input.bearing=R.bearing=U.bearing,R._input.pitch=R.pitch=U.pitch,S.emit("plotly_relayout",L.getViewEditsWithDerived(U))}F.originalEvent&&F.originalEvent.type==="mouseup"?L.dragging=!1:L.wheeling&&(L.wheeling=!1),D._rehover&&D._rehover()}}),k.on("wheel",function(){L.wheeling=!0}),k.on("mousemove",function(F){var D=L.div.getBoundingClientRect(),R=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return D},L.xaxis.p2c=function(){return k.unproject(R).lng},L.yaxis.p2c=function(){return k.unproject(R).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===L.id&&S._fullLayout[L.id]&&a.hover(S,F,L.id)},a.hover(S,F,L.id),S._fullLayout._hoversubplot=L.id});function P(){a.loneUnhover(h._hoverlayer)}k.on("dragstart",function(){L.dragging=!0,P()}),k.on("zoomstart",P),k.on("mouseout",function(){S._fullLayout._hoversubplot=null});function O(){var F=L.getView();S.emit("plotly_relayouting",L.getViewEditsWithDerived(F))}k.on("drag",O),k.on("zoom",O),k.on("dblclick",function(){var F=S._fullLayout[L.id];x.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,L.getViewEdits(F));var D=L.viewInitial;k.setCenter(T(D.center)),k.setZoom(D.zoom),k.setBearing(D.bearing),k.setPitch(D.pitch);var R=L.getView();F._input.center=F.center=R.center,F._input.zoom=F.zoom=R.zoom,F._input.bearing=F.bearing=R.bearing,F._input.pitch=F.pitch=R.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",L.getViewEditsWithDerived(R))}),L.clearSelect=function(){v(L.dragOptions),c(L.dragOptions.gd)},L.onClickInPanFn=function(F){return function(D){var R=S._fullLayout.clickmode;R.indexOf("select")>-1&&d(D.originalEvent,S,[L.xaxis],[L.yaxis],L.id,F),R.indexOf("event")>-1&&a.click(S,D.originalEvent)}}},A.updateFx=function(_){var h=this,L=h.map,S=h.gd;if(h.isStatic)return;function k(D){var R=h.map.unproject(D);return[R.lng,R.lat]}var P=_.dragmode,O;n(P)?O=function(D,R){var U=D.range={};U[h.id]=[k([R.xmin,R.ymin]),k([R.xmax,R.ymax])]}:O=function(D,R,U){var N=D.lassoPoints={};N[h.id]=U.filtered.map(k)};var F=h.dragOptions;h.dragOptions=s.extendDeep(F||{},{dragmode:_.dragmode,element:h.div,gd:S,plotinfo:{id:h.id,domain:_[h.id].domain,xaxis:h.xaxis,yaxis:h.yaxis,fillRangeItems:O},xaxes:[h.xaxis],yaxes:[h.yaxis],subplot:h.id}),L.off("click",h.onClickInPanHandler),l(P)||f(P)?(L.dragPan.disable(),L.on("zoomstart",h.clearSelect),h.dragOptions.prepFn=function(D,R,U){o(D,R,U,h.dragOptions,P)},i.init(h.dragOptions)):(L.dragPan.enable(),L.off("zoomstart",h.clearSelect),h.div.onmousedown=null,h.onClickInPanHandler=h.onClickInPanFn(h.dragOptions),L.on("click",h.onClickInPanHandler))},A.updateFramework=function(_){var h=_[this.id].domain,L=_._size,S=this.div.style;S.width=L.w*(h.x[1]-h.x[0])+"px",S.height=L.h*(h.y[1]-h.y[0])+"px",S.left=L.l+h.x[0]*L.w+"px",S.top=L.t+(1-h.y[1])*L.h+"px",this.xaxis._offset=L.l+h.x[0]*L.w,this.xaxis._length=L.w*(h.x[1]-h.x[0]),this.yaxis._offset=L.t+(1-h.y[1])*L.h,this.yaxis._length=L.h*(h.y[1]-h.y[0])},A.updateLayers=function(_){var h=_[this.id],L=h.layers,S=this.layerList,k;if(L.length!==S.length){for(k=0;k<S.length;k++)S[k].dispose();for(S=this.layerList=[],k=0;k<L.length;k++)S.push(y(this,k,L[k]))}else for(k=0;k<L.length;k++)S[k].update(L[k])},A.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},A.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},A.setOptions=function(_,h,L){for(var S in L)this.map[h](_,S,L[S])},A.getMapLayers=function(){return this.map.getStyle().layers},A.addLayer=function(_,h){var L=this.map;if(typeof h=="string"){if(h===""){L.addLayer(_,h);return}for(var S=this.getMapLayers(),k=0;k<S.length;k++)if(h===S[k].id){L.addLayer(_,h);return}s.warn(["Trying to add layer with *below* value",h,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}L.addLayer(_)},A.project=function(_){return this.map.project(new u.LngLat(_[0],_[1]))},A.getView=function(){var _=this.map,h=_.getCenter(),L=h.lng,S=h.lat,k={lon:L,lat:S},P=_.getCanvas(),O=parseInt(P.style.width),F=parseInt(P.style.height);return{center:k,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([O,0]).toArray(),_.unproject([O,F]).toArray(),_.unproject([0,F]).toArray()]}}},A.getViewEdits=function(_){for(var h=this.id,L=["center","zoom","bearing","pitch"],S={},k=0;k<L.length;k++){var P=L[k];S[h+"."+P]=_[P]}return S},A.getViewEditsWithDerived=function(_){var h=this.id,L=this.getViewEdits(_);return L[h+"._derived"]=_._derived,L};function M(_){var h={};return s.isPlainObject(_)?(h.id=_.id,h.style=_):typeof _=="string"?(h.id=_,p.styleValuesMapbox.indexOf(_)!==-1?h.style=w(_):p.stylesNonMapbox[_]?h.style=p.stylesNonMapbox[_]:h.style=_):(h.id=p.styleValueDflt,h.style=w(p.styleValueDflt)),h.transition={duration:0,delay:0},h}function w(_){return p.styleUrlPrefix+_+"-"+p.styleUrlSuffix}function T(_){return[_.lon,_.lat]}I.exports=g},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(e,I,B){I.exports=function(u){var s=u.editType;return{t:{valType:"number",dflt:0,editType:s},r:{valType:"number",dflt:0,editType:s},b:{valType:"number",dflt:0,editType:s},l:{valType:"number",dflt:0,editType:s},editType:s}}},{}],619:[function(e,I,B){var u=e("@plotly/d3"),s=e("d3-time-format").timeFormatLocale,m=e("d3-format").formatLocale,x=e("fast-isnumeric"),t=e("../registry"),i=e("../plot_api/plot_schema"),a=e("../plot_api/plot_template"),r=e("../lib"),n=e("../components/color"),f=e("../constants/numerical").BADNUM,l=e("./cartesian/axis_ids"),o=e("./cartesian/handle_outline").clearSelect,c=e("./animation_attributes"),v=e("./frame_attributes"),d=e("../plots/get_data").getModuleCalcData,p=r.relinkPrivateKeys,y=r._,g=I.exports={};r.extendFlat(g,t),g.attributes=e("./attributes"),g.attributes.type.values=g.allTypes,g.fontAttrs=e("./font_attributes"),g.layoutAttributes=e("./layout_attributes"),g.fontWeight="normal";var A=g.transformsRegistry,b=e("./command");g.executeAPICommand=b.executeAPICommand,g.computeAPICommandBindings=b.computeAPICommandBindings,g.manageCommandObserver=b.manageCommandObserver,g.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings,g.redrawText=function(V){return V=r.getGraphDiv(V),new Promise(function(Y){setTimeout(function(){!V._fullLayout||(t.getComponentMethod("annotations","draw")(V),t.getComponentMethod("legend","draw")(V),t.getComponentMethod("colorbar","draw")(V),Y(g.previousPromises(V)))},300)})},g.resize=function(V){V=r.getGraphDiv(V);var Y,ne=new Promise(function(te,K){(!V||r.isHidden(V))&&K(new Error("Resize must be passed a displayed plot div element.")),V._redrawTimer&&clearTimeout(V._redrawTimer),V._resolveResize&&(Y=V._resolveResize),V._resolveResize=te,V._redrawTimer=setTimeout(function(){if(!V.layout||V.layout.width&&V.layout.height||r.isHidden(V)){te(V);return}delete V.layout.width,delete V.layout.height;var $=V.changed;V.autoplay=!0,t.call("relayout",V,{autosize:!0}).then(function(){V.changed=$,V._resolveResize===te&&(delete V._resolveResize,te(V))})},100)});return Y&&Y(ne),ne},g.previousPromises=function(V){if((V._promises||[]).length)return Promise.all(V._promises).then(function(){V._promises=[]})},g.addLinks=function(V){if(!(!V._context.showLink&&!V._context.showSources)){var Y=V._fullLayout,ne=r.ensureSingle(Y._paper,"text","js-plot-link-container",function(oe){oe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var ue=u.select(this);ue.append("tspan").classed("js-link-to-tool",!0),ue.append("tspan").classed("js-link-spacer",!0),ue.append("tspan").classed("js-sourcelinks",!0)})}),te=ne.node(),K={y:Y._paper.attr("height")-9};document.body.contains(te)&&te.getComputedTextLength()>=Y.width-20?(K["text-anchor"]="start",K.x=5):(K["text-anchor"]="end",K.x=Y._paper.attr("width")-7),ne.attr(K);var $=ne.select(".js-link-to-tool"),ae=ne.select(".js-link-spacer"),ie=ne.select(".js-sourcelinks");V._context.showSources&&V._context.showSources(V),V._context.showLink&&M(V,$),ae.text($.text()&&ie.text()?" - ":"")}};function M(V,Y){Y.text("");var ne=Y.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(V._context.linkText+" "+String.fromCharCode(187));if(V._context.sendData)ne.on("click",function(){g.sendDataToCloud(V)});else{var te=window.location.pathname.split("/"),K=window.location.search;ne.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+te[2].split(".")[0]+"/"+te[1]+K})}}g.sendDataToCloud=function(V){var Y=(window.PLOTLYENV||{}).BASE_URL||V._context.plotlyServerURL;if(!!Y){V.emit("plotly_beforeexport");var ne=u.select(V).append("div").attr("id","hiddenform").style("display","none"),te=ne.append("form").attr({action:Y+"/external",method:"post",target:"_blank"}),K=te.append("input").attr({type:"text",name:"data"});return K.node().value=g.graphJson(V,!1,"keepdata"),te.node().submit(),ne.remove(),V.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],T=["year","month","dayMonth","dayMonthYear"];g.supplyDefaults=function(V,Y){var ne=Y&&Y.skipUpdateCalc,te=V._fullLayout||{};if(te._skipDefaults){delete te._skipDefaults;return}var K=V._fullLayout={},$=V.layout||{},ae=V._fullData||[],ie=V._fullData=[],oe=V.data||[],ue=V.calcdata||[],xe=V._context||{},he;V._transitionData||g.createTransitionData(V),K._dfltTitle={plot:y(V,"Click to enter Plot title"),x:y(V,"Click to enter X axis title"),y:y(V,"Click to enter Y axis title"),colorbar:y(V,"Click to enter Colorscale title"),annotation:y(V,"new text")},K._traceWord=y(V,"trace");var me=L(V,w);if(K._mapboxAccessToken=xe.mapboxAccessToken,te._initialAutoSizeIsDone){var be=te.width,Ce=te.height;g.supplyLayoutGlobalDefaults($,K,me),$.width||(K.width=be),$.height||(K.height=Ce),g.sanitizeMargins(K)}else{g.supplyLayoutGlobalDefaults($,K,me);var Se=!$.width||!$.height,Be=K.autosize,Ye=xe.autosizable,Xe=Se&&(Be||Ye);Xe?g.plotAutoSize(V,$,K):Se&&g.sanitizeMargins(K),!Be&&Se&&($.width=K.width,$.height=K.height)}K._d3locale=S(me,K.separators),K._extraFormat=L(V,T),K._initialAutoSizeIsDone=!0,K._dataLength=oe.length,K._modules=[],K._visibleModules=[],K._basePlotModules=[];var Te=K._subplots=h(),Ie=K._splomAxes={x:{},y:{}},Ze=K._splomSubplots={};K._splomGridDflt={},K._scatterStackOpts={},K._firstScatter={},K._alignmentOpts={},K._colorAxes={},K._requestRangeslider={},K._traceUids=_(ae,oe),K._globalTransforms=(V._context||{}).globalTransforms,g.supplyDataDefaults(oe,ie,$,K);var rt=Object.keys(Ie.x),Ge=Object.keys(Ie.y);if(rt.length>1&&Ge.length>1){for(t.getComponentMethod("grid","sizeDefaults")($,K),he=0;he<rt.length;he++)r.pushUnique(Te.xaxis,rt[he]);for(he=0;he<Ge.length;he++)r.pushUnique(Te.yaxis,Ge[he]);for(var ze in Ze)r.pushUnique(Te.cartesian,ze)}if(K._has=g._hasPlotType.bind(K),ae.length===ie.length)for(he=0;he<ie.length;he++)p(ie[he],ae[he]);g.supplyLayoutModuleDefaults($,K,ie,V._transitionData);var We=K._visibleModules,mt=[];for(he=0;he<We.length;he++){var Ft=We[he].crossTraceDefaults;Ft&&r.pushUnique(mt,Ft)}for(he=0;he<mt.length;he++)mt[he](ie,K);K._hasOnlyLargeSploms=K._basePlotModules.length===1&&K._basePlotModules[0].name==="splom"&&rt.length>15&&Ge.length>15&&K.shapes.length===0&&K.images.length===0,g.linkSubplots(ie,K,ae,te),g.cleanPlot(ie,K,ae,te);var Xt=!!(te._has&&te._has("gl2d")),Pt=!!(K._has&&K._has("gl2d")),Ut=!!(te._has&&te._has("cartesian")),Gt=!!(K._has&&K._has("cartesian")),It=Ut||Xt,Ct=Gt||Pt;It&&!Ct?te._bgLayer.remove():Ct&&!It&&(K._shouldCreateBgLayer=!0),te._zoomlayer&&!V._dragging&&o({_fullLayout:te}),k(ie,K),p(K,te),t.getComponentMethod("colorscale","crossTraceDefaults")(ie,K),K._preGUI||(K._preGUI={}),K._tracePreGUI||(K._tracePreGUI={});var lt=K._tracePreGUI,dt={},et;for(et in lt)dt[et]="old";for(he=0;he<ie.length;he++)et=ie[he]._fullInput.uid,dt[et]||(lt[et]={}),dt[et]="new";for(et in dt)dt[et]==="old"&&delete lt[et];R(K),t.getComponentMethod("rangeslider","makeData")(K),!ne&&ue.length===ie.length&&g.supplyDefaultsUpdateCalc(ue,ie)},g.supplyDefaultsUpdateCalc=function(V,Y){for(var ne=0;ne<Y.length;ne++){var te=Y[ne],K=(V[ne]||[])[0];if(K&&K.trace){var $=K.trace;if($._hasCalcTransform){var ae=$._arrayAttrs,ie,oe,ue;for(ie=0;ie<ae.length;ie++)oe=ae[ie],ue=r.nestedProperty($,oe).get().slice(),r.nestedProperty(te,oe).set(ue)}K.trace=te}}};function _(V,Y){var ne=Y.length,te=[],K,$;for(K=0;K<V.length;K++){var ae=V[K]._fullInput;ae!==$&&te.push(ae),$=ae}var ie=te.length,oe=new Array(ne),ue={};function xe(be,Ce){oe[Ce]=be,ue[be]=1}function he(be,Ce){if(be&&typeof be=="string"&&!ue[be])return xe(be,Ce),!0}for(K=0;K<ne;K++){var me=Y[K].uid;typeof me=="number"&&(me=String(me)),!he(me,K)&&(K<ie&&he(te[K].uid,K)||xe(r.randstr(ue),K))}return oe}function h(){var V=t.collectableSubplotTypes,Y={},ne,te;if(!V){V=[];var K=t.subplotsRegistry;for(var $ in K){var ae=K[$],ie=ae.attr;if(ie&&(V.push($),Array.isArray(ie)))for(te=0;te<ie.length;te++)r.pushUnique(V,ie[te])}}for(ne=0;ne<V.length;ne++)Y[V[ne]]=[];return Y}function L(V,Y){var ne=V._context.locale;ne||(ne="en-US");var te=!1,K={};function $(he){for(var me=!0,be=0;be<Y.length;be++){var Ce=Y[be];K[Ce]||(he[Ce]?K[Ce]=he[Ce]:me=!1)}me&&(te=!0)}for(var ae=0;ae<2;ae++){for(var ie=V._context.locales,oe=0;oe<2;oe++){var ue=(ie[ne]||{}).format;if(ue&&($(ue),te))break;ie=t.localeRegistry}var xe=ne.split("-")[0];if(te||xe===ne)break;ne=xe}return te||$(t.localeRegistry.en.format),K}function S(V,Y){return V.decimal=Y.charAt(0),V.thousands=Y.charAt(1),{numberFormat:function(ne){try{ne=m(V).format(r.adjustFormat(ne))}catch{return r.warnBadFormat(ne),r.noFormat}return ne},timeFormat:s(V).utcFormat}}function k(V,Y){var ne,te=[];Y.meta&&(ne=Y._meta={meta:Y.meta,layout:{meta:Y.meta}});for(var K=0;K<V.length;K++){var $=V[K];$.meta?te[$.index]=$._meta={meta:$.meta}:Y.meta&&($._meta={meta:Y.meta}),Y.meta&&($._meta.layout={meta:Y.meta})}te.length&&(ne||(ne=Y._meta={}),ne.data=te)}g.createTransitionData=function(V){V._transitionData||(V._transitionData={}),V._transitionData._frames||(V._transitionData._frames=[]),V._transitionData._frameHash||(V._transitionData._frameHash={}),V._transitionData._counter||(V._transitionData._counter=0),V._transitionData._interruptCallbacks||(V._transitionData._interruptCallbacks=[])},g._hasPlotType=function(V){var Y,ne=this._basePlotModules||[];for(Y=0;Y<ne.length;Y++)if(ne[Y].name===V)return!0;var te=this._modules||[];for(Y=0;Y<te.length;Y++){var K=te[Y].name;if(K===V)return!0;var $=t.modules[K];if($&&$.categories[V])return!0}return!1},g.cleanPlot=function(V,Y,ne,te){var K,$,ae=te._basePlotModules||[];for(K=0;K<ae.length;K++){var ie=ae[K];ie.clean&&ie.clean(V,Y,ne,te)}var oe=te._has&&te._has("gl"),ue=Y._has&&Y._has("gl");oe&&!ue&&te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.selectAll(".no-webgl").remove(),te._glcanvas=null);var xe=!!te._infolayer;e:for(K=0;K<ne.length;K++){var he=ne[K],me=he.uid;for($=0;$<V.length;$++){var be=V[$];if(me===be.uid)continue e}xe&&te._infolayer.select(".cb"+me).remove()}},g.linkSubplots=function(V,Y,ne,te){var K,$,ae=te._plots||{},ie=Y._plots={},oe=Y._subplots,ue={_fullData:V,_fullLayout:Y},xe=oe.cartesian.concat(oe.gl2d||[]);for(K=0;K<xe.length;K++){var he=xe[K],me=ae[he],be=l.getFromId(ue,he,"x"),Ce=l.getFromId(ue,he,"y"),Se;for(me?Se=ie[he]=me:(Se=ie[he]={},Se.id=he),be._counterAxes.push(Ce._id),Ce._counterAxes.push(be._id),be._subplotsWith.push(he),Ce._subplotsWith.push(he),Se.xaxis=be,Se.yaxis=Ce,Se._hasClipOnAxisFalse=!1,$=0;$<V.length;$++){var Be=V[$];if(Be.xaxis===Se.xaxis._id&&Be.yaxis===Se.yaxis._id&&Be.cliponaxis===!1){Se._hasClipOnAxisFalse=!0;break}}}var Ye=l.list(ue,null,!0),Xe;for(K=0;K<Ye.length;K++){Xe=Ye[K];var Te=null;Xe.overlaying&&(Te=l.getFromId(ue,Xe.overlaying),Te&&Te.overlaying&&(Xe.overlaying=!1,Te=null)),Xe._mainAxis=Te||Xe,Te&&(Xe.domain=Te.domain.slice()),Xe._anchorAxis=Xe.anchor==="free"?null:l.getFromId(ue,Xe.anchor)}for(K=0;K<Ye.length;K++)if(Xe=Ye[K],Xe._counterAxes.sort(l.idSort),Xe._subplotsWith.sort(r.subplotSort),Xe._mainSubplot=P(Xe,Y),Xe._counterAxes.length&&(Xe.spikemode&&Xe.spikemode.indexOf("across")!==-1||Xe.automargin&&Xe.mirror&&Xe.anchor!=="free"||t.getComponentMethod("rangeslider","isVisible")(Xe))){var Ie=1,Ze=0;for($=0;$<Xe._counterAxes.length;$++){var rt=l.getFromId(ue,Xe._counterAxes[$]);Ie=Math.min(Ie,rt.domain[0]),Ze=Math.max(Ze,rt.domain[1])}Ie<Ze&&(Xe._counterDomainMin=Ie,Xe._counterDomainMax=Ze)}};function P(V,Y){var ne={_fullLayout:Y},te=V._id.charAt(0)==="x",K=V._mainAxis._anchorAxis,$="",ae="",ie="";if(K&&(ie=K._mainAxis._id,$=te?V._id+ie:ie+V._id),!$||!Y._plots[$]){$="";for(var oe=V._counterAxes,ue=0;ue<oe.length;ue++){var xe=oe[ue],he=te?V._id+xe:xe+V._id;ae||(ae=he);var me=l.getFromId(ne,xe);if(ie&&me.overlaying===ie){$=he;break}}}return $||ae}g.clearExpandedTraceDefaultColors=function(V){var Y,ne,te;function K(ae,ie,oe,ue){ne[ue]=ie,ne.length=ue+1,ae.valType==="color"&&ae.dflt===void 0&&Y.push(ne.join("."))}for(ne=[],Y=V._module._colorAttrs,Y||(V._module._colorAttrs=Y=[],i.crawl(V._module.attributes,K)),te=0;te<Y.length;te++){var $=r.nestedProperty(V,"_input."+Y[te]);$.get()||r.nestedProperty(V,Y[te]).set(null)}},g.supplyDataDefaults=function(V,Y,ne,te){var K=te._modules,$=te._visibleModules,ae=te._basePlotModules,ie=0,oe=0,ue,xe,he;te._transformModules=[];function me(Ge){Y.push(Ge);var ze=Ge._module;!ze||(r.pushUnique(K,ze),Ge.visible===!0&&r.pushUnique($,ze),r.pushUnique(ae,Ge._module.basePlotModule),ie++,Ge._input.visible!==!1&&oe++)}var be={},Ce=[],Se=(ne.template||{}).data||{},Be=a.traceTemplater(Se);for(ue=0;ue<V.length;ue++){if(he=V[ue],xe=Be.newTrace(he),xe.uid=te._traceUids[ue],g.supplyTraceDefaults(he,xe,oe,te,ue),xe.index=ue,xe._input=he,xe._expandedIndex=ie,xe.transforms&&xe.transforms.length)for(var Ye=he.visible!==!1&&xe.visible===!1,Xe=F(xe,Y,ne,te),Te=0;Te<Xe.length;Te++){var Ie=Xe[Te],Ze={_template:xe._template,type:xe.type,uid:xe.uid+Te};Ye&&Ie.visible===!1&&delete Ie.visible,g.supplyTraceDefaults(Ie,Ze,ie,te,ue),p(Ze,Ie),Ze.index=ue,Ze._input=he,Ze._fullInput=xe,Ze._expandedIndex=ie,Ze._expandedInput=Ie,me(Ze)}else xe._fullInput=xe,xe._expandedInput=xe,me(xe);t.traceIs(xe,"carpetAxis")&&(be[xe.carpet]=xe),t.traceIs(xe,"carpetDependent")&&Ce.push(ue)}for(ue=0;ue<Ce.length;ue++)if(xe=Y[Ce[ue]],!!xe.visible){var rt=be[xe.carpet];if(xe._carpet=rt,!rt||!rt.visible){xe.visible=!1;continue}xe.xaxis=rt.xaxis,xe.yaxis=rt.yaxis}},g.supplyAnimationDefaults=function(V){V=V||{};var Y,ne={};function te(K,$){return r.coerce(V||{},ne,c,K,$)}if(te("mode"),te("direction"),te("fromcurrent"),Array.isArray(V.frame))for(ne.frame=[],Y=0;Y<V.frame.length;Y++)ne.frame[Y]=g.supplyAnimationFrameDefaults(V.frame[Y]||{});else ne.frame=g.supplyAnimationFrameDefaults(V.frame||{});if(Array.isArray(V.transition))for(ne.transition=[],Y=0;Y<V.transition.length;Y++)ne.transition[Y]=g.supplyAnimationTransitionDefaults(V.transition[Y]||{});else ne.transition=g.supplyAnimationTransitionDefaults(V.transition||{});return ne},g.supplyAnimationFrameDefaults=function(V){var Y={};function ne(te,K){return r.coerce(V||{},Y,c.frame,te,K)}return ne("duration"),ne("redraw"),Y},g.supplyAnimationTransitionDefaults=function(V){var Y={};function ne(te,K){return r.coerce(V||{},Y,c.transition,te,K)}return ne("duration"),ne("easing"),Y},g.supplyFrameDefaults=function(V){var Y={};function ne(te,K){return r.coerce(V,Y,v,te,K)}return ne("group"),ne("name"),ne("traces"),ne("baseframe"),ne("data"),ne("layout"),Y},g.supplyTraceDefaults=function(V,Y,ne,te,K){var $=te.colorway||n.defaults,ae=$[ne%$.length],ie;function oe(Xe,Te){return r.coerce(V,Y,g.attributes,Xe,Te)}var ue=oe("visible");oe("type"),oe("name",te._traceWord+" "+K),oe("uirevision",te.uirevision);var xe=g.getModule(Y);if(Y._module=xe,xe){var he=xe.basePlotModule,me=he.attr,be=he.attributes;if(me&&be){var Ce=te._subplots,Se="";if(ue||he.name!=="gl2d"){if(Array.isArray(me))for(ie=0;ie<me.length;ie++){var Be=me[ie],Ye=r.coerce(V,Y,be,Be);Ce[Be]&&r.pushUnique(Ce[Be],Ye),Se+=Ye}else Se=r.coerce(V,Y,be,me);Ce[he.name]&&r.pushUnique(Ce[he.name],Se)}}}return ue&&(oe("customdata"),oe("ids"),oe("meta"),t.traceIs(Y,"showLegend")?(r.coerce(V,Y,xe.attributes.showlegend?xe.attributes:g.attributes,"showlegend"),oe("legendgroup"),oe("legendgrouptitle.text"),oe("legendrank"),Y._dfltShowLegend=!0):Y._dfltShowLegend=!1,xe&&xe.supplyDefaults(V,Y,ae,te),t.traceIs(Y,"noOpacity")||oe("opacity"),t.traceIs(Y,"notLegendIsolatable")&&(Y.visible=!!Y.visible),t.traceIs(Y,"noHover")||(Y.hovertemplate||r.coerceHoverinfo(V,Y,te),Y.type!=="parcats"&&t.getComponentMethod("fx","supplyDefaults")(V,Y,ae,te)),xe&&xe.selectPoints&&oe("selectedpoints"),g.supplyTransformDefaults(V,Y,te)),Y};function O(V){var Y=V.transforms;if(Array.isArray(Y)&&Y.length)for(var ne=0;ne<Y.length;ne++){var te=Y[ne],K=te._module||A[te.type];if(K&&K.makesData)return!0}return!1}g.hasMakesDataTransform=O,g.supplyTransformDefaults=function(V,Y,ne){if(!!(Y._length||O(V))){var te=ne._globalTransforms||[],K=ne._transformModules||[];if(!(!Array.isArray(V.transforms)&&te.length===0))for(var $=V.transforms||[],ae=te.concat($),ie=Y.transforms=[],oe=0;oe<ae.length;oe++){var ue=ae[oe],xe=ue.type,he=A[xe],me,be=!(ue._module&&ue._module===he),Ce=he&&typeof he.transform=="function";he||r.warn("Unrecognized transform type "+xe+"."),he&&he.supplyDefaults&&(be||Ce)?(me=he.supplyDefaults(ue,Y,ne,V),me.type=xe,me._module=he,r.pushUnique(K,he)):me=r.extendFlat({},ue),ie.push(me)}}};function F(V,Y,ne,te){for(var K=V.transforms,$=[V],ae=0;ae<K.length;ae++){var ie=K[ae],oe=A[ie.type];oe&&oe.transform&&($=oe.transform($,{transform:ie,fullTrace:V,fullData:Y,layout:ne,fullLayout:te,transformIndex:ae}))}return $}g.supplyLayoutGlobalDefaults=function(V,Y,ne){function te(ue,xe){return r.coerce(V,Y,g.layoutAttributes,ue,xe)}var K=V.template;r.isPlainObject(K)&&(Y.template=K,Y._template=K.layout,Y._dataTemplate=K.data),te("autotypenumbers");var $=r.coerceFont(te,"font"),ae=$.size;r.coerceFont(te,"title.font",r.extendFlat({},$,{size:Math.round(ae*1.4)})),te("title.text",Y._dfltTitle.plot),te("title.xref"),te("title.yref"),te("title.x"),te("title.y"),te("title.xanchor"),te("title.yanchor"),te("title.pad.t"),te("title.pad.r"),te("title.pad.b"),te("title.pad.l");var ie=te("uniformtext.mode");ie&&te("uniformtext.minsize"),te("autosize",!(V.width&&V.height)),te("width"),te("height"),te("margin.l"),te("margin.r"),te("margin.t"),te("margin.b"),te("margin.pad"),te("margin.autoexpand"),V.width&&V.height&&g.sanitizeMargins(Y),t.getComponentMethod("grid","sizeDefaults")(V,Y),te("paper_bgcolor"),te("separators",ne.decimal+ne.thousands),te("hidesources"),te("colorway"),te("datarevision");var oe=te("uirevision");te("editrevision",oe),te("selectionrevision",oe),t.getComponentMethod("modebar","supplyLayoutDefaults")(V,Y),t.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(V,Y,te),te("meta"),r.isPlainObject(V.transition)&&(te("transition.duration"),te("transition.easing"),te("transition.ordering")),t.getComponentMethod("calendars","handleDefaults")(V,Y,"calendar"),t.getComponentMethod("fx","supplyLayoutGlobalDefaults")(V,Y,te)};function D(V){return typeof V=="string"&&V.substr(V.length-2)==="px"&&parseFloat(V)}g.plotAutoSize=function(Y,ne,te){var K=Y._context||{},$=K.frameMargins,ae,ie,oe=r.isPlotDiv(Y);if(oe&&Y.emit("plotly_autosize"),K.fillFrame)ae=window.innerWidth,ie=window.innerHeight,document.body.style.overflow="hidden";else{var ue=oe?window.getComputedStyle(Y):{};if(ae=D(ue.width)||D(ue.maxWidth)||te.width,ie=D(ue.height)||D(ue.maxHeight)||te.height,x($)&&$>0){var xe=1-2*$;ae=Math.round(xe*ae),ie=Math.round(xe*ie)}}var he=g.layoutAttributes.width.min,me=g.layoutAttributes.height.min;ae<he&&(ae=he),ie<me&&(ie=me);var be=!ne.width&&Math.abs(te.width-ae)>1,Ce=!ne.height&&Math.abs(te.height-ie)>1;(Ce||be)&&(be&&(te.width=ae),Ce&&(te.height=ie)),Y._initialAutoSize||(Y._initialAutoSize={width:ae,height:ie}),g.sanitizeMargins(te)},g.supplyLayoutModuleDefaults=function(V,Y,ne,te){var K=t.componentsRegistry,$=Y._basePlotModules,ae,ie,oe,ue=t.subplotsRegistry.cartesian;for(ae in K)oe=K[ae],oe.includeBasePlot&&oe.includeBasePlot(V,Y);$.length||$.push(ue),Y._has("cartesian")&&(t.getComponentMethod("grid","contentDefaults")(V,Y),ue.finalizeSubplots(V,Y));for(var xe in Y._subplots)Y._subplots[xe].sort(r.subplotSort);for(ie=0;ie<$.length;ie++)oe=$[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(V,Y,ne);var he=Y._modules;for(ie=0;ie<he.length;ie++)oe=he[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(V,Y,ne);var me=Y._transformModules;for(ie=0;ie<me.length;ie++)oe=me[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(V,Y,ne,te);for(ae in K)oe=K[ae],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(V,Y,ne)},g.purge=function(V){var Y=V._fullLayout||{};Y._glcontainer!==void 0&&(Y._glcontainer.selectAll(".gl-canvas").remove(),Y._glcontainer.remove(),Y._glcanvas=null),Y._modeBar&&Y._modeBar.destroy(),V._transitionData&&(V._transitionData._interruptCallbacks&&(V._transitionData._interruptCallbacks.length=0),V._transitionData._animationRaf&&window.cancelAnimationFrame(V._transitionData._animationRaf)),r.clearThrottle(),r.clearResponsive(V),delete V.data,delete V.layout,delete V._fullData,delete V._fullLayout,delete V.calcdata,delete V.empty,delete V.fid,delete V.undoqueue,delete V.undonum,delete V.autoplay,delete V.changed,delete V._promises,delete V._redrawTimer,delete V._hmlumcount,delete V._hmpixcount,delete V._transitionData,delete V._transitioning,delete V._initialAutoSize,delete V._transitioningWithDuration,delete V._dragging,delete V._dragged,delete V._dragdata,delete V._hoverdata,delete V._snapshotInProgress,delete V._editing,delete V._mouseDownTime,delete V._legendMouseDownTime,V.removeAllListeners&&V.removeAllListeners()},g.style=function(V){var Y=V._fullLayout._visibleModules,ne=[],te;for(te=0;te<Y.length;te++){var K=Y[te];K.style&&r.pushUnique(ne,K.style)}for(te=0;te<ne.length;te++)ne[te](V)},g.sanitizeMargins=function(V){if(!(!V||!V.margin)){var Y=V.width,ne=V.height,te=V.margin,K=Y-(te.l+te.r),$=ne-(te.t+te.b),ae;K<0&&(ae=(Y-1)/(te.l+te.r),te.l=Math.floor(ae*te.l),te.r=Math.floor(ae*te.r)),$<0&&(ae=(ne-1)/(te.t+te.b),te.t=Math.floor(ae*te.t),te.b=Math.floor(ae*te.b))}},g.clearAutoMarginIds=function(V){V._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(V,Y){V._fullLayout._pushmarginIds[Y]=1};function R(V){var Y=V.margin;if(!V._size){var ne=V._size={l:Math.round(Y.l),r:Math.round(Y.r),t:Math.round(Y.t),b:Math.round(Y.b),p:Math.round(Y.pad)};ne.w=Math.round(V.width)-ne.l-ne.r,ne.h=Math.round(V.height)-ne.t-ne.b}V._pushmargin||(V._pushmargin={}),V._pushmarginIds||(V._pushmarginIds={})}var U=2,N=2,X=64,j=64;g.autoMargin=function(V,Y,ne){var te=V._fullLayout,K=te.width,$=te.height,ae=te.margin,ie=r.constrain(K-ae.l-ae.r,U,X),oe=r.constrain($-ae.t-ae.b,N,j),ue=Math.max(0,K-ie),xe=Math.max(0,$-oe),he=te._pushmargin,me=te._pushmarginIds;if(ae.autoexpand!==!1){if(!ne)delete he[Y],delete me[Y];else{var be=ne.pad;if(be===void 0&&(be=Math.min(12,ae.l,ae.r,ae.t,ae.b)),ue){var Ce=(ne.l+ne.r)/ue;Ce>1&&(ne.l/=Ce,ne.r/=Ce)}if(xe){var Se=(ne.t+ne.b)/xe;Se>1&&(ne.t/=Se,ne.b/=Se)}var Be=ne.xl!==void 0?ne.xl:ne.x,Ye=ne.xr!==void 0?ne.xr:ne.x,Xe=ne.yt!==void 0?ne.yt:ne.y,Te=ne.yb!==void 0?ne.yb:ne.y;he[Y]={l:{val:Be,size:ne.l+be},r:{val:Ye,size:ne.r+be},b:{val:Te,size:ne.b+be},t:{val:Xe,size:ne.t+be}},me[Y]=1}if(!te._replotting)return g.doAutoMargin(V)}},g.doAutoMargin=function(V){var Y=V._fullLayout,ne=Y.width,te=Y.height;Y._size||(Y._size={}),R(Y);var K=Y._size,$=Y.margin,ae=r.extendFlat({},K),ie=$.l,oe=$.r,ue=$.t,xe=$.b,he=Y._pushmargin,me=Y._pushmarginIds;if(Y.margin.autoexpand!==!1){for(var be in he)me[be]||delete he[be];he.base={l:{val:0,size:ie},r:{val:1,size:oe},t:{val:1,size:ue},b:{val:0,size:xe}};for(var Ce in he){var Se=he[Ce].l||{},Be=he[Ce].b||{},Ye=Se.val,Xe=Se.size,Te=Be.val,Ie=Be.size;for(var Ze in he){if(x(Xe)&&he[Ze].r){var rt=he[Ze].r.val,Ge=he[Ze].r.size;if(rt>Ye){var ze=(Xe*rt+(Ge-ne)*Ye)/(rt-Ye),We=(Ge*(1-Ye)+(Xe-ne)*(1-rt))/(rt-Ye);ze+We>ie+oe&&(ie=ze,oe=We)}}if(x(Ie)&&he[Ze].t){var mt=he[Ze].t.val,Ft=he[Ze].t.size;if(mt>Te){var Xt=(Ie*mt+(Ft-te)*Te)/(mt-Te),Pt=(Ft*(1-Te)+(Ie-te)*(1-mt))/(mt-Te);Xt+Pt>xe+ue&&(xe=Xt,ue=Pt)}}}}}var Ut=r.constrain(ne-$.l-$.r,U,X),Gt=r.constrain(te-$.t-$.b,N,j),It=Math.max(0,ne-Ut),Ct=Math.max(0,te-Gt);if(It){var lt=(ie+oe)/It;lt>1&&(ie/=lt,oe/=lt)}if(Ct){var dt=(xe+ue)/Ct;dt>1&&(xe/=dt,ue/=dt)}if(K.l=Math.round(ie),K.r=Math.round(oe),K.t=Math.round(ue),K.b=Math.round(xe),K.p=Math.round($.pad),K.w=Math.round(ne)-K.l-K.r,K.h=Math.round(te)-K.t-K.b,!Y._replotting&&g.didMarginChange(ae,K)){"_redrawFromAutoMarginCount"in Y?Y._redrawFromAutoMarginCount++:Y._redrawFromAutoMarginCount=1;var et=3*(1+Object.keys(me).length);if(Y._redrawFromAutoMarginCount<et)return t.call("_doPlot",V);Y._size=ae,r.warn("Too many auto-margin redraws.")}ee(V)};function ee(V){var Y=l.list(V,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(ne){for(var te=0;te<Y.length;te++){var K=Y[te][ne];K&&K()}})}var q=["l","r","t","b","p","w","h"];g.didMarginChange=function(V,Y){for(var ne=0;ne<q.length;ne++){var te=q[ne],K=V[te],$=Y[te];if(!x(K)||Math.abs($-K)>1)return!0}return!1},g.graphJson=function(V,Y,ne,te,K,$){(K&&Y&&!V._fullData||K&&!Y&&!V._fullLayout)&&g.supplyDefaults(V);var ae=K?V._fullData:V.data,ie=K?V._fullLayout:V.layout,oe=(V._transitionData||{})._frames;function ue(me,be){if(typeof me=="function")return be?"_function_":null;if(r.isPlainObject(me)){var Ce={},Se;return Object.keys(me).sort().forEach(function(Be){if(["_","["].indexOf(Be.charAt(0))===-1){if(typeof me[Be]=="function"){be&&(Ce[Be]="_function");return}if(ne==="keepdata"){if(Be.substr(Be.length-3)==="src")return}else if(ne==="keepstream"){if(Se=me[Be+"src"],typeof Se=="string"&&Se.indexOf(":")>0&&!r.isPlainObject(me.stream))return}else if(ne!=="keepall"&&(Se=me[Be+"src"],typeof Se=="string"&&Se.indexOf(":")>0))return;Ce[Be]=ue(me[Be],be)}}),Ce}return Array.isArray(me)?me.map(function(Be){return ue(Be,be)}):r.isTypedArray(me)?r.simpleMap(me,r.identity):r.isJSDate(me)?r.ms2DateTimeLocal(+me):me}var xe={data:(ae||[]).map(function(me){var be=ue(me);return Y&&delete be.fit,be})};if(!Y&&(xe.layout=ue(ie),K)){var he=ie._size;xe.layout.computed={margin:{b:he.b,l:he.l,r:he.r,t:he.t}}}return oe&&(xe.frames=ue(oe)),$&&(xe.config=ue(V._context,!0)),te==="object"?xe:JSON.stringify(xe)},g.modifyFrames=function(V,Y){var ne,te,K,$=V._transitionData._frames,ae=V._transitionData._frameHash;for(ne=0;ne<Y.length;ne++)switch(te=Y[ne],te.type){case"replace":K=te.value;var ie=($[te.index]||{}).name,oe=K.name;$[te.index]=ae[oe]=K,oe!==ie&&(delete ae[ie],ae[oe]=K);break;case"insert":K=te.value,ae[K.name]=K,$.splice(te.index,0,K);break;case"delete":K=$[te.index],delete ae[K.name],$.splice(te.index,1);break}return Promise.resolve()},g.computeFrame=function(V,Y){var ne=V._transitionData._frameHash,te,K,$,ae;if(!Y)throw new Error("computeFrame must be given a string frame name");var ie=ne[Y.toString()];if(!ie)return!1;for(var oe=[ie],ue=[ie.name];ie.baseframe&&(ie=ne[ie.baseframe.toString()])&&ue.indexOf(ie.name)===-1;)oe.push(ie),ue.push(ie.name);for(var xe={};ie=oe.pop();)if(ie.layout&&(xe.layout=g.extendLayout(xe.layout,ie.layout)),ie.data){if(xe.data||(xe.data=[]),K=ie.traces,!K)for(K=[],te=0;te<ie.data.length;te++)K[te]=te;for(xe.traces||(xe.traces=[]),te=0;te<ie.data.length;te++)$=K[te],$!=null&&(ae=xe.traces.indexOf($),ae===-1&&(ae=xe.data.length,xe.traces[ae]=$),xe.data[ae]=g.extendTrace(xe.data[ae],ie.data[te]))}return xe},g.recomputeFrameHash=function(V){for(var Y=V._transitionData._frameHash={},ne=V._transitionData._frames,te=0;te<ne.length;te++){var K=ne[te];K&&K.name&&(Y[K.name]=K)}},g.extendObjectWithContainers=function(V,Y,ne){var te,K,$,ae,ie,oe,ue,xe,he=r.extendDeepNoArrays({},Y||{}),me=r.expandObjectPaths(he),be={};if(ne&&ne.length)for($=0;$<ne.length;$++)te=r.nestedProperty(me,ne[$]),K=te.get(),K===void 0?r.nestedProperty(be,ne[$]).set(null):(te.set(null),r.nestedProperty(be,ne[$]).set(K));if(V=r.extendDeepNoArrays(V||{},me),ne&&ne.length){for($=0;$<ne.length;$++)if(ie=r.nestedProperty(be,ne[$]),ue=ie.get(),!!ue){for(oe=r.nestedProperty(V,ne[$]),xe=oe.get(),Array.isArray(xe)||(xe=[],oe.set(xe)),ae=0;ae<ue.length;ae++){var Ce=ue[ae];Ce===null?xe[ae]=null:xe[ae]=g.extendObjectWithContainers(xe[ae],Ce)}oe.set(xe)}}return V},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=t.layoutArrayContainers,g.extendTrace=function(V,Y){return g.extendObjectWithContainers(V,Y,g.dataArrayContainers)},g.extendLayout=function(V,Y){return g.extendObjectWithContainers(V,Y,g.layoutArrayContainers)},g.transition=function(V,Y,ne,te,K,$){var ae={redraw:K.redraw},ie={},oe=[];return ae.prepareFn=function(){for(var ue=Array.isArray(Y)?Y.length:0,xe=te.slice(0,ue),he=0;he<xe.length;he++){var me=xe[he],be=V._fullData[me],Ce=be._module;if(!!Ce){if(Ce.animatable){var Se=Ce.basePlotModule.name;ie[Se]||(ie[Se]=[]),ie[Se].push(me)}V.data[xe[he]]=g.extendTrace(V.data[xe[he]],Y[he])}}var Be=r.expandObjectPaths(r.extendDeepNoArrays({},ne)),Ye=/^[xy]axis[0-9]*$/;for(var Xe in Be)!Ye.test(Xe)||delete Be[Xe].range;g.extendLayout(V.layout,Be),delete V.calcdata,g.supplyDefaults(V),g.doCalcdata(V);var Te=r.expandObjectPaths(ne);if(Te){var Ie=V._fullLayout._plots;for(var Ze in Ie){var rt=Ie[Ze],Ge=rt.xaxis,ze=rt.yaxis,We=Ge.range.slice(),mt=ze.range.slice(),Ft=null,Xt=null,Pt=null,Ut=null;Array.isArray(Te[Ge._name+".range"])?Ft=Te[Ge._name+".range"].slice():Array.isArray((Te[Ge._name]||{}).range)&&(Ft=Te[Ge._name].range.slice()),Array.isArray(Te[ze._name+".range"])?Xt=Te[ze._name+".range"].slice():Array.isArray((Te[ze._name]||{}).range)&&(Xt=Te[ze._name].range.slice()),We&&Ft&&(Ge.r2l(We[0])!==Ge.r2l(Ft[0])||Ge.r2l(We[1])!==Ge.r2l(Ft[1]))&&(Pt={xr0:We,xr1:Ft}),mt&&Xt&&(ze.r2l(mt[0])!==ze.r2l(Xt[0])||ze.r2l(mt[1])!==ze.r2l(Xt[1]))&&(Ut={yr0:mt,yr1:Xt}),(Pt||Ut)&&oe.push(r.extendFlat({plotinfo:rt},Pt,Ut))}}return Promise.resolve()},ae.runFn=function(ue){var xe,he=V._fullLayout._basePlotModules,me=oe.length,be;if(ne)for(be=0;be<he.length;be++)he[be].transitionAxes&&he[be].transitionAxes(V,oe,$,ue);me?(xe=r.extendFlat({},$),xe.duration=0,delete ie.cartesian):xe=$;for(var Ce in ie){var Se=ie[Ce],Be=V._fullData[Se[0]]._module;Be.basePlotModule.plot(V,Se,xe,ue)}},G(V,$,ae)},g.transitionFromReact=function(V,Y,ne,te){var K=V._fullLayout,$=K.transition,ae={},ie=[];return ae.prepareFn=function(){var oe=K._plots;ae.redraw=!1,Y.anim==="some"&&(ae.redraw=!0),ne.anim==="some"&&(ae.redraw=!0);for(var ue in oe){var xe=oe[ue],he=xe.xaxis,me=xe.yaxis,be=te[he._name].range.slice(),Ce=te[me._name].range.slice(),Se=he.range.slice(),Be=me.range.slice();he.setScale(),me.setScale();var Ye=null,Xe=null;(he.r2l(be[0])!==he.r2l(Se[0])||he.r2l(be[1])!==he.r2l(Se[1]))&&(Ye={xr0:be,xr1:Se}),(me.r2l(Ce[0])!==me.r2l(Be[0])||me.r2l(Ce[1])!==me.r2l(Be[1]))&&(Xe={yr0:Ce,yr1:Be}),(Ye||Xe)&&ie.push(r.extendFlat({plotinfo:xe},Ye,Xe))}return Promise.resolve()},ae.runFn=function(oe){for(var ue=V._fullData,xe=V._fullLayout,he=xe._basePlotModules,me,be,Ce,Se=[],Be=0;Be<ue.length;Be++)Se.push(Be);function Ye(){if(!!V._fullLayout)for(var Te=0;Te<he.length;Te++)he[Te].transitionAxes&&he[Te].transitionAxes(V,ie,me,oe)}function Xe(){if(!!V._fullLayout)for(var Te=0;Te<he.length;Te++)he[Te].plot(V,Ce,be,oe)}ie.length&&Y.anim?$.ordering==="traces first"?(me=r.extendFlat({},$,{duration:0}),Ce=Se,be=$,setTimeout(Ye,$.duration),Xe()):(me=$,Ce=null,be=r.extendFlat({},$,{duration:0}),setTimeout(Xe,me.duration),Ye()):ie.length?(me=$,Ye()):Y.anim&&(Ce=Se,be=$,Xe())},G(V,$,ae)};function G(V,Y,ne){var te=!1;function K(he){var me=Promise.resolve();if(!he)return me;for(;he.length;)me=me.then(he.shift());return me}function $(he){if(!!he)for(;he.length;)he.shift()}function ae(){return V.emit("plotly_transitioning",[]),new Promise(function(he){V._transitioning=!0,Y.duration>0&&(V._transitioningWithDuration=!0),V._transitionData._interruptCallbacks.push(function(){te=!0}),ne.redraw&&V._transitionData._interruptCallbacks.push(function(){return t.call("redraw",V)}),V._transitionData._interruptCallbacks.push(function(){V.emit("plotly_transitioninterrupted",[])});var me=0,be=0;function Ce(){return me++,function(){be++,!te&&be===me&&ie(he)}}ne.runFn(Ce),setTimeout(Ce())})}function ie(he){if(!!V._transitionData)return $(V._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ne.redraw)return t.call("redraw",V)}).then(function(){V._transitioning=!1,V._transitioningWithDuration=!1,V.emit("plotly_transitioned",[])}).then(he)}function oe(){if(!!V._transitionData)return V._transitioning=!1,K(V._transitionData._interruptCallbacks)}var ue=[g.previousPromises,oe,ne.prepareFn,g.rehover,ae],xe=r.syncOrAsync(ue,V);return(!xe||!xe.then)&&(xe=Promise.resolve()),xe.then(function(){return V})}g.doCalcdata=function(V,Y){var ne=l.list(V),te=V._fullData,K=V._fullLayout,$,ae,ie,oe,ue=new Array(te.length),xe=(V.calcdata||[]).slice();for(V.calcdata=ue,K._numBoxes=0,K._numViolins=0,K._violinScaleGroupStats={},V._hmpixcount=0,V._hmlumcount=0,K._piecolormap={},K._sunburstcolormap={},K._treemapcolormap={},K._iciclecolormap={},K._funnelareacolormap={},ie=0;ie<te.length;ie++)if(Array.isArray(Y)&&Y.indexOf(ie)===-1){ue[ie]=xe[ie];continue}for(ie=0;ie<te.length;ie++)$=te[ie],$._arrayAttrs=i.findArrayAttributes($),$._extremes={};var he=K._subplots.polar||[];for(ie=0;ie<he.length;ie++)ne.push(K[he[ie]].radialaxis,K[he[ie]].angularaxis);for(var me in K._colorAxes){var be=K[me];be.cauto!==!1&&(delete be.cmin,delete be.cmax)}var Ce=!1;function Se(Xe){if($=te[Xe],ae=$._module,$.visible===!0&&$.transforms){if(ae&&ae.calc){var Te=ae.calc(V,$);Te[0]&&Te[0].t&&Te[0].t._scene&&delete Te[0].t._scene.dirty}for(oe=0;oe<$.transforms.length;oe++){var Ie=$.transforms[oe];ae=A[Ie.type],ae&&ae.calcTransform&&($._hasCalcTransform=!0,Ce=!0,ae.calcTransform(V,$,Ie))}}}function Be(Xe,Te){if($=te[Xe],ae=$._module,!!ae.isContainer===Te){var Ie=[];if($.visible===!0&&$._length!==0){delete $._indexToPoints;var Ze=$.transforms||[];for(oe=Ze.length-1;oe>=0;oe--)if(Ze[oe].enabled){$._indexToPoints=Ze[oe]._indexToPoints;break}ae&&ae.calc&&(Ie=ae.calc(V,$))}(!Array.isArray(Ie)||!Ie[0])&&(Ie=[{x:f,y:f}]),Ie[0].t||(Ie[0].t={}),Ie[0].trace=$,ue[Xe]=Ie}}for(fe(ne,te,K),ie=0;ie<te.length;ie++)Be(ie,!0);for(ie=0;ie<te.length;ie++)Se(ie);for(Ce&&fe(ne,te,K),ie=0;ie<te.length;ie++)Be(ie,!0);for(ie=0;ie<te.length;ie++)Be(ie,!1);se(V);var Ye=le(ne,V);if(Ye.length){for(K._numBoxes=0,K._numViolins=0,ie=0;ie<Ye.length;ie++)Be(Ye[ie],!0);for(ie=0;ie<Ye.length;ie++)Be(Ye[ie],!1);se(V)}t.getComponentMethod("fx","calc")(V),t.getComponentMethod("errorbars","calc")(V)};var J=/(total|sum|min|max|mean|median) (ascending|descending)/;function le(V,Y){var ne=[],te,K,$,ae,ie;function oe(It,Ct,lt){var dt=Ct._id.charAt(0);if(It==="histogram2dcontour"){var et=Ct._counterAxes[0],Pe=l.getFromId(Y,et),Je=dt==="x"||et==="x"&&Pe.type==="category",it=dt==="y"||et==="y"&&Pe.type==="category";return function(ht,zt){return ht===0||zt===0||Je&&ht===lt[zt].length-1||it&&zt===lt.length-1?-1:(dt==="y"?zt:ht)-1}}else return function(ht,zt){return dt==="y"?zt:ht}}var ue={min:function(It){return r.aggNums(Math.min,null,It)},max:function(It){return r.aggNums(Math.max,null,It)},sum:function(It){return r.aggNums(function(Ct,lt){return Ct+lt},null,It)},total:function(It){return r.aggNums(function(Ct,lt){return Ct+lt},null,It)},mean:function(It){return r.mean(It)},median:function(It){return r.median(It)}};for(te=0;te<V.length;te++){var xe=V[te];if(xe.type==="category"){var he=xe.categoryorder.match(J);if(he){var me=he[1],be=he[2],Ce=xe._id.charAt(0),Se=Ce==="x",Be=[];for(K=0;K<xe._categories.length;K++)Be.push([xe._categories[K],[]]);for(K=0;K<xe._traceIndices.length;K++){var Ye=xe._traceIndices[K],Xe=Y._fullData[Ye];if(Xe.visible===!0){var Te=Xe.type;t.traceIs(Xe,"histogram")&&(delete Xe._xautoBinFinished,delete Xe._yautoBinFinished);var Ie=Te==="splom",Ze=Te==="scattergl",rt=Y.calcdata[Ye];for($=0;$<rt.length;$++){var Ge=rt[$],ze,We;if(Ie){var mt=Xe._axesDim[xe._id];if(!Se){var Ft=Xe._diag[mt][0];Ft&&(xe=Y._fullLayout[l.id2name(Ft)])}var Xt=Ge.trace.dimensions[mt].values;for(ae=0;ae<Xt.length;ae++)for(ze=xe._categoriesMap[Xt[ae]],ie=0;ie<Ge.trace.dimensions.length;ie++)if(ie!==mt){var Pt=Ge.trace.dimensions[ie];Be[ze][1].push(Pt.values[ae])}}else if(Ze){for(ae=0;ae<Ge.t.x.length;ae++)Se?(ze=Ge.t.x[ae],We=Ge.t.y[ae]):(ze=Ge.t.y[ae],We=Ge.t.x[ae]),Be[ze][1].push(We);Ge.t&&Ge.t._scene&&delete Ge.t._scene.dirty}else if(Ge.hasOwnProperty("z")){We=Ge.z;var Ut=oe(Xe.type,xe,We);for(ae=0;ae<We.length;ae++)for(ie=0;ie<We[ae].length;ie++)ze=Ut(ie,ae),ze+1&&Be[ze][1].push(We[ae][ie])}else for(ze=Ge.p,ze===void 0&&(ze=Ge[Ce]),We=Ge.s,We===void 0&&(We=Ge.v),We===void 0&&(We=Se?Ge.y:Ge.x),Array.isArray(We)||(We===void 0?We=[]:We=[We]),ae=0;ae<We.length;ae++)Be[ze][1].push(We[ae])}}}xe._categoriesValue=Be;var Gt=[];for(K=0;K<Be.length;K++)Gt.push([Be[K][0],ue[me](Be[K][1])]);Gt.sort(function(It,Ct){return It[1]-Ct[1]}),xe._categoriesAggregatedValue=Gt,xe._initialCategories=Gt.map(function(It){return It[0]}),be==="descending"&&xe._initialCategories.reverse(),ne=ne.concat(xe.sortByInitialCategories())}}}return ne}function fe(V,Y,ne){var te={};function K(oe){oe.clearCalc(),oe.type==="multicategory"&&oe.setupMultiCategory(Y),te[oe._id]=1}r.simpleMap(V,K);for(var $=ne._axisMatchGroups||[],ae=0;ae<$.length;ae++)for(var ie in $[ae])te[ie]||K(ne[l.id2name(ie)])}function se(V){var Y=V._fullLayout,ne=Y._visibleModules,te={},K,$,ae;for($=0;$<ne.length;$++){var ie=ne[$],oe=ie.crossTraceCalc;if(oe){var ue=ie.basePlotModule.name;te[ue]?r.pushUnique(te[ue],oe):te[ue]=[oe]}}for(ae in te){var xe=te[ae],he=Y._subplots[ae];if(Array.isArray(he))for(K=0;K<he.length;K++){var me=he[K],be=ae==="cartesian"?Y._plots[me]:Y[me];for($=0;$<xe.length;$++)xe[$](V,be,me)}else for($=0;$<xe.length;$++)xe[$](V)}}g.rehover=function(V){V._fullLayout._rehover&&V._fullLayout._rehover()},g.redrag=function(V){V._fullLayout._redrag&&V._fullLayout._redrag()},g.generalUpdatePerTraceModule=function(V,Y,ne,te){var K=Y.traceHash,$={},ae;for(ae=0;ae<ne.length;ae++){var ie=ne[ae],oe=ie[0].trace;oe.visible&&($[oe.type]=$[oe.type]||[],$[oe.type].push(ie))}for(var ue in K)if(!$[ue]){var xe=K[ue][0],he=xe[0].trace;he.visible=!1,$[ue]=[xe]}for(var me in $){var be=$[me],Ce=be[0][0].trace._module;Ce.plot(V,Y,r.filterVisible(be),te)}Y.traceHash=$},g.plotBasePlot=function(V,Y,ne,te,K){var $=t.getModule(V),ae=d(Y.calcdata,$)[0];$.plot(Y,ae,te,K)},g.cleanBasePlot=function(V,Y,ne,te,K){var $=K._has&&K._has(V),ae=ne._has&&ne._has(V);$&&!ae&&K["_"+V+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(e,I,B){I.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(e,I,B){var u=e("../../lib"),s=e("../../lib/polygon").tester,m=u.findIndexOfMin,x=u.isAngleInsideSector,t=u.angleDelta,i=u.angleDist;function a(A,b,M,w,T){if(!x(b,w))return!1;var _,h;M[0]<M[1]?(_=M[0],h=M[1]):(_=M[1],h=M[0]);var L=s(o(_,w[0],w[1],T)),S=s(o(h,w[0],w[1],T)),k=[A*Math.cos(b),A*Math.sin(b)];return S.contains(k)&&!L.contains(k)}function r(A,b,M,w){var T,_,h=w[0],L=w[1],S=d(Math.sin(b)-Math.sin(A)),k=d(Math.cos(b)-Math.cos(A)),P=Math.tan(M),O=d(1/P),F=S/k,D=L-F*h;return O?S&&k?(T=D/(P-F),_=P*T):k?(T=L*O,_=L):(T=h,_=h*P):S&&k?(T=0,_=D):k?(T=0,_=L):T=_=NaN,[T,_]}function n(A,b,M,w){var T=-b*M,_=b*b+1,h=2*(b*T-M),L=T*T+M*M-A*A,S=Math.sqrt(h*h-4*_*L),k=(-h+S)/(2*_),P=(-h-S)/(2*_);return[[k,b*k+T+w],[P,b*P+T+w]]}function f(A,b){var M=b.length,w=new Array(M+1),T;for(T=0;T<M;T++){var _=b[T];w[T]=[A*Math.cos(_),A*Math.sin(_)]}return w[T]=w[0].slice(),w}function l(A,b,M,w){var T=w.length,_=[],h,L;function S(X){return[A*Math.cos(X),A*Math.sin(X)]}function k(X,j,ee){return r(X,j,ee,S(X))}function P(X){return u.mod(X,T)}function O(X){return x(X,[b,M])}var F=m(w,function(X){return O(X)?i(X,b):1/0}),D=k(w[F],w[P(F-1)],b);for(_.push(D),h=F,L=0;L<T;h++,L++){var R=w[P(h)];if(!O(R))break;_.push(S(R))}var U=m(w,function(X){return O(X)?i(X,M):1/0}),N=k(w[U],w[P(U+1)],M);return _.push(N),_.push([0,0]),_.push(_[0].slice()),_}function o(A,b,M,w){return u.isFullCircle([b,M])?f(A,w):l(A,b,M,w)}function c(A,b,M,w){for(var T=1/0,_=1/0,h=o(A,b,M,w),L=0;L<h.length;L++){var S=h[L];T=Math.min(T,S[0]),_=Math.min(_,-S[1])}return[T,_]}function v(A,b){var M=function(_){var h=t(_,A);return h>0?h:1/0},w=m(b,M),T=u.mod(w+1,b.length);return[b[w],b[T]]}function d(A){return Math.abs(A)>1e-10?A:0}function p(A,b,M){b=b||0,M=M||0;for(var w=A.length,T=new Array(w),_=0;_<w;_++){var h=A[_];T[_]=[b+h[0],M-h[1]]}return T}function y(A,b,M,w,T,_){var h=o(A,b,M,w);return"M"+p(h,T,_).join("L")}function g(A,b,M,w,T,_,h){var L,S;A<b?(L=A,S=b):(L=b,S=A);var k=p(o(L,M,w,T),_,h),P=p(o(S,M,w,T),_,h);return"M"+P.reverse().join("L")+"M"+k.join("L")}I.exports={isPtInsidePolygon:a,findPolygonOffset:c,findEnclosingVertexAngles:v,findIntersectionXY:r,findXYatLength:n,clampTiny:d,pathPolygon:y,pathPolygonAnnulus:g}},{"../../lib":503,"../../lib/polygon":515}],622:[function(e,I,B){var u=e("../get_data").getSubplotCalcData,s=e("../../lib").counterRegex,m=e("./polar"),x=e("./constants"),t=x.attr,i=x.name,a=s(i),r={};r[t]={valType:"subplotid",dflt:i,editType:"calc"};function n(l){for(var o=l._fullLayout,c=l.calcdata,v=o._subplots[i],d=0;d<v.length;d++){var p=v[d],y=u(c,i,p),g=o[p]._subplot;g||(g=m(l,p),o[p]._subplot=g),g.plot(y,o,l._promises)}}function f(l,o,c,v){for(var d=v._subplots[i]||[],p=v._has&&v._has("gl"),y=o._has&&o._has("gl"),g=p&&!y,A=0;A<d.length;A++){var b=d[A],M=v[b]._subplot;if(!o[b]&&!!M){M.framework.remove(),M.layers["radial-axis-title"].remove();for(var w in M.clipPaths)M.clipPaths[w].remove()}g&&M._scene&&(M._scene.destroy(),M._scene=null)}}I.exports={attr:t,name:i,idRoot:i,idRegex:a,attrRegex:a,attributes:r,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:n,clean:f,toSVG:e("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(e,I,B){var u=e("../../components/color/attributes"),s=e("../cartesian/layout_attributes"),m=e("../domain").attributes,x=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,i=t({color:s.color,showline:x({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:x({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth},"plot","from-root"),a=t({tickmode:s.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,showticklabels:s.showticklabels,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickfont:s.tickfont,tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,layer:s.layer},"plot","from-root"),r={visible:x({},s.visible,{dflt:!0}),type:x({},s.type,{values:["-","linear","log","date","category"]}),autotypenumbers:s.autotypenumbers,autorange:x({},s.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:x({},s.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:s.categoryorder,categoryarray:s.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:x({},s.title.text,{editType:"plot",dflt:""}),font:x({},s.title.font,{editType:"plot"}),editType:"plot"},hoverformat:s.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}};x(r,i,a);var n={visible:x({},s.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:s.autotypenumbers,categoryorder:s.categoryorder,categoryarray:s.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:s.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};x(n,i,a),I.exports={domain:m({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:u.background},radialaxis:r,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color"),m=e("../../plot_api/plot_template"),x=e("../subplot_defaults"),t=e("../get_data").getSubplotData,i=e("../cartesian/tick_value_defaults"),a=e("../cartesian/tick_mark_defaults"),r=e("../cartesian/tick_label_defaults"),n=e("../cartesian/prefix_suffix_defaults"),f=e("../cartesian/category_order_defaults"),l=e("../cartesian/line_grid_defaults"),o=e("../cartesian/axis_autotype"),c=e("./layout_attributes"),v=e("./set_convert"),d=e("./constants"),p=d.axisNames;function y(A,b,M,w){var T=M("bgcolor");w.bgColor=s.combine(T,w.paper_bgcolor);var _=M("sector");M("hole");var h=t(w.fullData,d.name,w.id),L=w.layoutOut,S;function k(fe,se){return M(S+"."+fe,se)}for(var P=0;P<p.length;P++){S=p[P],u.isPlainObject(A[S])||(A[S]={});var O=A[S],F=m.newContainer(b,S);F._id=F._name=S,F._attr=w.id+"."+S,F._traceIndices=h.map(function(fe){return fe._expandedIndex});var D=d.axisName2dataArray[S],R=g(O,F,k,h,D,w);f(O,F,k,{axData:h,dataAttr:D});var U=k("visible");switch(v(F,b,L),k("uirevision",b.uirevision),F._m=1,S){case"radialaxis":var N=k("autorange",!F.isValidRange(O.range));O.autorange=N,N&&(R==="linear"||R==="-")&&k("rangemode"),N==="reversed"&&(F._m=-1),k("range"),F.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){u.log("Polar plots do not support date angular axes yet.");for(var X=0;X<h.length;X++)h[X].visible=!1;R=O.type=F.type="linear"}k(R==="linear"?"thetaunit":"period");var j=k("direction");k("rotation",{counterclockwise:0,clockwise:90}[j]);break}if(n(O,F,k,F.type,{tickSuffixDflt:F.thetaunit==="degrees"?"\xB0":void 0}),U){var ee,q,G,J,le=w.font||{};ee=k("color"),q=ee===O.color?ee:le.color,G=le.size,J=le.family,i(O,F,k,F.type),r(O,F,k,F.type,{font:{color:q,size:G,family:J}}),a(O,F,k,{outerTicks:!0}),l(O,F,k,{dfltColor:ee,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[S]}),k("layer"),S==="radialaxis"&&(k("side"),k("angle",_[0]),k("title.text"),u.coerceFont(k,"title.font",{color:q,size:u.bigFont(G),family:J}))}R!=="category"&&k("hoverformat"),F._input=O}b.angularaxis.type==="category"&&M("gridshape")}function g(A,b,M,w,T,_){var h=M("autotypenumbers",_.autotypenumbersDflt),L=M("type");if(L==="-"){for(var S,k=0;k<w.length;k++)if(w[k].visible){S=w[k];break}S&&S[T]&&(b.type=o(S[T],"gregorian",{noMultiCategory:!0,autotypenumbers:h})),b.type==="-"?b.type="linear":A.type=b.type}return b.type}I.exports=function(b,M,w){x(b,M,w,{type:d.name,attributes:c,handleDefaults:y,font:M.font,autotypenumbersDflt:M.autotypenumbers,paper_bgcolor:M.paper_bgcolor,fullData:w,layoutOut:M})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(e,I,B){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("../../registry"),x=e("../../lib"),t=x.strRotate,i=x.strTranslate,a=e("../../components/color"),r=e("../../components/drawing"),n=e("../plots"),f=e("../../plots/cartesian/axes"),l=e("../cartesian/set_convert"),o=e("./set_convert"),c=e("../cartesian/autorange").doAutoRange,v=e("../cartesian/dragbox"),d=e("../../components/dragelement"),p=e("../../components/fx"),y=e("../../components/titles"),g=e("../cartesian/select").prepSelect,A=e("../cartesian/select").selectOnClick,b=e("../cartesian/select").clearSelect,M=e("../../lib/setcursor"),w=e("../../lib/clear_gl_canvases"),T=e("../../plot_api/subroutines").redrawReglTraces,_=e("../../constants/alignment").MID_SHIFT,h=e("./constants"),L=e("./helpers"),S=e("../smith/helpers"),k=S.smith,P=S.reactanceArc,O=S.resistanceArc,F=S.smithTransform,D=x._,R=x.mod,U=x.deg2rad,N=x.rad2deg;function X(le,fe,se){this.isSmith=se||!1,this.id=fe,this.gd=le,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var V=le._fullLayout,Y="clip"+V._uid+fe;this.clipIds.forTraces=Y+"-for-traces",this.clipPaths.forTraces=V._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=V["_"+(se?"smith":"polar")+"layer"].append("g").attr("class",fe),this.getHole=function(ne){return this.isSmith?0:ne.hole},this.getSector=function(ne){return this.isSmith?[0,360]:ne.sector},this.getRadial=function(ne){return this.isSmith?ne.realaxis:ne.radialaxis},this.getAngular=function(ne){return this.isSmith?ne.imaginaryaxis:ne.angularaxis},se||(this.radialTickLayout=null,this.angularTickLayout=null)}var j=X.prototype;I.exports=function(fe,se,V){return new X(fe,se,V)},j.plot=function(le,fe){for(var se=this,V=fe[se.id],Y=!1,ne=0;ne<le.length;ne++){var te=le[ne][0].trace;if(te.cliponaxis===!1){Y=!0;break}}se._hasClipOnAxisFalse=Y,se.updateLayers(fe,V),se.updateLayout(fe,V),n.generalUpdatePerTraceModule(se.gd,se,le,V),se.updateFx(fe,V),se.isSmith&&(delete V.realaxis.range,delete V.imaginaryaxis.range)},j.updateLayers=function(le,fe){var se=this,V=se.isSmith,Y=se.layers,ne=se.getRadial(fe),te=se.getAngular(fe),K=h.layerNames,$=K.indexOf("frontplot"),ae=K.slice(0,$),ie=te.layer==="below traces",oe=ne.layer==="below traces";ie&&ae.push("angular-line"),oe&&ae.push("radial-line"),ie&&ae.push("angular-axis"),oe&&ae.push("radial-axis"),ae.push("frontplot"),ie||ae.push("angular-line"),oe||ae.push("radial-line"),ie||ae.push("angular-axis"),oe||ae.push("radial-axis");var ue=(V?"smith":"polar")+"sublayer",xe=se.framework.selectAll("."+ue).data(ae,String);xe.enter().append("g").attr("class",function(he){return ue+" "+he}).each(function(he){var me=Y[he]=u.select(this);switch(he){case"frontplot":V||me.append("g").classed("barlayer",!0),me.append("g").classed("scatterlayer",!0);break;case"backplot":me.append("g").classed("maplayer",!0);break;case"plotbg":Y.bg=me.append("path");break;case"radial-grid":me.style("fill","none");break;case"angular-grid":me.style("fill","none");break;case"radial-line":me.append("line").style("fill","none");break;case"angular-line":me.append("path").style("fill","none");break}}),xe.order()},j.updateLayout=function(le,fe){var se=this,V=se.layers,Y=le._size,ne=se.getRadial(fe),te=se.getAngular(fe),K=fe.domain.x,$=fe.domain.y;se.xOffset=Y.l+Y.w*K[0],se.yOffset=Y.t+Y.h*(1-$[1]);var ae=se.xLength=Y.w*(K[1]-K[0]),ie=se.yLength=Y.h*($[1]-$[0]),oe=se.getSector(fe);se.sectorInRad=oe.map(U);var ue=se.sectorBBox=q(oe),xe=ue[2]-ue[0],he=ue[3]-ue[1],me=ie/ae,be=Math.abs(he/xe),Ce,Se,Be,Ye,Xe;me>be?(Ce=ae,Se=ae*be,Xe=(ie-Se)/Y.h/2,Be=[K[0],K[1]],Ye=[$[0]+Xe,$[1]-Xe]):(Ce=ie/be,Se=ie,Xe=(ae-Ce)/Y.w/2,Be=[K[0]+Xe,K[1]-Xe],Ye=[$[0],$[1]]),se.xLength2=Ce,se.yLength2=Se,se.xDomain2=Be,se.yDomain2=Ye;var Te=se.xOffset2=Y.l+Y.w*Be[0],Ie=se.yOffset2=Y.t+Y.h*(1-Ye[1]),Ze=se.radius=Ce/xe,rt=se.innerRadius=se.getHole(fe)*Ze,Ge=se.cx=Te-Ze*ue[0],ze=se.cy=Ie+Ze*ue[3],We=se.cxx=Ge-Te,mt=se.cyy=ze-Ie,Ft=ne.side,Xt;Ft==="counterclockwise"?(Xt=Ft,Ft="top"):Ft==="clockwise"&&(Xt=Ft,Ft="bottom"),se.radialAxis=se.mockAxis(le,fe,ne,{_id:"x",side:Ft,_trueSide:Xt,domain:[rt/Y.w,Ze/Y.w]}),se.angularAxis=se.mockAxis(le,fe,te,{side:"right",domain:[0,Math.PI],autorange:!1}),se.doAutoRange(le,fe),se.updateAngularAxis(le,fe),se.updateRadialAxis(le,fe),se.updateRadialAxisTitle(le,fe),se.xaxis=se.mockCartesianAxis(le,fe,{_id:"x",domain:Be}),se.yaxis=se.mockCartesianAxis(le,fe,{_id:"y",domain:Ye});var Pt=se.pathSubplot();se.clipPaths.forTraces.select("path").attr("d",Pt).attr("transform",i(We,mt)),V.frontplot.attr("transform",i(Te,Ie)).call(r.setClipUrl,se._hasClipOnAxisFalse?null:se.clipIds.forTraces,se.gd),V.bg.attr("d",Pt).attr("transform",i(Ge,ze)).call(a.fill,fe.bgcolor)},j.mockAxis=function(le,fe,se,V){var Y=x.extendFlat({},se,V);return o(Y,fe,le),Y},j.mockCartesianAxis=function(le,fe,se){var V=this,Y=V.isSmith,ne=se._id,te=x.extendFlat({type:"linear"},se);l(te,le);var K={x:[0,2],y:[1,3]};return te.setRange=function(){var $=V.sectorBBox,ae=K[ne],ie=V.radialAxis._rl,oe=(ie[1]-ie[0])/(1-V.getHole(fe));te.range=[$[ae[0]]*oe,$[ae[1]]*oe]},te.isPtWithinRange=ne==="x"&&!Y?function($){return V.isPtInside($)}:function(){return!0},te.setRange(),te.setScale(),te},j.doAutoRange=function(le,fe){var se=this,V=se.gd,Y=se.radialAxis,ne=se.getRadial(fe);c(V,Y);var te=Y.range;ne.range=te.slice(),ne._input.range=te.slice(),Y._rl=[Y.r2l(te[0],null,"gregorian"),Y.r2l(te[1],null,"gregorian")]},j.updateRadialAxis=function(le,fe){var se=this,V=se.gd,Y=se.layers,ne=se.radius,te=se.innerRadius,K=se.cx,$=se.cy,ae=se.getRadial(fe),ie=R(se.getSector(fe)[0],360),oe=se.radialAxis,ue=te<ne,xe=se.isSmith;xe||(se.fillViewInitialKey("radialaxis.angle",ae.angle),se.fillViewInitialKey("radialaxis.range",oe.range.slice()),oe.setGeometry()),oe.tickangle==="auto"&&ie>90&&ie<=270&&(oe.tickangle=180);var he=xe?function(Ze){var rt=F(se,k([Ze.x,0]));return i(rt[0]-K,rt[1]-$)}:function(Ze){return i(oe.l2p(Ze.x)+te,0)},me=xe?function(Ze){return O(se,Ze.x,-1/0,1/0)}:function(Ze){return se.pathArc(oe.r2p(Ze.x)+te)},be=ee(ae);if(se.radialTickLayout!==be&&(Y["radial-axis"].selectAll(".xtick").remove(),se.radialTickLayout=be),ue){oe.setScale();var Ce=0,Se=xe?(oe.tickvals||[]).filter(function(Ze){return Ze>=0}).map(function(Ze){return f.tickText(oe,Ze,!0,!1)}):f.calcTicks(oe),Be=xe?Se:f.clipEnds(oe,Se),Ye=f.getTickSigns(oe)[2];xe&&((oe.ticks==="top"&&oe.side==="bottom"||oe.ticks==="bottom"&&oe.side==="top")&&(Ye=-Ye),oe.ticks==="top"&&oe.side==="top"&&(Ce=-oe.ticklen),oe.ticks==="bottom"&&oe.side==="bottom"&&(Ce=oe.ticklen)),f.drawTicks(V,oe,{vals:Se,layer:Y["radial-axis"],path:f.makeTickPath(oe,0,Ye),transFn:he,crisp:!1}),f.drawGrid(V,oe,{vals:Be,layer:Y["radial-grid"],path:me,transFn:x.noop,crisp:!1}),f.drawLabels(V,oe,{vals:Se,layer:Y["radial-axis"],transFn:he,labelFns:f.makeLabelFns(oe,Ce)})}var Xe=se.radialAxisAngle=se.vangles?N(G(U(ae.angle),se.vangles)):ae.angle,Te=i(K,$),Ie=Te+t(-Xe);J(Y["radial-axis"],ue&&(ae.showticklabels||ae.ticks),{transform:Ie}),J(Y["radial-grid"],ue&&ae.showgrid,{transform:xe?"":Te}),J(Y["radial-line"].select("line"),ue&&ae.showline,{x1:xe?-ne:te,y1:0,x2:ne,y2:0,transform:Ie}).attr("stroke-width",ae.linewidth).call(a.stroke,ae.linecolor)},j.updateRadialAxisTitle=function(le,fe,se){if(!this.isSmith){var V=this,Y=V.gd,ne=V.radius,te=V.cx,K=V.cy,$=V.getRadial(fe),ae=V.id+"title",ie=0;if($.title){var oe=r.bBox(V.layers["radial-axis"].node()).height,ue=$.title.font.size,xe=$.side;ie=xe==="top"?ue:xe==="counterclockwise"?-(oe+ue*.4):oe+ue*.8}var he=se!==void 0?se:V.radialAxisAngle,me=U(he),be=Math.cos(me),Ce=Math.sin(me),Se=te+ne/2*be+ie*Ce,Be=K-ne/2*Ce+ie*be;V.layers["radial-axis-title"]=y.draw(Y,ae,{propContainer:$,propName:V.id+".radialaxis.title",placeholder:D(Y,"Click to enter radial axis title"),attributes:{x:Se,y:Be,"text-anchor":"middle"},transform:{rotate:-he}})}},j.updateAngularAxis=function(le,fe){var se=this,V=se.gd,Y=se.layers,ne=se.radius,te=se.innerRadius,K=se.cx,$=se.cy,ae=se.getAngular(fe),ie=se.angularAxis,oe=se.isSmith;oe||(se.fillViewInitialKey("angularaxis.rotation",ae.rotation),ie.setGeometry(),ie.setScale());var ue=oe?function(rt){var Ge=F(se,k([0,rt.x]));return Math.atan2(Ge[0]-K,Ge[1]-$)-Math.PI/2}:function(rt){return ie.t2g(rt.x)};ie.type==="linear"&&ie.thetaunit==="radians"&&(ie.tick0=N(ie.tick0),ie.dtick=N(ie.dtick));var xe=function(rt){return i(K+ne*Math.cos(rt),$-ne*Math.sin(rt))},he=oe?function(rt){var Ge=F(se,k([0,rt.x]));return i(Ge[0],Ge[1])}:function(rt){return xe(ue(rt))},me=oe?function(rt){var Ge=F(se,k([0,rt.x])),ze=Math.atan2(Ge[0]-K,Ge[1]-$)-Math.PI/2;return i(Ge[0],Ge[1])+t(-N(ze))}:function(rt){var Ge=ue(rt);return xe(Ge)+t(-N(Ge))},be=oe?function(rt){return P(se,rt.x,0,1/0)}:function(rt){var Ge=ue(rt),ze=Math.cos(Ge),We=Math.sin(Ge);return"M"+[K+te*ze,$-te*We]+"L"+[K+ne*ze,$-ne*We]},Ce=f.makeLabelFns(ie,0),Se=Ce.labelStandoff,Be={};Be.xFn=function(rt){var Ge=ue(rt);return Math.cos(Ge)*Se},Be.yFn=function(rt){var Ge=ue(rt),ze=Math.sin(Ge)>0?.2:1;return-Math.sin(Ge)*(Se+rt.fontSize*ze)+Math.abs(Math.cos(Ge))*(rt.fontSize*_)},Be.anchorFn=function(rt){var Ge=ue(rt),ze=Math.cos(Ge);return Math.abs(ze)<.1?"middle":ze>0?"start":"end"},Be.heightFn=function(rt,Ge,ze){var We=ue(rt);return-.5*(1+Math.sin(We))*ze};var Ye=ee(ae);se.angularTickLayout!==Ye&&(Y["angular-axis"].selectAll("."+ie._id+"tick").remove(),se.angularTickLayout=Ye);var Xe=oe?[1/0].concat(ie.tickvals||[]).map(function(rt){return f.tickText(ie,rt,!0,!1)}):f.calcTicks(ie);oe&&(Xe[0].text="\u221E",Xe[0].fontSize*=1.75);var Te;if(fe.gridshape==="linear"?(Te=Xe.map(ue),x.angleDelta(Te[0],Te[1])<0&&(Te=Te.slice().reverse())):Te=null,se.vangles=Te,ie.type==="category"&&(Xe=Xe.filter(function(rt){return x.isAngleInsideSector(ue(rt),se.sectorInRad)})),ie.visible){var Ie=ie.ticks==="inside"?-1:1,Ze=(ie.linewidth||1)/2;f.drawTicks(V,ie,{vals:Xe,layer:Y["angular-axis"],path:"M"+Ie*Ze+",0h"+Ie*ie.ticklen,transFn:me,crisp:!1}),f.drawGrid(V,ie,{vals:Xe,layer:Y["angular-grid"],path:be,transFn:x.noop,crisp:!1}),f.drawLabels(V,ie,{vals:Xe,layer:Y["angular-axis"],repositionOnUpdate:!0,transFn:he,labelFns:Be})}J(Y["angular-line"].select("path"),ae.showline,{d:se.pathSubplot(),transform:i(K,$)}).attr("stroke-width",ae.linewidth).call(a.stroke,ae.linecolor)},j.updateFx=function(le,fe){if(!this.gd._context.staticPlot){var se=!this.isSmith;se&&(this.updateAngularDrag(le),this.updateRadialDrag(le,fe,0),this.updateRadialDrag(le,fe,1)),this.updateHoverAndMainDrag(le)}},j.updateHoverAndMainDrag=function(le){var fe=this,se=fe.isSmith,V=fe.gd,Y=fe.layers,ne=le._zoomlayer,te=h.MINZOOM,K=h.OFFEDGE,$=fe.radius,ae=fe.innerRadius,ie=fe.cx,oe=fe.cy,ue=fe.cxx,xe=fe.cyy,he=fe.sectorInRad,me=fe.vangles,be=fe.radialAxis,Ce=L.clampTiny,Se=L.findXYatLength,Be=L.findEnclosingVertexAngles,Ye=h.cornerHalfWidth,Xe=h.cornerLen/2,Te,Ie,Ze=v.makeDragger(Y,"path","maindrag","crosshair");u.select(Ze).attr("d",fe.pathSubplot()).attr("transform",i(ie,oe)),Ze.onmousemove=function(qe){p.hover(V,qe,fe.id),V._fullLayout._lasthover=Ze,V._fullLayout._hoversubplot=fe.id},Ze.onmouseout=function(qe){V._dragging||d.unhover(V,qe)};var rt={element:Ze,gd:V,subplot:fe.id,plotinfo:{id:fe.id,xaxis:fe.xaxis,yaxis:fe.yaxis},xaxes:[fe.xaxis],yaxes:[fe.yaxis]},Ge,ze,We,mt,Ft,Xt,Pt,Ut,Gt;function It(qe,xt){return Math.sqrt(qe*qe+xt*xt)}function Ct(qe,xt){return It(qe-ue,xt-xe)}function lt(qe,xt){return Math.atan2(xe-xt,qe-ue)}function dt(qe,xt){return[qe*Math.cos(xt),qe*Math.sin(-xt)]}function et(qe,xt){if(qe===0)return fe.pathSector(2*Ye);var Rt=Xe/qe,fr=xt-Rt,br=xt+Rt,pr=Math.max(0,Math.min(qe,$)),Tr=pr-Ye,Nr=pr+Ye;return"M"+dt(Tr,fr)+"A"+[Tr,Tr]+" 0,0,0 "+dt(Tr,br)+"L"+dt(Nr,br)+"A"+[Nr,Nr]+" 0,0,1 "+dt(Nr,fr)+"Z"}function Pe(qe,xt,Rt){if(qe===0)return fe.pathSector(2*Ye);var fr=dt(qe,xt),br=dt(qe,Rt),pr=Ce((fr[0]+br[0])/2),Tr=Ce((fr[1]+br[1])/2),Nr,Ir;if(pr&&Tr){var lr=Tr/pr,Yr=-1/lr,nt=Se(Ye,lr,pr,Tr);Nr=Se(Xe,Yr,nt[0][0],nt[0][1]),Ir=Se(Xe,Yr,nt[1][0],nt[1][1])}else{var Ae,Ee;Tr?(Ae=Xe,Ee=Ye):(Ae=Ye,Ee=Xe),Nr=[[pr-Ae,Tr-Ee],[pr+Ae,Tr-Ee]],Ir=[[pr-Ae,Tr+Ee],[pr+Ae,Tr+Ee]]}return"M"+Nr.join("L")+"L"+Ir.reverse().join("L")+"Z"}function Je(){We=null,mt=null,Ft=fe.pathSubplot(),Xt=!1;var qe=V._fullLayout[fe.id];Pt=s(qe.bgcolor).getLuminance(),Ut=v.makeZoombox(ne,Pt,ie,oe,Ft),Ut.attr("fill-rule","evenodd"),Gt=v.makeCorners(ne,ie,oe),b(V)}function it(qe,xt){return xt=Math.max(Math.min(xt,$),ae),qe<K?qe=0:$-qe<K?qe=$:xt<K?xt=0:$-xt<K&&(xt=$),Math.abs(xt-qe)>te?(qe<xt?(We=qe,mt=xt):(We=xt,mt=qe),!0):(We=null,mt=null,!1)}function ht(qe,xt){qe=qe||Ft,xt=xt||"M0,0Z",Ut.attr("d",qe),Gt.attr("d",xt),v.transitionZoombox(Ut,Gt,Xt,Pt),Xt=!0;var Rt={};Ht(Rt),V.emit("plotly_relayouting",Rt)}function zt(qe,xt){qe=qe*Te,xt=xt*Ie;var Rt=Ge+qe,fr=ze+xt,br=Ct(Ge,ze),pr=Math.min(Ct(Rt,fr),$),Tr=lt(Ge,ze),Nr,Ir;it(br,pr)&&(Nr=Ft+fe.pathSector(mt),We&&(Nr+=fe.pathSector(We)),Ir=et(We,Tr)+et(mt,Tr)),ht(Nr,Ir)}function Lt(qe,xt,Rt,fr){var br=L.findIntersectionXY(Rt,fr,Rt,[qe-ue,xe-xt]);return It(br[0],br[1])}function Vt(qe,xt){var Rt=Ge+qe,fr=ze+xt,br=lt(Ge,ze),pr=lt(Rt,fr),Tr=Be(br,me),Nr=Be(pr,me),Ir=Lt(Ge,ze,Tr[0],Tr[1]),lr=Math.min(Lt(Rt,fr,Nr[0],Nr[1]),$),Yr,nt;it(Ir,lr)&&(Yr=Ft+fe.pathSector(mt),We&&(Yr+=fe.pathSector(We)),nt=[Pe(We,Tr[0],Tr[1]),Pe(mt,Tr[0],Tr[1])].join(" ")),ht(Yr,nt)}function $t(){if(v.removeZoombox(V),!(We===null||mt===null)){var qe={};Ht(qe),v.showDoubleClickNotifier(V),m.call("_guiRelayout",V,qe)}}function Ht(qe){var xt=be._rl,Rt=(xt[1]-xt[0])/(1-ae/$)/$,fr=[xt[0]+(We-ae)*Rt,xt[0]+(mt-ae)*Rt];qe[fe.id+".radialaxis.range"]=fr}function tr(qe,xt){var Rt=V._fullLayout.clickmode;if(v.removeZoombox(V),qe===2){var fr={};for(var br in fe.viewInitial)fr[fe.id+"."+br]=fe.viewInitial[br];V.emit("plotly_doubleclick",null),m.call("_guiRelayout",V,fr)}Rt.indexOf("select")>-1&&qe===1&&A(xt,V,[fe.xaxis],[fe.yaxis],fe.id,rt),Rt.indexOf("event")>-1&&p.click(V,xt,fe.id)}rt.prepFn=function(qe,xt,Rt){var fr=V._fullLayout.dragmode,br=Ze.getBoundingClientRect();V._fullLayout._calcInverseTransform(V);var pr=V._fullLayout._invTransform;Te=V._fullLayout._invScaleX,Ie=V._fullLayout._invScaleY;var Tr=x.apply3DTransform(pr)(xt-br.left,Rt-br.top);if(Ge=Tr[0],ze=Tr[1],me){var Nr=L.findPolygonOffset($,he[0],he[1],me);Ge+=ue+Nr[0],ze+=xe+Nr[1]}switch(fr){case"zoom":rt.clickFn=tr,se||(me?rt.moveFn=Vt:rt.moveFn=zt,rt.doneFn=$t,Je());break;case"select":case"lasso":g(qe,xt,Rt,rt,fr);break}},d.init(rt)},j.updateRadialDrag=function(le,fe,se){var V=this,Y=V.gd,ne=V.layers,te=V.radius,K=V.innerRadius,$=V.cx,ae=V.cy,ie=V.radialAxis,oe=h.radialDragBoxSize,ue=oe/2;if(!ie.visible)return;var xe=U(V.radialAxisAngle),he=ie._rl,me=he[0],be=he[1],Ce=he[se],Se=.75*(he[1]-he[0])/(1-V.getHole(fe))/te,Be,Ye,Xe;se?(Be=$+(te+ue)*Math.cos(xe),Ye=ae-(te+ue)*Math.sin(xe),Xe="radialdrag"):(Be=$+(K-ue)*Math.cos(xe),Ye=ae-(K-ue)*Math.sin(xe),Xe="radialdrag-inner");var Te=v.makeRectDragger(ne,Xe,"crosshair",-ue,-ue,oe,oe),Ie={element:Te,gd:Y};J(u.select(Te),ie.visible&&K<te,{transform:i(Be,Ye)});var Ze,rt,Ge;function ze(Pt,Ut){if(Ze)Ze(Pt,Ut);else{var Gt=[Pt,-Ut],It=[Math.cos(xe),Math.sin(xe)],Ct=Math.abs(x.dot(Gt,It)/Math.sqrt(x.dot(Gt,Gt)));isNaN(Ct)||(Ze=Ct<.5?Ft:Xt)}var lt={};We(lt),Y.emit("plotly_relayouting",lt)}function We(Pt){rt!==null?Pt[V.id+".radialaxis.angle"]=rt:Ge!==null&&(Pt[V.id+".radialaxis.range["+se+"]"]=Ge)}function mt(){rt!==null?m.call("_guiRelayout",Y,V.id+".radialaxis.angle",rt):Ge!==null&&m.call("_guiRelayout",Y,V.id+".radialaxis.range["+se+"]",Ge)}function Ft(Pt,Ut){if(se!==0){var Gt=Be+Pt,It=Ye+Ut;rt=Math.atan2(ae-It,Gt-$),V.vangles&&(rt=G(rt,V.vangles)),rt=N(rt);var Ct=i($,ae)+t(-rt);ne["radial-axis"].attr("transform",Ct),ne["radial-line"].select("line").attr("transform",Ct);var lt=V.gd._fullLayout,dt=lt[V.id];V.updateRadialAxisTitle(lt,dt,rt)}}function Xt(Pt,Ut){var Gt=x.dot([Pt,-Ut],[Math.cos(xe),Math.sin(xe)]);if(Ge=Ce-Se*Gt,Se>0!=(se?Ge>me:Ge<be)){Ge=null;return}var It=Y._fullLayout,Ct=It[V.id];ie.range[se]=Ge,ie._rl[se]=Ge,V.updateRadialAxis(It,Ct),V.xaxis.setRange(),V.xaxis.setScale(),V.yaxis.setRange(),V.yaxis.setScale();var lt=!1;for(var dt in V.traceHash){var et=V.traceHash[dt],Pe=x.filterVisible(et),Je=et[0][0].trace._module;Je.plot(Y,V,Pe,Ct),m.traceIs(dt,"gl")&&Pe.length&&(lt=!0)}lt&&(w(Y),T(Y))}Ie.prepFn=function(){Ze=null,rt=null,Ge=null,Ie.moveFn=ze,Ie.doneFn=mt,b(Y)},Ie.clampFn=function(Pt,Ut){return Math.sqrt(Pt*Pt+Ut*Ut)<h.MINDRAG&&(Pt=0,Ut=0),[Pt,Ut]},d.init(Ie)},j.updateAngularDrag=function(le){var fe=this,se=fe.gd,V=fe.layers,Y=fe.radius,ne=fe.angularAxis,te=fe.cx,K=fe.cy,$=fe.cxx,ae=fe.cyy,ie=h.angularDragBoxSize,oe=v.makeDragger(V,"path","angulardrag","move"),ue={element:oe,gd:se};u.select(oe).attr("d",fe.pathAnnulus(Y,Y+ie)).attr("transform",i(te,K)).call(M,"move");function xe(Ge,ze){return Math.atan2(ae+ie-ze,Ge-$-ie)}var he=V.frontplot.select(".scatterlayer").selectAll(".trace"),me=he.selectAll(".point"),be=he.selectAll(".textpoint"),Ce,Se,Be,Ye,Xe,Te;function Ie(Ge,ze){var We=fe.gd._fullLayout,mt=We[fe.id],Ft=Ce+Ge*le._invScaleX,Xt=Se+ze*le._invScaleY,Pt=xe(Ft,Xt),Ut=N(Pt-Te);if(Ye=Be+Ut,V.frontplot.attr("transform",i(fe.xOffset2,fe.yOffset2)+t([-Ut,$,ae])),fe.vangles){Xe=fe.radialAxisAngle+Ut;var Gt=i(te,K)+t(-Ut),It=i(te,K)+t(-Xe);V.bg.attr("transform",Gt),V["radial-grid"].attr("transform",Gt),V["radial-axis"].attr("transform",It),V["radial-line"].select("line").attr("transform",It),fe.updateRadialAxisTitle(We,mt,Xe)}else fe.clipPaths.forTraces.select("path").attr("transform",i($,ae)+t(Ut));me.each(function(){var it=u.select(this),ht=r.getTranslate(it);it.attr("transform",i(ht.x,ht.y)+t([Ut]))}),be.each(function(){var it=u.select(this),ht=it.select("text"),zt=r.getTranslate(it);it.attr("transform",t([Ut,ht.attr("x"),ht.attr("y")])+i(zt.x,zt.y))}),ne.rotation=x.modHalf(Ye,360),fe.updateAngularAxis(We,mt),fe._hasClipOnAxisFalse&&!x.isFullCircle(fe.sectorInRad)&&he.call(r.hideOutsideRangePoints,fe);var Ct=!1;for(var lt in fe.traceHash)if(m.traceIs(lt,"gl")){var dt=fe.traceHash[lt],et=x.filterVisible(dt),Pe=dt[0][0].trace._module;Pe.plot(se,fe,et,mt),et.length&&(Ct=!0)}Ct&&(w(se),T(se));var Je={};Ze(Je),se.emit("plotly_relayouting",Je)}function Ze(Ge){Ge[fe.id+".angularaxis.rotation"]=Ye,fe.vangles&&(Ge[fe.id+".radialaxis.angle"]=Xe)}function rt(){be.select("text").attr("transform",null);var Ge={};Ze(Ge),m.call("_guiRelayout",se,Ge)}ue.prepFn=function(Ge,ze,We){var mt=le[fe.id];Be=mt.angularaxis.rotation;var Ft=oe.getBoundingClientRect();Ce=ze-Ft.left,Se=We-Ft.top,se._fullLayout._calcInverseTransform(se);var Xt=x.apply3DTransform(le._invTransform)(Ce,Se);Ce=Xt[0],Se=Xt[1],Te=xe(Ce,Se),ue.moveFn=Ie,ue.doneFn=rt,b(se)},fe.vangles&&!x.isFullCircle(fe.sectorInRad)&&(ue.prepFn=x.noop,M(u.select(oe),null)),d.init(ue)},j.isPtInside=function(le){if(this.isSmith)return!0;var fe=this.sectorInRad,se=this.vangles,V=this.angularAxis.c2g(le.theta),Y=this.radialAxis,ne=Y.c2l(le.r),te=Y._rl,K=se?L.isPtInsidePolygon:x.isPtInsideSector;return K(ne,V,te,fe,se)},j.pathArc=function(le){var fe=this.sectorInRad,se=this.vangles,V=se?L.pathPolygon:x.pathArc;return V(le,fe[0],fe[1],se)},j.pathSector=function(le){var fe=this.sectorInRad,se=this.vangles,V=se?L.pathPolygon:x.pathSector;return V(le,fe[0],fe[1],se)},j.pathAnnulus=function(le,fe){var se=this.sectorInRad,V=this.vangles,Y=V?L.pathPolygonAnnulus:x.pathAnnulus;return Y(le,fe,se[0],se[1],V)},j.pathSubplot=function(){var le=this.innerRadius,fe=this.radius;return le?this.pathAnnulus(le,fe):this.pathSector(fe)},j.fillViewInitialKey=function(le,fe){le in this.viewInitial||(this.viewInitial[le]=fe)};function ee(le){var fe=le.ticks+String(le.ticklen)+String(le.showticklabels);return"side"in le&&(fe+=le.side),fe}function q(le){var fe=le[0],se=le[1],V=se-fe,Y=R(fe,360),ne=Y+V,te=Math.cos(U(Y)),K=Math.sin(U(Y)),$=Math.cos(U(ne)),ae=Math.sin(U(ne)),ie,oe,ue,xe;return Y<=90&&ne>=90||Y>90&&ne>=450?xe=1:K<=0&&ae<=0?xe=0:xe=Math.max(K,ae),Y<=180&&ne>=180||Y>180&&ne>=540?ie=-1:te>=0&&$>=0?ie=0:ie=Math.min(te,$),Y<=270&&ne>=270||Y>270&&ne>=630?oe=-1:K>=0&&ae>=0?oe=0:oe=Math.min(K,ae),ne>=360?ue=1:te<=0&&$<=0?ue=0:ue=Math.max(te,$),[ie,oe,ue,xe]}function G(le,fe){var se=function(Y){return x.angleDist(le,Y)},V=x.findIndexOfMin(fe,se);return fe[V]}function J(le,fe,se){return fe?(le.attr("display",null),le.attr(se)):le&&le.attr("display","none"),le}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(e,I,B){var u=e("../../lib"),s=e("../cartesian/set_convert"),m=u.deg2rad,x=u.rad2deg;I.exports=function(f,l,o){switch(s(f,o),f._id){case"x":case"radialaxis":t(f,l);break;case"angularaxis":r(f,l);break}};function t(n,f){var l=f._subplot;n.setGeometry=function(){var o=n._rl[0],c=n._rl[1],v=l.innerRadius,d=(l.radius-v)/(c-o),p=v/d,y=o>c?function(g){return g<=0}:function(g){return g>=0};n.c2g=function(g){var A=n.c2l(g)-o;return(y(A)?A:0)+p},n.g2c=function(g){return n.l2c(g+o-p)},n.g2p=function(g){return g*d},n.c2p=function(g){return n.g2p(n.c2g(g))}}}function i(n,f){return f==="degrees"?m(n):n}function a(n,f){return f==="degrees"?x(n):n}function r(n,f){var l=n.type;if(l==="linear"){var o=n.d2c,c=n.c2d;n.d2c=function(v,d){return i(o(v),d)},n.c2d=function(v,d){return c(a(v,d))}}n.makeCalcdata=function(v,d){var p=v[d],y=v._length,g,A,b=function(h){return n.d2c(h,v.thetaunit)};if(p){if(u.isTypedArray(p)&&l==="linear"){if(y===p.length)return p;if(p.subarray)return p.subarray(0,y)}for(g=new Array(y),A=0;A<y;A++)g[A]=b(p[A])}else{var M=d+"0",w="d"+d,T=M in v?b(v[M]):0,_=v[w]?b(v[w]):(n.period||2*Math.PI)/y;for(g=new Array(y),A=0;A<y;A++)g[A]=T+A*_}return g},n.setGeometry=function(){var v=f.sector,d=v.map(m),p={clockwise:-1,counterclockwise:1}[n.direction],y=m(n.rotation),g=function(L){return p*L+y},A=function(L){return(L-y)/p},b,M,w,T;switch(l){case"linear":M=b=u.identity,T=m,w=x,n.range=u.isFullCircle(d)?[v[0],v[0]+360]:d.map(A).map(x);break;case"category":var _=n._categories.length,h=n.period?Math.max(n.period,_):_;h===0&&(h=1),M=T=function(L){return L*2*Math.PI/h},b=w=function(L){return L*h/Math.PI/2},n.range=[0,h];break}n.c2g=function(L){return g(M(L))},n.g2c=function(L){return b(A(L))},n.t2g=function(L){return g(T(L))},n.g2t=function(L){return w(A(L))}}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(e,I,B){I.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(e,I,B){function u(a){return a<0?-1:a>0?1:0}function s(a){var r=a[0],n=a[1];if(!isFinite(r)||!isFinite(n))return[1,0];var f=(r+1)*(r+1)+n*n;return[(r*r+n*n-1)/f,2*n/f]}function m(a,r){var n=r[0],f=r[1];return[n*a.radius+a.cx,-f*a.radius+a.cy]}function x(a,r){return r*a.radius}function t(a,r,n,f){var l=m(a,s([n,r])),o=l[0],c=l[1],v=m(a,s([f,r])),d=v[0],p=v[1];if(r===0)return["M"+o+","+c,"L"+d+","+p].join(" ");var y=x(a,1/Math.abs(r));return["M"+o+","+c,"A"+y+","+y+" 0 0,"+(r<0?1:0)+" "+d+","+p].join(" ")}function i(a,r,n,f){var l=x(a,1/(r+1)),o=m(a,s([r,n])),c=o[0],v=o[1],d=m(a,s([r,f])),p=d[0],y=d[1];if(u(n)!==u(f)){var g=m(a,s([r,0])),A=g[0],b=g[1];return["M"+c+","+v,"A"+l+","+l+" 0 0,"+(0<n?0:1)+" "+A+","+b,"A"+l+","+l+" 0 0,"+(f<0?0:1)+p+","+y].join(" ")}return["M"+c+","+v,"A"+l+","+l+" 0 0,"+(f<n?0:1)+" "+p+","+y].join(" ")}I.exports={smith:s,reactanceArc:t,resistanceArc:i,smithTransform:m}},{}],629:[function(e,I,B){var u=e("../get_data").getSubplotCalcData,s=e("../../lib").counterRegex,m=e("../polar/polar"),x=e("./constants"),t=x.attr,i=x.name,a=s(i),r={};r[t]={valType:"subplotid",dflt:i,editType:"calc"};function n(l){for(var o=l._fullLayout,c=l.calcdata,v=o._subplots[i],d=0;d<v.length;d++){var p=v[d],y=u(c,i,p),g=o[p]._subplot;g||(g=m(l,p,!0),o[p]._subplot=g),g.plot(y,o,l._promises)}}function f(l,o,c,v){for(var d=v._subplots[i]||[],p=0;p<d.length;p++){var y=d[p],g=v[y]._subplot;if(!o[y]&&!!g){g.framework.remove();for(var A in g.clipPaths)g.clipPaths[A].remove()}}}I.exports={attr:t,name:i,idRoot:i,idRegex:a,attrRegex:a,attributes:r,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:n,clean:f,toSVG:e("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(e,I,B){var u=e("../../components/color/attributes"),s=e("../cartesian/layout_attributes"),m=e("../domain").attributes,x=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,i=t({color:s.color,showline:x({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:x({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth},"plot","from-root"),a=t({ticklen:s.ticklen,tickwidth:x({},s.tickwidth,{dflt:2}),tickcolor:s.tickcolor,showticklabels:s.showticklabels,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,tickfont:s.tickfont,tickformat:s.tickformat,hoverformat:s.hoverformat,layer:s.layer},"plot","from-root"),r=x({visible:x({},s.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:x({},s.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},i,a),n=x({visible:x({},s.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:s.ticks,editType:"calc"},i,a);I.exports={domain:m({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:u.background},realaxis:r,imaginaryaxis:n,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color"),m=e("../../plot_api/plot_template"),x=e("../subplot_defaults"),t=e("../get_data").getSubplotData,i=e("../cartesian/prefix_suffix_defaults"),a=e("../cartesian/tick_label_defaults"),r=e("../cartesian/line_grid_defaults"),n=e("../cartesian/set_convert"),f=e("./layout_attributes"),l=e("./constants"),o=l.axisNames,c=d(function(p){return p.slice().reverse().map(function(y){return-y}).concat([0]).concat(p)},String);function v(p,y,g,A){var b=g("bgcolor");A.bgColor=s.combine(b,A.paper_bgcolor);var M=t(A.fullData,l.name,A.id),w=A.layoutOut,T;function _(j,ee){return g(T+"."+j,ee)}for(var h=0;h<o.length;h++){T=o[h],u.isPlainObject(p[T])||(p[T]={});var L=p[T],S=m.newContainer(y,T);S._id=S._name=T,S._attr=A.id+"."+T,S._traceIndices=M.map(function(j){return j._expandedIndex});var k=_("visible");if(S.type="linear",n(S,w),i(L,S,_,S.type),k){var P=T==="realaxis";if(P&&_("side"),P)_("tickvals");else{var O=c(y.realaxis.tickvals||f.realaxis.tickvals.dflt);_("tickvals",O)}var F,D,R,U,N=A.font||{};k&&(F=_("color"),D=F===L.color?F:N.color,R=N.size,U=N.family),a(L,S,_,S.type,{noAng:!P,noExp:!0,font:{color:D,size:R,family:U}}),u.coerce2(p,y,f,T+".ticklen"),u.coerce2(p,y,f,T+".tickwidth"),u.coerce2(p,y,f,T+".tickcolor",y.color);var X=_("ticks");X||(delete y[T].ticklen,delete y[T].tickwidth,delete y[T].tickcolor),r(L,S,_,{dfltColor:F,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[T]}),_("layer")}_("hoverformat"),delete S.type,S._input=L}}I.exports=function(y,g,A){x(y,g,A,{noUirevision:!0,type:l.name,attributes:f,handleDefaults:v,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:A,layoutOut:g})};function d(p,y){var g={};return function(A){var b=y?y(A):A;if(b in g)return g[b];var M=p(A);return g[b]=M,M}}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(e,I,B){var u=e("../lib"),s=e("../plot_api/plot_template"),m=e("./domain").defaults;I.exports=function(t,i,a,r){var n=r.type,f=r.attributes,l=r.handleDefaults,o=r.partition||"x",c=i._subplots[n],v=c.length,d=v&&c[0].replace(/\d+$/,""),p,y;function g(w,T){return u.coerce(p,y,f,w,T)}for(var A=0;A<v;A++){var b=c[A];t[b]?p=t[b]:p=t[b]={},y=s.newContainer(i,b,d),r.noUirevision||g("uirevision",i.uirevision);var M={};M[o]=[A/v,(A+1)/v],m(y,i,g,M),r.id=b,l(p,y,g,r)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(e,I,B){var u=e("../constants/docs");u.FORMAT_LINK,u.DATE_FORMAT_LINK;function s(m){var x=m.description?" "+m.description:"",t=m.keys||[];if(t.length>0){for(var i=[],a=0;a<t.length;a++)i[a]="`"+t[a]+"`";x=x+"Finally, the template string has access to ",t.length===1?x="variable "+i[0]:x="variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return x}B.hovertemplateAttrs=function(m,x){m=m||{},x=x||{},s(x);var t={valType:"string",dflt:"",editType:m.editType||"none"};return m.arrayOk!==!1&&(t.arrayOk=!0),t},B.texttemplateAttrs=function(m,x){m=m||{},x=x||{},s(x);var t={valType:"string",dflt:"",editType:m.editType||"calc"};return m.arrayOk!==!1&&(t.arrayOk=!0),t}},{"../constants/docs":474}],634:[function(e,I,B){var u=e("./ternary"),s=e("../../plots/get_data").getSubplotCalcData,m=e("../../lib").counterRegex,x="ternary";B.name=x;var t=B.attr="subplot";B.idRoot=x,B.idRegex=B.attrRegex=m(x);var i=B.attributes={};i[t]={valType:"subplotid",dflt:"ternary",editType:"calc"},B.layoutAttributes=e("./layout_attributes"),B.supplyLayoutDefaults=e("./layout_defaults"),B.plot=function(r){for(var n=r._fullLayout,f=r.calcdata,l=n._subplots[x],o=0;o<l.length;o++){var c=l[o],v=s(f,x,c),d=n[c]._subplot;d||(d=new u({id:c,graphDiv:r,container:n._ternarylayer.node()},n),n[c]._subplot=d),d.plot(v,n,r._promises)}},B.clean=function(a,r,n,f){for(var l=f._subplots[x]||[],o=0;o<l.length;o++){var c=l[o],v=f[c]._subplot;!r[c]&&!!v&&(v.plotContainer.remove(),v.clipDef.remove(),v.clipDefRelative.remove(),v.layers["a-title"].remove(),v.layers["b-title"].remove(),v.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(e,I,B){var u=e("../../components/color/attributes"),s=e("../domain").attributes,m=e("../cartesian/layout_attributes"),x=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/extend").extendFlat,i={title:{text:m.title.text,font:m.title.font},color:m.color,tickmode:m.tickmode,nticks:t({},m.nticks,{dflt:6,min:1}),tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:t({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:t({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth,layer:m.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},a=I.exports=x({domain:s({name:"ternary"}),bgcolor:{valType:"color",dflt:u.background},sum:{valType:"number",dflt:1,min:0},aaxis:i,baxis:i,caxis:i},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(e,I,B){var u=e("../../components/color"),s=e("../../plot_api/plot_template"),m=e("../../lib"),x=e("../subplot_defaults"),t=e("../cartesian/tick_label_defaults"),i=e("../cartesian/prefix_suffix_defaults"),a=e("../cartesian/tick_mark_defaults"),r=e("../cartesian/tick_value_defaults"),n=e("../cartesian/line_grid_defaults"),f=e("./layout_attributes"),l=["aaxis","baxis","caxis"];I.exports=function(d,p,y){x(d,p,y,{type:"ternary",attributes:f,handleDefaults:o,font:p.font,paper_bgcolor:p.paper_bgcolor})};function o(v,d,p,y){var g=p("bgcolor"),A=p("sum");y.bgColor=u.combine(g,y.paper_bgcolor);for(var b,M,w,T=0;T<l.length;T++)b=l[T],M=v[b]||{},w=s.newContainer(d,b),w._name=b,c(M,w,y,d);var _=d.aaxis,h=d.baxis,L=d.caxis;_.min+h.min+L.min>=A&&(_.min=0,h.min=0,L.min=0,v.aaxis&&delete v.aaxis.min,v.baxis&&delete v.baxis.min,v.caxis&&delete v.caxis.min)}function c(v,d,p,y){var g=f[d._name];function A(S,k){return m.coerce(v,d,g,S,k)}A("uirevision",y.uirevision),d.type="linear";var b=A("color"),M=b!==g.color.dflt?b:p.font.color,w=d._name,T=w.charAt(0).toUpperCase(),_="Component "+T,h=A("title.text",_);d._hovertitle=h===_?h:T,m.coerceFont(A,"title.font",{family:p.font.family,size:m.bigFont(p.font.size),color:M}),A("min"),r(v,d,A,"linear"),i(v,d,A,"linear"),t(v,d,A,"linear"),a(v,d,A,{outerTicks:!0});var L=A("showticklabels");L&&(m.coerceFont(A,"tickfont",{family:p.font.family,size:p.font.size,color:M}),A("tickangle"),A("tickformat")),n(v,d,A,{dfltColor:b,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g}),A("hoverformat"),A("layer")}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(e,I,B){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("../../registry"),x=e("../../lib"),t=x.strTranslate,i=x._,a=e("../../components/color"),r=e("../../components/drawing"),n=e("../cartesian/set_convert"),f=e("../../lib/extend").extendFlat,l=e("../plots"),o=e("../cartesian/axes"),c=e("../../components/dragelement"),v=e("../../components/fx"),d=e("../../components/dragelement/helpers"),p=d.freeMode,y=d.rectMode,g=e("../../components/titles"),A=e("../cartesian/select").prepSelect,b=e("../cartesian/select").selectOnClick,M=e("../cartesian/select").clearSelect,w=e("../cartesian/select").clearSelectionsCache,T=e("../cartesian/constants");function _(N,X){this.id=N.id,this.graphDiv=N.graphDiv,this.init(X),this.makeFramework(X),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}I.exports=_;var h=_.prototype;h.init=function(N){this.container=N._ternarylayer,this.defs=N._defs,this.layoutId=N._uid,this.traceHash={},this.layers={}},h.plot=function(N,X){var j=this,ee=X[j.id],q=X._size;j._hasClipOnAxisFalse=!1;for(var G=0;G<N.length;G++){var J=N[G][0].trace;if(J.cliponaxis===!1){j._hasClipOnAxisFalse=!0;break}}j.updateLayers(ee),j.adjustLayout(ee,q),l.generalUpdatePerTraceModule(j.graphDiv,j,N,ee),j.layers.plotbg.select("path").call(a.fill,ee.bgcolor)},h.makeFramework=function(N){var X=this,j=X.graphDiv,ee=N[X.id],q=X.clipId="clip"+X.layoutId+X.id,G=X.clipIdRelative="clip-relative"+X.layoutId+X.id;X.clipDef=x.ensureSingleById(N._clips,"clipPath",q,function(J){J.append("path").attr("d","M0,0Z")}),X.clipDefRelative=x.ensureSingleById(N._clips,"clipPath",G,function(J){J.append("path").attr("d","M0,0Z")}),X.plotContainer=x.ensureSingle(X.container,"g",X.id),X.updateLayers(ee),r.setClipUrl(X.layers.backplot,q,j),r.setClipUrl(X.layers.grids,q,j)},h.updateLayers=function(N){var X=this,j=X.layers,ee=["draglayer","plotbg","backplot","grids"];N.aaxis.layer==="below traces"&&ee.push("aaxis","aline"),N.baxis.layer==="below traces"&&ee.push("baxis","bline"),N.caxis.layer==="below traces"&&ee.push("caxis","cline"),ee.push("frontplot"),N.aaxis.layer==="above traces"&&ee.push("aaxis","aline"),N.baxis.layer==="above traces"&&ee.push("baxis","bline"),N.caxis.layer==="above traces"&&ee.push("caxis","cline");var q=X.plotContainer.selectAll("g.toplevel").data(ee,String),G=["agrid","bgrid","cgrid"];q.enter().append("g").attr("class",function(J){return"toplevel "+J}).each(function(J){var le=u.select(this);j[J]=le,J==="frontplot"?le.append("g").classed("scatterlayer",!0):J==="backplot"?le.append("g").classed("maplayer",!0):J==="plotbg"?le.append("path").attr("d","M0,0Z"):J==="aline"||J==="bline"||J==="cline"?le.append("path"):J==="grids"&&G.forEach(function(fe){j[fe]=le.append("g").classed("grid "+fe,!0)})}),q.order()};var L=Math.sqrt(4/3);h.adjustLayout=function(N,X){var j=this,ee=N.domain,q=(ee.x[0]+ee.x[1])/2,G=(ee.y[0]+ee.y[1])/2,J=ee.x[1]-ee.x[0],le=ee.y[1]-ee.y[0],fe=J*X.w,se=le*X.h,V=N.sum,Y=N.aaxis.min,ne=N.baxis.min,te=N.caxis.min,K,$,ae,ie,oe,ue;fe>L*se?(ie=se,ae=ie*L):(ae=fe,ie=ae/L),oe=J*ae/fe,ue=le*ie/se,K=X.l+X.w*q-ae/2,$=X.t+X.h*(1-G)-ie/2,j.x0=K,j.y0=$,j.w=ae,j.h=ie,j.sum=V,j.xaxis={type:"linear",range:[Y+2*te-V,V-Y-2*ne],domain:[q-oe/2,q+oe/2],_id:"x"},n(j.xaxis,j.graphDiv._fullLayout),j.xaxis.setScale(),j.xaxis.isPtWithinRange=function(Ie){return Ie.a>=j.aaxis.range[0]&&Ie.a<=j.aaxis.range[1]&&Ie.b>=j.baxis.range[1]&&Ie.b<=j.baxis.range[0]&&Ie.c>=j.caxis.range[1]&&Ie.c<=j.caxis.range[0]},j.yaxis={type:"linear",range:[Y,V-ne-te],domain:[G-ue/2,G+ue/2],_id:"y"},n(j.yaxis,j.graphDiv._fullLayout),j.yaxis.setScale(),j.yaxis.isPtWithinRange=function(){return!0};var xe=j.yaxis.domain[0],he=j.aaxis=f({},N.aaxis,{range:[Y,V-ne-te],side:"left",tickangle:(+N.aaxis.tickangle||0)-30,domain:[xe,xe+ue*L],anchor:"free",position:0,_id:"y",_length:ae});n(he,j.graphDiv._fullLayout),he.setScale();var me=j.baxis=f({},N.baxis,{range:[V-Y-te,ne],side:"bottom",domain:j.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ae});n(me,j.graphDiv._fullLayout),me.setScale();var be=j.caxis=f({},N.caxis,{range:[V-Y-ne,te],side:"right",tickangle:(+N.caxis.tickangle||0)+30,domain:[xe,xe+ue*L],anchor:"free",position:0,_id:"y",_length:ae});n(be,j.graphDiv._fullLayout),be.setScale();var Ce="M"+K+","+($+ie)+"h"+ae+"l-"+ae/2+",-"+ie+"Z";j.clipDef.select("path").attr("d",Ce),j.layers.plotbg.select("path").attr("d",Ce);var Se="M0,"+ie+"h"+ae+"l-"+ae/2+",-"+ie+"Z";j.clipDefRelative.select("path").attr("d",Se);var Be=t(K,$);j.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Be),j.clipDefRelative.select("path").attr("transform",null);var Ye=t(K-me._offset,$+ie);j.layers.baxis.attr("transform",Ye),j.layers.bgrid.attr("transform",Ye);var Xe=t(K+ae/2,$)+"rotate(30)"+t(0,-he._offset);j.layers.aaxis.attr("transform",Xe),j.layers.agrid.attr("transform",Xe);var Te=t(K+ae/2,$)+"rotate(-30)"+t(0,-be._offset);j.layers.caxis.attr("transform",Te),j.layers.cgrid.attr("transform",Te),j.drawAxes(!0),j.layers.aline.select("path").attr("d",he.showline?"M"+K+","+($+ie)+"l"+ae/2+",-"+ie:"M0,0").call(a.stroke,he.linecolor||"#000").style("stroke-width",(he.linewidth||0)+"px"),j.layers.bline.select("path").attr("d",me.showline?"M"+K+","+($+ie)+"h"+ae:"M0,0").call(a.stroke,me.linecolor||"#000").style("stroke-width",(me.linewidth||0)+"px"),j.layers.cline.select("path").attr("d",be.showline?"M"+(K+ae/2)+","+$+"l"+ae/2+","+ie:"M0,0").call(a.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),j.graphDiv._context.staticPlot||j.initInteractions(),r.setClipUrl(j.layers.frontplot,j._hasClipOnAxisFalse?null:j.clipId,j.graphDiv)},h.drawAxes=function(N){var X=this,j=X.graphDiv,ee=X.id.substr(7)+"title",q=X.layers,G=X.aaxis,J=X.baxis,le=X.caxis;if(X.drawAx(G),X.drawAx(J),X.drawAx(le),N){var fe=Math.max(G.showticklabels?G.tickfont.size/2:0,(le.showticklabels?le.tickfont.size*.75:0)+(le.ticks==="outside"?le.ticklen*.87:0)),se=(J.showticklabels?J.tickfont.size:0)+(J.ticks==="outside"?J.ticklen:0)+3;q["a-title"]=g.draw(j,"a"+ee,{propContainer:G,propName:X.id+".aaxis.title",placeholder:i(j,"Click to enter Component A title"),attributes:{x:X.x0+X.w/2,y:X.y0-G.title.font.size/3-fe,"text-anchor":"middle"}}),q["b-title"]=g.draw(j,"b"+ee,{propContainer:J,propName:X.id+".baxis.title",placeholder:i(j,"Click to enter Component B title"),attributes:{x:X.x0-se,y:X.y0+X.h+J.title.font.size*.83+se,"text-anchor":"middle"}}),q["c-title"]=g.draw(j,"c"+ee,{propContainer:le,propName:X.id+".caxis.title",placeholder:i(j,"Click to enter Component C title"),attributes:{x:X.x0+X.w+se,y:X.y0+X.h+le.title.font.size*.83+se,"text-anchor":"middle"}})}},h.drawAx=function(N){var X=this,j=X.graphDiv,ee=N._name,q=ee.charAt(0),G=N._id,J=X.layers[ee],le=30,fe=q+"tickLayout",se=S(N);X[fe]!==se&&(J.selectAll("."+G+"tick").remove(),X[fe]=se),N.setScale();var V=o.calcTicks(N),Y=o.clipEnds(N,V),ne=o.makeTransTickFn(N),te=o.getTickSigns(N)[2],K=x.deg2rad(le),$=te*(N.linewidth||1)/2,ae=te*N.ticklen,ie=X.w,oe=X.h,ue=q==="b"?"M0,"+$+"l"+Math.sin(K)*ae+","+Math.cos(K)*ae:"M"+$+",0l"+Math.cos(K)*ae+","+-Math.sin(K)*ae,xe={a:"M0,0l"+oe+",-"+ie/2,b:"M0,0l-"+ie/2+",-"+oe,c:"M0,0l-"+oe+","+ie/2}[q];o.drawTicks(j,N,{vals:N.ticks==="inside"?Y:V,layer:J,path:ue,transFn:ne,crisp:!1}),o.drawGrid(j,N,{vals:Y,layer:X.layers[q+"grid"],path:xe,transFn:ne,crisp:!1}),o.drawLabels(j,N,{vals:V,layer:J,transFn:ne,labelFns:o.makeLabelFns(N,0,le)})};function S(N){return N.ticks+String(N.ticklen)+String(N.showticklabels)}var k=T.MINZOOM/2+.87,P="m-0.87,.5h"+k+"v3h-"+(k+5.2)+"l"+(k/2+2.6)+",-"+(k*.87+4.5)+"l2.6,1.5l-"+k/2+","+k*.87+"Z",O="m0.87,.5h-"+k+"v3h"+(k+5.2)+"l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-2.6,1.5l"+k/2+","+k*.87+"Z",F="m0,1l"+k/2+","+k*.87+"l2.6,-1.5l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-"+(k/2+2.6)+","+(k*.87+4.5)+"l2.6,1.5l"+k/2+",-"+k*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;h.clearSelect=function(){w(this.dragOptions),M(this.dragOptions.gd)},h.initInteractions=function(){var N=this,X=N.layers.plotbg.select("path").node(),j=N.graphDiv,ee=j._fullLayout._zoomlayer,q,G;this.dragOptions={element:X,gd:j,plotinfo:{id:N.id,domain:j._fullLayout[N.id].domain,xaxis:N.xaxis,yaxis:N.yaxis},subplot:N.id,prepFn:function(Ye,Xe,Te){N.dragOptions.xaxes=[N.xaxis],N.dragOptions.yaxes=[N.yaxis],q=j._fullLayout._invScaleX,G=j._fullLayout._invScaleY;var Ie=N.dragOptions.dragmode=j._fullLayout.dragmode;p(Ie)?N.dragOptions.minDrag=1:N.dragOptions.minDrag=void 0,Ie==="zoom"?(N.dragOptions.moveFn=me,N.dragOptions.clickFn=ie,N.dragOptions.doneFn=be,oe(Ye,Xe,Te)):Ie==="pan"?(N.dragOptions.moveFn=Se,N.dragOptions.clickFn=ie,N.dragOptions.doneFn=Be,Ce(),N.clearSelect(j)):(y(Ie)||p(Ie))&&A(Ye,Xe,Te,N.dragOptions,Ie)}};var J,le,fe,se,V,Y,ne,te,K,$;function ae(Ye){var Xe={};return Xe[N.id+".aaxis.min"]=Ye.a,Xe[N.id+".baxis.min"]=Ye.b,Xe[N.id+".caxis.min"]=Ye.c,Xe}function ie(Ye,Xe){var Te=j._fullLayout.clickmode;U(j),Ye===2&&(j.emit("plotly_doubleclick",null),m.call("_guiRelayout",j,ae({a:0,b:0,c:0}))),Te.indexOf("select")>-1&&Ye===1&&b(Xe,j,[N.xaxis],[N.yaxis],N.id,N.dragOptions),Te.indexOf("event")>-1&&v.click(j,Xe,N.id)}function oe(Ye,Xe,Te){var Ie=X.getBoundingClientRect();J=Xe-Ie.left,le=Te-Ie.top,j._fullLayout._calcInverseTransform(j);var Ze=j._fullLayout._invTransform,rt=x.apply3DTransform(Ze)(J,le);J=rt[0],le=rt[1],fe={a:N.aaxis.range[0],b:N.baxis.range[1],c:N.caxis.range[1]},V=fe,se=N.aaxis.range[1]-fe.a,Y=s(N.graphDiv._fullLayout[N.id].bgcolor).getLuminance(),ne="M0,"+N.h+"L"+N.w/2+", 0L"+N.w+","+N.h+"Z",te=!1,K=ee.append("path").attr("class","zoombox").attr("transform",t(N.x0,N.y0)).style({fill:Y>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ne),$=ee.append("path").attr("class","zoombox-corners").attr("transform",t(N.x0,N.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),N.clearSelect(j)}function ue(Ye,Xe){return 1-Xe/N.h}function xe(Ye,Xe){return 1-(Ye+(N.h-Xe)/Math.sqrt(3))/N.w}function he(Ye,Xe){return(Ye-(N.h-Xe)/Math.sqrt(3))/N.w}function me(Ye,Xe){var Te=J+Ye*q,Ie=le+Xe*G,Ze=Math.max(0,Math.min(1,ue(J,le),ue(Te,Ie))),rt=Math.max(0,Math.min(1,xe(J,le),xe(Te,Ie))),Ge=Math.max(0,Math.min(1,he(J,le),he(Te,Ie))),ze=(Ze/2+Ge)*N.w,We=(1-Ze/2-rt)*N.w,mt=(ze+We)/2,Ft=We-ze,Xt=(1-Ze)*N.h,Pt=Xt-Ft/L;Ft<T.MINZOOM?(V=fe,K.attr("d",ne),$.attr("d","M0,0Z")):(V={a:fe.a+Ze*se,b:fe.b+rt*se,c:fe.c+Ge*se},K.attr("d",ne+"M"+ze+","+Xt+"H"+We+"L"+mt+","+Pt+"L"+ze+","+Xt+"Z"),$.attr("d","M"+J+","+le+D+"M"+ze+","+Xt+P+"M"+We+","+Xt+O+"M"+mt+","+Pt+F)),te||(K.transition().style("fill",Y>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),$.transition().style("opacity",1).duration(200),te=!0),j.emit("plotly_relayouting",ae(V))}function be(){U(j),V!==fe&&(m.call("_guiRelayout",j,ae(V)),R&&j.data&&j._context.showTips&&(x.notifier(i(j,"Double-click to zoom back out"),"long"),R=!1))}function Ce(){fe={a:N.aaxis.range[0],b:N.baxis.range[1],c:N.caxis.range[1]},V=fe}function Se(Ye,Xe){var Te=Ye/N.xaxis._m,Ie=Xe/N.yaxis._m;V={a:fe.a-Ie,b:fe.b+(Te+Ie)/2,c:fe.c-(Te-Ie)/2};var Ze=[V.a,V.b,V.c].sort(x.sorterAsc),rt={a:Ze.indexOf(V.a),b:Ze.indexOf(V.b),c:Ze.indexOf(V.c)};Ze[0]<0&&(Ze[1]+Ze[0]/2<0?(Ze[2]+=Ze[0]+Ze[1],Ze[0]=Ze[1]=0):(Ze[2]+=Ze[0]/2,Ze[1]+=Ze[0]/2,Ze[0]=0),V={a:Ze[rt.a],b:Ze[rt.b],c:Ze[rt.c]},Xe=(fe.a-V.a)*N.yaxis._m,Ye=(fe.c-V.c-fe.b+V.b)*N.xaxis._m);var Ge=t(N.x0+Ye,N.y0+Xe);N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ge);var ze=t(-Ye,-Xe);N.clipDefRelative.select("path").attr("transform",ze),N.aaxis.range=[V.a,N.sum-V.b-V.c],N.baxis.range=[N.sum-V.a-V.c,V.b],N.caxis.range=[N.sum-V.a-V.b,V.c],N.drawAxes(!1),N._hasClipOnAxisFalse&&N.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,N),j.emit("plotly_relayouting",ae(V))}function Be(){m.call("_guiRelayout",j,ae(V))}X.onmousemove=function(Ye){v.hover(j,Ye,N.id),j._fullLayout._lasthover=X,j._fullLayout._hoversubplot=N.id},X.onmouseout=function(Ye){j._dragging||c.unhover(j,Ye)},c.init(this.dragOptions)};function U(N){u.select(N).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(e,I,B){var u=e("./lib/loggers"),s=e("./lib/noop"),m=e("./lib/push_unique"),x=e("./lib/is_plain_object"),t=e("./lib/dom").addStyleRule,i=e("./lib/extend"),a=e("./plots/attributes"),r=e("./plots/layout_attributes"),n=i.extendFlat,f=i.extendDeepAll;B.modules={},B.allCategories={},B.allTypes=[],B.subplotsRegistry={},B.transformsRegistry={},B.componentsRegistry={},B.layoutArrayContainers=[],B.layoutArrayRegexes=[],B.traceLayoutAttributes={},B.localeRegistry={},B.apiMethodRegistry={},B.collectableSubplotTypes=null,B.register=function(w){if(B.collectableSubplotTypes=null,w)w&&!Array.isArray(w)&&(w=[w]);else throw new Error("No argument passed to Plotly.register.");for(var T=0;T<w.length;T++){var _=w[T];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":l(_);break;case"transform":v(_);break;case"component":c(_);break;case"locale":d(_);break;case"apiMethod":var h=_.name;B.apiMethodRegistry[h]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},B.getModule=function(M){var w=B.modules[b(M)];return w?w._module:!1},B.traceIs=function(M,w){if(M=b(M),M==="various")return!1;var T=B.modules[M];return T||(M&&u.log("Unrecognized trace type "+M+"."),T=B.modules[a.type.dflt]),!!T.categories[w]},B.getTransformIndices=function(M,w){for(var T=[],_=M.transforms||[],h=0;h<_.length;h++)_[h].type===w&&T.push(h);return T},B.hasTransform=function(M,w){for(var T=M.transforms||[],_=0;_<T.length;_++)if(T[_].type===w)return!0;return!1},B.getComponentMethod=function(M,w){var T=B.componentsRegistry[M];return T&&T[w]||s},B.call=function(){var M=arguments[0],w=[].slice.call(arguments,1);return B.apiMethodRegistry[M].apply(null,w)};function l(M){var w=M.name,T=M.categories,_=M.meta;if(B.modules[w]){u.log("Type "+w+" already registered");return}B.subplotsRegistry[M.basePlotModule.name]||o(M.basePlotModule);for(var h={},L=0;L<T.length;L++)h[T[L]]=!0,B.allCategories[T[L]]=!0;B.modules[w]={_module:M,categories:h},_&&Object.keys(_).length&&(B.modules[w].meta=_),B.allTypes.push(w);for(var S in B.componentsRegistry)y(S,w);M.layoutAttributes&&n(B.traceLayoutAttributes,M.layoutAttributes);var k=M.basePlotModule,P=k.name;if(P==="mapbox"){var O=k.constants.styleRules;for(var F in O)t(".js-plotly-plot .plotly .mapboxgl-"+F,O[F])}(P==="geo"||P==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function o(M){var w=M.name;if(B.subplotsRegistry[w]){u.log("Plot type "+w+" already registered.");return}p(M),B.subplotsRegistry[w]=M;for(var T in B.componentsRegistry)A(T,M.name)}function c(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var w=M.name;B.componentsRegistry[w]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&m(B.layoutArrayContainers,w),p(M));for(var T in B.modules)y(w,T);for(var _ in B.subplotsRegistry)A(w,_);for(var h in B.transformsRegistry)g(w,h);M.schema&&M.schema.layout&&f(r,M.schema.layout)}function v(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var w="Transform module "+M.name,T=typeof M.transform=="function",_=typeof M.calcTransform=="function";if(!T&&!_)throw new Error(w+" is missing a *transform* or *calcTransform* method.");T&&_&&u.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),x(M.attributes)||u.log(w+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&u.log(w+" registered without a *supplyDefaults* method."),B.transformsRegistry[M.name]=M;for(var h in B.componentsRegistry)g(h,M.name)}function d(M){var w=M.name,T=w.split("-")[0],_=M.dictionary,h=M.format,L=_&&Object.keys(_).length,S=h&&Object.keys(h).length,k=B.localeRegistry,P=k[w];if(P||(k[w]=P={}),T!==w){var O=k[T];O||(k[T]=O={}),L&&O.dictionary===P.dictionary&&(O.dictionary=_),S&&O.format===P.format&&(O.format=h)}L&&(P.dictionary=_),S&&(P.format=h)}function p(M){if(M.layoutAttributes){var w=M.layoutAttributes._arrayAttrRegexps;if(w)for(var T=0;T<w.length;T++)m(B.layoutArrayRegexes,w[T])}}function y(M,w){var T=B.componentsRegistry[M].schema;if(!(!T||!T.traces)){var _=T.traces[w];_&&f(B.modules[w]._module.attributes,_)}}function g(M,w){var T=B.componentsRegistry[M].schema;if(!(!T||!T.transforms)){var _=T.transforms[w];_&&f(B.transformsRegistry[w].attributes,_)}}function A(M,w){var T=B.componentsRegistry[M].schema;if(!(!T||!T.subplots)){var _=B.subplotsRegistry[w],h=_.layoutAttributes,L=_.attr==="subplot"?_.name:_.attr;Array.isArray(L)&&(L=L[0]);var S=T.subplots[L];h&&S&&f(h,S)}}function b(M){return typeof M=="object"&&(M=M.type),M}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(e,I,B){var u=e("../registry"),s=e("../lib"),m=s.extendFlat,x=s.extendDeep;function t(a){var r;switch(a){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function i(a){var r=["xaxis","yaxis","zaxis"];return r.indexOf(a.slice(0,5))>-1}I.exports=function(r,n){var f,l=r.data,o=r.layout,c=x([],l),v=x({},o,t(n.tileClass)),d=r._context||{};if(n.width&&(v.width=n.width),n.height&&(v.height=n.height),n.tileClass==="thumbnail"||n.tileClass==="themes__thumb"){v.annotations=[];var p=Object.keys(v);for(f=0;f<p.length;f++)i(p[f])&&(v[p[f]].title={text:""});for(f=0;f<c.length;f++){var y=c[f];y.showscale=!1,y.marker&&(y.marker.showscale=!1),u.traceIs(y,"pie-like")&&(y.textposition="none")}}if(Array.isArray(n.annotations))for(f=0;f<n.annotations.length;f++)v.annotations.push(n.annotations[f]);var g=Object.keys(v).filter(function(T){return T.match(/^scene\d*$/)});if(g.length){var A={};for(n.tileClass==="thumbnail"&&(A={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),f=0;f<g.length;f++){var b=v[g[f]];b.xaxis||(b.xaxis={}),b.yaxis||(b.yaxis={}),b.zaxis||(b.zaxis={}),m(b.xaxis,A),m(b.yaxis,A),m(b.zaxis,A),b._scene=null}}var M=document.createElement("div");n.tileClass&&(M.className=n.tileClass);var w={gd:M,td:M,layout:v,data:c,config:{staticPlot:n.staticPlot===void 0?!0:n.staticPlot,plotGlPixelRatio:n.plotGlPixelRatio===void 0?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return n.setBackground!=="transparent"&&(w.config.setBackground=n.setBackground||"opaque"),w.gd.defaultLayout=t(n.tileClass),w}},{"../lib":503,"../registry":638}],640:[function(e,I,B){var u=e("../lib"),s=e("../plot_api/to_image"),m=e("./filesaver"),x=e("./helpers");function t(i,a){var r;return u.isPlainObject(i)||(r=u.getGraphDiv(i)),a=a||{},a.format=a.format||"png",a.width=a.width||null,a.height=a.height||null,a.imageDataOnly=!0,new Promise(function(n,f){r&&r._snapshotInProgress&&f(new Error("Snapshotting already in progress.")),u.isIE()&&a.format!=="svg"&&f(new Error(x.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var l=s(i,a),o=a.filename||i.fn||"newplot";o+="."+a.format.replace("-","."),l.then(function(c){return r&&(r._snapshotInProgress=!1),m(c,o,a.format)}).then(function(c){n(c)}).catch(function(c){r&&(r._snapshotInProgress=!1),f(c)})})}I.exports=t},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(e,I,B){var u=e("../lib"),s=e("./helpers");function m(x,t,i){var a=document.createElement("a"),r="download"in a,n=new Promise(function(f,l){var o,c;if(u.isIE())return o=s.createBlob(x,"svg"),window.navigator.msSaveBlob(o,t),o=null,f(t);if(r)return o=s.createBlob(x,i),c=s.createObjectURL(o),a.href=c,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),s.revokeObjectURL(c),o=null,f(t);if(u.isSafari()){var v=i==="svg"?",":";base64,";return s.octetStream(v+encodeURIComponent(x)),f(t)}l(new Error("download error"))});return n}I.exports=m},{"../lib":503,"./helpers":642}],642:[function(e,I,B){var u=e("../registry");B.getDelay=function(x){return x._has&&(x._has("gl3d")||x._has("gl2d")||x._has("mapbox"))?500:0},B.getRedrawFunc=function(x){return function(){u.getComponentMethod("colorbar","draw")(x)}},B.encodeSVG=function(x){return"data:image/svg+xml,"+encodeURIComponent(x)},B.encodeJSON=function(x){return"data:application/json,"+encodeURIComponent(x)};var s=window.URL||window.webkitURL;B.createObjectURL=function(x){return s.createObjectURL(x)},B.revokeObjectURL=function(x){return s.revokeObjectURL(x)},B.createBlob=function(x,t){if(t==="svg")return new window.Blob([x],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([x],{type:"application/json;charset=utf-8"});var i=m(window.atob(x));return new window.Blob([i],{type:"image/"+t})},B.octetStream=function(x){document.location.href="data:application/octet-stream"+x};function m(x){for(var t=x.length,i=new ArrayBuffer(t),a=new Uint8Array(i),r=0;r<t;r++)a[r]=x.charCodeAt(r);return i}B.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,B.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(e,I,B){var u=e("./helpers"),s={getDelay:u.getDelay,getRedrawFunc:u.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};I.exports=s},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(e,I,B){var u=e("../lib"),s=e("events").EventEmitter,m=e("./helpers");function x(t){var i=t.emitter||new s,a=new Promise(function(r,n){var f=window.Image,l=t.svg,o=t.format||"png";if(u.isIE()&&o!=="svg"){var c=new Error(m.MSG_IE_BAD_FORMAT);return n(c),t.promise?a:i.emit("error",c)}var v=t.canvas,d=t.scale||1,p=t.width||300,y=t.height||150,g=d*p,A=d*y,b=v.getContext("2d"),M=new f,w,T;o==="svg"||u.isSafari()?T=m.encodeSVG(l):(w=m.createBlob(l,"svg"),T=m.createObjectURL(w)),v.width=g,v.height=A,M.onload=function(){var _;switch(w=null,m.revokeObjectURL(T),o!=="svg"&&b.drawImage(M,0,0,g,A),o){case"jpeg":_=v.toDataURL("image/jpeg");break;case"png":_=v.toDataURL("image/png");break;case"webp":_=v.toDataURL("image/webp");break;case"svg":_=T;break;default:var h="Image format is not jpeg, png, svg or webp.";if(n(new Error(h)),!t.promise)return i.emit("error",h)}r(_),t.promise||i.emit("success",_)},M.onerror=function(_){if(w=null,m.revokeObjectURL(T),n(_),!t.promise)return i.emit("error",_)},M.src=T});return t.promise?a:i}I.exports=x},{"../lib":503,"./helpers":642,events:84}],645:[function(e,I,B){var u=e("events").EventEmitter,s=e("../registry"),m=e("../lib"),x=e("./helpers"),t=e("./cloneplot"),i=e("./tosvg"),a=e("./svgtoimg");function r(n,f){var l=new u,o=t(n,{format:"png"}),c=o.gd;c.style.position="absolute",c.style.left="-5000px",document.body.appendChild(c);function v(){var p=x.getDelay(c._fullLayout);setTimeout(function(){var y=i(c),g=document.createElement("canvas");g.id=m.randstr(),l=a({format:f.format,width:c._fullLayout.width,height:c._fullLayout.height,canvas:g,emitter:l,svg:y}),l.clean=function(){c&&document.body.removeChild(c)}},p)}var d=x.getRedrawFunc(c);return s.call("_doPlot",c,o.data,o.layout,o.config).then(d).then(v).catch(function(p){l.emit("error",p)}),l}I.exports=r},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(e,I,B){var u=e("@plotly/d3"),s=e("../lib"),m=e("../components/drawing"),x=e("../components/color"),t=e("../constants/xmlns_namespaces"),i=/"/g,a="TOBESTRIPPED",r=new RegExp('("'+a+")|("+a+'")',"g");function n(l){var o=u.select("body").append("div").style({display:"none"}).html(""),c=l.replace(/(&[^;]*;)/gi,function(v){return v==="&lt;"?"&#60;":v==="&rt;"?"&#62;":v.indexOf("<")!==-1||v.indexOf(">")!==-1?"":o.html(v).text()});return o.remove(),c}function f(l){return l.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}I.exports=function(o,c,v){var d=o._fullLayout,p=d._paper,y=d._toppaper,g=d.width,A=d.height,b,M;p.insert("rect",":first-child").call(m.setRect,0,0,g,A).call(x.fill,d.paper_bgcolor);var w=d._basePlotModules||[];for(b=0;b<w.length;b++){var T=w[b];T.toSVG&&T.toSVG(o)}if(y){var _=y.node().childNodes,h=Array.prototype.slice.call(_);for(b=0;b<h.length;b++){var L=h[b];L.childNodes.length&&p.node().appendChild(L)}}d._draggers&&d._draggers.remove(),p.node().style.background="",p.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var P=u.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){P.remove();return}else P.style({visibility:null,display:null});var O=this.style.fontFamily;O&&O.indexOf('"')!==-1&&P.style("font-family",O.replace(i,a))});var S=[];if(d._gradientUrlQueryParts)for(M in d._gradientUrlQueryParts)S.push(M);if(d._patternUrlQueryParts)for(M in d._patternUrlQueryParts)S.push(M);S.length&&p.selectAll(S.join(",")).each(function(){var P=u.select(this),O=this.style.fill;O&&O.indexOf("url(")!==-1&&P.style("fill",O.replace(i,a));var F=this.style.stroke;F&&F.indexOf("url(")!==-1&&P.style("stroke",F.replace(i,a))}),(c==="pdf"||c==="eps")&&p.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),p.node().setAttributeNS(t.xmlns,"xmlns",t.svg),p.node().setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),c==="svg"&&v&&(p.attr("width",v*g),p.attr("height",v*A),p.attr("viewBox","0 0 "+g+" "+A));var k=new window.XMLSerializer().serializeToString(p.node());return k=n(k),k=f(k),k=k.replace(r,"'"),s.isIE()&&(k=k.replace(/"/gi,"'"),k=k.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),k=k.replace(/(\\')/gi,'"')),k}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x){for(var t=0;t<m.length;t++)m[t].i=t;u.mergeArray(x.text,m,"tx"),u.mergeArray(x.hovertext,m,"htx");var i=x.marker;if(i){u.mergeArray(i.opacity,m,"mo",!0),u.mergeArray(i.color,m,"mc");var a=i.line;a&&(u.mergeArray(a.color,m,"mlc"),u.mergeArrayCastPositive(a.width,m,"mlw"))}}},{"../../lib":503}],648:[function(e,I,B){var u=e("../scatter/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),i=e("../../plots/font_attributes"),a=e("./constants"),r=e("../../components/drawing/attributes").pattern,n=e("../../lib/extend").extendFlat,f=i({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=u.marker,o=l.line,c=n({},o.width,{dflt:0}),v=n({width:c,editType:"calc"},t("marker.line")),d=n({line:v,editType:"calc"},t("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r});I.exports={x:u.x,x0:u.x0,dx:u.dx,y:u.y,y0:u.y0,dy:u.dy,xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),text:u.text,texttemplate:x({editType:"plot"},{keys:a.eventDataKeys}),hovertext:u.hovertext,hovertemplate:m({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},f,{}),insidetextfont:n({},f,{}),outsidetextfont:n({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},u.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:u.selected.marker.opacity,color:u.selected.marker.color,editType:"style"},textfont:u.selected.textfont,editType:"style"},unselected:{marker:{opacity:u.unselected.marker.opacity,color:u.unselected.marker.color,editType:"style"},textfont:u.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926,"./constants":650}],649:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../plots/cartesian/align_period"),m=e("../../components/colorscale/helpers").hasColorscale,x=e("../../components/colorscale/calc"),t=e("./arrays_to_calcdata"),i=e("../scatter/calc_selection");I.exports=function(r,n){var f=u.getFromId(r,n.xaxis||"x"),l=u.getFromId(r,n.yaxis||"y"),o,c,v,d,p,y,g={msUTC:!!(n.base||n.base===0)};n.orientation==="h"?(o=f.makeCalcdata(n,"x",g),v=l.makeCalcdata(n,"y"),d=s(n,l,"y",v),p=!!n.yperiodalignment,y="y"):(o=l.makeCalcdata(n,"y",g),v=f.makeCalcdata(n,"x"),d=s(n,f,"x",v),p=!!n.xperiodalignment,y="x"),c=d.vals;for(var A=Math.min(c.length,o.length),b=new Array(A),M=0;M<A;M++)b[M]={p:c[M],s:o[M]},p&&(b[M].orig_p=v[M],b[M][y+"End"]=d.ends[M],b[M][y+"Start"]=d.starts[M]),n.ids&&(b[M].id=String(n.ids[M]));return m(n,"marker")&&x(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),m(n,"marker.line")&&x(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),t(b,n),i(b,n),b}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":647}],650:[function(e,I,B){I.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib").isArrayOrTypedArray,m=e("../../constants/numerical").BADNUM,x=e("../../registry"),t=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/constraints").getAxisGroup,a=e("./sieve.js");function r(L,S){for(var k=S.xaxis,P=S.yaxis,O=L._fullLayout,F=L._fullData,D=L.calcdata,R=[],U=[],N=0;N<F.length;N++){var X=F[N];if(X.visible===!0&&x.traceIs(X,"bar")&&X.xaxis===k._id&&X.yaxis===P._id&&(X.orientation==="h"?R.push(D[N]):U.push(D[N]),X._computePh))for(var j=L.calcdata[N],ee=0;ee<j.length;ee++)typeof j[ee].ph0=="function"&&(j[ee].ph0=j[ee].ph0()),typeof j[ee].ph1=="function"&&(j[ee].ph1=j[ee].ph1())}var q={xCat:k.type==="category"||k.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:O.barmode,norm:O.barnorm,gap:O.bargap,groupgap:O.bargroupgap};n(L,k,P,U,q),n(L,P,k,R,q)}function n(L,S,k,P,O){if(!!P.length){var F,D,R,U,N;switch(f(k,P),O.mode){case"overlay":l(S,k,P,O);break;case"group":for(F=[],D=[],R=0;R<P.length;R++)U=P[R],N=U[0].trace,N.offset===void 0?D.push(U):F.push(U);D.length&&o(L,S,k,D,O),F.length&&l(S,k,F,O);break;case"stack":case"relative":for(F=[],D=[],R=0;R<P.length;R++)U=P[R],N=U[0].trace,N.base===void 0?D.push(U):F.push(U);D.length&&c(L,S,k,D,O),F.length&&l(S,k,F,O);break}_(P,S)}}function f(L,S){var k,P;for(k=0;k<S.length;k++){var O=S[k],F=O[0].trace,D=F.type==="funnel"?F._base:F.base,R,U=F.orientation==="h"?F.xcalendar:F.ycalendar,N=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(s(D)){for(P=0;P<Math.min(D.length,O.length);P++)R=N(D[P],0,U),u(R)?(O[P].b=+R,O[P].hasB=1):O[P].b=0;for(;P<O.length;P++)O[P].b=0}else{R=N(D,0,U);var X=u(R);for(R=X?R:0,P=0;P<O.length;P++)O[P].b=R,X&&(O[P].hasB=1)}}}function l(L,S,k,P){for(var O=0;O<k.length;O++){var F=k[O],D=new a([F],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});v(L,D,P),P.norm?(M(D),T(S,D,P)):A(S,D)}}function o(L,S,k,P,O){var F=new a(P,{posAxis:S,sepNegVal:!1,overlapNoMerge:!O.norm});d(L,S,F,O),w(F,S),O.norm?(M(F),T(k,F,O)):A(k,F)}function c(L,S,k,P,O){var F=new a(P,{posAxis:S,sepNegVal:O.mode==="relative",overlapNoMerge:!(O.norm||O.mode==="stack"||O.mode==="relative")});v(S,F,O),b(k,F,O);for(var D=0;D<P.length;D++)for(var R=P[D],U=0;U<R.length;U++){var N=R[U];if(N.s!==m){var X=N.b+N.s===F.get(N.p,N.s);X&&(N._outmost=!0)}}O.norm&&T(k,F,O)}function v(L,S,k){for(var P=S.minDiff,O=S.traces,F=P*(1-k.gap),D=F,R=D*(1-(k.groupgap||0)),U=-R/2,N=0;N<O.length;N++){var X=O[N],j=X[0].t;j.barwidth=R,j.poffset=U,j.bargroupwidth=F,j.bardelta=P}S.binWidth=O[0][0].t.barwidth/100,p(S),y(L,S),g(L,S)}function d(L,S,k,P){for(var O=L._fullLayout,F=k.positions,D=k.distinctPositions,R=k.minDiff,U=k.traces,N=U.length,X=F.length!==D.length,j=R*(1-P.gap),ee=i(O,S._id)+U[0][0].trace.orientation,q=O._alignmentOpts[ee]||{},G=0;G<N;G++){var J=U[G],le=J[0].trace,fe=q[le.alignmentgroup]||{},se=Object.keys(fe.offsetGroups||{}).length,V;se?V=j/se:V=X?j/N:j;var Y=V*(1-(P.groupgap||0)),ne;se?ne=((2*le._offsetIndex+1-se)*V-Y)/2:ne=X?((2*G+1-N)*V-Y)/2:-Y/2;var te=J[0].t;te.barwidth=Y,te.poffset=ne,te.bargroupwidth=j,te.bardelta=R}k.binWidth=U[0][0].t.barwidth/100,p(k),y(S,k),g(S,k,X)}function p(L){var S=L.traces,k,P;for(k=0;k<S.length;k++){var O=S[k],F=O[0],D=F.trace,R=F.t,U=D._offset||D.offset,N=R.poffset,X;if(s(U)){for(X=Array.prototype.slice.call(U,0,O.length),P=0;P<X.length;P++)u(X[P])||(X[P]=N);for(P=X.length;P<O.length;P++)X.push(N);R.poffset=X}else U!==void 0&&(R.poffset=U);var j=D._width||D.width,ee=R.barwidth;if(s(j)){var q=Array.prototype.slice.call(j,0,O.length);for(P=0;P<q.length;P++)u(q[P])||(q[P]=ee);for(P=q.length;P<O.length;P++)q.push(ee);if(R.barwidth=q,U===void 0){for(X=[],P=0;P<O.length;P++)X.push(N+(ee-q[P])/2);R.poffset=X}}else j!==void 0&&(R.barwidth=j,U===void 0&&(R.poffset=N+(ee-j)/2))}}function y(L,S){for(var k=S.traces,P=h(L),O=0;O<k.length;O++)for(var F=k[O],D=F[0].t,R=D.poffset,U=Array.isArray(R),N=D.barwidth,X=Array.isArray(N),j=0;j<F.length;j++){var ee=F[j],q=ee.w=X?N[j]:N;ee[P]=ee.p+(U?R[j]:R)+q/2}}function g(L,S,k){var P=S.traces,O=S.minDiff,F=O/2;t.minDtick(L,S.minDiff,S.distinctPositions[0],k);for(var D=0;D<P.length;D++){var R=P[D],U=R[0],N=U.trace,X=[],j,ee,q,G;for(G=0;G<R.length;G++)j=R[G],ee=j.p-F,q=j.p+F,X.push(ee,q);if(N.width||N.offset){var J=U.t,le=J.poffset,fe=J.barwidth,se=Array.isArray(le),V=Array.isArray(fe);for(G=0;G<R.length;G++){j=R[G];var Y=se?le[G]:le,ne=V?fe[G]:fe;ee=j.p+Y,q=ee+ne,X.push(ee,q)}}N._extremes[L._id]=t.findExtremes(L,X,{padded:!1})}}function A(L,S){for(var k=S.traces,P=h(L),O=0;O<k.length;O++){for(var F=k[O],D=F[0].trace,R=[],U=!1,N=0;N<F.length;N++){var X=F[N],j=X.b,ee=j+X.s;X[P]=ee,R.push(ee),X.hasB&&R.push(j),(!X.hasB||!X.b)&&(U=!0)}D._extremes[L._id]=t.findExtremes(L,R,{tozero:U,padded:!0})}}function b(L,S,k){var P=h(L),O=S.traces,F,D,R,U,N,X;for(U=0;U<O.length;U++)if(F=O[U],D=F[0].trace,D.type==="funnel")for(N=0;N<F.length;N++)X=F[N],X.s!==m&&S.put(X.p,-.5*X.s);for(U=0;U<O.length;U++){F=O[U],D=F[0].trace,R=D.type==="funnel";var j=[];for(N=0;N<F.length;N++)if(X=F[N],X.s!==m){var ee;R?ee=X.s:ee=X.s+X.b;var q=S.put(X.p,ee),G=q+ee;X.b=q,X[P]=G,k.norm||(j.push(G),X.hasB&&j.push(q))}k.norm||(D._extremes[L._id]=t.findExtremes(L,j,{tozero:!0,padded:!0}))}}function M(L){for(var S=L.traces,k=0;k<S.length;k++)for(var P=S[k],O=0;O<P.length;O++){var F=P[O];F.s!==m&&L.put(F.p,F.b+F.s)}}function w(L,S){for(var k=L.traces,P=0;P<k.length;P++){var O=k[P],F=O[0].trace;if(F.base===void 0)for(var D=new a([O],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<O.length;R++){var U=O[R];if(U.p!==m){var N=D.put(U.p,U.b+U.s);N&&(U.b=N)}}}}function T(L,S,k){var P=S.traces,O=h(L),F=k.norm==="fraction"?1:100,D=F/1e9,R=L.l2c(L.c2l(0)),U=k.mode==="stack"?F:R;function N(ne){return u(L.c2l(ne))&&(ne<R-D||ne>U+D||!u(R))}for(var X=0;X<P.length;X++){for(var j=P[X],ee=j[0].trace,q=[],G=!1,J=!1,le=0;le<j.length;le++){var fe=j[le];if(fe.s!==m){var se=Math.abs(F/S.get(fe.p,fe.s));fe.b*=se,fe.s*=se;var V=fe.b,Y=V+fe.s;fe[O]=Y,q.push(Y),J=J||N(Y),fe.hasB&&(q.push(V),J=J||N(V)),(!fe.hasB||!fe.b)&&(G=!0)}}ee._extremes[L._id]=t.findExtremes(L,q,{tozero:G,padded:J})}}function _(L,S){var k=h(S),P={},O,F,D,R=1/0,U=-1/0;for(O=0;O<L.length;O++)for(D=L[O],F=0;F<D.length;F++){var N=D[F].p;u(N)&&(R=Math.min(R,N),U=Math.max(U,N))}var X=1e4/(U-R),j=P.round=function(se){return String(Math.round(X*(se-R)))};for(O=0;O<L.length;O++){D=L[O],D[0].t.extents=P;var ee=D[0].t.poffset,q=Array.isArray(ee);for(F=0;F<D.length;F++){var G=D[F],J=G[k]-G.w/2;if(u(J)){var le=G[k]+G.w/2,fe=j(G.p);P[fe]?P[fe]=[Math.min(J,P[fe][0]),Math.max(le,P[fe][1])]:P[fe]=[J,le]}G.p0=G.p+(q?ee[F]:ee),G.p1=G.p0+G.w,G.s0=G.b,G.s1=G.s0+G.s}}}function h(L){return L._id.charAt(0)}I.exports={crossTraceCalc:r,setGroupPositions:n}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color"),m=e("../../registry"),x=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),i=e("./style_defaults"),a=e("../../plots/cartesian/constraints").getAxisGroup,r=e("./attributes"),n=u.coerceFont;function f(v,d,p,y){function g(T,_){return u.coerce(v,d,r,T,_)}var A=x(v,d,y,g);if(!A){d.visible=!1;return}t(v,d,y,g),g("xhoverformat"),g("yhoverformat"),g("orientation",d.x&&!d.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var b=g("textposition");c(v,d,y,g,b,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i(v,d,g,p,y);var M=(d.marker.line||{}).color,w=m.getComponentMethod("errorbars","supplyDefaults");w(v,d,M||s.defaultLine,{axis:"y"}),w(v,d,M||s.defaultLine,{axis:"x",inherit:"y"}),u.coerceSelectionMarkerOpacity(d,g)}function l(v,d,p,y){var g=d.orientation,A=d[{v:"x",h:"y"}[g]+"axis"],b=a(p,A)+g,M=p._alignmentOpts||{},w=y("alignmentgroup"),T=M[b];T||(T=M[b]={});var _=T[w];_?_.traces.push(d):_=T[w]={traces:[d],alignmentIndex:Object.keys(T).length,offsetGroups:{}};var h=y("offsetgroup"),L=_.offsetGroups,S=L[h];h&&(S||(S=L[h]={offsetIndex:Object.keys(L).length}),d._offsetIndex=S.offsetIndex)}function o(v,d){var p,y;function g(b){return u.coerce(y._input,y,r,b)}if(d.barmode==="group")for(var A=0;A<v.length;A++)y=v[A],y.type==="bar"&&(p=y._input,l(p,y,d,g))}function c(v,d,p,y,g,A){A=A||{};var b=A.moduleHasSelected!==!1,M=A.moduleHasUnselected!==!1,w=A.moduleHasConstrain!==!1,T=A.moduleHasCliponaxis!==!1,_=A.moduleHasTextangle!==!1,h=A.moduleHasInsideanchor!==!1,L=!!A.hasPathbar,S=Array.isArray(g)||g==="auto",k=S||g==="inside",P=S||g==="outside";if(k||P){var O=n(y,"textfont",p.font),F=u.extendFlat({},O),D=v.textfont&&v.textfont.color,R=!D;if(R&&delete F.color,n(y,"insidetextfont",F),L){var U=u.extendFlat({},O);R&&delete U.color,n(y,"pathbar.textfont",U)}P&&n(y,"outsidetextfont",O),b&&y("selected.textfont.color"),M&&y("unselected.textfont.color"),w&&y("constraintext"),T&&y("cliponaxis"),_&&y("textangle"),y("texttemplate")}k&&h&&y("insidetextanchor")}I.exports={supplyDefaults:f,crossTraceDefaults:o,handleGroupingDefaults:l,handleText:c}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":648,"./style_defaults":663}],653:[function(e,I,B){I.exports=function(s,m,x){return s.x="xVal"in m?m.xVal:m.x,s.y="yVal"in m?m.yVal:m.y,m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),x.orientation==="h"?(s.label=s.y,s.value=s.x):(s.label=s.x,s.value=s.y),s}},{}],654:[function(e,I,B){var u=e("fast-isnumeric"),s=e("tinycolor2"),m=e("../../lib").isArrayOrTypedArray;B.coerceString=function(x,t,i){if(typeof t=="string"){if(t||!x.noBlank)return t}else if((typeof t=="number"||t===!0)&&!x.strict)return String(t);return i!==void 0?i:x.dflt},B.coerceNumber=function(x,t,i){if(u(t)){t=+t;var a=x.min,r=x.max,n=a!==void 0&&t<a||r!==void 0&&t>r;if(!n)return t}return i!==void 0?i:x.dflt},B.coerceColor=function(x,t,i){return s(t).isValid()?t:i!==void 0?i:x.dflt},B.coerceEnumerated=function(x,t,i){return x.coerceNumber&&(t=+t),x.values.indexOf(t)!==-1?t:i!==void 0?i:x.dflt},B.getValue=function(x,t){var i;return Array.isArray(x)?t<x.length&&(i=x[t]):i=x,i},B.getLineWidth=function(x,t){var i=0<t.mlw?t.mlw:m(x.marker.line.width)?0:x.marker.line.width;return i}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(e,I,B){var u=e("../../components/fx"),s=e("../../registry"),m=e("../../components/color"),x=e("../../lib").fillText,t=e("./helpers").getLineWidth,i=e("../../plots/cartesian/axes").hoverLabelText,a=e("../../constants/numerical").BADNUM;function r(l,o,c,v,d){var p=n(l,o,c,v,d);if(p){var y=p.cd,g=y[0].trace,A=y[p.index];return p.color=f(g,A),s.getComponentMethod("errorbars","hoverInfo")(A,g,p),[p]}}function n(l,o,c,v,d){var p=l.cd,y=p[0].trace,g=p[0].t,A=v==="closest",b=y.type==="waterfall",M=l.maxHoverDistance,w=l.maxSpikeDistance,T,_,h,L,S,k,P;y.orientation==="h"?(T=c,_=o,h="y",L="x",S=le,k=q):(T=o,_=c,h="x",L="y",k=le,S=q);var O=y[h+"period"],F=A||O;function D(oe){return U(oe,-1)}function R(oe){return U(oe,1)}function U(oe,ue){var xe=oe.w;return oe[h]+ue*xe/2}function N(oe){return oe[h+"End"]-oe[h+"Start"]}var X=A?D:O?function(oe){return oe.p-N(oe)/2}:function(oe){return Math.min(D(oe),oe.p-g.bardelta/2)},j=A?R:O?function(oe){return oe.p+N(oe)/2}:function(oe){return Math.max(R(oe),oe.p+g.bardelta/2)};function ee(oe,ue,xe){return d.finiteRange&&(xe=0),u.inbox(oe-T,ue-T,xe+Math.min(1,Math.abs(ue-oe)/P)-1)}function q(oe){return ee(X(oe),j(oe),M)}function G(oe){return ee(D(oe),R(oe),w)}function J(oe){var ue=oe[L];if(b){var xe=Math.abs(oe.rawS)||0;_>0?ue+=xe:_<0&&(ue-=xe)}return ue}function le(oe){var ue=_,xe=oe.b,he=J(oe);return u.inbox(xe-ue,he-ue,M+(he-ue)/(he-xe)-1)}function fe(oe){var ue=_,xe=oe.b,he=J(oe);return u.inbox(xe-ue,he-ue,w+(he-ue)/(he-xe)-1)}var se=l[h+"a"],V=l[L+"a"];P=Math.abs(se.r2c(se.range[1])-se.r2c(se.range[0]));function Y(oe){return(S(oe)+k(oe))/2}var ne=u.getDistanceFunction(v,S,k,Y);if(u.getClosest(p,ne,l),l.index!==!1&&p[l.index].p!==a){F||(X=function(oe){return Math.min(D(oe),oe.p-g.bargroupwidth/2)},j=function(oe){return Math.max(R(oe),oe.p+g.bargroupwidth/2)});var te=l.index,K=p[te],$=y.base?K.b+K.s:K.s;l[L+"0"]=l[L+"1"]=V.c2p(K[L],!0),l[L+"LabelVal"]=$;var ae=g.extents[g.extents.round(K.p)];l[h+"0"]=se.c2p(A?X(K):ae[0],!0),l[h+"1"]=se.c2p(A?j(K):ae[1],!0);var ie=K.orig_p!==void 0;return l[h+"LabelVal"]=ie?K.orig_p:K.p,l.labelLabel=i(se,l[h+"LabelVal"],y[h+"hoverformat"]),l.valueLabel=i(V,l[L+"LabelVal"],y[L+"hoverformat"]),l.baseLabel=i(V,K.b,y[L+"hoverformat"]),l.spikeDistance=(fe(K)+G(K))/2,l[h+"Spike"]=se.c2p(K.p,!0),x(K,y,l),l.hovertemplate=y.hovertemplate,l}}function f(l,o){var c=o.mcc||l.marker.color,v=o.mlcc||l.marker.line.color,d=t(l,o);if(m.opacity(c))return c;if(m.opacity(v)&&d)return v}I.exports={hoverPoints:r,hoverOnBars:n,getTraceColor:f}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(e,I,B){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(e,I,B){I.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(e,I,B){var u=e("../../registry"),s=e("../../plots/cartesian/axes"),m=e("../../lib"),x=e("./layout_attributes");I.exports=function(t,i,a){function r(g,A){return m.coerce(t,i,x,g,A)}for(var n=!1,f=!1,l=!1,o={},c=r("barmode"),v=0;v<a.length;v++){var d=a[v];if(u.traceIs(d,"bar")&&d.visible)n=!0;else continue;if(c==="group"){var p=d.xaxis+d.yaxis;o[p]&&(l=!0),o[p]=!0}if(d.visible&&d.type==="histogram"){var y=s.getFromId({_fullLayout:i},d[d.orientation==="v"?"xaxis":"yaxis"]);y.type!=="category"&&(f=!0)}}if(!n){delete i.barmode;return}c!=="overlay"&&r("barnorm"),r("bargap",f&&!l?0:.2),r("bargroupgap")}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../lib/svg_text_utils"),t=e("../../components/color"),i=e("../../components/drawing"),a=e("../../registry"),r=e("../../plots/cartesian/axes").tickText,n=e("./uniform_text"),f=n.recordMinTextSize,l=n.clearMinTextSize,o=e("./style"),c=e("./helpers"),v=e("./constants"),d=e("./attributes"),p=d.text,y=d.textposition,g=e("../../components/fx/helpers").appendArrayPointValue,A=v.TEXTPAD;function b(X){return X.id}function M(X){if(X.ids)return b}function w(X,j){return X<j?1:-1}function T(X,j,ee,q){var G=[],J=[],le=q?j:ee,fe=q?ee:j;return G[0]=le.c2p(X.s0,!0),J[0]=fe.c2p(X.p0,!0),G[1]=le.c2p(X.s1,!0),J[1]=fe.c2p(X.p1,!0),q?[G,J]:[J,G]}function _(X,j,ee,q){if(!j.uniformtext.mode&&h(ee)){var G;return q&&(G=q()),X.transition().duration(ee.duration).ease(ee.easing).each("end",function(){G&&G()}).each("interrupt",function(){G&&G()})}else return X}function h(X){return X&&X.duration>0}function L(X,j,ee,q,G,J){var le=j.xaxis,fe=j.yaxis,se=X._fullLayout;G||(G={mode:se.barmode,norm:se.barmode,gap:se.bargap,groupgap:se.bargroupgap},l("bar",se));var V=m.makeTraceGroups(q,ee,"trace bars").each(function(Y){var ne=u.select(this),te=Y[0].trace,K=te.type==="waterfall",$=te.type==="funnel",ae=te.type==="bar",ie=ae||$,oe=0;K&&te.connector.visible&&te.connector.mode==="between"&&(oe=te.connector.line.width/2);var ue=te.orientation==="h",xe=h(G),he=m.ensureSingle(ne,"g","points"),me=M(te),be=he.selectAll("g.point").data(m.identity,me);be.enter().append("g").classed("point",!0),be.exit().remove(),be.each(function(Se,Be){var Ye=u.select(this),Xe=T(Se,le,fe,ue),Te=Xe[0][0],Ie=Xe[0][1],Ze=Xe[1][0],rt=Xe[1][1],Ge=(ue?Ie-Te:rt-Ze)==0;Ge&&ie&&c.getLineWidth(te,Se)&&(Ge=!1),Ge||(Ge=!s(Te)||!s(Ie)||!s(Ze)||!s(rt)),Se.isBlank=Ge,Ge&&(ue?Ie=Te:rt=Ze),oe&&!Ge&&(ue?(Te-=w(Te,Ie)*oe,Ie+=w(Te,Ie)*oe):(Ze-=w(Ze,rt)*oe,rt+=w(Ze,rt)*oe));var ze,We;if(te.type==="waterfall"){if(!Ge){var mt=te[Se.dir].marker;ze=mt.line.width,We=mt.color}}else ze=c.getLineWidth(te,Se),We=Se.mc||te.marker.color;function Ft(Ct){var lt=u.round(ze/2%1,2);return G.gap===0&&G.groupgap===0?u.round(Math.round(Ct)-lt,2):Ct}function Xt(Ct,lt,dt){return dt&&Ct===lt?Ct:Math.abs(Ct-lt)>=2?Ft(Ct):Ct>lt?Math.ceil(Ct):Math.floor(Ct)}if(!X._context.staticPlot){var Pt=t.opacity(We),Ut=Pt<1||ze>.01?Ft:Xt;Te=Ut(Te,Ie,ue),Ie=Ut(Ie,Te,ue),Ze=Ut(Ze,rt,!ue),rt=Ut(rt,Ze,!ue)}var Gt=_(m.ensureSingle(Ye,"path"),se,G,J);if(Gt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ie-Te)*(rt-Ze))||Ge&&X._context.staticPlot?"M0,0Z":"M"+Te+","+Ze+"V"+rt+"H"+Ie+"V"+Ze+"Z").call(i.setClipUrl,j.layerClipId,X),!se.uniformtext.mode&&xe){var It=i.makePointStyleFns(te);i.singlePointStyle(Se,Gt,te,It,X)}S(X,j,Ye,Y,Be,Te,Ie,Ze,rt,G,J),j.layerClipId&&i.hideOutsideRangePoint(Se,Ye.select("text"),le,fe,te.xcalendar,te.ycalendar)});var Ce=te.cliponaxis===!1;i.setClipUrl(ne,Ce?null:j.layerClipId,X)});a.getComponentMethod("errorbars","plot")(X,V,j,G)}function S(X,j,ee,q,G,J,le,fe,se,V,Y){var ne=j.xaxis,te=j.yaxis,K=X._fullLayout,$;function ae(Ct,lt,dt){var et=m.ensureSingle(Ct,"text").text(lt).attr({class:"bartext bartext-"+$,"text-anchor":"middle","data-notex":1}).call(i.font,dt).call(x.convertToTspans,X);return et}var ie=q[0].trace,oe=ie.orientation==="h",ue=D(K,q,G,ne,te);$=R(ie,G);var xe=V.mode==="stack"||V.mode==="relative",he=q[G],me=!xe||he._outmost;if(!ue||$==="none"||(he.isBlank||J===le||fe===se)&&($==="auto"||$==="inside")){ee.select("text").remove();return}var be=K.font,Ce=o.getBarColor(q[G],ie),Se=o.getInsideTextFont(ie,G,be,Ce),Be=o.getOutsideTextFont(ie,G,be),Ye=ee.datum();oe?ne.type==="log"&&Ye.s0<=0&&(ne.range[0]<ne.range[1]?J=0:J=ne._length):te.type==="log"&&Ye.s0<=0&&(te.range[0]<te.range[1]?fe=te._length:fe=0);var Xe=Math.abs(le-J)-2*A,Te=Math.abs(se-fe)-2*A,Ie,Ze,rt,Ge,ze;if($==="outside"&&!me&&!he.hasB&&($="inside"),$==="auto")if(me){$="inside",ze=m.ensureUniformFontSize(X,Se),Ie=ae(ee,ue,ze),Ze=i.bBox(Ie.node()),rt=Ze.width,Ge=Ze.height;var We=rt>0&&Ge>0,mt=rt<=Xe&&Ge<=Te,Ft=rt<=Te&&Ge<=Xe,Xt=oe?Xe>=rt*(Te/Ge):Te>=Ge*(Xe/rt);We&&(mt||Ft||Xt)?$="inside":($="outside",Ie.remove(),Ie=null)}else $="inside";if(!Ie){ze=m.ensureUniformFontSize(X,$==="outside"?Be:Se),Ie=ae(ee,ue,ze);var Pt=Ie.attr("transform");if(Ie.attr("transform",""),Ze=i.bBox(Ie.node()),rt=Ze.width,Ge=Ze.height,Ie.attr("transform",Pt),rt<=0||Ge<=0){Ie.remove();return}}var Ut=ie.textangle,Gt,It;$==="outside"?(It=ie.constraintext==="both"||ie.constraintext==="outside",Gt=F(J,le,fe,se,Ze,{isHorizontal:oe,constrained:It,angle:Ut})):(It=ie.constraintext==="both"||ie.constraintext==="inside",Gt=O(J,le,fe,se,Ze,{isHorizontal:oe,constrained:It,angle:Ut,anchor:ie.insidetextanchor})),Gt.fontSize=ze.size,f(ie.type==="histogram"?"bar":ie.type,Gt,K),he.transform=Gt,_(Ie,K,V,Y).attr("transform",m.getTextTransform(Gt))}function k(X){return X==="auto"?0:X}function P(X,j){var ee=Math.PI/180*j,q=Math.abs(Math.sin(ee)),G=Math.abs(Math.cos(ee));return{x:X.width*G+X.height*q,y:X.width*q+X.height*G}}function O(X,j,ee,q,G,J){var le=!!J.isHorizontal,fe=!!J.constrained,se=J.angle||0,V=J.anchor||"end",Y=V==="end",ne=V==="start",te=J.leftToRight||0,K=(te+1)/2,$=1-K,ae=G.width,ie=G.height,oe=Math.abs(j-X),ue=Math.abs(q-ee),xe=oe>2*A&&ue>2*A?A:0;oe-=2*xe,ue-=2*xe;var he=k(se);se==="auto"&&!(ae<=oe&&ie<=ue)&&(ae>oe||ie>ue)&&(!(ae>ue||ie>oe)||ae<ie!=oe<ue)&&(he+=90);var me=P(G,he),be=1;fe&&(be=Math.min(1,oe/me.x,ue/me.y));var Ce=G.left*$+G.right*K,Se=(G.top+G.bottom)/2,Be=(X+A)*$+(j-A)*K,Ye=(ee+q)/2,Xe=0,Te=0;if(ne||Y){var Ie=(le?me.x:me.y)/2,Ze=le?w(X,j):w(ee,q);le?ne?(Be=X+Ze*xe,Xe=-Ze*Ie):(Be=j-Ze*xe,Xe=Ze*Ie):ne?(Ye=ee+Ze*xe,Te=-Ze*Ie):(Ye=q-Ze*xe,Te=Ze*Ie)}return{textX:Ce,textY:Se,targetX:Be,targetY:Ye,anchorX:Xe,anchorY:Te,scale:be,rotate:he}}function F(X,j,ee,q,G,J){var le=!!J.isHorizontal,fe=!!J.constrained,se=J.angle||0,V=G.width,Y=G.height,ne=Math.abs(j-X),te=Math.abs(q-ee),K;le?K=te>2*A?A:0:K=ne>2*A?A:0;var $=1;fe&&($=le?Math.min(1,te/Y):Math.min(1,ne/V));var ae=k(se),ie=P(G,ae),oe=(le?ie.x:ie.y)/2,ue=(G.left+G.right)/2,xe=(G.top+G.bottom)/2,he=(X+j)/2,me=(ee+q)/2,be=0,Ce=0,Se=le?w(j,X):w(ee,q);return le?(he=j-Se*K,be=Se*oe):(me=q+Se*K,Ce=-Se*oe),{textX:ue,textY:xe,targetX:he,targetY:me,anchorX:be,anchorY:Ce,scale:$,rotate:ae}}function D(X,j,ee,q,G){var J=j[0].trace,le=J.texttemplate,fe;return le?fe=U(X,j,ee,q,G):J.textinfo?fe=N(j,ee,q,G):fe=c.getValue(J.text,ee),c.coerceString(p,fe)}function R(X,j){var ee=c.getValue(X.textposition,j);return c.coerceEnumerated(y,ee)}function U(X,j,ee,q,G){var J=j[0].trace,le=m.castOption(J,ee,"texttemplate");if(!le)return"";var fe=J.type==="histogram",se=J.type==="waterfall",V=J.type==="funnel",Y=J.orientation==="h",ne,te,K,$;Y?(ne="y",te=G,K="x",$=q):(ne="x",te=q,K="y",$=G);function ae(be){return r(te,te.c2l(be),!0).text}function ie(be){return r($,$.c2l(be),!0).text}var oe=j[ee],ue={};ue.label=oe.p,ue.labelLabel=ue[ne+"Label"]=ae(oe.p);var xe=m.castOption(J,oe.i,"text");(xe===0||xe)&&(ue.text=xe),ue.value=oe.s,ue.valueLabel=ue[K+"Label"]=ie(oe.s);var he={};g(he,J,oe.i),(fe||he.x===void 0)&&(he.x=Y?ue.value:ue.label),(fe||he.y===void 0)&&(he.y=Y?ue.label:ue.value),(fe||he.xLabel===void 0)&&(he.xLabel=Y?ue.valueLabel:ue.labelLabel),(fe||he.yLabel===void 0)&&(he.yLabel=Y?ue.labelLabel:ue.valueLabel),se&&(ue.delta=+oe.rawS||oe.s,ue.deltaLabel=ie(ue.delta),ue.final=oe.v,ue.finalLabel=ie(ue.final),ue.initial=ue.final-ue.delta,ue.initialLabel=ie(ue.initial)),V&&(ue.value=oe.s,ue.valueLabel=ie(ue.value),ue.percentInitial=oe.begR,ue.percentInitialLabel=m.formatPercent(oe.begR),ue.percentPrevious=oe.difR,ue.percentPreviousLabel=m.formatPercent(oe.difR),ue.percentTotal=oe.sumR,ue.percenTotalLabel=m.formatPercent(oe.sumR));var me=m.castOption(J,oe.i,"customdata");return me&&(ue.customdata=me),m.texttemplateString(le,ue,X._d3locale,he,ue,J._meta||{})}function N(X,j,ee,q){var G=X[0].trace,J=G.orientation==="h",le=G.type==="waterfall",fe=G.type==="funnel";function se(me){var be=J?q:ee;return r(be,me,!0).text}function V(me){var be=J?ee:q;return r(be,+me,!0).text}var Y=G.textinfo,ne=X[j],te=Y.split("+"),K=[],$,ae=function(me){return te.indexOf(me)!==-1};if(ae("label")&&K.push(se(X[j].p)),ae("text")&&($=m.castOption(G,ne.i,"text"),($===0||$)&&K.push($)),le){var ie=+ne.rawS||ne.s,oe=ne.v,ue=oe-ie;ae("initial")&&K.push(V(ue)),ae("delta")&&K.push(V(ie)),ae("final")&&K.push(V(oe))}if(fe){ae("value")&&K.push(V(ne.s));var xe=0;ae("percent initial")&&xe++,ae("percent previous")&&xe++,ae("percent total")&&xe++;var he=xe>1;ae("percent initial")&&($=m.formatPercent(ne.begR),he&&($+=" of initial"),K.push($)),ae("percent previous")&&($=m.formatPercent(ne.difR),he&&($+=" of previous"),K.push($)),ae("percent total")&&($=m.formatPercent(ne.sumR),he&&($+=" of total"),K.push($))}return K.join("<br>")}I.exports={plot:L,toMoveInsideBar:O}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(e,I,B){I.exports=function(m,x){var t=m.cd,i=m.xaxis,a=m.yaxis,r=t[0].trace,n=r.type==="funnel",f=r.orientation==="h",l=[],o;if(x===!1)for(o=0;o<t.length;o++)t[o].selected=0;else for(o=0;o<t.length;o++){var c=t[o],v="ct"in c?c.ct:u(c,i,a,f,n);x.contains(v,!1,o,m)?(l.push({pointNumber:o,x:i.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return l};function u(s,m,x,t,i){var a=m.c2p(t?s.s0:s.p0,!0),r=m.c2p(t?s.s1:s.p1,!0),n=x.c2p(t?s.p0:s.s0,!0),f=x.c2p(t?s.p1:s.s1,!0);return i?[(a+r)/2,(n+f)/2]:t?[r,(n+f)/2]:[(a+r)/2,f]}},{}],661:[function(e,I,B){I.exports=m;var u=e("../../lib").distinctVals,s=e("../../constants/numerical").BADNUM;function m(x,t){this.traces=x,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var i=1/0,a=[],r=0;r<x.length;r++){for(var n=x[r],f=0;f<n.length;f++){var l=n[f];l.p!==s&&a.push(l.p)}n[0]&&n[0].width1&&(i=Math.min(n[0].width1,i))}this.positions=a;var o=u(a);this.distinctPositions=o.vals,o.vals.length===1&&i!==1/0?this.minDiff=i:this.minDiff=Math.min(o.minDiff,i);var c=(t.posAxis||{}).type;(c==="category"||c==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}m.prototype.put=function(t,i){var a=this.getLabel(t,i),r=this.bins[a]||0;return this.bins[a]=r+i,r},m.prototype.get=function(t,i){var a=this.getLabel(t,i);return this.bins[a]||0},m.prototype.getLabel=function(t,i){var a=i<0&&this.sepNegVal?"v":"^",r=this.overlapNoMerge?t:Math.round(t/this.binWidth);return a+r}},{"../../constants/numerical":479,"../../lib":503}],662:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../components/drawing"),x=e("../../lib"),t=e("../../registry"),i=e("./uniform_text").resizeText,a=e("./attributes"),r=a.textfont,n=a.insidetextfont,f=a.outsidetextfont,l=e("./helpers");function o(_){var h=u.select(_).selectAll("g.barlayer").selectAll("g.trace");i(_,h,"bar");var L=h.size(),S=_._fullLayout;h.style("opacity",function(k){return k[0].trace.opacity}).each(function(k){(S.barmode==="stack"&&L>1||S.bargap===0&&S.bargroupgap===0&&!k[0].trace.marker.line.width)&&u.select(this).attr("shape-rendering","crispEdges")}),h.selectAll("g.points").each(function(k){var P=u.select(this),O=k[0].trace;c(P,O,_)}),t.getComponentMethod("errorbars","style")(h)}function c(_,h,L){m.pointStyle(_.selectAll("path"),h,L),v(_,h,L)}function v(_,h,L){_.selectAll("text").each(function(S){var k=u.select(this),P=x.ensureUniformFontSize(L,g(k,S,h,L));m.font(k,P)})}function d(_,h,L){var S=h[0].trace;S.selectedpoints?p(L,S,_):(c(L,S,_),t.getComponentMethod("errorbars","style")(L))}function p(_,h,L){m.selectedPointStyle(_.selectAll("path"),h),y(_.selectAll("text"),h,L)}function y(_,h,L){_.each(function(S){var k=u.select(this),P;if(S.selected){P=x.ensureUniformFontSize(L,g(k,S,h,L));var O=h.selected.textfont&&h.selected.textfont.color;O&&(P.color=O),m.font(k,P)}else m.selectedTextStyle(k,h)})}function g(_,h,L,S){var k=S._fullLayout.font,P=L.textfont;if(_.classed("bartext-inside")){var O=T(h,L);P=b(L,h.i,k,O)}else _.classed("bartext-outside")&&(P=M(L,h.i,k));return P}function A(_,h,L){return w(r,_.textfont,h,L)}function b(_,h,L,S){var k=A(_,h,L),P=_._input.textfont===void 0||_._input.textfont.color===void 0||Array.isArray(_.textfont.color)&&_.textfont.color[h]===void 0;return P&&(k={color:s.contrast(S),family:k.family,size:k.size}),w(n,_.insidetextfont,h,k)}function M(_,h,L){var S=A(_,h,L);return w(f,_.outsidetextfont,h,S)}function w(_,h,L,S){h=h||{};var k=l.getValue(h.family,L),P=l.getValue(h.size,L),O=l.getValue(h.color,L);return{family:l.coerceString(_.family,k,S.family),size:l.coerceNumber(_.size,P,S.size),color:l.coerceColor(_.color,O,S.color)}}function T(_,h){return h.type==="waterfall"?h[_.dir].marker.color:_.mcc||_.mc||h.marker.color}I.exports={style:o,styleTextPoints:v,styleOnSelect:d,getInsideTextFont:b,getOutsideTextFont:M,getBarColor:T,resizeText:i}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(e,I,B){var u=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("../../lib").coercePattern;I.exports=function(i,a,r,n,f){var l=r("marker.color",n),o=s(i,"marker");o&&m(i,a,f,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",u.defaultLine),s(i,"marker.line")&&m(i,a,f,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),x(r,"marker.pattern",l,o),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib");function m(a,r,n){var f=a._fullLayout,l=f["_"+n+"Text_minsize"];if(l){var o=f.uniformtext.mode==="hide",c;switch(n){case"funnelarea":case"pie":case"sunburst":c="g.slice";break;case"treemap":case"icicle":c="g.slice, g.pathbar";break;default:c="g.points > g.point"}r.selectAll(c).each(function(v){var d=v.transform;if(d){d.scale=o&&d.hide?0:l/d.fontSize;var p=u.select(this).select("text");p.attr("transform",s.getTextTransform(d))}})}}function x(a,r,n){if(n.uniformtext.mode){var f=i(a),l=n.uniformtext.minsize,o=r.scale*r.fontSize;r.hide=o<l,n[f]=n[f]||1/0,r.hide||(n[f]=Math.min(n[f],Math.max(o,l)))}}function t(a,r){var n=i(a);r[n]=void 0}function i(a){return"_"+a+"Text_minsize"}I.exports={recordMinTextSize:x,clearMinTextSize:t,resizeText:m}},{"../../lib":503,"@plotly/d3":58}],665:[function(e,I,B){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../lib/extend").extendFlat,m=e("../scatterpolar/attributes"),x=e("../bar/attributes");I.exports={r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,base:s({},x.base,{}),offset:s({},x.offset,{}),width:s({},x.width,{}),text:s({},x.text,{}),hovertext:s({},x.hovertext,{}),marker:x.marker,hoverinfo:m.hoverinfo,hovertemplate:u(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1e3}],666:[function(e,I,B){var u=e("../../components/colorscale/helpers").hasColorscale,s=e("../../components/colorscale/calc"),m=e("../bar/arrays_to_calcdata"),x=e("../bar/cross_trace_calc").setGroupPositions,t=e("../scatter/calc_selection"),i=e("../../registry").traceIs,a=e("../../lib").extendFlat;function r(f,l){for(var o=f._fullLayout,c=l.subplot,v=o[c].radialaxis,d=o[c].angularaxis,p=v.makeCalcdata(l,"r"),y=d.makeCalcdata(l,"theta"),g=l._length,A=new Array(g),b=p,M=y,w=0;w<g;w++)A[w]={p:M[w],s:b[w]};function T(_){var h=l[_];h!==void 0&&(l["_"+_]=Array.isArray(h)?d.makeCalcdata(l,_):d.d2c(h,l.thetaunit))}return d.type==="linear"&&(T("width"),T("offset")),u(l,"marker")&&s(f,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),u(l,"marker.line")&&s(f,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),m(A,l),t(A,l),A}function n(f,l,o){for(var c=f.calcdata,v=[],d=0;d<c.length;d++){var p=c[d],y=p[0].trace;y.visible===!0&&i(y,"bar")&&y.subplot===o&&v.push(p)}var g=a({},l.radialaxis,{_id:"x"}),A=l.angularaxis;x(f,A,g,v,{mode:l.barmode,norm:l.barnorm,gap:l.bargap,groupgap:l.bargroupgap})}I.exports={calc:r,crossTraceCalc:n}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":928}],667:[function(e,I,B){var u=e("../../lib"),s=e("../scatterpolar/defaults").handleRThetaDefaults,m=e("../bar/style_defaults"),x=e("./attributes");I.exports=function(i,a,r,n){function f(o,c){return u.coerce(i,a,x,o,c)}var l=s(i,a,n,f);if(!l){a.visible=!1;return}f("thetaunit"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),m(i,a,f,r,n),u.coerceSelectionMarkerOpacity(a,f)}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1002,"./attributes":665}],668:[function(e,I,B){var u=e("../../components/fx"),s=e("../../lib"),m=e("../bar/hover").getTraceColor,x=s.fillText,t=e("../scatterpolar/hover").makeHoverPointText,i=e("../../plots/polar/helpers").isPtInsidePolygon;I.exports=function(r,n,f){var l=r.cd,o=l[0].trace,c=r.subplot,v=c.radialAxis,d=c.angularAxis,p=c.vangles,y=p?i:s.isPtInsideSector,g=r.maxHoverDistance,A=d._period||2*Math.PI,b=Math.abs(v.g2p(Math.sqrt(n*n+f*f))),M=Math.atan2(f,n);v.range[0]>v.range[1]&&(M+=Math.PI);var w=function(L){return y(b,M,[L.rp0,L.rp1],[L.thetag0,L.thetag1],p)?g+Math.min(1,Math.abs(L.thetag1-L.thetag0)/A)-1+(L.rp1-b)/(L.rp1-L.rp0)-1:1/0};if(u.getClosest(l,w,r),r.index!==!1){var T=r.index,_=l[T];r.x0=r.x1=_.ct[0],r.y0=r.y1=_.ct[1];var h=s.extendFlat({},_,{r:_.s,theta:_.p});return x(_,o,r),t(h,o,c,r),r.hovertemplate=o.hovertemplate,r.color=m(o,_),r.xLabelVal=r.yLabelVal=void 0,_.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1004}],669:[function(e,I,B){I.exports={moduleType:"trace",name:"barpolar",basePlotModule:e("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("../scatterpolar/format_labels"),style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"../scatterpolar/format_labels":1003,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(e,I,B){I.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(m,x,t){var i={},a;function r(l,o){return u.coerce(m[a]||{},x[a],s,l,o)}for(var n=0;n<t.length;n++){var f=t[n];f.type==="barpolar"&&f.visible===!0&&(a=f.subplot,i[a]||(r("barmode"),r("bargap"),i[a]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(e,I,B){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../components/drawing"),t=e("../../plots/polar/helpers");I.exports=function(r,n,f){var l=n.xaxis,o=n.yaxis,c=n.radialAxis,v=n.angularAxis,d=i(n),p=n.layers.frontplot.select("g.barlayer");m.makeTraceGroups(p,f,"trace bars").each(function(){var y=u.select(this),g=m.ensureSingle(y,"g","points"),A=g.selectAll("g.point").data(m.identity);A.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),A.exit().remove(),A.each(function(b){var M=u.select(this),w=b.rp0=c.c2p(b.s0),T=b.rp1=c.c2p(b.s1),_=b.thetag0=v.c2g(b.p0),h=b.thetag1=v.c2g(b.p1),L;if(!s(w)||!s(T)||!s(_)||!s(h)||w===T||_===h)L="M0,0Z";else{var S=c.c2g(b.s1),k=(_+h)/2;b.ct=[l.c2p(S*Math.cos(k)),o.c2p(S*Math.sin(k))],L=d(w,T,_,h)}m.ensureSingle(M,"path").attr("d",L)}),x.setClipUrl(y,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,r)})};function i(a){var r=a.cxx,n=a.cyy;return a.vangles?function(f,l,o,c){var v,d;m.angleDelta(o,c)>0?(v=o,d=c):(v=c,d=o);var p=t.findEnclosingVertexAngles(v,a.vangles)[0],y=t.findEnclosingVertexAngles(d,a.vangles)[1],g=[p,(v+d)/2,y];return t.pathPolygonAnnulus(f,l,v,d,g,r,n)}:function(f,l,o,c){return m.pathAnnulus(f,l,o,c,r,n)}}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(e,I,B){var u=e("../scatter/attributes"),s=e("../bar/attributes"),m=e("../../components/color/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../lib/extend").extendFlat,a=u.marker,r=a.line;I.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:i({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:i({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:i({},a.size,{arrayOk:!1,editType:"calc"}),color:i({},a.color,{arrayOk:!1,editType:"style"}),line:{color:i({},r.color,{arrayOk:!1,dflt:m.defaultLine,editType:"style"}),width:i({},r.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:u.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,selected:{marker:u.selected.marker,editType:"style"},unselected:{marker:u.unselected.marker,editType:"style"},text:i({},u.text,{}),hovertext:i({},u.hovertext,{}),hovertemplate:t({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926}],674:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/align_period"),x=e("../../lib"),t=e("../../constants/numerical").BADNUM,i=x._;I.exports=function(M,w){var T=M._fullLayout,_=s.getFromId(M,w.xaxis||"x"),h=s.getFromId(M,w.yaxis||"y"),L=[],S=w.type==="violin"?"_numViolins":"_numBoxes",k,P,O,F,D,R,U;w.orientation==="h"?(O=_,F="x",D=h,R="y",U=!!w.yperiodalignment):(O=h,F="y",D=_,R="x",U=!!w.xperiodalignment);var N=a(w,R,D,T[S]),X=N[0],j=N[1],ee=x.distinctVals(X,D),q=ee.vals,G=ee.minDiff/2,J,le,fe,se,V,Y,ne=(w.boxpoints||w.points)==="all"?x.identity:function(Pt){return Pt.v<J.lf||Pt.v>J.uf};if(w._hasPreCompStats){var te=w[F],K=function(Pt){return O.d2c((w[Pt]||[])[k])},$=1/0,ae=-1/0;for(k=0;k<w._length;k++){var ie=X[k];if(!!u(ie)){if(J={},J.pos=J[R]=ie,U&&j&&(J.orig_p=j[k]),J.q1=K("q1"),J.med=K("median"),J.q3=K("q3"),le=[],te&&x.isArrayOrTypedArray(te[k]))for(P=0;P<te[k].length;P++)Y=O.d2c(te[k][P]),Y!==t&&(V={v:Y,i:[k,P]},l(V,w,[k,P]),le.push(V));if(J.pts=le.sort(c),fe=J[F]=le.map(v),se=fe.length,J.med!==t&&J.q1!==t&&J.q3!==t&&J.med>=J.q1&&J.q3>=J.med){var oe=K("lowerfence");J.lf=oe!==t&&oe<=J.q1?oe:d(J,fe,se);var ue=K("upperfence");J.uf=ue!==t&&ue>=J.q3?ue:p(J,fe,se);var xe=K("mean");J.mean=xe!==t?xe:se?x.mean(fe,se):(J.q1+J.q3)/2;var he=K("sd");J.sd=xe!==t&&he>=0?he:se?x.stdev(fe,se,J.mean):J.q3-J.q1,J.lo=y(J),J.uo=g(J);var me=K("notchspan");me=me!==t&&me>0?me:A(J,se),J.ln=J.med-me,J.un=J.med+me;var be=J.lf,Ce=J.uf;w.boxpoints&&fe.length&&(be=Math.min(be,fe[0]),Ce=Math.max(Ce,fe[se-1])),w.notched&&(be=Math.min(be,J.ln),Ce=Math.max(Ce,J.un)),J.min=be,J.max=Ce}else{x.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+J.q1,"median = "+J.med,"q3 = "+J.q3].join(`
`));var Se;J.med!==t?Se=J.med:J.q1!==t?J.q3!==t?Se=(J.q1+J.q3)/2:Se=J.q1:J.q3!==t?Se=J.q3:Se=0,J.med=Se,J.q1=J.q3=Se,J.lf=J.uf=Se,J.mean=J.sd=Se,J.ln=J.un=Se,J.min=J.max=Se}$=Math.min($,J.min),ae=Math.max(ae,J.max),J.pts2=le.filter(ne),L.push(J)}}w._extremes[O._id]=s.findExtremes(O,[$,ae],{padded:!0})}else{var Be=O.makeCalcdata(w,F),Ye=r(q,G),Xe=q.length,Te=n(Xe);for(k=0;k<w._length;k++)if(Y=Be[k],!!u(Y)){var Ie=x.findBin(X[k],Ye);Ie>=0&&Ie<Xe&&(V={v:Y,i:k},l(V,w,k),Te[Ie].push(V))}var Ze=1/0,rt=-1/0,Ge=w.quartilemethod,ze=Ge==="exclusive",We=Ge==="inclusive";for(k=0;k<Xe;k++)if(Te[k].length>0){if(J={},J.pos=J[R]=q[k],le=J.pts=Te[k].sort(c),fe=J[F]=le.map(v),se=fe.length,J.min=fe[0],J.max=fe[se-1],J.mean=x.mean(fe,se),J.sd=x.stdev(fe,se,J.mean),J.med=x.interp(fe,.5),se%2&&(ze||We)){var mt,Ft;ze?(mt=fe.slice(0,se/2),Ft=fe.slice(se/2+1)):We&&(mt=fe.slice(0,se/2+1),Ft=fe.slice(se/2)),J.q1=x.interp(mt,.5),J.q3=x.interp(Ft,.5)}else J.q1=x.interp(fe,.25),J.q3=x.interp(fe,.75);J.lf=d(J,fe,se),J.uf=p(J,fe,se),J.lo=y(J),J.uo=g(J);var Xt=A(J,se);J.ln=J.med-Xt,J.un=J.med+Xt,Ze=Math.min(Ze,J.ln),rt=Math.max(rt,J.un),J.pts2=le.filter(ne),L.push(J)}w._extremes[O._id]=s.findExtremes(O,w.notched?Be.concat([Ze,rt]):Be,{padded:!0})}return o(L,w),L.length>0?(L[0].t={num:T[S],dPos:G,posLetter:R,valLetter:F,labels:{med:i(M,"median:"),min:i(M,"min:"),q1:i(M,"q1:"),q3:i(M,"q3:"),max:i(M,"max:"),mean:w.boxmean==="sd"?i(M,"mean \xB1 \u03C3:"):i(M,"mean:"),lf:i(M,"lower fence:"),uf:i(M,"upper fence:")}},T[S]++,L):[{t:{empty:!0}}]};function a(b,M,w,T){var _=M in b,h=M+"0"in b,L="d"+M in b;if(_||h&&L){var S=w.makeCalcdata(b,M),k=m(b,w,M,S).vals;return[k,S]}var P;h?P=b[M+"0"]:"name"in b&&(w.type==="category"||u(b.name)&&["linear","log"].indexOf(w.type)!==-1||x.isDateTime(b.name)&&w.type==="date")?P=b.name:P=T;for(var O=w.type==="multicategory"?w.r2c_just_indices(P):w.d2c(P,0,b[M+"calendar"]),F=b._length,D=new Array(F),R=0;R<F;R++)D[R]=O;return[D]}function r(b,M){for(var w=b.length,T=new Array(w+1),_=0;_<w;_++)T[_]=b[_]-M;return T[w]=b[w-1]+M,T}function n(b){for(var M=new Array(b),w=0;w<b;w++)M[w]=[];return M}var f={text:"tx",hovertext:"htx"};function l(b,M,w){for(var T in f)x.isArrayOrTypedArray(M[T])&&(Array.isArray(w)?x.isArrayOrTypedArray(M[T][w[0]])&&(b[f[T]]=M[T][w[0]][w[1]]):b[f[T]]=M[T][w])}function o(b,M){if(x.isArrayOrTypedArray(M.selectedpoints))for(var w=0;w<b.length;w++){for(var T=b[w].pts||[],_={},h=0;h<T.length;h++)_[T[h].i]=h;x.tagSelected(T,M,_)}}function c(b,M){return b.v-M.v}function v(b){return b.v}function d(b,M,w){return w===0?b.q1:Math.min(b.q1,M[Math.min(x.findBin(2.5*b.q1-1.5*b.q3,M,!0)+1,w-1)])}function p(b,M,w){return w===0?b.q3:Math.max(b.q3,M[Math.max(x.findBin(2.5*b.q3-1.5*b.q1,M),0)])}function y(b){return 4*b.q1-3*b.q3}function g(b){return 4*b.q3-3*b.q1}function A(b,M){return M===0?0:1.57*(b.q3-b.q1)/Math.sqrt(M)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../lib"),m=e("../../plots/cartesian/constraints").getAxisGroup,x=["v","h"];function t(a,r){for(var n=a.calcdata,f=r.xaxis,l=r.yaxis,o=0;o<x.length;o++){for(var c=x[o],v=c==="h"?l:f,d=[],p=0;p<n.length;p++){var y=n[p],g=y[0].t,A=y[0].trace;A.visible===!0&&(A.type==="box"||A.type==="candlestick")&&!g.empty&&(A.orientation||"v")===c&&A.xaxis===f._id&&A.yaxis===l._id&&d.push(p)}i("box",a,d,v)}}function i(a,r,n,f){var l=r.calcdata,o=r._fullLayout,c=f._id,v=c.charAt(0),d,p,y,g=[],A=0;for(d=0;d<n.length;d++)for(y=l[n[d]],p=0;p<y.length;p++)g.push(f.c2l(y[p].pos,!0)),A+=(y[p].pts2||[]).length;if(!!g.length){var b=s.distinctVals(g);(f.type==="category"||f.type==="multicategory")&&(b.minDiff=1);var M=b.minDiff/2;u.minDtick(f,b.minDiff,b.vals[0],!0);var w=a==="violin"?"_numViolins":"_numBoxes",T=o[w],_=o[a+"mode"]==="group"&&T>1,h=1-o[a+"gap"],L=1-o[a+"groupgap"];for(d=0;d<n.length;d++){y=l[n[d]];var S=y[0].trace,k=y[0].t,P=S.width,O=S.side,F,D,R,U;if(P)F=D=U=P/2,R=0;else if(F=M,_){var N=m(o,f._id)+S.orientation,X=o._alignmentOpts[N]||{},j=X[S.alignmentgroup]||{},ee=Object.keys(j.offsetGroups||{}).length,q=ee||T,G=ee?S._offsetIndex:k.num;D=F*h*L/q,R=2*F*(-.5+(G+.5)/q)*h,U=F*h/q}else D=F*h*L,R=0,U=F;k.dPos=F,k.bPos=R,k.bdPos=D,k.wHover=U;var J,le,fe=R+D,se,V,Y,ne,te,K,$=Boolean(P),ae=(S.boxpoints||S.points)&&A>0;if(O==="positive"?(J=F*(P?1:.5),se=fe,le=se=R):O==="negative"?(J=se=R,le=F*(P?1:.5),V=fe):(J=le=F,se=V=fe),ae){var ie=S.pointpos,oe=S.jitter,ue=S.marker.size/2,xe=0;ie+oe>=0&&(xe=fe*(ie+oe),xe>J?($=!0,te=ue,Y=xe):xe>se&&(te=ue,Y=J)),xe<=J&&(Y=J);var he=0;ie-oe<=0&&(he=-fe*(ie-oe),he>le?($=!0,K=ue,ne=he):he>V&&(K=ue,ne=le)),he<=le&&(ne=le)}else Y=J,ne=le;var me=new Array(y.length);for(p=0;p<y.length;p++)me[p]=y[p].pos;S._extremes[c]=u.findExtremes(f,me,{padded:$,vpadminus:ne,vpadplus:Y,vpadLinearized:!0,ppadminus:{x:K,y:te}[v],ppadplus:{x:te,y:K}[v]})}}}I.exports={crossTraceCalc:t,setPositionOffset:i}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(e,I,B){var u=e("../../lib"),s=e("../../registry"),m=e("../../components/color"),x=e("../scatter/period_defaults"),t=e("../bar/defaults").handleGroupingDefaults,i=e("../../plots/cartesian/axis_autotype"),a=e("./attributes");function r(o,c,v,d){function p(_,h){return u.coerce(o,c,a,_,h)}if(n(o,c,p,d),c.visible!==!1){x(o,c,d,p),p("xhoverformat"),p("yhoverformat");var y=c._hasPreCompStats;y&&(p("lowerfence"),p("upperfence")),p("line.color",(o.marker||{}).color||v),p("line.width"),p("fillcolor",m.addOpacity(c.line.color,.5));var g=!1;if(y){var A=p("mean"),b=p("sd");A&&A.length&&(g=!0,b&&b.length&&(g="sd"))}p("boxmean",g),p("whiskerwidth"),p("width"),p("quartilemethod");var M=!1;if(y){var w=p("notchspan");w&&w.length&&(M=!0)}else u.validate(o.notchwidth,a.notchwidth)&&(M=!0);var T=p("notched",M);T&&p("notchwidth"),f(o,c,p,{prefix:"box"})}}function n(o,c,v,d){function p(ee){var q=0;return ee&&ee.length&&(q+=1,u.isArrayOrTypedArray(ee[0])&&ee[0].length&&(q+=1)),q}function y(ee){return u.validate(o[ee],a[ee])}var g=v("y"),A=v("x"),b;if(c.type==="box"){var M=v("q1"),w=v("median"),T=v("q3");c._hasPreCompStats=M&&M.length&&w&&w.length&&T&&T.length,b=Math.min(u.minRowLength(M),u.minRowLength(w),u.minRowLength(T))}var _=p(g),h=p(A),L=_&&u.minRowLength(g),S=h&&u.minRowLength(A),k=d.calendar,P={autotypenumbers:d.autotypenumbers},O,F;if(c._hasPreCompStats)switch(String(h)+String(_)){case"00":var D=y("x0")||y("dx"),R=y("y0")||y("dy");R&&!D?O="h":O="v",F=b;break;case"10":O="v",F=Math.min(b,S);break;case"20":O="h",F=Math.min(b,A.length);break;case"01":O="h",F=Math.min(b,L);break;case"02":O="v",F=Math.min(b,g.length);break;case"12":O="v",F=Math.min(b,S,g.length);break;case"21":O="h",F=Math.min(b,A.length,L);break;case"11":F=0;break;case"22":var U=!1,N;for(N=0;N<A.length;N++)if(i(A[N],k,P)==="category"){U=!0;break}if(U)O="v",F=Math.min(b,S,g.length);else{for(N=0;N<g.length;N++)if(i(g[N],k,P)==="category"){U=!0;break}U?(O="h",F=Math.min(b,A.length,L)):(O="v",F=Math.min(b,S,g.length))}break}else _>0?(O="v",h>0?F=Math.min(S,L):F=Math.min(L)):h>0?(O="h",F=Math.min(S)):F=0;if(!F){c.visible=!1;return}c._length=F;var X=v("orientation",O);c._hasPreCompStats?X==="v"&&h===0?(v("x0",0),v("dx",1)):X==="h"&&_===0&&(v("y0",0),v("dy",1)):X==="v"&&h===0?v("x0"):X==="h"&&_===0&&v("y0");var j=s.getComponentMethod("calendars","handleTraceDefaults");j(o,c,["x","y"],d)}function f(o,c,v,d){var p=d.prefix,y=u.coerce2(o,c,a,"marker.outliercolor"),g=v("marker.line.outliercolor"),A="outliers";c._hasPreCompStats?A="all":(y||g)&&(A="suspectedoutliers");var b=v(p+"points",A);b?(v("jitter",b==="all"?.3:0),v("pointpos",b==="all"?-1.5:0),v("marker.symbol"),v("marker.opacity"),v("marker.size"),v("marker.color",c.line.color),v("marker.line.color"),v("marker.line.width"),b==="suspectedoutliers"&&(v("marker.line.outliercolor",c.marker.color),v("marker.line.outlierwidth")),v("selected.marker.color"),v("unselected.marker.color"),v("selected.marker.size"),v("unselected.marker.size"),v("text"),v("hovertext")):delete c.marker;var M=v("hoveron");(M==="all"||M.indexOf("points")!==-1)&&v("hovertemplate"),u.coerceSelectionMarkerOpacity(c,v)}function l(o,c){var v,d;function p(A){return u.coerce(d._input,d,a,A)}for(var y=0;y<o.length;y++){d=o[y];var g=d.type;(g==="box"||g==="violin")&&(v=d._input,c[g+"mode"]==="group"&&t(v,d,c,p))}}I.exports={supplyDefaults:r,crossTraceDefaults:l,handleSampleDefaults:n,handlePointsDefaults:f}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":946,"./attributes":673}],677:[function(e,I,B){I.exports=function(s,m){return m.hoverOnBox&&(s.hoverOnBox=m.hoverOnBox),"xVal"in m&&(s.x=m.xVal),"yVal"in m&&(s.y=m.yVal),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),s}},{}],678:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../lib"),m=e("../../components/fx"),x=e("../../components/color"),t=s.fillText;function i(n,f,l,o){var c=n.cd,v=c[0].trace,d=v.hoveron,p=[],y;return d.indexOf("boxes")!==-1&&(p=p.concat(a(n,f,l,o))),d.indexOf("points")!==-1&&(y=r(n,f,l)),o==="closest"?y?[y]:p:(y&&p.push(y),p)}function a(n,f,l,o){var c=n.cd,v=n.xa,d=n.ya,p=c[0].trace,y=c[0].t,g=p.type==="violin",A=[],b,M,w,T,_,h,L,S,k,P,O,F=y.bdPos,D,R,U=y.wHover,N=function(ae){return w.c2l(ae.pos)+y.bPos-w.c2l(h)};g&&p.side!=="both"?(p.side==="positive"&&(k=function(ae){var ie=N(ae);return m.inbox(ie,ie+U,P)},D=F,R=0),p.side==="negative"&&(k=function(ae){var ie=N(ae);return m.inbox(ie-U,ie,P)},D=0,R=F)):(k=function(ae){var ie=N(ae);return m.inbox(ie-U,ie+U,P)},D=R=F);var X;g?X=function(ae){return m.inbox(ae.span[0]-_,ae.span[1]-_,P)}:X=function(ae){return m.inbox(ae.min-_,ae.max-_,P)},p.orientation==="h"?(_=f,h=l,L=X,S=k,b="y",w=d,M="x",T=v):(_=l,h=f,L=k,S=X,b="x",w=v,M="y",T=d);var j=Math.min(1,F/Math.abs(w.r2c(w.range[1])-w.r2c(w.range[0])));P=n.maxHoverDistance-j,O=n.maxSpikeDistance-j;function ee(ae){return(L(ae)+S(ae))/2}var q=m.getDistanceFunction(o,L,S,ee);if(m.getClosest(c,q,n),n.index===!1)return[];var G=c[n.index],J=p.line.color,le=(p.marker||{}).color;x.opacity(J)&&p.line.width?n.color=J:x.opacity(le)&&p.boxpoints?n.color=le:n.color=p.fillcolor,n[b+"0"]=w.c2p(G.pos+y.bPos-R,!0),n[b+"1"]=w.c2p(G.pos+y.bPos+D,!0),n[b+"LabelVal"]=G.orig_p!==void 0?G.orig_p:G.pos;var fe=b+"Spike";n.spikeDistance=ee(G)*O/P,n[fe]=w.c2p(G.pos,!0);var se={},V=["med","q1","q3","min","max"];(p.boxmean||(p.meanline||{}).visible)&&V.push("mean"),(p.boxpoints||p.points)&&V.push("lf","uf");for(var Y=0;Y<V.length;Y++){var ne=V[Y];if(!(!(ne in G)||G[ne]in se)){se[G[ne]]=!0;var te=G[ne],K=T.c2p(te,!0),$=s.extendFlat({},n);$.attr=ne,$[M+"0"]=$[M+"1"]=K,$[M+"LabelVal"]=te,$[M+"Label"]=(y.labels?y.labels[ne]+" ":"")+u.hoverLabelText(T,te,p[M+"hoverformat"]),$.hoverOnBox=!0,ne==="mean"&&"sd"in G&&p.boxmean==="sd"&&($[M+"err"]=G.sd),n.name="",n.spikeDistance=void 0,n[fe]=void 0,$.hovertemplate=!1,A.push($)}}return A}function r(n,f,l){for(var o=n.cd,c=n.xa,v=n.ya,d=o[0].trace,p=c.c2p(f),y=v.c2p(l),g,A=function(N){var X=Math.max(3,N.mrc||0);return Math.max(Math.abs(c.c2p(N.x)-p)-X,1-3/X)},b=function(N){var X=Math.max(3,N.mrc||0);return Math.max(Math.abs(v.c2p(N.y)-y)-X,1-3/X)},M=m.quadrature(A,b),w=!1,T,_,h=0;h<o.length;h++){T=o[h];for(var L=0;L<(T.pts||[]).length;L++){_=T.pts[L];var S=M(_);S<=n.distance&&(n.distance=S,w=[h,L])}}if(!w)return!1;T=o[w[0]],_=T.pts[w[1]];var k=c.c2p(_.x,!0),P=v.c2p(_.y,!0),O=_.mrc||1;g=s.extendFlat({},n,{index:_.i,color:(d.marker||{}).color,name:d.name,x0:k-O,x1:k+O,y0:P-O,y1:P+O,spikeDistance:n.distance,hovertemplate:d.hovertemplate});var F=T.orig_p,D=F!==void 0?F:T.pos,R;d.orientation==="h"?(R=v,g.xLabelVal=_.x,g.yLabelVal=D):(R=c,g.xLabelVal=D,g.yLabelVal=_.y);var U=R._id.charAt(0);return g[U+"Spike"]=R.c2p(T.pos,!0),t(_,d,g),g}I.exports={hoverPoints:i,hoverOnBoxes:a,hoverOnPoints:r}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(e,I,B){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(e,I,B){I.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("./layout_attributes");function x(i,a,r,n,f){for(var l=f+"Layout",o=!1,c=0;c<r.length;c++){var v=r[c];if(u.traceIs(v,l)){o=!0;break}}!o||(n(f+"mode"),n(f+"gap"),n(f+"groupgap"))}function t(i,a,r){function n(f,l){return s.coerce(i,a,m,f,l)}x(i,a,r,n,"box")}I.exports={supplyLayoutDefaults:t,_supply:x}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=5,t=.01;function i(f,l,o,c){var v=l.xaxis,d=l.yaxis;s.makeTraceGroups(c,o,"trace boxes").each(function(p){var y=u.select(this),g=p[0],A=g.t,b=g.trace;if(A.wdPos=A.bdPos*b.whiskerwidth,b.visible!==!0||A.empty){y.remove();return}var M,w;b.orientation==="h"?(M=d,w=v):(M=v,w=d),a(y,{pos:M,val:w},b,A),r(y,{x:v,y:d},b,A),n(y,{pos:M,val:w},b,A)})}function a(f,l,o,c){var v=o.orientation==="h",d=l.val,p=l.pos,y=!!p.rangebreaks,g=c.bPos,A=c.wdPos||0,b=c.bPosPxOffset||0,M=o.whiskerwidth||0,w=o.notched||!1,T=w?1-2*o.notchwidth:1,_,h;Array.isArray(c.bdPos)?(_=c.bdPos[0],h=c.bdPos[1]):(_=c.bdPos,h=c.bdPos);var L=f.selectAll("path.box").data(o.type!=="violin"||o.box.visible?s.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(S){if(S.empty)return"M0,0Z";var k=p.c2l(S.pos+g,!0),P=p.l2p(k-_)+b,O=p.l2p(k+h)+b,F=y?(P+O)/2:p.l2p(k)+b,D=o.whiskerwidth,R=y?P*D+(1-D)*F:p.l2p(k-A)+b,U=y?O*D+(1-D)*F:p.l2p(k+A)+b,N=p.l2p(k-_*T)+b,X=p.l2p(k+h*T)+b,j=d.c2p(S.q1,!0),ee=d.c2p(S.q3,!0),q=s.constrain(d.c2p(S.med,!0),Math.min(j,ee)+1,Math.max(j,ee)-1),G=S.lf===void 0||o.boxpoints===!1,J=d.c2p(G?S.min:S.lf,!0),le=d.c2p(G?S.max:S.uf,!0),fe=d.c2p(S.ln,!0),se=d.c2p(S.un,!0);v?u.select(this).attr("d","M"+q+","+N+"V"+X+"M"+j+","+P+"V"+O+(w?"H"+fe+"L"+q+","+X+"L"+se+","+O:"")+"H"+ee+"V"+P+(w?"H"+se+"L"+q+","+N+"L"+fe+","+P:"")+"ZM"+j+","+F+"H"+J+"M"+ee+","+F+"H"+le+(M===0?"":"M"+J+","+R+"V"+U+"M"+le+","+R+"V"+U)):u.select(this).attr("d","M"+N+","+q+"H"+X+"M"+P+","+j+"H"+O+(w?"V"+fe+"L"+X+","+q+"L"+O+","+se:"")+"V"+ee+"H"+P+(w?"V"+se+"L"+N+","+q+"L"+P+","+fe:"")+"ZM"+F+","+j+"V"+J+"M"+F+","+ee+"V"+le+(M===0?"":"M"+R+","+J+"H"+U+"M"+R+","+le+"H"+U))})}function r(f,l,o,c){var v=l.x,d=l.y,p=c.bdPos,y=c.bPos,g=o.boxpoints||o.points;s.seedPseudoRandom();var A=function(w){return w.forEach(function(T){T.t=c,T.trace=o}),w},b=f.selectAll("g.points").data(g?A:[]);b.enter().append("g").attr("class","points"),b.exit().remove();var M=b.selectAll("path").data(function(w){var T,_=w.pts2,h=Math.max((w.max-w.min)/10,w.q3-w.q1),L=h*1e-9,S=h*t,k=[],P=0,O;if(o.jitter){if(h===0)for(P=1,k=new Array(_.length),T=0;T<_.length;T++)k[T]=1;else for(T=0;T<_.length;T++){var F=Math.max(0,T-x),D=_[F].v,R=Math.min(_.length-1,T+x),U=_[R].v;g!=="all"&&(_[T].v<w.lf?U=Math.min(U,w.lf):D=Math.max(D,w.uf));var N=Math.sqrt(S*(R-F)/(U-D+L))||0;N=s.constrain(Math.abs(N),0,1),k.push(N),P=Math.max(N,P)}O=o.jitter*2/(P||1)}for(T=0;T<_.length;T++){var X=_[T],j=X.v,ee=o.jitter?O*k[T]*(s.pseudoRandom()-.5):0,q=w.pos+y+p*(o.pointpos+ee);o.orientation==="h"?(X.y=q,X.x=j):(X.x=q,X.y=j),g==="suspectedoutliers"&&j<w.uo&&j>w.lo&&(X.so=!0)}return _});M.enter().append("path").classed("point",!0),M.exit().remove(),M.call(m.translatePoints,v,d)}function n(f,l,o,c){var v=l.val,d=l.pos,p=!!d.rangebreaks,y=c.bPos,g=c.bPosPxOffset||0,A=o.boxmean||(o.meanline||{}).visible,b,M;Array.isArray(c.bdPos)?(b=c.bdPos[0],M=c.bdPos[1]):(b=c.bdPos,M=c.bdPos);var w=f.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?s.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(T){var _=d.c2l(T.pos+y,!0),h=d.l2p(_-b)+g,L=d.l2p(_+M)+g,S=p?(h+L)/2:d.l2p(_)+g,k=v.c2p(T.mean,!0),P=v.c2p(T.mean-T.sd,!0),O=v.c2p(T.mean+T.sd,!0);o.orientation==="h"?u.select(this).attr("d","M"+k+","+h+"V"+L+(A==="sd"?"m0,0L"+P+","+S+"L"+k+","+h+"L"+O+","+S+"Z":"")):u.select(this).attr("d","M"+h+","+k+"H"+L+(A==="sd"?"m0,0L"+S+","+P+"L"+h+","+k+"L"+S+","+O+"Z":""))})}I.exports={plot:i,plotBoxAndWhiskers:a,plotPoints:r,plotBoxMean:n}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(e,I,B){I.exports=function(s,m){var x=s.cd,t=s.xaxis,i=s.yaxis,a=[],r,n;if(m===!1)for(r=0;r<x.length;r++)for(n=0;n<(x[r].pts||[]).length;n++)x[r].pts[n].selected=0;else for(r=0;r<x.length;r++)for(n=0;n<(x[r].pts||[]).length;n++){var f=x[r].pts[n],l=t.c2p(f.x),o=i.c2p(f.y);m.contains([l,o],null,f.i,s)?(a.push({pointNumber:f.i,x:t.c2d(f.x),y:i.c2d(f.y)}),f.selected=1):f.selected=0}return a}},{}],684:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../components/drawing");function x(i,a,r){var n=r||u.select(i).selectAll("g.trace.boxes");n.style("opacity",function(f){return f[0].trace.opacity}),n.each(function(f){var l=u.select(this),o=f[0].trace,c=o.line.width;function v(y,g,A,b){y.style("stroke-width",g+"px").call(s.stroke,A).call(s.fill,b)}var d=l.selectAll("path.box");if(o.type==="candlestick")d.each(function(y){if(!y.empty){var g=u.select(this),A=o[y.dir];v(g,A.line.width,A.line.color,A.fillcolor),g.style("opacity",o.selectedpoints&&!y.selected?.3:1)}});else{v(d,c,o.line.color,o.fillcolor),l.selectAll("path.mean").style({"stroke-width":c,"stroke-dasharray":2*c+"px,"+c+"px"}).call(s.stroke,o.line.color);var p=l.selectAll("path.point");m.pointStyle(p,o,i)}})}function t(i,a,r){var n=a[0].trace,f=r.selectAll("path.point");n.selectedpoints?m.selectedPointStyle(f,n):m.pointStyle(f,n,i)}I.exports={style:x,styleOnSelect:t}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(e,I,B){var u=e("../../lib").extendFlat,s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../ohlc/attributes"),x=e("../box/attributes");function t(i){return{line:{color:u({},x.line.color,{dflt:i}),width:x.line.width,editType:"style"},fillcolor:x.fillcolor,editType:"style"}}I.exports={xperiod:m.xperiod,xperiod0:m.xperiod0,xperiodalignment:m.xperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),x:m.x,open:m.open,high:m.high,low:m.low,close:m.close,line:{width:u({},x.line.width,{}),editType:"style"},increasing:t(m.increasing.line.color.dflt),decreasing:t(m.decreasing.line.color.dflt),text:m.text,hovertext:m.hovertext,whiskerwidth:u({},x.whiskerwidth,{dflt:0}),hoverlabel:m.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/align_period"),x=e("../ohlc/calc").calcCommon;I.exports=function(i,a){var r=i._fullLayout,n=s.getFromId(i,a.xaxis),f=s.getFromId(i,a.yaxis),l=n.makeCalcdata(a,"x"),o=m(a,n,"x",l).vals,c=x(i,a,l,o,f,t);return c.length?(u.extendFlat(c[0].t,{num:r._numBoxes,dPos:u.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,c):[{t:{empty:!0}}]};function t(i,a,r,n){return{min:r,q1:Math.min(i,n),med:n,q3:Math.max(i,n),max:a}}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color"),m=e("../ohlc/ohlc_defaults"),x=e("../scatter/period_defaults"),t=e("./attributes");I.exports=function(r,n,f,l){function o(v,d){return u.coerce(r,n,t,v,d)}var c=m(r,n,o,l);if(!c){n.visible=!1;return}x(r,n,l,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),i(r,n,o,"increasing"),i(r,n,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),l._requestRangeslider[n.xaxis]=!0};function i(a,r,n,f){var l=n(f+".line.color");n(f+".line.width",r.line.width),n(f+".fillcolor",s.addOpacity(l,.5))}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":946,"./attributes":685}],688:[function(e,I,B){I.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e("./attributes"),layoutAttributes:e("../box/layout_attributes"),supplyLayoutDefaults:e("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:e("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("../box/plot").plot,layerName:"boxlayer",style:e("../box/style").style,hoverPoints:e("../ohlc/hover").hoverPoints,selectPoints:e("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(e,I,B){var u=e("./axis_defaults"),s=e("../../plot_api/plot_template");I.exports=function(t,i,a,r,n){var f=r("a");f||(r("da"),r("a0"));var l=r("b");l||(r("db"),r("b0")),m(t,i,a,n)};function m(x,t,i,a){var r=["aaxis","baxis"];r.forEach(function(n){var f=n.charAt(0),l=x[n]||{},o=s.newContainer(t,n),c={tickfont:"x",id:f+"axis",letter:f,font:t.font,name:n,data:x[f],calendar:t.calendar,dfltColor:a,bgColor:i.paper_bgcolor,autotypenumbersDflt:i.autotypenumbers,fullLayout:i};u(l,o,c),o._categories=o._categories||[],!x[n]&&l.type!=="-"&&(x[n]={type:l.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(e,I,B){var u=e("../../lib").isArrayOrTypedArray;I.exports=function(m){return s(m,0)};function s(m,x){if(!u(m)||x>=10)return null;for(var t=1/0,i=-1/0,a=m.length,r=0;r<a;r++){var n=m[r];if(u(n)){var f=s(n,x+1);f&&(t=Math.min(f[0],t),i=Math.max(f[1],i))}else t=Math.min(n,t),i=Math.max(n,i)}return[t,i]}},{"../../lib":503}],691:[function(e,I,B){var u=e("../../plots/font_attributes"),s=e("./axis_attributes"),m=e("../../components/color/attributes"),x=u({editType:"calc"});x.family.dflt='"Open Sans", verdana, arial, sans-serif',x.size.dflt=12,x.color.dflt=m.defaultLine,I.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:s,baxis:s,font:x,color:{valType:"color",dflt:m.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(e,I,B){var u=e("../../lib").isArrayOrTypedArray;I.exports=function(s,m,x,t){var i,a,r,n,f,l,o,c,v,d,p,y,g,A=u(x)?"a":"b",b=A==="a"?s.aaxis:s.baxis,M=b.smoothing,w=A==="a"?s.a2i:s.b2j,T=A==="a"?x:t,_=A==="a"?t:x,h=A==="a"?m.a.length:m.b.length,L=A==="a"?m.b.length:m.a.length,S=Math.floor(A==="a"?s.b2j(_):s.a2i(_)),k=A==="a"?function(G){return s.evalxy([],G,S)}:function(G){return s.evalxy([],S,G)};M&&(r=Math.max(0,Math.min(L-2,S)),n=S-r,a=A==="a"?function(G,J){return s.dxydi([],G,r,J,n)}:function(G,J){return s.dxydj([],r,G,n,J)});var P=w(T[0]),O=w(T[1]),F=P<O?1:-1,D=(O-P)*1e-8,R=F>0?Math.floor:Math.ceil,U=F>0?Math.ceil:Math.floor,N=F>0?Math.min:Math.max,X=F>0?Math.max:Math.min,j=R(P+D),ee=U(O-D);o=k(P);var q=[[o]];for(i=j;i*F<ee*F;i+=F)f=[],p=X(P,i),y=N(O,i+F),g=y-p,l=Math.max(0,Math.min(h-2,Math.floor(.5*(p+y)))),c=k(y),M&&(v=a(l,p-l),d=a(l,y-l),f.push([o[0]+v[0]/3*g,o[1]+v[1]/3*g]),f.push([c[0]-d[0]/3*g,c[1]-d[1]/3*g])),f.push(c),q.push(f),o=c;return q}},{"../../lib":503}],693:[function(e,I,B){var u=e("../../plots/font_attributes"),s=e("../../components/color/attributes"),m=e("../../plots/cartesian/layout_attributes"),x=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=e("../../plot_api/edit_types").overrideAll;I.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:u({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:m.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:u({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:x("tick label")},tickformatstops:t(m.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:s.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:s.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:u({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(e,I,B){var u=e("./attributes"),s=e("../../components/color").addOpacity,m=e("../../registry"),x=e("../../lib"),t=e("../../plots/cartesian/tick_value_defaults"),i=e("../../plots/cartesian/tick_label_defaults"),a=e("../../plots/cartesian/prefix_suffix_defaults"),r=e("../../plots/cartesian/category_order_defaults"),n=e("../../plots/cartesian/set_convert"),f=e("../../plots/cartesian/axis_autotype");I.exports=function(c,v,d){var p=d.letter,y=d.font||{},g=u[p+"axis"];function A(X,j){return x.coerce(c,v,g,X,j)}function b(X,j){return x.coerce2(c,v,g,X,j)}d.name&&(v._name=d.name,v._id=d.name),A("autotypenumbers",d.autotypenumbersDflt);var M=A("type");if(M==="-"&&(d.data&&l(v,d.data),v.type==="-"?v.type="linear":M=c.type=v.type),A("smoothing"),A("cheatertype"),A("showticklabels"),A("labelprefix",p+" = "),A("labelsuffix"),A("showtickprefix"),A("showticksuffix"),A("separatethousands"),A("tickformat"),A("exponentformat"),A("minexponent"),A("showexponent"),A("categoryorder"),A("tickmode"),A("tickvals"),A("ticktext"),A("tick0"),A("dtick"),v.tickmode==="array"&&(A("arraytick0"),A("arraydtick")),A("labelpadding"),v._hovertitle=p,M==="date"){var w=m.getComponentMethod("calendars","handleDefaults");w(c,v,"calendar",d.calendar)}n(v,d.fullLayout),v.c2p=x.identity;var T=A("color",d.dfltColor),_=T===c.color?T:y.color,h=A("title.text");h&&(x.coerceFont(A,"title.font",{family:y.family,size:x.bigFont(y.size),color:_}),A("title.offset")),A("tickangle");var L=A("autorange",!v.isValidRange(c.range));L&&A("rangemode"),A("range"),v.cleanRange(),A("fixedrange"),t(c,v,A,M),a(c,v,A,M,d),i(c,v,A,M,d),r(c,v,A,{data:d.data,dataAttr:p});var S=b("gridcolor",s(T,.3)),k=b("gridwidth"),P=A("showgrid");P||(delete v.gridcolor,delete v.gridwidth);var O=b("startlinecolor",T),F=b("startlinewidth",k),D=A("startline",v.showgrid||!!O||!!F);D||(delete v.startlinecolor,delete v.startlinewidth);var R=b("endlinecolor",T),U=b("endlinewidth",k),N=A("endline",v.showgrid||!!R||!!U);return N||(delete v.endlinecolor,delete v.endlinewidth),P?(A("minorgridcount"),A("minorgridwidth",k),A("minorgridcolor",s(S,.06)),v.minorgridcount||(delete v.minorgridwidth,delete v.minorgridcolor)):(delete v.gridcolor,delete v.gridWidth),v.showticklabels==="none"&&(delete v.tickfont,delete v.tickangle,delete v.showexponent,delete v.exponentformat,delete v.minexponent,delete v.tickformat,delete v.showticksuffix,delete v.showtickprefix),v.showticksuffix||delete v.ticksuffix,v.showtickprefix||delete v.tickprefix,A("tickmode"),v};function l(o,c){if(o.type==="-"){var v=o._id,d=v.charAt(0),p=d+"calendar",y=o[p];o.type=f(c,y,{autotypenumbers:o.autotypenumbers})}}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../lib").isArray1D,m=e("./cheater_basis"),x=e("./array_minmax"),t=e("./calc_gridlines"),i=e("./calc_labels"),a=e("./calc_clippath"),r=e("../heatmap/clean_2d_array"),n=e("./smooth_fill_2d_array"),f=e("../heatmap/convert_column_xyz"),l=e("./set_convert");I.exports=function(c,v){var d=u.getFromId(c,v.xaxis),p=u.getFromId(c,v.yaxis),y=v.aaxis,g=v.baxis,A=v.x,b=v.y,M=[];A&&s(A)&&M.push("x"),b&&s(b)&&M.push("y"),M.length&&f(v,y,g,"a","b",M);var w=v._a=v._a||v.a,T=v._b=v._b||v.b;A=v._x||v.x,b=v._y||v.y;var _={};if(v._cheater){var h=y.cheatertype==="index"?w.length:w,L=g.cheatertype==="index"?T.length:T;A=m(h,L,v.cheaterslope)}v._x=A=r(A),v._y=b=r(b),n(A,w,T),n(b,w,T),l(v),v.setScale();var S=x(A),k=x(b),P=.5*(S[1]-S[0]),O=.5*(S[1]+S[0]),F=.5*(k[1]-k[0]),D=.5*(k[1]+k[0]),R=1.3;return S=[O-P*R,O+P*R],k=[D-F*R,D+F*R],v._extremes[d._id]=u.findExtremes(d,S,{padded:!0}),v._extremes[p._id]=u.findExtremes(p,k,{padded:!0}),t(v,"a","b"),t(v,"b","a"),i(v,y),i(v,g),_.clipsegments=a(v._xctrl,v._yctrl,y,g),_.x=A,_.y=b,_.a=w,_.b=T,[_]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(e,I,B){I.exports=function(s,m,x,t){var i,a,r,n=[],f=!!x.smoothing,l=!!t.smoothing,o=s[0].length-1,c=s.length-1;for(i=0,a=[],r=[];i<=o;i++)a[i]=s[0][i],r[i]=m[0][i];for(n.push({x:a,y:r,bicubic:f}),i=0,a=[],r=[];i<=c;i++)a[i]=s[i][o],r[i]=m[i][o];for(n.push({x:a,y:r,bicubic:l}),i=o,a=[],r=[];i>=0;i--)a[o-i]=s[c][i],r[o-i]=m[c][i];for(n.push({x:a,y:r,bicubic:f}),i=c,a=[],r=[];i>=0;i--)a[c-i]=s[i][0],r[c-i]=m[i][0];return n.push({x:a,y:r,bicubic:l}),n}},{}],697:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../lib/extend").extendFlat;I.exports=function(x,t,i){var a,r,n,f,l,o,c,v,d,p,y,g,A,b,M=x["_"+t],w=x[t+"axis"],T=w._gridlines=[],_=w._minorgridlines=[],h=w._boundarylines=[],L=x["_"+i],S=x[i+"axis"];w.tickmode==="array"&&(w.tickvals=M.slice());var k=x._xctrl,P=x._yctrl,O=k[0].length,F=k.length,D=x._a.length,R=x._b.length;u.prepTicks(w),w.tickmode==="array"&&delete w.tickvals;var U=w.smoothing?3:1;function N(j){var ee,q,G,J,le,fe,se,V,Y,ne,te,K,$=[],ae=[],ie={};if(t==="b")for(q=x.b2j(j),G=Math.floor(Math.max(0,Math.min(R-2,q))),J=q-G,ie.length=R,ie.crossLength=D,ie.xy=function(oe){return x.evalxy([],oe,q)},ie.dxy=function(oe,ue){return x.dxydi([],oe,G,ue,J)},ee=0;ee<D;ee++)fe=Math.min(D-2,ee),se=ee-fe,V=x.evalxy([],ee,q),S.smoothing&&ee>0&&(Y=x.dxydi([],ee-1,G,0,J),$.push(le[0]+Y[0]/3),ae.push(le[1]+Y[1]/3),ne=x.dxydi([],ee-1,G,1,J),$.push(V[0]-ne[0]/3),ae.push(V[1]-ne[1]/3)),$.push(V[0]),ae.push(V[1]),le=V;else for(ee=x.a2i(j),fe=Math.floor(Math.max(0,Math.min(D-2,ee))),se=ee-fe,ie.length=D,ie.crossLength=R,ie.xy=function(oe){return x.evalxy([],ee,oe)},ie.dxy=function(oe,ue){return x.dxydj([],fe,oe,se,ue)},q=0;q<R;q++)G=Math.min(R-2,q),J=q-G,V=x.evalxy([],ee,q),S.smoothing&&q>0&&(te=x.dxydj([],fe,q-1,se,0),$.push(le[0]+te[0]/3),ae.push(le[1]+te[1]/3),K=x.dxydj([],fe,q-1,se,1),$.push(V[0]-K[0]/3),ae.push(V[1]-K[1]/3)),$.push(V[0]),ae.push(V[1]),le=V;return ie.axisLetter=t,ie.axis=w,ie.crossAxis=S,ie.value=j,ie.constvar=i,ie.index=v,ie.x=$,ie.y=ae,ie.smoothing=S.smoothing,ie}function X(j){var ee,q,G,J,le,fe=[],se=[],V={};if(V.length=M.length,V.crossLength=L.length,t==="b")for(G=Math.max(0,Math.min(R-2,j)),le=Math.min(1,Math.max(0,j-G)),V.xy=function(Y){return x.evalxy([],Y,j)},V.dxy=function(Y,ne){return x.dxydi([],Y,G,ne,le)},ee=0;ee<O;ee++)fe[ee]=k[j*U][ee],se[ee]=P[j*U][ee];else for(q=Math.max(0,Math.min(D-2,j)),J=Math.min(1,Math.max(0,j-q)),V.xy=function(Y){return x.evalxy([],j,Y)},V.dxy=function(Y,ne){return x.dxydj([],q,Y,J,ne)},ee=0;ee<F;ee++)fe[ee]=k[ee][j*U],se[ee]=P[ee][j*U];return V.axisLetter=t,V.axis=w,V.crossAxis=S,V.value=M[j],V.constvar=i,V.index=j,V.x=fe,V.y=se,V.smoothing=S.smoothing,V}if(w.tickmode==="array"){for(f=5e-15,l=[Math.floor((M.length-1-w.arraytick0)/w.arraydtick*(1+f)),Math.ceil(-w.arraytick0/w.arraydtick/(1+f))].sort(function(j,ee){return j-ee}),o=l[0]-1,c=l[1]+1,v=o;v<c;v++)r=w.arraytick0+w.arraydtick*v,!(r<0||r>M.length-1)&&T.push(s(X(r),{color:w.gridcolor,width:w.gridwidth}));for(v=o;v<c;v++)if(n=w.arraytick0+w.arraydtick*v,y=Math.min(n+w.arraydtick,M.length-1),!(n<0||n>M.length-1)&&!(y<0||y>M.length-1))for(g=M[n],A=M[y],a=0;a<w.minorgridcount;a++)b=y-n,!(b<=0)&&(p=g+(A-g)*(a+1)/(w.minorgridcount+1)*(w.arraydtick/b),!(p<M[0]||p>M[M.length-1])&&_.push(s(N(p),{color:w.minorgridcolor,width:w.minorgridwidth})));w.startline&&h.push(s(X(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&h.push(s(X(M.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(f=5e-15,l=[Math.floor((M[M.length-1]-w.tick0)/w.dtick*(1+f)),Math.ceil((M[0]-w.tick0)/w.dtick/(1+f))].sort(function(j,ee){return j-ee}),o=l[0],c=l[1],v=o;v<=c;v++)d=w.tick0+w.dtick*v,T.push(s(N(d),{color:w.gridcolor,width:w.gridwidth}));for(v=o-1;v<c+1;v++)for(d=w.tick0+w.dtick*v,a=0;a<w.minorgridcount;a++)p=d+w.dtick*(a+1)/(w.minorgridcount+1),!(p<M[0]||p>M[M.length-1])&&_.push(s(N(p),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&h.push(s(N(M[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&h.push(s(N(M[M.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../lib/extend").extendFlat;I.exports=function(x,t){var i,a,r,n,f,l=t._labels=[],o=t._gridlines;for(i=0;i<o.length;i++)f=o[i],["start","both"].indexOf(t.showticklabels)!==-1&&(a=u.tickText(t,f.value),s(a,{prefix:r,suffix:n,endAnchor:!0,xy:f.xy(0),dxy:f.dxy(0,0),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:i===0,isLast:i===o.length-1}),l.push(a)),["end","both"].indexOf(t.showticklabels)!==-1&&(a=u.tickText(t,f.value),s(a,{endAnchor:!1,xy:f.xy(f.crossLength-1),dxy:f.dxy(f.crossLength-2,1),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:i===0,isLast:i===o.length-1}),l.push(a))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(e,I,B){var u=.5;I.exports=function(m,x,t,i){var a=m[0]-x[0],r=m[1]-x[1],n=t[0]-x[0],f=t[1]-x[1],l=Math.pow(a*a+r*r,u/2),o=Math.pow(n*n+f*f,u/2),c=(o*o*a-l*l*n)*i,v=(o*o*r-l*l*f)*i,d=o*(l+o)*3,p=l*(l+o)*3;return[[x[0]+(d&&c/d),x[1]+(d&&v/d)],[x[0]-(p&&c/p),x[1]-(p&&v/p)]]}},{}],700:[function(e,I,B){var u=e("../../lib").isArrayOrTypedArray;I.exports=function(s,m,x){var t,i,a,r,n,f,l=[],o=u(s)?s.length:s,c=u(m)?m.length:m,v=u(s)?s:null,d=u(m)?m:null;v&&(a=(v.length-1)/(v[v.length-1]-v[0])/(o-1)),d&&(r=(d.length-1)/(d[d.length-1]-d[0])/(c-1));var p,y=1/0,g=-1/0;for(i=0;i<c;i++)for(l[i]=[],f=d?(d[i]-d[0])*r:i/(c-1),t=0;t<o;t++)n=v?(v[t]-v[0])*a:t/(o-1),p=n-f*x,y=Math.min(p,y),g=Math.max(p,g),l[i][t]=p;var A=1/(g-y),b=-y*A;for(i=0;i<c;i++)for(t=0;t<o;t++)l[i][t]=A*l[i][t]+b;return l}},{"../../lib":503}],701:[function(e,I,B){var u=e("./catmull_rom"),s=e("../../lib").ensureArray;function m(x,t,i){var a=-.5*i[0]+1.5*t[0],r=-.5*i[1]+1.5*t[1];return[(2*a+x[0])/3,(2*r+x[1])/3]}I.exports=function(t,i,a,r,n,f){var l,o,c,v,d,p,y,g,A,b,M=a[0].length,w=a.length,T=n?3*M-2:M,_=f?3*w-2:w;for(t=s(t,_),i=s(i,_),c=0;c<_;c++)t[c]=s(t[c],T),i[c]=s(i[c],T);for(o=0,v=0;o<w;o++,v+=f?3:1)for(d=t[v],p=i[v],y=a[o],g=r[o],l=0,c=0;l<M;l++,c+=n?3:1)d[c]=y[l],p[c]=g[l];if(n)for(o=0,v=0;o<w;o++,v+=f?3:1){for(l=1,c=3;l<M-1;l++,c+=3)A=u([a[o][l-1],r[o][l-1]],[a[o][l],r[o][l]],[a[o][l+1],r[o][l+1]],n),t[v][c-1]=A[0][0],i[v][c-1]=A[0][1],t[v][c+1]=A[1][0],i[v][c+1]=A[1][1];b=m([t[v][0],i[v][0]],[t[v][2],i[v][2]],[t[v][3],i[v][3]]),t[v][1]=b[0],i[v][1]=b[1],b=m([t[v][T-1],i[v][T-1]],[t[v][T-3],i[v][T-3]],[t[v][T-4],i[v][T-4]]),t[v][T-2]=b[0],i[v][T-2]=b[1]}if(f)for(c=0;c<T;c++){for(v=3;v<_-3;v+=3)A=u([t[v-3][c],i[v-3][c]],[t[v][c],i[v][c]],[t[v+3][c],i[v+3][c]],f),t[v-1][c]=A[0][0],i[v-1][c]=A[0][1],t[v+1][c]=A[1][0],i[v+1][c]=A[1][1];b=m([t[0][c],i[0][c]],[t[2][c],i[2][c]],[t[3][c],i[3][c]]),t[1][c]=b[0],i[1][c]=b[1],b=m([t[_-1][c],i[_-1][c]],[t[_-3][c],i[_-3][c]],[t[_-4][c],i[_-4][c]]),t[_-2][c]=b[0],i[_-2][c]=b[1]}if(n&&f)for(v=1;v<_;v+=(v+1)%3==0?2:1){for(c=3;c<T-3;c+=3)A=u([t[v][c-3],i[v][c-3]],[t[v][c],i[v][c]],[t[v][c+3],i[v][c+3]],n),t[v][c-1]=.5*(t[v][c-1]+A[0][0]),i[v][c-1]=.5*(i[v][c-1]+A[0][1]),t[v][c+1]=.5*(t[v][c+1]+A[1][0]),i[v][c+1]=.5*(i[v][c+1]+A[1][1]);b=m([t[v][0],i[v][0]],[t[v][2],i[v][2]],[t[v][3],i[v][3]]),t[v][1]=.5*(t[v][1]+b[0]),i[v][1]=.5*(i[v][1]+b[1]),b=m([t[v][T-1],i[v][T-1]],[t[v][T-3],i[v][T-3]],[t[v][T-4],i[v][T-4]]),t[v][T-2]=.5*(t[v][T-2]+b[0]),i[v][T-2]=.5*(i[v][T-2]+b[1])}return[t,i]}},{"../../lib":503,"./catmull_rom":699}],702:[function(e,I,B){I.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(e,I,B){I.exports=function(u,s,m){return s&&m?function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c,v;t*=3,i*=3;var d=a*a,p=1-a,y=p*p,g=p*a*2,A=-3*y,b=3*(y-g),M=3*(g-d),w=3*d,T=r*r,_=T*r,h=1-r,L=h*h,S=L*h;for(v=0;v<u.length;v++)c=u[v],n=A*c[i][t]+b*c[i][t+1]+M*c[i][t+2]+w*c[i][t+3],f=A*c[i+1][t]+b*c[i+1][t+1]+M*c[i+1][t+2]+w*c[i+1][t+3],l=A*c[i+2][t]+b*c[i+2][t+1]+M*c[i+2][t+2]+w*c[i+2][t+3],o=A*c[i+3][t]+b*c[i+3][t+1]+M*c[i+3][t+2]+w*c[i+3][t+3],x[v]=S*n+3*(L*r*f+h*T*l)+_*o;return x}:s?function(x,t,i,a,r){x||(x=[]);var n,f,l,o;t*=3;var c=a*a,v=1-a,d=v*v,p=v*a*2,y=-3*d,g=3*(d-p),A=3*(p-c),b=3*c,M=1-r;for(l=0;l<u.length;l++)o=u[l],n=y*o[i][t]+g*o[i][t+1]+A*o[i][t+2]+b*o[i][t+3],f=y*o[i+1][t]+g*o[i+1][t+1]+A*o[i+1][t+2]+b*o[i+1][t+3],x[l]=M*n+r*f;return x}:m?function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c,v;i*=3;var d=r*r,p=d*r,y=1-r,g=y*y,A=g*y;for(c=0;c<u.length;c++)v=u[c],n=v[i][t+1]-v[i][t],f=v[i+1][t+1]-v[i+1][t],l=v[i+2][t+1]-v[i+2][t],o=v[i+3][t+1]-v[i+3][t],x[c]=A*n+3*(g*r*f+y*d*l)+p*o;return x}:function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c=1-r;for(l=0;l<u.length;l++)o=u[l],n=o[i][t+1]-o[i][t],f=o[i+1][t+1]-o[i+1][t],x[l]=c*n+r*f;return x}}},{}],704:[function(e,I,B){I.exports=function(u,s,m){return s&&m?function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c,v;t*=3,i*=3;var d=a*a,p=d*a,y=1-a,g=y*y,A=g*y,b=r*r,M=1-r,w=M*M,T=M*r*2,_=-3*w,h=3*(w-T),L=3*(T-b),S=3*b;for(v=0;v<u.length;v++)c=u[v],n=_*c[i][t]+h*c[i+1][t]+L*c[i+2][t]+S*c[i+3][t],f=_*c[i][t+1]+h*c[i+1][t+1]+L*c[i+2][t+1]+S*c[i+3][t+1],l=_*c[i][t+2]+h*c[i+1][t+2]+L*c[i+2][t+2]+S*c[i+3][t+2],o=_*c[i][t+3]+h*c[i+1][t+3]+L*c[i+2][t+3]+S*c[i+3][t+3],x[v]=A*n+3*(g*a*f+y*d*l)+p*o;return x}:s?function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c,v;t*=3;var d=r*r,p=d*r,y=1-r,g=y*y,A=g*y;for(c=0;c<u.length;c++)v=u[c],n=v[i+1][t]-v[i][t],f=v[i+1][t+1]-v[i][t+1],l=v[i+1][t+2]-v[i][t+2],o=v[i+1][t+3]-v[i][t+3],x[c]=A*n+3*(g*r*f+y*d*l)+p*o;return x}:m?function(x,t,i,a,r){x||(x=[]);var n,f,l,o;i*=3;var c=1-a,v=r*r,d=1-r,p=d*d,y=d*r*2,g=-3*p,A=3*(p-y),b=3*(y-v),M=3*v;for(l=0;l<u.length;l++)o=u[l],n=g*o[i][t]+A*o[i+1][t]+b*o[i+2][t]+M*o[i+3][t],f=g*o[i][t+1]+A*o[i+1][t+1]+b*o[i+2][t+1]+M*o[i+3][t+1],x[l]=c*n+a*f;return x}:function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c=1-a;for(l=0;l<u.length;l++)o=u[l],n=o[i+1][t]-o[i][t],f=o[i+1][t+1]-o[i][t+1],x[l]=c*n+a*f;return x}}},{}],705:[function(e,I,B){I.exports=function(u,s,m,x,t){var i=s-2,a=m-2;return x&&t?function(r,n,f){r||(r=[]);var l,o,c,v,d,p,y=Math.max(0,Math.min(Math.floor(n),i)),g=Math.max(0,Math.min(Math.floor(f),a)),A=Math.max(0,Math.min(1,n-y)),b=Math.max(0,Math.min(1,f-g));y*=3,g*=3;var M=A*A,w=M*A,T=1-A,_=T*T,h=_*T,L=b*b,S=L*b,k=1-b,P=k*k,O=P*k;for(p=0;p<u.length;p++)d=u[p],l=h*d[g][y]+3*(_*A*d[g][y+1]+T*M*d[g][y+2])+w*d[g][y+3],o=h*d[g+1][y]+3*(_*A*d[g+1][y+1]+T*M*d[g+1][y+2])+w*d[g+1][y+3],c=h*d[g+2][y]+3*(_*A*d[g+2][y+1]+T*M*d[g+2][y+2])+w*d[g+2][y+3],v=h*d[g+3][y]+3*(_*A*d[g+3][y+1]+T*M*d[g+3][y+2])+w*d[g+3][y+3],r[p]=O*l+3*(P*b*o+k*L*c)+S*v;return r}:x?function(r,n,f){r||(r=[]);var l=Math.max(0,Math.min(Math.floor(n),i)),o=Math.max(0,Math.min(Math.floor(f),a)),c=Math.max(0,Math.min(1,n-l)),v=Math.max(0,Math.min(1,f-o)),d,p,y,g,A,b;l*=3;var M=c*c,w=M*c,T=1-c,_=T*T,h=_*T,L=1-v;for(A=0;A<u.length;A++)b=u[A],d=L*b[o][l]+v*b[o+1][l],p=L*b[o][l+1]+v*b[o+1][l+1],y=L*b[o][l+2]+v*b[o+1][l+1],g=L*b[o][l+3]+v*b[o+1][l+1],r[A]=h*d+3*(_*c*p+T*M*y)+w*g;return r}:t?function(r,n,f){r||(r=[]);var l=Math.max(0,Math.min(Math.floor(n),i)),o=Math.max(0,Math.min(Math.floor(f),a)),c=Math.max(0,Math.min(1,n-l)),v=Math.max(0,Math.min(1,f-o)),d,p,y,g,A,b;o*=3;var M=v*v,w=M*v,T=1-v,_=T*T,h=_*T,L=1-c;for(A=0;A<u.length;A++)b=u[A],d=L*b[o][l]+c*b[o][l+1],p=L*b[o+1][l]+c*b[o+1][l+1],y=L*b[o+2][l]+c*b[o+2][l+1],g=L*b[o+3][l]+c*b[o+3][l+1],r[A]=h*d+3*(_*v*p+T*M*y)+w*g;return r}:function(r,n,f){r||(r=[]);var l=Math.max(0,Math.min(Math.floor(n),i)),o=Math.max(0,Math.min(Math.floor(f),a)),c=Math.max(0,Math.min(1,n-l)),v=Math.max(0,Math.min(1,f-o)),d,p,y,g,A=1-v,b=1-c;for(y=0;y<u.length;y++)g=u[y],d=b*g[o][l]+c*g[o][l+1],p=b*g[o+1][l]+c*g[o+1][l+1],r[y]=A*d+v*p;return r}}},{}],706:[function(e,I,B){var u=e("../../lib"),s=e("./xy_defaults"),m=e("./ab_defaults"),x=e("./attributes"),t=e("../../components/color/attributes");I.exports=function(a,r,n,f){function l(v,d){return u.coerce(a,r,x,v,d)}r._clipPathId="clip"+r.uid+"carpet";var o=l("color",t.defaultLine);if(u.coerceFont(l,"font"),l("carpet"),m(a,r,f,l,o),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var c=s(a,r,l);c||(r.visible=!1),r._cheater&&l("cheaterslope")}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),plot:e("./plot"),calc:e("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(e,I,B){I.exports=function(u,s){for(var m=u._fullData.length,x,t=0;t<m;t++){var i=u._fullData[t];if(i.index!==s.index&&i.type==="carpet"&&(x||(x=i),i.carpet===s.carpet))return i}return x}},{}],709:[function(e,I,B){I.exports=function(s,m,x){if(s.length===0)return"";var t,i=[],a=x?3:1;for(t=0;t<s.length;t+=a)i.push(s[t]+","+m[t]),x&&t<s.length-a&&(i.push("C"),i.push([s[t+1]+","+m[t+1],s[t+2]+","+m[t+2]+" "].join(" ")));return i.join(x?"":"L")}},{}],710:[function(e,I,B){var u=e("../../lib").isArrayOrTypedArray;I.exports=function(m,x,t){var i;for(u(m)?m.length>x.length&&(m=m.slice(0,x.length)):m=[],i=0;i<x.length;i++)m[i]=t(x[i]);return m}},{"../../lib":503}],711:[function(e,I,B){I.exports=function(s,m,x,t,i,a){var r=i[0]*s.dpdx(m),n=i[1]*s.dpdy(x),f=1,l=1;if(a){var o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),v=(i[0]*a[0]+i[1]*a[1])/o/c;l=Math.max(0,v)}var d=Math.atan2(n,r)*180/Math.PI;return d<-90?(d+=180,f=-f):d>90&&(d-=180,f=-f),{angle:d,flip:f,p:s.c2p(t,m,x),offsetMultplier:l}}},{}],712:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("./map_1d_array"),x=e("./makepath"),t=e("./orient_text"),i=e("../../lib/svg_text_utils"),a=e("../../lib"),r=a.strRotate,n=a.strTranslate,f=e("../../constants/alignment");I.exports=function(A,b,M,w){var T=b.xaxis,_=b.yaxis,h=A._fullLayout,L=h._clips;a.makeTraceGroups(w,M,"trace").each(function(S){var k=u.select(this),P=S[0],O=P.trace,F=O.aaxis,D=O.baxis,R=a.ensureSingle(k,"g","minorlayer"),U=a.ensureSingle(k,"g","majorlayer"),N=a.ensureSingle(k,"g","boundarylayer"),X=a.ensureSingle(k,"g","labellayer");k.style("opacity",O.opacity),o(T,_,U,F,"a",F._gridlines),o(T,_,U,D,"b",D._gridlines),o(T,_,R,F,"a",F._minorgridlines),o(T,_,R,D,"b",D._minorgridlines),o(T,_,N,F,"a-boundary",F._boundarylines),o(T,_,N,D,"b-boundary",D._boundarylines);var j=c(A,T,_,O,P,X,F._labels,"a-label"),ee=c(A,T,_,O,P,X,D._labels,"b-label");v(A,X,O,P,T,_,j,ee),l(O,P,L,T,_)})};function l(g,A,b,M,w){var T,_,h,L,S=b.select("#"+g._clipPathId);S.size()||(S=b.append("clipPath").classed("carpetclip",!0));var k=a.ensureSingle(S,"path","carpetboundary"),P=A.clipsegments,O=[];for(L=0;L<P.length;L++)T=P[L],_=m([],T.x,M.c2p),h=m([],T.y,w.c2p),O.push(x(_,h,T.bicubic));var F="M"+O.join("L")+"Z";S.attr("id",g._clipPathId),k.attr("d",F)}function o(g,A,b,M,w,T){var _="const-"+w+"-lines",h=b.selectAll("."+_).data(T);h.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),h.each(function(L){var S=L,k=S.x,P=S.y,O=m([],k,g.c2p),F=m([],P,A.c2p),D="M"+x(O,F,S.smoothing),R=u.select(this);R.attr("d",D).style("stroke-width",S.width).style("stroke",S.color).style("fill","none")}),h.exit().remove()}function c(g,A,b,M,w,T,_,h){var L=T.selectAll("text."+h).data(_);L.enter().append("text").classed(h,!0);var S=0,k={};return L.each(function(P,O){var F;if(P.axis.tickangle==="auto")F=t(M,A,b,P.xy,P.dxy);else{var D=(P.axis.tickangle+180)*Math.PI/180;F=t(M,A,b,P.xy,[Math.cos(D),Math.sin(D)])}O||(k={angle:F.angle,flip:F.flip});var R=(P.endAnchor?-1:1)*F.flip,U=u.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(s.font,P.font).text(P.text).call(i.convertToTspans,g),N=s.bBox(this);U.attr("transform",n(F.p[0],F.p[1])+r(F.angle)+n(P.axis.labelpadding*R,N.height*.3)),S=Math.max(S,N.width+P.axis.labelpadding)}),L.exit().remove(),k.maxExtent=S,k}function v(g,A,b,M,w,T,_,h){var L,S,k,P,O=a.aggNums(Math.min,null,b.a),F=a.aggNums(Math.max,null,b.a),D=a.aggNums(Math.min,null,b.b),R=a.aggNums(Math.max,null,b.b);L=.5*(O+F),S=D,k=b.ab2xy(L,S,!0),P=b.dxyda_rough(L,S),_.angle===void 0&&a.extendFlat(_,t(b,w,T,k,b.dxydb_rough(L,S))),y(g,A,b,M,k,P,b.aaxis,w,T,_,"a-title"),L=O,S=.5*(D+R),k=b.ab2xy(L,S,!0),P=b.dxydb_rough(L,S),h.angle===void 0&&a.extendFlat(h,t(b,w,T,k,b.dxyda_rough(L,S))),y(g,A,b,M,k,P,b.baxis,w,T,h,"b-title")}var d=f.LINE_SPACING,p=(1-f.MID_SHIFT)/d+1;function y(g,A,b,M,w,T,_,h,L,S,k){var P=[];_.title.text&&P.push(_.title.text);var O=A.selectAll("text."+k).data(P),F=S.maxExtent;O.enter().append("text").classed(k,!0),O.each(function(){var D=t(b,h,L,w,T);["start","both"].indexOf(_.showticklabels)===-1&&(F=0);var R=_.title.font.size;F+=R+_.title.offset;var U=S.angle+(S.flip<0?180:0),N=(U-D.angle+450)%360,X=N>90&&N<270,j=u.select(this);j.text(_.title.text).call(i.convertToTspans,g),X&&(F=(-i.lineCount(j)+p)*d*R-F),j.attr("transform",n(D.p[0],D.p[1])+r(D.angle)+n(0,F)).attr("text-anchor","middle").call(s.font,_.title.font)}),O.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(e,I,B){var u=e("./constants"),s=e("../../lib/search").findBin,m=e("./compute_control_points"),x=e("./create_spline_evaluator"),t=e("./create_i_derivative_evaluator"),i=e("./create_j_derivative_evaluator");I.exports=function(r){var n=r._a,f=r._b,l=n.length,o=f.length,c=r.aaxis,v=r.baxis,d=n[0],p=n[l-1],y=f[0],g=f[o-1],A=n[n.length-1]-n[0],b=f[f.length-1]-f[0],M=A*u.RELATIVE_CULL_TOLERANCE,w=b*u.RELATIVE_CULL_TOLERANCE;d-=M,p+=M,y-=w,g+=w,r.isVisible=function(T,_){return T>d&&T<p&&_>y&&_<g},r.isOccluded=function(T,_){return T<d||T>p||_<y||_>g},r.setScale=function(){var T=r._x,_=r._y,h=m(r._xctrl,r._yctrl,T,_,c.smoothing,v.smoothing);r._xctrl=h[0],r._yctrl=h[1],r.evalxy=x([r._xctrl,r._yctrl],l,o,c.smoothing,v.smoothing),r.dxydi=t([r._xctrl,r._yctrl],c.smoothing,v.smoothing),r.dxydj=i([r._xctrl,r._yctrl],c.smoothing,v.smoothing)},r.i2a=function(T){var _=Math.max(0,Math.floor(T[0]),l-2),h=T[0]-_;return(1-h)*n[_]+h*n[_+1]},r.j2b=function(T){var _=Math.max(0,Math.floor(T[1]),l-2),h=T[1]-_;return(1-h)*f[_]+h*f[_+1]},r.ij2ab=function(T){return[r.i2a(T[0]),r.j2b(T[1])]},r.a2i=function(T){var _=Math.max(0,Math.min(s(T,n),l-2)),h=n[_],L=n[_+1];return Math.max(0,Math.min(l-1,_+(T-h)/(L-h)))},r.b2j=function(T){var _=Math.max(0,Math.min(s(T,f),o-2)),h=f[_],L=f[_+1];return Math.max(0,Math.min(o-1,_+(T-h)/(L-h)))},r.ab2ij=function(T){return[r.a2i(T[0]),r.b2j(T[1])]},r.i2c=function(T,_){return r.evalxy([],T,_)},r.ab2xy=function(T,_,h){if(!h&&(T<n[0]||T>n[l-1]|_<f[0]||_>f[o-1]))return[!1,!1];var L=r.a2i(T),S=r.b2j(_),k=r.evalxy([],L,S);if(h){var P=0,O=0,F=[],D,R,U,N;T<n[0]?(D=0,R=0,P=(T-n[0])/(n[1]-n[0])):T>n[l-1]?(D=l-2,R=1,P=(T-n[l-1])/(n[l-1]-n[l-2])):(D=Math.max(0,Math.min(l-2,Math.floor(L))),R=L-D),_<f[0]?(U=0,N=0,O=(_-f[0])/(f[1]-f[0])):_>f[o-1]?(U=o-2,N=1,O=(_-f[o-1])/(f[o-1]-f[o-2])):(U=Math.max(0,Math.min(o-2,Math.floor(S))),N=S-U),P&&(r.dxydi(F,D,U,R,N),k[0]+=F[0]*P,k[1]+=F[1]*P),O&&(r.dxydj(F,D,U,R,N),k[0]+=F[0]*O,k[1]+=F[1]*O)}return k},r.c2p=function(T,_,h){return[_.c2p(T[0]),h.c2p(T[1])]},r.p2x=function(T,_,h){return[_.p2c(T[0]),h.p2c(T[1])]},r.dadi=function(T){var _=Math.max(0,Math.min(n.length-2,T));return n[_+1]-n[_]},r.dbdj=function(T){var _=Math.max(0,Math.min(f.length-2,T));return f[_+1]-f[_]},r.dxyda=function(T,_,h,L){var S=r.dxydi(null,T,_,h,L),k=r.dadi(T,h);return[S[0]/k,S[1]/k]},r.dxydb=function(T,_,h,L){var S=r.dxydj(null,T,_,h,L),k=r.dbdj(_,L);return[S[0]/k,S[1]/k]},r.dxyda_rough=function(T,_,h){var L=A*(h||.1),S=r.ab2xy(T+L,_,!0),k=r.ab2xy(T-L,_,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},r.dxydb_rough=function(T,_,h){var L=b*(h||.1),S=r.ab2xy(T,_+L,!0),k=r.ab2xy(T,_-L,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},r.dpdx=function(T){return T._m},r.dpdy=function(T){return T._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x,t){var i,a,r,n=[],f=[],l=m[0].length,o=m.length;function c(q,G){var J=0,le,fe=0;return q>0&&(le=m[G][q-1])!==void 0&&(fe++,J+=le),q<l-1&&(le=m[G][q+1])!==void 0&&(fe++,J+=le),G>0&&(le=m[G-1][q])!==void 0&&(fe++,J+=le),G<o-1&&(le=m[G+1][q])!==void 0&&(fe++,J+=le),J/Math.max(1,fe)}var v=0;for(i=0;i<l;i++)for(a=0;a<o;a++)m[a][i]===void 0&&(n.push(i),f.push(a),m[a][i]=c(i,a)),v=Math.max(v,Math.abs(m[a][i]));if(!n.length)return m;var d,p,y,g,A,b,M,w,T,_,h,L=1e-5,S=0,k=100,P=0,O=n.length;do{for(S=0,r=0;r<O;r++){i=n[r],a=f[r];var F=0,D=0,R,U,N,X,j,ee;i===0?(j=Math.min(l-1,2),N=x[j],X=x[1],R=m[a][j],U=m[a][1],D+=U+(U-R)*(x[0]-X)/(X-N),F++):i===l-1&&(j=Math.max(0,l-3),N=x[j],X=x[l-2],R=m[a][j],U=m[a][l-2],D+=U+(U-R)*(x[l-1]-X)/(X-N),F++),(i===0||i===l-1)&&a>0&&a<o-1&&(d=t[a+1]-t[a],p=t[a]-t[a-1],D+=(p*m[a+1][i]+d*m[a-1][i])/(p+d),F++),a===0?(ee=Math.min(o-1,2),N=t[ee],X=t[1],R=m[ee][i],U=m[1][i],D+=U+(U-R)*(t[0]-X)/(X-N),F++):a===o-1&&(ee=Math.max(0,o-3),N=t[ee],X=t[o-2],R=m[ee][i],U=m[o-2][i],D+=U+(U-R)*(t[o-1]-X)/(X-N),F++),(a===0||a===o-1)&&i>0&&i<l-1&&(d=x[i+1]-x[i],p=x[i]-x[i-1],D+=(p*m[a][i+1]+d*m[a][i-1])/(p+d),F++),F?D/=F:(y=x[i+1]-x[i],g=x[i]-x[i-1],A=t[a+1]-t[a],b=t[a]-t[a-1],M=y*g*(y+g),w=A*b*(A+b),D=(M*(b*m[a+1][i]+A*m[a-1][i])+w*(g*m[a][i+1]+y*m[a][i-1]))/(w*(g+y)+M*(b+A))),T=D-m[a][i],_=T/v,S+=_*_,h=F?0:.85,m[a][i]+=T*(1+h)}S=Math.sqrt(S)}while(P++<k&&S>L);return u.log("Smoother converged to",S,"after",P,"iterations"),m}},{"../../lib":503}],715:[function(e,I,B){var u=e("../../lib").isArray1D;I.exports=function(m,x,t){var i=t("x"),a=i&&i.length,r=t("y"),n=r&&r.length;if(!a&&!n)return!1;if(x._cheater=!i,(!a||u(i))&&(!n||u(r))){var f=a?i.length:1/0;n&&(f=Math.min(f,r.length)),x.a&&x.a.length&&(f=Math.min(f,x.a.length)),x.b&&x.b.length&&(f=Math.min(f,x.b.length)),x._length=f}else x._length=null;return!0}},{"../../lib":503}],716:[function(e,I,B){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../scattergeo/attributes"),m=e("../../components/colorscale/attributes"),x=e("../../plots/attributes"),t=e("../../components/color/attributes").defaultLine,i=e("../../lib/extend").extendFlat,a=s.marker.line;I.exports=i({locations:{valType:"data_array",editType:"calc"},locationmode:s.locationmode,z:{valType:"data_array",editType:"calc"},geojson:i({},s.geojson,{}),featureidkey:s.featureidkey,text:i({},s.text,{}),hovertext:i({},s.hovertext,{}),marker:{line:{color:i({},a.color,{dflt:t}),width:i({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:s.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:s.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:i({},x.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:u(),showlegend:i({},x.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":968}],717:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../constants/numerical").BADNUM,m=e("../../components/colorscale/calc"),x=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection");function i(a){return a&&typeof a=="string"}I.exports=function(r,n){var f=n._length,l=new Array(f),o;n.geojson?o=function(y){return i(y)||u(y)}:o=i;for(var c=0;c<f;c++){var v=l[c]={},d=n.locations[c],p=n.z[c];o(d)&&u(p)?(v.loc=d,v.z=p):(v.loc=null,v.z=s),v.index=c}return x(l,n),m(r,n,{vals:n.z,containerStr:"",cLetter:"z"}),t(l,n),l}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"fast-isnumeric":190}],718:[function(e,I,B){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");I.exports=function(t,i,a,r){function n(p,y){return u.coerce(t,i,m,p,y)}var f=n("locations"),l=n("z");if(!(f&&f.length&&u.isArrayOrTypedArray(l)&&l.length)){i.visible=!1;return}i._length=Math.min(f.length,l.length);var o=n("geojson"),c;(typeof o=="string"&&o!==""||u.isPlainObject(o))&&(c="geojson-id");var v=n("locationmode",c);v==="geojson-id"&&n("featureidkey"),n("text"),n("hovertext"),n("hovertemplate");var d=n("marker.line.width");d&&n("marker.line.color"),n("marker.opacity"),s(t,i,r,n,{prefix:"",cLetter:"z"}),u.coerceSelectionMarkerOpacity(i,n)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(e,I,B){I.exports=function(s,m,x,t,i){s.location=m.location,s.z=m.z;var a=t[i];return a.fIn&&a.fIn.properties&&(s.properties=a.fIn.properties),s.ct=a.ct,s}},{}],720:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("./attributes"),m=e("../../lib").fillText;I.exports=function(i,a,r){var n=i.cd,f=n[0].trace,l=i.subplot,o,c,v,d,p=[a,r],y=[a+360,r];for(c=0;c<n.length;c++)if(o=n[c],d=!1,o._polygons){for(v=0;v<o._polygons.length;v++)o._polygons[v].contains(p)&&(d=!d),o._polygons[v].contains(y)&&(d=!d);if(d)break}if(!(!d||!o))return i.x0=i.x1=i.xa.c2p(o.ct),i.y0=i.y1=i.ya.c2p(o.ct),i.index=o.index,i.location=o.loc,i.z=o.z,i.zLabel=u.tickText(l.mockAxis,l.mockAxis.c2l(o.z),"hover").text,i.hovertemplate=o.hovertemplate,x(i,f,o),[i]};function x(t,i,a){if(!i.hovertemplate){var r=a.hi||i.hoverinfo,n=String(a.loc),f=r==="all"?s.hoverinfo.flags:r.split("+"),l=f.indexOf("name")!==-1,o=f.indexOf("location")!==-1,c=f.indexOf("z")!==-1,v=f.indexOf("text")!==-1,d=!l&&o,p=[];d?t.nameOverride=n:(l&&(t.nameOverride=i.name),o&&p.push(n)),c&&p.push(t.zLabel),v&&m(a,i,p),t.extraText=p.join("<br>")}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"choropleth",basePlotModule:e("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../lib/geo_location_utils"),x=e("../../lib/topojson_utils").getTopojsonFeatures,t=e("../../plots/cartesian/autorange").findExtremes,i=e("./style").style;function a(n,f,l){var o=f.layers.backplot.select(".choroplethlayer");s.makeTraceGroups(o,l,"trace choropleth").each(function(c){var v=u.select(this),d=v.selectAll("path.choroplethlocation").data(s.identity);d.enter().append("path").classed("choroplethlocation",!0),d.exit().remove(),i(n,c)})}function r(n,f){for(var l=n[0].trace,o=f[l.geo],c=o._subplot,v=l.locationmode,d=l._length,p=v==="geojson-id"?m.extractTraceFeature(n):x(l,c.topojson),y=[],g=[],A=0;A<d;A++){var b=n[A],M=v==="geojson-id"?b.fOut:m.locationToFeature(v,b.loc,p);if(M){b.geojson=M,b.ct=M.properties.ct,b._polygons=m.feature2polygons(M);var w=m.computeBbox(M);y.push(w[0],w[2]),g.push(w[1],w[3])}else b.geojson=null}if(o.fitbounds==="geojson"&&v==="geojson-id"){var T=m.computeBbox(m.getTraceGeojson(l));y=[T[0],T[2]],g=[T[1],T[3]]}var _={padded:!0};l._extremes.lon=t(o.lonaxis._ax,y,_),l._extremes.lat=t(o.lataxis._ax,g,_)}I.exports={calcGeoJSON:r,plot:a}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(e,I,B){I.exports=function(s,m){var x=s.cd,t=s.xaxis,i=s.yaxis,a=[],r,n,f,l,o;if(m===!1)for(r=0;r<x.length;r++)x[r].selected=0;else for(r=0;r<x.length;r++)n=x[r],f=n.ct,!!f&&(l=t.c2p(f),o=i.c2p(f),m.contains([l,o],null,r,s)?(a.push({pointNumber:r,lon:f[0],lat:f[1]}),n.selected=1):n.selected=0);return a}},{}],724:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../components/drawing"),x=e("../../components/colorscale");function t(r,n){n&&i(r,n)}function i(r,n){var f=n[0].trace,l=n[0].node3,o=l.selectAll(".choroplethlocation"),c=f.marker||{},v=c.line||{},d=x.makeColorScaleFuncFromTrace(f);o.each(function(p){u.select(this).attr("fill",d(p.z)).call(s.stroke,p.mlc||v.color).call(m.dashLine,"",p.mlw||v.width||0).style("opacity",c.opacity)}),m.selectedPointStyle(o,f,r)}function a(r,n){var f=n[0].node3,l=n[0].trace;l.selectedpoints?m.selectedPointStyle(f.selectAll(".choroplethlocation"),l,r):i(r,n)}I.exports={style:t,styleOnSelect:a}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(e,I,B){var u=e("../choropleth/attributes"),s=e("../../components/colorscale/attributes"),m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;I.exports=t({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:t({},u.featureidkey,{}),below:{valType:"string",editType:"plot"},text:u.text,hovertext:u.hovertext,marker:{line:{color:t({},u.marker.line.color,{editType:"plot"}),width:t({},u.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:t({},u.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:t({},u.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:t({},u.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:u.hoverinfo,hovertemplate:m({},{keys:["properties"]}),showlegend:t({},x.showlegend,{dflt:!1})},s("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../components/colorscale"),x=e("../../components/drawing"),t=e("../../lib/geojson_utils").makeBlank,i=e("../../lib/geo_location_utils");function a(n){var f=n[0].trace,l=f.visible===!0&&f._length!==0,o={layout:{visibility:"none"},paint:{}},c={layout:{visibility:"none"},paint:{}},v=f._opts={fill:o,line:c,geojson:t()};if(!l)return v;var d=i.extractTraceFeature(n);if(!d)return v;var p=m.makeColorScaleFuncFromTrace(f),y=f.marker,g=y.line||{},A;s.isArrayOrTypedArray(y.opacity)&&(A=function(S){var k=S.mo;return u(k)?+s.constrain(k,0,1):0});var b;s.isArrayOrTypedArray(g.color)&&(b=function(S){return S.mlc});var M;s.isArrayOrTypedArray(g.width)&&(M=function(S){return S.mlw});for(var w=0;w<n.length;w++){var T=n[w],_=T.fOut;if(_){var h=_.properties;h.fc=p(T.z),A&&(h.mo=A(T)),b&&(h.mlc=b(T)),M&&(h.mlw=M(T)),T.ct=h.ct,T._polygons=i.feature2polygons(_)}}var L=A?{type:"identity",property:"mo"}:y.opacity;return s.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),s.extendFlat(c.paint,{"line-color":b?{type:"identity",property:"mlc"}:g.color,"line-width":M?{type:"identity",property:"mlw"}:g.width,"line-opacity":L}),o.layout.visibility="visible",c.layout.visibility="visible",v.geojson={type:"FeatureCollection",features:d},r(n),v}function r(n){var f=n[0].trace,l=f._opts,o;if(f.selectedpoints){for(var c=x.makeSelectedPointStyleFns(f),v=0;v<n.length;v++){var d=n[v];d.fOut&&(d.fOut.properties.mo2=c.selectedOpacityFn(d))}o={type:"identity",property:"mo2"}}else o=s.isArrayOrTypedArray(f.marker.opacity)?{type:"identity",property:"mo"}:f.marker.opacity;return s.extendFlat(l.fill.paint,{"fill-opacity":o}),s.extendFlat(l.line.paint,{"line-opacity":o}),l}I.exports={convert:a,convertOnSelect:r}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(e,I,B){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");I.exports=function(t,i,a,r){function n(v,d){return u.coerce(t,i,m,v,d)}var f=n("locations"),l=n("z"),o=n("geojson");if(!u.isArrayOrTypedArray(f)||!f.length||!u.isArrayOrTypedArray(l)||!l.length||!(typeof o=="string"&&o!==""||u.isPlainObject(o))){i.visible=!1;return}n("featureidkey"),i._length=Math.min(f.length,l.length),n("below"),n("text"),n("hovertext"),n("hovertemplate");var c=n("marker.line.width");c&&n("marker.line.color"),n("marker.opacity"),s(t,i,r,n,{prefix:"",cLetter:"z"}),u.coerceSelectionMarkerOpacity(i,n)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../choropleth/calc"),plot:e("./plot"),hoverPoints:e("../choropleth/hover"),eventData:e("../choropleth/event_data"),selectPoints:e("../choropleth/select"),styleOnSelect:function(u,s){if(s){var m=s[0].trace;m._glTrace.updateOnSelect(s)}},getBelow:function(u,s){for(var m=s.getMapLayers(),x=m.length-2;x>=0;x--){var t=m[x].id;if(typeof t=="string"&&t.indexOf("water")===0){for(var i=x+1;i<m.length;i++)if(t=m[i].id,typeof t=="string"&&t.indexOf("plotly-")===-1)return t}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(e,I,B){var u=e("./convert").convert,s=e("./convert").convertOnSelect,m=e("../../plots/mapbox/constants").traceLayerPrefix;function x(i,a){this.type="choroplethmapbox",this.subplot=i,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",m+a+"-fill"],["line",m+a+"-line"]],this.below=null}var t=x.prototype;t.update=function(i){this._update(u(i))},t.updateOnSelect=function(i){this._update(s(i))},t._update=function(i){var a=this.subplot,r=this.layerList,n=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(i.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(i,n),this.below=n);for(var f=0;f<r.length;f++){var l=r[f],o=l[0],c=l[1],v=i[o];a.setOptions(c,"setLayoutProperty",v.layout),v.layout.visibility==="visible"&&a.setOptions(c,"setPaintProperty",v.paint)}},t._addLayers=function(i,a){for(var r=this.subplot,n=this.layerList,f=this.sourceId,l=0;l<n.length;l++){var o=n[l],c=o[0],v=i[c];r.addLayer({type:c,id:o[1],source:f,layout:v.layout,paint:v.paint},a)}},t._removeLayers=function(){for(var i=this.subplot.map,a=this.layerList,r=a.length-1;r>=0;r--)i.removeLayer(a[r][1])},t.dispose=function(){var i=this.subplot.map;this._removeLayers(),i.removeSource(this.sourceId)},I.exports=function(a,r){var n=r[0].trace,f=new x(a,n.uid),l=f.sourceId,o=u(r),c=f.below=a.belowLookup["trace-"+n.uid];return a.map.addSource(l,{type:"geojson",data:o.geojson}),f._addLayers(o,c),r[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(e,I,B){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../mesh3d/attributes"),t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"},{keys:["norm"]}),uhoverformat:s("u",1),vhoverformat:s("v",1),whoverformat:s("w",1),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),showlegend:i({},t.showlegend,{dflt:!1})};i(a,u("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(n){a[n]=x[n]}),a.hoverinfo=i({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,I.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(e,I,B){var u=e("../../components/colorscale/calc");I.exports=function(m,x){for(var t=x.u,i=x.v,a=x.w,r=Math.min(x.x.length,x.y.length,x.z.length,t.length,i.length,a.length),n=-1/0,f=1/0,l=0;l<r;l++){var o=t[l],c=i[l],v=a[l],d=Math.sqrt(o*o+c*c+v*v);n=Math.max(n,d),f=Math.min(f,d)}x._len=r,x._normMax=n,u(m,x,{vals:[f,n],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(e,I,B){var u=e("../../../stackgl_modules").gl_cone3d,s=e("../../../stackgl_modules").gl_cone3d.createConeMesh,m=e("../../lib").simpleMap,x=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,i=e("../../plots/gl3d/zip3");function a(v,d){this.scene=v,this.uid=d,this.mesh=null,this.data=null}var r=a.prototype;r.handlePick=function(v){if(v.object===this.mesh){var d=v.index=v.data.index,p=this.data.x[d],y=this.data.y[d],g=this.data.z[d],A=this.data.u[d],b=this.data.v[d],M=this.data.w[d];v.traceCoordinate=[p,y,g,A,b,M,Math.sqrt(A*A+b*b+M*M)];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[d]!==void 0?v.textLabel=w[d]:w&&(v.textLabel=w),!0}};var n={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},l={tip:1,tail:1,cm:.75,center:.5};function o(v,d){var p=v.fullSceneLayout,y=v.dataScale,g={};function A(T,_){var h=p[_],L=y[n[_]];return m(T,function(S){return h.d2l(S)*L})}g.vectors=i(A(d.u,"xaxis"),A(d.v,"yaxis"),A(d.w,"zaxis"),d._len),g.positions=i(A(d.x,"xaxis"),A(d.y,"yaxis"),A(d.z,"zaxis"),d._len);var b=t(d);g.colormap=x(d),g.vertexIntensityBounds=[b.min/d._normMax,b.max/d._normMax],g.coneOffset=f[d.anchor],d.sizemode==="scaled"?g.coneSize=d.sizeref||.5:g.coneSize=d.sizeref&&d._normMax?d.sizeref/d._normMax:.5;var M=u(g),w=d.lightposition;return M.lightPosition=[w.x,w.y,w.z],M.ambient=d.lighting.ambient,M.diffuse=d.lighting.diffuse,M.specular=d.lighting.specular,M.roughness=d.lighting.roughness,M.fresnel=d.lighting.fresnel,M.opacity=d.opacity,d._pad=l[d.anchor]*M.vectorScale*M.coneScale*d._normMax,M}r.update=function(v){this.data=v;var d=o(this.scene,v);this.mesh.update(d)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(v,d){var p=v.glplot.gl,y=o(v,d),g=s(p,y),A=new a(v,d.uid);return A.mesh=g,A.data=d,g._trace=A,v.glplot.add(g),A}I.exports=c},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(e,I,B){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");I.exports=function(t,i,a,r){function n(p,y){return u.coerce(t,i,m,p,y)}var f=n("u"),l=n("v"),o=n("w"),c=n("x"),v=n("y"),d=n("z");if(!f||!f.length||!l||!l.length||!o||!o.length||!c||!c.length||!v||!v.length||!d||!d.length){i.visible=!1;return}n("sizeref"),n("sizemode"),n("anchor"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),s(t,i,r,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(e,I,B){I.exports={moduleType:"trace",name:"cone",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),eventData:function(u,s){return u.norm=s.traceCoordinate[6],u},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(e,I,B){var u=e("../heatmap/attributes"),s=e("../scatter/attributes"),m=e("../../plots/cartesian/axis_format_attributes"),x=m.axisHoverFormat,t=m.descriptionOnlyNumbers,i=e("../../components/colorscale/attributes"),a=e("../../components/drawing/attributes").dash,r=e("../../plots/font_attributes"),n=e("../../lib/extend").extendFlat,f=e("../../constants/filter_ops"),l=f.COMPARISON_OPS2,o=f.INTERVAL_OPS,c=s.line;I.exports=n({z:u.z,x:u.x,x0:u.x0,dx:u.dx,y:u.y,y0:u.y0,dy:u.dy,xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,text:u.text,hovertext:u.hovertext,transpose:u.transpose,xtype:u.xtype,ytype:u.ytype,xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:u.hovertemplate,texttemplate:n({},u.texttemplate,{}),textfont:n({},u.textfont,{}),hoverongaps:u.hoverongaps,connectgaps:n({},u.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:t("contour label")},operation:{valType:"enumerated",values:[].concat(l).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},c.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:n({},c.smoothing,{}),editType:"plot"}},i("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":926}],736:[function(e,I,B){var u=e("../../components/colorscale"),s=e("../heatmap/calc"),m=e("./set_contours"),x=e("./end_plus");I.exports=function(i,a){var r=s(i,a),n=r[0].z;m(a,n);var f=a.contours,l=u.extractOpts(a),o;if(f.coloring==="heatmap"&&l.auto&&a.autocontour===!1){var c=f.start,v=x(f),d=f.size||1,p=Math.floor((v-c)/d)+1;isFinite(d)||(d=1,p=1);var y=c-d/2,g=y+p*d;o=[y,g]}else o=n;return u.calc(i,a,{vals:o,cLetter:"z"}),r}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(e,I,B){I.exports=function(u,s){var m=u[0],x=m.z,t;switch(s.type){case"levels":var i=Math.min(x[0][0],x[0][1]);for(t=0;t<u.length;t++){var a=u[t];a.prefixBoundary=!a.edgepaths.length&&(i>a.level||a.starts.length&&i===a.level)}break;case"constraint":if(m.prefixBoundary=!1,m.edgepaths.length)return;var r=m.x.length,n=m.y.length,f=-1/0,l=1/0;for(t=0;t<n;t++)l=Math.min(l,x[t][0]),l=Math.min(l,x[t][r-1]),f=Math.max(f,x[t][0]),f=Math.max(f,x[t][r-1]);for(t=1;t<r-1;t++)l=Math.min(l,x[0][t]),l=Math.min(l,x[n-1][t]),f=Math.max(f,x[0][t]),f=Math.max(f,x[n-1][t]);var o=s.value,c,v;switch(s._operation){case">":o>f&&(m.prefixBoundary=!0);break;case"<":(o<l||m.starts.length&&o===l)&&(m.prefixBoundary=!0);break;case"[]":c=Math.min(o[0],o[1]),v=Math.max(o[0],o[1]),(v<l||c>f||m.starts.length&&v===l)&&(m.prefixBoundary=!0);break;case"][":c=Math.min(o[0],o[1]),v=Math.max(o[0],o[1]),c<l&&v>f&&(m.prefixBoundary=!0);break}break}}},{}],738:[function(e,I,B){var u=e("../../components/colorscale"),s=e("./make_color_map"),m=e("./end_plus");function x(t,i,a){var r=i.contours,n=i.line,f=r.size||1,l=r.coloring,o=s(i,{isColorbar:!0});if(l==="heatmap"){var c=u.extractOpts(i);a._fillgradient=c.reversescale?u.flipScale(c.colorscale):c.colorscale,a._zrange=[c.min,c.max]}else l==="fill"&&(a._fillcolor=o);a._line={color:l==="lines"?o:n.color,width:r.showlines!==!1?n.width:0,dash:n.dash},a._levels={start:r.start,end:m(r),size:f}}I.exports={min:"zmin",max:"zmax",calc:x}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(e,I,B){I.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(e,I,B){var u=e("fast-isnumeric"),s=e("./label_defaults"),m=e("../../components/color"),x=m.addOpacity,t=m.opacity,i=e("../../constants/filter_ops"),a=i.CONSTRAINT_REDUCTION,r=i.COMPARISON_OPS2;I.exports=function(l,o,c,v,d,p){var y=o.contours,g,A,b,M=c("contours.operation");if(y._operation=a[M],n(c,y),M==="="?g=y.showlines=!0:(g=c("contours.showlines"),b=c("fillcolor",x((l.line||{}).color||d,.5))),g){var w=b&&t(b)?x(o.fillcolor,1):d;A=c("line.color",w),c("line.width",2),c("line.dash")}c("line.smoothing"),s(c,v,A,p)};function n(f,l){var o;r.indexOf(l.operation)===-1?(f("contours.value",[0,1]),Array.isArray(l.value)?l.value.length>2?l.value=l.value.slice(2):l.length===0?l.value=[0,1]:l.length<2?(o=parseFloat(l.value[0]),l.value=[o,o+1]):l.value=[parseFloat(l.value[0]),parseFloat(l.value[1])]:u(l.value)&&(o=parseFloat(l.value),l.value=[o,o+1])):(f("contours.value",0),u(l.value)||(Array.isArray(l.value)?l.value=parseFloat(l.value[0]):l.value=0))}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(e,I,B){var u=e("../../constants/filter_ops"),s=e("fast-isnumeric");I.exports={"[]":x("[]"),"][":x("]["),">":t(">"),"<":t("<"),"=":t("=")};function m(i,a){var r=Array.isArray(a),n;function f(l){return s(l)?+l:null}return u.COMPARISON_OPS2.indexOf(i)!==-1?n=f(r?a[0]:a):u.INTERVAL_OPS.indexOf(i)!==-1?n=r?[f(a[0]),f(a[1])]:[f(a),f(a)]:u.SET_OPS.indexOf(i)!==-1&&(n=r?a.map(f):[f(a)]),n}function x(i){return function(a){a=m(i,a);var r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]);return{start:r,end:n,size:n-r}}}function t(i){return function(a){return a=m(i,a),{start:a,end:1/0,size:1/0}}}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(e,I,B){I.exports=function(s,m,x,t){var i=t("contours.start"),a=t("contours.end"),r=i===!1||a===!1,n=x("contours.size"),f;r?f=m.autocontour=!0:f=x("autocontour",!1),(f||!n)&&x("ncontours")}},{}],743:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x){var t,i,a,r=function(l){return l.reverse()},n=function(l){return l};switch(x){case"=":case"<":return m;case">":for(m.length!==1&&u.warn("Contour data invalid for the specified inequality operation."),i=m[0],t=0;t<i.edgepaths.length;t++)i.edgepaths[t]=r(i.edgepaths[t]);for(t=0;t<i.paths.length;t++)i.paths[t]=r(i.paths[t]);for(t=0;t<i.starts.length;t++)i.starts[t]=r(i.starts[t]);return m;case"][":var f=r;r=n,n=f;case"[]":for(m.length!==2&&u.warn("Contour data invalid for the specified inequality range operation."),i=s(m[0]),a=s(m[1]),t=0;t<i.edgepaths.length;t++)i.edgepaths[t]=r(i.edgepaths[t]);for(t=0;t<i.paths.length;t++)i.paths[t]=r(i.paths[t]);for(t=0;t<i.starts.length;t++)i.starts[t]=r(i.starts[t]);for(;a.edgepaths.length;)i.edgepaths.push(n(a.edgepaths.shift()));for(;a.paths.length;)i.paths.push(n(a.paths.shift()));for(;a.starts.length;)i.starts.push(n(a.starts.shift()));return[i]}};function s(m){return u.extendFlat({},m,{edgepaths:u.extendDeep([],m.edgepaths),paths:u.extendDeep([],m.paths),starts:u.extendDeep([],m.starts)})}},{"../../lib":503}],744:[function(e,I,B){var u=e("../../lib"),s=e("../heatmap/xyz_defaults"),m=e("../scatter/period_defaults"),x=e("./constraint_defaults"),t=e("./contours_defaults"),i=e("./style_defaults"),a=e("../heatmap/label_defaults"),r=e("./attributes");I.exports=function(f,l,o,c){function v(g,A){return u.coerce(f,l,r,g,A)}function d(g){return u.coerce2(f,l,r,g)}var p=s(f,l,v,c);if(!p){l.visible=!1;return}m(f,l,c,v),v("xhoverformat"),v("yhoverformat"),v("text"),v("hovertext"),v("hoverongaps"),v("hovertemplate");var y=v("contours.type")==="constraint";v("connectgaps",u.isArray1D(l.z)),y?x(f,l,v,c,o):(t(f,l,v,d),i(f,l,v,c)),l.contours&&l.contours.coloring==="heatmap"&&a(v,c)}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":946,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(e,I,B){var u=e("../../lib"),s=e("./constraint_mapping"),m=e("./end_plus");I.exports=function(t,i,a){for(var r=t.type==="constraint"?s[t._operation](t.value):t,n=r.size,f=[],l=m(r),o=a.trace._carpetTrace,c=o?{xaxis:o.aaxis,yaxis:o.baxis,x:a.a,y:a.b}:{xaxis:i.xaxis,yaxis:i.yaxis,x:a.x,y:a.y},v=r.start;v<l;v+=n)if(f.push(u.extendFlat({level:v,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},c)),f.length>1e3){u.warn("Too many contours, clipping at 1000",t);break}return f}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(e,I,B){I.exports=function(s){return s.end+s.size/1e6}},{}],747:[function(e,I,B){var u=e("../../lib"),s=e("./constants");I.exports=function(n,f,l){var o,c,v,d,p;for(f=f||.01,l=l||.01,v=0;v<n.length;v++){for(d=n[v],p=0;p<d.starts.length;p++)c=d.starts[p],t(d,c,"edge",f,l);for(o=0;Object.keys(d.crossings).length&&o<1e4;)o++,c=Object.keys(d.crossings)[0].split(",").map(Number),t(d,c,void 0,f,l);o===1e4&&u.log("Infinite loop in contour?")}};function m(r,n,f,l){return Math.abs(r[0]-n[0])<f&&Math.abs(r[1]-n[1])<l}function x(r,n){var f=r[2]-n[2],l=r[3]-n[3];return Math.sqrt(f*f+l*l)}function t(r,n,f,l,o){var c=n.join(","),v=r.crossings[c],d=i(v,f,n),p=[a(r,n,[-d[0],-d[1]])],y=r.z.length,g=r.z[0].length,A=n.slice(),b=d.slice(),M;for(M=0;M<1e4;M++){if(v>20?(v=s.CHOOSESADDLE[v][(d[0]||d[1])<0?0:1],r.crossings[c]=s.SADDLEREMAINDER[v]):delete r.crossings[c],d=s.NEWDELTA[v],!d){u.log("Found bad marching index:",v,n,r.level);break}p.push(a(r,n,d)),n[0]+=d[0],n[1]+=d[1],c=n.join(","),m(p[p.length-1],p[p.length-2],l,o)&&p.pop();var w=d[0]&&(n[0]<0||n[0]>g-2)||d[1]&&(n[1]<0||n[1]>y-2),T=n[0]===A[0]&&n[1]===A[1]&&d[0]===b[0]&&d[1]===b[1];if(T||f&&w)break;v=r.crossings[c]}M===1e4&&u.log("Infinite loop in contour?");var _=m(p[0],p[p.length-1],l,o),h=0,L=.2*r.smoothing,S=[],k=0,P,O,F,D,R,U,N,X,j,ee,q;for(M=1;M<p.length;M++)N=x(p[M],p[M-1]),h+=N,S.push(N);var G=h/S.length*L;function J(se){return p[se%p.length]}for(M=p.length-2;M>=k;M--)if(P=S[M],P<G){for(F=0,O=M-1;O>=k&&P+S[O]<G;O--)P+=S[O];if(_&&M===p.length-2)for(F=0;F<O&&P+S[F]<G;F++)P+=S[F];R=M-O+F+1,U=Math.floor((M+O+F+2)/2),!_&&M===p.length-2?D=p[p.length-1]:!_&&O===-1?D=p[0]:R%2?D=J(U):D=[(J(U)[0]+J(U+1)[0])/2,(J(U)[1]+J(U+1)[1])/2],p.splice(O+1,M-O+1,D),M=O+1,F&&(k=F),_&&(M===p.length-2?p[F]=p[p.length-1]:M===0&&(p[p.length-1]=p[0]))}for(p.splice(0,k),M=0;M<p.length;M++)p[M].length=2;if(!(p.length<2))if(_)p.pop(),r.paths.push(p);else{f||u.log("Unclosed interior contour?",r.level,A.join(","),p.join("L"));var le=!1;for(X=0;X<r.edgepaths.length;X++)if(ee=r.edgepaths[X],!le&&m(ee[0],p[p.length-1],l,o)){p.pop(),le=!0;var fe=!1;for(j=0;j<r.edgepaths.length;j++)if(q=r.edgepaths[j],m(q[q.length-1],p[0],l,o)){fe=!0,p.shift(),r.edgepaths.splice(X,1),j===X?r.paths.push(p.concat(q)):(j>X&&j--,r.edgepaths[j]=q.concat(p,ee));break}fe||(r.edgepaths[X]=p.concat(ee))}for(X=0;X<r.edgepaths.length&&!le;X++)ee=r.edgepaths[X],m(ee[ee.length-1],p[0],l,o)&&(p.shift(),r.edgepaths[X]=ee.concat(p),le=!0);le||r.edgepaths.push(p)}}function i(r,n,f){var l=0,o=0;return r>20&&n?r===208||r===1114?l=f[0]===0?1:-1:o=f[1]===0?1:-1:s.BOTTOMSTART.indexOf(r)!==-1?o=1:s.LEFTSTART.indexOf(r)!==-1?l=1:s.TOPSTART.indexOf(r)!==-1?o=-1:l=-1,[l,o]}function a(r,n,f){var l=n[0]+Math.max(f[0],0),o=n[1]+Math.max(f[1],0),c=r.z[o][l],v=r.xaxis,d=r.yaxis;if(f[1]){var p=(r.level-c)/(r.z[o][l+1]-c),y=(p!==1?(1-p)*v.c2l(r.x[l]):0)+(p!==0?p*v.c2l(r.x[l+1]):0);return[v.c2p(v.l2c(y),!0),d.c2p(r.y[o],!0),l+p,o]}else{var g=(r.level-c)/(r.z[o+1][l]-c),A=(g!==1?(1-g)*d.c2l(r.y[o]):0)+(g!==0?g*d.c2l(r.y[o+1]):0);return[v.c2p(r.x[l],!0),d.c2p(d.l2c(A),!0),l,o+g]}}},{"../../lib":503,"./constants":739}],748:[function(e,I,B){var u=e("../../components/color"),s=e("../heatmap/hover");I.exports=function(x,t,i,a,r){r||(r={}),r.isContour=!0;var n=s(x,t,i,a,r);return n&&n.forEach(function(f){var l=f.trace;l.contours.type==="constraint"&&(l.fillcolor&&u.opacity(l.fillcolor)?f.color=u.addOpacity(l.fillcolor,1):l.contours.showlines&&u.opacity(l.line.color)&&(f.color=u.addOpacity(l.line.color,1)))}),n}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x,t,i){i||(i={});var a=m("contours.showlabels");if(a){var r=x.font;u.coerceFont(m,"contours.labelfont",{family:r.family,size:r.size,color:t}),m("contours.labelformat")}i.hasHover!==!1&&m("zhoverformat")}},{"../../lib":503}],751:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/colorscale"),m=e("./end_plus");I.exports=function(t){var i=t.contours,a=i.start,r=m(i),n=i.size||1,f=Math.floor((r-a)/n)+1,l=i.coloring==="lines"?0:1,o=s.extractOpts(t);isFinite(n)||(n=1,f=1);var c=o.reversescale?s.flipScale(o.colorscale):o.colorscale,v=c.length,d=new Array(v),p=new Array(v),y,g;if(i.coloring==="heatmap"){var A=o.min,b=o.max;for(g=0;g<v;g++)y=c[g],d[g]=y[0]*(b-A)+A,p[g]=y[1];var M=u.extent([A,b,i.start,i.start+n*(f-1)]),w=M[A<b?0:1],T=M[A<b?1:0];w!==A&&(d.splice(0,0,w),p.splice(0,0,p[0])),T!==b&&(d.push(T),p.push(p[p.length-1]))}else for(g=0;g<v;g++)y=c[g],d[g]=(y[0]*(f+l-1)-l/2)*n+a,p[g]=y[1];return s.makeColorScaleFunc({domain:d,range:p},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(e,I,B){var u=e("./constants");I.exports=function(x){var t=x[0].z,i=t.length,a=t[0].length,r=i===2||a===2,n,f,l,o,c,v,d,p,y;for(f=0;f<i-1;f++)for(o=[],f===0&&(o=o.concat(u.BOTTOMSTART)),f===i-2&&(o=o.concat(u.TOPSTART)),n=0;n<a-1;n++)for(l=o.slice(),n===0&&(l=l.concat(u.LEFTSTART)),n===a-2&&(l=l.concat(u.RIGHTSTART)),c=n+","+f,v=[[t[f][n],t[f][n+1]],[t[f+1][n],t[f+1][n+1]]],y=0;y<x.length;y++)p=x[y],d=s(p.level,v),!!d&&(p.crossings[c]=d,l.indexOf(d)!==-1&&(p.starts.push([n,f]),r&&l.indexOf(d,l.indexOf(d)+1)!==-1&&p.starts.push([n,f])))};function s(m,x){var t=(x[0][0]>m?0:1)+(x[0][1]>m?0:2)+(x[1][1]>m?0:4)+(x[1][0]>m?0:8);if(t===5||t===10){var i=(x[0][0]+x[0][1]+x[1][0]+x[1][1])/4;return m>i?t===5?713:1114:t===5?104:208}return t===15?0:t}},{"./constants":739}],753:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../components/colorscale"),t=e("../../lib/svg_text_utils"),i=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/set_convert"),r=e("../heatmap/plot"),n=e("./make_crossings"),f=e("./find_all_paths"),l=e("./empty_pathinfo"),o=e("./convert_to_constraints"),c=e("./close_boundaries"),v=e("./constants"),d=v.LABELOPTIMIZER;B.plot=function(_,h,L,S){var k=h.xaxis,P=h.yaxis;s.makeTraceGroups(S,L,"contour").each(function(O){var F=u.select(this),D=O[0],R=D.trace,U=D.x,N=D.y,X=R.contours,j=l(X,h,D),ee=s.ensureSingle(F,"g","heatmapcoloring"),q=[];X.coloring==="heatmap"&&(q=[O]),r(_,h,q,ee),n(j),f(j);var G=k.c2p(U[0],!0),J=k.c2p(U[U.length-1],!0),le=P.c2p(N[0],!0),fe=P.c2p(N[N.length-1],!0),se=[[G,fe],[J,fe],[J,le],[G,le]],V=j;X.type==="constraint"&&(V=o(j,X._operation)),p(F,se,X),y(F,V,se,X),A(F,j,_,D,X),M(F,h,_,D,se)})};function p(T,_,h){var L=s.ensureSingle(T,"g","contourbg"),S=L.selectAll("path").data(h.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+_.join("L")+"Z").style("stroke","none")}function y(T,_,h,L){var S=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",k="M"+h.join("L")+"Z";S&&c(_,L);var P=s.ensureSingle(T,"g","contourfill"),O=P.selectAll("path").data(S?_:[]);O.enter().append("path"),O.exit().remove(),O.each(function(F){var D=(F.prefixBoundary?k:"")+g(F,h);D?u.select(this).attr("d",D).style("stroke","none"):u.select(this).remove()})}function g(T,_){var h="",L=0,S=T.edgepaths.map(function(G,J){return J}),k=!0,P,O,F,D,R,U;function N(G){return Math.abs(G[1]-_[0][1])<.01}function X(G){return Math.abs(G[1]-_[2][1])<.01}function j(G){return Math.abs(G[0]-_[0][0])<.01}function ee(G){return Math.abs(G[0]-_[2][0])<.01}for(;S.length;){for(U=m.smoothopen(T.edgepaths[L],T.smoothing),h+=k?U:U.replace(/^M/,"L"),S.splice(S.indexOf(L),1),P=T.edgepaths[L][T.edgepaths[L].length-1],D=-1,F=0;F<4;F++){if(!P){s.log("Missing end?",L,T);break}for(N(P)&&!ee(P)?O=_[1]:j(P)?O=_[0]:X(P)?O=_[3]:ee(P)&&(O=_[2]),R=0;R<T.edgepaths.length;R++){var q=T.edgepaths[R][0];Math.abs(P[0]-O[0])<.01?Math.abs(P[0]-q[0])<.01&&(q[1]-P[1])*(O[1]-q[1])>=0&&(O=q,D=R):Math.abs(P[1]-O[1])<.01?Math.abs(P[1]-q[1])<.01&&(q[0]-P[0])*(O[0]-q[0])>=0&&(O=q,D=R):s.log("endpt to newendpt is not vert. or horz.",P,O,q)}if(P=O,D>=0)break;h+="L"+O}if(D===T.edgepaths.length){s.log("unclosed perimeter path");break}L=D,k=S.indexOf(L)===-1,k&&(L=S[0],h+="Z")}for(L=0;L<T.paths.length;L++)h+=m.smoothclosed(T.paths[L],T.smoothing);return h}function A(T,_,h,L,S){var k=s.ensureSingle(T,"g","contourlines"),P=S.showlines!==!1,O=S.showlabels,F=P&&O,D=B.createLines(k,P||O,_),R=B.createLineClip(k,F,h,L.trace.uid),U=T.selectAll("g.contourlabels").data(O?[0]:[]);if(U.exit().remove(),U.enter().append("g").classed("contourlabels",!0),O){var N=[],X=[];s.clearLocationCache();var j=B.labelFormatter(h,L),ee=m.tester.append("text").attr("data-notex",1).call(m.font,S.labelfont),q=_[0].xaxis,G=_[0].yaxis,J=q._length,le=G._length,fe=q.range,se=G.range,V=s.aggNums(Math.min,null,L.x),Y=s.aggNums(Math.max,null,L.x),ne=s.aggNums(Math.min,null,L.y),te=s.aggNums(Math.max,null,L.y),K=Math.max(q.c2p(V,!0),0),$=Math.min(q.c2p(Y,!0),J),ae=Math.max(G.c2p(te,!0),0),ie=Math.min(G.c2p(ne,!0),le),oe={};fe[0]<fe[1]?(oe.left=K,oe.right=$):(oe.left=$,oe.right=K),se[0]<se[1]?(oe.top=ae,oe.bottom=ie):(oe.top=ie,oe.bottom=ae),oe.middle=(oe.top+oe.bottom)/2,oe.center=(oe.left+oe.right)/2,N.push([[oe.left,oe.top],[oe.right,oe.top],[oe.right,oe.bottom],[oe.left,oe.bottom]]);var ue=Math.sqrt(J*J+le*le),xe=v.LABELDISTANCE*ue/Math.max(1,_.length/v.LABELINCREASE);D.each(function(he){var me=B.calcTextOpts(he.level,j,ee,h);u.select(this).selectAll("path").each(function(){var be=this,Ce=s.getVisibleSegment(be,oe,me.height/2);if(!!Ce&&!(Ce.len<(me.width+me.height)*v.LABELMIN))for(var Se=Math.min(Math.ceil(Ce.len/xe),v.LABELMAX),Be=0;Be<Se;Be++){var Ye=B.findBestTextLocation(be,Ce,me,X,oe);if(!Ye)break;B.addLabelData(Ye,me,X,N)}})}),ee.remove(),B.drawLabels(U,X,h,R,F?N:null)}O&&!P&&D.remove()}B.createLines=function(T,_,h){var L=h[0].smoothing,S=T.selectAll("g.contourlevel").data(_?h:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),_){var k=S.selectAll("path.openline").data(function(O){return O.pedgepaths||O.edgepaths});k.exit().remove(),k.enter().append("path").classed("openline",!0),k.attr("d",function(O){return m.smoothopen(O,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=S.selectAll("path.closedline").data(function(O){return O.ppaths||O.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(O){return m.smoothclosed(O,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},B.createLineClip=function(T,_,h,L){var S=h._fullLayout._clips,k=_?"clipline"+L:null,P=S.selectAll("#"+k).data(_?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),m.setClipUrl(T,k,h),P},B.labelFormatter=function(T,_){var h=T._fullLayout,L=_.trace,S=L.contours,k={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)k.tickformat=S.labelformat,a(k,h);else{var P=x.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)k=P.colorbar._axis;else{if(S.type==="constraint"){var O=S.value;Array.isArray(O)?k.range=[O[0],O[O.length-1]]:k.range=[O,O]}else k.range=[S.start,S.end],k.nticks=(S.end-S.start)/S.size;k.range[0]===k.range[1]&&(k.range[1]+=k.range[0]||1),k.nticks||(k.nticks=1e3),a(k,h),i.prepTicks(k),k._tmin=null,k._tmax=null}}return function(F){return i.tickText(k,F).text}},B.calcTextOpts=function(T,_,h,L){var S=_(T);h.text(S).call(t.convertToTspans,L);var k=h.node(),P=m.bBox(k,!0);return{text:S,width:P.width,height:P.height,fontSize:+k.style["font-size"].replace("px",""),level:T,dy:(P.top+P.bottom)/2}},B.findBestTextLocation=function(T,_,h,L,S){var k=h.width,P,O,F,D,R;_.isClosed?(O=_.len/d.INITIALSEARCHPOINTS,P=_.min+O/2,F=_.max):(O=(_.len-k)/(d.INITIALSEARCHPOINTS+1),P=_.min+O+k/2,F=_.max-(O+k)/2);for(var U=1/0,N=0;N<d.ITERATIONS;N++){for(var X=P;X<F;X+=O){var j=s.getTextLocation(T,_.total,X,k),ee=b(j,h,L,S);ee<U&&(U=ee,R=j,D=X)}if(U>d.MAXCOST*2)break;N&&(O/=2),P=D-O/2,F=P+O*1.5}if(U<=d.MAXCOST)return R};function b(T,_,h,L){var S=_.width/2,k=_.height/2,P=T.x,O=T.y,F=T.theta,D=Math.cos(F)*S,R=Math.sin(F)*S,U=(P>L.center?L.right-P:P-L.left)/(D+Math.abs(Math.sin(F)*k)),N=(O>L.middle?L.bottom-O:O-L.top)/(Math.abs(R)+Math.cos(F)*k);if(U<1||N<1)return 1/0;var X=d.EDGECOST*(1/(U-1)+1/(N-1));X+=d.ANGLECOST*F*F;for(var j=P-D,ee=O-R,q=P+D,G=O+R,J=0;J<h.length;J++){var le=h[J],fe=Math.cos(le.theta)*le.width/2,se=Math.sin(le.theta)*le.width/2,V=s.segmentDistance(j,ee,q,G,le.x-fe,le.y-se,le.x+fe,le.y+se)*2/(_.height+le.height),Y=le.level===_.level,ne=Y?d.SAMELEVELDISTANCE:1;if(V<=ne)return 1/0;var te=d.NEIGHBORCOST*(Y?d.SAMELEVELFACTOR:1);X+=te/(V-ne)}return X}B.addLabelData=function(T,_,h,L){var S=_.fontSize,k=_.width+S/3,P=Math.max(0,_.height-S/3),O=T.x,F=T.y,D=T.theta,R=Math.sin(D),U=Math.cos(D),N=function(j,ee){return[O+j*U-ee*R,F+j*R+ee*U]},X=[N(-k/2,-P/2),N(-k/2,P/2),N(k/2,P/2),N(k/2,-P/2)];h.push({text:_.text,x:O,y:F,dy:_.dy,theta:D,level:_.level,width:k,height:P}),L.push(X)},B.drawLabels=function(T,_,h,L,S){var k=T.selectAll("text").data(_,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(k.exit().remove(),k.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var R=D.x+Math.sin(D.theta)*D.dy,U=D.y-Math.cos(D.theta)*D.dy;u.select(this).text(D.text).attr({x:R,y:U,transform:"rotate("+180*D.theta/Math.PI+" "+R+" "+U+")"}).call(t.convertToTspans,h)}),S){for(var P="",O=0;O<S.length;O++)P+="M"+S[O].join("L")+"Z";var F=s.ensureSingle(L,"path","");F.attr("d",P)}};function M(T,_,h,L,S){var k=L.trace,P=h._fullLayout._clips,O="clip"+k.uid,F=P.selectAll("#"+O).data(k.connectgaps?[]:[0]);if(F.enter().append("clipPath").classed("contourclip",!0).attr("id",O),F.exit().remove(),k.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:_.xaxis,yaxis:_.yaxis,x:L.x,y:L.y,z:w(L),smoothing:0};n([D]),f([D]),c([D],{type:"levels"});var R=s.ensureSingle(F,"path","");R.attr("d",(D.prefixBoundary?"M"+S.join("L")+"Z":"")+g(D,S))}else O=null;m.setClipUrl(T,O,h)}function w(T){var _=T.trace._emptypoints,h=[],L=T.z.length,S=T.z[0].length,k,P=[],O;for(k=0;k<S;k++)P.push(1);for(k=0;k<L;k++)h.push(P.slice());for(k=0;k<_.length;k++)O=_[k],h[O[0]][O[1]]=0;return T.zmask=h,h}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../lib");I.exports=function(t,i){var a=t.contours;if(t.autocontour){var r=t.zmin,n=t.zmax;(t.zauto||r===void 0)&&(r=s.aggNums(Math.min,null,i)),(t.zauto||n===void 0)&&(n=s.aggNums(Math.max,null,i));var f=m(r,n,t.ncontours);a.size=f.dtick,a.start=u.tickFirst(f),f.range.reverse(),a.end=u.tickFirst(f),a.start===r&&(a.start+=a.size),a.end===n&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),t._input.contours||(t._input.contours={}),s.extendFlat(t._input.contours,{start:a.start,end:a.end,size:a.size}),t._input.autocontour=!0}else if(a.type!=="constraint"){var l=a.start,o=a.end,c=t._input.contours;if(l>o&&(a.start=c.start=o,o=a.end=c.end=l,l=a.start),!(a.size>0)){var v;l===o?v=1:v=m(l,o,t.ncontours).dtick,c.size=a.size=v}}};function m(x,t,i){var a={type:"linear",range:[x,t]};return u.autoTicks(a,(t-x)/(i||15)),a}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../heatmap/style"),x=e("./make_color_map");I.exports=function(i){var a=u.select(i).selectAll("g.contour");a.style("opacity",function(r){return r[0].trace.opacity}),a.each(function(r){var n=u.select(this),f=r[0].trace,l=f.contours,o=f.line,c=l.size||1,v=l.start,d=l.type==="constraint",p=!d&&l.coloring==="lines",y=!d&&l.coloring==="fill",g=p||y?x(f):null;n.selectAll("g.contourlevel").each(function(M){u.select(this).selectAll("path").call(s.lineGroupStyle,o.width,p?g(M.level):o.color,o.dash)});var A=l.labelfont;if(n.selectAll("g.contourlabels text").each(function(M){s.font(u.select(this),{family:A.family,size:A.size,color:A.color||(p?g(M.level):o.color)})}),d)n.selectAll("g.contourfill path").style("fill",f.fillcolor);else if(y){var b;n.selectAll("g.contourfill path").style("fill",function(M){return b===void 0&&(b=M.level),g(M.level+.5*c)}),b===void 0&&(b=v),n.selectAll("g.contourbg path").style("fill",g(b-.5*c))}}),m(i)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(e,I,B){var u=e("../../components/colorscale/defaults"),s=e("./label_defaults");I.exports=function(x,t,i,a,r){var n=i("contours.coloring"),f,l="";n==="fill"&&(f=i("contours.showlines")),f!==!1&&(n!=="lines"&&(l=i("line.color","#000")),i("line.width",.5),i("line.dash")),n!=="none"&&(x.showlegend!==!0&&(t.showlegend=!1),t._dfltShowLegend=!1,u(x,t,a,i,{prefix:"",cLetter:"z"})),i("line.smoothing"),s(i,a,l,r)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(e,I,B){var u=e("../heatmap/attributes"),s=e("../contour/attributes"),m=e("../../components/colorscale/attributes"),x=e("../../lib/extend").extendFlat,t=s.contours;I.exports=x({carpet:{valType:"string",editType:"calc"},z:u.z,a:u.x,a0:u.x0,da:u.dx,b:u.y,b0:u.y0,db:u.dy,text:u.text,hovertext:u.hovertext,transpose:u.transpose,atype:u.xtype,btype:u.ytype,fillcolor:s.fillcolor,autocontour:s.autocontour,ncontours:s.ncontours,contours:{type:t.type,start:t.start,end:t.end,size:t.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:t.showlines,showlabels:t.showlabels,labelfont:t.labelfont,labelformat:t.labelformat,operation:t.operation,value:t.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:s.line.color,width:s.line.width,dash:s.line.dash,smoothing:s.line.smoothing,editType:"plot"},transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(e,I,B){var u=e("../../components/colorscale/calc"),s=e("../../lib"),m=e("../heatmap/convert_column_xyz"),x=e("../heatmap/clean_2d_array"),t=e("../heatmap/interp2d"),i=e("../heatmap/find_empties"),a=e("../heatmap/make_bound_array"),r=e("./defaults"),n=e("../carpet/lookup_carpetid"),f=e("../contour/set_contours");I.exports=function(c,v){var d=v._carpetTrace=n(c,v);if(!(!d||!d.visible||d.visible==="legendonly")){if(!v.a||!v.b){var p=c.data[d.index],y=c.data[v.index];y.a||(y.a=p.a),y.b||(y.b=p.b),r(y,v,v._defaultColor,c._fullLayout)}var g=l(c,v);return f(v,v._z),g}};function l(o,c){var v=c._carpetTrace,d=v.aaxis,p=v.baxis,y,g,A,b,M,w,T;d._minDtick=0,p._minDtick=0,s.isArray1D(c.z)&&m(c,d,p,"a","b",["z"]),y=c._a=c._a||c.a,b=c._b=c._b||c.b,y=y?d.makeCalcdata(c,"_a"):[],b=b?p.makeCalcdata(c,"_b"):[],g=c.a0||0,A=c.da||1,M=c.b0||0,w=c.db||1,T=c._z=x(c._z||c.z,c.transpose),c._emptypoints=i(T),t(T,c._emptypoints);var _=s.maxRowLength(T),h=c.xtype==="scaled"?"":y,L=a(c,h,g,A,_,d),S=c.ytype==="scaled"?"":b,k=a(c,S,M,w,T.length,p),P={a:L,b:k,z:T};return c.contours.type==="levels"&&c.contours.coloring!=="none"&&u(o,c,{vals:T,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(e,I,B){var u=e("../../lib"),s=e("../heatmap/xyz_defaults"),m=e("./attributes"),x=e("../contour/constraint_defaults"),t=e("../contour/contours_defaults"),i=e("../contour/style_defaults");I.exports=function(r,n,f,l){function o(p,y){return u.coerce(r,n,m,p,y)}function c(p){return u.coerce2(r,n,m,p)}if(o("carpet"),r.a&&r.b){var v=s(r,n,o,l,"a","b");if(!v){n.visible=!1;return}o("text");var d=o("contours.type")==="constraint";d?x(r,n,o,l,f,{hasHover:!1}):(t(r,n,o,c),i(r,n,o,l,{hasHover:!1}))}else n._defaultColor=f,n._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../contour/colorbar"),calc:e("./calc"),plot:e("./plot"),style:e("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(e,I,B){var u=e("@plotly/d3"),s=e("../carpet/map_1d_array"),m=e("../carpet/makepath"),x=e("../../components/drawing"),t=e("../../lib"),i=e("../contour/make_crossings"),a=e("../contour/find_all_paths"),r=e("../contour/plot"),n=e("../contour/constants"),f=e("../contour/convert_to_constraints"),l=e("../contour/empty_pathinfo"),o=e("../contour/close_boundaries"),c=e("../carpet/lookup_carpetid"),v=e("../carpet/axis_aligned_line");I.exports=function(h,L,S,k){var P=L.xaxis,O=L.yaxis;t.makeTraceGroups(k,S,"contour").each(function(F){var D=u.select(this),R=F[0],U=R.trace,N=U._carpetTrace=c(h,U),X=h.calcdata[N.index][0];if(!N.visible||N.visible==="legendonly")return;var j=R.a,ee=R.b,q=U.contours,G=l(q,L,R),J=q.type==="constraint",le=q._operation,fe=J?le==="="?"lines":"fill":q.coloring;function se(xe){var he=N.ab2xy(xe[0],xe[1],!0);return[P.c2p(he[0]),O.c2p(he[1])]}var V=[[j[0],ee[ee.length-1]],[j[j.length-1],ee[ee.length-1]],[j[j.length-1],ee[0]],[j[0],ee[0]]];i(G);var Y=(j[j.length-1]-j[0])*1e-8,ne=(ee[ee.length-1]-ee[0])*1e-8;a(G,Y,ne);var te=G;q.type==="constraint"&&(te=f(G,le)),d(G,se);var K,$,ae,ie,oe=[];for(ie=X.clipsegments.length-1;ie>=0;ie--)K=X.clipsegments[ie],$=s([],K.x,P.c2p),ae=s([],K.y,O.c2p),$.reverse(),ae.reverse(),oe.push(m($,ae,K.bicubic));var ue="M"+oe.join("L")+"Z";M(D,X.clipsegments,P,O,J,fe),w(U,D,P,O,te,V,se,N,X,fe,ue),p(D,G,h,R,q,L,N),x.setClipUrl(D,N._clipPathId,h)})};function d(_,h){var L,S,k,P,O,F,D,R,U;for(L=0;L<_.length;L++){for(P=_[L],O=P.pedgepaths=[],F=P.ppaths=[],S=0;S<P.edgepaths.length;S++){for(U=P.edgepaths[S],D=[],k=0;k<U.length;k++)D[k]=h(U[k]);O.push(D)}for(S=0;S<P.paths.length;S++){for(U=P.paths[S],R=[],k=0;k<U.length;k++)R[k]=h(U[k]);F.push(R)}}}function p(_,h,L,S,k,P,O){var F=t.ensureSingle(_,"g","contourlines"),D=k.showlines!==!1,R=k.showlabels,U=D&&R,N=r.createLines(F,D||R,h),X=r.createLineClip(F,U,L,S.trace.uid),j=_.selectAll("g.contourlabels").data(R?[0]:[]);if(j.exit().remove(),j.enter().append("g").classed("contourlabels",!0),R){var ee=P.xaxis,q=P.yaxis,G=ee._length,J=q._length,le=[[[0,0],[G,0],[G,J],[0,J]]],fe=[];t.clearLocationCache();var se=r.labelFormatter(L,S),V=x.tester.append("text").attr("data-notex",1).call(x.font,k.labelfont),Y={left:0,right:G,center:G/2,top:0,bottom:J,middle:J/2},ne=Math.sqrt(G*G+J*J),te=n.LABELDISTANCE*ne/Math.max(1,h.length/n.LABELINCREASE);N.each(function(K){var $=r.calcTextOpts(K.level,se,V,L);u.select(this).selectAll("path").each(function(ae){var ie=this,oe=t.getVisibleSegment(ie,Y,$.height/2);if(!!oe&&(y(ie,ae,K,oe,O,$.height),!(oe.len<($.width+$.height)*n.LABELMIN)))for(var ue=Math.min(Math.ceil(oe.len/te),n.LABELMAX),xe=0;xe<ue;xe++){var he=r.findBestTextLocation(ie,oe,$,fe,Y);if(!he)break;r.addLabelData(he,$,fe,le)}})}),V.remove(),r.drawLabels(j,fe,L,X,U?le:null)}R&&!D&&N.remove()}function y(_,h,L,S,k,P){for(var O,F=0;F<L.pedgepaths.length;F++)h===L.pedgepaths[F]&&(O=L.edgepaths[F]);if(!O)return;var D=k.a[0],R=k.a[k.a.length-1],U=k.b[0],N=k.b[k.b.length-1];function X(J,le){var fe=0,se,V=.1;return(Math.abs(J[0]-D)<V||Math.abs(J[0]-R)<V)&&(se=A(k.dxydb_rough(J[0],J[1],V)),fe=Math.max(fe,P*b(le,se)/2)),(Math.abs(J[1]-U)<V||Math.abs(J[1]-N)<V)&&(se=A(k.dxyda_rough(J[0],J[1],V)),fe=Math.max(fe,P*b(le,se)/2)),fe}var j=g(_,0,1),ee=g(_,S.total,S.total-1),q=X(O[0],j),G=S.total-X(O[O.length-1],ee);S.min<q&&(S.min=q),S.max>G&&(S.max=G),S.len=S.max-S.min}function g(_,h,L){var S=_.getPointAtLength(h),k=_.getPointAtLength(L),P=k.x-S.x,O=k.y-S.y,F=Math.sqrt(P*P+O*O);return[P/F,O/F]}function A(_){var h=Math.sqrt(_[0]*_[0]+_[1]*_[1]);return[_[0]/h,_[1]/h]}function b(_,h){var L=Math.abs(_[0]*h[0]+_[1]*h[1]),S=Math.sqrt(1-L*L);return S/L}function M(_,h,L,S,k,P){var O,F,D,R,U=t.ensureSingle(_,"g","contourbg"),N=U.selectAll("path").data(P==="fill"&&!k?[0]:[]);N.enter().append("path"),N.exit().remove();var X=[];for(R=0;R<h.length;R++)O=h[R],F=s([],O.x,L.c2p),D=s([],O.y,S.c2p),X.push(m(F,D,O.bicubic));N.attr("d","M"+X.join("L")+"Z").style("stroke","none")}function w(_,h,L,S,k,P,O,F,D,R,U){var N=R==="fill";N&&o(k,_.contours);var X=t.ensureSingle(h,"g","contourfill"),j=X.selectAll("path").data(N?k:[]);j.enter().append("path"),j.exit().remove(),j.each(function(ee){var q=(ee.prefixBoundary?U:"")+T(_,ee,P,O,F,D,L,S);q?u.select(this).attr("d",q).style("stroke","none"):u.select(this).remove()})}function T(_,h,L,S,k,P,O,F){var D,R="",U=h.edgepaths.map(function(ae,ie){return ie}),N=!0,X,j,ee,q,G,J,le=Math.abs(L[0][0]-L[2][0])*1e-4,fe=Math.abs(L[0][1]-L[2][1])*1e-4;function se(ae){return Math.abs(ae[1]-L[0][1])<fe}function V(ae){return Math.abs(ae[1]-L[2][1])<fe}function Y(ae){return Math.abs(ae[0]-L[0][0])<le}function ne(ae){return Math.abs(ae[0]-L[2][0])<le}function te(ae,ie){var oe,ue,xe,he,me="";for(se(ae)&&!ne(ae)||V(ae)&&!Y(ae)?(he=k.aaxis,xe=v(k,P,[ae[0],ie[0]],.5*(ae[1]+ie[1]))):(he=k.baxis,xe=v(k,P,.5*(ae[0]+ie[0]),[ae[1],ie[1]])),oe=1;oe<xe.length;oe++)for(me+=he.smoothing?"C":"L",ue=0;ue<xe[oe].length;ue++){var be=xe[oe][ue];me+=[O.c2p(be[0]),F.c2p(be[1])]+" "}return me}for(D=0,X=null;U.length;){var K=h.edgepaths[D][0];for(X&&(R+=te(X,K)),J=x.smoothopen(h.edgepaths[D].map(S),h.smoothing),R+=N?J:J.replace(/^M/,"L"),U.splice(U.indexOf(D),1),X=h.edgepaths[D][h.edgepaths[D].length-1],q=-1,ee=0;ee<4;ee++){if(!X){t.log("Missing end?",D,h);break}for(se(X)&&!ne(X)?j=L[1]:Y(X)?j=L[0]:V(X)?j=L[3]:ne(X)&&(j=L[2]),G=0;G<h.edgepaths.length;G++){var $=h.edgepaths[G][0];Math.abs(X[0]-j[0])<le?Math.abs(X[0]-$[0])<le&&($[1]-X[1])*(j[1]-$[1])>=0&&(j=$,q=G):Math.abs(X[1]-j[1])<fe?Math.abs(X[1]-$[1])<fe&&($[0]-X[0])*(j[0]-$[0])>=0&&(j=$,q=G):t.log("endpt to newendpt is not vert. or horz.",X,j,$)}if(q>=0)break;R+=te(X,j),X=j}if(q===h.edgepaths.length){t.log("unclosed perimeter path");break}D=q,N=U.indexOf(D)===-1,N&&(D=U[0],R+=te(X,j)+"Z",X=null)}for(D=0;D<h.paths.length;D++)R+=x.smoothclosed(h.paths[D].map(S),h.smoothing);return R}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(e,I,B){var u=e("../../components/colorscale/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,m=e("../../plots/attributes"),x=e("../scattermapbox/attributes"),t=e("../../lib/extend").extendFlat;I.exports=t({lon:x.lon,lat:x.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:x.text,hovertext:x.hovertext,hoverinfo:t({},m.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:s(),showlegend:t({},m.showlegend,{dflt:!1})},u("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":991}],763:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib").isArrayOrTypedArray,m=e("../../constants/numerical").BADNUM,x=e("../../components/colorscale/calc"),t=e("../../lib")._;I.exports=function(a,r){for(var n=r._length,f=new Array(n),l=r.z,o=s(l)&&l.length,c=0;c<n;c++){var v=f[c]={},d=r.lon[c],p=r.lat[c];if(v.lonlat=u(d)&&u(p)?[+d,+p]:[m,m],o){var y=l[c];v.z=u(y)?y:m}}return x(a,r,{vals:o?l:[0,1],containerStr:"",cLetter:"z"}),n&&(f[0].t={labels:{lat:t(a,"lat:")+" ",lon:t(a,"lon:")+" "}}),f}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../components/color"),x=e("../../components/colorscale"),t=e("../../constants/numerical").BADNUM,i=e("../../lib/geojson_utils").makeBlank;I.exports=function(r){var n=r[0].trace,f=n.visible===!0&&n._length!==0,l={layout:{visibility:"none"},paint:{}},o=n._opts={heatmap:l,geojson:i()};if(!f)return o;var c=[],v,d=n.z,p=n.radius,y=s.isArrayOrTypedArray(d)&&d.length,g=s.isArrayOrTypedArray(p);for(v=0;v<r.length;v++){var A=r[v],b=A.lonlat;if(b[0]!==t){var M={};if(y){var w=A.z;M.z=w!==t?w:0}g&&(M.r=u(p[v])&&p[v]>0?+p[v]:0),c.push({type:"Feature",geometry:{type:"Point",coordinates:b},properties:M})}}var T=x.extractOpts(n),_=T.reversescale?x.flipScale(T.colorscale):T.colorscale,h=_[0][1],L=m.opacity(h)<1?h:m.addOpacity(h,0),S=["interpolate",["linear"],["heatmap-density"],0,L];for(v=1;v<_.length;v++)S.push(_[v][0],_[v][1]);var k=["interpolate",["linear"],["get","z"],T.min,0,T.max,1];return s.extendFlat(o.heatmap.paint,{"heatmap-weight":y?k:1/(T.max-T.min),"heatmap-color":S,"heatmap-radius":g?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity}),o.geojson={type:"FeatureCollection",features:c},o.heatmap.layout.visibility="visible",o}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(e,I,B){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");I.exports=function(t,i,a,r){function n(c,v){return u.coerce(t,i,m,c,v)}var f=n("lon")||[],l=n("lat")||[],o=Math.min(f.length,l.length);if(!o){i.visible=!1;return}i._length=o,n("z"),n("radius"),n("below"),n("text"),n("hovertext"),n("hovertemplate"),s(t,i,r,n,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(e,I,B){I.exports=function(s,m){return s.lon=m.lon,s.lat=m.lat,s.z=m.z,s}},{}],767:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../scattermapbox/hover").hoverPoints,m=e("../scattermapbox/hover").getExtraText;I.exports=function(t,i,a){var r=s(t,i,a);if(!!r){var n=r[0],f=n.cd,l=f[0].trace,o=f[n.index];if(delete n.color,"z"in o){var c=n.subplot.mockAxis;n.z=o.z,n.zLabel=u.tickText(c,c.c2l(o.z),"hover").text}return n.extraText=m(l,o,f[0].t.labels),[n]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":996}],768:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),formatLabels:e("../scattermapbox/format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),getBelow:function(u,s){for(var m=s.getMapLayers(),x=0;x<m.length;x++){var t=m[x],i=t.id;if(t.type==="symbol"&&typeof i=="string"&&i.indexOf("plotly-")===-1)return i}},moduleType:"trace",name:"densitymapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":995,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(e,I,B){var u=e("./convert"),s=e("../../plots/mapbox/constants").traceLayerPrefix;function m(t,i){this.type="densitymapbox",this.subplot=t,this.uid=i,this.sourceId="source-"+i,this.layerList=[["heatmap",s+i+"-heatmap"]],this.below=null}var x=m.prototype;x.update=function(t){var i=this.subplot,a=this.layerList,r=u(t),n=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(r.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(r,n),this.below=n);for(var f=0;f<a.length;f++){var l=a[f],o=l[0],c=l[1],v=r[o];i.setOptions(c,"setLayoutProperty",v.layout),v.layout.visibility==="visible"&&i.setOptions(c,"setPaintProperty",v.paint)}},x._addLayers=function(t,i){for(var a=this.subplot,r=this.layerList,n=this.sourceId,f=0;f<r.length;f++){var l=r[f],o=l[0],c=t[o];a.addLayer({type:o,id:l[1],source:n,layout:c.layout,paint:c.paint},i)}},x._removeLayers=function(){for(var t=this.subplot.map,i=this.layerList,a=i.length-1;a>=0;a--)t.removeLayer(i[a][1])},x.dispose=function(){var t=this.subplot.map;this._removeLayers(),t.removeSource(this.sourceId)},I.exports=function(i,a){var r=a[0].trace,n=new m(i,r.uid),f=n.sourceId,l=u(a),o=n.below=i.belowLookup["trace-"+r.uid];return i.map.addSource(f,{type:"geojson",data:l.geojson}),n._addLayers(l,o),n}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x){for(var t=0;t<m.length;t++)m[t].i=t;u.mergeArray(x.text,m,"tx"),u.mergeArray(x.hovertext,m,"htx");var i=x.marker;if(i){u.mergeArray(i.opacity,m,"mo"),u.mergeArray(i.color,m,"mc");var a=i.line;a&&(u.mergeArray(a.color,m,"mlc"),u.mergeArrayCastPositive(a.width,m,"mlw"))}}},{"../../lib":503}],771:[function(e,I,B){var u=e("../bar/attributes"),s=e("../scatter/attributes").line,m=e("../../plots/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("./constants"),r=e("../../lib/extend").extendFlat,n=e("../../components/color");I.exports={x:u.x,x0:u.x0,dx:u.dx,y:u.y,y0:u.y0,dy:u.dy,xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:u.hovertext,hovertemplate:t({},{keys:a.eventDataKeys}),hoverinfo:r({},m.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:i({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:u.text,textposition:u.textposition,insidetextanchor:r({},u.insidetextanchor,{dflt:"middle"}),textangle:r({},u.textangle,{dflt:0}),textfont:u.textfont,insidetextfont:u.insidetextfont,outsidetextfont:u.outsidetextfont,constraintext:u.constraintext,cliponaxis:u.cliponaxis,orientation:r({},u.orientation,{}),offset:r({},u.offset,{arrayOk:!1}),width:r({},u.width,{arrayOk:!1}),marker:f(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},s.color,{dflt:n.defaultLine}),width:r({},s.width,{dflt:0,editType:"plot"}),dash:s.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:u.offsetgroup,alignmentgroup:u.alignmentgroup};function f(){var l=r({},u.marker);return delete l.pattern,l}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":773}],772:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../plots/cartesian/align_period"),m=e("./arrays_to_calcdata"),x=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;I.exports=function(r,n){var f=u.getFromId(r,n.xaxis||"x"),l=u.getFromId(r,n.yaxis||"y"),o,c,v,d,p,y,g,A;n.orientation==="h"?(o=f.makeCalcdata(n,"x"),v=l.makeCalcdata(n,"y"),d=s(n,l,"y",v),p=!!n.yperiodalignment,y="y"):(o=l.makeCalcdata(n,"y"),v=f.makeCalcdata(n,"x"),d=s(n,f,"x",v),p=!!n.xperiodalignment,y="x"),c=d.vals;var b=Math.min(c.length,o.length),M=new Array(b);for(n._base=[],g=0;g<b;g++){o[g]<0&&(o[g]=t);var w=!1;o[g]!==t&&g+1<b&&o[g+1]!==t&&(w=!0),A=M[g]={p:c[g],s:o[g],cNext:w},n._base[g]=-.5*A.s,p&&(M[g].orig_p=v[g],M[g][y+"End"]=d.ends[g],M[g][y+"Start"]=d.starts[g]),n.ids&&(A.id=String(n.ids[g])),g===0&&(M[0].vTotal=0),M[0].vTotal+=i(A.s),A.begR=i(A.s)/i(M[0].s)}var T;for(g=0;g<b;g++)A=M[g],A.s!==t&&(A.sumR=A.s/M[0].vTotal,A.difR=T!==void 0?A.s/T:1,T=A.s);return m(M,n),x(M,n),M};function i(a){return a===t?0:a}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":770}],773:[function(e,I,B){I.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(e,I,B){var u=e("../bar/cross_trace_calc").setGroupPositions;I.exports=function(m,x){var t=m._fullLayout,i=m._fullData,a=m.calcdata,r=x.xaxis,n=x.yaxis,f=[],l=[],o=[],c,v;for(v=0;v<i.length;v++){var d=i[v],p=d.orientation==="h";d.visible===!0&&d.xaxis===r._id&&d.yaxis===n._id&&d.type==="funnel"&&(c=a[v],p?o.push(c):l.push(c),f.push(c))}var y={mode:t.funnelmode,norm:t.funnelnorm,gap:t.funnelgap,groupgap:t.funnelgroupgap};for(u(m,r,n,l,y),u(m,n,r,o,y),v=0;v<f.length;v++){c=f[v];for(var g=0;g<c.length;g++)g+1<c.length&&(c[g].nextP0=c[g+1].p0,c[g].nextS0=c[g+1].s0,c[g].nextP1=c[g+1].p1,c[g].nextS1=c[g+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(e,I,B){var u=e("../../lib"),s=e("../bar/defaults").handleGroupingDefaults,m=e("../bar/defaults").handleText,x=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),i=e("./attributes"),a=e("../../components/color");function r(l,o,c,v){function d(w,T){return u.coerce(l,o,i,w,T)}var p=x(l,o,v,d);if(!p){o.visible=!1;return}t(l,o,v,d),d("xhoverformat"),d("yhoverformat"),d("orientation",o.y&&!o.x?"v":"h"),d("offset"),d("width");var y=d("text");d("hovertext"),d("hovertemplate");var g=d("textposition");m(l,o,v,d,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&!o.texttemplate&&d("textinfo",Array.isArray(y)?"text+value":"value");var A=d("marker.color",c);d("marker.line.color",a.defaultLine),d("marker.line.width");var b=d("connector.visible");if(b){d("connector.fillcolor",n(A));var M=d("connector.line.width");M&&(d("connector.line.color"),d("connector.line.dash"))}}function n(l){var o=u.isArrayOrTypedArray(l)?"#000":l;return a.addOpacity(o,.5*a.opacity(o))}function f(l,o){var c,v;function d(y){return u.coerce(v._input,v,i,y)}if(o.funnelmode==="group")for(var p=0;p<l.length;p++)v=l[p],c=v._input,s(c,v,o,d)}I.exports={supplyDefaults:r,crossTraceDefaults:f}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":771}],776:[function(e,I,B){I.exports=function(s,m){return s.x="xVal"in m?m.xVal:m.x,s.y="yVal"in m?m.yVal:m.y,"percentInitial"in m&&(s.percentInitial=m.percentInitial),"percentPrevious"in m&&(s.percentPrevious=m.percentPrevious),"percentTotal"in m&&(s.percentTotal=m.percentTotal),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),s}},{}],777:[function(e,I,B){var u=e("../../components/color").opacity,s=e("../bar/hover").hoverOnBars,m=e("../../lib").formatPercent;I.exports=function(i,a,r,n,f){var l=s(i,a,r,n,f);if(!!l){var o=l.cd,c=o[0].trace,v=c.orientation==="h",d=l.index,p=o[d],y=v?"x":"y";l[y+"LabelVal"]=p.s,l.percentInitial=p.begR,l.percentInitialLabel=m(p.begR,1),l.percentPrevious=p.difR,l.percentPreviousLabel=m(p.difR,1),l.percentTotal=p.sumR,l.percentTotalLabel=m(p.sumR,1);var g=p.hi||c.hoverinfo,A=[];if(g&&g!=="none"&&g!=="skip"){var b=g==="all",M=g.split("+"),w=function(T){return b||M.indexOf(T)!==-1};w("percent initial")&&A.push(l.percentInitialLabel+" of initial"),w("percent previous")&&A.push(l.percentPreviousLabel+" of previous"),w("percent total")&&A.push(l.percentTotalLabel+" of total")}return l.extraText=A.join("<br>"),l.color=x(c,p),[l]}};function x(t,i){var a=t.marker,r=i.mc||a.color,n=i.mlc||a.line.color,f=i.mlw||a.line.width;if(u(r))return r;if(u(n)&&f)return n}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(e,I,B){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(e,I,B){I.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(m,x,t){var i=!1;function a(f,l){return u.coerce(m,x,s,f,l)}for(var r=0;r<t.length;r++){var n=t[r];if(n.visible&&n.type==="funnel"){i=!0;break}}i&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),i=e("../bar/uniform_text").clearMinTextSize;I.exports=function(l,o,c,v){var d=l._fullLayout;i("funnel",d),a(l,o,c,v),r(l,o,c,v),t.plot(l,o,c,v,{mode:d.funnelmode,norm:d.funnelmode,gap:d.funnelgap,groupgap:d.funnelgroupgap})};function a(f,l,o,c){var v=l.xaxis,d=l.yaxis;s.makeTraceGroups(c,o,"trace bars").each(function(p){var y=u.select(this),g=p[0].trace,A=s.ensureSingle(y,"g","regions");if(!g.connector||!g.connector.visible){A.remove();return}var b=g.orientation==="h",M=A.selectAll("g.region").data(s.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var w=M.size();M.each(function(T,_){if(!(_!==w-1&&!T.cNext)){var h=n(T,v,d,b),L=h[0],S=h[1],k="";L[0]!==x&&S[0]!==x&&L[1]!==x&&S[1]!==x&&L[2]!==x&&S[2]!==x&&L[3]!==x&&S[3]!==x&&(b?k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2]+"H"+L[3]+"L"+L[1]+","+S[1]+"Z":k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3]+"V"+S[2]+"L"+L[1]+","+S[0]+"Z"),k===""&&(k="M0,0Z"),s.ensureSingle(u.select(this),"path").attr("d",k).call(m.setClipUrl,l.layerClipId,f)}})})}function r(f,l,o,c){var v=l.xaxis,d=l.yaxis;s.makeTraceGroups(c,o,"trace bars").each(function(p){var y=u.select(this),g=p[0].trace,A=s.ensureSingle(y,"g","lines");if(!g.connector||!g.connector.visible||!g.connector.line.width){A.remove();return}var b=g.orientation==="h",M=A.selectAll("g.line").data(s.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var w=M.size();M.each(function(T,_){if(!(_!==w-1&&!T.cNext)){var h=n(T,v,d,b),L=h[0],S=h[1],k="";L[3]!==void 0&&S[3]!==void 0&&(b?(k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2],k+="M"+L[1]+","+S[1]+"L"+L[3]+","+S[2]):(k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3],k+="M"+L[1]+","+S[0]+"L"+L[2]+","+S[2])),k===""&&(k="M0,0Z"),s.ensureSingle(u.select(this),"path").attr("d",k).call(m.setClipUrl,l.layerClipId,f)}})})}function n(f,l,o,c){var v=[],d=[],p=c?l:o,y=c?o:l;return v[0]=p.c2p(f.s0,!0),d[0]=y.c2p(f.p0,!0),v[1]=p.c2p(f.s1,!0),d[1]=y.c2p(f.p1,!0),v[2]=p.c2p(f.nextS0,!0),d[2]=y.c2p(f.nextP0,!0),v[3]=p.c2p(f.nextS1,!0),d[3]=y.c2p(f.nextP1,!0),c?[v,d]:[d,v]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../components/color"),x=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),i=e("../bar/uniform_text").resizeText,a=t.styleTextPoints;function r(n,f,l){var o=l||u.select(n).selectAll("g.funnellayer").selectAll("g.trace");i(n,o,"funnel"),o.style("opacity",function(c){return c[0].trace.opacity}),o.each(function(c){var v=u.select(this),d=c[0].trace;v.selectAll(".point > path").each(function(p){if(!p.isBlank){var y=d.marker;u.select(this).call(m.fill,p.mc||y.color).call(m.stroke,p.mlc||y.line.color).call(s.dashLine,y.line.dash,p.mlw||y.line.width).style("opacity",d.selectedpoints&&!p.selected?x:1)}}),a(v,d,n),v.selectAll(".regions").each(function(){u.select(this).selectAll("path").style("stroke-width",0).call(m.fill,d.connector.fillcolor)}),v.selectAll(".lines").each(function(){var p=d.connector.line;s.lineGroupStyle(u.select(this).selectAll("path"),p.width,p.color,p.dash)})})}I.exports={style:r}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(e,I,B){var u=e("../pie/attributes"),s=e("../../plots/attributes"),m=e("../../plots/domain").attributes,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../lib/extend").extendFlat;I.exports={labels:u.labels,label0:u.label0,dlabel:u.dlabel,values:u.values,marker:{colors:u.marker.colors,line:{color:i({},u.marker.line.color,{dflt:null}),width:i({},u.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:u.text,hovertext:u.hovertext,scalegroup:i({},u.scalegroup,{}),textinfo:i({},u.textinfo,{flags:["label","text","value","percent"]}),texttemplate:t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:i({},s.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:x({},{keys:["label","color","value","text","percent"]}),textposition:i({},u.textposition,{values:["inside","none"],dflt:"inside"}),textfont:u.textfont,insidetextfont:u.insidetextfont,title:{text:u.title.text,font:u.title.font,position:i({},u.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:m({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900}],784:[function(e,I,B){var u=e("../../plots/plots");B.name="funnelarea",B.plot=function(s,m,x,t){u.plotBasePlot(B.name,s,m,x,t)},B.clean=function(s,m,x,t){u.cleanBasePlot(B.name,s,m,x,t)}},{"../../plots/plots":619}],785:[function(e,I,B){var u=e("../pie/calc");function s(x,t){return u.calc(x,t)}function m(x){u.crossTraceCalc(x,{type:"funnelarea"})}I.exports={calc:s,crossTraceCalc:m}},{"../pie/calc":902}],786:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("../../plots/domain").defaults,x=e("../bar/defaults").handleText,t=e("../pie/defaults").handleLabelsAndValues;I.exports=function(a,r,n,f){function l(w,T){return u.coerce(a,r,s,w,T)}var o=l("labels"),c=l("values"),v=t(o,c),d=v.len;if(r._hasLabels=v.hasLabels,r._hasValues=v.hasValues,!r._hasLabels&&r._hasValues&&(l("label0"),l("dlabel")),!d){r.visible=!1;return}r._length=d;var p=l("marker.line.width");p&&l("marker.line.color",f.paper_bgcolor),l("marker.colors"),l("scalegroup");var y=l("text"),g=l("texttemplate"),A;if(g||(A=l("textinfo",Array.isArray(y)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),g||A&&A!=="none"){var b=l("textposition");x(a,r,f,l,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}m(r,f,l);var M=l("title.text");M&&(l("title.position"),u.coerceFont(l,"title.font",f.font)),l("aspectratio"),l("baseratio")}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":903,"./attributes":783}],787:[function(e,I,B){I.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style"),styleOne:e("../pie/style_one"),meta:{}}},{"../pie/style_one":911,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(e,I,B){var u=e("../pie/layout_attributes").hiddenlabels;I.exports={hiddenlabels:u,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":907}],789:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("hiddenlabels"),i("funnelareacolorway",t.colorway),i("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../lib"),x=m.strScale,t=m.strTranslate,i=e("../../lib/svg_text_utils"),a=e("../bar/plot"),r=a.toMoveInsideBar,n=e("../bar/uniform_text"),f=n.recordMinTextSize,l=n.clearMinTextSize,o=e("../pie/helpers"),c=e("../pie/plot"),v=c.attachFxHandlers,d=c.determineInsideTextFont,p=c.layoutAreas,y=c.prerenderTitles,g=c.positionTitleOutside,A=c.formatSliceLabel;I.exports=function(_,h){var L=_._fullLayout;l("funnelarea",L),y(h,_),p(h,L._size),m.makeTraceGroups(L._funnelarealayer,h,"trace").each(function(S){var k=u.select(this),P=S[0],O=P.trace;w(S),k.each(function(){var F=u.select(this).selectAll("g.slice").data(S);F.enter().append("g").classed("slice",!0),F.exit().remove(),F.each(function(R,U){if(R.hidden){u.select(this).selectAll("path,g").remove();return}R.pointNumber=R.i,R.curveNumber=O.index;var N=P.cx,X=P.cy,j=u.select(this),ee=j.selectAll("path.surface").data([R]);ee.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),j.call(v,_,S);var q="M"+(N+R.TR[0])+","+(X+R.TR[1])+b(R.TR,R.BR)+b(R.BR,R.BL)+b(R.BL,R.TL)+"Z";ee.attr("d",q),A(_,R,P);var G=o.castOption(O.textposition,R.pts),J=j.selectAll("g.slicetext").data(R.text&&G!=="none"?[0]:[]);J.enter().append("g").classed("slicetext",!0),J.exit().remove(),J.each(function(){var le=m.ensureSingle(u.select(this),"text","",function($){$.attr("data-notex",1)}),fe=m.ensureUniformFontSize(_,d(O,R,L.font));le.text(R.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(s.font,fe).call(i.convertToTspans,_);var se=s.bBox(le.node()),V,Y,ne,te=Math.min(R.BL[1],R.BR[1])+X,K=Math.max(R.TL[1],R.TR[1])+X;Y=Math.max(R.TL[0],R.BL[0])+N,ne=Math.min(R.TR[0],R.BR[0])+N,V=r(Y,ne,te,K,se,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),V.fontSize=fe.size,f(O.type,V,L),S[U].transform=V,le.attr("transform",m.getTextTransform(V))})});var D=u.select(this).selectAll("g.titletext").data(O.title.text?[0]:[]);D.enter().append("g").classed("titletext",!0),D.exit().remove(),D.each(function(){var R=m.ensureSingle(u.select(this),"text","",function(X){X.attr("data-notex",1)}),U=O.title.text;O._meta&&(U=m.templateString(U,O._meta)),R.text(U).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(s.font,O.title.font).call(i.convertToTspans,_);var N=g(P,L._size);R.attr("transform",t(N.x,N.y)+x(Math.min(1,N.scale))+t(N.tx,N.ty))})})})};function b(T,_){var h=_[0]-T[0],L=_[1]-T[1];return"l"+h+","+L}function M(T,_){return[.5*(T[0]+_[0]),.5*(T[1]+_[1])]}function w(T){if(!T.length)return;var _=T[0],h=_.trace,L=h.aspectratio,S=h.baseratio;S>.999&&(S=.999);var k=Math.pow(S,2),P=_.vTotal,O=P*k/(1-k),F=P,D=O/P;function R(){var ie=Math.sqrt(D);return{x:ie,y:-ie}}function U(){var ie=R();return[ie.x,ie.y]}var N,X=[];X.push(U());var j,ee;for(j=T.length-1;j>-1;j--)if(ee=T[j],!ee.hidden){var q=ee.v/F;D+=q,X.push(U())}var G=1/0,J=-1/0;for(j=0;j<X.length;j++)N=X[j],G=Math.min(G,N[1]),J=Math.max(J,N[1]);for(j=0;j<X.length;j++)X[j][1]-=(J+G)/2;var le=X[X.length-1][0],fe=_.r,se=(J-G)/2,V=fe/le,Y=fe/se*L;for(_.r=Y*se,j=0;j<X.length;j++)X[j][0]*=V,X[j][1]*=Y;N=X[0];var ne=[-N[0],N[1]],te=[N[0],N[1]],K=0;for(j=T.length-1;j>-1;j--)if(ee=T[j],!ee.hidden){K+=1;var $=X[K][0],ae=X[K][1];ee.TL=[-$,ae],ee.TR=[$,ae],ee.BL=ne,ee.BR=te,ee.pxmid=M(ee.TR,ee.BR),ne=ee.TL,te=ee.TR}}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"@plotly/d3":58}],791:[function(e,I,B){var u=e("@plotly/d3"),s=e("../pie/style_one"),m=e("../bar/uniform_text").resizeText;I.exports=function(t){var i=t._fullLayout._funnelarealayer.selectAll(".trace");m(t,i,"funnelarea"),i.each(function(a){var r=a[0],n=r.trace,f=u.select(this);f.style({opacity:n.opacity}),f.selectAll("path.surface").each(function(l){u.select(this).call(s,l,n)})})}},{"../bar/uniform_text":664,"../pie/style_one":911,"@plotly/d3":58}],792:[function(e,I,B){var u=e("../scatter/attributes"),s=e("../../plots/attributes"),m=e("../../plots/font_attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../components/colorscale/attributes"),r=e("../../lib/extend").extendFlat;I.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},u.x,{impliedEdits:{xtype:"array"}}),x0:r({},u.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},u.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},u.y,{impliedEdits:{ytype:"array"}}),y0:r({},u.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},u.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},u.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},u.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},u.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},u.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},u.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},u.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:t(),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:m({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},s.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926}],793:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/align_period"),t=e("../histogram2d/calc"),i=e("../../components/colorscale/calc"),a=e("./convert_column_xyz"),r=e("./clean_2d_array"),n=e("./interp2d"),f=e("./find_empties"),l=e("./make_bound_array"),o=e("../../constants/numerical").BADNUM;I.exports=function(p,y){var g=m.getFromId(p,y.xaxis||"x"),A=m.getFromId(p,y.yaxis||"y"),b=u.traceIs(y,"contour"),M=u.traceIs(y,"histogram"),w=u.traceIs(y,"gl2d"),T=b?"best":y.zsmooth,_,h,L,S,k,P,O,F,D,R,U;if(g._minDtick=0,A._minDtick=0,M)U=t(p,y),S=U.orig_x,_=U.x,h=U.x0,L=U.dx,F=U.orig_y,k=U.y,P=U.y0,O=U.dy,D=U.z;else{var N=y.z;s.isArray1D(N)?(a(y,g,A,"x","y",["z"]),_=y._x,k=y._y,N=y._z):(S=y.x?g.makeCalcdata(y,"x"):[],F=y.y?A.makeCalcdata(y,"y"):[],_=x(y,g,"x",S).vals,k=x(y,A,"y",F).vals,y._x=_,y._y=k),h=y.x0,L=y.dx,P=y.y0,O=y.dy,D=r(N,y,g,A)}(g.rangebreaks||A.rangebreaks)&&(D=v(_,k,D),M||(_=c(_),k=c(k),y._x=_,y._y=k)),!M&&(b||y.connectgaps)&&(y._emptypoints=f(D),n(D,y._emptypoints));function X(te){T=y._input.zsmooth=y.zsmooth=!1,s.warn('cannot use zsmooth: "fast": '+te)}if(T==="fast"){if(g.type==="log"||A.type==="log")X("log axis found");else if(!M){if(_.length){var j=(_[_.length-1]-_[0])/(_.length-1),ee=Math.abs(j/100);for(R=0;R<_.length-1;R++)if(Math.abs(_[R+1]-_[R]-j)>ee){X("x scale is not linear");break}}if(k.length&&T==="fast"){var q=(k[k.length-1]-k[0])/(k.length-1),G=Math.abs(q/100);for(R=0;R<k.length-1;R++)if(Math.abs(k[R+1]-k[R]-q)>G){X("y scale is not linear");break}}}}var J=s.maxRowLength(D),le=y.xtype==="scaled"?"":_,fe=l(y,le,h,L,J,g),se=y.ytype==="scaled"?"":k,V=l(y,se,P,O,D.length,A);w||(y._extremes[g._id]=m.findExtremes(g,fe),y._extremes[A._id]=m.findExtremes(A,V));var Y={x:fe,y:V,z:D,text:y._text||y.text,hovertext:y._hovertext||y.hovertext};if(y.xperiodalignment&&S&&(Y.orig_x=S),y.yperiodalignment&&F&&(Y.orig_y=F),le&&le.length===fe.length-1&&(Y.xCenter=le),se&&se.length===V.length-1&&(Y.yCenter=se),M&&(Y.xRanges=U.xRanges,Y.yRanges=U.yRanges,Y.pts=U.pts),b||i(p,y,{vals:D,cLetter:"z"}),b&&y.contours&&y.contours.coloring==="heatmap"){var ne={type:y.type==="contour"?"heatmap":"histogram2d",xcalendar:y.xcalendar,ycalendar:y.ycalendar};Y.xfill=l(ne,le,h,L,J,g),Y.yfill=l(ne,se,P,O,D.length,A)}return[Y]};function c(d){for(var p=[],y=d.length,g=0;g<y;g++){var A=d[g];A!==o&&p.push(A)}return p}function v(d,p,y){for(var g=[],A=-1,b=0;b<y.length;b++)if(p[b]!==o){A++,g[A]=[];for(var M=0;M<y[b].length;M++)d[M]!==o&&g[A].push(y[b][M])}return g}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../constants/numerical").BADNUM;I.exports=function(t,i,a,r){var n,f,l,o,c,v;function d(M){if(!!u(M))return+M}if(i&&i.transpose){for(n=0,c=0;c<t.length;c++)n=Math.max(n,t[c].length);if(n===0)return!1;l=function(M){return M.length},o=function(M,w,T){return(M[T]||[])[w]}}else n=t.length,l=function(M,w){return M[w].length},o=function(M,w,T){return(M[w]||[])[T]};var p=function(M,w,T){return w===m||T===m?m:o(M,w,T)};function y(M){if(i&&i.type!=="carpet"&&i.type!=="contourcarpet"&&M&&M.type==="category"&&i["_"+M._id.charAt(0)].length){var w=M._id.charAt(0),T={},_=i["_"+w+"CategoryMap"]||i[w];for(c=0;c<_.length;c++)T[_[c]]=c;return function(h){var L=T[M._categories[h]];return L+1?L:m}}else return s.identity}var g=y(a),A=y(r);r&&r.type==="category"&&(n=r._categories.length);var b=new Array(n);for(c=0;c<n;c++)for(a&&a.type==="category"?f=a._categories.length:f=l(t,c),b[c]=new Array(f),v=0;v<f;v++)b[c][v]=d(p(t,A(c),g(v)));return b}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(e,I,B){I.exports={min:"zmin",max:"zmax"}},{}],796:[function(e,I,B){var u=e("../../lib"),s=e("../../constants/numerical").BADNUM,m=e("../../plots/cartesian/align_period");I.exports=function(t,i,a,r,n,f){var l=t._length,o=i.makeCalcdata(t,r),c=a.makeCalcdata(t,n);o=m(t,i,r,o).vals,c=m(t,a,n,c).vals;var v=t.text,d=v!==void 0&&u.isArray1D(v),p=t.hovertext,y=p!==void 0&&u.isArray1D(p),g,A,b=u.distinctVals(o),M=b.vals,w=u.distinctVals(c),T=w.vals,_=[],h,L,S=T.length,k=M.length;for(g=0;g<f.length;g++)_[g]=u.init2dArray(S,k);d&&(h=u.init2dArray(S,k)),y&&(L=u.init2dArray(S,k));var P=u.init2dArray(S,k);for(g=0;g<l;g++)if(o[g]!==s&&c[g]!==s){var O=u.findBin(o[g]+b.minDiff/2,M),F=u.findBin(c[g]+w.minDiff/2,T);for(A=0;A<f.length;A++){var D=f[A],R=t[D],U=_[A];U[F][O]=R[g],P[F][O]=g}d&&(h[F][O]=v[g]),y&&(L[F][O]=p[g])}for(t["_"+r]=M,t["_"+n]=T,A=0;A<f.length;A++)t["_"+f[A]]=_[A];d&&(t._text=h),y&&(t._hovertext=L),i&&i.type==="category"&&(t["_"+r+"CategoryMap"]=M.map(function(N){return i._categories[N]})),a&&a.type==="category"&&(t["_"+n+"CategoryMap"]=T.map(function(N){return a._categories[N]})),t._after2before=P}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(e,I,B){var u=e("../../lib"),s=e("./xyz_defaults"),m=e("./label_defaults"),x=e("../scatter/period_defaults"),t=e("./style_defaults"),i=e("../../components/colorscale/defaults"),a=e("./attributes");I.exports=function(n,f,l,o){function c(d,p){return u.coerce(n,f,a,d,p)}var v=s(n,f,c,o);if(!v){f.visible=!1;return}x(n,f,o,c),c("xhoverformat"),c("yhoverformat"),c("text"),c("hovertext"),c("hovertemplate"),m(c,o),t(n,f,c,o),c("hoverongaps"),c("connectgaps",u.isArray1D(f.z)&&f.zsmooth!==!1),i(n,f,o,c,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":946,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(e,I,B){var u=e("../../lib").maxRowLength;I.exports=function(m){var x=[],t={},i=[],a=m[0],r=[],n=[0,0,0],f=u(m),l,o,c,v,d,p,y,g;for(o=0;o<m.length;o++)for(l=r,r=a,a=m[o+1]||[],c=0;c<f;c++)r[c]===void 0&&(p=(r[c-1]!==void 0?1:0)+(r[c+1]!==void 0?1:0)+(l[c]!==void 0?1:0)+(a[c]!==void 0?1:0),p?(o===0&&p++,c===0&&p++,o===m.length-1&&p++,c===r.length-1&&p++,p<4&&(t[[o,c]]=[o,c,p]),x.push([o,c,p])):i.push([o,c]));for(;i.length;){for(y={},g=!1,d=i.length-1;d>=0;d--)v=i[d],o=v[0],c=v[1],p=((t[[o-1,c]]||n)[2]+(t[[o+1,c]]||n)[2]+(t[[o,c-1]]||n)[2]+(t[[o,c+1]]||n)[2])/20,p&&(y[v]=[o,c,p],i.splice(d,1),g=!0);if(!g)throw"findEmpties iterated with no new neighbors";for(v in y)t[v]=y[v],x.push(y[v])}return x.sort(function(A,b){return b[2]-A[2]})}},{"../../lib":503}],799:[function(e,I,B){var u=e("../../components/fx"),s=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("../../components/colorscale").extractOpts;I.exports=function(i,a,r,n,f){f||(f={});var l=f.isContour,o=i.cd[0],c=o.trace,v=i.xa,d=i.ya,p=o.x,y=o.y,g=o.z,A=o.xCenter,b=o.yCenter,M=o.zmask,w=c.zhoverformat,T=p,_=y,h,L,S,k;if(i.index!==!1){try{S=Math.round(i.index[1]),k=Math.round(i.index[0])}catch{s.error("Error hovering on heatmap, pointNumber must be [row,col], found:",i.index);return}if(S<0||S>=g[0].length||k<0||k>g.length)return}else{if(u.inbox(a-p[0],a-p[p.length-1],0)>0||u.inbox(r-y[0],r-y[y.length-1],0)>0)return;if(l){var P;for(T=[2*p[0]-p[1]],P=1;P<p.length;P++)T.push((p[P]+p[P-1])/2);for(T.push([2*p[p.length-1]-p[p.length-2]]),_=[2*y[0]-y[1]],P=1;P<y.length;P++)_.push((y[P]+y[P-1])/2);_.push([2*y[y.length-1]-y[y.length-2]])}S=Math.max(0,Math.min(T.length-2,s.findBin(a,T))),k=Math.max(0,Math.min(_.length-2,s.findBin(r,_)))}var O=v.c2p(p[S]),F=v.c2p(p[S+1]),D=d.c2p(y[k]),R=d.c2p(y[k+1]),U,N;l?(U=o.orig_x||p,N=o.orig_y||y,F=O,h=U[S],R=D,L=N[k]):(U=o.orig_x||A||p,N=o.orig_y||b||y,h=A?U[S]:(U[S]+U[S+1])/2,L=b?N[k]:(N[k]+N[k+1])/2,v&&v.type==="category"&&(h=p[S]),d&&d.type==="category"&&(L=y[k]),c.zsmooth&&(O=F=v.c2p(h),D=R=d.c2p(L)));var X=g[k][S];if(M&&!M[k][S]&&(X=void 0),!(X===void 0&&!c.hoverongaps)){var j;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[k])?j=o.hovertext[k][S]:Array.isArray(o.text)&&Array.isArray(o.text[k])&&(j=o.text[k][S]);var ee=x(c),q={type:"linear",range:[ee.min,ee.max],hoverformat:w,_separators:v._separators,_numFormat:v._numFormat},G=m.tickText(q,X,"hover").text;return[s.extendFlat(i,{index:c._after2before?c._after2before[k][S]:[k,S],distance:i.maxHoverDistance,spikeDistance:i.maxSpikeDistance,x0:O,x1:F,y0:D,y1:R,xLabelVal:h,yLabelVal:L,zLabelVal:X,zLabel:G,text:j})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(e,I,B){var u=e("../../lib"),s=.01,m=[[-1,0],[1,0],[0,-1],[0,1]];function x(i){return .5-.25*Math.min(1,i*.5)}I.exports=function(a,r){var n=1,f;for(t(a,r),f=0;f<r.length&&!(r[f][2]<4);f++);for(r=r.slice(f),f=0;f<100&&n>s;f++)n=t(a,r,x(n));return n>s&&u.log("interp2d didn't converge quickly",n),a};function t(i,a,r){var n=0,f,l,o,c,v,d,p,y,g,A,b,M,w;for(c=0;c<a.length;c++){for(f=a[c],l=f[0],o=f[1],b=i[l][o],A=0,g=0,v=0;v<4;v++)d=m[v],p=i[l+d[0]],!!p&&(y=p[o+d[1]],y!==void 0&&(A===0?M=w=y:(M=Math.min(M,y),w=Math.max(w,y)),g++,A+=y));if(g===0)throw"iterateInterp2d order is wrong: no defined neighbors";i[l][o]=A/g,b===void 0?g<4&&(n=1):(i[l][o]=(1+r)*i[l][o]-r*b,w>M&&(n=Math.max(n,Math.abs(i[l][o]-b)/(w-M))))}return n}},{"../../lib":503}],802:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x){m("texttemplate");var t=u.extendFlat({},x.font,{color:"auto",size:"auto"});u.coerceFont(m,"textfont",t)}},{"../../lib":503}],803:[function(e,I,B){var u=e("../../registry"),s=e("../../lib").isArrayOrTypedArray;I.exports=function(x,t,i,a,r,n){var f=[],l=u.traceIs(x,"contour"),o=u.traceIs(x,"histogram"),c=u.traceIs(x,"gl2d"),v,d,p,y=s(t)&&t.length>1;if(y&&!o&&n.type!=="category"){var g=t.length;if(g<=r){if(l||c)f=t.slice(0,r);else if(r===1)f=[t[0]-.5,t[0]+.5];else{for(f=[1.5*t[0]-.5*t[1]],p=1;p<g;p++)f.push((t[p-1]+t[p])*.5);f.push(1.5*t[g-1]-.5*t[g-2])}if(g<r){var A=f[f.length-1],b=A-f[f.length-2];for(p=g;p<r;p++)A+=b,f.push(A)}}else return l?t.slice(0,r):t.slice(0,r+1)}else{var M=x[n._id.charAt(0)+"calendar"];if(o)v=n.r2c(i,0,M);else if(s(t)&&t.length===1)v=t[0];else if(i===void 0)v=0;else{var w=n.type==="log"?n.d2c:n.r2c;v=w(i,0,M)}for(d=a||1,p=l||c?0:-.5;p<r;p++)f.push(v+d*p)}return f}},{"../../lib":503,"../../registry":638}],804:[function(e,I,B){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("../../registry"),x=e("../../components/drawing"),t=e("../../plots/cartesian/axes"),i=e("../../lib"),a=e("../../lib/svg_text_utils"),r=e("../scatter/format_labels"),n=e("../../components/color"),f=e("../../components/colorscale").extractOpts,l=e("../../components/colorscale").makeColorScaleFuncFromTrace,o=e("../../constants/xmlns_namespaces"),c=e("../../constants/alignment"),v=c.LINE_SPACING,d="heatmap-label";function p(M){return M.selectAll("g."+d)}function y(M){p(M).remove()}I.exports=function(M,w,T,_){var h=w.xaxis,L=w.yaxis;i.makeTraceGroups(_,T,"hm").each(function(S){var k=u.select(this),P=S[0],O=P.trace,F=O.xgap||0,D=O.ygap||0,R=P.z,U=P.x,N=P.y,X=P.xCenter,j=P.yCenter,ee=m.traceIs(O,"contour"),q=ee?"best":O.zsmooth,G=R.length,J=i.maxRowLength(R),le=!1,fe=!1,se,V,Y,ne,te,K,$,ae;for(K=0;se===void 0&&K<U.length-1;)se=h.c2p(U[K]),K++;for(K=U.length-1;V===void 0&&K>0;)V=h.c2p(U[K]),K--;for(V<se&&(Y=V,V=se,se=Y,le=!0),K=0;ne===void 0&&K<N.length-1;)ne=L.c2p(N[K]),K++;for(K=N.length-1;te===void 0&&K>0;)te=L.c2p(N[K]),K--;if(te<ne&&(Y=ne,ne=te,te=Y,fe=!0),ee&&(X=U,j=N,U=P.xfill,N=P.yfill),q!=="fast"){var ie=q==="best"?0:.5;se=Math.max(-ie*h._length,se),V=Math.min((1+ie)*h._length,V),ne=Math.max(-ie*L._length,ne),te=Math.min((1+ie)*L._length,te)}var oe=Math.round(V-se),ue=Math.round(te-ne),xe=oe<=0||ue<=0;if(xe){var he=k.selectAll("image").data([]);he.exit().remove(),y(k);return}var me,be;q==="fast"?(me=J,be=G):(me=oe,be=ue);var Ce=document.createElement("canvas");Ce.width=me,Ce.height=be;var Se=Ce.getContext("2d"),Be=l(O,{noNumericCheck:!0,returnArray:!0}),Ye,Xe;q==="fast"?(Ye=le?function(Br){return J-1-Br}:i.identity,Xe=fe?function(Br){return G-1-Br}:i.identity):(Ye=function(Br){return i.constrain(Math.round(h.c2p(U[Br])-se),0,oe)},Xe=function(Br){return i.constrain(Math.round(L.c2p(N[Br])-ne),0,ue)});var Te=Xe(0),Ie=[Te,Te],Ze=le?0:1,rt=fe?0:1,Ge=0,ze=0,We=0,mt=0,Ft,Xt,Pt,Ut,Gt;function It(Br,kr){if(Br!==void 0){var en=Be(Br);return en[0]=Math.round(en[0]),en[1]=Math.round(en[1]),en[2]=Math.round(en[2]),Ge+=kr,ze+=en[0]*kr,We+=en[1]*kr,mt+=en[2]*kr,en}return[0,0,0,0]}function Ct(Br,kr,en,Zn){var Hn=Br[en.bin0];if(Hn===void 0)return It(void 0,1);var da=Br[en.bin1],wa=kr[en.bin0],Va=kr[en.bin1],Oa=da-Hn||0,wr=wa-Hn||0,wn;return da===void 0?Va===void 0?wn=0:wa===void 0?wn=2*(Va-Hn):wn=(2*Va-wa-Hn)*2/3:Va===void 0?wa===void 0?wn=0:wn=(2*Hn-da-wa)*2/3:wa===void 0?wn=(2*Va-da-Hn)*2/3:wn=Va+Hn-da-wa,It(Hn+en.frac*Oa+Zn.frac*(wr+en.frac*wn))}if(q){var lt=0,dt;try{dt=new Uint8Array(oe*ue*4)}catch{dt=new Array(oe*ue*4)}if(q==="best"){var et=X||U,Pe=j||N,Je=new Array(et.length),it=new Array(Pe.length),ht=new Array(oe),zt=X?A:g,Lt=j?A:g,Vt,$t,Ht;for(K=0;K<et.length;K++)Je[K]=Math.round(h.c2p(et[K])-se);for(K=0;K<Pe.length;K++)it[K]=Math.round(L.c2p(Pe[K])-ne);for(K=0;K<oe;K++)ht[K]=zt(K,Je);for($=0;$<ue;$++)for(Vt=Lt($,it),$t=R[Vt.bin0],Ht=R[Vt.bin1],K=0;K<oe;K++,lt+=4)Gt=Ct($t,Ht,ht[K],Vt),b(dt,lt,Gt)}else for($=0;$<G;$++)for(Ut=R[$],Ie=Xe($),K=0;K<oe;K++)Gt=It(Ut[K],1),lt=(Ie*oe+Ye(K))*4,b(dt,lt,Gt);var tr=Se.createImageData(oe,ue);try{tr.data.set(dt)}catch{var qe=tr.data,xt=qe.length;for($=0;$<xt;$++)qe[$]=dt[$]}Se.putImageData(tr,0,0)}else{var Rt=Math.floor(F/2),fr=Math.floor(D/2);for($=0;$<G;$++)if(Ut=R[$],Ie.reverse(),Ie[rt]=Xe($+1),!(Ie[0]===Ie[1]||Ie[0]===void 0||Ie[1]===void 0))for(Xt=Ye(0),Ft=[Xt,Xt],K=0;K<J;K++)Ft.reverse(),Ft[Ze]=Ye(K+1),!(Ft[0]===Ft[1]||Ft[0]===void 0||Ft[1]===void 0)&&(Pt=Ut[K],Gt=It(Pt,(Ft[1]-Ft[0])*(Ie[1]-Ie[0])),Se.fillStyle="rgba("+Gt.join(",")+")",Se.fillRect(Ft[0]+Rt,Ie[0]+fr,Ft[1]-Ft[0]-F,Ie[1]-Ie[0]-D))}ze=Math.round(ze/Ge),We=Math.round(We/Ge),mt=Math.round(mt/Ge);var br=s("rgb("+ze+","+We+","+mt+")");M._hmpixcount=(M._hmpixcount||0)+Ge,M._hmlumcount=(M._hmlumcount||0)+Ge*br.getLuminance();var pr=k.selectAll("image").data(S);pr.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),pr.attr({height:ue,width:oe,x:se,y:ne,"xlink:href":Ce.toDataURL("image/png")}),y(k);var Tr=O.texttemplate;if(Tr){var Nr=f(O),Ir={type:"linear",range:[Nr.min,Nr.max],_separators:h._separators,_numFormat:h._numFormat},lr=O.type==="histogram2dcontour",Yr=O.type==="contour",nt=Yr?1:0,Ae=Yr?G-1:G,Ee=Yr?1:0,Fe=Yr?J-1:J,Ke=[];for(K=nt;K<Ae;K++){var tt;if(Yr)tt=P.y[K];else if(lr){if(K===0||K===G-1)continue;tt=P.y[K]}else if(P.yCenter)tt=P.yCenter[K];else{if(K+1===G&&P.y[K+1]===void 0)continue;tt=(P.y[K]+P.y[K+1])/2}var ut=Math.round(L.c2p(tt));if(!(0>ut||ut>L._length))for($=Ee;$<Fe;$++){var ct;if(Yr)ct=P.x[$];else if(lr){if($===0||$===J-1)continue;ct=P.x[$]}else if(P.xCenter)ct=P.xCenter[$];else{if($+1===J&&P.x[$+1]===void 0)continue;ct=(P.x[$]+P.x[$+1])/2}var yt=Math.round(h.c2p(ct));if(!(0>yt||yt>h._length)){var kt=r({x:ct,y:tt},O,M._fullLayout);kt.x=ct,kt.y=tt;var jt=P.z[K][$];jt===void 0?(kt.z="",kt.zLabel=""):(kt.z=jt,kt.zLabel=t.tickText(Ir,jt,"hover").text);var Mr=P.text&&P.text[K]&&P.text[K][$];(Mr===void 0||Mr===!1)&&(Mr=""),kt.text=Mr;var Sr=i.texttemplateString(Tr,kt,M._fullLayout._d3locale,kt,O._meta||{});if(!!Sr){var Lr=Sr.split("<br>"),Ar=Lr.length,Ur=0;for(ae=0;ae<Ar;ae++)Ur=Math.max(Ur,Lr[ae].length);Ke.push({l:Ar,c:Ur,t:Sr,x:yt,y:ut,z:jt})}}}}var fn=O.textfont,Cr=fn.family,_r=fn.size,En=M._fullLayout.font.size;if(!_r||_r==="auto"){var Jr=1/0,Pr=1/0,vn=0,xn=0;for(ae=0;ae<Ke.length;ae++){var qr=Ke[ae];if(vn=Math.max(vn,qr.l),xn=Math.max(xn,qr.c),ae<Ke.length-1){var st=Ke[ae+1],Bt=Math.abs(st.x-qr.x),ir=Math.abs(st.y-qr.y);Bt&&(Jr=Math.min(Jr,Bt)),ir&&(Pr=Math.min(Pr,ir))}}!isFinite(Jr)||!isFinite(Pr)?_r=En:(Jr-=F,Pr-=D,Jr/=xn,Pr/=vn,Jr/=v/2,Pr/=v,_r=Math.min(Math.floor(Jr),Math.floor(Pr),En))}if(_r<=0||!isFinite(_r))return;var xr=function(Br){return Br.x},Qr=function(Br){return Br.y-_r*(Br.l*v/2-1)},Gr=p(k).data(Ke);Gr.enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(Br){var kr=u.select(this),en=fn.color;(!en||en==="auto")&&(en=n.contrast("rgba("+Be(Br.z).join()+")")),kr.attr("data-notex",1).call(a.positionText,xr(Br),Qr(Br)).call(x.font,Cr,_r,en).text(Br.t).call(a.convertToTspans,M)})}})};function g(M,w){var T=w.length-2,_=i.constrain(i.findBin(M,w),0,T),h=w[_],L=w[_+1],S=i.constrain(_+(M-h)/(L-h)-.5,0,T),k=Math.round(S),P=Math.abs(S-k);return!S||S===T||!P?{bin0:k,bin1:k,frac:0}:{bin0:k,frac:P,bin1:Math.round(k+P/(S-k))}}function A(M,w){var T=w.length-1,_=i.constrain(i.findBin(M,w),0,T),h=w[_],L=w[_+1],S=(M-h)/(L-h)||0;return S<=0?{bin0:_,bin1:_,frac:0}:S<.5?{bin0:_,bin1:_+1,frac:S}:{bin0:_+1,bin1:_,frac:1-S}}function b(M,w,T){M[w]=T[0],M[w+1]=T[1],M[w+2]=T[2],M[w+3]=Math.round(T[3]*255)}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":935,"@plotly/d3":58,tinycolor2:312}],805:[function(e,I,B){var u=e("@plotly/d3");I.exports=function(m){u.select(m).selectAll(".hm image").style("opacity",function(x){return x.trace.opacity})}},{"@plotly/d3":58}],806:[function(e,I,B){I.exports=function(s,m,x){var t=x("zsmooth");t===!1&&(x("xgap"),x("ygap")),x("zhoverformat")}},{}],807:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../registry");I.exports=function(a,r,n,f,l,o){var c=n("z");l=l||"x",o=o||"y";var v,d;if(c===void 0||!c.length)return 0;if(s.isArray1D(a.z)){v=n(l),d=n(o);var p=s.minRowLength(v),y=s.minRowLength(d);if(p===0||y===0)return 0;r._length=Math.min(p,y,c.length)}else{if(v=x(l,n),d=x(o,n),!t(c))return 0;n("transpose"),r._length=null}if(a.type==="heatmapgl")return!0;var g=m.getComponentMethod("calendars","handleTraceDefaults");return g(a,r,[l,o],f),!0};function x(i,a){var r=a(i),n=r?a(i+"type","array"):"scaled";return n==="scaled"&&(a(i+"0"),a("d"+i)),r}function t(i){for(var a=!0,r=!1,n=!1,f,l=0;l<i.length;l++){if(f=i[l],!s.isArrayOrTypedArray(f)){a=!1;break}f.length>0&&(r=!0);for(var o=0;o<f.length;o++)if(u(f[o])){n=!0;break}}return a&&r&&n}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(e,I,B){for(var u=e("../heatmap/attributes"),s=e("../../components/colorscale/attributes"),m=e("../../lib/extend").extendFlat,x=e("../../plot_api/edit_types").overrideAll,t=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],i={},a=0;a<t.length;a++){var r=t[a];i[r]=u[r]}i.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},m(i,s("",{cLetter:"z",autoColorDflt:!1})),I.exports=x(i,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(e,I,B){var u=e("../../../stackgl_modules").gl_heatmap2d,s=e("../../plots/cartesian/axes"),m=e("../../lib/str2rgbarray");function x(r,n){this.scene=r,this.uid=n,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=u(r.glplot,this.options),this.heatmap._trace=this}var t=x.prototype;t.handlePick=function(r){var n=this.options,f=n.shape,l=r.pointId,o=l%f[0],c=Math.floor(l/f[0]),v=l;return{trace:this,dataCoord:r.dataCoord,traceCoord:[n.x[o],n.y[c],n.z[v]],textLabel:this.textLabels[l],name:this.name,pointIndex:[c,o],hoverinfo:this.hoverinfo}},t.update=function(r,n){var f=n[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var l=f.z;this.options.z=[].concat.apply([],l);var o=l[0].length,c=l.length;this.options.shape=[o,c],this.options.x=f.x,this.options.y=f.y,this.options.zsmooth=r.zsmooth;var v=i(r);this.options.colorLevels=v.colorLevels,this.options.colorValues=v.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var d=this.scene.xaxis,p=this.scene.yaxis,y,g;r.zsmooth===!1&&(y={ppad:f.x[1]-f.x[0]},g={ppad:f.y[1]-f.y[0]}),r._extremes[d._id]=s.findExtremes(d,f.x,y),r._extremes[p._id]=s.findExtremes(p,f.y,g)},t.dispose=function(){this.heatmap.dispose()};function i(r){for(var n=r.colorscale,f=r.zmin,l=r.zmax,o=n.length,c=new Array(o),v=new Array(4*o),d=0;d<o;d++){var p=n[d],y=m(p[1]);c[d]=f+p[0]*(l-f);for(var g=0;g<4;g++)v[4*d+g]=y[g]}return{colorLevels:c,colorValues:v}}function a(r,n,f){var l=new x(r,n.uid);return l.update(n,f),l}I.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(e,I,B){var u=e("../../lib"),s=e("../heatmap/xyz_defaults"),m=e("../../components/colorscale/defaults"),x=e("./attributes");I.exports=function(i,a,r,n){function f(o,c){return u.coerce(i,a,x,o,c)}var l=s(i,a,f,n);if(!l){a.visible=!1;return}f("text"),f("zsmooth"),m(i,a,n,f,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../heatmap/calc"),plot:e("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(e,I,B){var u=e("../bar/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../plots/font_attributes"),i=e("./bin_attributes"),a=e("./constants"),r=e("../../lib/extend").extendFlat;I.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:s("x"),yhoverformat:s("y"),text:r({},u.text,{}),hovertext:r({},u.hovertext,{}),orientation:u.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:i("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:i("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({},{keys:a.eventDataKeys}),texttemplate:x({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},u.textposition,{arrayOk:!1}),textfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:u.insidetextanchor,textangle:u.textangle,cliponaxis:u.cliponaxis,constraintext:u.constraintext,marker:u.marker,offsetgroup:u.offsetgroup,alignmentgroup:u.alignmentgroup,selected:u.selected,unselected:u.unselected,_deprecated:{bardir:u._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(e,I,B){I.exports=function(s,m){for(var x=s.length,t=0,i=0;i<x;i++)m[i]?(s[i]/=m[i],t+=s[i]):s[i]=null;return t}},{}],814:[function(e,I,B){I.exports=function(s,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(e,I,B){var u=e("fast-isnumeric");I.exports={count:function(s,m,x){return x[s]++,1},sum:function(s,m,x,t){var i=t[m];return u(i)?(i=Number(i),x[s]+=i,i):0},avg:function(s,m,x,t,i){var a=t[m];return u(a)&&(a=Number(a),x[s]+=a,i[s]++),0},min:function(s,m,x,t){var i=t[m];if(u(i))if(i=Number(i),u(x[s])){if(x[s]>i){var a=i-x[s];return x[s]=i,a}}else return x[s]=i,i;return 0},max:function(s,m,x,t){var i=t[m];if(u(i))if(i=Number(i),u(x[s])){if(x[s]<i){var a=i-x[s];return x[s]=i,a}}else return x[s]=i,i;return 0}}},{"fast-isnumeric":190}],816:[function(e,I,B){var u=e("../../constants/numerical"),s=u.ONEAVGYEAR,m=u.ONEAVGMONTH,x=u.ONEDAY,t=u.ONEHOUR,i=u.ONEMIN,a=u.ONESEC,r=e("../../plots/cartesian/axes").tickIncrement;I.exports=function(v,d,p,y,g){var A=-1.1*d,b=-.1*d,M=v-b,w=p[0],T=p[1],_=Math.min(n(w+b,w+M,y,g),n(T+b,T+M,y,g)),h=Math.min(n(w+A,w+b,y,g),n(T+A,T+b,y,g)),L,S;if(_>h&&h<Math.abs(T-w)/4e3?(L=_,S=!1):(L=Math.min(_,h),S=!0),y.type==="date"&&L>x){var k=L===s?1:6,P=L===s?"M12":"M1";return function(O,F){var D=y.c2d(O,s,g),R=D.indexOf("-",k);R>0&&(D=D.substr(0,R));var U=y.d2c(D,0,g);if(U<O){var N=r(U,P,!1,g);(U+N)/2<O+v&&(U=N)}return F&&S?r(U,P,!0,g):U}}return function(O,F){var D=L*Math.round(O/L);return D+L/10<O&&D+L*.9<O+v&&(D+=L),F&&S&&(D-=L),D}};function n(c,v,d,p){if(c*v<=0)return 1/0;for(var y=Math.abs(v-c),g=d.type==="date",A=f(y,g),b=0;b<10;b++){var M=f(A*80,g);if(A===M)break;if(l(M,c,v,g,d,p))A=M;else break}return A}function f(c,v){return v&&c>a?c>x?c>s*1.1?s:c>m*1.1?m:x:c>t?t:c>i?i:a:Math.pow(10,Math.floor(Math.log(c)/Math.LN10))}function l(c,v,d,p,y,g){if(p&&c>x){var A=o(v,y,g),b=o(d,y,g),M=c===s?0:1;return A[M]!==b[M]}return Math.floor(d/c)-Math.floor(v/c)>.1}function o(c,v,d){var p=v.c2d(c,s,d).split("-");return p[0]===""&&(p.unshift(),p[0]="-"+p[0]),p}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../registry"),x=e("../../plots/cartesian/axes"),t=e("../bar/arrays_to_calcdata"),i=e("./bin_functions"),a=e("./norm_functions"),r=e("./average"),n=e("./bin_label_vals");function f(d,p){var y=[],g=[],A=p.orientation==="h",b=x.getFromId(d,A?p.yaxis:p.xaxis),M=A?"y":"x",w={x:"y",y:"x"}[M],T=p[M+"calendar"],_=p.cumulative,h,L=l(d,p,b,M),S=L[0],k=L[1],P=typeof S.size=="string",O=[],F=P?O:S,D=[],R=[],U=[],N=0,X=p.histnorm,j=p.histfunc,ee=X.indexOf("density")!==-1,q,G,J;_.enabled&&ee&&(X=X.replace(/ ?density$/,""),ee=!1);var le=j==="max"||j==="min",fe=le?null:0,se=i.count,V=a[X],Y=!1,ne=function(Xe){return b.r2c(Xe,0,T)},te;for(s.isArrayOrTypedArray(p[w])&&j!=="count"&&(te=p[w],Y=j==="avg",se=i[j]),h=ne(S.start),G=ne(S.end)+(h-x.tickIncrement(h,S.size,!1,T))/1e6;h<G&&y.length<1e6&&(q=x.tickIncrement(h,S.size,!1,T),y.push((h+q)/2),g.push(fe),U.push([]),O.push(h),ee&&D.push(1/(q-h)),Y&&R.push(0),!(q<=h));)h=q;O.push(h),!P&&b.type==="date"&&(F={start:ne(F.start),end:ne(F.end),size:F.size}),d._fullLayout._roundFnOpts||(d._fullLayout._roundFnOpts={});var K=p["_"+M+"bingroup"],$={leftGap:1/0,rightGap:1/0};K&&(d._fullLayout._roundFnOpts[K]||(d._fullLayout._roundFnOpts[K]=$),$=d._fullLayout._roundFnOpts[K]);var ae=g.length,ie=!0,oe=$.leftGap,ue=$.rightGap,xe={};for(h=0;h<k.length;h++){var he=k[h];J=s.findBin(he,F),J>=0&&J<ae&&(N+=se(J,h,g,te,R),ie&&U[J].length&&he!==k[U[J][0]]&&(ie=!1),U[J].push(h),xe[h]=J,oe=Math.min(oe,he-O[J]),ue=Math.min(ue,O[J+1]-he))}$.leftGap=oe,$.rightGap=ue;var me;ie||(me=function(Xe,Te){return function(){var Ie=d._fullLayout._roundFnOpts[K];return n(Ie.leftGap,Ie.rightGap,O,b,T)(Xe,Te)}}),Y&&(N=r(g,R)),V&&V(g,N,D),_.enabled&&v(g,_.direction,_.currentbin);var be=Math.min(y.length,g.length),Ce=[],Se=0,Be=be-1;for(h=0;h<be;h++)if(g[h]){Se=h;break}for(h=be-1;h>=Se;h--)if(g[h]){Be=h;break}for(h=Se;h<=Be;h++)if(u(y[h])&&u(g[h])){var Ye={p:y[h],s:g[h],b:0};_.enabled||(Ye.pts=U[h],ie?Ye.ph0=Ye.ph1=U[h].length?k[U[h][0]]:y[h]:(p._computePh=!0,Ye.ph0=me(O[h]),Ye.ph1=me(O[h+1],!0))),Ce.push(Ye)}return Ce.length===1&&(Ce[0].width1=x.tickIncrement(Ce[0].p,S.size,!1,T)-Ce[0].p),t(Ce,p),s.isArrayOrTypedArray(p.selectedpoints)&&s.tagSelected(Ce,p,xe),Ce}function l(d,p,y,g,A){var b=g+"bins",M=d._fullLayout,w=p["_"+g+"bingroup"],T=M._histogramBinOpts[w],_=M.barmode==="overlay",h,L,S,k,P,O,F,D=function(he){return y.r2c(he,0,k)},R=function(he){return y.c2r(he,0,k)},U=y.type==="date"?function(he){return he||he===0?s.cleanDate(he,null,k):null}:function(he){return u(he)?Number(he):null};function N(he,me,be){me[he+"Found"]?(me[he]=U(me[he]),me[he]===null&&(me[he]=be[he])):(O[he]=me[he]=be[he],s.nestedProperty(L[0],b+"."+he).set(be[he]))}if(p["_"+g+"autoBinFinished"])delete p["_"+g+"autoBinFinished"];else{L=T.traces;var X=[],j=!0,ee=!1,q=!1;for(h=0;h<L.length;h++)if(S=L[h],S.visible){var G=T.dirs[h];P=S["_"+G+"pos0"]=y.makeCalcdata(S,G),X=s.concat(X,P),delete S["_"+g+"autoBinFinished"],p.visible===!0&&(j?j=!1:(delete S._autoBin,S["_"+g+"autoBinFinished"]=1),m.traceIs(S,"2dMap")&&(ee=!0),S.type==="histogram2dcontour"&&(q=!0))}k=L[0][g+"calendar"];var J=x.autoBin(X,y,T.nbins,ee,k,T.sizeFound&&T.size),le=L[0]._autoBin={};if(O=le[T.dirs[0]]={},q&&(T.size||(J.start=R(x.tickIncrement(D(J.start),J.size,!0,k))),T.end===void 0&&(J.end=R(x.tickIncrement(D(J.end),J.size,!1,k)))),_&&!m.traceIs(p,"2dMap")&&J._dataSpan===0&&y.type!=="category"&&y.type!=="multicategory"){if(A)return[J,P,!0];J=o(d,p,y,g,b)}F=S.cumulative||{},F.enabled&&F.currentbin!=="include"&&(F.direction==="decreasing"?J.start=R(x.tickIncrement(D(J.start),J.size,!0,k)):J.end=R(x.tickIncrement(D(J.end),J.size,!1,k))),T.size=J.size,T.sizeFound||(O.size=J.size,s.nestedProperty(L[0],b+".size").set(J.size)),N("start",T,J),N("end",T,J)}P=p["_"+g+"pos0"],delete p["_"+g+"pos0"];var fe=p._input[b]||{},se=s.extendFlat({},T),V=T.start,Y=y.r2l(fe.start),ne=Y!==void 0;if((T.startFound||ne)&&Y!==y.r2l(V)){var te=ne?Y:s.aggNums(Math.min,null,P),K={type:y.type==="category"||y.type==="multicategory"?"linear":y.type,r2l:y.r2l,dtick:T.size,tick0:V,calendar:k,range:[te,x.tickIncrement(te,T.size,!1,k)].map(y.l2r)},$=x.tickFirst(K);$>y.r2l(te)&&($=x.tickIncrement($,T.size,!0,k)),se.start=y.l2r($),ne||s.nestedProperty(p,b+".start").set(se.start)}var ae=T.end,ie=y.r2l(fe.end),oe=ie!==void 0;if((T.endFound||oe)&&ie!==y.r2l(ae)){var ue=oe?ie:s.aggNums(Math.max,null,P);se.end=y.l2r(ue),oe||s.nestedProperty(p,b+".start").set(se.end)}var xe="autobin"+g;return p._input[xe]===!1&&(p._input[b]=s.extendFlat({},p[b]||{}),delete p._input[xe],delete p[xe]),[se,P]}function o(d,p,y,g,A){var b=d._fullLayout,M=c(d,p),w=!1,T=1/0,_=[p],h,L,S;for(h=0;h<M.length;h++)if(L=M[h],L===p)w=!0;else if(!w)S=b._histogramBinOpts[L["_"+g+"bingroup"]],T=Math.min(T,S.size||L[A].size);else{var k=l(d,L,y,g,!0),P=k[0],O=k[2];L["_"+g+"autoBinFinished"]=1,L["_"+g+"pos0"]=k[1],O?_.push(L):T=Math.min(T,P.size)}var F=new Array(_.length);for(h=0;h<_.length;h++)for(var D=_[h]["_"+g+"pos0"],R=0;R<D.length;R++)if(D[R]!==void 0){F[h]=D[R];break}for(isFinite(T)||(T=s.distinctVals(F).minDiff),h=0;h<_.length;h++){L=_[h];var U=L[g+"calendar"],N={start:y.c2r(F[h]-T/2,0,U),end:y.c2r(F[h]+T/2,0,U),size:T};L._input[A]=L[A]=N,S=b._histogramBinOpts[L["_"+g+"bingroup"]],S&&s.extendFlat(S,N)}return p[A]}function c(d,p){for(var y=p.xaxis,g=p.yaxis,A=p.orientation,b=[],M=d._fullData,w=0;w<M.length;w++){var T=M[w];T.type==="histogram"&&T.visible===!0&&T.orientation===A&&T.xaxis===y&&T.yaxis===g&&b.push(T)}return b}function v(d,p,y){var g,A,b;function M(T){b=d[T],d[T]/=2}function w(T){A=d[T],d[T]=b+A/2,b+=A}if(y==="half")if(p==="increasing")for(M(0),g=1;g<d.length;g++)w(g);else for(M(d.length-1),g=d.length-2;g>=0;g--)w(g);else if(p==="increasing"){for(g=1;g<d.length;g++)d[g]+=d[g-1];y==="exclude"&&(d.unshift(0),d.pop())}else{for(g=d.length-2;g>=0;g--)d[g]+=d[g+1];y==="exclude"&&(d.push(0),d.shift())}}I.exports={calc:f,calcAllAutoBins:l}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(e,I,B){I.exports={eventDataKeys:["binNumber"]}},{}],819:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axis_ids"),m=e("../../registry").traceIs,x=e("../bar/defaults").handleGroupingDefaults,t=u.nestedProperty,i=e("../../plots/cartesian/constraints").getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],r=["x","y"];I.exports=function(f,l){var o=l._histogramBinOpts={},c=[],v={},d=[],p,y,g,A,b,M,w;function T(q,G){return u.coerce(p._input,p,p._module.attributes,q,G)}function _(q){return q.orientation==="v"?"x":"y"}function h(q,G){var J=s.getFromTrace({_fullLayout:l},q,G);return J.type}function L(q,G,J){var le=q.uid+"__"+J;G||(G=le);var fe=h(q,J),se=q[J+"calendar"]||"",V=o[G],Y=!0;V&&(fe===V.axType&&se===V.calendar?(Y=!1,V.traces.push(q),V.dirs.push(J)):(G=le,fe!==V.axType&&u.warn(["Attempted to group the bins of trace",q.index,"set on a","type:"+fe,"axis","with bins on","type:"+V.axType,"axis."].join(" ")),se!==V.calendar&&u.warn(["Attempted to group the bins of trace",q.index,"set with a",se,"calendar","with bins",V.calendar?"on a "+V.calendar+" calendar":"w/o a set calendar"].join(" ")))),Y&&(o[G]={traces:[q],dirs:[J],axType:fe,calendar:q[J+"calendar"]||""}),q["_"+J+"bingroup"]=G}for(b=0;b<f.length;b++)p=f[b],m(p,"histogram")&&(c.push(p),delete p._xautoBinFinished,delete p._yautoBinFinished,m(p,"2dMap")||x(p._input,p,l,T));var S=l._alignmentOpts||{};for(b=0;b<c.length;b++){if(p=c[b],g="",!m(p,"2dMap")){if(A=_(p),l.barmode==="group"&&p.alignmentgroup){var k=p[A+"axis"],P=i(l,k)+p.orientation;(S[P]||{})[p.alignmentgroup]&&(g=P)}!g&&l.barmode!=="overlay"&&(g=i(l,p.xaxis)+i(l,p.yaxis)+_(p))}g?(v[g]||(v[g]=[]),v[g].push(p)):d.push(p)}for(g in v){if(y=v[g],y.length===1){d.push(y[0]);continue}var O=!1;for(y.length&&(p=y[0],O=T("bingroup")),g=O||g,b=0;b<y.length;b++){p=y[b];var F=p._input.bingroup;F&&F!==g&&u.warn(["Trace",p.index,"must match","within bingroup",g+".","Ignoring its bingroup:",F,"setting."].join(" ")),p.bingroup=g,L(p,g,_(p))}}for(b=0;b<d.length;b++){p=d[b];var D=T("bingroup");if(m(p,"2dMap"))for(w=0;w<2;w++){A=r[w];var R=T(A+"bingroup",D?D+"__"+A:null);L(p,R,A)}else L(p,D,_(p))}for(g in o){var U=o[g];for(y=U.traces,M=0;M<a.length;M++){var N=a[M],X=N.name,j,ee;if(!(X==="nbins"&&U.sizeFound)){for(b=0;b<y.length;b++){if(p=y[b],A=U.dirs[b],j=N.aStr[A],t(p._input,j).get()!==void 0){U[X]=T(j),U[X+"Found"]=!0;break}ee=(p._autoBin||{})[A]||{},ee[X]&&t(p,j).set(ee[X])}if(X==="start"||X==="end")for(;b<y.length;b++)p=y[b],p["_"+A+"bingroup"]&&(ee=(p._autoBin||{})[A]||{},T(j,ee[X]));X==="nbins"&&!U.sizeFound&&!U.nbinsFound&&(p=y[0],U[X]=T(j))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("../../components/color"),x=e("../bar/defaults").handleText,t=e("../bar/style_defaults"),i=e("./attributes");I.exports=function(r,n,f,l){function o(h,L){return s.coerce(r,n,i,h,L)}var c=o("x"),v=o("y"),d=o("cumulative.enabled");d&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var p=o("textposition");x(r,n,l,o,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var y=o("orientation",v&&!c?"h":"v"),g=y==="v"?"x":"y",A=y==="v"?"y":"x",b=c&&v?Math.min(s.minRowLength(c)&&s.minRowLength(v)):s.minRowLength(n[g]||[]);if(!b){n.visible=!1;return}n._length=b;var M=u.getComponentMethod("calendars","handleTraceDefaults");M(r,n,["x","y"],l);var w=n[A];w&&o("histfunc"),o("histnorm"),o("autobin"+g),t(r,n,o,f,l),s.coerceSelectionMarkerOpacity(n,o);var T=(n.marker.line||{}).color,_=u.getComponentMethod("errorbars","supplyDefaults");_(r,n,T||m.defaultLine,{axis:"y"}),_(r,n,T||m.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(e,I,B){I.exports=function(s,m,x,t,i){if(s.x="xVal"in m?m.xVal:m.x,s.y="yVal"in m?m.yVal:m.y,"zLabelVal"in m&&(s.z=m.zLabelVal),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),!(x.cumulative||{}).enabled){var a=Array.isArray(i)?t[0].pts[i[0]][i[1]]:t[i].pts;s.pointNumbers=a,s.binNumber=s.pointNumber,delete s.pointNumber,delete s.pointIndex;var r;if(x._indexToPoints){r=[];for(var n=0;n<a.length;n++)r=r.concat(x._indexToPoints[a[n]])}else r=a;s.pointIndices=r}return s}},{}],822:[function(e,I,B){var u=e("../bar/hover").hoverPoints,s=e("../../plots/cartesian/axes").hoverLabelText;I.exports=function(x,t,i,a,r){var n=u(x,t,i,a,r);if(!!n){x=n[0];var f=x.cd[x.index],l=x.cd[0].trace;if(!l.cumulative.enabled){var o=l.orientation==="h"?"y":"x";x[o+"Label"]=s(x[o+"a"],[f.ph0,f.ph1],l[o+"hoverformat"])}return n}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(e,I,B){I.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(e,I,B){I.exports={percent:function(u,s){for(var m=u.length,x=100/s,t=0;t<m;t++)u[t]*=x},probability:function(u,s){for(var m=u.length,x=0;x<m;x++)u[x]/=s},density:function(u,s,m,x){var t=u.length;x=x||1;for(var i=0;i<t;i++)u[i]*=m[i]*x},"probability density":function(u,s,m,x){var t=u.length;x&&(s/=x);for(var i=0;i<t;i++)u[i]*=m[i]/s}}},{}],825:[function(e,I,B){var u=e("../histogram/attributes"),s=e("../histogram/bin_attributes"),m=e("../heatmap/attributes"),x=e("../../plots/attributes"),t=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,r=e("../../components/colorscale/attributes"),n=e("../../lib/extend").extendFlat;I.exports=n({x:u.x,y:u.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:u.histnorm,histfunc:u.histfunc,nbinsx:u.nbinsx,xbins:s("x"),nbinsy:u.nbinsy,ybins:s("y"),autobinx:u.autobinx,autobiny:u.autobiny,bingroup:n({},u.bingroup,{}),xbingroup:n({},u.bingroup,{}),ybingroup:n({},u.bingroup,{}),xgap:m.xgap,ygap:m.ygap,zsmooth:m.zsmooth,xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z",1),hovertemplate:i({},{keys:"z"}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:m.textfont,showlegend:n({},x.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../histogram/bin_functions"),x=e("../histogram/norm_functions"),t=e("../histogram/average"),i=e("../histogram/bin_label_vals"),a=e("../histogram/calc").calcAllAutoBins;I.exports=function(o,c){var v=s.getFromId(o,c.xaxis),d=s.getFromId(o,c.yaxis),p=c.xcalendar,y=c.ycalendar,g=function(lt){return v.r2c(lt,0,p)},A=function(lt){return d.r2c(lt,0,y)},b=function(lt){return v.c2r(lt,0,p)},M=function(lt){return d.c2r(lt,0,y)},w,T,_,h,L=a(o,c,v,"x"),S=L[0],k=L[1],P=a(o,c,d,"y"),O=P[0],F=P[1],D=c._length;k.length>D&&k.splice(D,k.length-D),F.length>D&&F.splice(D,F.length-D);var R=[],U=[],N=[],X=typeof S.size=="string",j=typeof O.size=="string",ee=[],q=[],G=X?ee:S,J=j?q:O,le=0,fe=[],se=[],V=c.histnorm,Y=c.histfunc,ne=V.indexOf("density")!==-1,te=Y==="max"||Y==="min",K=te?null:0,$=m.count,ae=x[V],ie=!1,oe=[],ue=[],xe="z"in c?c.z:"marker"in c&&Array.isArray(c.marker.color)?c.marker.color:"";xe&&Y!=="count"&&(ie=Y==="avg",$=m[Y]);var he=S.size,me=g(S.start),be=g(S.end)+(me-s.tickIncrement(me,he,!1,p))/1e6;for(w=me;w<be;w=s.tickIncrement(w,he,!1,p))U.push(K),ee.push(w),ie&&N.push(0);ee.push(w);var Ce=U.length,Se=(w-me)/Ce,Be=b(me+Se/2),Ye=O.size,Xe=A(O.start),Te=A(O.end)+(Xe-s.tickIncrement(Xe,Ye,!1,y))/1e6;for(w=Xe;w<Te;w=s.tickIncrement(w,Ye,!1,y)){R.push(U.slice()),q.push(w);var Ie=new Array(Ce);for(T=0;T<Ce;T++)Ie[T]=[];se.push(Ie),ie&&fe.push(N.slice())}q.push(w);var Ze=R.length,rt=(w-Xe)/Ze,Ge=M(Xe+rt/2);ne&&(oe=r(U.length,G,Se,X),ue=r(R.length,J,rt,j)),!X&&v.type==="date"&&(G=n(g,G)),!j&&d.type==="date"&&(J=n(A,J));var ze=!0,We=!0,mt=new Array(Ce),Ft=new Array(Ze),Xt=1/0,Pt=1/0,Ut=1/0,Gt=1/0;for(w=0;w<D;w++){var It=k[w],Ct=F[w];_=u.findBin(It,G),h=u.findBin(Ct,J),_>=0&&_<Ce&&h>=0&&h<Ze&&(le+=$(_,w,R[h],xe,fe[h]),se[h][_].push(w),ze&&(mt[_]===void 0?mt[_]=It:mt[_]!==It&&(ze=!1)),We&&(Ft[h]===void 0?Ft[h]=Ct:Ft[h]!==Ct&&(We=!1)),Xt=Math.min(Xt,It-ee[_]),Pt=Math.min(Pt,ee[_+1]-It),Ut=Math.min(Ut,Ct-q[h]),Gt=Math.min(Gt,q[h+1]-Ct))}if(ie)for(h=0;h<Ze;h++)le+=t(R[h],fe[h]);if(ae)for(h=0;h<Ze;h++)ae(R[h],le,oe,ue[h]);return{x:k,xRanges:f(ee,ze&&mt,Xt,Pt,v,p),x0:Be,dx:Se,y:F,yRanges:f(q,We&&Ft,Ut,Gt,d,y),y0:Ge,dy:rt,z:R,pts:se}};function r(l,o,c,v){var d=new Array(l),p;if(v)for(p=0;p<l;p++)d[p]=1/(o[p+1]-o[p]);else{var y=1/c;for(p=0;p<l;p++)d[p]=y}return d}function n(l,o){return{start:l(o.start),end:l(o.end),size:o.size}}function f(l,o,c,v,d,p){var y,g=l.length-1,A=new Array(g),b=i(c,v,l,d,p);for(y=0;y<g;y++){var M=(o||[])[y];A[y]=M===void 0?[b(l[y]),b(l[y+1],!0)]:[M,M]}return A}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(e,I,B){var u=e("../../lib"),s=e("./sample_defaults"),m=e("../heatmap/style_defaults"),x=e("../../components/colorscale/defaults"),t=e("../heatmap/label_defaults"),i=e("./attributes");I.exports=function(r,n,f,l){function o(c,v){return u.coerce(r,n,i,c,v)}s(r,n,o,l),n.visible!==!1&&(m(r,n,o,l),x(r,n,l,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),t(o,l),o("xhoverformat"),o("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(e,I,B){var u=e("../heatmap/hover"),s=e("../../plots/cartesian/axes").hoverLabelText;I.exports=function(x,t,i,a,r){var n=u(x,t,i,a,r);if(!!n){x=n[0];var f=x.index,l=f[0],o=f[1],c=x.cd[0],v=c.trace,d=c.xRanges[o],p=c.yRanges[l];return x.xLabel=s(x.xa,[d[0],d[1]],v.xhoverformat),x.yLabel=s(x.ya,[p[0],p[1]],v.yhoverformat),n}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(e,I,B){var u=e("../../registry"),s=e("../../lib");I.exports=function(x,t,i,a){var r=i("x"),n=i("y"),f=s.minRowLength(r),l=s.minRowLength(n);if(!f||!l){t.visible=!1;return}t._length=Math.min(f,l);var o=u.getComponentMethod("calendars","handleTraceDefaults");o(x,t,["x","y"],a);var c=i("z")||i("marker.color");c&&i("histfunc"),i("histnorm"),i("autobinx"),i("autobiny")}},{"../../lib":503,"../../registry":638}],831:[function(e,I,B){var u=e("../histogram2d/attributes"),s=e("../contour/attributes"),m=e("../../components/colorscale/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../lib/extend").extendFlat;I.exports=t({x:u.x,y:u.y,z:u.z,marker:u.marker,histnorm:u.histnorm,histfunc:u.histfunc,nbinsx:u.nbinsx,xbins:u.xbins,nbinsy:u.nbinsy,ybins:u.ybins,autobinx:u.autobinx,autobiny:u.autobiny,bingroup:u.bingroup,xbingroup:u.xbingroup,ybingroup:u.ybingroup,autocontour:s.autocontour,ncontours:s.ncontours,contours:s.contours,line:{color:s.line.color,width:t({},s.line.width,{dflt:.5}),dash:s.line.dash,smoothing:s.line.smoothing,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:u.hovertemplate,texttemplate:s.texttemplate,textfont:s.textfont},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(e,I,B){var u=e("../../lib"),s=e("../histogram2d/sample_defaults"),m=e("../contour/contours_defaults"),x=e("../contour/style_defaults"),t=e("../heatmap/label_defaults"),i=e("./attributes");I.exports=function(r,n,f,l){function o(v,d){return u.coerce(r,n,i,v,d)}function c(v){return u.coerce2(r,n,i,v)}s(r,n,o,l),n.visible!==!1&&(m(r,n,o,c),x(r,n,o,l),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),n.contours&&n.contours.coloring==="heatmap"&&t(o,l))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(e,I,B){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../components/colorscale/attributes"),x=e("../../plots/domain").attributes,t=e("../pie/attributes"),i=e("../sunburst/attributes"),a=e("../treemap/attributes"),r=e("../treemap/constants"),n=e("../../lib/extend").extendFlat;I.exports={labels:i.labels,parents:i.parents,values:i.values,branchvalues:i.branchvalues,count:i.count,level:i.level,maxdepth:i.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:a.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:i.marker.colors,line:i.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),leaf:i.leaf,pathbar:a.pathbar,text:t.text,textinfo:i.textinfo,texttemplate:s({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:i.hoverinfo,hovertemplate:u({},{keys:r.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:a.outsidetextfont,textposition:a.textposition,sort:t.sort,root:i.root,domain:x({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"../treemap/attributes":1071,"../treemap/constants":1074}],835:[function(e,I,B){var u=e("../../plots/plots");B.name="icicle",B.plot=function(s,m,x,t){u.plotBasePlot(B.name,s,m,x,t)},B.clean=function(s,m,x,t){u.cleanBasePlot(B.name,s,m,x,t)}},{"../../plots/plots":619}],836:[function(e,I,B){var u=e("../sunburst/calc");B.calc=function(s,m){return u.calc(s,m)},B.crossTraceCalc=function(s){return u._runCrossTraceCalc("icicle",s)}},{"../sunburst/calc":1047}],837:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("../../components/color"),x=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,i=e("../bar/constants").TEXTPAD,a=e("../../components/colorscale"),r=a.hasColorscale,n=a.handleDefaults;I.exports=function(l,o,c,v){function d(_,h){return u.coerce(l,o,s,_,h)}var p=d("labels"),y=d("parents");if(!p||!p.length||!y||!y.length){o.visible=!1;return}var g=d("values");g&&g.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var A=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(A)?"text+label":"label"),d("hovertext"),d("hovertemplate");var b=d("pathbar.visible"),M="auto";t(l,o,v,d,M,{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var w=d("marker.line.width");w&&d("marker.line.color",v.paper_bgcolor),d("marker.colors");var T=o._hasColorscale=r(l,"marker","colors")||(l.marker||{}).coloraxis;T&&n(l,o,v,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",T?1:.7),o._hovered={marker:{line:{width:2,color:m.contrast(v.paper_bgcolor)}}},b&&(d("pathbar.thickness",o.pathbar.textfont.size+2*i),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),x(o,v,d),o._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../lib/svg_text_utils"),t=e("./partition"),i=e("./style").styleOne,a=e("../treemap/constants"),r=e("../sunburst/helpers"),n=e("../sunburst/fx"),f=e("../sunburst/plot").formatSliceLabel,l=!1;I.exports=function(c,v,d,p,y){var g=y.width,A=y.height,b=y.viewX,M=y.viewY,w=y.pathSlice,T=y.toMoveInsideSlice,_=y.strTransform,h=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,k=y.makeUpdateTextInterpolator,P=y.prevEntry,O={},F=c._fullLayout,D=v[0],R=D.trace,U=R.textposition.indexOf("left")!==-1,N=R.textposition.indexOf("right")!==-1,X=R.textposition.indexOf("bottom")!==-1,j=t(d,[g,A],{flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,orientation:R.tiling.orientation,pad:{inner:R.tiling.pad},maxDepth:R._maxDepth}),ee=j.descendants(),q=1/0,G=-1/0;ee.forEach(function(V){var Y=V.depth;Y>=R._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(q=Math.min(q,Y),G=Math.max(G,Y))}),p=p.data(ee,r.getPtId),R._maxVisibleLayers=isFinite(G)?G-q+1:0,p.enter().append("g").classed("slice",!0),L(p,l,O,[g,A],w),p.order();var J=null;if(h&&P){var le=r.getPtId(P);p.each(function(V){J===null&&r.getPtId(V)===le&&(J={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var fe=function(){return J||{x0:0,x1:g,y0:0,y1:A}},se=p;return h&&(se=se.transition().each("end",function(){var V=u.select(this);r.setSliceCursor(V,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),se.each(function(V){V._x0=b(V.x0),V._x1=b(V.x1),V._y0=M(V.y0),V._y1=M(V.y1),V._hoverX=b(V.x1-R.tiling.pad),V._hoverY=M(X?V.y1-R.tiling.pad/2:V.y0+R.tiling.pad/2);var Y=u.select(this),ne=s.ensureSingle(Y,"path","surface",function(ae){ae.style("pointer-events","all")});h?ne.transition().attrTween("d",function(ae){var ie=S(ae,l,fe(),[g,A],{orientation:R.tiling.orientation,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1});return function(oe){return w(ie(oe))}}):ne.attr("d",w),Y.call(n,d,c,v,{styleOne:i,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,c,{isTransitioning:c._transitioning}),ne.call(i,V,R,{hovered:!1}),V.x0===V.x1||V.y0===V.y1?V._text="":V._text=f(V,d,R,v,F)||"";var te=s.ensureSingle(Y,"g","slicetext"),K=s.ensureSingle(te,"text","",function(ae){ae.attr("data-notex",1)}),$=s.ensureUniformFontSize(c,r.determineTextFont(R,V,F.font));K.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",N?"end":U?"start":"middle").call(m.font,$).call(x.convertToTspans,c),V.textBB=m.bBox(K.node()),V.transform=T(V,{fontSize:$.size}),V.transform.fontSize=$.size,h?K.transition().attrTween("transform",function(ae){var ie=k(ae,l,fe(),[g,A]);return function(oe){return _(ie(oe))}}):K.attr("transform",_(V))}),J}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"../treemap/constants":1074,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(e,I,B){I.exports={moduleType:"trace",name:"icicle",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(e,I,B){I.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("iciclecolorway",t.colorway),i("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(e,I,B){var u=e("d3-hierarchy"),s=e("../treemap/flip_tree");I.exports=function(x,t,i){var a=i.flipX,r=i.flipY,n=i.orientation==="h",f=i.maxDepth,l=t[0],o=t[1];f&&(l=(x.height+1)*t[0]/Math.min(x.height+1,f),o=(x.height+1)*t[1]/Math.min(x.height+1,f));var c=u.partition().padding(i.pad.inner).size(n?[t[1],l]:[t[0],o])(x);return(n||a||r)&&s(c,t,{swapXY:n,flipX:a,flipY:r}),c}},{"../treemap/flip_tree":1079,"d3-hierarchy":115}],843:[function(e,I,B){var u=e("../treemap/draw"),s=e("./draw_descendants");I.exports=function(x,t,i,a){return u(x,t,i,a,{type:"icicle",drawDescendants:s})}},{"../treemap/draw":1076,"./draw_descendants":838}],844:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../lib"),x=e("../bar/uniform_text").resizeText;function t(a){var r=a._fullLayout._iciclelayer.selectAll(".trace");x(a,r,"icicle"),r.each(function(n){var f=u.select(this),l=n[0],o=l.trace;f.style("opacity",o.opacity),f.selectAll("path.surface").each(function(c){u.select(this).call(i,c,o)})})}function i(a,r,n){var f=r.data.data,l=!r.children,o=f.i,c=m.castOption(n,o,"marker.line.color")||s.defaultLine,v=m.castOption(n,o,"marker.line.width")||0;a.style("stroke-width",v).call(s.fill,f.color).call(s.stroke,c).style("opacity",l?n.leaf.opacity:null)}I.exports={style:t,styleOne:i}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(e,I,B){for(var u=e("../../plots/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,m=e("../../lib/extend").extendFlat,x=e("./constants").colormodel,t=["rgb","rgba","rgba256","hsl","hsla"],i=[],a=[],r=0;r<t.length;r++){var n=x[t[r]];i.push("For the `"+t[r]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),a.push("For the `"+t[r]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}I.exports=m({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:t,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:m({},u.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:s({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(e,I,B){var u=e("../../lib"),s=e("./constants"),m=e("fast-isnumeric"),x=e("../../plots/cartesian/axes"),t=e("../../lib").maxRowLength,i=e("./helpers").getImageSize;I.exports=function(l,o){var c,v;if(o._hasZ)c=o.z.length,v=t(o.z);else if(o._hasSource){var d=i(o.source);c=d.height,v=d.width}var p=x.getFromId(l,o.xaxis||"x"),y=x.getFromId(l,o.yaxis||"y"),g=p.d2c(o.x0)-o.dx/2,A=y.d2c(o.y0)-o.dy/2,b,M=[g,g+v*o.dx],w=[A,A+c*o.dy];if(p&&p.type==="log")for(b=0;b<v;b++)M.push(g+b*o.dx);if(y&&y.type==="log")for(b=0;b<c;b++)w.push(A+b*o.dy);o._extremes[p._id]=x.findExtremes(p,M),o._extremes[y._id]=x.findExtremes(y,w),o._scaler=n(o);var T={x0:g,y0:A,z:o.z,w:v,h:c};return[T]};function a(f,l,o,c){return function(v){return u.constrain((v-f)*l,o,c)}}function r(f,l){return function(o){return u.constrain(o,f,l)}}function n(f){var l=s.colormodel[f.colormodel],o=l.colormodel||f.colormodel,c=o.length;f._sArray=[];for(var v=0;v<c;v++)l.min[v]!==f.zmin[v]||l.max[v]!==f.zmax[v]?f._sArray.push(a(f.zmin[v],(l.max[v]-l.min[v])/(f.zmax[v]-f.zmin[v]),l.min[v],l.max[v])):f._sArray.push(r(l.min[v],l.max[v]));return function(d){for(var p=d.slice(0,c),y=0;y<c;y++){var g=p[y];if(!m(g))return!1;p[y]=f._sArray[y](g)}return p}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(e,I,B){I.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(u){return u.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(u){return u.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(u){return u.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(u){var s=u.slice(0,3);return s[1]=s[1]+"%",s[2]=s[2]+"%",s},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(u){var s=u.slice(0,4);return s[1]=s[1]+"%",s[2]=s[2]+"%",s},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("./constants"),x=e("../../snapshot/helpers").IMAGE_URL_PREFIX;I.exports=function(i,a){function r(l,o){return u.coerce(i,a,s,l,o)}r("source"),a.source&&!a.source.match(x)&&delete a.source,a._hasSource=!!a.source;var n=r("z");if(a._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),!a._hasZ&&!a._hasSource){a.visible=!1;return}r("x0"),r("y0"),r("dx"),r("dy");var f;a._hasZ?(r("colormodel","rgb"),f=m.colormodel[a.colormodel],r("zmin",f.zminDflt||f.min),r("zmax",f.zmaxDflt||f.max)):a._hasSource&&(a.colormodel="rgba256",f=m.colormodel[a.colormodel],a.zmin=f.zminDflt,a.zmax=f.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),a._length=null}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(e,I,B){I.exports=function(s,m){return"xVal"in m&&(s.x=m.xVal),"yVal"in m&&(s.y=m.yVal),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),s.color=m.color,s.colormodel=m.trace.colormodel,s.z||(s.z=m.color),s}},{}],850:[function(e,I,B){var u=e("probe-image-size/sync"),s=e("../../snapshot/helpers").IMAGE_URL_PREFIX,m=e("buffer/").Buffer;B.getImageSize=function(x){var t=x.replace(s,""),i=new m(t,"base64");return u(i)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(e,I,B){var u=e("../../components/fx"),s=e("../../lib"),m=e("./constants");I.exports=function(t,i,a){var r=t.cd[0],n=r.trace,f=t.xa,l=t.ya;if(!(u.inbox(i-r.x0,i-(r.x0+r.w*n.dx),0)>0||u.inbox(a-r.y0,a-(r.y0+r.h*n.dy),0)>0)){var o=Math.floor((i-r.x0)/n.dx),c=Math.floor(Math.abs(a-r.y0)/n.dy),v;if(n._hasZ?v=r.z[c][o]:n._hasSource&&(v=n._canvas.el.getContext("2d").getImageData(o,c,1,1).data),!!v){var d=r.hi||n.hoverinfo,p;if(d){var y=d.split("+");y.indexOf("all")!==-1&&(y=["color"]),y.indexOf("color")!==-1&&(p=!0)}var g=m.colormodel[n.colormodel],A=g.colormodel||n.colormodel,b=A.length,M=n._scaler(v),w=g.suffix,T=[];(n.hovertemplate||p)&&(T.push("["+[M[0]+w[0],M[1]+w[1],M[2]+w[2]].join(", ")),b===4&&T.push(", "+M[3]+w[3]),T.push("]"),T=T.join(""),t.extraText=A.toUpperCase()+": "+T);var _;Array.isArray(n.hovertext)&&Array.isArray(n.hovertext[c])?_=n.hovertext[c][o]:Array.isArray(n.text)&&Array.isArray(n.text[c])&&(_=n.text[c][o]);var h=l.c2p(r.y0+(c+.5)*n.dy),L=r.x0+(o+.5)*n.dx,S=r.y0+(c+.5)*n.dy,k="["+v.slice(0,n.colormodel.length).join(", ")+"]";return[s.extendFlat(t,{index:[c,o],x0:f.c2p(r.x0+o*n.dx),x1:f.c2p(r.x0+(o+1)*n.dx),y0:h,y1:h,color:M,xVal:L,xLabelVal:L,yVal:S,yLabelVal:S,zLabelVal:k,text:_,hovertemplateLabels:{zLabel:k,colorLabel:T,"color[0]Label":M[0]+w[0],"color[1]Label":M[1]+w[1],"color[2]Label":M[2]+w[2],"color[3]Label":M[3]+w[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=s.strTranslate,x=e("../../constants/xmlns_namespaces"),t=e("./constants"),i=s.isIOS()||s.isSafari()||s.isIE();I.exports=function(r,n,f,l){var o=n.xaxis,c=n.yaxis,v=!(i||r._context._exportedPlot);s.makeTraceGroups(l,f,"im").each(function(d){var p=u.select(this),y=d[0],g=y.trace,A=(g.zsmooth==="fast"||g.zsmooth===!1&&v)&&!g._hasZ&&g._hasSource&&o.type==="linear"&&c.type==="linear";g._realImage=A;var b=y.z,M=y.x0,w=y.y0,T=y.w,_=y.h,h=g.dx,L=g.dy,S,k,P,O,F,D;for(D=0;S===void 0&&D<T;)S=o.c2p(M+D*h),D++;for(D=T;k===void 0&&D>0;)k=o.c2p(M+D*h),D--;for(D=0;O===void 0&&D<_;)O=c.c2p(w+D*L),D++;for(D=_;F===void 0&&D>0;)F=c.c2p(w+D*L),D--;if(k<S&&(P=k,k=S,S=P),F<O&&(P=O,O=F,F=P),!A){var R=.5;S=Math.max(-R*o._length,S),k=Math.min((1+R)*o._length,k),O=Math.max(-R*c._length,O),F=Math.min((1+R)*c._length,F)}var U=Math.round(k-S),N=Math.round(F-O),X=U<=0||N<=0;if(X){var j=p.selectAll("image").data([]);j.exit().remove();return}function ee(te){var K=document.createElement("canvas");K.width=U,K.height=N;var $=K.getContext("2d"),ae=function(Ye){return s.constrain(Math.round(o.c2p(M+Ye*h)-S),0,U)},ie=function(Ye){return s.constrain(Math.round(c.c2p(w+Ye*L)-O),0,N)},oe=t.colormodel[g.colormodel],ue=oe.colormodel||g.colormodel,xe=oe.fmt,he;for(D=0;D<y.w;D++){var me=ae(D),be=ae(D+1);if(!(be===me||isNaN(be)||isNaN(me)))for(var Ce=0;Ce<y.h;Ce++){var Se=ie(Ce),Be=ie(Ce+1);Be===Se||isNaN(Be)||isNaN(Se)||!te(D,Ce)||(he=g._scaler(te(D,Ce)),he?$.fillStyle=ue+"("+xe(he).join(",")+")":$.fillStyle="rgba(0,0,0,0)",$.fillRect(me,Se,be-me,Be-Se))}}return K}var q=p.selectAll("image").data([d]);q.enter().append("svg:image").attr({xmlns:x.svg,preserveAspectRatio:"none"}),q.exit().remove();var G=g.zsmooth===!1?t.pixelatedStyle:"";if(A){var J=s.simpleMap(o.range,o.r2l),le=s.simpleMap(c.range,c.r2l),fe=J[1]<J[0],se=le[1]>le[0];if(fe||se){var V=S+U/2,Y=O+N/2;G+="transform:"+m(V+"px",Y+"px")+"scale("+(fe?-1:1)+","+(se?-1:1)+")"+m(-V+"px",-Y+"px")+";"}}q.attr("style",G);var ne=new Promise(function(te){if(g._hasZ)te();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===T&&g._canvas.el.height===_&&g._canvas.source===g.source)te();else{var K=document.createElement("canvas");K.width=T,K.height=_;var $=K.getContext("2d");g._image=g._image||new Image;var ae=g._image;ae.onload=function(){$.drawImage(ae,0,0),g._canvas={el:K,source:g.source},te()},ae.setAttribute("src",g.source)}}).then(function(){var te,K;if(g._hasZ)K=ee(function(ie,oe){return b[oe][ie]}),te=K.toDataURL("image/png");else if(g._hasSource)if(A)te=g.source;else{var $=g._canvas.el.getContext("2d"),ae=$.getImageData(0,0,T,_).data;K=ee(function(ie,oe){var ue=4*(oe*T+ie);return[ae[ue],ae[ue+1],ae[ue+2],ae[ue+3]]}),te=K.toDataURL("image/png")}q.attr({"xlink:href":te,height:N,width:U,x:S,y:O})});r._promises.push(ne)})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(e,I,B){var u=e("@plotly/d3");I.exports=function(m){u.select(m).selectAll(".im image").style("opacity",function(x){return x[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(e,I,B){var u=e("../../lib/extend").extendFlat,s=e("../../lib/extend").extendDeep,m=e("../../plot_api/edit_types").overrideAll,x=e("../../plots/font_attributes"),t=e("../../components/color/attributes"),i=e("../../plots/domain").attributes,a=e("../../plots/cartesian/layout_attributes"),r=e("../../plot_api/plot_template").templatedArray,n=e("../../constants/delta.js"),f=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,l=x({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:t.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},v=r("step",s({},o,{range:c}));I.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:i({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:u({},l,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:f("value")},font:u({},l,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:f("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:u({},l,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:s({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:m({range:c,visible:u({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:u({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:x({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:v,threshold:{line:{color:u({},o.line.color,{}),width:u({},o.line.width,{dflt:1}),editType:"plot"},thickness:u({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(e,I,B){var u=e("../../plots/plots");B.name="indicator",B.plot=function(s,m,x,t){u.plotBasePlot(B.name,s,m,x,t)},B.clean=function(s,m,x,t){u.cleanBasePlot(B.name,s,m,x,t)}},{"../../plots/plots":619}],857:[function(e,I,B){function u(s,m){var x=[],t=m.value;typeof m._lastValue!="number"&&(m._lastValue=m.value);var i=m._lastValue,a=i;return m._hasDelta&&typeof m.delta.reference=="number"&&(a=m.delta.reference),x[0]={y:t,lastY:i,delta:t-a,relativeDelta:(t-a)/a},x}I.exports={calc:u}},{}],858:[function(e,I,B){I.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("../../plots/domain").defaults,x=e("../../plot_api/plot_template"),t=e("../../plots/array_container_defaults"),i=e("./constants.js"),a=e("../../plots/cartesian/tick_value_defaults"),r=e("../../plots/cartesian/tick_mark_defaults"),n=e("../../plots/cartesian/tick_label_defaults"),f=e("../../plots/cartesian/prefix_suffix_defaults");function l(c,v,d,p){function y(D,R){return u.coerce(c,v,s,D,R)}m(v,p,y),y("mode"),v._hasNumber=v.mode.indexOf("number")!==-1,v._hasDelta=v.mode.indexOf("delta")!==-1,v._hasGauge=v.mode.indexOf("gauge")!==-1;var g=y("value");v._range=[0,typeof g=="number"?1.5*g:1];var A=new Array(2),b;v._hasNumber&&(y("number.valueformat"),y("number.font.color",p.font.color),y("number.font.family",p.font.family),y("number.font.size"),v.number.font.size===void 0&&(v.number.font.size=i.defaultNumberFontSize,A[0]=!0),y("number.prefix"),y("number.suffix"),b=v.number.font.size);var M;v._hasDelta&&(y("delta.font.color",p.font.color),y("delta.font.family",p.font.family),y("delta.font.size"),v.delta.font.size===void 0&&(v.delta.font.size=(v._hasNumber?.5:1)*(b||i.defaultNumberFontSize),A[1]=!0),y("delta.reference",v.value),y("delta.relative"),y("delta.valueformat",v.delta.relative?"2%":""),y("delta.increasing.symbol"),y("delta.increasing.color"),y("delta.decreasing.symbol"),y("delta.decreasing.color"),y("delta.position"),M=v.delta.font.size),v._scaleNumbers=(!v._hasNumber||A[0])&&(!v._hasDelta||A[1])||!1,y("title.font.color",p.font.color),y("title.font.family",p.font.family),y("title.font.size",.25*(b||M||i.defaultNumberFontSize)),y("title.text");var w,T,_,h;function L(D,R){return u.coerce(w,T,s.gauge,D,R)}function S(D,R){return u.coerce(_,h,s.gauge.axis,D,R)}if(v._hasGauge){w=c.gauge,w||(w={}),T=x.newContainer(v,"gauge"),L("shape");var k=v._isBullet=v.gauge.shape==="bullet";k||y("title.align","center");var P=v._isAngular=v.gauge.shape==="angular";P||y("align","center"),L("bgcolor",p.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var O=i.valueThickness*(v.gauge.shape==="bullet"?.5:1);L("bar.thickness",O),t(w,T,{name:"steps",handleItemDefaults:o}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),_={},w&&(_=w.axis||{}),h=x.newContainer(T,"axis"),S("visible"),v._range=S("range",v._range);var F={outerTicks:!0};a(_,h,S,"linear"),f(_,h,S,"linear",F),n(_,h,S,"linear",F),r(_,h,S,F)}else y("title.align","center"),y("align","center"),v._isAngular=v._isBullet=!1;v._length=null}function o(c,v){function d(p,y){return u.coerce(c,v,s.gauge.steps,p,y)}d("color"),d("line.color"),d("line.width"),d("range"),d("thickness")}I.exports={supplyDefaults:l}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(e,I,B){I.exports={moduleType:"trace",name:"indicator",basePlotModule:e("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc").calc,plot:e("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(e,I,B){var u=e("@plotly/d3"),s=e("d3-interpolate").interpolate,m=e("d3-interpolate").interpolateNumber,x=e("../../lib"),t=x.strScale,i=x.strTranslate,a=x.rad2deg,r=e("../../constants/alignment").MID_SHIFT,n=e("../../components/drawing"),f=e("./constants"),l=e("../../lib/svg_text_utils"),o=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/axis_defaults"),v=e("../../plots/cartesian/position_defaults"),d=e("../../plots/cartesian/layout_attributes"),p=e("../../components/color"),y={left:"start",center:"middle",right:"end"},g={left:0,center:.5,right:1},A=/[yzafpnmkMGTPEZY]/;function b(F){return F&&F.duration>0}I.exports=function(D,R,U,N){var X=D._fullLayout,j;b(U)&&N&&(j=N()),x.makeTraceGroups(X._indicatorlayer,R,"trace").each(function(ee){var q=ee[0],G=q.trace,J=u.select(this),le=G._hasGauge,fe=G._isAngular,se=G._isBullet,V=G.domain,Y={w:X._size.w*(V.x[1]-V.x[0]),h:X._size.h*(V.y[1]-V.y[0]),l:X._size.l+X._size.w*V.x[0],r:X._size.r+X._size.w*(1-V.x[1]),t:X._size.t+X._size.h*(1-V.y[1]),b:X._size.b+X._size.h*V.y[0]},ne=Y.l+Y.w/2,te=Y.t+Y.h/2,K=Math.min(Y.w/2,Y.h),$=f.innerRadius*K,ae,ie,oe,ue=G.align||"center";if(ie=te,!le)ae=Y.l+g[ue]*Y.w,oe=function(Te){return S(Te,Y.w,Y.h)};else if(fe&&(ae=ne,ie=te+K/2,oe=function(Te){return k(Te,.9*$)}),se){var xe=f.bulletPadding,he=1-f.bulletNumberDomainSize+xe;ae=Y.l+(he+(1-he)*g[ue])*Y.w,oe=function(Te){return S(Te,(f.bulletNumberDomainSize-xe)*Y.w,Y.h)}}T(D,J,ee,{numbersX:ae,numbersY:ie,numbersScaler:oe,transitionOpts:U,onComplete:j});var me,be;le&&(me={range:G.gauge.axis.range,color:G.gauge.bgcolor,line:{color:G.gauge.bordercolor,width:0},thickness:1},be={range:G.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:G.gauge.bordercolor,width:G.gauge.borderwidth},thickness:1});var Ce=J.selectAll("g.angular").data(fe?ee:[]);Ce.exit().remove();var Se=J.selectAll("g.angularaxis").data(fe?ee:[]);Se.exit().remove(),fe&&w(D,J,ee,{radius:K,innerRadius:$,gauge:Ce,layer:Se,size:Y,gaugeBg:me,gaugeOutline:be,transitionOpts:U,onComplete:j});var Be=J.selectAll("g.bullet").data(se?ee:[]);Be.exit().remove();var Ye=J.selectAll("g.bulletaxis").data(se?ee:[]);Ye.exit().remove(),se&&M(D,J,ee,{gauge:Be,layer:Ye,size:Y,gaugeBg:me,gaugeOutline:be,transitionOpts:U,onComplete:j});var Xe=J.selectAll("text.title").data(ee);Xe.exit().remove(),Xe.enter().append("text").classed("title",!0),Xe.attr("text-anchor",function(){return se?y.right:y[G.title.align]}).text(G.title.text).call(n.font,G.title.font).call(l.convertToTspans,D),Xe.attr("transform",function(){var Te=Y.l+Y.w*g[G.title.align],Ie,Ze=f.titlePadding,rt=n.bBox(Xe.node());if(le){if(fe)if(G.gauge.axis.visible){var Ge=n.bBox(Se.node());Ie=Ge.top-Ze-rt.bottom}else Ie=Y.t+Y.h/2-K/2-rt.bottom-Ze;se&&(Ie=ie-(rt.top+rt.bottom)/2,Te=Y.l-f.bulletPadding*Y.w)}else Ie=G._numbersTop-Ze-rt.bottom;return i(Te,Ie)})})};function M(F,D,R,U){var N=R[0].trace,X=U.gauge,j=U.layer,ee=U.gaugeBg,q=U.gaugeOutline,G=U.size,J=N.domain,le=U.transitionOpts,fe=U.onComplete,se,V,Y,ne,te;X.enter().append("g").classed("bullet",!0),X.attr("transform",i(G.l,G.t)),j.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),j.selectAll("g.xbulletaxistick,path,text").remove();var K=G.h,$=N.gauge.bar.thickness*K,ae=J.x[0],ie=J.x[0]+(J.x[1]-J.x[0])*(N._hasNumber||N._hasDelta?1-f.bulletNumberDomainSize:1);se=L(F,N.gauge.axis),se._id="xbulletaxis",se.domain=[ae,ie],se.setScale(),V=o.calcTicks(se),Y=o.makeTransTickFn(se),ne=o.getTickSigns(se)[2],te=G.t+G.h,se.visible&&(o.drawTicks(F,se,{vals:se.ticks==="inside"?o.clipEnds(se,V):V,layer:j,path:o.makeTickPath(se,te,ne),transFn:Y}),o.drawLabels(F,se,{vals:V,layer:j,transFn:Y,labelFns:o.makeLabelFns(se,te)}));function oe(Se){Se.attr("width",function(Be){return Math.max(0,se.c2p(Be.range[1])-se.c2p(Be.range[0]))}).attr("x",function(Be){return se.c2p(Be.range[0])}).attr("y",function(Be){return .5*(1-Be.thickness)*K}).attr("height",function(Be){return Be.thickness*K})}var ue=[ee].concat(N.gauge.steps),xe=X.selectAll("g.bg-bullet").data(ue);xe.enter().append("g").classed("bg-bullet",!0).append("rect"),xe.select("rect").call(oe).call(_),xe.exit().remove();var he=X.selectAll("g.value-bullet").data([N.gauge.bar]);he.enter().append("g").classed("value-bullet",!0).append("rect"),he.select("rect").attr("height",$).attr("y",(K-$)/2).call(_),b(le)?he.select("rect").transition().duration(le.duration).ease(le.easing).each("end",function(){fe&&fe()}).each("interrupt",function(){fe&&fe()}).attr("width",Math.max(0,se.c2p(Math.min(N.gauge.axis.range[1],R[0].y)))):he.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,se.c2p(Math.min(N.gauge.axis.range[1],R[0].y))):0),he.exit().remove();var me=R.filter(function(){return N.gauge.threshold.value||N.gauge.threshold.value===0}),be=X.selectAll("g.threshold-bullet").data(me);be.enter().append("g").classed("threshold-bullet",!0).append("line"),be.select("line").attr("x1",se.c2p(N.gauge.threshold.value)).attr("x2",se.c2p(N.gauge.threshold.value)).attr("y1",(1-N.gauge.threshold.thickness)/2*K).attr("y2",(1-(1-N.gauge.threshold.thickness)/2)*K).call(p.stroke,N.gauge.threshold.line.color).style("stroke-width",N.gauge.threshold.line.width),be.exit().remove();var Ce=X.selectAll("g.gauge-outline").data([q]);Ce.enter().append("g").classed("gauge-outline",!0).append("rect"),Ce.select("rect").call(oe).call(_),Ce.exit().remove()}function w(F,D,R,U){var N=R[0].trace,X=U.size,j=U.radius,ee=U.innerRadius,q=U.gaugeBg,G=U.gaugeOutline,J=[X.l+X.w/2,X.t+X.h/2+j/2],le=U.gauge,fe=U.layer,se=U.transitionOpts,V=U.onComplete,Y=Math.PI/2;function ne(ze){var We=N.gauge.axis.range[0],mt=N.gauge.axis.range[1],Ft=(ze-We)/(mt-We)*Math.PI-Y;return Ft<-Y?-Y:Ft>Y?Y:Ft}function te(ze){return u.svg.arc().innerRadius((ee+j)/2-ze/2*(j-ee)).outerRadius((ee+j)/2+ze/2*(j-ee)).startAngle(-Y)}function K(ze){ze.attr("d",function(We){return te(We.thickness).startAngle(ne(We.range[0])).endAngle(ne(We.range[1]))()})}var $,ae,ie,oe;le.enter().append("g").classed("angular",!0),le.attr("transform",i(J[0],J[1])),fe.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),fe.selectAll("g.xangularaxistick,path,text").remove(),$=L(F,N.gauge.axis),$.type="linear",$.range=N.gauge.axis.range,$._id="xangularaxis",$.ticklabeloverflow="allow",$.setScale();var ue=function(ze){return($.range[0]-ze.x)/($.range[1]-$.range[0])*Math.PI+Math.PI},xe={},he=o.makeLabelFns($,0),me=he.labelStandoff;xe.xFn=function(ze){var We=ue(ze);return Math.cos(We)*me},xe.yFn=function(ze){var We=ue(ze),mt=Math.sin(We)>0?.2:1;return-Math.sin(We)*(me+ze.fontSize*mt)+Math.abs(Math.cos(We))*(ze.fontSize*r)},xe.anchorFn=function(ze){var We=ue(ze),mt=Math.cos(We);return Math.abs(mt)<.1?"middle":mt>0?"start":"end"},xe.heightFn=function(ze,We,mt){var Ft=ue(ze);return-.5*(1+Math.sin(Ft))*mt};var be=function(ze){return i(J[0]+j*Math.cos(ze),J[1]-j*Math.sin(ze))};ie=function(ze){return be(ue(ze))};var Ce=function(ze){var We=ue(ze);return be(We)+"rotate("+-a(We)+")"};if(ae=o.calcTicks($),oe=o.getTickSigns($)[2],$.visible){oe=$.ticks==="inside"?-1:1;var Se=($.linewidth||1)/2;o.drawTicks(F,$,{vals:ae,layer:fe,path:"M"+oe*Se+",0h"+oe*$.ticklen,transFn:Ce}),o.drawLabels(F,$,{vals:ae,layer:fe,transFn:ie,labelFns:xe})}var Be=[q].concat(N.gauge.steps),Ye=le.selectAll("g.bg-arc").data(Be);Ye.enter().append("g").classed("bg-arc",!0).append("path"),Ye.select("path").call(K).call(_),Ye.exit().remove();var Xe=te(N.gauge.bar.thickness),Te=le.selectAll("g.value-arc").data([N.gauge.bar]);Te.enter().append("g").classed("value-arc",!0).append("path");var Ie=Te.select("path");b(se)?(Ie.transition().duration(se.duration).ease(se.easing).each("end",function(){V&&V()}).each("interrupt",function(){V&&V()}).attrTween("d",h(Xe,ne(R[0].lastY),ne(R[0].y))),N._lastValue=R[0].y):Ie.attr("d",typeof R[0].y=="number"?Xe.endAngle(ne(R[0].y)):"M0,0Z"),Ie.call(_),Te.exit().remove(),Be=[];var Ze=N.gauge.threshold.value;(Ze||Ze===0)&&Be.push({range:[Ze,Ze],color:N.gauge.threshold.color,line:{color:N.gauge.threshold.line.color,width:N.gauge.threshold.line.width},thickness:N.gauge.threshold.thickness});var rt=le.selectAll("g.threshold-arc").data(Be);rt.enter().append("g").classed("threshold-arc",!0).append("path"),rt.select("path").call(K).call(_),rt.exit().remove();var Ge=le.selectAll("g.gauge-outline").data([G]);Ge.enter().append("g").classed("gauge-outline",!0).append("path"),Ge.select("path").call(K).call(_),Ge.exit().remove()}function T(F,D,R,U){var N=R[0].trace,X=U.numbersX,j=U.numbersY,ee=N.align||"center",q=y[ee],G=U.transitionOpts,J=U.onComplete,le=x.ensureSingle(D,"g","numbers"),fe,se,V,Y=[];N._hasNumber&&Y.push("number"),N._hasDelta&&(Y.push("delta"),N.delta.position==="left"&&Y.reverse());var ne=le.selectAll("text").data(Y);ne.enter().append("text"),ne.attr("text-anchor",function(){return q}).attr("class",function(be){return be}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ne.exit().remove();function te(be,Ce,Se,Be){if(be.match("s")&&Se>=0!=Be>=0&&!Ce(Se).slice(-1).match(A)&&!Ce(Be).slice(-1).match(A)){var Ye=be.slice().replace("s","f").replace(/\d+/,function(Te){return parseInt(Te)-1}),Xe=L(F,{tickformat:Ye});return function(Te){return Math.abs(Te)<1?o.tickText(Xe,Te).text:Ce(Te)}}else return Ce}function K(){var be=L(F,{tickformat:N.number.valueformat},N._range);be.setScale(),o.prepTicks(be);var Ce=function(Te){return o.tickText(be,Te).text},Se=N.number.suffix,Be=N.number.prefix,Ye=le.select("text.number");function Xe(){var Te=typeof R[0].y=="number"?Be+Ce(R[0].y)+Se:"-";Ye.text(Te).call(n.font,N.number.font).call(l.convertToTspans,F)}return b(G)?Ye.transition().duration(G.duration).ease(G.easing).each("end",function(){Xe(),J&&J()}).each("interrupt",function(){Xe(),J&&J()}).attrTween("text",function(){var Te=u.select(this),Ie=m(R[0].lastY,R[0].y);N._lastValue=R[0].y;var Ze=te(N.number.valueformat,Ce,R[0].lastY,R[0].y);return function(rt){Te.text(Be+Ze(Ie(rt))+Se)}}):Xe(),fe=P(Be+Ce(R[0].y)+Se,N.number.font,q,F),Ye}function $(){var be=L(F,{tickformat:N.delta.valueformat},N._range);be.setScale(),o.prepTicks(be);var Ce=function(Ie){return o.tickText(be,Ie).text},Se=function(Ie){var Ze=N.delta.relative?Ie.relativeDelta:Ie.delta;return Ze},Be=function(Ie,Ze){return Ie===0||typeof Ie!="number"||isNaN(Ie)?"-":(Ie>0?N.delta.increasing.symbol:N.delta.decreasing.symbol)+Ze(Ie)},Ye=function(Ie){return Ie.delta>=0?N.delta.increasing.color:N.delta.decreasing.color};N._deltaLastValue===void 0&&(N._deltaLastValue=Se(R[0]));var Xe=le.select("text.delta");Xe.call(n.font,N.delta.font).call(p.fill,Ye({delta:N._deltaLastValue}));function Te(){Xe.text(Be(Se(R[0]),Ce)).call(p.fill,Ye(R[0])).call(l.convertToTspans,F)}return b(G)?Xe.transition().duration(G.duration).ease(G.easing).tween("text",function(){var Ie=u.select(this),Ze=Se(R[0]),rt=N._deltaLastValue,Ge=te(N.delta.valueformat,Ce,rt,Ze),ze=m(rt,Ze);return N._deltaLastValue=Ze,function(We){Ie.text(Be(ze(We),Ge)),Ie.call(p.fill,Ye({delta:ze(We)}))}}).each("end",function(){Te(),J&&J()}).each("interrupt",function(){Te(),J&&J()}):Te(),se=P(Be(Se(R[0]),Ce),N.delta.font,q,F),Xe}var ae=N.mode+N.align,ie;if(N._hasDelta&&(ie=$(),ae+=N.delta.position+N.delta.font.size+N.delta.font.family+N.delta.valueformat,ae+=N.delta.increasing.symbol+N.delta.decreasing.symbol,V=se),N._hasNumber&&(K(),ae+=N.number.font.size+N.number.font.family+N.number.valueformat+N.number.suffix+N.number.prefix,V=fe),N._hasDelta&&N._hasNumber){var oe=[(fe.left+fe.right)/2,(fe.top+fe.bottom)/2],ue=[(se.left+se.right)/2,(se.top+se.bottom)/2],xe,he,me=.75*N.delta.font.size;N.delta.position==="left"&&(xe=O(N,"deltaPos",0,-1*(fe.width*g[N.align]+se.width*(1-g[N.align])+me),ae,Math.min),he=oe[1]-ue[1],V={width:fe.width+se.width+me,height:Math.max(fe.height,se.height),left:se.left+xe,right:fe.right,top:Math.min(fe.top,se.top+he),bottom:Math.max(fe.bottom,se.bottom+he)}),N.delta.position==="right"&&(xe=O(N,"deltaPos",0,fe.width*(1-g[N.align])+se.width*g[N.align]+me,ae,Math.max),he=oe[1]-ue[1],V={width:fe.width+se.width+me,height:Math.max(fe.height,se.height),left:fe.left,right:se.right+xe,top:Math.min(fe.top,se.top+he),bottom:Math.max(fe.bottom,se.bottom+he)}),N.delta.position==="bottom"&&(xe=null,he=se.height,V={width:Math.max(fe.width,se.width),height:fe.height+se.height,left:Math.min(fe.left,se.left),right:Math.max(fe.right,se.right),top:fe.bottom-fe.height,bottom:fe.bottom+se.height}),N.delta.position==="top"&&(xe=null,he=fe.top,V={width:Math.max(fe.width,se.width),height:fe.height+se.height,left:Math.min(fe.left,se.left),right:Math.max(fe.right,se.right),top:fe.bottom-fe.height-se.height,bottom:fe.bottom}),ie.attr({dx:xe,dy:he})}(N._hasNumber||N._hasDelta)&&le.attr("transform",function(){var be=U.numbersScaler(V);ae+=be[2];var Ce=O(N,"numbersScale",1,be[0],ae,Math.min),Se;N._scaleNumbers||(Ce=1),N._isAngular?Se=j-Ce*V.bottom:Se=j-Ce*(V.top+V.bottom)/2,N._numbersTop=Ce*V.top+Se;var Be=V[ee];ee==="center"&&(Be=(V.left+V.right)/2);var Ye=X-Ce*Be;return Ye=O(N,"numbersTranslate",0,Ye,ae,Math.max),i(Ye,Se)+t(Ce)})}function _(F){F.each(function(D){p.stroke(u.select(this),D.line.color)}).each(function(D){p.fill(u.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function h(F,D,R){return function(){var U=s(D,R);return function(N){return F.endAngle(U(N))()}}}function L(F,D,R){var U=F._fullLayout,N=x.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},D),X={type:"linear",_id:"x"+D._id},j={letter:"x",font:U.font,noHover:!0,noTickson:!0};function ee(q,G){return x.coerce(N,X,d,q,G)}return c(N,X,ee,j,U),v(N,X,ee,j),X}function S(F,D,R){var U=Math.min(D/F.width,R/F.height);return[U,F,D+"x"+R]}function k(F,D){var R=Math.sqrt(F.width/2*(F.width/2)+F.height*F.height),U=D/R;return[U,F,D]}function P(F,D,R,U){var N=document.createElementNS("http://www.w3.org/2000/svg","text"),X=u.select(N);return X.text(F).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",F).call(l.convertToTspans,U).call(n.font,D),n.bBox(X.node())}function O(F,D,R,U,N,X){var j="_cache"+D;F[j]&&F[j].key===N||(F[j]={key:N,value:R});var ee=x.aggNums(X,null,[F[j].value,U],2);return F[j].value=ee,ee}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(e,I,B){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../mesh3d/attributes"),t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll;function r(l){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function n(l){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var f=I.exports=a(i({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:n(),y:n(),z:n()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),valuehoverformat:s("value",1),showlegend:i({},t.showlegend,{dflt:!1})},u("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,lightposition:x.lightposition,lighting:x.lighting,flatshading:x.flatshading,contour:x.contour,hoverinfo:i({},t.hoverinfo)}),"calc","nested");f.flatshading.dflt=!0,f.lighting.facenormalsepsilon.dflt=0,f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(e,I,B){var u=e("../../components/colorscale/calc"),s=e("../streamtube/calc").processGrid,m=e("../streamtube/calc").filter;I.exports=function(t,i){i._len=Math.min(i.x.length,i.y.length,i.z.length,i.value.length),i._x=m(i.x,i._len),i._y=m(i.y,i._len),i._z=m(i.z,i._len),i._value=m(i.value,i._len);var a=s(i);i._gridFill=a.fill,i._Xs=a.Xs,i._Ys=a.Ys,i._Zs=a.Zs,i._len=a.len;for(var r=1/0,n=-1/0,f=0;f<i._len;f++){var l=i._value[f];r=Math.min(r,l),n=Math.max(n,l)}i._minValues=r,i._maxValues=n,i._vMin=i.isomin===void 0||i.isomin===null?r:i.isomin,i._vMax=i.isomax===void 0||i.isomin===null?n:i.isomax,u(t,i,{vals:[i._vMin,i._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1041}],864:[function(e,I,B){var u=e("../../../stackgl_modules").gl_mesh3d,s=e("../../lib/gl_format_color").parseColorScale,m=e("../../lib/str2rgbarray"),x=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),i=function(o,c){for(var v=c.length-1;v>0;v--){var d=Math.min(c[v],c[v-1]),p=Math.max(c[v],c[v-1]);if(p>d&&d<o&&o<=p)return{id:v,distRatio:(p-o)/(p-d)}}return{id:0,distRatio:0}};function a(o,c,v){this.scene=o,this.uid=v,this.mesh=c,this.name="",this.data=null,this.showContour=!1}var r=a.prototype;r.handlePick=function(o){if(o.object===this.mesh){var c=o.data.index,v=this.data._meshX[c],d=this.data._meshY[c],p=this.data._meshZ[c],y=this.data._Ys.length,g=this.data._Zs.length,A=i(v,this.data._Xs).id,b=i(d,this.data._Ys).id,M=i(p,this.data._Zs).id,w=o.index=M+g*b+g*y*A;o.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&T[w]!==void 0?o.textLabel=T[w]:T&&(o.textLabel=T),!0}},r.update=function(o){var c=this.scene,v=c.fullSceneLayout;this.data=f(o);function d(b,M,w,T){return M.map(function(_){return b.d2l(_,0,T)*w})}var p=t(d(v.xaxis,o._meshX,c.dataScale[0],o.xcalendar),d(v.yaxis,o._meshY,c.dataScale[1],o.ycalendar),d(v.zaxis,o._meshZ,c.dataScale[2],o.zcalendar)),y=t(o._meshI,o._meshJ,o._meshK),g={positions:p,cells:y,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:m(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},A=x(o);g.vertexIntensity=o._meshIntensity,g.vertexIntensityBounds=[A.min,A.max],g.colormap=s(o),this.mesh.update(g)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(o){o._meshI=[],o._meshJ=[],o._meshK=[];var c=o.surface.show,v=o.spaceframe.show,d=o.surface.fill,p=o.spaceframe.fill,y=!1,g=!1,A=0,b,M,w=o._Xs,T=o._Ys,_=o._Zs,h=w.length,L=T.length,S=_.length,k=n.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(It,Ct,lt){switch(k){case 5:return lt+S*Ct+S*L*It;case 4:return lt+S*It+S*h*Ct;case 3:return Ct+L*lt+L*S*It;case 2:return Ct+L*It+L*h*lt;case 1:return It+h*lt+h*S*Ct;default:return It+h*Ct+h*L*lt}},O=o._minValues,F=o._maxValues,D=o._vMin,R=o._vMax,U,N,X,j;function ee(It,Ct,lt){for(var dt=j.length,et=M;et<dt;et++)if(It===U[et]&&Ct===N[et]&&lt===X[et])return et;return-1}function q(){M=b}function G(){U=[],N=[],X=[],j=[],b=0,q()}function J(It,Ct,lt,dt){return U.push(It),N.push(Ct),X.push(lt),j.push(dt),b++,b-1}function le(It,Ct,lt){return o._meshI.push(It),o._meshJ.push(Ct),o._meshK.push(lt),A++,A-1}function fe(It,Ct,lt){for(var dt=[],et=0;et<It.length;et++)dt[et]=(It[et]+Ct[et]+lt[et])/3;return dt}function se(It,Ct,lt){for(var dt=[],et=0;et<It.length;et++)dt[et]=It[et]*(1-lt)+lt*Ct[et];return dt}var V;function Y(It){V=It}function ne(It,Ct){var lt=It[0],dt=It[1],et=It[2],Pe=fe(lt,dt,et),Je=Math.sqrt(1-V),it=se(Pe,lt,Je),ht=se(Pe,dt,Je),zt=se(Pe,et,Je),Lt=Ct[0],Vt=Ct[1],$t=Ct[2];return{xyzv:[[lt,dt,ht],[ht,it,lt],[dt,et,zt],[zt,ht,dt],[et,lt,it],[it,zt,et]],abc:[[Lt,Vt,-1],[-1,-1,Lt],[Vt,$t,-1],[-1,-1,Vt],[$t,Lt,-1],[-1,-1,$t]]}}function te(It,Ct){return It==="all"||It===null?!0:It.indexOf(Ct)>-1}function K(It,Ct){return It===null?Ct:It}function $(It,Ct,lt){q();var dt=[Ct],et=[lt];if(V>=1)dt=[Ct],et=[lt];else if(V>0){var Pe=ne(Ct,lt);dt=Pe.xyzv,et=Pe.abc}for(var Je=0;Je<dt.length;Je++){Ct=dt[Je],lt=et[Je];for(var it=[],ht=0;ht<3;ht++){var zt=Ct[ht][0],Lt=Ct[ht][1],Vt=Ct[ht][2],$t=Ct[ht][3],Ht=lt[ht]>-1?lt[ht]:ee(zt,Lt,Vt);Ht>-1?it[ht]=Ht:it[ht]=J(zt,Lt,Vt,K(It,$t))}le(it[0],it[1],it[2])}}function ae(It,Ct,lt){var dt=function(et,Pe,Je){$(It,[Ct[et],Ct[Pe],Ct[Je]],[lt[et],lt[Pe],lt[Je]])};dt(0,1,2),dt(2,3,0)}function ie(It,Ct,lt){var dt=function(et,Pe,Je){$(It,[Ct[et],Ct[Pe],Ct[Je]],[lt[et],lt[Pe],lt[Je]])};dt(0,1,2),dt(3,0,1),dt(2,3,0),dt(1,2,3)}function oe(It,Ct,lt,dt){var et=It[3];et<lt&&(et=lt),et>dt&&(et=dt);for(var Pe=(It[3]-et)/(It[3]-Ct[3]+1e-9),Je=[],it=0;it<4;it++)Je[it]=(1-Pe)*It[it]+Pe*Ct[it];return Je}function ue(It,Ct,lt){return It>=Ct&&It<=lt}function xe(It){var Ct=.001*(R-D);return It>=D-Ct&&It<=R+Ct}function he(It){for(var Ct=[],lt=0;lt<4;lt++){var dt=It[lt];Ct.push([o._x[dt],o._y[dt],o._z[dt],o._value[dt]])}return Ct}var me=3;function be(It,Ct,lt,dt,et,Pe){Pe||(Pe=1),lt=[-1,-1,-1];var Je=!1,it=[ue(Ct[0][3],dt,et),ue(Ct[1][3],dt,et),ue(Ct[2][3],dt,et)];if(!it[0]&&!it[1]&&!it[2])return!1;var ht=function(Lt,Vt,$t){return xe(Vt[0][3])&&xe(Vt[1][3])&&xe(Vt[2][3])?($(Lt,Vt,$t),!0):Pe<me?be(Lt,Vt,$t,D,R,++Pe):!1};if(it[0]&&it[1]&&it[2])return ht(It,Ct,lt)||Je;var zt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Lt){if(it[Lt[0]]&&it[Lt[1]]&&!it[Lt[2]]){var Vt=Ct[Lt[0]],$t=Ct[Lt[1]],Ht=Ct[Lt[2]],tr=oe(Ht,Vt,dt,et),qe=oe(Ht,$t,dt,et);Je=ht(It,[qe,tr,Vt],[-1,-1,lt[Lt[0]]])||Je,Je=ht(It,[Vt,$t,qe],[lt[Lt[0]],lt[Lt[1]],-1])||Je,zt=!0}}),zt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Lt){if(it[Lt[0]]&&!it[Lt[1]]&&!it[Lt[2]]){var Vt=Ct[Lt[0]],$t=Ct[Lt[1]],Ht=Ct[Lt[2]],tr=oe($t,Vt,dt,et),qe=oe(Ht,Vt,dt,et);Je=ht(It,[qe,tr,Vt],[-1,-1,lt[Lt[0]]])||Je,zt=!0}}),Je}function Ce(It,Ct,lt,dt){var et=!1,Pe=he(Ct),Je=[ue(Pe[0][3],lt,dt),ue(Pe[1][3],lt,dt),ue(Pe[2][3],lt,dt),ue(Pe[3][3],lt,dt)];if(!Je[0]&&!Je[1]&&!Je[2]&&!Je[3])return et;if(Je[0]&&Je[1]&&Je[2]&&Je[3])return g&&(et=ie(It,Pe,Ct)||et),et;var it=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ht){if(Je[ht[0]]&&Je[ht[1]]&&Je[ht[2]]&&!Je[ht[3]]){var zt=Pe[ht[0]],Lt=Pe[ht[1]],Vt=Pe[ht[2]],$t=Pe[ht[3]];if(g)et=$(It,[zt,Lt,Vt],[Ct[ht[0]],Ct[ht[1]],Ct[ht[2]]])||et;else{var Ht=oe($t,zt,lt,dt),tr=oe($t,Lt,lt,dt),qe=oe($t,Vt,lt,dt);et=$(null,[Ht,tr,qe],[-1,-1,-1])||et}it=!0}}),it||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ht){if(Je[ht[0]]&&Je[ht[1]]&&!Je[ht[2]]&&!Je[ht[3]]){var zt=Pe[ht[0]],Lt=Pe[ht[1]],Vt=Pe[ht[2]],$t=Pe[ht[3]],Ht=oe(Vt,zt,lt,dt),tr=oe(Vt,Lt,lt,dt),qe=oe($t,Lt,lt,dt),xt=oe($t,zt,lt,dt);g?(et=$(It,[zt,xt,Ht],[Ct[ht[0]],-1,-1])||et,et=$(It,[Lt,tr,qe],[Ct[ht[1]],-1,-1])||et):et=ae(null,[Ht,tr,qe,xt],[-1,-1,-1,-1])||et,it=!0}}),it)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ht){if(Je[ht[0]]&&!Je[ht[1]]&&!Je[ht[2]]&&!Je[ht[3]]){var zt=Pe[ht[0]],Lt=Pe[ht[1]],Vt=Pe[ht[2]],$t=Pe[ht[3]],Ht=oe(Lt,zt,lt,dt),tr=oe(Vt,zt,lt,dt),qe=oe($t,zt,lt,dt);g?(et=$(It,[zt,Ht,tr],[Ct[ht[0]],-1,-1])||et,et=$(It,[zt,tr,qe],[Ct[ht[0]],-1,-1])||et,et=$(It,[zt,qe,Ht],[Ct[ht[0]],-1,-1])||et):et=$(null,[Ht,tr,qe],[-1,-1,-1])||et,it=!0}}),et}function Se(It,Ct,lt,dt,et,Pe,Je,it,ht,zt,Lt){var Vt=!1;return y&&(te(It,"A")&&(Vt=Ce(null,[Ct,lt,dt,Pe],zt,Lt)||Vt),te(It,"B")&&(Vt=Ce(null,[lt,dt,et,ht],zt,Lt)||Vt),te(It,"C")&&(Vt=Ce(null,[lt,Pe,Je,ht],zt,Lt)||Vt),te(It,"D")&&(Vt=Ce(null,[dt,Pe,it,ht],zt,Lt)||Vt),te(It,"E")&&(Vt=Ce(null,[lt,dt,Pe,ht],zt,Lt)||Vt)),g&&(Vt=Ce(It,[lt,dt,Pe,ht],zt,Lt)||Vt),Vt}function Be(It,Ct,lt,dt,et,Pe,Je,it){return[it[0]===!0?!0:be(It,he([Ct,lt,dt]),[Ct,lt,dt],Pe,Je),it[1]===!0?!0:be(It,he([dt,et,Ct]),[dt,et,Ct],Pe,Je)]}function Ye(It,Ct,lt,dt,et,Pe,Je,it,ht){return it?Be(It,Ct,lt,et,dt,Pe,Je,ht):Be(It,lt,et,dt,Ct,Pe,Je,ht)}function Xe(It,Ct,lt,dt,et,Pe,Je){var it=!1,ht,zt,Lt,Vt,$t=function(){it=be(It,[ht,zt,Lt],[-1,-1,-1],et,Pe)||it,it=be(It,[Lt,Vt,ht],[-1,-1,-1],et,Pe)||it},Ht=Je[0],tr=Je[1],qe=Je[2];return Ht&&(ht=se(he([P(Ct,lt-0,dt-0)])[0],he([P(Ct-1,lt-0,dt-0)])[0],Ht),zt=se(he([P(Ct,lt-0,dt-1)])[0],he([P(Ct-1,lt-0,dt-1)])[0],Ht),Lt=se(he([P(Ct,lt-1,dt-1)])[0],he([P(Ct-1,lt-1,dt-1)])[0],Ht),Vt=se(he([P(Ct,lt-1,dt-0)])[0],he([P(Ct-1,lt-1,dt-0)])[0],Ht),$t()),tr&&(ht=se(he([P(Ct-0,lt,dt-0)])[0],he([P(Ct-0,lt-1,dt-0)])[0],tr),zt=se(he([P(Ct-0,lt,dt-1)])[0],he([P(Ct-0,lt-1,dt-1)])[0],tr),Lt=se(he([P(Ct-1,lt,dt-1)])[0],he([P(Ct-1,lt-1,dt-1)])[0],tr),Vt=se(he([P(Ct-1,lt,dt-0)])[0],he([P(Ct-1,lt-1,dt-0)])[0],tr),$t()),qe&&(ht=se(he([P(Ct-0,lt-0,dt)])[0],he([P(Ct-0,lt-0,dt-1)])[0],qe),zt=se(he([P(Ct-0,lt-1,dt)])[0],he([P(Ct-0,lt-1,dt-1)])[0],qe),Lt=se(he([P(Ct-1,lt-1,dt)])[0],he([P(Ct-1,lt-1,dt-1)])[0],qe),Vt=se(he([P(Ct-1,lt-0,dt)])[0],he([P(Ct-1,lt-0,dt-1)])[0],qe),$t()),it}function Te(It,Ct,lt,dt,et,Pe,Je,it,ht,zt,Lt,Vt){var $t=It;return Vt?(y&&It==="even"&&($t=null),Se($t,Ct,lt,dt,et,Pe,Je,it,ht,zt,Lt)):(y&&It==="odd"&&($t=null),Se($t,ht,it,Je,Pe,et,dt,lt,Ct,zt,Lt))}function Ie(It,Ct,lt,dt,et){for(var Pe=[],Je=0,it=0;it<Ct.length;it++)for(var ht=Ct[it],zt=1;zt<S;zt++)for(var Lt=1;Lt<L;Lt++)Pe.push(Ye(It,P(ht,Lt-1,zt-1),P(ht,Lt-1,zt),P(ht,Lt,zt-1),P(ht,Lt,zt),lt,dt,(ht+Lt+zt)%2,et&&et[Je]?et[Je]:[])),Je++;return Pe}function Ze(It,Ct,lt,dt,et){for(var Pe=[],Je=0,it=0;it<Ct.length;it++)for(var ht=Ct[it],zt=1;zt<h;zt++)for(var Lt=1;Lt<S;Lt++)Pe.push(Ye(It,P(zt-1,ht,Lt-1),P(zt,ht,Lt-1),P(zt-1,ht,Lt),P(zt,ht,Lt),lt,dt,(zt+ht+Lt)%2,et&&et[Je]?et[Je]:[])),Je++;return Pe}function rt(It,Ct,lt,dt,et){for(var Pe=[],Je=0,it=0;it<Ct.length;it++)for(var ht=Ct[it],zt=1;zt<L;zt++)for(var Lt=1;Lt<h;Lt++)Pe.push(Ye(It,P(Lt-1,zt-1,ht),P(Lt-1,zt,ht),P(Lt,zt-1,ht),P(Lt,zt,ht),lt,dt,(Lt+zt+ht)%2,et&&et[Je]?et[Je]:[])),Je++;return Pe}function Ge(It,Ct,lt){for(var dt=1;dt<S;dt++)for(var et=1;et<L;et++)for(var Pe=1;Pe<h;Pe++)Te(It,P(Pe-1,et-1,dt-1),P(Pe-1,et-1,dt),P(Pe-1,et,dt-1),P(Pe-1,et,dt),P(Pe,et-1,dt-1),P(Pe,et-1,dt),P(Pe,et,dt-1),P(Pe,et,dt),Ct,lt,(Pe+et+dt)%2)}function ze(It,Ct,lt){g=!0,Ge(It,Ct,lt),g=!1}function We(It,Ct,lt){y=!0,Ge(It,Ct,lt),y=!1}function mt(It,Ct,lt,dt,et,Pe){for(var Je=[],it=0,ht=0;ht<Ct.length;ht++)for(var zt=Ct[ht],Lt=1;Lt<S;Lt++)for(var Vt=1;Vt<L;Vt++)Je.push(Xe(It,zt,Vt,Lt,lt,dt,et[ht],Pe&&Pe[it]?Pe[it]:[])),it++;return Je}function Ft(It,Ct,lt,dt,et,Pe){for(var Je=[],it=0,ht=0;ht<Ct.length;ht++)for(var zt=Ct[ht],Lt=1;Lt<h;Lt++)for(var Vt=1;Vt<S;Vt++)Je.push(Xe(It,Lt,zt,Vt,lt,dt,et[ht],Pe&&Pe[it]?Pe[it]:[])),it++;return Je}function Xt(It,Ct,lt,dt,et,Pe){for(var Je=[],it=0,ht=0;ht<Ct.length;ht++)for(var zt=Ct[ht],Lt=1;Lt<L;Lt++)for(var Vt=1;Vt<h;Vt++)Je.push(Xe(It,Vt,Lt,zt,lt,dt,et[ht],Pe&&Pe[it]?Pe[it]:[])),it++;return Je}function Pt(It,Ct){for(var lt=[],dt=It;dt<Ct;dt++)lt.push(dt);return lt}function Ut(){for(var It=0;It<h;It++)for(var Ct=0;Ct<L;Ct++)for(var lt=0;lt<S;lt++){var dt=P(It,Ct,lt);J(o._x[dt],o._y[dt],o._z[dt],o._value[dt])}}function Gt(){G(),Ut();var It=null;if(v&&p&&(Y(p),ze(It,D,R)),c&&d){Y(d);for(var Ct=o.surface.pattern,lt=o.surface.count,dt=0;dt<lt;dt++){var et=lt===1?.5:dt/(lt-1),Pe=(1-et)*D+et*R,Je=Math.abs(Pe-O),it=Math.abs(Pe-F),ht=Je>it?[O,Pe]:[Pe,F];We(Ct,ht[0],ht[1])}}var zt=[[Math.min(D,F),Math.max(D,F)],[Math.min(O,R),Math.max(O,R)]];["x","y","z"].forEach(function(Lt){for(var Vt=[],$t=0;$t<zt.length;$t++){var Ht=0,tr=zt[$t][0],qe=zt[$t][1],xt=o.slices[Lt];if(xt.show&&xt.fill){Y(xt.fill);var Rt=[],fr=[],br=[];if(xt.locations.length)for(var pr=0;pr<xt.locations.length;pr++){var Tr=i(xt.locations[pr],Lt==="x"?w:Lt==="y"?T:_);Tr.distRatio===0?Rt.push(Tr.id):Tr.id>0&&(fr.push(Tr.id),Lt==="x"?br.push([Tr.distRatio,0,0]):Lt==="y"?br.push([0,Tr.distRatio,0]):br.push([0,0,Tr.distRatio]))}else Lt==="x"?Rt=Pt(1,h-1):Lt==="y"?Rt=Pt(1,L-1):Rt=Pt(1,S-1);fr.length>0&&(Lt==="x"?Vt[Ht]=mt(It,fr,tr,qe,br,Vt[Ht]):Lt==="y"?Vt[Ht]=Ft(It,fr,tr,qe,br,Vt[Ht]):Vt[Ht]=Xt(It,fr,tr,qe,br,Vt[Ht]),Ht++),Rt.length>0&&(Lt==="x"?Vt[Ht]=Ie(It,Rt,tr,qe,Vt[Ht]):Lt==="y"?Vt[Ht]=Ze(It,Rt,tr,qe,Vt[Ht]):Vt[Ht]=rt(It,Rt,tr,qe,Vt[Ht]),Ht++)}var Nr=o.caps[Lt];Nr.show&&Nr.fill&&(Y(Nr.fill),Lt==="x"?Vt[Ht]=Ie(It,[0,h-1],tr,qe,Vt[Ht]):Lt==="y"?Vt[Ht]=Ze(It,[0,L-1],tr,qe,Vt[Ht]):Vt[Ht]=rt(It,[0,S-1],tr,qe,Vt[Ht]),Ht++)}}),A===0&&G(),o._meshX=U,o._meshY=N,o._meshZ=X,o._meshIntensity=j,o._Xs=w,o._Ys=T,o._Zs=_}return Gt(),o}function l(o,c){var v=o.glplot.gl,d=u({gl:v}),p=new a(o,d,c.uid);return d._trace=p,p.update(c),o.glplot.add(d),p}I.exports={findNearestOnAxis:i,generateIsoMeshes:f,createIsosurfaceTrace:l}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(e,I,B){var u=e("../../lib"),s=e("../../registry"),m=e("./attributes"),x=e("../../components/colorscale/defaults");function t(a,r,n,f){function l(o,c){return u.coerce(a,r,m,o,c)}i(a,r,n,f,l)}function i(a,r,n,f,l){var o=l("isomin"),c=l("isomax");c!=null&&o!==void 0&&o!==null&&o>c&&(r.isomin=null,r.isomax=null);var v=l("x"),d=l("y"),p=l("z"),y=l("value");if(!v||!v.length||!d||!d.length||!p||!p.length||!y||!y.length){r.visible=!1;return}var g=s.getComponentMethod("calendars","handleTraceDefaults");g(a,r,["x","y","z"],f),l("valuehoverformat"),["x","y","z"].forEach(function(w){l(w+"hoverformat");var T="caps."+w,_=l(T+".show");_&&l(T+".fill");var h="slices."+w,L=l(h+".show");L&&(l(h+".fill"),l(h+".locations"))});var A=l("spaceframe.show");A&&l("spaceframe.fill");var b=l("surface.show");b&&(l("surface.count"),l("surface.fill"),l("surface.pattern"));var M=l("contour.show");M&&(l("contour.color"),l("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(w){l(w)}),x(a,r,f,l,{prefix:"",cLetter:"c"}),r._length=null}I.exports={supplyDefaults:t,supplyIsoDefaults:i}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(e,I,B){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../surface/attributes"),t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat;I.exports=i({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"}),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},u("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:i({},x.contours.x.show,{}),color:x.contours.x.color,width:x.contours.x.width,editType:"calc"},lightposition:{x:i({},x.lightposition.x,{dflt:1e5}),y:i({},x.lightposition.y,{dflt:1e5}),z:i({},x.lightposition.z,{dflt:0}),editType:"calc"},lighting:i({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},x.lighting),hoverinfo:i({},t.hoverinfo,{editType:"calc"}),showlegend:i({},t.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1057}],868:[function(e,I,B){var u=e("../../components/colorscale/calc");I.exports=function(m,x){x.intensity&&u(m,x,{vals:x.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(e,I,B){var u=e("../../../stackgl_modules").gl_mesh3d,s=e("../../../stackgl_modules").delaunay_triangulate,m=e("../../../stackgl_modules").alpha_shape,x=e("../../../stackgl_modules").convex_hull,t=e("../../lib/gl_format_color").parseColorScale,i=e("../../lib/str2rgbarray"),a=e("../../components/colorscale").extractOpts,r=e("../../plots/gl3d/zip3");function n(y,g,A){this.scene=y,this.uid=A,this.mesh=g,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=n.prototype;f.handlePick=function(y){if(y.object===this.mesh){var g=y.index=y.data.index;y.data._cellCenter?y.traceCoordinate=y.data.dataCoordinate:y.traceCoordinate=[this.data.x[g],this.data.y[g],this.data.z[g]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&A[g]!==void 0?y.textLabel=A[g]:A&&(y.textLabel=A),!0}};function l(y){for(var g=[],A=y.length,b=0;b<A;b++)g[b]=i(y[b]);return g}function o(y,g,A,b){for(var M=[],w=g.length,T=0;T<w;T++)M[T]=y.d2l(g[T],0,b)*A;return M}function c(y){for(var g=[],A=y.length,b=0;b<A;b++)g[b]=Math.round(y[b]);return g}function v(y,g){for(var A=["x","y","z"].indexOf(y),b=[],M=g.length,w=0;w<M;w++)b[w]=[g[w][(A+1)%3],g[w][(A+2)%3]];return s(b)}function d(y,g){for(var A=y.length,b=0;b<A;b++)if(y[b]<=-.5||y[b]>=g-.5)return!1;return!0}f.update=function(y){var g=this.scene,A=g.fullSceneLayout;this.data=y;var b=y.x.length,M=r(o(A.xaxis,y.x,g.dataScale[0],y.xcalendar),o(A.yaxis,y.y,g.dataScale[1],y.ycalendar),o(A.zaxis,y.z,g.dataScale[2],y.zcalendar)),w;if(y.i&&y.j&&y.k){if(y.i.length!==y.j.length||y.j.length!==y.k.length||!d(y.i,b)||!d(y.j,b)||!d(y.k,b))return;w=r(c(y.i),c(y.j),c(y.k))}else y.alphahull===0?w=x(M):y.alphahull>0?w=m(y.alphahull,M):w=v(y.delaunayaxis,M);var T={positions:M,cells:w,lightPosition:[y.lightposition.x,y.lightposition.y,y.lightposition.z],ambient:y.lighting.ambient,diffuse:y.lighting.diffuse,specular:y.lighting.specular,roughness:y.lighting.roughness,fresnel:y.lighting.fresnel,vertexNormalsEpsilon:y.lighting.vertexnormalsepsilon,faceNormalsEpsilon:y.lighting.facenormalsepsilon,opacity:y.opacity,contourEnable:y.contour.show,contourColor:i(y.contour.color).slice(0,3),contourWidth:y.contour.width,useFacetNormals:y.flatshading};if(y.intensity){var _=a(y);this.color="#fff";var h=y.intensitymode;T[h+"Intensity"]=y.intensity,T[h+"IntensityBounds"]=[_.min,_.max],T.colormap=t(y)}else y.vertexcolor?(this.color=y.vertexcolor[0],T.vertexColors=l(y.vertexcolor)):y.facecolor?(this.color=y.facecolor[0],T.cellColors=l(y.facecolor)):(this.color=y.color,T.meshColor=i(y.color));this.mesh.update(T)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(y,g){var A=y.glplot.gl,b=u({gl:A}),M=new n(y,b,g.uid);return b._trace=M,M.update(g),y.glplot.add(b),M}I.exports=p},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("../../components/colorscale/defaults"),x=e("./attributes");I.exports=function(i,a,r,n){function f(d,p){return s.coerce(i,a,x,d,p)}function l(d){var p=d.map(function(y){var g=f(y);return g&&s.isArrayOrTypedArray(g)?g:null});return p.every(function(y){return y&&y.length===p[0].length})&&p}var o=l(["x","y","z"]);if(!o){a.visible=!1;return}if(l(["i","j","k"]),a.i&&(!a.j||!a.k)||a.j&&(!a.k||!a.i)||a.k&&(!a.i||!a.j)){a.visible=!1;return}var c=u.getComponentMethod("calendars","handleTraceDefaults");c(i,a,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(d){f(d)});var v=f("contour.show");v&&(f("contour.color"),f("contour.width")),"intensity"in i?(f("intensity"),f("intensitymode"),m(i,a,n,f,{prefix:"",cLetter:"c"})):(a.showscale=!1,"facecolor"in i?f("facecolor"):"vertexcolor"in i?f("vertexcolor"):f("color",r)),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(e,I,B){var u=e("../../lib").extendFlat,s=e("../scatter/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../components/drawing/attributes").dash,t=e("../../components/fx/attributes"),i=e("../../constants/delta.js"),a=i.INCREASING.COLOR,r=i.DECREASING.COLOR,n=s.line;function f(l){return{line:{color:u({},n.color,{dflt:l}),width:n.width,dash:x,editType:"style"},editType:"style"}}I.exports={xperiod:s.xperiod,xperiod0:s.xperiod0,xperiodalignment:s.xperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:u({},n.width,{}),dash:u({},x,{}),editType:"style"},increasing:f(a),decreasing:f(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:u({},t.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926}],873:[function(e,I,B){var u=e("../../lib"),s=u._,m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM;function i(f,l){var o=m.getFromId(f,l.xaxis),c=m.getFromId(f,l.yaxis),v=n(f,o,l),d=l._minDiff;l._minDiff=null;var p=l._origX;l._origX=null;var y=l._xcalc;l._xcalc=null;var g=r(f,l,p,y,c,a);return l._extremes[o._id]=m.findExtremes(o,y,{vpad:d/2}),g.length?(u.extendFlat(g[0].t,{wHover:d/2,tickLen:v}),g):[{t:{empty:!0}}]}function a(f,l,o,c){return{o:f,h:l,l:o,c}}function r(f,l,o,c,v,d){for(var p=v.makeCalcdata(l,"open"),y=v.makeCalcdata(l,"high"),g=v.makeCalcdata(l,"low"),A=v.makeCalcdata(l,"close"),b=Array.isArray(l.text),M=Array.isArray(l.hovertext),w=!0,T=null,_=!!l.xperiodalignment,h=[],L=0;L<c.length;L++){var S=c[L],k=p[L],P=y[L],O=g[L],F=A[L];if(S!==t&&k!==t&&P!==t&&O!==t&&F!==t){F===k?T!==null&&F!==T&&(w=F>T):w=F>k,T=F;var D=d(k,P,O,F);D.pos=S,D.yc=(k+F)/2,D.i=L,D.dir=w?"increasing":"decreasing",D.x=D.pos,D.y=[O,P],_&&(D.orig_p=o[L]),b&&(D.tx=l.text[L]),M&&(D.htx=l.hovertext[L]),h.push(D)}else h.push({pos:S,empty:!0})}return l._extremes[v._id]=m.findExtremes(v,u.concat(g,y),{padded:!0}),h.length&&(h[0].t={labels:{open:s(f,"open:")+" ",high:s(f,"high:")+" ",low:s(f,"low:")+" ",close:s(f,"close:")+" "}}),h}function n(f,l,o){var c=o._minDiff;if(!c){var v=f._fullData,d=[];c=1/0;var p;for(p=0;p<v.length;p++){var y=v[p];if(y.type==="ohlc"&&y.visible===!0&&y.xaxis===l._id){d.push(y);var g=l.makeCalcdata(y,"x");y._origX=g;var A=x(o,l,"x",g).vals;y._xcalc=A;var b=u.distinctVals(A).minDiff;b&&isFinite(b)&&(c=Math.min(c,b))}}for(c===1/0&&(c=1),p=0;p<d.length;p++)d[p]._minDiff=c}return c*o.tickwidth}I.exports={calc:i,calcCommon:r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(e,I,B){var u=e("../../lib"),s=e("./ohlc_defaults"),m=e("../scatter/period_defaults"),x=e("./attributes");I.exports=function(a,r,n,f){function l(c,v){return u.coerce(a,r,x,c,v)}var o=s(a,r,l,f);if(!o){r.visible=!1;return}m(a,r,f,l,{x:!0}),l("xhoverformat"),l("yhoverformat"),l("line.width"),l("line.dash"),t(a,r,l,"increasing"),t(a,r,l,"decreasing"),l("text"),l("hovertext"),l("tickwidth"),f._requestRangeslider[r.xaxis]=!0};function t(i,a,r,n){r(n+".line.color"),r(n+".line.width",a.line.width),r(n+".line.dash",a.line.dash)}},{"../../lib":503,"../scatter/period_defaults":946,"./attributes":872,"./ohlc_defaults":877}],875:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../lib"),m=e("../../components/fx"),x=e("../../components/color"),t=e("../../lib").fillText,i=e("../../constants/delta.js"),a={increasing:i.INCREASING.SYMBOL,decreasing:i.DECREASING.SYMBOL};function r(o,c,v,d){var p=o.cd,y=p[0].trace;return y.hoverlabel.split?f(o,c,v,d):l(o,c,v,d)}function n(o,c,v,d){var p=o.cd,y=o.xa,g=p[0].trace,A=p[0].t,b=g.type,M=b==="ohlc"?"l":"min",w=b==="ohlc"?"h":"max",T,_,h=A.bPos||0,L=function(ee){return ee.pos+h-c},S=A.bdPos||A.tickLen,k=A.wHover,P=Math.min(1,S/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));T=o.maxHoverDistance-P,_=o.maxSpikeDistance-P;function O(ee){var q=L(ee);return m.inbox(q-k,q+k,T)}function F(ee){var q=ee[M],G=ee[w];return q===G||m.inbox(q-v,G-v,T)}function D(ee){return(O(ee)+F(ee))/2}var R=m.getDistanceFunction(d,O,F,D);if(m.getClosest(p,R,o),o.index===!1)return null;var U=p[o.index];if(U.empty)return null;var N=U.dir,X=g[N],j=X.line.color;return x.opacity(j)&&X.line.width?o.color=j:o.color=X.fillcolor,o.x0=y.c2p(U.pos+h-S,!0),o.x1=y.c2p(U.pos+h+S,!0),o.xLabelVal=U.orig_p!==void 0?U.orig_p:U.pos,o.spikeDistance=D(U)*_/T,o.xSpike=y.c2p(U.pos,!0),o}function f(o,c,v,d){var p=o.cd,y=o.ya,g=p[0].trace,A=p[0].t,b=[],M=n(o,c,v,d);if(!M)return[];var w=M.index,T=p[w],_=T.hi||g.hoverinfo,h=_.split("+"),L=_==="all",S=L||h.indexOf("y")!==-1;if(!S)return[];for(var k=["high","open","close","low"],P={},O=0;O<k.length;O++){var F=k[O],D=g[F][M.index],R=y.c2p(D,!0),U;D in P?(U=P[D],U.yLabel+="<br>"+A.labels[F]+u.hoverLabelText(y,D,g.yhoverformat)):(U=s.extendFlat({},M),U.y0=U.y1=R,U.yLabelVal=D,U.yLabel=A.labels[F]+u.hoverLabelText(y,D,g.yhoverformat),U.name="",b.push(U),P[D]=U)}return b}function l(o,c,v,d){var p=o.cd,y=o.ya,g=p[0].trace,A=p[0].t,b=n(o,c,v,d);if(!b)return[];var M=b.index,w=p[M],T=b.index=w.i,_=w.dir;function h(D){return A.labels[D]+u.hoverLabelText(y,g[D][T],g.yhoverformat)}var L=w.hi||g.hoverinfo,S=L.split("+"),k=L==="all",P=k||S.indexOf("y")!==-1,O=k||S.indexOf("text")!==-1,F=P?[h("open"),h("high"),h("low"),h("close")+"  "+a[_]]:[];return O&&t(w,g,F),b.extraText=F.join("<br>"),b.y0=b.y1=y.c2p(w.yc,!0),[b]}I.exports={hoverPoints:r,hoverSplit:f,hoverOnPoints:l}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(e,I,B){I.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc").calc,plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(e,I,B){var u=e("../../registry"),s=e("../../lib");I.exports=function(x,t,i,a){var r=i("x"),n=i("open"),f=i("high"),l=i("low"),o=i("close");i("hoverlabel.split");var c=u.getComponentMethod("calendars","handleTraceDefaults");if(c(x,t,["x"],a),!!(n&&f&&l&&o)){var v=Math.min(n.length,f.length,l.length,o.length);return r&&(v=Math.min(v,s.minRowLength(r))),t._length=v,v}}},{"../../lib":503,"../../registry":638}],878:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib");I.exports=function(x,t,i,a){var r=t.yaxis,n=t.xaxis,f=!!n.rangebreaks;s.makeTraceGroups(a,i,"trace ohlc").each(function(l){var o=u.select(this),c=l[0],v=c.t,d=c.trace;if(d.visible!==!0||v.empty){o.remove();return}var p=v.tickLen,y=o.selectAll("path").data(s.identity);y.enter().append("path"),y.exit().remove(),y.attr("d",function(g){if(g.empty)return"M0,0Z";var A=n.c2p(g.pos-p,!0),b=n.c2p(g.pos+p,!0),M=f?(A+b)/2:n.c2p(g.pos,!0),w=r.c2p(g.o,!0),T=r.c2p(g.h,!0),_=r.c2p(g.l,!0),h=r.c2p(g.c,!0);return"M"+A+","+w+"H"+M+"M"+M+","+T+"V"+_+"M"+b+","+h+"H"+M})})}},{"../../lib":503,"@plotly/d3":58}],879:[function(e,I,B){I.exports=function(s,m){var x=s.cd,t=s.xaxis,i=s.yaxis,a=[],r,n=x[0].t.bPos||0;if(m===!1)for(r=0;r<x.length;r++)x[r].selected=0;else for(r=0;r<x.length;r++){var f=x[r];m.contains([t.c2p(f.pos+n),i.c2p(f.yc)],null,f.i,s)?(a.push({pointNumber:f.i,x:t.c2d(f.pos),y:i.c2d(f.yc)}),f.selected=1):f.selected=0}return a}},{}],880:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../components/color");I.exports=function(t,i,a){var r=a||u.select(t).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(n){return n[0].trace.opacity}),r.each(function(n){var f=n[0].trace;u.select(this).selectAll("path").each(function(l){if(!l.empty){var o=f[l.dir].line;u.select(this).style("fill","none").call(m.stroke,o.color).call(s.dashLine,o.dash,o.width).style("opacity",f.selectedpoints&&!l.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(e,I,B){var u=e("../../lib/extend").extendFlat,s=e("../../plots/attributes"),m=e("../../plots/font_attributes"),x=e("../../components/colorscale/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/domain").attributes,a=u({editType:"calc"},x("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});I.exports={domain:i({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:u({},s.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:m({editType:"calc"}),tickfont:m({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(e,I,B){var u=e("../../plots/get_data").getModuleCalcData,s=e("./plot"),m="parcats";B.name=m,B.plot=function(x,t,i,a){var r=u(x.calcdata,m);if(r.length){var n=r[0];s(x,n,i,a)}},B.clean=function(x,t,i,a){var r=a._has&&a._has("parcats"),n=t._has&&t._has("parcats");r&&!n&&a._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(e,I,B){var u=e("../../lib/gup").wrap,s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/calc"),x=e("../../lib/filter_unique.js"),t=e("../../components/drawing"),i=e("../../lib"),a=e("fast-isnumeric");I.exports=function(A,b){var M=i.filterVisible(b.dimensions);if(M.length===0)return[];var w=M.map(function(fe){var se;if(fe.categoryorder==="trace")se=null;else if(fe.categoryorder==="array")se=fe.categoryarray;else{se=x(fe.values);for(var V=!0,Y=0;Y<se.length;Y++)if(!a(se[Y])){V=!1;break}se.sort(V?i.sorterAsc:void 0),fe.categoryorder==="category descending"&&(se=se.reverse())}return v(fe.values,se)}),T,_,h;i.isArrayOrTypedArray(b.counts)?T=b.counts:T=[b.counts],d(M),M.forEach(function(fe,se){p(fe,w[se])});var L=b.line,S;L?(s(b,"line")&&m(A,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),S=t.tryColorscale(L)):S=i.identity;function k(fe){var se,V;return i.isArrayOrTypedArray(L.color)?(se=L.color[fe%L.color.length],V=se):se=L.color,{color:S(se),rawColor:V}}var P=M[0].values.length,O={},F=w.map(function(fe){return fe.inds});h=0;var D,R;for(D=0;D<P;D++){var U=[];for(R=0;R<F.length;R++)U.push(F[R][D]);_=T[D%T.length],h+=_;var N=k(D),X=U+"-"+N.rawColor;O[X]===void 0&&(O[X]=o(U,N.color,N.rawColor)),c(O[X],D,_)}var j=M.map(function(fe,se){return n(se,fe._index,fe._displayindex,fe.label,h)});for(D=0;D<P;D++)for(_=T[D%T.length],R=0;R<j.length;R++){var ee=j[R].containerInd,q=w[R].inds[D],G=j[R].categories;if(G[q]===void 0){var J=b.dimensions[ee]._categoryarray[q],le=b.dimensions[ee]._ticktext[q];G[q]=f(R,q,J,le)}l(G[q],D,_)}return u(r(j,O,h))};function r(g,A,b){var M=g.map(function(w){return w.categories.length}).reduce(function(w,T){return Math.max(w,T)});return{dimensions:g,paths:A,trace:void 0,maxCats:M,count:b}}function n(g,A,b,M,w){return{dimensionInd:g,containerInd:A,displayInd:b,dimensionLabel:M,count:w,categories:[],dragX:null}}function f(g,A,b,M){return{dimensionInd:g,categoryInd:A,categoryValue:b,displayInd:A,categoryLabel:M,valueInds:[],count:0,dragY:null}}function l(g,A,b){g.valueInds.push(A),g.count+=b}function o(g,A,b){return{categoryInds:g,color:A,rawColor:b,valueInds:[],count:0}}function c(g,A,b){g.valueInds.push(A),g.count+=b}function v(g,A){A==null?A=[]:A=A.map(function(S){return S});var b={},M={},w=[];A.forEach(function(S,k){b[S]=0,M[S]=k});for(var T=0;T<g.length;T++){var _=g[T],h;b[_]===void 0?(b[_]=1,h=A.push(_)-1,M[_]=h):(b[_]++,h=M[_]),w.push(h)}var L=A.map(function(S){return b[S]});return{uniqueValues:A,uniqueCounts:L,inds:w}}function d(g){var A=g.map(function(M){return M.displayindex}),b;if(y(A))for(b=0;b<g.length;b++)g[b]._displayindex=g[b].displayindex;else for(b=0;b<g.length;b++)g[b]._displayindex=b}function p(g,A){g._categoryarray=A.uniqueValues,g.ticktext===null||g.ticktext===void 0?g._ticktext=[]:g._ticktext=g.ticktext.slice();for(var b=g._ticktext.length;b<A.uniqueValues.length;b++)g._ticktext.push(A.uniqueValues[b])}function y(g){for(var A=new Array(g.length),b=0;b<g.length;b++){if(g[b]<0||g[b]>=g.length||A[g[b]]!==void 0)return!1;A[g[b]]=!0}return!0}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(e,I,B){var u=e("../../lib"),s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),i=e("./attributes"),a=e("../parcoords/merge_length");function r(f,l,o,c,v){v("line.shape"),v("line.hovertemplate");var d=v("line.color",c.colorway[0]);if(s(f,"line")&&u.isArrayOrTypedArray(d)){if(d.length)return v("line.colorscale"),m(f,l,c,v,{prefix:"line.",cLetter:"c"}),d.length;l.line.color=o}return 1/0}function n(f,l){function o(A,b){return u.coerce(f,l,i.dimensions,A,b)}var c=o("values"),v=o("visible");if(c&&c.length||(v=l.visible=!1),v){o("label"),o("displayindex",l._index);var d=f.categoryarray,p=Array.isArray(d)&&d.length>0,y;p&&(y="array");var g=o("categoryorder",y);g==="array"?(o("categoryarray"),o("ticktext")):(delete f.categoryarray,delete f.ticktext),!p&&g==="array"&&(l.categoryorder="trace")}}I.exports=function(l,o,c,v){function d(b,M){return u.coerce(l,o,i,b,M)}var p=t(l,o,{name:"dimensions",handleItemDefaults:n}),y=r(l,o,c,v,d);x(o,v,d),(!Array.isArray(p)||!p.length)&&(o.visible=!1),a(o,p,"values",y),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var g={family:v.font.family,size:Math.round(v.font.size),color:v.font.color};u.coerceFont(d,"labelfont",g);var A={family:v.font.family,size:Math.round(v.font.size/1.2),color:v.font.color};u.coerceFont(d,"tickfont",A)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":897,"./attributes":881}],885:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(e,I,B){var u=e("@plotly/d3"),s=e("d3-interpolate").interpolateNumber,m=e("../../plot_api/plot_api"),x=e("../../components/fx"),t=e("../../lib"),i=t.strTranslate,a=e("../../components/drawing"),r=e("tinycolor2"),n=e("../../lib/svg_text_utils");function f(Y,ne,te,K){var $=Y.map(J.bind(0,ne,te)),ae=K.selectAll("g.parcatslayer").data([null]);ae.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ie=ae.selectAll("g.trace.parcats").data($,l),oe=ie.enter().append("g").attr("class","trace parcats");ie.attr("transform",function(Te){return i(Te.x,Te.y)}),oe.append("g").attr("class","paths");var ue=ie.select("g.paths"),xe=ue.selectAll("path.path").data(function(Te){return Te.paths},l);xe.attr("fill",function(Te){return Te.model.color});var he=xe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Te){return Te.model.color}).attr("fill-opacity",0);A(he),xe.attr("d",function(Te){return Te.svgD}),he.empty()||xe.sort(c),xe.exit().remove(),xe.on("mouseover",v).on("mouseout",d).on("click",g),oe.append("g").attr("class","dimensions");var me=ie.select("g.dimensions"),be=me.selectAll("g.dimension").data(function(Te){return Te.dimensions},l);be.enter().append("g").attr("class","dimension"),be.attr("transform",function(Te){return i(Te.x,0)}),be.exit().remove();var Ce=be.selectAll("g.category").data(function(Te){return Te.categories},l),Se=Ce.enter().append("g").attr("class","category");Ce.attr("transform",function(Te){return i(0,Te.y)}),Se.append("rect").attr("class","catrect").attr("pointer-events","none"),Ce.select("rect.catrect").attr("fill","none").attr("width",function(Te){return Te.width}).attr("height",function(Te){return Te.height}),w(Se);var Be=Ce.selectAll("rect.bandrect").data(function(Te){return Te.bands},l);Be.each(function(){t.raiseToTop(this)}),Be.attr("fill",function(Te){return Te.color});var Ye=Be.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Te){return Te.color}).attr("fill-opacity",0);Be.attr("fill",function(Te){return Te.color}).attr("width",function(Te){return Te.width}).attr("height",function(Te){return Te.height}).attr("y",function(Te){return Te.y}).attr("cursor",function(Te){return Te.parcatsViewModel.arrangement==="fixed"?"default":Te.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),_(Ye),Be.exit().remove(),Se.append("text").attr("class","catlabel").attr("pointer-events","none");var Xe=ne._fullLayout.paper_bgcolor;Ce.select("text.catlabel").attr("text-anchor",function(Te){return o(Te)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(Xe)).style("fill","rgb(0, 0, 0)").attr("x",function(Te){return o(Te)?Te.width+5:-5}).attr("y",function(Te){return Te.height/2}).text(function(Te){return Te.model.categoryLabel}).each(function(Te){a.font(u.select(this),Te.parcatsViewModel.categorylabelfont),n.convertToTspans(u.select(this),ne)}),Se.append("text").attr("class","dimlabel"),Ce.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Te){return Te.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Te){return Te.width/2}).attr("y",-5).text(function(Te,Ie){return Ie===0?Te.parcatsViewModel.model.dimensions[Te.model.dimensionInd].dimensionLabel:null}).each(function(Te){a.font(u.select(this),Te.parcatsViewModel.labelfont)}),Ce.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",U),Ce.exit().remove(),be.call(u.behavior.drag().origin(function(Te){return{x:Te.x,y:0}}).on("dragstart",N).on("drag",X).on("dragend",j)),ie.each(function(Te){Te.traceSelection=u.select(this),Te.pathSelection=u.select(this).selectAll("g.paths").selectAll("path.path"),Te.dimensionSelection=u.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ie.exit().remove()}I.exports=function(Y,ne,te,K){f(te,Y,K,ne)};function l(Y){return Y.key}function o(Y){var ne=Y.parcatsViewModel.dimensions.length,te=Y.parcatsViewModel.dimensions[ne-1].model.dimensionInd;return Y.model.dimensionInd===te}function c(Y,ne){return Y.model.rawColor>ne.model.rawColor?1:Y.model.rawColor<ne.model.rawColor?-1:0}function v(Y){if(!Y.parcatsViewModel.dragDimension&&Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){t.raiseToTop(this),b(u.select(this));var ne=p(Y),te=y(Y);if(Y.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ne,event:u.event,constraints:te}),Y.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var K=u.mouse(this)[0],$=Y.parcatsViewModel.graphDiv,ae=Y.parcatsViewModel.trace,ie=$._fullLayout,oe=ie._paperdiv.node().getBoundingClientRect(),ue=Y.parcatsViewModel.graphDiv.getBoundingClientRect(),xe,he,me;for(me=0;me<Y.leftXs.length-1;me++)if(Y.leftXs[me]+Y.dimWidths[me]-2<=K&&K<=Y.leftXs[me+1]+2){var be=Y.parcatsViewModel.dimensions[me],Ce=Y.parcatsViewModel.dimensions[me+1];xe=(be.x+be.width+Ce.x)/2,he=(Y.topYs[me]+Y.topYs[me+1]+Y.height)/2;break}var Se=Y.parcatsViewModel.x+xe,Be=Y.parcatsViewModel.y+he,Ye=r.mostReadable(Y.model.color,["black","white"]),Xe=Y.model.count,Te=Xe/Y.parcatsViewModel.model.count,Ie={countLabel:Xe,probabilityLabel:Te.toFixed(3)},Ze=[];Y.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ze.push(["Count:",Ie.countLabel].join(" ")),Y.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ze.push(["P:",Ie.probabilityLabel].join(" "));var rt=Ze.join("<br>"),Ge=u.mouse($)[0];x.loneHover({trace:ae,x:Se-oe.left+ue.left,y:Be-oe.top+ue.top,text:rt,color:Y.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ye,idealAlign:Ge<Se?"right":"left",hovertemplate:(ae.line||{}).hovertemplate,hovertemplateLabels:Ie,eventData:[{data:ae._input,fullData:ae,count:Xe,probability:Te}]},{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:$})}}}function d(Y){if(!Y.parcatsViewModel.dragDimension&&(A(u.select(this)),x.loneUnhover(Y.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),Y.parcatsViewModel.pathSelection.sort(c),Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var ne=p(Y),te=y(Y);Y.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ne,event:u.event,constraints:te})}}function p(Y){for(var ne=[],te=ee(Y.parcatsViewModel),K=0;K<Y.model.valueInds.length;K++){var $=Y.model.valueInds[K];ne.push({curveNumber:te,pointNumber:$})}return ne}function y(Y){for(var ne={},te=Y.parcatsViewModel.model.dimensions,K=0;K<te.length;K++){var $=te[K],ae=$.categories[Y.model.categoryInds[K]];ne[$.containerInd]=ae.categoryValue}return Y.model.rawColor!==void 0&&(ne.color=Y.model.rawColor),ne}function g(Y){if(Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ne=p(Y),te=y(Y);Y.parcatsViewModel.graphDiv.emit("plotly_click",{points:ne,event:u.event,constraints:te})}}function A(Y){Y.attr("fill",function(ne){return ne.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function b(Y){Y.attr("fill-opacity",.8).attr("stroke",function(ne){return r.mostReadable(ne.model.color,["black","white"])}).attr("stroke-width",.3)}function M(Y){Y.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(Y){Y.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function T(Y){Y.attr("stroke","black").attr("stroke-width",1.5)}function _(Y){Y.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function h(Y){var ne=Y.parcatsViewModel.pathSelection,te=Y.categoryViewModel.model.dimensionInd,K=Y.categoryViewModel.model.categoryInd;return ne.filter(function($){return $.model.categoryInds[te]===K&&$.model.color===Y.color})}function L(Y){var ne=u.select(Y.parentNode).selectAll("rect.bandrect");ne.each(function(te){var K=h(te);b(K),K.each(function(){t.raiseToTop(this)})}),M(u.select(Y.parentNode))}function S(Y){var ne=u.select(Y).datum(),te=h(ne);b(te),te.each(function(){t.raiseToTop(this)}),u.select(Y.parentNode).selectAll("rect.bandrect").filter(function(K){return K.color===ne.color}).each(function(){t.raiseToTop(this),T(u.select(this))})}function k(Y,ne,te){var K=u.select(Y).datum(),$=K.categoryViewModel.model,ae=K.parcatsViewModel.graphDiv,ie=u.select(Y.parentNode).selectAll("rect.bandrect"),oe=[];ie.each(function(xe){var he=h(xe);he.each(function(me){Array.prototype.push.apply(oe,p(me))})});var ue={};ue[$.dimensionInd]=$.categoryValue,ae.emit(ne,{points:oe,event:te,constraints:ue})}function P(Y,ne,te){var K=u.select(Y).datum(),$=K.categoryViewModel.model,ae=K.parcatsViewModel.graphDiv,ie=h(K),oe=[];ie.each(function(xe){Array.prototype.push.apply(oe,p(xe))});var ue={};ue[$.dimensionInd]=$.categoryValue,K.rawColor!==void 0&&(ue.color=K.rawColor),ae.emit(ne,{points:oe,event:te,constraints:ue})}function O(Y,ne,te){Y._fullLayout._calcInverseTransform(Y);var K=Y._fullLayout._invScaleX,$=Y._fullLayout._invScaleY,ae=u.select(te.parentNode).select("rect.catrect"),ie=ae.node().getBoundingClientRect(),oe=ae.datum(),ue=oe.parcatsViewModel,xe=ue.model.dimensions[oe.model.dimensionInd],he=ue.trace,me=ie.top+ie.height/2,be,Ce;ue.dimensions.length>1&&xe.displayInd===ue.dimensions.length-1?(be=ie.left,Ce="left"):(be=ie.left+ie.width,Ce="right");var Se=oe.model.count,Be=oe.model.categoryLabel,Ye=Se/oe.parcatsViewModel.model.count,Xe={countLabel:Se,categoryLabel:Be,probabilityLabel:Ye.toFixed(3)},Te=[];oe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Te.push(["Count:",Xe.countLabel].join(" ")),oe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Te.push(["P("+Xe.categoryLabel+"):",Xe.probabilityLabel].join(" "));var Ie=Te.join("<br>");return{trace:he,x:K*(be-ne.left),y:$*(me-ne.top),text:Ie,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Ce,hovertemplate:he.hovertemplate,hovertemplateLabels:Xe,eventData:[{data:he._input,fullData:he,count:Se,category:Be,probability:Ye}]}}function F(Y,ne,te){var K=[];return u.select(te.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var $=this;K.push(O(Y,ne,$))}),K}function D(Y,ne,te){Y._fullLayout._calcInverseTransform(Y);var K=Y._fullLayout._invScaleX,$=Y._fullLayout._invScaleY,ae=te.getBoundingClientRect(),ie=u.select(te).datum(),oe=ie.categoryViewModel,ue=oe.parcatsViewModel,xe=ue.model.dimensions[oe.model.dimensionInd],he=ue.trace,me=ae.y+ae.height/2,be,Ce;ue.dimensions.length>1&&xe.displayInd===ue.dimensions.length-1?(be=ae.left,Ce="left"):(be=ae.left+ae.width,Ce="right");var Se=oe.model.categoryLabel,Be=ie.parcatsViewModel.model.count,Ye=0;ie.categoryViewModel.bands.forEach(function(Ft){Ft.color===ie.color&&(Ye+=Ft.count)});var Xe=oe.model.count,Te=0;ue.pathSelection.each(function(Ft){Ft.model.color===ie.color&&(Te+=Ft.model.count)});var Ie=Ye/Be,Ze=Ye/Te,rt=Ye/Xe,Ge={countLabel:Be,categoryLabel:Se,probabilityLabel:Ie.toFixed(3)},ze=[];oe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ze.push(["Count:",Ge.countLabel].join(" ")),oe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(ze.push("P(color \u2229 "+Se+"): "+Ge.probabilityLabel),ze.push("P("+Se+" | color): "+Ze.toFixed(3)),ze.push("P(color | "+Se+"): "+rt.toFixed(3)));var We=ze.join("<br>"),mt=r.mostReadable(ie.color,["black","white"]);return{trace:he,x:K*(be-ne.left),y:$*(me-ne.top),text:We,color:ie.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:mt,fontSize:10,idealAlign:Ce,hovertemplate:he.hovertemplate,hovertemplateLabels:Ge,eventData:[{data:he._input,fullData:he,category:Se,count:Be,probability:Ie,categorycount:Xe,colorcount:Te,bandcolorcount:Ye}]}}function R(Y){if(!Y.parcatsViewModel.dragDimension&&Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ne=u.mouse(this)[1];if(ne<-1)return;var te=Y.parcatsViewModel.graphDiv,K=te._fullLayout,$=K._paperdiv.node().getBoundingClientRect(),ae=Y.parcatsViewModel.hoveron,ie=this;if(ae==="color"?(S(ie),P(ie,"plotly_hover",u.event)):(L(ie),k(ie,"plotly_hover",u.event)),Y.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var oe;ae==="category"?oe=O(te,$,ie):ae==="color"?oe=D(te,$,ie):ae==="dimension"&&(oe=F(te,$,ie)),oe&&x.loneHover(oe,{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:te})}}}function U(Y){var ne=Y.parcatsViewModel;if(!ne.dragDimension&&(A(ne.pathSelection),w(ne.dimensionSelection.selectAll("g.category")),_(ne.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),x.loneUnhover(ne.graphDiv._fullLayout._hoverlayer.node()),ne.pathSelection.sort(c),ne.hoverinfoItems.indexOf("skip")===-1)){var te=Y.parcatsViewModel.hoveron,K=this;te==="color"?P(K,"plotly_unhover",u.event):k(K,"plotly_unhover",u.event)}}function N(Y){Y.parcatsViewModel.arrangement!=="fixed"&&(Y.dragDimensionDisplayInd=Y.model.displayInd,Y.initialDragDimensionDisplayInds=Y.parcatsViewModel.model.dimensions.map(function(ne){return ne.displayInd}),Y.dragHasMoved=!1,Y.dragCategoryDisplayInd=null,u.select(this).selectAll("g.category").select("rect.catrect").each(function(ne){var te=u.mouse(this)[0],K=u.mouse(this)[1];-2<=te&&te<=ne.width+2&&-2<=K&&K<=ne.height+2&&(Y.dragCategoryDisplayInd=ne.model.displayInd,Y.initialDragCategoryDisplayInds=Y.model.categories.map(function($){return $.displayInd}),ne.model.dragY=ne.y,t.raiseToTop(this.parentNode),u.select(this.parentNode).selectAll("rect.bandrect").each(function($){$.y<K&&K<=$.y+$.height&&(Y.potentialClickBand=this)}))}),Y.parcatsViewModel.dragDimension=Y,x.loneUnhover(Y.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function X(Y){if(Y.parcatsViewModel.arrangement!=="fixed"&&(Y.dragHasMoved=!0,Y.dragDimensionDisplayInd!==null)){var ne=Y.dragDimensionDisplayInd,te=ne-1,K=ne+1,$=Y.parcatsViewModel.dimensions[ne];if(Y.dragCategoryDisplayInd!==null){var ae=$.categories[Y.dragCategoryDisplayInd];ae.model.dragY+=u.event.dy;var ie=ae.model.dragY,oe=ae.model.displayInd,ue=$.categories,xe=ue[oe-1],he=ue[oe+1];xe!==void 0&&ie<xe.y+xe.height/2&&(ae.model.displayInd=xe.model.displayInd,xe.model.displayInd=oe),he!==void 0&&ie+ae.height>he.y+he.height/2&&(ae.model.displayInd=he.model.displayInd,he.model.displayInd=oe),Y.dragCategoryDisplayInd=ae.model.displayInd}if(Y.dragCategoryDisplayInd===null||Y.parcatsViewModel.arrangement==="freeform"){$.model.dragX=u.event.x;var me=Y.parcatsViewModel.dimensions[te],be=Y.parcatsViewModel.dimensions[K];me!==void 0&&$.model.dragX<me.x+me.width&&($.model.displayInd=me.model.displayInd,me.model.displayInd=ne),be!==void 0&&$.model.dragX+$.width>be.x&&($.model.displayInd=be.model.displayInd,be.model.displayInd=Y.dragDimensionDisplayInd),Y.dragDimensionDisplayInd=$.model.displayInd}se(Y.parcatsViewModel),fe(Y.parcatsViewModel),G(Y.parcatsViewModel),q(Y.parcatsViewModel)}}function j(Y){if(Y.parcatsViewModel.arrangement!=="fixed"&&Y.dragDimensionDisplayInd!==null){u.select(this).selectAll("text").attr("font-weight","normal");var ne={},te=ee(Y.parcatsViewModel),K=Y.parcatsViewModel.model.dimensions.map(function(be){return be.displayInd}),$=Y.initialDragDimensionDisplayInds.some(function(be,Ce){return be!==K[Ce]});$&&K.forEach(function(be,Ce){var Se=Y.parcatsViewModel.model.dimensions[Ce].containerInd;ne["dimensions["+Se+"].displayindex"]=be});var ae=!1;if(Y.dragCategoryDisplayInd!==null){var ie=Y.model.categories.map(function(be){return be.displayInd});if(ae=Y.initialDragCategoryDisplayInds.some(function(be,Ce){return be!==ie[Ce]}),ae){var oe=Y.model.categories.slice().sort(function(be,Ce){return be.displayInd-Ce.displayInd}),ue=oe.map(function(be){return be.categoryValue}),xe=oe.map(function(be){return be.categoryLabel});ne["dimensions["+Y.model.containerInd+"].categoryarray"]=[ue],ne["dimensions["+Y.model.containerInd+"].ticktext"]=[xe],ne["dimensions["+Y.model.containerInd+"].categoryorder"]="array"}}if(Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!Y.dragHasMoved&&Y.potentialClickBand&&(Y.parcatsViewModel.hoveron==="color"?P(Y.potentialClickBand,"plotly_click",u.event.sourceEvent):k(Y.potentialClickBand,"plotly_click",u.event.sourceEvent)),Y.model.dragX=null,Y.dragCategoryDisplayInd!==null){var he=Y.parcatsViewModel.dimensions[Y.dragDimensionDisplayInd].categories[Y.dragCategoryDisplayInd];he.model.dragY=null,Y.dragCategoryDisplayInd=null}Y.dragDimensionDisplayInd=null,Y.parcatsViewModel.dragDimension=null,Y.dragHasMoved=null,Y.potentialClickBand=null,se(Y.parcatsViewModel),fe(Y.parcatsViewModel);var me=u.transition().duration(300).ease("cubic-in-out");me.each(function(){G(Y.parcatsViewModel,!0),q(Y.parcatsViewModel,!0)}).each("end",function(){($||ae)&&m.restyle(Y.parcatsViewModel.graphDiv,ne,[te])})}}function ee(Y){for(var ne,te=Y.graphDiv._fullData,K=0;K<te.length;K++)if(Y.key===te[K].uid){ne=K;break}return ne}function q(Y,ne){ne===void 0&&(ne=!1);function te(K){return ne?K.transition():K}Y.pathSelection.data(function(K){return K.paths},l),te(Y.pathSelection).attr("d",function(K){return K.svgD})}function G(Y,ne){ne===void 0&&(ne=!1);function te(ue){return ne?ue.transition():ue}Y.dimensionSelection.data(function(ue){return ue.dimensions},l);var K=Y.dimensionSelection.selectAll("g.category").data(function(ue){return ue.categories},l);te(Y.dimensionSelection).attr("transform",function(ue){return i(ue.x,0)}),te(K).attr("transform",function(ue){return i(0,ue.y)});var $=K.select(".dimlabel");$.text(function(ue,xe){return xe===0?ue.parcatsViewModel.model.dimensions[ue.model.dimensionInd].dimensionLabel:null});var ae=K.select(".catlabel");ae.attr("text-anchor",function(ue){return o(ue)?"start":"end"}).attr("x",function(ue){return o(ue)?ue.width+5:-5}).each(function(ue){var xe,he;o(ue)?(xe=ue.width+5,he="start"):(xe=-5,he="end"),u.select(this).selectAll("tspan").attr("x",xe).attr("text-anchor",he)});var ie=K.selectAll("rect.bandrect").data(function(ue){return ue.bands},l),oe=ie.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ue){return ue.color}).attr("fill-opacity",0);ie.attr("fill",function(ue){return ue.color}).attr("width",function(ue){return ue.width}).attr("height",function(ue){return ue.height}).attr("y",function(ue){return ue.y}),_(oe),ie.each(function(){t.raiseToTop(this)}),ie.exit().remove()}function J(Y,ne,te){var K=te[0],$=ne.margin||{l:80,r:80,t:100,b:80},ae=K.trace,ie=ae.domain,oe=ne.width,ue=ne.height,xe=Math.floor(oe*(ie.x[1]-ie.x[0])),he=Math.floor(ue*(ie.y[1]-ie.y[0])),me=ie.x[0]*oe+$.l,be=ne.height-ie.y[1]*ne.height+$.t,Ce=ae.line.shape,Se;ae.hoverinfo==="all"?Se=["count","probability"]:Se=(ae.hoverinfo||"").split("+");var Be={trace:ae,key:ae.uid,model:K,x:me,y:be,width:xe,height:he,hoveron:ae.hoveron,hoverinfoItems:Se,arrangement:ae.arrangement,bundlecolors:ae.bundlecolors,sortpaths:ae.sortpaths,labelfont:ae.labelfont,categorylabelfont:ae.tickfont,pathShape:Ce,dragDimension:null,margin:$,paths:[],dimensions:[],graphDiv:Y,traceSelection:null,pathSelection:null,dimensionSelection:null};return K.dimensions&&(se(Be),fe(Be)),Be}function le(Y,ne,te,K,$){var ae=[],ie=[],oe,ue;for(ue=0;ue<te.length-1;ue++)oe=s(te[ue]+Y[ue],Y[ue+1]),ae.push(oe($)),ie.push(oe(1-$));var xe="M "+Y[0]+","+ne[0];for(xe+="l"+te[0]+",0 ",ue=1;ue<te.length;ue++)xe+="C"+ae[ue-1]+","+ne[ue-1]+" "+ie[ue-1]+","+ne[ue]+" "+Y[ue]+","+ne[ue],xe+="l"+te[ue]+",0 ";for(xe+="l0,"+K+" ",xe+="l -"+te[te.length-1]+",0 ",ue=te.length-2;ue>=0;ue--)xe+="C"+ie[ue]+","+(ne[ue+1]+K)+" "+ae[ue]+","+(ne[ue]+K)+" "+(Y[ue]+te[ue])+","+(ne[ue]+K),xe+="l-"+te[ue]+",0 ";return xe+="Z",xe}function fe(Y){var ne=Y.dimensions,te=Y.model,K=ne.map(function(Ut){return Ut.categories.map(function(Gt){return Gt.y})}),$=Y.model.dimensions.map(function(Ut){return Ut.categories.map(function(Gt){return Gt.displayInd})}),ae=Y.model.dimensions.map(function(Ut){return Ut.displayInd}),ie=Y.dimensions.map(function(Ut){return Ut.model.dimensionInd}),oe=ne.map(function(Ut){return Ut.x}),ue=ne.map(function(Ut){return Ut.width}),xe=[];for(var he in te.paths)te.paths.hasOwnProperty(he)&&xe.push(te.paths[he]);function me(Ut){var Gt=Ut.categoryInds.map(function(Ct,lt){return $[lt][Ct]}),It=ie.map(function(Ct){return Gt[Ct]});return It}xe.sort(function(Ut,Gt){var It=me(Ut),Ct=me(Gt);return Y.sortpaths==="backward"&&(It.reverse(),Ct.reverse()),It.push(Ut.valueInds[0]),Ct.push(Gt.valueInds[0]),Y.bundlecolors&&(It.unshift(Ut.rawColor),Ct.unshift(Gt.rawColor)),It<Ct?-1:It>Ct?1:0});for(var be=new Array(xe.length),Ce=ne[0].model.count,Se=ne[0].categories.map(function(Ut){return Ut.height}).reduce(function(Ut,Gt){return Ut+Gt}),Be=0;Be<xe.length;Be++){var Ye=xe[Be],Xe;Ce>0?Xe=Se*(Ye.count/Ce):Xe=0;for(var Te=new Array(K.length),Ie=0;Ie<Ye.categoryInds.length;Ie++){var Ze=Ye.categoryInds[Ie],rt=$[Ie][Ze],Ge=ae[Ie];Te[Ge]=K[Ge][rt],K[Ge][rt]+=Xe;var ze=Y.dimensions[Ge].categories[rt],We=ze.bands.length,mt=ze.bands[We-1];if(mt===void 0||Ye.rawColor!==mt.rawColor){var Ft=mt===void 0?0:mt.y+mt.height;ze.bands.push({key:Ft,color:Ye.color,rawColor:Ye.rawColor,height:Xe,width:ze.width,count:Ye.count,y:Ft,categoryViewModel:ze,parcatsViewModel:Y})}else{var Xt=ze.bands[We-1];Xt.height+=Xe,Xt.count+=Ye.count}}var Pt;Y.pathShape==="hspline"?Pt=le(oe,Te,ue,Xe,.5):Pt=le(oe,Te,ue,Xe,0),be[Be]={key:Ye.valueInds[0],model:Ye,height:Xe,leftXs:oe,topYs:Te,dimWidths:ue,svgD:Pt,parcatsViewModel:Y}}Y.paths=be}function se(Y){var ne=Y.model.dimensions.map(function(ie){return{displayInd:ie.displayInd,dimensionInd:ie.dimensionInd}});ne.sort(function(ie,oe){return ie.displayInd-oe.displayInd});var te=[];for(var K in ne){var $=ne[K].dimensionInd,ae=Y.model.dimensions[$];te.push(V(Y,ae))}Y.dimensions=te}function V(Y,ne){var te=40,K=16,$=Y.model.dimensions.length,ae=ne.displayInd,ie,oe,ue;$>1?ie=(Y.width-2*te-K)/($-1):ie=0,oe=te,ue=oe+ie*ae;var xe=[],he=Y.model.maxCats,me=ne.categories.length,be=8,Ce=ne.count,Se=Y.height-be*(he-1),Be,Ye,Xe,Te,Ie,Ze=(he-me)*be/2,rt=ne.categories.map(function(Ge){return{displayInd:Ge.displayInd,categoryInd:Ge.categoryInd}});for(rt.sort(function(Ge,ze){return Ge.displayInd-ze.displayInd}),Ie=0;Ie<me;Ie++)Te=rt[Ie].categoryInd,Ye=ne.categories[Te],Ce>0?Be=Ye.count/Ce*Se:Be=0,Xe={key:Ye.valueInds[0],model:Ye,width:K,height:Be,y:Ye.dragY!==null?Ye.dragY:Ze,bands:[],parcatsViewModel:Y},Ze=Ze+Be+be,xe.push(Xe);return{key:ne.dimensionInd,x:ne.dragX!==null?ne.dragX:ue,y:0,width:K,model:ne,categories:xe,parcatsViewModel:Y,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(e,I,B){var u=e("./parcats");I.exports=function(m,x,t,i){var a=m._fullLayout,r=a._paper,n=a._size;u(m,r,x,{width:n.w,height:n.h,margin:{t:n.t,r:n.r,b:n.b,l:n.l}},t,i)}},{"./parcats":886}],888:[function(e,I,B){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/layout_attributes"),m=e("../../plots/font_attributes"),x=e("../../plots/domain").attributes,t=e("../../lib/extend").extendFlat,i=e("../../plot_api/plot_template").templatedArray;I.exports={domain:x({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:m({editType:"plot"}),tickfont:m({editType:"plot"}),rangefont:m({editType:"plot"}),dimensions:i("dimension",{label:{valType:"string",editType:"plot"},tickvals:t({},s.tickvals,{editType:"plot"}),ticktext:t({},s.ticktext,{editType:"plot"}),tickformat:t({},s.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:t({editType:"calc"},u("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(e,I,B){var u=e("./constants"),s=e("@plotly/d3"),m=e("../../lib/gup").keyFun,x=e("../../lib/gup").repeat,t=e("../../lib").sorterAsc,i=e("../../lib").strTranslate,a=u.bar.snapRatio;function r(j,ee){return j*(1-a)+ee*a}var n=u.bar.snapClose;function f(j,ee){return j*(1-n)+ee*n}function l(j,ee,q,G){if(o(q,G))return q;var J=j?-1:1,le=0,fe=ee.length-1;if(J<0){var se=le;le=fe,fe=se}for(var V=ee[le],Y=V,ne=le;J*ne<J*fe;ne+=J){var te=ne+J,K=ee[te];if(J*q<J*f(V,K))return r(V,Y);if(J*q<J*K||te===fe)return r(K,V);Y=V,V=K}}function o(j,ee){for(var q=0;q<ee.length;q++)if(j>=ee[q][0]&&j<=ee[q][1])return!0;return!1}function c(j){j.attr("x",-u.bar.captureWidth/2).attr("width",u.bar.captureWidth)}function v(j){j.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function d(j){if(!j.brush.filterSpecified)return"0,"+j.height;for(var ee=p(j.brush.filter.getConsolidated(),j.height),q=[0],G,J,le,fe=ee.length?ee[0][0]:null,se=0;se<ee.length;se++)G=ee[se],J=G[1]-G[0],q.push(fe),q.push(J),le=se+1,le<ee.length&&(fe=ee[le][0]-G[1]);return q.push(j.height),q}function p(j,ee){return j.map(function(q){return q.map(function(G){return Math.max(0,G*ee)}).sort(t)})}function y(j,ee){var q=u.bar.handleHeight;if(!(ee>j[1]+q||ee<j[0]-q))return ee>=.9*j[1]+.1*j[0]?"n":ee<=.9*j[0]+.1*j[1]?"s":"ns"}function g(){s.select(document.body).style("cursor",null)}function A(j){j.attr("stroke-dasharray",d)}function b(j,ee){var q=s.select(j).selectAll(".highlight, .highlight-shadow"),G=ee?q.transition().duration(u.bar.snapDuration).each("end",ee):q;A(G)}function M(j,ee){var q=j.brush,G=q.filterSpecified,J=NaN,le={},fe;if(G){var se=j.height,V=q.filter.getConsolidated(),Y=p(V,se),ne=NaN,te=NaN,K=NaN;for(fe=0;fe<=Y.length;fe++){var $=Y[fe];if($&&$[0]<=ee&&ee<=$[1]){ne=fe;break}else if(te=fe?fe-1:NaN,$&&$[0]>ee){K=fe;break}}if(J=ne,isNaN(J)&&(isNaN(te)||isNaN(K)?J=isNaN(te)?K:te:J=ee-Y[te][1]<Y[K][0]-ee?te:K),!isNaN(J)){var ae=Y[J],ie=y(ae,ee);ie&&(le.interval=V[J],le.intervalPix=ae,le.region=ie)}}if(j.ordinal&&!le.region){var oe=j.unitTickvals,ue=j.unitToPaddedPx.invert(ee);for(fe=0;fe<oe.length;fe++){var xe=[oe[Math.max(fe-1,0)]*.25+oe[fe]*.75,oe[Math.min(fe+1,oe.length-1)]*.25+oe[fe]*.75];if(ue>=xe[0]&&ue<=xe[1]){le.clickableOrdinalRange=xe;break}}}return le}function w(j,ee){s.event.sourceEvent.stopPropagation();var q=ee.height-s.mouse(j)[1]-2*u.verticalPadding,G=ee.unitToPaddedPx.invert(q),J=ee.brush,le=M(ee,q),fe=le.interval,se=J.svgBrush;if(se.wasDragged=!1,se.grabbingBar=le.region==="ns",se.grabbingBar){var V=fe.map(ee.unitToPaddedPx);se.grabPoint=q-V[0]-u.verticalPadding,se.barLength=V[1]-V[0]}se.clickableOrdinalRange=le.clickableOrdinalRange,se.stayingIntervals=ee.multiselect&&J.filterSpecified?J.filter.getConsolidated():[],fe&&(se.stayingIntervals=se.stayingIntervals.filter(function(Y){return Y[0]!==fe[0]&&Y[1]!==fe[1]})),se.startExtent=le.region?fe[le.region==="s"?1:0]:G,ee.parent.inBrushDrag=!0,se.brushStartCallback()}function T(j,ee){s.event.sourceEvent.stopPropagation();var q=ee.height-s.mouse(j)[1]-2*u.verticalPadding,G=ee.brush.svgBrush;G.wasDragged=!0,G._dragging=!0,G.grabbingBar?G.newExtent=[q-G.grabPoint,q+G.barLength-G.grabPoint].map(ee.unitToPaddedPx.invert):G.newExtent=[G.startExtent,ee.unitToPaddedPx.invert(q)].sort(t),ee.brush.filterSpecified=!0,G.extent=G.stayingIntervals.concat([G.newExtent]),G.brushCallback(ee),b(j.parentNode)}function _(j,ee){var q=ee.brush,G=q.filter,J=q.svgBrush;J._dragging||(h(j,ee),T(j,ee),ee.brush.svgBrush.wasDragged=!1),J._dragging=!1;var le=s.event;le.sourceEvent.stopPropagation();var fe=J.grabbingBar;if(J.grabbingBar=!1,J.grabLocation=void 0,ee.parent.inBrushDrag=!1,g(),!J.wasDragged){J.wasDragged=void 0,J.clickableOrdinalRange?q.filterSpecified&&ee.multiselect?J.extent.push(J.clickableOrdinalRange):(J.extent=[J.clickableOrdinalRange],q.filterSpecified=!0):fe?(J.extent=J.stayingIntervals,J.extent.length===0&&F(q)):F(q),J.brushCallback(ee),b(j.parentNode),J.brushEndCallback(q.filterSpecified?G.getConsolidated():[]);return}var se=function(){G.set(G.getConsolidated())};if(ee.ordinal){var V=ee.unitTickvals;V[V.length-1]<V[0]&&V.reverse(),J.newExtent=[l(0,V,J.newExtent[0],J.stayingIntervals),l(1,V,J.newExtent[1],J.stayingIntervals)];var Y=J.newExtent[1]>J.newExtent[0];J.extent=J.stayingIntervals.concat(Y?[J.newExtent]:[]),J.extent.length||F(q),J.brushCallback(ee),Y?b(j.parentNode,se):(se(),b(j.parentNode))}else se();J.brushEndCallback(q.filterSpecified?G.getConsolidated():[])}function h(j,ee){var q=ee.height-s.mouse(j)[1]-2*u.verticalPadding,G=M(ee,q),J="crosshair";G.clickableOrdinalRange?J="pointer":G.region&&(J=G.region+"-resize"),s.select(document.body).style("cursor",J)}function L(j){j.on("mousemove",function(ee){s.event.preventDefault(),ee.parent.inBrushDrag||h(this,ee)}).on("mouseleave",function(ee){ee.parent.inBrushDrag||g()}).call(s.behavior.drag().on("dragstart",function(ee){w(this,ee)}).on("drag",function(ee){T(this,ee)}).on("dragend",function(ee){_(this,ee)}))}function S(j,ee){return j[0]-ee[0]}function k(j,ee){var q=j.selectAll(".background").data(x);q.enter().append("rect").classed("background",!0).call(c).call(v).style("pointer-events","auto").attr("transform",i(0,u.verticalPadding)),q.call(L).attr("height",function(le){return le.height-u.verticalPadding});var G=j.selectAll(".highlight-shadow").data(x);G.enter().append("line").classed("highlight-shadow",!0).attr("x",-u.bar.width/2).attr("stroke-width",u.bar.width+u.bar.strokeWidth).attr("stroke",ee).attr("opacity",u.bar.strokeOpacity).attr("stroke-linecap","butt"),G.attr("y1",function(le){return le.height}).call(A);var J=j.selectAll(".highlight").data(x);J.enter().append("line").classed("highlight",!0).attr("x",-u.bar.width/2).attr("stroke-width",u.bar.width-u.bar.strokeWidth).attr("stroke",u.bar.fillColor).attr("opacity",u.bar.fillOpacity).attr("stroke-linecap","butt"),J.attr("y1",function(le){return le.height}).call(A)}function P(j,ee){var q=j.selectAll("."+u.cn.axisBrush).data(x,m);q.enter().append("g").classed(u.cn.axisBrush,!0),k(q,ee)}function O(j){return j.svgBrush.extent.map(function(ee){return ee.slice()})}function F(j){j.filterSpecified=!1,j.svgBrush.extent=[[-1/0,1/0]]}function D(j){return function(q){var G=q.brush,J=O(G),le=J.slice();G.filter.set(le),j()}}function R(j){for(var ee=j.slice(),q=[],G,J=ee.shift();J;){for(G=J.slice();(J=ee.shift())&&J[0]<=G[1];)G[1]=Math.max(G[1],J[1]);q.push(G)}return q.length===1&&q[0][0]>q[0][1]&&(q=[]),q}function U(){var j=[],ee,q;return{set:function(G){j=G.map(function(J){return J.slice().sort(t)}).sort(S),j.length===1&&j[0][0]===-1/0&&j[0][1]===1/0&&(j=[[0,-1]]),ee=R(j),q=j.reduce(function(J,le){return[Math.min(J[0],le[0]),Math.max(J[1],le[1])]},[1/0,-1/0])},get:function(){return j.slice()},getConsolidated:function(){return ee},getBounds:function(){return q}}}function N(j,ee,q,G,J,le){var fe=U();return fe.set(q),{filter:fe,filterSpecified:ee,svgBrush:{extent:[],brushStartCallback:G,brushCallback:D(J),brushEndCallback:le}}}function X(j,ee){if(Array.isArray(j[0])?(j=j.map(function(G){return G.sort(t)}),ee.multiselect?j=R(j.sort(S)):j=[j[0]]):j=[j.sort(t)],ee.tickvals){var q=ee.tickvals.slice().sort(t);if(j=j.map(function(G){var J=[l(0,q,G[0],[]),l(1,q,G[1],[])];if(J[1]>J[0])return J}).filter(function(G){return G}),!j.length)return}return j.length>1?j:j[0]}I.exports={makeBrush:N,ensureAxisBrush:P,cleanRanges:X}},{"../../lib":503,"../../lib/gup":500,"./constants":892,"@plotly/d3":58}],890:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../plots/get_data").getModuleCalcData,m=e("./plot"),x=e("../../constants/xmlns_namespaces");B.name="parcoords",B.plot=function(t){var i=s(t.calcdata,"parcoords")[0];i.length&&m(t,i)},B.clean=function(t,i,a,r){var n=r._has&&r._has("parcoords"),f=i._has&&i._has("parcoords");n&&!f&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},B.toSVG=function(t){var i=t._fullLayout._glimages,a=u.select(t).selectAll(".svg-container"),r=a.filter(function(f,l){return l===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var f=this,l=f.toDataURL("image/png"),o=i.append("svg:image");o.attr({xmlns:x.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})}r.each(n),window.setTimeout(function(){u.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":899,"@plotly/d3":58}],891:[function(e,I,B){var u=e("../../lib").isArrayOrTypedArray,s=e("../../components/colorscale"),m=e("../../lib/gup").wrap;I.exports=function(i,a){var r,n;return s.hasColorscale(a,"line")&&u(a.line.color)?(r=a.line.color,n=s.extractOpts(a.line).colorscale,s.calc(i,a,{vals:r,containerStr:"line",cLetter:"c"})):(r=x(a._length),n=[[0,a.line.color],[1,a.line.color]]),m({lineColor:r,cscale:n})};function x(t){for(var i=new Array(t),a=0;a<t;a++)i[a]=.5;return i}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],892:[function(e,I,B){I.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],893:[function(e,I,B){var u=e("../../lib"),s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),i=e("../../plots/cartesian/axes"),a=e("./attributes"),r=e("./axisbrush"),n=e("./constants").maxDimensionCount,f=e("./merge_length");function l(c,v,d,p,y){var g=y("line.color",d);if(s(c,"line")&&u.isArrayOrTypedArray(g)){if(g.length)return y("line.colorscale"),m(c,v,p,y,{prefix:"line.",cLetter:"c"}),g.length;v.line.color=d}return 1/0}function o(c,v,d,p){function y(w,T){return u.coerce(c,v,a.dimensions,w,T)}var g=y("values"),A=y("visible");if(g&&g.length||(A=v.visible=!1),A){y("label"),y("tickvals"),y("ticktext"),y("tickformat");var b=y("range");v._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:b},i.setConvert(v._ax,p.layout),y("multiselect");var M=y("constraintrange");M&&(v.constraintrange=r.cleanRanges(M,v))}}I.exports=function(v,d,p,y){function g(T,_){return u.coerce(v,d,a,T,_)}var A=v.dimensions;Array.isArray(A)&&A.length>n&&(u.log("parcoords traces support up to "+n+" dimensions at the moment"),A.splice(n));var b=t(v,d,{name:"dimensions",layout:y,handleItemDefaults:o}),M=l(v,d,p,y,g);x(d,y,g),(!Array.isArray(b)||!b.length)&&(d.visible=!1),f(d,b,"values",M);var w={family:y.font.family,size:Math.round(y.font.size/1.2),color:y.font.color};u.coerceFont(g,"labelfont",w),u.coerceFont(g,"tickfont",w),u.coerceFont(g,"rangefont",w),g("labelangle"),g("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":892,"./merge_length":897}],894:[function(e,I,B){var u=e("../../lib").isTypedArray;B.convertTypedArray=function(s){return u(s)?Array.prototype.slice.call(s):s},B.isOrdinal=function(s){return!!s.tickvals},B.isVisible=function(s){return s.visible||!("visible"in s)}},{"../../lib":503}],895:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":890,"./calc":891,"./defaults":893,"./plot":899}],896:[function(e,I,B){var u=e("glslify"),s=u([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),m=u([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),x=e("./constants").maxDimensionCount,t=e("../../lib"),i=1e-6,a=2048,r=new Uint8Array(4),n=new Uint8Array(4),f={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function l(h){h.read({x:0,y:0,width:1,height:1,data:r})}function o(h,L,S,k,P){var O=h._gl;O.enable(O.SCISSOR_TEST),O.scissor(L,S,k,P),h.clear({color:[0,0,0,0],depth:1})}function c(h,L,S,k,P,O){var F=O.key;function D(R){var U=Math.min(k,P-R*k);R===0&&(window.cancelAnimationFrame(S.currentRafs[F]),delete S.currentRafs[F],o(h,O.scissorX,O.scissorY,O.scissorWidth,O.viewBoxSize[1])),!S.clearOnly&&(O.count=2*U,O.offset=2*R*k,L(O),R*k+U<P&&(S.currentRafs[F]=window.requestAnimationFrame(function(){D(R+1)})),S.drawCompleted=!1)}S.drawCompleted||(l(h),S.drawCompleted=!0),D(0)}function v(h){return Math.max(i,Math.min(1-i,h))}function d(h,L){for(var S=new Array(256),k=0;k<256;k++)S[k]=h(k/255).concat(L);return S}function p(h,L){return(h>>>8*L)%256/255}function y(h,L,S){for(var k=new Array(h*(x+4)),P=0,O=0;O<h;O++){for(var F=0;F<x;F++)k[P++]=F<L.length?L[F].paddedUnitValues[O]:.5;k[P++]=p(O,2),k[P++]=p(O,1),k[P++]=p(O,0),k[P++]=v(S[O])}return k}function g(h,L,S){for(var k=new Array(L*8),P=0,O=0;O<L;O++)for(var F=0;F<2;F++)for(var D=0;D<4;D++){var R=h*4+D,U=S[O*64+R];R===63&&F===0&&(U*=-1),k[P++]=U}return k}function A(h){var L="0"+h;return L.substr(L.length-2)}function b(h){return h<x?"p"+A(h+1)+"_"+A(h+4):"colors"}function M(h,L,S){for(var k=0;k<=x;k+=4)h[b(k)](g(k/4,L,S))}function w(h){for(var L={},S=0;S<=x;S+=4)L[b(S)]=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function T(h,L,S,k,P,O,F,D,R,U,N,X,j,ee){for(var q=[[],[]],G=0;G<64;G++)q[0][G]=G===P?1:0,q[1][G]=G===O?1:0;F*=ee,D*=ee,R*=ee,U*=ee;var J=h.lines.canvasOverdrag*ee,le=h.domain,fe=h.canvasWidth*ee,se=h.canvasHeight*ee,V=h.pad.l*ee,Y=h.pad.b*ee,ne=h.layoutHeight*ee,te=h.layoutWidth*ee,K=h.deselectedLines.color,$=t.extendFlat({key:N,resolution:[fe,se],viewBoxPos:[F+J,D],viewBoxSize:[R,U],i0:P,i1:O,dim0A:q[0].slice(0,16),dim0B:q[0].slice(16,32),dim0C:q[0].slice(32,48),dim0D:q[0].slice(48,64),dim1A:q[1].slice(0,16),dim1B:q[1].slice(16,32),dim1C:q[1].slice(32,48),dim1D:q[1].slice(48,64),drwLayer:X,contextColor:[K[0]/255,K[1]/255,K[2]/255,K[3]<1?K[3]:Math.max(1/255,Math.pow(1/h.lines.color.length,1/3))],scissorX:(k===L?0:F+J)+(V-J)+te*le.x[0],scissorWidth:(k===S?fe-F+J:R+.5)+(k===L?F+J:0),scissorY:D+Y+ne*le.y[0],scissorHeight:U,viewportX:V-J+te*le.x[0],viewportY:Y+ne*le.y[0],viewportWidth:fe,viewportHeight:se},j);return $}function _(h){var L=a-1,S=Math.max(0,Math.floor(h[0]*L),0),k=Math.min(L,Math.ceil(h[1]*L),L);return[Math.min(S,k),Math.max(S,k)]}I.exports=function(h,L){var S=L.context,k=L.pick,P=L.regl,O=P._gl,F=O.getParameter(O.ALIASED_LINE_WIDTH_RANGE),D=Math.max(F[0],Math.min(F[1],L.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},U,N,X,j,ee=w(P),q,G=P.texture(f),J=[];fe(L);var le=P({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:s,frag:m,primitive:"lines",lineWidth:D,attributes:ee,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:G,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function fe(K){U=K.model,N=K.viewModel,X=N.dimensions.slice(),j=X[0]?X[0].values.length:0;var $=U.lines,ae=k?$.color.map(function(oe,ue){return ue/$.color.length}):$.color,ie=y(j,X,ae);M(ee,j,ie),!S&&!k&&(G=P.texture(t.extendFlat({data:d(U.unitToColor,255)},f)))}function se(K){var $,ae,ie,oe=[[],[]];for(ie=0;ie<64;ie++){var ue=!K&&ie<X.length?X[ie].brush.filter.getBounds():[-1/0,1/0];oe[0][ie]=ue[0],oe[1][ie]=ue[1]}var xe=a*8,he=new Array(xe);for($=0;$<xe;$++)he[$]=255;if(!K)for($=0;$<X.length;$++){var me=$%8,be=($-me)/8,Ce=Math.pow(2,me),Se=X[$],Be=Se.brush.filter.get();if(!(Be.length<2)){var Ye=_(Be[0])[1];for(ae=1;ae<Be.length;ae++){var Xe=_(Be[ae]);for(ie=Ye+1;ie<Xe[0];ie++)he[ie*8+be]&=~Ce;Ye=Math.max(Ye,Xe[1])}}}var Te={shape:[8,a],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:he};return q?q(Te):q=P.texture(Te),{maskTexture:q,maskHeight:a,loA:oe[0].slice(0,16),loB:oe[0].slice(16,32),loC:oe[0].slice(32,48),loD:oe[0].slice(48,64),hiA:oe[1].slice(0,16),hiB:oe[1].slice(16,32),hiC:oe[1].slice(32,48),hiD:oe[1].slice(48,64)}}function V(K,$,ae){var ie=K.length,oe,ue,xe,he=1/0,me=-1/0;for(oe=0;oe<ie;oe++)K[oe].dim0.canvasX<he&&(he=K[oe].dim0.canvasX,ue=oe),K[oe].dim1.canvasX>me&&(me=K[oe].dim1.canvasX,xe=oe);ie===0&&o(P,0,0,U.canvasWidth,U.canvasHeight);var be=se(S);for(oe=0;oe<ie;oe++){var Ce=K[oe],Se=Ce.dim0.crossfilterDimensionIndex,Be=Ce.dim1.crossfilterDimensionIndex,Ye=Ce.canvasX,Xe=Ce.canvasY,Te=Ye+Ce.panelSizeX,Ie=Ce.plotGlPixelRatio;if($||!J[Se]||J[Se][0]!==Ye||J[Se][1]!==Te){J[Se]=[Ye,Te];var Ze=T(U,ue,xe,oe,Se,Be,Ye,Xe,Ce.panelSizeX,Ce.panelSizeY,Ce.dim0.crossfilterDimensionIndex,S?0:k?2:1,be,Ie);R.clearOnly=ae;var rt=$?U.lines.blockLineCount:j;c(P,le,R,rt,j,Ze)}}}function Y(K,$){return P.read({x:K,y:$,width:1,height:1,data:n}),n}function ne(K,$,ae,ie){var oe=new Uint8Array(4*ae*ie);return P.read({x:K,y:$,width:ae,height:ie,data:oe}),oe}function te(){h.style["pointer-events"]="none",G.destroy(),q&&q.destroy();for(var K in ee)ee[K].destroy()}return{render:V,readPixel:Y,readPixels:ne,destroy:te,update:fe}}},{"../../lib":503,"./constants":892,glslify:227}],897:[function(e,I,B){I.exports=function(u,s,m,x){x||(x=1/0);var t,i;for(t=0;t<s.length;t++)i=s[t],i.visible&&(x=Math.min(x,i[m].length));for(x===1/0&&(x=0),u._length=x,t=0;t<s.length;t++)i=s[t],i.visible&&(i._length=x);return x}},{}],898:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=s.numberFormat,x=e("color-rgba"),t=e("../../plots/cartesian/axes"),i=s.strRotate,a=s.strTranslate,r=e("../../lib/svg_text_utils"),n=e("../../components/drawing"),f=e("../../components/colorscale"),l=e("../../lib/gup"),o=l.keyFun,c=l.repeat,v=l.unwrap,d=e("./helpers"),p=e("./constants"),y=e("./axisbrush"),g=e("./lines");function A(q,G,J){return s.aggNums(q,null,G,J)}function b(q,G){return w(A(Math.min,q,G),A(Math.max,q,G))}function M(q){var G=q.range;return G?w(G[0],G[1]):b(q.values,q._length)}function w(q,G){return(isNaN(q)||!isFinite(q))&&(q=0),(isNaN(G)||!isFinite(G))&&(G=0),q===G&&(q===0?(q-=1,G+=1):(q*=.9,G*=1.1)),[q,G]}function T(q,G){return G?function(J,le){var fe=G[le];return fe==null?q(J):fe}:q}function _(q,G,J,le,fe){var se=M(J);return le?u.scale.ordinal().domain(le.map(T(m(J.tickformat),fe))).range(le.map(function(V){var Y=(V-se[0])/(se[1]-se[0]);return q-G+Y*(2*G-q)})):u.scale.linear().domain(se).range([q-G,G])}function h(q,G){return u.scale.linear().range([G,q-G])}function L(q,G){return u.scale.linear().domain(M(q)).range([G,1-G])}function S(q){if(!!q.tickvals){var G=M(q);return u.scale.ordinal().domain(q.tickvals).range(q.tickvals.map(function(J){return(J-G[0])/(G[1]-G[0])}))}}function k(q){var G=q.map(function(se){return se[0]}),J=q.map(function(se){var V=x(se[1]);return u.rgb("rgb("+V[0]+","+V[1]+","+V[2]+")")}),le=function(se){return function(V){return V[se]}},fe="rgb".split("").map(function(se){return u.scale.linear().clamp(!0).domain(G).range(J.map(le(se)))});return function(se){return fe.map(function(V){return V(se)})}}function P(q){return q.dimensions.some(function(G){return G.brush.filterSpecified})}function O(q,G,J){var le=v(G),fe=le.trace,se=d.convertTypedArray(le.lineColor),V=fe.line,Y={color:x(p.deselectedLineColor)},ne=f.extractOpts(V),te=ne.reversescale?f.flipScale(le.cscale):le.cscale,K=fe.domain,$=fe.dimensions,ae=q.width,ie=fe.labelangle,oe=fe.labelside,ue=fe.labelfont,xe=fe.tickfont,he=fe.rangefont,me=s.extendDeepNoArrays({},V,{color:se.map(u.scale.linear().domain(M({values:se,range:[ne.min,ne.max],_length:fe._length}))),blockLineCount:p.blockLineCount,canvasOverdrag:p.overdrag*p.canvasPixelRatio}),be=Math.floor(ae*(K.x[1]-K.x[0])),Ce=Math.floor(q.height*(K.y[1]-K.y[0])),Se=q.margin||{l:80,r:80,t:100,b:80},Be=be,Ye=Ce;return{key:J,colCount:$.filter(d.isVisible).length,dimensions:$,tickDistance:p.tickDistance,unitToColor:k(te),lines:me,deselectedLines:Y,labelAngle:ie,labelSide:oe,labelFont:ue,tickFont:xe,rangeFont:he,layoutWidth:ae,layoutHeight:q.height,domain:K,translateX:K.x[0]*ae,translateY:q.height-K.y[1]*q.height,pad:Se,canvasWidth:Be*p.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:Ye*p.canvasPixelRatio,width:Be,height:Ye,canvasPixelRatio:p.canvasPixelRatio}}function F(q,G,J){var le=J.width,fe=J.height,se=J.dimensions,V=J.canvasPixelRatio,Y=function(ae){return le*ae/Math.max(1,J.colCount-1)},ne=p.verticalPadding/fe,te=h(fe,p.verticalPadding),K={key:J.key,xScale:Y,model:J,inBrushDrag:!1},$={};return K.dimensions=se.filter(d.isVisible).map(function(ae,ie){var oe=L(ae,ne),ue=$[ae.label];$[ae.label]=(ue||0)+1;var xe=ae.label+(ue?"__"+ue:""),he=ae.constraintrange,me=he&&he.length;me&&!Array.isArray(he[0])&&(he=[he]);var be=me?he.map(function(Ge){return Ge.map(oe)}):[[-1/0,1/0]],Ce=function(){var Ge=K;Ge.focusLayer&&Ge.focusLayer.render(Ge.panels,!0);var ze=P(Ge);!q.contextShown()&&ze?(Ge.contextLayer&&Ge.contextLayer.render(Ge.panels,!0),q.contextShown(!0)):q.contextShown()&&!ze&&(Ge.contextLayer&&Ge.contextLayer.render(Ge.panels,!0,!0),q.contextShown(!1))},Se=ae.values;Se.length>ae._length&&(Se=Se.slice(0,ae._length));var Be=ae.tickvals,Ye;function Xe(Ge,ze){return{val:Ge,text:Ye[ze]}}function Te(Ge,ze){return Ge.val-ze.val}if(Array.isArray(Be)&&Be.length){Ye=ae.ticktext,!Array.isArray(Ye)||!Ye.length?Ye=Be.map(m(ae.tickformat)):Ye.length>Be.length?Ye=Ye.slice(0,Be.length):Be.length>Ye.length&&(Be=Be.slice(0,Ye.length));for(var Ie=1;Ie<Be.length;Ie++)if(Be[Ie]<Be[Ie-1]){for(var Ze=Be.map(Xe).sort(Te),rt=0;rt<Be.length;rt++)Be[rt]=Ze[rt].val,Ye[rt]=Ze[rt].text;break}}else Be=void 0;return Se=d.convertTypedArray(Se),{key:xe,label:ae.label,tickFormat:ae.tickformat,tickvals:Be,ticktext:Ye,ordinal:d.isOrdinal(ae),multiselect:ae.multiselect,xIndex:ie,crossfilterDimensionIndex:ie,visibleIndex:ae._index,height:fe,values:Se,paddedUnitValues:Se.map(oe),unitTickvals:Be&&Be.map(oe),xScale:Y,x:Y(ie),canvasX:Y(ie)*V,unitToPaddedPx:te,domainScale:_(fe,p.verticalPadding,ae,Be,Ye),ordinalScale:S(ae),parent:K,model:J,brush:y.makeBrush(q,me,be,function(){q.linePickActive(!1)},Ce,function(Ge){if(K.focusLayer.render(K.panels,!0),K.pickLayer&&K.pickLayer.render(K.panels,!0),q.linePickActive(!0),G&&G.filterChanged){var ze=oe.invert,We=Ge.map(function(mt){return mt.map(ze).sort(s.sorterAsc)}).sort(function(mt,Ft){return mt[0]-Ft[0]});G.filterChanged(K.key,ae._index,We)}})}}),K}function D(q){q.classed(p.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(){var q=!0,G=!1;return{linePickActive:function(J){return arguments.length?q=!!J:q},contextShown:function(J){return arguments.length?G=!!J:G}}}function U(q,G){var J=G==="top"?1:-1,le=q*Math.PI/180,fe=Math.sin(le),se=Math.cos(le);return{dir:J,dx:fe,dy:se,degrees:q}}function N(q,G,J){for(var le=G.panels||(G.panels=[]),fe=q.data(),se=0;se<fe.length-1;se++){var V=le[se]||(le[se]={}),Y=fe[se],ne=fe[se+1];V.dim0=Y,V.dim1=ne,V.canvasX=Y.canvasX,V.panelSizeX=ne.canvasX-Y.canvasX,V.panelSizeY=G.model.canvasHeight,V.y=0,V.canvasY=0,V.plotGlPixelRatio=J}}function X(q){for(var G=0;G<q.length;G++)for(var J=0;J<q[G].length;J++)for(var le=q[G][J].trace,fe=le.dimensions,se=0;se<fe.length;se++){var V=fe[se].values,Y=fe[se]._ax;Y&&(Y.range?Y.range=w(Y.range[0],Y.range[1]):Y.range=b(V,le._length),Y.dtick||(Y.dtick=.01*(Math.abs(Y.range[1]-Y.range[0])||1)),Y.tickformat=fe[se].tickformat,t.calcTicks(Y),Y.cleanRange())}}function j(q,G){return t.tickText(q._ax,G,!1).text}function ee(q,G){if(q.ordinal)return"";var J=q.domainScale.domain(),le=J[G?J.length-1:0];return j(q.model.dimensions[q.visibleIndex],le)}I.exports=function(G,J,le,fe){var se=G._fullLayout,V=se._toppaper,Y=se._glcontainer,ne=G._context.plotGlPixelRatio,te=G._fullLayout.paper_bgcolor;X(J);var K=R(),$=J.filter(function(Ze){return v(Ze).trace.visible}).map(O.bind(0,le)).map(F.bind(0,K,fe));Y.each(function(Ze,rt){return s.extendFlat(Ze,$[rt])});var ae=Y.selectAll(".gl-canvas").each(function(Ze){Ze.viewModel=$[0],Ze.viewModel.plotGlPixelRatio=ne,Ze.viewModel.paperColor=te,Ze.model=Ze.viewModel?Ze.viewModel.model:null}),ie=null,oe=ae.filter(function(Ze){return Ze.pick});oe.style("pointer-events","auto").on("mousemove",function(Ze){if(K.linePickActive()&&Ze.lineLayer&&fe&&fe.hover){var rt=u.event,Ge=this.width,ze=this.height,We=u.mouse(this),mt=We[0],Ft=We[1];if(mt<0||Ft<0||mt>=Ge||Ft>=ze)return;var Xt=Ze.lineLayer.readPixel(mt,ze-1-Ft),Pt=Xt[3]!==0,Ut=Pt?Xt[2]+256*(Xt[1]+256*Xt[0]):null,Gt={x:mt,y:Ft,clientX:rt.clientX,clientY:rt.clientY,dataIndex:Ze.model.key,curveNumber:Ut};Ut!==ie&&(Pt?fe.hover(Gt):fe.unhover&&fe.unhover(Gt),ie=Ut)}}),ae.style("opacity",function(Ze){return Ze.pick?0:1}),V.style("background","rgba(255, 255, 255, 0)");var ue=V.selectAll("."+p.cn.parcoords).data($,o);ue.exit().remove(),ue.enter().append("g").classed(p.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ue.attr("transform",function(Ze){return a(Ze.model.translateX,Ze.model.translateY)});var xe=ue.selectAll("."+p.cn.parcoordsControlView).data(c,o);xe.enter().append("g").classed(p.cn.parcoordsControlView,!0),xe.attr("transform",function(Ze){return a(Ze.model.pad.l,Ze.model.pad.t)});var he=xe.selectAll("."+p.cn.yAxis).data(function(Ze){return Ze.dimensions},o);he.enter().append("g").classed(p.cn.yAxis,!0),xe.each(function(Ze){N(he,Ze,ne)}),ae.each(function(Ze){if(Ze.viewModel){!Ze.lineLayer||fe?Ze.lineLayer=g(this,Ze):Ze.lineLayer.update(Ze),(Ze.key||Ze.key===0)&&(Ze.viewModel[Ze.key]=Ze.lineLayer);var rt=!Ze.context||fe;Ze.lineLayer.render(Ze.viewModel.panels,rt)}}),he.attr("transform",function(Ze){return a(Ze.xScale(Ze.xIndex),0)}),he.call(u.behavior.drag().origin(function(Ze){return Ze}).on("drag",function(Ze){var rt=Ze.parent;K.linePickActive(!1),Ze.x=Math.max(-p.overdrag,Math.min(Ze.model.width+p.overdrag,u.event.x)),Ze.canvasX=Ze.x*Ze.model.canvasPixelRatio,he.sort(function(Ge,ze){return Ge.x-ze.x}).each(function(Ge,ze){Ge.xIndex=ze,Ge.x=Ze===Ge?Ge.x:Ge.xScale(Ge.xIndex),Ge.canvasX=Ge.x*Ge.model.canvasPixelRatio}),N(he,rt,ne),he.filter(function(Ge){return Math.abs(Ze.xIndex-Ge.xIndex)!==0}).attr("transform",function(Ge){return a(Ge.xScale(Ge.xIndex),0)}),u.select(this).attr("transform",a(Ze.x,0)),he.each(function(Ge,ze,We){We===Ze.parent.key&&(rt.dimensions[ze]=Ge)}),rt.contextLayer&&rt.contextLayer.render(rt.panels,!1,!P(rt)),rt.focusLayer.render&&rt.focusLayer.render(rt.panels)}).on("dragend",function(Ze){var rt=Ze.parent;Ze.x=Ze.xScale(Ze.xIndex),Ze.canvasX=Ze.x*Ze.model.canvasPixelRatio,N(he,rt,ne),u.select(this).attr("transform",function(Ge){return a(Ge.x,0)}),rt.contextLayer&&rt.contextLayer.render(rt.panels,!1,!P(rt)),rt.focusLayer&&rt.focusLayer.render(rt.panels),rt.pickLayer&&rt.pickLayer.render(rt.panels,!0),K.linePickActive(!0),fe&&fe.axesMoved&&fe.axesMoved(rt.key,rt.dimensions.map(function(Ge){return Ge.crossfilterDimensionIndex}))})),he.exit().remove();var me=he.selectAll("."+p.cn.axisOverlays).data(c,o);me.enter().append("g").classed(p.cn.axisOverlays,!0),me.selectAll("."+p.cn.axis).remove();var be=me.selectAll("."+p.cn.axis).data(c,o);be.enter().append("g").classed(p.cn.axis,!0),be.each(function(Ze){var rt=Ze.model.height/Ze.model.tickDistance,Ge=Ze.domainScale,ze=Ge.domain();u.select(this).call(u.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(rt,Ze.tickFormat).tickValues(Ze.ordinal?ze:null).tickFormat(function(We){return d.isOrdinal(Ze)?We:j(Ze.model.dimensions[Ze.visibleIndex],We)}).scale(Ge)),n.font(be.selectAll("text"),Ze.model.tickFont)}),be.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),be.selectAll("text").style("text-shadow",r.makeTextShadow(te)).style("cursor","default");var Ce=me.selectAll("."+p.cn.axisHeading).data(c,o);Ce.enter().append("g").classed(p.cn.axisHeading,!0);var Se=Ce.selectAll("."+p.cn.axisTitle).data(c,o);Se.enter().append("text").classed(p.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Se.text(function(Ze){return Ze.label}).each(function(Ze){var rt=u.select(this);n.font(rt,Ze.model.labelFont),r.convertToTspans(rt,G)}).attr("transform",function(Ze){var rt=U(Ze.model.labelAngle,Ze.model.labelSide),Ge=p.axisTitleOffset;return(rt.dir>0?"":a(0,2*Ge+Ze.model.height))+i(rt.degrees)+a(-Ge*rt.dx,-Ge*rt.dy)}).attr("text-anchor",function(Ze){var rt=U(Ze.model.labelAngle,Ze.model.labelSide),Ge=Math.abs(rt.dx),ze=Math.abs(rt.dy);return 2*Ge>ze?rt.dir*rt.dx<0?"start":"end":"middle"});var Be=me.selectAll("."+p.cn.axisExtent).data(c,o);Be.enter().append("g").classed(p.cn.axisExtent,!0);var Ye=Be.selectAll("."+p.cn.axisExtentTop).data(c,o);Ye.enter().append("g").classed(p.cn.axisExtentTop,!0),Ye.attr("transform",a(0,-p.axisExtentOffset));var Xe=Ye.selectAll("."+p.cn.axisExtentTopText).data(c,o);Xe.enter().append("text").classed(p.cn.axisExtentTopText,!0).call(D),Xe.text(function(Ze){return ee(Ze,!0)}).each(function(Ze){n.font(u.select(this),Ze.model.rangeFont)});var Te=Be.selectAll("."+p.cn.axisExtentBottom).data(c,o);Te.enter().append("g").classed(p.cn.axisExtentBottom,!0),Te.attr("transform",function(Ze){return a(0,Ze.model.height+p.axisExtentOffset)});var Ie=Te.selectAll("."+p.cn.axisExtentBottomText).data(c,o);Ie.enter().append("text").classed(p.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Ie.text(function(Ze){return ee(Ze,!1)}).each(function(Ze){n.font(u.select(this),Ze.model.rangeFont)}),y.ensureAxisBrush(me,te)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":892,"./helpers":894,"./lines":896,"@plotly/d3":58,"color-rgba":91}],899:[function(e,I,B){var u=e("./parcoords"),s=e("../../lib/prepare_regl"),m=e("./helpers").isVisible;function x(i,a,r){var n=a.indexOf(r),f=i.indexOf(n);return f===-1&&(f+=a.length),f}function t(i,a){return function(n,f){return x(i,a,n)-x(i,a,f)}}I.exports=function(a,r){var n=a._fullLayout,f=s(a);if(!!f){var l={},o={},c={},v={},d=n._size;r.forEach(function(b,M){var w=b[0].trace;c[M]=w.index;var T=v[M]=w._fullInput.index;l[M]=a.data[T].dimensions,o[M]=a.data[T].dimensions.slice()});var p=function(b,M,w){var T=o[b][M],_=w.map(function(O){return O.slice()}),h="dimensions["+M+"].constraintrange",L=n._tracePreGUI[a._fullData[c[b]]._fullInput.uid];if(L[h]===void 0){var S=T.constraintrange;L[h]=S||null}var k=a._fullData[c[b]].dimensions[M];_.length?(_.length===1&&(_=_[0]),T.constraintrange=_,k.constraintrange=_.slice(),_=[_]):(delete T.constraintrange,delete k.constraintrange,_=null);var P={};P[h]=_,a.emit("plotly_restyle",[P,[v[b]]])},y=function(b){a.emit("plotly_hover",b)},g=function(b){a.emit("plotly_unhover",b)},A=function(b,M){var w=t(M,o[b].filter(m));l[b].sort(w),o[b].filter(function(T){return!m(T)}).sort(function(T){return o[b].indexOf(T)}).forEach(function(T){l[b].splice(l[b].indexOf(T),1),l[b].splice(o[b].indexOf(T),0,T)}),a.emit("plotly_restyle",[{dimensions:[l[b]]},[v[b]]])};u(a,r,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{filterChanged:p,hover:y,unhover:g,axesMoved:A})}}},{"../../lib/prepare_regl":516,"./helpers":894,"./parcoords":898}],900:[function(e,I,B){var u=e("../../plots/attributes"),s=e("../../plots/domain").attributes,m=e("../../plots/font_attributes"),x=e("../../components/color/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../lib/extend").extendFlat,r=m({editType:"plot",arrayOk:!0,colorEditType:"plot"});I.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:x.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},u.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:t({},{keys:["label","color","value","percent","text"]}),texttemplate:i({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},r,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},r,{}),outsidetextfont:a({},r,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},r,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:s({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},r,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],901:[function(e,I,B){var u=e("../../plots/plots");B.name="pie",B.plot=function(s,m,x,t){u.plotBasePlot(B.name,s,m,x,t)},B.clean=function(s,m,x,t){u.cleanBasePlot(B.name,s,m,x,t)}},{"../../plots/plots":619}],902:[function(e,I,B){var u=e("fast-isnumeric"),s=e("tinycolor2"),m=e("../../components/color"),x={};function t(n,f){var l=[],o=n._fullLayout,c=o.hiddenlabels||[],v=f.labels,d=f.marker.colors||[],p=f.values,y=f._length,g=f._hasValues&&y,A,b;if(f.dlabel)for(v=new Array(y),A=0;A<y;A++)v[A]=String(f.label0+A*f.dlabel);var M={},w=i(o["_"+f.type+"colormap"]),T=0,_=!1;for(A=0;A<y;A++){var h,L,S;if(g){if(h=p[A],!u(h))continue;h=+h}else h=1;L=v[A],(L===void 0||L==="")&&(L=A),L=String(L);var k=M[L];k===void 0?(M[L]=l.length,S=c.indexOf(L)!==-1,S||(T+=h),l.push({v:h,label:L,color:w(d[A],L),i:A,pts:[A],hidden:S})):(_=!0,b=l[k],b.v+=h,b.pts.push(A),b.hidden||(T+=h),b.color===!1&&d[A]&&(b.color=w(d[A],L)))}l=l.filter(function(O){return O.v>=0});var P=f.type==="funnelarea"?_:f.sort;return P&&l.sort(function(O,F){return F.v-O.v}),l[0]&&(l[0].vTotal=T),l}function i(n){return function(l,o){return!l||(l=s(l),!l.isValid())?!1:(l=m.addOpacity(l,l.getAlpha()),n[o]||(n[o]=l),l)}}function a(n,f){var l=(f||{}).type;l||(l="pie");var o=n._fullLayout,c=n.calcdata,v=o[l+"colorway"],d=o["_"+l+"colormap"];o["extend"+l+"colors"]&&(v=r(v,x));for(var p=0,y=0;y<c.length;y++){var g=c[y],A=g[0].trace.type;if(A===l)for(var b=0;b<g.length;b++){var M=g[b];M.color===!1&&(d[M.label]?M.color=d[M.label]:(d[M.label]=M.color=v[p%v.length],p++))}}}function r(n,f){var l,o=JSON.stringify(n),c=f[o];if(!c){for(c=n.slice(),l=0;l<n.length;l++)c.push(s(n[l]).lighten(20).toHexString());for(l=0;l<n.length;l++)c.push(s(n[l]).darken(20).toHexString());f[o]=c}return c}I.exports={calc:t,crossTraceCalc:a,makePullColorFn:i,generateExtendedColors:r}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],903:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("./attributes"),x=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText;function i(r,n){var f=Array.isArray(r),l=s.isArrayOrTypedArray(n),o=Math.min(f?r.length:1/0,l?n.length:1/0);if(isFinite(o)||(o=0),o&&l){for(var c,v=0;v<o;v++){var d=n[v];if(u(d)&&d>0){c=!0;break}}c||(o=0)}return{hasLabels:f,hasValues:l,len:o}}function a(r,n,f,l){function o(S,k){return s.coerce(r,n,m,S,k)}var c=o("labels"),v=o("values"),d=i(c,v),p=d.len;if(n._hasLabels=d.hasLabels,n._hasValues=d.hasValues,!n._hasLabels&&n._hasValues&&(o("label0"),o("dlabel")),!p){n.visible=!1;return}n._length=p;var y=o("marker.line.width");y&&o("marker.line.color"),o("marker.colors"),o("scalegroup");var g=o("text"),A=o("texttemplate"),b;if(A||(b=o("textinfo",Array.isArray(g)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),A||b&&b!=="none"){var M=o("textposition");t(r,n,l,o,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var w=Array.isArray(M)||M==="auto",T=w||M==="outside";T&&o("automargin"),(M==="inside"||M==="auto"||Array.isArray(M))&&o("insidetextorientation")}x(n,l,o);var _=o("hole"),h=o("title.text");if(h){var L=o("title.position",_?"middle center":"top center");!_&&L==="middle center"&&(n.title.position="top center"),s.coerceFont(o,"title.font",l.font)}o("sort"),o("direction"),o("rotation"),o("pull")}I.exports={handleLabelsAndValues:i,supplyDefaults:a}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":900,"fast-isnumeric":190}],904:[function(e,I,B){var u=e("../../components/fx/helpers").appendArrayMultiPointValues;I.exports=function(m,x){var t={curveNumber:x.index,pointNumbers:m.pts,data:x._input,fullData:x,label:m.label,color:m.color,value:m.v,percent:m.percent,text:m.text,bbox:m.bbox,v:m.v};return m.pts.length===1&&(t.pointNumber=t.i=m.pts[0]),u(t,x,m.pts),x.type==="funnelarea"&&(delete t.v,delete t.i),t}},{"../../components/fx/helpers":402}],905:[function(e,I,B){var u=e("../../lib");function s(m){return m.indexOf("e")!==-1?m.replace(/[.]?0+e/,"e"):m.indexOf(".")!==-1?m.replace(/[.]?0+$/,""):m}B.formatPiePercent=function(x,t){var i=s((x*100).toPrecision(3));return u.numSeparate(i,t)+"%"},B.formatPieValue=function(x,t){var i=s(x.toPrecision(10));return u.numSeparate(i,t)},B.getFirstFilled=function(x,t){if(!!Array.isArray(x))for(var i=0;i<t.length;i++){var a=x[t[i]];if(a||a===0||a==="")return a}},B.castOption=function(x,t){if(Array.isArray(x))return B.getFirstFilled(x,t);if(x)return x},B.getRotationAngle=function(m){return(m==="auto"?0:m)*Math.PI/180}},{"../../lib":503}],906:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":900,"./base_plot":901,"./calc":902,"./defaults":903,"./layout_attributes":907,"./layout_defaults":908,"./plot":909,"./style":910,"./style_one":911}],907:[function(e,I,B){I.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],908:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("hiddenlabels"),i("piecolorway",t.colorway),i("extendpiecolors")}},{"../../lib":503,"./layout_attributes":907}],909:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../plots/plots"),m=e("../../components/fx"),x=e("../../components/color"),t=e("../../components/drawing"),i=e("../../lib"),a=i.strScale,r=i.strTranslate,n=e("../../lib/svg_text_utils"),f=e("../bar/uniform_text"),l=f.recordMinTextSize,o=f.clearMinTextSize,c=e("../bar/constants").TEXTPAD,v=e("./helpers"),d=e("./event_data"),p=e("../../lib").isValidTextValue;function y(se,V){var Y=se._fullLayout,ne=Y._size;o("pie",Y),w(V,se),ee(V,ne);var te=i.makeTraceGroups(Y._pielayer,V,"trace").each(function(K){var $=u.select(this),ae=K[0],ie=ae.trace;G(K),$.attr("stroke-linejoin","round"),$.each(function(){var oe=u.select(this).selectAll("g.slice").data(K);oe.enter().append("g").classed("slice",!0),oe.exit().remove();var ue=[[[],[]],[[],[]]],xe=!1;oe.each(function(Xe,Te){if(Xe.hidden){u.select(this).selectAll("path,g").remove();return}Xe.pointNumber=Xe.i,Xe.curveNumber=ie.index,ue[Xe.pxmid[1]<0?0:1][Xe.pxmid[0]<0?0:1].push(Xe);var Ie=ae.cx,Ze=ae.cy,rt=u.select(this),Ge=rt.selectAll("path.surface").data([Xe]);if(Ge.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),rt.call(A,se,K),ie.pull){var ze=+v.castOption(ie.pull,Xe.pts)||0;ze>0&&(Ie+=ze*Xe.pxmid[0],Ze+=ze*Xe.pxmid[1])}Xe.cxFinal=Ie,Xe.cyFinal=Ze;function We(It,Ct,lt,dt){var et=dt*(Ct[0]-It[0]),Pe=dt*(Ct[1]-It[1]);return"a"+dt*ae.r+","+dt*ae.r+" 0 "+Xe.largeArc+(lt?" 1 ":" 0 ")+et+","+Pe}var mt=ie.hole;if(Xe.v===ae.vTotal){var Ft="M"+(Ie+Xe.px0[0])+","+(Ze+Xe.px0[1])+We(Xe.px0,Xe.pxmid,!0,1)+We(Xe.pxmid,Xe.px0,!0,1)+"Z";mt?Ge.attr("d","M"+(Ie+mt*Xe.px0[0])+","+(Ze+mt*Xe.px0[1])+We(Xe.px0,Xe.pxmid,!1,mt)+We(Xe.pxmid,Xe.px0,!1,mt)+"Z"+Ft):Ge.attr("d",Ft)}else{var Xt=We(Xe.px0,Xe.px1,!0,1);if(mt){var Pt=1-mt;Ge.attr("d","M"+(Ie+mt*Xe.px1[0])+","+(Ze+mt*Xe.px1[1])+We(Xe.px1,Xe.px0,!1,mt)+"l"+Pt*Xe.px0[0]+","+Pt*Xe.px0[1]+Xt+"Z")}else Ge.attr("d","M"+Ie+","+Ze+"l"+Xe.px0[0]+","+Xe.px0[1]+Xt+"Z")}le(se,Xe,ae);var Ut=v.castOption(ie.textposition,Xe.pts),Gt=rt.selectAll("g.slicetext").data(Xe.text&&Ut!=="none"?[0]:[]);Gt.enter().append("g").classed("slicetext",!0),Gt.exit().remove(),Gt.each(function(){var It=i.ensureSingle(u.select(this),"text","",function(ht){ht.attr("data-notex",1)}),Ct=i.ensureUniformFontSize(se,Ut==="outside"?b(ie,Xe,Y.font):M(ie,Xe,Y.font));It.text(Xe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(t.font,Ct).call(n.convertToTspans,se);var lt=t.bBox(It.node()),dt;if(Ut==="outside")dt=F(lt,Xe);else if(dt=T(lt,Xe,ae),Ut==="auto"&&dt.scale<1){var et=i.ensureUniformFontSize(se,ie.outsidetextfont);It.call(t.font,et),lt=t.bBox(It.node()),dt=F(lt,Xe)}var Pe=dt.textPosAngle,Je=Pe===void 0?Xe.pxmid:J(ae.r,Pe);if(dt.targetX=Ie+Je[0]*dt.rCenter+(dt.x||0),dt.targetY=Ze+Je[1]*dt.rCenter+(dt.y||0),fe(dt,lt),dt.outside){var it=dt.targetY;Xe.yLabelMin=it-lt.height/2,Xe.yLabelMid=it,Xe.yLabelMax=it+lt.height/2,Xe.labelExtraX=0,Xe.labelExtraY=0,xe=!0}dt.fontSize=Ct.size,l(ie.type,dt,Y),K[Te].transform=dt,It.attr("transform",i.getTextTransform(dt))})});var he=u.select(this).selectAll("g.titletext").data(ie.title.text?[0]:[]);if(he.enter().append("g").classed("titletext",!0),he.exit().remove(),he.each(function(){var Xe=i.ensureSingle(u.select(this),"text","",function(Ze){Ze.attr("data-notex",1)}),Te=ie.title.text;ie._meta&&(Te=i.templateString(Te,ie._meta)),Xe.text(Te).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(t.font,ie.title.font).call(n.convertToTspans,se);var Ie;ie.title.position==="middle center"?Ie=D(ae):Ie=R(ae,ne),Xe.attr("transform",r(Ie.x,Ie.y)+a(Math.min(1,Ie.scale))+r(Ie.tx,Ie.ty))}),xe&&j(ue,ie),g(oe,ie),xe&&ie.automargin){var me=t.bBox($.node()),be=ie.domain,Ce=ne.w*(be.x[1]-be.x[0]),Se=ne.h*(be.y[1]-be.y[0]),Be=(.5*Ce-ae.r)/ne.w,Ye=(.5*Se-ae.r)/ne.h;s.autoMargin(se,"pie."+ie.uid+".automargin",{xl:be.x[0]-Be,xr:be.x[1]+Be,yb:be.y[0]-Ye,yt:be.y[1]+Ye,l:Math.max(ae.cx-ae.r-me.left,0),r:Math.max(me.right-(ae.cx+ae.r),0),b:Math.max(me.bottom-(ae.cy+ae.r),0),t:Math.max(ae.cy-ae.r-me.top,0),pad:5})}})});setTimeout(function(){te.selectAll("tspan").each(function(){var K=u.select(this);K.attr("dy")&&K.attr("dy",K.attr("dy"))})},0)}function g(se,V){se.each(function(Y){var ne=u.select(this);if(!Y.labelExtraX&&!Y.labelExtraY){ne.select("path.textline").remove();return}var te=ne.select("g.slicetext text");Y.transform.targetX+=Y.labelExtraX,Y.transform.targetY+=Y.labelExtraY,te.attr("transform",i.getTextTransform(Y.transform));var K=Y.cxFinal+Y.pxmid[0],$=Y.cyFinal+Y.pxmid[1],ae="M"+K+","+$,ie=(Y.yLabelMax-Y.yLabelMin)*(Y.pxmid[0]<0?-1:1)/4;if(Y.labelExtraX){var oe=Y.labelExtraX*Y.pxmid[1]/Y.pxmid[0],ue=Y.yLabelMid+Y.labelExtraY-(Y.cyFinal+Y.pxmid[1]);Math.abs(oe)>Math.abs(ue)?ae+="l"+ue*Y.pxmid[0]/Y.pxmid[1]+","+ue+"H"+(K+Y.labelExtraX+ie):ae+="l"+Y.labelExtraX+","+oe+"v"+(ue-oe)+"h"+ie}else ae+="V"+(Y.yLabelMid+Y.labelExtraY)+"h"+ie;i.ensureSingle(ne,"path","textline").call(x.stroke,V.outsidetextfont.color).attr({"stroke-width":Math.min(2,V.outsidetextfont.size/8),d:ae,fill:"none"})})}function A(se,V,Y){var ne=Y[0],te=ne.cx,K=ne.cy,$=ne.trace,ae=$.type==="funnelarea";"_hasHoverLabel"in $||($._hasHoverLabel=!1),"_hasHoverEvent"in $||($._hasHoverEvent=!1),se.on("mouseover",function(ie){var oe=V._fullLayout,ue=V._fullData[$.index];if(!(V._dragging||oe.hovermode===!1)){var xe=ue.hoverinfo;if(Array.isArray(xe)&&(xe=m.castHoverinfo({hoverinfo:[v.castOption(xe,ie.pts)],_module:$._module},oe,0)),xe==="all"&&(xe="label+text+value+percent+name"),ue.hovertemplate||xe!=="none"&&xe!=="skip"&&xe){var he=ie.rInscribed||0,me=te+ie.pxmid[0]*(1-he),be=K+ie.pxmid[1]*(1-he),Ce=oe.separators,Se=[];if(xe&&xe.indexOf("label")!==-1&&Se.push(ie.label),ie.text=v.castOption(ue.hovertext||ue.text,ie.pts),xe&&xe.indexOf("text")!==-1){var Be=ie.text;i.isValidTextValue(Be)&&Se.push(Be)}ie.value=ie.v,ie.valueLabel=v.formatPieValue(ie.v,Ce),xe&&xe.indexOf("value")!==-1&&Se.push(ie.valueLabel),ie.percent=ie.v/ne.vTotal,ie.percentLabel=v.formatPiePercent(ie.percent,Ce),xe&&xe.indexOf("percent")!==-1&&Se.push(ie.percentLabel);var Ye=ue.hoverlabel,Xe=Ye.font,Te=[];m.loneHover({trace:$,x0:me-he*ne.r,x1:me+he*ne.r,y:be,_x0:ae?te+ie.TL[0]:me-he*ne.r,_x1:ae?te+ie.TR[0]:me+he*ne.r,_y0:ae?K+ie.TL[1]:be-he*ne.r,_y1:ae?K+ie.BL[1]:be+he*ne.r,text:Se.join("<br>"),name:ue.hovertemplate||xe.indexOf("name")!==-1?ue.name:void 0,idealAlign:ie.pxmid[0]<0?"left":"right",color:v.castOption(Ye.bgcolor,ie.pts)||ie.color,borderColor:v.castOption(Ye.bordercolor,ie.pts),fontFamily:v.castOption(Xe.family,ie.pts),fontSize:v.castOption(Xe.size,ie.pts),fontColor:v.castOption(Xe.color,ie.pts),nameLength:v.castOption(Ye.namelength,ie.pts),textAlign:v.castOption(Ye.align,ie.pts),hovertemplate:v.castOption(ue.hovertemplate,ie.pts),hovertemplateLabels:ie,eventData:[d(ie,ue)]},{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:V,inOut_bbox:Te}),ie.bbox=Te[0],$._hasHoverLabel=!0}$._hasHoverEvent=!0,V.emit("plotly_hover",{points:[d(ie,ue)],event:u.event})}}),se.on("mouseout",function(ie){var oe=V._fullLayout,ue=V._fullData[$.index],xe=u.select(this).datum();$._hasHoverEvent&&(ie.originalEvent=u.event,V.emit("plotly_unhover",{points:[d(xe,ue)],event:u.event}),$._hasHoverEvent=!1),$._hasHoverLabel&&(m.loneUnhover(oe._hoverlayer.node()),$._hasHoverLabel=!1)}),se.on("click",function(ie){var oe=V._fullLayout,ue=V._fullData[$.index];V._dragging||oe.hovermode===!1||(V._hoverdata=[d(ie,ue)],m.click(V,u.event))})}function b(se,V,Y){var ne=v.castOption(se.outsidetextfont.color,V.pts)||v.castOption(se.textfont.color,V.pts)||Y.color,te=v.castOption(se.outsidetextfont.family,V.pts)||v.castOption(se.textfont.family,V.pts)||Y.family,K=v.castOption(se.outsidetextfont.size,V.pts)||v.castOption(se.textfont.size,V.pts)||Y.size;return{color:ne,family:te,size:K}}function M(se,V,Y){var ne=v.castOption(se.insidetextfont.color,V.pts);!ne&&se._input.textfont&&(ne=v.castOption(se._input.textfont.color,V.pts));var te=v.castOption(se.insidetextfont.family,V.pts)||v.castOption(se.textfont.family,V.pts)||Y.family,K=v.castOption(se.insidetextfont.size,V.pts)||v.castOption(se.textfont.size,V.pts)||Y.size;return{color:ne||x.contrast(V.color),family:te,size:K}}function w(se,V){for(var Y,ne,te=0;te<se.length;te++)if(Y=se[te][0],ne=Y.trace,ne.title.text){var K=ne.title.text;ne._meta&&(K=i.templateString(K,ne._meta));var $=t.tester.append("text").attr("data-notex",1).text(K).call(t.font,ne.title.font).call(n.convertToTspans,V),ae=t.bBox($.node(),!0);Y.titleBox={width:ae.width,height:ae.height},$.remove()}}function T(se,V,Y){var ne=Y.r||V.rpx1,te=V.rInscribed,K=V.startangle===V.stopangle;if(K)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var $=V.ring,ae=$===1&&Math.abs(V.startangle-V.stopangle)===Math.PI*2,ie=V.halfangle,oe=V.midangle,ue=Y.trace.insidetextorientation,xe=ue==="horizontal",he=ue==="tangential",me=ue==="radial",be=ue==="auto",Ce=[],Se;if(!be){var Be=function(Ge,ze){if(_(V,Ge)){var We=Math.abs(Ge-V.startangle),mt=Math.abs(Ge-V.stopangle),Ft=We<mt?We:mt;ze==="tan"?Se=L(se,ne,$,Ft,0):Se=h(se,ne,$,Ft,Math.PI/2),Se.textPosAngle=Ge,Ce.push(Se)}},Ye;if(xe||he){for(Ye=4;Ye>=-4;Ye-=2)Be(Math.PI*Ye,"tan");for(Ye=4;Ye>=-4;Ye-=2)Be(Math.PI*(Ye+1),"tan")}if(xe||me){for(Ye=4;Ye>=-4;Ye-=2)Be(Math.PI*(Ye+1.5),"rad");for(Ye=4;Ye>=-4;Ye-=2)Be(Math.PI*(Ye+.5),"rad")}}if(ae||be||xe){var Xe=Math.sqrt(se.width*se.width+se.height*se.height);if(Se={scale:te*ne*2/Xe,rCenter:1-te,rotate:0},Se.textPosAngle=(V.startangle+V.stopangle)/2,Se.scale>=1)return Se;Ce.push(Se)}(be||me)&&(Se=h(se,ne,$,ie,oe),Se.textPosAngle=(V.startangle+V.stopangle)/2,Ce.push(Se)),(be||he)&&(Se=L(se,ne,$,ie,oe),Se.textPosAngle=(V.startangle+V.stopangle)/2,Ce.push(Se));for(var Te=0,Ie=0,Ze=0;Ze<Ce.length;Ze++){var rt=Ce[Ze].scale;if(Ie<rt&&(Ie=rt,Te=Ze),!be&&Ie>=1)break}return Ce[Te]}function _(se,V){var Y=se.startangle,ne=se.stopangle;return Y>V&&V>ne||Y<V&&V<ne}function h(se,V,Y,ne,te){V=Math.max(0,V-2*c);var K=se.width/se.height,$=P(K,ne,V,Y);return{scale:$*2/se.height,rCenter:S(K,$/V),rotate:k(te)}}function L(se,V,Y,ne,te){V=Math.max(0,V-2*c);var K=se.height/se.width,$=P(K,ne,V,Y);return{scale:$*2/se.width,rCenter:S(K,$/V),rotate:k(te+Math.PI/2)}}function S(se,V){return Math.cos(V)-se*V}function k(se){return(180/Math.PI*se+720)%180-90}function P(se,V,Y,ne){var te=se+1/(2*Math.tan(V));return Y*Math.min(1/(Math.sqrt(te*te+.5)+te),ne/(Math.sqrt(se*se+ne/2)+se))}function O(se,V){return se.v===V.vTotal&&!V.trace.hole?1:Math.min(1/(1+1/Math.sin(se.halfangle)),se.ring/2)}function F(se,V){var Y=V.pxmid[0],ne=V.pxmid[1],te=se.width/2,K=se.height/2;return Y<0&&(te*=-1),ne<0&&(K*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(K)*(te>0?1:-1)/2,y:K/(1+Y*Y/(ne*ne)),outside:!0}}function D(se){var V=Math.sqrt(se.titleBox.width*se.titleBox.width+se.titleBox.height*se.titleBox.height);return{x:se.cx,y:se.cy,scale:se.trace.hole*se.r*2/V,tx:0,ty:-se.titleBox.height/2+se.trace.title.font.size}}function R(se,V){var Y=1,ne=1,te,K=se.trace,$={x:se.cx,y:se.cy},ae={tx:0,ty:0};ae.ty+=K.title.font.size,te=X(K),K.title.position.indexOf("top")!==-1?($.y-=(1+te)*se.r,ae.ty-=se.titleBox.height):K.title.position.indexOf("bottom")!==-1&&($.y+=(1+te)*se.r);var ie=U(se.r,se.trace.aspectratio),oe=V.w*(K.domain.x[1]-K.domain.x[0])/2;return K.title.position.indexOf("left")!==-1?(oe=oe+ie,$.x-=(1+te)*ie,ae.tx+=se.titleBox.width/2):K.title.position.indexOf("center")!==-1?oe*=2:K.title.position.indexOf("right")!==-1&&(oe=oe+ie,$.x+=(1+te)*ie,ae.tx-=se.titleBox.width/2),Y=oe/se.titleBox.width,ne=N(se,V)/se.titleBox.height,{x:$.x,y:$.y,scale:Math.min(Y,ne),tx:ae.tx,ty:ae.ty}}function U(se,V){return se/(V===void 0?1:V)}function N(se,V){var Y=se.trace,ne=V.h*(Y.domain.y[1]-Y.domain.y[0]);return Math.min(se.titleBox.height,ne/2)}function X(se){var V=se.pull;if(!V)return 0;var Y;if(Array.isArray(V))for(V=0,Y=0;Y<se.pull.length;Y++)se.pull[Y]>V&&(V=se.pull[Y]);return V}function j(se,V){var Y,ne,te,K,$,ae,ie,oe,ue,xe,he,me,be;function Ce(Xe,Te){return Xe.pxmid[1]-Te.pxmid[1]}function Se(Xe,Te){return Te.pxmid[1]-Xe.pxmid[1]}function Be(Xe,Te){Te||(Te={});var Ie=Te.labelExtraY+(ne?Te.yLabelMax:Te.yLabelMin),Ze=ne?Xe.yLabelMin:Xe.yLabelMax,rt=ne?Xe.yLabelMax:Xe.yLabelMin,Ge=Xe.cyFinal+$(Xe.px0[1],Xe.px1[1]),ze=Ie-Ze,We,mt,Ft,Xt,Pt,Ut;if(ze*ie>0&&(Xe.labelExtraY=ze),!!Array.isArray(V.pull))for(mt=0;mt<xe.length;mt++)Ft=xe[mt],!(Ft===Xe||(v.castOption(V.pull,Xe.pts)||0)>=(v.castOption(V.pull,Ft.pts)||0))&&((Xe.pxmid[1]-Ft.pxmid[1])*ie>0?(Xt=Ft.cyFinal+$(Ft.px0[1],Ft.px1[1]),ze=Xt-Ze-Xe.labelExtraY,ze*ie>0&&(Xe.labelExtraY+=ze)):(rt+Xe.labelExtraY-Ge)*ie>0&&(We=3*ae*Math.abs(mt-xe.indexOf(Xe)),Pt=Ft.cxFinal+K(Ft.px0[0],Ft.px1[0]),Ut=Pt+We-(Xe.cxFinal+Xe.pxmid[0])-Xe.labelExtraX,Ut*ae>0&&(Xe.labelExtraX+=Ut)))}for(ne=0;ne<2;ne++)for(te=ne?Ce:Se,$=ne?Math.max:Math.min,ie=ne?1:-1,Y=0;Y<2;Y++){for(K=Y?Math.max:Math.min,ae=Y?1:-1,oe=se[ne][Y],oe.sort(te),ue=se[1-ne][Y],xe=ue.concat(oe),me=[],he=0;he<oe.length;he++)oe[he].yLabelMid!==void 0&&me.push(oe[he]);for(be=!1,he=0;ne&&he<ue.length;he++)if(ue[he].yLabelMid!==void 0){be=ue[he];break}for(he=0;he<me.length;he++){var Ye=he&&me[he-1];be&&!he&&(Ye=be),Be(me[he],Ye)}}}function ee(se,V){for(var Y=[],ne=0;ne<se.length;ne++){var te=se[ne][0],K=te.trace,$=K.domain,ae=V.w*($.x[1]-$.x[0]),ie=V.h*($.y[1]-$.y[0]);K.title.text&&K.title.position!=="middle center"&&(ie-=N(te,V));var oe=ae/2,ue=ie/2;K.type==="funnelarea"&&!K.scalegroup&&(ue/=K.aspectratio),te.r=Math.min(oe,ue)/(1+X(K)),te.cx=V.l+V.w*(K.domain.x[1]+K.domain.x[0])/2,te.cy=V.t+V.h*(1-K.domain.y[0])-ie/2,K.title.text&&K.title.position.indexOf("bottom")!==-1&&(te.cy-=N(te,V)),K.scalegroup&&Y.indexOf(K.scalegroup)===-1&&Y.push(K.scalegroup)}q(se,Y)}function q(se,V){for(var Y,ne,te,K=0;K<V.length;K++){var $=1/0,ae=V[K];for(ne=0;ne<se.length;ne++)if(Y=se[ne][0],te=Y.trace,te.scalegroup===ae){var ie;if(te.type==="pie")ie=Y.r*Y.r;else if(te.type==="funnelarea"){var oe,ue;te.aspectratio>1?(oe=Y.r,ue=oe/te.aspectratio):(ue=Y.r,oe=ue*te.aspectratio),oe*=(1+te.baseratio)/2,ie=oe*ue}$=Math.min($,ie/Y.vTotal)}for(ne=0;ne<se.length;ne++)if(Y=se[ne][0],te=Y.trace,te.scalegroup===ae){var xe=$*Y.vTotal;te.type==="funnelarea"&&(xe/=(1+te.baseratio)/2,xe/=te.aspectratio),Y.r=Math.sqrt(xe)}}}function G(se){var V=se[0],Y=V.r,ne=V.trace,te=v.getRotationAngle(ne.rotation),K=2*Math.PI/V.vTotal,$="px0",ae="px1",ie,oe,ue;if(ne.direction==="counterclockwise"){for(ie=0;ie<se.length&&se[ie].hidden;ie++);if(ie===se.length)return;te+=K*se[ie].v,K*=-1,$="px1",ae="px0"}for(ue=J(Y,te),ie=0;ie<se.length;ie++)oe=se[ie],!oe.hidden&&(oe[$]=ue,oe.startangle=te,te+=K*oe.v/2,oe.pxmid=J(Y,te),oe.midangle=te,te+=K*oe.v/2,ue=J(Y,te),oe.stopangle=te,oe[ae]=ue,oe.largeArc=oe.v>V.vTotal/2?1:0,oe.halfangle=Math.PI*Math.min(oe.v/V.vTotal,.5),oe.ring=1-ne.hole,oe.rInscribed=O(oe,V))}function J(se,V){return[se*Math.sin(V),-se*Math.cos(V)]}function le(se,V,Y){var ne=se._fullLayout,te=Y.trace,K=te.texttemplate,$=te.textinfo;if(!K&&$&&$!=="none"){var ae=$.split("+"),ie=function(Te){return ae.indexOf(Te)!==-1},oe=ie("label"),ue=ie("text"),xe=ie("value"),he=ie("percent"),me=ne.separators,be;if(be=oe?[V.label]:[],ue){var Ce=v.getFirstFilled(te.text,V.pts);p(Ce)&&be.push(Ce)}xe&&be.push(v.formatPieValue(V.v,me)),he&&be.push(v.formatPiePercent(V.v/Y.vTotal,me)),V.text=be.join("<br>")}function Se(Te){return{label:Te.label,value:Te.v,valueLabel:v.formatPieValue(Te.v,ne.separators),percent:Te.v/Y.vTotal,percentLabel:v.formatPiePercent(Te.v/Y.vTotal,ne.separators),color:Te.color,text:Te.text,customdata:i.castOption(te,Te.i,"customdata")}}if(K){var Be=i.castOption(te,V.i,"texttemplate");if(!Be)V.text="";else{var Ye=Se(V),Xe=v.getFirstFilled(te.text,V.pts);(p(Xe)||Xe==="")&&(Ye.text=Xe),V.text=i.texttemplateString(Be,Ye,se._fullLayout._d3locale,Ye,te._meta||{})}}}function fe(se,V){var Y=se.rotate*Math.PI/180,ne=Math.cos(Y),te=Math.sin(Y),K=(V.left+V.right)/2,$=(V.top+V.bottom)/2;se.textX=K*ne-$*te,se.textY=K*te+$*ne,se.noCenter=!0}I.exports={plot:y,formatSliceLabel:le,transformInsideText:T,determineInsideTextFont:M,positionTitleOutside:R,prerenderTitles:w,layoutAreas:ee,attachFxHandlers:A,computeTransform:fe}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":904,"./helpers":905,"@plotly/d3":58}],910:[function(e,I,B){var u=e("@plotly/d3"),s=e("./style_one"),m=e("../bar/uniform_text").resizeText;I.exports=function(t){var i=t._fullLayout._pielayer.selectAll(".trace");m(t,i,"pie"),i.each(function(a){var r=a[0],n=r.trace,f=u.select(this);f.style({opacity:n.opacity}),f.selectAll("path.surface").each(function(l){u.select(this).call(s,l,n)})})}},{"../bar/uniform_text":664,"./style_one":911,"@plotly/d3":58}],911:[function(e,I,B){var u=e("../../components/color"),s=e("./helpers").castOption;I.exports=function(x,t,i){var a=i.marker.line,r=s(a.color,t.pts)||u.defaultLine,n=s(a.width,t.pts)||0;x.style("stroke-width",n).call(u.fill,t.color).call(u.stroke,r)}},{"../../components/color":366,"./helpers":905}],912:[function(e,I,B){var u=e("../scatter/attributes");I.exports={x:u.x,y:u.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:u.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":926}],913:[function(e,I,B){var u=e("../../../stackgl_modules").gl_pointcloud2d,s=e("../../lib/str2rgbarray"),m=e("../../plots/cartesian/autorange").findExtremes,x=e("../scatter/get_trace_color");function t(r,n){this.scene=r,this.uid=n,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=u(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var i=t.prototype;i.handlePick=function(r){var n=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[n*2],this.pickXYData[n*2+1]]:[this.pickXData[n],this.pickYData[n]],textLabel:Array.isArray(this.textLabels)?this.textLabels[n]:this.textLabels,color:this.color,name:this.name,pointIndex:n,hoverinfo:this.hoverinfo}},i.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=x(r,{})},i.updateFast=function(r){var n=this.xData=this.pickXData=r.x,f=this.yData=this.pickYData=r.y,l=this.pickXYData=r.xy,o=r.xbounds&&r.ybounds,c=r.indices,v,d,p,y=this.bounds,g,A,b;if(l){if(p=l,v=l.length>>>1,o)y[0]=r.xbounds[0],y[2]=r.xbounds[1],y[1]=r.ybounds[0],y[3]=r.ybounds[1];else for(b=0;b<v;b++)g=p[b*2],A=p[b*2+1],g<y[0]&&(y[0]=g),g>y[2]&&(y[2]=g),A<y[1]&&(y[1]=A),A>y[3]&&(y[3]=A);if(c)d=c;else for(d=new Int32Array(v),b=0;b<v;b++)d[b]=b}else for(v=n.length,p=new Float32Array(2*v),d=new Int32Array(v),b=0;b<v;b++)g=n[b],A=f[b],d[b]=b,p[b*2]=g,p[b*2+1]=A,g<y[0]&&(y[0]=g),g>y[2]&&(y[2]=g),A<y[1]&&(y[1]=A),A>y[3]&&(y[3]=A);this.idToIndex=d,this.pointcloudOptions.idToIndex=d,this.pointcloudOptions.positions=p;var M=s(r.marker.color),w=s(r.marker.border.color),T=r.opacity*r.marker.opacity;M[3]*=T,this.pointcloudOptions.color=M;var _=r.marker.blend;if(_===null){var h=100;_=n.length<h||f.length<h}this.pointcloudOptions.blend=_,w[3]*=T,this.pointcloudOptions.borderColor=w;var L=r.marker.sizemin,S=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var k=this.scene.xaxis,P=this.scene.yaxis,O=S/2||.5;r._extremes[k._id]=m(k,[y[0],y[2]],{ppad:O}),r._extremes[P._id]=m(P,[y[1],y[3]],{ppad:O})},i.dispose=function(){this.pointcloud.dispose()};function a(r,n){var f=new t(r,n.uid);return f.update(n),f}I.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":936}],914:[function(e,I,B){var u=e("../../lib"),s=e("./attributes");I.exports=function(x,t,i){function a(r,n){return u.coerce(x,t,s,r,n)}a("x"),a("y"),a("xbounds"),a("ybounds"),x.xy&&x.xy instanceof Float32Array&&(t.xy=x.xy),x.indices&&x.indices instanceof Int32Array&&(t.indices=x.indices),a("text"),a("marker.color",i),a("marker.opacity"),a("marker.blend"),a("marker.sizemin"),a("marker.sizemax"),a("marker.border.color",i),a("marker.border.arearatio"),t._length=null}},{"../../lib":503,"./attributes":912}],915:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../scatter3d/calc"),plot:e("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":955,"./attributes":912,"./convert":913,"./defaults":914}],916:[function(e,I,B){var u=e("../../plots/font_attributes"),s=e("../../plots/attributes"),m=e("../../components/color/attributes"),x=e("../../components/fx/attributes"),t=e("../../plots/domain").attributes,i=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../components/colorscale/attributes"),r=e("../../plot_api/plot_template").templatedArray,n=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,f=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,o=I.exports=l({hoverinfo:f({},s.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:x.hoverlabel,domain:t({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:u({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:i({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:i({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:f(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");o.transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],917:[function(e,I,B){var u=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/get_data").getModuleCalcData,m=e("./plot"),x=e("../../components/fx/layout_attributes"),t=e("../../lib/setcursor"),i=e("../../components/dragelement"),a=e("../../plots/cartesian/select").prepSelect,r=e("../../lib"),n=e("../../registry"),f="sankey";B.name=f,B.baseLayoutAttrOverrides=u({hoverlabel:x.hoverlabel},"plot","nested"),B.plot=function(o){var c=s(o.calcdata,f)[0];m(o,c),B.updateFx(o)},B.clean=function(o,c,v,d){var p=d._has&&d._has(f),y=c._has&&c._has(f);p&&!y&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},B.updateFx=function(o){for(var c=0;c<o._fullData.length;c++)l(o,c)};function l(o,c){var v=o._fullData[c],d=o._fullLayout,p=d.dragmode,y=d.dragmode==="pan"?"move":"crosshair",g=v._bgRect;if(!(p==="pan"||p==="zoom")){t(g,y);var A={_id:"x",c2p:r.identity,_offset:v._sankey.translateX,_length:v._sankey.width},b={_id:"y",c2p:r.identity,_offset:v._sankey.translateY,_length:v._sankey.height},M={gd:o,element:g.node(),plotinfo:{id:c,xaxis:A,yaxis:b,fillRangeItems:r.noop},subplot:c,xaxes:[A],yaxes:[b],doneFnCompleted:function(w){var T=o._fullData[c],_,h=T.node.groups.slice(),L=[];function S(F){for(var D=T._sankey.graph.nodes,R=0;R<D.length;R++)if(D[R].pointNumber===F)return D[R]}for(var k=0;k<w.length;k++){var P=S(w[k].pointNumber);if(!!P)if(P.group){for(var O=0;O<P.childrenNodes.length;O++)L.push(P.childrenNodes[O].pointNumber);h[P.pointNumber-T.node._count]=!1}else L.push(P.pointNumber)}_=h.filter(Boolean).concat([L]),n.call("_guiRestyle",o,{"node.groups":[_]},c)}};M.prepFn=function(w,T,_){a(w,T,_,M,p)},i.init(M)}}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":922}],918:[function(e,I,B){var u=e("strongly-connected-components"),s=e("../../lib"),m=e("../../lib/gup").wrap,x=s.isArrayOrTypedArray,t=s.isIndex,i=e("../../components/colorscale");function a(n){var f=n.node,l=n.link,o=[],c=x(l.color),v=x(l.customdata),d={},p={},y=l.colorscales.length,g;for(g=0;g<y;g++){var A=l.colorscales[g],b=i.extractScale(A,{cLetter:"c"}),M=i.makeColorScaleFunc(b);p[A.label]=M}var w=0;for(g=0;g<l.value.length;g++)l.source[g]>w&&(w=l.source[g]),l.target[g]>w&&(w=l.target[g]);var T=w+1;n.node._count=T;var _,h=n.node.groups,L={};for(g=0;g<h.length;g++){var S=h[g];for(_=0;_<S.length;_++){var k=S[_],P=T+g;L.hasOwnProperty(k)?s.warn("Node "+k+" is already part of a group."):L[k]=P}}var O={source:[],target:[]};for(g=0;g<l.value.length;g++){var F=l.value[g],D=l.source[g],R=l.target[g];if(!!(F>0&&t(D,T)&&t(R,T))&&!(L.hasOwnProperty(D)&&L.hasOwnProperty(R)&&L[D]===L[R])){L.hasOwnProperty(R)&&(R=L[R]),L.hasOwnProperty(D)&&(D=L[D]),D=+D,R=+R,d[D]=d[R]=!0;var U="";l.label&&l.label[g]&&(U=l.label[g]);var N=null;U&&p.hasOwnProperty(U)&&(N=p[U]),o.push({pointNumber:g,label:U,color:c?l.color[g]:l.color,customdata:v?l.customdata[g]:l.customdata,concentrationscale:N,source:D,target:R,value:+F}),O.source.push(D),O.target.push(R)}}var X=T+h.length,j=x(f.color),ee=x(f.customdata),q=[];for(g=0;g<X;g++)if(!!d[g]){var G=f.label[g];q.push({group:g>T-1,childrenNodes:[],pointNumber:g,label:G,color:j?f.color[g]:f.color,customdata:ee?f.customdata[g]:f.customdata})}var J=!1;return r(X,O.source,O.target)&&(J=!0),{circular:J,links:o,nodes:q,groups:h,groupLookup:L}}function r(n,f,l){for(var o=s.init2dArray(n,0),c=0;c<Math.min(f.length,l.length);c++)if(s.isIndex(f[c],n)&&s.isIndex(l[c],n)){if(f[c]===l[c])return!0;o[f[c]].push(l[c])}var v=u(o);return v.components.some(function(d){return d.length>1})}I.exports=function(f,l){var o=a(l);return m({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],919:[function(e,I,B){I.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],920:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("../../components/color"),x=e("tinycolor2"),t=e("../../plots/domain").defaults,i=e("../../components/fx/hoverlabel_defaults"),a=e("../../plot_api/plot_template"),r=e("../../plots/array_container_defaults");I.exports=function(l,o,c,v){function d(S,k){return u.coerce(l,o,s,S,k)}var p=u.extendDeep(v.hoverlabel,l.hoverlabel),y=l.node,g=a.newContainer(o,"node");function A(S,k){return u.coerce(y,g,s.node,S,k)}A("label"),A("groups"),A("x"),A("y"),A("pad"),A("thickness"),A("line.color"),A("line.width"),A("hoverinfo",l.hoverinfo),i(y,g,A,p),A("hovertemplate");var b=v.colorway,M=function(S){return b[S%b.length]};A("color",g.label.map(function(S,k){return m.addOpacity(M(k),.8)})),A("customdata");var w=l.link||{},T=a.newContainer(o,"link");function _(S,k){return u.coerce(w,T,s.link,S,k)}_("label"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",l.hoverinfo),i(w,T,_,p),_("hovertemplate");var h=x(v.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",u.repeat(h,T.value.length)),_("customdata"),r(w,T,{name:"colorscales",handleItemDefaults:n}),t(o,v,d),d("orientation"),d("valueformat"),d("valuesuffix");var L;g.x.length&&g.y.length&&(L="freeform"),d("arrangement",L),u.coerceFont(d,"textfont",u.extendFlat({},v.font)),o._length=null};function n(f,l){function o(c,v){return u.coerce(f,l,s.link.colorscales,c,v)}o("label"),o("cmin"),o("cmax"),o("colorscale")}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":916,tinycolor2:312}],921:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"sankey",basePlotModule:e("./base_plot"),selectPoints:e("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":916,"./base_plot":917,"./calc":918,"./defaults":920,"./plot":922,"./select.js":924}],922:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=s.numberFormat,x=e("./render"),t=e("../../components/fx"),i=e("../../components/color"),a=e("./constants").cn,r=s._;function n(b){return b!==""}function f(b,M){return b.filter(function(w){return w.key===M.traceId})}function l(b,M){u.select(b).select("path").style("fill-opacity",M),u.select(b).select("rect").style("fill-opacity",M)}function o(b){u.select(b).select("text.name").style("fill","black")}function c(b){return function(M){return b.node.sourceLinks.indexOf(M.link)!==-1||b.node.targetLinks.indexOf(M.link)!==-1}}function v(b){return function(M){return M.node.sourceLinks.indexOf(b.link)!==-1||M.node.targetLinks.indexOf(b.link)!==-1}}function d(b,M,w){M&&w&&f(w,M).selectAll("."+a.sankeyLink).filter(c(M)).call(y.bind(0,M,w,!1))}function p(b,M,w){M&&w&&f(w,M).selectAll("."+a.sankeyLink).filter(c(M)).call(g.bind(0,M,w,!1))}function y(b,M,w,T){var _=T.datum().link.label;T.style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),_&&f(M,b).selectAll("."+a.sankeyLink).filter(function(h){return h.link.label===_}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),w&&f(M,b).selectAll("."+a.sankeyNode).filter(v(b)).call(d)}function g(b,M,w,T){var _=T.datum().link.label;T.style("fill-opacity",function(h){return h.tinyColorAlpha}),_&&f(M,b).selectAll("."+a.sankeyLink).filter(function(h){return h.link.label===_}).style("fill-opacity",function(h){return h.tinyColorAlpha}),w&&f(M,b).selectAll(a.sankeyNode).filter(v(b)).call(p)}function A(b,M){var w=b.hoverlabel||{},T=s.nestedProperty(w,M).get();return Array.isArray(T)?!1:T}I.exports=function(M,w){for(var T=M._fullLayout,_=T._paper,h=T._size,L=0;L<M._fullData.length;L++)if(!!M._fullData[L].visible&&M._fullData[L].type===a.sankey&&!M._fullData[L]._viewInitial){var S=M._fullData[L].node;M._fullData[L]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var k=function(J,le){var fe=le.link;fe.originalEvent=u.event,M._hoverdata=[fe],t.click(M,{target:!0})},P=function(J,le,fe){M._fullLayout.hovermode!==!1&&(u.select(J).call(y.bind(0,le,fe,!0)),le.link.trace.link.hoverinfo!=="skip"&&(le.link.fullData=le.link.trace,M.emit("plotly_hover",{event:u.event,points:[le.link]})))},O=r(M,"source:")+" ",F=r(M,"target:")+" ",D=r(M,"concentration:")+" ",R=r(M,"incoming flow count:")+" ",U=r(M,"outgoing flow count:")+" ",N=function(J,le){if(M._fullLayout.hovermode===!1)return;var fe=le.link.trace.link;if(fe.hoverinfo==="none"||fe.hoverinfo==="skip")return;var se=[];function V(ie){var oe,ue;ie.circular?(oe=(ie.circularPathData.leftInnerExtent+ie.circularPathData.rightInnerExtent)/2,ue=ie.circularPathData.verticalFullExtent):(oe=(ie.source.x1+ie.target.x0)/2,ue=(ie.y0+ie.y1)/2);var xe=[oe,ue];return ie.trace.orientation==="v"&&xe.reverse(),xe[0]+=le.parent.translateX,xe[1]+=le.parent.translateY,xe}for(var Y=0,ne=0;ne<le.flow.links.length;ne++){var te=le.flow.links[ne];if(!(M._fullLayout.hovermode==="closest"&&le.link.pointNumber!==te.pointNumber)){le.link.pointNumber===te.pointNumber&&(Y=ne),te.fullData=te.trace,fe=le.link.trace.link;var K=V(te),$={valueLabel:m(le.valueFormat)(te.value)+le.valueSuffix};se.push({x:K[0],y:K[1],name:$.valueLabel,text:[te.label||"",O+te.source.label,F+te.target.label,te.concentrationscale?D+m("%0.2f")(te.flow.labelConcentration):""].filter(n).join("<br>"),color:A(fe,"bgcolor")||i.addOpacity(te.color,1),borderColor:A(fe,"bordercolor"),fontFamily:A(fe,"font.family"),fontSize:A(fe,"font.size"),fontColor:A(fe,"font.color"),nameLength:A(fe,"namelength"),textAlign:A(fe,"align"),idealAlign:u.event.x<K[0]?"right":"left",hovertemplate:fe.hovertemplate,hovertemplateLabels:$,eventData:[te]})}}var ae=t.loneHover(se,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:M,anchorIndex:Y});ae.each(function(){var ie=this;le.link.concentrationscale||l(ie,.65),o(ie)})},X=function(J,le,fe){M._fullLayout.hovermode!==!1&&(u.select(J).call(g.bind(0,le,fe,!0)),le.link.trace.link.hoverinfo!=="skip"&&(le.link.fullData=le.link.trace,M.emit("plotly_unhover",{event:u.event,points:[le.link]})),t.loneUnhover(T._hoverlayer.node()))},j=function(J,le,fe){var se=le.node;se.originalEvent=u.event,M._hoverdata=[se],u.select(J).call(p,le,fe),t.click(M,{target:!0})},ee=function(J,le,fe){M._fullLayout.hovermode!==!1&&(u.select(J).call(d,le,fe),le.node.trace.node.hoverinfo!=="skip"&&(le.node.fullData=le.node.trace,M.emit("plotly_hover",{event:u.event,points:[le.node]})))},q=function(J,le){if(M._fullLayout.hovermode!==!1){var fe=le.node.trace.node;if(!(fe.hoverinfo==="none"||fe.hoverinfo==="skip")){var se=u.select(J).select("."+a.nodeRect),V=M._fullLayout._paperdiv.node().getBoundingClientRect(),Y=se.node().getBoundingClientRect(),ne=Y.left-2-V.left,te=Y.right+2-V.left,K=Y.top+Y.height/4-V.top,$={valueLabel:m(le.valueFormat)(le.node.value)+le.valueSuffix};le.node.fullData=le.node.trace,M._fullLayout._calcInverseTransform(M);var ae=M._fullLayout._invScaleX,ie=M._fullLayout._invScaleY,oe=t.loneHover({x0:ae*ne,x1:ae*te,y:ie*K,name:m(le.valueFormat)(le.node.value)+le.valueSuffix,text:[le.node.label,R+le.node.targetLinks.length,U+le.node.sourceLinks.length].filter(n).join("<br>"),color:A(fe,"bgcolor")||le.tinyColorHue,borderColor:A(fe,"bordercolor"),fontFamily:A(fe,"font.family"),fontSize:A(fe,"font.size"),fontColor:A(fe,"font.color"),nameLength:A(fe,"namelength"),textAlign:A(fe,"align"),idealAlign:"left",hovertemplate:fe.hovertemplate,hovertemplateLabels:$,eventData:[le.node]},{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:M});l(oe,.85),o(oe)}}},G=function(J,le,fe){M._fullLayout.hovermode!==!1&&(u.select(J).call(p,le,fe),le.node.trace.node.hoverinfo!=="skip"&&(le.node.fullData=le.node.trace,M.emit("plotly_unhover",{event:u.event,points:[le.node]})),t.loneUnhover(T._hoverlayer.node()))};x(M,_,w,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:P,follow:N,unhover:X,select:k},nodeEvents:{hover:ee,follow:q,unhover:G,select:j}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":919,"./render":923,"@plotly/d3":58}],923:[function(e,I,B){var u=e("d3-force"),s=e("d3-interpolate").interpolateNumber,m=e("@plotly/d3"),x=e("@plotly/d3-sankey"),t=e("@plotly/d3-sankey-circular"),i=e("./constants"),a=e("tinycolor2"),r=e("../../components/color"),n=e("../../components/drawing"),f=e("../../lib"),l=f.strTranslate,o=f.strRotate,c=e("../../lib/gup"),v=c.keyFun,d=c.repeat,p=c.unwrap,y=e("../../lib/svg_text_utils"),g=e("../../registry"),A=e("../../constants/alignment"),b=A.CAP_SHIFT,M=A.LINE_SPACING,w=3;function T(V,Y,ne){var te=p(Y),K=te.trace,$=K.domain,ae=K.orientation==="h",ie=K.node.pad,oe=K.node.thickness,ue=V.width*($.x[1]-$.x[0]),xe=V.height*($.y[1]-$.y[0]),he=te._nodes,me=te._links,be=te.circular,Ce;be?Ce=t.sankeyCircular().circularLinkGap(0):Ce=x.sankey(),Ce.iterations(i.sankeyIterations).size(ae?[ue,xe]:[xe,ue]).nodeWidth(oe).nodePadding(ie).nodeId(function(Pt){return Pt.pointNumber}).nodes(he).links(me);var Se=Ce();Ce.nodePadding()<ie&&f.warn("node.pad was reduced to ",Ce.nodePadding()," to fit within the figure.");var Be,Ye,Xe;for(var Te in te._groupLookup){var Ie=parseInt(te._groupLookup[Te]),Ze;for(Be=0;Be<Se.nodes.length;Be++)if(Se.nodes[Be].pointNumber===Ie){Ze=Se.nodes[Be];break}if(!!Ze){var rt={pointNumber:parseInt(Te),x0:Ze.x0,x1:Ze.x1,y0:Ze.y0,y1:Ze.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Se.nodes.unshift(rt),Ze.childrenNodes.unshift(rt)}}function Ge(){for(Be=0;Be<Se.nodes.length;Be++){var Pt=Se.nodes[Be],Ut={},Gt,It;for(Ye=0;Ye<Pt.targetLinks.length;Ye++)It=Pt.targetLinks[Ye],Gt=It.source.pointNumber+":"+It.target.pointNumber,Ut.hasOwnProperty(Gt)||(Ut[Gt]=[]),Ut[Gt].push(It);var Ct=Object.keys(Ut);for(Ye=0;Ye<Ct.length;Ye++){Gt=Ct[Ye];var lt=Ut[Gt],dt=0,et={};for(Xe=0;Xe<lt.length;Xe++)It=lt[Xe],et[It.label]||(et[It.label]=0),et[It.label]+=It.value,dt+=It.value;for(Xe=0;Xe<lt.length;Xe++)It=lt[Xe],It.flow={value:dt,labelConcentration:et[It.label]/dt,concentration:It.value/dt,links:lt},It.concentrationscale&&(It.color=a(It.concentrationscale(It.flow.labelConcentration)))}var Pe=0;for(Ye=0;Ye<Pt.sourceLinks.length;Ye++)Pe+=Pt.sourceLinks[Ye].value;for(Ye=0;Ye<Pt.sourceLinks.length;Ye++)It=Pt.sourceLinks[Ye],It.concentrationOut=It.value/Pe;var Je=0;for(Ye=0;Ye<Pt.targetLinks.length;Ye++)Je+=Pt.targetLinks[Ye].value;for(Ye=0;Ye<Pt.targetLinks.length;Ye++)It=Pt.targetLinks[Ye],It.concenrationIn=It.value/Je}}Ge();function ze(Pt){Pt.forEach(function(Ut){var Gt,It,Ct=0,lt=Ut.length,dt;for(Ut.sort(function(et,Pe){return et.y0-Pe.y0}),dt=0;dt<lt;++dt)Gt=Ut[dt],Gt.y0>=Ct||(It=Ct-Gt.y0,It>1e-6&&(Gt.y0+=It,Gt.y1+=It)),Ct=Gt.y1+ie})}function We(Pt){var Ut=Pt.map(function(Pe,Je){return{x0:Pe.x0,index:Je}}).sort(function(Pe,Je){return Pe.x0-Je.x0}),Gt=[],It=-1,Ct,lt=-1/0,dt;for(Be=0;Be<Ut.length;Be++){var et=Pt[Ut[Be].index];et.x0>lt+oe&&(It+=1,Ct=et.x0),lt=et.x0,Gt[It]||(Gt[It]=[]),Gt[It].push(et),dt=Ct-et.x0,et.x0+=dt,et.x1+=dt}return Gt}if(K.node.x.length&&K.node.y.length){for(Be=0;Be<Math.min(K.node.x.length,K.node.y.length,Se.nodes.length);Be++)if(K.node.x[Be]&&K.node.y[Be]){var mt=[K.node.x[Be]*ue,K.node.y[Be]*xe];Se.nodes[Be].x0=mt[0]-oe/2,Se.nodes[Be].x1=mt[0]+oe/2;var Ft=Se.nodes[Be].y1-Se.nodes[Be].y0;Se.nodes[Be].y0=mt[1]-Ft/2,Se.nodes[Be].y1=mt[1]+Ft/2}if(K.arrangement==="snap"){he=Se.nodes;var Xt=We(he);ze(Xt)}Ce.update(Se)}return{circular:be,key:ne,trace:K,guid:f.randstr(),horizontal:ae,width:ue,height:xe,nodePad:K.node.pad,nodeLineColor:K.node.line.color,nodeLineWidth:K.node.line.width,linkLineColor:K.link.line.color,linkLineWidth:K.link.line.width,valueFormat:K.valueformat,valueSuffix:K.valuesuffix,textFont:K.textfont,translateX:$.x[0]*V.width+V.margin.l,translateY:V.height-$.y[1]*V.height+V.margin.t,dragParallel:ae?xe:ue,dragPerpendicular:ae?ue:xe,arrangement:K.arrangement,sankey:Ce,graph:Se,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(V,Y,ne){var te=a(Y.color),K=Y.source.label+"|"+Y.target.label,$=K+"__"+ne;return Y.trace=V.trace,Y.curveNumber=V.trace.index,{circular:V.circular,key:$,traceId:V.key,pointNumber:Y.pointNumber,link:Y,tinyColorHue:r.tinyRGB(te),tinyColorAlpha:te.getAlpha(),linkPath:L,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:Y.flow}}function h(V){var Y="",ne=V.width/2,te=V.circularPathData;return V.circularLinkType==="top"?Y="M "+te.targetX+" "+(te.targetY+ne)+" L"+te.rightInnerExtent+" "+(te.targetY+ne)+"A"+(te.rightLargeArcRadius+ne)+" "+(te.rightSmallArcRadius+ne)+" 0 0 1 "+(te.rightFullExtent-ne)+" "+(te.targetY-te.rightSmallArcRadius)+"L"+(te.rightFullExtent-ne)+" "+te.verticalRightInnerExtent+"A"+(te.rightLargeArcRadius+ne)+" "+(te.rightLargeArcRadius+ne)+" 0 0 1 "+te.rightInnerExtent+" "+(te.verticalFullExtent-ne)+"L"+te.leftInnerExtent+" "+(te.verticalFullExtent-ne)+"A"+(te.leftLargeArcRadius+ne)+" "+(te.leftLargeArcRadius+ne)+" 0 0 1 "+(te.leftFullExtent+ne)+" "+te.verticalLeftInnerExtent+"L"+(te.leftFullExtent+ne)+" "+(te.sourceY-te.leftSmallArcRadius)+"A"+(te.leftLargeArcRadius+ne)+" "+(te.leftSmallArcRadius+ne)+" 0 0 1 "+te.leftInnerExtent+" "+(te.sourceY+ne)+"L"+te.sourceX+" "+(te.sourceY+ne)+"L"+te.sourceX+" "+(te.sourceY-ne)+"L"+te.leftInnerExtent+" "+(te.sourceY-ne)+"A"+(te.leftLargeArcRadius-ne)+" "+(te.leftSmallArcRadius-ne)+" 0 0 0 "+(te.leftFullExtent-ne)+" "+(te.sourceY-te.leftSmallArcRadius)+"L"+(te.leftFullExtent-ne)+" "+te.verticalLeftInnerExtent+"A"+(te.leftLargeArcRadius-ne)+" "+(te.leftLargeArcRadius-ne)+" 0 0 0 "+te.leftInnerExtent+" "+(te.verticalFullExtent+ne)+"L"+te.rightInnerExtent+" "+(te.verticalFullExtent+ne)+"A"+(te.rightLargeArcRadius-ne)+" "+(te.rightLargeArcRadius-ne)+" 0 0 0 "+(te.rightFullExtent+ne)+" "+te.verticalRightInnerExtent+"L"+(te.rightFullExtent+ne)+" "+(te.targetY-te.rightSmallArcRadius)+"A"+(te.rightLargeArcRadius-ne)+" "+(te.rightSmallArcRadius-ne)+" 0 0 0 "+te.rightInnerExtent+" "+(te.targetY-ne)+"L"+te.targetX+" "+(te.targetY-ne)+"Z":Y="M "+te.targetX+" "+(te.targetY-ne)+" L"+te.rightInnerExtent+" "+(te.targetY-ne)+"A"+(te.rightLargeArcRadius+ne)+" "+(te.rightSmallArcRadius+ne)+" 0 0 0 "+(te.rightFullExtent-ne)+" "+(te.targetY+te.rightSmallArcRadius)+"L"+(te.rightFullExtent-ne)+" "+te.verticalRightInnerExtent+"A"+(te.rightLargeArcRadius+ne)+" "+(te.rightLargeArcRadius+ne)+" 0 0 0 "+te.rightInnerExtent+" "+(te.verticalFullExtent+ne)+"L"+te.leftInnerExtent+" "+(te.verticalFullExtent+ne)+"A"+(te.leftLargeArcRadius+ne)+" "+(te.leftLargeArcRadius+ne)+" 0 0 0 "+(te.leftFullExtent+ne)+" "+te.verticalLeftInnerExtent+"L"+(te.leftFullExtent+ne)+" "+(te.sourceY+te.leftSmallArcRadius)+"A"+(te.leftLargeArcRadius+ne)+" "+(te.leftSmallArcRadius+ne)+" 0 0 0 "+te.leftInnerExtent+" "+(te.sourceY-ne)+"L"+te.sourceX+" "+(te.sourceY-ne)+"L"+te.sourceX+" "+(te.sourceY+ne)+"L"+te.leftInnerExtent+" "+(te.sourceY+ne)+"A"+(te.leftLargeArcRadius-ne)+" "+(te.leftSmallArcRadius-ne)+" 0 0 1 "+(te.leftFullExtent-ne)+" "+(te.sourceY+te.leftSmallArcRadius)+"L"+(te.leftFullExtent-ne)+" "+te.verticalLeftInnerExtent+"A"+(te.leftLargeArcRadius-ne)+" "+(te.leftLargeArcRadius-ne)+" 0 0 1 "+te.leftInnerExtent+" "+(te.verticalFullExtent-ne)+"L"+te.rightInnerExtent+" "+(te.verticalFullExtent-ne)+"A"+(te.rightLargeArcRadius-ne)+" "+(te.rightLargeArcRadius-ne)+" 0 0 1 "+(te.rightFullExtent+ne)+" "+te.verticalRightInnerExtent+"L"+(te.rightFullExtent+ne)+" "+(te.targetY+te.rightSmallArcRadius)+"A"+(te.rightLargeArcRadius-ne)+" "+(te.rightSmallArcRadius-ne)+" 0 0 1 "+te.rightInnerExtent+" "+(te.targetY+ne)+"L"+te.targetX+" "+(te.targetY+ne)+"Z",Y}function L(){var V=.5;function Y(ne){if(ne.link.circular)return h(ne.link);var te=ne.link.source.x1,K=ne.link.target.x0,$=s(te,K),ae=$(V),ie=$(1-V),oe=ne.link.y0-ne.link.width/2,ue=ne.link.y0+ne.link.width/2,xe=ne.link.y1-ne.link.width/2,he=ne.link.y1+ne.link.width/2;return"M"+te+","+oe+"C"+ae+","+oe+" "+ie+","+xe+" "+K+","+xe+"L"+K+","+he+"C"+ie+","+he+" "+ae+","+ue+" "+te+","+ue+"Z"}return Y}function S(V,Y){var ne=a(Y.color),te=i.nodePadAcross,K=V.nodePad/2;Y.dx=Y.x1-Y.x0,Y.dy=Y.y1-Y.y0;var $=Y.dx,ae=Math.max(.5,Y.dy),ie="node_"+Y.pointNumber;return Y.group&&(ie=f.randstr()),Y.trace=V.trace,Y.curveNumber=V.trace.index,{index:Y.pointNumber,key:ie,partOfGroup:Y.partOfGroup||!1,group:Y.group,traceId:V.key,trace:V.trace,node:Y,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil($),visibleHeight:ae,zoneX:-te,zoneY:-K,zoneWidth:$+2*te,zoneHeight:ae+2*K,labelY:V.horizontal?Y.dy/2+1:Y.dx/2+1,left:Y.originalLayer===1,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:ne.getBrightness()<=128,tinyColorHue:r.tinyRGB(ne),tinyColorAlpha:ne.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,ie].join("_"),interactionState:V.interactionState,figure:V}}function k(V){V.attr("transform",function(Y){return l(Y.node.x0.toFixed(3),Y.node.y0.toFixed(3))})}function P(V){V.call(k)}function O(V,Y){V.call(P),Y.attr("d",L())}function F(V){V.attr("width",function(Y){return Y.node.x1-Y.node.x0}).attr("height",function(Y){return Y.visibleHeight})}function D(V){return V.link.width>1||V.linkLineWidth>0}function R(V){var Y=l(V.translateX,V.translateY);return Y+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(V,Y,ne){V.on(".basic",null).on("mouseover.basic",function(te){!te.interactionState.dragInProgress&&!te.partOfGroup&&(ne.hover(this,te,Y),te.interactionState.hovered=[this,te])}).on("mousemove.basic",function(te){!te.interactionState.dragInProgress&&!te.partOfGroup&&(ne.follow(this,te),te.interactionState.hovered=[this,te])}).on("mouseout.basic",function(te){!te.interactionState.dragInProgress&&!te.partOfGroup&&(ne.unhover(this,te,Y),te.interactionState.hovered=!1)}).on("click.basic",function(te){te.interactionState.hovered&&(ne.unhover(this,te,Y),te.interactionState.hovered=!1),!te.interactionState.dragInProgress&&!te.partOfGroup&&ne.select(this,te,Y)})}function N(V,Y,ne,te){var K=m.behavior.drag().origin(function($){return{x:$.node.x0+$.visibleWidth/2,y:$.node.y0+$.visibleHeight/2}}).on("dragstart",function($){if($.arrangement!=="fixed"&&(f.ensureSingle(te._fullLayout._infolayer,"g","dragcover",function(ie){te._fullLayout._dragCover=ie}),f.raiseToTop(this),$.interactionState.dragInProgress=$.node,J($.node),$.interactionState.hovered&&(ne.nodeEvents.unhover.apply(0,$.interactionState.hovered),$.interactionState.hovered=!1),$.arrangement==="snap")){var ae=$.traceId+"|"+$.key;$.forceLayouts[ae]?$.forceLayouts[ae].alpha(1):X(V,ae,$),j(V,Y,$,ae,te)}}).on("drag",function($){if($.arrangement!=="fixed"){var ae=m.event.x,ie=m.event.y;$.arrangement==="snap"?($.node.x0=ae-$.visibleWidth/2,$.node.x1=ae+$.visibleWidth/2,$.node.y0=ie-$.visibleHeight/2,$.node.y1=ie+$.visibleHeight/2):($.arrangement==="freeform"&&($.node.x0=ae-$.visibleWidth/2,$.node.x1=ae+$.visibleWidth/2),ie=Math.max(0,Math.min($.size-$.visibleHeight/2,ie)),$.node.y0=ie-$.visibleHeight/2,$.node.y1=ie+$.visibleHeight/2),J($.node),$.arrangement!=="snap"&&($.sankey.update($.graph),O(V.filter(le($)),Y))}}).on("dragend",function($){if($.arrangement!=="fixed"){$.interactionState.dragInProgress=!1;for(var ae=0;ae<$.node.childrenNodes.length;ae++)$.node.childrenNodes[ae].x=$.node.x,$.node.childrenNodes[ae].y=$.node.y;$.arrangement!=="snap"&&q($,te)}});V.on(".drag",null).call(K)}function X(V,Y,ne,te){fe(ne.graph.nodes);var K=ne.graph.nodes.filter(function($){return $.originalX===ne.node.originalX}).filter(function($){return!$.partOfGroup});ne.forceLayouts[Y]=u.forceSimulation(K).alphaDecay(0).force("collide",u.forceCollide().radius(function($){return $.dy/2+ne.nodePad/2}).strength(1).iterations(i.forceIterations)).force("constrain",ee(V,Y,K,ne)).stop()}function j(V,Y,ne,te,K){window.requestAnimationFrame(function $(){var ae;for(ae=0;ae<i.forceTicksPerFrame;ae++)ne.forceLayouts[te].tick();var ie=ne.graph.nodes;if(se(ie),ne.sankey.update(ne.graph),O(V.filter(le(ne)),Y),ne.forceLayouts[te].alpha()>0)window.requestAnimationFrame($);else{var oe=ne.node.originalX;ne.node.x0=oe-ne.visibleWidth/2,ne.node.x1=oe+ne.visibleWidth/2,q(ne,K)}})}function ee(V,Y,ne,te){return function(){for(var $=0,ae=0;ae<ne.length;ae++){var ie=ne[ae];ie===te.interactionState.dragInProgress?(ie.x=ie.lastDraggedX,ie.y=ie.lastDraggedY):(ie.vx=(ie.originalX-ie.x)/i.forceTicksPerFrame,ie.y=Math.min(te.size-ie.dy/2,Math.max(ie.dy/2,ie.y))),$=Math.max($,Math.abs(ie.vx),Math.abs(ie.vy))}!te.interactionState.dragInProgress&&$<.1&&te.forceLayouts[Y].alpha()>0&&te.forceLayouts[Y].alpha(0)}}function q(V,Y){for(var ne=[],te=[],K=0;K<V.graph.nodes.length;K++){var $=(V.graph.nodes[K].x0+V.graph.nodes[K].x1)/2,ae=(V.graph.nodes[K].y0+V.graph.nodes[K].y1)/2;ne.push($/V.figure.width),te.push(ae/V.figure.height)}g.call("_guiRestyle",Y,{"node.x":[ne],"node.y":[te]},V.trace.index).then(function(){Y._fullLayout._dragCover&&Y._fullLayout._dragCover.remove()})}function G(V){var Y=[],ne;for(ne=0;ne<V.length;ne++)V[ne].originalX=(V[ne].x0+V[ne].x1)/2,V[ne].originalY=(V[ne].y0+V[ne].y1)/2,Y.indexOf(V[ne].originalX)===-1&&Y.push(V[ne].originalX);for(Y.sort(function(te,K){return te-K}),ne=0;ne<V.length;ne++)V[ne].originalLayerIndex=Y.indexOf(V[ne].originalX),V[ne].originalLayer=V[ne].originalLayerIndex/(Y.length-1)}function J(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function le(V){return function(Y){return Y.node.originalX===V.node.originalX}}function fe(V){for(var Y=0;Y<V.length;Y++)V[Y].y=(V[Y].y0+V[Y].y1)/2,V[Y].x=(V[Y].x0+V[Y].x1)/2}function se(V){for(var Y=0;Y<V.length;Y++)V[Y].y0=V[Y].y-V[Y].dy/2,V[Y].y1=V[Y].y0+V[Y].dy,V[Y].x0=V[Y].x-V[Y].dx/2,V[Y].x1=V[Y].x0+V[Y].dx}I.exports=function(V,Y,ne,te,K){var $=!1;f.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){$=!0});var ae=V._fullLayout._dragCover,ie=ne.filter(function(Se){return p(Se).trace.visible}).map(T.bind(null,te)),oe=Y.selectAll("."+i.cn.sankey).data(ie,v);oe.exit().remove(),oe.enter().append("g").classed(i.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",R),oe.each(function(Se,Be){V._fullData[Be]._sankey=Se;var Ye="bgsankey-"+Se.trace.uid+"-"+Be;f.ensureSingle(V._fullLayout._draggers,"rect",Ye),V._fullData[Be]._bgRect=m.select("."+Ye),V._fullData[Be]._bgRect.style("pointer-events","all").attr("width",Se.width).attr("height",Se.height).attr("x",Se.translateX).attr("y",Se.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),oe.transition().ease(i.ease).duration(i.duration).attr("transform",R);var ue=oe.selectAll("."+i.cn.sankeyLinks).data(d,v);ue.enter().append("g").classed(i.cn.sankeyLinks,!0).style("fill","none");var xe=ue.selectAll("."+i.cn.sankeyLink).data(function(Se){var Be=Se.graph.links;return Be.filter(function(Ye){return Ye.value}).map(_.bind(null,Se))},v);xe.enter().append("path").classed(i.cn.sankeyLink,!0).call(U,oe,K.linkEvents),xe.style("stroke",function(Se){return D(Se)?r.tinyRGB(a(Se.linkLineColor)):Se.tinyColorHue}).style("stroke-opacity",function(Se){return D(Se)?r.opacity(Se.linkLineColor):Se.tinyColorAlpha}).style("fill",function(Se){return Se.tinyColorHue}).style("fill-opacity",function(Se){return Se.tinyColorAlpha}).style("stroke-width",function(Se){return D(Se)?Se.linkLineWidth:1}).attr("d",L()),xe.style("opacity",function(){return V._context.staticPlot||$||ae?1:0}).transition().ease(i.ease).duration(i.duration).style("opacity",1),xe.exit().transition().ease(i.ease).duration(i.duration).style("opacity",0).remove();var he=oe.selectAll("."+i.cn.sankeyNodeSet).data(d,v);he.enter().append("g").classed(i.cn.sankeyNodeSet,!0),he.style("cursor",function(Se){switch(Se.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var me=he.selectAll("."+i.cn.sankeyNode).data(function(Se){var Be=Se.graph.nodes;return G(Be),Be.map(S.bind(null,Se))},v);me.enter().append("g").classed(i.cn.sankeyNode,!0).call(k).style("opacity",function(Se){return(V._context.staticPlot||$)&&!Se.partOfGroup?1:0}),me.call(U,oe,K.nodeEvents).call(N,xe,K,V),me.transition().ease(i.ease).duration(i.duration).call(k).style("opacity",function(Se){return Se.partOfGroup?0:1}),me.exit().transition().ease(i.ease).duration(i.duration).style("opacity",0).remove();var be=me.selectAll("."+i.cn.nodeRect).data(d);be.enter().append("rect").classed(i.cn.nodeRect,!0).call(F),be.style("stroke-width",function(Se){return Se.nodeLineWidth}).style("stroke",function(Se){return r.tinyRGB(a(Se.nodeLineColor))}).style("stroke-opacity",function(Se){return r.opacity(Se.nodeLineColor)}).style("fill",function(Se){return Se.tinyColorHue}).style("fill-opacity",function(Se){return Se.tinyColorAlpha}),be.transition().ease(i.ease).duration(i.duration).call(F);var Ce=me.selectAll("."+i.cn.nodeLabel).data(d);Ce.enter().append("text").classed(i.cn.nodeLabel,!0).style("cursor","default"),Ce.attr("data-notex",1).text(function(Se){return Se.node.label}).each(function(Se){var Be=m.select(this);n.font(Be,Se.textFont),y.convertToTspans(Be,V)}).style("text-shadow",y.makeTextShadow(V._fullLayout.paper_bgcolor)).attr("text-anchor",function(Se){return Se.horizontal&&Se.left?"end":"start"}).attr("transform",function(Se){var Be=m.select(this),Ye=y.lineCount(Be),Xe=Se.textFont.size*((Ye-1)*M-b),Te=Se.nodeLineWidth/2+w,Ie=((Se.horizontal?Se.visibleHeight:Se.visibleWidth)-Xe)/2;Se.horizontal&&(Se.left?Te=-Te:Te+=Se.visibleWidth);var Ze=Se.horizontal?"":"scale(-1,1)"+o(90);return l(Se.horizontal?Te:Ie,Se.horizontal?Ie:Te)+Ze}),Ce.transition().ease(i.ease).duration(i.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":919,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],924:[function(e,I,B){I.exports=function(s,m){for(var x=s.cd,t=[],i=x[0].trace,a=i._sankey.graph.nodes,r=0;r<a.length;r++){var n=a[r];if(!n.partOfGroup){var f=[(n.x0+n.x1)/2,(n.y0+n.y1)/2];i.orientation==="v"&&f.reverse(),m&&m.contains(f,!1,r,s)&&t.push({pointNumber:n.pointNumber})}}return t}},{}],925:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x){for(var t=0;t<m.length;t++)m[t].i=t;u.mergeArray(x.text,m,"tx"),u.mergeArray(x.texttemplate,m,"txt"),u.mergeArray(x.hovertext,m,"htx"),u.mergeArray(x.customdata,m,"data"),u.mergeArray(x.textposition,m,"tp"),x.textfont&&(u.mergeArrayCastPositive(x.textfont.size,m,"ts"),u.mergeArray(x.textfont.color,m,"tc"),u.mergeArray(x.textfont.family,m,"tf"));var i=x.marker;if(i){u.mergeArrayCastPositive(i.size,m,"ms"),u.mergeArrayCastPositive(i.opacity,m,"mo"),u.mergeArray(i.symbol,m,"mx"),u.mergeArray(i.color,m,"mc");var a=i.line;i.line&&(u.mergeArray(a.color,m,"mlc"),u.mergeArrayCastPositive(a.width,m,"mlw"));var r=i.gradient;r&&r.type!=="none"&&(u.mergeArray(r.type,m,"mgt"),u.mergeArray(r.color,m,"mgc"))}}},{"../../lib":503}],926:[function(e,I,B){var u=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../components/colorscale/attributes"),t=e("../../plots/font_attributes"),i=e("../../components/drawing/attributes").dash,a=e("../../components/drawing"),r=e("./constants"),n=e("../../lib/extend").extendFlat;function f(c){return{valType:"any",dflt:0,editType:"calc"}}function l(c){return{valType:"any",editType:"calc"}}function o(c){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}I.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:f(),yperiod:f(),xperiod0:l(),yperiod0:l(),xperiodalignment:o(),yperiodalignment:o(),xhoverformat:u("x"),yhoverformat:u("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:s({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:m({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},i,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:n({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},x("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},x("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:t({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":930}],927:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM,i=e("./subtypes"),a=e("./colorscale_calc"),r=e("./arrays_to_calcdata"),n=e("./calc_selection");function f(p,y){var g=p._fullLayout,A=m.getFromId(p,y.xaxis||"x"),b=m.getFromId(p,y.yaxis||"y"),M=A.makeCalcdata(y,"x"),w=b.makeCalcdata(y,"y"),T=x(y,A,"x",M),_=x(y,b,"y",w),h=T.vals,L=_.vals,S=y._length,k=new Array(S),P=y.ids,O=d(y,g,A,b),F=!1,D,R,U,N,X,j;c(g,y);var ee="x",q="y",G;if(O)s.pushUnique(O.traceIndices,y._expandedIndex),D=O.orientation==="v",D?(q="s",G="x"):(ee="s",G="y"),X=O.stackgaps==="interpolate";else{var J=o(y,S);l(p,y,A,b,h,L,J)}var le=!!y.xperiodalignment,fe=!!y.yperiodalignment;for(R=0;R<S;R++){var se=k[R]={},V=u(h[R]),Y=u(L[R]);V&&Y?(se[ee]=h[R],se[q]=L[R],le&&(se.orig_x=M[R],se.xEnd=T.ends[R],se.xStart=T.starts[R]),fe&&(se.orig_y=w[R],se.yEnd=_.ends[R],se.yStart=_.starts[R])):O&&(D?V:Y)?(se[G]=D?h[R]:L[R],se.gap=!0,X?(se.s=t,F=!0):se.s=0):se[ee]=se[q]=t,P&&(se.id=String(P[R]))}if(r(k,y),a(p,y),n(k,y),O){for(R=0;R<k.length;)k[R][G]===t?k.splice(R,1):R++;if(s.sort(k,function($,ae){return $[G]-ae[G]||$.i-ae.i}),F){for(R=0;R<k.length-1&&k[R].gap;)R++;for(j=k[R].s,j||(j=k[R].s=0),U=0;U<R;U++)k[U].s=j;for(N=k.length-1;N>R&&k[N].gap;)N--;for(j=k[N].s,U=k.length-1;U>N;U--)k[U].s=j;for(;R<N;)if(R++,k[R].gap){for(U=R+1;k[U].gap;)U++;for(var ne=k[R-1][G],te=k[R-1].s,K=(k[U].s-te)/(k[U][G]-ne);R<U;)k[R].s=te+(k[R][G]-ne)*K,R++}}}return k}function l(p,y,g,A,b,M,w){var T=y._length,_=p._fullLayout,h=g._id,L=A._id,S=_._firstScatter[v(y)]===y.uid,k=(d(y,_,g,A)||{}).orientation,P=y.fill;g._minDtick=0,A._minDtick=0;var O={padded:!0},F={padded:!0};w&&(O.ppad=F.ppad=w);var D=T<2||b[0]!==b[T-1]||M[0]!==M[T-1];D&&(P==="tozerox"||P==="tonextx"&&(S||k==="h"))?O.tozero=!0:!(y.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!i.hasMarkers(y)&&!i.hasText(y))&&(O.padded=!1,O.ppad=0),D&&(P==="tozeroy"||P==="tonexty"&&(S||k==="v"))?F.tozero=!0:(P==="tonextx"||P==="tozerox")&&(F.padded=!1),h&&(y._extremes[h]=m.findExtremes(g,b,O)),L&&(y._extremes[L]=m.findExtremes(A,M,F))}function o(p,y){if(!!i.hasMarkers(p)){var g=p.marker,A=1.6*(p.marker.sizeref||1),b;if(p.marker.sizemode==="area"?b=function(h){return Math.max(Math.sqrt((h||0)/A),3)}:b=function(h){return Math.max((h||0)/A,3)},s.isArrayOrTypedArray(g.size)){var M={type:"linear"};m.setConvert(M);for(var w=M.makeCalcdata(p.marker,"size"),T=new Array(y),_=0;_<y;_++)T[_]=b(w[_]);return T}else return b(g.size)}}function c(p,y){var g=v(y),A=p._firstScatter;A[g]||(A[g]=y.uid)}function v(p){var y=p.stackgroup;return p.xaxis+p.yaxis+p.type+(y?"-"+y:"")}function d(p,y,g,A){var b=p.stackgroup;if(!!b){var M=y._scatterStackOpts[g._id+A._id][b],w=M.orientation==="v"?A:g;if(w.type==="linear"||w.type==="log")return M}}I.exports={calc:f,calcMarkerSize:o,calcAxisExpansion:l,setFirstScatter:c,getStackOpts:d}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":925,"./calc_selection":928,"./colorscale_calc":929,"./subtypes":951,"fast-isnumeric":190}],928:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x){u.isArrayOrTypedArray(x.selectedpoints)&&u.tagSelected(m,x)}},{"../../lib":503}],929:[function(e,I,B){var u=e("../../components/colorscale/helpers").hasColorscale,s=e("../../components/colorscale/calc"),m=e("./subtypes");I.exports=function(t,i){m.hasLines(i)&&u(i,"line")&&s(t,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),m.hasMarkers(i)&&(u(i,"marker")&&s(t,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),u(i,"marker.line")&&s(t,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":951}],930:[function(e,I,B){I.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],931:[function(e,I,B){var u=e("./calc");I.exports=function(t,i){var a=i.xaxis,r=i.yaxis,n=a._id+r._id,f=t._fullLayout._scatterStackOpts[n];if(!!f){var l=t.calcdata,o,c,v,d,p,y,g,A,b,M,w,T,_,h,L;for(var S in f){M=f[S];var k=M.traceIndices;if(!!k.length){for(w=M.stackgaps==="interpolate",T=M.groupnorm,M.orientation==="v"?(_="x",h="y"):(_="y",h="x"),L=new Array(k.length),o=0;o<L.length;o++)L[o]=!1;y=l[k[0]];var P=new Array(y.length);for(o=0;o<y.length;o++)P[o]=y[o][_];for(o=1;o<k.length;o++){for(p=l[k[o]],c=v=0;c<p.length;c++){for(g=p[c][_];g>P[v]&&v<P.length;v++)s(p,c,P[v],o,L,w,_),c++;if(g!==P[v]){for(d=0;d<o;d++)s(l[k[d]],v,g,d,L,w,_);P.splice(v,0,g)}v++}for(;v<P.length;v++)s(p,c,P[v],o,L,w,_),c++}var O=P.length;for(c=0;c<y.length;c++){for(A=y[c][h]=y[c].s,o=1;o<k.length;o++)p=l[k[o]],p[0].trace._rawLength=p[0].trace._length,p[0].trace._length=O,A+=p[c].s,p[c][h]=A;if(T)for(b=(T==="fraction"?A:A/100)||1,o=0;o<k.length;o++){var F=l[k[o]][c];F[h]/=b,F.sNorm=F.s/b}}for(o=0;o<k.length;o++){p=l[k[o]];var D=p[0].trace,R=u.calcMarkerSize(D,D._rawLength),U=Array.isArray(R);if(R&&L[o]||U){var N=R;for(R=new Array(O),c=0;c<O;c++)R[c]=p[c].gap?0:U?N[p[c].i]:N}var X=new Array(O),j=new Array(O);for(c=0;c<O;c++)X[c]=p[c].x,j[c]=p[c].y;u.calcAxisExpansion(t,D,a,r,X,j,R),p[0].t.orientation=M.orientation}}}}};function s(x,t,i,a,r,n,f){r[a]=!0;var l={i:null,gap:!0,s:0};if(l[f]=i,x.splice(t,0,l),t&&i===x[t-1][f]){var o=x[t-1];l.s=o.s,l.i=o.i,l.gap=o.gap}else n&&(l.s=m(x,t,i,f));t||(x[0].t=x[1].t,x[0].trace=x[1].trace,delete x[1].t,delete x[1].trace)}function m(x,t,i,a){var r=x[t-1],n=x[t+1];return n?r?r.s+(n.s-r.s)*(i-r[a])/(n[a]-r[a]):n.s:r.s}},{"./calc":927}],932:[function(e,I,B){I.exports=function(s){for(var m=0;m<s.length;m++){var x=s[m];if(x.type==="scatter"){var t=x.fill;if(!(t==="none"||t==="toself")&&(x.opacity=void 0,t==="tonexty"||t==="tonextx"))for(var i=m-1;i>=0;i--){var a=s[i];if(a.type==="scatter"&&a.xaxis===x.xaxis&&a.yaxis===x.yaxis){a.opacity=void 0;break}}}}}},{}],933:[function(e,I,B){var u=e("../../lib"),s=e("../../registry"),m=e("./attributes"),x=e("./constants"),t=e("./subtypes"),i=e("./xy_defaults"),a=e("./period_defaults"),r=e("./stack_defaults"),n=e("./marker_defaults"),f=e("./line_defaults"),l=e("./line_shape_defaults"),o=e("./text_defaults"),c=e("./fillcolor_defaults");I.exports=function(d,p,y,g){function A(S,k){return u.coerce(d,p,m,S,k)}var b=i(d,p,g,A);if(b||(p.visible=!1),!!p.visible){a(d,p,g,A),A("xhoverformat"),A("yhoverformat");var M=r(d,p,g,A),w=!M&&b<x.PTS_LINESONLY?"lines+markers":"lines";A("text"),A("hovertext"),A("mode",w),t.hasLines(p)&&(f(d,p,y,g,A),l(d,p,A),A("connectgaps"),A("line.simplify")),t.hasMarkers(p)&&n(d,p,y,g,A,{gradient:!0}),t.hasText(p)&&(A("texttemplate"),o(d,p,g,A));var T=[];(t.hasMarkers(p)||t.hasText(p))&&(A("cliponaxis"),A("marker.maxdisplayed"),T.push("points")),A("fill",M?M.fillDflt:"none"),p.fill!=="none"&&(c(d,p,y,A),t.hasLines(p)||l(d,p,A));var _=(p.line||{}).color,h=(p.marker||{}).color;(p.fill==="tonext"||p.fill==="toself")&&T.push("fills"),A("hoveron",T.join("+")||"points"),p.hoveron!=="fills"&&A("hovertemplate");var L=s.getComponentMethod("errorbars","supplyDefaults");L(d,p,_||h||y,{axis:"y"}),L(d,p,_||h||y,{axis:"x",inherit:"y"}),u.coerceSelectionMarkerOpacity(p,A)}}},{"../../lib":503,"../../registry":638,"./attributes":926,"./constants":930,"./fillcolor_defaults":934,"./line_defaults":939,"./line_shape_defaults":941,"./marker_defaults":945,"./period_defaults":946,"./stack_defaults":949,"./subtypes":951,"./text_defaults":952,"./xy_defaults":953}],934:[function(e,I,B){var u=e("../../components/color"),s=e("../../lib").isArrayOrTypedArray;I.exports=function(x,t,i,a){var r=!1;if(t.marker){var n=t.marker.color,f=(t.marker.line||{}).color;n&&!s(n)?r=n:f&&!s(f)&&(r=f)}a("fillcolor",u.addOpacity((t.line||{}).color||r||i,.5))}},{"../../components/color":366,"../../lib":503}],935:[function(e,I,B){var u=e("../../plots/cartesian/axes");I.exports=function(m,x,t){var i={},a={_fullLayout:t},r=u.getFromTrace(a,x,"x"),n=u.getFromTrace(a,x,"y");return i.xLabel=u.tickText(r,r.c2l(m.x),!0).text,i.yLabel=u.tickText(n,n.c2l(m.y),!0).text,i}},{"../../plots/cartesian/axes":554}],936:[function(e,I,B){var u=e("../../components/color"),s=e("./subtypes");I.exports=function(x,t){var i,a;if(x.mode==="lines")return i=x.line.color,i&&u.opacity(i)?i:x.fillcolor;if(x.mode==="none")return x.fill?x.fillcolor:"";var r=t.mcc||(x.marker||{}).color,n=t.mlcc||((x.marker||{}).line||{}).color;return a=r&&u.opacity(r)?r:n&&u.opacity(n)&&(t.mlw||((x.marker||{}).line||{}).width)?n:"",a?u.opacity(a)<.3?u.addOpacity(a,.3):a:(i=(x.line||{}).color,i&&u.opacity(i)&&s.hasLines(x)&&x.line.width?i:x.fillcolor)}},{"../../components/color":366,"./subtypes":951}],937:[function(e,I,B){var u=e("../../lib"),s=e("../../components/fx"),m=e("../../registry"),x=e("./get_trace_color"),t=e("../../components/color"),i=u.fillText;I.exports=function(r,n,f,l){var o=r.cd,c=o[0].trace,v=r.xa,d=r.ya,p=v.c2p(n),y=d.c2p(f),g=[p,y],A=c.hoveron||"",b=c.mode.indexOf("markers")!==-1?3:.5,M=!!c.xperiodalignment,w=!!c.yperiodalignment;if(A.indexOf("points")!==-1){var T=function(oe){if(M){var ue=v.c2p(oe.xStart),xe=v.c2p(oe.xEnd);return p>=Math.min(ue,xe)&&p<=Math.max(ue,xe)?0:1/0}var he=Math.max(3,oe.mrc||0),me=1-1/he,be=Math.abs(v.c2p(oe.x)-p);return be<he?me*be/he:be-he+me},_=function(oe){if(w){var ue=d.c2p(oe.yStart),xe=d.c2p(oe.yEnd);return y>=Math.min(ue,xe)&&y<=Math.max(ue,xe)?0:1/0}var he=Math.max(3,oe.mrc||0),me=1-1/he,be=Math.abs(d.c2p(oe.y)-y);return be<he?me*be/he:be-he+me},h=function(oe){var ue=Math.max(b,oe.mrc||0),xe=v.c2p(oe.x)-p,he=d.c2p(oe.y)-y;return Math.max(Math.sqrt(xe*xe+he*he)-ue,1-b/ue)},L=s.getDistanceFunction(l,T,_,h);if(s.getClosest(o,L,r),r.index!==!1){var S=o[r.index],k=v.c2p(S.x,!0),P=d.c2p(S.y,!0),O=S.mrc||1;r.index=S.i;var F=o[0].t.orientation,D=F&&(S.sNorm||S.s),R=F==="h"?D:S.orig_x!==void 0?S.orig_x:S.x,U=F==="v"?D:S.orig_y!==void 0?S.orig_y:S.y;return u.extendFlat(r,{color:x(c,S),x0:k-O,x1:k+O,xLabelVal:R,y0:P-O,y1:P+O,yLabelVal:U,spikeDistance:h(S),hovertemplate:c.hovertemplate}),i(S,c,r),m.getComponentMethod("errorbars","hoverInfo")(S,c,r),[r]}}if(A.indexOf("fills")!==-1&&c._polygons){var N=c._polygons,X=[],j=!1,ee=1/0,q=-1/0,G=1/0,J=-1/0,le,fe,se,V,Y,ne,te,K,$;for(le=0;le<N.length;le++)se=N[le],se.contains(g)&&(j=!j,X.push(se),G=Math.min(G,se.ymin),J=Math.max(J,se.ymax));if(j){G=Math.max(G,0),J=Math.min(J,d._length);var ae=(G+J)/2;for(le=0;le<X.length;le++)for(V=X[le].pts,fe=1;fe<V.length;fe++)K=V[fe-1][1],$=V[fe][1],K>ae!=$>=ae&&(ne=V[fe-1][0],te=V[fe][0],$-K&&(Y=ne+(te-ne)*(ae-K)/($-K),ee=Math.min(ee,Y),q=Math.max(q,Y)));ee=Math.max(ee,0),q=Math.min(q,v._length);var ie=t.defaultLine;return t.opacity(c.fillcolor)?ie=c.fillcolor:t.opacity((c.line||{}).color)&&(ie=c.line.color),u.extendFlat(r,{distance:r.maxHoverDistance,x0:ee,x1:q,y0:ae,y1:ae,color:ie,hovertemplate:!1}),delete r.index,c.text&&!Array.isArray(c.text)?r.text=String(c.text):r.text=c.name,[r]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":936}],938:[function(e,I,B){var u=e("./subtypes");I.exports={hasLines:u.hasLines,hasMarkers:u.hasMarkers,hasText:u.hasText,isBubble:u.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":925,"./attributes":926,"./calc":927,"./cross_trace_calc":931,"./cross_trace_defaults":932,"./defaults":933,"./format_labels":935,"./hover":937,"./marker_colorbar":944,"./plot":947,"./select":948,"./style":950,"./subtypes":951}],939:[function(e,I,B){var u=e("../../lib").isArrayOrTypedArray,s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults");I.exports=function(t,i,a,r,n,f){var l=(t.marker||{}).color;if(n("line.color",a),s(t,"line"))m(t,i,r,n,{prefix:"line.",cLetter:"c"});else{var o=(u(l)?!1:l)||a;n("line.color",o)}n("line.width"),(f||{}).noDash||n("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],940:[function(e,I,B){var u=e("../../constants/numerical"),s=u.BADNUM,m=u.LOG_CLIP,x=m+.5,t=m-.5,i=e("../../lib"),a=i.segmentsIntersect,r=i.constrain,n=e("./constants");I.exports=function(l,o){var c=o.xaxis,v=o.yaxis,d=c.type==="log",p=v.type==="log",y=c._length,g=v._length,A=o.connectGaps,b=o.baseTolerance,M=o.shape,w=M==="linear",T=o.fill&&o.fill!=="none",_=[],h=n.minTolerance,L=l.length,S=new Array(L),k=0,P,O,F,D,R,U,N,X,j,ee,q,G,J,le,fe,se;function V(Pt){var Ut=l[Pt];if(!Ut)return!1;var Gt=o.linearized?c.l2p(Ut.x):c.c2p(Ut.x),It=o.linearized?v.l2p(Ut.y):v.c2p(Ut.y);if(Gt===s){if(d&&(Gt=c.c2p(Ut.x,!0)),Gt===s)return!1;p&&It===s&&(Gt*=Math.abs(c._m*g*(c._m>0?x:t)/(v._m*y*(v._m>0?x:t)))),Gt*=1e3}if(It===s){if(p&&(It=v.c2p(Ut.y,!0)),It===s)return!1;It*=1e3}return[Gt,It]}function Y(Pt,Ut,Gt,It){var Ct=Gt-Pt,lt=It-Ut,dt=.5-Pt,et=.5-Ut,Pe=Ct*Ct+lt*lt,Je=Ct*dt+lt*et;if(Je>0&&Je<Pe){var it=dt*lt-et*Ct;if(it*it<Pe)return!0}}var ne,te;function K(Pt,Ut){var Gt=Pt[0]/y,It=Pt[1]/g,Ct=Math.max(0,-Gt,Gt-1,-It,It-1);return Ct&&ne!==void 0&&Y(Gt,It,ne,te)&&(Ct=0),Ct&&Ut&&Y(Gt,It,Ut[0]/y,Ut[1]/g)&&(Ct=0),(1+n.toleranceGrowth*Ct)*b}function $(Pt,Ut){var Gt=Pt[0]-Ut[0],It=Pt[1]-Ut[1];return Math.sqrt(Gt*Gt+It*It)}var ae=n.maxScreensAway,ie=-y*ae,oe=y*(1+ae),ue=-g*ae,xe=g*(1+ae),he=[[ie,ue,oe,ue],[oe,ue,oe,xe],[oe,xe,ie,xe],[ie,xe,ie,ue]],me,be,Ce,Se,Be,Ye;function Xe(Pt,Ut){for(var Gt=[],It=0,Ct=0;Ct<4;Ct++){var lt=he[Ct],dt=a(Pt[0],Pt[1],Ut[0],Ut[1],lt[0],lt[1],lt[2],lt[3]);dt&&(!It||Math.abs(dt.x-Gt[0][0])>1||Math.abs(dt.y-Gt[0][1])>1)&&(dt=[dt.x,dt.y],It&&$(dt,Pt)<$(Gt[0],Pt)?Gt.unshift(dt):Gt.push(dt),It++)}return Gt}function Te(Pt){if(Pt[0]<ie||Pt[0]>oe||Pt[1]<ue||Pt[1]>xe)return[r(Pt[0],ie,oe),r(Pt[1],ue,xe)]}function Ie(Pt,Ut){if(Pt[0]===Ut[0]&&(Pt[0]===ie||Pt[0]===oe)||Pt[1]===Ut[1]&&(Pt[1]===ue||Pt[1]===xe))return!0}function Ze(Pt,Ut){var Gt=[],It=Te(Pt),Ct=Te(Ut);return It&&Ct&&Ie(It,Ct)||(It&&Gt.push(It),Ct&&Gt.push(Ct)),Gt}function rt(Pt,Ut,Gt){return function(It,Ct){var lt=Te(It),dt=Te(Ct),et=[];if(lt&&dt&&Ie(lt,dt))return et;lt&&et.push(lt),dt&&et.push(dt);var Pe=2*i.constrain((It[Pt]+Ct[Pt])/2,Ut,Gt)-((lt||It)[Pt]+(dt||Ct)[Pt]);if(Pe){var Je;lt&&dt?Je=Pe>0==lt[Pt]>dt[Pt]?lt:dt:Je=lt||dt,Je[Pt]+=Pe}return et}}var Ge;M==="linear"||M==="spline"?Ge=Xe:M==="hv"||M==="vh"?Ge=Ze:M==="hvh"?Ge=rt(0,ie,oe):M==="vhv"&&(Ge=rt(1,ue,xe));function ze(Pt,Ut){var Gt=Ut[0]-Pt[0],It=(Ut[1]-Pt[1])/Gt,Ct=(Pt[1]*Ut[0]-Ut[1]*Pt[0])/Gt;return Ct>0?[It>0?ie:oe,xe]:[It>0?oe:ie,ue]}function We(Pt){var Ut=Pt[0],Gt=Pt[1],It=Ut===S[k-1][0],Ct=Gt===S[k-1][1];if(!(It&&Ct))if(k>1){var lt=Ut===S[k-2][0],dt=Gt===S[k-2][1];It&&(Ut===ie||Ut===oe)&&lt?dt?k--:S[k-1]=Pt:Ct&&(Gt===ue||Gt===xe)&&dt?lt?k--:S[k-1]=Pt:S[k++]=Pt}else S[k++]=Pt}function mt(Pt){S[k-1][0]!==Pt[0]&&S[k-1][1]!==Pt[1]&&We([Ce,Se]),We(Pt),Be=null,Ce=Se=0}function Ft(Pt){if(ne=Pt[0]/y,te=Pt[1]/g,me=Pt[0]<ie?ie:Pt[0]>oe?oe:0,be=Pt[1]<ue?ue:Pt[1]>xe?xe:0,me||be){if(!k)S[k++]=[me||Pt[0],be||Pt[1]];else if(Be){var Ut=Ge(Be,Pt);Ut.length>1&&(mt(Ut[0]),S[k++]=Ut[1])}else Ye=Ge(S[k-1],Pt)[0],S[k++]=Ye;var Gt=S[k-1];me&&be&&(Gt[0]!==me||Gt[1]!==be)?(Be&&(Ce!==me&&Se!==be?We(Ce&&Se?ze(Be,Pt):[Ce||me,Se||be]):Ce&&Se&&We([Ce,Se])),We([me,be])):Ce-me&&Se-be&&We([me||Ce,be||Se]),Be=Pt,Ce=me,Se=be}else Be&&mt(Ge(Be,Pt)[0]),S[k++]=Pt}for(P=0;P<L;P++)if(O=V(P),!!O){for(k=0,Be=null,Ft(O),P++;P<L;P++){if(D=V(P),!D){if(A)continue;break}if(!w||!o.simplify){Ft(D);continue}var Xt=V(P+1);if(ee=$(D,O),!(!(T&&(k===0||k===L-1))&&ee<K(D,Xt)*h)){for(X=[(D[0]-O[0])/ee,(D[1]-O[1])/ee],R=O,q=ee,G=le=fe=0,N=!1,F=D,P++;P<l.length;P++){if(U=Xt,Xt=V(P+1),!U){if(A)continue;break}if(j=[U[0]-O[0],U[1]-O[1]],se=j[0]*X[1]-j[1]*X[0],le=Math.min(le,se),fe=Math.max(fe,se),fe-le>K(U,Xt))break;F=U,J=j[0]*X[0]+j[1]*X[1],J>q?(q=J,D=U,N=!1):J<G&&(G=J,R=U,N=!0)}if(N?(Ft(D),F!==R&&Ft(R)):(R!==O&&Ft(R),F!==D&&Ft(D)),Ft(F),P>=l.length||!U)break;Ft(U),O=U}}Be&&We([Ce||Be[0],Se||Be[1]]),_.push(S.slice(0,k))}return _}},{"../../constants/numerical":479,"../../lib":503,"./constants":930}],941:[function(e,I,B){I.exports=function(s,m,x){var t=x("line.shape");t==="spline"&&x("line.smoothing")}},{}],942:[function(e,I,B){var u={tonextx:1,tonexty:1,tonext:1};I.exports=function(m,x,t){var i,a,r,n,f,l={},o=!1,c=-1,v=0,d=-1;for(a=0;a<t.length;a++)i=t[a][0].trace,r=i.stackgroup||"",r?r in l?f=l[r]:(f=l[r]=v,v++):i.fill in u&&d>=0?f=d:(f=d=v,v++),f<c&&(o=!0),i._groupIndex=c=f;var p=t.slice();o&&p.sort(function(g,A){var b=g[0].trace,M=A[0].trace;return b._groupIndex-M._groupIndex||b.index-M.index});var y={};for(a=0;a<p.length;a++)i=p[a][0].trace,r=i.stackgroup||"",i.visible===!0?(i._nexttrace=null,i.fill in u&&(n=y[r],i._prevtrace=n||null,n&&(n._nexttrace=i)),i._ownfill=i.fill&&(i.fill.substr(0,6)==="tozero"||i.fill==="toself"||i.fill.substr(0,2)==="to"&&!i._prevtrace),y[r]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return p}},{}],943:[function(e,I,B){var u=e("fast-isnumeric");I.exports=function(m,x){x||(x=2);var t=m.marker,i=t.sizeref||1,a=t.sizemin||0,r=t.sizemode==="area"?function(n){return Math.sqrt(n/i)}:function(n){return n/i};return function(n){var f=r(n/x);return u(f)&&f>0?Math.max(f,a):0}}},{"fast-isnumeric":190}],944:[function(e,I,B){I.exports={container:"marker",min:"cmin",max:"cmax"}},{}],945:[function(e,I,B){var u=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("./subtypes");I.exports=function(i,a,r,n,f,l){var o=x.isBubble(i),c=(i.line||{}).color,v;if(l=l||{},c&&(r=c),f("marker.symbol"),f("marker.opacity",o?.7:1),f("marker.size"),f("marker.color",r),s(i,"marker")&&m(i,a,n,f,{prefix:"marker.",cLetter:"c"}),l.noSelect||(f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size")),l.noLine||(c&&!Array.isArray(c)&&a.marker.color!==c?v=c:o?v=u.background:v=u.defaultLine,f("marker.line.color",v),s(i,"marker.line")&&m(i,a,n,f,{prefix:"marker.line.",cLetter:"c"}),f("marker.line.width",o?1:0)),o&&(f("marker.sizeref"),f("marker.sizemin"),f("marker.sizemode")),l.gradient){var d=f("marker.gradient.type");d!=="none"&&f("marker.gradient.color")}}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":951}],946:[function(e,I,B){var u=e("../../lib").dateTick0,s=e("../../constants/numerical"),m=s.ONEWEEK;function x(t,i){return t%m==0?u(i,1):u(i,0)}I.exports=function(i,a,r,n,f){if(f||(f={x:!0,y:!0}),f.x){var l=n("xperiod");l&&(n("xperiod0",x(l,a.xcalendar)),n("xperiodalignment"))}if(f.y){var o=n("yperiod");o&&(n("yperiod0",x(o,a.ycalendar)),n("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],947:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../lib"),x=m.ensureSingle,t=m.identity,i=e("../../components/drawing"),a=e("./subtypes"),r=e("./line_points"),n=e("./link_traces"),f=e("../../lib/polygon").tester;I.exports=function(d,p,y,g,A,b){var M,w,T=!A,_=!!A&&A.duration>0,h=n(d,p,y);if(M=g.selectAll("g.trace").data(h,function(S){return S[0].trace.uid}),M.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),M.order(),l(d,M,p),_){b&&(w=b());var L=u.transition().duration(A.duration).ease(A.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()});L.each(function(){g.selectAll("g.trace").each(function(S,k){o(d,k,p,S,h,this,A)})})}else M.each(function(S,k){o(d,k,p,S,h,this,A)});T&&M.exit().remove(),g.selectAll("path:not([d])").remove()};function l(v,d,p){d.each(function(y){var g=x(u.select(this),"g","fills");i.setClipUrl(g,p.layerClipId,v);var A=y[0].trace,b=[];A._ownfill&&b.push("_ownFill"),A._nexttrace&&b.push("_nextFill");var M=g.selectAll("g").data(b,t);M.enter().append("g"),M.exit().each(function(w){A[w]=null}).remove(),M.order().each(function(w){A[w]=x(u.select(this),"path","js-fill")})})}function o(v,d,p,y,g,A,b){var M;c(v,d,p,y,g);var w=!!b&&b.duration>0;function T(Xe){return w?Xe.transition():Xe}var _=p.xaxis,h=p.yaxis,L=y[0].trace,S=L.line,k=u.select(A),P=x(k,"g","errorbars"),O=x(k,"g","lines"),F=x(k,"g","points"),D=x(k,"g","text");if(s.getComponentMethod("errorbars","plot")(v,P,p,b),L.visible!==!0)return;T(k).style("opacity",L.opacity);var R,U,N=L.fill.charAt(L.fill.length-1);N!=="x"&&N!=="y"&&(N=""),y[0][p.isRangePlot?"nodeRangePlot3":"node3"]=k;var X="",j=[],ee=L._prevtrace;ee&&(X=ee._prevRevpath||"",U=ee._nextFill,j=ee._polygons);var q,G,J="",le="",fe,se,V,Y,ne,te,K,$=[],ae=m.noop;if(R=L._ownFill,a.hasLines(L)||L.fill!=="none"){for(U&&U.datum(y),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(fe=i.steps(S.shape),se=i.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?fe=se=function(Xe){var Te=Xe[Xe.length-1];return Xe.length>1&&Xe[0][0]===Te[0]&&Xe[0][1]===Te[1]?i.smoothclosed(Xe.slice(1),S.smoothing):i.smoothopen(Xe,S.smoothing)}:fe=se=function(Xe){return"M"+Xe.join("L")},V=function(Xe){return se(Xe.reverse())},$=r(y,{xaxis:_,yaxis:h,connectGaps:L.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,simplify:S.simplify,fill:L.fill}),K=L._polygons=new Array($.length),M=0;M<$.length;M++)L._polygons[M]=f($[M]);$.length&&(Y=$[0][0],ne=$[$.length-1],te=ne[ne.length-1]),ae=function(Xe){return function(Te){if(q=fe(Te),G=V(Te),J?N?(J+="L"+q.substr(1),le=G+("L"+le.substr(1))):(J+="Z"+q,le=G+"Z"+le):(J=q,le=G),a.hasLines(L)&&Te.length>1){var Ie=u.select(this);if(Ie.datum(y),Xe)T(Ie.style("opacity",0).attr("d",q).call(i.lineGroupStyle)).style("opacity",1);else{var Ze=T(Ie);Ze.attr("d",q),i.singleLineStyle(y,Ze)}}}}}var ie=O.selectAll(".js-line").data($);T(ie.exit()).style("opacity",0).remove(),ie.each(ae(!1)),ie.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(i.lineGroupStyle).each(ae(!0)),i.setClipUrl(ie,p.layerClipId,v);function oe(Xe){T(Xe).attr("d","M0,0Z")}$.length?(R?(R.datum(y),Y&&te&&(N?(N==="y"?Y[1]=te[1]=h.c2p(0,!0):N==="x"&&(Y[0]=te[0]=_.c2p(0,!0)),T(R).attr("d","M"+te+"L"+Y+"L"+J.substr(1)).call(i.singleFillStyle)):T(R).attr("d",J+"Z").call(i.singleFillStyle))):U&&(L.fill.substr(0,6)==="tonext"&&J&&X?(L.fill==="tonext"?T(U).attr("d",J+"Z"+X+"Z").call(i.singleFillStyle):T(U).attr("d",J+"L"+X.substr(1)+"Z").call(i.singleFillStyle),L._polygons=L._polygons.concat(j)):(oe(U),L._polygons=null)),L._prevRevpath=le,L._prevPolygons=K):(R?oe(R):U&&oe(U),L._polygons=L._prevRevpath=L._prevPolygons=null);function ue(Xe){return Xe.filter(function(Te){return!Te.gap&&Te.vis})}function xe(Xe){return Xe.filter(function(Te){return Te.vis})}function he(Xe){return Xe.filter(function(Te){return!Te.gap})}function me(Xe){return Xe.id}function be(Xe){if(Xe.ids)return me}function Ce(){return!1}function Se(Xe,Te,Ie){var Ze,rt,Ge,ze=Ie[0].trace,We=a.hasMarkers(ze),mt=a.hasText(ze),Ft=be(ze),Xt=Ce,Pt=Ce;if(We||mt){var Ut=t,Gt=ze.stackgroup,It=Gt&&v._fullLayout._scatterStackOpts[_._id+h._id][Gt].stackgaps==="infer zero";ze.marker.maxdisplayed||ze._needsCull?Ut=It?xe:ue:Gt&&!It&&(Ut=he),We&&(Xt=Ut),mt&&(Pt=Ut)}rt=Xe.selectAll("path.point"),Ze=rt.data(Xt,Ft);var Ct=Ze.enter().append("path").classed("point",!0);w&&Ct.call(i.pointStyle,ze,v).call(i.translatePoints,_,h).style("opacity",0).transition().style("opacity",1),Ze.order();var lt;We&&(lt=i.makePointStyleFns(ze)),Ze.each(function(dt){var et=u.select(this),Pe=T(et);Ge=i.translatePoint(dt,Pe,_,h),Ge?(i.singlePointStyle(dt,Pe,ze,lt,v),p.layerClipId&&i.hideOutsideRangePoint(dt,Pe,_,h,ze.xcalendar,ze.ycalendar),ze.customdata&&et.classed("plotly-customdata",dt.data!==null&&dt.data!==void 0)):Pe.remove()}),w?Ze.exit().transition().style("opacity",0).remove():Ze.exit().remove(),rt=Te.selectAll("g"),Ze=rt.data(Pt,Ft),Ze.enter().append("g").classed("textpoint",!0).append("text"),Ze.order(),Ze.each(function(dt){var et=u.select(this),Pe=T(et.select("text"));Ge=i.translatePoint(dt,Pe,_,h),Ge?p.layerClipId&&i.hideOutsideRangePoint(dt,et,_,h,ze.xcalendar,ze.ycalendar):et.remove()}),Ze.selectAll("text").call(i.textPointStyle,ze,v).each(function(dt){var et=_.c2p(dt.x),Pe=h.c2p(dt.y);u.select(this).selectAll("tspan.line").each(function(){T(u.select(this)).attr({x:et,y:Pe})})}),Ze.exit().remove()}F.datum(y),D.datum(y),Se(F,D,y);var Be=L.cliponaxis===!1,Ye=Be?null:p.layerClipId;i.setClipUrl(F,Ye,v),i.setClipUrl(D,Ye,v)}function c(v,d,p,y,g){var A=p.xaxis,b=p.yaxis,M=u.extent(m.simpleMap(A.range,A.r2c)),w=u.extent(m.simpleMap(b.range,b.r2c)),T=y[0].trace;if(!!a.hasMarkers(T)){var _=T.marker.maxdisplayed;if(_!==0){var h=y.filter(function(P){return P.x>=M[0]&&P.x<=M[1]&&P.y>=w[0]&&P.y<=w[1]}),L=Math.ceil(h.length/_),S=0;g.forEach(function(P,O){var F=P[0].trace;a.hasMarkers(F)&&F.marker.maxdisplayed>0&&O<d&&S++});var k=Math.round(S*L/3+Math.floor(S/3)*L/7.1);y.forEach(function(P){delete P.vis}),h.forEach(function(P,O){Math.round((O+k)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":940,"./link_traces":942,"./subtypes":951,"@plotly/d3":58}],948:[function(e,I,B){var u=e("./subtypes");I.exports=function(m,x){var t=m.cd,i=m.xaxis,a=m.yaxis,r=[],n=t[0].trace,f,l,o,c,v=!u.hasMarkers(n)&&!u.hasText(n);if(v)return[];if(x===!1)for(f=0;f<t.length;f++)t[f].selected=0;else for(f=0;f<t.length;f++)l=t[f],o=i.c2p(l.x),c=a.c2p(l.y),l.i!==null&&x.contains([o,c],!1,f,m)?(r.push({pointNumber:l.i,x:i.c2d(l.x),y:a.c2d(l.y)}),l.selected=1):l.selected=0;return r}},{"./subtypes":951}],949:[function(e,I,B){var u=["orientation","groupnorm","stackgaps"];I.exports=function(m,x,t,i){var a=t._scatterStackOpts,r=i("stackgroup");if(r){var n=x.xaxis+x.yaxis,f=a[n];f||(f=a[n]={});var l=f[r],o=!1;l?l.traces.push(x):(l=f[r]={traceIndices:[],traces:[x]},o=!0);for(var c={orientation:x.x&&!x.y?"h":"v"},v=0;v<u.length;v++){var d=u[v],p=d+"Found";if(!l[p]){var y=m[d]!==void 0,g=d==="orientation";if((y||o)&&(l[d]=i(d,c[d]),g&&(l.fillDflt=l[d]==="h"?"tonextx":"tonexty"),y&&(l[p]=!0,!o&&(delete l.traces[0][d],g))))for(var A=0;A<l.traces.length-1;A++){var b=l.traces[A];b._input.fill!==b.fill&&(b.fill=l.fillDflt)}}}return l}}},{}],950:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../registry");function x(r){var n=u.select(r).selectAll("g.trace.scatter");n.style("opacity",function(f){return f[0].trace.opacity}),n.selectAll("g.points").each(function(f){var l=u.select(this),o=f.trace||f[0].trace;t(l,o,r)}),n.selectAll("g.text").each(function(f){var l=u.select(this),o=f.trace||f[0].trace;i(l,o,r)}),n.selectAll("g.trace path.js-line").call(s.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(s.fillGroupStyle),m.getComponentMethod("errorbars","style")(n)}function t(r,n,f){s.pointStyle(r.selectAll("path.point"),n,f)}function i(r,n,f){s.textPointStyle(r.selectAll("text"),n,f)}function a(r,n,f){var l=n[0].trace;l.selectedpoints?(s.selectedPointStyle(f.selectAll("path.point"),l),s.selectedTextStyle(f.selectAll("text"),l)):(t(f,l,r),i(f,l,r))}I.exports={style:x,stylePoints:t,styleText:i,styleOnSelect:a}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],951:[function(e,I,B){var u=e("../../lib");I.exports={hasLines:function(s){return s.visible&&s.mode&&s.mode.indexOf("lines")!==-1},hasMarkers:function(s){return s.visible&&(s.mode&&s.mode.indexOf("markers")!==-1||s.type==="splom")},hasText:function(s){return s.visible&&s.mode&&s.mode.indexOf("text")!==-1},isBubble:function(s){return u.isPlainObject(s.marker)&&u.isArrayOrTypedArray(s.marker.size)}}},{"../../lib":503}],952:[function(e,I,B){var u=e("../../lib");I.exports=function(s,m,x,t,i){i=i||{},t("textposition"),u.coerceFont(t,"textfont",x.font),i.noSelect||(t("selected.textfont.color"),t("unselected.textfont.color"))}},{"../../lib":503}],953:[function(e,I,B){var u=e("../../lib"),s=e("../../registry");I.exports=function(x,t,i,a){var r=a("x"),n=a("y"),f,l=s.getComponentMethod("calendars","handleTraceDefaults");if(l(x,t,["x","y"],i),r){var o=u.minRowLength(r);n?f=Math.min(o,u.minRowLength(n)):(f=o,a("y0"),a("dy"))}else{if(!n)return 0;f=u.minRowLength(n),a("x0"),a("dx")}return t._length=f,f}},{"../../lib":503,"../../registry":638}],954:[function(e,I,B){var u=e("../scatter/attributes"),s=e("../../components/colorscale/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../plots/attributes"),a=e("../../constants/gl3d_dashes"),r=e("../../constants/gl3d_markers"),n=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll,l=e("../../lib/sort_object_keys"),o=u.line,c=u.marker,v=c.line,d=n({width:o.width,dash:{valType:"enumerated",values:l(a),dflt:"solid"}},s("line"));function p(g){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var y=I.exports=f({x:u.x,y:u.y,z:{valType:"data_array"},text:n({},u.text,{}),texttemplate:t({},{}),hovertext:n({},u.hovertext,{}),hovertemplate:x(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),mode:n({},u.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:p(),y:p(),z:p()},connectgaps:u.connectgaps,line:d,marker:n({symbol:{valType:"enumerated",values:l(r),dflt:"circle",arrayOk:!0},size:n({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:n({},c.opacity,{arrayOk:!1}),colorbar:c.colorbar,line:n({width:n({},v.width,{arrayOk:!1})},s("marker.line"))},s("marker")),textposition:n({},u.textposition,{dflt:"top center"}),textfont:{color:u.textfont.color,size:u.textfont.size,family:n({},u.textfont.family,{arrayOk:!1})},opacity:i.opacity,hoverinfo:n({},i.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":926}],955:[function(e,I,B){var u=e("../scatter/arrays_to_calcdata"),s=e("../scatter/colorscale_calc");I.exports=function(x,t){var i=[{x:!1,y:!1,trace:t,t:{}}];return u(i,t),s(x,t),i}},{"../scatter/arrays_to_calcdata":925,"../scatter/colorscale_calc":929}],956:[function(e,I,B){var u=e("../../registry");function s(t,i,a,r){if(!i||!i.visible)return null;for(var n=u.getComponentMethod("errorbars","makeComputeError")(i),f=new Array(t.length),l=0;l<t.length;l++){var o=n(+t[l],l);if(r.type==="log"){var c=r.c2l(t[l]),v=t[l]-o[0],d=t[l]+o[1];if(f[l]=[(r.c2l(v,!0)-c)*a,(r.c2l(d,!0)-c)*a],v>0){var p=r.c2l(v);r._lowerLogErrorBound||(r._lowerLogErrorBound=p),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,p)}}else f[l]=[-o[0]*a,o[1]*a]}return f}function m(t){for(var i=0;i<t.length;i++)if(t[i])return t[i].length;return 0}function x(t,i,a){var r=[s(t.x,t.error_x,i[0],a.xaxis),s(t.y,t.error_y,i[1],a.yaxis),s(t.z,t.error_z,i[2],a.zaxis)],n=m(r);if(n===0)return null;for(var f=new Array(n),l=0;l<n;l++){for(var o=[[0,0,0],[0,0,0]],c=0;c<3;c++)if(r[c])for(var v=0;v<2;v++)o[v][c]=r[c][l][v];f[l]=o}return f}I.exports=x},{"../../registry":638}],957:[function(e,I,B){var u=e("../../../stackgl_modules").gl_line3d,s=e("../../../stackgl_modules").gl_scatter3d,m=e("../../../stackgl_modules").gl_error3d,x=e("../../../stackgl_modules").gl_mesh3d,t=e("../../../stackgl_modules").delaunay_triangulate,i=e("../../lib"),a=e("../../lib/str2rgbarray"),r=e("../../lib/gl_format_color").formatColor,n=e("../scatter/make_bubble_size_func"),f=e("../../constants/gl3d_dashes"),l=e("../../constants/gl3d_markers"),o=e("../../plots/cartesian/axes"),c=e("../../components/fx/helpers").appendArrayPointValue,v=e("./calc_errors");function d(P,O){this.scene=P,this.uid=O,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var p=d.prototype;p.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var O=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[O]||this.textLabels[O]===0)&&(P.textLabel=this.textLabels[O]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[O],this.data.y[O],this.data.z[O]],!0}};function y(P,O,F){var D=(F+1)%3,R=(F+2)%3,U=[],N=[],X;for(X=0;X<P.length;++X){var j=P[X];isNaN(j[D])||!isFinite(j[D])||isNaN(j[R])||!isFinite(j[R])||(U.push([j[D],j[R]]),N.push(X))}var ee=t(U);for(X=0;X<ee.length;++X)for(var q=ee[X],G=0;G<q.length;++G)q[G]=N[q[G]];return{positions:P,cells:ee,meshColor:O}}function g(P){for(var O=[0,0,0],F=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],R=0;R<3;R++){var U=P[R];U&&U.copy_zstyle!==!1&&P[2].visible!==!1&&(U=P[2]),!(!U||!U.visible)&&(O[R]=U.width/2,F[R]=a(U.color),D[R]=U.thickness)}return{capSize:O,color:F,lineWidth:D}}function A(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function b(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function M(P){var O=0,F=0,D=[O,F];if(Array.isArray(P))for(var R=0;R<P.length;R++)D[R]=[O,F],P[R]&&(D[R][0]=A(P[R]),D[R][1]=b(P[R]));else D[0]=A(P),D[1]=b(P);return D}function w(P,O){return O(P*4)}function T(P){return l[P]}function _(P,O,F,D,R){var U=null;if(i.isArrayOrTypedArray(P)){U=[];for(var N=0;N<O;N++)P[N]===void 0?U[N]=D:U[N]=F(P[N],R)}else U=F(P,i.identity);return U}function h(P,O){var F=[],D=P.fullSceneLayout,R=P.dataScale,U=D.xaxis,N=D.yaxis,X=D.zaxis,j=O.marker,ee=O.line,q=O.x||[],G=O.y||[],J=O.z||[],le=q.length,fe=O.xcalendar,se=O.ycalendar,V=O.zcalendar,Y,ne,te,K,$,ae;for($=0;$<le;$++)Y=U.d2l(q[$],0,fe)*R[0],ne=N.d2l(G[$],0,se)*R[1],te=X.d2l(J[$],0,V)*R[2],F[$]=[Y,ne,te];if(Array.isArray(O.text))ae=O.text;else if(O.text!==void 0)for(ae=new Array(le),$=0;$<le;$++)ae[$]=O.text;function ie(rt,Ge){var ze=D[rt];return o.tickText(ze,ze.d2l(Ge),!0).text}var oe=O.texttemplate;if(oe){var ue=P.fullLayout,xe=ue._d3locale,he=Array.isArray(oe),me=he?Math.min(oe.length,le):le,be=he?function(rt){return oe[rt]}:function(){return oe};for(ae=new Array(me),$=0;$<me;$++){var Ce={x:q[$],y:G[$],z:J[$]},Se={xLabel:ie("xaxis",q[$]),yLabel:ie("yaxis",G[$]),zLabel:ie("zaxis",J[$])},Be={};c(Be,O,$);var Ye=O._meta||{};ae[$]=i.texttemplateString(be($),Se,xe,Be,Ce,Ye)}}if(K={position:F,mode:O.mode,text:ae},"line"in O&&(K.lineColor=r(ee,1,le),K.lineWidth=ee.width,K.lineDashes=ee.dash),"marker"in O){var Xe=n(O);K.scatterColor=r(j,1,le),K.scatterSize=_(j.size,le,w,20,Xe),K.scatterMarker=_(j.symbol,le,T,"\u25CF"),K.scatterLineWidth=j.line.width,K.scatterLineColor=r(j.line,1,le),K.scatterAngle=0}"textposition"in O&&(K.textOffset=M(O.textposition),K.textColor=r(O.textfont,1,le),K.textSize=_(O.textfont.size,le,i.identity,12),K.textFont=O.textfont.family,K.textAngle=0);var Te=["x","y","z"];for(K.project=[!1,!1,!1],K.projectScale=[1,1,1],K.projectOpacity=[1,1,1],$=0;$<3;++$){var Ie=O.projection[Te[$]];(K.project[$]=Ie.show)&&(K.projectOpacity[$]=Ie.opacity,K.projectScale[$]=Ie.scale)}K.errorBounds=v(O,R,D);var Ze=g([O.error_x,O.error_y,O.error_z]);return K.errorColor=Ze.color,K.errorLineWidth=Ze.lineWidth,K.errorCapSize=Ze.capSize,K.delaunayAxis=O.surfaceaxis,K.delaunayColor=a(O.surfacecolor),K}function L(P){if(i.isArrayOrTypedArray(P)){var O=P[0];return i.isArrayOrTypedArray(O)&&(P=O),"rgb("+P.slice(0,3).map(function(F){return Math.round(F*255)})+")"}return null}function S(P){return i.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}p.update=function(P){var O=this.scene.glplot.gl,F,D,R,U,N=f.solid;this.data=P;var X=h(this.scene,P);"mode"in X&&(this.mode=X.mode),"lineDashes"in X&&X.lineDashes in f&&(N=f[X.lineDashes]),this.color=S(X.scatterColor)||S(X.lineColor),this.dataPoints=X.position,F={gl:this.scene.glplot.gl,position:X.position,color:X.lineColor,lineWidth:X.lineWidth||1,dashes:N[0],dashScale:N[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(F):(this.linePlot=u(F),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=P.opacity;if(P.marker&&P.marker.opacity&&(j*=P.marker.opacity),D={gl:this.scene.glplot.gl,position:X.position,color:X.scatterColor,size:X.scatterSize,glyph:X.scatterMarker,opacity:j,orthographic:!0,lineWidth:X.scatterLineWidth,lineColor:X.scatterLineColor,project:X.project,projectScale:X.projectScale,projectOpacity:X.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=s(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),U={gl:this.scene.glplot.gl,position:X.position,glyph:X.text,color:X.textColor,size:X.textSize,angle:X.textAngle,alignment:X.textOffset,font:X.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(U):(this.textMarkers=s(U),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:X.position,color:X.errorColor,error:X.errorBounds,lineWidth:X.errorLineWidth,capSize:X.errorCapSize,opacity:P.opacity},this.errorBars?X.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):X.errorBounds&&(this.errorBars=m(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),X.delaunayAxis>=0){var ee=y(X.position,X.delaunayColor,X.delaunayAxis);ee.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(ee):(ee.gl=O,this.delaunayMesh=x(ee),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},p.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function k(P,O){var F=new d(P,O.uid);return F.update(O),F}I.exports=k},{"../../../stackgl_modules":1120,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":943,"./calc_errors":956}],958:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("../scatter/subtypes"),x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),i=e("../scatter/text_defaults"),a=e("./attributes");I.exports=function(f,l,o,c){function v(w,T){return s.coerce(f,l,a,w,T)}var d=r(f,l,v,c);if(!d){l.visible=!1;return}v("text"),v("hovertext"),v("hovertemplate"),v("xhoverformat"),v("yhoverformat"),v("zhoverformat"),v("mode"),m.hasLines(l)&&(v("connectgaps"),t(f,l,o,c,v)),m.hasMarkers(l)&&x(f,l,o,c,v,{noSelect:!0}),m.hasText(l)&&(v("texttemplate"),i(f,l,c,v,{noSelect:!0}));var p=(l.line||{}).color,y=(l.marker||{}).color;v("surfaceaxis")>=0&&v("surfacecolor",p||y);for(var g=["x","y","z"],A=0;A<3;++A){var b="projection."+g[A];v(b+".show")&&(v(b+".opacity"),v(b+".scale"))}var M=u.getComponentMethod("errorbars","supplyDefaults");M(f,l,p||y||o,{axis:"z"}),M(f,l,p||y||o,{axis:"y",inherit:"z"}),M(f,l,p||y||o,{axis:"x",inherit:"z"})};function r(n,f,l,o){var c=0,v=l("x"),d=l("y"),p=l("z"),y=u.getComponentMethod("calendars","handleTraceDefaults");return y(n,f,["x","y","z"],o),v&&d&&p&&(c=Math.min(v.length,d.length,p.length),f._length=f._xlength=f._ylength=f._zlength=c),c}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":954}],959:[function(e,I,B){I.exports={plot:e("./convert"),attributes:e("./attributes"),markerSymbols:e("../../constants/gl3d_markers"),supplyDefaults:e("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":954,"./calc":955,"./convert":957,"./defaults":958}],960:[function(e,I,B){var u=e("../scatter/attributes"),s=e("../../plots/attributes"),m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),i=e("../../lib/extend").extendFlat,a=u.marker,r=u.line,n=a.line;I.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:i({},u.mode,{dflt:"markers"}),text:i({},u.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","text"]}),hovertext:i({},u.hovertext,{}),line:{color:r.color,width:r.width,dash:r.dash,shape:i({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:u.connectgaps,fill:i({},u.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:u.fillcolor,marker:i({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:i({width:n.width,editType:"calc"},t("marker.line")),gradient:a.gradient,editType:"calc"},t("marker")),textfont:u.textfont,textposition:u.textposition,selected:u.selected,unselected:u.unselected,hoverinfo:i({},s.hoverinfo,{flags:["a","b","text","name"]}),hoveron:u.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],961:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../scatter/colorscale_calc"),m=e("../scatter/arrays_to_calcdata"),x=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,i=e("../carpet/lookup_carpetid");I.exports=function(r,n){var f=n._carpetTrace=i(r,n);if(!(!f||!f.visible||f.visible==="legendonly")){var l;n.xaxis=f.xaxis,n.yaxis=f.yaxis;var o=n._length,c=new Array(o),v,d,p=!1;for(l=0;l<o;l++)if(v=n.a[l],d=n.b[l],u(v)&&u(d)){var y=f.ab2xy(+v,+d,!0),g=f.isVisible(+v,+d);g||(p=!0),c[l]={x:y[0],y:y[1],a:v,b:d,vis:g}}else c[l]={x:!1,y:!1};return n._needsCull=p,c[0].carpet=f,c[0].trace=n,t(n,o),s(r,n),m(c,n),x(c,n),c}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],962:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/constants"),m=e("../scatter/subtypes"),x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),i=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),r=e("../scatter/fillcolor_defaults"),n=e("./attributes");I.exports=function(l,o,c,v){function d(w,T){return u.coerce(l,o,n,w,T)}d("carpet"),o.xaxis="x",o.yaxis="y";var p=d("a"),y=d("b"),g=Math.min(p.length,y.length);if(!g){o.visible=!1;return}o._length=g,d("text"),d("texttemplate"),d("hovertext");var A=g<s.PTS_LINESONLY?"lines+markers":"lines";d("mode",A),m.hasLines(o)&&(t(l,o,c,v,d),i(l,o,d),d("connectgaps")),m.hasMarkers(o)&&x(l,o,c,v,d,{gradient:!0}),m.hasText(o)&&a(l,o,v,d);var b=[];(m.hasMarkers(o)||m.hasText(o))&&(d("marker.maxdisplayed"),b.push("points")),d("fill"),o.fill!=="none"&&(r(l,o,c,d),m.hasLines(o)||i(l,o,d)),(o.fill==="tonext"||o.fill==="toself")&&b.push("fills");var M=d("hoveron",b.join("+")||"points");M!=="fills"&&d("hovertemplate"),u.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":960}],963:[function(e,I,B){I.exports=function(s,m,x,t,i){var a=t[i];return s.a=a.a,s.b=a.b,s.y=a.y,s}},{}],964:[function(e,I,B){I.exports=function(s,m){var x={},t=m._carpet,i=t.ab2ij([s.a,s.b]),a=Math.floor(i[0]),r=i[0]-a,n=Math.floor(i[1]),f=i[1]-n,l=t.evalxy([],a,n,r,f);return x.yLabel=l[1].toFixed(3),x}},{}],965:[function(e,I,B){var u=e("../scatter/hover"),s=e("../../lib").fillText;I.exports=function(x,t,i,a){var r=u(x,t,i,a);if(!r||r[0].index===!1)return;var n=r[0];if(n.index===void 0){var f=1-n.y0/x.ya._length,l=x.xa._length,o=l*f/2,c=l-o;return n.x0=Math.max(Math.min(n.x0,c),o),n.x1=Math.max(Math.min(n.x1,c),o),r}var v=n.cd[n.index];n.a=v.a,n.b=v.b,n.xLabelVal=void 0,n.yLabelVal=void 0;var d=n.trace,p=d._carpet,y=d._module.formatLabels(v,d);n.yLabel=y.yLabel,delete n.text;var g=[];function A(w,T){var _;w.labelprefix&&w.labelprefix.length>0?_=w.labelprefix.replace(/ = $/,""):_=w._hovertitle,g.push(_+": "+T.toFixed(3)+w.labelsuffix)}if(!d.hovertemplate){var b=v.hi||d.hoverinfo,M=b.split("+");M.indexOf("all")!==-1&&(M=["a","b","text"]),M.indexOf("a")!==-1&&A(p.aaxis,v.a),M.indexOf("b")!==-1&&A(p.baxis,v.b),g.push("y: "+n.yLabel),M.indexOf("text")!==-1&&s(v,d,g),n.extraText=g.join("<br>")}return r}},{"../../lib":503,"../scatter/hover":937}],966:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:e("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./format_labels":964,"./hover":965,"./plot":967}],967:[function(e,I,B){var u=e("../scatter/plot"),s=e("../../plots/cartesian/axes"),m=e("../../components/drawing");I.exports=function(t,i,a,r){var n,f,l,o=a[0][0].carpet,c={xaxis:s.getFromId(t,o.xaxis||"x"),yaxis:s.getFromId(t,o.yaxis||"y"),plot:i.plot};for(u(t,c,a,r),n=0;n<a.length;n++)f=a[n][0].trace,l=r.selectAll("g.trace"+f.uid+" .js-line"),m.setClipUrl(l,a[n][0].carpet._clipPathId,t)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":947}],968:[function(e,I,B){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../scatter/attributes"),x=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),i=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,r=e("../../plot_api/edit_types").overrideAll,n=m.marker,f=m.line,l=n.line;I.exports=r({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:a({},m.mode,{dflt:"markers"}),text:a({},m.text,{}),texttemplate:s({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},m.hovertext,{}),textfont:m.textfont,textposition:m.textposition,line:{color:f.color,width:f.width,dash:i},connectgaps:m.connectgaps,marker:a({symbol:n.symbol,opacity:n.opacity,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:a({width:l.width},t("marker.line")),gradient:n.gradient},t("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:m.fillcolor,selected:m.selected,unselected:m.unselected,hoverinfo:a({},x.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:u()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],969:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../constants/numerical").BADNUM,m=e("../scatter/colorscale_calc"),x=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),i=e("../../lib")._;function a(r){return r&&typeof r=="string"}I.exports=function(n,f){var l=Array.isArray(f.locations),o=l?f.locations.length:f._length,c=new Array(o),v;f.geojson?v=function(b){return a(b)||u(b)}:v=a;for(var d=0;d<o;d++){var p=c[d]={};if(l){var y=f.locations[d];p.loc=v(y)?y:null}else{var g=f.lon[d],A=f.lat[d];u(g)&&u(A)?p.lonlat=[+g,+A]:p.lonlat=[s,s]}}return x(c,f),m(n,f),t(c,f),o&&(c[0].t={labels:{lat:i(n,"lat:")+" ",lon:i(n,"lon:")+" "}}),c}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],970:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),a=e("./attributes");I.exports=function(n,f,l,o){function c(M,w){return u.coerce(n,f,a,M,w)}var v=c("locations"),d;if(v&&v.length){var p=c("geojson"),y;(typeof p=="string"&&p!==""||u.isPlainObject(p))&&(y="geojson-id");var g=c("locationmode",y);g==="geojson-id"&&c("featureidkey"),d=v.length}else{var A=c("lon")||[],b=c("lat")||[];d=Math.min(A.length,b.length)}if(!d){f.visible=!1;return}f._length=d,c("text"),c("hovertext"),c("hovertemplate"),c("mode"),s.hasLines(f)&&(x(n,f,l,o,c),c("connectgaps")),s.hasMarkers(f)&&m(n,f,l,o,c,{gradient:!0}),s.hasText(f)&&(c("texttemplate"),t(n,f,o,c)),c("fill"),f.fill!=="none"&&i(n,f,l,c),u.coerceSelectionMarkerOpacity(f,c)}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":968}],971:[function(e,I,B){I.exports=function(s,m,x,t,i){s.lon=m.lon,s.lat=m.lat,s.location=m.loc?m.loc:null;var a=t[i];return a.fIn&&a.fIn.properties&&(s.properties=a.fIn.properties),s}},{}],972:[function(e,I,B){var u=e("../../plots/cartesian/axes");I.exports=function(m,x,t){var i={},a=t[x.geo]._subplot,r=a.mockAxis,n=m.lonlat;return i.lonLabel=u.tickText(r,r.c2l(n[0]),!0).text,i.latLabel=u.tickText(r,r.c2l(n[1]),!0).text,i}},{"../../plots/cartesian/axes":554}],973:[function(e,I,B){var u=e("../../components/fx"),s=e("../../constants/numerical").BADNUM,m=e("../scatter/get_trace_color"),x=e("../../lib").fillText,t=e("./attributes");I.exports=function(r,n,f){var l=r.cd,o=l[0].trace,c=r.xa,v=r.ya,d=r.subplot,p=d.projection.isLonLatOverEdges,y=d.project;function g(h){var L=h.lonlat;if(L[0]===s||p(L))return 1/0;var S=y(L),k=y([n,f]),P=Math.abs(S[0]-k[0]),O=Math.abs(S[1]-k[1]),F=Math.max(3,h.mrc||0);return Math.max(Math.sqrt(P*P+O*O)-F,1-3/F)}if(u.getClosest(l,g,r),r.index!==!1){var A=l[r.index],b=A.lonlat,M=[c.c2p(b),v.c2p(b)],w=A.mrc||1;r.x0=M[0]-w,r.x1=M[0]+w,r.y0=M[1]-w,r.y1=M[1]+w,r.loc=A.loc,r.lon=b[0],r.lat=b[1];var T={};T[o.geo]={_subplot:d};var _=o._module.formatLabels(A,o,T);return r.lonLabel=_.lonLabel,r.latLabel=_.latLabel,r.color=m(o,A),r.extraText=i(o,A,r,l[0].t.labels),r.hovertemplate=o.hovertemplate,[r]}};function i(a,r,n,f){if(a.hovertemplate)return;var l=r.hi||a.hoverinfo,o=l==="all"?t.hoverinfo.flags:l.split("+"),c=o.indexOf("location")!==-1&&Array.isArray(a.locations),v=o.indexOf("lon")!==-1,d=o.indexOf("lat")!==-1,p=o.indexOf("text")!==-1,y=[];function g(A){return A+"\xB0"}return c?y.push(r.loc):v&&d?y.push("("+g(n.latLabel)+", "+g(n.lonLabel)+")"):v?y.push(f.lon+g(n.lonLabel)):d&&y.push(f.lat+g(n.latLabel)),p&&x(r,a,y),y.join("<br>")}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936,"./attributes":968}],974:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:e("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":944,"../scatter/style":950,"./attributes":968,"./calc":969,"./defaults":970,"./event_data":971,"./format_labels":972,"./hover":973,"./plot":975,"./select":976,"./style":977}],975:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../lib/topojson_utils").getTopojsonFeatures,x=e("../../lib/geojson_utils"),t=e("../../lib/geo_location_utils"),i=e("../../plots/cartesian/autorange").findExtremes,a=e("../../constants/numerical").BADNUM,r=e("../scatter/calc").calcMarkerSize,n=e("../scatter/subtypes"),f=e("./style");function l(c,v,d){var p=v.layers.frontplot.select(".scatterlayer"),y=s.makeTraceGroups(p,d,"trace scattergeo");function g(A,b){A.lonlat[0]===a&&u.select(b).remove()}y.selectAll("*").remove(),y.each(function(A){var b=u.select(this),M=A[0].trace;if(n.hasLines(M)||M.fill!=="none"){var w=x.calcTraceToLineCoords(A),T=M.fill!=="none"?x.makePolygon(w):x.makeLine(w);b.selectAll("path.js-line").data([{geojson:T,trace:M}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(M)&&b.selectAll("path.point").data(s.identity).enter().append("path").classed("point",!0).each(function(_){g(_,this)}),n.hasText(M)&&b.selectAll("g").data(s.identity).enter().append("g").append("text").each(function(_){g(_,this)}),f(c,A)})}function o(c,v){var d=c[0].trace,p=v[d.geo],y=p._subplot,g=d._length,A,b;if(Array.isArray(d.locations)){var M=d.locationmode,w=M==="geojson-id"?t.extractTraceFeature(c):m(d,y.topojson);for(A=0;A<g;A++){b=c[A];var T=M==="geojson-id"?b.fOut:t.locationToFeature(M,b.loc,w);b.lonlat=T?T.properties.ct:[a,a]}}var _={padded:!0},h,L;if(p.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var S=t.computeBbox(t.getTraceGeojson(d));h=[S[0],S[2]],L=[S[1],S[3]]}else{for(h=new Array(g),L=new Array(g),A=0;A<g;A++)b=c[A],h[A]=b.lonlat[0],L[A]=b.lonlat[1];_.ppad=r(d,g)}d._extremes.lon=i(p.lonaxis._ax,h,_),d._extremes.lat=i(p.lataxis._ax,L,_)}I.exports={calcGeoJSON:o,plot:l}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":927,"../scatter/subtypes":951,"./style":977,"@plotly/d3":58}],976:[function(e,I,B){var u=e("../scatter/subtypes"),s=e("../../constants/numerical").BADNUM;I.exports=function(x,t){var i=x.cd,a=x.xaxis,r=x.yaxis,n=[],f=i[0].trace,l,o,c,v,d,p=!u.hasMarkers(f)&&!u.hasText(f);if(p)return[];if(t===!1)for(d=0;d<i.length;d++)i[d].selected=0;else for(d=0;d<i.length;d++)l=i[d],o=l.lonlat,o[0]!==s&&(c=a.c2p(o),v=r.c2p(o),t.contains([c,v],null,d,x)?(n.push({pointNumber:d,lon:o[0],lat:o[1]}),l.selected=1):l.selected=0);return n}},{"../../constants/numerical":479,"../scatter/subtypes":951}],977:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../components/color"),x=e("../scatter/style"),t=x.stylePoints,i=x.styleText;I.exports=function(n,f){f&&a(n,f)};function a(r,n){var f=n[0].trace,l=n[0].node3;l.style("opacity",n[0].trace.opacity),t(l,f,r),i(l,f,r),l.selectAll("path.js-line").style("fill","none").each(function(o){var c=u.select(this),v=o.trace,d=v.line||{};c.call(m.stroke,d.color).call(s.dashLine,d.dash||"",d.width||0),v.fill!=="none"&&c.call(m.fill,v.fillcolor)})}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":950,"@plotly/d3":58}],978:[function(e,I,B){var u=e("../../plots/attributes"),s=e("../scatter/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../components/colorscale/attributes"),t=e("../../lib/sort_object_keys"),i=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll,r=e("./constants").DASHES,n=s.line,f=s.marker,l=f.line,o=I.exports=a({x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),text:s.text,hovertext:s.hovertext,textposition:s.textposition,textfont:s.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:t(r),dflt:"solid"}},marker:i({},x("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:i({},x("marker.line"),{width:l.width})}),connectgaps:s.connectgaps,fill:i({},s.fill,{dflt:"none"}),fillcolor:s.fillcolor,selected:{marker:s.selected.marker,textfont:s.selected.textfont},unselected:{marker:s.unselected.marker,textfont:s.unselected.textfont},opacity:u.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=s.hovertemplate,o.texttemplate=s.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926,"./constants":980}],979:[function(e,I,B){var u=e("@plotly/point-cluster"),s=e("../../lib"),m=e("../../plots/cartesian/axis_ids"),x=e("../../plots/cartesian/autorange").findExtremes,t=e("../../plots/cartesian/align_period"),i=e("../scatter/calc"),a=i.calcMarkerSize,r=i.calcAxisExpansion,n=i.setFirstScatter,f=e("../scatter/colorscale_calc"),l=e("./convert"),o=e("./scene_update"),c=e("../../constants/numerical").BADNUM,v=e("./constants").TOO_MANY_POINTS;I.exports=function(g,A){var b=g._fullLayout,M=m.getFromId(g,A.xaxis),w=m.getFromId(g,A.yaxis),T=b._plots[A.xaxis+A.yaxis],_=A._length,h=_>=v,L=_*2,S={},k,P=M.makeCalcdata(A,"x"),O=w.makeCalcdata(A,"y"),F=t(A,M,"x",P),D=t(A,w,"y",O),R=F.vals,U=D.vals;A._x=R,A._y=U,A.xperiodalignment&&(A._origX=P,A._xStarts=F.starts,A._xEnds=F.ends),A.yperiodalignment&&(A._origY=O,A._yStarts=D.starts,A._yEnds=D.ends);var N=new Array(L),X=new Array(_);for(k=0;k<_;k++)N[k*2]=R[k]===c?NaN:R[k],N[k*2+1]=U[k]===c?NaN:U[k],X[k]=k;if(M.type==="log")for(k=0;k<L;k+=2)N[k]=M.c2l(N[k]);if(w.type==="log")for(k=1;k<L;k+=2)N[k]=w.c2l(N[k]);h&&M.type!=="log"&&w.type!=="log"?S.tree=u(N):S.ids=X,f(g,A);var j=p(g,T,A,N,R,U),ee=o(g,T);n(b,A);var q;return h?j.marker&&(q=j.marker.sizeAvg||Math.max(j.marker.size,3)):q=a(A,_),r(g,A,M,w,R,U,q),j.errorX&&d(A,M,j.errorX),j.errorY&&d(A,w,j.errorY),j.fill&&!ee.fill2d&&(ee.fill2d=!0),j.marker&&!ee.scatter2d&&(ee.scatter2d=!0),j.line&&!ee.line2d&&(ee.line2d=!0),(j.errorX||j.errorY)&&!ee.error2d&&(ee.error2d=!0),j.text&&!ee.glText&&(ee.glText=!0),j.marker&&(j.marker.snap=_),ee.lineOptions.push(j.line),ee.errorXOptions.push(j.errorX),ee.errorYOptions.push(j.errorY),ee.fillOptions.push(j.fill),ee.markerOptions.push(j.marker),ee.markerSelectedOptions.push(j.markerSel),ee.markerUnselectedOptions.push(j.markerUnsel),ee.textOptions.push(j.text),ee.textSelectedOptions.push(j.textSel),ee.textUnselectedOptions.push(j.textUnsel),ee.selectBatch.push([]),ee.unselectBatch.push([]),S._scene=ee,S.index=ee.count,S.x=R,S.y=U,S.positions=N,ee.count++,[{x:!1,y:!1,t:S,trace:A}]};function d(y,g,A){var b=y._extremes[g._id],M=x(g,A._bnds,{padded:!0});b.min=b.min.concat(M.min),b.max=b.max.concat(M.max)}function p(y,g,A,b,M,w){var T=l.style(y,A);if(T.marker&&(T.marker.positions=b),T.line&&b.length>1&&s.extendFlat(T.line,l.linePositions(y,A,b)),T.errorX||T.errorY){var _=l.errorBarPositions(y,A,b,M,w);T.errorX&&s.extendFlat(T.errorX,_.x),T.errorY&&s.extendFlat(T.errorY,_.y)}return T.text&&(s.extendFlat(T.text,{positions:b},l.textPosition(y,A,T.text,T.marker)),s.extendFlat(T.textSel,{positions:b},l.textPosition(y,A,T.text,T.markerSel)),s.extendFlat(T.textUnsel,{positions:b},l.textPosition(y,A,T.text,T.markerUnsel))),T}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"./constants":980,"./convert":981,"./scene_update":989,"@plotly/point-cluster":59}],980:[function(e,I,B){var u=20;I.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:u,SYMBOL_STROKE:u/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],981:[function(e,I,B){var u=e("fast-isnumeric"),s=e("svg-path-sdf"),m=e("color-normalize"),x=e("../../registry"),t=e("../../lib"),i=e("../../components/drawing"),a=e("../../plots/cartesian/axis_ids"),r=e("../../lib/gl_format_color").formatColor,n=e("../scatter/subtypes"),f=e("../scatter/make_bubble_size_func"),l=e("./helpers"),o=e("./constants"),c=e("../../constants/interactions").DESELECTDIM,v={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},d=e("../../components/fx/helpers").appendArrayPointValue;function p(F,D){var R,U={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},N=F._context.plotGlPixelRatio;if(D.visible!==!0)return U;if(n.hasText(D)&&(U.text=y(F,D),U.textSel=b(F,D,D.selected),U.textUnsel=b(F,D,D.unselected)),n.hasMarkers(D)&&(U.marker=g(D),U.markerSel=A(D,D.selected),U.markerUnsel=A(D,D.unselected),!D.unselected&&t.isArrayOrTypedArray(D.marker.opacity))){var X=D.marker.opacity;for(U.markerUnsel.opacity=new Array(X.length),R=0;R<X.length;R++)U.markerUnsel.opacity[R]=c*X[R]}if(n.hasLines(D)){U.line={overlay:!0,thickness:D.line.width*N,color:D.line.color,opacity:D.opacity};var j=(o.DASHES[D.line.dash]||[1]).slice();for(R=0;R<j.length;++R)j[R]*=D.line.width*N;U.line.dashes=j}return D.error_x&&D.error_x.visible&&(U.errorX=M(D,D.error_x,N)),D.error_y&&D.error_y.visible&&(U.errorY=M(D,D.error_y,N)),!!D.fill&&D.fill!=="none"&&(U.fill={closed:!0,fill:D.fillcolor,thickness:0}),U}function y(F,D){var R=F._fullLayout,U=D._length,N=D.textfont,X=D.textposition,j=Array.isArray(X)?X:[X],ee=N.color,q=N.size,G=N.family,J={},le,fe=F._context.plotGlPixelRatio,se=D.texttemplate;if(se){J.text=[];var V=R._d3locale,Y=Array.isArray(se),ne=Y?Math.min(se.length,U):U,te=Y?function(xe){return se[xe]}:function(){return se};for(le=0;le<ne;le++){var K={i:le},$=D._module.formatLabels(K,D,R),ae={};d(ae,D,le);var ie=D._meta||{};J.text.push(t.texttemplateString(te(le),$,V,ae,K,ie))}}else Array.isArray(D.text)&&D.text.length<U?J.text=D.text.slice():J.text=D.text;if(Array.isArray(J.text))for(le=J.text.length;le<U;le++)J.text[le]="";for(J.opacity=D.opacity,J.font={},J.align=[],J.baseline=[],le=0;le<j.length;le++){var oe=j[le].split(/\s+/);switch(oe[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(oe[1])}switch(oe[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(oe[0])}}if(Array.isArray(ee))for(J.color=new Array(U),le=0;le<U;le++)J.color[le]=ee[le];else J.color=ee;if(t.isArrayOrTypedArray(q)||Array.isArray(G))for(J.font=new Array(U),le=0;le<U;le++){var ue=J.font[le]={};ue.size=(t.isTypedArray(q)?q[le]:Array.isArray(q)?u(q[le])?q[le]:0:q)*fe,ue.family=Array.isArray(G)?G[le]:G}else J.font={size:q*fe,family:G};return J}function g(F){var D=F._length,R=F.marker,U={},N,X=t.isArrayOrTypedArray(R.symbol),j=t.isArrayOrTypedArray(R.color),ee=t.isArrayOrTypedArray(R.line.color),q=t.isArrayOrTypedArray(R.opacity),G=t.isArrayOrTypedArray(R.size),J=t.isArrayOrTypedArray(R.line.width),le;if(X||(le=l.isOpenSymbol(R.symbol)),X||j||ee||q){U.colors=new Array(D),U.borderColors=new Array(D);var fe=r(R,R.opacity,D),se=r(R.line,R.opacity,D);if(!Array.isArray(se[0])){var V=se;for(se=Array(D),N=0;N<D;N++)se[N]=V}if(!Array.isArray(fe[0])){var Y=fe;for(fe=Array(D),N=0;N<D;N++)fe[N]=Y}for(U.colors=fe,U.borderColors=se,N=0;N<D;N++){if(X){var ne=R.symbol[N];le=l.isOpenSymbol(ne)}le&&(se[N]=fe[N].slice(),fe[N]=fe[N].slice(),fe[N][3]=0)}U.opacity=F.opacity}else le?(U.color=m(R.color,"uint8"),U.color[3]=0,U.borderColor=m(R.color,"uint8")):(U.color=m(R.color,"uint8"),U.borderColor=m(R.line.color,"uint8")),U.opacity=F.opacity*R.opacity;if(X)for(U.markers=new Array(D),N=0;N<D;N++)U.markers[N]=S(R.symbol[N]);else U.marker=S(R.symbol);var te=1,K=f(F,te),$;if(G||J){var ae=U.sizes=new Array(D),ie=U.borderSizes=new Array(D),oe=0,ue;if(G){for(N=0;N<D;N++)ae[N]=K(R.size[N]),oe+=ae[N];ue=oe/D}else for($=K(R.size),N=0;N<D;N++)ae[N]=$;if(J)for(N=0;N<D;N++)ie[N]=R.line.width[N];else for($=R.line.width,N=0;N<D;N++)ie[N]=$;U.sizeAvg=ue}else U.size=K(R&&R.size||10),U.borderSizes=K(R.line.width);return U}function A(F,D){var R=F.marker,U={};return D&&(D.marker&&D.marker.symbol?U=g(t.extendFlat({},R,D.marker)):D.marker&&(D.marker.size&&(U.size=D.marker.size),D.marker.color&&(U.colors=D.marker.color),D.marker.opacity!==void 0&&(U.opacity=D.marker.opacity))),U}function b(F,D,R){var U={};if(!R)return U;if(R.textfont){var N={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:t.extendFlat({},D.textfont)};R.textfont&&t.extendFlat(N.textfont,R.textfont),U=y(F,N)}return U}function M(F,D,R){var U={capSize:D.width*2*R,lineWidth:D.thickness*R,color:D.color};return D.copy_ystyle&&(U=F.error_y),U}var w=o.SYMBOL_SDF_SIZE,T=o.SYMBOL_SIZE,_=o.SYMBOL_STROKE,h={},L=i.symbolFuncs[0](T*.05);function S(F){if(F==="circle")return null;var D,R,U=i.symbolNumber(F),N=i.symbolFuncs[U%100],X=!!i.symbolNoDot[U%100],j=!!i.symbolNoFill[U%100],ee=l.isDotSymbol(F);return h[F]?h[F]:(ee&&!X?D=N(T*1.1)+L:D=N(T),R=s(D,{w,h:w,viewBox:[-T,-T,T,T],stroke:j?_:-_}),h[F]=R,R||null)}function k(F,D,R){var U=R.length,N=U/2,X,j;if(n.hasLines(D)&&N)if(D.line.shape==="hv"){for(X=[],j=0;j<N-1;j++)isNaN(R[j*2])||isNaN(R[j*2+1])?X.push(NaN,NaN,NaN,NaN):(X.push(R[j*2],R[j*2+1]),!isNaN(R[j*2+2])&&!isNaN(R[j*2+3])?X.push(R[j*2+2],R[j*2+1]):X.push(NaN,NaN));X.push(R[U-2],R[U-1])}else if(D.line.shape==="hvh"){for(X=[],j=0;j<N-1;j++)if(isNaN(R[j*2])||isNaN(R[j*2+1])||isNaN(R[j*2+2])||isNaN(R[j*2+3]))!isNaN(R[j*2])&&!isNaN(R[j*2+1])?X.push(R[j*2],R[j*2+1]):X.push(NaN,NaN),X.push(NaN,NaN);else{var ee=(R[j*2]+R[j*2+2])/2;X.push(R[j*2],R[j*2+1],ee,R[j*2+1],ee,R[j*2+3])}X.push(R[U-2],R[U-1])}else if(D.line.shape==="vhv"){for(X=[],j=0;j<N-1;j++)if(isNaN(R[j*2])||isNaN(R[j*2+1])||isNaN(R[j*2+2])||isNaN(R[j*2+3]))!isNaN(R[j*2])&&!isNaN(R[j*2+1])?X.push(R[j*2],R[j*2+1]):X.push(NaN,NaN),X.push(NaN,NaN);else{var q=(R[j*2+1]+R[j*2+3])/2;X.push(R[j*2],R[j*2+1],R[j*2],q,R[j*2+2],q)}X.push(R[U-2],R[U-1])}else if(D.line.shape==="vh"){for(X=[],j=0;j<N-1;j++)isNaN(R[j*2])||isNaN(R[j*2+1])?X.push(NaN,NaN,NaN,NaN):(X.push(R[j*2],R[j*2+1]),!isNaN(R[j*2+2])&&!isNaN(R[j*2+3])?X.push(R[j*2],R[j*2+3]):X.push(NaN,NaN));X.push(R[U-2],R[U-1])}else X=R;var G=!1;for(j=0;j<X.length;j++)if(isNaN(X[j])){G=!0;break}var J=G||X.length>o.TOO_MANY_POINTS||n.hasMarkers(D)?"rect":"round";if(G&&D.connectgaps){var le=X[0],fe=X[1];for(j=0;j<X.length;j+=2)isNaN(X[j])||isNaN(X[j+1])?(X[j]=le,X[j+1]=fe):(le=X[j],fe=X[j+1])}return{join:J,positions:X}}function P(F,D,R,U,N){var X=x.getComponentMethod("errorbars","makeComputeError"),j=a.getFromId(F,D.xaxis),ee=a.getFromId(F,D.yaxis),q=R.length/2,G={};function J(le,fe){var se=fe._id.charAt(0),V=D["error_"+se];if(V&&V.visible&&(fe.type==="linear"||fe.type==="log")){for(var Y=X(V),ne={x:0,y:1}[se],te={x:[0,1,2,3],y:[2,3,0,1]}[se],K=new Float64Array(4*q),$=1/0,ae=-1/0,ie=0,oe=0;ie<q;ie++,oe+=4){var ue=le[ie];if(u(ue)){var xe=R[ie*2+ne],he=Y(ue,ie),me=he[0],be=he[1];if(u(me)&&u(be)){var Ce=ue-me,Se=ue+be;K[oe+te[0]]=xe-fe.c2l(Ce),K[oe+te[1]]=fe.c2l(Se)-xe,K[oe+te[2]]=0,K[oe+te[3]]=0,$=Math.min($,ue-me),ae=Math.max(ae,ue+be)}}}G[se]={positions:R,errors:K,_bnds:[$,ae]}}}return J(U,j),J(N,ee),G}function O(F,D,R,U){var N=D._length,X={},j;if(n.hasMarkers(D)){var ee=R.font,q=R.align,G=R.baseline;for(X.offset=new Array(N),j=0;j<N;j++){var J=U.sizes?U.sizes[j]:U.size,le=Array.isArray(ee)?ee[j].size:ee.size,fe=Array.isArray(q)?q.length>1?q[j]:q[0]:q,se=Array.isArray(G)?G.length>1?G[j]:G[0]:G,V=v[fe],Y=v[se],ne=J?J/.8+1:0,te=-Y*ne-Y*.5;X.offset[j]=[V*ne/le,te/le]}}return X}I.exports={style:p,markerStyle:g,markerSelection:A,linePositions:k,errorBarPositions:P,textPosition:O}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"./constants":980,"./helpers":985,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],982:[function(e,I,B){var u=e("../../lib"),s=e("../../registry"),m=e("./helpers"),x=e("./attributes"),t=e("../scatter/constants"),i=e("../scatter/subtypes"),a=e("../scatter/xy_defaults"),r=e("../scatter/period_defaults"),n=e("../scatter/marker_defaults"),f=e("../scatter/line_defaults"),l=e("../scatter/fillcolor_defaults"),o=e("../scatter/text_defaults");I.exports=function(v,d,p,y){function g(L,S){return u.coerce(v,d,x,L,S)}var A=v.marker?m.isOpenSymbol(v.marker.symbol):!1,b=i.isBubble(v),M=a(v,d,y,g);if(!M){d.visible=!1;return}r(v,d,y,g),g("xhoverformat"),g("yhoverformat");var w=M<t.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("hovertemplate"),g("mode",w),i.hasLines(d)&&(g("connectgaps"),f(v,d,p,y,g),g("line.shape")),i.hasMarkers(d)&&(n(v,d,p,y,g),g("marker.line.width",A||b?1:0)),i.hasText(d)&&(g("texttemplate"),o(v,d,y,g));var T=(d.line||{}).color,_=(d.marker||{}).color;g("fill"),d.fill!=="none"&&l(v,d,p,g);var h=s.getComponentMethod("errorbars","supplyDefaults");h(v,d,T||_||p,{axis:"y"}),h(v,d,T||_||p,{axis:"x",inherit:"y"}),u.coerceSelectionMarkerOpacity(d,g)}},{"../../lib":503,"../../registry":638,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/period_defaults":946,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatter/xy_defaults":953,"./attributes":978,"./helpers":985}],983:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color"),m=e("../../constants/interactions").DESELECTDIM;function x(t){var i=t[0],a=i.trace,r=i.t,n=r._scene,f=r.index,l=n.selectBatch[f],o=n.unselectBatch[f],c=n.textOptions[f],v=n.textSelectedOptions[f]||{},d=n.textUnselectedOptions[f]||{},p=u.extendFlat({},c),y,g;if(l.length||o.length){var A=v.color,b=d.color,M=c.color,w=Array.isArray(M);for(p.color=new Array(a._length),y=0;y<l.length;y++)g=l[y],p.color[g]=A||(w?M[g]:M);for(y=0;y<o.length;y++){g=o[y];var T=w?M[g]:M;p.color[g]=b||(A?T:s.addOpacity(T,m))}}n.glText[f].update(p)}I.exports={styleTextSelection:x}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],984:[function(e,I,B){var u=e("../scatter/format_labels");I.exports=function(m,x,t){var i=m.i;return"x"in m||(m.x=x._x[i]),"y"in m||(m.y=x._y[i]),u(m,x,t)}},{"../scatter/format_labels":935}],985:[function(e,I,B){var u=e("./constants");B.isOpenSymbol=function(s){return typeof s=="string"?u.OPEN_RE.test(s):s%200>100},B.isDotSymbol=function(s){return typeof s=="string"?u.DOT_RE.test(s):s>200}},{"./constants":980}],986:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("../scatter/get_trace_color");function x(i,a,r,n){var f=i.cd,l=f[0].t,o=f[0].trace,c=i.xa,v=i.ya,d=l.x,p=l.y,y=c.c2p(a),g=v.c2p(r),A=i.distance,b;if(l.tree){var M=c.p2c(y-A),w=c.p2c(y+A),T=v.p2c(g-A),_=v.p2c(g+A);n==="x"?b=l.tree.range(Math.min(M,w),Math.min(v._rl[0],v._rl[1]),Math.max(M,w),Math.max(v._rl[0],v._rl[1])):b=l.tree.range(Math.min(M,w),Math.min(T,_),Math.max(M,w),Math.max(T,_))}else b=l.ids;var h,L,S,k,P,O,F,D,R,U=A;if(n==="x"){var N=!!o.xperiodalignment,X=!!o.yperiodalignment;for(P=0;P<b.length;P++){if(h=b[P],S=d[h],O=Math.abs(c.c2p(S)-y),N){var j=c.c2p(o._xStarts[h]),ee=c.c2p(o._xEnds[h]);O=y>=Math.min(j,ee)&&y<=Math.max(j,ee)?0:1/0}if(O<U){if(U=O,k=p[h],F=v.c2p(k)-g,X){var q=v.c2p(o._yStarts[h]),G=v.c2p(o._yEnds[h]);F=g>=Math.min(q,G)&&g<=Math.max(q,G)?0:1/0}R=Math.sqrt(O*O+F*F),L=b[P]}}}else for(P=b.length-1;P>-1;P--)h=b[P],S=d[h],k=p[h],O=c.c2p(S)-y,F=v.c2p(k)-g,D=Math.sqrt(O*O+F*F),D<U&&(U=R=D,L=h);return i.index=L,i.distance=U,i.dxy=R,L===void 0?[i]:[t(i,d,p,o)]}function t(i,a,r,n){var f=i.xa,l=i.ya,o=i.distance,c=i.dxy,v=i.index,d={pointNumber:v,x:a[v],y:r[v]};d.tx=Array.isArray(n.text)?n.text[v]:n.text,d.htx=Array.isArray(n.hovertext)?n.hovertext[v]:n.hovertext,d.data=Array.isArray(n.customdata)?n.customdata[v]:n.customdata,d.tp=Array.isArray(n.textposition)?n.textposition[v]:n.textposition;var p=n.textfont;p&&(d.ts=s.isArrayOrTypedArray(p.size)?p.size[v]:p.size,d.tc=Array.isArray(p.color)?p.color[v]:p.color,d.tf=Array.isArray(p.family)?p.family[v]:p.family);var y=n.marker;y&&(d.ms=s.isArrayOrTypedArray(y.size)?y.size[v]:y.size,d.mo=s.isArrayOrTypedArray(y.opacity)?y.opacity[v]:y.opacity,d.mx=s.isArrayOrTypedArray(y.symbol)?y.symbol[v]:y.symbol,d.mc=s.isArrayOrTypedArray(y.color)?y.color[v]:y.color);var g=y&&y.line;g&&(d.mlc=Array.isArray(g.color)?g.color[v]:g.color,d.mlw=s.isArrayOrTypedArray(g.width)?g.width[v]:g.width);var A=y&&y.gradient;A&&A.type!=="none"&&(d.mgt=Array.isArray(A.type)?A.type[v]:A.type,d.mgc=Array.isArray(A.color)?A.color[v]:A.color);var b=f.c2p(d.x,!0),M=l.c2p(d.y,!0),w=d.mrc||1,T=n.hoverlabel;T&&(d.hbg=Array.isArray(T.bgcolor)?T.bgcolor[v]:T.bgcolor,d.hbc=Array.isArray(T.bordercolor)?T.bordercolor[v]:T.bordercolor,d.hts=s.isArrayOrTypedArray(T.font.size)?T.font.size[v]:T.font.size,d.htc=Array.isArray(T.font.color)?T.font.color[v]:T.font.color,d.htf=Array.isArray(T.font.family)?T.font.family[v]:T.font.family,d.hnl=s.isArrayOrTypedArray(T.namelength)?T.namelength[v]:T.namelength);var _=n.hoverinfo;_&&(d.hi=Array.isArray(_)?_[v]:_);var h=n.hovertemplate;h&&(d.ht=Array.isArray(h)?h[v]:h);var L={};L[i.index]=d;var S=n._origX,k=n._origY,P=s.extendFlat({},i,{color:m(n,d),x0:b-w,x1:b+w,xLabelVal:S?S[v]:d.x,y0:M-w,y1:M+w,yLabelVal:k?k[v]:d.y,cd:L,distance:o,spikeDistance:c,hovertemplate:d.ht});return d.htx?P.text=d.htx:d.tx?P.text=d.tx:n.text&&(P.text=n.text),s.fillText(d,n,P),u.getComponentMethod("errorbars","hoverInfo")(d,n,P),P}I.exports={hoverPoints:x,calcHover:t}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":936}],987:[function(e,I,B){var u=e("./hover");I.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../scatter/cross_trace_defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:u.hoverPoints,selectPoints:e("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":932,"../scatter/marker_colorbar":944,"./attributes":978,"./calc":979,"./defaults":982,"./format_labels":984,"./hover":986,"./plot":988,"./select":990}],988:[function(e,I,B){var u=e("regl-scatter2d"),s=e("regl-line2d"),m=e("regl-error2d"),x=e("gl-text"),t=e("../../lib"),i=e("../../components/dragelement/helpers").selectMode,a=e("../../lib/prepare_regl"),r=e("../scatter/subtypes"),n=e("../scatter/link_traces"),f=e("./edit_style").styleTextSelection;function l(o,c,v,d){var p=o._size,y=o.width*d,g=o.height*d,A=p.l*d,b=p.b*d,M=p.r*d,w=p.t*d,T=p.w*d,_=p.h*d;return[A+c.domain[0]*T,b+v.domain[0]*_,y-M-(1-c.domain[1])*T,g-w-(1-v.domain[1])*_]}I.exports=function(c,v,d){if(!!d.length){var p=c._fullLayout,y=v._scene,g=v.xaxis,A=v.yaxis,b,M;if(!!y){var w=a(c,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!w){y.init();return}var T=y.count,_=p._glcanvas.data()[0].regl;if(n(c,v,d),y.dirty){if(y.error2d===!0&&(y.error2d=m(_)),y.line2d===!0&&(y.line2d=s(_)),y.scatter2d===!0&&(y.scatter2d=u(_)),y.fill2d===!0&&(y.fill2d=s(_)),y.glText===!0)for(y.glText=new Array(T),b=0;b<T;b++)y.glText[b]=new x(_);if(y.glText){if(T>y.glText.length){var h=T-y.glText.length;for(b=0;b<h;b++)y.glText.push(new x(_))}else if(T<y.glText.length){var L=y.glText.length-T,S=y.glText.splice(T,L);S.forEach(function(ne){ne.destroy()})}for(b=0;b<T;b++)y.glText[b].update(y.textOptions[b])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map(function(ne){if(ne&&ne.positions){for(var te=ne.positions,K=0;K<te.length&&(isNaN(te[K])||isNaN(te[K+1]));)K+=2;for(var $=te.length-2;$>K&&(isNaN(te[$])||isNaN(te[$+1]));)$-=2;ne.positions=te.slice(K,$+2)}return ne}),y.line2d.update(y.lineOptions)),y.error2d){var k=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(k)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=t.repeat(null,T),y.fill2d&&(y.fillOptions=y.fillOptions.map(function(ne,te){var K=d[te];if(!(!ne||!K||!K[0]||!K[0].trace)){var $=K[0],ae=$.trace,ie=$.t,oe=y.lineOptions[te],ue,xe,he=[];ae._ownfill&&he.push(te),ae._nexttrace&&he.push(te+1),he.length&&(y.fillOrder[te]=he);var me=[],be=oe&&oe.positions||ie.positions,Ce,Se;if(ae.fill==="tozeroy"){for(Ce=0;Ce<be.length&&isNaN(be[Ce+1]);)Ce+=2;for(Se=be.length-2;Se>Ce&&isNaN(be[Se+1]);)Se-=2;be[Ce+1]!==0&&(me=[be[Ce],0]),me=me.concat(be.slice(Ce,Se+2)),be[Se+1]!==0&&(me=me.concat([be[Se],0]))}else if(ae.fill==="tozerox"){for(Ce=0;Ce<be.length&&isNaN(be[Ce]);)Ce+=2;for(Se=be.length-2;Se>Ce&&isNaN(be[Se]);)Se-=2;be[Ce]!==0&&(me=[0,be[Ce+1]]),me=me.concat(be.slice(Ce,Se+2)),be[Se]!==0&&(me=me.concat([0,be[Se+1]]))}else if(ae.fill==="toself"||ae.fill==="tonext"){for(me=[],ue=0,ne.splitNull=!0,xe=0;xe<be.length;xe+=2)(isNaN(be[xe])||isNaN(be[xe+1]))&&(me=me.concat(be.slice(ue,xe)),me.push(be[ue],be[ue+1]),me.push(null,null),ue=xe+2);me=me.concat(be.slice(ue)),ue&&me.push(be[ue],be[ue+1])}else{var Be=ae._nexttrace;if(Be){var Ye=y.lineOptions[te+1];if(Ye){var Xe=Ye.positions;if(ae.fill==="tonexty"){for(me=be.slice(),te=Math.floor(Xe.length/2);te--;){var Te=Xe[te*2],Ie=Xe[te*2+1];isNaN(Te)||isNaN(Ie)||me.push(Te,Ie)}ne.fill=Be.fillcolor}}}}if(ae._prevtrace&&ae._prevtrace.fill==="tonext"){var Ze=y.lineOptions[te-1].positions,rt=me.length/2;ue=rt;var Ge=[ue];for(xe=0;xe<Ze.length;xe+=2)(isNaN(Ze[xe])||isNaN(Ze[xe+1]))&&(Ge.push(xe/2+rt+1),ue=xe+2);me=me.concat(Ze),ne.hole=Ge}return ne.fillmode=ae.fill,ne.opacity=ae.opacity,ne.positions=me,ne}}),y.fill2d.update(y.fillOptions))}var P=p.dragmode,O=i(P),F=p.clickmode.indexOf("select")>-1;for(b=0;b<T;b++){var D=d[b][0],R=D.trace,U=D.t,N=U.index,X=R._length,j=U.x,ee=U.y;if(R.selectedpoints||O||F){if(O||(O=!0),R.selectedpoints){var q=y.selectBatch[N]=t.selIndices2selPoints(R),G={};for(M=0;M<q.length;M++)G[q[M]]=1;var J=[];for(M=0;M<X;M++)G[M]||J.push(M);y.unselectBatch[N]=J}var le=U.xpx=new Array(X),fe=U.ypx=new Array(X);for(M=0;M<X;M++)le[M]=g.c2p(j[M]),fe[M]=A.c2p(ee[M])}else U.xpx=U.ypx=null}if(O){if(y.select2d||(y.select2d=u(p._glcanvas.data()[1].regl)),y.scatter2d){var se=new Array(T);for(b=0;b<T;b++)se[b]=y.selectBatch[b].length||y.unselectBatch[b].length?y.markerUnselectedOptions[b]:{};y.scatter2d.update(se)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&d.forEach(function(ne){var te=((ne||[])[0]||{}).trace||{};r.hasText(te)&&f(ne)})}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var V={viewport:l(p,g,A,c._context.plotGlPixelRatio),range:[(g._rl||g.range)[0],(A._rl||A.range)[0],(g._rl||g.range)[1],(A._rl||A.range)[1]]},Y=t.repeat(V,y.count);y.fill2d&&y.fill2d.update(Y),y.line2d&&y.line2d.update(Y),y.error2d&&y.error2d.update(Y.concat(Y)),y.scatter2d&&y.scatter2d.update(Y),y.select2d&&y.select2d.update(Y),y.glText&&y.glText.forEach(function(ne){ne.update(V)})}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":942,"../scatter/subtypes":951,"./edit_style":983,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],989:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x){var t=x._scene,i={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return x._scene||(t=x._scene={},t.init=function(){u.extendFlat(t,a,i)},t.init(),t.update=function(n){var f=u.repeat(n,t.count);if(t.fill2d&&t.fill2d.update(f),t.scatter2d&&t.scatter2d.update(f),t.line2d&&t.line2d.update(f),t.error2d&&t.error2d.update(f.concat(f)),t.select2d&&t.select2d.update(f),t.glText)for(var l=0;l<t.count;l++)t.glText[l].update(n)},t.draw=function(){for(var n=t.count,f=t.fill2d,l=t.error2d,o=t.line2d,c=t.scatter2d,v=t.glText,d=t.select2d,p=t.selectBatch,y=t.unselectBatch,g=0;g<n;g++){if(f&&t.fillOrder[g]&&f.draw(t.fillOrder[g]),o&&t.lineOptions[g]&&o.draw(g),l&&(t.errorXOptions[g]&&l.draw(g),t.errorYOptions[g]&&l.draw(g+n)),c&&t.markerOptions[g])if(y[g].length){var A=u.repeat([],t.count);A[g]=y[g],c.draw(A)}else p[g].length||c.draw(g);v[g]&&t.textOptions[g]&&v[g].render()}d&&d.draw(p),t.dirty=!1},t.destroy=function(){t.fill2d&&t.fill2d.destroy&&t.fill2d.destroy(),t.scatter2d&&t.scatter2d.destroy&&t.scatter2d.destroy(),t.error2d&&t.error2d.destroy&&t.error2d.destroy(),t.line2d&&t.line2d.destroy&&t.line2d.destroy(),t.select2d&&t.select2d.destroy&&t.select2d.destroy(),t.glText&&t.glText.forEach(function(n){n.destroy&&n.destroy()}),t.lineOptions=null,t.fillOptions=null,t.markerOptions=null,t.markerSelectedOptions=null,t.markerUnselectedOptions=null,t.errorXOptions=null,t.errorYOptions=null,t.textOptions=null,t.textSelectedOptions=null,t.textUnselectedOptions=null,t.selectBatch=null,t.unselectBatch=null,x._scene=null}),t.dirty||u.extendFlat(t,i),t}},{"../../lib":503}],990:[function(e,I,B){var u=e("../scatter/subtypes"),s=e("./edit_style").styleTextSelection;I.exports=function(x,t){var i=x.cd,a=x.xaxis,r=x.yaxis,n=[],f=i[0].trace,l=i[0].t,o=f._length,c=l.x,v=l.y,d=l._scene,p=l.index;if(!d)return n;var y=u.hasText(f),g=u.hasMarkers(f),A=!g&&!y;if(f.visible!==!0||A)return n;var b=[],M=[];if(t!==!1&&!t.degenerate)for(var w=0;w<o;w++)t.contains([l.xpx[w],l.ypx[w]],!1,w,x)?(b.push(w),n.push({pointNumber:w,x:a.c2d(c[w]),y:r.c2d(v[w])})):M.push(w);if(g){var T=d.scatter2d;if(!b.length&&!M.length){var _=new Array(d.count);_[p]=d.markerOptions[p],T.update.apply(T,_)}else if(!d.selectBatch[p].length&&!d.unselectBatch[p].length){var h=new Array(d.count);h[p]=d.markerUnselectedOptions[p],T.update.apply(T,h)}}return d.selectBatch[p]=b,d.unselectBatch[p]=M,y&&s(i),n}},{"../scatter/subtypes":951,"./edit_style":983}],991:[function(e,I,B){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../scattergeo/attributes"),x=e("../scatter/attributes"),t=e("../../plots/mapbox/layout_attributes"),i=e("../../plots/attributes"),a=e("../../components/colorscale/attributes"),r=e("../../lib/extend").extendFlat,n=e("../../plot_api/edit_types").overrideAll,f=m.line,l=m.marker;I.exports=n({lon:m.lon,lat:m.lat,mode:r({},x.mode,{dflt:"markers"}),text:r({},x.text,{}),texttemplate:s({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:r({},x.hovertext,{}),line:{color:f.color,width:f.width},connectgaps:x.connectgaps,marker:r({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},a("marker")),fill:m.fill,fillcolor:x.fillcolor,textfont:t.layers.symbol.textfont,textposition:t.layers.symbol.textposition,below:{valType:"string"},selected:{marker:x.selected.marker},unselected:{marker:x.unselected.marker},hoverinfo:r({},i.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:u()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergeo/attributes":968}],992:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../constants/numerical").BADNUM,x=e("../../lib/geojson_utils"),t=e("../../components/colorscale"),i=e("../../components/drawing"),a=e("../scatter/make_bubble_size_func"),r=e("../scatter/subtypes"),n=e("../../plots/mapbox/convert_text_opts"),f=e("../../components/fx/helpers").appendArrayPointValue,l=e("../../lib/svg_text_utils").NEWLINES,o=e("../../lib/svg_text_utils").BR_TAG_ALL;I.exports=function(b,M){var w=M[0].trace,T=w.visible===!0&&w._length!==0,_=w.fill!=="none",h=r.hasLines(w),L=r.hasMarkers(w),S=r.hasText(w),k=L&&w.marker.symbol==="circle",P=L&&w.marker.symbol!=="circle",O=c(),F=c(),D=c(),R=c(),U={fill:O,line:F,circle:D,symbol:R};if(!T)return U;var N;if((_||h)&&(N=x.calcTraceToLineCoords(M)),_&&(O.geojson=x.makePolygon(N),O.layout.visibility="visible",s.extendFlat(O.paint,{"fill-color":w.fillcolor})),h&&(F.geojson=x.makeLine(N),F.layout.visibility="visible",s.extendFlat(F.paint,{"line-width":w.line.width,"line-color":w.line.color,"line-opacity":w.opacity})),k){var X=v(M);D.geojson=X.geojson,D.layout.visibility="visible",s.extendFlat(D.paint,{"circle-color":X.mcc,"circle-radius":X.mrc,"circle-opacity":X.mo})}if((P||S)&&(R.geojson=d(M,b),s.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(s.extendFlat(R.layout,{"icon-size":w.marker.size/10}),"angle"in w.marker&&w.marker.angle!=="auto"&&s.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=w.marker.allowoverlap,s.extendFlat(R.paint,{"icon-opacity":w.opacity*w.marker.opacity,"icon-color":w.marker.color})),S)){var j=(w.marker||{}).size,ee=n(w.textposition,j);s.extendFlat(R.layout,{"text-size":w.textfont.size,"text-anchor":ee.anchor,"text-offset":ee.offset}),s.extendFlat(R.paint,{"text-color":w.textfont.color,"text-opacity":w.opacity})}return U};function c(){return{geojson:x.makeBlank(),layout:{visibility:"none"},paint:{}}}function v(A){var b=A[0].trace,M=b.marker,w=b.selectedpoints,T=s.isArrayOrTypedArray(M.color),_=s.isArrayOrTypedArray(M.size),h=s.isArrayOrTypedArray(M.opacity),L;function S(ee){return b.opacity*ee}function k(ee){return ee/2}var P;T&&(t.hasColorscale(b,"marker")?P=t.makeColorScaleFuncFromTrace(M):P=s.identity);var O;_&&(O=a(b));var F;h&&(F=function(ee){var q=u(ee)?+s.constrain(ee,0,1):0;return S(q)});var D=[];for(L=0;L<A.length;L++){var R=A[L],U=R.lonlat;if(!g(U)){var N={};P&&(N.mcc=R.mcc=P(R.mc)),O&&(N.mrc=R.mrc=O(R.ms)),F&&(N.mo=F(R.mo)),w&&(N.selected=R.selected||0),D.push({type:"Feature",geometry:{type:"Point",coordinates:U},properties:N})}}var X;if(w)for(X=i.makeSelectedPointStyleFns(b),L=0;L<D.length;L++){var j=D[L].properties;X.selectedOpacityFn&&(j.mo=S(X.selectedOpacityFn(j))),X.selectedColorFn&&(j.mcc=X.selectedColorFn(j)),X.selectedSizeFn&&(j.mrc=X.selectedSizeFn(j))}return{geojson:{type:"FeatureCollection",features:D},mcc:T||X&&X.selectedColorFn?{type:"identity",property:"mcc"}:M.color,mrc:_||X&&X.selectedSizeFn?{type:"identity",property:"mrc"}:k(M.size),mo:h||X&&X.selectedOpacityFn?{type:"identity",property:"mo"}:S(M.opacity)}}function d(A,b){for(var M=b._fullLayout,w=A[0].trace,T=w.marker||{},_=T.symbol,h=T.angle,L=_!=="circle"?p(_):y,S=h!=="auto"?p(h,!0):y,k=r.hasText(w)?p(w.text):y,P=[],O=0;O<A.length;O++){var F=A[O];if(!g(F.lonlat)){var D=w.texttemplate,R;if(D){var U=Array.isArray(D)?D[O]||"":D,N=w._module.formatLabels(F,w,M),X={};f(X,w,F.i);var j=w._meta||{};R=s.texttemplateString(U,N,M._d3locale,X,F,j)}else R=k(O);R&&(R=R.replace(l,"").replace(o,`
`)),P.push({type:"Feature",geometry:{type:"Point",coordinates:F.lonlat},properties:{symbol:L(O),angle:S(O),text:R}})}}return{type:"FeatureCollection",features:P}}function p(A,b){return s.isArrayOrTypedArray(A)?b?function(M){return u(A[M])?+A[M]:0}:function(M){return A[M]}:A?function(){return A}:y}function y(){return""}function g(A){return A[0]===m}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"fast-isnumeric":190}],993:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),a=e("./attributes");I.exports=function(f,l,o,c){function v(y,g){return u.coerce(f,l,a,y,g)}var d=r(f,l,v);if(!d){l.visible=!1;return}if(v("text"),v("texttemplate"),v("hovertext"),v("hovertemplate"),v("mode"),v("below"),s.hasLines(l)&&(x(f,l,o,c,v,{noDash:!0}),v("connectgaps")),s.hasMarkers(l)){m(f,l,o,c,v,{noLine:!0}),v("marker.allowoverlap"),v("marker.angle");var p=l.marker;p.symbol!=="circle"&&(u.isArrayOrTypedArray(p.size)&&(p.size=p.size[0]),u.isArrayOrTypedArray(p.color)&&(p.color=p.color[0]))}s.hasText(l)&&t(f,l,c,v,{noSelect:!0}),v("fill"),l.fill!=="none"&&i(f,l,o,v),u.coerceSelectionMarkerOpacity(l,v)};function r(n,f,l){var o=l("lon")||[],c=l("lat")||[],v=Math.min(o.length,c.length);return f._length=v,v}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":991}],994:[function(e,I,B){I.exports=function(s,m){return s.lon=m.lon,s.lat=m.lat,s}},{}],995:[function(e,I,B){var u=e("../../plots/cartesian/axes");I.exports=function(m,x,t){var i={},a=t[x.subplot]._subplot,r=a.mockAxis,n=m.lonlat;return i.lonLabel=u.tickText(r,r.c2l(n[0]),!0).text,i.latLabel=u.tickText(r,r.c2l(n[1]),!0).text,i}},{"../../plots/cartesian/axes":554}],996:[function(e,I,B){var u=e("../../components/fx"),s=e("../../lib"),m=e("../scatter/get_trace_color"),x=s.fillText,t=e("../../constants/numerical").BADNUM;function i(r,n,f){var l=r.cd,o=l[0].trace,c=r.xa,v=r.ya,d=r.subplot,p=n>=0?Math.floor((n+180)/360):Math.ceil((n-180)/360),y=p*360,g=n-y;function A(k){var P=k.lonlat;if(P[0]===t)return 1/0;var O=s.modHalf(P[0],360),F=P[1],D=d.project([O,F]),R=D.x-c.c2p([g,F]),U=D.y-v.c2p([O,f]),N=Math.max(3,k.mrc||0);return Math.max(Math.sqrt(R*R+U*U)-N,1-3/N)}if(u.getClosest(l,A,r),r.index!==!1){var b=l[r.index],M=b.lonlat,w=[s.modHalf(M[0],360)+y,M[1]],T=c.c2p(w),_=v.c2p(w),h=b.mrc||1;r.x0=T-h,r.x1=T+h,r.y0=_-h,r.y1=_+h;var L={};L[o.subplot]={_subplot:d};var S=o._module.formatLabels(b,o,L);return r.lonLabel=S.lonLabel,r.latLabel=S.latLabel,r.color=m(o,b),r.extraText=a(o,b,l[0].t.labels),r.hovertemplate=o.hovertemplate,[r]}}function a(r,n,f){if(r.hovertemplate)return;var l=n.hi||r.hoverinfo,o=l.split("+"),c=o.indexOf("all")!==-1,v=o.indexOf("lon")!==-1,d=o.indexOf("lat")!==-1,p=n.lonlat,y=[];function g(A){return A+"\xB0"}return c||v&&d?y.push("("+g(p[1])+", "+g(p[0])+")"):v?y.push(f.lon+g(p[0])):d&&y.push(f.lat+g(p[1])),(c||o.indexOf("text")!==-1)&&x(n,r,y),y.join("<br>")}I.exports={hoverPoints:i,getExtraText:a}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936}],997:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("../scattergeo/calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),styleOnSelect:function(u,s){if(s){var m=s[0].trace;m._glTrace.update(s)}},moduleType:"trace",name:"scattermapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":944,"../scattergeo/calc":969,"./attributes":991,"./defaults":993,"./event_data":994,"./format_labels":995,"./hover":996,"./plot":998,"./select":999}],998:[function(e,I,B){var u=e("./convert"),s=e("../../plots/mapbox/constants").traceLayerPrefix,m=["fill","line","circle","symbol"];function x(i,a){this.type="scattermapbox",this.subplot=i,this.uid=a,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol"},this.layerIds={fill:s+a+"-fill",line:s+a+"-line",circle:s+a+"-circle",symbol:s+a+"-symbol"},this.below=null}var t=x.prototype;t.addSource=function(i,a){this.subplot.map.addSource(this.sourceIds[i],{type:"geojson",data:a.geojson})},t.setSourceData=function(i,a){this.subplot.map.getSource(this.sourceIds[i]).setData(a.geojson)},t.addLayer=function(i,a,r){this.subplot.addLayer({type:i,id:this.layerIds[i],source:this.sourceIds[i],layout:a.layout,paint:a.paint},r)},t.update=function(a){var r=this.subplot,n=r.map,f=u(r.gd,a),l=r.belowLookup["trace-"+this.uid],o,c,v;if(l!==this.below){for(o=m.length-1;o>=0;o--)c=m[o],n.removeLayer(this.layerIds[c]);for(o=0;o<m.length;o++)c=m[o],v=f[c],this.addLayer(c,v,l);this.below=l}for(o=0;o<m.length;o++)c=m[o],v=f[c],r.setOptions(this.layerIds[c],"setLayoutProperty",v.layout),v.layout.visibility==="visible"&&(this.setSourceData(c,v),r.setOptions(this.layerIds[c],"setPaintProperty",v.paint));a[0].trace._glTrace=this},t.dispose=function(){for(var a=this.subplot.map,r=m.length-1;r>=0;r--){var n=m[r];a.removeLayer(this.layerIds[n]),a.removeSource(this.sourceIds[n])}},I.exports=function(a,r){for(var n=r[0].trace,f=new x(a,n.uid),l=u(a.gd,r),o=f.below=a.belowLookup["trace-"+n.uid],c=0;c<m.length;c++){var v=m[c],d=l[v];f.addSource(v,d),f.addLayer(v,d,o)}return r[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":992}],999:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../../constants/numerical").BADNUM;I.exports=function(t,i){var a=t.cd,r=t.xaxis,n=t.yaxis,f=[],l=a[0].trace,o;if(!s.hasMarkers(l))return[];if(i===!1)for(o=0;o<a.length;o++)a[o].selected=0;else for(o=0;o<a.length;o++){var c=a[o],v=c.lonlat;if(v[0]!==m){var d=[u.modHalf(v[0],360),v[1]],p=[r.c2p(d),n.c2p(d)];i.contains(p,null,o,t)?(f.push({pointNumber:o,lon:v[0],lat:v[1]}),c.selected=1):c.selected=0}}return f}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":951}],1e3:[function(e,I,B){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../lib/extend").extendFlat,x=e("../scatter/attributes"),t=e("../../plots/attributes"),i=x.line;I.exports={mode:x.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:s({editType:"plot"},{keys:["r","theta","text"]}),hovertext:x.hovertext,line:{color:i.color,width:i.width,dash:i.dash,shape:m({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:m({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:m({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:m({},t.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:x.hoveron,hovertemplate:u(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1001:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../constants/numerical").BADNUM,m=e("../../plots/cartesian/axes"),x=e("../scatter/colorscale_calc"),t=e("../scatter/arrays_to_calcdata"),i=e("../scatter/calc_selection"),a=e("../scatter/calc").calcMarkerSize;I.exports=function(n,f){for(var l=n._fullLayout,o=f.subplot,c=l[o].radialaxis,v=l[o].angularaxis,d=c.makeCalcdata(f,"r"),p=v.makeCalcdata(f,"theta"),y=f._length,g=new Array(y),A=0;A<y;A++){var b=d[A],M=p[A],w=g[A]={};u(b)&&u(M)?(w.r=b,w.theta=M):w.r=s}var T=a(f,y);return f._extremes.x=m.findExtremes(c,d,{ppad:T}),x(n,f),t(g,f),i(g,f),g}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1002:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),i=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),r=e("../scatter/constants").PTS_LINESONLY,n=e("./attributes");function f(o,c,v,d){function p(A,b){return u.coerce(o,c,n,A,b)}var y=l(o,c,d,p);if(!y){c.visible=!1;return}p("thetaunit"),p("mode",y<r?"lines+markers":"lines"),p("text"),p("hovertext"),c.hoveron!=="fills"&&p("hovertemplate"),s.hasLines(c)&&(x(o,c,v,d,p),t(o,c,p),p("connectgaps")),s.hasMarkers(c)&&m(o,c,v,d,p,{gradient:!0}),s.hasText(c)&&(p("texttemplate"),i(o,c,d,p));var g=[];(s.hasMarkers(c)||s.hasText(c))&&(p("cliponaxis"),p("marker.maxdisplayed"),g.push("points")),p("fill"),c.fill!=="none"&&(a(o,c,v,p),s.hasLines(c)||t(o,c,p)),(c.fill==="tonext"||c.fill==="toself")&&g.push("fills"),p("hoveron",g.join("+")||"points"),u.coerceSelectionMarkerOpacity(c,p)}function l(o,c,v,d){var p=d("r"),y=d("theta"),g;if(p)y?g=Math.min(p.length,y.length):(g=p.length,d("theta0"),d("dtheta"));else{if(!y)return 0;g=c.theta.length,d("r0"),d("dr")}return c._length=g,g}I.exports={handleRThetaDefaults:l,supplyDefaults:f}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1e3}],1003:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes");I.exports=function(x,t,i){var a={},r=i[t.subplot]._subplot,n,f;r?(n=r.radialAxis,f=r.angularAxis):(r=i[t.subplot],n=r.radialaxis,f=r.angularaxis);var l=n.c2l(x.r);a.rLabel=s.tickText(n,l,!0).text;var o=f.thetaunit==="degrees"?u.rad2deg(x.theta):x.theta;return a.thetaLabel=s.tickText(f,o,!0).text,a}},{"../../lib":503,"../../plots/cartesian/axes":554}],1004:[function(e,I,B){var u=e("../scatter/hover");function s(x,t,i,a){var r=u(x,t,i,a);if(!(!r||r[0].index===!1)){var n=r[0];if(n.index===void 0)return r;var f=x.subplot,l=n.cd[n.index],o=n.trace;if(!!f.isPtInside(l))return n.xLabelVal=void 0,n.yLabelVal=void 0,m(l,o,f,n),n.hovertemplate=o.hovertemplate,r}}function m(x,t,i,a){var r=i.radialAxis,n=i.angularAxis;r._hovertitle="r",n._hovertitle="\u03B8";var f={};f[t.subplot]={_subplot:i};var l=t._module.formatLabels(x,t,f);a.rLabel=l.rLabel,a.thetaLabel=l.thetaLabel;var o=x.hi||t.hoverinfo,c=[];function v(p,y){c.push(p._hovertitle+": "+y)}if(!t.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["r","theta","text"]),d.indexOf("r")!==-1&&v(r,a.rLabel),d.indexOf("theta")!==-1&&v(n,a.thetaLabel),d.indexOf("text")!==-1&&a.text&&(c.push(a.text),delete a.text),a.extraText=c.join("<br>")}}I.exports={hoverPoints:s,makeHoverPointText:m}},{"../scatter/hover":937}],1005:[function(e,I,B){I.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1e3,"./calc":1001,"./defaults":1002,"./format_labels":1003,"./hover":1004,"./plot":1006}],1006:[function(e,I,B){var u=e("../scatter/plot"),s=e("../../constants/numerical").BADNUM;I.exports=function(x,t,i){for(var a=t.layers.frontplot.select("g.scatterlayer"),r={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},n=t.radialAxis,f=t.angularAxis,l=0;l<i.length;l++)for(var o=i[l],c=0;c<o.length;c++){var v=o[c],d=v.r;if(d===s)v.x=v.y=s;else{var p=n.c2g(d),y=f.c2g(v.theta);v.x=p*Math.cos(y),v.y=p*Math.sin(y)}}u(x,r,i,a)}},{"../../constants/numerical":479,"../scatter/plot":947}],1007:[function(e,I,B){var u=e("../scatterpolar/attributes"),s=e("../scattergl/attributes"),m=e("../../plots/template_attributes").texttemplateAttrs;I.exports={mode:u.mode,r:u.r,theta:u.theta,r0:u.r0,dr:u.dr,theta0:u.theta0,dtheta:u.dtheta,thetaunit:u.thetaunit,text:u.text,texttemplate:m({editType:"plot"},{keys:["r","theta","text"]}),hovertext:u.hovertext,hovertemplate:u.hovertemplate,line:s.line,connectgaps:s.connectgaps,marker:s.marker,fill:s.fill,fillcolor:s.fillcolor,textposition:s.textposition,textfont:s.textfont,hoverinfo:u.hoverinfo,selected:u.selected,unselected:u.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":978,"../scatterpolar/attributes":1e3}],1008:[function(e,I,B){var u=e("../scatter/colorscale_calc"),s=e("../scatter/calc").calcMarkerSize,m=e("../scattergl/convert"),x=e("../../plots/cartesian/axes"),t=e("../scattergl/constants").TOO_MANY_POINTS;I.exports=function(a,r){var n=a._fullLayout,f=r.subplot,l=n[f].radialaxis,o=n[f].angularaxis,c=r._r=l.makeCalcdata(r,"r"),v=r._theta=o.makeCalcdata(r,"theta"),d=r._length,p={};d<c.length&&(c=c.slice(0,d)),d<v.length&&(v=v.slice(0,d)),p.r=c,p.theta=v,u(a,r);var y=p.opts=m.style(a,r),g;return d<t?g=s(r,d):y.marker&&(g=2*(y.marker.sizeAvg||Math.max(y.marker.size,3))),r._extremes.x=x.findExtremes(l,c,{ppad:g}),[{x:!1,y:!1,t:p,trace:r}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981}],1009:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatterpolar/defaults").handleRThetaDefaults,x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),i=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),r=e("../scatter/constants").PTS_LINESONLY,n=e("./attributes");I.exports=function(l,o,c,v){function d(y,g){return u.coerce(l,o,n,y,g)}var p=m(l,o,v,d);if(!p){o.visible=!1;return}d("thetaunit"),d("mode",p<r?"lines+markers":"lines"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate"),s.hasLines(o)&&(t(l,o,c,v,d),d("connectgaps")),s.hasMarkers(o)&&x(l,o,c,v,d),s.hasText(o)&&(d("texttemplate"),i(l,o,v,d)),d("fill"),o.fill!=="none"&&a(l,o,c,d),u.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatterpolar/defaults":1002,"./attributes":1007}],1010:[function(e,I,B){var u=e("../scatterpolar/format_labels");I.exports=function(m,x,t){var i=m.i;return"r"in m||(m.r=x._r[i]),"theta"in m||(m.theta=x._theta[i]),u(m,x,t)}},{"../scatterpolar/format_labels":1003}],1011:[function(e,I,B){var u=e("../scattergl/hover"),s=e("../scatterpolar/hover").makeHoverPointText;function m(x,t,i,a){var r=x.cd,n=r[0].t,f=n.r,l=n.theta,o=u.hoverPoints(x,t,i,a);if(!(!o||o[0].index===!1)){var c=o[0];if(c.index===void 0)return o;var v=x.subplot,d=c.cd[c.index],p=c.trace;if(d.r=f[c.index],d.theta=l[c.index],!!v.isPtInside(d))return c.xLabelVal=void 0,c.yLabelVal=void 0,s(d,p,v,c),o}}I.exports={hoverPoints:m}},{"../scattergl/hover":986,"../scatterpolar/hover":1004}],1012:[function(e,I,B){I.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scattergl/select":990,"./attributes":1007,"./calc":1008,"./defaults":1009,"./format_labels":1010,"./hover":1011,"./plot":1013}],1013:[function(e,I,B){var u=e("@plotly/point-cluster"),s=e("fast-isnumeric"),m=e("../scattergl/plot"),x=e("../scattergl/scene_update"),t=e("../scattergl/convert"),i=e("../../lib"),a=e("../scattergl/constants").TOO_MANY_POINTS;I.exports=function(n,f,l){if(!!l.length){var o=f.radialAxis,c=f.angularAxis,v=x(n,f);return l.forEach(function(d){if(!(!d||!d[0]||!d[0].trace)){var p=d[0],y=p.trace,g=p.t,A=y._length,b=g.r,M=g.theta,w=g.opts,T,_=b.slice(),h=M.slice();for(T=0;T<b.length;T++)f.isPtInside({r:b[T],theta:M[T]})||(_[T]=NaN,h[T]=NaN);var L=new Array(A*2),S=Array(A),k=Array(A);for(T=0;T<A;T++){var P=_[T],O,F;if(s(P)){var D=o.c2g(P),R=c.c2g(h[T],y.thetaunit);O=D*Math.cos(R),F=D*Math.sin(R)}else O=F=NaN;S[T]=L[T*2]=O,k[T]=L[T*2+1]=F}g.tree=u(L),w.marker&&A>=a&&(w.marker.cluster=g.tree),w.marker&&(w.markerSel.positions=w.markerUnsel.positions=w.marker.positions=L),w.line&&L.length>1&&i.extendFlat(w.line,t.linePositions(n,y,L)),w.text&&(i.extendFlat(w.text,{positions:L},t.textPosition(n,y,w.text,w.marker)),i.extendFlat(w.textSel,{positions:L},t.textPosition(n,y,w.text,w.markerSel)),i.extendFlat(w.textUnsel,{positions:L},t.textPosition(n,y,w.text,w.markerUnsel))),w.fill&&!v.fill2d&&(v.fill2d=!0),w.marker&&!v.scatter2d&&(v.scatter2d=!0),w.line&&!v.line2d&&(v.line2d=!0),w.text&&!v.glText&&(v.glText=!0),v.lineOptions.push(w.line),v.fillOptions.push(w.fill),v.markerOptions.push(w.marker),v.markerSelectedOptions.push(w.markerSel),v.markerUnselectedOptions.push(w.markerUnsel),v.textOptions.push(w.text),v.textSelectedOptions.push(w.textSel),v.textUnselectedOptions.push(w.textUnsel),v.selectBatch.push([]),v.unselectBatch.push([]),g.x=S,g.y=k,g.rawx=S,g.rawy=k,g.r=b,g.theta=M,g.positions=L,g._scene=v,g.index=v.count,v.count++}}),m(n,f,l)}}},{"../../lib":503,"../scattergl/constants":980,"../scattergl/convert":981,"../scattergl/plot":988,"../scattergl/scene_update":989,"@plotly/point-cluster":59,"fast-isnumeric":190}],1014:[function(e,I,B){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../lib/extend").extendFlat,x=e("../scatter/attributes"),t=e("../../plots/attributes"),i=x.line;I.exports={mode:x.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:s({editType:"plot"},{keys:["real","imag","text"]}),hovertext:x.hovertext,line:{color:i.color,width:i.width,dash:i.dash,shape:m({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:m({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:m({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:m({},t.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:x.hoveron,hovertemplate:u(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1015:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../../constants/numerical").BADNUM,m=e("../scatter/colorscale_calc"),x=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),i=e("../scatter/calc").calcMarkerSize;I.exports=function(r,n){for(var f=r._fullLayout,l=n.subplot,o=f[l].realaxis,c=f[l].imaginaryaxis,v=o.makeCalcdata(n,"real"),d=c.makeCalcdata(n,"imag"),p=n._length,y=new Array(p),g=0;g<p;g++){var A=v[g],b=d[g],M=y[g]={};u(A)&&u(b)?(M.real=A,M.imag=b):M.real=s}return i(n,p),m(r,n),x(y,n),t(y,n),y}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1016:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),i=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),r=e("../scatter/constants").PTS_LINESONLY,n=e("./attributes");I.exports=function(o,c,v,d){function p(A,b){return u.coerce(o,c,n,A,b)}var y=f(o,c,d,p);if(!y){c.visible=!1;return}p("mode",y<r?"lines+markers":"lines"),p("text"),p("hovertext"),c.hoveron!=="fills"&&p("hovertemplate"),s.hasLines(c)&&(x(o,c,v,d,p),t(o,c,p),p("connectgaps")),s.hasMarkers(c)&&m(o,c,v,d,p,{gradient:!0}),s.hasText(c)&&(p("texttemplate"),i(o,c,d,p));var g=[];(s.hasMarkers(c)||s.hasText(c))&&(p("cliponaxis"),p("marker.maxdisplayed"),g.push("points")),p("fill"),c.fill!=="none"&&(a(o,c,v,p),s.hasLines(c)||t(o,c,p)),(c.fill==="tonext"||c.fill==="toself")&&g.push("fills"),p("hoveron",g.join("+")||"points"),u.coerceSelectionMarkerOpacity(c,p)};function f(l,o,c,v){var d=v("real"),p=v("imag"),y;return d&&p&&(y=Math.min(d.length,p.length)),o._length=y,y}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1014}],1017:[function(e,I,B){var u=e("../../plots/cartesian/axes");I.exports=function(m,x,t){var i={},a=t[x.subplot]._subplot;return i.realLabel=u.tickText(a.radialAxis,m.real,!0).text,i.imagLabel=u.tickText(a.angularAxis,m.imag,!0).text,i}},{"../../plots/cartesian/axes":554}],1018:[function(e,I,B){var u=e("../scatter/hover");function s(x,t,i,a){var r=u(x,t,i,a);if(!(!r||r[0].index===!1)){var n=r[0];if(n.index===void 0)return r;var f=x.subplot,l=n.cd[n.index],o=n.trace;if(!!f.isPtInside(l))return n.xLabelVal=void 0,n.yLabelVal=void 0,m(l,o,f,n),n.hovertemplate=o.hovertemplate,r}}function m(x,t,i,a){var r=i.radialAxis,n=i.angularAxis;r._hovertitle="real",n._hovertitle="imag";var f={};f[t.subplot]={_subplot:i};var l=t._module.formatLabels(x,t,f);a.realLabel=l.realLabel,a.imagLabel=l.imagLabel;var o=x.hi||t.hoverinfo,c=[];function v(p,y){c.push(p._hovertitle+": "+y)}if(!t.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["real","imag","text"]),d.indexOf("real")!==-1&&v(r,a.realLabel),d.indexOf("imag")!==-1&&v(n,a.imagLabel),d.indexOf("text")!==-1&&a.text&&(c.push(a.text),delete a.text),a.extraText=c.join("<br>")}}I.exports={hoverPoints:s,makeHoverPointText:m}},{"../scatter/hover":937}],1019:[function(e,I,B){I.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1014,"./calc":1015,"./defaults":1016,"./format_labels":1017,"./hover":1018,"./plot":1020}],1020:[function(e,I,B){var u=e("../scatter/plot"),s=e("../../constants/numerical").BADNUM,m=e("../../plots/smith/helpers"),x=m.smith;I.exports=function(i,a,r){for(var n=a.layers.frontplot.select("g.scatterlayer"),f={xaxis:a.xaxis,yaxis:a.yaxis,plot:a.framework,layerClipId:a._hasClipOnAxisFalse?a.clipIds.forTraces:null},l=0;l<r.length;l++)for(var o=r[l],c=0;c<o.length;c++){var v=o[c],d=v.real;if(d===s)v.x=v.y=s;else{var p=x([d,v.imag]);v.x=p[0],v.y=p[1]}}u(i,f,r,n)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":947}],1021:[function(e,I,B){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../scatter/attributes"),x=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),i=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,r=m.marker,n=m.line,f=r.line;I.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},m.mode,{dflt:"markers"}),text:a({},m.text,{}),texttemplate:s({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},m.hovertext,{}),line:{color:n.color,width:n.width,dash:i,shape:a({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:m.connectgaps,cliponaxis:m.cliponaxis,fill:a({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:a({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:a({width:f.width,editType:"calc"},t("marker.line")),gradient:r.gradient,editType:"calc"},t("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:a({},x.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:m.hoveron,hovertemplate:u()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1022:[function(e,I,B){var u=e("fast-isnumeric"),s=e("../scatter/colorscale_calc"),m=e("../scatter/arrays_to_calcdata"),x=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,i=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};I.exports=function(n,f){var l=n._fullLayout[f.subplot],o=l.sum,c=f.sum||o,v={a:f.a,b:f.b,c:f.c},d,p,y,g,A,b;for(d=0;d<i.length;d++)if(y=i[d],!v[y]){for(A=v[a[y][0]],b=v[a[y][1]],g=new Array(A.length),p=0;p<A.length;p++)g[p]=c-A[p]-b[p];v[y]=g}var M=f._length,w=new Array(M),T,_,h,L,S,k;for(d=0;d<M;d++)T=v.a[d],_=v.b[d],h=v.c[d],u(T)&&u(_)&&u(h)?(T=+T,_=+_,h=+h,L=o/(T+_+h),L!==1&&(T*=L,_*=L,h*=L),k=T,S=h-_,w[d]={x:S,y:k,a:T,b:_,c:h}):w[d]={x:!1,y:!1};return t(f,M),s(n,f),m(w,f),x(w,f),w}},{"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1023:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/constants"),m=e("../scatter/subtypes"),x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),i=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),r=e("../scatter/fillcolor_defaults"),n=e("./attributes");I.exports=function(l,o,c,v){function d(w,T){return u.coerce(l,o,n,w,T)}var p=d("a"),y=d("b"),g=d("c"),A;if(p?(A=p.length,y?(A=Math.min(A,y.length),g&&(A=Math.min(A,g.length))):g?A=Math.min(A,g.length):A=0):y&&g&&(A=Math.min(y.length,g.length)),!A){o.visible=!1;return}o._length=A,d("sum"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate");var b=A<s.PTS_LINESONLY?"lines+markers":"lines";d("mode",b),m.hasLines(o)&&(t(l,o,c,v,d),i(l,o,d),d("connectgaps")),m.hasMarkers(o)&&x(l,o,c,v,d,{gradient:!0}),m.hasText(o)&&(d("texttemplate"),a(l,o,v,d));var M=[];(m.hasMarkers(o)||m.hasText(o))&&(d("cliponaxis"),d("marker.maxdisplayed"),M.push("points")),d("fill"),o.fill!=="none"&&(r(l,o,c,d),m.hasLines(o)||i(l,o,d)),(o.fill==="tonext"||o.fill==="toself")&&M.push("fills"),d("hoveron",M.join("+")||"points"),u.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1021}],1024:[function(e,I,B){I.exports=function(s,m,x,t,i){if(m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),t[i]){var a=t[i];s.a=a.a,s.b=a.b,s.c=a.c}else s.a=m.a,s.b=m.b,s.c=m.c;return s}},{}],1025:[function(e,I,B){var u=e("../../plots/cartesian/axes");I.exports=function(m,x,t){var i={},a=t[x.subplot]._subplot;return i.aLabel=u.tickText(a.aaxis,m.a,!0).text,i.bLabel=u.tickText(a.baxis,m.b,!0).text,i.cLabel=u.tickText(a.caxis,m.c,!0).text,i}},{"../../plots/cartesian/axes":554}],1026:[function(e,I,B){var u=e("../scatter/hover");I.exports=function(m,x,t,i){var a=u(m,x,t,i);if(!a||a[0].index===!1)return;var r=a[0];if(r.index===void 0){var n=1-r.y0/m.ya._length,f=m.xa._length,l=f*n/2,o=f-l;return r.x0=Math.max(Math.min(r.x0,o),l),r.x1=Math.max(Math.min(r.x1,o),l),a}var c=r.cd[r.index],v=r.trace,d=r.subplot;r.a=c.a,r.b=c.b,r.c=c.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var p={};p[v.subplot]={_subplot:d};var y=v._module.formatLabels(c,v,p);r.aLabel=y.aLabel,r.bLabel=y.bLabel,r.cLabel=y.cLabel;var g=c.hi||v.hoverinfo,A=[];function b(w,T){A.push(w._hovertitle+": "+T)}if(!v.hovertemplate){var M=g.split("+");M.indexOf("all")!==-1&&(M=["a","b","c"]),M.indexOf("a")!==-1&&b(d.aaxis,r.aLabel),M.indexOf("b")!==-1&&b(d.baxis,r.bLabel),M.indexOf("c")!==-1&&b(d.caxis,r.cLabel)}return r.extraText=A.join("<br>"),r.hovertemplate=v.hovertemplate,a}},{"../scatter/hover":937}],1027:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1021,"./calc":1022,"./defaults":1023,"./event_data":1024,"./format_labels":1025,"./hover":1026,"./plot":1028}],1028:[function(e,I,B){var u=e("../scatter/plot");I.exports=function(m,x,t){var i=x.plotContainer;i.select(".scatterlayer").selectAll("*").remove();var a={xaxis:x.xaxis,yaxis:x.yaxis,plot:i,layerClipId:x._hasClipOnAxisFalse?x.clipIdRelative:null},r=x.layers.frontplot.select("g.scatterlayer");u(m,a,t,r)}},{"../scatter/plot":947}],1029:[function(e,I,B){var u=e("../scatter/attributes"),s=e("../../components/colorscale/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../scattergl/attributes"),i=e("../../plots/cartesian/constants").idRegex,a=e("../../plot_api/plot_template").templatedArray,r=e("../../lib/extend").extendFlat,n=u.marker,f=n.line,l=r(s("marker.line",{editTypeOverride:"calc"}),{width:r({},f.width,{editType:"calc"}),editType:"calc"}),o=r(s("marker"),{symbol:n.symbol,size:r({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:l,editType:"calc"});o.color.editType=o.cmin.editType=o.cmax.editType="style";function c(v){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:i[v],editType:"plot"}}}I.exports={dimensions:a("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},t.text,{}),hovertext:r({},t.hovertext,{}),hovertemplate:x(),xhoverformat:m("x"),yhoverformat:m("y"),marker:o,xaxes:c("x"),yaxes:c("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:t.selected.marker,editType:"calc"},unselected:{marker:t.unselected.marker,editType:"calc"},opacity:t.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergl/attributes":978}],1030:[function(e,I,B){var u=e("regl-line2d"),s=e("../../registry"),m=e("../../lib/prepare_regl"),x=e("../../plots/get_data").getModuleCalcData,t=e("../../plots/cartesian"),i=e("../../plots/cartesian/axis_ids").getFromId,a=e("../../plots/cartesian/axes").shouldShowZeroLine,r="splom";function n(d){var p=d._fullLayout,y=s.getModule(r),g=x(d.calcdata,y)[0],A=m(d,["ANGLE_instanced_arrays","OES_element_index_uint"]);!A||(p._hasOnlyLargeSploms&&o(d),y.plot(d,{},g))}function f(d){var p=d.calcdata,y=d._fullLayout;y._hasOnlyLargeSploms&&o(d);for(var g=0;g<p.length;g++){var A=p[g][0],b=A.trace,M=y._splomScenes[b.uid];b.type==="splom"&&M&&M.matrix&&l(d,b,M)}}function l(d,p,y){for(var g=y.matrixOptions.data.length,A=p._visibleDims,b=y.viewOpts.ranges=new Array(g),M=0;M<A.length;M++){var w=A[M],T=b[M]=new Array(4),_=i(d,p._diag[w][0]);_&&(T[0]=_.r2l(_.range[0]),T[2]=_.r2l(_.range[1]));var h=i(d,p._diag[w][1]);h&&(T[1]=h.r2l(h.range[0]),T[3]=h.r2l(h.range[1]))}y.selectBatch.length||y.unselectBatch.length?y.matrix.update({ranges:b},{ranges:b}):y.matrix.update({ranges:b})}function o(d){var p=d._fullLayout,y=p._glcanvas.data()[0].regl,g=p._splomGrid;g||(g=p._splomGrid=u(y)),g.update(c(d))}function c(d){var p=d._context.plotGlPixelRatio,y=d._fullLayout,g=y._size,A=[0,0,y.width*p,y.height*p],b={},M;function w(j,ee,q,G,J,le){q*=p,G*=p,J*=p,le*=p;var fe=ee[j+"color"],se=ee[j+"width"],V=String(fe+se);V in b?b[V].data.push(NaN,NaN,q,G,J,le):b[V]={data:[q,G,J,le],join:"rect",thickness:se*p,color:fe,viewport:A,range:A,overlay:!1}}for(M in y._splomSubplots){var T=y._plots[M],_=T.xaxis,h=T.yaxis,L=_._gridVals,S=h._gridVals,k=_._offset,P=_._length,O=h._length,F=g.b+h.domain[0]*g.h,D=-h._m,R=-D*h.r2l(h.range[0],h.calendar),U,N;if(_.showgrid)for(M=0;M<L.length;M++)U=k+_.l2p(L[M].x),w("grid",_,U,F,U,F+O);if(h.showgrid)for(M=0;M<S.length;M++)N=F+R+D*S[M].x,w("grid",h,k,N,k+P,N);a(d,_,h)&&(U=k+_.l2p(0),w("zeroline",_,U,F,U,F+O)),a(d,h,_)&&(N=F+R+0,w("zeroline",h,k,N,k+P,N))}var X=[];for(M in b)X.push(b[M]);return X}function v(d,p,y,g){var A={},b;if(g._splomScenes){for(b=0;b<d.length;b++){var M=d[b];M.type==="splom"&&(A[M.uid]=1)}for(b=0;b<y.length;b++){var w=y[b];if(!A[w.uid]){var T=g._splomScenes[w.uid];T&&T.destroy&&T.destroy(),g._splomScenes[w.uid]=null,delete g._splomScenes[w.uid]}}}Object.keys(g._splomScenes||{}).length===0&&delete g._splomScenes,g._splomGrid&&!p._hasOnlyLargeSploms&&g._hasOnlyLargeSploms&&(g._splomGrid.destroy(),g._splomGrid=null,delete g._splomGrid),t.clean(d,p,y,g)}I.exports={name:r,attr:t.attr,attrRegex:t.attrRegex,layoutAttributes:t.layoutAttributes,supplyLayoutDefaults:t.supplyLayoutDefaults,drawFramework:t.drawFramework,plot:n,drag:f,updateGrid:o,clean:v,updateFx:t.updateFx,toSVG:t.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1031:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axis_ids"),m=e("../scatter/calc").calcMarkerSize,x=e("../scatter/calc").calcAxisExpansion,t=e("../scatter/colorscale_calc"),i=e("../scattergl/convert").markerSelection,a=e("../scattergl/convert").markerStyle,r=e("./scene_update"),n=e("../../constants/numerical").BADNUM,f=e("../scattergl/constants").TOO_MANY_POINTS;I.exports=function(o,c){var v=c.dimensions,d=c._length,p={},y=p.cdata=[],g=p.data=[],A=c._visibleDims=[],b,M,w,T,_;function h(O,F){for(var D=O.makeCalcdata({v:F.values,vcalendar:c.calendar},"v"),R=0;R<D.length;R++)D[R]=D[R]===n?NaN:D[R];y.push(D),g.push(O.type==="log"?u.simpleMap(D,O.c2l):D)}for(b=0;b<v.length;b++)if(w=v[b],w.visible){if(T=s.getFromId(o,c._diag[b][0]),_=s.getFromId(o,c._diag[b][1]),T&&_&&T.type!==_.type){u.log("Skipping splom dimension "+b+" with conflicting axis types");continue}T?(h(T,w),_&&_.type==="category"&&(_._categories=T._categories.slice())):h(_,w),A.push(b)}t(o,c),u.extendFlat(p,a(c));var L=y.length,S=L*d>f,k;for(S?k=p.sizeAvg||Math.max(p.size,3):k=m(c,d),M=0;M<A.length;M++)b=A[M],w=v[b],T=s.getFromId(o,c._diag[b][0])||{},_=s.getFromId(o,c._diag[b][1])||{},x(o,c,T,_,y[M],y[M],k);var P=r(o,c);return P.matrix||(P.matrix=!0),P.matrixOptions=p,P.selectedOptions=i(c,c.selected),P.unselectedOptions=i(c,c.unselected),[{x:!1,y:!1,t:{},trace:c}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981,"./scene_update":1038}],1032:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/array_container_defaults"),m=e("./attributes"),x=e("../scatter/subtypes"),t=e("../scatter/marker_defaults"),i=e("../parcoords/merge_length"),a=e("../scattergl/helpers").isOpenSymbol;I.exports=function(l,o,c,v){function d(T,_){return u.coerce(l,o,m,T,_)}var p=s(l,o,{name:"dimensions",handleItemDefaults:r}),y=d("diagonal.visible"),g=d("showupperhalf"),A=d("showlowerhalf"),b=i(o,p,"values");if(!b||!y&&!g&&!A){o.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),t(l,o,c,v,d);var M=a(o.marker.symbol),w=x.isBubble(o);d("marker.line.width",M||w?1:0),n(l,o,v,d),u.coerceSelectionMarkerOpacity(o,d)};function r(f,l){function o(v,d){return u.coerce(f,l,m.dimensions,v,d)}o("label");var c=o("values");c&&c.length?o("visible"):l.visible=!1,o("axis.type"),o("axis.matches")}function n(f,l,o,c){var v=l.dimensions,d=v.length,p=l.showupperhalf,y=l.showlowerhalf,g=l.diagonal.visible,A,b,M=new Array(d),w=new Array(d);for(A=0;A<d;A++){var T=A?A+1:"";M[A]="x"+T,w[A]="y"+T}var _=c("xaxes",M),h=c("yaxes",w),L=l._diag=new Array(d);l._xaxes={},l._yaxes={};var S=[],k=[];function P(ee,q,G,J){if(!!ee){var le=ee.charAt(0),fe=o._splomAxes[le];if(l["_"+le+"axes"][ee]=1,J.push(ee),!(ee in fe)){var se=fe[ee]={};G&&(se.label=G.label||"",G.visible&&G.axis&&(G.axis.type&&(se.type=G.axis.type),G.axis.matches&&(se.matches=q)))}}}var O=!g&&!y,F=!g&&!p;for(l._axesDim={},A=0;A<d;A++){var D=v[A],R=A===0,U=A===d-1,N=R&&O||U&&F?void 0:_[A],X=R&&F||U&&O?void 0:h[A];P(N,X,D,S),P(X,N,D,k),L[A]=[N,X],l._axesDim[N]=A,l._axesDim[X]=A}for(A=0;A<S.length;A++)for(b=0;b<k.length;b++){var j=S[A]+k[b];(A>b&&p||A<b&&y||A===b&&(g||!y||!p))&&(o._splomSubplots[j]=1)}(!y||!g&&p&&y)&&(o._splomGridDflt.xside="bottom",o._splomGridDflt.yside="left")}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":897,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scattergl/helpers":985,"./attributes":1029}],1033:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/colorscale_calc"),m=e("../scattergl/convert").markerStyle;I.exports=function(t,i){var a=i.trace,r=t._fullLayout._splomScenes[a.uid];if(r){s(t,a),u.extendFlat(r.matrixOptions,m(a));var n=u.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(n,null)}}},{"../../lib":503,"../scatter/colorscale_calc":929,"../scattergl/convert":981}],1034:[function(e,I,B){B.getDimIndex=function(s,m){for(var x=m._id,t=x.charAt(0),i={x:0,y:1}[t],a=s._visibleDims,r=0;r<a.length;r++){var n=a[r];if(s._diag[n][i]===x)return r}return!1}},{}],1035:[function(e,I,B){var u=e("./helpers"),s=e("../scattergl/hover").calcHover;function m(x,t,i){var a=x.cd,r=a[0].trace,n=x.scene,f=n.matrixOptions.cdata,l=x.xa,o=x.ya,c=l.c2p(t),v=o.c2p(i),d=x.distance,p=u.getDimIndex(r,l),y=u.getDimIndex(r,o);if(p===!1||y===!1)return[x];for(var g=f[p],A=f[y],b,M,w=d,T=0;T<g.length;T++){var _=g[T],h=A[T],L=l.c2p(_)-c,S=o.c2p(h)-v,k=Math.sqrt(L*L+S*S);k<w&&(w=M=k,b=T)}return x.index=b,x.distance=w,x.dxy=M,b===void 0?[x]:[s(x,g,A,r)]}I.exports={hoverPoints:m}},{"../scattergl/hover":986,"./helpers":1034}],1036:[function(e,I,B){var u=e("../../registry"),s=e("../../components/grid");I.exports={moduleType:"trace",name:"splom",basePlotModule:e("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select"),editStyle:e("./edit_style"),meta:{}},u.register(s)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":944,"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./edit_style":1033,"./hover":1035,"./plot":1037,"./select":1039}],1037:[function(e,I,B){var u=e("regl-splom"),s=e("../../lib"),m=e("../../plots/cartesian/axis_ids"),x=e("../../components/dragelement/helpers").selectMode;I.exports=function(a,r,n){if(!!n.length)for(var f=0;f<n.length;f++)t(a,n[f][0])};function t(i,a){var r=i._fullLayout,n=r._size,f=a.trace,l=a.t,o=r._splomScenes[f.uid],c=o.matrixOptions,v=c.cdata,d=r._glcanvas.data()[0].regl,p=r.dragmode,y,g,A,b,M;if(v.length!==0){c.lower=f.showupperhalf,c.upper=f.showlowerhalf,c.diagonal=f.diagonal.visible;var w=f._visibleDims,T=v.length,_=o.viewOpts={};for(_.ranges=new Array(T),_.domains=new Array(T),M=0;M<w.length;M++){A=w[M];var h=_.ranges[M]=new Array(4),L=_.domains[M]=new Array(4);y=m.getFromId(i,f._diag[A][0]),y&&(h[0]=y._rl[0],h[2]=y._rl[1],L[0]=y.domain[0],L[2]=y.domain[1]),g=m.getFromId(i,f._diag[A][1]),g&&(h[1]=g._rl[0],h[3]=g._rl[1],L[1]=g.domain[0],L[3]=g.domain[1])}var S=i._context.plotGlPixelRatio,k=n.l*S,P=n.b*S,O=n.w*S,F=n.h*S;_.viewport=[k,P,O+k,F+P],o.matrix===!0&&(o.matrix=u(d));var D=r.clickmode.indexOf("select")>-1,R=x(p)||!!f.selectedpoints||D,U=!0;if(R){var N=f._length;if(f.selectedpoints){o.selectBatch=f.selectedpoints;var X=f.selectedpoints,j={};for(A=0;A<X.length;A++)j[X[A]]=!0;var ee=[];for(A=0;A<N;A++)j[A]||ee.push(A);o.unselectBatch=ee}var q=l.xpx=new Array(T),G=l.ypx=new Array(T);for(M=0;M<w.length;M++){if(A=w[M],y=m.getFromId(i,f._diag[A][0]),y)for(q[M]=new Array(N),b=0;b<N;b++)q[M][b]=y.c2p(v[M][b]);if(g=m.getFromId(i,f._diag[A][1]),g)for(G[M]=new Array(N),b=0;b<N;b++)G[M][b]=g.c2p(v[M][b])}if(o.selectBatch.length||o.unselectBatch.length){var J=s.extendFlat({},c,o.unselectedOptions,_),le=s.extendFlat({},c,o.selectedOptions,_);o.matrix.update(J,le),U=!1}}else l.xpx=l.ypx=null;if(U){var fe=s.extendFlat({},c,_);o.matrix.update(fe,null)}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1038:[function(e,I,B){var u=e("../../lib");I.exports=function(m,x){var t=m._fullLayout,i=x.uid,a=t._splomScenes;a||(a=t._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},n={matrix:!1,selectBatch:[],unselectBatch:[]},f=a[x.uid];return f||(f=a[i]=u.extendFlat({},r,n),f.draw=function(){f.matrix&&f.matrix.draw&&(f.selectBatch.length||f.unselectBatch.length?f.matrix.draw(f.unselectBatch,f.selectBatch):f.matrix.draw()),f.dirty=!1},f.destroy=function(){f.matrix&&f.matrix.destroy&&f.matrix.destroy(),f.matrixOptions=null,f.selectBatch=null,f.unselectBatch=null,f=null}),f.dirty||u.extendFlat(f,r),f}},{"../../lib":503}],1039:[function(e,I,B){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("./helpers");I.exports=function(t,i){var a=t.cd,r=a[0].trace,n=a[0].t,f=t.scene,l=f.matrixOptions.cdata,o=t.xaxis,c=t.yaxis,v=[];if(!f)return v;var d=!s.hasMarkers(r)&&!s.hasText(r);if(r.visible!==!0||d)return v;var p=m.getDimIndex(r,o),y=m.getDimIndex(r,c);if(p===!1||y===!1)return v;var g=n.xpx[p],A=n.ypx[y],b=l[p],M=l[y],w=[],T=[];if(i!==!1&&!i.degenerate)for(var _=0;_<b.length;_++)i.contains([g[_],A[_]],null,_,t)?(w.push(_),v.push({pointNumber:_,x:b[_],y:M[_]})):T.push(_);var h=f.matrixOptions;return!w.length&&!T.length?f.matrix.update(h,null):!f.selectBatch.length&&!f.unselectBatch.length&&f.matrix.update(f.unselectedOptions,u.extendFlat({},h,f.selectedOptions,f.viewOpts)),f.selectBatch=w,f.unselectBatch=T,v}},{"../../lib":503,"../scatter/subtypes":951,"./helpers":1034}],1040:[function(e,I,B){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../mesh3d/attributes"),t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:s("u",1),vhoverformat:s("v",1),whoverformat:s("w",1),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),showlegend:i({},t.showlegend,{dflt:!1})};i(a,u("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(n){a[n]=x[n]}),a.hoverinfo=i({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,I.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1041:[function(e,I,B){var u=e("../../lib"),s=e("../../components/colorscale/calc");function m(a,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=i(r.u,r._len),r._v=i(r.v,r._len),r._w=i(r.w,r._len),r._x=i(r.x,r._len),r._y=i(r.y,r._len),r._z=i(r.z,r._len);var n=x(r);r._gridFill=n.fill,r._Xs=n.Xs,r._Ys=n.Ys,r._Zs=n.Zs,r._len=n.len;var f=0,l,o,c;r.starts&&(l=i(r.starts.x||[]),o=i(r.starts.y||[]),c=i(r.starts.z||[]),f=Math.min(l.length,o.length,c.length)),r._startsX=l||[],r._startsY=o||[],r._startsZ=c||[];var v=0,d=1/0,p;for(p=0;p<r._len;p++){var y=r._u[p],g=r._v[p],A=r._w[p],b=Math.sqrt(y*y+g*g+A*A);v=Math.max(v,b),d=Math.min(d,b)}for(s(a,r,{vals:[d,v],containerStr:"",cLetter:"c"}),p=0;p<f;p++){var M=l[p];n.xMax=Math.max(n.xMax,M),n.xMin=Math.min(n.xMin,M);var w=o[p];n.yMax=Math.max(n.yMax,w),n.yMin=Math.min(n.yMin,w);var T=c[p];n.zMax=Math.max(n.zMax,T),n.zMin=Math.min(n.zMin,T)}r._slen=f,r._normMax=v,r._xbnds=[n.xMin,n.xMax],r._ybnds=[n.yMin,n.yMax],r._zbnds=[n.zMin,n.zMax]}function x(a){var r=a._x,n=a._y,f=a._z,l=a._len,o,c,v,d=-1/0,p=1/0,y=-1/0,g=1/0,A=-1/0,b=1/0,M="",w,T,_,h,L,S,k,P,O;for(l&&(h=r[0],S=n[0],P=f[0]),l>1&&(L=r[l-1],k=n[l-1],O=f[l-1]),o=0;o<l;o++)d=Math.max(d,r[o]),p=Math.min(p,r[o]),y=Math.max(y,n[o]),g=Math.min(g,n[o]),A=Math.max(A,f[o]),b=Math.min(b,f[o]),!w&&r[o]!==h&&(w=!0,M+="x"),!T&&n[o]!==S&&(T=!0,M+="y"),!_&&f[o]!==P&&(_=!0,M+="z");w||(M+="x"),T||(M+="y"),_||(M+="z");var F=t(a._x),D=t(a._y),R=t(a._z);M=M.replace("x",(h>L?"-":"+")+"x"),M=M.replace("y",(S>k?"-":"+")+"y"),M=M.replace("z",(P>O?"-":"+")+"z");var U=function(){l=0,F=[],D=[],R=[]};(!l||l<F.length*D.length*R.length)&&U();var N=function(oe){return oe==="x"?r:oe==="y"?n:f},X=function(oe){return oe==="x"?F:oe==="y"?D:R},j=function(oe){return oe[l-1]<oe[0]?-1:1},ee=N(M[1]),q=N(M[3]),G=N(M[5]),J=X(M[1]).length,le=X(M[3]).length,fe=X(M[5]).length,se=!1,V=function(oe,ue,xe){return J*(le*oe+ue)+xe},Y=j(N(M[1])),ne=j(N(M[3])),te=j(N(M[5]));for(o=0;o<fe-1;o++){for(c=0;c<le-1;c++){for(v=0;v<J-1;v++){var K=V(o,c,v),$=V(o,c,v+1),ae=V(o,c+1,v),ie=V(o+1,c,v);if((!(ee[K]*Y<ee[$]*Y)||!(q[K]*ne<q[ae]*ne)||!(G[K]*te<G[ie]*te))&&(se=!0),se)break}if(se)break}if(se)break}return se&&(u.warn("Encountered arbitrary coordinates! Unable to input data grid."),U()),{xMin:p,yMin:g,zMin:b,xMax:d,yMax:y,zMax:A,Xs:F,Ys:D,Zs:R,len:l,fill:M}}function t(a){return u.distinctVals(a).vals}function i(a,r){if(r===void 0&&(r=a.length),u.isTypedArray(a))return a.subarray(0,r);for(var n=[],f=0;f<r;f++)n[f]=+a[f];return n}I.exports={calc:m,filter:i,processGrid:x}},{"../../components/colorscale/calc":374,"../../lib":503}],1042:[function(e,I,B){var u=e("../../../stackgl_modules").gl_streamtube3d,s=u.createTubeMesh,m=e("../../lib"),x=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,i=e("../../plots/gl3d/zip3"),a={xaxis:0,yaxis:1,zaxis:2};function r(v,d){this.scene=v,this.uid=d,this.mesh=null,this.data=null}var n=r.prototype;n.handlePick=function(v){var d=this.scene.fullSceneLayout,p=this.scene.dataScale;function y(b,M){var w=d[M],T=p[a[M]];return w.l2c(b)/T}if(v.object===this.mesh){var g=v.data.position,A=v.data.velocity;return v.traceCoordinate=[y(g[0],"xaxis"),y(g[1],"yaxis"),y(g[2],"zaxis"),y(A[0],"xaxis"),y(A[1],"yaxis"),y(A[2],"zaxis"),v.data.intensity*this.data._normMax,v.data.divergence],v.textLabel=this.data.hovertext||this.data.text,!0}};function f(v){var d=v.length,p;return d>2?p=v.slice(1,d-1):d===2?p=[(v[0]+v[1])/2]:p=v,p}function l(v){var d=v.length;return d===1?[.5,.5]:[v[1]-v[0],v[d-1]-v[d-2]]}function o(v,d){var p=v.fullSceneLayout,y=v.dataScale,g=d._len,A={};function b(le,fe){var se=p[fe],V=y[a[fe]];return m.simpleMap(le,function(Y){return se.d2l(Y)*V})}if(A.vectors=i(b(d._u,"xaxis"),b(d._v,"yaxis"),b(d._w,"zaxis"),g),!g)return{positions:[],cells:[]};var M=b(d._Xs,"xaxis"),w=b(d._Ys,"yaxis"),T=b(d._Zs,"zaxis");A.meshgrid=[M,w,T],A.gridFill=d._gridFill;var _=d._slen;if(_)A.startingPositions=i(b(d._startsX,"xaxis"),b(d._startsY,"yaxis"),b(d._startsZ,"zaxis"));else{for(var h=w[0],L=f(M),S=f(T),k=new Array(L.length*S.length),P=0,O=0;O<L.length;O++)for(var F=0;F<S.length;F++)k[P++]=[L[O],h,S[F]];A.startingPositions=k}A.colormap=x(d),A.tubeSize=d.sizeref,A.maxLength=d.maxdisplayed;var D=b(d._xbnds,"xaxis"),R=b(d._ybnds,"yaxis"),U=b(d._zbnds,"zaxis"),N=l(M),X=l(w),j=l(T),ee=[[D[0]-N[0],R[0]-X[0],U[0]-j[0]],[D[1]+N[1],R[1]+X[1],U[1]+j[1]]],q=u(A,ee),G=t(d);q.vertexIntensityBounds=[G.min/d._normMax,G.max/d._normMax];var J=d.lightposition;return q.lightPosition=[J.x,J.y,J.z],q.ambient=d.lighting.ambient,q.diffuse=d.lighting.diffuse,q.specular=d.lighting.specular,q.roughness=d.lighting.roughness,q.fresnel=d.lighting.fresnel,q.opacity=d.opacity,d._pad=q.tubeScale*d.sizeref*2,q}n.update=function(v){this.data=v;var d=o(this.scene,v);this.mesh.update(d)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(v,d){var p=v.glplot.gl,y=o(v,d),g=s(p,y),A=new r(v,d.uid);return A.mesh=g,A.data=d,g._trace=A,v.glplot.add(g),A}I.exports=c},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1043:[function(e,I,B){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");I.exports=function(t,i,a,r){function n(p,y){return u.coerce(t,i,m,p,y)}var f=n("u"),l=n("v"),o=n("w"),c=n("x"),v=n("y"),d=n("z");if(!f||!f.length||!l||!l.length||!o||!o.length||!c||!c.length||!v||!v.length||!d||!d.length){i.visible=!1;return}n("starts.x"),n("starts.y"),n("starts.z"),n("maxdisplayed"),n("sizeref"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),s(t,i,r,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1040}],1044:[function(e,I,B){I.exports={moduleType:"trace",name:"streamtube",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc").calc,plot:e("./convert"),eventData:function(u,s){return u.tubex=u.x,u.tubey=u.y,u.tubez=u.z,u.tubeu=s.traceCoordinate[3],u.tubev=s.traceCoordinate[4],u.tubew=s.traceCoordinate[5],u.norm=s.traceCoordinate[6],u.divergence=s.traceCoordinate[7],delete u.x,delete u.y,delete u.z,u},meta:{}}},{"../../plots/gl3d":598,"./attributes":1040,"./calc":1041,"./convert":1042,"./defaults":1043}],1045:[function(e,I,B){var u=e("../../plots/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,m=e("../../plots/template_attributes").texttemplateAttrs,x=e("../../components/colorscale/attributes"),t=e("../../plots/domain").attributes,i=e("../pie/attributes"),a=e("./constants"),r=e("../../lib/extend").extendFlat;I.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},i.marker.line.color,{dflt:null}),width:r({},i.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},x("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:i.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:m({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:i.hovertext,hoverinfo:r({},u.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:s({},{keys:a.eventDataKeys}),textfont:i.textfont,insidetextorientation:i.insidetextorientation,insidetextfont:i.insidetextfont,outsidetextfont:r({},i.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:i.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:t({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"./constants":1048}],1046:[function(e,I,B){var u=e("../../plots/plots");B.name="sunburst",B.plot=function(s,m,x,t){u.plotBasePlot(B.name,s,m,x,t)},B.clean=function(s,m,x,t){u.cleanBasePlot(B.name,s,m,x,t)}},{"../../plots/plots":619}],1047:[function(e,I,B){var u=e("d3-hierarchy"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../components/colorscale").makeColorScaleFuncFromTrace,t=e("../pie/calc").makePullColorFn,i=e("../pie/calc").generateExtendedColors,a=e("../../components/colorscale").calc,r=e("../../constants/numerical").ALMOST_EQUAL,n={},f={},l={};B.calc=function(c,v){var d=c._fullLayout,p=v.ids,y=m.isArrayOrTypedArray(p),g=v.labels,A=v.parents,b=v.values,M=m.isArrayOrTypedArray(b),w=[],T={},_={},h=function(Y,ne){T[Y]?T[Y].push(ne):T[Y]=[ne],_[ne]=1},L=function(Y){return Y||typeof Y=="number"},S=function(Y){return!M||s(b[Y])&&b[Y]>=0},k,P,O;y?(k=Math.min(p.length,A.length),P=function(Y){return L(p[Y])&&S(Y)},O=function(Y){return String(p[Y])}):(k=Math.min(g.length,A.length),P=function(Y){return L(g[Y])&&S(Y)},O=function(Y){return String(g[Y])}),M&&(k=Math.min(k,b.length));for(var F=0;F<k;F++)if(P(F)){var D=O(F),R=L(A[F])?String(A[F]):"",U={i:F,id:D,pid:R,label:L(g[F])?String(g[F]):""};M&&(U.v=+b[F]),w.push(U),h(R,D)}if(T[""]){if(T[""].length>1){for(var j=m.randstr(),ee=0;ee<w.length;ee++)w[ee].pid===""&&(w[ee].pid=j);w.unshift({hasMultipleRoots:!0,id:j,pid:"",label:""})}}else{var N=[],X;for(X in T)_[X]||N.push(X);if(N.length===1)X=N[0],w.unshift({hasImpliedRoot:!0,id:X,pid:"",label:X});else return m.warn(["Multiple implied roots, cannot build",v.type,"hierarchy of",v.name+".","These roots include:",N.join(", ")].join(" "))}var q;try{q=u.stratify().id(function(Y){return Y.id}).parentId(function(Y){return Y.pid})(w)}catch(Y){return m.warn(["Failed to build",v.type,"hierarchy of",v.name+".","Error:",Y.message].join(" "))}var G=u.hierarchy(q),J=!1;if(M)switch(v.branchvalues){case"remainder":G.sum(function(Y){return Y.data.v});break;case"total":G.each(function(Y){var ne=Y.data.data,te=ne.v;if(Y.children){var K=Y.children.reduce(function($,ae){return $+ae.data.data.v},0);if((ne.hasImpliedRoot||ne.hasMultipleRoots)&&(te=K),te<K*r)return J=!0,m.warn(["Total value for node",Y.data.data.id,"of",v.name,"is smaller than the sum of its children.",`
parent value =`,te,`
children sum =`,K].join(" "))}Y.value=te});break}else o(G,v,{branches:v.count.indexOf("branches")!==-1,leaves:v.count.indexOf("leaves")!==-1});if(!J){v.sort&&G.sort(function(Y,ne){return ne.value-Y.value});var le,fe,se=v.marker.colors||[],V=!!se.length;return v._hasColorscale?(V||(se=M?v.values:v._values),a(c,v,{vals:se,containerStr:"marker",cLetter:"c"}),fe=x(v.marker)):le=t(d["_"+v.type+"colormap"]),G.each(function(Y){var ne=Y.data.data;ne.color=v._hasColorscale?fe(se[ne.i]):le(se[ne.i],ne.id)}),w[0].hierarchy=G,w}},B._runCrossTraceCalc=function(c,v){var d=v._fullLayout,p=v.calcdata,y=d[c+"colorway"],g=d["_"+c+"colormap"];d["extend"+c+"colors"]&&(y=i(y,c==="icicle"?l:c==="treemap"?f:n));var A=0,b;function M(h){var L=h.data.data,S=L.id;L.color===!1&&(g[S]?L.color=g[S]:h.parent?h.parent.parent?L.color=h.parent.data.data.color:(g[S]=L.color=y[A%y.length],A++):L.color=b)}for(var w=0;w<p.length;w++){var T=p[w],_=T[0];_.trace.type===c&&_.hierarchy&&(b=_.trace.root.color,_.hierarchy.each(M))}},B.crossTraceCalc=function(c){return B._runCrossTraceCalc("sunburst",c)};function o(c,v,d){var p=0,y=c.children;if(y){for(var g=y.length,A=0;A<g;A++)p+=o(y[A],v,d);d.branches&&p++}else d.leaves&&p++;return c.value=c.data.data.value=p,v._values||(v._values=[]),v._values[c.data.data.i]=p,p}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":902,"d3-hierarchy":115,"fast-isnumeric":190}],1048:[function(e,I,B){I.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1049:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("../../plots/domain").defaults,x=e("../bar/defaults").handleText,t=e("../../components/colorscale"),i=t.hasColorscale,a=t.handleDefaults;I.exports=function(n,f,l,o){function c(M,w){return u.coerce(n,f,s,M,w)}var v=c("labels"),d=c("parents");if(!v||!v.length||!d||!d.length){f.visible=!1;return}var p=c("values");p&&p.length?c("branchvalues"):c("count"),c("level"),c("maxdepth");var y=c("marker.line.width");y&&c("marker.line.color",o.paper_bgcolor),c("marker.colors");var g=f._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis;g&&a(n,f,o,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",g?1:.7);var A=c("text");c("texttemplate"),f.texttemplate||c("textinfo",Array.isArray(A)?"text+label":"label"),c("hovertext"),c("hovertemplate");var b="auto";x(n,f,o,c,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("insidetextorientation"),c("sort"),c("rotation"),c("root.color"),m(f,o,c),f._length=null}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1045}],1050:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../components/fx/helpers").appendArrayPointValue,x=e("../../components/fx"),t=e("../../lib"),i=e("../../lib/events"),a=e("./helpers"),r=e("../pie/helpers"),n=r.formatPieValue;I.exports=function(o,c,v,d,p){var y=d[0],g=y.trace,A=y.hierarchy,b=g.type==="sunburst",M=g.type==="treemap"||g.type==="icicle";"_hasHoverLabel"in g||(g._hasHoverLabel=!1),"_hasHoverEvent"in g||(g._hasHoverEvent=!1);var w=function(h){var L=v._fullLayout;if(!(v._dragging||L.hovermode===!1)){var S=v._fullData[g.index],k=h.data.data,P=k.i,O=a.isHierarchyRoot(h),F=a.getParent(A,h),D=a.getValue(h),R=function($){return t.castOption(S,P,$)},U=R("hovertemplate"),N=x.castHoverinfo(S,L,P),X=L.separators,j;if(U||N&&N!=="none"&&N!=="skip"){var ee,q;b&&(ee=y.cx+h.pxmid[0]*(1-h.rInscribed),q=y.cy+h.pxmid[1]*(1-h.rInscribed)),M&&(ee=h._hoverX,q=h._hoverY);var G={},J=[],le=[],fe=function($){return J.indexOf($)!==-1};N&&(J=N==="all"?S._module.attributes.hoverinfo.flags:N.split("+")),G.label=k.label,fe("label")&&G.label&&le.push(G.label),k.hasOwnProperty("v")&&(G.value=k.v,G.valueLabel=n(G.value,X),fe("value")&&le.push(G.valueLabel)),G.currentPath=h.currentPath=a.getPath(h.data),fe("current path")&&!O&&le.push(G.currentPath);var se,V=[],Y=function(){V.indexOf(se)===-1&&(le.push(se),V.push(se))};G.percentParent=h.percentParent=D/a.getValue(F),G.parent=h.parentString=a.getPtLabel(F),fe("percent parent")&&(se=a.formatPercent(G.percentParent,X)+" of "+G.parent,Y()),G.percentEntry=h.percentEntry=D/a.getValue(c),G.entry=h.entry=a.getPtLabel(c),fe("percent entry")&&!O&&!h.onPathbar&&(se=a.formatPercent(G.percentEntry,X)+" of "+G.entry,Y()),G.percentRoot=h.percentRoot=D/a.getValue(A),G.root=h.root=a.getPtLabel(A),fe("percent root")&&!O&&(se=a.formatPercent(G.percentRoot,X)+" of "+G.root,Y()),G.text=R("hovertext")||R("text"),fe("text")&&(se=G.text,t.isValidTextValue(se)&&le.push(se)),j=[f(h,S,p.eventDataKeys)];var ne={trace:S,y:q,_x0:h._x0,_x1:h._x1,_y0:h._y0,_y1:h._y1,text:le.join("<br>"),name:U||fe("name")?S.name:void 0,color:R("hoverlabel.bgcolor")||k.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:U,hovertemplateLabels:G,eventData:j};b&&(ne.x0=ee-h.rInscribed*h.rpx1,ne.x1=ee+h.rInscribed*h.rpx1,ne.idealAlign=h.pxmid[0]<0?"left":"right"),M&&(ne.x=ee,ne.idealAlign=ee<0?"left":"right");var te=[];x.loneHover(ne,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:v,inOut_bbox:te}),j[0].bbox=te[0],g._hasHoverLabel=!0}if(M){var K=o.select("path.surface");p.styleOne(K,h,S,{hovered:!0})}g._hasHoverEvent=!0,v.emit("plotly_hover",{points:j||[f(h,S,p.eventDataKeys)],event:u.event})}},T=function(h){var L=v._fullLayout,S=v._fullData[g.index],k=u.select(this).datum();if(g._hasHoverEvent&&(h.originalEvent=u.event,v.emit("plotly_unhover",{points:[f(k,S,p.eventDataKeys)],event:u.event}),g._hasHoverEvent=!1),g._hasHoverLabel&&(x.loneUnhover(L._hoverlayer.node()),g._hasHoverLabel=!1),M){var P=o.select("path.surface");p.styleOne(P,k,S,{hovered:!1})}},_=function(h){var L=v._fullLayout,S=v._fullData[g.index],k=b&&(a.isHierarchyRoot(h)||a.isLeaf(h)),P=a.getPtId(h),O=a.isEntry(h)?a.findEntryWithChild(A,P):a.findEntryWithLevel(A,P),F=a.getPtId(O),D={points:[f(h,S,p.eventDataKeys)],event:u.event};k||(D.nextLevel=F);var R=i.triggerHandler(v,"plotly_"+g.type+"click",D);if(R!==!1&&L.hovermode&&(v._hoverdata=[f(h,S,p.eventDataKeys)],x.click(v,u.event)),!k&&R!==!1&&!v._dragging&&!v._transitioning){s.call("_storeDirectGUIEdit",S,L._tracePreGUI[S.uid],{level:S.level});var U={data:[{level:F}],traces:[g.index]},N={frame:{redraw:!1,duration:p.transitionTime},transition:{duration:p.transitionTime,easing:p.transitionEasing},mode:"immediate",fromcurrent:!0};x.loneUnhover(L._hoverlayer.node()),s.call("animate",v,U,N)}};o.on("mouseover",w),o.on("mouseout",T),o.on("click",_)};function f(l,o,c){for(var v=l.data.data,d={curveNumber:o.index,pointNumber:v.i,data:o._input,fullData:o},p=0;p<c.length;p++){var y=c[p];y in l&&(d[y]=l[y])}return"parentString"in l&&!a.isHierarchyRoot(l)&&(d.parent=l.parentString),m(d,o,v.i),d}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":905,"./helpers":1051,"@plotly/d3":58}],1051:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color"),m=e("../../lib/setcursor"),x=e("../pie/helpers");B.findEntryWithLevel=function(r,n){var f;return n&&r.eachAfter(function(l){if(B.getPtId(l)===n)return f=l.copy()}),f||r},B.findEntryWithChild=function(r,n){var f;return r.eachAfter(function(l){for(var o=l.children||[],c=0;c<o.length;c++){var v=o[c];if(B.getPtId(v)===n)return f=l.copy()}}),f||r},B.isEntry=function(r){return!r.parent},B.isLeaf=function(r){return!r.children},B.getPtId=function(r){return r.data.data.id},B.getPtLabel=function(r){return r.data.data.label},B.getValue=function(r){return r.value},B.isHierarchyRoot=function(r){return a(r)===""},B.setSliceCursor=function(r,n,f){var l=f.isTransitioning;if(!l){var o=r.datum();l=f.hideOnRoot&&B.isHierarchyRoot(o)||f.hideOnLeaves&&B.isLeaf(o)}m(r,l?null:"pointer")};function t(r,n,f){return{color:B.getOutsideTextFontKey("color",r,n,f),family:B.getOutsideTextFontKey("family",r,n,f),size:B.getOutsideTextFontKey("size",r,n,f)}}function i(r,n,f,l){var o=(l||{}).onPathbar,c=n.data.data,v=c.i,d=u.castOption(r,v,(o?"pathbar.textfont":"insidetextfont")+".color");return!d&&r._input.textfont&&(d=u.castOption(r._input,v,"textfont.color")),{color:d||s.contrast(c.color),family:B.getInsideTextFontKey("family",r,n,f,l),size:B.getInsideTextFontKey("size",r,n,f,l)}}B.getInsideTextFontKey=function(r,n,f,l,o){var c=(o||{}).onPathbar,v=c?"pathbar.textfont":"insidetextfont",d=f.data.data.i;return u.castOption(n,d,v+"."+r)||u.castOption(n,d,"textfont."+r)||l.size},B.getOutsideTextFontKey=function(r,n,f,l){var o=f.data.data.i;return u.castOption(n,o,"outsidetextfont."+r)||u.castOption(n,o,"textfont."+r)||l.size},B.isOutsideText=function(r,n){return!r._hasColorscale&&B.isHierarchyRoot(n)},B.determineTextFont=function(r,n,f,l){return B.isOutsideText(r,n)?t(r,n,f):i(r,n,f,l)},B.hasTransition=function(r){return!!(r&&r.duration>0)},B.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},B.isHeader=function(r,n){return!(B.isLeaf(r)||r.depth===n._maxDepth-1)};function a(r){return r.data.data.pid}B.getParent=function(r,n){return B.findEntryWithLevel(r,a(n))},B.listPath=function(r,n){var f=r.parent;if(!f)return[];var l=n?[f.data[n]]:[f];return B.listPath(f,n).concat(l)},B.getPath=function(r){return B.listPath(r,"label").join("/")+"/"},B.formatValue=x.formatPieValue,B.formatPercent=function(r,n){var f=u.formatPercent(r,0);return f==="0%"&&(f=x.formatPiePercent(r,n)),f}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":905}],1052:[function(e,I,B){I.exports={moduleType:"trace",name:"sunburst",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./layout_attributes":1053,"./layout_defaults":1054,"./plot":1055,"./style":1056}],1053:[function(e,I,B){I.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1054:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("sunburstcolorway",t.colorway),i("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1053}],1055:[function(e,I,B){var u=e("@plotly/d3"),s=e("d3-hierarchy"),m=e("d3-interpolate").interpolate,x=e("../../components/drawing"),t=e("../../lib"),i=e("../../lib/svg_text_utils"),a=e("../bar/uniform_text"),r=a.recordMinTextSize,n=a.clearMinTextSize,f=e("../pie/plot"),l=e("../pie/helpers").getRotationAngle,o=f.computeTransform,c=f.transformInsideText,v=e("./style").styleOne,d=e("../bar/style").resizeText,p=e("./fx"),y=e("./constants"),g=e("./helpers");B.plot=function(_,h,L,S){var k=_._fullLayout,P=k._sunburstlayer,O,F,D=!L,R=!k.uniformtext.mode&&g.hasTransition(L);if(n("sunburst",k),O=P.selectAll("g.trace.sunburst").data(h,function(N){return N[0].trace.uid}),O.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),O.order(),R){S&&(F=S());var U=u.transition().duration(L.duration).ease(L.easing).each("end",function(){F&&F()}).each("interrupt",function(){F&&F()});U.each(function(){P.selectAll("g.trace").each(function(N){A(_,N,this,L)})})}else O.each(function(N){A(_,N,this,L)}),k.uniformtext.mode&&d(_,k._sunburstlayer.selectAll(".trace"),"sunburst");D&&O.exit().remove()};function A(_,h,L,S){var k=_._fullLayout,P=!k.uniformtext.mode&&g.hasTransition(S),O=u.select(L),F=O.selectAll("g.slice"),D=h[0],R=D.trace,U=D.hierarchy,N=g.findEntryWithLevel(U,R.level),X=g.getMaxDepth(R),j=k._size,ee=R.domain,q=j.w*(ee.x[1]-ee.x[0]),G=j.h*(ee.y[1]-ee.y[0]),J=.5*Math.min(q,G),le=D.cx=j.l+j.w*(ee.x[1]+ee.x[0])/2,fe=D.cy=j.t+j.h*(1-ee.y[0])-G/2;if(!N)return F.remove();var se=null,V={};P&&F.each(function(Te){V[g.getPtId(Te)]={rpx0:Te.rpx0,rpx1:Te.rpx1,x0:Te.x0,x1:Te.x1,transform:Te.transform},!se&&g.isEntry(Te)&&(se=Te)});var Y=b(N).descendants(),ne=N.height+1,te=0,K=X;D.hasMultipleRoots&&g.isHierarchyRoot(N)&&(Y=Y.slice(1),ne-=1,te=1,K+=1),Y=Y.filter(function(Te){return Te.y1<=K});var $=l(R.rotation);$&&Y.forEach(function(Te){Te.x0+=$,Te.x1+=$});var ae=Math.min(ne,X),ie=function(Te){return(Te-te)/ae*J},oe=function(Te,Ie){return[Te*Math.cos(Ie),-Te*Math.sin(Ie)]},ue=function(Te){return t.pathAnnulus(Te.rpx0,Te.rpx1,Te.x0,Te.x1,le,fe)},xe=function(Te){return le+w(Te)[0]*(Te.transform.rCenter||0)+(Te.transform.x||0)},he=function(Te){return fe+w(Te)[1]*(Te.transform.rCenter||0)+(Te.transform.y||0)};F=F.data(Y,g.getPtId),F.enter().append("g").classed("slice",!0),P?F.exit().transition().each(function(){var Te=u.select(this),Ie=Te.select("path.surface");Ie.transition().attrTween("d",function(rt){var Ge=Se(rt);return function(ze){return ue(Ge(ze))}});var Ze=Te.select("g.slicetext");Ze.attr("opacity",0)}).remove():F.exit().remove(),F.order();var me=null;if(P&&se){var be=g.getPtId(se);F.each(function(Te){me===null&&g.getPtId(Te)===be&&(me=Te.x1)})}var Ce=F;P&&(Ce=Ce.transition().each("end",function(){var Te=u.select(this);g.setSliceCursor(Te,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Ce.each(function(Te){var Ie=u.select(this),Ze=t.ensureSingle(Ie,"path","surface",function(Ft){Ft.style("pointer-events","all")});Te.rpx0=ie(Te.y0),Te.rpx1=ie(Te.y1),Te.xmid=(Te.x0+Te.x1)/2,Te.pxmid=oe(Te.rpx1,Te.xmid),Te.midangle=-(Te.xmid-Math.PI/2),Te.startangle=-(Te.x0-Math.PI/2),Te.stopangle=-(Te.x1-Math.PI/2),Te.halfangle=.5*Math.min(t.angleDelta(Te.x0,Te.x1)||Math.PI,Math.PI),Te.ring=1-Te.rpx0/Te.rpx1,Te.rInscribed=M(Te),P?Ze.transition().attrTween("d",function(Ft){var Xt=Be(Ft);return function(Pt){return ue(Xt(Pt))}}):Ze.attr("d",ue),Ie.call(p,N,_,h,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(g.setSliceCursor,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:_._transitioning}),Ze.call(v,Te,R);var rt=t.ensureSingle(Ie,"g","slicetext"),Ge=t.ensureSingle(rt,"text","",function(Ft){Ft.attr("data-notex",1)}),ze=t.ensureUniformFontSize(_,g.determineTextFont(R,Te,k.font));Ge.text(B.formatSliceLabel(Te,N,R,h,k)).classed("slicetext",!0).attr("text-anchor","middle").call(x.font,ze).call(i.convertToTspans,_);var We=x.bBox(Ge.node());Te.transform=c(We,Te,D),Te.transform.targetX=xe(Te),Te.transform.targetY=he(Te);var mt=function(Ft,Xt){var Pt=Ft.transform;return o(Pt,Xt),Pt.fontSize=ze.size,r(R.type,Pt,k),t.getTextTransform(Pt)};P?Ge.transition().attrTween("transform",function(Ft){var Xt=Ye(Ft);return function(Pt){return mt(Xt(Pt),We)}}):Ge.attr("transform",mt(Te,We))});function Se(Te){var Ie=g.getPtId(Te),Ze=V[Ie],rt=V[g.getPtId(N)],Ge;if(rt){var ze=(Te.x1>rt.x1?2*Math.PI:0)+$;Ge=Te.rpx1<rt.rpx1?{x0:Te.x0,x1:Te.x1,rpx0:0,rpx1:0}:{x0:ze,x1:ze,rpx0:Te.rpx0,rpx1:Te.rpx1}}else{var We,mt=g.getPtId(Te.parent);F.each(function(Gt){if(g.getPtId(Gt)===mt)return We=Gt});var Ft=We.children,Xt;Ft.forEach(function(Gt,It){if(g.getPtId(Gt)===Ie)return Xt=It});var Pt=Ft.length,Ut=m(We.x0,We.x1);Ge={rpx0:J,rpx1:J,x0:Ut(Xt/Pt),x1:Ut((Xt+1)/Pt)}}return m(Ze,Ge)}function Be(Te){var Ie=V[g.getPtId(Te)],Ze,rt={x0:Te.x0,x1:Te.x1,rpx0:Te.rpx0,rpx1:Te.rpx1};if(Ie)Ze=Ie;else if(se)if(Te.parent)if(me){var Ge=(Te.x1>me?2*Math.PI:0)+$;Ze={x0:Ge,x1:Ge}}else Ze={rpx0:J,rpx1:J},t.extendFlat(Ze,Xe(Te));else Ze={rpx0:0,rpx1:0};else Ze={x0:$,x1:$};return m(Ze,rt)}function Ye(Te){var Ie=V[g.getPtId(Te)],Ze,rt=Te.transform;if(Ie)Ze=Ie;else if(Ze={rpx1:Te.rpx1,transform:{textPosAngle:rt.textPosAngle,scale:0,rotate:rt.rotate,rCenter:rt.rCenter,x:rt.x,y:rt.y}},se)if(Te.parent)if(me){var Ge=Te.x1>me?2*Math.PI:0;Ze.x0=Ze.x1=Ge}else t.extendFlat(Ze,Xe(Te));else Ze.x0=Ze.x1=$;else Ze.x0=Ze.x1=$;var ze=m(Ze.transform.textPosAngle,Te.transform.textPosAngle),We=m(Ze.rpx1,Te.rpx1),mt=m(Ze.x0,Te.x0),Ft=m(Ze.x1,Te.x1),Xt=m(Ze.transform.scale,rt.scale),Pt=m(Ze.transform.rotate,rt.rotate),Ut=rt.rCenter===0?3:Ze.transform.rCenter===0?1/3:1,Gt=m(Ze.transform.rCenter,rt.rCenter),It=function(Ct){return Gt(Math.pow(Ct,Ut))};return function(Ct){var lt=We(Ct),dt=mt(Ct),et=Ft(Ct),Pe=It(Ct),Je=oe(lt,(dt+et)/2),it=ze(Ct),ht={pxmid:Je,rpx1:lt,transform:{textPosAngle:it,rCenter:Pe,x:rt.x,y:rt.y}};return r(R.type,rt,k),{transform:{targetX:xe(ht),targetY:he(ht),scale:Xt(Ct),rotate:Pt(Ct),rCenter:Pe}}}}function Xe(Te){var Ie=Te.parent,Ze=V[g.getPtId(Ie)],rt={};if(Ze){var Ge=Ie.children,ze=Ge.indexOf(Te),We=Ge.length,mt=m(Ze.x0,Ze.x1);rt.x0=mt(ze/We),rt.x1=mt(ze/We)}else rt.x0=rt.x1=0;return rt}}function b(_){return s.partition().size([2*Math.PI,_.height+1])(_)}B.formatSliceLabel=function(_,h,L,S,k){var P=L.texttemplate,O=L.textinfo;if(!P&&(!O||O==="none"))return"";var F=k.separators,D=S[0],R=_.data.data,U=D.hierarchy,N=g.isHierarchyRoot(_),X=g.getParent(U,_),j=g.getValue(_);if(!P){var ee=O.split("+"),q=function(K){return ee.indexOf(K)!==-1},G=[],J;if(q("label")&&R.label&&G.push(R.label),R.hasOwnProperty("v")&&q("value")&&G.push(g.formatValue(R.v,F)),!N){q("current path")&&G.push(g.getPath(_.data));var le=0;q("percent parent")&&le++,q("percent entry")&&le++,q("percent root")&&le++;var fe=le>1;if(le){var se,V=function(K){J=g.formatPercent(se,F),fe&&(J+=" of "+K),G.push(J)};q("percent parent")&&!N&&(se=j/g.getValue(X),V("parent")),q("percent entry")&&(se=j/g.getValue(h),V("entry")),q("percent root")&&(se=j/g.getValue(U),V("root"))}}return q("text")&&(J=t.castOption(L,R.i,"text"),t.isValidTextValue(J)&&G.push(J)),G.join("<br>")}var Y=t.castOption(L,R.i,"texttemplate");if(!Y)return"";var ne={};R.label&&(ne.label=R.label),R.hasOwnProperty("v")&&(ne.value=R.v,ne.valueLabel=g.formatValue(R.v,F)),ne.currentPath=g.getPath(_.data),N||(ne.percentParent=j/g.getValue(X),ne.percentParentLabel=g.formatPercent(ne.percentParent,F),ne.parent=g.getPtLabel(X)),ne.percentEntry=j/g.getValue(h),ne.percentEntryLabel=g.formatPercent(ne.percentEntry,F),ne.entry=g.getPtLabel(h),ne.percentRoot=j/g.getValue(U),ne.percentRootLabel=g.formatPercent(ne.percentRoot,F),ne.root=g.getPtLabel(U),R.hasOwnProperty("color")&&(ne.color=R.color);var te=t.castOption(L,R.i,"text");return(t.isValidTextValue(te)||te==="")&&(ne.text=te),ne.customdata=t.castOption(L,R.i,"customdata"),t.texttemplateString(Y,ne,k._d3locale,ne,L._meta||{})};function M(_){return _.rpx0===0&&t.isFullCircle([_.x0,_.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(_.halfangle)),_.ring/2))}function w(_){return T(_.rpx1,_.transform.textPosAngle)}function T(_,h){return[_*Math.sin(h),-_*Math.cos(h)]}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"./constants":1048,"./fx":1050,"./helpers":1051,"./style":1056,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1056:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../lib"),x=e("../bar/uniform_text").resizeText;function t(a){var r=a._fullLayout._sunburstlayer.selectAll(".trace");x(a,r,"sunburst"),r.each(function(n){var f=u.select(this),l=n[0],o=l.trace;f.style("opacity",o.opacity),f.selectAll("path.surface").each(function(c){u.select(this).call(i,c,o)})})}function i(a,r,n){var f=r.data.data,l=!r.children,o=f.i,c=m.castOption(n,o,"marker.line.color")||s.defaultLine,v=m.castOption(n,o,"marker.line.width")||0;a.style("stroke-width",v).call(s.fill,f.color).call(s.stroke,c).style("opacity",l?n.leaf.opacity:null)}I.exports={style:t,styleOne:i}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1057:[function(e,I,B){var u=e("../../components/color"),s=e("../../components/colorscale/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll;function r(l){return{valType:"boolean",dflt:!1}}function n(l){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:u.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:u.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=I.exports=a(i({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:x(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},s("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n(),y:n(),z:n()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:i({},s.zauto,{}),zmin:i({},s.zmin,{}),zmax:i({},s.zmax,{})},hoverinfo:i({},t.hoverinfo),showlegend:i({},t.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1058:[function(e,I,B){var u=e("../../components/colorscale/calc");I.exports=function(m,x){x.surfacecolor?u(m,x,{vals:x.surfacecolor,containerStr:"",cLetter:"c"}):u(m,x,{vals:x.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1059:[function(e,I,B){var u=e("../../../stackgl_modules").gl_surface3d,s=e("../../../stackgl_modules").ndarray,m=e("../../../stackgl_modules").ndarray_linear_interpolate.d2,x=e("../heatmap/interp2d"),t=e("../heatmap/find_empties"),i=e("../../lib").isArrayOrTypedArray,a=e("../../lib/gl_format_color").parseColorScale,r=e("../../lib/str2rgbarray"),n=e("../../components/colorscale").extractOpts;function f(S,k,P){this.scene=S,this.uid=P,this.surface=k,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var l=f.prototype;l.getXat=function(S,k,P,O){var F=i(this.data.x)?i(this.data.x[0])?this.data.x[k][S]:this.data.x[S]:S;return P===void 0?F:O.d2l(F,0,P)},l.getYat=function(S,k,P,O){var F=i(this.data.y)?i(this.data.y[0])?this.data.y[k][S]:this.data.y[k]:k;return P===void 0?F:O.d2l(F,0,P)},l.getZat=function(S,k,P,O){var F=this.data.z[k][S];return F===null&&this.data.connectgaps&&this.data._interpolatedZ&&(F=this.data._interpolatedZ[k][S]),P===void 0?F:O.d2l(F,0,P)},l.handlePick=function(S){if(S.object===this.surface){var k=(S.data.index[0]-1)/this.dataScaleX-1,P=(S.data.index[1]-1)/this.dataScaleY-1,O=Math.max(Math.min(Math.round(k),this.data.z[0].length-1),0),F=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);S.index=[O,F],S.traceCoordinate=[this.getXat(O,F),this.getYat(O,F),this.getZat(O,F)],S.dataCoordinate=[this.getXat(O,F,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(O,F,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(O,F,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var R=S.dataCoordinate[D];R!=null&&(S.dataCoordinate[D]*=this.scene.dataScale[D])}var U=this.data.hovertext||this.data.text;return Array.isArray(U)&&U[F]&&U[F][O]!==void 0?S.textLabel=U[F][O]:U?S.textLabel=U:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function o(S){var k=S[0].rgb,P=S[S.length-1].rgb;return k[0]===P[0]&&k[1]===P[1]&&k[2]===P[2]&&k[3]===P[3]}var c=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function v(S,k){if(S<k)return 0;for(var P=0;Math.floor(S%k)===0;)S/=k,P++;return P}function d(S){for(var k=[],P=0;P<c.length;P++){var O=c[P];k.push(v(S,O))}return k}function p(S){for(var k=d(S),P=S,O=0;O<c.length;O++)if(k[O]>0){P=c[O];break}return P}function y(S,k){if(!(S<1||k<1)){for(var P=d(S),O=d(k),F=1,D=0;D<c.length;D++)F*=Math.pow(c[D],Math.max(P[D],O[D]));return F}}function g(S){if(S.length!==0){for(var k=1,P=0;P<S.length;P++)k=y(k,S[P]);return k}}l.calcXnums=function(S){var k,P=[];for(k=1;k<S;k++){var O=this.getXat(k-1,0),F=this.getXat(k,0);F!==O&&O!==void 0&&O!==null&&F!==void 0&&F!==null?P[k-1]=Math.abs(F-O):P[k-1]=0}var D=0;for(k=1;k<S;k++)D+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(D/P[k-1]);return P},l.calcYnums=function(S){var k,P=[];for(k=1;k<S;k++){var O=this.getYat(0,k-1),F=this.getYat(0,k);F!==O&&O!==void 0&&O!==null&&F!==void 0&&F!==null?P[k-1]=Math.abs(F-O):P[k-1]=0}var D=0;for(k=1;k<S;k++)D+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(D/P[k-1]);return P};var A=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],b=A[9],M=A[13];l.estimateScale=function(S,k){for(var P=k===0?this.calcXnums(S):this.calcYnums(S),O=1+g(P);O<b;)O*=2;for(;O>M;)O--,O/=p(O),O++,O<b&&(O=M);var F=Math.round(O/S);return F>1?F:1};function w(S,k,P){var O=P[8]+P[2]*k[0]+P[5]*k[1];return S[0]=(P[6]+P[0]*k[0]+P[3]*k[1])/O,S[1]=(P[7]+P[1]*k[0]+P[4]*k[1])/O,S}function T(S,k,P){return _(S,k,w,P),S}function _(S,k,P,O){for(var F=[0,0],D=S.shape[0],R=S.shape[1],U=0;U<D;U++)for(var N=0;N<R;N++)P(F,[U,N],O),S.set(U,N,m(k,F[0],F[1]));return S}l.refineCoords=function(S){for(var k=this.dataScaleX,P=this.dataScaleY,O=S[0].shape[0],F=S[0].shape[1],D=Math.floor(S[0].shape[0]*k+1)|0,R=Math.floor(S[0].shape[1]*P+1)|0,U=1+O+1,N=1+F+1,X=s(new Float32Array(U*N),[U,N]),j=[1/k,0,0,0,1/P,0,0,0,1],ee=0;ee<S.length;++ee){this.surface.padField(X,S[ee]);var q=s(new Float32Array(D*R),[D,R]);T(q,X,j),S[ee]=q}};function h(S,k){for(var P=!1,O=0;O<S.length;O++)if(k===S[O]){P=!0;break}P===!1&&S.push(k)}l.setContourLevels=function(){var S=[[],[],[]],k=[!1,!1,!1],P=!1,O,F,D;for(O=0;O<3;++O)if(this.showContour[O]&&(P=!0,this.contourSize[O]>0&&this.contourStart[O]!==null&&this.contourEnd[O]!==null&&this.contourEnd[O]>this.contourStart[O]))for(k[O]=!0,F=this.contourStart[O];F<this.contourEnd[O];F+=this.contourSize[O])D=F*this.scene.dataScale[O],h(S[O],D);if(P){var R=[[],[],[]];for(O=0;O<3;++O)this.showContour[O]&&(R[O]=k[O]?S[O]:this.scene.contourLevels[O]);this.surface.update({levels:R})}},l.update=function(S){var k=this.scene,P=k.fullSceneLayout,O=this.surface,F=a(S),D=k.dataScale,R=S.z[0].length,U=S._ylength,N=k.contourLevels;this.data=S;var X,j,ee,q,G=[];for(X=0;X<3;X++)for(G[X]=[],j=0;j<R;j++)G[X][j]=[];for(j=0;j<R;j++)for(ee=0;ee<U;ee++)G[0][j][ee]=this.getXat(j,ee,S.xcalendar,P.xaxis),G[1][j][ee]=this.getYat(j,ee,S.ycalendar,P.yaxis),G[2][j][ee]=this.getZat(j,ee,S.zcalendar,P.zaxis);if(S.connectgaps)for(S._emptypoints=t(G[2]),x(G[2],S._emptypoints),S._interpolatedZ=[],j=0;j<R;j++)for(S._interpolatedZ[j]=[],ee=0;ee<U;ee++)S._interpolatedZ[j][ee]=G[2][j][ee];for(X=0;X<3;X++)for(j=0;j<R;j++)for(ee=0;ee<U;ee++)q=G[X][j][ee],q==null?G[X][j][ee]=NaN:q=G[X][j][ee]*=D[X];for(X=0;X<3;X++)for(j=0;j<R;j++)for(ee=0;ee<U;ee++)q=G[X][j][ee],q!=null&&(this.minValues[X]>q&&(this.minValues[X]=q),this.maxValues[X]<q&&(this.maxValues[X]=q));for(X=0;X<3;X++)this.objectOffset[X]=.5*(this.minValues[X]+this.maxValues[X]);for(X=0;X<3;X++)for(j=0;j<R;j++)for(ee=0;ee<U;ee++)q=G[X][j][ee],q!=null&&(G[X][j][ee]-=this.objectOffset[X]);var J=[s(new Float32Array(R*U),[R,U]),s(new Float32Array(R*U),[R,U]),s(new Float32Array(R*U),[R,U])];for(X=0;X<3;X++)for(j=0;j<R;j++)for(ee=0;ee<U;ee++)J[X].set(j,ee,G[X][j][ee]);G=[];var le={colormap:F,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},fe=n(S);if(le.intensityBounds=[fe.min,fe.max],S.surfacecolor){var se=s(new Float32Array(R*U),[R,U]);for(j=0;j<R;j++)for(ee=0;ee<U;ee++)se.set(j,ee,S.surfacecolor[ee][j]);J.push(se)}else le.intensityBounds[0]*=D[2],le.intensityBounds[1]*=D[2];(M<J[0].shape[0]||M<J[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(J[0].shape[0],0),this.dataScaleY=this.estimateScale(J[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(J)),S.surfacecolor&&(le.intensity=J.pop());var V=[!0,!0,!0],Y=["x","y","z"];for(X=0;X<3;++X){var ne=S.contours[Y[X]];V[X]=ne.highlight,le.showContour[X]=ne.show||ne.highlight,!!le.showContour[X]&&(le.contourProject[X]=[ne.project.x,ne.project.y,ne.project.z],ne.show?(this.showContour[X]=!0,le.levels[X]=N[X],O.highlightColor[X]=le.contourColor[X]=r(ne.color),ne.usecolormap?O.highlightTint[X]=le.contourTint[X]=0:O.highlightTint[X]=le.contourTint[X]=1,le.contourWidth[X]=ne.width,this.contourStart[X]=ne.start,this.contourEnd[X]=ne.end,this.contourSize[X]=ne.size):(this.showContour[X]=!1,this.contourStart[X]=null,this.contourEnd[X]=null,this.contourSize[X]=0),ne.highlight&&(le.dynamicColor[X]=r(ne.highlightcolor),le.dynamicWidth[X]=ne.highlightwidth))}o(F)&&(le.vertexColor=!0),le.objectOffset=this.objectOffset,le.coords=J,O.update(le),O.visible=S.visible,O.enableDynamic=V,O.enableHighlight=V,O.snapToData=!0,"lighting"in S&&(O.ambientLight=S.lighting.ambient,O.diffuseLight=S.lighting.diffuse,O.specularLight=S.lighting.specular,O.roughness=S.lighting.roughness,O.fresnel=S.lighting.fresnel),"lightposition"in S&&(O.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},l.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(S,k){var P=S.glplot.gl,O=u({gl:P}),F=new f(S,O,k.uid);return O._trace=F,F.update(k),S.glplot.add(O),F}I.exports=L},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1060:[function(e,I,B){var u=e("../../registry"),s=e("../../lib"),m=e("../../components/colorscale/defaults"),x=e("./attributes"),t=.1;function i(l,o){for(var c=[],v=32,d=0;d<v;d++){var p=d/(v-1),y=o+(1-o)*(1-Math.pow(Math.sin(l*p*Math.PI),2));c.push([p,Math.max(0,Math.min(1,y))])}return c}function a(l){var o=0;if(!Array.isArray(l)||l.length<2||!l[0]||!l[l.length-1]||+l[0][0]!=0||+l[l.length-1][0]!=1)return!1;for(var c=0;c<l.length;c++){var v=l[c];if(v.length!==2||+v[0]<o)return!1;o=+v[0]}return!0}function r(l,o,c,v){var d,p;function y(S,k){return s.coerce(l,o,x,S,k)}var g=y("x"),A=y("y"),b=y("z");if(!b||!b.length||(g?g.length<1:!1)||(A?A.length<1:!1)){o.visible=!1;return}o._xlength=Array.isArray(g)&&s.isArrayOrTypedArray(g[0])?b.length:b[0].length,o._ylength=b.length;var M=u.getComponentMethod("calendars","handleTraceDefaults");M(l,o,["x","y","z"],v),y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),y("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){y(S)});var w=y("surfacecolor"),T=["x","y","z"];for(d=0;d<3;++d){var _="contours."+T[d],h=y(_+".show"),L=y(_+".highlight");if(h||L)for(p=0;p<3;++p)y(_+".project."+T[p]);h&&(y(_+".color"),y(_+".width"),y(_+".usecolormap")),L&&(y(_+".highlightcolor"),y(_+".highlightwidth")),y(_+".start"),y(_+".end"),y(_+".size")}w||(f(l,"zmin","cmin"),f(l,"zmax","cmax"),f(l,"zauto","cauto")),m(l,o,v,y,{prefix:"",cLetter:"c"}),n(l,o,v,y),o._length=null}function n(l,o,c,v){var d=v("opacityscale");d==="max"?o.opacityscale=[[0,t],[1,1]]:d==="min"?o.opacityscale=[[0,1],[1,t]]:d==="extremes"?o.opacityscale=i(1,t):a(d)||(o.opacityscale=void 0)}function f(l,o,c){o in l&&!(c in l)&&(l[c]=l[o])}I.exports={supplyDefaults:r,opacityscaleDefaults:n}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1057}],1061:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),moduleType:"trace",name:"surface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1057,"./calc":1058,"./convert":1059,"./defaults":1060}],1062:[function(e,I,B){var u=e("../../components/annotations/attributes"),s=e("../../lib/extend").extendFlat,m=e("../../plot_api/edit_types").overrideAll,x=e("../../plots/font_attributes"),t=e("../../plots/domain").attributes,i=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,a=I.exports=m({domain:t({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:i("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:s({},u.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:s({},x({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:i("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:s({},u.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:s({},x({arrayOk:!0}))}},"calc","from-root");a.transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1063:[function(e,I,B){var u=e("../../plots/get_data").getModuleCalcData,s=e("./plot"),m="table";B.name=m,B.plot=function(x){var t=u(x.calcdata,m)[0];t.length&&s(x,t)},B.clean=function(x,t,i,a){var r=a._has&&a._has(m),n=t._has&&t._has(m);r&&!n&&a._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1070}],1064:[function(e,I,B){var u=e("../../lib/gup").wrap;I.exports=function(){return u({})}},{"../../lib/gup":500}],1065:[function(e,I,B){I.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1066:[function(e,I,B){var u=e("./constants"),s=e("../../lib/extend").extendFlat,m=e("fast-isnumeric");I.exports=function(c,v){var d=i(v.cells.values),p=function(j){return j.slice(v.header.values.length,j.length)},y=i(v.header.values);y.length&&!y[0].length&&(y[0]=[""],y=i(y));var g=y.concat(p(d).map(function(){return a((y[0]||[""]).length)})),A=v.domain,b=Math.floor(c._fullLayout._size.w*(A.x[1]-A.x[0])),M=Math.floor(c._fullLayout._size.h*(A.y[1]-A.y[0])),w=v.header.values.length?g[0].map(function(){return v.header.height}):[u.emptyHeaderHeight],T=d.length?d[0].map(function(){return v.cells.height}):[],_=w.reduce(t,0),h=M-_,L=h+u.uplift,S=f(T,L),k=f(w,_),P=n(k,[]),O=n(S,P),F={},D=v._fullInput.columnorder.concat(p(d.map(function(j,ee){return ee}))),R=g.map(function(j,ee){var q=Array.isArray(v.columnwidth)?v.columnwidth[Math.min(ee,v.columnwidth.length-1)]:v.columnwidth;return m(q)?Number(q):1}),U=R.reduce(t,0);R=R.map(function(j){return j/U*b});var N=Math.max(x(v.header.line.width),x(v.cells.line.width)),X={key:v.uid+c._context.staticPlot,translateX:A.x[0]*c._fullLayout._size.w,translateY:c._fullLayout._size.h*(1-A.y[1]),size:c._fullLayout._size,width:b,maxLineWidth:N,height:M,columnOrder:D,groupHeight:M,rowBlocks:O,headerRowBlocks:P,scrollY:0,cells:s({},v.cells,{values:d}),headerCells:s({},v.header,{values:g}),gdColumns:g.map(function(j){return j[0]}),gdColumnsOriginalOrder:g.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:g.map(function(j,ee){var q=F[j];F[j]=(q||0)+1;var G=j+"__"+F[j];return{key:G,label:j,specIndex:ee,xIndex:D[ee],xScale:r,x:void 0,calcdata:void 0,columnWidth:R[ee]}})};return X.columns.forEach(function(j){j.calcdata=X,j.x=r(j)}),X};function x(o){if(Array.isArray(o)){for(var c=0,v=0;v<o.length;v++)c=Math.max(c,x(o[v]));return c}return o}function t(o,c){return o+c}function i(o){var c=o.slice(),v=1/0,d=0,p;for(p=0;p<c.length;p++)Array.isArray(c[p])||(c[p]=[c[p]]),v=Math.min(v,c[p].length),d=Math.max(d,c[p].length);if(v!==d)for(p=0;p<c.length;p++){var y=d-c[p].length;y&&(c[p]=c[p].concat(a(y)))}return c}function a(o){for(var c=new Array(o),v=0;v<o;v++)c[v]="";return c}function r(o){return o.calcdata.columns.reduce(function(c,v){return v.xIndex<o.xIndex?c+v.columnWidth:c},0)}function n(o,c){var v=Object.keys(o);return v.map(function(d){return s({},o[d],{auxiliaryBlocks:c})})}function f(o,c){for(var v={},d,p=0,y=0,g=l(),A=0,b=0,M=0;M<o.length;M++)d=o[M],g.rows.push({rowIndex:M,rowHeight:d}),y+=d,(y>=c||M===o.length-1)&&(v[p]=g,g.key=b++,g.firstRowIndex=A,g.lastRowIndex=M,g=l(),p+=y,A=M+1,y=0);return v}function l(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":493,"./constants":1065,"fast-isnumeric":190}],1067:[function(e,I,B){var u=e("../../lib/extend").extendFlat;B.splitToPanels=function(m){var x=[0,0],t=u({},m,{key:"header",type:"header",page:0,prevPages:x,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:u({},m.calcdata,{cells:m.calcdata.headerCells})}),i=u({},m,{key:"cells1",type:"cells",page:0,prevPages:x,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),a=u({},m,{key:"cells2",type:"cells",page:1,prevPages:x,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks});return[i,a,t]},B.splitToCells=function(m){var x=s(m);return(m.values||[]).slice(x[0],x[1]).map(function(t,i){var a=typeof t=="string"&&t.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:i+a,key:x[0]+i,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:t}})};function s(m){var x=m.rowBlocks[m.page],t=x?x.rows[0].rowIndex:0,i=x?t+x.rows.length:0;return[t,i]}},{"../../lib/extend":493}],1068:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("../../plots/domain").defaults;function x(t,i){for(var a=t.columnorder||[],r=t.header.values.length,n=a.slice(0,r),f=n.slice().sort(function(c,v){return c-v}),l=n.map(function(c){return f.indexOf(c)}),o=l.length;o<r;o++)l.push(o);i("columnorder",l)}I.exports=function(i,a,r,n){function f(l,o){return u.coerce(i,a,s,l,o)}m(a,n,f),f("columnwidth"),f("header.values"),f("header.format"),f("header.align"),f("header.prefix"),f("header.suffix"),f("header.height"),f("header.line.width"),f("header.line.color"),f("header.fill.color"),u.coerceFont(f,"header.font",u.extendFlat({},n.font)),x(a,f),f("cells.values"),f("cells.format"),f("cells.align"),f("cells.prefix"),f("cells.suffix"),f("cells.height"),f("cells.line.width"),f("cells.line.color"),f("cells.fill.color"),u.coerceFont(f,"cells.font",u.extendFlat({},n.font)),a._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1062}],1069:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"table",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1062,"./base_plot":1063,"./calc":1064,"./defaults":1068,"./plot":1070}],1070:[function(e,I,B){var u=e("./constants"),s=e("@plotly/d3"),m=e("../../lib"),x=m.numberFormat,t=e("../../lib/gup"),i=e("../../components/drawing"),a=e("../../lib/svg_text_utils"),r=e("../../lib").raiseToTop,n=e("../../lib").strTranslate,f=e("../../lib").cancelTransition,l=e("./data_preparation_helper"),o=e("./data_split_helpers"),c=e("../../components/color");I.exports=function(ae,ie){var oe=!ae._context.staticPlot,ue=ae._fullLayout._paper.selectAll("."+u.cn.table).data(ie.map(function(Ge){var ze=t.unwrap(Ge),We=ze.trace;return l(ae,We)}),t.keyFun);ue.exit().remove(),ue.enter().append("g").classed(u.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ue.attr("width",function(Ge){return Ge.width+Ge.size.l+Ge.size.r}).attr("height",function(Ge){return Ge.height+Ge.size.t+Ge.size.b}).attr("transform",function(Ge){return n(Ge.translateX,Ge.translateY)});var xe=ue.selectAll("."+u.cn.tableControlView).data(t.repeat,t.keyFun),he=xe.enter().append("g").classed(u.cn.tableControlView,!0).style("box-sizing","content-box");if(oe){var me="onwheel"in document?"wheel":"mousewheel";he.on("mousemove",function(Ge){xe.filter(function(ze){return Ge===ze}).call(g,ae)}).on(me,function(Ge){if(!Ge.scrollbarState.wheeling){Ge.scrollbarState.wheeling=!0;var ze=Ge.scrollY+s.event.deltaY,We=q(ae,xe,null,ze)(Ge);We||(s.event.stopPropagation(),s.event.preventDefault()),Ge.scrollbarState.wheeling=!1}}).call(g,ae,!0)}xe.attr("transform",function(Ge){return n(Ge.size.l,Ge.size.t)});var be=xe.selectAll("."+u.cn.scrollBackground).data(t.repeat,t.keyFun);be.enter().append("rect").classed(u.cn.scrollBackground,!0).attr("fill","none"),be.attr("width",function(Ge){return Ge.width}).attr("height",function(Ge){return Ge.height}),xe.each(function(Ge){i.setClipUrl(s.select(this),d(ae,Ge),ae)});var Ce=xe.selectAll("."+u.cn.yColumn).data(function(Ge){return Ge.columns},t.keyFun);Ce.enter().append("g").classed(u.cn.yColumn,!0),Ce.exit().remove(),Ce.attr("transform",function(Ge){return n(Ge.x,0)}),oe&&Ce.call(s.behavior.drag().origin(function(Ge){var ze=s.select(this);return R(ze,Ge,-u.uplift),r(this),Ge.calcdata.columnDragInProgress=!0,g(xe.filter(function(We){return Ge.calcdata.key===We.key}),ae),Ge}).on("drag",function(Ge){var ze=s.select(this),We=function(Xt){return(Ge===Xt?s.event.x:Xt.x)+Xt.columnWidth/2};Ge.x=Math.max(-u.overdrag,Math.min(Ge.calcdata.width+u.overdrag-Ge.columnWidth,s.event.x));var mt=y(Ce).filter(function(Xt){return Xt.calcdata.key===Ge.calcdata.key}),Ft=mt.sort(function(Xt,Pt){return We(Xt)-We(Pt)});Ft.forEach(function(Xt,Pt){Xt.xIndex=Pt,Xt.x=Ge===Xt?Xt.x:Xt.xScale(Xt)}),Ce.filter(function(Xt){return Ge!==Xt}).transition().ease(u.transitionEase).duration(u.transitionDuration).attr("transform",function(Xt){return n(Xt.x,0)}),ze.call(f).attr("transform",n(Ge.x,-u.uplift))}).on("dragend",function(Ge){var ze=s.select(this),We=Ge.calcdata;Ge.x=Ge.xScale(Ge),Ge.calcdata.columnDragInProgress=!1,R(ze,Ge,0),F(ae,We,We.columns.map(function(mt){return mt.xIndex}))})),Ce.each(function(Ge){i.setClipUrl(s.select(this),p(ae,Ge),ae)});var Se=Ce.selectAll("."+u.cn.columnBlock).data(o.splitToPanels,t.keyFun);Se.enter().append("g").classed(u.cn.columnBlock,!0).attr("id",function(Ge){return Ge.key}),Se.style("cursor",function(Ge){return Ge.dragHandle?"ew-resize":Ge.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Be=Se.filter(N),Ye=Se.filter(U);oe&&Ye.call(s.behavior.drag().origin(function(Ge){return s.event.stopPropagation(),Ge}).on("drag",q(ae,xe,-1)).on("dragend",function(){})),A(ae,xe,Be,Se),A(ae,xe,Ye,Se);var Xe=xe.selectAll("."+u.cn.scrollAreaClip).data(t.repeat,t.keyFun);Xe.enter().append("clipPath").classed(u.cn.scrollAreaClip,!0).attr("id",function(Ge){return d(ae,Ge)});var Te=Xe.selectAll("."+u.cn.scrollAreaClipRect).data(t.repeat,t.keyFun);Te.enter().append("rect").classed(u.cn.scrollAreaClipRect,!0).attr("x",-u.overdrag).attr("y",-u.uplift).attr("fill","none"),Te.attr("width",function(Ge){return Ge.width+2*u.overdrag}).attr("height",function(Ge){return Ge.height+u.uplift});var Ie=Ce.selectAll("."+u.cn.columnBoundary).data(t.repeat,t.keyFun);Ie.enter().append("g").classed(u.cn.columnBoundary,!0);var Ze=Ce.selectAll("."+u.cn.columnBoundaryClippath).data(t.repeat,t.keyFun);Ze.enter().append("clipPath").classed(u.cn.columnBoundaryClippath,!0),Ze.attr("id",function(Ge){return p(ae,Ge)});var rt=Ze.selectAll("."+u.cn.columnBoundaryRect).data(t.repeat,t.keyFun);rt.enter().append("rect").classed(u.cn.columnBoundaryRect,!0).attr("fill","none"),rt.attr("width",function(Ge){return Ge.columnWidth+2*v(Ge)}).attr("height",function(Ge){return Ge.calcdata.height+2*v(Ge)+u.uplift}).attr("x",function(Ge){return-v(Ge)}).attr("y",function(Ge){return-v(Ge)}),ee(null,Ye,xe)};function v($){return Math.ceil($.calcdata.maxLineWidth/2)}function d($,ae){return"clip"+$._fullLayout._uid+"_scrollAreaBottomClip_"+ae.key}function p($,ae){return"clip"+$._fullLayout._uid+"_columnBoundaryClippath_"+ae.calcdata.key+"_"+ae.specIndex}function y($){return[].concat.apply([],$.map(function(ae){return ae})).map(function(ae){return ae.__data__})}function g($,ae,ie){function oe(Ce){var Se=Ce.rowBlocks;return V(Se,Se.length-1)+(Se.length?Y(Se[Se.length-1],1/0):1)}var ue=$.selectAll("."+u.cn.scrollbarKit).data(t.repeat,t.keyFun);ue.enter().append("g").classed(u.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),ue.each(function(Ce){var Se=Ce.scrollbarState;Se.totalHeight=oe(Ce),Se.scrollableAreaHeight=Ce.groupHeight-X(Ce),Se.currentlyVisibleHeight=Math.min(Se.totalHeight,Se.scrollableAreaHeight),Se.ratio=Se.currentlyVisibleHeight/Se.totalHeight,Se.barLength=Math.max(Se.ratio*Se.currentlyVisibleHeight,u.goldenRatio*u.scrollbarWidth),Se.barWiggleRoom=Se.currentlyVisibleHeight-Se.barLength,Se.wiggleRoom=Math.max(0,Se.totalHeight-Se.scrollableAreaHeight),Se.topY=Se.barWiggleRoom===0?0:Ce.scrollY/Se.wiggleRoom*Se.barWiggleRoom,Se.bottomY=Se.topY+Se.barLength,Se.dragMultiplier=Se.wiggleRoom/Se.barWiggleRoom}).attr("transform",function(Ce){var Se=Ce.width+u.scrollbarWidth/2+u.scrollbarOffset;return n(Se,X(Ce))});var xe=ue.selectAll("."+u.cn.scrollbar).data(t.repeat,t.keyFun);xe.enter().append("g").classed(u.cn.scrollbar,!0);var he=xe.selectAll("."+u.cn.scrollbarSlider).data(t.repeat,t.keyFun);he.enter().append("g").classed(u.cn.scrollbarSlider,!0),he.attr("transform",function(Ce){return n(0,Ce.scrollbarState.topY||0)});var me=he.selectAll("."+u.cn.scrollbarGlyph).data(t.repeat,t.keyFun);me.enter().append("line").classed(u.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",u.scrollbarWidth).attr("stroke-linecap","round").attr("y1",u.scrollbarWidth/2),me.attr("y2",function(Ce){return Ce.scrollbarState.barLength-u.scrollbarWidth/2}).attr("stroke-opacity",function(Ce){return Ce.columnDragInProgress||!Ce.scrollbarState.barWiggleRoom||ie?0:.4}),me.transition().delay(0).duration(0),me.transition().delay(u.scrollbarHideDelay).duration(u.scrollbarHideDuration).attr("stroke-opacity",0);var be=xe.selectAll("."+u.cn.scrollbarCaptureZone).data(t.repeat,t.keyFun);be.enter().append("line").classed(u.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",u.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Ce){var Se=s.event.y,Be=this.getBoundingClientRect(),Ye=Ce.scrollbarState,Xe=Se-Be.top,Te=s.scale.linear().domain([0,Ye.scrollableAreaHeight]).range([0,Ye.totalHeight]).clamp(!0);Ye.topY<=Xe&&Xe<=Ye.bottomY||q(ae,$,null,Te(Xe-Ye.barLength/2))(Ce)}).call(s.behavior.drag().origin(function(Ce){return s.event.stopPropagation(),Ce.scrollbarState.scrollbarScrollInProgress=!0,Ce}).on("drag",q(ae,$)).on("dragend",function(){})),be.attr("y2",function(Ce){return Ce.scrollbarState.scrollableAreaHeight}),ae._context.staticPlot&&(me.remove(),be.remove())}function A($,ae,ie,oe){var ue=b(ie),xe=M(ue);h(xe);var he=w(xe);S(he);var me=_(xe),be=T(me);L(be),k(be,ae,oe,$),se(xe)}function b($){var ae=$.selectAll("."+u.cn.columnCells).data(t.repeat,t.keyFun);return ae.enter().append("g").classed(u.cn.columnCells,!0),ae.exit().remove(),ae}function M($){var ae=$.selectAll("."+u.cn.columnCell).data(o.splitToCells,function(ie){return ie.keyWithinBlock});return ae.enter().append("g").classed(u.cn.columnCell,!0),ae.exit().remove(),ae}function w($){var ae=$.selectAll("."+u.cn.cellRect).data(t.repeat,function(ie){return ie.keyWithinBlock});return ae.enter().append("rect").classed(u.cn.cellRect,!0),ae}function T($){var ae=$.selectAll("."+u.cn.cellText).data(t.repeat,function(ie){return ie.keyWithinBlock});return ae.enter().append("text").classed(u.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){s.event.stopPropagation()}),ae}function _($){var ae=$.selectAll("."+u.cn.cellTextHolder).data(t.repeat,function(ie){return ie.keyWithinBlock});return ae.enter().append("g").classed(u.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ae}function h($){$.each(function(ae,ie){var oe=ae.calcdata.cells.font,ue=ae.column.specIndex,xe={size:D(oe.size,ue,ie),color:D(oe.color,ue,ie),family:D(oe.family,ue,ie)};ae.rowNumber=ae.key,ae.align=D(ae.calcdata.cells.align,ue,ie),ae.cellBorderWidth=D(ae.calcdata.cells.line.width,ue,ie),ae.font=xe})}function L($){$.each(function(ae){i.font(s.select(this),ae.font)})}function S($){$.attr("width",function(ae){return ae.column.columnWidth}).attr("stroke-width",function(ae){return ae.cellBorderWidth}).each(function(ae){var ie=s.select(this);c.stroke(ie,D(ae.calcdata.cells.line.color,ae.column.specIndex,ae.rowNumber)),c.fill(ie,D(ae.calcdata.cells.fill.color,ae.column.specIndex,ae.rowNumber))})}function k($,ae,ie,oe){$.text(function(ue){var xe=ue.column.specIndex,he=ue.rowNumber,me=ue.value,be=typeof me=="string",Ce=be&&me.match(/<br>/i),Se=!be||Ce;ue.mayHaveMarkup=be&&me.match(/[<&>]/);var Be=P(me);ue.latex=Be;var Ye=Be?"":D(ue.calcdata.cells.prefix,xe,he)||"",Xe=Be?"":D(ue.calcdata.cells.suffix,xe,he)||"",Te=Be?null:D(ue.calcdata.cells.format,xe,he)||null,Ie=Ye+(Te?x(Te)(ue.value):ue.value)+Xe,Ze;ue.wrappingNeeded=!ue.wrapped&&!Se&&!Be&&(Ze=O(Ie)),ue.cellHeightMayIncrease=Ce||Be||ue.mayHaveMarkup||(Ze===void 0?O(Ie):Ze),ue.needsConvertToTspans=ue.mayHaveMarkup||ue.wrappingNeeded||ue.latex;var rt;if(ue.wrappingNeeded){var Ge=u.wrapSplitCharacter===" "?Ie.replace(/<a href=/ig,"<a_href="):Ie,ze=Ge.split(u.wrapSplitCharacter),We=u.wrapSplitCharacter===" "?ze.map(function(mt){return mt.replace(/<a_href=/ig,"<a href=")}):ze;ue.fragments=We.map(function(mt){return{text:mt,width:null}}),ue.fragments.push({fragment:u.wrapSpacer,width:null}),rt=We.join(u.lineBreaker)+u.lineBreaker+u.wrapSpacer}else delete ue.fragments,rt=Ie;return rt}).attr("dy",function(ue){return ue.needsConvertToTspans?0:"0.75em"}).each(function(ue){var xe=this,he=s.select(xe),me=ue.wrappingNeeded?J:le;ue.needsConvertToTspans?a.convertToTspans(he,oe,me(ie,xe,ae,oe,ue)):s.select(xe.parentNode).attr("transform",function(be){return n(fe(be),u.cellPad)}).attr("text-anchor",function(be){return{left:"start",center:"middle",right:"end"}[be.align]})})}function P($){return typeof $=="string"&&$.match(u.latexCheck)}function O($){return $.indexOf(u.wrapSplitCharacter)!==-1}function F($,ae,ie){var oe=ae.gdColumnsOriginalOrder;ae.gdColumns.sort(function(ue,xe){return ie[oe.indexOf(ue)]-ie[oe.indexOf(xe)]}),ae.columnorder=ie,$.emit("plotly_restyle")}function D($,ae,ie){if(Array.isArray($)){var oe=$[Math.min(ae,$.length-1)];return Array.isArray(oe)?oe[Math.min(ie,oe.length-1)]:oe}else return $}function R($,ae,ie){$.transition().ease(u.releaseTransitionEase).duration(u.releaseTransitionDuration).attr("transform",n(ae.x,ie))}function U($){return $.type==="cells"}function N($){return $.type==="header"}function X($){var ae=$.rowBlocks.length?$.rowBlocks[0].auxiliaryBlocks:[];return ae.reduce(function(ie,oe){return ie+Y(oe,1/0)},0)}function j($,ae,ie){for(var oe=[],ue=0,xe=0;xe<$.length;xe++){for(var he=$[xe],me=he.rows,be=0,Ce=0;Ce<me.length;Ce++)be+=me[Ce].rowHeight;he.allRowsHeight=be;var Se=ue+be,Be=ae,Ye=Be+ie;Be<Se&&Ye>ue&&oe.push(xe),ue+=be}return oe}function ee($,ae,ie){var oe=y(ae)[0];if(oe!==void 0){var ue=oe.rowBlocks,xe=oe.calcdata,he=V(ue,ue.length),me=oe.calcdata.groupHeight-X(oe),be=xe.scrollY=Math.max(0,Math.min(he-me,xe.scrollY)),Ce=j(ue,be,me);Ce.length===1&&(Ce[0]===ue.length-1?Ce.unshift(Ce[0]-1):Ce.push(Ce[0]+1)),Ce[0]%2&&Ce.reverse(),ae.each(function(Se,Be){Se.page=Ce[Be],Se.scrollY=be}),ae.attr("transform",function(Se){var Be=V(Se.rowBlocks,Se.page)-Se.scrollY;return n(0,Be)}),$&&(G($,ie,ae,Ce,oe.prevPages,oe,0),G($,ie,ae,Ce,oe.prevPages,oe,1),g(ie,$))}}function q($,ae,ie,oe){return function(xe){var he=xe.calcdata?xe.calcdata:xe,me=ae.filter(function(Be){return he.key===Be.key}),be=ie||he.scrollbarState.dragMultiplier,Ce=he.scrollY;he.scrollY=oe===void 0?he.scrollY+be*s.event.dy:oe;var Se=me.selectAll("."+u.cn.yColumn).selectAll("."+u.cn.columnBlock).filter(U);return ee($,Se,me),he.scrollY===Ce}}function G($,ae,ie,oe,ue,xe,he){var me=oe[he]!==ue[he];me&&(clearTimeout(xe.currentRepaint[he]),xe.currentRepaint[he]=setTimeout(function(){var be=ie.filter(function(Ce,Se){return Se===he&&oe[Se]!==ue[Se]});A($,ae,be,ie),ue[he]=oe[he]}))}function J($,ae,ie,oe){return function(){var xe=s.select(ae.parentNode);xe.each(function(he){var me=he.fragments;xe.selectAll("tspan.line").each(function(Ie,Ze){me[Ze].width=this.getComputedTextLength()});var be=me[me.length-1].width,Ce=me.slice(0,-1),Se=[],Be,Ye,Xe=0,Te=he.column.columnWidth-2*u.cellPad;for(he.value="";Ce.length;)Be=Ce.shift(),Ye=Be.width+be,Xe+Ye>Te&&(he.value+=Se.join(u.wrapSpacer)+u.lineBreaker,Se=[],Xe=0),Se.push(Be.text),Xe+=Ye;Xe&&(he.value+=Se.join(u.wrapSpacer)),he.wrapped=!0}),xe.selectAll("tspan.line").remove(),k(xe.select("."+u.cn.cellText),ie,$,oe),s.select(ae.parentNode.parentNode).call(se)}}function le($,ae,ie,oe,ue){return function(){if(!ue.settledY){var he=s.select(ae.parentNode),me=te(ue),be=ue.key-me.firstRowIndex,Ce=me.rows[be].rowHeight,Se=ue.cellHeightMayIncrease?ae.parentNode.getBoundingClientRect().height+2*u.cellPad:Ce,Be=Math.max(Se,Ce),Ye=Be-me.rows[be].rowHeight;Ye&&(me.rows[be].rowHeight=Be,$.selectAll("."+u.cn.columnCell).call(se),ee(null,$.filter(U),0),g(ie,oe,!0)),he.attr("transform",function(){var Xe=this,Te=Xe.parentNode,Ie=Te.getBoundingClientRect(),Ze=s.select(Xe.parentNode).select("."+u.cn.cellRect).node().getBoundingClientRect(),rt=Xe.transform.baseVal.consolidate(),Ge=Ze.top-Ie.top+(rt?rt.matrix.f:u.cellPad);return n(fe(ue,s.select(Xe.parentNode).select("."+u.cn.cellTextHolder).node().getBoundingClientRect().width),Ge)}),ue.settledY=!0}}}function fe($,ae){switch($.align){case"left":return u.cellPad;case"right":return $.column.columnWidth-(ae||0)-u.cellPad;case"center":return($.column.columnWidth-(ae||0))/2;default:return u.cellPad}}function se($){$.attr("transform",function(ae){var ie=ae.rowBlocks[0].auxiliaryBlocks.reduce(function(he,me){return he+Y(me,1/0)},0),oe=te(ae),ue=Y(oe,ae.key),xe=ue+ie;return n(0,xe)}).selectAll("."+u.cn.cellRect).attr("height",function(ae){return K(te(ae),ae.key).rowHeight})}function V($,ae){for(var ie=0,oe=ae-1;oe>=0;oe--)ie+=ne($[oe]);return ie}function Y($,ae){for(var ie=0,oe=0;oe<$.rows.length&&$.rows[oe].rowIndex<ae;oe++)ie+=$.rows[oe].rowHeight;return ie}function ne($){var ae=$.allRowsHeight;if(ae!==void 0)return ae;for(var ie=0,oe=0;oe<$.rows.length;oe++)ie+=$.rows[oe].rowHeight;return $.allRowsHeight=ie,ie}function te($){return $.rowBlocks[$.page]}function K($,ae){return $.rows[ae-$.firstRowIndex]}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1065,"./data_preparation_helper":1066,"./data_split_helpers":1067,"@plotly/d3":58}],1071:[function(e,I,B){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../components/colorscale/attributes"),x=e("../../plots/domain").attributes,t=e("../pie/attributes"),i=e("../sunburst/attributes"),a=e("./constants"),r=e("../../lib/extend").extendFlat;I.exports={labels:i.labels,parents:i.parents,values:i.values,branchvalues:i.branchvalues,count:i.count,level:i.level,maxdepth:i.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:i.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:i.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},t.textfont,{}),editType:"calc"},text:t.text,textinfo:i.textinfo,texttemplate:s({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:i.hoverinfo,hovertemplate:u({},{keys:a.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:r({},t.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:t.sort,root:i.root,domain:x({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"./constants":1074}],1072:[function(e,I,B){var u=e("../../plots/plots");B.name="treemap",B.plot=function(s,m,x,t){u.plotBasePlot(B.name,s,m,x,t)},B.clean=function(s,m,x,t){u.cleanBasePlot(B.name,s,m,x,t)}},{"../../plots/plots":619}],1073:[function(e,I,B){var u=e("../sunburst/calc");B.calc=function(s,m){return u.calc(s,m)},B.crossTraceCalc=function(s){return u._runCrossTraceCalc("treemap",s)}},{"../sunburst/calc":1047}],1074:[function(e,I,B){I.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1075:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("../../components/color"),x=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,i=e("../bar/constants").TEXTPAD,a=e("../../components/colorscale"),r=a.hasColorscale,n=a.handleDefaults;I.exports=function(l,o,c,v){function d(k,P){return u.coerce(l,o,s,k,P)}var p=d("labels"),y=d("parents");if(!p||!p.length||!y||!y.length){o.visible=!1;return}var g=d("values");g&&g.length?d("branchvalues"):d("count"),d("level"),d("maxdepth");var A=d("tiling.packing");A==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var b=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(b)?"text+label":"label"),d("hovertext"),d("hovertemplate");var M=d("pathbar.visible"),w="auto";t(l,o,v,d,w,{hasPathbar:M,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var T=o.textposition.indexOf("bottom")!==-1,_=d("marker.line.width");_&&d("marker.line.color",v.paper_bgcolor);var h=d("marker.colors"),L=o._hasColorscale=r(l,"marker","colors")||(l.marker||{}).coloraxis;L?n(l,o,v,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(h||[]).length);var S=o.textfont.size*2;d("marker.pad.t",T?S/4:S),d("marker.pad.l",S/4),d("marker.pad.r",S/4),d("marker.pad.b",T?S:S/4),o._hovered={marker:{line:{width:2,color:m.contrast(v.paper_bgcolor)}}},M&&(d("pathbar.thickness",o.pathbar.textfont.size+2*i),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),x(o,v,d),o._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1071}],1076:[function(e,I,B){var u=e("@plotly/d3"),s=e("../sunburst/helpers"),m=e("../bar/uniform_text"),x=m.clearMinTextSize,t=e("../bar/style").resizeText,i=e("./plot_one");I.exports=function(r,n,f,l,o){var c=o.type,v=o.drawDescendants,d=r._fullLayout,p=d["_"+c+"layer"],y,g,A=!f;if(x(c,d),y=p.selectAll("g.trace."+c).data(n,function(M){return M[0].trace.uid}),y.enter().append("g").classed("trace",!0).classed(c,!0),y.order(),!d.uniformtext.mode&&s.hasTransition(f)){l&&(g=l());var b=u.transition().duration(f.duration).ease(f.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()});b.each(function(){p.selectAll("g.trace").each(function(M){i(r,M,this,f,v)})})}else y.each(function(M){i(r,M,this,f,v)}),d.uniformtext.mode&&t(r,p.selectAll(".trace"),c);A&&y.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./plot_one":1085,"@plotly/d3":58}],1077:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../lib/svg_text_utils"),t=e("./partition"),i=e("./style").styleOne,a=e("./constants"),r=e("../sunburst/helpers"),n=e("../sunburst/fx"),f=!0;I.exports=function(o,c,v,d,p){var y=p.barDifY,g=p.width,A=p.height,b=p.viewX,M=p.viewY,w=p.pathSlice,T=p.toMoveInsideSlice,_=p.strTransform,h=p.hasTransition,L=p.handleSlicesExit,S=p.makeUpdateSliceInterpolator,k=p.makeUpdateTextInterpolator,P={},O=o._fullLayout,F=c[0],D=F.trace,R=F.hierarchy,U=g/D._entryDepth,N=r.listPath(v.data,"id"),X=t(R.copy(),[g,A],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();X=X.filter(function(ee){var q=N.indexOf(ee.data.id);return q===-1?!1:(ee.x0=U*q,ee.x1=U*(q+1),ee.y0=y,ee.y1=y+A,ee.onPathbar=!0,!0)}),X.reverse(),d=d.data(X,r.getPtId),d.enter().append("g").classed("pathbar",!0),L(d,f,P,[g,A],w),d.order();var j=d;h&&(j=j.transition().each("end",function(){var ee=u.select(this);r.setSliceCursor(ee,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(ee){ee._x0=b(ee.x0),ee._x1=b(ee.x1),ee._y0=M(ee.y0),ee._y1=M(ee.y1),ee._hoverX=b(ee.x1-Math.min(g,A)/2),ee._hoverY=M(ee.y1-A/2);var q=u.select(this),G=s.ensureSingle(q,"path","surface",function(se){se.style("pointer-events","all")});h?G.transition().attrTween("d",function(se){var V=S(se,f,P,[g,A]);return function(Y){return w(V(Y))}}):G.attr("d",w),q.call(n,v,o,c,{styleOne:i,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:o._transitioning}),G.call(i,ee,D,{hovered:!1}),ee._text=(r.getPtLabel(ee)||"").split("<br>").join(" ")||"";var J=s.ensureSingle(q,"g","slicetext"),le=s.ensureSingle(J,"text","",function(se){se.attr("data-notex",1)}),fe=s.ensureUniformFontSize(o,r.determineTextFont(D,ee,O.font,{onPathbar:!0}));le.text(ee._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(m.font,fe).call(x.convertToTspans,o),ee.textBB=m.bBox(le.node()),ee.transform=T(ee,{fontSize:fe.size,onPathbar:!0}),ee.transform.fontSize=fe.size,h?le.transition().attrTween("transform",function(se){var V=k(se,f,P,[g,A]);return function(Y){return _(V(Y))}}):le.attr("transform",_(ee))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1078:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../lib/svg_text_utils"),t=e("./partition"),i=e("./style").styleOne,a=e("./constants"),r=e("../sunburst/helpers"),n=e("../sunburst/fx"),f=e("../sunburst/plot").formatSliceLabel,l=!1;I.exports=function(c,v,d,p,y){var g=y.width,A=y.height,b=y.viewX,M=y.viewY,w=y.pathSlice,T=y.toMoveInsideSlice,_=y.strTransform,h=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,k=y.makeUpdateTextInterpolator,P=y.prevEntry,O={},F=c._fullLayout,D=v[0],R=D.trace,U=R.textposition.indexOf("left")!==-1,N=R.textposition.indexOf("right")!==-1,X=R.textposition.indexOf("bottom")!==-1,j=!X&&!R.marker.pad.t||X&&!R.marker.pad.b,ee=t(d,[g,A],{packing:R.tiling.packing,squarifyratio:R.tiling.squarifyratio,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,pad:{inner:R.tiling.pad,top:R.marker.pad.t,left:R.marker.pad.l,right:R.marker.pad.r,bottom:R.marker.pad.b}}),q=ee.descendants(),G=1/0,J=-1/0;q.forEach(function(Y){var ne=Y.depth;ne>=R._maxDepth?(Y.x0=Y.x1=(Y.x0+Y.x1)/2,Y.y0=Y.y1=(Y.y0+Y.y1)/2):(G=Math.min(G,ne),J=Math.max(J,ne))}),p=p.data(q,r.getPtId),R._maxVisibleLayers=isFinite(J)?J-G+1:0,p.enter().append("g").classed("slice",!0),L(p,l,O,[g,A],w),p.order();var le=null;if(h&&P){var fe=r.getPtId(P);p.each(function(Y){le===null&&r.getPtId(Y)===fe&&(le={x0:Y.x0,x1:Y.x1,y0:Y.y0,y1:Y.y1})})}var se=function(){return le||{x0:0,x1:g,y0:0,y1:A}},V=p;return h&&(V=V.transition().each("end",function(){var Y=u.select(this);r.setSliceCursor(Y,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(Y){var ne=r.isHeader(Y,R);Y._x0=b(Y.x0),Y._x1=b(Y.x1),Y._y0=M(Y.y0),Y._y1=M(Y.y1),Y._hoverX=b(Y.x1-R.marker.pad.r),Y._hoverY=M(X?Y.y1-R.marker.pad.b/2:Y.y0+R.marker.pad.t/2);var te=u.select(this),K=s.ensureSingle(te,"path","surface",function(oe){oe.style("pointer-events","all")});h?K.transition().attrTween("d",function(oe){var ue=S(oe,l,se(),[g,A]);return function(xe){return w(ue(xe))}}):K.attr("d",w),te.call(n,d,c,v,{styleOne:i,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,c,{isTransitioning:c._transitioning}),K.call(i,Y,R,{hovered:!1}),Y.x0===Y.x1||Y.y0===Y.y1?Y._text="":ne?Y._text=j?"":r.getPtLabel(Y)||"":Y._text=f(Y,d,R,v,F)||"";var $=s.ensureSingle(te,"g","slicetext"),ae=s.ensureSingle($,"text","",function(oe){oe.attr("data-notex",1)}),ie=s.ensureUniformFontSize(c,r.determineTextFont(R,Y,F.font));ae.text(Y._text||" ").classed("slicetext",!0).attr("text-anchor",N?"end":U||ne?"start":"middle").call(m.font,ie).call(x.convertToTspans,c),Y.textBB=m.bBox(ae.node()),Y.transform=T(Y,{fontSize:ie.size,isHeader:ne}),Y.transform.fontSize=ie.size,h?ae.transition().attrTween("transform",function(oe){var ue=k(oe,l,se(),[g,A]);return function(xe){return _(ue(xe))}}):ae.attr("transform",_(Y))}),le}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1079:[function(e,I,B){I.exports=function u(s,m,x){var t;x.swapXY&&(t=s.x0,s.x0=s.y0,s.y0=t,t=s.x1,s.x1=s.y1,s.y1=t),x.flipX&&(t=s.x0,s.x0=m[0]-s.x1,s.x1=m[0]-t),x.flipY&&(t=s.y0,s.y0=m[1]-s.y1,s.y1=m[1]-t);var i=s.children;if(i)for(var a=0;a<i.length;a++)u(i[a],m,x)}},{}],1080:[function(e,I,B){I.exports={moduleType:"trace",name:"treemap",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1071,"./base_plot":1072,"./calc":1073,"./defaults":1075,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1084,"./style":1086}],1081:[function(e,I,B){I.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1082:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("treemapcolorway",t.colorway),i("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1081}],1083:[function(e,I,B){var u=e("d3-hierarchy"),s=e("./flip_tree");I.exports=function(t,i,a){var r=a.flipX,n=a.flipY,f=a.packing==="dice-slice",l=a.pad[n?"bottom":"top"],o=a.pad[r?"right":"left"],c=a.pad[r?"left":"right"],v=a.pad[n?"top":"bottom"],d;f&&(d=o,o=l,l=d,d=c,c=v,v=d);var p=u.treemap().tile(m(a.packing,a.squarifyratio)).paddingInner(a.pad.inner).paddingLeft(o).paddingRight(c).paddingTop(l).paddingBottom(v).size(f?[i[1],i[0]]:i)(t);return(f||r||n)&&s(p,i,{swapXY:f,flipX:r,flipY:n}),p};function m(x,t){switch(x){case"squarify":return u.treemapSquarify.ratio(t);case"binary":return u.treemapBinary;case"dice":return u.treemapDice;case"slice":return u.treemapSlice;default:return u.treemapSliceDice}}},{"./flip_tree":1079,"d3-hierarchy":115}],1084:[function(e,I,B){var u=e("./draw"),s=e("./draw_descendants");I.exports=function(x,t,i,a){return u(x,t,i,a,{type:"treemap",drawDescendants:s})}},{"./draw":1076,"./draw_descendants":1078}],1085:[function(e,I,B){var u=e("@plotly/d3"),s=e("d3-interpolate").interpolate,m=e("../sunburst/helpers"),x=e("../../lib"),t=e("../bar/constants").TEXTPAD,i=e("../bar/plot"),a=i.toMoveInsideBar,r=e("../bar/uniform_text"),n=r.recordMinTextSize,f=e("./constants"),l=e("./draw_ancestors");function o(c){return m.isHierarchyRoot(c)?"":m.getPtId(c)}I.exports=function(v,d,p,y,g){var A=v._fullLayout,b=d[0],M=b.trace,w=M.type,T=w==="icicle",_=b.hierarchy,h=m.findEntryWithLevel(_,M.level),L=u.select(p),S=L.selectAll("g.pathbar"),k=L.selectAll("g.slice");if(!h){S.remove(),k.remove();return}var P=m.isHierarchyRoot(h),O=!A.uniformtext.mode&&m.hasTransition(y),F=m.getMaxDepth(M),D=function(We){return We.data.depth-h.data.depth<F},R=A._size,U=M.domain,N=R.w*(U.x[1]-U.x[0]),X=R.h*(U.y[1]-U.y[0]),j=N,ee=M.pathbar.thickness,q=M.marker.line.width+f.gapWithPathbar,G=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?X+q:-(ee+q):0,J={x0:j,x1:j,y0:G,y1:G+ee},le=function(We,mt,Ft){var Xt=M.tiling.pad,Pt=function(Ct){return Ct-Xt<=mt.x0},Ut=function(Ct){return Ct+Xt>=mt.x1},Gt=function(Ct){return Ct-Xt<=mt.y0},It=function(Ct){return Ct+Xt>=mt.y1};return We.x0===mt.x0&&We.x1===mt.x1&&We.y0===mt.y0&&We.y1===mt.y1?{x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1}:{x0:Pt(We.x0-Xt)?0:Ut(We.x0-Xt)?Ft[0]:We.x0,x1:Pt(We.x1+Xt)?0:Ut(We.x1+Xt)?Ft[0]:We.x1,y0:Gt(We.y0-Xt)?0:It(We.y0-Xt)?Ft[1]:We.y0,y1:Gt(We.y1+Xt)?0:It(We.y1+Xt)?Ft[1]:We.y1}},fe=null,se={},V={},Y=null,ne=function(We,mt){return mt?se[o(We)]:V[o(We)]},te=function(We,mt,Ft,Xt){if(mt)return se[o(_)]||J;var Pt=V[M.level]||Ft;return D(We)?le(We,Pt,Xt):{}};b.hasMultipleRoots&&P&&F++,M._maxDepth=F,M._backgroundColor=A.paper_bgcolor,M._entryDepth=h.data.depth,M._atRootLevel=P;var K=-N/2+R.l+R.w*(U.x[1]+U.x[0])/2,$=-X/2+R.t+R.h*(1-(U.y[1]+U.y[0])/2),ae=function(We){return K+We},ie=function(We){return $+We},oe=ie(0),ue=ae(0),xe=function(We){return ue+We},he=function(We){return oe+We};function me(We,mt){return We+","+mt}var be=xe(0),Ce=function(We){We.x=Math.max(be,We.x)},Se=M.pathbar.edgeshape,Be=function(We){var mt=xe(Math.max(Math.min(We.x0,We.x0),0)),Ft=xe(Math.min(Math.max(We.x1,We.x1),j)),Xt=he(We.y0),Pt=he(We.y1),Ut=ee/2,Gt={},It={};Gt.x=mt,It.x=Ft,Gt.y=It.y=(Xt+Pt)/2;var Ct={x:mt,y:Xt},lt={x:Ft,y:Xt},dt={x:Ft,y:Pt},et={x:mt,y:Pt};return Se===">"?(Ct.x-=Ut,lt.x-=Ut,dt.x-=Ut,et.x-=Ut):Se==="/"?(dt.x-=Ut,et.x-=Ut,Gt.x-=Ut/2,It.x-=Ut/2):Se==="\\"?(Ct.x-=Ut,lt.x-=Ut,Gt.x-=Ut/2,It.x-=Ut/2):Se==="<"&&(Gt.x-=Ut,It.x-=Ut),Ce(Ct),Ce(et),Ce(Gt),Ce(lt),Ce(dt),Ce(It),"M"+me(Ct.x,Ct.y)+"L"+me(lt.x,lt.y)+"L"+me(It.x,It.y)+"L"+me(dt.x,dt.y)+"L"+me(et.x,et.y)+"L"+me(Gt.x,Gt.y)+"Z"},Ye=function(We){var mt=ae(We.x0),Ft=ae(We.x1),Xt=ie(We.y0),Pt=ie(We.y1),Ut=Ft-mt,Gt=Pt-Xt;if(!Ut||!Gt)return"";var It=0,Ct=Ut>2*It&&Gt>2*It?It:0,lt=function(dt,et){return Ct?"a"+me(Ct,Ct)+" 0 0 1 "+me(dt,et):""};return"M"+me(mt,Xt+Ct)+lt(Ct,-Ct)+"L"+me(Ft-Ct,Xt)+lt(Ct,Ct)+"L"+me(Ft,Pt-Ct)+lt(-Ct,Ct)+"L"+me(mt+Ct,Pt)+lt(-Ct,-Ct)+"Z"},Xe=function(We,mt){var Ft=We.x0,Xt=We.x1,Pt=We.y0,Ut=We.y1,Gt=We.textBB,It=function(Vt){return M.textposition.indexOf(Vt)!==-1},Ct=It("bottom"),lt=It("top")||mt.isHeader&&!Ct,dt=lt?"start":Ct?"end":"middle",et=It("right"),Pe=It("left")||mt.onPathbar,Je=Pe?-1:et?1:0,it=M[T?"tiling":"marker"].pad;if(mt.isHeader){if(Ft+=(T?it:it.l)-t,Xt-=(T?it:it.r)-t,Ft>=Xt){var ht=(Ft+Xt)/2;Ft=ht,Xt=ht}var zt;Ct?(zt=Ut-(T?it:it.b),Pt<zt&&zt<Ut&&(Pt=zt)):(zt=Pt+(T?it:it.t),Pt<zt&&zt<Ut&&(Ut=zt))}var Lt=a(Ft,Xt,Pt,Ut,Gt,{isHorizontal:!1,constrained:!0,angle:0,anchor:dt,leftToRight:Je});return Lt.fontSize=mt.fontSize,Lt.targetX=ae(Lt.targetX),Lt.targetY=ie(Lt.targetY),isNaN(Lt.targetX)||isNaN(Lt.targetY)?{}:(Ft!==Xt&&Pt!==Ut&&n(M.type,Lt,A),{scale:Lt.scale,rotate:Lt.rotate,textX:Lt.textX,textY:Lt.textY,anchorX:Lt.anchorX,anchorY:Lt.anchorY,targetX:Lt.targetX,targetY:Lt.targetY})},Te=function(We,mt){for(var Ft,Xt=0,Pt=We;!Ft&&Xt<F;)Xt++,Pt=Pt.parent,Pt?Ft=ne(Pt,mt):Xt=F;return Ft||{}},Ie=function(We,mt,Ft,Xt){var Pt=ne(We,mt),Ut;if(mt)Ut=J;else{var Gt=ne(h,mt);Gt?Ut=le(We,Gt,Xt):Ut={}}return s(Pt,Ut)},Ze=function(We,mt,Ft,Xt,Pt){var Ut=ne(We,mt),Gt;if(Ut)Gt=Ut;else if(mt)Gt=J;else if(fe)if(We.parent){var It=Y||Ft;It&&!mt?Gt=le(We,It,Xt):(Gt={},x.extendFlat(Gt,Te(We,mt)))}else Gt=x.extendFlat({},We),T&&(Pt.orientation==="h"?Pt.flipX?Gt.x0=We.x1:Gt.x1=0:Pt.flipY?Gt.y0=We.y1:Gt.y1=0);else Gt={};return s(Gt,{x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1})},rt=function(We,mt,Ft,Xt){var Pt=ne(We,mt),Ut={},Gt=te(We,mt,Ft,Xt);x.extendFlat(Ut,{transform:Xe({x0:Gt.x0,x1:Gt.x1,y0:Gt.y0,y1:Gt.y1,textBB:We.textBB,_text:We._text},{isHeader:m.isHeader(We,M)})}),Pt?Ut=Pt:We.parent&&x.extendFlat(Ut,Te(We,mt));var It=We.transform;return We.x0!==We.x1&&We.y0!==We.y1&&n(M.type,It,A),s(Ut,{transform:{scale:It.scale,rotate:It.rotate,textX:It.textX,textY:It.textY,anchorX:It.anchorX,anchorY:It.anchorY,targetX:It.targetX,targetY:It.targetY}})},Ge=function(We,mt,Ft,Xt,Pt){var Ut=Xt[0],Gt=Xt[1];O?We.exit().transition().each(function(){var It=u.select(this),Ct=It.select("path.surface");Ct.transition().attrTween("d",function(dt){var et=Ie(dt,mt,Ft,[Ut,Gt]);return function(Pe){return Pt(et(Pe))}});var lt=It.select("g.slicetext");lt.attr("opacity",0)}).remove():We.exit().remove()},ze=function(We){var mt=We.transform;return We.x0!==We.x1&&We.y0!==We.y1&&n(M.type,mt,A),x.getTextTransform({textX:mt.textX,textY:mt.textY,anchorX:mt.anchorX,anchorY:mt.anchorY,targetX:mt.targetX,targetY:mt.targetY,scale:mt.scale,rotate:mt.rotate})};O&&(S.each(function(We){se[o(We)]={x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1},We.transform&&(se[o(We)].transform={textX:We.transform.textX,textY:We.transform.textY,anchorX:We.transform.anchorX,anchorY:We.transform.anchorY,targetX:We.transform.targetX,targetY:We.transform.targetY,scale:We.transform.scale,rotate:We.transform.rotate})}),k.each(function(We){V[o(We)]={x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1},We.transform&&(V[o(We)].transform={textX:We.transform.textX,textY:We.transform.textY,anchorX:We.transform.anchorX,anchorY:We.transform.anchorY,targetX:We.transform.targetX,targetY:We.transform.targetY,scale:We.transform.scale,rotate:We.transform.rotate}),!fe&&m.isEntry(We)&&(fe=We)})),Y=g(v,d,h,k,{width:N,height:X,viewX:ae,viewY:ie,pathSlice:Ye,toMoveInsideSlice:Xe,prevEntry:fe,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:rt,handleSlicesExit:Ge,hasTransition:O,strTransform:ze}),M.pathbar.visible?l(v,d,h,S,{barDifY:G,width:j,height:ee,viewX:xe,viewY:he,pathSlice:Be,toMoveInsideSlice:Xe,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:rt,handleSlicesExit:Ge,hasTransition:O,strTransform:ze}):S.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./constants":1074,"./draw_ancestors":1077,"@plotly/d3":58,"d3-interpolate":116}],1086:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../lib"),x=e("../sunburst/helpers"),t=e("../bar/uniform_text").resizeText;function i(r){var n=r._fullLayout._treemaplayer.selectAll(".trace");t(r,n,"treemap"),n.each(function(f){var l=u.select(this),o=f[0],c=o.trace;l.style("opacity",c.opacity),l.selectAll("path.surface").each(function(v){u.select(this).call(a,v,c,{hovered:!1})})})}function a(r,n,f,l){var o=(l||{}).hovered,c=n.data.data,v=c.i,d,p,y=c.color,g=x.isHierarchyRoot(n),A=1;if(o)d=f._hovered.marker.line.color,p=f._hovered.marker.line.width;else if(g&&y===f.root.color)A=100,d="rgba(0,0,0,0)",p=0;else if(d=m.castOption(f,v,"marker.line.color")||s.defaultLine,p=m.castOption(f,v,"marker.line.width")||0,!f._hasColorscale&&!n.onPathbar){var b=f.marker.depthfade;if(b){var M=s.combine(s.addOpacity(f._backgroundColor,.75),y),w;if(b===!0){var T=x.getMaxDepth(f);isFinite(T)?x.isLeaf(n)?w=0:w=f._maxVisibleLayers-(n.data.depth-f._entryDepth):w=n.data.height+1}else w=n.data.depth-f._entryDepth,f._atRootLevel||w++;if(w>0)for(var _=0;_<w;_++){var h=.5*_/w;y=s.combine(s.addOpacity(M,h),y)}}}r.style("stroke-width",p).call(s.fill,y).call(s.stroke,d).style("opacity",A)}I.exports={style:i,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1051,"@plotly/d3":58}],1087:[function(e,I,B){var u=e("../box/attributes"),s=e("../../lib/extend").extendFlat,m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;I.exports={y:u.y,x:u.x,x0:u.x0,y0:u.y0,xhoverformat:m("x"),yhoverformat:m("y"),name:s({},u.name,{}),orientation:s({},u.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:u.fillcolor,points:s({},u.boxpoints,{}),jitter:s({},u.jitter,{}),pointpos:s({},u.pointpos,{}),width:s({},u.width,{}),marker:u.marker,text:u.text,hovertext:u.hovertext,hovertemplate:u.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:u.offsetgroup,alignmentgroup:u.alignmentgroup,selected:u.selected,unselected:u.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1088:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../box/calc"),x=e("./helpers"),t=e("../../constants/numerical").BADNUM;I.exports=function(f,l){var o=m(f,l);if(o[0].t.empty)return o;for(var c=f._fullLayout,v=s.getFromId(f,l[l.orientation==="h"?"xaxis":"yaxis"]),d=1/0,p=-1/0,y=0,g=0,A=0;A<o.length;A++){var b=o[A],M=b.pts.map(x.extractVal),w=b.bandwidth=a(l,b,M),T=b.span=r(l,b,v,w);if(b.min===b.max&&w===0)T=b.span=[b.min,b.max],b.density=[{v:1,t:T[0]}],b.bandwidth=w,y=Math.max(y,1);else{var _=T[1]-T[0],h=Math.ceil(_/(w/3)),L=_/h;if(!isFinite(L)||!isFinite(h))return u.error("Something went wrong with computing the violin span"),o[0].t.empty=!0,o;var S=x.makeKDE(b,l,M);b.density=new Array(h);for(var k=0,P=T[0];P<T[1]+L/2;k++,P+=L){var O=S(P);b.density[k]={v:O,t:P},y=Math.max(y,O)}}g=Math.max(g,M.length),d=Math.min(d,T[0]),p=Math.max(p,T[1])}var F=s.findExtremes(v,[d,p],{padded:!0});if(l._extremes[v._id]=F,l.width)o[0].t.maxKDE=y;else{var D=c._violinScaleGroupStats,R=l.scalegroup,U=D[R];U?(U.maxKDE=Math.max(U.maxKDE,y),U.maxCount=Math.max(U.maxCount,g)):D[R]={maxKDE:y,maxCount:g}}return o[0].t.labels.kde=u._(f,"kde:"),o};function i(n,f,l){var o=Math.min(f,l/1.349);return 1.059*o*Math.pow(n,-.2)}function a(n,f,l){var o=f.max-f.min;if(!o)return n.bandwidth?n.bandwidth:0;if(n.bandwidth)return Math.max(n.bandwidth,o/1e4);var c=l.length,v=u.stdev(l,c-1,f.mean);return Math.max(i(c,v,f.q3-f.q1),o/100)}function r(n,f,l,o){var c=n.spanmode,v=n.span||[],d=[f.min,f.max],p=[f.min-2*o,f.max+2*o],y;function g(b){var M=v[b],w=l.type==="multicategory"?l.r2c(M):l.d2c(M,0,n[f.valLetter+"calendar"]);return w===t?p[b]:w}c==="soft"?y=p:c==="hard"?y=d:y=[g(0),g(1)];var A={type:"linear",range:y};return s.setConvert(A),A.cleanRange(),y}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1091}],1089:[function(e,I,B){var u=e("../box/cross_trace_calc").setPositionOffset,s=["v","h"];I.exports=function(x,t){for(var i=x.calcdata,a=t.xaxis,r=t.yaxis,n=0;n<s.length;n++){for(var f=s[n],l=f==="h"?r:a,o=[],c=0;c<i.length;c++){var v=i[c],d=v[0].t,p=v[0].trace;p.visible===!0&&p.type==="violin"&&!d.empty&&p.orientation===f&&p.xaxis===a._id&&p.yaxis===r._id&&o.push(c)}u("violin",x,o,l)}}},{"../box/cross_trace_calc":675}],1090:[function(e,I,B){var u=e("../../lib"),s=e("../../components/color"),m=e("../box/defaults"),x=e("./attributes");I.exports=function(i,a,r,n){function f(L,S){return u.coerce(i,a,x,L,S)}function l(L,S){return u.coerce2(i,a,x,L,S)}if(m.handleSampleDefaults(i,a,f,n),a.visible!==!1){f("bandwidth"),f("side");var o=f("width");o||(f("scalegroup",a.name),f("scalemode"));var c=f("span"),v;Array.isArray(c)&&(v="manual"),f("spanmode",v);var d=f("line.color",(i.marker||{}).color||r),p=f("line.width"),y=f("fillcolor",s.addOpacity(a.line.color,.5));m.handlePointsDefaults(i,a,f,{prefix:""});var g=l("box.width"),A=l("box.fillcolor",y),b=l("box.line.color",d),M=l("box.line.width",p),w=f("box.visible",Boolean(g||A||b||M));w||(a.box={visible:!1});var T=l("meanline.color",d),_=l("meanline.width",p),h=f("meanline.visible",Boolean(T||_));h||(a.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1087}],1091:[function(e,I,B){var u=e("../../lib"),s={gaussian:function(m){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*m*m)}};B.makeKDE=function(m,x,t){var i=t.length,a=s.gaussian,r=m.bandwidth,n=1/(i*r);return function(f){for(var l=0,o=0;o<i;o++)l+=a((f-t[o])/r);return n*l}},B.getPositionOnKdePath=function(m,x,t){var i,a;x.orientation==="h"?(i="y",a="x"):(i="x",a="y");var r=u.findPointOnPath(m.path,t,a,{pathLength:m.pathLength}),n=m.posCenterPx,f=r[i],l=x.side==="both"?2*n-f:n;return[f,l]},B.getKdeValue=function(m,x,t){var i=m.pts.map(B.extractVal),a=B.makeKDE(m,x,i);return a(t)/m.posDensityScale},B.extractVal=function(m){return m.v}},{"../../lib":503}],1092:[function(e,I,B){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../box/hover"),x=e("./helpers");I.exports=function(i,a,r,n,f){f||(f={});var l=f.hoverLayer,o=i.cd,c=o[0].trace,v=c.hoveron,d=v.indexOf("violins")!==-1,p=v.indexOf("kde")!==-1,y=[],g,A;if(d||p){var b=m.hoverOnBoxes(i,a,r,n);if(p&&b.length>0){var M=i.xa,w=i.ya,T,_,h,L,S;c.orientation==="h"?(S=a,T="y",h=w,_="x",L=M):(S=r,T="x",h=M,_="y",L=w);var k=o[i.index];if(S>=k.span[0]&&S<=k.span[1]){var P=u.extendFlat({},i),O=L.c2p(S,!0),F=x.getKdeValue(k,c,S),D=x.getPositionOnKdePath(k,c,O),R=h._offset,U=h._length;P[T+"0"]=D[0],P[T+"1"]=D[1],P[_+"0"]=P[_+"1"]=O,P[_+"Label"]=_+": "+s.hoverLabelText(L,S,c[_+"hoverformat"])+", "+o[0].t.labels.kde+" "+F.toFixed(3),P.spikeDistance=b[0].spikeDistance;var N=T+"Spike";P[N]=b[0][N],b[0].spikeDistance=void 0,b[0][N]=void 0,P.hovertemplate=!1,y.push(P),A={stroke:i.color},A[T+"1"]=u.constrain(R+D[0],R,R+U),A[T+"2"]=u.constrain(R+D[1],R,R+U),A[_+"1"]=A[_+"2"]=L._offset+O}}d&&(y=y.concat(b))}v.indexOf("points")!==-1&&(g=m.hoverOnPoints(i,a,r));var X=l.selectAll(".violinline-"+c.uid).data(A?[0]:[]);return X.enter().append("line").classed("violinline-"+c.uid,!0).attr("stroke-width",1.5),X.exit().remove(),X.attr(A),n==="closest"?g?[g]:y:(g&&y.push(g),y)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1091}],1093:[function(e,I,B){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":950,"./attributes":1087,"./calc":1088,"./cross_trace_calc":1089,"./defaults":1090,"./hover":1092,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1096,"./style":1097}],1094:[function(e,I,B){var u=e("../box/layout_attributes"),s=e("../../lib").extendFlat;I.exports={violinmode:s({},u.boxmode,{}),violingap:s({},u.boxgap,{}),violingroupgap:s({},u.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1095:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes"),m=e("../box/layout_defaults");I.exports=function(t,i,a){function r(n,f){return u.coerce(t,i,s,n,f)}m._supply(t,i,a,r,"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1094}],1096:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../box/plot"),t=e("../scatter/line_points"),i=e("./helpers");I.exports=function(r,n,f,l){var o=r._fullLayout,c=n.xaxis,v=n.yaxis;function d(p){var y=t(p,{xaxis:c,yaxis:v,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return m.smoothopen(y[0],1)}s.makeTraceGroups(l,f,"trace violins").each(function(p){var y=u.select(this),g=p[0],A=g.t,b=g.trace;if(b.visible!==!0||A.empty){y.remove();return}var M=A.bPos,w=A.bdPos,T=n[A.valLetter+"axis"],_=n[A.posLetter+"axis"],h=b.side==="both",L=h||b.side==="positive",S=h||b.side==="negative",k=y.selectAll("path.violin").data(s.identity);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),k.exit().remove(),k.each(function(X){var j=u.select(this),ee=X.density,q=ee.length,G=_.c2l(X.pos+M,!0),J=_.l2p(G),le;if(b.width)le=A.maxKDE/w;else{var fe=o._violinScaleGroupStats[b.scalegroup];le=b.scalemode==="count"?fe.maxKDE/w*(fe.maxCount/X.pts.length):fe.maxKDE/w}var se,V,Y,ne,te,K,$;if(L){for(K=new Array(q),ne=0;ne<q;ne++)$=K[ne]={},$[A.posLetter]=G+ee[ne].v/le,$[A.valLetter]=T.c2l(ee[ne].t,!0);se=d(K)}if(S){for(K=new Array(q),te=0,ne=q-1;te<q;te++,ne--)$=K[te]={},$[A.posLetter]=G-ee[ne].v/le,$[A.valLetter]=T.c2l(ee[ne].t,!0);V=d(K)}if(h)Y=se+"L"+V.substr(1)+"Z";else{var ae=[J,T.c2p(ee[0].t)],ie=[J,T.c2p(ee[q-1].t)];b.orientation==="h"&&(ae.reverse(),ie.reverse()),L?Y="M"+ae+"L"+se.substr(1)+"L"+ie:Y="M"+ie+"L"+V.substr(1)+"L"+ae}j.attr("d",Y),X.posCenterPx=J,X.posDensityScale=le*w,X.path=j.node(),X.pathLength=X.path.getTotalLength()/(h?2:1)});var P=b.box,O=P.width,F=(P.line||{}).width,D,R;h?(D=w*O,R=0):L?(D=[0,w*O/2],R=F*{x:1,y:-1}[A.posLetter]):(D=[w*O/2,0],R=F*{x:-1,y:1}[A.posLetter]),x.plotBoxAndWhiskers(y,{pos:_,val:T},b,{bPos:M,bdPos:D,bPosPxOffset:R}),x.plotBoxMean(y,{pos:_,val:T},b,{bPos:M,bdPos:D,bPosPxOffset:R});var U;!b.box.visible&&b.meanline.visible&&(U=s.identity);var N=y.selectAll("path.meanline").data(U||[]);N.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),N.exit().remove(),N.each(function(X){var j=T.c2p(X.mean,!0),ee=i.getPositionOnKdePath(X,b,j);u.select(this).attr("d",b.orientation==="h"?"M"+j+","+ee[0]+"V"+ee[1]:"M"+ee[0]+","+j+"H"+ee[1])}),x.plotPoints(y,{x:c,y:v},b,A)})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":940,"./helpers":1091,"@plotly/d3":58}],1097:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../scatter/style").stylePoints;I.exports=function(t){var i=u.select(t).selectAll("g.trace.violins");i.style("opacity",function(a){return a[0].trace.opacity}),i.each(function(a){var r=a[0].trace,n=u.select(this),f=r.box||{},l=f.line||{},o=r.meanline||{},c=o.width;n.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(s.stroke,r.line.color).call(s.fill,r.fillcolor),n.selectAll("path.box").style("stroke-width",l.width+"px").call(s.stroke,l.color).call(s.fill,f.fillcolor);var v={"stroke-width":c+"px","stroke-dasharray":2*c+"px,"+c+"px"};n.selectAll("path.mean").style(v).call(s.stroke,o.color),n.selectAll("path.meanline").style(v).call(s.stroke,o.color),m(n,r,t)})}},{"../../components/color":366,"../scatter/style":950,"@plotly/d3":58}],1098:[function(e,I,B){var u=e("../../components/colorscale/attributes"),s=e("../isosurface/attributes"),m=e("../surface/attributes"),x=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll,a=I.exports=i(t({x:s.x,y:s.y,z:s.z,value:s.value,isomin:s.isomin,isomax:s.isomax,surface:s.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:s.slices,caps:s.caps,text:s.text,hovertext:s.hovertext,xhoverformat:s.xhoverformat,yhoverformat:s.yhoverformat,zhoverformat:s.zhoverformat,valuehoverformat:s.valuehoverformat,hovertemplate:s.hovertemplate},u("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:s.colorbar,opacity:s.opacity,opacityscale:m.opacityscale,lightposition:s.lightposition,lighting:s.lighting,flatshading:s.flatshading,contour:s.contour,hoverinfo:t({},x.hoverinfo),showlegend:t({},x.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1057}],1099:[function(e,I,B){var u=e("../../../stackgl_modules").gl_mesh3d,s=e("../../lib/gl_format_color").parseColorScale,m=e("../../lib/str2rgbarray"),x=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),i=e("../isosurface/convert").findNearestOnAxis,a=e("../isosurface/convert").generateIsoMeshes;function r(l,o,c){this.scene=l,this.uid=c,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var n=r.prototype;n.handlePick=function(l){if(l.object===this.mesh){var o=l.data.index,c=this.data._meshX[o],v=this.data._meshY[o],d=this.data._meshZ[o],p=this.data._Ys.length,y=this.data._Zs.length,g=i(c,this.data._Xs).id,A=i(v,this.data._Ys).id,b=i(d,this.data._Zs).id,M=l.index=b+y*A+y*p*g;l.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[M]!==void 0?l.textLabel=w[M]:w&&(l.textLabel=w),!0}},n.update=function(l){var o=this.scene,c=o.fullSceneLayout;this.data=a(l);function v(A,b,M,w){return b.map(function(T){return A.d2l(T,0,w)*M})}var d=t(v(c.xaxis,l._meshX,o.dataScale[0],l.xcalendar),v(c.yaxis,l._meshY,o.dataScale[1],l.ycalendar),v(c.zaxis,l._meshZ,o.dataScale[2],l.zcalendar)),p=t(l._meshI,l._meshJ,l._meshK),y={positions:d,cells:p,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,opacityscale:l.opacityscale,contourEnable:l.contour.show,contourColor:m(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading},g=x(l);y.vertexIntensity=l._meshIntensity,y.vertexIntensityBounds=[g.min,g.max],y.colormap=s(l),this.mesh.update(y)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(l,o){var c=l.glplot.gl,v=u({gl:c}),d=new r(l,v,o.uid);return v._trace=d,d.update(o),l.glplot.add(v),d}I.exports=f},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1100:[function(e,I,B){var u=e("../../lib"),s=e("./attributes"),m=e("../isosurface/defaults").supplyIsoDefaults,x=e("../surface/defaults").opacityscaleDefaults;I.exports=function(i,a,r,n){function f(l,o){return u.coerce(i,a,s,l,o)}m(i,a,r,n,f),x(i,a,n,f)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1060,"./attributes":1098}],1101:[function(e,I,B){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"volume",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1098,"./convert":1099,"./defaults":1100}],1102:[function(e,I,B){var u=e("../bar/attributes"),s=e("../scatter/attributes").line,m=e("../../plots/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("./constants"),r=e("../../lib/extend").extendFlat,n=e("../../components/color");function f(l){return{marker:{color:r({},u.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},u.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},u.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}I.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:u.x,x0:u.x0,dx:u.dx,y:u.y,y0:u.y0,dy:u.dy,xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:u.hovertext,hovertemplate:t({},{keys:a.eventDataKeys}),hoverinfo:r({},m.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:i({editType:"plot"},{keys:a.eventDataKeys.concat(["label"])}),text:u.text,textposition:u.textposition,insidetextanchor:u.insidetextanchor,textangle:u.textangle,textfont:u.textfont,insidetextfont:u.insidetextfont,outsidetextfont:u.outsidetextfont,constraintext:u.constraintext,cliponaxis:u.cliponaxis,orientation:u.orientation,offset:u.offset,width:u.width,increasing:f(),decreasing:f(),totals:f(),connector:{line:{color:r({},s.color,{dflt:n.defaultLine}),width:r({},s.width,{editType:"plot"}),dash:s.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:u.offsetgroup,alignmentgroup:u.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":1104}],1103:[function(e,I,B){var u=e("../../plots/cartesian/axes"),s=e("../../plots/cartesian/align_period"),m=e("../../lib").mergeArray,x=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;function i(r){return r==="a"||r==="absolute"}function a(r){return r==="t"||r==="total"}I.exports=function(n,f){var l=u.getFromId(n,f.xaxis||"x"),o=u.getFromId(n,f.yaxis||"y"),c,v,d,p,y,g;f.orientation==="h"?(c=l.makeCalcdata(f,"x"),d=o.makeCalcdata(f,"y"),p=s(f,o,"y",d),y=!!f.yperiodalignment,g="y"):(c=o.makeCalcdata(f,"y"),d=l.makeCalcdata(f,"x"),p=s(f,l,"x",d),y=!!f.xperiodalignment,g="x"),v=p.vals;for(var A=Math.min(v.length,c.length),b=new Array(A),M=0,w,T=!1,_=0;_<A;_++){var h=c[_]||0,L=!1;(c[_]!==t||a(f.measure[_])||i(f.measure[_]))&&_+1<A&&(c[_+1]!==t||a(f.measure[_+1])||i(f.measure[_+1]))&&(L=!0);var S=b[_]={i:_,p:v[_],s:h,rawS:h,cNext:L};i(f.measure[_])?(M=S.s,S.isSum=!0,S.dir="totals",S.s=M):a(f.measure[_])?(S.isSum=!0,S.dir="totals",S.s=M):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",w=S.s,S.s=M+w,M+=w),S.dir==="totals"&&(T=!0),y&&(b[_].orig_p=d[_],b[_][g+"End"]=p.ends[_],b[_][g+"Start"]=p.starts[_]),f.ids&&(S.id=String(f.ids[_])),S.v=(f.base||0)+M}return b.length&&(b[0].hasTotals=T),m(f.text,b,"tx"),m(f.hovertext,b,"htx"),x(b,f),b}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928}],1104:[function(e,I,B){I.exports={eventDataKeys:["initial","delta","final"]}},{}],1105:[function(e,I,B){var u=e("../bar/cross_trace_calc").setGroupPositions;I.exports=function(m,x){var t=m._fullLayout,i=m._fullData,a=m.calcdata,r=x.xaxis,n=x.yaxis,f=[],l=[],o=[],c,v;for(v=0;v<i.length;v++){var d=i[v];d.visible===!0&&d.xaxis===r._id&&d.yaxis===n._id&&d.type==="waterfall"&&(c=a[v],d.orientation==="h"?o.push(c):l.push(c),f.push(c))}var p={mode:t.waterfallmode,norm:t.waterfallnorm,gap:t.waterfallgap,groupgap:t.waterfallgroupgap};for(u(m,r,n,l,p),u(m,n,r,o,p),v=0;v<f.length;v++){c=f[v];for(var y=0;y<c.length;y++){var g=c[y];g.isSum===!1&&(g.s0+=y===0?0:c[y-1].s),y+1<c.length&&(c[y].nextP0=c[y+1].p0,c[y].nextS0=c[y+1].s0)}}}},{"../bar/cross_trace_calc":651}],1106:[function(e,I,B){var u=e("../../lib"),s=e("../bar/defaults").handleGroupingDefaults,m=e("../bar/defaults").handleText,x=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),i=e("./attributes"),a=e("../../components/color"),r=e("../../constants/delta.js"),n=r.INCREASING.COLOR,f=r.DECREASING.COLOR,l="#4499FF";function o(d,p,y){d(p+".marker.color",y),d(p+".marker.line.color",a.defaultLine),d(p+".marker.line.width")}function c(d,p,y,g){function A(_,h){return u.coerce(d,p,i,_,h)}var b=x(d,p,g,A);if(!b){p.visible=!1;return}t(d,p,g,A),A("xhoverformat"),A("yhoverformat"),A("measure"),A("orientation",p.x&&!p.y?"h":"v"),A("base"),A("offset"),A("width"),A("text"),A("hovertext"),A("hovertemplate");var M=A("textposition");m(d,p,g,A,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),p.textposition!=="none"&&(A("texttemplate"),p.texttemplate||A("textinfo")),o(A,"increasing",n),o(A,"decreasing",f),o(A,"totals",l);var w=A("connector.visible");if(w){A("connector.mode");var T=A("connector.line.width");T&&(A("connector.line.color"),A("connector.line.dash"))}}function v(d,p){var y,g;function A(M){return u.coerce(g._input,g,i,M)}if(p.waterfallmode==="group")for(var b=0;b<d.length;b++)g=d[b],y=g._input,s(y,g,p,A)}I.exports={supplyDefaults:c,crossTraceDefaults:v}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":1102}],1107:[function(e,I,B){I.exports=function(s,m){return s.x="xVal"in m?m.xVal:m.x,s.y="yVal"in m?m.yVal:m.y,"initial"in m&&(s.initial=m.initial),"delta"in m&&(s.delta=m.delta),"final"in m&&(s.final=m.final),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),s}},{}],1108:[function(e,I,B){var u=e("../../plots/cartesian/axes").hoverLabelText,s=e("../../components/color").opacity,m=e("../bar/hover").hoverOnBars,x=e("../../constants/delta.js"),t={increasing:x.INCREASING.SYMBOL,decreasing:x.DECREASING.SYMBOL};I.exports=function(r,n,f,l,o){var c=m(r,n,f,l,o);if(!c)return;var v=c.cd,d=v[0].trace,p=d.orientation==="h",y=p?"x":"y",g=p?r.xa:r.ya;function A(P){return u(g,P,d[y+"hoverformat"])}var b=c.index,M=v[b],w=M.isSum?M.b+M.s:M.rawS;if(!M.isSum){c.initial=M.b+M.s-w,c.delta=w,c.final=c.initial+c.delta;var T=A(Math.abs(c.delta));c.deltaLabel=w<0?"("+T+")":T,c.finalLabel=A(c.final),c.initialLabel=A(c.initial)}var _=M.hi||d.hoverinfo,h=[];if(_&&_!=="none"&&_!=="skip"){var L=_==="all",S=_.split("+"),k=function(P){return L||S.indexOf(P)!==-1};M.isSum||(k("final")&&(p?!k("x"):!k("y"))&&h.push(c.finalLabel),k("delta")&&(w<0?h.push(c.deltaLabel+" "+t.decreasing):h.push(c.deltaLabel+" "+t.increasing)),k("initial")&&h.push("Initial: "+c.initialLabel))}return h.length&&(c.extraText=h.join("<br>")),c.color=i(d,M),[c]};function i(a,r){var n=a[r.dir].marker,f=n.color,l=n.line.color,o=n.line.width;if(s(f))return f;if(s(l)&&o)return l}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1109:[function(e,I,B){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1102,"./calc":1103,"./cross_trace_calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./layout_attributes":1110,"./layout_defaults":1111,"./plot":1112,"./style":1113}],1110:[function(e,I,B){I.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1111:[function(e,I,B){var u=e("../../lib"),s=e("./layout_attributes");I.exports=function(m,x,t){var i=!1;function a(f,l){return u.coerce(m,x,s,f,l)}for(var r=0;r<t.length;r++){var n=t[r];if(n.visible&&n.type==="waterfall"){i=!0;break}}i&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1110}],1112:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),i=e("../bar/uniform_text").clearMinTextSize;I.exports=function(f,l,o,c){var v=f._fullLayout;i("waterfall",v),t.plot(f,l,o,c,{mode:v.waterfallmode,norm:v.waterfallmode,gap:v.waterfallgap,groupgap:v.waterfallgroupgap}),a(f,l,o,c)};function a(n,f,l,o){var c=f.xaxis,v=f.yaxis;s.makeTraceGroups(o,l,"trace bars").each(function(d){var p=u.select(this),y=d[0].trace,g=s.ensureSingle(p,"g","lines");if(!y.connector||!y.connector.visible){g.remove();return}var A=y.orientation==="h",b=y.connector.mode,M=g.selectAll("g.line").data(s.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var w=M.size();M.each(function(T,_){if(!(_!==w-1&&!T.cNext)){var h=r(T,c,v,A),L=h[0],S=h[1],k="";L[0]!==x&&S[0]!==x&&L[1]!==x&&S[1]!==x&&(b==="spanning"&&!T.isSum&&_>0&&(A?k+="M"+L[0]+","+S[1]+"V"+S[0]:k+="M"+L[1]+","+S[0]+"H"+L[0]),b!=="between"&&(T.isSum||_<w-1)&&(A?k+="M"+L[1]+","+S[0]+"V"+S[1]:k+="M"+L[0]+","+S[1]+"H"+L[1]),L[2]!==x&&S[2]!==x&&(A?k+="M"+L[1]+","+S[1]+"V"+S[2]:k+="M"+L[1]+","+S[1]+"H"+L[2])),k===""&&(k="M0,0Z"),s.ensureSingle(u.select(this),"path").attr("d",k).call(m.setClipUrl,f.layerClipId,n)}})})}function r(n,f,l,o){var c=[],v=[],d=o?f:l,p=o?l:f;return c[0]=d.c2p(n.s0,!0),v[0]=p.c2p(n.p0,!0),c[1]=d.c2p(n.s1,!0),v[1]=p.c2p(n.p1,!0),c[2]=d.c2p(n.nextS0,!0),v[2]=p.c2p(n.nextP0,!0),o?[c,v]:[v,c]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(e,I,B){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../components/color"),x=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),i=e("../bar/uniform_text").resizeText,a=t.styleTextPoints;function r(n,f,l){var o=l||u.select(n).selectAll("g.waterfalllayer").selectAll("g.trace");i(n,o,"waterfall"),o.style("opacity",function(c){return c[0].trace.opacity}),o.each(function(c){var v=u.select(this),d=c[0].trace;v.selectAll(".point > path").each(function(p){if(!p.isBlank){var y=d[p.dir].marker;u.select(this).call(m.fill,y.color).call(m.stroke,y.line.color).call(s.dashLine,y.line.dash,y.line.width).style("opacity",d.selectedpoints&&!p.selected?x:1)}}),a(v,d,n),v.selectAll(".lines").each(function(){var p=d.connector.line;s.lineGroupStyle(u.select(this).selectAll("path"),p.width,p.color,p.dash)})})}I.exports={style:r}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1114:[function(e,I,B){var u=e("../plots/cartesian/axes"),s=e("../lib"),m=e("../plot_api/plot_schema"),x=e("./helpers").pointsAccessorFunction,t=e("../constants/numerical").BADNUM;B.moduleType="transform",B.name="aggregate";var i=B.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},a=i.aggregations;B.supplyDefaults=function(c,v){var d={},p;function y(P,O){return s.coerce(c,d,i,P,O)}var g=y("enabled");if(!g)return d;var A=m.findArrayAttributes(v),b={};for(p=0;p<A.length;p++)b[A[p]]=1;var M=y("groups");if(!Array.isArray(M)){if(!b[M])return d.enabled=!1,d;b[M]=0}var w=c.aggregations||[],T=d.aggregations=new Array(w.length),_;function h(P,O){return s.coerce(w[p],_,a,P,O)}for(p=0;p<w.length;p++){_={_index:p};var L=h("target"),S=h("func"),k=h("enabled");k&&L&&(b[L]||S==="count"&&b[L]===void 0)?(S==="stddev"&&h("funcmode"),b[L]=0,T[p]=_):T[p]={enabled:!1,_index:p}}for(p=0;p<A.length;p++)b[A[p]]&&T.push({target:A[p],func:a.func.dflt,enabled:!0,_index:-1});return d},B.calcTransform=function(c,v,d){if(!!d.enabled){var p=d.groups,y=s.getTargetArray(v,{target:p});if(!!y){var g,A,b,M,w={},T={},_=[],h=x(v.transforms,d),L=y.length;for(v._length&&(L=Math.min(L,v._length)),g=0;g<L;g++)A=y[g],b=w[A],b===void 0?(w[A]=_.length,M=[g],_.push(M),T[w[A]]=h(g)):(_[b].push(g),T[w[A]]=(T[w[A]]||[]).concat(h(g)));d._indexToPoints=T;var S=d.aggregations;for(g=0;g<S.length;g++)r(c,v,_,S[g]);typeof p=="string"&&r(c,v,_,{target:p,func:"first",enabled:!0}),v._length=_.length}}};function r(c,v,d,p){if(!!p.enabled){for(var y=p.target,g=s.nestedProperty(v,y),A=g.get(),b=u.getDataConversions(c,v,y,A),M=n(p,b),w=new Array(d.length),T=0;T<d.length;T++)w[T]=M(A,d[T]);g.set(w),p.func==="count"&&s.pushUnique(v._arrayAttrs,y)}}function n(c,v){var d=c.func,p=v.d2c,y=v.c2d;switch(d){case"count":return f;case"first":return l;case"last":return o;case"sum":return function(g,A){for(var b=0,M=0;M<A.length;M++){var w=p(g[A[M]]);w!==t&&(b+=w)}return y(b)};case"avg":return function(g,A){for(var b=0,M=0,w=0;w<A.length;w++){var T=p(g[A[w]]);T!==t&&(b+=T,M++)}return M?y(b/M):t};case"min":return function(g,A){for(var b=1/0,M=0;M<A.length;M++){var w=p(g[A[M]]);w!==t&&(b=Math.min(b,w))}return b===1/0?t:y(b)};case"max":return function(g,A){for(var b=-1/0,M=0;M<A.length;M++){var w=p(g[A[M]]);w!==t&&(b=Math.max(b,w))}return b===-1/0?t:y(b)};case"range":return function(g,A){for(var b=1/0,M=-1/0,w=0;w<A.length;w++){var T=p(g[A[w]]);T!==t&&(b=Math.min(b,T),M=Math.max(M,T))}return M===-1/0||b===1/0?t:y(M-b)};case"change":return function(g,A){var b=p(g[A[0]]),M=p(g[A[A.length-1]]);return b===t||M===t?t:y(M-b)};case"median":return function(g,A){for(var b=[],M=0;M<A.length;M++){var w=p(g[A[M]]);w!==t&&b.push(w)}if(!b.length)return t;b.sort(s.sorterAsc);var T=(b.length-1)/2;return y((b[Math.floor(T)]+b[Math.ceil(T)])/2)};case"mode":return function(g,A){for(var b={},M=0,w=t,T=0;T<A.length;T++){var _=p(g[A[T]]);if(_!==t){var h=b[_]=(b[_]||0)+1;h>M&&(M=h,w=_)}}return M?y(w):t};case"rms":return function(g,A){for(var b=0,M=0,w=0;w<A.length;w++){var T=p(g[A[w]]);T!==t&&(b+=T*T,M++)}return M?y(Math.sqrt(b/M)):t};case"stddev":return function(g,A){var b=0,M=0,w=1,T=t,_;for(_=0;_<A.length&&T===t;_++)T=p(g[A[_]]);if(T===t)return t;for(;_<A.length;_++){var h=p(g[A[_]]);if(h!==t){var L=h-T;b+=L,M+=L*L,w++}}var S=c.funcmode==="sample"?w-1:w;return S?Math.sqrt((M-b*b/w)/S):0}}}function f(c,v){return v.length}function l(c,v){return c[v[0]]}function o(c,v){return c[v[v.length-1]]}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1117}],1115:[function(e,I,B){var u=e("../lib"),s=e("../registry"),m=e("../plots/cartesian/axes"),x=e("./helpers").pointsAccessorFunction,t=e("../constants/filter_ops"),i=t.COMPARISON_OPS,a=t.INTERVAL_OPS,r=t.SET_OPS;B.moduleType="transform",B.name="filter",B.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(i).concat(a).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},B.supplyDefaults=function(f){var l={};function o(p,y){return u.coerce(f,l,B.attributes,p,y)}var c=o("enabled");if(c){var v=o("target");if(u.isArrayOrTypedArray(v)&&v.length===0)return l.enabled=!1,l;o("preservegaps"),o("operation"),o("value");var d=s.getComponentMethod("calendars","handleDefaults");d(f,l,"valuecalendar",null),d(f,l,"targetcalendar",null)}return l},B.calcTransform=function(f,l,o){if(!o.enabled)return;var c=u.getTargetArray(l,o);if(!c)return;var v=o.target,d=c.length;l._length&&(d=Math.min(d,l._length));var p=o.targetcalendar,y=l._arrayAttrs,g=o.preservegaps;if(typeof v=="string"){var A=u.nestedProperty(l,v+"calendar").get();A&&(p=A)}var b=m.getDataToCoordFunc(f,l,v,c),M=n(o,b,p),w={},T={},_=0;function h(F,D){for(var R=0;R<y.length;R++){var U=u.nestedProperty(l,y[R]);F(U,D)}}var L,S;g?(L=function(F){w[F.astr]=u.extendDeep([],F.get()),F.set(new Array(d))},S=function(F,D){var R=w[F.astr][D];F.get()[D]=R}):(L=function(F){w[F.astr]=u.extendDeep([],F.get()),F.set([])},S=function(F,D){var R=w[F.astr][D];F.get().push(R)}),h(L);for(var k=x(l.transforms,o),P=0;P<d;P++){var O=M(c[P]);O?(h(S,P),T[_++]=k(P)):g&&_++}o._indexToPoints=T,l._length=_};function n(f,l,o){var c=f.operation,v=f.value,d=Array.isArray(v);function p(b){return b.indexOf(c)!==-1}var y=function(b){return l(b,0,f.valuecalendar)},g=function(b){return l(b,0,o)},A;switch(p(i)?A=y(d?v[0]:v):p(a)?A=d?[y(v[0]),y(v[1])]:[y(v),y(v)]:p(r)&&(A=d?v.map(y):[y(v)]),c){case"=":return function(b){return g(b)===A};case"!=":return function(b){return g(b)!==A};case"<":return function(b){return g(b)<A};case"<=":return function(b){return g(b)<=A};case">":return function(b){return g(b)>A};case">=":return function(b){return g(b)>=A};case"[]":return function(b){var M=g(b);return M>=A[0]&&M<=A[1]};case"()":return function(b){var M=g(b);return M>A[0]&&M<A[1]};case"[)":return function(b){var M=g(b);return M>=A[0]&&M<A[1]};case"(]":return function(b){var M=g(b);return M>A[0]&&M<=A[1]};case"][":return function(b){var M=g(b);return M<=A[0]||M>=A[1]};case")(":return function(b){var M=g(b);return M<A[0]||M>A[1]};case"](":return function(b){var M=g(b);return M<=A[0]||M>A[1]};case")[":return function(b){var M=g(b);return M<A[0]||M>=A[1]};case"{}":return function(b){return A.indexOf(g(b))!==-1};case"}{":return function(b){return A.indexOf(g(b))===-1}}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1117}],1116:[function(e,I,B){var u=e("../lib"),s=e("../plot_api/plot_schema"),m=e("../plots/plots"),x=e("./helpers").pointsAccessorFunction;B.moduleType="transform",B.name="groupby",B.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},B.supplyDefaults=function(i,a,r){var n,f={};function l(y,g){return u.coerce(i,f,B.attributes,y,g)}var o=l("enabled");if(!o)return f;l("groups"),l("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var c=i.styles,v=f.styles=[];if(c)for(n=0;n<c.length;n++){var d=v[n]={};u.coerce(c[n],v[n],B.attributes.styles,"target");var p=u.coerce(c[n],v[n],B.attributes.styles,"value");u.isPlainObject(p)?d.value=u.extendDeep({},p):p&&delete d.value}return f},B.transform=function(i,a){var r,n,f,l=[];for(n=0;n<i.length;n++)for(r=t(i[n],a),f=0;f<r.length;f++)l.push(r[f]);return l};function t(i,a){var r,n,f,l,o,c,v,d,p,y,g=a.transform,A=a.transformIndex,b=i.transforms[A].groups,M=x(i.transforms,g);if(!u.isArrayOrTypedArray(b)||b.length===0)return[i];var w=u.filterUnique(b),T=new Array(w.length),_=b.length,h=s.findArrayAttributes(i),L=g.styles||[],S={};for(r=0;r<L.length;r++)S[L[r].target]=L[r].value;g.styles&&(y=u.keyedContainer(g,"styles","target","value.name"));var k={},P={};for(r=0;r<w.length;r++){c=w[r],k[c]=r,P[c]=0,v=T[r]=u.extendDeepNoArrays({},i),v._group=c,v.transforms[A]._indexToPoints={};var O=null;for(y&&(O=y.get(c)),O||O===""?v.name=O:v.name=u.templateString(g.nameformat,{trace:i.name,group:c}),d=v.transforms,v.transforms=[],n=0;n<d.length;n++)v.transforms[n]=u.extendDeepNoArrays({},d[n]);for(n=0;n<h.length;n++)u.nestedProperty(v,h[n]).set([])}for(f=0;f<h.length;f++){for(l=h[f],n=0,p=[];n<w.length;n++)p[n]=u.nestedProperty(T[n],l).get();for(o=u.nestedProperty(i,l).get(),n=0;n<_;n++)p[k[b[n]]].push(o[n])}for(n=0;n<_;n++){v=T[k[b[n]]];var F=v.transforms[A]._indexToPoints;F[P[b[n]]]=M(n),P[b[n]]++}for(r=0;r<w.length;r++)c=w[r],v=T[r],m.clearExpandedTraceDefaultColors(v),v=u.extendDeepNoArrays(v,S[c]||{});return T}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1117}],1117:[function(e,I,B){B.pointsAccessorFunction=function(u,s){for(var m,x,t=0;t<u.length&&(m=u[t],m!==s);t++)!m._indexToPoints||m.enabled===!1||(x=m._indexToPoints);var i=x?function(a){return x[a]}:function(a){return[a]};return i}},{}],1118:[function(e,I,B){var u=e("../lib"),s=e("../plots/cartesian/axes"),m=e("./helpers").pointsAccessorFunction,x=e("../constants/numerical").BADNUM;B.moduleType="transform",B.name="sort",B.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},B.supplyDefaults=function(a){var r={};function n(l,o){return u.coerce(a,r,B.attributes,l,o)}var f=n("enabled");return f&&(n("target"),n("order")),r},B.calcTransform=function(a,r,n){if(!!n.enabled){var f=u.getTargetArray(r,n);if(!!f){var l=n.target,o=f.length;r._length&&(o=Math.min(o,r._length));var c=r._arrayAttrs,v=s.getDataToCoordFunc(a,r,l,f),d=t(n,f,v,o),p=m(r.transforms,n),y={},g,A;for(g=0;g<c.length;g++){var b=u.nestedProperty(r,c[g]),M=b.get(),w=new Array(o);for(A=0;A<o;A++)w[A]=M[d[A]];b.set(w)}for(A=0;A<o;A++)y[A]=p(d[A]);n._indexToPoints=y,r._length=o}}};function t(a,r,n,f){var l=new Array(f),o=new Array(f),c;for(c=0;c<f;c++)l[c]={v:r[c],i:c};for(l.sort(i(a,n)),c=0;c<f;c++)o[c]=l[c].i;return o}function i(a,r){switch(a.order){case"ascending":return function(n,f){var l=r(n.v),o=r(f.v);return l===x?1:o===x?-1:l-o};case"descending":return function(n,f){var l=r(n.v),o=r(f.v);return l===x?1:o===x?-1:o-l}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1117}],1119:[function(e,I,B){B.version="2.8.3"},{}],1120:[function(e,I,B){(function(u){(function(){(function(s){if(typeof B=="object"&&typeof I!="undefined")I.exports=s();else{var m;typeof window!="undefined"?m=window:typeof u!="undefined"?m=u:typeof self!="undefined"?m=self:m=this,m.stackgl=s()}})(function(){return function(){function s(m,x,t){function i(n,f){if(!x[n]){if(!m[n]){var l=typeof e=="function"&&e;if(!f&&l)return l(n,!0);if(a)return a(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var c=x[n]={exports:{}};m[n][0].call(c.exports,function(v){var d=m[n][1][v];return i(d||v)},c,c.exports,s,m,x,t)}return x[n].exports}for(var a=typeof e=="function"&&e,r=0;r<t.length;r++)i(t[r]);return i}return s}()({1:[function(s,m,x){x.byteLength=o,x.toByteArray=v,x.fromByteArray=y;for(var t=[],i=[],a=typeof Uint8Array!="undefined"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,f=r.length;n<f;++n)t[n]=r[n],i[r.charCodeAt(n)]=n;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63;function l(g){var A=g.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=g.indexOf("=");b===-1&&(b=A);var M=b===A?0:4-b%4;return[b,M]}function o(g){var A=l(g),b=A[0],M=A[1];return(b+M)*3/4-M}function c(g,A,b){return(A+b)*3/4-b}function v(g){var A,b=l(g),M=b[0],w=b[1],T=new a(c(g,M,w)),_=0,h=w>0?M-4:M,L;for(L=0;L<h;L+=4)A=i[g.charCodeAt(L)]<<18|i[g.charCodeAt(L+1)]<<12|i[g.charCodeAt(L+2)]<<6|i[g.charCodeAt(L+3)],T[_++]=A>>16&255,T[_++]=A>>8&255,T[_++]=A&255;return w===2&&(A=i[g.charCodeAt(L)]<<2|i[g.charCodeAt(L+1)]>>4,T[_++]=A&255),w===1&&(A=i[g.charCodeAt(L)]<<10|i[g.charCodeAt(L+1)]<<4|i[g.charCodeAt(L+2)]>>2,T[_++]=A>>8&255,T[_++]=A&255),T}function d(g){return t[g>>18&63]+t[g>>12&63]+t[g>>6&63]+t[g&63]}function p(g,A,b){for(var M,w=[],T=A;T<b;T+=3)M=(g[T]<<16&16711680)+(g[T+1]<<8&65280)+(g[T+2]&255),w.push(d(M));return w.join("")}function y(g){for(var A,b=g.length,M=b%3,w=[],T=16383,_=0,h=b-M;_<h;_+=T)w.push(p(g,_,_+T>h?h:_+T));return M===1?(A=g[b-1],w.push(t[A>>2]+t[A<<4&63]+"==")):M===2&&(A=(g[b-2]<<8)+g[b-1],w.push(t[A>>10]+t[A>>4&63]+t[A<<2&63]+"=")),w.join("")}},{}],2:[function(s,m,x){},{}],3:[function(s,m,x){(function(t){(function(){var i=s("base64-js"),a=s("ieee754");x.Buffer=l,x.SlowBuffer=M,x.INSPECT_MAX_BYTES=50;var r=2147483647;x.kMaxLength=r,l.TYPED_ARRAY_SUPPORT=n(),!l.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function n(){try{var he=new Uint8Array(1);return he.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},he.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.byteOffset}});function f(he){if(he>r)throw new RangeError('The value "'+he+'" is invalid for option "size"');var me=new Uint8Array(he);return me.__proto__=l.prototype,me}function l(he,me,be){if(typeof he=="number"){if(typeof me=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(he)}return o(he,me,be)}typeof Symbol!="undefined"&&Symbol.species!=null&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192;function o(he,me,be){if(typeof he=="string")return p(he,me);if(ArrayBuffer.isView(he))return y(he);if(he==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof he);if(ue(he,ArrayBuffer)||he&&ue(he.buffer,ArrayBuffer))return g(he,me,be);if(typeof he=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ce=he.valueOf&&he.valueOf();if(Ce!=null&&Ce!==he)return l.from(Ce,me,be);var Se=A(he);if(Se)return Se;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof he[Symbol.toPrimitive]=="function")return l.from(he[Symbol.toPrimitive]("string"),me,be);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof he)}l.from=function(he,me,be){return o(he,me,be)},l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array;function c(he){if(typeof he!="number")throw new TypeError('"size" argument must be of type number');if(he<0)throw new RangeError('The value "'+he+'" is invalid for option "size"')}function v(he,me,be){return c(he),he<=0?f(he):me!==void 0?typeof be=="string"?f(he).fill(me,be):f(he).fill(me):f(he)}l.alloc=function(he,me,be){return v(he,me,be)};function d(he){return c(he),f(he<0?0:b(he)|0)}l.allocUnsafe=function(he){return d(he)},l.allocUnsafeSlow=function(he){return d(he)};function p(he,me){if((typeof me!="string"||me==="")&&(me="utf8"),!l.isEncoding(me))throw new TypeError("Unknown encoding: "+me);var be=w(he,me)|0,Ce=f(be),Se=Ce.write(he,me);return Se!==be&&(Ce=Ce.slice(0,Se)),Ce}function y(he){for(var me=he.length<0?0:b(he.length)|0,be=f(me),Ce=0;Ce<me;Ce+=1)be[Ce]=he[Ce]&255;return be}function g(he,me,be){if(me<0||he.byteLength<me)throw new RangeError('"offset" is outside of buffer bounds');if(he.byteLength<me+(be||0))throw new RangeError('"length" is outside of buffer bounds');var Ce;return me===void 0&&be===void 0?Ce=new Uint8Array(he):be===void 0?Ce=new Uint8Array(he,me):Ce=new Uint8Array(he,me,be),Ce.__proto__=l.prototype,Ce}function A(he){if(l.isBuffer(he)){var me=b(he.length)|0,be=f(me);return be.length===0||he.copy(be,0,0,me),be}if(he.length!==void 0)return typeof he.length!="number"||xe(he.length)?f(0):y(he);if(he.type==="Buffer"&&Array.isArray(he.data))return y(he.data)}function b(he){if(he>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return he|0}function M(he){return+he!=he&&(he=0),l.alloc(+he)}l.isBuffer=function(me){return me!=null&&me._isBuffer===!0&&me!==l.prototype},l.compare=function(me,be){if(ue(me,Uint8Array)&&(me=l.from(me,me.offset,me.byteLength)),ue(be,Uint8Array)&&(be=l.from(be,be.offset,be.byteLength)),!l.isBuffer(me)||!l.isBuffer(be))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(me===be)return 0;for(var Ce=me.length,Se=be.length,Be=0,Ye=Math.min(Ce,Se);Be<Ye;++Be)if(me[Be]!==be[Be]){Ce=me[Be],Se=be[Be];break}return Ce<Se?-1:Se<Ce?1:0},l.isEncoding=function(me){switch(String(me).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(me,be){if(!Array.isArray(me))throw new TypeError('"list" argument must be an Array of Buffers');if(me.length===0)return l.alloc(0);var Ce;if(be===void 0)for(be=0,Ce=0;Ce<me.length;++Ce)be+=me[Ce].length;var Se=l.allocUnsafe(be),Be=0;for(Ce=0;Ce<me.length;++Ce){var Ye=me[Ce];if(ue(Ye,Uint8Array)&&(Ye=l.from(Ye)),!l.isBuffer(Ye))throw new TypeError('"list" argument must be an Array of Buffers');Ye.copy(Se,Be),Be+=Ye.length}return Se};function w(he,me){if(l.isBuffer(he))return he.length;if(ArrayBuffer.isView(he)||ue(he,ArrayBuffer))return he.byteLength;if(typeof he!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof he);var be=he.length,Ce=arguments.length>2&&arguments[2]===!0;if(!Ce&&be===0)return 0;for(var Se=!1;;)switch(me){case"ascii":case"latin1":case"binary":return be;case"utf8":case"utf-8":return K(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be*2;case"hex":return be>>>1;case"base64":return ie(he).length;default:if(Se)return Ce?-1:K(he).length;me=(""+me).toLowerCase(),Se=!0}}l.byteLength=w;function T(he,me,be){var Ce=!1;if((me===void 0||me<0)&&(me=0),me>this.length||((be===void 0||be>this.length)&&(be=this.length),be<=0)||(be>>>=0,me>>>=0,be<=me))return"";for(he||(he="utf8");;)switch(he){case"hex":return q(this,me,be);case"utf8":case"utf-8":return U(this,me,be);case"ascii":return j(this,me,be);case"latin1":case"binary":return ee(this,me,be);case"base64":return R(this,me,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,me,be);default:if(Ce)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),Ce=!0}}l.prototype._isBuffer=!0;function _(he,me,be){var Ce=he[me];he[me]=he[be],he[be]=Ce}l.prototype.swap16=function(){var me=this.length;if(me%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var be=0;be<me;be+=2)_(this,be,be+1);return this},l.prototype.swap32=function(){var me=this.length;if(me%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var be=0;be<me;be+=4)_(this,be,be+3),_(this,be+1,be+2);return this},l.prototype.swap64=function(){var me=this.length;if(me%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var be=0;be<me;be+=8)_(this,be,be+7),_(this,be+1,be+6),_(this,be+2,be+5),_(this,be+3,be+4);return this},l.prototype.toString=function(){var me=this.length;return me===0?"":arguments.length===0?U(this,0,me):T.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(me){if(!l.isBuffer(me))throw new TypeError("Argument must be a Buffer");return this===me?!0:l.compare(this,me)===0},l.prototype.inspect=function(){var me="",be=x.INSPECT_MAX_BYTES;return me=this.toString("hex",0,be).replace(/(.{2})/g,"$1 ").trim(),this.length>be&&(me+=" ... "),"<Buffer "+me+">"},l.prototype.compare=function(me,be,Ce,Se,Be){if(ue(me,Uint8Array)&&(me=l.from(me,me.offset,me.byteLength)),!l.isBuffer(me))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof me);if(be===void 0&&(be=0),Ce===void 0&&(Ce=me?me.length:0),Se===void 0&&(Se=0),Be===void 0&&(Be=this.length),be<0||Ce>me.length||Se<0||Be>this.length)throw new RangeError("out of range index");if(Se>=Be&&be>=Ce)return 0;if(Se>=Be)return-1;if(be>=Ce)return 1;if(be>>>=0,Ce>>>=0,Se>>>=0,Be>>>=0,this===me)return 0;for(var Ye=Be-Se,Xe=Ce-be,Te=Math.min(Ye,Xe),Ie=this.slice(Se,Be),Ze=me.slice(be,Ce),rt=0;rt<Te;++rt)if(Ie[rt]!==Ze[rt]){Ye=Ie[rt],Xe=Ze[rt];break}return Ye<Xe?-1:Xe<Ye?1:0};function h(he,me,be,Ce,Se){if(he.length===0)return-1;if(typeof be=="string"?(Ce=be,be=0):be>2147483647?be=2147483647:be<-2147483648&&(be=-2147483648),be=+be,xe(be)&&(be=Se?0:he.length-1),be<0&&(be=he.length+be),be>=he.length){if(Se)return-1;be=he.length-1}else if(be<0)if(Se)be=0;else return-1;if(typeof me=="string"&&(me=l.from(me,Ce)),l.isBuffer(me))return me.length===0?-1:L(he,me,be,Ce,Se);if(typeof me=="number")return me=me&255,typeof Uint8Array.prototype.indexOf=="function"?Se?Uint8Array.prototype.indexOf.call(he,me,be):Uint8Array.prototype.lastIndexOf.call(he,me,be):L(he,[me],be,Ce,Se);throw new TypeError("val must be string, number or Buffer")}function L(he,me,be,Ce,Se){var Be=1,Ye=he.length,Xe=me.length;if(Ce!==void 0&&(Ce=String(Ce).toLowerCase(),Ce==="ucs2"||Ce==="ucs-2"||Ce==="utf16le"||Ce==="utf-16le")){if(he.length<2||me.length<2)return-1;Be=2,Ye/=2,Xe/=2,be/=2}function Te(ze,We){return Be===1?ze[We]:ze.readUInt16BE(We*Be)}var Ie;if(Se){var Ze=-1;for(Ie=be;Ie<Ye;Ie++)if(Te(he,Ie)===Te(me,Ze===-1?0:Ie-Ze)){if(Ze===-1&&(Ze=Ie),Ie-Ze+1===Xe)return Ze*Be}else Ze!==-1&&(Ie-=Ie-Ze),Ze=-1}else for(be+Xe>Ye&&(be=Ye-Xe),Ie=be;Ie>=0;Ie--){for(var rt=!0,Ge=0;Ge<Xe;Ge++)if(Te(he,Ie+Ge)!==Te(me,Ge)){rt=!1;break}if(rt)return Ie}return-1}l.prototype.includes=function(me,be,Ce){return this.indexOf(me,be,Ce)!==-1},l.prototype.indexOf=function(me,be,Ce){return h(this,me,be,Ce,!0)},l.prototype.lastIndexOf=function(me,be,Ce){return h(this,me,be,Ce,!1)};function S(he,me,be,Ce){be=Number(be)||0;var Se=he.length-be;Ce?(Ce=Number(Ce),Ce>Se&&(Ce=Se)):Ce=Se;var Be=me.length;Ce>Be/2&&(Ce=Be/2);for(var Ye=0;Ye<Ce;++Ye){var Xe=parseInt(me.substr(Ye*2,2),16);if(xe(Xe))return Ye;he[be+Ye]=Xe}return Ye}function k(he,me,be,Ce){return oe(K(me,he.length-be),he,be,Ce)}function P(he,me,be,Ce){return oe($(me),he,be,Ce)}function O(he,me,be,Ce){return P(he,me,be,Ce)}function F(he,me,be,Ce){return oe(ie(me),he,be,Ce)}function D(he,me,be,Ce){return oe(ae(me,he.length-be),he,be,Ce)}l.prototype.write=function(me,be,Ce,Se){if(be===void 0)Se="utf8",Ce=this.length,be=0;else if(Ce===void 0&&typeof be=="string")Se=be,Ce=this.length,be=0;else if(isFinite(be))be=be>>>0,isFinite(Ce)?(Ce=Ce>>>0,Se===void 0&&(Se="utf8")):(Se=Ce,Ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Be=this.length-be;if((Ce===void 0||Ce>Be)&&(Ce=Be),me.length>0&&(Ce<0||be<0)||be>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");for(var Ye=!1;;)switch(Se){case"hex":return S(this,me,be,Ce);case"utf8":case"utf-8":return k(this,me,be,Ce);case"ascii":return P(this,me,be,Ce);case"latin1":case"binary":return O(this,me,be,Ce);case"base64":return F(this,me,be,Ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,me,be,Ce);default:if(Ye)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),Ye=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(he,me,be){return me===0&&be===he.length?i.fromByteArray(he):i.fromByteArray(he.slice(me,be))}function U(he,me,be){be=Math.min(he.length,be);for(var Ce=[],Se=me;Se<be;){var Be=he[Se],Ye=null,Xe=Be>239?4:Be>223?3:Be>191?2:1;if(Se+Xe<=be){var Te,Ie,Ze,rt;switch(Xe){case 1:Be<128&&(Ye=Be);break;case 2:Te=he[Se+1],(Te&192)==128&&(rt=(Be&31)<<6|Te&63,rt>127&&(Ye=rt));break;case 3:Te=he[Se+1],Ie=he[Se+2],(Te&192)==128&&(Ie&192)==128&&(rt=(Be&15)<<12|(Te&63)<<6|Ie&63,rt>2047&&(rt<55296||rt>57343)&&(Ye=rt));break;case 4:Te=he[Se+1],Ie=he[Se+2],Ze=he[Se+3],(Te&192)==128&&(Ie&192)==128&&(Ze&192)==128&&(rt=(Be&15)<<18|(Te&63)<<12|(Ie&63)<<6|Ze&63,rt>65535&&rt<1114112&&(Ye=rt))}}Ye===null?(Ye=65533,Xe=1):Ye>65535&&(Ye-=65536,Ce.push(Ye>>>10&1023|55296),Ye=56320|Ye&1023),Ce.push(Ye),Se+=Xe}return X(Ce)}var N=4096;function X(he){var me=he.length;if(me<=N)return String.fromCharCode.apply(String,he);for(var be="",Ce=0;Ce<me;)be+=String.fromCharCode.apply(String,he.slice(Ce,Ce+=N));return be}function j(he,me,be){var Ce="";be=Math.min(he.length,be);for(var Se=me;Se<be;++Se)Ce+=String.fromCharCode(he[Se]&127);return Ce}function ee(he,me,be){var Ce="";be=Math.min(he.length,be);for(var Se=me;Se<be;++Se)Ce+=String.fromCharCode(he[Se]);return Ce}function q(he,me,be){var Ce=he.length;(!me||me<0)&&(me=0),(!be||be<0||be>Ce)&&(be=Ce);for(var Se="",Be=me;Be<be;++Be)Se+=te(he[Be]);return Se}function G(he,me,be){for(var Ce=he.slice(me,be),Se="",Be=0;Be<Ce.length;Be+=2)Se+=String.fromCharCode(Ce[Be]+Ce[Be+1]*256);return Se}l.prototype.slice=function(me,be){var Ce=this.length;me=~~me,be=be===void 0?Ce:~~be,me<0?(me+=Ce,me<0&&(me=0)):me>Ce&&(me=Ce),be<0?(be+=Ce,be<0&&(be=0)):be>Ce&&(be=Ce),be<me&&(be=me);var Se=this.subarray(me,be);return Se.__proto__=l.prototype,Se};function J(he,me,be){if(he%1!=0||he<0)throw new RangeError("offset is not uint");if(he+me>be)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function(me,be,Ce){me=me>>>0,be=be>>>0,Ce||J(me,be,this.length);for(var Se=this[me],Be=1,Ye=0;++Ye<be&&(Be*=256);)Se+=this[me+Ye]*Be;return Se},l.prototype.readUIntBE=function(me,be,Ce){me=me>>>0,be=be>>>0,Ce||J(me,be,this.length);for(var Se=this[me+--be],Be=1;be>0&&(Be*=256);)Se+=this[me+--be]*Be;return Se},l.prototype.readUInt8=function(me,be){return me=me>>>0,be||J(me,1,this.length),this[me]},l.prototype.readUInt16LE=function(me,be){return me=me>>>0,be||J(me,2,this.length),this[me]|this[me+1]<<8},l.prototype.readUInt16BE=function(me,be){return me=me>>>0,be||J(me,2,this.length),this[me]<<8|this[me+1]},l.prototype.readUInt32LE=function(me,be){return me=me>>>0,be||J(me,4,this.length),(this[me]|this[me+1]<<8|this[me+2]<<16)+this[me+3]*16777216},l.prototype.readUInt32BE=function(me,be){return me=me>>>0,be||J(me,4,this.length),this[me]*16777216+(this[me+1]<<16|this[me+2]<<8|this[me+3])},l.prototype.readIntLE=function(me,be,Ce){me=me>>>0,be=be>>>0,Ce||J(me,be,this.length);for(var Se=this[me],Be=1,Ye=0;++Ye<be&&(Be*=256);)Se+=this[me+Ye]*Be;return Be*=128,Se>=Be&&(Se-=Math.pow(2,8*be)),Se},l.prototype.readIntBE=function(me,be,Ce){me=me>>>0,be=be>>>0,Ce||J(me,be,this.length);for(var Se=be,Be=1,Ye=this[me+--Se];Se>0&&(Be*=256);)Ye+=this[me+--Se]*Be;return Be*=128,Ye>=Be&&(Ye-=Math.pow(2,8*be)),Ye},l.prototype.readInt8=function(me,be){return me=me>>>0,be||J(me,1,this.length),this[me]&128?(255-this[me]+1)*-1:this[me]},l.prototype.readInt16LE=function(me,be){me=me>>>0,be||J(me,2,this.length);var Ce=this[me]|this[me+1]<<8;return Ce&32768?Ce|4294901760:Ce},l.prototype.readInt16BE=function(me,be){me=me>>>0,be||J(me,2,this.length);var Ce=this[me+1]|this[me]<<8;return Ce&32768?Ce|4294901760:Ce},l.prototype.readInt32LE=function(me,be){return me=me>>>0,be||J(me,4,this.length),this[me]|this[me+1]<<8|this[me+2]<<16|this[me+3]<<24},l.prototype.readInt32BE=function(me,be){return me=me>>>0,be||J(me,4,this.length),this[me]<<24|this[me+1]<<16|this[me+2]<<8|this[me+3]},l.prototype.readFloatLE=function(me,be){return me=me>>>0,be||J(me,4,this.length),a.read(this,me,!0,23,4)},l.prototype.readFloatBE=function(me,be){return me=me>>>0,be||J(me,4,this.length),a.read(this,me,!1,23,4)},l.prototype.readDoubleLE=function(me,be){return me=me>>>0,be||J(me,8,this.length),a.read(this,me,!0,52,8)},l.prototype.readDoubleBE=function(me,be){return me=me>>>0,be||J(me,8,this.length),a.read(this,me,!1,52,8)};function le(he,me,be,Ce,Se,Be){if(!l.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(me>Se||me<Be)throw new RangeError('"value" argument is out of bounds');if(be+Ce>he.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function(me,be,Ce,Se){if(me=+me,be=be>>>0,Ce=Ce>>>0,!Se){var Be=Math.pow(2,8*Ce)-1;le(this,me,be,Ce,Be,0)}var Ye=1,Xe=0;for(this[be]=me&255;++Xe<Ce&&(Ye*=256);)this[be+Xe]=me/Ye&255;return be+Ce},l.prototype.writeUIntBE=function(me,be,Ce,Se){if(me=+me,be=be>>>0,Ce=Ce>>>0,!Se){var Be=Math.pow(2,8*Ce)-1;le(this,me,be,Ce,Be,0)}var Ye=Ce-1,Xe=1;for(this[be+Ye]=me&255;--Ye>=0&&(Xe*=256);)this[be+Ye]=me/Xe&255;return be+Ce},l.prototype.writeUInt8=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,1,255,0),this[be]=me&255,be+1},l.prototype.writeUInt16LE=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,2,65535,0),this[be]=me&255,this[be+1]=me>>>8,be+2},l.prototype.writeUInt16BE=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,2,65535,0),this[be]=me>>>8,this[be+1]=me&255,be+2},l.prototype.writeUInt32LE=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,4,4294967295,0),this[be+3]=me>>>24,this[be+2]=me>>>16,this[be+1]=me>>>8,this[be]=me&255,be+4},l.prototype.writeUInt32BE=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,4,4294967295,0),this[be]=me>>>24,this[be+1]=me>>>16,this[be+2]=me>>>8,this[be+3]=me&255,be+4},l.prototype.writeIntLE=function(me,be,Ce,Se){if(me=+me,be=be>>>0,!Se){var Be=Math.pow(2,8*Ce-1);le(this,me,be,Ce,Be-1,-Be)}var Ye=0,Xe=1,Te=0;for(this[be]=me&255;++Ye<Ce&&(Xe*=256);)me<0&&Te===0&&this[be+Ye-1]!==0&&(Te=1),this[be+Ye]=(me/Xe>>0)-Te&255;return be+Ce},l.prototype.writeIntBE=function(me,be,Ce,Se){if(me=+me,be=be>>>0,!Se){var Be=Math.pow(2,8*Ce-1);le(this,me,be,Ce,Be-1,-Be)}var Ye=Ce-1,Xe=1,Te=0;for(this[be+Ye]=me&255;--Ye>=0&&(Xe*=256);)me<0&&Te===0&&this[be+Ye+1]!==0&&(Te=1),this[be+Ye]=(me/Xe>>0)-Te&255;return be+Ce},l.prototype.writeInt8=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,1,127,-128),me<0&&(me=255+me+1),this[be]=me&255,be+1},l.prototype.writeInt16LE=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,2,32767,-32768),this[be]=me&255,this[be+1]=me>>>8,be+2},l.prototype.writeInt16BE=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,2,32767,-32768),this[be]=me>>>8,this[be+1]=me&255,be+2},l.prototype.writeInt32LE=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,4,2147483647,-2147483648),this[be]=me&255,this[be+1]=me>>>8,this[be+2]=me>>>16,this[be+3]=me>>>24,be+4},l.prototype.writeInt32BE=function(me,be,Ce){return me=+me,be=be>>>0,Ce||le(this,me,be,4,2147483647,-2147483648),me<0&&(me=4294967295+me+1),this[be]=me>>>24,this[be+1]=me>>>16,this[be+2]=me>>>8,this[be+3]=me&255,be+4};function fe(he,me,be,Ce,Se,Be){if(be+Ce>he.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("Index out of range")}function se(he,me,be,Ce,Se){return me=+me,be=be>>>0,Se||fe(he,me,be,4),a.write(he,me,be,Ce,23,4),be+4}l.prototype.writeFloatLE=function(me,be,Ce){return se(this,me,be,!0,Ce)},l.prototype.writeFloatBE=function(me,be,Ce){return se(this,me,be,!1,Ce)};function V(he,me,be,Ce,Se){return me=+me,be=be>>>0,Se||fe(he,me,be,8),a.write(he,me,be,Ce,52,8),be+8}l.prototype.writeDoubleLE=function(me,be,Ce){return V(this,me,be,!0,Ce)},l.prototype.writeDoubleBE=function(me,be,Ce){return V(this,me,be,!1,Ce)},l.prototype.copy=function(me,be,Ce,Se){if(!l.isBuffer(me))throw new TypeError("argument should be a Buffer");if(Ce||(Ce=0),!Se&&Se!==0&&(Se=this.length),be>=me.length&&(be=me.length),be||(be=0),Se>0&&Se<Ce&&(Se=Ce),Se===Ce||me.length===0||this.length===0)return 0;if(be<0)throw new RangeError("targetStart out of bounds");if(Ce<0||Ce>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),me.length-be<Se-Ce&&(Se=me.length-be+Ce);var Be=Se-Ce;if(this===me&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(be,Ce,Se);else if(this===me&&Ce<be&&be<Se)for(var Ye=Be-1;Ye>=0;--Ye)me[Ye+be]=this[Ye+Ce];else Uint8Array.prototype.set.call(me,this.subarray(Ce,Se),be);return Be},l.prototype.fill=function(me,be,Ce,Se){if(typeof me=="string"){if(typeof be=="string"?(Se=be,be=0,Ce=this.length):typeof Ce=="string"&&(Se=Ce,Ce=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!l.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(me.length===1){var Be=me.charCodeAt(0);(Se==="utf8"&&Be<128||Se==="latin1")&&(me=Be)}}else typeof me=="number"&&(me=me&255);if(be<0||this.length<be||this.length<Ce)throw new RangeError("Out of range index");if(Ce<=be)return this;be=be>>>0,Ce=Ce===void 0?this.length:Ce>>>0,me||(me=0);var Ye;if(typeof me=="number")for(Ye=be;Ye<Ce;++Ye)this[Ye]=me;else{var Xe=l.isBuffer(me)?me:l.from(me,Se),Te=Xe.length;if(Te===0)throw new TypeError('The value "'+me+'" is invalid for argument "value"');for(Ye=0;Ye<Ce-be;++Ye)this[Ye+be]=Xe[Ye%Te]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function ne(he){if(he=he.split("=")[0],he=he.trim().replace(Y,""),he.length<2)return"";for(;he.length%4!=0;)he=he+"=";return he}function te(he){return he<16?"0"+he.toString(16):he.toString(16)}function K(he,me){me=me||1/0;for(var be,Ce=he.length,Se=null,Be=[],Ye=0;Ye<Ce;++Ye){if(be=he.charCodeAt(Ye),be>55295&&be<57344){if(!Se){if(be>56319){(me-=3)>-1&&Be.push(239,191,189);continue}else if(Ye+1===Ce){(me-=3)>-1&&Be.push(239,191,189);continue}Se=be;continue}if(be<56320){(me-=3)>-1&&Be.push(239,191,189),Se=be;continue}be=(Se-55296<<10|be-56320)+65536}else Se&&(me-=3)>-1&&Be.push(239,191,189);if(Se=null,be<128){if((me-=1)<0)break;Be.push(be)}else if(be<2048){if((me-=2)<0)break;Be.push(be>>6|192,be&63|128)}else if(be<65536){if((me-=3)<0)break;Be.push(be>>12|224,be>>6&63|128,be&63|128)}else if(be<1114112){if((me-=4)<0)break;Be.push(be>>18|240,be>>12&63|128,be>>6&63|128,be&63|128)}else throw new Error("Invalid code point")}return Be}function $(he){for(var me=[],be=0;be<he.length;++be)me.push(he.charCodeAt(be)&255);return me}function ae(he,me){for(var be,Ce,Se,Be=[],Ye=0;Ye<he.length&&!((me-=2)<0);++Ye)be=he.charCodeAt(Ye),Ce=be>>8,Se=be%256,Be.push(Se),Be.push(Ce);return Be}function ie(he){return i.toByteArray(ne(he))}function oe(he,me,be,Ce){for(var Se=0;Se<Ce&&!(Se+be>=me.length||Se>=he.length);++Se)me[Se+be]=he[Se];return Se}function ue(he,me){return he instanceof me||he!=null&&he.constructor!=null&&he.constructor.name!=null&&he.constructor.name===me.name}function xe(he){return he!==he}}).call(this)}).call(this,s("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(s,m,x){x.read=function(t,i,a,r,n){var f,l,o=n*8-r-1,c=(1<<o)-1,v=c>>1,d=-7,p=a?n-1:0,y=a?-1:1,g=t[i+p];for(p+=y,f=g&(1<<-d)-1,g>>=-d,d+=o;d>0;f=f*256+t[i+p],p+=y,d-=8);for(l=f&(1<<-d)-1,f>>=-d,d+=r;d>0;l=l*256+t[i+p],p+=y,d-=8);if(f===0)f=1-v;else{if(f===c)return l?NaN:(g?-1:1)*(1/0);l=l+Math.pow(2,r),f=f-v}return(g?-1:1)*l*Math.pow(2,f-r)},x.write=function(t,i,a,r,n,f){var l,o,c,v=f*8-n-1,d=(1<<v)-1,p=d>>1,y=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:f-1,A=r?1:-1,b=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(o=isNaN(i)?1:0,l=d):(l=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-l))<1&&(l--,c*=2),l+p>=1?i+=y/c:i+=y*Math.pow(2,1-p),i*c>=2&&(l++,c/=2),l+p>=d?(o=0,l=d):l+p>=1?(o=(i*c-1)*Math.pow(2,n),l=l+p):(o=i*Math.pow(2,p-1)*Math.pow(2,n),l=0));n>=8;t[a+g]=o&255,g+=A,o/=256,n-=8);for(l=l<<n|o,v+=n;v>0;t[a+g]=l&255,g+=A,l/=256,v-=8);t[a+g-A]|=b*128}},{}],5:[function(s,m,x){var t=m.exports={},i,a;function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=r}catch{i=r}try{typeof clearTimeout=="function"?a=clearTimeout:a=n}catch{a=n}})();function f(b){if(i===setTimeout)return setTimeout(b,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(b,0);try{return i(b,0)}catch{try{return i.call(null,b,0)}catch{return i.call(this,b,0)}}}function l(b){if(a===clearTimeout)return clearTimeout(b);if((a===n||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(b);try{return a(b)}catch{try{return a.call(null,b)}catch{return a.call(this,b)}}}var o=[],c=!1,v,d=-1;function p(){!c||!v||(c=!1,v.length?o=v.concat(o):d=-1,o.length&&y())}function y(){if(!c){var b=f(p);c=!0;for(var M=o.length;M;){for(v=o,o=[];++d<M;)v&&v[d].run();d=-1,M=o.length}v=null,c=!1,l(b)}}t.nextTick=function(b){var M=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)M[w-1]=arguments[w];o.push(new g(b,M)),o.length===1&&!c&&f(y)};function g(b,M){this.fun=b,this.array=M}g.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function A(){}t.on=A,t.addListener=A,t.once=A,t.off=A,t.removeListener=A,t.removeAllListeners=A,t.emit=A,t.prependListener=A,t.prependOnceListener=A,t.listeners=function(b){return[]},t.binding=function(b){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(b){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(s,m,x){m.exports={alpha_shape:s("alpha-shape"),convex_hull:s("convex-hull"),delaunay_triangulate:s("delaunay-triangulate"),gl_cone3d:s("gl-cone3d"),gl_error3d:s("gl-error3d"),gl_heatmap2d:s("gl-heatmap2d"),gl_line3d:s("gl-line3d"),gl_mesh3d:s("gl-mesh3d"),gl_plot2d:s("gl-plot2d"),gl_plot3d:s("gl-plot3d"),gl_pointcloud2d:s("gl-pointcloud2d"),gl_scatter3d:s("gl-scatter3d"),gl_select_box:s("gl-select-box"),gl_spikes2d:s("gl-spikes2d"),gl_streamtube3d:s("gl-streamtube3d"),gl_surface3d:s("gl-surface3d"),ndarray:s("ndarray"),ndarray_linear_interpolate:s("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(s,m,x){m.exports=f;var t=s("turntable-camera-controller"),i=s("orbit-camera-controller"),a=s("matrix-camera-controller");function r(l,o){this._controllerNames=Object.keys(l),this._controllerList=this._controllerNames.map(function(c){return l[c]}),this._mode=o,this._active=l[o],this._active||(this._mode="turntable",this._active=l.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var n=r.prototype;n.flush=function(l){for(var o=this._controllerList,c=0;c<o.length;++c)o[c].flush(l)},n.idle=function(l){for(var o=this._controllerList,c=0;c<o.length;++c)o[c].idle(l)},n.lookAt=function(l,o,c,v){for(var d=this._controllerList,p=0;p<d.length;++p)d[p].lookAt(l,o,c,v)},n.rotate=function(l,o,c,v){for(var d=this._controllerList,p=0;p<d.length;++p)d[p].rotate(l,o,c,v)},n.pan=function(l,o,c,v){for(var d=this._controllerList,p=0;p<d.length;++p)d[p].pan(l,o,c,v)},n.translate=function(l,o,c,v){for(var d=this._controllerList,p=0;p<d.length;++p)d[p].translate(l,o,c,v)},n.setMatrix=function(l,o){for(var c=this._controllerList,v=0;v<c.length;++v)c[v].setMatrix(l,o)},n.setDistanceLimits=function(l,o){for(var c=this._controllerList,v=0;v<c.length;++v)c[v].setDistanceLimits(l,o)},n.setDistance=function(l,o){for(var c=this._controllerList,v=0;v<c.length;++v)c[v].setDistance(l,o)},n.recalcMatrix=function(l){this._active.recalcMatrix(l)},n.getDistance=function(l){return this._active.getDistance(l)},n.getDistanceLimits=function(l){return this._active.getDistanceLimits(l)},n.lastT=function(){return this._active.lastT()},n.setMode=function(l){if(l!==this._mode){var o=this._controllerNames.indexOf(l);if(!(o<0)){var c=this._active,v=this._controllerList[o],d=Math.max(c.lastT(),v.lastT());c.recalcMatrix(d),v.setMatrix(d,c.computedMatrix),this._active=v,this._mode=l,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},n.getMode=function(){return this._mode};function f(l){l=l||{};var o=l.eye||[0,0,1],c=l.center||[0,0,0],v=l.up||[0,1,0],d=l.distanceLimits||[0,1/0],p=l.mode||"turntable",y=t(),g=i(),A=a();return y.setDistanceLimits(d[0],d[1]),y.lookAt(0,o,c,v),g.setDistanceLimits(d[0],d[1]),g.lookAt(0,o,c,v),A.setDistanceLimits(d[0],d[1]),A.lookAt(0,o,c,v),new r({turntable:y,orbit:g,matrix:A},p)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(s,m,x){var t=typeof WeakMap=="undefined"?s("weak-map"):WeakMap,i=s("gl-buffer"),a=s("gl-vao"),r=new t;function n(f){var l=r.get(f),o=l&&(l._triangleBuffer.handle||l._triangleBuffer.buffer);if(!o||!f.isBuffer(o)){var c=i(f,new Float32Array([-1,-1,-1,4,4,-1]));l=a(f,[{buffer:c,type:f.FLOAT,size:2}]),l._triangleBuffer=c,r.set(f,l)}l.bind(),f.drawArrays(f.TRIANGLES,0,3),l.unbind()}m.exports=n},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(s,m,x){var t=s("pad-left");m.exports=i;function i(a,r,n){r=typeof r=="number"?r:1,n=n||": ";var f=a.split(/\r?\n/),l=String(f.length+r-1).length;return f.map(function(o,c){var v=c+r,d=String(v).length,p=t(v,l-d);return p+n+o}).join(`
`)}},{"pad-left":264}],10:[function(s,m,x){m.exports=a;var t=s("robust-orientation");function i(r,n){for(var f=new Array(n+1),l=0;l<r.length;++l)f[l]=r[l];for(var l=0;l<=r.length;++l){for(var o=r.length;o<=n;++o){for(var c=new Array(n),v=0;v<n;++v)c[v]=Math.pow(o+1-l,v);f[o]=c}var d=t.apply(void 0,f);if(d)return!0}return!1}function a(r){var n=r.length;if(n===0)return[];if(n===1)return[0];for(var f=r[0].length,l=[r[0]],o=[0],c=1;c<n;++c){if(l.push(r[c]),!i(l,f)){l.pop();continue}if(o.push(c),o.length===f+1)return o}return o}},{"robust-orientation":284}],11:[function(s,m,x){m.exports=a;var t=s("delaunay-triangulate"),i=s("circumradius");function a(r,n){return t(n).filter(function(f){for(var l=new Array(f.length),o=0;o<f.length;++o)l[o]=n[f[o]];return i(l)*r<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(s,m,x){m.exports=a;var t=s("alpha-complex"),i=s("simplicial-complex-boundary");function a(r,n){return i(t(r,n))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(s,m,x){m.exports=function(i){return atob(i)}},{}],14:[function(s,m,x){m.exports=a;var t=s("robust-linear-solve");function i(r){for(var n=0,f=0;f<r.length;++f)n+=r[f];return n}function a(r,n){for(var f=n.length,l=new Array(f+1),o=0;o<f;++o){for(var c=new Array(f+1),v=0;v<=f;++v)c[v]=r[v][o];l[o]=c}l[f]=new Array(f+1);for(var o=0;o<=f;++o)l[f][o]=1;for(var d=new Array(f+1),o=0;o<f;++o)d[o]=n[o];d[f]=1;var p=t(l,d),y=i(p[f+1]);y===0&&(y=1);for(var g=new Array(f+1),o=0;o<=f;++o)g[o]=i(p[o])/y;return g}},{"robust-linear-solve":283}],15:[function(s,m,x){var t=s("./lib/rationalize");m.exports=i;function i(a,r){return t(a[0].mul(r[1]).add(r[0].mul(a[1])),a[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(s,m,x){m.exports=t;function t(i,a){return i[0].mul(a[1]).cmp(a[0].mul(i[1]))}},{}],17:[function(s,m,x){var t=s("./lib/rationalize");m.exports=i;function i(a,r){return t(a[0].mul(r[1]),a[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(s,m,x){var t=s("./is-rat"),i=s("./lib/is-bn"),a=s("./lib/num-to-bn"),r=s("./lib/str-to-bn"),n=s("./lib/rationalize"),f=s("./div");m.exports=l;function l(o,c){if(t(o))return c?f(o,l(c)):[o[0].clone(),o[1].clone()];var v=0,d,p;if(i(o))d=o.clone();else if(typeof o=="string")d=r(o);else{if(o===0)return[a(0),a(1)];if(o===Math.floor(o))d=a(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),v-=256;d=a(o)}}if(t(c))d.mul(c[1]),p=c[0].clone();else if(i(c))p=c.clone();else if(typeof c=="string")p=r(c);else if(!c)p=a(1);else if(c===Math.floor(c))p=a(c);else{for(;c!==Math.floor(c);)c=c*Math.pow(2,256),v+=256;p=a(c)}return v>0?d=d.ushln(v):v<0&&(p=p.ushln(-v)),n(d,p)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(s,m,x){var t=s("./lib/is-bn");m.exports=i;function i(a){return Array.isArray(a)&&a.length===2&&t(a[0])&&t(a[1])}},{"./lib/is-bn":23}],20:[function(s,m,x){var t=s("bn.js");m.exports=i;function i(a){return a.cmp(new t(0))}},{"bn.js":33}],21:[function(s,m,x){var t=s("./bn-sign");m.exports=i;function i(a){var r=a.length,n=a.words,f=0;if(r===1)f=n[0];else if(r===2)f=n[0]+n[1]*67108864;else for(var l=0;l<r;l++){var o=n[l];f+=o*Math.pow(67108864,l)}return t(a)*f}},{"./bn-sign":20}],22:[function(s,m,x){var t=s("double-bits"),i=s("bit-twiddle").countTrailingZeros;m.exports=a;function a(r){var n=i(t.lo(r));if(n<32)return n;var f=i(t.hi(r));return f>20?52:f+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(s,m,x){s("bn.js"),m.exports=t;function t(i){return i&&typeof i=="object"&&Boolean(i.words)}},{"bn.js":33}],24:[function(s,m,x){var t=s("bn.js"),i=s("double-bits");m.exports=a;function a(r){var n=i.exponent(r);return n<52?new t(r):new t(r*Math.pow(2,52-n)).ushln(n-52)}},{"bn.js":33,"double-bits":64}],25:[function(s,m,x){var t=s("./num-to-bn"),i=s("./bn-sign");m.exports=a;function a(r,n){var f=i(r),l=i(n);if(f===0)return[t(0),t(1)];if(l===0)return[t(0),t(0)];l<0&&(r=r.neg(),n=n.neg());var o=r.gcd(n);return o.cmpn(1)?[r.div(o),n.div(o)]:[r,n]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(s,m,x){var t=s("bn.js");m.exports=i;function i(a){return new t(a)}},{"bn.js":33}],27:[function(s,m,x){var t=s("./lib/rationalize");m.exports=i;function i(a,r){return t(a[0].mul(r[0]),a[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(s,m,x){var t=s("./lib/bn-sign");m.exports=i;function i(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":20}],29:[function(s,m,x){var t=s("./lib/rationalize");m.exports=i;function i(a,r){return t(a[0].mul(r[1]).sub(a[1].mul(r[0])),a[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(s,m,x){var t=s("./lib/bn-to-num"),i=s("./lib/ctz");m.exports=a;function a(r){var n=r[0],f=r[1];if(n.cmpn(0)===0)return 0;var l=n.abs().divmod(f.abs()),o=l.div,c=t(o),v=l.mod,d=n.negative!==f.negative?-1:1;if(v.cmpn(0)===0)return d*c;if(c){var p=i(c)+4,y=t(v.ushln(p).divRound(f));return d*(c+y*Math.pow(2,-p))}else{var g=f.bitLength()-v.bitLength()+53,y=t(v.ushln(g).divRound(f));return g<1023?d*y*Math.pow(2,-g):(y*=Math.pow(2,-1023),d*y*Math.pow(2,1023-g))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(s,m,x){function t(l,o,c,v,d){for(var p=d+1;v<=d;){var y=v+d>>>1,g=l[y],A=c!==void 0?c(g,o):g-o;A>=0?(p=y,d=y-1):v=y+1}return p}function i(l,o,c,v,d){for(var p=d+1;v<=d;){var y=v+d>>>1,g=l[y],A=c!==void 0?c(g,o):g-o;A>0?(p=y,d=y-1):v=y+1}return p}function a(l,o,c,v,d){for(var p=v-1;v<=d;){var y=v+d>>>1,g=l[y],A=c!==void 0?c(g,o):g-o;A<0?(p=y,v=y+1):d=y-1}return p}function r(l,o,c,v,d){for(var p=v-1;v<=d;){var y=v+d>>>1,g=l[y],A=c!==void 0?c(g,o):g-o;A<=0?(p=y,v=y+1):d=y-1}return p}function n(l,o,c,v,d){for(;v<=d;){var p=v+d>>>1,y=l[p],g=c!==void 0?c(y,o):y-o;if(g===0)return p;g<=0?v=p+1:d=p-1}return-1}function f(l,o,c,v,d,p){return typeof c=="function"?p(l,o,c,v===void 0?0:v|0,d===void 0?l.length-1:d|0):p(l,o,void 0,c===void 0?0:c|0,v===void 0?l.length-1:v|0)}m.exports={ge:function(l,o,c,v,d){return f(l,o,c,v,d,t)},gt:function(l,o,c,v,d){return f(l,o,c,v,d,i)},lt:function(l,o,c,v,d){return f(l,o,c,v,d,a)},le:function(l,o,c,v,d){return f(l,o,c,v,d,r)},eq:function(l,o,c,v,d){return f(l,o,c,v,d,n)}}},{}],32:[function(s,m,x){var t=32;x.INT_BITS=t,x.INT_MAX=2147483647,x.INT_MIN=-1<<t-1,x.sign=function(r){return(r>0)-(r<0)},x.abs=function(r){var n=r>>t-1;return(r^n)-n},x.min=function(r,n){return n^(r^n)&-(r<n)},x.max=function(r,n){return r^(r^n)&-(r<n)},x.isPow2=function(r){return!(r&r-1)&&!!r},x.log2=function(r){var n,f;return n=(r>65535)<<4,r>>>=n,f=(r>255)<<3,r>>>=f,n|=f,f=(r>15)<<2,r>>>=f,n|=f,f=(r>3)<<1,r>>>=f,n|=f,n|r>>1},x.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},x.popCount=function(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24};function i(r){var n=32;return r&=-r,r&&n--,r&65535&&(n-=16),r&16711935&&(n-=8),r&252645135&&(n-=4),r&858993459&&(n-=2),r&1431655765&&(n-=1),n}x.countTrailingZeros=i,x.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},x.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},x.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var a=new Array(256);(function(r){for(var n=0;n<256;++n){var f=n,l=n,o=7;for(f>>>=1;f;f>>>=1)l<<=1,l|=f&1,--o;r[n]=l<<o&255}})(a),x.reverse=function(r){return a[r&255]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},x.interleave2=function(r,n){return r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r|n<<1},x.deinterleave2=function(r,n){return r=r>>>n&1431655765,r=(r|r>>>1)&858993459,r=(r|r>>>2)&252645135,r=(r|r>>>4)&16711935,r=(r|r>>>16)&65535,r<<16>>16},x.interleave3=function(r,n,f){return r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r|=n<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,r|f<<2},x.deinterleave3=function(r,n){return r=r>>>n&1227133513,r=(r|r>>>2)&3272356035,r=(r|r>>>4)&251719695,r=(r|r>>>8)&4278190335,r=(r|r>>>16)&1023,r<<22>>22},x.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>i(r)+1}},{}],33:[function(s,m,x){(function(t,i){function a(F,D){if(!F)throw new Error(D||"Assertion failed")}function r(F,D){F.super_=D;var R=function(){};R.prototype=D.prototype,F.prototype=new R,F.prototype.constructor=F}function n(F,D,R){if(n.isBN(F))return F;this.negative=0,this.words=null,this.length=0,this.red=null,F!==null&&((D==="le"||D==="be")&&(R=D,D=10),this._init(F||0,D||10,R||"be"))}typeof t=="object"?t.exports=n:i.BN=n,n.BN=n,n.wordSize=26;var f;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?f=window.Buffer:f=s("buffer").Buffer}catch{}n.isBN=function(D){return D instanceof n?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===n.wordSize&&Array.isArray(D.words)},n.max=function(D,R){return D.cmp(R)>0?D:R},n.min=function(D,R){return D.cmp(R)<0?D:R},n.prototype._init=function(D,R,U){if(typeof D=="number")return this._initNumber(D,R,U);if(typeof D=="object")return this._initArray(D,R,U);R==="hex"&&(R=16),a(R===(R|0)&&R>=2&&R<=36),D=D.toString().replace(/\s+/g,"");var N=0;D[0]==="-"&&(N++,this.negative=1),N<D.length&&(R===16?this._parseHex(D,N,U):(this._parseBase(D,R,N),U==="le"&&this._initArray(this.toArray(),R,U)))},n.prototype._initNumber=function(D,R,U){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(a(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),U==="le"&&this._initArray(this.toArray(),R,U)},n.prototype._initArray=function(D,R,U){if(a(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var X,j,ee=0;if(U==="be")for(N=D.length-1,X=0;N>=0;N-=3)j=D[N]|D[N-1]<<8|D[N-2]<<16,this.words[X]|=j<<ee&67108863,this.words[X+1]=j>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,X++);else if(U==="le")for(N=0,X=0;N<D.length;N+=3)j=D[N]|D[N+1]<<8|D[N+2]<<16,this.words[X]|=j<<ee&67108863,this.words[X+1]=j>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,X++);return this.strip()};function l(F,D){var R=F.charCodeAt(D);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function o(F,D,R){var U=l(F,R);return R-1>=D&&(U|=l(F,R-1)<<4),U}n.prototype._parseHex=function(D,R,U){this.length=Math.ceil((D.length-R)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var X=0,j=0,ee;if(U==="be")for(N=D.length-1;N>=R;N-=2)ee=o(D,R,N)<<X,this.words[j]|=ee&67108863,X>=18?(X-=18,j+=1,this.words[j]|=ee>>>26):X+=8;else{var q=D.length-R;for(N=q%2==0?R+1:R;N<D.length;N+=2)ee=o(D,R,N)<<X,this.words[j]|=ee&67108863,X>=18?(X-=18,j+=1,this.words[j]|=ee>>>26):X+=8}this.strip()};function c(F,D,R,U){for(var N=0,X=Math.min(F.length,R),j=D;j<X;j++){var ee=F.charCodeAt(j)-48;N*=U,ee>=49?N+=ee-49+10:ee>=17?N+=ee-17+10:N+=ee}return N}n.prototype._parseBase=function(D,R,U){this.words=[0],this.length=1;for(var N=0,X=1;X<=67108863;X*=R)N++;N--,X=X/R|0;for(var j=D.length-U,ee=j%N,q=Math.min(j,j-ee)+U,G=0,J=U;J<q;J+=N)G=c(D,J,J+N,R),this.imuln(X),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G);if(ee!==0){var le=1;for(G=c(D,J,D.length,R),J=0;J<ee;J++)le*=R;this.imuln(le),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G)}this.strip()},n.prototype.copy=function(D){D.words=new Array(this.length);for(var R=0;R<this.length;R++)D.words[R]=this.words[R];D.length=this.length,D.negative=this.negative,D.red=this.red},n.prototype.clone=function(){var D=new n(null);return this.copy(D),D},n.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(D,R){D=D||10,R=R|0||1;var U;if(D===16||D==="hex"){U="";for(var N=0,X=0,j=0;j<this.length;j++){var ee=this.words[j],q=((ee<<N|X)&16777215).toString(16);X=ee>>>24-N&16777215,X!==0||j!==this.length-1?U=v[6-q.length]+q+U:U=q+U,N+=2,N>=26&&(N-=26,j--)}for(X!==0&&(U=X.toString(16)+U);U.length%R!=0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}if(D===(D|0)&&D>=2&&D<=36){var G=d[D],J=p[D];U="";var le=this.clone();for(le.negative=0;!le.isZero();){var fe=le.modn(J).toString(D);le=le.idivn(J),le.isZero()?U=fe+U:U=v[G-fe.length]+fe+U}for(this.isZero()&&(U="0"+U);U.length%R!=0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}a(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(D,R){return a(typeof f!="undefined"),this.toArrayLike(f,D,R)},n.prototype.toArray=function(D,R){return this.toArrayLike(Array,D,R)},n.prototype.toArrayLike=function(D,R,U){var N=this.byteLength(),X=U||Math.max(1,N);a(N<=X,"byte array longer than desired length"),a(X>0,"Requested array length <= 0"),this.strip();var j=R==="le",ee=new D(X),q,G,J=this.clone();if(j){for(G=0;!J.isZero();G++)q=J.andln(255),J.iushrn(8),ee[G]=q;for(;G<X;G++)ee[G]=0}else{for(G=0;G<X-N;G++)ee[G]=0;for(G=0;!J.isZero();G++)q=J.andln(255),J.iushrn(8),ee[X-G-1]=q}return ee},Math.clz32?n.prototype._countBits=function(D){return 32-Math.clz32(D)}:n.prototype._countBits=function(D){var R=D,U=0;return R>=4096&&(U+=13,R>>>=13),R>=64&&(U+=7,R>>>=7),R>=8&&(U+=4,R>>>=4),R>=2&&(U+=2,R>>>=2),U+R},n.prototype._zeroBits=function(D){if(D===0)return 26;var R=D,U=0;return(R&8191)==0&&(U+=13,R>>>=13),(R&127)==0&&(U+=7,R>>>=7),(R&15)==0&&(U+=4,R>>>=4),(R&3)==0&&(U+=2,R>>>=2),(R&1)==0&&U++,U},n.prototype.bitLength=function(){var D=this.words[this.length-1],R=this._countBits(D);return(this.length-1)*26+R};function y(F){for(var D=new Array(F.bitLength()),R=0;R<D.length;R++){var U=R/26|0,N=R%26;D[R]=(F.words[U]&1<<N)>>>N}return D}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,R=0;R<this.length;R++){var U=this._zeroBits(this.words[R]);if(D+=U,U!==26)break}return D},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},n.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var R=0;R<D.length;R++)this.words[R]=this.words[R]|D.words[R];return this.strip()},n.prototype.ior=function(D){return a((this.negative|D.negative)==0),this.iuor(D)},n.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},n.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},n.prototype.iuand=function(D){var R;this.length>D.length?R=D:R=this;for(var U=0;U<R.length;U++)this.words[U]=this.words[U]&D.words[U];return this.length=R.length,this.strip()},n.prototype.iand=function(D){return a((this.negative|D.negative)==0),this.iuand(D)},n.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},n.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},n.prototype.iuxor=function(D){var R,U;this.length>D.length?(R=this,U=D):(R=D,U=this);for(var N=0;N<U.length;N++)this.words[N]=R.words[N]^U.words[N];if(this!==R)for(;N<R.length;N++)this.words[N]=R.words[N];return this.length=R.length,this.strip()},n.prototype.ixor=function(D){return a((this.negative|D.negative)==0),this.iuxor(D)},n.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},n.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},n.prototype.inotn=function(D){a(typeof D=="number"&&D>=0);var R=Math.ceil(D/26)|0,U=D%26;this._expand(R),U>0&&R--;for(var N=0;N<R;N++)this.words[N]=~this.words[N]&67108863;return U>0&&(this.words[N]=~this.words[N]&67108863>>26-U),this.strip()},n.prototype.notn=function(D){return this.clone().inotn(D)},n.prototype.setn=function(D,R){a(typeof D=="number"&&D>=0);var U=D/26|0,N=D%26;return this._expand(U+1),R?this.words[U]=this.words[U]|1<<N:this.words[U]=this.words[U]&~(1<<N),this.strip()},n.prototype.iadd=function(D){var R;if(this.negative!==0&&D.negative===0)return this.negative=0,R=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,R=this.isub(D),D.negative=1,R._normSign();var U,N;this.length>D.length?(U=this,N=D):(U=D,N=this);for(var X=0,j=0;j<N.length;j++)R=(U.words[j]|0)+(N.words[j]|0)+X,this.words[j]=R&67108863,X=R>>>26;for(;X!==0&&j<U.length;j++)R=(U.words[j]|0)+X,this.words[j]=R&67108863,X=R>>>26;if(this.length=U.length,X!==0)this.words[this.length]=X,this.length++;else if(U!==this)for(;j<U.length;j++)this.words[j]=U.words[j];return this},n.prototype.add=function(D){var R;return D.negative!==0&&this.negative===0?(D.negative=0,R=this.sub(D),D.negative^=1,R):D.negative===0&&this.negative!==0?(this.negative=0,R=D.sub(this),this.negative=1,R):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},n.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var R=this.iadd(D);return D.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var U=this.cmp(D);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;var N,X;U>0?(N=this,X=D):(N=D,X=this);for(var j=0,ee=0;ee<X.length;ee++)R=(N.words[ee]|0)-(X.words[ee]|0)+j,j=R>>26,this.words[ee]=R&67108863;for(;j!==0&&ee<N.length;ee++)R=(N.words[ee]|0)+j,j=R>>26,this.words[ee]=R&67108863;if(j===0&&ee<N.length&&N!==this)for(;ee<N.length;ee++)this.words[ee]=N.words[ee];return this.length=Math.max(this.length,ee),N!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(D){return this.clone().isub(D)};function g(F,D,R){R.negative=D.negative^F.negative;var U=F.length+D.length|0;R.length=U,U=U-1|0;var N=F.words[0]|0,X=D.words[0]|0,j=N*X,ee=j&67108863,q=j/67108864|0;R.words[0]=ee;for(var G=1;G<U;G++){for(var J=q>>>26,le=q&67108863,fe=Math.min(G,D.length-1),se=Math.max(0,G-F.length+1);se<=fe;se++){var V=G-se|0;N=F.words[V]|0,X=D.words[se]|0,j=N*X+le,J+=j/67108864|0,le=j&67108863}R.words[G]=le|0,q=J|0}return q!==0?R.words[G]=q|0:R.length--,R.strip()}var A=function(D,R,U){var N=D.words,X=R.words,j=U.words,ee=0,q,G,J,le=N[0]|0,fe=le&8191,se=le>>>13,V=N[1]|0,Y=V&8191,ne=V>>>13,te=N[2]|0,K=te&8191,$=te>>>13,ae=N[3]|0,ie=ae&8191,oe=ae>>>13,ue=N[4]|0,xe=ue&8191,he=ue>>>13,me=N[5]|0,be=me&8191,Ce=me>>>13,Se=N[6]|0,Be=Se&8191,Ye=Se>>>13,Xe=N[7]|0,Te=Xe&8191,Ie=Xe>>>13,Ze=N[8]|0,rt=Ze&8191,Ge=Ze>>>13,ze=N[9]|0,We=ze&8191,mt=ze>>>13,Ft=X[0]|0,Xt=Ft&8191,Pt=Ft>>>13,Ut=X[1]|0,Gt=Ut&8191,It=Ut>>>13,Ct=X[2]|0,lt=Ct&8191,dt=Ct>>>13,et=X[3]|0,Pe=et&8191,Je=et>>>13,it=X[4]|0,ht=it&8191,zt=it>>>13,Lt=X[5]|0,Vt=Lt&8191,$t=Lt>>>13,Ht=X[6]|0,tr=Ht&8191,qe=Ht>>>13,xt=X[7]|0,Rt=xt&8191,fr=xt>>>13,br=X[8]|0,pr=br&8191,Tr=br>>>13,Nr=X[9]|0,Ir=Nr&8191,lr=Nr>>>13;U.negative=D.negative^R.negative,U.length=19,q=Math.imul(fe,Xt),G=Math.imul(fe,Pt),G=G+Math.imul(se,Xt)|0,J=Math.imul(se,Pt);var Yr=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,q=Math.imul(Y,Xt),G=Math.imul(Y,Pt),G=G+Math.imul(ne,Xt)|0,J=Math.imul(ne,Pt),q=q+Math.imul(fe,Gt)|0,G=G+Math.imul(fe,It)|0,G=G+Math.imul(se,Gt)|0,J=J+Math.imul(se,It)|0;var nt=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(nt>>>26)|0,nt&=67108863,q=Math.imul(K,Xt),G=Math.imul(K,Pt),G=G+Math.imul($,Xt)|0,J=Math.imul($,Pt),q=q+Math.imul(Y,Gt)|0,G=G+Math.imul(Y,It)|0,G=G+Math.imul(ne,Gt)|0,J=J+Math.imul(ne,It)|0,q=q+Math.imul(fe,lt)|0,G=G+Math.imul(fe,dt)|0,G=G+Math.imul(se,lt)|0,J=J+Math.imul(se,dt)|0;var Ae=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,q=Math.imul(ie,Xt),G=Math.imul(ie,Pt),G=G+Math.imul(oe,Xt)|0,J=Math.imul(oe,Pt),q=q+Math.imul(K,Gt)|0,G=G+Math.imul(K,It)|0,G=G+Math.imul($,Gt)|0,J=J+Math.imul($,It)|0,q=q+Math.imul(Y,lt)|0,G=G+Math.imul(Y,dt)|0,G=G+Math.imul(ne,lt)|0,J=J+Math.imul(ne,dt)|0,q=q+Math.imul(fe,Pe)|0,G=G+Math.imul(fe,Je)|0,G=G+Math.imul(se,Pe)|0,J=J+Math.imul(se,Je)|0;var Ee=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,q=Math.imul(xe,Xt),G=Math.imul(xe,Pt),G=G+Math.imul(he,Xt)|0,J=Math.imul(he,Pt),q=q+Math.imul(ie,Gt)|0,G=G+Math.imul(ie,It)|0,G=G+Math.imul(oe,Gt)|0,J=J+Math.imul(oe,It)|0,q=q+Math.imul(K,lt)|0,G=G+Math.imul(K,dt)|0,G=G+Math.imul($,lt)|0,J=J+Math.imul($,dt)|0,q=q+Math.imul(Y,Pe)|0,G=G+Math.imul(Y,Je)|0,G=G+Math.imul(ne,Pe)|0,J=J+Math.imul(ne,Je)|0,q=q+Math.imul(fe,ht)|0,G=G+Math.imul(fe,zt)|0,G=G+Math.imul(se,ht)|0,J=J+Math.imul(se,zt)|0;var Fe=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,q=Math.imul(be,Xt),G=Math.imul(be,Pt),G=G+Math.imul(Ce,Xt)|0,J=Math.imul(Ce,Pt),q=q+Math.imul(xe,Gt)|0,G=G+Math.imul(xe,It)|0,G=G+Math.imul(he,Gt)|0,J=J+Math.imul(he,It)|0,q=q+Math.imul(ie,lt)|0,G=G+Math.imul(ie,dt)|0,G=G+Math.imul(oe,lt)|0,J=J+Math.imul(oe,dt)|0,q=q+Math.imul(K,Pe)|0,G=G+Math.imul(K,Je)|0,G=G+Math.imul($,Pe)|0,J=J+Math.imul($,Je)|0,q=q+Math.imul(Y,ht)|0,G=G+Math.imul(Y,zt)|0,G=G+Math.imul(ne,ht)|0,J=J+Math.imul(ne,zt)|0,q=q+Math.imul(fe,Vt)|0,G=G+Math.imul(fe,$t)|0,G=G+Math.imul(se,Vt)|0,J=J+Math.imul(se,$t)|0;var Ke=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,q=Math.imul(Be,Xt),G=Math.imul(Be,Pt),G=G+Math.imul(Ye,Xt)|0,J=Math.imul(Ye,Pt),q=q+Math.imul(be,Gt)|0,G=G+Math.imul(be,It)|0,G=G+Math.imul(Ce,Gt)|0,J=J+Math.imul(Ce,It)|0,q=q+Math.imul(xe,lt)|0,G=G+Math.imul(xe,dt)|0,G=G+Math.imul(he,lt)|0,J=J+Math.imul(he,dt)|0,q=q+Math.imul(ie,Pe)|0,G=G+Math.imul(ie,Je)|0,G=G+Math.imul(oe,Pe)|0,J=J+Math.imul(oe,Je)|0,q=q+Math.imul(K,ht)|0,G=G+Math.imul(K,zt)|0,G=G+Math.imul($,ht)|0,J=J+Math.imul($,zt)|0,q=q+Math.imul(Y,Vt)|0,G=G+Math.imul(Y,$t)|0,G=G+Math.imul(ne,Vt)|0,J=J+Math.imul(ne,$t)|0,q=q+Math.imul(fe,tr)|0,G=G+Math.imul(fe,qe)|0,G=G+Math.imul(se,tr)|0,J=J+Math.imul(se,qe)|0;var tt=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(tt>>>26)|0,tt&=67108863,q=Math.imul(Te,Xt),G=Math.imul(Te,Pt),G=G+Math.imul(Ie,Xt)|0,J=Math.imul(Ie,Pt),q=q+Math.imul(Be,Gt)|0,G=G+Math.imul(Be,It)|0,G=G+Math.imul(Ye,Gt)|0,J=J+Math.imul(Ye,It)|0,q=q+Math.imul(be,lt)|0,G=G+Math.imul(be,dt)|0,G=G+Math.imul(Ce,lt)|0,J=J+Math.imul(Ce,dt)|0,q=q+Math.imul(xe,Pe)|0,G=G+Math.imul(xe,Je)|0,G=G+Math.imul(he,Pe)|0,J=J+Math.imul(he,Je)|0,q=q+Math.imul(ie,ht)|0,G=G+Math.imul(ie,zt)|0,G=G+Math.imul(oe,ht)|0,J=J+Math.imul(oe,zt)|0,q=q+Math.imul(K,Vt)|0,G=G+Math.imul(K,$t)|0,G=G+Math.imul($,Vt)|0,J=J+Math.imul($,$t)|0,q=q+Math.imul(Y,tr)|0,G=G+Math.imul(Y,qe)|0,G=G+Math.imul(ne,tr)|0,J=J+Math.imul(ne,qe)|0,q=q+Math.imul(fe,Rt)|0,G=G+Math.imul(fe,fr)|0,G=G+Math.imul(se,Rt)|0,J=J+Math.imul(se,fr)|0;var ut=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(ut>>>26)|0,ut&=67108863,q=Math.imul(rt,Xt),G=Math.imul(rt,Pt),G=G+Math.imul(Ge,Xt)|0,J=Math.imul(Ge,Pt),q=q+Math.imul(Te,Gt)|0,G=G+Math.imul(Te,It)|0,G=G+Math.imul(Ie,Gt)|0,J=J+Math.imul(Ie,It)|0,q=q+Math.imul(Be,lt)|0,G=G+Math.imul(Be,dt)|0,G=G+Math.imul(Ye,lt)|0,J=J+Math.imul(Ye,dt)|0,q=q+Math.imul(be,Pe)|0,G=G+Math.imul(be,Je)|0,G=G+Math.imul(Ce,Pe)|0,J=J+Math.imul(Ce,Je)|0,q=q+Math.imul(xe,ht)|0,G=G+Math.imul(xe,zt)|0,G=G+Math.imul(he,ht)|0,J=J+Math.imul(he,zt)|0,q=q+Math.imul(ie,Vt)|0,G=G+Math.imul(ie,$t)|0,G=G+Math.imul(oe,Vt)|0,J=J+Math.imul(oe,$t)|0,q=q+Math.imul(K,tr)|0,G=G+Math.imul(K,qe)|0,G=G+Math.imul($,tr)|0,J=J+Math.imul($,qe)|0,q=q+Math.imul(Y,Rt)|0,G=G+Math.imul(Y,fr)|0,G=G+Math.imul(ne,Rt)|0,J=J+Math.imul(ne,fr)|0,q=q+Math.imul(fe,pr)|0,G=G+Math.imul(fe,Tr)|0,G=G+Math.imul(se,pr)|0,J=J+Math.imul(se,Tr)|0;var ct=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(ct>>>26)|0,ct&=67108863,q=Math.imul(We,Xt),G=Math.imul(We,Pt),G=G+Math.imul(mt,Xt)|0,J=Math.imul(mt,Pt),q=q+Math.imul(rt,Gt)|0,G=G+Math.imul(rt,It)|0,G=G+Math.imul(Ge,Gt)|0,J=J+Math.imul(Ge,It)|0,q=q+Math.imul(Te,lt)|0,G=G+Math.imul(Te,dt)|0,G=G+Math.imul(Ie,lt)|0,J=J+Math.imul(Ie,dt)|0,q=q+Math.imul(Be,Pe)|0,G=G+Math.imul(Be,Je)|0,G=G+Math.imul(Ye,Pe)|0,J=J+Math.imul(Ye,Je)|0,q=q+Math.imul(be,ht)|0,G=G+Math.imul(be,zt)|0,G=G+Math.imul(Ce,ht)|0,J=J+Math.imul(Ce,zt)|0,q=q+Math.imul(xe,Vt)|0,G=G+Math.imul(xe,$t)|0,G=G+Math.imul(he,Vt)|0,J=J+Math.imul(he,$t)|0,q=q+Math.imul(ie,tr)|0,G=G+Math.imul(ie,qe)|0,G=G+Math.imul(oe,tr)|0,J=J+Math.imul(oe,qe)|0,q=q+Math.imul(K,Rt)|0,G=G+Math.imul(K,fr)|0,G=G+Math.imul($,Rt)|0,J=J+Math.imul($,fr)|0,q=q+Math.imul(Y,pr)|0,G=G+Math.imul(Y,Tr)|0,G=G+Math.imul(ne,pr)|0,J=J+Math.imul(ne,Tr)|0,q=q+Math.imul(fe,Ir)|0,G=G+Math.imul(fe,lr)|0,G=G+Math.imul(se,Ir)|0,J=J+Math.imul(se,lr)|0;var yt=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(yt>>>26)|0,yt&=67108863,q=Math.imul(We,Gt),G=Math.imul(We,It),G=G+Math.imul(mt,Gt)|0,J=Math.imul(mt,It),q=q+Math.imul(rt,lt)|0,G=G+Math.imul(rt,dt)|0,G=G+Math.imul(Ge,lt)|0,J=J+Math.imul(Ge,dt)|0,q=q+Math.imul(Te,Pe)|0,G=G+Math.imul(Te,Je)|0,G=G+Math.imul(Ie,Pe)|0,J=J+Math.imul(Ie,Je)|0,q=q+Math.imul(Be,ht)|0,G=G+Math.imul(Be,zt)|0,G=G+Math.imul(Ye,ht)|0,J=J+Math.imul(Ye,zt)|0,q=q+Math.imul(be,Vt)|0,G=G+Math.imul(be,$t)|0,G=G+Math.imul(Ce,Vt)|0,J=J+Math.imul(Ce,$t)|0,q=q+Math.imul(xe,tr)|0,G=G+Math.imul(xe,qe)|0,G=G+Math.imul(he,tr)|0,J=J+Math.imul(he,qe)|0,q=q+Math.imul(ie,Rt)|0,G=G+Math.imul(ie,fr)|0,G=G+Math.imul(oe,Rt)|0,J=J+Math.imul(oe,fr)|0,q=q+Math.imul(K,pr)|0,G=G+Math.imul(K,Tr)|0,G=G+Math.imul($,pr)|0,J=J+Math.imul($,Tr)|0,q=q+Math.imul(Y,Ir)|0,G=G+Math.imul(Y,lr)|0,G=G+Math.imul(ne,Ir)|0,J=J+Math.imul(ne,lr)|0;var kt=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(kt>>>26)|0,kt&=67108863,q=Math.imul(We,lt),G=Math.imul(We,dt),G=G+Math.imul(mt,lt)|0,J=Math.imul(mt,dt),q=q+Math.imul(rt,Pe)|0,G=G+Math.imul(rt,Je)|0,G=G+Math.imul(Ge,Pe)|0,J=J+Math.imul(Ge,Je)|0,q=q+Math.imul(Te,ht)|0,G=G+Math.imul(Te,zt)|0,G=G+Math.imul(Ie,ht)|0,J=J+Math.imul(Ie,zt)|0,q=q+Math.imul(Be,Vt)|0,G=G+Math.imul(Be,$t)|0,G=G+Math.imul(Ye,Vt)|0,J=J+Math.imul(Ye,$t)|0,q=q+Math.imul(be,tr)|0,G=G+Math.imul(be,qe)|0,G=G+Math.imul(Ce,tr)|0,J=J+Math.imul(Ce,qe)|0,q=q+Math.imul(xe,Rt)|0,G=G+Math.imul(xe,fr)|0,G=G+Math.imul(he,Rt)|0,J=J+Math.imul(he,fr)|0,q=q+Math.imul(ie,pr)|0,G=G+Math.imul(ie,Tr)|0,G=G+Math.imul(oe,pr)|0,J=J+Math.imul(oe,Tr)|0,q=q+Math.imul(K,Ir)|0,G=G+Math.imul(K,lr)|0,G=G+Math.imul($,Ir)|0,J=J+Math.imul($,lr)|0;var jt=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(jt>>>26)|0,jt&=67108863,q=Math.imul(We,Pe),G=Math.imul(We,Je),G=G+Math.imul(mt,Pe)|0,J=Math.imul(mt,Je),q=q+Math.imul(rt,ht)|0,G=G+Math.imul(rt,zt)|0,G=G+Math.imul(Ge,ht)|0,J=J+Math.imul(Ge,zt)|0,q=q+Math.imul(Te,Vt)|0,G=G+Math.imul(Te,$t)|0,G=G+Math.imul(Ie,Vt)|0,J=J+Math.imul(Ie,$t)|0,q=q+Math.imul(Be,tr)|0,G=G+Math.imul(Be,qe)|0,G=G+Math.imul(Ye,tr)|0,J=J+Math.imul(Ye,qe)|0,q=q+Math.imul(be,Rt)|0,G=G+Math.imul(be,fr)|0,G=G+Math.imul(Ce,Rt)|0,J=J+Math.imul(Ce,fr)|0,q=q+Math.imul(xe,pr)|0,G=G+Math.imul(xe,Tr)|0,G=G+Math.imul(he,pr)|0,J=J+Math.imul(he,Tr)|0,q=q+Math.imul(ie,Ir)|0,G=G+Math.imul(ie,lr)|0,G=G+Math.imul(oe,Ir)|0,J=J+Math.imul(oe,lr)|0;var Mr=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,q=Math.imul(We,ht),G=Math.imul(We,zt),G=G+Math.imul(mt,ht)|0,J=Math.imul(mt,zt),q=q+Math.imul(rt,Vt)|0,G=G+Math.imul(rt,$t)|0,G=G+Math.imul(Ge,Vt)|0,J=J+Math.imul(Ge,$t)|0,q=q+Math.imul(Te,tr)|0,G=G+Math.imul(Te,qe)|0,G=G+Math.imul(Ie,tr)|0,J=J+Math.imul(Ie,qe)|0,q=q+Math.imul(Be,Rt)|0,G=G+Math.imul(Be,fr)|0,G=G+Math.imul(Ye,Rt)|0,J=J+Math.imul(Ye,fr)|0,q=q+Math.imul(be,pr)|0,G=G+Math.imul(be,Tr)|0,G=G+Math.imul(Ce,pr)|0,J=J+Math.imul(Ce,Tr)|0,q=q+Math.imul(xe,Ir)|0,G=G+Math.imul(xe,lr)|0,G=G+Math.imul(he,Ir)|0,J=J+Math.imul(he,lr)|0;var Sr=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,q=Math.imul(We,Vt),G=Math.imul(We,$t),G=G+Math.imul(mt,Vt)|0,J=Math.imul(mt,$t),q=q+Math.imul(rt,tr)|0,G=G+Math.imul(rt,qe)|0,G=G+Math.imul(Ge,tr)|0,J=J+Math.imul(Ge,qe)|0,q=q+Math.imul(Te,Rt)|0,G=G+Math.imul(Te,fr)|0,G=G+Math.imul(Ie,Rt)|0,J=J+Math.imul(Ie,fr)|0,q=q+Math.imul(Be,pr)|0,G=G+Math.imul(Be,Tr)|0,G=G+Math.imul(Ye,pr)|0,J=J+Math.imul(Ye,Tr)|0,q=q+Math.imul(be,Ir)|0,G=G+Math.imul(be,lr)|0,G=G+Math.imul(Ce,Ir)|0,J=J+Math.imul(Ce,lr)|0;var Lr=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,q=Math.imul(We,tr),G=Math.imul(We,qe),G=G+Math.imul(mt,tr)|0,J=Math.imul(mt,qe),q=q+Math.imul(rt,Rt)|0,G=G+Math.imul(rt,fr)|0,G=G+Math.imul(Ge,Rt)|0,J=J+Math.imul(Ge,fr)|0,q=q+Math.imul(Te,pr)|0,G=G+Math.imul(Te,Tr)|0,G=G+Math.imul(Ie,pr)|0,J=J+Math.imul(Ie,Tr)|0,q=q+Math.imul(Be,Ir)|0,G=G+Math.imul(Be,lr)|0,G=G+Math.imul(Ye,Ir)|0,J=J+Math.imul(Ye,lr)|0;var Ar=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,q=Math.imul(We,Rt),G=Math.imul(We,fr),G=G+Math.imul(mt,Rt)|0,J=Math.imul(mt,fr),q=q+Math.imul(rt,pr)|0,G=G+Math.imul(rt,Tr)|0,G=G+Math.imul(Ge,pr)|0,J=J+Math.imul(Ge,Tr)|0,q=q+Math.imul(Te,Ir)|0,G=G+Math.imul(Te,lr)|0,G=G+Math.imul(Ie,Ir)|0,J=J+Math.imul(Ie,lr)|0;var Ur=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,q=Math.imul(We,pr),G=Math.imul(We,Tr),G=G+Math.imul(mt,pr)|0,J=Math.imul(mt,Tr),q=q+Math.imul(rt,Ir)|0,G=G+Math.imul(rt,lr)|0,G=G+Math.imul(Ge,Ir)|0,J=J+Math.imul(Ge,lr)|0;var fn=(ee+q|0)+((G&8191)<<13)|0;ee=(J+(G>>>13)|0)+(fn>>>26)|0,fn&=67108863,q=Math.imul(We,Ir),G=Math.imul(We,lr),G=G+Math.imul(mt,Ir)|0,J=Math.imul(mt,lr);var Cr=(ee+q|0)+((G&8191)<<13)|0;return ee=(J+(G>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,j[0]=Yr,j[1]=nt,j[2]=Ae,j[3]=Ee,j[4]=Fe,j[5]=Ke,j[6]=tt,j[7]=ut,j[8]=ct,j[9]=yt,j[10]=kt,j[11]=jt,j[12]=Mr,j[13]=Sr,j[14]=Lr,j[15]=Ar,j[16]=Ur,j[17]=fn,j[18]=Cr,ee!==0&&(j[19]=ee,U.length++),U};Math.imul||(A=g);function b(F,D,R){R.negative=D.negative^F.negative,R.length=F.length+D.length;for(var U=0,N=0,X=0;X<R.length-1;X++){var j=N;N=0;for(var ee=U&67108863,q=Math.min(X,D.length-1),G=Math.max(0,X-F.length+1);G<=q;G++){var J=X-G,le=F.words[J]|0,fe=D.words[G]|0,se=le*fe,V=se&67108863;j=j+(se/67108864|0)|0,V=V+ee|0,ee=V&67108863,j=j+(V>>>26)|0,N+=j>>>26,j&=67108863}R.words[X]=ee,U=j,j=N}return U!==0?R.words[X]=U:R.length--,R.strip()}function M(F,D,R){var U=new w;return U.mulp(F,D,R)}n.prototype.mulTo=function(D,R){var U,N=this.length+D.length;return this.length===10&&D.length===10?U=A(this,D,R):N<63?U=g(this,D,R):N<1024?U=b(this,D,R):U=M(this,D,R),U};function w(F,D){this.x=F,this.y=D}w.prototype.makeRBT=function(D){for(var R=new Array(D),U=n.prototype._countBits(D)-1,N=0;N<D;N++)R[N]=this.revBin(N,U,D);return R},w.prototype.revBin=function(D,R,U){if(D===0||D===U-1)return D;for(var N=0,X=0;X<R;X++)N|=(D&1)<<R-X-1,D>>=1;return N},w.prototype.permute=function(D,R,U,N,X,j){for(var ee=0;ee<j;ee++)N[ee]=R[D[ee]],X[ee]=U[D[ee]]},w.prototype.transform=function(D,R,U,N,X,j){this.permute(j,D,R,U,N,X);for(var ee=1;ee<X;ee<<=1)for(var q=ee<<1,G=Math.cos(2*Math.PI/q),J=Math.sin(2*Math.PI/q),le=0;le<X;le+=q)for(var fe=G,se=J,V=0;V<ee;V++){var Y=U[le+V],ne=N[le+V],te=U[le+V+ee],K=N[le+V+ee],$=fe*te-se*K;K=fe*K+se*te,te=$,U[le+V]=Y+te,N[le+V]=ne+K,U[le+V+ee]=Y-te,N[le+V+ee]=ne-K,V!==q&&($=G*fe-J*se,se=G*se+J*fe,fe=$)}},w.prototype.guessLen13b=function(D,R){var U=Math.max(R,D)|1,N=U&1,X=0;for(U=U/2|0;U;U=U>>>1)X++;return 1<<X+1+N},w.prototype.conjugate=function(D,R,U){if(!(U<=1))for(var N=0;N<U/2;N++){var X=D[N];D[N]=D[U-N-1],D[U-N-1]=X,X=R[N],R[N]=-R[U-N-1],R[U-N-1]=-X}},w.prototype.normalize13b=function(D,R){for(var U=0,N=0;N<R/2;N++){var X=Math.round(D[2*N+1]/R)*8192+Math.round(D[2*N]/R)+U;D[N]=X&67108863,X<67108864?U=0:U=X/67108864|0}return D},w.prototype.convert13b=function(D,R,U,N){for(var X=0,j=0;j<R;j++)X=X+(D[j]|0),U[2*j]=X&8191,X=X>>>13,U[2*j+1]=X&8191,X=X>>>13;for(j=2*R;j<N;++j)U[j]=0;a(X===0),a((X&~8191)==0)},w.prototype.stub=function(D){for(var R=new Array(D),U=0;U<D;U++)R[U]=0;return R},w.prototype.mulp=function(D,R,U){var N=2*this.guessLen13b(D.length,R.length),X=this.makeRBT(N),j=this.stub(N),ee=new Array(N),q=new Array(N),G=new Array(N),J=new Array(N),le=new Array(N),fe=new Array(N),se=U.words;se.length=N,this.convert13b(D.words,D.length,ee,N),this.convert13b(R.words,R.length,J,N),this.transform(ee,j,q,G,N,X),this.transform(J,j,le,fe,N,X);for(var V=0;V<N;V++){var Y=q[V]*le[V]-G[V]*fe[V];G[V]=q[V]*fe[V]+G[V]*le[V],q[V]=Y}return this.conjugate(q,G,N),this.transform(q,G,se,j,N,X),this.conjugate(se,j,N),this.normalize13b(se,N),U.negative=D.negative^R.negative,U.length=D.length+R.length,U.strip()},n.prototype.mul=function(D){var R=new n(null);return R.words=new Array(this.length+D.length),this.mulTo(D,R)},n.prototype.mulf=function(D){var R=new n(null);return R.words=new Array(this.length+D.length),M(this,D,R)},n.prototype.imul=function(D){return this.clone().mulTo(D,this)},n.prototype.imuln=function(D){a(typeof D=="number"),a(D<67108864);for(var R=0,U=0;U<this.length;U++){var N=(this.words[U]|0)*D,X=(N&67108863)+(R&67108863);R>>=26,R+=N/67108864|0,R+=X>>>26,this.words[U]=X&67108863}return R!==0&&(this.words[U]=R,this.length++),this},n.prototype.muln=function(D){return this.clone().imuln(D)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(D){var R=y(D);if(R.length===0)return new n(1);for(var U=this,N=0;N<R.length&&R[N]===0;N++,U=U.sqr());if(++N<R.length)for(var X=U.sqr();N<R.length;N++,X=X.sqr())R[N]!==0&&(U=U.mul(X));return U},n.prototype.iushln=function(D){a(typeof D=="number"&&D>=0);var R=D%26,U=(D-R)/26,N=67108863>>>26-R<<26-R,X;if(R!==0){var j=0;for(X=0;X<this.length;X++){var ee=this.words[X]&N,q=(this.words[X]|0)-ee<<R;this.words[X]=q|j,j=ee>>>26-R}j&&(this.words[X]=j,this.length++)}if(U!==0){for(X=this.length-1;X>=0;X--)this.words[X+U]=this.words[X];for(X=0;X<U;X++)this.words[X]=0;this.length+=U}return this.strip()},n.prototype.ishln=function(D){return a(this.negative===0),this.iushln(D)},n.prototype.iushrn=function(D,R,U){a(typeof D=="number"&&D>=0);var N;R?N=(R-R%26)/26:N=0;var X=D%26,j=Math.min((D-X)/26,this.length),ee=67108863^67108863>>>X<<X,q=U;if(N-=j,N=Math.max(0,N),q){for(var G=0;G<j;G++)q.words[G]=this.words[G];q.length=j}if(j!==0)if(this.length>j)for(this.length-=j,G=0;G<this.length;G++)this.words[G]=this.words[G+j];else this.words[0]=0,this.length=1;var J=0;for(G=this.length-1;G>=0&&(J!==0||G>=N);G--){var le=this.words[G]|0;this.words[G]=J<<26-X|le>>>X,J=le&ee}return q&&J!==0&&(q.words[q.length++]=J),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(D,R,U){return a(this.negative===0),this.iushrn(D,R,U)},n.prototype.shln=function(D){return this.clone().ishln(D)},n.prototype.ushln=function(D){return this.clone().iushln(D)},n.prototype.shrn=function(D){return this.clone().ishrn(D)},n.prototype.ushrn=function(D){return this.clone().iushrn(D)},n.prototype.testn=function(D){a(typeof D=="number"&&D>=0);var R=D%26,U=(D-R)/26,N=1<<R;if(this.length<=U)return!1;var X=this.words[U];return!!(X&N)},n.prototype.imaskn=function(D){a(typeof D=="number"&&D>=0);var R=D%26,U=(D-R)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=U)return this;if(R!==0&&U++,this.length=Math.min(U,this.length),R!==0){var N=67108863^67108863>>>R<<R;this.words[this.length-1]&=N}return this.strip()},n.prototype.maskn=function(D){return this.clone().imaskn(D)},n.prototype.iaddn=function(D){return a(typeof D=="number"),a(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},n.prototype._iaddn=function(D){this.words[0]+=D;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},n.prototype.isubn=function(D){if(a(typeof D=="number"),a(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},n.prototype.addn=function(D){return this.clone().iaddn(D)},n.prototype.subn=function(D){return this.clone().isubn(D)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(D,R,U){var N=D.length+U,X;this._expand(N);var j,ee=0;for(X=0;X<D.length;X++){j=(this.words[X+U]|0)+ee;var q=(D.words[X]|0)*R;j-=q&67108863,ee=(j>>26)-(q/67108864|0),this.words[X+U]=j&67108863}for(;X<this.length-U;X++)j=(this.words[X+U]|0)+ee,ee=j>>26,this.words[X+U]=j&67108863;if(ee===0)return this.strip();for(a(ee===-1),ee=0,X=0;X<this.length;X++)j=-(this.words[X]|0)+ee,ee=j>>26,this.words[X]=j&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(D,R){var U=this.length-D.length,N=this.clone(),X=D,j=X.words[X.length-1]|0,ee=this._countBits(j);U=26-ee,U!==0&&(X=X.ushln(U),N.iushln(U),j=X.words[X.length-1]|0);var q=N.length-X.length,G;if(R!=="mod"){G=new n(null),G.length=q+1,G.words=new Array(G.length);for(var J=0;J<G.length;J++)G.words[J]=0}var le=N.clone()._ishlnsubmul(X,1,q);le.negative===0&&(N=le,G&&(G.words[q]=1));for(var fe=q-1;fe>=0;fe--){var se=(N.words[X.length+fe]|0)*67108864+(N.words[X.length+fe-1]|0);for(se=Math.min(se/j|0,67108863),N._ishlnsubmul(X,se,fe);N.negative!==0;)se--,N.negative=0,N._ishlnsubmul(X,1,fe),N.isZero()||(N.negative^=1);G&&(G.words[fe]=se)}return G&&G.strip(),N.strip(),R!=="div"&&U!==0&&N.iushrn(U),{div:G||null,mod:N}},n.prototype.divmod=function(D,R,U){if(a(!D.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var N,X,j;return this.negative!==0&&D.negative===0?(j=this.neg().divmod(D,R),R!=="mod"&&(N=j.div.neg()),R!=="div"&&(X=j.mod.neg(),U&&X.negative!==0&&X.iadd(D)),{div:N,mod:X}):this.negative===0&&D.negative!==0?(j=this.divmod(D.neg(),R),R!=="mod"&&(N=j.div.neg()),{div:N,mod:j.mod}):(this.negative&D.negative)!=0?(j=this.neg().divmod(D.neg(),R),R!=="div"&&(X=j.mod.neg(),U&&X.negative!==0&&X.isub(D)),{div:j.div,mod:X}):D.length>this.length||this.cmp(D)<0?{div:new n(0),mod:this}:D.length===1?R==="div"?{div:this.divn(D.words[0]),mod:null}:R==="mod"?{div:null,mod:new n(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new n(this.modn(D.words[0]))}:this._wordDiv(D,R)},n.prototype.div=function(D){return this.divmod(D,"div",!1).div},n.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},n.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},n.prototype.divRound=function(D){var R=this.divmod(D);if(R.mod.isZero())return R.div;var U=R.div.negative!==0?R.mod.isub(D):R.mod,N=D.ushrn(1),X=D.andln(1),j=U.cmp(N);return j<0||X===1&&j===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},n.prototype.modn=function(D){a(D<=67108863);for(var R=(1<<26)%D,U=0,N=this.length-1;N>=0;N--)U=(R*U+(this.words[N]|0))%D;return U},n.prototype.idivn=function(D){a(D<=67108863);for(var R=0,U=this.length-1;U>=0;U--){var N=(this.words[U]|0)+R*67108864;this.words[U]=N/D|0,R=N%D}return this.strip()},n.prototype.divn=function(D){return this.clone().idivn(D)},n.prototype.egcd=function(D){a(D.negative===0),a(!D.isZero());var R=this,U=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var N=new n(1),X=new n(0),j=new n(0),ee=new n(1),q=0;R.isEven()&&U.isEven();)R.iushrn(1),U.iushrn(1),++q;for(var G=U.clone(),J=R.clone();!R.isZero();){for(var le=0,fe=1;(R.words[0]&fe)==0&&le<26;++le,fe<<=1);if(le>0)for(R.iushrn(le);le-- >0;)(N.isOdd()||X.isOdd())&&(N.iadd(G),X.isub(J)),N.iushrn(1),X.iushrn(1);for(var se=0,V=1;(U.words[0]&V)==0&&se<26;++se,V<<=1);if(se>0)for(U.iushrn(se);se-- >0;)(j.isOdd()||ee.isOdd())&&(j.iadd(G),ee.isub(J)),j.iushrn(1),ee.iushrn(1);R.cmp(U)>=0?(R.isub(U),N.isub(j),X.isub(ee)):(U.isub(R),j.isub(N),ee.isub(X))}return{a:j,b:ee,gcd:U.iushln(q)}},n.prototype._invmp=function(D){a(D.negative===0),a(!D.isZero());var R=this,U=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var N=new n(1),X=new n(0),j=U.clone();R.cmpn(1)>0&&U.cmpn(1)>0;){for(var ee=0,q=1;(R.words[0]&q)==0&&ee<26;++ee,q<<=1);if(ee>0)for(R.iushrn(ee);ee-- >0;)N.isOdd()&&N.iadd(j),N.iushrn(1);for(var G=0,J=1;(U.words[0]&J)==0&&G<26;++G,J<<=1);if(G>0)for(U.iushrn(G);G-- >0;)X.isOdd()&&X.iadd(j),X.iushrn(1);R.cmp(U)>=0?(R.isub(U),N.isub(X)):(U.isub(R),X.isub(N))}var le;return R.cmpn(1)===0?le=N:le=X,le.cmpn(0)<0&&le.iadd(D),le},n.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var R=this.clone(),U=D.clone();R.negative=0,U.negative=0;for(var N=0;R.isEven()&&U.isEven();N++)R.iushrn(1),U.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;U.isEven();)U.iushrn(1);var X=R.cmp(U);if(X<0){var j=R;R=U,U=j}else if(X===0||U.cmpn(1)===0)break;R.isub(U)}while(!0);return U.iushln(N)},n.prototype.invm=function(D){return this.egcd(D).a.umod(D)},n.prototype.isEven=function(){return(this.words[0]&1)==0},n.prototype.isOdd=function(){return(this.words[0]&1)==1},n.prototype.andln=function(D){return this.words[0]&D},n.prototype.bincn=function(D){a(typeof D=="number");var R=D%26,U=(D-R)/26,N=1<<R;if(this.length<=U)return this._expand(U+1),this.words[U]|=N,this;for(var X=N,j=U;X!==0&&j<this.length;j++){var ee=this.words[j]|0;ee+=X,X=ee>>>26,ee&=67108863,this.words[j]=ee}return X!==0&&(this.words[j]=X,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(D){var R=D<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var U;if(this.length>1)U=1;else{R&&(D=-D),a(D<=67108863,"Number is too big");var N=this.words[0]|0;U=N===D?0:N<D?-1:1}return this.negative!==0?-U|0:U},n.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var R=this.ucmp(D);return this.negative!==0?-R|0:R},n.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var R=0,U=this.length-1;U>=0;U--){var N=this.words[U]|0,X=D.words[U]|0;if(N!==X){N<X?R=-1:N>X&&(R=1);break}}return R},n.prototype.gtn=function(D){return this.cmpn(D)===1},n.prototype.gt=function(D){return this.cmp(D)===1},n.prototype.gten=function(D){return this.cmpn(D)>=0},n.prototype.gte=function(D){return this.cmp(D)>=0},n.prototype.ltn=function(D){return this.cmpn(D)===-1},n.prototype.lt=function(D){return this.cmp(D)===-1},n.prototype.lten=function(D){return this.cmpn(D)<=0},n.prototype.lte=function(D){return this.cmp(D)<=0},n.prototype.eqn=function(D){return this.cmpn(D)===0},n.prototype.eq=function(D){return this.cmp(D)===0},n.red=function(D){return new P(D)},n.prototype.toRed=function(D){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},n.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(D){return this.red=D,this},n.prototype.forceRed=function(D){return a(!this.red,"Already a number in reduction context"),this._forceRed(D)},n.prototype.redAdd=function(D){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},n.prototype.redIAdd=function(D){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},n.prototype.redSub=function(D){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},n.prototype.redISub=function(D){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},n.prototype.redShl=function(D){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},n.prototype.redMul=function(D){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},n.prototype.redIMul=function(D){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},n.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(D){return a(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var T={k256:null,p224:null,p192:null,p25519:null};function _(F,D){this.name=F,this.p=new n(D,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var D=new n(null);return D.words=new Array(Math.ceil(this.n/13)),D},_.prototype.ireduce=function(D){var R=D,U;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),U=R.bitLength();while(U>this.n);var N=U<this.n?-1:R.ucmp(this.p);return N===0?(R.words[0]=0,R.length=1):N>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},_.prototype.split=function(D,R){D.iushrn(this.n,0,R)},_.prototype.imulK=function(D){return D.imul(this.k)};function h(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(h,_),h.prototype.split=function(D,R){for(var U=4194303,N=Math.min(D.length,9),X=0;X<N;X++)R.words[X]=D.words[X];if(R.length=N,D.length<=9){D.words[0]=0,D.length=1;return}var j=D.words[9];for(R.words[R.length++]=j&U,X=10;X<D.length;X++){var ee=D.words[X]|0;D.words[X-10]=(ee&U)<<4|j>>>22,j=ee}j>>>=22,D.words[X-10]=j,j===0&&D.length>10?D.length-=10:D.length-=9},h.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var R=0,U=0;U<D.length;U++){var N=D.words[U]|0;R+=N*977,D.words[U]=R&67108863,R=N*64+(R/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function L(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(L,_);function S(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(S,_);function k(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(k,_),k.prototype.imulK=function(D){for(var R=0,U=0;U<D.length;U++){var N=(D.words[U]|0)*19+R,X=N&67108863;N>>>=26,D.words[U]=X,R=N}return R!==0&&(D.words[D.length++]=R),D},n._prime=function(D){if(T[D])return T[D];var R;if(D==="k256")R=new h;else if(D==="p224")R=new L;else if(D==="p192")R=new S;else if(D==="p25519")R=new k;else throw new Error("Unknown prime "+D);return T[D]=R,R};function P(F){if(typeof F=="string"){var D=n._prime(F);this.m=D.p,this.prime=D}else a(F.gtn(1),"modulus must be greater than 1"),this.m=F,this.prime=null}P.prototype._verify1=function(D){a(D.negative===0,"red works only with positives"),a(D.red,"red works only with red numbers")},P.prototype._verify2=function(D,R){a((D.negative|R.negative)==0,"red works only with positives"),a(D.red&&D.red===R.red,"red works only with red numbers")},P.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},P.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},P.prototype.add=function(D,R){this._verify2(D,R);var U=D.add(R);return U.cmp(this.m)>=0&&U.isub(this.m),U._forceRed(this)},P.prototype.iadd=function(D,R){this._verify2(D,R);var U=D.iadd(R);return U.cmp(this.m)>=0&&U.isub(this.m),U},P.prototype.sub=function(D,R){this._verify2(D,R);var U=D.sub(R);return U.cmpn(0)<0&&U.iadd(this.m),U._forceRed(this)},P.prototype.isub=function(D,R){this._verify2(D,R);var U=D.isub(R);return U.cmpn(0)<0&&U.iadd(this.m),U},P.prototype.shl=function(D,R){return this._verify1(D),this.imod(D.ushln(R))},P.prototype.imul=function(D,R){return this._verify2(D,R),this.imod(D.imul(R))},P.prototype.mul=function(D,R){return this._verify2(D,R),this.imod(D.mul(R))},P.prototype.isqr=function(D){return this.imul(D,D.clone())},P.prototype.sqr=function(D){return this.mul(D,D)},P.prototype.sqrt=function(D){if(D.isZero())return D.clone();var R=this.m.andln(3);if(a(R%2==1),R===3){var U=this.m.add(new n(1)).iushrn(2);return this.pow(D,U)}for(var N=this.m.subn(1),X=0;!N.isZero()&&N.andln(1)===0;)X++,N.iushrn(1);a(!N.isZero());var j=new n(1).toRed(this),ee=j.redNeg(),q=this.m.subn(1).iushrn(1),G=this.m.bitLength();for(G=new n(2*G*G).toRed(this);this.pow(G,q).cmp(ee)!==0;)G.redIAdd(ee);for(var J=this.pow(G,N),le=this.pow(D,N.addn(1).iushrn(1)),fe=this.pow(D,N),se=X;fe.cmp(j)!==0;){for(var V=fe,Y=0;V.cmp(j)!==0;Y++)V=V.redSqr();a(Y<se);var ne=this.pow(J,new n(1).iushln(se-Y-1));le=le.redMul(ne),J=ne.redSqr(),fe=fe.redMul(J),se=Y}return le},P.prototype.invm=function(D){var R=D._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},P.prototype.pow=function(D,R){if(R.isZero())return new n(1).toRed(this);if(R.cmpn(1)===0)return D.clone();var U=4,N=new Array(1<<U);N[0]=new n(1).toRed(this),N[1]=D;for(var X=2;X<N.length;X++)N[X]=this.mul(N[X-1],D);var j=N[0],ee=0,q=0,G=R.bitLength()%26;for(G===0&&(G=26),X=R.length-1;X>=0;X--){for(var J=R.words[X],le=G-1;le>=0;le--){var fe=J>>le&1;if(j!==N[0]&&(j=this.sqr(j)),fe===0&&ee===0){q=0;continue}ee<<=1,ee|=fe,q++,!(q!==U&&(X!==0||le!==0))&&(j=this.mul(j,N[ee]),q=0,ee=0)}G=26}return j},P.prototype.convertTo=function(D){var R=D.umod(this.m);return R===D?R.clone():R},P.prototype.convertFrom=function(D){var R=D.clone();return R.red=null,R},n.mont=function(D){return new O(D)};function O(F){P.call(this,F),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(O,P),O.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},O.prototype.convertFrom=function(D){var R=this.imod(D.mul(this.rinv));return R.red=null,R},O.prototype.imul=function(D,R){if(D.isZero()||R.isZero())return D.words[0]=0,D.length=1,D;var U=D.imul(R),N=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=U.isub(N).iushrn(this.shift),j=X;return X.cmp(this.m)>=0?j=X.isub(this.m):X.cmpn(0)<0&&(j=X.iadd(this.m)),j._forceRed(this)},O.prototype.mul=function(D,R){if(D.isZero()||R.isZero())return new n(0)._forceRed(this);var U=D.mul(R),N=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=U.isub(N).iushrn(this.shift),j=X;return X.cmp(this.m)>=0?j=X.isub(this.m):X.cmpn(0)<0&&(j=X.iadd(this.m)),j._forceRed(this)},O.prototype.invm=function(D){var R=this.imod(D._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof m=="undefined"||m,this)},{buffer:2}],34:[function(s,m,x){m.exports=t;function t(i){var a,r,n,f=i.length,l=0;for(a=0;a<f;++a)l+=i[a].length;var o=new Array(l),c=0;for(a=0;a<f;++a){var v=i[a],d=v.length;for(r=0;r<d;++r){var p=o[c++]=new Array(d-1),y=0;for(n=0;n<d;++n)n!==r&&(p[y++]=v[n]);if(r&1){var g=p[1];p[1]=p[0],p[0]=g}}}return o}},{}],35:[function(s,m,x){m.exports=d;var t=s("typedarray-pool"),i=s("./lib/sweep"),a=s("./lib/intersect");function r(p,y){for(var g=0;g<p;++g)if(!(y[g]<=y[g+p]))return!0;return!1}function n(p,y,g,A){for(var b=0,M=0,w=0,T=p.length;w<T;++w){var _=p[w];if(!r(y,_)){for(var h=0;h<2*y;++h)g[b++]=_[h];A[M++]=w}}return M}function f(p,y,g,A){var b=p.length,M=y.length;if(!(b<=0||M<=0)){var w=p[0].length>>>1;if(!(w<=0)){var T,_=t.mallocDouble(2*w*b),h=t.mallocInt32(b);if(b=n(p,w,_,h),b>0){if(w===1&&A)i.init(b),T=i.sweepComplete(w,g,0,b,_,h,0,b,_,h);else{var L=t.mallocDouble(2*w*M),S=t.mallocInt32(M);M=n(y,w,L,S),M>0&&(i.init(b+M),w===1?T=i.sweepBipartite(w,g,0,b,_,h,0,M,L,S):T=a(w,g,A,b,_,h,M,L,S),t.free(L),t.free(S))}t.free(_),t.free(h)}return T}}}var l;function o(p,y){l.push([p,y])}function c(p){return l=[],f(p,p,o,!0),l}function v(p,y){return l=[],f(p,y,o,!1),l}function d(p,y,g){switch(arguments.length){case 1:return c(p);case 2:return typeof y=="function"?f(p,p,y,!0):v(p,y);case 3:return f(p,y,g,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(s,m,x){function t(){function r(l,o,c,v,d,p,y,g,A,b,M){for(var w=2*l,T=v,_=w*v;T<d;++T,_+=w){var h=p[o+_],L=p[o+_+l],S=y[T];e:for(var k=g,P=w*g;k<A;++k,P+=w){var O=b[o+P],F=b[o+P+l],D=M[k];if(!(F<h||L<O)){for(var R=o+1;R<l;++R){var U=p[R+_],N=p[R+l+_],X=b[R+P],j=b[R+l+P];if(N<X||j<U)continue e}var ee=c(S,D);if(ee!==void 0)return ee}}}}function n(l,o,c,v,d,p,y,g,A,b,M){for(var w=2*l,T=g,_=w*g;T<A;++T,_+=w){var h=b[o+_],L=b[o+_+l],S=M[T];e:for(var k=v,P=w*v;k<d;++k,P+=w){var O=p[o+P],F=p[o+P+l],D=y[k];if(!(L<O||F<h)){for(var R=o+1;R<l;++R){var U=p[R+P],N=p[R+l+P],X=b[R+_],j=b[R+l+_];if(N<X||j<U)continue e}var ee=c(D,S);if(ee!==void 0)return ee}}}}function f(l,o,c,v,d,p,y,g,A,b,M){return d-v>A-g?r(l,o,c,v,d,p,y,g,A,b,M):n(l,o,c,v,d,p,y,g,A,b,M)}return f}function i(){function r(c,v,d,p,y,g,A,b,M,w,T){for(var _=2*c,h=p,L=_*p;h<y;++h,L+=_){var S=g[v+L],k=g[v+L+c],P=A[h];e:for(var O=b,F=_*b;O<M;++O,F+=_){var D=w[v+F],R=T[O];if(!(D<=S||k<D)){for(var U=v+1;U<c;++U){var N=g[U+L],X=g[U+c+L],j=w[U+F],ee=w[U+c+F];if(X<j||ee<N)continue e}var q=d(R,P);if(q!==void 0)return q}}}}function n(c,v,d,p,y,g,A,b,M,w,T){for(var _=2*c,h=p,L=_*p;h<y;++h,L+=_){var S=g[v+L],k=g[v+L+c],P=A[h];e:for(var O=b,F=_*b;O<M;++O,F+=_){var D=w[v+F],R=T[O];if(!(D<S||k<D)){for(var U=v+1;U<c;++U){var N=g[U+L],X=g[U+c+L],j=w[U+F],ee=w[U+c+F];if(X<j||ee<N)continue e}var q=d(P,R);if(q!==void 0)return q}}}}function f(c,v,d,p,y,g,A,b,M,w,T){for(var _=2*c,h=b,L=_*b;h<M;++h,L+=_){var S=w[v+L],k=T[h];e:for(var P=p,O=_*p;P<y;++P,O+=_){var F=g[v+O],D=g[v+O+c],R=A[P];if(!(S<=F||D<S)){for(var U=v+1;U<c;++U){var N=g[U+O],X=g[U+c+O],j=w[U+L],ee=w[U+c+L];if(X<j||ee<N)continue e}var q=d(k,R);if(q!==void 0)return q}}}}function l(c,v,d,p,y,g,A,b,M,w,T){for(var _=2*c,h=b,L=_*b;h<M;++h,L+=_){var S=w[v+L],k=T[h];e:for(var P=p,O=_*p;P<y;++P,O+=_){var F=g[v+O],D=g[v+O+c],R=A[P];if(!(S<F||D<S)){for(var U=v+1;U<c;++U){var N=g[U+O],X=g[U+c+O],j=w[U+L],ee=w[U+c+L];if(X<j||ee<N)continue e}var q=d(R,k);if(q!==void 0)return q}}}}function o(c,v,d,p,y,g,A,b,M,w,T,_){return g-y>w-M?p?r(c,v,d,y,g,A,b,M,w,T,_):n(c,v,d,y,g,A,b,M,w,T,_):p?f(c,v,d,y,g,A,b,M,w,T,_):l(c,v,d,y,g,A,b,M,w,T,_)}return o}function a(r){return r?t():i()}x.partial=a(!1),x.full=a(!0)},{}],37:[function(s,m,x){m.exports=F;var t=s("typedarray-pool"),i=s("bit-twiddle"),a=s("./brute"),r=a.partial,n=a.full,f=s("./sweep"),l=s("./median"),o=s("./partition"),c=128,v=1<<22,d=1<<22,p=o("!(lo>=p0)&&!(p1>=hi)"),y=o("lo===p0"),g=o("lo<p0"),A=o("hi<=p0"),b=o("lo<=p0&&p0<=hi"),M=o("lo<p0&&p0<=hi"),w=6,T=2,_=1024,h=t.mallocInt32(_),L=t.mallocDouble(_);function S(D,R){var U=8*i.log2(R+1)*(D+1)|0,N=i.nextPow2(w*U);h.length<N&&(t.free(h),h=t.mallocInt32(N));var X=i.nextPow2(T*U);L.length<X&&(t.free(L),L=t.mallocDouble(X))}function k(D,R,U,N,X,j,ee,q,G){var J=w*D;h[J]=R,h[J+1]=U,h[J+2]=N,h[J+3]=X,h[J+4]=j,h[J+5]=ee;var le=T*D;L[le]=q,L[le+1]=G}function P(D,R,U,N,X,j,ee,q,G,J,le){var fe=2*D,se=G*fe,V=J[se+R];e:for(var Y=X,ne=X*fe;Y<j;++Y,ne+=fe){var te=ee[ne+R],K=ee[ne+R+D];if(!(V<te||K<V)&&!(N&&V===te)){for(var $=q[Y],ae=R+1;ae<D;++ae){var te=ee[ne+ae],K=ee[ne+ae+D],ie=J[se+ae],oe=J[se+ae+D];if(K<ie||oe<te)continue e}var ue;if(N?ue=U(le,$):ue=U($,le),ue!==void 0)return ue}}}function O(D,R,U,N,X,j,ee,q,G,J){var le=2*D,fe=q*le,se=G[fe+R];e:for(var V=N,Y=N*le;V<X;++V,Y+=le){var ne=ee[V];if(ne!==J){var te=j[Y+R],K=j[Y+R+D];if(!(se<te||K<se)){for(var $=R+1;$<D;++$){var te=j[Y+$],K=j[Y+$+D],ae=G[fe+$],ie=G[fe+$+D];if(K<ae||ie<te)continue e}var oe=U(ne,J);if(oe!==void 0)return oe}}}}function F(D,R,U,N,X,j,ee,q,G){S(D,N+ee);var J=0,le=2*D,fe;for(k(J++,0,0,N,0,ee,U?16:0,-1/0,1/0),U||k(J++,0,0,ee,0,N,1,-1/0,1/0);J>0;){J-=1;var se=J*w,V=h[se],Y=h[se+1],ne=h[se+2],te=h[se+3],K=h[se+4],$=h[se+5],ae=J*T,ie=L[ae],oe=L[ae+1],ue=$&1,xe=!!($&16),he=X,me=j,be=q,Ce=G;if(ue&&(he=q,me=G,be=X,Ce=j),!($&2&&(ne=g(D,V,Y,ne,he,me,oe),Y>=ne))&&!($&4&&(Y=A(D,V,Y,ne,he,me,ie),Y>=ne))){var Se=ne-Y,Be=K-te;if(xe){if(D*Se*(Se+Be)<d){if(fe=f.scanComplete(D,V,R,Y,ne,he,me,te,K,be,Ce),fe!==void 0)return fe;continue}}else if(D*Math.min(Se,Be)<c){if(fe=r(D,V,R,ue,Y,ne,he,me,te,K,be,Ce),fe!==void 0)return fe;continue}else if(D*Se*Be<v){if(fe=f.scanBipartite(D,V,R,ue,Y,ne,he,me,te,K,be,Ce),fe!==void 0)return fe;continue}var Ye=p(D,V,Y,ne,he,me,ie,oe);if(Y<Ye)if(D*(Ye-Y)<c){if(fe=n(D,V+1,R,Y,Ye,he,me,te,K,be,Ce),fe!==void 0)return fe}else if(V===D-2){if(ue?fe=f.sweepBipartite(D,R,te,K,be,Ce,Y,Ye,he,me):fe=f.sweepBipartite(D,R,Y,Ye,he,me,te,K,be,Ce),fe!==void 0)return fe}else k(J++,V+1,Y,Ye,te,K,ue,-1/0,1/0),k(J++,V+1,te,K,Y,Ye,ue^1,-1/0,1/0);if(Ye<ne){var Xe=l(D,V,te,K,be,Ce),Te=be[le*Xe+V],Ie=y(D,V,Xe,K,be,Ce,Te);if(Ie<K&&k(J++,V,Ye,ne,Ie,K,(ue|4)+(xe?16:0),Te,oe),te<Xe&&k(J++,V,Ye,ne,te,Xe,(ue|2)+(xe?16:0),ie,Te),Xe+1===Ie){if(xe?fe=O(D,V,R,Ye,ne,he,me,Xe,be,Ce[Xe]):fe=P(D,V,R,ue,Ye,ne,he,me,Xe,be,Ce[Xe]),fe!==void 0)return fe}else if(Xe<Ie){var Ze;if(xe){if(Ze=b(D,V,Ye,ne,he,me,Te),Ye<Ze){var rt=y(D,V,Ye,Ze,he,me,Te);if(V===D-2){if(Ye<rt&&(fe=f.sweepComplete(D,R,Ye,rt,he,me,Xe,Ie,be,Ce),fe!==void 0)||rt<Ze&&(fe=f.sweepBipartite(D,R,rt,Ze,he,me,Xe,Ie,be,Ce),fe!==void 0))return fe}else Ye<rt&&k(J++,V+1,Ye,rt,Xe,Ie,16,-1/0,1/0),rt<Ze&&(k(J++,V+1,rt,Ze,Xe,Ie,0,-1/0,1/0),k(J++,V+1,Xe,Ie,rt,Ze,1,-1/0,1/0))}}else ue?Ze=M(D,V,Ye,ne,he,me,Te):Ze=b(D,V,Ye,ne,he,me,Te),Ye<Ze&&(V===D-2?ue?fe=f.sweepBipartite(D,R,Xe,Ie,be,Ce,Ye,Ze,he,me):fe=f.sweepBipartite(D,R,Ye,Ze,he,me,Xe,Ie,be,Ce):(k(J++,V+1,Ye,Ze,Xe,Ie,ue,-1/0,1/0),k(J++,V+1,Xe,Ie,Ye,Ze,ue^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(s,m,x){m.exports=n;var t=s("./partition"),i=t("lo<p0"),a=8;function r(f,l,o,c,v,d){for(var p=2*f,y=p*(o+1)+l,g=o+1;g<c;++g,y+=p)for(var A=v[y],b=g,M=p*(g-1);b>o&&v[M+l]>A;--b,M-=p){for(var w=M,T=M+p,_=0;_<p;++_,++w,++T){var h=v[w];v[w]=v[T],v[T]=h}var L=d[b];d[b]=d[b-1],d[b-1]=L}}function n(f,l,o,c,v,d){if(c<=o+1)return o;for(var p=o,y=c,g=c+o>>>1,A=2*f,b=g,M=v[A*g+l];p<y;){if(y-p<a){r(f,l,p,y,v,d),M=v[A*g+l];break}var w=y-p,T=Math.random()*w+p|0,_=v[A*T+l],h=Math.random()*w+p|0,L=v[A*h+l],S=Math.random()*w+p|0,k=v[A*S+l];_<=L?k>=L?(b=h,M=L):_>=k?(b=T,M=_):(b=S,M=k):L>=k?(b=h,M=L):k>=_?(b=T,M=_):(b=S,M=k);for(var P=A*(y-1),O=A*b,F=0;F<A;++F,++P,++O){var D=v[P];v[P]=v[O],v[O]=D}var R=d[y-1];d[y-1]=d[b],d[b]=R,b=i(f,l,p,y-1,v,d,M);for(var P=A*(y-1),O=A*b,F=0;F<A;++F,++P,++O){var D=v[P];v[P]=v[O],v[O]=D}var R=d[y-1];if(d[y-1]=d[b],d[b]=R,g<b){for(y=b-1;p<y&&v[A*(y-1)+l]===M;)y-=1;y+=1}else if(b<g)for(p=b+1;p<y&&v[A*p+l]===M;)p+=1;else break}return i(f,l,o,g,v,d,v[A*g+l])}},{"./partition":39}],39:[function(s,m,x){m.exports=i;var t={"lo===p0":a,"lo<p0":r,"lo<=p0":n,"hi<=p0":f,"lo<p0&&p0<=hi":o,"lo<=p0&&p0<=hi":l,"!(lo>=p0)&&!(p1>=hi)":c};function i(v){return t[v]}function a(v,d,p,y,g,A,b){for(var M=2*v,w=M*p,T=w,_=p,h=d,L=p;y>L;++L,w+=M){var S=g[w+h];if(S===b)if(_===L)_+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[w+k];g[w+k]=g[T],g[T++]=P}var O=A[L];A[L]=A[_],A[_++]=O}}return _}function r(v,d,p,y,g,A,b){for(var M=2*v,w=M*p,T=w,_=p,h=d,L=p;y>L;++L,w+=M){var S=g[w+h];if(S<b)if(_===L)_+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[w+k];g[w+k]=g[T],g[T++]=P}var O=A[L];A[L]=A[_],A[_++]=O}}return _}function n(v,d,p,y,g,A,b){for(var M=2*v,w=M*p,T=w,_=p,h=v+d,L=p;y>L;++L,w+=M){var S=g[w+h];if(S<=b)if(_===L)_+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[w+k];g[w+k]=g[T],g[T++]=P}var O=A[L];A[L]=A[_],A[_++]=O}}return _}function f(v,d,p,y,g,A,b){for(var M=2*v,w=M*p,T=w,_=p,h=v+d,L=p;y>L;++L,w+=M){var S=g[w+h];if(S<=b)if(_===L)_+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[w+k];g[w+k]=g[T],g[T++]=P}var O=A[L];A[L]=A[_],A[_++]=O}}return _}function l(v,d,p,y,g,A,b){for(var M=2*v,w=M*p,T=w,_=p,h=d,L=v+d,S=p;y>S;++S,w+=M){var k=g[w+h],P=g[w+L];if(k<=b&&b<=P)if(_===S)_+=1,T+=M;else{for(var O=0;M>O;++O){var F=g[w+O];g[w+O]=g[T],g[T++]=F}var D=A[S];A[S]=A[_],A[_++]=D}}return _}function o(v,d,p,y,g,A,b){for(var M=2*v,w=M*p,T=w,_=p,h=d,L=v+d,S=p;y>S;++S,w+=M){var k=g[w+h],P=g[w+L];if(k<b&&b<=P)if(_===S)_+=1,T+=M;else{for(var O=0;M>O;++O){var F=g[w+O];g[w+O]=g[T],g[T++]=F}var D=A[S];A[S]=A[_],A[_++]=D}}return _}function c(v,d,p,y,g,A,b,M){for(var w=2*v,T=w*p,_=T,h=p,L=d,S=v+d,k=p;y>k;++k,T+=w){var P=g[T+L],O=g[T+S];if(!(P>=b)&&!(M>=O))if(h===k)h+=1,_+=w;else{for(var F=0;w>F;++F){var D=g[T+F];g[T+F]=g[_],g[_++]=D}var R=A[k];A[k]=A[h],A[h++]=R}}return h}},{}],40:[function(s,m,x){m.exports=i;var t=32;function i(d,p){p<=4*t?a(0,p-1,d):v(0,p-1,d)}function a(d,p,y){for(var g=2*(d+1),A=d+1;A<=p;++A){for(var b=y[g++],M=y[g++],w=A,T=g-2;w-- >d;){var _=y[T-2],h=y[T-1];if(_<b)break;if(_===b&&h<M)break;y[T]=_,y[T+1]=h,T-=2}y[T]=b,y[T+1]=M}}function r(d,p,y){d*=2,p*=2;var g=y[d],A=y[d+1];y[d]=y[p],y[d+1]=y[p+1],y[p]=g,y[p+1]=A}function n(d,p,y){d*=2,p*=2,y[d]=y[p],y[d+1]=y[p+1]}function f(d,p,y,g){d*=2,p*=2,y*=2;var A=g[d],b=g[d+1];g[d]=g[p],g[d+1]=g[p+1],g[p]=g[y],g[p+1]=g[y+1],g[y]=A,g[y+1]=b}function l(d,p,y,g,A){d*=2,p*=2,A[d]=A[p],A[p]=y,A[d+1]=A[p+1],A[p+1]=g}function o(d,p,y){d*=2,p*=2;var g=y[d],A=y[p];return g<A?!1:g===A?y[d+1]>y[p+1]:!0}function c(d,p,y,g){d*=2;var A=g[d];return A<p?!0:A===p?g[d+1]<y:!1}function v(d,p,y){var g=(p-d+1)/6|0,A=d+g,b=p-g,M=d+p>>1,w=M-g,T=M+g,_=A,h=w,L=M,S=T,k=b,P=d+1,O=p-1,F=0;o(_,h,y)&&(F=_,_=h,h=F),o(S,k,y)&&(F=S,S=k,k=F),o(_,L,y)&&(F=_,_=L,L=F),o(h,L,y)&&(F=h,h=L,L=F),o(_,S,y)&&(F=_,_=S,S=F),o(L,S,y)&&(F=L,L=S,S=F),o(h,k,y)&&(F=h,h=k,k=F),o(h,L,y)&&(F=h,h=L,L=F),o(S,k,y)&&(F=S,S=k,k=F);for(var D=y[2*h],R=y[2*h+1],U=y[2*S],N=y[2*S+1],X=2*_,j=2*L,ee=2*k,q=2*A,G=2*M,J=2*b,le=0;le<2;++le){var fe=y[X+le],se=y[j+le],V=y[ee+le];y[q+le]=fe,y[G+le]=se,y[J+le]=V}n(w,d,y),n(T,p,y);for(var Y=P;Y<=O;++Y)if(c(Y,D,R,y))Y!==P&&r(Y,P,y),++P;else if(!c(Y,U,N,y))for(;;)if(c(O,U,N,y)){c(O,D,R,y)?(f(Y,P,O,y),++P,--O):(r(Y,O,y),--O);break}else{if(--O<Y)break;continue}l(d,P-1,D,R,y),l(p,O+1,U,N,y),P-2-d<=t?a(d,P-2,y):v(d,P-2,y),p-(O+2)<=t?a(O+2,p,y):v(O+2,p,y),O-P<=t?a(P,O,y):v(P,O,y)}},{}],41:[function(s,m,x){m.exports={init:y,sweepBipartite:b,sweepComplete:M,scanBipartite:w,scanComplete:T};var t=s("typedarray-pool"),i=s("bit-twiddle"),a=s("./sort"),r=1<<28,n=1024,f=t.mallocInt32(n),l=t.mallocInt32(n),o=t.mallocInt32(n),c=t.mallocInt32(n),v=t.mallocInt32(n),d=t.mallocInt32(n),p=t.mallocDouble(n*8);function y(_){var h=i.nextPow2(_);f.length<h&&(t.free(f),f=t.mallocInt32(h)),l.length<h&&(t.free(l),l=t.mallocInt32(h)),o.length<h&&(t.free(o),o=t.mallocInt32(h)),c.length<h&&(t.free(c),c=t.mallocInt32(h)),v.length<h&&(t.free(v),v=t.mallocInt32(h)),d.length<h&&(t.free(d),d=t.mallocInt32(h));var L=8*h;p.length<L&&(t.free(p),p=t.mallocDouble(L))}function g(_,h,L,S){var k=h[S],P=_[L-1];_[k]=P,h[P]=k}function A(_,h,L,S){_[L]=S,h[S]=L}function b(_,h,L,S,k,P,O,F,D,R){for(var U=0,N=2*_,X=_-1,j=N-1,ee=L;ee<S;++ee){var q=P[ee],G=N*ee;p[U++]=k[G+X],p[U++]=-(q+1),p[U++]=k[G+j],p[U++]=q}for(var ee=O;ee<F;++ee){var q=R[ee]+r,J=N*ee;p[U++]=D[J+X],p[U++]=-q,p[U++]=D[J+j],p[U++]=q}var le=U>>>1;a(p,le);for(var fe=0,se=0,ee=0;ee<le;++ee){var V=p[2*ee+1]|0;if(V>=r)V=V-r|0,g(o,c,se--,V);else if(V>=0)g(f,l,fe--,V);else if(V<=-r){V=-V-r|0;for(var Y=0;Y<fe;++Y){var ne=h(f[Y],V);if(ne!==void 0)return ne}A(o,c,se++,V)}else{V=-V-1|0;for(var Y=0;Y<se;++Y){var ne=h(V,o[Y]);if(ne!==void 0)return ne}A(f,l,fe++,V)}}}function M(_,h,L,S,k,P,O,F,D,R){for(var U=0,N=2*_,X=_-1,j=N-1,ee=L;ee<S;++ee){var q=P[ee]+1<<1,G=N*ee;p[U++]=k[G+X],p[U++]=-q,p[U++]=k[G+j],p[U++]=q}for(var ee=O;ee<F;++ee){var q=R[ee]+1<<1,J=N*ee;p[U++]=D[J+X],p[U++]=-q|1,p[U++]=D[J+j],p[U++]=q|1}var le=U>>>1;a(p,le);for(var fe=0,se=0,V=0,ee=0;ee<le;++ee){var Y=p[2*ee+1]|0,ne=Y&1;if(ee<le-1&&Y>>1==p[2*ee+3]>>1&&(ne=2,ee+=1),Y<0){for(var te=-(Y>>1)-1,K=0;K<V;++K){var $=h(v[K],te);if($!==void 0)return $}if(ne!==0)for(var K=0;K<fe;++K){var $=h(f[K],te);if($!==void 0)return $}if(ne!==1)for(var K=0;K<se;++K){var $=h(o[K],te);if($!==void 0)return $}ne===0?A(f,l,fe++,te):ne===1?A(o,c,se++,te):ne===2&&A(v,d,V++,te)}else{var te=(Y>>1)-1;ne===0?g(f,l,fe--,te):ne===1?g(o,c,se--,te):ne===2&&g(v,d,V--,te)}}}function w(_,h,L,S,k,P,O,F,D,R,U,N){var X=0,j=2*_,ee=h,q=h+_,G=1,J=1;S?J=r:G=r;for(var le=k;le<P;++le){var fe=le+G,se=j*le;p[X++]=O[se+ee],p[X++]=-fe,p[X++]=O[se+q],p[X++]=fe}for(var le=D;le<R;++le){var fe=le+J,V=j*le;p[X++]=U[V+ee],p[X++]=-fe}var Y=X>>>1;a(p,Y);for(var ne=0,le=0;le<Y;++le){var te=p[2*le+1]|0;if(te<0){var fe=-te,K=!1;if(fe>=r?(K=!S,fe-=r):(K=!!S,fe-=1),K)A(f,l,ne++,fe);else{var $=N[fe],ae=j*fe,ie=U[ae+h+1],oe=U[ae+h+1+_];e:for(var ue=0;ue<ne;++ue){var xe=f[ue],he=j*xe;if(!(oe<O[he+h+1]||O[he+h+1+_]<ie)){for(var me=h+2;me<_;++me)if(U[ae+me+_]<O[he+me]||O[he+me+_]<U[ae+me])continue e;var be=F[xe],Ce;if(S?Ce=L($,be):Ce=L(be,$),Ce!==void 0)return Ce}}}}else g(f,l,ne--,te-G)}}function T(_,h,L,S,k,P,O,F,D,R,U){for(var N=0,X=2*_,j=h,ee=h+_,q=S;q<k;++q){var G=q+r,J=X*q;p[N++]=P[J+j],p[N++]=-G,p[N++]=P[J+ee],p[N++]=G}for(var q=F;q<D;++q){var G=q+1,le=X*q;p[N++]=R[le+j],p[N++]=-G}var fe=N>>>1;a(p,fe);for(var se=0,q=0;q<fe;++q){var V=p[2*q+1]|0;if(V<0){var G=-V;if(G>=r)f[se++]=G-r;else{G-=1;var Y=U[G],ne=X*G,te=R[ne+h+1],K=R[ne+h+1+_];e:for(var $=0;$<se;++$){var ae=f[$],ie=O[ae];if(ie===Y)break;var oe=X*ae;if(!(K<P[oe+h+1]||P[oe+h+1+_]<te)){for(var ue=h+2;ue<_;++ue)if(R[ne+ue+_]<P[oe+ue]||P[oe+ue+_]<R[ne+ue])continue e;var xe=L(ie,Y);if(xe!==void 0)return xe}}}}else{for(var G=V-r,$=se-1;$>=0;--$)if(f[$]===G){for(var ue=$+1;ue<se;++ue)f[ue-1]=f[ue];break}--se}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(s,m,x){var t=s("./lib/monotone"),i=s("./lib/triangulation"),a=s("./lib/delaunay"),r=s("./lib/filter");m.exports=c;function n(v){return[Math.min(v[0],v[1]),Math.max(v[0],v[1])]}function f(v,d){return v[0]-d[0]||v[1]-d[1]}function l(v){return v.map(n).sort(f)}function o(v,d,p){return d in v?v[d]:p}function c(v,d,p){Array.isArray(d)?(p=p||{},d=d||[]):(p=d||{},d=[]);var y=!!o(p,"delaunay",!0),g=!!o(p,"interior",!0),A=!!o(p,"exterior",!0),b=!!o(p,"infinity",!1);if(!g&&!A||v.length===0)return[];var M=t(v,d);if(y||g!==A||b){for(var w=i(v.length,l(d)),T=0;T<M.length;++T){var _=M[T];w.addTriangle(_[0],_[1],_[2])}return y&&a(v,w),A?g?b?r(w,0,b):w.cells():r(w,1,b):r(w,-1)}else return M}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(s,m,x){var t=s("robust-in-sphere")[4];s("binary-search-bounds"),m.exports=a;function i(r,n,f,l,o,c){var v=n.opposite(l,o);if(!(v<0)){if(o<l){var d=l;l=o,o=d,d=c,c=v,v=d}n.isConstraint(l,o)||t(r[l],r[o],r[c],r[v])<0&&f.push(l,o)}}function a(r,n){for(var f=[],l=r.length,o=n.stars,c=0;c<l;++c)for(var v=o[c],d=1;d<v.length;d+=2){var p=v[d];if(!(p<c)&&!n.isConstraint(c,p)){for(var y=v[d-1],g=-1,A=1;A<v.length;A+=2)if(v[A-1]===p){g=v[A];break}g<0||t(r[c],r[p],r[y],r[g])<0&&f.push(c,p)}}for(;f.length>0;){for(var p=f.pop(),c=f.pop(),y=-1,g=-1,v=o[c],b=1;b<v.length;b+=2){var M=v[b-1],w=v[b];M===p?g=w:w===p&&(y=M)}y<0||g<0||t(r[c],r[p],r[y],r[g])>=0||(n.flip(c,p),i(r,n,f,y,c,g),i(r,n,f,c,g,y),i(r,n,f,g,p,y),i(r,n,f,p,y,g))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(s,m,x){var t=s("binary-search-bounds");m.exports=l;function i(o,c,v,d,p,y,g){this.cells=o,this.neighbor=c,this.flags=d,this.constraint=v,this.active=p,this.next=y,this.boundary=g}var a=i.prototype;function r(o,c){return o[0]-c[0]||o[1]-c[1]||o[2]-c[2]}a.locate=function(){var o=[0,0,0];return function(c,v,d){var p=c,y=v,g=d;return v<d?v<c&&(p=v,y=d,g=c):d<c&&(p=d,y=c,g=v),p<0?-1:(o[0]=p,o[1]=y,o[2]=g,t.eq(this.cells,o,r))}}();function n(o,c){for(var v=o.cells(),d=v.length,p=0;p<d;++p){var y=v[p],g=y[0],A=y[1],b=y[2];A<b?A<g&&(y[0]=A,y[1]=b,y[2]=g):b<g&&(y[0]=b,y[1]=g,y[2]=A)}v.sort(r);for(var M=new Array(d),p=0;p<M.length;++p)M[p]=0;var w=[],T=[],_=new Array(3*d),h=new Array(3*d),L=null;c&&(L=[]);for(var S=new i(v,_,h,M,w,T,L),p=0;p<d;++p)for(var y=v[p],k=0;k<3;++k){var g=y[k],A=y[(k+1)%3],P=_[3*p+k]=S.locate(A,g,o.opposite(A,g)),O=h[3*p+k]=o.isConstraint(g,A);P<0&&(O?T.push(p):(w.push(p),M[p]=1),c&&L.push([A,g,-1]))}return S}function f(o,c,v){for(var d=0,p=0;p<o.length;++p)c[p]===v&&(o[d++]=o[p]);return o.length=d,o}function l(o,c,v){var d=n(o,v);if(c===0)return v?d.cells.concat(d.boundary):d.cells;for(var p=1,y=d.active,g=d.next,A=d.flags,b=d.cells,M=d.constraint,w=d.neighbor;y.length>0||g.length>0;){for(;y.length>0;){var T=y.pop();if(A[T]!==-p){A[T]=p,b[T];for(var _=0;_<3;++_){var h=w[3*T+_];h>=0&&A[h]===0&&(M[3*T+_]?g.push(h):(y.push(h),A[h]=p))}}}var L=g;g=y,y=L,g.length=0,p=-p}var S=f(b,A,c);return v?S.concat(d.boundary):S}},{"binary-search-bounds":31}],45:[function(s,m,x){var t=s("binary-search-bounds"),i=s("robust-orientation")[3],a=0,r=1,n=2;m.exports=g;function f(A,b,M,w,T){this.a=A,this.b=b,this.idx=M,this.lowerIds=w,this.upperIds=T}function l(A,b,M,w){this.a=A,this.b=b,this.type=M,this.idx=w}function o(A,b){var M=A.a[0]-b.a[0]||A.a[1]-b.a[1]||A.type-b.type;return M||A.type!==a&&(M=i(A.a,A.b,b.b),M)?M:A.idx-b.idx}function c(A,b){return i(A.a,A.b,b)}function v(A,b,M,w,T){for(var _=t.lt(b,w,c),h=t.gt(b,w,c),L=_;L<h;++L){for(var S=b[L],k=S.lowerIds,P=k.length;P>1&&i(M[k[P-2]],M[k[P-1]],w)>0;)A.push([k[P-1],k[P-2],T]),P-=1;k.length=P,k.push(T);for(var O=S.upperIds,P=O.length;P>1&&i(M[O[P-2]],M[O[P-1]],w)<0;)A.push([O[P-2],O[P-1],T]),P-=1;O.length=P,O.push(T)}}function d(A,b){var M;return A.a[0]<b.a[0]?M=i(A.a,A.b,b.a):M=i(b.b,b.a,A.a),M||(b.b[0]<A.b[0]?M=i(A.a,A.b,b.b):M=i(b.b,b.a,A.b),M||A.idx-b.idx)}function p(A,b,M){var w=t.le(A,M,d),T=A[w],_=T.upperIds,h=_[_.length-1];T.upperIds=[h],A.splice(w+1,0,new f(M.a,M.b,M.idx,[h],_))}function y(A,b,M){var w=M.a;M.a=M.b,M.b=w;var T=t.eq(A,M,d),_=A[T],h=A[T-1];h.upperIds=_.upperIds,A.splice(T,1)}function g(A,b){for(var M=A.length,w=b.length,T=[],_=0;_<M;++_)T.push(new l(A[_],null,a,_));for(var _=0;_<w;++_){var h=b[_],L=A[h[0]],S=A[h[1]];L[0]<S[0]?T.push(new l(L,S,n,_),new l(S,L,r,_)):L[0]>S[0]&&T.push(new l(S,L,n,_),new l(L,S,r,_))}T.sort(o);for(var k=T[0].a[0]-(1+Math.abs(T[0].a[0]))*Math.pow(2,-52),P=[new f([k,1],[k,0],-1,[],[],[],[])],O=[],_=0,F=T.length;_<F;++_){var D=T[_],R=D.type;R===a?v(O,P,A,D.a,D.idx):R===n?p(P,A,D):y(P,A,D)}return O}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(s,m,x){var t=s("binary-search-bounds");m.exports=n;function i(f,l){this.stars=f,this.edges=l}var a=i.prototype;function r(f,l,o){for(var c=1,v=f.length;c<v;c+=2)if(f[c-1]===l&&f[c]===o){f[c-1]=f[v-2],f[c]=f[v-1],f.length=v-2;return}}a.isConstraint=function(){var f=[0,0];function l(o,c){return o[0]-c[0]||o[1]-c[1]}return function(o,c){return f[0]=Math.min(o,c),f[1]=Math.max(o,c),t.eq(this.edges,f,l)>=0}}(),a.removeTriangle=function(f,l,o){var c=this.stars;r(c[f],l,o),r(c[l],o,f),r(c[o],f,l)},a.addTriangle=function(f,l,o){var c=this.stars;c[f].push(l,o),c[l].push(o,f),c[o].push(f,l)},a.opposite=function(f,l){for(var o=this.stars[l],c=1,v=o.length;c<v;c+=2)if(o[c]===f)return o[c-1];return-1},a.flip=function(f,l){var o=this.opposite(f,l),c=this.opposite(l,f);this.removeTriangle(f,l,o),this.removeTriangle(l,f,c),this.addTriangle(f,c,o),this.addTriangle(l,o,c)},a.edges=function(){for(var f=this.stars,l=[],o=0,c=f.length;o<c;++o)for(var v=f[o],d=0,p=v.length;d<p;d+=2)l.push([v[d],v[d+1]]);return l},a.cells=function(){for(var f=this.stars,l=[],o=0,c=f.length;o<c;++o)for(var v=f[o],d=0,p=v.length;d<p;d+=2){var y=v[d],g=v[d+1];o<Math.min(y,g)&&l.push([o,y,g])}return l};function n(f,l){for(var o=new Array(f),c=0;c<f;++c)o[c]=[];return new i(o,l)}},{"binary-search-bounds":31}],47:[function(s,m,x){m.exports=t;function t(i){for(var a=1,r=1;r<i.length;++r)for(var n=0;n<r;++n)if(i[r]<i[n])a=-a;else if(i[n]===i[r])return 0;return a}},{}],48:[function(s,m,x){var t=s("dup"),i=s("robust-linear-solve");function a(f,l){for(var o=0,c=f.length,v=0;v<c;++v)o+=f[v]*l[v];return o}function r(f){var l=f.length;if(l===0)return[];f[0].length;var o=t([f.length+1,f.length+1],1),c=t([f.length+1],1);o[l][l]=0;for(var v=0;v<l;++v){for(var d=0;d<=v;++d)o[d][v]=o[v][d]=2*a(f[v],f[d]);c[v]=a(f[v],f[v])}for(var p=i(o,c),y=0,g=p[l+1],v=0;v<g.length;++v)y+=g[v];for(var A=new Array(l),v=0;v<l;++v){for(var g=p[v],b=0,d=0;d<g.length;++d)b+=g[d];A[v]=b/y}return A}function n(f){if(f.length===0)return[];for(var l=f[0].length,o=t([l]),c=r(f),v=0;v<f.length;++v)for(var d=0;d<l;++d)o[d]+=f[v][d]*c[v];return o}n.barycenetric=r,m.exports=n},{dup:65,"robust-linear-solve":283}],49:[function(s,m,x){m.exports=i;var t=s("circumcenter");function i(a){for(var r=t(a),n=0,f=0;f<a.length;++f)for(var l=a[f],o=0;o<r.length;++o)n+=Math.pow(l[o]-r[o],2);return Math.sqrt(n/a.length)}},{circumcenter:48}],50:[function(s,m,x){m.exports=L;var t=s("union-find"),i=s("box-intersect"),a=s("robust-segment-intersect"),r=s("big-rat"),n=s("big-rat/cmp"),f=s("big-rat/to-float"),l=s("rat-vec"),o=s("nextafter"),c=s("./lib/rat-seg-intersect");function v(S){var k=f(S);return[o(k,-1/0),o(k,1/0)]}function d(S,k){for(var P=new Array(k.length),O=0;O<k.length;++O){var F=k[O],D=S[F[0]],R=S[F[1]];P[O]=[o(Math.min(D[0],R[0]),-1/0),o(Math.min(D[1],R[1]),-1/0),o(Math.max(D[0],R[0]),1/0),o(Math.max(D[1],R[1]),1/0)]}return P}function p(S){for(var k=new Array(S.length),P=0;P<S.length;++P){var O=S[P];k[P]=[o(O[0],-1/0),o(O[1],-1/0),o(O[0],1/0),o(O[1],1/0)]}return k}function y(S,k,P){var O=[];return i(P,function(F,D){var R=k[F],U=k[D];if(!(R[0]===U[0]||R[0]===U[1]||R[1]===U[0]||R[1]===U[1])){var N=S[R[0]],X=S[R[1]],j=S[U[0]],ee=S[U[1]];a(N,X,j,ee)&&O.push([F,D])}}),O}function g(S,k,P,O){var F=[];return i(P,O,function(D,R){var U=k[D];if(!(U[0]===R||U[1]===R)){var N=S[R],X=S[U[0]],j=S[U[1]];a(X,j,N,N)&&F.push([D,R])}}),F}function A(S,k,P,O,F){var D,R,U=S.map(function(ae){return[r(ae[0]),r(ae[1])]});for(D=0;D<P.length;++D){var N=P[D];R=N[0];var X=N[1],j=k[R],ee=k[X],q=c(l(S[j[0]]),l(S[j[1]]),l(S[ee[0]]),l(S[ee[1]]));if(!!q){var G=S.length;S.push([f(q[0]),f(q[1])]),U.push(q),O.push([R,G],[X,G])}}for(O.sort(function(ae,ie){if(ae[0]!==ie[0])return ae[0]-ie[0];var oe=U[ae[1]],ue=U[ie[1]];return n(oe[0],ue[0])||n(oe[1],ue[1])}),D=O.length-1;D>=0;--D){var J=O[D];R=J[0];var le=k[R],fe=le[0],se=le[1],V=S[fe],Y=S[se];if((V[0]-Y[0]||V[1]-Y[1])<0){var ne=fe;fe=se,se=ne}le[0]=fe;var te=le[1]=J[1],K;for(F&&(K=le[2]);D>0&&O[D-1][0]===R;){var J=O[--D],$=J[1];F?k.push([te,$,K]):k.push([te,$]),te=$}F?k.push([te,se,K]):k.push([te,se])}return U}function b(S,k,P){for(var O=k.length,F=new t(O),D=[],R=0;R<k.length;++R){var U=k[R],N=v(U[0]),X=v(U[1]);D.push([o(N[0],-1/0),o(X[0],-1/0),o(N[1],1/0),o(X[1],1/0)])}i(D,function(J,le){F.link(J,le)});for(var j=!0,ee=new Array(O),R=0;R<O;++R){var q=F.find(R);q!==R&&(j=!1,S[q]=[Math.min(S[R][0],S[q][0]),Math.min(S[R][1],S[q][1])])}if(j)return null;for(var G=0,R=0;R<O;++R){var q=F.find(R);q===R?(ee[R]=G,S[G++]=S[R]):ee[R]=-1}S.length=G;for(var R=0;R<O;++R)ee[R]<0&&(ee[R]=ee[F.find(R)]);return ee}function M(S,k){return S[0]-k[0]||S[1]-k[1]}function w(S,k){var P=S[0]-k[0]||S[1]-k[1];return P||(S[2]<k[2]?-1:S[2]>k[2]?1:0)}function T(S,k,P){if(S.length!==0){if(k)for(var O=0;O<S.length;++O){var F=S[O],D=k[F[0]],R=k[F[1]];F[0]=Math.min(D,R),F[1]=Math.max(D,R)}else for(var O=0;O<S.length;++O){var F=S[O],D=F[0],R=F[1];F[0]=Math.min(D,R),F[1]=Math.max(D,R)}P?S.sort(w):S.sort(M);for(var U=1,O=1;O<S.length;++O){var N=S[O-1],X=S[O];X[0]===N[0]&&X[1]===N[1]&&(!P||X[2]===N[2])||(S[U++]=X)}S.length=U}}function _(S,k,P){var O=b(S,[],p(S));return T(k,O,P),!!O}function h(S,k,P){var O=d(S,k),F=y(S,k,O),D=p(S),R=g(S,k,O,D),U=A(S,k,F,R,P),N=b(S,U);return T(k,N,P),N?!0:F.length>0||R.length>0}function L(S,k,P){var O;if(P){O=k;for(var F=new Array(k.length),D=0;D<k.length;++D){var R=k[D];F[D]=[R[0],R[1],P[D]]}k=F}for(var U=_(S,k,!!P);h(S,k,!!P);)U=!0;if(!!P&&U){O.length=0,P.length=0;for(var D=0;D<k.length;++D){var R=k[D];O.push([R[0],R[1]]),P.push(R[2])}}return U}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(s,m,x){m.exports=c;var t=s("big-rat/mul"),i=s("big-rat/div"),a=s("big-rat/sub"),r=s("big-rat/sign"),n=s("rat-vec/sub"),f=s("rat-vec/add"),l=s("rat-vec/muls");function o(v,d){return a(t(v[0],d[1]),t(v[1],d[0]))}function c(v,d,p,y){var g=n(d,v),A=n(y,p),b=o(g,A);if(r(b)===0)return null;var M=n(v,p),w=o(A,M),T=i(w,b),_=l(g,T),h=f(v,_);return h}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(s,m,x){m.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(s,m,x){var t=s("./colorScale"),i=s("lerp");m.exports=a;function a(l){var o,c,v,d,p,y,g,A,b,M,w;if(l||(l={}),A=(l.nshades||72)-1,g=l.format||"hex",y=l.colormap,y||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!t[y])throw Error(y+" not a supported colorscale");p=t[y]}else if(Array.isArray(y))p=y.slice();else throw Error("unsupported colormap option",y);if(p.length>A+1)throw new Error(y+" map requires nshades to be at least size "+p.length);Array.isArray(l.alpha)?l.alpha.length!==2?M=[1,1]:M=l.alpha.slice():typeof l.alpha=="number"?M=[l.alpha,l.alpha]:M=[1,1],o=p.map(function(L){return Math.round(L.index*A)}),M[0]=Math.min(Math.max(M[0],0),1),M[1]=Math.min(Math.max(M[1],0),1);var T=p.map(function(L,S){var k=p[S].index,P=p[S].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=M[0]+(M[1]-M[0])*k),P}),b=[];for(w=0;w<o.length-1;++w){d=o[w+1]-o[w],c=T[w],v=T[w+1];for(var _=0;_<d;_++){var h=_/d;b.push([Math.round(i(c[0],v[0],h)),Math.round(i(c[1],v[1],h)),Math.round(i(c[2],v[2],h)),i(c[3],v[3],h)])}}return b.push(p[p.length-1].rgb.concat(M[1])),g==="hex"?b=b.map(n):g==="rgbaString"?b=b.map(f):g==="float"&&(b=b.map(r)),b}function r(l){return[l[0]/255,l[1]/255,l[2]/255,l[3]]}function n(l){for(var o,c="#",v=0;v<3;++v)o=l[v],o=o.toString(16),c+=("00"+o).substr(o.length);return c}function f(l){return"rgba("+l.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(s,m,x){m.exports=l;var t=s("robust-orientation"),i=s("signum"),a=s("two-sum"),r=s("robust-product"),n=s("robust-sum");function f(o,c,v){var d=a(o[0],-c[0]),p=a(o[1],-c[1]),y=a(v[0],-c[0]),g=a(v[1],-c[1]),A=n(r(d,y),r(p,g));return A[A.length-1]>=0}function l(o,c,v,d){var p=t(c,v,d);if(p===0){var y=i(t(o,c,v)),g=i(t(o,c,d));if(y===g){if(y===0){var A=f(o,c,v),b=f(o,c,d);return A===b?0:A?1:-1}return 0}else{if(g===0)return y>0||f(o,c,d)?-1:1;if(y===0)return g>0||f(o,c,v)?1:-1}return i(g-y)}var M=t(o,c,v);if(M>0)return p>0&&t(o,c,d)>0?1:-1;if(M<0)return p>0||t(o,c,d)>0?1:-1;var w=t(o,c,d);return w>0||f(o,c,v)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(s,m,x){m.exports=function(i){return i<0?-1:i>0?1:0}},{}],56:[function(s,m,x){m.exports=a;var t=Math.min;function i(r,n){return r-n}function a(r,n){var f=r.length,l=r.length-n.length;if(l)return l;switch(f){case 0:return 0;case 1:return r[0]-n[0];case 2:return r[0]+r[1]-n[0]-n[1]||t(r[0],r[1])-t(n[0],n[1]);case 3:var o=r[0]+r[1],c=n[0]+n[1];if(l=o+r[2]-(c+n[2]),l)return l;var v=t(r[0],r[1]),d=t(n[0],n[1]);return t(v,r[2])-t(d,n[2])||t(v+r[2],o)-t(d+n[2],c);case 4:var p=r[0],y=r[1],g=r[2],A=r[3],b=n[0],M=n[1],w=n[2],T=n[3];return p+y+g+A-(b+M+w+T)||t(p,y,g,A)-t(b,M,w,T,b)||t(p+y,p+g,p+A,y+g,y+A,g+A)-t(b+M,b+w,b+T,M+w,M+T,w+T)||t(p+y+g,p+y+A,p+g+A,y+g+A)-t(b+M+w,b+M+T,b+w+T,M+w+T);default:for(var _=r.slice().sort(i),h=n.slice().sort(i),L=0;L<f;++L)if(l=_[L]-h[L],l)return l;return 0}}},{}],57:[function(s,m,x){var t=s("compare-cell"),i=s("cell-orientation");m.exports=a;function a(r,n){return t(r,n)||i(r)-i(n)}},{"cell-orientation":47,"compare-cell":56}],58:[function(s,m,x){var t=s("./lib/ch1d"),i=s("./lib/ch2d"),a=s("./lib/chnd");m.exports=r;function r(n){var f=n.length;if(f===0)return[];if(f===1)return[[0]];var l=n[0].length;return l===0?[]:l===1?t(n):l===2?i(n):a(n,l)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(s,m,x){m.exports=t;function t(i){for(var a=0,r=0,n=1;n<i.length;++n)i[n][0]<i[a][0]&&(a=n),i[n][0]>i[r][0]&&(r=n);return a<r?[[a],[r]]:a>r?[[r],[a]]:[[a]]}},{}],60:[function(s,m,x){m.exports=i;var t=s("monotone-convex-hull-2d");function i(a){var r=t(a),n=r.length;if(n<=2)return[];for(var f=new Array(n),l=r[n-1],o=0;o<n;++o){var c=r[o];f[o]=[l,c],l=c}return f}},{"monotone-convex-hull-2d":246}],61:[function(s,m,x){m.exports=n;var t=s("incremental-convex-hull"),i=s("affine-hull");function a(f,l){for(var o=f.length,c=new Array(o),v=0;v<l.length;++v)c[v]=f[l[v]];for(var d=l.length,v=0;v<o;++v)l.indexOf(v)<0&&(c[d++]=f[v]);return c}function r(f,l){for(var o=f.length,c=l.length,v=0;v<o;++v)for(var d=f[v],p=0;p<d.length;++p){var y=d[p];if(y<c)d[p]=l[y];else{y=y-c;for(var g=0;g<c;++g)y>=l[g]&&(y+=1);d[p]=y}}return f}function n(f,l){try{return t(f,!0)}catch{var o=i(f);if(o.length<=l)return[];var c=a(f,o),v=t(c,!0);return r(v,o)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(s,m,x){function t(a,r,n,f,l,o){var c=6*l*l-6*l,v=3*l*l-4*l+1,d=-6*l*l+6*l,p=3*l*l-2*l;if(a.length){o||(o=new Array(a.length));for(var y=a.length-1;y>=0;--y)o[y]=c*a[y]+v*r[y]+d*n[y]+p*f[y];return o}return c*a+v*r+d*n[y]+p*f}function i(a,r,n,f,l,o){var c=l-1,v=l*l,d=c*c,p=(1+2*l)*d,y=l*d,g=v*(3-2*l),A=v*c;if(a.length){o||(o=new Array(a.length));for(var b=a.length-1;b>=0;--b)o[b]=p*a[b]+y*r[b]+g*n[b]+A*f[b];return o}return p*a+y*r+g*n+A*f}m.exports=i,m.exports.derivative=t},{}],63:[function(s,m,x){var t=s("incremental-convex-hull"),i=s("uniq");m.exports=f;function a(l,o){this.point=l,this.index=o}function r(l,o){for(var c=l.point,v=o.point,d=c.length,p=0;p<d;++p){var y=v[p]-c[p];if(y)return y}return 0}function n(l,o,c){if(l===1)return c?[[-1,0]]:[];var v=o.map(function(A,b){return[A[0],b]});v.sort(function(A,b){return A[0]-b[0]});for(var d=new Array(l-1),p=1;p<l;++p){var y=v[p-1],g=v[p];d[p-1]=[y[1],g[1]]}return c&&d.push([-1,d[0][1]],[d[l-1][1],-1]),d}function f(l,o){var c=l.length;if(c===0)return[];var v=l[0].length;if(v<1)return[];if(v===1)return n(c,l,o);for(var d=new Array(c),p=1,y=0;y<c;++y){for(var g=l[y],A=new Array(v+1),b=0,M=0;M<v;++M){var w=g[M];A[M]=w,b+=w*w}A[v]=b,d[y]=new a(A,y),p=Math.max(b,p)}i(d,r),c=d.length;for(var T=new Array(c+v+1),_=new Array(c+v+1),h=(v+1)*(v+1)*p,L=new Array(v+1),y=0;y<=v;++y)L[y]=0;L[v]=h,T[0]=L.slice(),_[0]=-1;for(var y=0;y<=v;++y){var A=L.slice();A[y]=1,T[y+1]=A,_[y+1]=-1}for(var y=0;y<c;++y){var S=d[y];T[y+v+1]=S.point,_[y+v+1]=S.index}var k=t(T,!1);if(o?k=k.filter(function(P){for(var O=0,F=0;F<=v;++F){var D=_[P[F]];if(D<0&&++O>=2)return!1;P[F]=D}return!0}):k=k.filter(function(P){for(var O=0;O<=v;++O){var F=_[P[O]];if(F<0)return!1;P[O]=F}return!0}),v&1)for(var y=0;y<k.length;++y){var S=k[y],A=S[0];S[0]=S[1],S[1]=A}return k}},{"incremental-convex-hull":233,uniq:310}],64:[function(s,m,x){(function(t){(function(){var i=!1;if(typeof Float64Array!="undefined"){var a=new Float64Array(1),r=new Uint32Array(a.buffer);if(a[0]=1,i=!0,r[1]===1072693248){let f=function(c,v){return r[0]=c,r[1]=v,a[0]},l=function(c){return a[0]=c,r[0]},o=function(c){return a[0]=c,r[1]};m.exports=function(v){return a[0]=v,[r[0],r[1]]},m.exports.pack=f,m.exports.lo=l,m.exports.hi=o}else if(r[0]===1072693248){let f=function(c,v){return r[1]=c,r[0]=v,a[0]},l=function(c){return a[0]=c,r[1]},o=function(c){return a[0]=c,r[0]};m.exports=function(v){return a[0]=v,[r[1],r[0]]},m.exports.pack=f,m.exports.lo=l,m.exports.hi=o}else i=!1}if(!i){let f=function(c,v){return n.writeUInt32LE(c,0,!0),n.writeUInt32LE(v,4,!0),n.readDoubleLE(0,!0)},l=function(c){return n.writeDoubleLE(c,0,!0),n.readUInt32LE(0,!0)},o=function(c){return n.writeDoubleLE(c,0,!0),n.readUInt32LE(4,!0)};var n=new t(8);m.exports=function(v){return n.writeDoubleLE(v,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},m.exports.pack=f,m.exports.lo=l,m.exports.hi=o}m.exports.sign=function(f){return m.exports.hi(f)>>>31},m.exports.exponent=function(f){var l=m.exports.hi(f);return(l<<1>>>21)-1023},m.exports.fraction=function(f){var l=m.exports.lo(f),o=m.exports.hi(f),c=o&(1<<20)-1;return o&2146435072&&(c+=1<<20),[l,c]},m.exports.denormalized=function(f){var l=m.exports.hi(f);return!(l&2146435072)}}).call(this)}).call(this,s("buffer").Buffer)},{buffer:3}],65:[function(s,m,x){function t(r,n,f){var l=r[f]|0;if(l<=0)return[];var o=new Array(l),c;if(f===r.length-1)for(c=0;c<l;++c)o[c]=n;else for(c=0;c<l;++c)o[c]=t(r,n,f+1);return o}function i(r,n){var f,l;for(f=new Array(r),l=0;l<r;++l)f[l]=n;return f}function a(r,n){switch(typeof n=="undefined"&&(n=0),typeof r){case"number":if(r>0)return i(r|0,n);break;case"object":if(typeof r.length=="number")return t(r,n,0);break}return[]}m.exports=a},{}],66:[function(s,m,x){m.exports=i;var t=s("uniq");function i(a,r){var n=a.length;if(typeof r!="number"){r=0;for(var f=0;f<n;++f){var l=a[f];r=Math.max(r,l[0],l[1])}r=(r|0)+1}r=r|0;for(var o=new Array(r),f=0;f<r;++f)o[f]=[];for(var f=0;f<n;++f){var l=a[f];o[l[0]].push(l[1]),o[l[1]].push(l[0])}for(var c=0;c<r;++c)t(o[c],function(v,d){return v-d});return o}},{uniq:310}],67:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a||0,f=r||1;return[[i[12]+i[0],i[13]+i[1],i[14]+i[2],i[15]+i[3]],[i[12]-i[0],i[13]-i[1],i[14]-i[2],i[15]-i[3]],[i[12]+i[4],i[13]+i[5],i[14]+i[6],i[15]+i[7]],[i[12]-i[4],i[13]-i[5],i[14]-i[6],i[15]-i[7]],[n*i[12]+i[8],n*i[13]+i[9],n*i[14]+i[10],n*i[15]+i[11]],[f*i[12]-i[8],f*i[13]-i[9],f*i[14]-i[10],f*i[15]-i[11]]]}},{}],68:[function(s,m,x){m.exports=l;var t=s("cubic-hermite"),i=s("binary-search-bounds");function a(o,c,v){return Math.min(c,Math.max(o,v))}function r(o,c,v){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=o.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[v],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var n=r.prototype;n.flush=function(o){var c=i.gt(this._time,o)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},n.curve=function(o){var c=this._time,v=c.length,d=i.le(c,o),p=this._scratch[0],y=this._state,g=this._velocity,A=this.dimension,b=this.bounds;if(d<0)for(var M=A-1,w=0;w<A;++w,--M)p[w]=y[M];else if(d>=v-1)for(var M=y.length-1,T=o-c[v-1],w=0;w<A;++w,--M)p[w]=y[M]+T*g[M];else{for(var M=A*(d+1)-1,_=c[d],h=c[d+1],L=h-_||1,S=this._scratch[1],k=this._scratch[2],P=this._scratch[3],O=this._scratch[4],F=!0,w=0;w<A;++w,--M)S[w]=y[M],P[w]=g[M]*L,k[w]=y[M+A],O[w]=g[M+A]*L,F=F&&S[w]===k[w]&&P[w]===O[w]&&P[w]===0;if(F)for(var w=0;w<A;++w)p[w]=S[w];else t(S,P,k,O,(o-_)/L,p)}for(var D=b[0],R=b[1],w=0;w<A;++w)p[w]=a(D[w],R[w],p[w]);return p},n.dcurve=function(o){var c=this._time,v=c.length,d=i.le(c,o),p=this._scratch[0],y=this._state,g=this._velocity,A=this.dimension;if(d>=v-1){var b=y.length-1;o-c[v-1];for(var M=0;M<A;++M,--b)p[M]=g[b]}else{for(var b=A*(d+1)-1,w=c[d],T=c[d+1],_=T-w||1,h=this._scratch[1],L=this._scratch[2],S=this._scratch[3],k=this._scratch[4],P=!0,M=0;M<A;++M,--b)h[M]=y[b],S[M]=g[b]*_,L[M]=y[b+A],k[M]=g[b+A]*_,P=P&&h[M]===L[M]&&S[M]===k[M]&&S[M]===0;if(P)for(var M=0;M<A;++M)p[M]=0;else{t.derivative(h,S,L,k,(o-w)/_,p);for(var M=0;M<A;++M)p[M]/=_}}return p},n.lastT=function(){var o=this._time;return o[o.length-1]},n.stable=function(){for(var o=this._velocity,c=o.length,v=this.dimension-1;v>=0;--v)if(o[--c])return!1;return!0},n.jump=function(o){var c=this.lastT(),v=this.dimension;if(!(o<c||arguments.length!==v+1)){var d=this._state,p=this._velocity,y=d.length-this.dimension,g=this.bounds,A=g[0],b=g[1];this._time.push(c,o);for(var M=0;M<2;++M)for(var w=0;w<v;++w)d.push(d[y++]),p.push(0);this._time.push(o);for(var w=v;w>0;--w)d.push(a(A[w-1],b[w-1],arguments[w])),p.push(0)}},n.push=function(o){var c=this.lastT(),v=this.dimension;if(!(o<c||arguments.length!==v+1)){var d=this._state,p=this._velocity,y=d.length-this.dimension,g=o-c,A=this.bounds,b=A[0],M=A[1],w=g>1e-6?1/g:0;this._time.push(o);for(var T=v;T>0;--T){var _=a(b[T-1],M[T-1],arguments[T]);d.push(_),p.push((_-d[y++])*w)}}},n.set=function(o){var c=this.dimension;if(!(o<this.lastT()||arguments.length!==c+1)){var v=this._state,d=this._velocity,p=this.bounds,y=p[0],g=p[1];this._time.push(o);for(var A=c;A>0;--A)v.push(a(y[A-1],g[A-1],arguments[A])),d.push(0)}},n.move=function(o){var c=this.lastT(),v=this.dimension;if(!(o<=c||arguments.length!==v+1)){var d=this._state,p=this._velocity,y=d.length-this.dimension,g=this.bounds,A=g[0],b=g[1],M=o-c,w=M>1e-6?1/M:0;this._time.push(o);for(var T=v;T>0;--T){var _=arguments[T];d.push(a(A[T-1],b[T-1],d[y++]+_)),p.push(_*w)}}},n.idle=function(o){var c=this.lastT();if(!(o<c)){var v=this.dimension,d=this._state,p=this._velocity,y=d.length-v,g=this.bounds,A=g[0],b=g[1],M=o-c;this._time.push(o);for(var w=v-1;w>=0;--w)d.push(a(A[w],b[w],d[y]+M*p[y])),p.push(0),y+=1}};function f(o){for(var c=new Array(o),v=0;v<o;++v)c[v]=0;return c}function l(o,c,v){switch(arguments.length){case 0:return new r([0],[0],0);case 1:if(typeof o=="number"){var d=f(o);return new r(d,d,0)}else return new r(o,f(o.length),0);case 2:if(typeof c=="number"){var d=f(o.length);return new r(o,d,+c)}else v=0;case 3:if(o.length!==c.length)throw new Error("state and velocity lengths must match");return new r(o,c,v)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(s,m,x){m.exports=M;var t=0,i=1;function a(w,T,_,h,L,S){this._color=w,this.key=T,this.value=_,this.left=h,this.right=L,this._count=S}function r(w){return new a(w._color,w.key,w.value,w.left,w.right,w._count)}function n(w,T){return new a(w,T.key,T.value,T.left,T.right,T._count)}function f(w){w._count=1+(w.left?w.left._count:0)+(w.right?w.right._count:0)}function l(w,T){this._compare=w,this.root=T}var o=l.prototype;Object.defineProperty(o,"keys",{get:function(){var w=[];return this.forEach(function(T,_){w.push(T)}),w}}),Object.defineProperty(o,"values",{get:function(){var w=[];return this.forEach(function(T,_){w.push(_)}),w}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(w,T){for(var _=this._compare,h=this.root,L=[],S=[];h;){var k=_(w,h.key);L.push(h),S.push(k),k<=0?h=h.left:h=h.right}L.push(new a(t,w,T,null,null,1));for(var P=L.length-2;P>=0;--P){var h=L[P];S[P]<=0?L[P]=new a(h._color,h.key,h.value,L[P+1],h.right,h._count+1):L[P]=new a(h._color,h.key,h.value,h.left,L[P+1],h._count+1)}for(var P=L.length-1;P>1;--P){var O=L[P-1],h=L[P];if(O._color===i||h._color===i)break;var F=L[P-2];if(F.left===O)if(O.left===h){var D=F.right;if(D&&D._color===t)O._color=i,F.right=n(i,D),F._color=t,P-=1;else{if(F._color=t,F.left=O.right,O._color=i,O.right=F,L[P-2]=O,L[P-1]=h,f(F),f(O),P>=3){var R=L[P-3];R.left===F?R.left=O:R.right=O}break}}else{var D=F.right;if(D&&D._color===t)O._color=i,F.right=n(i,D),F._color=t,P-=1;else{if(O.right=h.left,F._color=t,F.left=h.right,h._color=i,h.left=O,h.right=F,L[P-2]=h,L[P-1]=O,f(F),f(O),f(h),P>=3){var R=L[P-3];R.left===F?R.left=h:R.right=h}break}}else if(O.right===h){var D=F.left;if(D&&D._color===t)O._color=i,F.left=n(i,D),F._color=t,P-=1;else{if(F._color=t,F.right=O.left,O._color=i,O.left=F,L[P-2]=O,L[P-1]=h,f(F),f(O),P>=3){var R=L[P-3];R.right===F?R.right=O:R.left=O}break}}else{var D=F.left;if(D&&D._color===t)O._color=i,F.left=n(i,D),F._color=t,P-=1;else{if(O.left=h.right,F._color=t,F.right=h.left,h._color=i,h.right=O,h.left=F,L[P-2]=h,L[P-1]=O,f(F),f(O),f(h),P>=3){var R=L[P-3];R.right===F?R.right=h:R.left=h}break}}}return L[0]._color=i,new l(_,L[0])};function c(w,T){if(T.left){var _=c(w,T.left);if(_)return _}var _=w(T.key,T.value);if(_)return _;if(T.right)return c(w,T.right)}function v(w,T,_,h){var L=T(w,h.key);if(L<=0){if(h.left){var S=v(w,T,_,h.left);if(S)return S}var S=_(h.key,h.value);if(S)return S}if(h.right)return v(w,T,_,h.right)}function d(w,T,_,h,L){var S=_(w,L.key),k=_(T,L.key),P;if(S<=0&&(L.left&&(P=d(w,T,_,h,L.left),P)||k>0&&(P=h(L.key,L.value),P)))return P;if(k>0&&L.right)return d(w,T,_,h,L.right)}o.forEach=function(T,_,h){if(!!this.root)switch(arguments.length){case 1:return c(T,this.root);case 2:return v(_,this._compare,T,this.root);case 3:return this._compare(_,h)>=0?void 0:d(_,h,this._compare,T,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var w=[],T=this.root;T;)w.push(T),T=T.left;return new p(this,w)}}),Object.defineProperty(o,"end",{get:function(){for(var w=[],T=this.root;T;)w.push(T),T=T.right;return new p(this,w)}}),o.at=function(w){if(w<0)return new p(this,[]);for(var T=this.root,_=[];;){if(_.push(T),T.left){if(w<T.left._count){T=T.left;continue}w-=T.left._count}if(!w)return new p(this,_);if(w-=1,T.right){if(w>=T.right._count)break;T=T.right}else break}return new p(this,[])},o.ge=function(w){for(var T=this._compare,_=this.root,h=[],L=0;_;){var S=T(w,_.key);h.push(_),S<=0&&(L=h.length),S<=0?_=_.left:_=_.right}return h.length=L,new p(this,h)},o.gt=function(w){for(var T=this._compare,_=this.root,h=[],L=0;_;){var S=T(w,_.key);h.push(_),S<0&&(L=h.length),S<0?_=_.left:_=_.right}return h.length=L,new p(this,h)},o.lt=function(w){for(var T=this._compare,_=this.root,h=[],L=0;_;){var S=T(w,_.key);h.push(_),S>0&&(L=h.length),S<=0?_=_.left:_=_.right}return h.length=L,new p(this,h)},o.le=function(w){for(var T=this._compare,_=this.root,h=[],L=0;_;){var S=T(w,_.key);h.push(_),S>=0&&(L=h.length),S<0?_=_.left:_=_.right}return h.length=L,new p(this,h)},o.find=function(w){for(var T=this._compare,_=this.root,h=[];_;){var L=T(w,_.key);if(h.push(_),L===0)return new p(this,h);L<=0?_=_.left:_=_.right}return new p(this,[])},o.remove=function(w){var T=this.find(w);return T?T.remove():this},o.get=function(w){for(var T=this._compare,_=this.root;_;){var h=T(w,_.key);if(h===0)return _.value;h<=0?_=_.left:_=_.right}};function p(w,T){this.tree=w,this._stack=T}var y=p.prototype;Object.defineProperty(y,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(y,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),y.clone=function(){return new p(this.tree,this._stack.slice())};function g(w,T){w.key=T.key,w.value=T.value,w.left=T.left,w.right=T.right,w._color=T._color,w._count=T._count}function A(w){for(var T,_,h,L,S=w.length-1;S>=0;--S){if(T=w[S],S===0){T._color=i;return}if(_=w[S-1],_.left===T){if(h=_.right,h.right&&h.right._color===t){if(h=_.right=r(h),L=h.right=r(h.right),_.right=h.left,h.left=_,h.right=L,h._color=_._color,T._color=i,_._color=i,L._color=i,f(_),f(h),S>1){var k=w[S-2];k.left===_?k.left=h:k.right=h}w[S-1]=h;return}else if(h.left&&h.left._color===t){if(h=_.right=r(h),L=h.left=r(h.left),_.right=L.left,h.left=L.right,L.left=_,L.right=h,L._color=_._color,_._color=i,h._color=i,T._color=i,f(_),f(h),f(L),S>1){var k=w[S-2];k.left===_?k.left=L:k.right=L}w[S-1]=L;return}if(h._color===i)if(_._color===t){_._color=i,_.right=n(t,h);return}else{_.right=n(t,h);continue}else{if(h=r(h),_.right=h.left,h.left=_,h._color=_._color,_._color=t,f(_),f(h),S>1){var k=w[S-2];k.left===_?k.left=h:k.right=h}w[S-1]=h,w[S]=_,S+1<w.length?w[S+1]=T:w.push(T),S=S+2}}else{if(h=_.left,h.left&&h.left._color===t){if(h=_.left=r(h),L=h.left=r(h.left),_.left=h.right,h.right=_,h.left=L,h._color=_._color,T._color=i,_._color=i,L._color=i,f(_),f(h),S>1){var k=w[S-2];k.right===_?k.right=h:k.left=h}w[S-1]=h;return}else if(h.right&&h.right._color===t){if(h=_.left=r(h),L=h.right=r(h.right),_.left=L.right,h.right=L.left,L.right=_,L.left=h,L._color=_._color,_._color=i,h._color=i,T._color=i,f(_),f(h),f(L),S>1){var k=w[S-2];k.right===_?k.right=L:k.left=L}w[S-1]=L;return}if(h._color===i)if(_._color===t){_._color=i,_.left=n(t,h);return}else{_.left=n(t,h);continue}else{if(h=r(h),_.left=h.right,h.right=_,h._color=_._color,_._color=t,f(_),f(h),S>1){var k=w[S-2];k.right===_?k.right=h:k.left=h}w[S-1]=h,w[S]=_,S+1<w.length?w[S+1]=T:w.push(T),S=S+2}}}}y.remove=function(){var w=this._stack;if(w.length===0)return this.tree;var T=new Array(w.length),_=w[w.length-1];T[T.length-1]=new a(_._color,_.key,_.value,_.left,_.right,_._count);for(var h=w.length-2;h>=0;--h){var _=w[h];_.left===w[h+1]?T[h]=new a(_._color,_.key,_.value,T[h+1],_.right,_._count):T[h]=new a(_._color,_.key,_.value,_.left,T[h+1],_._count)}if(_=T[T.length-1],_.left&&_.right){var L=T.length;for(_=_.left;_.right;)T.push(_),_=_.right;var S=T[L-1];T.push(new a(_._color,S.key,S.value,_.left,_.right,_._count)),T[L-1].key=_.key,T[L-1].value=_.value;for(var h=T.length-2;h>=L;--h)_=T[h],T[h]=new a(_._color,_.key,_.value,_.left,T[h+1],_._count);T[L-1].left=T[L]}if(_=T[T.length-1],_._color===t){var k=T[T.length-2];k.left===_?k.left=null:k.right===_&&(k.right=null),T.pop();for(var h=0;h<T.length;++h)T[h]._count--;return new l(this.tree._compare,T[0])}else if(_.left||_.right){_.left?g(_,_.left):_.right&&g(_,_.right),_._color=i;for(var h=0;h<T.length-1;++h)T[h]._count--;return new l(this.tree._compare,T[0])}else{if(T.length===1)return new l(this.tree._compare,null);for(var h=0;h<T.length;++h)T[h]._count--;var P=T[T.length-2];A(T),P.left===_?P.left=null:P.right=null}return new l(this.tree._compare,T[0])},Object.defineProperty(y,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(y,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(y,"index",{get:function(){var w=0,T=this._stack;if(T.length===0){var _=this.tree.root;return _?_._count:0}else T[T.length-1].left&&(w=T[T.length-1].left._count);for(var h=T.length-2;h>=0;--h)T[h+1]===T[h].right&&(++w,T[h].left&&(w+=T[h].left._count));return w},enumerable:!0}),y.next=function(){var w=this._stack;if(w.length!==0){var T=w[w.length-1];if(T.right)for(T=T.right;T;)w.push(T),T=T.left;else for(w.pop();w.length>0&&w[w.length-1].right===T;)T=w[w.length-1],w.pop()}},Object.defineProperty(y,"hasNext",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].right)return!0;for(var T=w.length-1;T>0;--T)if(w[T-1].left===w[T])return!0;return!1}}),y.update=function(w){var T=this._stack;if(T.length===0)throw new Error("Can't update empty node!");var _=new Array(T.length),h=T[T.length-1];_[_.length-1]=new a(h._color,h.key,w,h.left,h.right,h._count);for(var L=T.length-2;L>=0;--L)h=T[L],h.left===T[L+1]?_[L]=new a(h._color,h.key,h.value,_[L+1],h.right,h._count):_[L]=new a(h._color,h.key,h.value,h.left,_[L+1],h._count);return new l(this.tree._compare,_[0])},y.prev=function(){var w=this._stack;if(w.length!==0){var T=w[w.length-1];if(T.left)for(T=T.left;T;)w.push(T),T=T.right;else for(w.pop();w.length>0&&w[w.length-1].left===T;)T=w[w.length-1],w.pop()}},Object.defineProperty(y,"hasPrev",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].left)return!0;for(var T=w.length-1;T>0;--T)if(w[T-1].right===w[T])return!0;return!1}});function b(w,T){return w<T?-1:w>T?1:0}function M(w){return new l(w||b,null)}},{}],70:[function(s,m,x){m.exports=T;var t=s("./lib/text.js"),i=s("./lib/lines.js"),a=s("./lib/background.js"),r=s("./lib/cube.js"),n=s("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function l(_,h){return _[0]=h[0],_[1]=h[1],_[2]=h[2],_}function o(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(_)}var c=o.prototype;c.update=function(_){_=_||{};function h(j,ee,q){if(q in _){var G=_[q],J=this[q],le;(j?Array.isArray(G)&&Array.isArray(G[0]):Array.isArray(G))?this[q]=le=[ee(G[0]),ee(G[1]),ee(G[2])]:this[q]=le=[ee(G),ee(G),ee(G)];for(var fe=0;fe<3;++fe)if(le[fe]!==J[fe])return!0}return!1}var L=h.bind(this,!1,Number),S=h.bind(this,!1,Boolean),k=h.bind(this,!1,String),P=h.bind(this,!0,function(j){if(Array.isArray(j)){if(j.length===3)return[+j[0],+j[1],+j[2],1];if(j.length===4)return[+j[0],+j[1],+j[2],+j[3]]}return[0,0,0,1]}),O,F=!1,D=!1;if("bounds"in _)for(var R=_.bounds,U=0;U<2;++U)for(var N=0;N<3;++N)R[U][N]!==this.bounds[U][N]&&(D=!0),this.bounds[U][N]=R[U][N];if("ticks"in _){O=_.ticks,F=!0,this.autoTicks=!1;for(var U=0;U<3;++U)this.tickSpacing[U]=0}else L("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),D=!0,F=!0,this._firstInit=!1),D&&this.autoTicks&&(O=n.create(this.bounds,this.tickSpacing),F=!0),F){for(var U=0;U<3;++U)O[U].sort(function(ee,q){return ee.x-q.x});n.equal(O,this.ticks)?F=!1:this.ticks=O}S("tickEnable"),k("tickFont")&&(F=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var X=k("labels");k("labelFont")&&(X=!0),S("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),S("lineEnable"),S("lineMirror"),L("lineWidth"),P("lineColor"),S("lineTickEnable"),S("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),S("gridEnable"),L("gridWidth"),P("gridColor"),S("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),S("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(X||F)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=t(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&F&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var d=[new v,new v,new v];function p(_,h,L,S,k){for(var P=_.primalOffset,O=_.primalMinor,F=_.mirrorOffset,D=_.mirrorMinor,R=S[h],U=0;U<3;++U)if(h!==U){var N=P,X=F,j=O,ee=D;R&1<<U&&(N=F,X=P,j=D,ee=O),N[U]=L[0][U],X[U]=L[1][U],k[U]>0?(j[U]=-1,ee[U]=0):(j[U]=0,ee[U]=1)}}var y=[0,0,0],g={model:f,view:f,projection:f,_ortho:!1};c.isOpaque=function(){return!0},c.isTransparent=function(){return!1},c.drawTransparent=function(_){};var A=0,b=[0,0,0],M=[0,0,0],w=[0,0,0];c.draw=function(_){_=_||g;for(var h=this.gl,L=_.model||f,S=_.view||f,k=_.projection||f,P=this.bounds,O=_._ortho||!1,F=r(L,S,k,P,O),D=F.cubeEdges,R=F.axis,U=S[12],N=S[13],X=S[14],j=S[15],ee=O?2:1,q=ee*this.pixelRatio*(k[3]*U+k[7]*N+k[11]*X+k[15]*j)/h.drawingBufferHeight,G=0;G<3;++G)this.lastCubeProps.cubeEdges[G]=D[G],this.lastCubeProps.axis[G]=R[G];for(var J=d,G=0;G<3;++G)p(d[G],G,this.bounds,D,R);for(var h=this.gl,le=y,G=0;G<3;++G)this.backgroundEnable[G]?le[G]=R[G]:le[G]=0;this._background.draw(L,S,k,P,le,this.backgroundColor),this._lines.bind(L,S,k,this);for(var G=0;G<3;++G){var fe=[0,0,0];R[G]>0?fe[G]=P[1][G]:fe[G]=P[0][G];for(var se=0;se<2;++se){var V=(G+1+se)%3,Y=(G+1+(se^1))%3;this.gridEnable[V]&&this._lines.drawGrid(V,Y,this.bounds,fe,this.gridColor[V],this.gridWidth[V]*this.pixelRatio)}for(var se=0;se<2;++se){var V=(G+1+se)%3,Y=(G+1+(se^1))%3;this.zeroEnable[Y]&&Math.min(P[0][Y],P[1][Y])<=0&&Math.max(P[0][Y],P[1][Y])>=0&&this._lines.drawZero(V,Y,this.bounds,fe,this.zeroLineColor[Y],this.zeroLineWidth[Y]*this.pixelRatio)}}for(var G=0;G<3;++G){this.lineEnable[G]&&this._lines.drawAxisLine(G,this.bounds,J[G].primalOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio),this.lineMirror[G]&&this._lines.drawAxisLine(G,this.bounds,J[G].mirrorOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio);for(var ne=l(b,J[G].primalMinor),te=l(M,J[G].mirrorMinor),K=this.lineTickLength,se=0;se<3;++se){var $=q/L[5*se];ne[se]*=K[se]*$,te[se]*=K[se]*$}this.lineTickEnable[G]&&this._lines.drawAxisTicks(G,J[G].primalOffset,ne,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio),this.lineTickMirror[G]&&this._lines.drawAxisTicks(G,J[G].mirrorOffset,te,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio)}this._lines.unbind(),this._text.bind(L,S,k,this.pixelRatio);var ae,ie=.5,oe,ue;function xe(Be){ue=[0,0,0],ue[Be]=1}function he(Be,Ye,Xe){var Te=(Be+1)%3,Ie=(Be+2)%3,Ze=Ye[Te],rt=Ye[Ie],Ge=Xe[Te],ze=Xe[Ie];if(Ze>0&&ze>0){xe(Te);return}else if(Ze>0&&ze<0){xe(Te);return}else if(Ze<0&&ze>0){xe(Te);return}else if(Ze<0&&ze<0){xe(Te);return}else if(rt>0&&Ge>0){xe(Ie);return}else if(rt>0&&Ge<0){xe(Ie);return}else if(rt<0&&Ge>0){xe(Ie);return}else if(rt<0&&Ge<0){xe(Ie);return}}for(var G=0;G<3;++G){for(var me=J[G].primalMinor,be=J[G].mirrorMinor,Ce=l(w,J[G].primalOffset),se=0;se<3;++se)this.lineTickEnable[G]&&(Ce[se]+=q*me[se]*Math.max(this.lineTickLength[se],0)/L[5*se]);var Se=[0,0,0];if(Se[G]=1,this.tickEnable[G]){this.tickAngle[G]===-3600?(this.tickAngle[G]=0,this.tickAlign[G]="auto"):this.tickAlign[G]=-1,oe=1,ae=[this.tickAlign[G],ie,oe],ae[0]==="auto"?ae[0]=A:ae[0]=parseInt(""+ae[0]),ue=[0,0,0],he(G,me,be);for(var se=0;se<3;++se)Ce[se]+=q*me[se]*this.tickPad[se]/L[5*se];this._text.drawTicks(G,this.tickSize[G],this.tickAngle[G],Ce,this.tickColor[G],Se,ue,ae)}if(this.labelEnable[G]){oe=0,ue=[0,0,0],this.labels[G].length>4&&(xe(G),oe=1),ae=[this.labelAlign[G],ie,oe],ae[0]==="auto"?ae[0]=A:ae[0]=parseInt(""+ae[0]);for(var se=0;se<3;++se)Ce[se]+=q*me[se]*this.labelPad[se]/L[5*se];Ce[G]+=.5*(P[0][G]+P[1][G]),this._text.drawLabel(G,this.labelSize[G],this.labelAngle[G],Ce,this.labelColor[G],[0,0,0],ue,ae)}}this._text.unbind()},c.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function T(_,h){var L=new o(_);return L.update(h),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(s,m,x){m.exports=f;var t=s("gl-buffer"),i=s("gl-vao"),a=s("./shaders").bg;function r(l,o,c,v){this.gl=l,this.buffer=o,this.vao=c,this.shader=v}var n=r.prototype;n.draw=function(l,o,c,v,d,p){for(var y=!1,g=0;g<3;++g)y=y||d[g];if(!!y){var A=this.gl;A.enable(A.POLYGON_OFFSET_FILL),A.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:l,view:o,projection:c,bounds:v,enable:d,colors:p},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),A.disable(A.POLYGON_OFFSET_FILL)}},n.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(l){for(var o=[],c=[],v=0,d=0;d<3;++d)for(var p=(d+1)%3,y=(d+2)%3,g=[0,0,0],A=[0,0,0],b=-1;b<=1;b+=2){c.push(v,v+2,v+1,v+1,v+2,v+3),g[d]=b,A[d]=b;for(var M=-1;M<=1;M+=2){g[p]=M;for(var w=-1;w<=1;w+=2)g[y]=w,o.push(g[0],g[1],g[2],A[0],A[1],A[2]),v+=1}var T=p;p=y,y=T}var _=t(l,new Float32Array(o)),h=t(l,new Uint16Array(c),l.ELEMENT_ARRAY_BUFFER),L=i(l,[{buffer:_,type:l.FLOAT,size:3,offset:0,stride:24},{buffer:_,type:l.FLOAT,size:3,offset:12,stride:24}],h),S=a(l);return S.attributes.position.location=0,S.attributes.normal.location=1,new r(l,_,L,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(s,m,x){m.exports=b;var t=s("bit-twiddle"),i=s("gl-mat4/multiply"),a=s("split-polygon"),r=s("robust-orientation"),n=new Array(16),f=new Array(8),l=new Array(8),o=new Array(3),c=[0,0,0];(function(){for(var M=0;M<8;++M)f[M]=[1,1,1,1],l[M]=[1,1,1]})();function v(M,w,T){for(var _=0;_<4;++_){M[_]=T[12+_];for(var h=0;h<3;++h)M[_]+=w[h]*T[4*h+_]}}var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(M){for(var w=0;w<d.length;++w)if(M=a.positive(M,d[w]),M.length<3)return 0;for(var T=M[0],_=T[0]/T[3],h=T[1]/T[3],L=0,w=1;w+1<M.length;++w){var S=M[w],k=M[w+1],P=S[0]/S[3],O=S[1]/S[3],F=k[0]/k[3],D=k[1]/k[3],R=P-_,U=O-h,N=F-_,X=D-h;L+=Math.abs(R*X-U*N)}return L}var y=[1,1,1],g=[0,0,0],A={cubeEdges:y,axis:g};function b(M,w,T,_,h){i(n,w,M),i(n,T,n);for(var L=0,S=0;S<2;++S){o[2]=_[S][2];for(var k=0;k<2;++k){o[1]=_[k][1];for(var P=0;P<2;++P)o[0]=_[P][0],v(f[L],o,n),L+=1}}for(var O=-1,S=0;S<8;++S){for(var F=f[S][3],D=0;D<3;++D)l[S][D]=f[S][D]/F;h&&(l[S][2]*=-1),F<0&&(O<0||l[S][2]<l[O][2])&&(O=S)}if(O<0){O=0;for(var R=0;R<3;++R){for(var U=(R+2)%3,N=(R+1)%3,X=-1,j=-1,ee=0;ee<2;++ee){var q=ee<<R,G=q+(ee<<U)+(1-ee<<N),J=q+(1-ee<<U)+(ee<<N);r(l[q],l[G],l[J],c)<0||(ee?X=1:j=1)}if(X<0||j<0){j>X&&(O|=1<<R);continue}for(var ee=0;ee<2;++ee){var q=ee<<R,G=q+(ee<<U)+(1-ee<<N),J=q+(1-ee<<U)+(ee<<N),le=p([f[q],f[G],f[J],f[q+(1<<U)+(1<<N)]]);ee?X=le:j=le}if(j>X){O|=1<<R;continue}}}for(var fe=7^O,se=-1,S=0;S<8;++S)S===O||S===fe||(se<0||l[se][1]>l[S][1])&&(se=S);for(var V=-1,S=0;S<3;++S){var Y=se^1<<S;if(!(Y===O||Y===fe)){V<0&&(V=Y);var N=l[Y];N[0]<l[V][0]&&(V=Y)}}for(var ne=-1,S=0;S<3;++S){var Y=se^1<<S;if(!(Y===O||Y===fe||Y===V)){ne<0&&(ne=Y);var N=l[Y];N[0]>l[ne][0]&&(ne=Y)}}var te=y;te[0]=te[1]=te[2]=0,te[t.log2(V^se)]=se&V,te[t.log2(se^ne)]=se&ne;var K=ne^7;K===O||K===fe?(K=V^7,te[t.log2(ne^K)]=K&ne):te[t.log2(V^K)]=K&V;for(var $=g,ae=O,R=0;R<3;++R)ae&1<<R?$[R]=-1:$[R]=1;return A}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(s,m,x){m.exports=y;var t=s("gl-buffer"),i=s("gl-vao"),a=s("./shaders").line,r=[0,0,0],n=[0,0,0],f=[0,0,0],l=[0,0,0],o=[1,1];function c(g){return g[0]=g[1]=g[2]=0,g}function v(g,A){return g[0]=A[0],g[1]=A[1],g[2]=A[2],g}function d(g,A,b,M,w,T,_,h){this.gl=g,this.vertBuffer=A,this.vao=b,this.shader=M,this.tickCount=w,this.tickOffset=T,this.gridCount=_,this.gridOffset=h}var p=d.prototype;p.bind=function(g,A,b){this.shader.bind(),this.shader.uniforms.model=g,this.shader.uniforms.view=A,this.shader.uniforms.projection=b,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(g,A,b,M,w){var T=c(n);this.shader.uniforms.majorAxis=n,T[g]=A[1][g]-A[0][g],this.shader.uniforms.minorAxis=T;var _=v(l,b);_[g]+=A[0][g],this.shader.uniforms.offset=_,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=M;var h=c(f);h[(g+2)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6);var h=c(f);h[(g+1)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(g,A,b,M,w){if(!!this.tickCount[g]){var T=c(r);T[g]=1,this.shader.uniforms.majorAxis=T,this.shader.uniforms.offset=A,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=w;var _=c(f);_[g]=1,this.shader.uniforms.screenAxis=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}},p.drawGrid=function(g,A,b,M,w,T){if(!!this.gridCount[g]){var _=c(n);_[A]=b[1][A]-b[0][A],this.shader.uniforms.minorAxis=_;var h=v(l,M);h[A]+=b[0][A],this.shader.uniforms.offset=h;var L=c(r);L[g]=1,this.shader.uniforms.majorAxis=L;var S=c(f);S[g]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}},p.drawZero=function(g,A,b,M,w,T){var _=c(n);this.shader.uniforms.majorAxis=_,_[g]=b[1][g]-b[0][g],this.shader.uniforms.minorAxis=_;var h=v(l,M);h[g]+=b[0][g],this.shader.uniforms.offset=h;var L=c(f);L[A]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function y(g,A,b){var M=[],w=[0,0,0],T=[0,0,0],_=[0,0,0],h=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var S=M.length/3|0,k=0;k<b[L].length;++k){var P=+b[L][k].x;M.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var O=M.length/3|0;w[L]=S,T[L]=O-S;for(var S=M.length/3|0,F=0;F<b[L].length;++F){var P=+b[L][F].x;M.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var O=M.length/3|0;_[L]=S,h[L]=O-S}var D=t(g,new Float32Array(M)),R=i(g,[{buffer:D,type:g.FLOAT,size:3,stride:0,offset:0}]),U=a(g);return U.attributes.position.location=0,new d(g,D,R,U,T,w,h,_)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);x.line=function(c){return i(c,a,r,null,[{name:"position",type:"vec3"}])};var n=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);x.text=function(c){return i(c,n,f,null,[{name:"position",type:"vec3"}])};var l=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);x.bg=function(c){return i(c,l,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(s,m,x){(function(t){(function(){m.exports=y;var i=s("gl-buffer"),a=s("gl-vao"),r=s("vectorize-text"),n=s("./shaders").text,f=window||t.global||{},l=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var o=3;function c(g,A,b,M){this.gl=g,this.shader=A,this.buffer=b,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var v=c.prototype,d=[0,0];v.bind=function(g,A,b,M){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=g,w.view=A,w.projection=b,w.pixelScale=M,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},v.unbind=function(){this.vao.unbind()},v.update=function(g,A,b,M,w){var T=[];function _(R,U,N,X,j,ee){var q=l[N];q||(q=l[N]={});var G=q[U];G||(G=q[U]=p(U,{triangles:!0,font:N,textAlign:"center",textBaseline:"middle",lineSpacing:j,styletags:ee}));for(var J=(X||12)/12,le=G.positions,fe=G.cells,se=0,V=fe.length;se<V;++se)for(var Y=fe[se],ne=2;ne>=0;--ne){var te=le[Y[ne]];T.push(J*te[0],-J*te[1],R)}}for(var h=[0,0,0],L=[0,0,0],S=[0,0,0],k=[0,0,0],P=1.25,O={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},F=0;F<3;++F){S[F]=T.length/o|0,_(.5*(g[0][F]+g[1][F]),A[F],b[F],12,P,O),k[F]=(T.length/o|0)-S[F],h[F]=T.length/o|0;for(var D=0;D<M[F].length;++D)!M[F][D].text||_(M[F][D].x,M[F][D].text,M[F][D].font||w,M[F][D].fontSize||12,P,O);L[F]=(T.length/o|0)-h[F]}this.buffer.update(T),this.tickOffset=h,this.tickCount=L,this.labelOffset=S,this.labelCount=k},v.drawTicks=function(g,A,b,M,w,T,_,h){!this.tickCount[g]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=w,this.shader.uniforms.angle=b,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g]))},v.drawLabel=function(g,A,b,M,w,T,_,h){!this.labelCount[g]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=w,this.shader.uniforms.angle=b,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.labelCount[g],this.labelOffset[g]))},v.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function p(g,A){try{return r(g,A)}catch(b){return console.warn('error vectorizing text:"'+g+'" error:',b),{cells:[],positions:[]}}}function y(g,A,b,M,w,T){var _=i(g),h=a(g,[{buffer:_,size:3}]),L=n(g);L.attributes.position.location=0;var S=new c(g,L,_,h);return S.update(A,b,M,w,T),S}}).call(this)}).call(this,s("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(s,m,x){x.create=i,x.equal=a;function t(r,n){var f=r+"",l=f.indexOf("."),o=0;l>=0&&(o=f.length-l-1);var c=Math.pow(10,o),v=Math.round(r*n*c),d=v+"";if(d.indexOf("e")>=0)return d;var p=v/c,y=v%c;v<0?(p=-Math.ceil(p)|0,y=-y|0):(p=Math.floor(p)|0,y=y|0);var g=""+p;if(v<0&&(g="-"+g),o){for(var A=""+y;A.length<o;)A="0"+A;return g+"."+A}else return g}function i(r,n){for(var f=[],l=0;l<3;++l){var o=[];.5*(r[0][l]+r[1][l]);for(var c=0;c*n[l]<=r[1][l];++c)o.push({x:c*n[l],text:t(n[l],c)});for(var c=-1;c*n[l]>=r[0][l];--c)o.push({x:c*n[l],text:t(n[l],c)});f.push(o)}return f}function a(r,n){for(var f=0;f<3;++f){if(r[f].length!==n[f].length)return!1;for(var l=0;l<r[f].length;++l){var o=r[f][l],c=n[f][l];if(o.x!==c.x||o.text!==c.text||o.font!==c.font||o.fontColor!==c.fontColor||o.fontSize!==c.fontSize||o.dx!==c.dx||o.dy!==c.dy)return!1}}return!0}},{}],77:[function(s,m,x){m.exports=A;var t=s("extract-frustum-planes"),i=s("split-polygon"),a=s("./lib/cube.js"),r=s("gl-mat4/multiply"),n=s("gl-mat4/transpose"),f=s("gl-vec4/transformMat4"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function c(b,M,w){this.lo=b,this.hi=M,this.pixelsPerDataUnit=w}var v=[0,0,0,1],d=[0,0,0,1];function p(b,M,w,T,_){for(var h=0;h<3;++h){for(var L=v,S=d,k=0;k<3;++k)S[k]=L[k]=w[k];S[3]=L[3]=1,S[h]+=1,f(S,S,M),S[3]<0&&(b[h]=1/0),L[h]-=1,f(L,L,M),L[3]<0&&(b[h]=1/0);var P=(L[0]/L[3]-S[0]/S[3])*T,O=(L[1]/L[3]-S[1]/S[3])*_;b[h]=.25*Math.sqrt(P*P+O*O)}return b}var y=[new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0)],g=[0,0,0];function A(b,M,w,T,_){var h=M.model||l,L=M.view||l,S=M.projection||l,k=M._ortho||!1,P=b.bounds,_=_||a(h,L,S,P,k),O=_.axis;r(o,L,h),r(o,S,o);for(var F=y,D=0;D<3;++D)F[D].lo=1/0,F[D].hi=-1/0,F[D].pixelsPerDataUnit=1/0;var R=t(n(o,o));n(o,o);for(var U=0;U<3;++U){var N=(U+1)%3,X=(U+2)%3,j=g;e:for(var D=0;D<2;++D){var ee=[];if(O[U]<0!=!!D){j[U]=P[D][U];for(var q=0;q<2;++q){j[N]=P[q^D][N];for(var G=0;G<2;++G)j[X]=P[G^q^D][X],ee.push(j.slice())}for(var J=k?5:4,q=J;q===J;++q){if(ee.length===0)continue e;ee=i.positive(ee,R[q])}for(var q=0;q<ee.length;++q)for(var X=ee[q],le=p(g,o,X,w,T),G=0;G<3;++G)F[G].lo=Math.min(F[G].lo,X[G]),F[G].hi=Math.max(F[G].hi,X[G]),G!==U&&(F[G].pixelsPerDataUnit=Math.min(F[G].pixelsPerDataUnit,Math.abs(le[G])))}}}return F}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(s,m,x){var t=s("typedarray-pool"),i=s("ndarray-ops"),a=s("ndarray"),r=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function n(d,p,y,g,A){this.gl=d,this.type=p,this.handle=y,this.length=g,this.usage=A}var f=n.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function l(d,p,y,g,A,b){var M=A.length*A.BYTES_PER_ELEMENT;if(b<0)return d.bufferData(p,A,g),M;if(M+b>y)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(p,b,A),y}function o(d,p){for(var y=t.malloc(d.length,p),g=d.length,A=0;A<g;++A)y[A]=d[A];return y}function c(d,p){for(var y=1,g=p.length-1;g>=0;--g){if(p[g]!==y)return!1;y*=d[g]}return!0}f.update=function(d,p){if(typeof p!="number"&&(p=-1),this.bind(),typeof d=="object"&&typeof d.shape!="undefined"){var y=d.dtype;if(r.indexOf(y)<0&&(y="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var g=gl.getExtension("OES_element_index_uint");g&&y!=="uint16"?y="uint32":y="uint16"}if(y===d.dtype&&c(d.shape,d.stride))d.offset===0&&d.data.length===d.shape[0]?this.length=l(this.gl,this.type,this.length,this.usage,d.data,p):this.length=l(this.gl,this.type,this.length,this.usage,d.data.subarray(d.offset,d.shape[0]),p);else{var A=t.malloc(d.size,y),b=a(A,d.shape);i.assign(b,d),p<0?this.length=l(this.gl,this.type,this.length,this.usage,A,p):this.length=l(this.gl,this.type,this.length,this.usage,A.subarray(0,d.size),p),t.free(A)}}else if(Array.isArray(d)){var M;this.type===this.gl.ELEMENT_ARRAY_BUFFER?M=o(d,"uint16"):M=o(d,"float32"),p<0?this.length=l(this.gl,this.type,this.length,this.usage,M,p):this.length=l(this.gl,this.type,this.length,this.usage,M.subarray(0,d.length),p),t.free(M)}else if(typeof d=="object"&&typeof d.length=="number")this.length=l(this.gl,this.type,this.length,this.usage,d,p);else if(typeof d=="number"||d===void 0){if(p>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");d=d|0,d<=0&&(d=1),this.gl.bufferData(this.type,d|0,this.usage),this.length=d}else throw new Error("gl-buffer: Invalid data type")};function v(d,p,y,g){if(y=y||d.ARRAY_BUFFER,g=g||d.DYNAMIC_DRAW,y!==d.ARRAY_BUFFER&&y!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==d.DYNAMIC_DRAW&&g!==d.STATIC_DRAW&&g!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var A=d.createBuffer(),b=new n(d,y,A,0,g);return b.update(p),b}m.exports=v},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(s,m,x){var t=s("gl-vec3");m.exports=function(a,r){var n=a.positions,f=a.vectors,l={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(a.positions.length===0)return r&&(r[0]=[0,0,0],r[1]=[0,0,0]),l;for(var o=0,c=1/0,v=-1/0,d=1/0,p=-1/0,y=1/0,g=-1/0,A=null,b=null,M=[],w=1/0,T=!1,_=0;_<n.length;_++){var h=n[_];c=Math.min(h[0],c),v=Math.max(h[0],v),d=Math.min(h[1],d),p=Math.max(h[1],p),y=Math.min(h[2],y),g=Math.max(h[2],g);var L=f[_];if(t.length(L)>o&&(o=t.length(L)),_){var S=2*t.distance(A,h)/(t.length(b)+t.length(L));S?(w=Math.min(w,S),T=!1):T=!0}T||(A=h,b=L),M.push(L)}var k=[c,d,y],P=[v,p,g];r&&(r[0]=k,r[1]=P),o===0&&(o=1);var O=1/o;isFinite(w)||(w=1),l.vectorScale=w;var F=a.coneSize||.5;a.absoluteConeSize&&(F=a.absoluteConeSize*O),l.coneScale=F;for(var _=0,D=0;_<n.length;_++)for(var h=n[_],R=h[0],U=h[1],N=h[2],X=M[_],j=t.length(X)*O,ee=0,q=8;ee<q;ee++){l.positions.push([R,U,N,D++]),l.positions.push([R,U,N,D++]),l.positions.push([R,U,N,D++]),l.positions.push([R,U,N,D++]),l.positions.push([R,U,N,D++]),l.positions.push([R,U,N,D++]),l.vectors.push(X),l.vectors.push(X),l.vectors.push(X),l.vectors.push(X),l.vectors.push(X),l.vectors.push(X),l.vertexIntensity.push(j,j,j),l.vertexIntensity.push(j,j,j);var G=l.positions.length;l.cells.push([G-6,G-5,G-4],[G-3,G-2,G-1])}return l};var i=s("./lib/shaders");m.exports.createMesh=s("./create_mesh"),m.exports.createConeMesh=function(a,r){return m.exports.createMesh(a,r,{shaders:i,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(s,m,x){var t=s("gl-shader"),i=s("gl-buffer"),a=s("gl-vao"),r=s("gl-texture2d"),n=s("gl-mat4/multiply"),f=s("gl-mat4/invert"),l=s("ndarray"),o=s("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(M,w,T,_,h,L,S,k,P,O,F){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=T,this.pickShader=_,this.trianglePositions=h,this.triangleVectors=L,this.triangleColors=k,this.triangleUVs=P,this.triangleIds=S,this.triangleVAO=O,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=F,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=c,this._view=c,this._projection=c,this._resolution=[1,1]}var d=v.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(M){this.pickId=M};function p(M){for(var w=o({colormap:M,nshades:256,format:"rgba"}),T=new Uint8Array(256*4),_=0;_<256;++_){for(var h=w[_],L=0;L<3;++L)T[4*_+L]=h[L];T[4*_+3]=h[3]*255}return l(T,[256,256,4],[4,0,1])}function y(M){for(var w=M.length,T=new Array(w),_=0;_<w;++_)T[_]=M[_][2];return T}d.update=function(M){M=M||{};var w=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),M.tubeScale!==void 0&&(this.tubeScale=M.tubeScale),M.vectorScale!==void 0&&(this.vectorScale=M.vectorScale),M.coneScale!==void 0&&(this.coneScale=M.coneScale),M.coneOffset!==void 0&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(p(M.colormap)),this.texture.generateMipmap());var T=M.cells,_=M.positions,h=M.vectors;if(!_||!T||!h)return;var L=[],S=[],k=[],P=[],O=[];this.cells=T,this.positions=_,this.vectors=h;var F=M.meshColor||[1,1,1,1],D=M.vertexIntensity,R=1/0,U=-1/0;if(D)if(M.vertexIntensityBounds)R=+M.vertexIntensityBounds[0],U=+M.vertexIntensityBounds[1];else for(var N=0;N<D.length;++N){var X=D[N];R=Math.min(R,X),U=Math.max(U,X)}else for(var N=0;N<_.length;++N){var X=_[N][2];R=Math.min(R,X),U=Math.max(U,X)}D?this.intensity=D:this.intensity=y(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var N=0;N<_.length;++N)for(var j=_[N],ee=0;ee<3;++ee)isNaN(j[ee])||!isFinite(j[ee])||(this.bounds[0][ee]=Math.min(this.bounds[0][ee],j[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],j[ee]));var q=0;e:for(var N=0;N<T.length;++N){var G=T[N];switch(G.length){case 3:for(var ee=0;ee<3;++ee)for(var J=G[ee],j=_[J],le=0;le<3;++le)if(isNaN(j[le])||!isFinite(j[le]))continue e;for(var ee=0;ee<3;++ee){var J=G[2-ee],j=_[J];L.push(j[0],j[1],j[2],j[3]);var fe=h[J];S.push(fe[0],fe[1],fe[2],fe[3]||0);var se=F;se.length===3?k.push(se[0],se[1],se[2],1):k.push(se[0],se[1],se[2],se[3]);var V;D?V=[(D[J]-R)/(U-R),0]:V=[(j[2]-R)/(U-R),0],P.push(V[0],V[1]),O.push(N)}q+=1;break}}this.triangleCount=q,this.trianglePositions.update(L),this.triangleVectors.update(S),this.triangleColors.update(k),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(O))},d.drawTransparent=d.draw=function(M){M=M||{};for(var w=this.gl,T=M.model||c,_=M.view||c,h=M.projection||c,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);var k={model:T,view:_,projection:h,inverseModel:c.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=f(k.inverseModel,k.model),w.disable(w.CULL_FACE),this.texture.bind(0);var P=new Array(16);n(P,k.view,k.model),n(P,k.projection,P),f(P,P);for(var S=0;S<3;++S)k.eyePosition[S]=P[12+S]/P[15];for(var O=P[15],S=0;S<3;++S)O+=this.lightPosition[S]*P[4*S+3];for(var S=0;S<3;++S){for(var F=P[12+S],D=0;D<3;++D)F+=P[4*D+S]*this.lightPosition[D];k.lightPosition[S]=F/O}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=k,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},d.drawPick=function(M){M=M||{};for(var w=this.gl,T=M.model||c,_=M.view||c,h=M.projection||c,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);this._model=[].slice.call(T),this._view=[].slice.call(_),this._projection=[].slice.call(h),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var k={model:T,view:_,projection:h,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=k,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},d.pick=function(M){if(!M||M.id!==this.pickId)return null;var w=M.value[0]+256*M.value[1]+65536*M.value[2],T=this.cells[w],_=this.positions[T[1]].slice(0,3),h={position:_,dataCoordinate:_,index:Math.floor(T[1]/48)};return this.traceType==="cone"?h.index=Math.floor(T[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[T[1]],h.velocity=this.vectors[T[1]].slice(0,3),h.divergence=this.vectors[T[1]][3],h.index=w),h},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function g(M,w){var T=t(M,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return T.attributes.position.location=0,T.attributes.color.location=2,T.attributes.uv.location=3,T.attributes.vector.location=4,T}function A(M,w){var T=t(M,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return T.attributes.position.location=0,T.attributes.id.location=1,T.attributes.vector.location=4,T}function b(M,w,T){var _=T.shaders;arguments.length===1&&(w=M,M=w.gl);var h=g(M,_),L=A(M,_),S=r(M,l(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=M.LINEAR_MIPMAP_LINEAR,S.magFilter=M.LINEAR;var k=i(M),P=i(M),O=i(M),F=i(M),D=i(M),R=a(M,[{buffer:k,type:M.FLOAT,size:4},{buffer:D,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:M.FLOAT,size:4},{buffer:F,type:M.FLOAT,size:2},{buffer:P,type:M.FLOAT,size:4}]),U=new v(M,S,h,L,k,P,D,O,F,R,T.traceType||"cone");return U.update(w),U}m.exports=b},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(s,m,x){var t=s("glslify"),i=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);x.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},x.pickShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(s,m,x){m.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(s,m,x){var t=s("./1.0/numbers");m.exports=function(a){return t[a]}},{"./1.0/numbers":82}],84:[function(s,m,x){m.exports=v;var t=s("gl-buffer"),i=s("gl-vao"),a=s("./shaders/index"),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(d,p,y,g){this.gl=d,this.shader=g,this.buffer=p,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=n.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(d){var p=this.gl,y=this.shader.uniforms;this.shader.bind();var g=y.view=d.view||r,A=y.projection=d.projection||r;y.model=d.model||r,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var b=g[12],M=g[13],w=g[14],T=g[15],_=d._ortho||!1,h=_?2:1,L=h*this.pixelRatio*(A[3]*b+A[7]*M+A[11]*w+A[15]*T)/p.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)p.lineWidth(this.lineWidth[S]*this.pixelRatio),y.capSize=this.capSize[S]*L,this.lineCount[S]&&p.drawArrays(p.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function l(d,p){for(var y=0;y<3;++y)d[0][y]=Math.min(d[0][y],p[y]),d[1][y]=Math.max(d[1][y],p[y])}var o=function(){for(var d=new Array(3),p=0;p<3;++p){for(var y=[],g=1;g<=2;++g)for(var A=-1;A<=1;A+=2){var b=(g+p)%3,M=[0,0,0];M[b]=A,y.push(M)}d[p]=y}return d}();function c(d,p,y,g){for(var A=o[g],b=0;b<A.length;++b){var M=A[b];d.push(p[0],p[1],p[2],y[0],y[1],y[2],y[3],M[0],M[1],M[2])}return A.length}f.update=function(d){d=d||{},"lineWidth"in d&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var p=d.color||[[0,0,0],[0,0,0],[0,0,0]],y=d.position,g=d.error;if(Array.isArray(p[0])||(p=[p,p,p]),y&&g){var A=[],b=y.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=M;e:for(var T=0;T<b;++T){for(var _=y[T],h=0;h<3;++h)if(isNaN(_[h])||!isFinite(_[h]))continue e;var L=g[T],S=p[w];if(Array.isArray(S[0])&&(S=p[T]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][w])||isNaN(L[1][w]))){if(L[0][w]<0){var k=_.slice();k[w]+=L[0][w],A.push(_[0],_[1],_[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),l(this.bounds,k),M+=2+c(A,k,S,w)}if(L[1][w]>0){var k=_.slice();k[w]+=L[1][w],A.push(_[0],_[1],_[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),l(this.bounds,k),M+=2+c(A,k,S,w)}}}this.lineCount[w]=M-this.lineOffset[w]}this.buffer.update(A)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function v(d){var p=d.gl,y=t(p),g=i(p,[{buffer:y,type:p.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:p.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:p.FLOAT,size:3,offset:28,stride:40}]),A=a(p);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.offset.location=2;var b=new n(p,y,g,A);return b.update(d),b}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);m.exports=function(n){return i(n,a,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(s,m,x){var t=s("gl-texture2d");m.exports=M;var i=null,a,r,n,f;function l(w){var T=w.getParameter(w.FRAMEBUFFER_BINDING),_=w.getParameter(w.RENDERBUFFER_BINDING),h=w.getParameter(w.TEXTURE_BINDING_2D);return[T,_,h]}function o(w,T){w.bindFramebuffer(w.FRAMEBUFFER,T[0]),w.bindRenderbuffer(w.RENDERBUFFER,T[1]),w.bindTexture(w.TEXTURE_2D,T[2])}function c(w,T){var _=w.getParameter(T.MAX_COLOR_ATTACHMENTS_WEBGL);i=new Array(_+1);for(var h=0;h<=_;++h){for(var L=new Array(_),S=0;S<h;++S)L[S]=w.COLOR_ATTACHMENT0+S;for(var S=h;S<_;++S)L[S]=w.NONE;i[h]=L}}function v(w){switch(w){case a:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case n:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(w,T,_,h,L,S){if(!h)return null;var k=t(w,T,_,L,h);return k.magFilter=w.NEAREST,k.minFilter=w.NEAREST,k.mipSamples=1,k.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,S,w.TEXTURE_2D,k.handle,0),k}function p(w,T,_,h,L){var S=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,S),w.renderbufferStorage(w.RENDERBUFFER,h,T,_),w.framebufferRenderbuffer(w.FRAMEBUFFER,L,w.RENDERBUFFER,S),S}function y(w){var T=l(w.gl),_=w.gl,h=w.handle=_.createFramebuffer(),L=w._shape[0],S=w._shape[1],k=w.color.length,P=w._ext,O=w._useStencil,F=w._useDepth,D=w._colorType;_.bindFramebuffer(_.FRAMEBUFFER,h);for(var R=0;R<k;++R)w.color[R]=d(_,L,S,D,_.RGBA,_.COLOR_ATTACHMENT0+R);k===0?(w._color_rb=p(_,L,S,_.RGBA4,_.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(i[0])):k>1&&P.drawBuffersWEBGL(i[k]);var U=_.getExtension("WEBGL_depth_texture");U?O?w.depth=d(_,L,S,U.UNSIGNED_INT_24_8_WEBGL,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):F&&(w.depth=d(_,L,S,_.UNSIGNED_SHORT,_.DEPTH_COMPONENT,_.DEPTH_ATTACHMENT)):F&&O?w._depth_rb=p(_,L,S,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):F?w._depth_rb=p(_,L,S,_.DEPTH_COMPONENT16,_.DEPTH_ATTACHMENT):O&&(w._depth_rb=p(_,L,S,_.STENCIL_INDEX,_.STENCIL_ATTACHMENT));var N=_.checkFramebufferStatus(_.FRAMEBUFFER);if(N!==_.FRAMEBUFFER_COMPLETE){w._destroyed=!0,_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(w.handle),w.handle=null,w.depth&&(w.depth.dispose(),w.depth=null),w._depth_rb&&(_.deleteRenderbuffer(w._depth_rb),w._depth_rb=null);for(var R=0;R<w.color.length;++R)w.color[R].dispose(),w.color[R]=null;w._color_rb&&(_.deleteRenderbuffer(w._color_rb),w._color_rb=null),o(_,T),v(N)}o(_,T)}function g(w,T,_,h,L,S,k,P){this.gl=w,this._shape=[T|0,_|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var O=0;O<L;++O)this.color[O]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=h,this._useDepth=S,this._useStencil=k;var F=this,D=[T|0,_|0];Object.defineProperties(D,{0:{get:function(){return F._shape[0]},set:function(R){return F.width=R}},1:{get:function(){return F._shape[1]},set:function(R){return F.height=R}}}),this._shapeVector=D,y(this)}var A=g.prototype;function b(w,T,_){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(w._shape[0]===T&&w._shape[1]===_)){var h=w.gl,L=h.getParameter(h.MAX_RENDERBUFFER_SIZE);if(T<0||T>L||_<0||_>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=T,w._shape[1]=_;for(var S=l(h),k=0;k<w.color.length;++k)w.color[k].shape=w._shape;w._color_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,w._color_rb),h.renderbufferStorage(h.RENDERBUFFER,h.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&h.renderbufferStorage(h.RENDERBUFFER,h.STENCIL_INDEX,w._shape[0],w._shape[1])),h.bindFramebuffer(h.FRAMEBUFFER,w.handle);var P=h.checkFramebufferStatus(h.FRAMEBUFFER);P!==h.FRAMEBUFFER_COMPLETE&&(w.dispose(),o(h,S),v(P)),o(h,S)}}Object.defineProperties(A,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[w|0,w|0]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var T=w[0]|0,_=w[1]|0;return b(this,T,_),[T,_]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return w=w|0,b(this,w,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w=w|0,b(this,this._shape[0],w),w},enumerable:!1}}),A.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},A.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var T=0;T<this.color.length;++T)this.color[T].dispose(),this.color[T]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function M(w,T,_,h){a||(a=w.FRAMEBUFFER_UNSUPPORTED,r=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,n=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=w.getExtension("WEBGL_draw_buffers");if(!i&&L&&c(w,L),Array.isArray(T)&&(h=_,_=T[1]|0,T=T[0]|0),typeof T!="number")throw new Error("gl-fbo: Missing shape parameter");var S=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(T<0||T>S||_<0||_>S)throw new Error("gl-fbo: Parameters are too large for FBO");h=h||{};var k=1;if("color"in h){if(k=Math.max(h.color|0,0),k<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(k>1)if(L){if(k>w.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+k+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=w.UNSIGNED_BYTE,O=w.getExtension("OES_texture_float");if(h.float&&k>0){if(!O)throw new Error("gl-fbo: Context does not support floating point textures");P=w.FLOAT}else h.preferFloat&&k>0&&O&&(P=w.FLOAT);var F=!0;"depth"in h&&(F=!!h.depth);var D=!1;return"stencil"in h&&(D=!!h.stencil),new g(w,T,_,P,k,F,D,L)}},{"gl-texture2d":146}],87:[function(s,m,x){var t=s("sprintf-js").sprintf,i=s("gl-constants/lookup"),a=s("glsl-shader-name"),r=s("add-line-numbers");m.exports=n;function n(f,l,o){var c=a(l)||"of unknown name (see npm glsl-shader-name)",v="unknown type";o!==void 0&&(v=o===i.FRAGMENT_SHADER?"fragment":"vertex");for(var d=t(`Error compiling %s shader %s:
`,v,c),p=t("%s%s",d,f),y=f.split(`
`),g={},A=0;A<y.length;A++){var b=y[A];if(!(b===""||b==="\0")){var M=parseInt(b.split(":")[2]);if(isNaN(M))throw new Error(t("Could not parse error: %s",b));g[M]=b}}for(var w=r(l).split(`
`),A=0;A<w.length;A++)if(!(!g[A+3]&&!g[A+2]&&!g[A+1])){var T=w[A];if(d+=T+`
`,g[A+1]){var _=g[A+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),d+=t(`^^^ %s

`,_)}}return{long:d.trim(),short:p.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(s,m,x){m.exports=v;var t=s("binary-search-bounds"),i=s("iota-array"),a=s("typedarray-pool"),r=s("gl-shader"),n=s("gl-buffer"),f=s("./lib/shaders");function l(d,p,y,g,A,b,M){this.plot=d,this.shader=p,this.pickShader=y,this.positionBuffer=g,this.weightBuffer=A,this.colorBuffer=b,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=l.prototype,c=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var d=[1,0,0,0,1,0,0,0,1];return function(){var p=this.plot,y=this.shader,g=this.bounds,A=this.numVertices;if(!(A<=0)){var b=p.gl,M=p.dataBox,w=g[2]-g[0],T=g[3]-g[1],_=M[2]-M[0],h=M[3]-M[1];d[0]=2*w/_,d[4]=2*T/h,d[6]=2*(g[0]-M[0])/_-1,d[7]=2*(g[1]-M[1])/h-1,y.bind();var L=y.uniforms;L.viewTransform=d,L.shape=this.shape;var S=y.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,A)}}}(),o.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0];return function(y){var g=this.plot,A=this.pickShader,b=this.bounds,M=this.numVertices;if(!(M<=0)){var w=g.gl,T=g.dataBox,_=b[2]-b[0],h=b[3]-b[1],L=T[2]-T[0],S=T[3]-T[1];d[0]=2*_/L,d[4]=2*h/S,d[6]=2*(b[0]-T[0])/L-1,d[7]=2*(b[1]-T[1])/S-1;for(var k=0;k<4;++k)p[k]=y>>k*8&255;this.pickOffset=y,A.bind();var P=A.uniforms;P.viewTransform=d,P.pickOffset=p,P.shape=this.shape;var O=A.attributes;return this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),O.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,M),y+this.shape[0]*this.shape[1]}}}(),o.pick=function(d,p,y){var g=this.pickOffset,A=this.shape[0]*this.shape[1];if(y<g||y>=g+A)return null;var b=y-g,M=this.xData,w=this.yData;return{object:this,pointId:b,dataCoord:[M[b%this.shape[0]],w[b/this.shape[0]|0]]}},o.update=function(d){d=d||{};var p=d.shape||[0,0],y=d.x||i(p[0]),g=d.y||i(p[1]),A=d.z||new Float32Array(p[0]*p[1]),b=d.zsmooth!==!1;this.xData=y,this.yData=g;var M=d.colorLevels||[0],w=d.colorValues||[0,0,0,1],T=M.length,_=this.bounds,h,L,S,k;b?(h=_[0]=y[0],L=_[1]=g[0],S=_[2]=y[y.length-1],k=_[3]=g[g.length-1]):(h=_[0]=y[0]+(y[1]-y[0])/2,L=_[1]=g[0]+(g[1]-g[0])/2,S=_[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,k=_[3]=g[g.length-1]+(g[g.length-1]-g[g.length-2])/2);var P=1/(S-h),O=1/(k-L),F=p[0],D=p[1];this.shape=[F,D];var R=(b?(F-1)*(D-1):F*D)*(c.length>>>1);this.numVertices=R;for(var U=a.mallocUint8(R*4),N=a.mallocFloat32(R*2),X=a.mallocUint8(R*2),j=a.mallocUint32(R),ee=0,q=b?F-1:F,G=b?D-1:D,J=0;J<G;++J){var le,fe;b?(le=O*(g[J]-L),fe=O*(g[J+1]-L)):(le=J<D-1?O*(g[J]-(g[J+1]-g[J])/2-L):O*(g[J]-(g[J]-g[J-1])/2-L),fe=J<D-1?O*(g[J]+(g[J+1]-g[J])/2-L):O*(g[J]+(g[J]-g[J-1])/2-L));for(var se=0;se<q;++se){var V,Y;b?(V=P*(y[se]-h),Y=P*(y[se+1]-h)):(V=se<F-1?P*(y[se]-(y[se+1]-y[se])/2-h):P*(y[se]-(y[se]-y[se-1])/2-h),Y=se<F-1?P*(y[se]+(y[se+1]-y[se])/2-h):P*(y[se]+(y[se]-y[se-1])/2-h));for(var ne=0;ne<c.length;ne+=2){var te=c[ne],K=c[ne+1],$=b?(J+K)*F+(se+te):J*F+se,ae=A[$],ie=t.le(M,ae),oe,ue,xe,he;if(ie<0)oe=w[0],ue=w[1],xe=w[2],he=w[3];else if(ie===T-1)oe=w[4*T-4],ue=w[4*T-3],xe=w[4*T-2],he=w[4*T-1];else{var me=(ae-M[ie])/(M[ie+1]-M[ie]),be=1-me,Ce=4*ie,Se=4*(ie+1);oe=be*w[Ce]+me*w[Se],ue=be*w[Ce+1]+me*w[Se+1],xe=be*w[Ce+2]+me*w[Se+2],he=be*w[Ce+3]+me*w[Se+3]}U[4*ee]=255*oe,U[4*ee+1]=255*ue,U[4*ee+2]=255*xe,U[4*ee+3]=255*he,N[2*ee]=V*.5+Y*.5,N[2*ee+1]=le*.5+fe*.5,X[2*ee]=te,X[2*ee+1]=K,j[ee]=J*F+se,ee+=1}}}this.positionBuffer.update(N),this.weightBuffer.update(X),this.colorBuffer.update(U),this.idBuffer.update(j),a.free(N),a.free(U),a.free(X),a.free(j)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function v(d,p){var y=d.gl,g=r(y,f.vertex,f.fragment),A=r(y,f.pickVertex,f.pickFragment),b=n(y),M=n(y),w=n(y),T=n(y),_=new l(d,g,A,b,M,w,T);return _.update(p),d.addObject(_),_}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(s,m,x){var t=s("glslify");m.exports={fragment:t([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];x.createShader=function(l){return i(l,a,r,null,f)},x.createPickShader=function(l){return i(l,a,n,null,f)}},{"gl-shader":132,glslify:231}],91:[function(s,m,x){m.exports=w;var t=s("gl-buffer"),i=s("gl-vao"),a=s("gl-texture2d"),r=new Uint8Array(4),n=new Float32Array(r.buffer);function f(T,_,h,L){return r[0]=L,r[1]=h,r[2]=_,r[3]=T,n[0]}var l=s("binary-search-bounds"),o=s("ndarray"),c=s("./lib/shaders"),v=c.createShader,d=c.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(T,_){for(var h=0,L=0;L<3;++L){var S=T[L]-_[L];h+=S*S}return Math.sqrt(h)}function g(T){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],h=0;h<3;++h)_[0][h]=Math.max(T[0][h],_[0][h]),_[1][h]=Math.min(T[1][h],_[1][h]);return _}function A(T,_,h,L){this.arcLength=T,this.position=_,this.index=h,this.dataCoordinate=L}function b(T,_,h,L,S,k){this.gl=T,this.shader=_,this.pickShader=h,this.buffer=L,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=k,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var M=b.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(T){this.pickId=T},M.drawTransparent=M.draw=function(T){if(!!this.vertexCount){var _=this.gl,h=this.shader,L=this.vao;h.bind(),h.uniforms={model:T.model||p,view:T.view||p,projection:T.projection||p,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.drawPick=function(T){if(!!this.vertexCount){var _=this.gl,h=this.pickShader,L=this.vao;h.bind(),h.uniforms={model:T.model||p,view:T.view||p,projection:T.projection||p,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.update=function(T){var _,h;this.dirty=!0;var L=!!T.connectGaps;"dashScale"in T&&(this.dashScale=T.dashScale),this.hasAlpha=!1,"opacity"in T&&(this.opacity=+T.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],k=[],P=[],O=0,F=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=T.position||T.positions;if(R){var U=T.color||T.colors||[0,0,0,1],N=T.lineWidth||1,X=!1;e:for(_=1;_<R.length;++_){var j=R[_-1],ee=R[_];for(k.push(O),P.push(j.slice()),h=0;h<3;++h){if(isNaN(j[h])||isNaN(ee[h])||!isFinite(j[h])||!isFinite(ee[h])){if(!L&&S.length>0){for(var q=0;q<24;++q)S.push(S[S.length-12]);F+=2,X=!0}continue e}D[0][h]=Math.min(D[0][h],j[h],ee[h]),D[1][h]=Math.max(D[1][h],j[h],ee[h])}var G,J;Array.isArray(U[0])?(G=U.length>_-1?U[_-1]:U.length>0?U[U.length-1]:[0,0,0,1],J=U.length>_?U[_]:U.length>0?U[U.length-1]:[0,0,0,1]):G=J=U,G.length===3&&(G=[G[0],G[1],G[2],1]),J.length===3&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&G[3]<1&&(this.hasAlpha=!0);var le;Array.isArray(N)?le=N.length>_-1?N[_-1]:N.length>0?N[N.length-1]:[0,0,0,1]:le=N;var fe=O;if(O+=y(j,ee),X){for(h=0;h<2;++h)S.push(j[0],j[1],j[2],ee[0],ee[1],ee[2],fe,le,G[0],G[1],G[2],G[3]);F+=2,X=!1}S.push(j[0],j[1],j[2],ee[0],ee[1],ee[2],fe,le,G[0],G[1],G[2],G[3],j[0],j[1],j[2],ee[0],ee[1],ee[2],fe,-le,G[0],G[1],G[2],G[3],ee[0],ee[1],ee[2],j[0],j[1],j[2],O,-le,J[0],J[1],J[2],J[3],ee[0],ee[1],ee[2],j[0],j[1],j[2],O,le,J[0],J[1],J[2],J[3]),F+=4}}if(this.buffer.update(S),k.push(O),P.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=F,this.points=P,this.arcLength=k,"dashes"in T){var se=T.dashes,V=se.slice();for(V.unshift(0),_=1;_<V.length;++_)V[_]=V[_-1]+V[_];var Y=o(new Array(256*4),[256,1,4]);for(_=0;_<256;++_){for(h=0;h<4;++h)Y.set(_,0,h,0);l.le(V,V[V.length-1]*_/255)&1?Y.set(_,0,0,0):Y.set(_,0,0,255)}this.texture.setPixels(Y)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(T){if(!T||T.id!==this.pickId)return null;var _=f(T.value[0],T.value[1],T.value[2],0),h=l.le(this.arcLength,_);if(h<0)return null;if(h===this.arcLength.length-1)return new A(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),h);for(var L=this.points[h],S=this.points[Math.min(h+1,this.points.length-1)],k=(_-this.arcLength[h])/(this.arcLength[h+1]-this.arcLength[h]),P=1-k,O=[0,0,0],F=0;F<3;++F)O[F]=P*L[F]+k*S[F];var D=Math.min(k<.5?h:h+1,this.points.length-1);return new A(_,O,D,this.points[D])};function w(T){var _=T.gl||T.scene&&T.scene.gl,h=v(_);h.attributes.position.location=0,h.attributes.nextPosition.location=1,h.attributes.arcLength.location=2,h.attributes.lineWidth.location=3,h.attributes.color.location=4;var L=d(_);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var S=t(_),k=i(_,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),P=o(new Array(256*4),[256,1,4]),O=0;O<256*4;++O)P.data[O]=255;var F=a(_,P);F.wrap=_.REPEAT;var D=new b(_,h,L,S,k,F);return D.update(T),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(s,m,x){m.exports=t;function t(i){var a=new Float32Array(16);return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}},{}],93:[function(s,m,x){m.exports=t;function t(){var i=new Float32Array(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],94:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2],f=i[3],l=i[4],o=i[5],c=i[6],v=i[7],d=i[8],p=i[9],y=i[10],g=i[11],A=i[12],b=i[13],M=i[14],w=i[15],T=a*o-r*l,_=a*c-n*l,h=a*v-f*l,L=r*c-n*o,S=r*v-f*o,k=n*v-f*c,P=d*b-p*A,O=d*M-y*A,F=d*w-g*A,D=p*M-y*b,R=p*w-g*b,U=y*w-g*M;return T*U-_*R+h*D+L*F-S*O+k*P}},{}],95:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0],n=a[1],f=a[2],l=a[3],o=r+r,c=n+n,v=f+f,d=r*o,p=n*o,y=n*c,g=f*o,A=f*c,b=f*v,M=l*o,w=l*c,T=l*v;return i[0]=1-y-b,i[1]=p+T,i[2]=g-w,i[3]=0,i[4]=p-T,i[5]=1-d-b,i[6]=A+M,i[7]=0,i[8]=g+w,i[9]=A-M,i[10]=1-d-y,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],96:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=a[3],c=n+n,v=f+f,d=l+l,p=n*c,y=n*v,g=n*d,A=f*v,b=f*d,M=l*d,w=o*c,T=o*v,_=o*d;return i[0]=1-(A+M),i[1]=y+_,i[2]=g-T,i[3]=0,i[4]=y-_,i[5]=1-(p+M),i[6]=b+w,i[7]=0,i[8]=g+T,i[9]=b-w,i[10]=1-(p+A),i[11]=0,i[12]=r[0],i[13]=r[1],i[14]=r[2],i[15]=1,i}},{}],97:[function(s,m,x){m.exports=t;function t(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],98:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0],n=a[1],f=a[2],l=a[3],o=a[4],c=a[5],v=a[6],d=a[7],p=a[8],y=a[9],g=a[10],A=a[11],b=a[12],M=a[13],w=a[14],T=a[15],_=r*c-n*o,h=r*v-f*o,L=r*d-l*o,S=n*v-f*c,k=n*d-l*c,P=f*d-l*v,O=p*M-y*b,F=p*w-g*b,D=p*T-A*b,R=y*w-g*M,U=y*T-A*M,N=g*T-A*w,X=_*N-h*U+L*R+S*D-k*F+P*O;return X?(X=1/X,i[0]=(c*N-v*U+d*R)*X,i[1]=(f*U-n*N-l*R)*X,i[2]=(M*P-w*k+T*S)*X,i[3]=(g*k-y*P-A*S)*X,i[4]=(v*D-o*N-d*F)*X,i[5]=(r*N-f*D+l*F)*X,i[6]=(w*L-b*P-T*h)*X,i[7]=(p*P-g*L+A*h)*X,i[8]=(o*U-c*D+d*O)*X,i[9]=(n*D-r*U-l*O)*X,i[10]=(b*k-M*L+T*_)*X,i[11]=(y*L-p*k-A*_)*X,i[12]=(c*F-o*R-v*O)*X,i[13]=(r*R-n*F+f*O)*X,i[14]=(M*h-b*S-w*_)*X,i[15]=(p*S-y*h+g*_)*X,i):null}},{}],99:[function(s,m,x){var t=s("./identity");m.exports=i;function i(a,r,n,f){var l,o,c,v,d,p,y,g,A,b,M=r[0],w=r[1],T=r[2],_=f[0],h=f[1],L=f[2],S=n[0],k=n[1],P=n[2];return Math.abs(M-S)<1e-6&&Math.abs(w-k)<1e-6&&Math.abs(T-P)<1e-6?t(a):(y=M-S,g=w-k,A=T-P,b=1/Math.sqrt(y*y+g*g+A*A),y*=b,g*=b,A*=b,l=h*A-L*g,o=L*y-_*A,c=_*g-h*y,b=Math.sqrt(l*l+o*o+c*c),b?(b=1/b,l*=b,o*=b,c*=b):(l=0,o=0,c=0),v=g*c-A*o,d=A*l-y*c,p=y*o-g*l,b=Math.sqrt(v*v+d*d+p*p),b?(b=1/b,v*=b,d*=b,p*=b):(v=0,d=0,p=0),a[0]=l,a[1]=v,a[2]=y,a[3]=0,a[4]=o,a[5]=d,a[6]=g,a[7]=0,a[8]=c,a[9]=p,a[10]=A,a[11]=0,a[12]=-(l*M+o*w+c*T),a[13]=-(v*M+d*w+p*T),a[14]=-(y*M+g*w+A*T),a[15]=1,a)}},{"./identity":97}],100:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=a[3],c=a[4],v=a[5],d=a[6],p=a[7],y=a[8],g=a[9],A=a[10],b=a[11],M=a[12],w=a[13],T=a[14],_=a[15],h=r[0],L=r[1],S=r[2],k=r[3];return i[0]=h*n+L*c+S*y+k*M,i[1]=h*f+L*v+S*g+k*w,i[2]=h*l+L*d+S*A+k*T,i[3]=h*o+L*p+S*b+k*_,h=r[4],L=r[5],S=r[6],k=r[7],i[4]=h*n+L*c+S*y+k*M,i[5]=h*f+L*v+S*g+k*w,i[6]=h*l+L*d+S*A+k*T,i[7]=h*o+L*p+S*b+k*_,h=r[8],L=r[9],S=r[10],k=r[11],i[8]=h*n+L*c+S*y+k*M,i[9]=h*f+L*v+S*g+k*w,i[10]=h*l+L*d+S*A+k*T,i[11]=h*o+L*p+S*b+k*_,h=r[12],L=r[13],S=r[14],k=r[15],i[12]=h*n+L*c+S*y+k*M,i[13]=h*f+L*v+S*g+k*w,i[14]=h*l+L*d+S*A+k*T,i[15]=h*o+L*p+S*b+k*_,i}},{}],101:[function(s,m,x){m.exports=t;function t(i,a,r,n,f,l,o){var c=1/(a-r),v=1/(n-f),d=1/(l-o);return i[0]=-2*c,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*v,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*d,i[11]=0,i[12]=(a+r)*c,i[13]=(f+n)*v,i[14]=(o+l)*d,i[15]=1,i}},{}],102:[function(s,m,x){m.exports=t;function t(i,a,r,n,f){var l=1/Math.tan(a/2),o=1/(n-f);return i[0]=l/r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=l,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(f+n)*o,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*f*n*o,i[15]=0,i}},{}],103:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=n[0],l=n[1],o=n[2],c=Math.sqrt(f*f+l*l+o*o),v,d,p,y,g,A,b,M,w,T,_,h,L,S,k,P,O,F,D,R,U,N,X,j;return Math.abs(c)<1e-6?null:(c=1/c,f*=c,l*=c,o*=c,v=Math.sin(r),d=Math.cos(r),p=1-d,y=a[0],g=a[1],A=a[2],b=a[3],M=a[4],w=a[5],T=a[6],_=a[7],h=a[8],L=a[9],S=a[10],k=a[11],P=f*f*p+d,O=l*f*p+o*v,F=o*f*p-l*v,D=f*l*p-o*v,R=l*l*p+d,U=o*l*p+f*v,N=f*o*p+l*v,X=l*o*p-f*v,j=o*o*p+d,i[0]=y*P+M*O+h*F,i[1]=g*P+w*O+L*F,i[2]=A*P+T*O+S*F,i[3]=b*P+_*O+k*F,i[4]=y*D+M*R+h*U,i[5]=g*D+w*R+L*U,i[6]=A*D+T*R+S*U,i[7]=b*D+_*R+k*U,i[8]=y*N+M*X+h*j,i[9]=g*N+w*X+L*j,i[10]=A*N+T*X+S*j,i[11]=b*N+_*X+k*j,a!==i&&(i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15]),i)}},{}],104:[function(s,m,x){m.exports=t;function t(i,a,r){var n=Math.sin(r),f=Math.cos(r),l=a[4],o=a[5],c=a[6],v=a[7],d=a[8],p=a[9],y=a[10],g=a[11];return a!==i&&(i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15]),i[4]=l*f+d*n,i[5]=o*f+p*n,i[6]=c*f+y*n,i[7]=v*f+g*n,i[8]=d*f-l*n,i[9]=p*f-o*n,i[10]=y*f-c*n,i[11]=g*f-v*n,i}},{}],105:[function(s,m,x){m.exports=t;function t(i,a,r){var n=Math.sin(r),f=Math.cos(r),l=a[0],o=a[1],c=a[2],v=a[3],d=a[8],p=a[9],y=a[10],g=a[11];return a!==i&&(i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15]),i[0]=l*f-d*n,i[1]=o*f-p*n,i[2]=c*f-y*n,i[3]=v*f-g*n,i[8]=l*n+d*f,i[9]=o*n+p*f,i[10]=c*n+y*f,i[11]=v*n+g*f,i}},{}],106:[function(s,m,x){m.exports=t;function t(i,a,r){var n=Math.sin(r),f=Math.cos(r),l=a[0],o=a[1],c=a[2],v=a[3],d=a[4],p=a[5],y=a[6],g=a[7];return a!==i&&(i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15]),i[0]=l*f+d*n,i[1]=o*f+p*n,i[2]=c*f+y*n,i[3]=v*f+g*n,i[4]=d*f-l*n,i[5]=p*f-o*n,i[6]=y*f-c*n,i[7]=g*f-v*n,i}},{}],107:[function(s,m,x){m.exports=t;function t(i,a,r){var n=r[0],f=r[1],l=r[2];return i[0]=a[0]*n,i[1]=a[1]*n,i[2]=a[2]*n,i[3]=a[3]*n,i[4]=a[4]*f,i[5]=a[5]*f,i[6]=a[6]*f,i[7]=a[7]*f,i[8]=a[8]*l,i[9]=a[9]*l,i[10]=a[10]*l,i[11]=a[11]*l,i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i}},{}],108:[function(s,m,x){m.exports=t;function t(i,a,r){var n=r[0],f=r[1],l=r[2],o,c,v,d,p,y,g,A,b,M,w,T;return a===i?(i[12]=a[0]*n+a[4]*f+a[8]*l+a[12],i[13]=a[1]*n+a[5]*f+a[9]*l+a[13],i[14]=a[2]*n+a[6]*f+a[10]*l+a[14],i[15]=a[3]*n+a[7]*f+a[11]*l+a[15]):(o=a[0],c=a[1],v=a[2],d=a[3],p=a[4],y=a[5],g=a[6],A=a[7],b=a[8],M=a[9],w=a[10],T=a[11],i[0]=o,i[1]=c,i[2]=v,i[3]=d,i[4]=p,i[5]=y,i[6]=g,i[7]=A,i[8]=b,i[9]=M,i[10]=w,i[11]=T,i[12]=o*n+p*f+b*l+a[12],i[13]=c*n+y*f+M*l+a[13],i[14]=v*n+g*f+w*l+a[14],i[15]=d*n+A*f+T*l+a[15]),i}},{}],109:[function(s,m,x){m.exports=t;function t(i,a){if(i===a){var r=a[1],n=a[2],f=a[3],l=a[6],o=a[7],c=a[11];i[1]=a[4],i[2]=a[8],i[3]=a[12],i[4]=r,i[6]=a[9],i[7]=a[13],i[8]=n,i[9]=l,i[11]=a[14],i[12]=f,i[13]=o,i[14]=c}else i[0]=a[0],i[1]=a[4],i[2]=a[8],i[3]=a[12],i[4]=a[1],i[5]=a[5],i[6]=a[9],i[7]=a[13],i[8]=a[2],i[9]=a[6],i[10]=a[10],i[11]=a[14],i[12]=a[3],i[13]=a[7],i[14]=a[11],i[15]=a[15];return i}},{}],110:[function(s,m,x){var t=s("barycentric"),i=s("polytope-closest-point/lib/closest_point_2d.js");m.exports=l;function a(o,c){for(var v=[0,0,0,0],d=0;d<4;++d)for(var p=0;p<4;++p)v[p]+=o[4*d+p]*c[d];return v}function r(o,c,v,d,p){for(var y=a(d,a(v,a(c,[o[0],o[1],o[2],1]))),g=0;g<3;++g)y[g]/=y[3];return[.5*p[0]*(1+y[0]),.5*p[1]*(1-y[1])]}function n(o,c){if(o.length===2){for(var v=0,d=0,p=0;p<2;++p)v+=Math.pow(c[p]-o[0][p],2),d+=Math.pow(c[p]-o[1][p],2);return v=Math.sqrt(v),d=Math.sqrt(d),v+d<1e-6?[1,0]:[d/(v+d),v/(d+v)]}else if(o.length===3){var y=[0,0];return i(o[0],o[1],o[2],c,y),t(o,y)}return[]}function f(o,c){for(var v=[0,0,0],d=0;d<o.length;++d)for(var p=o[d],y=c[d],g=0;g<3;++g)v[g]+=y*p[g];return v}function l(o,c,v,d,p,y){if(o.length===1)return[0,o[0].slice()];for(var g=new Array(o.length),A=0;A<o.length;++A)g[A]=r(o[A],v,d,p,y);for(var b=0,M=1/0,A=0;A<g.length;++A){for(var w=0,T=0;T<2;++T)w+=Math.pow(g[A][T]-c[T],2);w<M&&(M=w,b=A)}for(var _=n(g,c),h=0,A=0;A<3;++A){if(_[A]<-.001||_[A]>1.0001)return null;h+=_[A]}return Math.abs(h-1)>.001?null:[b,f(o,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(s,m,x){var t=s("glslify"),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),a=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),l=t([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),c=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),v=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),p=t([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);x.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.wireShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.pointShader={vertex:f,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},x.pickShader={vertex:o,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},x.pointPickShader={vertex:v,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},x.contourShader={vertex:d,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(s,m,x){var t=1e-6,i=1e-6,a=s("gl-shader"),r=s("gl-buffer"),n=s("gl-vao"),f=s("gl-texture2d"),l=s("normals"),o=s("gl-mat4/multiply"),c=s("gl-mat4/invert"),v=s("ndarray"),d=s("colormap"),p=s("simplicial-complex-contour"),y=s("typedarray-pool"),g=s("./lib/shaders"),A=s("./lib/closest-point"),b=g.meshShader,M=g.wireShader,w=g.pointShader,T=g.pickShader,_=g.pointPickShader,h=g.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(q,G,J,le,fe,se,V,Y,ne,te,K,$,ae,ie,oe,ue,xe,he,me,be,Ce,Se,Be,Ye,Xe,Te,Ie){this.gl=q,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=G,this.dirty=!0,this.triShader=J,this.lineShader=le,this.pointShader=fe,this.pickShader=se,this.pointPickShader=V,this.contourShader=Y,this.trianglePositions=ne,this.triangleColors=K,this.triangleNormals=ae,this.triangleUVs=$,this.triangleIds=te,this.triangleVAO=ie,this.triangleCount=0,this.lineWidth=1,this.edgePositions=oe,this.edgeColors=xe,this.edgeUVs=he,this.edgeIds=ue,this.edgeVAO=me,this.edgeCount=0,this.pointPositions=be,this.pointColors=Se,this.pointUVs=Be,this.pointSizes=Ye,this.pointIds=Ce,this.pointVAO=Xe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Te,this.contourVAO=Ie,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var k=S.prototype;k.isOpaque=function(){return!this.hasAlpha},k.isTransparent=function(){return this.hasAlpha},k.pickSlots=1,k.setPickBase=function(q){this.pickId=q};function P(q,G){if(!G||!G.length)return 1;for(var J=0;J<G.length;++J){if(G.length<2)return 1;if(G[J][0]===q)return G[J][1];if(G[J][0]>q&&J>0){var le=(G[J][0]-q)/(G[J][0]-G[J-1][0]);return G[J][1]*(1-le)+le*G[J-1][1]}}return 1}function O(q,G){for(var J=d({colormap:q,nshades:256,format:"rgba"}),le=new Uint8Array(256*4),fe=0;fe<256;++fe){for(var se=J[fe],V=0;V<3;++V)le[4*fe+V]=se[V];G?le[4*fe+3]=255*P(fe/255,G):le[4*fe+3]=255*se[3]}return v(le,[256,256,4],[4,0,1])}function F(q){for(var G=q.length,J=new Array(G),le=0;le<G;++le)J[le]=q[le][2];return J}k.highlight=function(q){if(!q||!this.contourEnable){this.contourCount=0;return}for(var G=p(this.cells,this.intensity,q.intensity),J=G.cells,le=G.vertexIds,fe=G.vertexWeights,se=J.length,V=y.mallocFloat32(2*3*se),Y=0,ne=0;ne<se;++ne)for(var te=J[ne],K=0;K<2;++K){var $=te[0];te.length===2&&($=te[K]);for(var ae=le[$][0],ie=le[$][1],oe=fe[$],ue=1-oe,xe=this.positions[ae],he=this.positions[ie],me=0;me<3;++me)V[Y++]=oe*xe[me]+ue*he[me]}this.contourCount=Y/3|0,this.contourPositions.update(V.subarray(0,Y)),y.free(V)},k.update=function(q){q=q||{};var G=this.gl;this.dirty=!0,"contourEnable"in q&&(this.contourEnable=q.contourEnable),"contourColor"in q&&(this.contourColor=q.contourColor),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"lightPosition"in q&&(this.lightPosition=q.lightPosition),this.hasAlpha=!1,"opacity"in q&&(this.opacity=q.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in q&&(this.opacityscale=q.opacityscale,this.hasAlpha=!0),"ambient"in q&&(this.ambientLight=q.ambient),"diffuse"in q&&(this.diffuseLight=q.diffuse),"specular"in q&&(this.specularLight=q.specular),"roughness"in q&&(this.roughness=q.roughness),"fresnel"in q&&(this.fresnel=q.fresnel),q.texture?(this.texture.dispose(),this.texture=f(G,q.texture)):q.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=G.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=G.LINEAR,this.texture.setPixels(O(q.colormap,this.opacityscale)),this.texture.generateMipmap());var J=q.cells,le=q.positions;if(!le||!J)return;var fe=[],se=[],V=[],Y=[],ne=[],te=[],K=[],$=[],ae=[],ie=[],oe=[],ue=[],xe=[],he=[];this.cells=J,this.positions=le;var me=q.vertexNormals,be=q.cellNormals,Ce=q.vertexNormalsEpsilon===void 0?t:q.vertexNormalsEpsilon,Se=q.faceNormalsEpsilon===void 0?i:q.faceNormalsEpsilon;q.useFacetNormals&&!be&&(be=l.faceNormals(J,le,Se)),!be&&!me&&(me=l.vertexNormals(J,le,Ce));var Be=q.vertexColors,Ye=q.cellColors,Xe=q.meshColor||[1,1,1,1],Te=q.vertexUVs,Ie=q.vertexIntensity,Ze=q.cellUVs,rt=q.cellIntensity,Ge=1/0,ze=-1/0;if(!Te&&!Ze)if(Ie)if(q.vertexIntensityBounds)Ge=+q.vertexIntensityBounds[0],ze=+q.vertexIntensityBounds[1];else for(var We=0;We<Ie.length;++We){var mt=Ie[We];Ge=Math.min(Ge,mt),ze=Math.max(ze,mt)}else if(rt)if(q.cellIntensityBounds)Ge=+q.cellIntensityBounds[0],ze=+q.cellIntensityBounds[1];else for(var We=0;We<rt.length;++We){var mt=rt[We];Ge=Math.min(Ge,mt),ze=Math.max(ze,mt)}else for(var We=0;We<le.length;++We){var mt=le[We][2];Ge=Math.min(Ge,mt),ze=Math.max(ze,mt)}Ie?this.intensity=Ie:rt?this.intensity=rt:this.intensity=F(le),this.pickVertex=!(rt||Ye);var Ft=q.pointSizes,Xt=q.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var We=0;We<le.length;++We)for(var Pt=le[We],Ut=0;Ut<3;++Ut)isNaN(Pt[Ut])||!isFinite(Pt[Ut])||(this.bounds[0][Ut]=Math.min(this.bounds[0][Ut],Pt[Ut]),this.bounds[1][Ut]=Math.max(this.bounds[1][Ut],Pt[Ut]));var Gt=0,It=0,Ct=0;e:for(var We=0;We<J.length;++We){var lt=J[We];switch(lt.length){case 1:for(var dt=lt[0],Pt=le[dt],Ut=0;Ut<3;++Ut)if(isNaN(Pt[Ut])||!isFinite(Pt[Ut]))continue e;ie.push(Pt[0],Pt[1],Pt[2]);var et;Be?et=Be[dt]:Ye?et=Ye[We]:et=Xe,this.opacityscale&&Ie?se.push(et[0],et[1],et[2],this.opacity*P((Ie[dt]-Ge)/(ze-Ge),this.opacityscale)):et.length===3?oe.push(et[0],et[1],et[2],this.opacity):(oe.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0));var Pe;Te?Pe=Te[dt]:Ie?Pe=[(Ie[dt]-Ge)/(ze-Ge),0]:Ze?Pe=Ze[We]:rt?Pe=[(rt[We]-Ge)/(ze-Ge),0]:Pe=[(Pt[2]-Ge)/(ze-Ge),0],ue.push(Pe[0],Pe[1]),Ft?xe.push(Ft[dt]):xe.push(Xt),he.push(We),Ct+=1;break;case 2:for(var Ut=0;Ut<2;++Ut)for(var dt=lt[Ut],Pt=le[dt],Je=0;Je<3;++Je)if(isNaN(Pt[Je])||!isFinite(Pt[Je]))continue e;for(var Ut=0;Ut<2;++Ut){var dt=lt[Ut],Pt=le[dt];te.push(Pt[0],Pt[1],Pt[2]);var et;Be?et=Be[dt]:Ye?et=Ye[We]:et=Xe,this.opacityscale&&Ie?se.push(et[0],et[1],et[2],this.opacity*P((Ie[dt]-Ge)/(ze-Ge),this.opacityscale)):et.length===3?K.push(et[0],et[1],et[2],this.opacity):(K.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0));var Pe;Te?Pe=Te[dt]:Ie?Pe=[(Ie[dt]-Ge)/(ze-Ge),0]:Ze?Pe=Ze[We]:rt?Pe=[(rt[We]-Ge)/(ze-Ge),0]:Pe=[(Pt[2]-Ge)/(ze-Ge),0],$.push(Pe[0],Pe[1]),ae.push(We)}It+=1;break;case 3:for(var Ut=0;Ut<3;++Ut)for(var dt=lt[Ut],Pt=le[dt],Je=0;Je<3;++Je)if(isNaN(Pt[Je])||!isFinite(Pt[Je]))continue e;for(var Ut=0;Ut<3;++Ut){var dt=lt[2-Ut],Pt=le[dt];fe.push(Pt[0],Pt[1],Pt[2]);var et;Be?et=Be[dt]:Ye?et=Ye[We]:et=Xe,et?this.opacityscale&&Ie?se.push(et[0],et[1],et[2],this.opacity*P((Ie[dt]-Ge)/(ze-Ge),this.opacityscale)):et.length===3?se.push(et[0],et[1],et[2],this.opacity):(se.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)):se.push(.5,.5,.5,1);var Pe;Te?Pe=Te[dt]:Ie?Pe=[(Ie[dt]-Ge)/(ze-Ge),0]:Ze?Pe=Ze[We]:rt?Pe=[(rt[We]-Ge)/(ze-Ge),0]:Pe=[(Pt[2]-Ge)/(ze-Ge),0],Y.push(Pe[0],Pe[1]);var it;me?it=me[dt]:it=be[We],V.push(it[0],it[1],it[2]),ne.push(We)}Gt+=1;break}}this.pointCount=Ct,this.edgeCount=It,this.triangleCount=Gt,this.pointPositions.update(ie),this.pointColors.update(oe),this.pointUVs.update(ue),this.pointSizes.update(xe),this.pointIds.update(new Uint32Array(he)),this.edgePositions.update(te),this.edgeColors.update(K),this.edgeUVs.update($),this.edgeIds.update(new Uint32Array(ae)),this.trianglePositions.update(fe),this.triangleColors.update(se),this.triangleUVs.update(Y),this.triangleNormals.update(V),this.triangleIds.update(new Uint32Array(ne))},k.drawTransparent=k.draw=function(q){q=q||{};for(var G=this.gl,J=q.model||L,le=q.view||L,fe=q.projection||L,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)se[0][V]=Math.max(se[0][V],this.clipBounds[0][V]),se[1][V]=Math.min(se[1][V],this.clipBounds[1][V]);var Y={model:J,view:le,projection:fe,inverseModel:L.slice(),clipBounds:se,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Y.inverseModel=c(Y.inverseModel,Y.model),G.disable(G.CULL_FACE),this.texture.bind(0);var ne=new Array(16);o(ne,Y.view,Y.model),o(ne,Y.projection,ne),c(ne,ne);for(var V=0;V<3;++V)Y.eyePosition[V]=ne[12+V]/ne[15];for(var te=ne[15],V=0;V<3;++V)te+=this.lightPosition[V]*ne[4*V+3];for(var V=0;V<3;++V){for(var K=ne[12+V],$=0;$<3;++$)K+=ne[4*$+V]*this.lightPosition[$];Y.lightPosition[V]=K/te}if(this.triangleCount>0){var ae=this.triShader;ae.bind(),ae.uniforms=Y,this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ae=this.lineShader;ae.bind(),ae.uniforms=Y,this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ae=this.pointShader;ae.bind(),ae.uniforms=Y,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ae=this.contourShader;ae.bind(),ae.uniforms=Y,this.contourVAO.bind(),G.drawArrays(G.LINES,0,this.contourCount),this.contourVAO.unbind()}},k.drawPick=function(q){q=q||{};for(var G=this.gl,J=q.model||L,le=q.view||L,fe=q.projection||L,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)se[0][V]=Math.max(se[0][V],this.clipBounds[0][V]),se[1][V]=Math.min(se[1][V],this.clipBounds[1][V]);this._model=[].slice.call(J),this._view=[].slice.call(le),this._projection=[].slice.call(fe),this._resolution=[G.drawingBufferWidth,G.drawingBufferHeight];var Y={model:J,view:le,projection:fe,clipBounds:se,pickId:this.pickId/255},ne=this.pickShader;if(ne.bind(),ne.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ne=this.pointPickShader;ne.bind(),ne.uniforms=Y,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind()}},k.pick=function(q){if(!q||q.id!==this.pickId)return null;for(var G=q.value[0]+256*q.value[1]+65536*q.value[2],J=this.cells[G],le=this.positions,fe=new Array(J.length),se=0;se<J.length;++se)fe[se]=le[J[se]];var V=q.coord[0],Y=q.coord[1];if(!this.pickVertex){var ne=this.positions[J[0]],te=this.positions[J[1]],K=this.positions[J[2]],$=[(ne[0]+te[0]+K[0])/3,(ne[1]+te[1]+K[1])/3,(ne[2]+te[2]+K[2])/3];return{_cellCenter:!0,position:[V,Y],index:G,cell:J,cellId:G,intensity:this.intensity[G],dataCoordinate:$}}var ae=A(fe,[V*this.pixelRatio,this._resolution[1]-Y*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ae)return null;for(var ie=ae[2],oe=0,se=0;se<J.length;++se)oe+=ie[se]*this.intensity[J[se]];return{position:ae[1],index:J[ae[0]],cell:J,cellId:G,intensity:oe,dataCoordinate:this.positions[J[ae[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(q){var G=a(q,b.vertex,b.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.normal.location=4,G}function R(q){var G=a(q,M.vertex,M.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G}function U(q){var G=a(q,w.vertex,w.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.pointSize.location=4,G}function N(q){var G=a(q,T.vertex,T.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G}function X(q){var G=a(q,_.vertex,_.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G.attributes.pointSize.location=4,G}function j(q){var G=a(q,h.vertex,h.fragment);return G.attributes.position.location=0,G}function ee(q,G){arguments.length===1&&(G=q,q=G.gl);var J=q.getExtension("OES_standard_derivatives")||q.getExtension("MOZ_OES_standard_derivatives")||q.getExtension("WEBKIT_OES_standard_derivatives");if(!J)throw new Error("derivatives not supported");var le=D(q),fe=R(q),se=U(q),V=N(q),Y=X(q),ne=j(q),te=f(q,v(new Uint8Array([255,255,255,255]),[1,1,4]));te.generateMipmap(),te.minFilter=q.LINEAR_MIPMAP_LINEAR,te.magFilter=q.LINEAR;var K=r(q),$=r(q),ae=r(q),ie=r(q),oe=r(q),ue=n(q,[{buffer:K,type:q.FLOAT,size:3},{buffer:oe,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:$,type:q.FLOAT,size:4},{buffer:ae,type:q.FLOAT,size:2},{buffer:ie,type:q.FLOAT,size:3}]),xe=r(q),he=r(q),me=r(q),be=r(q),Ce=n(q,[{buffer:xe,type:q.FLOAT,size:3},{buffer:be,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:he,type:q.FLOAT,size:4},{buffer:me,type:q.FLOAT,size:2}]),Se=r(q),Be=r(q),Ye=r(q),Xe=r(q),Te=r(q),Ie=n(q,[{buffer:Se,type:q.FLOAT,size:3},{buffer:Te,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Be,type:q.FLOAT,size:4},{buffer:Ye,type:q.FLOAT,size:2},{buffer:Xe,type:q.FLOAT,size:1}]),Ze=r(q),rt=n(q,[{buffer:Ze,type:q.FLOAT,size:3}]),Ge=new S(q,te,le,fe,se,V,Y,ne,K,oe,$,ae,ie,ue,xe,be,he,me,Ce,Se,Te,Be,Ye,Xe,Ie,Ze,rt);return Ge.update(G),Ge}m.exports=ee},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(s,m,x){m.exports=f;var t=s("gl-buffer"),i=s("gl-shader"),a=s("./shaders");function r(l,o,c){this.plot=l,this.vbo=o,this.shader=c}var n=r.prototype;n.bind=function(){var l=this.shader;this.vbo.bind(),this.shader.bind(),l.attributes.coord.pointer(),l.uniforms.screenBox=this.plot.screenBox},n.drawBox=function(){var l=[0,0],o=[0,0];return function(c,v,d,p,y){var g=this.plot,A=this.shader,b=g.gl;l[0]=c,l[1]=v,o[0]=d,o[1]=p,A.uniforms.lo=l,A.uniforms.hi=o,A.uniforms.color=y,b.drawArrays(b.TRIANGLE_STRIP,0,4)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(l){var o=l.gl,c=t(o,[0,0,0,1,1,0,1,1]),v=i(o,a.boxVert,a.lineFrag);return new r(l,c,v)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(s,m,x){m.exports=o;var t=s("gl-buffer"),i=s("gl-shader"),a=s("binary-search-bounds"),r=s("./shaders");function n(c,v,d,p){this.plot=c,this.vbo=v,this.shader=d,this.tickShader=p,this.ticks=[[],[]]}function f(c,v){return c-v}var l=n.prototype;l.draw=function(){var c=[0,0],v=[0,0],d=[0,0];return function(){for(var p=this.plot,y=this.vbo,g=this.shader,A=this.ticks,b=p.gl,M=p._tickBounds,w=p.dataBox,T=p.viewBox,_=p.gridLineWidth,h=p.gridLineColor,L=p.gridLineEnable,S=p.pixelRatio,k=0;k<2;++k){var P=M[k],O=M[k+2],F=O-P,D=.5*(w[k+2]+w[k]),R=w[k+2]-w[k];v[k]=2*F/R,c[k]=2*(P-D)/R}g.bind(),y.bind(),g.attributes.dataCoord.pointer(),g.uniforms.dataShift=c,g.uniforms.dataScale=v;for(var U=0,k=0;k<2;++k){d[0]=d[1]=0,d[k]=1,g.uniforms.dataAxis=d,g.uniforms.lineWidth=_[k]/(T[k+2]-T[k])*S,g.uniforms.color=h[k];var N=A[k].length*6;L[k]&&N&&b.drawArrays(b.TRIANGLES,U,N),U+=N}}}(),l.drawTickMarks=function(){var c=[0,0],v=[0,0],d=[1,0],p=[0,1],y=[0,0],g=[0,0];return function(){for(var A=this.plot,b=this.vbo,M=this.tickShader,w=this.ticks,T=A.gl,_=A._tickBounds,h=A.dataBox,L=A.viewBox,S=A.pixelRatio,k=A.screenBox,P=k[2]-k[0],O=k[3]-k[1],F=L[2]-L[0],D=L[3]-L[1],R=0;R<2;++R){var U=_[R],N=_[R+2],X=N-U,j=.5*(h[R+2]+h[R]),ee=h[R+2]-h[R];v[R]=2*X/ee,c[R]=2*(U-j)/ee}v[0]*=F/P,c[0]*=F/P,v[1]*=D/O,c[1]*=D/O,M.bind(),b.bind(),M.attributes.dataCoord.pointer();var q=M.uniforms;q.dataShift=c,q.dataScale=v;var G=A.tickMarkLength,J=A.tickMarkWidth,le=A.tickMarkColor,fe=0,se=w[0].length*6,V=Math.min(a.ge(w[0],(h[0]-_[0])/(_[2]-_[0]),f),w[0].length),Y=Math.min(a.gt(w[0],(h[2]-_[0])/(_[2]-_[0]),f),w[0].length),ne=fe+6*V,te=6*Math.max(0,Y-V),K=Math.min(a.ge(w[1],(h[1]-_[1])/(_[3]-_[1]),f),w[1].length),$=Math.min(a.gt(w[1],(h[3]-_[1])/(_[3]-_[1]),f),w[1].length),ae=se+6*K,ie=6*Math.max(0,$-K);y[0]=2*(L[0]-G[1])/P-1,y[1]=(L[3]+L[1])/O-1,g[0]=G[1]*S/P,g[1]=J[1]*S/O,ie&&(q.color=le[1],q.tickScale=g,q.dataAxis=p,q.screenOffset=y,T.drawArrays(T.TRIANGLES,ae,ie)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[1]-G[0])/O-1,g[0]=J[0]*S/P,g[1]=G[0]*S/O,te&&(q.color=le[0],q.tickScale=g,q.dataAxis=d,q.screenOffset=y,T.drawArrays(T.TRIANGLES,ne,te)),y[0]=2*(L[2]+G[3])/P-1,y[1]=(L[3]+L[1])/O-1,g[0]=G[3]*S/P,g[1]=J[3]*S/O,ie&&(q.color=le[3],q.tickScale=g,q.dataAxis=p,q.screenOffset=y,T.drawArrays(T.TRIANGLES,ae,ie)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[3]+G[2])/O-1,g[0]=J[2]*S/P,g[1]=G[2]*S/O,te&&(q.color=le[2],q.tickScale=g,q.dataAxis=d,q.screenOffset=y,T.drawArrays(T.TRIANGLES,ne,te))}}(),l.update=function(){var c=[1,1,-1,-1,1,-1],v=[1,-1,1,1,-1,-1];return function(d){var p=d.ticks,y=d.bounds,g=new Float32Array(6*3*(p[0].length+p[1].length));this.plot.zeroLineEnable;for(var A=0,b=[[],[]],M=0;M<2;++M)for(var w=b[M],T=p[M],_=y[M],h=y[M+2],L=0;L<T.length;++L){var S=(T[L].x-_)/(h-_);w.push(S);for(var k=0;k<6;++k)g[A++]=S,g[A++]=c[k],g[A++]=v[k]}this.ticks=b,this.vbo.update(g)}}(),l.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(c){var v=c.gl,d=t(v),p=i(v,r.gridVert,r.gridFrag),y=i(v,r.tickVert,r.gridFrag),g=new n(c,d,p,y);return g}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(s,m,x){m.exports=f;var t=s("gl-buffer"),i=s("gl-shader"),a=s("./shaders");function r(l,o,c){this.plot=l,this.vbo=o,this.shader=c}var n=r.prototype;n.bind=function(){var l=this.shader;this.vbo.bind(),this.shader.bind(),l.attributes.coord.pointer(),l.uniforms.screenBox=this.plot.screenBox},n.drawLine=function(){var l=[0,0],o=[0,0];return function(c,v,d,p,y,g){var A=this.plot,b=this.shader,M=A.gl;l[0]=c,l[1]=v,o[0]=d,o[1]=p,b.uniforms.start=l,b.uniforms.end=o,b.uniforms.width=y*A.pixelRatio,b.uniforms.color=g,M.drawArrays(M.TRIANGLE_STRIP,0,4)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(l){var o=l.gl,c=t(o,[-1,-1,-1,1,1,-1,1,1]),v=i(o,a.lineVert,a.lineFrag),d=new r(l,c,v);return d}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(s,m,x){var t=s("glslify"),i=t([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);m.exports={lineVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:i,textVert:t([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:i,gridVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:i,boxVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(s,m,x){m.exports=o;var t=s("gl-buffer"),i=s("gl-shader"),a=s("text-cache"),r=s("binary-search-bounds"),n=s("./shaders");function f(c,v,d){this.plot=c,this.vbo=v,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var l=f.prototype;l.drawTicks=function(){var c=[0,0],v=[0,0],d=[0,0];return function(p){var y=this.plot,g=this.shader,A=this.tickX[p],b=this.tickOffset[p],M=y.gl,w=y.viewBox,T=y.dataBox,_=y.screenBox,h=y.pixelRatio,L=y.tickEnable,S=y.tickPad,k=y.tickColor,P=y.tickAngle,O=y.labelEnable,F=y.labelPad,D=y.labelColor,R=y.labelAngle,U=this.labelOffset[p],N=this.labelCount[p],X=r.lt(A,T[p]),j=r.le(A,T[p+2]);c[0]=c[1]=0,c[p]=1,v[p]=(w[2+p]+w[p])/(_[2+p]-_[p])-1;var ee=2/_[2+(p^1)]-_[p^1];v[p^1]=ee*w[p^1]-1,L[p]&&(v[p^1]-=ee*h*S[p],X<j&&b[j]>b[X]&&(g.uniforms.dataAxis=c,g.uniforms.screenOffset=v,g.uniforms.color=k[p],g.uniforms.angle=P[p],M.drawArrays(M.TRIANGLES,b[X],b[j]-b[X]))),O[p]&&N&&(v[p^1]-=ee*h*F[p],g.uniforms.dataAxis=d,g.uniforms.screenOffset=v,g.uniforms.color=D[p],g.uniforms.angle=R[p],M.drawArrays(M.TRIANGLES,U,N)),v[p^1]=ee*w[2+(p^1)]-1,L[p+2]&&(v[p^1]+=ee*h*S[p+2],X<j&&b[j]>b[X]&&(g.uniforms.dataAxis=c,g.uniforms.screenOffset=v,g.uniforms.color=k[p+2],g.uniforms.angle=P[p+2],M.drawArrays(M.TRIANGLES,b[X],b[j]-b[X]))),O[p+2]&&N&&(v[p^1]+=ee*h*F[p+2],g.uniforms.dataAxis=d,g.uniforms.screenOffset=v,g.uniforms.color=D[p+2],g.uniforms.angle=R[p+2],M.drawArrays(M.TRIANGLES,U,N))}}(),l.drawTitle=function(){var c=[0,0],v=[0,0];return function(){var d=this.plot,p=this.shader,y=d.gl,g=d.screenBox,A=d.titleCenter,b=d.titleAngle,M=d.titleColor,w=d.pixelRatio;if(!!this.titleCount){for(var T=0;T<2;++T)v[T]=2*(A[T]*w-g[T])/(g[2+T]-g[T])-1;p.bind(),p.uniforms.dataAxis=c,p.uniforms.screenOffset=v,p.uniforms.angle=b,p.uniforms.color=M,y.drawArrays(y.TRIANGLES,this.titleOffset,this.titleCount)}}}(),l.bind=function(){var c=[0,0],v=[0,0],d=[0,0];return function(){var p=this.plot,y=this.shader,g=p._tickBounds,A=p.dataBox,b=p.screenBox,M=p.viewBox;y.bind();for(var w=0;w<2;++w){var T=g[w],_=g[w+2],h=_-T,L=.5*(A[w+2]+A[w]),S=A[w+2]-A[w],k=M[w],P=M[w+2],O=P-k,F=b[w],D=b[w+2],R=D-F;v[w]=2*h/S*O/R,c[w]=2*(T-L)/S*O/R}d[1]=2*p.pixelRatio/(b[3]-b[1]),d[0]=d[1]*(b[3]-b[1])/(b[2]-b[0]),y.uniforms.dataScale=v,y.uniforms.dataShift=c,y.uniforms.textScale=d,this.vbo.bind(),y.attributes.textCoordinate.pointer()}}(),l.update=function(c){var v=[],d=c.ticks,p=c.bounds,y,g,A,b,M;for(M=0;M<2;++M){var w=[Math.floor(v.length/3)],T=[-1/0],_=d[M];for(y=0;y<_.length;++y){var h=_[y],L=h.x,S=h.text,k=h.font||"sans-serif";b=h.fontSize||12;for(var P=1/(p[M+2]-p[M]),O=p[M],F=S.split(`
`),D=0;D<F.length;D++)for(A=a(k,F[D]).data,g=0;g<A.length;g+=2)v.push(A[g]*b,-A[g+1]*b-D*b*1.2,(L-O)*P);w.push(Math.floor(v.length/3)),T.push(L)}this.tickOffset[M]=w,this.tickX[M]=T}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(v.length/3),A=a(c.labelFont[M],c.labels[M],{textAlign:"center"}).data,b=c.labelSize[M],y=0;y<A.length;y+=2)v.push(A[y]*b,-A[y+1]*b,0);this.labelCount[M]=Math.floor(v.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(v.length/3),A=a(c.titleFont,c.title).data,b=c.titleSize,y=0;y<A.length;y+=2)v.push(A[y]*b,-A[y+1]*b,0);this.titleCount=Math.floor(v.length/3)-this.titleOffset,this.vbo.update(v)},l.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(c){var v=c.gl,d=t(v),p=i(v,n.textVert,n.textFrag),y=new f(c,d,p);return y}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(s,m,x){m.exports=v;var t=s("gl-select-static"),i=s("./lib/grid"),a=s("./lib/text"),r=s("./lib/line"),n=s("./lib/box");function f(d,p){this.gl=d,this.pickBuffer=p,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var l=f.prototype;l.setDirty=function(){this.dirty=this.pickDirty=!0},l.setOverlayDirty=function(){this.dirty=!0},l.nextDepthValue=function(){return this._depthCounter++/65536},l.draw=function(){return function(){var d=this.gl,p=this.screenBox,y=this.viewBox,g=this.dataBox,A=this.pixelRatio,b=this.grid,M=this.line,w=this.text,T=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]);var _=this.borderColor;d.clearColor(_[0]*_[3],_[1]*_[3],_[2]*_[3],_[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),d.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var h=this.backgroundColor;d.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),d.clear(d.COLOR_BUFFER_BIT),b.draw();var L=this.zeroLineEnable,S=this.zeroLineColor,k=this.zeroLineWidth;if(L[0]||L[1]){M.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(g[P]<=0&&g[P+2]>=0))){var O=p[P]-g[P]*(p[P+2]-p[P])/(g[P+2]-g[P]);P===0?M.drawLine(O,p[1],O,p[3],k[P],S[P]):M.drawLine(p[0],O,p[2],O,k[P],S[P])}}for(var P=0;P<T.length;++P)T[P].draw();d.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]),d.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),this.grid.drawTickMarks(),M.bind();var F=this.borderLineEnable,D=this.borderLineWidth,R=this.borderLineColor;F[1]&&M.drawLine(y[0],y[1]-.5*D[1]*A,y[0],y[3]+.5*D[3]*A,D[1],R[1]),F[0]&&M.drawLine(y[0]-.5*D[0]*A,y[1],y[2]+.5*D[2]*A,y[1],D[0],R[0]),F[3]&&M.drawLine(y[2],y[1]-.5*D[1]*A,y[2],y[3]+.5*D[3]*A,D[3],R[3]),F[2]&&M.drawLine(y[0]-.5*D[0]*A,y[3],y[2]+.5*D[2]*A,y[3],D[2],R[2]),w.bind();for(var P=0;P<2;++P)w.drawTicks(P);this.titleEnable&&w.drawTitle();for(var U=this.overlays,P=0;P<U.length;++P)U[P].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}}}(),l.drawPick=function(){return function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var p=1,y=this.objects,g=0;g<y.length;++g)p=y[g].drawPick(p);d.end()}}}(),l.pick=function(){return function(d,p){if(!this.static){var y=this.pixelRatio,g=this.pickPixelRatio,A=this.viewBox,b=Math.round((d-A[0]/y)*g)|0,M=Math.round((p-A[1]/y)*g)|0,w=this.pickBuffer.query(b,M,this.pickRadius);if(!w)return null;for(var T=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),_=this.objects,h=0;h<_.length;++h){var L=_[h].pick(b,M,T);if(L)return L}return null}}}();function o(d){for(var p=d.slice(),y=0;y<p.length;++y)p[y]=p[y].slice();return p}function c(d,p){return d.x-p.x}l.setScreenBox=function(d){var p=this.screenBox,y=this.pixelRatio;p[0]=Math.round(d[0]*y)|0,p[1]=Math.round(d[1]*y)|0,p[2]=Math.round(d[2]*y)|0,p[3]=Math.round(d[3]*y)|0,this.setDirty()},l.setDataBox=function(d){var p=this.dataBox,y=p[0]!==d[0]||p[1]!==d[1]||p[2]!==d[2]||p[3]!==d[3];y&&(p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3],this.setDirty())},l.setViewBox=function(d){var p=this.pixelRatio,y=this.viewBox;y[0]=Math.round(d[0]*p)|0,y[1]=Math.round(d[1]*p)|0,y[2]=Math.round(d[2]*p)|0,y[3]=Math.round(d[3]*p)|0;var g=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((d[2]-d[0])*g)|0,Math.round((d[3]-d[1])*g)|0],this.setDirty()},l.update=function(d){d=d||{};var p=this.gl;this.pixelRatio=d.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(d.screenBox||[0,0,p.drawingBufferWidth/y,p.drawingBufferHeight/y]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var g=this.viewBox,A=(g[2]-g[0])/(g[3]-g[1]);this.setDataBox(d.dataBox||[-10,-10/A,10,10/A]),this.borderColor=d.borderColor!==!1?(d.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(g[0]+g[2])/y,(g[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=d.ticks||[[],[]],M=this._tickBounds;M[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var w=0;w<2;++w){var T=b[w].slice(0);T.length!==0&&(T.sort(c),M[w]=Math.min(M[w],T[0].x),M[w+2]=Math.max(M[w+2],T[T.length-1].x))}this.grid.update({bounds:M,ticks:b}),this.text.update({bounds:M,ticks:b,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif"}),this.static=!!d.static,this.setDirty()},l.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();this.objects.length=0;for(var d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},l.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},l.removeObject=function(d){for(var p=this.objects,y=0;y<p.length;++y)if(p[y]===d){p.splice(y,1),this.setDirty();break}},l.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},l.removeOverlay=function(d){for(var p=this.overlays,y=0;y<p.length;++y)if(p[y]===d){p.splice(y,1),this.setOverlayDirty();break}};function v(d){var p=d.gl,y=t(p,[p.drawingBufferWidth,p.drawingBufferHeight]),g=new f(p,y);return g.grid=i(g),g.text=a(g),g.line=r(g),g.box=n(g),g.update(d),g}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(s,m,x){m.exports=l;var t=s("right-now"),i=s("3d-view"),a=s("mouse-change"),r=s("mouse-wheel"),n=s("mouse-event-offset"),f=s("has-passive-events");function l(o,c){o=o||document.body,c=c||{};var v=[.01,1/0];"distanceLimits"in c&&(v[0]=c.distanceLimits[0],v[1]=c.distanceLimits[1]),"zoomMin"in c&&(v[0]=c.zoomMin),"zoomMax"in c&&(v[1]=c.zoomMax);var d=i({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:v}),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,g=o.clientWidth,A=o.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:d,element:o,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:d.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var M=t(),w=this.delay,T=M-2*w;d.idle(M-w),d.recalcMatrix(T),d.flush(M-(100+w*2));for(var _=!0,h=d.computedMatrix,L=0;L<16;++L)_=_&&p[L]===h[L],p[L]=h[L];var S=o.clientWidth===g&&o.clientHeight===A;return g=o.clientWidth,A=o.clientHeight,_?!S:(y=Math.exp(d.computedRadius[0]),!0)},lookAt:function(M,w,T){d.lookAt(d.lastT(),M,w,T)},rotate:function(M,w,T){d.rotate(d.lastT(),M,w,T)},pan:function(M,w,T){d.pan(d.lastT(),M,w,T)},translate:function(M,w,T){d.translate(d.lastT(),M,w,T)}};return Object.defineProperties(b,{matrix:{get:function(){return d.computedMatrix},set:function(M){return d.setMatrix(d.lastT(),M),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(M){var w=d.computedUp.slice(),T=d.computedEye.slice(),_=d.computedCenter.slice();if(d.setMode(M),M==="turntable"){var h=t();d._active.lookAt(h,T,_,w),d._active.lookAt(h+500,T,_,[0,0,1]),d._active.flush(h)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(M){return d.lookAt(d.lastT(),null,M),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(M){return d.lookAt(d.lastT(),M),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(M){return d.lookAt(d.lastT(),null,null,M),d.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(M){return d.setDistance(d.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(v)},set:function(M){return d.setDistanceLimits(M),M},enumerable:!0}}),o.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){b.mouseListener=a(o,M),o.addEventListener("touchstart",function(w){var T=n(w.changedTouches[0],o);M(0,T[0],T[1],b._lastMods),M(1,T[0],T[1],b._lastMods)},f?{passive:!0}:!1),o.addEventListener("touchmove",function(w){var T=n(w.changedTouches[0],o);M(1,T[0],T[1],b._lastMods),w.preventDefault()},f?{passive:!1}:!1),o.addEventListener("touchend",function(w){M(0,b._lastX,b._lastY,b._lastMods)},f?{passive:!0}:!1);function M(w,T,_,h){var L=b.keyBindingMode;if(L!==!1){var S=L==="rotate",k=L==="pan",P=L==="zoom",O=!!h.control,F=!!h.alt,D=!!h.shift,R=!!(w&1),U=!!(w&2),N=!!(w&4),X=1/o.clientHeight,j=X*(T-b._lastX),ee=X*(_-b._lastY),q=b.flipX?1:-1,G=b.flipY?1:-1,J=Math.PI*b.rotateSpeed,le=t();if(b._lastX!==-1&&b._lastY!==-1&&((S&&R&&!O&&!F&&!D||R&&!O&&!F&&D)&&d.rotate(le,q*J*j,-G*J*ee,0),(k&&R&&!O&&!F&&!D||U||R&&O&&!F&&!D)&&d.pan(le,-b.translateSpeed*j*y,b.translateSpeed*ee*y,0),P&&R&&!O&&!F&&!D||N||R&&!O&&F&&!D)){var fe=-b.zoomSpeed*ee/window.innerHeight*(le-d.lastT())*100;d.pan(le,0,0,y*(Math.exp(fe)-1))}return b._lastX=T,b._lastY=_,b._lastMods=h,!0}}b.wheelListener=r(o,function(w,T){if(b.keyBindingMode!==!1&&!!b.enableWheel){var _=b.flipX?1:-1,h=b.flipY?1:-1,L=t();if(Math.abs(w)>Math.abs(T))d.rotate(L,0,0,-w*_*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var S=-b.zoomSpeed*h*T/window.innerHeight*(L-d.lastT())/20;d.pan(L,0,0,y*(Math.exp(S)-1))}}},!0)},b.enableMouseListeners(),b}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),r=t([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);m.exports=function(n){return i(n,a,r,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(s,m,x){var t=s("./camera.js"),i=s("gl-axes3d"),a=s("gl-axes3d/properties"),r=s("gl-spikes3d"),n=s("gl-select-static"),f=s("gl-fbo"),l=s("a-big-triangle"),o=s("mouse-change"),c=s("gl-mat4/perspective"),v=s("gl-mat4/ortho"),d=s("./lib/shader"),p=s("is-mobile")({tablet:!0,featureDetect:!0});m.exports={createScene:M,createCamera:t};function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function g(T,_){var h=null;try{h=T.getContext("webgl",_),h||(h=T.getContext("experimental-webgl",_))}catch{return null}return h}function A(T){var _=Math.round(Math.log(Math.abs(T))/Math.log(10));if(_<0){var h=Math.round(Math.pow(10,-_));return Math.ceil(T*h)/h}else if(_>0){var h=Math.round(Math.pow(10,_));return Math.ceil(T/h)*h}return Math.ceil(T)}function b(T){return typeof T=="boolean"?T:!0}function M(T){T=T||{},T.camera=T.camera||{};var _=T.canvas;if(!_)if(_=document.createElement("canvas"),T.container){var h=T.container;h.appendChild(_)}else document.body.appendChild(_);var L=T.gl;if(L||(T.glOptions&&(p=!!T.glOptions.preserveDrawingBuffer),L=g(_,T.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p})),!L)throw new Error("webgl not supported");var S=T.bounds||[[-10,-10,-10],[10,10,10]],k=new y,P=f(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!p}),O=d(L),F=T.cameraObject&&T.cameraObject._ortho===!0||T.camera.projection&&T.camera.projection.type==="orthographic"||!1,D={eye:T.camera.eye||[2,0,0],center:T.camera.center||[0,0,0],up:T.camera.up||[0,1,0],zoomMin:T.camera.zoomMax||.1,zoomMax:T.camera.zoomMin||100,mode:T.camera.mode||"turntable",_ortho:F},R=T.axes||{},U=i(L,R);U.enable=!R.disable;var N=T.spikes||{},X=r(L,N),j=[],ee=[],q=[],G=[],J=!0,le=!0,fe=new Array(16),se=new Array(16),V={view:null,projection:fe,model:se,_ortho:!1},le=!0,Y=[L.drawingBufferWidth,L.drawingBufferHeight],ne=T.cameraObject||t(_,D),te={gl:L,contextLost:!1,pixelRatio:T.pixelRatio||1,canvas:_,selection:k,camera:ne,axes:U,axesPixels:null,spikes:X,bounds:S,objects:j,shape:Y,aspect:T.aspectRatio||[1,1,1],pickRadius:T.pickRadius||10,zNear:T.zNear||.01,zFar:T.zFar||1e3,fovy:T.fovy||Math.PI/4,clearColor:T.clearColor||[0,0,0,0],autoResize:b(T.autoResize),autoBounds:b(T.autoBounds),autoScale:!!T.autoScale,autoCenter:b(T.autoCenter),clipToBounds:b(T.clipToBounds),snapToData:!!T.snapToData,onselect:T.onselect||null,onrender:T.onrender||null,onclick:T.onclick||null,cameraParams:V,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(be){this.aspect[0]=be.x,this.aspect[1]=be.y,this.aspect[2]=be.z,le=!0},setBounds:function(be,Ce){this.bounds[0][be]=Ce.min,this.bounds[1][be]=Ce.max},setClearColor:function(be){this.clearColor=be},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},K=[L.drawingBufferWidth/te.pixelRatio|0,L.drawingBufferHeight/te.pixelRatio|0];function $(){if(!te._stopped&&!!te.autoResize){var be=_.parentNode,Ce=1,Se=1;be&&be!==document.body?(Ce=be.clientWidth,Se=be.clientHeight):(Ce=window.innerWidth,Se=window.innerHeight);var Be=Math.ceil(Ce*te.pixelRatio)|0,Ye=Math.ceil(Se*te.pixelRatio)|0;if(Be!==_.width||Ye!==_.height){_.width=Be,_.height=Ye;var Xe=_.style;Xe.position=Xe.position||"absolute",Xe.left="0px",Xe.top="0px",Xe.width=Ce+"px",Xe.height=Se+"px",J=!0}}}te.autoResize&&$(),window.addEventListener("resize",$);function ae(){for(var be=j.length,Ce=G.length,Se=0;Se<Ce;++Se)q[Se]=0;e:for(var Se=0;Se<be;++Se){var Be=j[Se],Ye=Be.pickSlots;if(!Ye){ee[Se]=-1;continue}for(var Xe=0;Xe<Ce;++Xe)if(q[Xe]+Ye<255){ee[Se]=Xe,Be.setPickBase(q[Xe]+1),q[Xe]+=Ye;continue e}var Te=n(L,Y);ee[Se]=Ce,G.push(Te),q.push(Ye),Be.setPickBase(1),Ce+=1}for(;Ce>0&&q[Ce-1]===0;)q.pop(),G.pop().dispose()}te.update=function(be){te._stopped||(J=!0,le=!0)},te.add=function(be){te._stopped||(be.axes=U,j.push(be),ee.push(-1),J=!0,le=!0,ae())},te.remove=function(be){if(!te._stopped){var Ce=j.indexOf(be);Ce<0||(j.splice(Ce,1),ee.pop(),J=!0,le=!0,ae())}},te.dispose=function(){if(!te._stopped&&(te._stopped=!0,window.removeEventListener("resize",$),_.removeEventListener("webglcontextlost",ie),te.mouseListener.enabled=!1,!te.contextLost)){U.dispose(),X.dispose();for(var be=0;be<j.length;++be)j[be].dispose();P.dispose();for(var be=0;be<G.length;++be)G[be].dispose();O.dispose(),L=null,U=null,X=null,j=[]}},te._mouseRotating=!1,te._prevButtons=0,te.enableMouseListeners=function(){te.mouseListener=o(_,function(be,Ce,Se){if(!te._stopped){var Be=G.length,Ye=j.length,Xe=k.object;k.distance=1/0,k.mouse[0]=Ce,k.mouse[1]=Se,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var Te=!1;if(be&&te._prevButtons)te._mouseRotating=!0;else{te._mouseRotating&&(le=!0),te._mouseRotating=!1;for(var Ie=0;Ie<Be;++Ie){var Ze=G[Ie].query(Ce,K[1]-Se-1,te.pickRadius);if(Ze){if(Ze.distance>k.distance)continue;for(var rt=0;rt<Ye;++rt){var Ge=j[rt];if(ee[rt]===Ie){var ze=Ge.pick(Ze);ze&&(k.buttons=be,k.screen=Ze.coord,k.distance=Ze.distance,k.object=Ge,k.index=ze.distance,k.dataPosition=ze.position,k.dataCoordinate=ze.dataCoordinate,k.data=ze,Te=!0)}}}}}Xe&&Xe!==k.object&&(Xe.highlight&&Xe.highlight(null),J=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),J=!0),Te=Te||k.object!==Xe,Te&&te.onselect&&te.onselect(k),be&1&&!(te._prevButtons&1)&&te.onclick&&te.onclick(k),te._prevButtons=be}})};function ie(){if(te.contextLost)return!0;L.isContextLost()&&(te.contextLost=!0,te.mouseListener.enabled=!1,te.selection.object=null,te.oncontextloss&&te.oncontextloss())}_.addEventListener("webglcontextlost",ie);function oe(){if(!ie()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var be=j.length,Ce=G.length,Se=0;Se<Ce;++Se){var Be=G[Se];Be.shape=K,Be.begin();for(var Ye=0;Ye<be;++Ye)if(ee[Ye]===Se){var Xe=j[Ye];Xe.drawPick&&(Xe.pixelRatio=1,Xe.drawPick(V))}Be.end()}}}var ue=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],xe=[ue[0].slice(),ue[1].slice()];function he(){if(!ie()){$();var be=te.camera.tick();V.view=te.camera.matrix,J=J||be,le=le||be,U.pixelRatio=te.pixelRatio,X.pixelRatio=te.pixelRatio;var Ce=j.length,Se=ue[0],Be=ue[1];Se[0]=Se[1]=Se[2]=1/0,Be[0]=Be[1]=Be[2]=-1/0;for(var Ye=0;Ye<Ce;++Ye){var Xe=j[Ye];Xe.pixelRatio=te.pixelRatio,Xe.axes=te.axes,J=J||!!Xe.dirty,le=le||!!Xe.dirty;var Te=Xe.bounds;if(Te)for(var Ie=Te[0],Ze=Te[1],rt=0;rt<3;++rt)Se[rt]=Math.min(Se[rt],Ie[rt]),Be[rt]=Math.max(Be[rt],Ze[rt])}var Ge=te.bounds;if(te.autoBounds)for(var rt=0;rt<3;++rt){if(Be[rt]<Se[rt])Se[rt]=-1,Be[rt]=1;else{Se[rt]===Be[rt]&&(Se[rt]-=1,Be[rt]+=1);var ze=.05*(Be[rt]-Se[rt]);Se[rt]=Se[rt]-ze,Be[rt]=Be[rt]+ze}Ge[0][rt]=Se[rt],Ge[1][rt]=Be[rt]}for(var We=!1,rt=0;rt<3;++rt)We=We||xe[0][rt]!==Ge[0][rt]||xe[1][rt]!==Ge[1][rt],xe[0][rt]=Ge[0][rt],xe[1][rt]=Ge[1][rt];if(le=le||We,J=J||We,!!J){if(We){for(var mt=[0,0,0],Ye=0;Ye<3;++Ye)mt[Ye]=A((Ge[1][Ye]-Ge[0][Ye])/10);U.autoTicks?U.update({bounds:Ge,tickSpacing:mt}):U.update({bounds:Ge})}var Ft=L.drawingBufferWidth,Xt=L.drawingBufferHeight;Y[0]=Ft,Y[1]=Xt,K[0]=Math.max(Ft/te.pixelRatio,1)|0,K[1]=Math.max(Xt/te.pixelRatio,1)|0,w(te,F);for(var Ye=0;Ye<Ce;++Ye){var Xe=j[Ye];Xe.axesBounds=Ge,te.clipToBounds&&(Xe.clipBounds=Ge)}k.object&&(te.snapToData?X.position=k.dataCoordinate:X.position=k.dataPosition,X.bounds=Ge),le&&(le=!1,oe()),te.axesPixels=a(te.axes,V,Ft,Xt),te.onrender&&te.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Ft,Xt),te.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var Pt=!1;U.enable&&(Pt=Pt||U.isTransparent(),U.draw(V)),X.axes=U,k.object&&X.draw(V),L.disable(L.CULL_FACE);for(var Ye=0;Ye<Ce;++Ye){var Xe=j[Ye];Xe.axes=U,Xe.pixelRatio=te.pixelRatio,Xe.isOpaque&&Xe.isOpaque()&&Xe.draw(V),Xe.isTransparent&&Xe.isTransparent()&&(Pt=!0)}if(Pt){P.shape=Y,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),U.enable&&U.isTransparent()&&U.drawTransparent(V);for(var Ye=0;Ye<Ce;++Ye){var Xe=j[Ye];Xe.isOpaque&&Xe.isOpaque()&&Xe.draw(V)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),U.isTransparent()&&U.drawTransparent(V);for(var Ye=0;Ye<Ce;++Ye){var Xe=j[Ye];Xe.isTransparent&&Xe.isTransparent()&&Xe.drawTransparent(V)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),O.bind(),P.color[0].bind(0),O.uniforms.accumBuffer=0,l(L),L.disable(L.BLEND)}J=!1;for(var Ye=0;Ye<Ce;++Ye)j[Ye].dirty=!1}}}function me(){te._stopped||te.contextLost||(he(),requestAnimationFrame(me))}return te.enableMouseListeners(),me(),te.redraw=function(){te._stopped||(J=!0,he())},te}function w(T,_){var h=T.bounds,L=T.cameraParams,S=L.projection,k=L.model,P=T.gl.drawingBufferWidth,O=T.gl.drawingBufferHeight,F=T.zNear,D=T.zFar,R=T.fovy,U=P/O;_?(v(S,-U,U,-1,1,F,D),L._ortho=!0):(c(S,R,U,F,D),L._ortho=!1);for(var N=0;N<16;++N)k[N]=0;k[15]=1;for(var X=0,N=0;N<3;++N)X=Math.max(X,h[1][N]-h[0][N]);for(var N=0;N<3;++N)T.autoScale?k[5*N]=T.aspect[N]/(h[1][N]-h[0][N]):k[5*N]=1/X,T.autoCenter&&(k[12+N]=-k[5*N]*.5*(h[0][N]+h[1][N]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(s,m,x){var t=s("glslify");x.pointVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),x.pointFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),x.pickVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),x.pickFragment=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(s,m,x){var t=s("gl-shader"),i=s("gl-buffer"),a=s("typedarray-pool"),r=s("./lib/shader");m.exports=o;function n(c,v,d,p,y){this.plot=c,this.offsetBuffer=v,this.pickBuffer=d,this.shader=p,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=n.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(c){var v;c=c||{};function d(w,T){return w in c?c[w]:T}this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var p=c.positions.length>>>1,y=c.positions instanceof Float32Array,g=c.idToIndex instanceof Int32Array&&c.idToIndex.length>=p,A=c.positions,b=y?A:a.mallocFloat32(A.length),M=g?c.idToIndex:a.mallocInt32(p);if(y||b.set(A),!g)for(b.set(A),v=0;v<p;v++)M[v]=v;this.points=A,this.offsetBuffer.update(b),this.pickBuffer.update(M),y||a.free(b),g||a.free(M),this.pointCount=p,this.pickOffset=0};function l(c,v){var d=0,p=c.length>>>1,y;for(y=0;y<p;y++){var g=c[y*2],A=c[y*2+1];g>=v[0]&&g<=v[2]&&A>=v[1]&&A<=v[3]&&d++}return d}f.unifiedDraw=function(){var c=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(d){var p=d!==void 0,y=p?this.pickShader:this.shader,g=this.plot.gl,A=this.plot.dataBox;if(this.pointCount===0)return d;var b=A[2]-A[0],M=A[3]-A[1],w=l(this.points,A),T=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));c[0]=2/b,c[4]=2/M,c[6]=-2*A[0]/b-1,c[7]=-2*A[1]/M-1,this.offsetBuffer.bind(),y.bind(),y.attributes.position.pointer(),y.uniforms.matrix=c,y.uniforms.color=this.color,y.uniforms.borderColor=this.borderColor,y.uniforms.pointCloud=T<5,y.uniforms.pointSize=T,y.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),p&&(v[0]=d&255,v[1]=d>>8&255,v[2]=d>>16&255,v[3]=d>>24&255,this.pickBuffer.bind(),y.attributes.pickId.pointer(g.UNSIGNED_BYTE),y.uniforms.pickOffset=v,this.pickOffset=d);var _=g.getParameter(g.BLEND),h=g.getParameter(g.DITHER);return _&&!this.blend&&g.disable(g.BLEND),h&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),_&&!this.blend&&g.enable(g.BLEND),h&&g.enable(g.DITHER),d+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(c,v,d){var p=this.pickOffset,y=this.pointCount;if(d<p||d>=p+y)return null;var g=d-p,A=this.points;return{object:this,pointId:g,dataCoord:[A[2*g],A[2*g+1]]}};function o(c,v){var d=c.gl,p=i(d),y=i(d),g=t(d,r.pointVertex,r.pointFragment),A=t(d,r.pickVertex,r.pickFragment),b=new n(c,p,y,g,A);return b.update(v),c.addObject(b),b}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=a[0],l=a[1],o=a[2],c=a[3],v=r[0],d=r[1],p=r[2],y=r[3],g,A,b,M,w;return A=f*v+l*d+o*p+c*y,A<0&&(A=-A,v=-v,d=-d,p=-p,y=-y),1-A>1e-6?(g=Math.acos(A),b=Math.sin(g),M=Math.sin((1-n)*g)/b,w=Math.sin(n*g)/b):(M=1-n,w=n),i[0]=M*f+w*v,i[1]=M*l+w*d,i[2]=M*o+w*p,i[3]=M*c+w*y,i}},{}],125:[function(s,m,x){m.exports=function(t){return!t&&t!==0?"":t.toString()}},{}],126:[function(s,m,x){var t=s("vectorize-text");m.exports=a;var i={};function a(r,n,f){var l=i[n];if(l||(l=i[n]={}),r in l)return l[r];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:n,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var c=t(r,o);o.triangles=!1;var v=t(r,o),d,p;if(f&&f!==1){for(d=0;d<c.positions.length;++d)for(p=0;p<c.positions[d].length;++p)c.positions[d][p]/=f;for(d=0;d<v.positions.length;++d)for(p=0;p<v.positions[d].length;++p)v.positions[d][p]/=f}var y=[[1/0,1/0],[-1/0,-1/0]],g=v.positions.length;for(d=0;d<g;++d){var A=v.positions[d];for(p=0;p<2;++p)y[0][p]=Math.min(y[0][p],A[p]),y[1][p]=Math.max(y[1][p],A[p])}return l[r]=[c,v,y]}},{"vectorize-text":311}],127:[function(s,m,x){var t=s("gl-shader"),i=s("glslify"),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],c={vertex:a,fragment:f,attributes:o},v={vertex:r,fragment:f,attributes:o},d={vertex:n,fragment:f,attributes:o},p={vertex:a,fragment:l,attributes:o},y={vertex:r,fragment:l,attributes:o},g={vertex:n,fragment:l,attributes:o};function A(b,M){var w=t(b,M),T=w.attributes;return T.position.location=0,T.color.location=1,T.glyph.location=2,T.id.location=3,w}x.createPerspective=function(b){return A(b,c)},x.createOrtho=function(b){return A(b,v)},x.createProject=function(b){return A(b,d)},x.createPickPerspective=function(b){return A(b,p)},x.createPickOrtho=function(b){return A(b,y)},x.createPickProject=function(b){return A(b,g)}},{"gl-shader":132,glslify:231}],128:[function(s,m,x){var t=s("is-string-blank"),i=s("gl-buffer"),a=s("gl-vao"),r=s("typedarray-pool"),n=s("gl-mat4/multiply"),f=s("./lib/shaders"),l=s("./lib/glyphs"),o=s("./lib/get-simple-string"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];m.exports=ee;function v(q,G){var J=q[0],le=q[1],fe=q[2],se=q[3];return q[0]=G[0]*J+G[4]*le+G[8]*fe+G[12]*se,q[1]=G[1]*J+G[5]*le+G[9]*fe+G[13]*se,q[2]=G[2]*J+G[6]*le+G[10]*fe+G[14]*se,q[3]=G[3]*J+G[7]*le+G[11]*fe+G[15]*se,q}function d(q,G,J,le){return v(le,le),v(le,le),v(le,le)}function p(q,G){this.index=q,this.dataCoordinate=this.position=G}function y(q){return q===!0||q>1?1:q}function g(q,G,J,le,fe,se,V,Y,ne,te,K,$){this.gl=q,this.pixelRatio=1,this.shader=G,this.orthoShader=J,this.projectShader=le,this.pointBuffer=fe,this.colorBuffer=se,this.glyphBuffer=V,this.idBuffer=Y,this.vao=ne,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=te,this.pickOrthoShader=K,this.pickProjectShader=$,this.points=[],this._selectResult=new p(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var A=g.prototype;A.pickSlots=1,A.setPickBase=function(q){this.pickId=q},A.isTransparent=function(){if(this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&this.projectHasAlpha)return!0;return!1},A.isOpaque=function(){if(!this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],M=[0,0,0],w=[0,0,0],T=[0,0,0,1],_=[0,0,0,1],h=c.slice(),L=[0,0,0],S=[[0,0,0],[0,0,0]];function k(q){return q[0]=q[1]=q[2]=0,q}function P(q,G){return q[0]=G[0],q[1]=G[1],q[2]=G[2],q[3]=1,q}function O(q,G,J,le){return q[0]=G[0],q[1]=G[1],q[2]=G[2],q[J]=le,q}function F(q){for(var G=S,J=0;J<2;++J)for(var le=0;le<3;++le)G[J][le]=Math.max(Math.min(q[J][le],1e8),-1e8);return G}function D(q,G,J,le){var fe=G.axesProject,se=G.gl,V=q.uniforms,Y=J.model||c,ne=J.view||c,te=J.projection||c,K=G.axesBounds,$=F(G.clipBounds),ae;G.axes&&G.axes.lastCubeProps?ae=G.axes.lastCubeProps.axis:ae=[1,1,1],b[0]=2/se.drawingBufferWidth,b[1]=2/se.drawingBufferHeight,q.bind(),V.view=ne,V.projection=te,V.screenSize=b,V.highlightId=G.highlightId,V.highlightScale=G.highlightScale,V.clipBounds=$,V.pickGroup=G.pickId/255,V.pixelRatio=le;for(var ie=0;ie<3;++ie)if(!!fe[ie]){V.scale=G.projectScale[ie],V.opacity=G.projectOpacity[ie];for(var oe=h,ue=0;ue<16;++ue)oe[ue]=0;for(var ue=0;ue<4;++ue)oe[5*ue]=1;oe[5*ie]=0,ae[ie]<0?oe[12+ie]=K[0][ie]:oe[12+ie]=K[1][ie],n(oe,Y,oe),V.model=oe;var xe=(ie+1)%3,he=(ie+2)%3,me=k(M),be=k(w);me[xe]=1,be[he]=1;var Ce=d(te,ne,Y,P(T,me)),Se=d(te,ne,Y,P(_,be));if(Math.abs(Ce[1])>Math.abs(Se[1])){var Be=Ce;Ce=Se,Se=Be,Be=me,me=be,be=Be;var Ye=xe;xe=he,he=Ye}Ce[0]<0&&(me[xe]=-1),Se[1]>0&&(be[he]=-1);for(var Xe=0,Te=0,ue=0;ue<4;++ue)Xe+=Math.pow(Y[4*xe+ue],2),Te+=Math.pow(Y[4*he+ue],2);me[xe]/=Math.sqrt(Xe),be[he]/=Math.sqrt(Te),V.axes[0]=me,V.axes[1]=be,V.fragClipBounds[0]=O(L,$[0],ie,-1e8),V.fragClipBounds[1]=O(L,$[1],ie,1e8),G.vao.bind(),G.vao.draw(se.TRIANGLES,G.vertexCount),G.lineWidth>0&&(se.lineWidth(G.lineWidth*le),G.vao.draw(se.LINES,G.lineVertexCount,G.vertexCount)),G.vao.unbind()}}var R=[-1e8,-1e8,-1e8],U=[1e8,1e8,1e8],N=[R,U];function X(q,G,J,le,fe,se,V){var Y=J.gl;if((se===J.projectHasAlpha||V)&&D(G,J,le,fe),se===J.hasAlpha||V){q.bind();var ne=q.uniforms;ne.model=le.model||c,ne.view=le.view||c,ne.projection=le.projection||c,b[0]=2/Y.drawingBufferWidth,b[1]=2/Y.drawingBufferHeight,ne.screenSize=b,ne.highlightId=J.highlightId,ne.highlightScale=J.highlightScale,ne.fragClipBounds=N,ne.clipBounds=J.axes.bounds,ne.opacity=J.opacity,ne.pickGroup=J.pickId/255,ne.pixelRatio=fe,J.vao.bind(),J.vao.draw(Y.TRIANGLES,J.vertexCount),J.lineWidth>0&&(Y.lineWidth(J.lineWidth*fe),J.vao.draw(Y.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}A.draw=function(q){var G=this.useOrtho?this.orthoShader:this.shader;X(G,this.projectShader,this,q,this.pixelRatio,!1,!1)},A.drawTransparent=function(q){var G=this.useOrtho?this.orthoShader:this.shader;X(G,this.projectShader,this,q,this.pixelRatio,!0,!1)},A.drawPick=function(q){var G=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;X(G,this.pickProjectShader,this,q,1,!0,!0)},A.pick=function(q){if(!q||q.id!==this.pickId)return null;var G=q.value[2]+(q.value[1]<<8)+(q.value[0]<<16);if(G>=this.pointCount||G<0)return null;var J=this.points[G],le=this._selectResult;le.index=G;for(var fe=0;fe<3;++fe)le.position[fe]=le.dataCoordinate[fe]=J[fe];return le},A.highlight=function(q){if(!q)this.highlightId=[1,1,1,1];else{var G=q.index,J=G&255,le=G>>8&255,fe=G>>16&255;this.highlightId=[J/255,le/255,fe/255,0]}};function j(q,G,J,le){var fe;Array.isArray(q)?G<q.length?fe=q[G]:fe=void 0:fe=q,fe=o(fe);var se=!0;t(fe)&&(fe="\u25BC",se=!1);var V=l(fe,J,le);return{mesh:V[0],lines:V[1],bounds:V[2],visible:se}}A.update=function(q){if(q=q||{},"perspective"in q&&(this.useOrtho=!q.perspective),"orthographic"in q&&(this.useOrtho=!!q.orthographic),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"project"in q)if(Array.isArray(q.project))this.axesProject=q.project;else{var G=!!q.project;this.axesProject=[G,G,G]}if("projectScale"in q)if(Array.isArray(q.projectScale))this.projectScale=q.projectScale.slice();else{var J=+q.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in q){if(Array.isArray(q.projectOpacity))this.projectOpacity=q.projectOpacity.slice();else{var J=+q.projectOpacity;this.projectOpacity=[J,J,J]}for(var le=0;le<3;++le)this.projectOpacity[le]=y(this.projectOpacity[le]),this.projectOpacity[le]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in q&&(this.opacity=y(q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var fe=q.position,se=q.font||"normal",V=q.alignment||[0,0],Y,ne;if(V.length===2)Y=V[0],ne=V[1];else{Y=[],ne=[];for(var le=0;le<V.length;++le)Y[le]=V[le][0],ne[le]=V[le][1]}var te=[1/0,1/0,1/0],K=[-1/0,-1/0,-1/0],$=q.glyph,ae=q.color,ie=q.size,oe=q.angle,ue=q.lineColor,xe=-1,he=0,me=0,be=0;if(fe.length){be=fe.length;e:for(var le=0;le<be;++le){for(var Ce=fe[le],Se=0;Se<3;++Se)if(isNaN(Ce[Se])||!isFinite(Ce[Se]))continue e;var Be=j($,le,se,this.pixelRatio),Ye=Be.mesh,Xe=Be.lines,Te=Be.bounds;he+=Ye.cells.length*3,me+=Xe.edges.length*2}}var Ie=he+me,Ze=r.mallocFloat(3*Ie),rt=r.mallocFloat(4*Ie),Ge=r.mallocFloat(2*Ie),ze=r.mallocUint32(Ie);if(Ie>0){var We=0,mt=he,Ft=[0,0,0,1],Xt=[0,0,0,1],Pt=Array.isArray(ae)&&Array.isArray(ae[0]),Ut=Array.isArray(ue)&&Array.isArray(ue[0]);e:for(var le=0;le<be;++le){xe+=1;for(var Ce=fe[le],Se=0;Se<3;++Se){if(isNaN(Ce[Se])||!isFinite(Ce[Se]))continue e;K[Se]=Math.max(K[Se],Ce[Se]),te[Se]=Math.min(te[Se],Ce[Se])}var Be=j($,le,se,this.pixelRatio),Ye=Be.mesh,Xe=Be.lines,Te=Be.bounds,Gt=Be.visible;if(!Gt)Ft=[1,1,1,0];else if(Array.isArray(ae)){var It;if(Pt?le<ae.length?It=ae[le]:It=[0,0,0,0]:It=ae,It.length===3){for(var Se=0;Se<3;++Se)Ft[Se]=It[Se];Ft[3]=1}else if(It.length===4){for(var Se=0;Se<4;++Se)Ft[Se]=It[Se];!this.hasAlpha&&It[3]<1&&(this.hasAlpha=!0)}}else Ft[0]=Ft[1]=Ft[2]=0,Ft[3]=1;if(!Gt)Xt=[1,1,1,0];else if(Array.isArray(ue)){var It;if(Ut?le<ue.length?It=ue[le]:It=[0,0,0,0]:It=ue,It.length===3){for(var Se=0;Se<3;++Se)Xt[Se]=It[Se];Xt[Se]=1}else if(It.length===4){for(var Se=0;Se<4;++Se)Xt[Se]=It[Se];!this.hasAlpha&&It[3]<1&&(this.hasAlpha=!0)}}else Xt[0]=Xt[1]=Xt[2]=0,Xt[3]=1;var Ct=.5;Gt?Array.isArray(ie)?le<ie.length?Ct=+ie[le]:Ct=12:ie?Ct=+ie:this.useOrtho&&(Ct=12):Ct=0;var lt=0;Array.isArray(oe)?le<oe.length?lt=+oe[le]:lt=0:oe&&(lt=+oe);for(var dt=Math.cos(lt),et=Math.sin(lt),Ce=fe[le],Se=0;Se<3;++Se)K[Se]=Math.max(K[Se],Ce[Se]),te[Se]=Math.min(te[Se],Ce[Se]);var Pe=Y,Je=ne,Pe=0;Array.isArray(Y)?le<Y.length?Pe=Y[le]:Pe=0:Y&&(Pe=Y);var Je=0;Array.isArray(ne)?le<ne.length?Je=ne[le]:Je=0:ne&&(Je=ne),Pe*=Pe>0?1-Te[0][0]:Pe<0?1+Te[1][0]:1,Je*=Je>0?1-Te[0][1]:Je<0?1+Te[1][1]:1;for(var it=[Pe,Je],ht=Ye.cells||[],zt=Ye.positions||[],Se=0;Se<ht.length;++Se)for(var Lt=ht[Se],Vt=0;Vt<3;++Vt){for(var $t=0;$t<3;++$t)Ze[3*We+$t]=Ce[$t];for(var $t=0;$t<4;++$t)rt[4*We+$t]=Ft[$t];ze[We]=xe;var Ht=zt[Lt[Vt]];Ge[2*We]=Ct*(dt*Ht[0]-et*Ht[1]+it[0]),Ge[2*We+1]=Ct*(et*Ht[0]+dt*Ht[1]+it[1]),We+=1}for(var ht=Xe.edges,zt=Xe.positions,Se=0;Se<ht.length;++Se)for(var Lt=ht[Se],Vt=0;Vt<2;++Vt){for(var $t=0;$t<3;++$t)Ze[3*mt+$t]=Ce[$t];for(var $t=0;$t<4;++$t)rt[4*mt+$t]=Xt[$t];ze[mt]=xe;var Ht=zt[Lt[Vt]];Ge[2*mt]=Ct*(dt*Ht[0]-et*Ht[1]+it[0]),Ge[2*mt+1]=Ct*(et*Ht[0]+dt*Ht[1]+it[1]),mt+=1}}}this.bounds=[te,K],this.points=fe,this.pointCount=fe.length,this.vertexCount=he,this.lineVertexCount=me,this.pointBuffer.update(Ze),this.colorBuffer.update(rt),this.glyphBuffer.update(Ge),this.idBuffer.update(ze),r.free(Ze),r.free(rt),r.free(Ge),r.free(ze)},A.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function ee(q){var G=q.gl,J=f.createPerspective(G),le=f.createOrtho(G),fe=f.createProject(G),se=f.createPickPerspective(G),V=f.createPickOrtho(G),Y=f.createPickProject(G),ne=i(G),te=i(G),K=i(G),$=i(G),ae=a(G,[{buffer:ne,size:3,type:G.FLOAT},{buffer:te,size:4,type:G.FLOAT},{buffer:K,size:2,type:G.FLOAT},{buffer:$,size:4,type:G.UNSIGNED_BYTE,normalized:!0}]),ie=new g(G,J,le,fe,ne,te,K,$,ae,se,V,Y);return ie.update(q),ie}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(s,m,x){var t=s("glslify");x.boxVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),x.boxFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(s,m,x){var t=s("gl-shader"),i=s("gl-buffer"),a=s("./lib/shaders");m.exports=f;function r(l,o,c){this.plot=l,this.boxBuffer=o,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var n=r.prototype;n.draw=function(){if(!!this.enabled){var l=this.plot,o=this.selectBox,c=this.borderWidth;this.innerFill;var v=this.innerColor;this.outerFill;var d=this.outerColor,p=this.borderColor,y=l.box,g=l.screenBox,A=l.dataBox,b=l.viewBox,M=l.pixelRatio,w=(o[0]-A[0])*(b[2]-b[0])/(A[2]-A[0])+b[0],T=(o[1]-A[1])*(b[3]-b[1])/(A[3]-A[1])+b[1],_=(o[2]-A[0])*(b[2]-b[0])/(A[2]-A[0])+b[0],h=(o[3]-A[1])*(b[3]-b[1])/(A[3]-A[1])+b[1];if(w=Math.max(w,b[0]),T=Math.max(T,b[1]),_=Math.min(_,b[2]),h=Math.min(h,b[3]),!(_<w||h<T)){y.bind();var L=g[2]-g[0],S=g[3]-g[1];if(this.outerFill&&(y.drawBox(0,0,L,T,d),y.drawBox(0,T,w,h,d),y.drawBox(0,h,L,S,d),y.drawBox(_,T,L,h,d)),this.innerFill&&y.drawBox(w,T,_,h,v),c>0){var k=c*M;y.drawBox(w-k,T-k,_+k,T+k,p),y.drawBox(w-k,h-k,_+k,h+k,p),y.drawBox(w-k,T-k,w+k,h+k,p),y.drawBox(_-k,T-k,_+k,h+k,p)}}}},n.update=function(l){l=l||{},this.innerFill=!!l.innerFill,this.outerFill=!!l.outerFill,this.innerColor=(l.innerColor||[0,0,0,.5]).slice(),this.outerColor=(l.outerColor||[0,0,0,.5]).slice(),this.borderColor=(l.borderColor||[0,0,0,1]).slice(),this.borderWidth=l.borderWidth||0,this.selectBox=(l.selectBox||this.selectBox).slice()},n.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(l,o){var c=l.gl,v=i(c,[0,0,0,1,1,0,1,1]),d=t(c,a.boxVertex,a.boxFragment),p=new r(l,v,d);return p.update(o),l.addOverlay(p),p}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(s,m,x){m.exports=c;var t=s("gl-fbo"),i=s("typedarray-pool"),a=s("ndarray"),r=s("bit-twiddle").nextPow2,n=function(v,d,p){for(var y=1e8,g=-1,A=-1,b=v.shape[0],M=v.shape[1],w=0;w<b;w++)for(var T=0;T<M;T++){var _=v.get(w,T,0),h=v.get(w,T,1),L=v.get(w,T,2),S=v.get(w,T,3);if(_<255||h<255||L<255||S<255){var k=d-w,P=p-T,O=k*k+P*P;O<y&&(y=O,g=w,A=T)}}return[g,A,y]};function f(v,d,p,y,g){this.coord=[v,d],this.id=p,this.value=y,this.distance=g}function l(v,d,p){this.gl=v,this.fbo=d,this.buffer=p,this._readTimeout=null;var y=this;this._readCallback=function(){!y.gl||(d.bind(),v.readPixels(0,0,d.shape[0],d.shape[1],v.RGBA,v.UNSIGNED_BYTE,y.buffer),y._readTimeout=null)}}var o=l.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(v){if(!!this.gl){this.fbo.shape=v;var d=this.fbo.shape[0],p=this.fbo.shape[1];if(p*d*4>this.buffer.length){i.free(this.buffer);for(var y=this.buffer=i.mallocUint8(r(p*d*4)),g=0;g<p*d*4;++g)y[g]=255}return v}}}),o.begin=function(){var v=this.gl;this.shape,!!v&&(this.fbo.bind(),v.clearColor(1,1,1,1),v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT))},o.end=function(){var v=this.gl;!v||(v.bindFramebuffer(v.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(v,d,p){if(!this.gl)return null;var y=this.fbo.shape.slice();v=v|0,d=d|0,typeof p!="number"&&(p=1);var g=Math.min(Math.max(v-p,0),y[0])|0,A=Math.min(Math.max(v+p,0),y[0])|0,b=Math.min(Math.max(d-p,0),y[1])|0,M=Math.min(Math.max(d+p,0),y[1])|0;if(A<=g||M<=b)return null;var w=[A-g,M-b],T=a(this.buffer,[w[0],w[1],4],[4,y[0]*4,1],4*(g+y[0]*b)),_=n(T.hi(w[0],w[1],1),p,p),h=_[0],L=_[1];if(h<0||Math.pow(this.radius,2)<_[2])return null;var S=T.get(h,L,0),k=T.get(h,L,1),P=T.get(h,L,2),O=T.get(h,L,3);return new f(h+g|0,L+b|0,S,[k,P,O],Math.sqrt(_[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function c(v,d){var p=d[0],y=d[1],g={},A=t(v,p,y,g),b=i.mallocUint8(p*y*4);return new l(v,A,b)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(s,m,x){var t=s("./lib/create-uniforms"),i=s("./lib/create-attributes"),a=s("./lib/reflect"),r=s("./lib/shader-cache"),n=s("./lib/runtime-reflect"),f=s("./lib/GLError");function l(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=l.prototype;o.bind=function(){this.program||this._relink();var d,p=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(p>y)for(d=y;d<p;d++)this.gl.enableVertexAttribArray(d);else if(y>p)for(d=p;d<y;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=p,this.gl.useProgram(this.program)},o.dispose=function(){for(var d=this.gl.lastAttribCount,p=0;p<d;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function c(d,p){return d.name<p.name?-1:1}o.update=function(d,p,y,g){if(!p||arguments.length===1){var A=d;d=A.vertex,p=A.fragment,y=A.uniforms,g=A.attributes}var b=this,M=b.gl,w=b._vref;b._vref=r.shader(M,M.VERTEX_SHADER,d),w&&w.dispose(),b.vertShader=b._vref.shader;var T=this._fref;if(b._fref=r.shader(M,M.FRAGMENT_SHADER,p),T&&T.dispose(),b.fragShader=b._fref.shader,!y||!g){var _=M.createProgram();if(M.attachShader(_,b.fragShader),M.attachShader(_,b.vertShader),M.linkProgram(_),!M.getProgramParameter(_,M.LINK_STATUS)){var h=M.getProgramInfoLog(_);throw new f(h,"Error linking program:"+h)}y=y||n.uniforms(M,_),g=g||n.attributes(M,_),M.deleteProgram(_)}g=g.slice(),g.sort(c);var L=[],S=[],k=[],P;for(P=0;P<g.length;++P){var O=g[P];if(O.type.indexOf("mat")>=0){for(var F=O.type.charAt(O.type.length-1)|0,D=new Array(F),R=0;R<F;++R)D[R]=k.length,S.push(O.name+"["+R+"]"),typeof O.location=="number"?k.push(O.location+R):Array.isArray(O.location)&&O.location.length===F&&typeof O.location[R]=="number"?k.push(O.location[R]|0):k.push(-1);L.push({name:O.name,type:O.type,locations:D})}else L.push({name:O.name,type:O.type,locations:[k.length]}),S.push(O.name),typeof O.location=="number"?k.push(O.location|0):k.push(-1)}var U=0;for(P=0;P<k.length;++P)if(k[P]<0){for(;k.indexOf(U)>=0;)U+=1;k[P]=U}var N=new Array(y.length);function X(){b.program=r.program(M,b._vref,b._fref,S,k);for(var j=0;j<y.length;++j)N[j]=M.getUniformLocation(b.program,y[j].name)}X(),b._relink=X,b.types={uniforms:a(y),attributes:a(g)},b.attributes=i(M,b,L,k),Object.defineProperty(b,"uniforms",t(M,b,y,N))};function v(d,p,y,g,A){var b=new l(d);return b.update(p,y,g,A),b}m.exports=v},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(s,m,x){function t(i,a,r){this.shortMessage=a||"",this.longMessage=r||"",this.rawError=i||"",this.message="gl-shader: "+(a||i||"")+(r?`
`+r:""),this.stack=new Error().stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,m.exports=t},{}],134:[function(s,m,x){m.exports=l;var t=s("./GLError");function i(o,c,v,d,p,y){this._gl=o,this._wrapper=c,this._index=v,this._locations=d,this._dimension=p,this._constFunc=y}var a=i.prototype;a.pointer=function(c,v,d,p){var y=this,g=y._gl,A=y._locations[y._index];g.vertexAttribPointer(A,y._dimension,c||g.FLOAT,!!v,d||0,p||0),g.enableVertexAttribArray(A)},a.set=function(o,c,v,d){return this._constFunc(this._locations[this._index],o,c,v,d)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(o){return o!==this._locations[this._index]&&(this._locations[this._index]=o|0,this._wrapper.program=null),o|0}});var r=[function(o,c,v){return v.length===void 0?o.vertexAttrib1f(c,v):o.vertexAttrib1fv(c,v)},function(o,c,v,d){return v.length===void 0?o.vertexAttrib2f(c,v,d):o.vertexAttrib2fv(c,v)},function(o,c,v,d,p){return v.length===void 0?o.vertexAttrib3f(c,v,d,p):o.vertexAttrib3fv(c,v)},function(o,c,v,d,p,y){return v.length===void 0?o.vertexAttrib4f(c,v,d,p,y):o.vertexAttrib4fv(c,v)}];function n(o,c,v,d,p,y,g){var A=r[p],b=new i(o,c,v,d,p,A);Object.defineProperty(y,g,{set:function(M){return o.disableVertexAttribArray(d[v]),A(o,d[v],M),M},get:function(){return b},enumerable:!0})}function f(o,c,v,d,p,y,g){for(var A=new Array(p),b=new Array(p),M=0;M<p;++M)n(o,c,v[M],d,p,A,M),b[M]=A[M];Object.defineProperty(A,"location",{set:function(_){if(Array.isArray(_))for(var h=0;h<p;++h)b[h].location=_[h];else for(var h=0;h<p;++h)b[h].location=_+h;return _},get:function(){for(var _=new Array(p),h=0;h<p;++h)_[h]=d[v[h]];return _},enumerable:!0}),A.pointer=function(_,h,L,S){_=_||o.FLOAT,h=!!h,L=L||p*p,S=S||0;for(var k=0;k<p;++k){var P=d[v[k]];o.vertexAttribPointer(P,p,_,h,L,S+k*p),o.enableVertexAttribArray(P)}};var w=new Array(p),T=o["vertexAttrib"+p+"fv"];Object.defineProperty(y,g,{set:function(_){for(var h=0;h<p;++h){var L=d[v[h]];if(o.disableVertexAttribArray(L),Array.isArray(_[0]))T.call(o,L,_[h]);else{for(var S=0;S<p;++S)w[S]=_[p*h+S];T.call(o,L,w)}}return _},get:function(){return A},enumerable:!0})}function l(o,c,v,d){for(var p={},y=0,g=v.length;y<g;++y){var A=v[y],b=A.name,M=A.type,w=A.locations;switch(M){case"bool":case"int":case"float":n(o,c,w[0],d,1,p,b);break;default:if(M.indexOf("vec")>=0){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new t("","Invalid data type for attribute "+b+": "+M);n(o,c,w[0],d,T,p,b)}else if(M.indexOf("mat")>=0){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new t("","Invalid data type for attribute "+b+": "+M);f(o,c,w,d,T,p,b)}else throw new t("","Unknown data type for attribute "+b+": "+M);break}}return p}},{"./GLError":133}],135:[function(s,m,x){var t=s("./reflect"),i=s("./GLError");m.exports=n;function a(f){return function(){return f}}function r(f,l){for(var o=new Array(f),c=0;c<f;++c)o[c]=l;return o}function n(f,l,o,c){function v(M){return function(w,T,_){return w.getUniform(T.program,_[M])}}function d(M){return function(T){for(var _=p("",M),h=0;h<_.length;++h){var L=_[h],S=L[0],k=L[1];if(c[k]){var P=T;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var O=S;if(S.indexOf(".")===0&&(O=S.slice(1)),O.indexOf("]")===O.length-1){var F=O.indexOf("["),D=O.slice(0,F),R=O.slice(F+1,O.length-1);P=D?T[D][R]:T[R]}else P=T[O]}var U=o[k].type,N;switch(U){case"bool":case"int":case"sampler2D":case"samplerCube":f.uniform1i(c[k],P);break;case"float":f.uniform1f(c[k],P);break;default:var X=U.indexOf("vec");if(0<=X&&X<=1&&U.length===4+X){if(N=U.charCodeAt(U.length-1)-48,N<2||N>4)throw new i("","Invalid data type");switch(U.charAt(0)){case"b":case"i":f["uniform"+N+"iv"](c[k],P);break;case"v":f["uniform"+N+"fv"](c[k],P);break;default:throw new i("","Unrecognized data type for vector "+name+": "+U)}}else if(U.indexOf("mat")===0&&U.length===4){if(N=U.charCodeAt(U.length-1)-48,N<2||N>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+U);f["uniformMatrix"+N+"fv"](c[k],!1,P);break}else throw new i("","Unknown uniform data type for "+name+": "+U)}}}}}function p(M,w){if(typeof w!="object")return[[M,w]];var T=[];for(var _ in w){var h=w[_],L=M;parseInt(_)+""===_?L+="["+_+"]":L+="."+_,typeof h=="object"?T.push.apply(T,p(L,h)):T.push([L,h])}return T}function y(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var w=M.indexOf("vec");if(0<=w&&w<=1&&M.length===4+w){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new i("","Invalid data type");return M.charAt(0)==="b"?r(T,!1):r(T,0)}else if(M.indexOf("mat")===0&&M.length===4){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+M);return r(T*T,0)}else throw new i("","Unknown uniform data type for "+name+": "+M)}}function g(M,w,T){if(typeof T=="object"){var _=A(T);Object.defineProperty(M,w,{get:a(_),set:d(T),enumerable:!0,configurable:!1})}else c[T]?Object.defineProperty(M,w,{get:v(T),set:d(T),enumerable:!0,configurable:!1}):M[w]=y(o[T].type)}function A(M){var w;if(Array.isArray(M)){w=new Array(M.length);for(var T=0;T<M.length;++T)g(w,T,M[T])}else{w={};for(var _ in M)g(w,_,M[_])}return w}var b=t(o,!0);return{get:a(A(b)),set:d(b),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(s,m,x){m.exports=t;function t(i,a){for(var r={},n=0;n<i.length;++n)for(var f=i[n].name,l=f.split("."),o=r,c=0;c<l.length;++c){var v=l[c].split("[");if(v.length>1){v[0]in o||(o[v[0]]=[]),o=o[v[0]];for(var d=1;d<v.length;++d){var p=parseInt(v[d]);d<v.length-1||c<l.length-1?(p in o||(d<v.length-1?o[p]=[]:o[p]={}),o=o[p]):a?o[p]=n:o[p]=i[n].type}}else c<l.length-1?(v[0]in o||(o[v[0]]={}),o=o[v[0]]):a?o[v[0]]=n:o[v[0]]=i[n].type}return r}},{}],137:[function(s,m,x){x.uniforms=r,x.attributes=n;var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function a(f,l){if(!i){var o=Object.keys(t);i={};for(var c=0;c<o.length;++c){var v=o[c];i[f[v]]=t[v]}}return i[l]}function r(f,l){for(var o=f.getProgramParameter(l,f.ACTIVE_UNIFORMS),c=[],v=0;v<o;++v){var d=f.getActiveUniform(l,v);if(d){var p=a(f,d.type);if(d.size>1)for(var y=0;y<d.size;++y)c.push({name:d.name.replace("[0]","["+y+"]"),type:p});else c.push({name:d.name,type:p})}}return c}function n(f,l){for(var o=f.getProgramParameter(l,f.ACTIVE_ATTRIBUTES),c=[],v=0;v<o;++v){var d=f.getActiveAttrib(l,v);d&&c.push({name:d.name,type:a(f,d.type)})}return c}},{}],138:[function(s,m,x){x.shader=p,x.program=y;var t=s("./GLError"),i=s("gl-format-compiler-error"),a=typeof WeakMap=="undefined"?s("weakmap-shim"):WeakMap,r=new a,n=0;function f(g,A,b,M,w,T,_){this.id=g,this.src=A,this.type=b,this.shader=M,this.count=T,this.programs=[],this.cache=_}f.prototype.dispose=function(){if(--this.count==0){for(var g=this.cache,A=g.gl,b=this.programs,M=0,w=b.length;M<w;++M){var T=g.programs[b[M]];T&&(delete g.programs[M],A.deleteProgram(T))}A.deleteShader(this.shader),delete g.shaders[this.type===A.FRAGMENT_SHADER|0][this.src]}};function l(g){this.gl=g,this.shaders=[{},{}],this.programs={}}var o=l.prototype;function c(g,A,b){var M=g.createShader(A);if(g.shaderSource(M,b),g.compileShader(M),!g.getShaderParameter(M,g.COMPILE_STATUS)){var w=g.getShaderInfoLog(M);try{var T=i(w,b,A)}catch(_){throw console.warn("Failed to format compiler error: "+_),new t(w,`Error compiling shader:
`+w)}throw new t(w,T.short,T.long)}return M}o.getShaderReference=function(g,A){var b=this.gl,M=this.shaders[g===b.FRAGMENT_SHADER|0],w=M[A];if(!w||!b.isShader(w.shader)){var T=c(b,g,A);w=M[A]=new f(n++,A,g,T,[],1,this)}else w.count+=1;return w};function v(g,A,b,M,w){var T=g.createProgram();g.attachShader(T,A),g.attachShader(T,b);for(var _=0;_<M.length;++_)g.bindAttribLocation(T,w[_],M[_]);if(g.linkProgram(T),!g.getProgramParameter(T,g.LINK_STATUS)){var h=g.getProgramInfoLog(T);throw new t(h,"Error linking program: "+h)}return T}o.getProgram=function(g,A,b,M){var w=[g.id,A.id,b.join(":"),M.join(":")].join("@"),T=this.programs[w];return(!T||!this.gl.isProgram(T))&&(this.programs[w]=T=v(this.gl,g.shader,A.shader,b,M),g.programs.push(w),A.programs.push(w)),T};function d(g){var A=r.get(g);return A||(A=new l(g),r.set(g,A)),A}function p(g,A,b){return d(g).getShaderReference(A,b)}function y(g,A,b,M,w){return d(g).getProgram(A,b,M,w)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(s,m,x){m.exports=a;function t(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var i=t.prototype;i.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},i.draw=function(){var r=this.enable,n=this.width,f=this.color,l=this.center,o=this.plot,c=o.line,v=o.dataBox,d=o.viewBox;if(c.bind(),v[0]<=l[0]&&l[0]<=v[2]&&v[1]<=l[1]&&l[1]<=v[3]){var p=d[0]+(l[0]-v[0])/(v[2]-v[0])*(d[2]-d[0]),y=d[1]+(l[1]-v[1])/(v[3]-v[1])*(d[3]-d[1]);r[0]&&c.drawLine(p,y,d[0],y,n[0],f[0]),r[1]&&c.drawLine(p,y,p,d[1],n[1],f[1]),r[2]&&c.drawLine(p,y,d[2],y,n[2],f[2]),r[3]&&c.drawLine(p,y,p,d[3],n[3],f[3])}},i.dispose=function(){this.plot.removeOverlay(this)};function a(r,n){var f=new t(r);return f.update(n),r.addOverlay(f),f}},{}],140:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),r=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);m.exports=function(n){return i(n,a,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(s,m,x){var t=s("gl-buffer"),i=s("gl-vao"),a=s("./shaders/index");m.exports=v;var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(d,p,y,g){this.gl=d,this.buffer=p,this.vao=y,this.shader=g,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=n.prototype,l=[0,0,0],o=[0,0,0],c=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(d){},f.draw=function(d){var p=this.gl,y=this.vao,g=this.shader;y.bind(),g.bind();var A=d.model||r,b=d.view||r,M=d.projection||r,w;this.axes&&(w=this.axes.lastCubeProps.axis);for(var T=l,_=o,h=0;h<3;++h)w&&w[h]<0?(T[h]=this.bounds[0][h],_[h]=this.bounds[1][h]):(T[h]=this.bounds[1][h],_[h]=this.bounds[0][h]);c[0]=p.drawingBufferWidth,c[1]=p.drawingBufferHeight,g.uniforms.model=A,g.uniforms.view=b,g.uniforms.projection=M,g.uniforms.coordinates=[this.position,T,_],g.uniforms.colors=this.colors,g.uniforms.screenShape=c;for(var h=0;h<3;++h)g.uniforms.lineWidth=this.lineWidth[h]*this.pixelRatio,this.enabled[h]&&(y.draw(p.TRIANGLES,6,6*h),this.drawSides[h]&&y.draw(p.TRIANGLES,12,18+12*h));y.unbind()},f.update=function(d){!d||("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function v(d,p){var y=[];function g(T,_,h,L,S,k){var P=[T,_,h,0,0,0,1];P[L+3]=1,P[L]=S,y.push.apply(y,P),P[6]=-1,y.push.apply(y,P),P[L]=k,y.push.apply(y,P),y.push.apply(y,P),P[6]=1,y.push.apply(y,P),P[L]=S,y.push.apply(y,P)}g(0,0,0,0,0,1),g(0,0,0,1,0,1),g(0,0,0,2,0,1),g(1,0,0,1,-1,1),g(1,0,0,2,-1,1),g(0,1,0,0,-1,1),g(0,1,0,2,-1,1),g(0,0,1,0,-1,1),g(0,0,1,1,-1,1);var A=t(d,y),b=i(d,[{type:d.FLOAT,buffer:A,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:A,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:A,size:1,offset:24,stride:28}]),M=a(d);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var w=new n(d,A,b,M);return w.update(p),w}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(s,m,x){var t=s("glslify"),i=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);x.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},x.pickShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(s,m,x){var t=s("gl-vec3"),i=s("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(y,g,A,b){for(var M=y.points,w=y.velocities,T=y.divergences,_=[],h=[],L=[],S=[],k=[],P=[],O=0,F=0,D=i.create(),R=i.create(),U=8,N=0;N<M.length;N++){var X=M[N],j=w[N],ee=T[N];g===0&&(ee=A*.05),F=t.length(j)/b,D=i.create(),t.copy(D,j),D[3]=ee;for(var q=0;q<U;q++)k[q]=[X[0],X[1],X[2],q];if(S.length>0)for(var q=0;q<U;q++){var G=(q+1)%U;_.push(S[q],k[q],k[G],k[G],S[G],S[q]),L.push(R,D,D,D,R,R),P.push(O,F,F,F,O,O);var J=_.length;h.push([J-6,J-5,J-4],[J-3,J-2,J-1])}var le=S;S=k,k=le;var fe=R;R=D,D=fe;var se=O;O=F,F=se}return{positions:_,cells:h,vectors:L,vertexIntensity:P}},n=function(y,g,A,b){for(var M=0,w=0;w<y.length;w++)for(var T=y[w].velocities,_=0;_<T.length;_++)M=Math.max(M,t.length(T[_]));for(var h=y.map(function(N){return r(N,A,b,M)}),L=[],S=[],k=[],P=[],w=0;w<h.length;w++){var O=h[w],F=L.length;L=L.concat(O.positions),k=k.concat(O.vectors),P=P.concat(O.vertexIntensity);for(var _=0;_<O.cells.length;_++){var D=O.cells[_],R=[];S.push(R);for(var U=0;U<D.length;U++)R.push(D[U]+F)}}return{positions:L,cells:S,vectors:k,vertexIntensity:P,colormap:g}},f=function(y,g){var A=y.length,b;for(b=0;b<A;b++){var M=y[b];if(M===g)return b;if(M>g)return b-1}return b},l=function(y,g,A){return y<g?g:y>A?A:y},o=function(y,g,A){var b=g.vectors,M=g.meshgrid,w=y[0],T=y[1],_=y[2],h=M[0].length,L=M[1].length,S=M[2].length,k=f(M[0],w),P=f(M[1],T),O=f(M[2],_),F=k+1,D=P+1,R=O+1;if(k=l(k,0,h-1),F=l(F,0,h-1),P=l(P,0,L-1),D=l(D,0,L-1),O=l(O,0,S-1),R=l(R,0,S-1),k<0||P<0||O<0||F>h-1||D>L-1||R>S-1)return t.create();var U=M[0][k],N=M[0][F],X=M[1][P],j=M[1][D],ee=M[2][O],q=M[2][R],G=(w-U)/(N-U),J=(T-X)/(j-X),le=(_-ee)/(q-ee);isFinite(G)||(G=.5),isFinite(J)||(J=.5),isFinite(le)||(le=.5);var fe,se,V,Y,ne,te;switch(A.reversedX&&(k=h-1-k,F=h-1-F),A.reversedY&&(P=L-1-P,D=L-1-D),A.reversedZ&&(O=S-1-O,R=S-1-R),A.filled){case 5:ne=O,te=R,V=P*S,Y=D*S,fe=k*S*L,se=F*S*L;break;case 4:ne=O,te=R,fe=k*S,se=F*S,V=P*S*h,Y=D*S*h;break;case 3:V=P,Y=D,ne=O*L,te=R*L,fe=k*L*S,se=F*L*S;break;case 2:V=P,Y=D,fe=k*L,se=F*L,ne=O*L*h,te=R*L*h;break;case 1:fe=k,se=F,ne=O*h,te=R*h,V=P*h*S,Y=D*h*S;break;default:fe=k,se=F,V=P*h,Y=D*h,ne=O*h*L,te=R*h*L;break}var K=b[fe+V+ne],$=b[fe+V+te],ae=b[fe+Y+ne],ie=b[fe+Y+te],oe=b[se+V+ne],ue=b[se+V+te],xe=b[se+Y+ne],he=b[se+Y+te],me=t.create(),be=t.create(),Ce=t.create(),Se=t.create();t.lerp(me,K,oe,G),t.lerp(be,$,ue,G),t.lerp(Ce,ae,xe,G),t.lerp(Se,ie,he,G);var Be=t.create(),Ye=t.create();t.lerp(Be,me,Ce,J),t.lerp(Ye,be,Se,J);var Xe=t.create();return t.lerp(Xe,Be,Ye,le),Xe},c=function(y){var g=1/0;y.sort(function(w,T){return w-T});for(var A=y.length,b=1;b<A;b++){var M=Math.abs(y[b]-y[b-1]);M<g&&(g=M)}return g},v=function(y){for(var g=[],A=[],b=[],M={},w={},T={},_=y.length,h=0;h<_;h++){var L=y[h],S=L[0],k=L[1],P=L[2];M[S]||(g.push(S),M[S]=!0),w[k]||(A.push(k),w[k]=!0),T[P]||(b.push(P),T[P]=!0)}var O=c(g),F=c(A),D=c(b),R=Math.min(O,F,D);return isFinite(R)?R:1};m.exports=function(y,g){var A=y.startingPositions,b=y.maxLength||1e3,M=y.tubeSize||1,w=y.absoluteTubeSize,T=y.gridFill||"+x+y+z",_={};T.indexOf("-x")!==-1&&(_.reversedX=!0),T.indexOf("-y")!==-1&&(_.reversedY=!0),T.indexOf("-z")!==-1&&(_.reversedZ=!0),_.filled=a.indexOf(T.replace(/-/g,"").replace(/\+/g,""));var h=y.getVelocity||function(ue){return o(ue,y,_)},L=y.getDivergence||function(ue,xe){var he=t.create(),me=1e-4;t.add(he,ue,[me,0,0]);var be=h(he);t.subtract(be,be,xe),t.scale(be,be,1/me),t.add(he,ue,[0,me,0]);var Ce=h(he);t.subtract(Ce,Ce,xe),t.scale(Ce,Ce,1/me),t.add(he,ue,[0,0,me]);var Se=h(he);return t.subtract(Se,Se,xe),t.scale(Se,Se,1/me),t.add(he,be,Ce),t.add(he,he,Se),he},S=[],k=g[0][0],P=g[0][1],O=g[0][2],F=g[1][0],D=g[1][1],R=g[1][2],U=function(ue){var xe=ue[0],he=ue[1],me=ue[2];return!(xe<k||xe>F||he<P||he>D||me<O||me>R)},N=t.distance(g[0],g[1]),X=10*N/b,j=X*X,ee=1,q=0,G=A.length;G>1&&(ee=v(A));for(var J=0;J<G;J++){var le=t.create();t.copy(le,A[J]);var fe=[le],se=[],V=h(le),Y=le;se.push(V);var ne=[],te=L(le,V),K=t.length(te);isFinite(K)&&K>q&&(q=K),ne.push(K),S.push({points:fe,velocities:se,divergences:ne});for(var $=0;$<b*100&&fe.length<b&&U(le);){$++;var ae=t.clone(V),ie=t.squaredLength(ae);if(ie===0)break;if(ie>j&&t.scale(ae,ae,X/Math.sqrt(ie)),t.add(ae,ae,le),V=h(ae),t.squaredDistance(Y,ae)-j>-1e-4*j){fe.push(ae),Y=ae,se.push(V);var te=L(ae,V),K=t.length(te);isFinite(K)&&K>q&&(q=K),ne.push(K)}le=ae}}var oe=n(S,y.colormap,q,ee);return w?oe.tubeScale=w:(q===0&&(q=1),oe.tubeScale=M*.5*ee/q),oe};var d=s("./lib/shaders"),p=s("gl-cone3d").createMesh;m.exports.createTubeMesh=function(y,g){return p(y,g,{shaders:d,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(s,m,x){var t=s("gl-shader"),i=s("glslify"),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),r=i([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);x.createShader=function(l){var o=t(l,a,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},x.createPickShader=function(l){var o=t(l,a,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},x.createContourShader=function(l){var o=t(l,n,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},x.createPickContourShader=function(l){var o=t(l,n,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":132,glslify:231}],145:[function(s,m,x){m.exports=se;var t=s("bit-twiddle"),i=s("gl-buffer"),a=s("gl-vao"),r=s("gl-texture2d"),n=s("typedarray-pool"),f=s("colormap"),l=s("ndarray-ops"),o=s("ndarray-pack"),c=s("ndarray"),v=s("surface-nets"),d=s("gl-mat4/multiply"),p=s("gl-mat4/invert"),y=s("binary-search-bounds"),g=s("ndarray-gradient"),A=s("./lib/shaders"),b=A.createShader,M=A.createContourShader,w=A.createPickShader,T=A.createPickContourShader,_=4*(4+3+3),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var V=0;V<3;++V){var Y=S[V],ne=(V+1)%3,te=(V+2)%3;Y[ne+0]=1,Y[te+3]=1,Y[V+6]=1}})();function k(V,Y,ne,te,K){this.position=V,this.index=Y,this.uv=ne,this.level=te,this.dataCoordinate=K}var P=256;function O(V,Y,ne,te,K,$,ae,ie,oe,ue,xe,he,me,be,Ce){this.gl=V,this.shape=Y,this.bounds=ne,this.objectOffset=Ce,this.intensityBounds=[],this._shader=te,this._pickShader=K,this._coordinateBuffer=$,this._vao=ae,this._colorMap=ie,this._contourShader=oe,this._contourPickShader=ue,this._contourBuffer=xe,this._contourVAO=he,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new k([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=me,this._dynamicVAO=be,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[c(n.mallocFloat(1024),[0,0]),c(n.mallocFloat(1024),[0,0]),c(n.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var F=O.prototype;F.genColormap=function(V,Y){var ne=!1,te=o([f({colormap:V,nshades:P,format:"rgba"}).map(function(K,$){var ae=Y?D($/255,Y):K[3];return ae<1&&(ne=!0),[K[0],K[1],K[2],255*ae]})]);return l.divseq(te,255),this.hasAlphaScale=ne,te},F.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},F.isOpaque=function(){return!this.isTransparent()},F.pickSlots=1,F.setPickBase=function(V){this.pickId=V};function D(V,Y){if(!Y||!Y.length)return 1;for(var ne=0;ne<Y.length;++ne){if(Y.length<2)return 1;if(Y[ne][0]===V)return Y[ne][1];if(Y[ne][0]>V&&ne>0){var te=(Y[ne][0]-V)/(Y[ne][0]-Y[ne-1][0]);return Y[ne][1]*(1-te)+te*Y[ne-1][1]}}return 1}var R=[0,0,0],U={showSurface:!1,showContour:!1,projections:[h.slice(),h.slice(),h.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function N(V,Y){var ne,te,K,$=Y.axes&&Y.axes.lastCubeProps.axis||R,ae=Y.showSurface,ie=Y.showContour;for(ne=0;ne<3;++ne)for(ae=ae||Y.surfaceProject[ne],te=0;te<3;++te)ie=ie||Y.contourProject[ne][te];for(ne=0;ne<3;++ne){var oe=U.projections[ne];for(te=0;te<16;++te)oe[te]=0;for(te=0;te<4;++te)oe[5*te]=1;oe[5*ne]=0,oe[12+ne]=Y.axesBounds[+($[ne]>0)][ne],d(oe,V.model,oe);var ue=U.clipBounds[ne];for(K=0;K<2;++K)for(te=0;te<3;++te)ue[K][te]=V.clipBounds[K][te];ue[0][ne]=-1e8,ue[1][ne]=1e8}return U.showSurface=ae,U.showContour=ie,U}var X={model:h,view:h,projection:h,inverseModel:h.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},j=h.slice(),ee=[1,0,0,0,1,0,0,0,1];function q(V,Y){V=V||{};var ne=this.gl;ne.disable(ne.CULL_FACE),this._colorMap.bind(0);var te=X;te.model=V.model||h,te.view=V.view||h,te.projection=V.projection||h,te.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],te.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],te.objectOffset=this.objectOffset,te.contourColor=this.contourColor[0],te.inverseModel=p(te.inverseModel,te.model);for(var K=0;K<2;++K)for(var $=te.clipBounds[K],ae=0;ae<3;++ae)$[ae]=Math.min(Math.max(this.clipBounds[K][ae],-1e8),1e8);te.kambient=this.ambientLight,te.kdiffuse=this.diffuseLight,te.kspecular=this.specularLight,te.roughness=this.roughness,te.fresnel=this.fresnel,te.opacity=this.opacity,te.height=0,te.permutation=ee,te.vertexColor=this.vertexColor;var ie=j;for(d(ie,te.view,te.model),d(ie,te.projection,ie),p(ie,ie),K=0;K<3;++K)te.eyePosition[K]=ie[12+K]/ie[15];var oe=ie[15];for(K=0;K<3;++K)oe+=this.lightPosition[K]*ie[4*K+3];for(K=0;K<3;++K){var ue=ie[12+K];for(ae=0;ae<3;++ae)ue+=ie[4*ae+K]*this.lightPosition[ae];te.lightPosition[K]=ue/oe}var xe=N(te,this);if(xe.showSurface){for(this._shader.bind(),this._shader.uniforms=te,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ne.TRIANGLES,this._vertexCount),K=0;K<3;++K)!this.surfaceProject[K]||!this.vertexCount||(this._shader.uniforms.model=xe.projections[K],this._shader.uniforms.clipBounds=xe.clipBounds[K],this._vao.draw(ne.TRIANGLES,this._vertexCount));this._vao.unbind()}if(xe.showContour){var he=this._contourShader;te.kambient=1,te.kdiffuse=0,te.kspecular=0,te.opacity=1,he.bind(),he.uniforms=te;var me=this._contourVAO;for(me.bind(),K=0;K<3;++K)for(he.uniforms.permutation=S[K],ne.lineWidth(this.contourWidth[K]*this.pixelRatio),ae=0;ae<this.contourLevels[K].length;++ae)ae===this.highlightLevel[K]?(he.uniforms.contourColor=this.highlightColor[K],he.uniforms.contourTint=this.highlightTint[K]):(ae===0||ae-1===this.highlightLevel[K])&&(he.uniforms.contourColor=this.contourColor[K],he.uniforms.contourTint=this.contourTint[K]),!!this._contourCounts[K][ae]&&(he.uniforms.height=this.contourLevels[K][ae],me.draw(ne.LINES,this._contourCounts[K][ae],this._contourOffsets[K][ae]));for(K=0;K<3;++K)for(he.uniforms.model=xe.projections[K],he.uniforms.clipBounds=xe.clipBounds[K],ae=0;ae<3;++ae)if(!!this.contourProject[K][ae]){he.uniforms.permutation=S[ae],ne.lineWidth(this.contourWidth[ae]*this.pixelRatio);for(var be=0;be<this.contourLevels[ae].length;++be)be===this.highlightLevel[ae]?(he.uniforms.contourColor=this.highlightColor[ae],he.uniforms.contourTint=this.highlightTint[ae]):(be===0||be-1===this.highlightLevel[ae])&&(he.uniforms.contourColor=this.contourColor[ae],he.uniforms.contourTint=this.contourTint[ae]),!!this._contourCounts[ae][be]&&(he.uniforms.height=this.contourLevels[ae][be],me.draw(ne.LINES,this._contourCounts[ae][be],this._contourOffsets[ae][be]))}for(me.unbind(),me=this._dynamicVAO,me.bind(),K=0;K<3;++K)if(this._dynamicCounts[K]!==0)for(he.uniforms.model=te.model,he.uniforms.clipBounds=te.clipBounds,he.uniforms.permutation=S[K],ne.lineWidth(this.dynamicWidth[K]*this.pixelRatio),he.uniforms.contourColor=this.dynamicColor[K],he.uniforms.contourTint=this.dynamicTint[K],he.uniforms.height=this.dynamicLevel[K],me.draw(ne.LINES,this._dynamicCounts[K],this._dynamicOffsets[K]),ae=0;ae<3;++ae)!this.contourProject[ae][K]||(he.uniforms.model=xe.projections[ae],he.uniforms.clipBounds=xe.clipBounds[ae],me.draw(ne.LINES,this._dynamicCounts[K],this._dynamicOffsets[K]));me.unbind()}}F.draw=function(V){return q.call(this,V,!1)},F.drawTransparent=function(V){return q.call(this,V,!0)};var G={model:h,view:h,projection:h,inverseModel:h,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};F.drawPick=function(V){V=V||{};var Y=this.gl;Y.disable(Y.CULL_FACE);var ne=G;ne.model=V.model||h,ne.view=V.view||h,ne.projection=V.projection||h,ne.shape=this._field[2].shape,ne.pickId=this.pickId/255,ne.lowerBound=this.bounds[0],ne.upperBound=this.bounds[1],ne.objectOffset=this.objectOffset,ne.permutation=ee;for(var te=0;te<2;++te)for(var K=ne.clipBounds[te],$=0;$<3;++$)K[$]=Math.min(Math.max(this.clipBounds[te][$],-1e8),1e8);var ae=N(ne,this);if(ae.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ne,this._vao.bind(),this._vao.draw(Y.TRIANGLES,this._vertexCount),te=0;te<3;++te)!this.surfaceProject[te]||(this._pickShader.uniforms.model=ae.projections[te],this._pickShader.uniforms.clipBounds=ae.clipBounds[te],this._vao.draw(Y.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ae.showContour){var ie=this._contourPickShader;ie.bind(),ie.uniforms=ne;var oe=this._contourVAO;for(oe.bind(),$=0;$<3;++$)for(Y.lineWidth(this.contourWidth[$]*this.pixelRatio),ie.uniforms.permutation=S[$],te=0;te<this.contourLevels[$].length;++te)this._contourCounts[$][te]&&(ie.uniforms.height=this.contourLevels[$][te],oe.draw(Y.LINES,this._contourCounts[$][te],this._contourOffsets[$][te]));for(te=0;te<3;++te)for(ie.uniforms.model=ae.projections[te],ie.uniforms.clipBounds=ae.clipBounds[te],$=0;$<3;++$)if(!!this.contourProject[te][$]){ie.uniforms.permutation=S[$],Y.lineWidth(this.contourWidth[$]*this.pixelRatio);for(var ue=0;ue<this.contourLevels[$].length;++ue)this._contourCounts[$][ue]&&(ie.uniforms.height=this.contourLevels[$][ue],oe.draw(Y.LINES,this._contourCounts[$][ue],this._contourOffsets[$][ue]))}oe.unbind()}},F.pick=function(V){if(!V||V.id!==this.pickId)return null;var Y=this._field[2].shape,ne=this._pickResult,te=Y[0]*(V.value[0]+(V.value[2]>>4)/16)/255,K=Math.floor(te),$=te-K,ae=Y[1]*(V.value[1]+(V.value[2]&15)/16)/255,ie=Math.floor(ae),oe=ae-ie;K+=1,ie+=1;var ue=ne.position;ue[0]=ue[1]=ue[2]=0;for(var xe=0;xe<2;++xe)for(var he=xe?$:1-$,me=0;me<2;++me)for(var be=me?oe:1-oe,Ce=K+xe,Se=ie+me,Be=he*be,Ye=0;Ye<3;++Ye)ue[Ye]+=this._field[Ye].get(Ce,Se)*Be;for(var Xe=this._pickResult.level,Te=0;Te<3;++Te)if(Xe[Te]=y.le(this.contourLevels[Te],ue[Te]),Xe[Te]<0)this.contourLevels[Te].length>0&&(Xe[Te]=0);else if(Xe[Te]<this.contourLevels[Te].length-1){var Ie=this.contourLevels[Te][Xe[Te]],Ze=this.contourLevels[Te][Xe[Te]+1];Math.abs(Ie-ue[Te])>Math.abs(Ze-ue[Te])&&(Xe[Te]+=1)}for(ne.index[0]=$<.5?K:K+1,ne.index[1]=oe<.5?ie:ie+1,ne.uv[0]=te/Y[0],ne.uv[1]=ae/Y[1],Ye=0;Ye<3;++Ye)ne.dataCoordinate[Ye]=this._field[Ye].get(ne.index[0],ne.index[1]);return ne},F.padField=function(V,Y){var ne=Y.shape.slice(),te=V.shape.slice();l.assign(V.lo(1,1).hi(ne[0],ne[1]),Y),l.assign(V.lo(1).hi(ne[0],1),Y.hi(ne[0],1)),l.assign(V.lo(1,te[1]-1).hi(ne[0],1),Y.lo(0,ne[1]-1).hi(ne[0],1)),l.assign(V.lo(0,1).hi(1,ne[1]),Y.hi(1)),l.assign(V.lo(te[0]-1,1).hi(1,ne[1]),Y.lo(ne[0]-1)),V.set(0,0,Y.get(0,0)),V.set(0,te[1]-1,Y.get(0,ne[1]-1)),V.set(te[0]-1,0,Y.get(ne[0]-1,0)),V.set(te[0]-1,te[1]-1,Y.get(ne[0]-1,ne[1]-1))};function J(V,Y){return Array.isArray(V)?[Y(V[0]),Y(V[1]),Y(V[2])]:[Y(V),Y(V),Y(V)]}function le(V){return Array.isArray(V)?V.length===3?[V[0],V[1],V[2],1]:[V[0],V[1],V[2],V[3]]:[0,0,0,1]}function fe(V){if(Array.isArray(V)){if(Array.isArray(V))return[le(V[0]),le(V[1]),le(V[2])];var Y=le(V);return[Y.slice(),Y.slice(),Y.slice()]}}F.update=function(V){V=V||{},this.objectOffset=V.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in V&&(this.contourWidth=J(V.contourWidth,Number)),"showContour"in V&&(this.showContour=J(V.showContour,Boolean)),"showSurface"in V&&(this.showSurface=!!V.showSurface),"contourTint"in V&&(this.contourTint=J(V.contourTint,Boolean)),"contourColor"in V&&(this.contourColor=fe(V.contourColor)),"contourProject"in V&&(this.contourProject=J(V.contourProject,function(kt){return J(kt,Boolean)})),"surfaceProject"in V&&(this.surfaceProject=V.surfaceProject),"dynamicColor"in V&&(this.dynamicColor=fe(V.dynamicColor)),"dynamicTint"in V&&(this.dynamicTint=J(V.dynamicTint,Number)),"dynamicWidth"in V&&(this.dynamicWidth=J(V.dynamicWidth,Number)),"opacity"in V&&(this.opacity=V.opacity),"opacityscale"in V&&(this.opacityscale=V.opacityscale),"colorBounds"in V&&(this.colorBounds=V.colorBounds),"vertexColor"in V&&(this.vertexColor=V.vertexColor?1:0),"colormap"in V&&this._colorMap.setPixels(this.genColormap(V.colormap,this.opacityscale));var Y=V.field||V.coords&&V.coords[2]||null,ne=!1;if(Y||(this._field[2].shape[0]||this._field[2].shape[2]?Y=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):Y=this._field[2].hi(0,0)),"field"in V||"coords"in V){var te=(Y.shape[0]+2)*(Y.shape[1]+2);te>this._field[2].data.length&&(n.freeFloat(this._field[2].data),this._field[2].data=n.mallocFloat(t.nextPow2(te))),this._field[2]=c(this._field[2].data,[Y.shape[0]+2,Y.shape[1]+2]),this.padField(this._field[2],Y),this.shape=Y.shape.slice();for(var K=this.shape,$=0;$<2;++$)this._field[2].size>this._field[$].data.length&&(n.freeFloat(this._field[$].data),this._field[$].data=n.mallocFloat(this._field[2].size)),this._field[$]=c(this._field[$].data,[K[0]+2,K[1]+2]);if(V.coords){var ae=V.coords;if(!Array.isArray(ae)||ae.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for($=0;$<2;++$){var ie=ae[$];for(me=0;me<2;++me)if(ie.shape[me]!==K[me])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[$],ie)}}else if(V.ticks){var oe=V.ticks;if(!Array.isArray(oe)||oe.length!==2)throw new Error("gl-surface: invalid ticks");for($=0;$<2;++$){var ue=oe[$];if((Array.isArray(ue)||ue.length)&&(ue=c(ue)),ue.shape[0]!==K[$])throw new Error("gl-surface: invalid tick length");var xe=c(ue.data,K);xe.stride[$]=ue.stride[0],xe.stride[$^1]=0,this.padField(this._field[$],xe)}}else{for($=0;$<2;++$){var he=[0,0];he[$]=1,this._field[$]=c(this._field[$].data,[K[0]+2,K[1]+2],he,0)}this._field[0].set(0,0,0);for(var me=0;me<K[0];++me)this._field[0].set(me+1,0,me);for(this._field[0].set(K[0]+1,0,K[0]-1),this._field[1].set(0,0,0),me=0;me<K[1];++me)this._field[1].set(0,me+1,me);this._field[1].set(0,K[1]+1,K[1]-1)}var be=this._field,Ce=c(n.mallocFloat(be[2].size*3*2),[3,K[0]+2,K[1]+2,2]);for($=0;$<3;++$)g(Ce.pick($),be[$],"mirror");var Se=c(n.mallocFloat(be[2].size*3),[K[0]+2,K[1]+2,3]);for($=0;$<K[0]+2;++$)for(me=0;me<K[1]+2;++me){var Be=Ce.get(0,$,me,0),Ye=Ce.get(0,$,me,1),Xe=Ce.get(1,$,me,0),Te=Ce.get(1,$,me,1),Ie=Ce.get(2,$,me,0),Ze=Ce.get(2,$,me,1),rt=Xe*Ze-Te*Ie,Ge=Ie*Ye-Ze*Be,ze=Be*Te-Ye*Xe,We=Math.sqrt(rt*rt+Ge*Ge+ze*ze);We<1e-8?(We=Math.max(Math.abs(rt),Math.abs(Ge),Math.abs(ze)),We<1e-8?(ze=1,Ge=rt=0,We=1):We=1/We):We=1/Math.sqrt(We),Se.set($,me,0,rt*We),Se.set($,me,1,Ge*We),Se.set($,me,2,ze*We)}n.free(Ce.data);var mt=[1/0,1/0,1/0],Ft=[-1/0,-1/0,-1/0],Xt=1/0,Pt=-1/0,Ut=(K[0]-1)*(K[1]-1)*6,Gt=n.mallocFloat(t.nextPow2(10*Ut)),It=0,Ct=0;for($=0;$<K[0]-1;++$){e:for(me=0;me<K[1]-1;++me){for(var lt=0;lt<2;++lt)for(var dt=0;dt<2;++dt)for(var et=0;et<3;++et){var Pe=this._field[et].get(1+$+lt,1+me+dt);if(isNaN(Pe)||!isFinite(Pe))continue e}for(et=0;et<6;++et){var Je=$+L[et][0],it=me+L[et][1],ht=this._field[0].get(Je+1,it+1),zt=this._field[1].get(Je+1,it+1);Pe=this._field[2].get(Je+1,it+1),rt=Se.get(Je+1,it+1,0),Ge=Se.get(Je+1,it+1,1),ze=Se.get(Je+1,it+1,2),V.intensity&&(Lt=V.intensity.get(Je,it));var Lt=V.intensity?V.intensity.get(Je,it):Pe+this.objectOffset[2];Gt[It++]=Je,Gt[It++]=it,Gt[It++]=ht,Gt[It++]=zt,Gt[It++]=Pe,Gt[It++]=0,Gt[It++]=Lt,Gt[It++]=rt,Gt[It++]=Ge,Gt[It++]=ze,mt[0]=Math.min(mt[0],ht+this.objectOffset[0]),mt[1]=Math.min(mt[1],zt+this.objectOffset[1]),mt[2]=Math.min(mt[2],Pe+this.objectOffset[2]),Xt=Math.min(Xt,Lt),Ft[0]=Math.max(Ft[0],ht+this.objectOffset[0]),Ft[1]=Math.max(Ft[1],zt+this.objectOffset[1]),Ft[2]=Math.max(Ft[2],Pe+this.objectOffset[2]),Pt=Math.max(Pt,Lt),Ct+=1}}}for(V.intensityBounds&&(Xt=+V.intensityBounds[0],Pt=+V.intensityBounds[1]),$=6;$<It;$+=10)Gt[$]=(Gt[$]-Xt)/(Pt-Xt);this._vertexCount=Ct,this._coordinateBuffer.update(Gt.subarray(0,It)),n.freeFloat(Gt),n.free(Se.data),this.bounds=[mt,Ft],this.intensity=V.intensity||this._field[2],(this.intensityBounds[0]!==Xt||this.intensityBounds[1]!==Pt)&&(ne=!0),this.intensityBounds=[Xt,Pt]}if("levels"in V){var Vt=V.levels;for(Array.isArray(Vt[0])?Vt=Vt.slice():Vt=[[],[],Vt],$=0;$<3;++$)Vt[$]=Vt[$].slice(),Vt[$].sort(function(kt,jt){return kt-jt});for($=0;$<3;++$)for(me=0;me<Vt[$].length;++me)Vt[$][me]-=this.objectOffset[$];e:for($=0;$<3;++$){if(Vt[$].length!==this.contourLevels[$].length){ne=!0;break}for(me=0;me<Vt[$].length;++me)if(Vt[$][me]!==this.contourLevels[$][me]){ne=!0;break e}}this.contourLevels=Vt}if(ne){be=this._field,K=this.shape;for(var $t=[],Ht=0;Ht<3;++Ht){var tr=this.contourLevels[Ht],qe=[],xt=[],Rt=[0,0,0];for($=0;$<tr.length;++$){var fr=v(this._field[Ht],tr[$]);qe.push($t.length/5|0),Ct=0;e:for(me=0;me<fr.cells.length;++me){var br=fr.cells[me];for(et=0;et<2;++et){var pr=fr.positions[br[et]],Tr=pr[0],Nr=Math.floor(Tr)|0,Ir=Tr-Nr,lr=pr[1],Yr=Math.floor(lr)|0,nt=lr-Yr,Ae=!1;t:for(var Ee=0;Ee<3;++Ee){Rt[Ee]=0;var Fe=(Ht+Ee+1)%3;for(lt=0;lt<2;++lt){var Ke=lt?Ir:1-Ir;for(Je=Math.min(Math.max(Nr+lt,0),K[0])|0,dt=0;dt<2;++dt){var tt=dt?nt:1-nt;if(it=Math.min(Math.max(Yr+dt,0),K[1])|0,Ee<2?Pe=this._field[Fe].get(Je,it):Pe=(this.intensity.get(Je,it)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Pe)||isNaN(Pe)){Ae=!0;break t}var ut=Ke*tt;Rt[Ee]+=ut*Pe}}}if(!Ae)$t.push(Rt[0],Rt[1],pr[0],pr[1],Rt[2]),Ct+=1;else{if(et>0){for(var ct=0;ct<5;++ct)$t.pop();Ct-=1}continue e}}}xt.push(Ct)}this._contourOffsets[Ht]=qe,this._contourCounts[Ht]=xt}var yt=n.mallocFloat($t.length);for($=0;$<$t.length;++$)yt[$]=$t[$];this._contourBuffer.update(yt),n.freeFloat(yt)}},F.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var V=0;V<3;++V)n.freeFloat(this._field[V].data)},F.highlight=function(V){var Y;if(!V){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(Y=0;Y<3;++Y)this.enableHighlight[Y]?this.highlightLevel[Y]=V.level[Y]:this.highlightLevel[Y]=-1;var ne;for(this.snapToData?ne=V.dataCoordinate:ne=V.position,Y=0;Y<3;++Y)ne[Y]-=this.objectOffset[Y];if(!((!this.enableDynamic[0]||ne[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ne[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ne[2]===this.dynamicLevel[2]))){for(var te=0,K=this.shape,$=n.mallocFloat(12*K[0]*K[1]),ae=0;ae<3;++ae){if(!this.enableDynamic[ae]){this.dynamicLevel[ae]=NaN,this._dynamicCounts[ae]=0;continue}this.dynamicLevel[ae]=ne[ae];var ie=(ae+1)%3,oe=(ae+2)%3,ue=this._field[ae],xe=this._field[ie],he=this._field[oe],me=v(ue,ne[ae]),be=me.cells,Ce=me.positions;for(this._dynamicOffsets[ae]=te,Y=0;Y<be.length;++Y)for(var Se=be[Y],Be=0;Be<2;++Be){var Ye=Ce[Se[Be]],Xe=+Ye[0],Te=Xe|0,Ie=Math.min(Te+1,K[0])|0,Ze=Xe-Te,rt=1-Ze,Ge=+Ye[1],ze=Ge|0,We=Math.min(ze+1,K[1])|0,mt=Ge-ze,Ft=1-mt,Xt=rt*Ft,Pt=rt*mt,Ut=Ze*Ft,Gt=Ze*mt,It=Xt*xe.get(Te,ze)+Pt*xe.get(Te,We)+Ut*xe.get(Ie,ze)+Gt*xe.get(Ie,We),Ct=Xt*he.get(Te,ze)+Pt*he.get(Te,We)+Ut*he.get(Ie,ze)+Gt*he.get(Ie,We);if(isNaN(It)||isNaN(Ct)){Be&&(te-=1);break}$[2*te+0]=It,$[2*te+1]=Ct,te+=1}this._dynamicCounts[ae]=te-this._dynamicOffsets[ae]}this._dynamicBuffer.update($.subarray(0,2*te)),n.freeFloat($)}};function se(V){var Y=V.gl,ne=b(Y),te=w(Y),K=M(Y),$=T(Y),ae=i(Y),ie=a(Y,[{buffer:ae,size:4,stride:_,offset:0},{buffer:ae,size:3,stride:_,offset:16},{buffer:ae,size:3,stride:_,offset:28}]),oe=i(Y),ue=a(Y,[{buffer:oe,size:4,stride:20,offset:0},{buffer:oe,size:1,stride:20,offset:16}]),xe=i(Y),he=a(Y,[{buffer:xe,size:2,type:Y.FLOAT}]),me=r(Y,1,P,Y.RGBA,Y.UNSIGNED_BYTE);me.minFilter=Y.LINEAR,me.magFilter=Y.LINEAR;var be=new O(Y,[0,0],[[0,0,0],[0,0,0]],ne,te,ae,ie,me,K,$,oe,ue,xe,he,[0,0,0]),Ce={levels:[[],[],[]]};for(var Se in V)Ce[Se]=V[Se];return Ce.colormap=Ce.colormap||"jet",be.update(Ce),be}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(s,m,x){var t=s("ndarray"),i=s("ndarray-ops"),a=s("typedarray-pool");m.exports=T;var r=null,n=null,f=null;function l(_){r=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],n=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],f=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function o(_){return typeof HTMLCanvasElement!="undefined"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&_ instanceof HTMLVideoElement||typeof ImageData!="undefined"&&_ instanceof ImageData}var c=function(_,h){i.muls(_,h,255)};function v(_,h,L){var S=_.gl,k=S.getParameter(S.MAX_TEXTURE_SIZE);if(h<0||h>k||L<0||L>k)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[h,L],_.bind(),S.texImage2D(S.TEXTURE_2D,0,_.format,h,L,0,_.format,_.type,null),_._mipLevels=[0],_}function d(_,h,L,S,k,P){this.gl=_,this.handle=h,this.format=k,this.type=P,this._shape=[L,S],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var O=this,F=[this._wrapS,this._wrapT];Object.defineProperties(F,[{get:function(){return O._wrapS},set:function(R){return O.wrapS=R}},{get:function(){return O._wrapT},set:function(R){return O.wrapT=R}}]),this._wrapVector=F;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return O._shape[0]},set:function(R){return O.width=R}},{get:function(){return O._shape[1]},set:function(R){return O.height=R}}]),this._shapeVector=D}var p=d.prototype;Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&r.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),n.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&r.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),n.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var h=this._anisoSamples;if(this._anisoSamples=Math.max(_,1)|0,h!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),f.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),f.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(f.indexOf(_[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(!Array.isArray(_))_=[_|0,_|0];else if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return v(this,_[0]|0,_[1]|0),[_[0]|0,_[1]|0]}},width:{get:function(){return this._shape[0]},set:function(_){return _=_|0,v(this,_,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _=_|0,v(this,this._shape[0],_),_}}}),p.bind=function(_){var h=this.gl;return _!==void 0&&h.activeTexture(h.TEXTURE0+(_|0)),h.bindTexture(h.TEXTURE_2D,this.handle),_!==void 0?_|0:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),h=0;_>0;++h,_>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},p.setPixels=function(_,h,L,S){var k=this.gl;this.bind(),Array.isArray(h)?(S=L,L=h[1]|0,h=h[0]|0):(h=h||0,L=L||0),S=S||0;var P=o(_)?_:_.raw;if(P){var O=this._mipLevels.indexOf(S)<0;O?(k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(S)):k.texSubImage2D(k.TEXTURE_2D,S,h,L,this.format,this.type,P)}else if(_.shape&&_.stride&&_.data){if(_.shape.length<2||h+_.shape[1]>this._shape[1]>>>S||L+_.shape[0]>this._shape[0]>>>S||h<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");g(k,h,L,S,this.format,this.type,this._mipLevels,_)}else throw new Error("gl-texture2d: Unsupported data type")};function y(_,h){return _.length===3?h[2]===1&&h[1]===_[0]*_[2]&&h[0]===_[2]:h[0]===1&&h[1]===_[0]}function g(_,h,L,S,k,P,O,F){var D=F.dtype,R=F.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var U=0,N=0,X=y(R,F.stride.slice());if(D==="float32"?U=_.FLOAT:D==="float64"?(U=_.FLOAT,X=!1,D="float32"):D==="uint8"?U=_.UNSIGNED_BYTE:(U=_.UNSIGNED_BYTE,X=!1,D="uint8"),R.length===2)N=_.LUMINANCE,R=[R[0],R[1],1],F=t(F.data,R,[F.stride[0],F.stride[1],1],F.offset);else if(R.length===3)if(R[2]===1)N=_.ALPHA;else if(R[2]===2)N=_.LUMINANCE_ALPHA;else if(R[2]===3)N=_.RGB;else if(R[2]===4)N=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");if((N===_.LUMINANCE||N===_.ALPHA)&&(k===_.LUMINANCE||k===_.ALPHA)&&(N=k),N!==k)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var j=F.size,ee=O.indexOf(S)<0;if(ee&&O.push(S),U===P&&X)F.offset===0&&F.data.length===j?ee?_.texImage2D(_.TEXTURE_2D,S,k,R[0],R[1],0,k,P,F.data):_.texSubImage2D(_.TEXTURE_2D,S,h,L,R[0],R[1],k,P,F.data):ee?_.texImage2D(_.TEXTURE_2D,S,k,R[0],R[1],0,k,P,F.data.subarray(F.offset,F.offset+j)):_.texSubImage2D(_.TEXTURE_2D,S,h,L,R[0],R[1],k,P,F.data.subarray(F.offset,F.offset+j));else{var q;P===_.FLOAT?q=a.mallocFloat32(j):q=a.mallocUint8(j);var G=t(q,R,[R[2],R[2]*R[0],1]);U===_.FLOAT&&P===_.UNSIGNED_BYTE?c(G,F):i.assign(G,F),ee?_.texImage2D(_.TEXTURE_2D,S,k,R[0],R[1],0,k,P,q.subarray(0,j)):_.texSubImage2D(_.TEXTURE_2D,S,h,L,R[0],R[1],k,P,q.subarray(0,j)),P===_.FLOAT?a.freeFloat32(q):a.freeUint8(q)}}function A(_){var h=_.createTexture();return _.bindTexture(_.TEXTURE_2D,h),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),h}function b(_,h,L,S,k){var P=_.getParameter(_.MAX_TEXTURE_SIZE);if(h<0||h>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(k===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var O=A(_);return _.texImage2D(_.TEXTURE_2D,0,S,h,L,0,S,k,null),new d(_,O,h,L,S,k)}function M(_,h,L,S,k,P){var O=A(_);return _.texImage2D(_.TEXTURE_2D,0,k,k,P,h),new d(_,O,L,S,k,P)}function w(_,h){var L=h.dtype,S=h.shape.slice(),k=_.getParameter(_.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>k||S[1]<0||S[1]>k)throw new Error("gl-texture2d: Invalid texture size");var P=y(S,h.stride.slice()),O=0;L==="float32"?O=_.FLOAT:L==="float64"?(O=_.FLOAT,P=!1,L="float32"):L==="uint8"?O=_.UNSIGNED_BYTE:(O=_.UNSIGNED_BYTE,P=!1,L="uint8");var F=0;if(S.length===2)F=_.LUMINANCE,S=[S[0],S[1],1],h=t(h.data,S,[h.stride[0],h.stride[1],1],h.offset);else if(S.length===3)if(S[2]===1)F=_.ALPHA;else if(S[2]===2)F=_.LUMINANCE_ALPHA;else if(S[2]===3)F=_.RGB;else if(S[2]===4)F=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");O===_.FLOAT&&!_.getExtension("OES_texture_float")&&(O=_.UNSIGNED_BYTE,P=!1);var D,R,U=h.size;if(P)h.offset===0&&h.data.length===U?D=h.data:D=h.data.subarray(h.offset,h.offset+U);else{var N=[S[2],S[2]*S[0],1];R=a.malloc(U,L);var X=t(R,S,N,0);(L==="float32"||L==="float64")&&O===_.UNSIGNED_BYTE?c(X,h):i.assign(X,h),D=R.subarray(0,U)}var j=A(_);return _.texImage2D(_.TEXTURE_2D,0,F,S[0],S[1],0,F,O,D),P||a.free(R),new d(_,j,S[0],S[1],F,O)}function T(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||l(_),typeof arguments[1]=="number")return b(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(_,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],L=o(h)?h:h.raw;if(L)return M(_,L,h.width|0,h.height|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return w(_,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(s,m,x){function t(i,a,r){a?a.bind():i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null);var n=i.getParameter(i.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<r.length;++f){var l=r[f];if(l.buffer){var o=l.buffer,c=l.size||4,v=l.type||i.FLOAT,d=!!l.normalized,p=l.stride||0,y=l.offset||0;o.bind(),i.enableVertexAttribArray(f),i.vertexAttribPointer(f,c,v,d,p,y)}else{if(typeof l=="number")i.vertexAttrib1f(f,l);else if(l.length===1)i.vertexAttrib1f(f,l[0]);else if(l.length===2)i.vertexAttrib2f(f,l[0],l[1]);else if(l.length===3)i.vertexAttrib3f(f,l[0],l[1],l[2]);else if(l.length===4)i.vertexAttrib4f(f,l[0],l[1],l[2],l[3]);else throw new Error("gl-vao: Invalid vertex attribute");i.disableVertexAttribArray(f)}}for(;f<n;++f)i.disableVertexAttribArray(f)}else{i.bindBuffer(i.ARRAY_BUFFER,null);for(var f=0;f<n;++f)i.disableVertexAttribArray(f)}}m.exports=t},{}],148:[function(s,m,x){var t=s("./do-bind.js");function i(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}i.prototype.bind=function(){t(this.gl,this._elements,this._attributes)},i.prototype.update=function(r,n,f){this._elements=n,this._attributes=r,this._elementsType=f||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(r,n,f){f=f||0;var l=this.gl;this._elements?l.drawElements(r,n,this._elementsType,f):l.drawArrays(r,f,n)};function a(r){return new i(r)}m.exports=a},{"./do-bind.js":147}],149:[function(s,m,x){var t=s("./do-bind.js");function i(n,f,l,o,c,v){this.location=n,this.dimension=f,this.a=l,this.b=o,this.c=c,this.d=v}i.prototype.bind=function(n){switch(this.dimension){case 1:n.vertexAttrib1f(this.location,this.a);break;case 2:n.vertexAttrib2f(this.location,this.a,this.b);break;case 3:n.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:n.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function a(n,f,l){this.gl=n,this._ext=f,this.handle=l,this._attribs=[],this._useElements=!1,this._elementsType=n.UNSIGNED_SHORT}a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var n=0;n<this._attribs.length;++n)this._attribs[n].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(n,f,l){if(this.bind(),t(this.gl,f,n),this.unbind(),this._attribs.length=0,n)for(var o=0;o<n.length;++o){var c=n[o];typeof c=="number"?this._attribs.push(new i(o,1,c)):Array.isArray(c)&&this._attribs.push(new i(o,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!f,this._elementsType=l||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(n,f,l){l=l||0;var o=this.gl;this._useElements?o.drawElements(n,f,this._elementsType,l):o.drawArrays(n,l,f)};function r(n,f){return new a(n,f,f.createVertexArrayOES())}m.exports=r},{"./do-bind.js":147}],150:[function(s,m,x){var t=s("./lib/vao-native.js"),i=s("./lib/vao-emulated.js");function a(n){this.bindVertexArrayOES=n.bindVertexArray.bind(n),this.createVertexArrayOES=n.createVertexArray.bind(n),this.deleteVertexArrayOES=n.deleteVertexArray.bind(n)}function r(n,f,l,o){var c=n.createVertexArray?new a(n):n.getExtension("OES_vertex_array_object"),v;return c?v=t(n,c):v=i(n),v.update(f,l,o),v}m.exports=r},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]+r[0],i[1]=a[1]+r[1],i[2]=a[2]+r[2],i}},{}],152:[function(s,m,x){m.exports=r;var t=s("./fromValues"),i=s("./normalize"),a=s("./dot");function r(n,f){var l=t(n[0],n[1],n[2]),o=t(f[0],f[1],f[2]);i(l,l),i(o,o);var c=a(l,o);return c>1?0:Math.acos(c)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=Math.ceil(a[0]),i[1]=Math.ceil(a[1]),i[2]=Math.ceil(a[2]),i}},{}],154:[function(s,m,x){m.exports=t;function t(i){var a=new Float32Array(3);return a[0]=i[0],a[1]=i[1],a[2]=i[2],a}},{}],155:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}},{}],156:[function(s,m,x){m.exports=t;function t(){var i=new Float32Array(3);return i[0]=0,i[1]=0,i[2]=0,i}},{}],157:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=r[0],c=r[1],v=r[2];return i[0]=f*v-l*c,i[1]=l*o-n*v,i[2]=n*c-f*o,i}},{}],158:[function(s,m,x){m.exports=s("./distance")},{"./distance":159}],159:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0]-i[0],n=a[1]-i[1],f=a[2]-i[2];return Math.sqrt(r*r+n*n+f*f)}},{}],160:[function(s,m,x){m.exports=s("./divide")},{"./divide":161}],161:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]/r[0],i[1]=a[1]/r[1],i[2]=a[2]/r[2],i}},{}],162:[function(s,m,x){m.exports=t;function t(i,a){return i[0]*a[0]+i[1]*a[1]+i[2]*a[2]}},{}],163:[function(s,m,x){m.exports=1e-6},{}],164:[function(s,m,x){m.exports=i;var t=s("./epsilon");function i(a,r){var n=a[0],f=a[1],l=a[2],o=r[0],c=r[1],v=r[2];return Math.abs(n-o)<=t*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(f-c)<=t*Math.max(1,Math.abs(f),Math.abs(c))&&Math.abs(l-v)<=t*Math.max(1,Math.abs(l),Math.abs(v))}},{"./epsilon":163}],165:[function(s,m,x){m.exports=t;function t(i,a){return i[0]===a[0]&&i[1]===a[1]&&i[2]===a[2]}},{}],166:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=Math.floor(a[0]),i[1]=Math.floor(a[1]),i[2]=Math.floor(a[2]),i}},{}],167:[function(s,m,x){m.exports=i;var t=s("./create")();function i(a,r,n,f,l,o){var c,v;for(r||(r=3),n||(n=0),f?v=Math.min(f*r+n,a.length):v=a.length,c=n;c<v;c+=r)t[0]=a[c],t[1]=a[c+1],t[2]=a[c+2],l(t,t,o),a[c]=t[0],a[c+1]=t[1],a[c+2]=t[2];return a}},{"./create":156}],168:[function(s,m,x){m.exports=t;function t(i,a,r){var n=new Float32Array(3);return n[0]=i,n[1]=a,n[2]=r,n}},{}],169:[function(s,m,x){m.exports={EPSILON:s("./epsilon"),create:s("./create"),clone:s("./clone"),angle:s("./angle"),fromValues:s("./fromValues"),copy:s("./copy"),set:s("./set"),equals:s("./equals"),exactEquals:s("./exactEquals"),add:s("./add"),subtract:s("./subtract"),sub:s("./sub"),multiply:s("./multiply"),mul:s("./mul"),divide:s("./divide"),div:s("./div"),min:s("./min"),max:s("./max"),floor:s("./floor"),ceil:s("./ceil"),round:s("./round"),scale:s("./scale"),scaleAndAdd:s("./scaleAndAdd"),distance:s("./distance"),dist:s("./dist"),squaredDistance:s("./squaredDistance"),sqrDist:s("./sqrDist"),length:s("./length"),len:s("./len"),squaredLength:s("./squaredLength"),sqrLen:s("./sqrLen"),negate:s("./negate"),inverse:s("./inverse"),normalize:s("./normalize"),dot:s("./dot"),cross:s("./cross"),lerp:s("./lerp"),random:s("./random"),transformMat4:s("./transformMat4"),transformMat3:s("./transformMat3"),transformQuat:s("./transformQuat"),rotateX:s("./rotateX"),rotateY:s("./rotateY"),rotateZ:s("./rotateZ"),forEach:s("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=1/a[0],i[1]=1/a[1],i[2]=1/a[2],i}},{}],171:[function(s,m,x){m.exports=s("./length")},{"./length":172}],172:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2];return Math.sqrt(a*a+r*r+n*n)}},{}],173:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=a[0],l=a[1],o=a[2];return i[0]=f+n*(r[0]-f),i[1]=l+n*(r[1]-l),i[2]=o+n*(r[2]-o),i}},{}],174:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=Math.max(a[0],r[0]),i[1]=Math.max(a[1],r[1]),i[2]=Math.max(a[2],r[2]),i}},{}],175:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=Math.min(a[0],r[0]),i[1]=Math.min(a[1],r[1]),i[2]=Math.min(a[2],r[2]),i}},{}],176:[function(s,m,x){m.exports=s("./multiply")},{"./multiply":177}],177:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]*r[0],i[1]=a[1]*r[1],i[2]=a[2]*r[2],i}},{}],178:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=-a[0],i[1]=-a[1],i[2]=-a[2],i}},{}],179:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0],n=a[1],f=a[2],l=r*r+n*n+f*f;return l>0&&(l=1/Math.sqrt(l),i[0]=a[0]*l,i[1]=a[1]*l,i[2]=a[2]*l),i}},{}],180:[function(s,m,x){m.exports=t;function t(i,a){a=a||1;var r=Math.random()*2*Math.PI,n=Math.random()*2-1,f=Math.sqrt(1-n*n)*a;return i[0]=Math.cos(r)*f,i[1]=Math.sin(r)*f,i[2]=n*a,i}},{}],181:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=r[1],l=r[2],o=a[1]-f,c=a[2]-l,v=Math.sin(n),d=Math.cos(n);return i[0]=a[0],i[1]=f+o*d-c*v,i[2]=l+o*v+c*d,i}},{}],182:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=r[0],l=r[2],o=a[0]-f,c=a[2]-l,v=Math.sin(n),d=Math.cos(n);return i[0]=f+c*v+o*d,i[1]=a[1],i[2]=l+c*d-o*v,i}},{}],183:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=r[0],l=r[1],o=a[0]-f,c=a[1]-l,v=Math.sin(n),d=Math.cos(n);return i[0]=f+o*d-c*v,i[1]=l+o*v+c*d,i[2]=a[2],i}},{}],184:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=Math.round(a[0]),i[1]=Math.round(a[1]),i[2]=Math.round(a[2]),i}},{}],185:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]*r,i[1]=a[1]*r,i[2]=a[2]*r,i}},{}],186:[function(s,m,x){m.exports=t;function t(i,a,r,n){return i[0]=a[0]+r[0]*n,i[1]=a[1]+r[1]*n,i[2]=a[2]+r[2]*n,i}},{}],187:[function(s,m,x){m.exports=t;function t(i,a,r,n){return i[0]=a,i[1]=r,i[2]=n,i}},{}],188:[function(s,m,x){m.exports=s("./squaredDistance")},{"./squaredDistance":190}],189:[function(s,m,x){m.exports=s("./squaredLength")},{"./squaredLength":191}],190:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0]-i[0],n=a[1]-i[1],f=a[2]-i[2];return r*r+n*n+f*f}},{}],191:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2];return a*a+r*r+n*n}},{}],192:[function(s,m,x){m.exports=s("./subtract")},{"./subtract":193}],193:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]-r[0],i[1]=a[1]-r[1],i[2]=a[2]-r[2],i}},{}],194:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2];return i[0]=n*r[0]+f*r[3]+l*r[6],i[1]=n*r[1]+f*r[4]+l*r[7],i[2]=n*r[2]+f*r[5]+l*r[8],i}},{}],195:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=r[3]*n+r[7]*f+r[11]*l+r[15];return o=o||1,i[0]=(r[0]*n+r[4]*f+r[8]*l+r[12])/o,i[1]=(r[1]*n+r[5]*f+r[9]*l+r[13])/o,i[2]=(r[2]*n+r[6]*f+r[10]*l+r[14])/o,i}},{}],196:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=r[0],c=r[1],v=r[2],d=r[3],p=d*n+c*l-v*f,y=d*f+v*n-o*l,g=d*l+o*f-c*n,A=-o*n-c*f-v*l;return i[0]=p*d+A*-o+y*-v-g*-c,i[1]=y*d+A*-c+g*-o-p*-v,i[2]=g*d+A*-v+p*-c-y*-o,i}},{}],197:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]+r[0],i[1]=a[1]+r[1],i[2]=a[2]+r[2],i[3]=a[3]+r[3],i}},{}],198:[function(s,m,x){m.exports=t;function t(i){var a=new Float32Array(4);return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a}},{}],199:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i}},{}],200:[function(s,m,x){m.exports=t;function t(){var i=new Float32Array(4);return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i}},{}],201:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0]-i[0],n=a[1]-i[1],f=a[2]-i[2],l=a[3]-i[3];return Math.sqrt(r*r+n*n+f*f+l*l)}},{}],202:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]/r[0],i[1]=a[1]/r[1],i[2]=a[2]/r[2],i[3]=a[3]/r[3],i}},{}],203:[function(s,m,x){m.exports=t;function t(i,a){return i[0]*a[0]+i[1]*a[1]+i[2]*a[2]+i[3]*a[3]}},{}],204:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=new Float32Array(4);return f[0]=i,f[1]=a,f[2]=r,f[3]=n,f}},{}],205:[function(s,m,x){m.exports={create:s("./create"),clone:s("./clone"),fromValues:s("./fromValues"),copy:s("./copy"),set:s("./set"),add:s("./add"),subtract:s("./subtract"),multiply:s("./multiply"),divide:s("./divide"),min:s("./min"),max:s("./max"),scale:s("./scale"),scaleAndAdd:s("./scaleAndAdd"),distance:s("./distance"),squaredDistance:s("./squaredDistance"),length:s("./length"),squaredLength:s("./squaredLength"),negate:s("./negate"),inverse:s("./inverse"),normalize:s("./normalize"),dot:s("./dot"),lerp:s("./lerp"),random:s("./random"),transformMat4:s("./transformMat4"),transformQuat:s("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=1/a[0],i[1]=1/a[1],i[2]=1/a[2],i[3]=1/a[3],i}},{}],207:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2],f=i[3];return Math.sqrt(a*a+r*r+n*n+f*f)}},{}],208:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=a[0],l=a[1],o=a[2],c=a[3];return i[0]=f+n*(r[0]-f),i[1]=l+n*(r[1]-l),i[2]=o+n*(r[2]-o),i[3]=c+n*(r[3]-c),i}},{}],209:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=Math.max(a[0],r[0]),i[1]=Math.max(a[1],r[1]),i[2]=Math.max(a[2],r[2]),i[3]=Math.max(a[3],r[3]),i}},{}],210:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=Math.min(a[0],r[0]),i[1]=Math.min(a[1],r[1]),i[2]=Math.min(a[2],r[2]),i[3]=Math.min(a[3],r[3]),i}},{}],211:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]*r[0],i[1]=a[1]*r[1],i[2]=a[2]*r[2],i[3]=a[3]*r[3],i}},{}],212:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=-a[0],i[1]=-a[1],i[2]=-a[2],i[3]=-a[3],i}},{}],213:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0],n=a[1],f=a[2],l=a[3],o=r*r+n*n+f*f+l*l;return o>0&&(o=1/Math.sqrt(o),i[0]=r*o,i[1]=n*o,i[2]=f*o,i[3]=l*o),i}},{}],214:[function(s,m,x){var t=s("./normalize"),i=s("./scale");m.exports=a;function a(r,n){return n=n||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),t(r,r),i(r,r,n),r}},{"./normalize":213,"./scale":215}],215:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]*r,i[1]=a[1]*r,i[2]=a[2]*r,i[3]=a[3]*r,i}},{}],216:[function(s,m,x){m.exports=t;function t(i,a,r,n){return i[0]=a[0]+r[0]*n,i[1]=a[1]+r[1]*n,i[2]=a[2]+r[2]*n,i[3]=a[3]+r[3]*n,i}},{}],217:[function(s,m,x){m.exports=t;function t(i,a,r,n,f){return i[0]=a,i[1]=r,i[2]=n,i[3]=f,i}},{}],218:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0]-i[0],n=a[1]-i[1],f=a[2]-i[2],l=a[3]-i[3];return r*r+n*n+f*f+l*l}},{}],219:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2],f=i[3];return a*a+r*r+n*n+f*f}},{}],220:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]-r[0],i[1]=a[1]-r[1],i[2]=a[2]-r[2],i[3]=a[3]-r[3],i}},{}],221:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=a[3];return i[0]=r[0]*n+r[4]*f+r[8]*l+r[12]*o,i[1]=r[1]*n+r[5]*f+r[9]*l+r[13]*o,i[2]=r[2]*n+r[6]*f+r[10]*l+r[14]*o,i[3]=r[3]*n+r[7]*f+r[11]*l+r[15]*o,i}},{}],222:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=r[0],c=r[1],v=r[2],d=r[3],p=d*n+c*l-v*f,y=d*f+v*n-o*l,g=d*l+o*f-c*n,A=-o*n-c*f-v*l;return i[0]=p*d+A*-o+y*-v-g*-c,i[1]=y*d+A*-c+g*-o-p*-v,i[2]=g*d+A*-v+p*-c-y*-o,i[3]=a[3],i}},{}],223:[function(s,m,x){var t=s("glsl-tokenizer"),i=s("atob-lite");m.exports=a;function a(r){for(var n=Array.isArray(r)?r:t(r),f=0;f<n.length;f++){var l=n[f];if(l.type==="preprocessor"){var o=l.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var c=o[1],v=o[2];return(c?i(v):v).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(s,m,x){m.exports=h;var t=s("./lib/literals"),i=s("./lib/operators"),a=s("./lib/builtins"),r=s("./lib/literals-300es"),n=s("./lib/builtins-300es"),f=999,l=9999,o=0,c=1,v=2,d=3,p=4,y=5,g=6,A=7,b=8,M=9,w=10,T=11,_=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function h(L){var S=0,k=0,P=f,O,F,D=[],R=[],U=1,N=0,X=0,j=!1,ee=!1,q="",G;L=L||{};var J=a,le=t;L.version==="300 es"&&(J=n,le=r);for(var fe={},se={},S=0;S<J.length;S++)fe[J[S]]=!0;for(var S=0;S<le.length;S++)se[le[S]]=!0;return function(Ce){return R=[],Ce!==null?Y(Ce):ne()};function V(Ce){Ce.length&&R.push({type:_[P],data:Ce,position:X,line:U,column:N})}function Y(Ce){S=0,Ce.toString&&(Ce=Ce.toString()),q+=Ce.replace(/\r\n/g,`
`),G=q.length;for(var Se;O=q[S],S<G;){switch(Se=S,P){case o:S=ie();break;case c:S=ae();break;case v:S=$();break;case d:S=oe();break;case p:S=he();break;case T:S=xe();break;case y:S=me();break;case l:S=be();break;case M:S=K();break;case f:S=te();break}if(Se!==S)switch(q[Se]){case`
`:N=0,++U;break;default:++N;break}}return k+=S,q=q.slice(S),R}function ne(Ce){return D.length&&V(D.join("")),P=w,V("(eof)"),R}function te(){return D=D.length?[]:D,F==="/"&&O==="*"?(X=k+S-1,P=o,F=O,S+1):F==="/"&&O==="/"?(X=k+S-1,P=c,F=O,S+1):O==="#"?(P=v,X=k+S,S):/\s/.test(O)?(P=M,X=k+S,S):(j=/\d/.test(O),ee=/[^\w_]/.test(O),X=k+S,P=j?p:ee?d:l,S)}function K(){return/[^\s]/g.test(O)?(V(D.join("")),P=f,S):(D.push(O),F=O,S+1)}function $(){return(O==="\r"||O===`
`)&&F!=="\\"?(V(D.join("")),P=f,S):(D.push(O),F=O,S+1)}function ae(){return $()}function ie(){return O==="/"&&F==="*"?(D.push(O),V(D.join("")),P=f,S+1):(D.push(O),F=O,S+1)}function oe(){if(F==="."&&/\d/.test(O))return P=y,S;if(F==="/"&&O==="*")return P=o,S;if(F==="/"&&O==="/")return P=c,S;if(O==="."&&D.length){for(;ue(D););return P=y,S}if(O===";"||O===")"||O==="("){if(D.length)for(;ue(D););return V(O),P=f,S+1}var Ce=D.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||Ce){for(;ue(D););return P=f,S}return D.push(O),F=O,S+1}function ue(Ce){var Se=0,Be,Ye;do{if(Be=i.indexOf(Ce.slice(0,Ce.length+Se).join("")),Ye=i[Be],Be===-1){if(Se--+Ce.length>0)continue;Ye=Ce.slice(0,1).join("")}return V(Ye),X+=Ye.length,D=D.slice(Ye.length),D.length}while(1)}function xe(){return/[^a-fA-F0-9]/.test(O)?(V(D.join("")),P=f,S):(D.push(O),F=O,S+1)}function he(){return O==="."||/[eE]/.test(O)?(D.push(O),P=y,F=O,S+1):O==="x"&&D.length===1&&D[0]==="0"?(P=T,D.push(O),F=O,S+1):/[^\d]/.test(O)?(V(D.join("")),P=f,S):(D.push(O),F=O,S+1)}function me(){return O==="f"&&(D.push(O),F=O,S+=1),/[eE]/.test(O)||(O==="-"||O==="+")&&/[eE]/.test(F)?(D.push(O),F=O,S+1):/[^\d]/.test(O)?(V(D.join("")),P=f,S):(D.push(O),F=O,S+1)}function be(){if(/[^\d\w_]/.test(O)){var Ce=D.join("");return se[Ce]?P=b:fe[Ce]?P=A:P=g,V(D.join("")),P=f,S}return D.push(O),F=O,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(s,m,x){var t=s("./builtins");t=t.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),m.exports=t.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(s,m,x){m.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(s,m,x){var t=s("./literals");m.exports=t.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(s,m,x){m.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(s,m,x){m.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(s,m,x){var t=s("./index");m.exports=i;function i(a,r){var n=t(r),f=[];return f=f.concat(n(a)),f=f.concat(n(null)),f}},{"./index":224}],231:[function(s,m,x){m.exports=function(t){typeof t=="string"&&(t=[t]);for(var i=[].slice.call(arguments,1),a=[],r=0;r<t.length-1;r++)a.push(t[r],i[r]||"");return a.push(t[r]),a.join("")}},{}],232:[function(s,m,x){var t=s("is-browser");function i(){var a=!1;try{var r=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{a=!1}return a}m.exports=t&&i()},{"is-browser":236}],233:[function(s,m,x){m.exports=d;var t=s("robust-orientation"),i=s("simplicial-complex").compareCells;function a(p,y,g){this.vertices=p,this.adjacent=y,this.boundary=g,this.lastVisited=-1}a.prototype.flip=function(){var p=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=p;var y=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=y};function r(p,y,g){this.vertices=p,this.cell=y,this.index=g}function n(p,y){return i(p.vertices,y.vertices)}function f(p){return function(){var y=this.tuple;return p.apply(this,y)}}function l(p){var y=t[p+1];return y||(y=t),f(y)}var o=[];function c(p,y,g){this.dimension=p,this.vertices=y,this.simplices=g,this.interior=g.filter(function(M){return!M.boundary}),this.tuple=new Array(p+1);for(var A=0;A<=p;++A)this.tuple[A]=this.vertices[A];var b=o[p];b||(b=o[p]=l(p)),this.orient=b}var v=c.prototype;v.handleBoundaryDegeneracy=function(p,y){var g=this.dimension,A=this.vertices.length-1,b=this.tuple,M=this.vertices,w=[p];for(p.lastVisited=-A;w.length>0;){p=w.pop();for(var T=p.adjacent,_=0;_<=g;++_){var h=T[_];if(!(!h.boundary||h.lastVisited<=-A)){for(var L=h.vertices,S=0;S<=g;++S){var k=L[S];k<0?b[S]=y:b[S]=M[k]}var P=this.orient();if(P>0)return h;h.lastVisited=-A,P===0&&w.push(h)}}}return null},v.walk=function(p,y){var g=this.vertices.length-1,A=this.dimension,b=this.vertices,M=this.tuple,w=y?this.interior.length*Math.random()|0:this.interior.length-1,T=this.interior[w];e:for(;!T.boundary;){for(var _=T.vertices,h=T.adjacent,L=0;L<=A;++L)M[L]=b[_[L]];T.lastVisited=g;for(var L=0;L<=A;++L){var S=h[L];if(!(S.lastVisited>=g)){var k=M[L];M[L]=p;var P=this.orient();if(M[L]=k,P<0){T=S;continue e}else S.boundary?S.lastVisited=-g:S.lastVisited=g}}return}return T},v.addPeaks=function(p,y){var g=this.vertices.length-1,A=this.dimension,b=this.vertices,M=this.tuple,w=this.interior,T=this.simplices,_=[y];y.lastVisited=g,y.vertices[y.vertices.indexOf(-1)]=g,y.boundary=!1,w.push(y);for(var h=[];_.length>0;){var y=_.pop(),L=y.vertices,S=y.adjacent,k=L.indexOf(g);if(!(k<0)){for(var P=0;P<=A;++P)if(P!==k){var O=S[P];if(!(!O.boundary||O.lastVisited>=g)){var F=O.vertices;if(O.lastVisited!==-g){for(var D=0,R=0;R<=A;++R)F[R]<0?(D=R,M[R]=p):M[R]=b[F[R]];var U=this.orient();if(U>0){F[D]=g,O.boundary=!1,w.push(O),_.push(O),O.lastVisited=g;continue}else O.lastVisited=-g}var N=O.adjacent,X=L.slice(),j=S.slice(),ee=new a(X,j,!0);T.push(ee);var q=N.indexOf(y);if(!(q<0)){N[q]=ee,j[k]=O,X[P]=-1,j[P]=y,S[P]=ee,ee.flip();for(var R=0;R<=A;++R){var G=X[R];if(!(G<0||G===g)){for(var J=new Array(A-1),le=0,fe=0;fe<=A;++fe){var se=X[fe];se<0||fe===R||(J[le++]=se)}h.push(new r(J,ee,R))}}}}}}}h.sort(n);for(var P=0;P+1<h.length;P+=2){var V=h[P],Y=h[P+1],ne=V.index,te=Y.index;ne<0||te<0||(V.cell.adjacent[V.index]=Y.cell,Y.cell.adjacent[Y.index]=V.cell)}},v.insert=function(p,y){var g=this.vertices;g.push(p);var A=this.walk(p,y);if(!!A){for(var b=this.dimension,M=this.tuple,w=0;w<=b;++w){var T=A.vertices[w];T<0?M[w]=p:M[w]=g[T]}var _=this.orient(M);_<0||_===0&&(A=this.handleBoundaryDegeneracy(A,p),!A)||this.addPeaks(p,A)}},v.boundary=function(){for(var p=this.dimension,y=[],g=this.simplices,A=g.length,b=0;b<A;++b){var M=g[b];if(M.boundary){for(var w=new Array(p),T=M.vertices,_=0,h=0,L=0;L<=p;++L)T[L]>=0?w[_++]=T[L]:h=L&1;if(h===(p&1)){var S=w[0];w[0]=w[1],w[1]=S}y.push(w)}}return y};function d(p,y){var g=p.length;if(g===0)throw new Error("Must have at least d+1 points");var A=p[0].length;if(g<=A)throw new Error("Must input at least d+1 points");var b=p.slice(0,A+1),M=t.apply(void 0,b);if(M===0)throw new Error("Input not in general position");for(var w=new Array(A+1),T=0;T<=A;++T)w[T]=T;M<0&&(w[0]=1,w[1]=0);for(var _=new a(w,new Array(A+1),!1),h=_.adjacent,L=new Array(A+2),T=0;T<=A;++T){for(var S=w.slice(),k=0;k<=A;++k)k===T&&(S[k]=-1);var P=S[0];S[0]=S[1],S[1]=P;var O=new a(S,new Array(A+1),!0);h[T]=O,L[T]=O}L[A+1]=_;for(var T=0;T<=A;++T)for(var S=h[T].vertices,F=h[T].adjacent,k=0;k<=A;++k){var D=S[k];if(D<0){F[k]=_;continue}for(var R=0;R<=A;++R)h[R].vertices.indexOf(D)<0&&(F[k]=h[R])}for(var U=new c(A,b,L),N=!!y,T=A+1;T<g;++T)U.insert(p[T],N);return U.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(s,m,x){var t=s("binary-search-bounds"),i=0,a=1,r=2;m.exports=_;function n(h,L,S,k,P){this.mid=h,this.left=L,this.right=S,this.leftPoints=k,this.rightPoints=P,this.count=(L?L.count:0)+(S?S.count:0)+k.length}var f=n.prototype;function l(h,L){h.mid=L.mid,h.left=L.left,h.right=L.right,h.leftPoints=L.leftPoints,h.rightPoints=L.rightPoints,h.count=L.count}function o(h,L){var S=M(L);h.mid=S.mid,h.left=S.left,h.right=S.right,h.leftPoints=S.leftPoints,h.rightPoints=S.rightPoints,h.count=S.count}function c(h,L){var S=h.intervals([]);S.push(L),o(h,S)}function v(h,L){var S=h.intervals([]),k=S.indexOf(L);return k<0?i:(S.splice(k,1),o(h,S),a)}f.intervals=function(h){return h.push.apply(h,this.leftPoints),this.left&&this.left.intervals(h),this.right&&this.right.intervals(h),h},f.insert=function(h){var L=this.count-this.leftPoints.length;if(this.count+=1,h[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?c(this,h):this.left.insert(h):this.left=M([h]);else if(h[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?c(this,h):this.right.insert(h):this.right=M([h]);else{var S=t.ge(this.leftPoints,h,A),k=t.ge(this.rightPoints,h,b);this.leftPoints.splice(S,0,h),this.rightPoints.splice(k,0,h)}},f.remove=function(h){var L=this.count-this.leftPoints;if(h[1]<this.mid){if(!this.left)return i;var S=this.right?this.right.count:0;if(4*S>3*(L-1))return v(this,h);var k=this.left.remove(h);return k===r?(this.left=null,this.count-=1,a):(k===a&&(this.count-=1),k)}else if(h[0]>this.mid){if(!this.right)return i;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return v(this,h);var k=this.right.remove(h);return k===r?(this.right=null,this.count-=1,a):(k===a&&(this.count-=1),k)}else{if(this.count===1)return this.leftPoints[0]===h?r:i;if(this.leftPoints.length===1&&this.leftPoints[0]===h){if(this.left&&this.right){for(var O=this,F=this.left;F.right;)O=F,F=F.right;if(O===this)F.right=this.right;else{var D=this.left,k=this.right;O.count-=F.count,O.right=F.left,F.left=D,F.right=k}l(this,F),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?l(this,this.left):l(this,this.right);return a}for(var D=t.ge(this.leftPoints,h,A);D<this.leftPoints.length&&this.leftPoints[D][0]===h[0];++D)if(this.leftPoints[D]===h){this.count-=1,this.leftPoints.splice(D,1);for(var k=t.ge(this.rightPoints,h,b);k<this.rightPoints.length&&this.rightPoints[k][1]===h[1];++k)if(this.rightPoints[k]===h)return this.rightPoints.splice(k,1),a}return i}};function d(h,L,S){for(var k=0;k<h.length&&h[k][0]<=L;++k){var P=S(h[k]);if(P)return P}}function p(h,L,S){for(var k=h.length-1;k>=0&&h[k][1]>=L;--k){var P=S(h[k]);if(P)return P}}function y(h,L){for(var S=0;S<h.length;++S){var k=L(h[S]);if(k)return k}}f.queryPoint=function(h,L){if(h<this.mid){if(this.left){var S=this.left.queryPoint(h,L);if(S)return S}return d(this.leftPoints,h,L)}else if(h>this.mid){if(this.right){var S=this.right.queryPoint(h,L);if(S)return S}return p(this.rightPoints,h,L)}else return y(this.leftPoints,L)},f.queryInterval=function(h,L,S){if(h<this.mid&&this.left){var k=this.left.queryInterval(h,L,S);if(k)return k}if(L>this.mid&&this.right){var k=this.right.queryInterval(h,L,S);if(k)return k}return L<this.mid?d(this.leftPoints,L,S):h>this.mid?p(this.rightPoints,h,S):y(this.leftPoints,S)};function g(h,L){return h-L}function A(h,L){var S=h[0]-L[0];return S||h[1]-L[1]}function b(h,L){var S=h[1]-L[1];return S||h[0]-L[0]}function M(h){if(h.length===0)return null;for(var L=[],S=0;S<h.length;++S)L.push(h[S][0],h[S][1]);L.sort(g);for(var k=L[L.length>>1],P=[],O=[],F=[],S=0;S<h.length;++S){var D=h[S];D[1]<k?P.push(D):k<D[0]?O.push(D):F.push(D)}var R=F,U=F.slice();return R.sort(A),U.sort(b),new n(k,M(P),M(O),R,U)}function w(h){this.root=h}var T=w.prototype;T.insert=function(h){this.root?this.root.insert(h):this.root=new n(h[0],null,null,[h],[h])},T.remove=function(h){if(this.root){var L=this.root.remove(h);return L===r&&(this.root=null),L!==i}return!1},T.queryPoint=function(h,L){if(this.root)return this.root.queryPoint(h,L)},T.queryInterval=function(h,L,S){if(h<=L&&this.root)return this.root.queryInterval(h,L,S)},Object.defineProperty(T,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(T,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function _(h){return!h||h.length===0?new w(null):new w(M(h))}},{"binary-search-bounds":31}],235:[function(s,m,x){function t(i){for(var a=new Array(i),r=0;r<i;++r)a[r]=r;return a}m.exports=t},{}],236:[function(s,m,x){m.exports=!0},{}],237:[function(s,m,x){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */m.exports=function(a){return a!=null&&(t(a)||i(a)||!!a._isBuffer)};function t(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function i(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&t(a.slice(0,0))}},{}],238:[function(s,m,x){m.exports=a,m.exports.isMobile=a,m.exports.default=a;var t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(r){r||(r={});var n=r.ua;if(!n&&typeof navigator!="undefined"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),typeof n!="string")return!1;var f=r.tablet?i.test(n):t.test(n);return!f&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&n.indexOf("Macintosh")!==-1&&n.indexOf("Safari")!==-1&&(f=!0),f}},{}],239:[function(s,m,x){m.exports=function(t){for(var i=t.length,a,r=0;r<i;r++)if(a=t.charCodeAt(r),(a<9||a>13)&&a!==32&&a!==133&&a!==160&&a!==5760&&a!==6158&&(a<8192||a>8205)&&a!==8232&&a!==8233&&a!==8239&&a!==8287&&a!==8288&&a!==12288&&a!==65279)return!1;return!0}},{}],240:[function(s,m,x){function t(i,a,r){return i*(1-r)+a*r}m.exports=t},{}],241:[function(s,m,x){var t=s("./normalize"),i=s("gl-mat4/create"),a=s("gl-mat4/clone"),r=s("gl-mat4/determinant"),n=s("gl-mat4/invert"),f=s("gl-mat4/transpose"),l={length:s("gl-vec3/length"),normalize:s("gl-vec3/normalize"),dot:s("gl-vec3/dot"),cross:s("gl-vec3/cross")},o=i(),c=i(),v=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];m.exports=function(M,w,T,_,h,L){if(w||(w=[0,0,0]),T||(T=[0,0,0]),_||(_=[0,0,0]),h||(h=[0,0,0,1]),L||(L=[0,0,0,1]),!t(o,M)||(a(c,o),c[3]=0,c[7]=0,c[11]=0,c[15]=1,Math.abs(r(c)<1e-8)))return!1;var S=o[3],k=o[7],P=o[11],O=o[12],F=o[13],D=o[14],R=o[15];if(S!==0||k!==0||P!==0){v[0]=S,v[1]=k,v[2]=P,v[3]=R;var U=n(c,c);if(!U)return!1;f(c,c),y(h,v,c)}else h[0]=h[1]=h[2]=0,h[3]=1;if(w[0]=O,w[1]=F,w[2]=D,g(d,o),T[0]=l.length(d[0]),l.normalize(d[0],d[0]),_[0]=l.dot(d[0],d[1]),A(d[1],d[1],d[0],1,-_[0]),T[1]=l.length(d[1]),l.normalize(d[1],d[1]),_[0]/=T[1],_[1]=l.dot(d[0],d[2]),A(d[2],d[2],d[0],1,-_[1]),_[2]=l.dot(d[1],d[2]),A(d[2],d[2],d[1],1,-_[2]),T[2]=l.length(d[2]),l.normalize(d[2],d[2]),_[1]/=T[2],_[2]/=T[2],l.cross(p,d[1],d[2]),l.dot(d[0],p)<0)for(var N=0;N<3;N++)T[N]*=-1,d[N][0]*=-1,d[N][1]*=-1,d[N][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(L[0]=-L[0]),d[0][2]>d[2][0]&&(L[1]=-L[1]),d[1][0]>d[0][1]&&(L[2]=-L[2]),!0};function y(b,M,w){var T=M[0],_=M[1],h=M[2],L=M[3];return b[0]=w[0]*T+w[4]*_+w[8]*h+w[12]*L,b[1]=w[1]*T+w[5]*_+w[9]*h+w[13]*L,b[2]=w[2]*T+w[6]*_+w[10]*h+w[14]*L,b[3]=w[3]*T+w[7]*_+w[11]*h+w[15]*L,b}function g(b,M){b[0][0]=M[0],b[0][1]=M[1],b[0][2]=M[2],b[1][0]=M[4],b[1][1]=M[5],b[1][2]=M[6],b[2][0]=M[8],b[2][1]=M[9],b[2][2]=M[10]}function A(b,M,w,T,_){b[0]=M[0]*T+w[0]*_,b[1]=M[1]*T+w[1]*_,b[2]=M[2]*T+w[2]*_}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(s,m,x){m.exports=function(i,a){var r=a[15];if(r===0)return!1;for(var n=1/r,f=0;f<16;f++)i[f]=a[f]*n;return!0}},{}],243:[function(s,m,x){var t=s("gl-vec3/lerp"),i=s("mat4-recompose"),a=s("mat4-decompose"),r=s("gl-mat4/determinant"),n=s("quat-slerp"),f=v(),l=v(),o=v();m.exports=c;function c(y,g,A,b){if(r(g)===0||r(A)===0)return!1;var M=a(g,f.translate,f.scale,f.skew,f.perspective,f.quaternion),w=a(A,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!M||!w?!1:(t(o.translate,f.translate,l.translate,b),t(o.skew,f.skew,l.skew,b),t(o.scale,f.scale,l.scale,b),t(o.perspective,f.perspective,l.perspective,b),n(o.quaternion,f.quaternion,l.quaternion,b),i(y,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function v(){return{translate:d(),scale:d(1),skew:d(),perspective:p(),quaternion:p()}}function d(y){return[y||0,y||0,y||0]}function p(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(s,m,x){var t={identity:s("gl-mat4/identity"),translate:s("gl-mat4/translate"),multiply:s("gl-mat4/multiply"),create:s("gl-mat4/create"),scale:s("gl-mat4/scale"),fromRotationTranslation:s("gl-mat4/fromRotationTranslation")};t.create();var i=t.create();m.exports=function(r,n,f,l,o,c){return t.identity(r),t.fromRotationTranslation(r,c,n),r[3]=o[0],r[7]=o[1],r[11]=o[2],r[15]=o[3],t.identity(i),l[2]!==0&&(i[9]=l[2],t.multiply(r,r,i)),l[1]!==0&&(i[9]=0,i[8]=l[1],t.multiply(r,r,i)),l[0]!==0&&(i[8]=0,i[4]=l[0],t.multiply(r,r,i)),t.scale(r,r,f),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(s,m,x){var t=s("binary-search-bounds"),i=s("mat4-interpolate"),a=s("gl-mat4/invert"),r=s("gl-mat4/rotateX"),n=s("gl-mat4/rotateY"),f=s("gl-mat4/rotateZ"),l=s("gl-mat4/lookAt"),o=s("gl-mat4/translate");s("gl-mat4/scale");var c=s("gl-vec3/normalize"),v=[0,0,0];m.exports=g;function d(A){this._components=A.slice(),this._time=[0],this.prevMatrix=A.slice(),this.nextMatrix=A.slice(),this.computedMatrix=A.slice(),this.computedInverse=A.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var p=d.prototype;p.recalcMatrix=function(A){var b=this._time,M=t.le(b,A),w=this.computedMatrix;if(!(M<0)){var T=this._components;if(M===b.length-1)for(var _=16*M,h=0;h<16;++h)w[h]=T[_++];else{for(var L=b[M+1]-b[M],_=16*M,S=this.prevMatrix,k=!0,h=0;h<16;++h)S[h]=T[_++];for(var P=this.nextMatrix,h=0;h<16;++h)P[h]=T[_++],k=k&&S[h]===P[h];if(L<1e-6||k)for(var h=0;h<16;++h)w[h]=S[h];else i(w,S,P,(A-b[M])/L)}var O=this.computedUp;O[0]=w[1],O[1]=w[5],O[2]=w[9],c(O,O);var F=this.computedInverse;a(F,w);var D=this.computedEye,R=F[15];D[0]=F[12]/R,D[1]=F[13]/R,D[2]=F[14]/R;for(var U=this.computedCenter,N=Math.exp(this.computedRadius[0]),h=0;h<3;++h)U[h]=D[h]-w[2+4*h]*N}},p.idle=function(A){if(!(A<this.lastT())){for(var b=this._components,M=b.length-16,w=0;w<16;++w)b.push(b[M++]);this._time.push(A)}},p.flush=function(A){var b=t.gt(this._time,A)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(A,b,M,w){this.recalcMatrix(A),b=b||this.computedEye,M=M||v,w=w||this.computedUp,this.setMatrix(A,l(this.computedMatrix,b,M,w));for(var T=0,_=0;_<3;++_)T+=Math.pow(M[_]-b[_],2);T=Math.log(Math.sqrt(T)),this.computedRadius[0]=T},p.rotate=function(A,b,M,w){this.recalcMatrix(A);var T=this.computedInverse;b&&n(T,T,b),M&&r(T,T,M),w&&f(T,T,w),this.setMatrix(A,a(this.computedMatrix,T))};var y=[0,0,0];p.pan=function(A,b,M,w){y[0]=-(b||0),y[1]=-(M||0),y[2]=-(w||0),this.recalcMatrix(A);var T=this.computedInverse;o(T,T,y),this.setMatrix(A,a(T,T))},p.translate=function(A,b,M,w){y[0]=b||0,y[1]=M||0,y[2]=w||0,this.recalcMatrix(A);var T=this.computedMatrix;o(T,T,y),this.setMatrix(A,T)},p.setMatrix=function(A,b){if(!(A<this.lastT())){this._time.push(A);for(var M=0;M<16;++M)this._components.push(b[M])}},p.setDistance=function(A,b){this.computedRadius[0]=b},p.setDistanceLimits=function(A,b){var M=this._limits;M[0]=A,M[1]=b},p.getDistanceLimits=function(A){var b=this._limits;return A?(A[0]=b[0],A[1]=b[1],A):b};function g(A){A=A||{};var b=A.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(b)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(s,m,x){m.exports=i;var t=s("robust-orientation")[3];function i(a){var r=a.length;if(r<3){for(var p=new Array(r),n=0;n<r;++n)p[n]=n;return r===2&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:p}for(var f=new Array(r),n=0;n<r;++n)f[n]=n;f.sort(function(b,M){var w=a[b][0]-a[M][0];return w||a[b][1]-a[M][1]});for(var l=[f[0],f[1]],o=[f[0],f[1]],n=2;n<r;++n){for(var c=f[n],v=a[c],d=l.length;d>1&&t(a[l[d-2]],a[l[d-1]],v)<=0;)d-=1,l.pop();for(l.push(c),d=o.length;d>1&&t(a[o[d-2]],a[o[d-1]],v)>=0;)d-=1,o.pop();o.push(c)}for(var p=new Array(o.length+l.length-2),y=0,n=0,g=l.length;n<g;++n)p[y++]=l[n];for(var A=o.length-2;A>0;--A)p[y++]=o[A];return p}},{"robust-orientation":284}],247:[function(s,m,x){m.exports=i;var t=s("mouse-event");function i(a,r){r||(r=a,a=window);var n=0,f=0,l=0,o={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function v(h){var L=!1;return"altKey"in h&&(L=L||h.altKey!==o.alt,o.alt=!!h.altKey),"shiftKey"in h&&(L=L||h.shiftKey!==o.shift,o.shift=!!h.shiftKey),"ctrlKey"in h&&(L=L||h.ctrlKey!==o.control,o.control=!!h.ctrlKey),"metaKey"in h&&(L=L||h.metaKey!==o.meta,o.meta=!!h.metaKey),L}function d(h,L){var S=t.x(L),k=t.y(L);"buttons"in L&&(h=L.buttons|0),(h!==n||S!==f||k!==l||v(L))&&(n=h|0,f=S||0,l=k||0,r&&r(n,f,l,o))}function p(h){d(0,h)}function y(){(n||f||l||o.shift||o.alt||o.meta||o.control)&&(f=l=0,n=0,o.shift=o.alt=o.control=o.meta=!1,r&&r(0,0,0,o))}function g(h){v(h)&&r&&r(n,f,l,o)}function A(h){t.buttons(h)===0?d(0,h):d(n,h)}function b(h){d(n|t.buttons(h),h)}function M(h){d(n&~t.buttons(h),h)}function w(){c||(c=!0,a.addEventListener("mousemove",A),a.addEventListener("mousedown",b),a.addEventListener("mouseup",M),a.addEventListener("mouseleave",p),a.addEventListener("mouseenter",p),a.addEventListener("mouseout",p),a.addEventListener("mouseover",p),a.addEventListener("blur",y),a.addEventListener("keyup",g),a.addEventListener("keydown",g),a.addEventListener("keypress",g),a!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function T(){!c||(c=!1,a.removeEventListener("mousemove",A),a.removeEventListener("mousedown",b),a.removeEventListener("mouseup",M),a.removeEventListener("mouseleave",p),a.removeEventListener("mouseenter",p),a.removeEventListener("mouseout",p),a.removeEventListener("mouseover",p),a.removeEventListener("blur",y),a.removeEventListener("keyup",g),a.removeEventListener("keydown",g),a.removeEventListener("keypress",g),a!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}w();var _={element:a};return Object.defineProperties(_,{enabled:{get:function(){return c},set:function(h){h?w():T()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return l},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),_}},{"mouse-event":249}],248:[function(s,m,x){var t={left:0,top:0};m.exports=i;function i(r,n,f){n=n||r.currentTarget||r.srcElement,Array.isArray(f)||(f=[0,0]);var l=r.clientX||0,o=r.clientY||0,c=a(n);return f[0]=l-c.left,f[1]=o-c.top,f}function a(r){return r===window||r===document||r===document.body?t:r.getBoundingClientRect()}},{}],249:[function(s,m,x){function t(n){if(typeof n=="object"){if("buttons"in n)return n.buttons;if("which"in n){var f=n.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in n){var f=n.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}x.buttons=t;function i(n){return n.target||n.srcElement||window}x.element=i;function a(n){if(typeof n=="object"){if("offsetX"in n)return n.offsetX;var f=i(n),l=f.getBoundingClientRect();return n.clientX-l.left}return 0}x.x=a;function r(n){if(typeof n=="object"){if("offsetY"in n)return n.offsetY;var f=i(n),l=f.getBoundingClientRect();return n.clientY-l.top}return 0}x.y=r},{}],250:[function(s,m,x){var t=s("to-px");m.exports=i;function i(a,r,n){typeof a=="function"&&(n=!!r,r=a,a=window);var f=t("ex",a),l=function(o){n&&o.preventDefault();var c=o.deltaX||0,v=o.deltaY||0,d=o.deltaZ||0,p=o.deltaMode,y=1;switch(p){case 1:y=f;break;case 2:y=window.innerHeight;break}if(c*=y,v*=y,d*=y,c||v||d)return r(c,v,d,o)};return a.addEventListener("wheel",l),l}},{"to-px":304}],251:[function(s,m,x){var t=s("typedarray-pool");m.exports=r;var i={"false,0,1":function(f,l,o,c,v){return function(p,y,g,A){var b=p.shape[0]|0,M=p.shape[1]|0,w=p.data,T=p.offset|0,_=p.stride[0]|0,h=p.stride[1]|0,L=T,S,k=-_|0,P=0,O=-h|0,F=0,D=-_-h|0,R=0,U=_|0,N=h-_*b|0,X=0,j=0,ee=0,q=2*b|0,G=c(q),J=c(q),le=0,fe=0,se=-1|0,V=-1|0,Y=0,ne=-b|0,te=b|0,K=0,$=-b-1|0,ae=b-1|0,ie=0,oe=0,ue=0;for(X=0;X<b;++X)G[le++]=o(w[L],y,g,A),L+=U;if(L+=N,M>0){if(j=1,G[le++]=o(w[L],y,g,A),L+=U,b>0)for(X=1,S=w[L],fe=G[le]=o(S,y,g,A),Y=G[le+se],K=G[le+ne],ie=G[le+$],(fe!==Y||fe!==K||fe!==ie)&&(P=w[L+k],F=w[L+O],R=w[L+D],f(X,j,S,P,F,R,fe,Y,K,ie,y,g,A),oe=J[le]=ee++),le+=1,L+=U,X=2;X<b;++X)S=w[L],fe=G[le]=o(S,y,g,A),Y=G[le+se],K=G[le+ne],ie=G[le+$],(fe!==Y||fe!==K||fe!==ie)&&(P=w[L+k],F=w[L+O],R=w[L+D],f(X,j,S,P,F,R,fe,Y,K,ie,y,g,A),oe=J[le]=ee++,ie!==Y&&l(J[le+se],oe,R,P,ie,Y,y,g,A)),le+=1,L+=U;for(L+=N,le=0,ue=se,se=V,V=ue,ue=ne,ne=te,te=ue,ue=$,$=ae,ae=ue,j=2;j<M;++j){if(G[le++]=o(w[L],y,g,A),L+=U,b>0)for(X=1,S=w[L],fe=G[le]=o(S,y,g,A),Y=G[le+se],K=G[le+ne],ie=G[le+$],(fe!==Y||fe!==K||fe!==ie)&&(P=w[L+k],F=w[L+O],R=w[L+D],f(X,j,S,P,F,R,fe,Y,K,ie,y,g,A),oe=J[le]=ee++,ie!==K&&l(J[le+ne],oe,F,R,K,ie,y,g,A)),le+=1,L+=U,X=2;X<b;++X)S=w[L],fe=G[le]=o(S,y,g,A),Y=G[le+se],K=G[le+ne],ie=G[le+$],(fe!==Y||fe!==K||fe!==ie)&&(P=w[L+k],F=w[L+O],R=w[L+D],f(X,j,S,P,F,R,fe,Y,K,ie,y,g,A),oe=J[le]=ee++,ie!==K&&l(J[le+ne],oe,F,R,K,ie,y,g,A),ie!==Y&&l(J[le+se],oe,R,P,ie,Y,y,g,A)),le+=1,L+=U;j&1&&(le=0),ue=se,se=V,V=ue,ue=ne,ne=te,te=ue,ue=$,$=ae,ae=ue,L+=N}}v(J),v(G)}},"false,1,0":function(f,l,o,c,v){return function(p,y,g,A){var b=p.shape[0]|0,M=p.shape[1]|0,w=p.data,T=p.offset|0,_=p.stride[0]|0,h=p.stride[1]|0,L=T,S,k=-_|0,P=0,O=-h|0,F=0,D=-_-h|0,R=0,U=h|0,N=_-h*M|0,X=0,j=0,ee=0,q=2*M|0,G=c(q),J=c(q),le=0,fe=0,se=-1|0,V=-1|0,Y=0,ne=-M|0,te=M|0,K=0,$=-M-1|0,ae=M-1|0,ie=0,oe=0,ue=0;for(j=0;j<M;++j)G[le++]=o(w[L],y,g,A),L+=U;if(L+=N,b>0){if(X=1,G[le++]=o(w[L],y,g,A),L+=U,M>0)for(j=1,S=w[L],fe=G[le]=o(S,y,g,A),K=G[le+ne],Y=G[le+se],ie=G[le+$],(fe!==K||fe!==Y||fe!==ie)&&(P=w[L+k],F=w[L+O],R=w[L+D],f(X,j,S,P,F,R,fe,K,Y,ie,y,g,A),oe=J[le]=ee++),le+=1,L+=U,j=2;j<M;++j)S=w[L],fe=G[le]=o(S,y,g,A),K=G[le+ne],Y=G[le+se],ie=G[le+$],(fe!==K||fe!==Y||fe!==ie)&&(P=w[L+k],F=w[L+O],R=w[L+D],f(X,j,S,P,F,R,fe,K,Y,ie,y,g,A),oe=J[le]=ee++,ie!==Y&&l(J[le+se],oe,F,R,Y,ie,y,g,A)),le+=1,L+=U;for(L+=N,le=0,ue=ne,ne=te,te=ue,ue=se,se=V,V=ue,ue=$,$=ae,ae=ue,X=2;X<b;++X){if(G[le++]=o(w[L],y,g,A),L+=U,M>0)for(j=1,S=w[L],fe=G[le]=o(S,y,g,A),K=G[le+ne],Y=G[le+se],ie=G[le+$],(fe!==K||fe!==Y||fe!==ie)&&(P=w[L+k],F=w[L+O],R=w[L+D],f(X,j,S,P,F,R,fe,K,Y,ie,y,g,A),oe=J[le]=ee++,ie!==K&&l(J[le+ne],oe,R,P,ie,K,y,g,A)),le+=1,L+=U,j=2;j<M;++j)S=w[L],fe=G[le]=o(S,y,g,A),K=G[le+ne],Y=G[le+se],ie=G[le+$],(fe!==K||fe!==Y||fe!==ie)&&(P=w[L+k],F=w[L+O],R=w[L+D],f(X,j,S,P,F,R,fe,K,Y,ie,y,g,A),oe=J[le]=ee++,ie!==Y&&l(J[le+se],oe,F,R,Y,ie,y,g,A),ie!==K&&l(J[le+ne],oe,R,P,ie,K,y,g,A)),le+=1,L+=U;X&1&&(le=0),ue=ne,ne=te,te=ue,ue=se,se=V,V=ue,ue=$,$=ae,ae=ue,L+=N}}v(J),v(G)}}};function a(n,f,l,o,c,v){var d=[v,c].join(","),p=i[d];return p(n,f,l,t.mallocUint32,t.freeUint32)}function r(n){function f(y){throw new Error("ndarray-extract-contour: "+y)}typeof n!="object"&&f("Must specify arguments");var l=n.order;Array.isArray(l)||f("Must specify order");var o=n.arrayArguments||1;o<1&&f("Must have at least one array argument");var c=n.scalarArguments||0;c<0&&f("Scalar arg count must be > 0"),typeof n.vertex!="function"&&f("Must specify vertex creation function"),typeof n.cell!="function"&&f("Must specify cell creation function"),typeof n.phase!="function"&&f("Must specify phase function");for(var v=n.getters||[],d=new Array(o),p=0;p<o;++p)v.indexOf(p)>=0?d[p]=!0:d[p]=!1;return a(n.vertex,n.cell,n.phase,c,l,d)}},{"typedarray-pool":308}],252:[function(s,m,x){var t=s("dup"),i={zero:function(g,A,b,M){var w=g[0],T=b[0];M|=0;var _=0,h=T;for(_=0;_<w;++_)A[M]=0,M+=h},fdTemplate1:function(g,A,b,M,w,T,_){var h=g[0],L=b[0],S=T[0],k=-1*L,P=L;M|=0,_|=0;var O=0,F=L,D=S;for(O=0;O<h;++O)w[_]=.5*(A[M+k]-A[M+P]),M+=F,_+=D},fdTemplate2:function(g,A,b,M,w,T,_,h,L,S){var k=g[0],P=g[1],O=b[0],F=b[1],D=T[0],R=T[1],U=L[0],N=L[1],X=-1*O,j=O,ee=-1*F,q=F;M|=0,_|=0,S|=0;var G=0,J=0,le=F,fe=O-P*F,se=R,V=D-P*R,Y=N,ne=U-P*N;for(J=0;J<k;++J){for(G=0;G<P;++G)w[_]=.5*(A[M+X]-A[M+j]),h[S]=.5*(A[M+ee]-A[M+q]),M+=le,_+=se,S+=Y;M+=fe,_+=V,S+=ne}}},a={cdiff:function(g){var A={};return function(M,w,T){var _=M.dtype,h=M.order,L=w.dtype,S=w.order,k=T.dtype,P=T.order,O=[_,h.join(),L,S.join(),k,P.join()].join(),F=A[O];return F||(A[O]=F=g([_,h,L,S,k,P])),F(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,T.data,T.stride,T.offset|0)}},zero:function(g){var A={};return function(M){var w=M.dtype,T=M.order,_=[w,T.join()].join(),h=A[_];return h||(A[_]=h=g([w,T])),h(M.shape.slice(0),M.data,M.stride,M.offset|0)}},fdTemplate1:function(g){var A={};return function(M,w){var T=M.dtype,_=M.order,h=w.dtype,L=w.order,S=[T,_.join(),h,L.join()].join(),k=A[S];return k||(A[S]=k=g([T,_,h,L])),k(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0)}},fdTemplate2:function(g){var A={};return function(M,w,T){var _=M.dtype,h=M.order,L=w.dtype,S=w.order,k=T.dtype,P=T.order,O=[_,h.join(),L,S.join(),k,P.join()].join(),F=A[O];return F||(A[O]=F=g([_,h,L,S,k,P])),F(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,T.data,T.stride,T.offset|0)}}};function r(g){var A=a[g.funcName];return A(n.bind(void 0,g))}function n(g){return i[g.funcName]}function f(g){return r({funcName:g.funcName})}var l={},o={},c=f({funcName:"cdiff"}),v=f({funcName:"zero"});function d(g){return g in l?l[g]:l[g]=f({funcName:"fdTemplate"+g})}function p(g,A,b,M){return function(w,T){var _=T.shape.slice();return _[0]>2&&_[1]>2&&M(T.pick(-1,-1).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,0).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,1).lo(1,1).hi(_[0]-2,_[1]-2)),_[1]>2&&(b(T.pick(0,-1).lo(1).hi(_[1]-2),w.pick(0,-1,1).lo(1).hi(_[1]-2)),A(w.pick(0,-1,0).lo(1).hi(_[1]-2))),_[1]>2&&(b(T.pick(_[0]-1,-1).lo(1).hi(_[1]-2),w.pick(_[0]-1,-1,1).lo(1).hi(_[1]-2)),A(w.pick(_[0]-1,-1,0).lo(1).hi(_[1]-2))),_[0]>2&&(b(T.pick(-1,0).lo(1).hi(_[0]-2),w.pick(-1,0,0).lo(1).hi(_[0]-2)),A(w.pick(-1,0,1).lo(1).hi(_[0]-2))),_[0]>2&&(b(T.pick(-1,_[1]-1).lo(1).hi(_[0]-2),w.pick(-1,_[1]-1,0).lo(1).hi(_[0]-2)),A(w.pick(-1,_[1]-1,1).lo(1).hi(_[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(_[0]-1,0,0,0),w.set(_[0]-1,0,1,0),w.set(0,_[1]-1,0,0),w.set(0,_[1]-1,1,0),w.set(_[0]-1,_[1]-1,0,0),w.set(_[0]-1,_[1]-1,1,0),w}}function y(g){var A=g.join(),b=o[A];if(b)return b;for(var M=g.length,w=[c,v],T=1;T<=M;++T)w.push(d(T));var _=p,b=_.apply(void 0,w);return o[A]=b,b}m.exports=function(A,b,M){if(Array.isArray(M)||(typeof M=="string"?M=t(b.dimension,M):M=t(b.dimension,"clamp")),b.size===0)return A;if(b.dimension===0)return A.set(0),A;var w=y(M);return w(A,b)}},{dup:65}],253:[function(s,m,x){function t(f,l){var o=Math.floor(l),c=l-o,v=0<=o&&o<f.shape[0],d=0<=o+1&&o+1<f.shape[0],p=v?+f.get(o):0,y=d?+f.get(o+1):0;return(1-c)*p+c*y}function i(f,l,o){var c=Math.floor(l),v=l-c,d=0<=c&&c<f.shape[0],p=0<=c+1&&c+1<f.shape[0],y=Math.floor(o),g=o-y,A=0<=y&&y<f.shape[1],b=0<=y+1&&y+1<f.shape[1],M=d&&A?f.get(c,y):0,w=d&&b?f.get(c,y+1):0,T=p&&A?f.get(c+1,y):0,_=p&&b?f.get(c+1,y+1):0;return(1-g)*((1-v)*M+v*T)+g*((1-v)*w+v*_)}function a(f,l,o,c){var v=Math.floor(l),d=l-v,p=0<=v&&v<f.shape[0],y=0<=v+1&&v+1<f.shape[0],g=Math.floor(o),A=o-g,b=0<=g&&g<f.shape[1],M=0<=g+1&&g+1<f.shape[1],w=Math.floor(c),T=c-w,_=0<=w&&w<f.shape[2],h=0<=w+1&&w+1<f.shape[2],L=p&&b&&_?f.get(v,g,w):0,S=p&&M&&_?f.get(v,g+1,w):0,k=y&&b&&_?f.get(v+1,g,w):0,P=y&&M&&_?f.get(v+1,g+1,w):0,O=p&&b&&h?f.get(v,g,w+1):0,F=p&&M&&h?f.get(v,g+1,w+1):0,D=y&&b&&h?f.get(v+1,g,w+1):0,R=y&&M&&h?f.get(v+1,g+1,w+1):0;return(1-T)*((1-A)*((1-d)*L+d*k)+A*((1-d)*S+d*P))+T*((1-A)*((1-d)*O+d*D)+A*((1-d)*F+d*R))}function r(f){var l=f.shape.length|0,o=new Array(l),c=new Array(l),v=new Array(l),d=new Array(l),p,y;for(p=0;p<l;++p)y=+arguments[p+1],o[p]=Math.floor(y),c[p]=y-o[p],v[p]=0<=o[p]&&o[p]<f.shape[p],d[p]=0<=o[p]+1&&o[p]+1<f.shape[p];var g=0,A,b,M;e:for(p=0;p<1<<l;++p){for(b=1,M=f.offset,A=0;A<l;++A)if(p&1<<A){if(!d[A])continue e;b*=c[A],M+=f.stride[A]*(o[A]+1)}else{if(!v[A])continue e;b*=1-c[A],M+=f.stride[A]*o[A]}g+=b*f.data[M]}return g}function n(f,l,o,c){switch(f.shape.length){case 0:return 0;case 1:return t(f,l);case 2:return i(f,l,o);case 3:return a(f,l,o,c);default:return r.apply(void 0,arguments)}}m.exports=n,m.exports.d1=t,m.exports.d2=i,m.exports.d3=a},{}],254:[function(s,m,x){var t={"float64,2,1,0":function(){return function(c,v,d,p,y){var g=c[0],A=c[1],b=c[2],M=d[0],w=d[1],T=d[2];p|=0;var _=0,h=0,L=0,S=T,k=w-b*T,P=M-A*w;for(L=0;L<g;++L){for(h=0;h<A;++h){for(_=0;_<b;++_)v[p]/=y,p+=S;p+=k}p+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(c,v,d,p,y,g,A,b){var M=c[0],w=c[1],T=c[2],_=d[0],h=d[1],L=d[2],S=g[0],k=g[1],P=g[2];p|=0,A|=0;for(var O=p,F=A,D=c[0]|0;D>0;){D<64?(M=D,D=0):(M=64,D-=64);for(var R=c[1]|0;R>0;){R<64?(w=R,R=0):(w=64,R-=64),p=O+D*_+R*h,A=F+D*S+R*k;var U=0,N=0,X=0,j=L,ee=_-T*L,q=h-M*_,G=P,J=S-T*P,le=k-M*S;for(X=0;X<w;++X){for(N=0;N<M;++N){for(U=0;U<T;++U)v[p]=y[A]*b,p+=j,A+=G;p+=ee,A+=J}p+=q,A+=le}}}}},"float32,1,0,float32,1,0":function(){return function(c,v,d,p,y,g,A){var b=c[0],M=c[1],w=d[0],T=d[1],_=g[0],h=g[1];p|=0,A|=0;var L=0,S=0,k=T,P=w-M*T,O=h,F=_-M*h;for(S=0;S<b;++S){for(L=0;L<M;++L)v[p]=y[A],p+=k,A+=O;p+=P,A+=F}}},"float32,1,0,float32,0,1":function(){return function(c,v,d,p,y,g,A){var b=c[0],M=c[1],w=d[0],T=d[1],_=g[0],h=g[1];p|=0,A|=0;for(var L=p,S=A,k=c[1]|0;k>0;){k<64?(M=k,k=0):(M=64,k-=64);for(var P=c[0]|0;P>0;){P<64?(b=P,P=0):(b=64,P-=64),p=L+k*T+P*w,A=S+k*h+P*_;var O=0,F=0,D=T,R=w-M*T,U=h,N=_-M*h;for(F=0;F<b;++F){for(O=0;O<M;++O)v[p]=y[A],p+=D,A+=U;p+=R,A+=N}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(c,v,d,p,y,g,A){var b=c[0],M=c[1],w=c[2],T=d[0],_=d[1],h=d[2],L=g[0],S=g[1],k=g[2];p|=0,A|=0;for(var P=p,O=A,F=c[2]|0;F>0;){F<64?(w=F,F=0):(w=64,F-=64);for(var D=c[0]|0;D>0;){D<64?(b=D,D=0):(b=64,D-=64);for(var R=c[1]|0;R>0;){R<64?(M=R,R=0):(M=64,R-=64),p=P+F*h+D*T+R*_,A=O+F*k+D*L+R*S;var U=0,N=0,X=0,j=h,ee=T-w*h,q=_-b*T,G=k,J=L-w*k,le=S-b*L;for(X=0;X<M;++X){for(N=0;N<b;++N){for(U=0;U<w;++U)v[p]=y[A],p+=j,A+=G;p+=ee,A+=J}p+=q,A+=le}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(c,v,d,p,y,g,A){var b=c[0],M=c[1],w=c[2],T=d[0],_=d[1],h=d[2],L=g[0],S=g[1],k=g[2];p|=0,A|=0;var P=0,O=0,F=0,D=h,R=T-w*h,U=_-b*T,N=k,X=L-w*k,j=S-b*L;for(F=0;F<M;++F){for(O=0;O<b;++O){for(P=0;P<w;++P)v[p]=y[A],p+=D,A+=N;p+=R,A+=X}p+=U,A+=j}}}};function i(o,c){var v=c.join(","),d=t[v];return d()}var a=i,r={mul:function(o){var c={};return function(d,p,y){var g=d.dtype,A=d.order,b=p.dtype,M=p.order,w=y.dtype,T=y.order,_=[g,A.join(),b,M.join(),w,T.join()].join(),h=c[_];return h||(c[_]=h=o([g,A,b,M,w,T])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0,y.data,y.stride,y.offset|0)}},muls:function(o){var c={};return function(d,p,y){var g=d.dtype,A=d.order,b=p.dtype,M=p.order,w=[g,A.join(),b,M.join()].join(),T=c[w];return T||(c[w]=T=o([g,A,b,M])),T(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0,y)}},mulseq:function(o){var c={};return function(d,p){var y=d.dtype,g=d.order,A=[y,g.join()].join(),b=c[A];return b||(c[A]=b=o([y,g])),b(d.shape.slice(0),d.data,d.stride,d.offset|0,p)}},div:function(o){var c={};return function(d,p,y){var g=d.dtype,A=d.order,b=p.dtype,M=p.order,w=y.dtype,T=y.order,_=[g,A.join(),b,M.join(),w,T.join()].join(),h=c[_];return h||(c[_]=h=o([g,A,b,M,w,T])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0,y.data,y.stride,y.offset|0)}},divs:function(o){var c={};return function(d,p,y){var g=d.dtype,A=d.order,b=p.dtype,M=p.order,w=[g,A.join(),b,M.join()].join(),T=c[w];return T||(c[w]=T=o([g,A,b,M])),T(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0,y)}},divseq:function(o){var c={};return function(d,p){var y=d.dtype,g=d.order,A=[y,g.join()].join(),b=c[A];return b||(c[A]=b=o([y,g])),b(d.shape.slice(0),d.data,d.stride,d.offset|0,p)}},assign:function(o){var c={};return function(d,p){var y=d.dtype,g=d.order,A=p.dtype,b=p.order,M=[y,g.join(),A,b.join()].join(),w=c[M];return w||(c[M]=w=o([y,g,A,b])),w(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0)}}};function n(o){var c=r[o.funcName];return c(a.bind(void 0,o))}function f(o){return n({funcName:o.funcName})}var l={mul:"*",div:"/"};(function(){for(var o in l)x[o]=f({funcName:o}),x[o+"s"]=f({funcName:o+"s"}),x[o+"seq"]=f({funcName:o+"seq"})})(),x.assign=f({funcName:"assign"})},{}],255:[function(s,m,x){var t=s("ndarray"),i=s("./doConvert.js");m.exports=function(r,n){for(var f=[],l=r,o=1;Array.isArray(l);)f.push(l.length),o*=l.length,l=l[0];return f.length===0?t():(n||(n=t(new Float64Array(o),f)),i(n,r),n)}},{"./doConvert.js":256,ndarray:259}],256:[function(s,m,x){function t(){return function(l,o,c,v,d){var p=l[0],y=l[1],g=l[2],A=c[0],b=c[1],M=c[2],w=[0,0,0];v|=0;var T=0,_=0,h=0,L=M,S=b-g*M,k=A-y*b;for(h=0;h<p;++h){for(_=0;_<y;++_){for(T=0;T<g;++T){{var P=d,O;for(O=0;O<w.length-1;++O)P=P[w[O]];o[v]=P[w[w.length-1]]}v+=L,++w[2]}v+=S,w[2]-=g,++w[1]}v+=k,w[1]-=y,++w[0]}}}function i(){return t()}var a=i;function r(l){var o={};return function(v,d){var p=v.dtype,y=v.order,g=[p,y.join()].join(),A=o[g];return A||(o[g]=A=l([p,y])),A(v.shape.slice(0),v.data,v.stride,v.offset|0,d)}}function n(l){return r(a.bind(void 0,l))}function f(l){return n({funcName:l.funcName})}m.exports=f({funcName:"convert"})},{}],257:[function(s,m,x){var t=s("typedarray-pool");function i(c){switch(c){case"uint32":return[t.mallocUint32,t.freeUint32];default:return null}}var a={"uint32,1,0":function(c,v){return function(p,y,g,A,b,M,w,T,_,h,L){var S,k,P,O=p*b+A,F,D=c(T),R,U,N,X;for(S=p+1;S<=y;++S){for(k=S,O+=b,P=O,R=0,U=O,F=0;F<T;++F)D[R++]=g[U],U+=_;e:for(;k-- >p;){R=0,U=P-b;t:for(F=0;F<T;++F){if(N=g[U],X=D[R],N<X)break e;if(N>X)break t;U+=h,R+=L}for(R=P,U=P-b,F=0;F<T;++F)g[R]=g[U],R+=_,U+=_;P-=b}for(R=P,U=0,F=0;F<T;++F)g[R]=D[U++],R+=_}v(D)}}};function r(c,v){var d=i(v),p=[v,c].join(","),y=a[p];return d?y(d[0],d[1]):y()}var n={"uint32,1,0":function(c,v,d){return function p(y,g,A,b,M,w,T,_,h,L,S){var k=(g-y+1)/6|0,P=y+k,O=g-k,F=y+g>>1,D=F-k,R=F+k,U=P,N=D,X=F,j=R,ee=O,q=y+1,G=g-1,J=!0,le,fe,se,V,Y,ne,te,K,$,ae=0,ie=0,oe=0,ue,xe,he,me,be,Ce,Se,Be,Ye,Xe,Te,Ie,Ze,rt,Ge,ze,We=_,mt=v(We),Ft=v(We);xe=M*U,he=M*N,ze=b;e:for(ue=0;ue<_;++ue){if(te=xe+ze,K=he+ze,oe=A[te]-A[K],oe>0){fe=U,U=N,N=fe;break e}if(oe<0)break e;ze+=L}xe=M*j,he=M*ee,ze=b;e:for(ue=0;ue<_;++ue){if(te=xe+ze,K=he+ze,oe=A[te]-A[K],oe>0){fe=j,j=ee,ee=fe;break e}if(oe<0)break e;ze+=L}xe=M*U,he=M*X,ze=b;e:for(ue=0;ue<_;++ue){if(te=xe+ze,K=he+ze,oe=A[te]-A[K],oe>0){fe=U,U=X,X=fe;break e}if(oe<0)break e;ze+=L}xe=M*N,he=M*X,ze=b;e:for(ue=0;ue<_;++ue){if(te=xe+ze,K=he+ze,oe=A[te]-A[K],oe>0){fe=N,N=X,X=fe;break e}if(oe<0)break e;ze+=L}xe=M*U,he=M*j,ze=b;e:for(ue=0;ue<_;++ue){if(te=xe+ze,K=he+ze,oe=A[te]-A[K],oe>0){fe=U,U=j,j=fe;break e}if(oe<0)break e;ze+=L}xe=M*X,he=M*j,ze=b;e:for(ue=0;ue<_;++ue){if(te=xe+ze,K=he+ze,oe=A[te]-A[K],oe>0){fe=X,X=j,j=fe;break e}if(oe<0)break e;ze+=L}xe=M*N,he=M*ee,ze=b;e:for(ue=0;ue<_;++ue){if(te=xe+ze,K=he+ze,oe=A[te]-A[K],oe>0){fe=N,N=ee,ee=fe;break e}if(oe<0)break e;ze+=L}xe=M*N,he=M*X,ze=b;e:for(ue=0;ue<_;++ue){if(te=xe+ze,K=he+ze,oe=A[te]-A[K],oe>0){fe=N,N=X,X=fe;break e}if(oe<0)break e;ze+=L}xe=M*j,he=M*ee,ze=b;e:for(ue=0;ue<_;++ue){if(te=xe+ze,K=he+ze,oe=A[te]-A[K],oe>0){fe=j,j=ee,ee=fe;break e}if(oe<0)break e;ze+=L}for(xe=M*U,he=M*N,me=M*X,be=M*j,Ce=M*ee,Se=M*P,Be=M*F,Ye=M*O,Ge=0,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,$=me+ze,Xe=be+ze,Te=Ce+ze,Ie=Se+ze,Ze=Be+ze,rt=Ye+ze,mt[Ge]=A[K],Ft[Ge]=A[Xe],J=J&&mt[Ge]===Ft[Ge],se=A[te],V=A[$],Y=A[Te],A[Ie]=se,A[Ze]=V,A[rt]=Y,++Ge,ze+=h;for(xe=M*D,he=M*y,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,A[te]=A[K],ze+=h;for(xe=M*R,he=M*g,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,A[te]=A[K],ze+=h;if(J)for(ne=q;ne<=G;++ne){te=b+ne*M,Ge=0;e:for(ue=0;ue<_;++ue){if(oe=A[te]-mt[Ge],oe!==0)break e;Ge+=S,te+=L}if(oe!==0)if(oe<0){if(ne!==q)for(xe=M*ne,he=M*q,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,le=A[te],A[te]=A[K],A[K]=le,ze+=h;++q}else for(;;){te=b+G*M,Ge=0;e:for(ue=0;ue<_;++ue){if(oe=A[te]-mt[Ge],oe!==0)break e;Ge+=S,te+=L}if(oe>0)G--;else if(oe<0){for(xe=M*ne,he=M*q,me=M*G,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,$=me+ze,le=A[te],A[te]=A[K],A[K]=A[$],A[$]=le,ze+=h;++q,--G;break}else{for(xe=M*ne,he=M*G,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,le=A[te],A[te]=A[K],A[K]=le,ze+=h;--G;break}}}else for(ne=q;ne<=G;++ne){te=b+ne*M,Ge=0;e:for(ue=0;ue<_;++ue){if(ae=A[te]-mt[Ge],ae!==0)break e;Ge+=S,te+=L}if(ae<0){if(ne!==q)for(xe=M*ne,he=M*q,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,le=A[te],A[te]=A[K],A[K]=le,ze+=h;++q}else{te=b+ne*M,Ge=0;e:for(ue=0;ue<_;++ue){if(ie=A[te]-Ft[Ge],ie!==0)break e;Ge+=S,te+=L}if(ie>0)for(;;){te=b+G*M,Ge=0;e:for(ue=0;ue<_;++ue){if(oe=A[te]-Ft[Ge],oe!==0)break e;Ge+=S,te+=L}if(oe>0){if(--G<ne)break;continue}else{te=b+G*M,Ge=0;e:for(ue=0;ue<_;++ue){if(oe=A[te]-mt[Ge],oe!==0)break e;Ge+=S,te+=L}if(oe<0){for(xe=M*ne,he=M*q,me=M*G,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,$=me+ze,le=A[te],A[te]=A[K],A[K]=A[$],A[$]=le,ze+=h;++q,--G}else{for(xe=M*ne,he=M*G,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,le=A[te],A[te]=A[K],A[K]=le,ze+=h;--G}break}}}}for(xe=M*y,he=M*(q-1),Ge=0,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,A[te]=A[K],A[K]=mt[Ge],++Ge,ze+=h;for(xe=M*g,he=M*(G+1),Ge=0,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,A[te]=A[K],A[K]=Ft[Ge],++Ge,ze+=h;if(q-2-y<=32?c(y,q-2,A,b,M,w,T,_,h,L,S):p(y,q-2,A,b,M,w,T,_,h,L,S),g-(G+2)<=32?c(G+2,g,A,b,M,w,T,_,h,L,S):p(G+2,g,A,b,M,w,T,_,h,L,S),J){d(mt),d(Ft);return}if(q<P&&G>O){e:for(;;){for(te=b+q*M,Ge=0,ze=b,ue=0;ue<_;++ue){if(A[te]!==mt[Ge])break e;++Ge,te+=h}++q}e:for(;;){for(te=b+G*M,Ge=0,ze=b,ue=0;ue<_;++ue){if(A[te]!==Ft[Ge])break e;++Ge,te+=h}--G}for(ne=q;ne<=G;++ne){te=b+ne*M,Ge=0;e:for(ue=0;ue<_;++ue){if(ae=A[te]-mt[Ge],ae!==0)break e;Ge+=S,te+=L}if(ae===0){if(ne!==q)for(xe=M*ne,he=M*q,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,le=A[te],A[te]=A[K],A[K]=le,ze+=h;++q}else{te=b+ne*M,Ge=0;e:for(ue=0;ue<_;++ue){if(ie=A[te]-Ft[Ge],ie!==0)break e;Ge+=S,te+=L}if(ie===0)for(;;){te=b+G*M,Ge=0;e:for(ue=0;ue<_;++ue){if(oe=A[te]-Ft[Ge],oe!==0)break e;Ge+=S,te+=L}if(oe===0){if(--G<ne)break;continue}else{te=b+G*M,Ge=0;e:for(ue=0;ue<_;++ue){if(oe=A[te]-mt[Ge],oe!==0)break e;Ge+=S,te+=L}if(oe<0){for(xe=M*ne,he=M*q,me=M*G,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,$=me+ze,le=A[te],A[te]=A[K],A[K]=A[$],A[$]=le,ze+=h;++q,--G}else{for(xe=M*ne,he=M*G,ze=b,ue=0;ue<_;++ue)te=xe+ze,K=he+ze,le=A[te],A[te]=A[K],A[K]=le,ze+=h;--G}break}}}}}d(mt),d(Ft),G-q<=32?c(q,G,A,b,M,w,T,_,h,L,S):p(q,G,A,b,M,w,T,_,h,L,S)}}};function f(c,v,d){var p=i(v),y=[v,c].join(","),g=n[y];return c.length>1&&p?g(d,p[0],p[1]):g(d)}var l={"uint32,1,0":function(c,v){return function(d){var p=d.data,y=d.offset|0,g=d.shape,A=d.stride,b=A[0]|0,M=g[0]|0,w=A[1]|0,T=g[1]|0,_=w,h=w,L=1;M<=32?c(0,M-1,p,y,b,w,M,T,_,h,L):v(0,M-1,p,y,b,w,M,T,_,h,L)}}};function o(c,v){var d=[v,c].join(","),p=l[d],y=r(c,v),g=f(c,v,y);return p(y,g)}m.exports=o},{"typedarray-pool":308}],258:[function(s,m,x){var t=s("./lib/compile_sort.js"),i={};function a(r){var n=r.order,f=r.dtype,l=[n,f],o=l.join(":"),c=i[o];return c||(i[o]=c=t(n,f)),c(r),r}m.exports=a},{"./lib/compile_sort.js":257}],259:[function(s,m,x){var t=s("is-buffer"),i=typeof Float64Array!="undefined";function a(v,d){return v[0]-d[0]}function r(){var v=this.stride,d=new Array(v.length),p;for(p=0;p<d.length;++p)d[p]=[Math.abs(v[p]),p];d.sort(a);var y=new Array(d.length);for(p=0;p<y.length;++p)y[p]=d[p][1];return y}var n={T:function(v){function d(y){this.data=y}var p=d.prototype;return p.dtype=v,p.index=function(){return-1},p.size=0,p.dimension=-1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new d(this.data)},p.get=p.set=function(){},p.pick=function(){return null},function(g){return new d(g)}},0:function(v,d){function p(g,A){this.data=g,this.offset=A}var y=p.prototype;return y.dtype=v,y.index=function(){return this.offset},y.dimension=0,y.size=1,y.shape=y.stride=y.order=[],y.lo=y.hi=y.transpose=y.step=function(){return new p(this.data,this.offset)},y.pick=function(){return d(this.data)},y.valueOf=y.get=function(){return v==="generic"?this.data.get(this.offset):this.data[this.offset]},y.set=function(A){return v==="generic"?this.data.set(this.offset,A):this.data[this.offset]=A},function(A,b,M,w){return new p(A,w)}},1:function(v,d,p){function y(A,b,M,w){this.data=A,this.shape=[b],this.stride=[M],this.offset=w|0}var g=y.prototype;return g.dtype=v,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(b,M){return v==="generic"?this.data.set(this.offset+this.stride[0]*b,M):this.data[this.offset+this.stride[0]*b]=M},g.get=function(b){return v==="generic"?this.data.get(this.offset+this.stride[0]*b):this.data[this.offset+this.stride[0]*b]},g.index=function(b){return this.offset+this.stride[0]*b},g.hi=function(b){return new y(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,this.stride[0],this.offset)},g.lo=function(b){var M=this.offset,w=0,T=this.shape[0],_=this.stride[0];return typeof b=="number"&&b>=0&&(w=b|0,M+=_*w,T-=w),new y(this.data,T,_,M)},g.step=function(b){var M=this.shape[0],w=this.stride[0],T=this.offset,_=0,h=Math.ceil;return typeof b=="number"&&(_=b|0,_<0?(T+=w*(M-1),M=h(-M/_)):M=h(M/_),w*=_),new y(this.data,M,w,T)},g.transpose=function(b){b=b===void 0?0:b|0;var M=this.shape,w=this.stride;return new y(this.data,M[b],w[b],this.offset)},g.pick=function(b){var M=[],w=[],T=this.offset;typeof b=="number"&&b>=0?T=T+this.stride[0]*b|0:(M.push(this.shape[0]),w.push(this.stride[0]));var _=d[M.length+1];return _(this.data,M,w,T)},function(b,M,w,T){return new y(b,M[0],w[0],T)}},2:function(v,d,p){function y(A,b,M,w,T,_){this.data=A,this.shape=[b,M],this.stride=[w,T],this.offset=_|0}var g=y.prototype;return g.dtype=v,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(b,M,w){return v==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*M,w):this.data[this.offset+this.stride[0]*b+this.stride[1]*M]=w},g.get=function(b,M){return v==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*M):this.data[this.offset+this.stride[0]*b+this.stride[1]*M]},g.index=function(b,M){return this.offset+this.stride[0]*b+this.stride[1]*M},g.hi=function(b,M){return new y(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,typeof M!="number"||M<0?this.shape[1]:M|0,this.stride[0],this.stride[1],this.offset)},g.lo=function(b,M){var w=this.offset,T=0,_=this.shape[0],h=this.shape[1],L=this.stride[0],S=this.stride[1];return typeof b=="number"&&b>=0&&(T=b|0,w+=L*T,_-=T),typeof M=="number"&&M>=0&&(T=M|0,w+=S*T,h-=T),new y(this.data,_,h,L,S,w)},g.step=function(b,M){var w=this.shape[0],T=this.shape[1],_=this.stride[0],h=this.stride[1],L=this.offset,S=0,k=Math.ceil;return typeof b=="number"&&(S=b|0,S<0?(L+=_*(w-1),w=k(-w/S)):w=k(w/S),_*=S),typeof M=="number"&&(S=M|0,S<0?(L+=h*(T-1),T=k(-T/S)):T=k(T/S),h*=S),new y(this.data,w,T,_,h,L)},g.transpose=function(b,M){b=b===void 0?0:b|0,M=M===void 0?1:M|0;var w=this.shape,T=this.stride;return new y(this.data,w[b],w[M],T[b],T[M],this.offset)},g.pick=function(b,M){var w=[],T=[],_=this.offset;typeof b=="number"&&b>=0?_=_+this.stride[0]*b|0:(w.push(this.shape[0]),T.push(this.stride[0])),typeof M=="number"&&M>=0?_=_+this.stride[1]*M|0:(w.push(this.shape[1]),T.push(this.stride[1]));var h=d[w.length+1];return h(this.data,w,T,_)},function(b,M,w,T){return new y(b,M[0],M[1],w[0],w[1],T)}},3:function(v,d,p){function y(A,b,M,w,T,_,h,L){this.data=A,this.shape=[b,M,w],this.stride=[T,_,h],this.offset=L|0}var g=y.prototype;return g.dtype=v,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var b=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return b>M?M>w?[2,1,0]:b>w?[1,2,0]:[1,0,2]:b>w?[2,0,1]:w>M?[0,1,2]:[0,2,1]}}),g.set=function(b,M,w,T){return v==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w,T):this.data[this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w]=T},g.get=function(b,M,w){return v==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w):this.data[this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w]},g.index=function(b,M,w){return this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w},g.hi=function(b,M,w){return new y(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(b,M,w){var T=this.offset,_=0,h=this.shape[0],L=this.shape[1],S=this.shape[2],k=this.stride[0],P=this.stride[1],O=this.stride[2];return typeof b=="number"&&b>=0&&(_=b|0,T+=k*_,h-=_),typeof M=="number"&&M>=0&&(_=M|0,T+=P*_,L-=_),typeof w=="number"&&w>=0&&(_=w|0,T+=O*_,S-=_),new y(this.data,h,L,S,k,P,O,T)},g.step=function(b,M,w){var T=this.shape[0],_=this.shape[1],h=this.shape[2],L=this.stride[0],S=this.stride[1],k=this.stride[2],P=this.offset,O=0,F=Math.ceil;return typeof b=="number"&&(O=b|0,O<0?(P+=L*(T-1),T=F(-T/O)):T=F(T/O),L*=O),typeof M=="number"&&(O=M|0,O<0?(P+=S*(_-1),_=F(-_/O)):_=F(_/O),S*=O),typeof w=="number"&&(O=w|0,O<0?(P+=k*(h-1),h=F(-h/O)):h=F(h/O),k*=O),new y(this.data,T,_,h,L,S,k,P)},g.transpose=function(b,M,w){b=b===void 0?0:b|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0;var T=this.shape,_=this.stride;return new y(this.data,T[b],T[M],T[w],_[b],_[M],_[w],this.offset)},g.pick=function(b,M,w){var T=[],_=[],h=this.offset;typeof b=="number"&&b>=0?h=h+this.stride[0]*b|0:(T.push(this.shape[0]),_.push(this.stride[0])),typeof M=="number"&&M>=0?h=h+this.stride[1]*M|0:(T.push(this.shape[1]),_.push(this.stride[1])),typeof w=="number"&&w>=0?h=h+this.stride[2]*w|0:(T.push(this.shape[2]),_.push(this.stride[2]));var L=d[T.length+1];return L(this.data,T,_,h)},function(b,M,w,T){return new y(b,M[0],M[1],M[2],w[0],w[1],w[2],T)}},4:function(v,d,p){function y(A,b,M,w,T,_,h,L,S,k){this.data=A,this.shape=[b,M,w,T],this.stride=[_,h,L,S],this.offset=k|0}var g=y.prototype;return g.dtype=v,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(b,M,w,T,_){return v==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w+this.stride[3]*T,_):this.data[this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w+this.stride[3]*T]=_},g.get=function(b,M,w,T){return v==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w+this.stride[3]*T):this.data[this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w+this.stride[3]*T]},g.index=function(b,M,w,T){return this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*w+this.stride[3]*T},g.hi=function(b,M,w,T){return new y(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,typeof T!="number"||T<0?this.shape[3]:T|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(b,M,w,T){var _=this.offset,h=0,L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],O=this.stride[0],F=this.stride[1],D=this.stride[2],R=this.stride[3];return typeof b=="number"&&b>=0&&(h=b|0,_+=O*h,L-=h),typeof M=="number"&&M>=0&&(h=M|0,_+=F*h,S-=h),typeof w=="number"&&w>=0&&(h=w|0,_+=D*h,k-=h),typeof T=="number"&&T>=0&&(h=T|0,_+=R*h,P-=h),new y(this.data,L,S,k,P,O,F,D,R,_)},g.step=function(b,M,w,T){var _=this.shape[0],h=this.shape[1],L=this.shape[2],S=this.shape[3],k=this.stride[0],P=this.stride[1],O=this.stride[2],F=this.stride[3],D=this.offset,R=0,U=Math.ceil;return typeof b=="number"&&(R=b|0,R<0?(D+=k*(_-1),_=U(-_/R)):_=U(_/R),k*=R),typeof M=="number"&&(R=M|0,R<0?(D+=P*(h-1),h=U(-h/R)):h=U(h/R),P*=R),typeof w=="number"&&(R=w|0,R<0?(D+=O*(L-1),L=U(-L/R)):L=U(L/R),O*=R),typeof T=="number"&&(R=T|0,R<0?(D+=F*(S-1),S=U(-S/R)):S=U(S/R),F*=R),new y(this.data,_,h,L,S,k,P,O,F,D)},g.transpose=function(b,M,w,T){b=b===void 0?0:b|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0,T=T===void 0?3:T|0;var _=this.shape,h=this.stride;return new y(this.data,_[b],_[M],_[w],_[T],h[b],h[M],h[w],h[T],this.offset)},g.pick=function(b,M,w,T){var _=[],h=[],L=this.offset;typeof b=="number"&&b>=0?L=L+this.stride[0]*b|0:(_.push(this.shape[0]),h.push(this.stride[0])),typeof M=="number"&&M>=0?L=L+this.stride[1]*M|0:(_.push(this.shape[1]),h.push(this.stride[1])),typeof w=="number"&&w>=0?L=L+this.stride[2]*w|0:(_.push(this.shape[2]),h.push(this.stride[2])),typeof T=="number"&&T>=0?L=L+this.stride[3]*T|0:(_.push(this.shape[3]),h.push(this.stride[3]));var S=d[_.length+1];return S(this.data,_,h,L)},function(b,M,w,T){return new y(b,M[0],M[1],M[2],M[3],w[0],w[1],w[2],w[3],T)}},5:function(d,p,y){function g(b,M,w,T,_,h,L,S,k,P,O,F){this.data=b,this.shape=[M,w,T,_,h],this.stride=[L,S,k,P,O],this.offset=F|0}var A=g.prototype;return A.dtype=d,A.dimension=5,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(A,"order",{get:y}),A.set=function(M,w,T,_,h,L){return d==="generic"?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*h,L):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*h]=L},A.get=function(M,w,T,_,h){return d==="generic"?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*h):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*h]},A.index=function(M,w,T,_,h){return this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*h},A.hi=function(M,w,T,_,h){return new g(this.data,typeof M!="number"||M<0?this.shape[0]:M|0,typeof w!="number"||w<0?this.shape[1]:w|0,typeof T!="number"||T<0?this.shape[2]:T|0,typeof _!="number"||_<0?this.shape[3]:_|0,typeof h!="number"||h<0?this.shape[4]:h|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},A.lo=function(M,w,T,_,h){var L=this.offset,S=0,k=this.shape[0],P=this.shape[1],O=this.shape[2],F=this.shape[3],D=this.shape[4],R=this.stride[0],U=this.stride[1],N=this.stride[2],X=this.stride[3],j=this.stride[4];return typeof M=="number"&&M>=0&&(S=M|0,L+=R*S,k-=S),typeof w=="number"&&w>=0&&(S=w|0,L+=U*S,P-=S),typeof T=="number"&&T>=0&&(S=T|0,L+=N*S,O-=S),typeof _=="number"&&_>=0&&(S=_|0,L+=X*S,F-=S),typeof h=="number"&&h>=0&&(S=h|0,L+=j*S,D-=S),new g(this.data,k,P,O,F,D,R,U,N,X,j,L)},A.step=function(M,w,T,_,h){var L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],O=this.shape[4],F=this.stride[0],D=this.stride[1],R=this.stride[2],U=this.stride[3],N=this.stride[4],X=this.offset,j=0,ee=Math.ceil;return typeof M=="number"&&(j=M|0,j<0?(X+=F*(L-1),L=ee(-L/j)):L=ee(L/j),F*=j),typeof w=="number"&&(j=w|0,j<0?(X+=D*(S-1),S=ee(-S/j)):S=ee(S/j),D*=j),typeof T=="number"&&(j=T|0,j<0?(X+=R*(k-1),k=ee(-k/j)):k=ee(k/j),R*=j),typeof _=="number"&&(j=_|0,j<0?(X+=U*(P-1),P=ee(-P/j)):P=ee(P/j),U*=j),typeof h=="number"&&(j=h|0,j<0?(X+=N*(O-1),O=ee(-O/j)):O=ee(O/j),N*=j),new g(this.data,L,S,k,P,O,F,D,R,U,N,X)},A.transpose=function(M,w,T,_,h){M=M===void 0?0:M|0,w=w===void 0?1:w|0,T=T===void 0?2:T|0,_=_===void 0?3:_|0,h=h===void 0?4:h|0;var L=this.shape,S=this.stride;return new g(this.data,L[M],L[w],L[T],L[_],L[h],S[M],S[w],S[T],S[_],S[h],this.offset)},A.pick=function(M,w,T,_,h){var L=[],S=[],k=this.offset;typeof M=="number"&&M>=0?k=k+this.stride[0]*M|0:(L.push(this.shape[0]),S.push(this.stride[0])),typeof w=="number"&&w>=0?k=k+this.stride[1]*w|0:(L.push(this.shape[1]),S.push(this.stride[1])),typeof T=="number"&&T>=0?k=k+this.stride[2]*T|0:(L.push(this.shape[2]),S.push(this.stride[2])),typeof _=="number"&&_>=0?k=k+this.stride[3]*_|0:(L.push(this.shape[3]),S.push(this.stride[3])),typeof h=="number"&&h>=0?k=k+this.stride[4]*h|0:(L.push(this.shape[4]),S.push(this.stride[4]));var P=p[L.length+1];return P(this.data,L,S,k)},function(M,w,T,_){return new g(M,w[0],w[1],w[2],w[3],w[4],T[0],T[1],T[2],T[3],T[4],_)}}};function f(v,d){var p=d===-1?"T":String(d),y=n[p];return d===-1?y(v):d===0?y(v,o[v][0]):y(v,o[v],r)}function l(v){if(t(v))return"buffer";if(i)switch(Object.prototype.toString.call(v)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(v)?"array":"generic"}var o={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function c(v,d,p,y){if(v===void 0){var T=o.array[0];return T([])}else typeof v=="number"&&(v=[v]);d===void 0&&(d=[v.length]);var g=d.length;if(p===void 0){p=new Array(g);for(var A=g-1,b=1;A>=0;--A)p[A]=b,b*=d[A]}if(y===void 0){y=0;for(var A=0;A<g;++A)p[A]<0&&(y-=(d[A]-1)*p[A])}for(var M=l(v),w=o[M];w.length<=g+1;)w.push(f(M,w.length-1));var T=w[g+1];return T(v,d,p,y)}m.exports=c},{"is-buffer":237}],260:[function(s,m,x){var t=s("double-bits"),i=Math.pow(2,-1074),a=-1>>>0;m.exports=r;function r(n,f){if(isNaN(n)||isNaN(f))return NaN;if(n===f)return n;if(n===0)return f<0?-i:i;var l=t.hi(n),o=t.lo(n);return f>n==n>0?o===a?(l+=1,o=0):o+=1:o===0?(o=a,l-=1):o-=1,t.pack(o,l)}},{"double-bits":64}],261:[function(s,m,x){var t=1e-6,i=1e-6;x.vertexNormals=function(a,r,n){for(var f=r.length,l=new Array(f),o=n===void 0?t:n,c=0;c<f;++c)l[c]=[0,0,0];for(var c=0;c<a.length;++c)for(var v=a[c],d=0,p=v[v.length-1],y=v[0],g=0;g<v.length;++g){d=p,p=y,y=v[(g+1)%v.length];for(var A=r[d],b=r[p],M=r[y],w=new Array(3),T=0,_=new Array(3),h=0,L=0;L<3;++L)w[L]=A[L]-b[L],T+=w[L]*w[L],_[L]=M[L]-b[L],h+=_[L]*_[L];if(T*h>o)for(var S=l[p],k=1/Math.sqrt(T*h),L=0;L<3;++L){var P=(L+1)%3,O=(L+2)%3;S[L]+=k*(_[P]*w[O]-_[O]*w[P])}}for(var c=0;c<f;++c){for(var S=l[c],F=0,L=0;L<3;++L)F+=S[L]*S[L];if(F>o)for(var k=1/Math.sqrt(F),L=0;L<3;++L)S[L]*=k;else for(var L=0;L<3;++L)S[L]=0}return l},x.faceNormals=function(a,r,n){for(var f=a.length,l=new Array(f),o=n===void 0?i:n,c=0;c<f;++c){for(var v=a[c],d=new Array(3),p=0;p<3;++p)d[p]=r[v[p]];for(var y=new Array(3),g=new Array(3),p=0;p<3;++p)y[p]=d[1][p]-d[0][p],g[p]=d[2][p]-d[0][p];for(var A=new Array(3),b=0,p=0;p<3;++p){var M=(p+1)%3,w=(p+2)%3;A[p]=y[M]*g[w]-y[w]*g[M],b+=A[p]*A[p]}b>o?b=1/Math.sqrt(b):b=0;for(var p=0;p<3;++p)A[p]*=b;l[c]=A}return l}},{}],262:[function(s,m,x){m.exports=t;function t(i,a,r,n,f,l,o,c,v,d){var p=a+l+d;if(y>0){var y=Math.sqrt(p+1);i[0]=.5*(o-v)/y,i[1]=.5*(c-n)/y,i[2]=.5*(r-l)/y,i[3]=.5*y}else{var g=Math.max(a,l,d),y=Math.sqrt(2*g-p+1);a>=g?(i[0]=.5*y,i[1]=.5*(f+r)/y,i[2]=.5*(c+n)/y,i[3]=.5*(o-v)/y):l>=g?(i[0]=.5*(r+f)/y,i[1]=.5*y,i[2]=.5*(v+o)/y,i[3]=.5*(c-n)/y):(i[0]=.5*(n+c)/y,i[1]=.5*(o+v)/y,i[2]=.5*y,i[3]=.5*(r-f)/y)}return i}},{}],263:[function(s,m,x){m.exports=d;var t=s("filtered-vector"),i=s("gl-mat4/lookAt"),a=s("gl-mat4/fromQuat"),r=s("gl-mat4/invert"),n=s("./lib/quatFromFrame");function f(p,y,g){return Math.sqrt(Math.pow(p,2)+Math.pow(y,2)+Math.pow(g,2))}function l(p,y,g,A){return Math.sqrt(Math.pow(p,2)+Math.pow(y,2)+Math.pow(g,2)+Math.pow(A,2))}function o(p,y){var g=y[0],A=y[1],b=y[2],M=y[3],w=l(g,A,b,M);w>1e-6?(p[0]=g/w,p[1]=A/w,p[2]=b/w,p[3]=M/w):(p[0]=p[1]=p[2]=0,p[3]=1)}function c(p,y,g){this.radius=t([g]),this.center=t(y),this.rotation=t(p),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var v=c.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},v.recalcMatrix=function(p){this.radius.curve(p),this.center.curve(p),this.rotation.curve(p);var y=this.computedRotation;o(y,y);var g=this.computedMatrix;a(g,y);var A=this.computedCenter,b=this.computedEye,M=this.computedUp,w=Math.exp(this.computedRadius[0]);b[0]=A[0]+w*g[2],b[1]=A[1]+w*g[6],b[2]=A[2]+w*g[10],M[0]=g[1],M[1]=g[5],M[2]=g[9];for(var T=0;T<3;++T){for(var _=0,h=0;h<3;++h)_+=g[T+4*h]*b[h];g[12+T]=-_}},v.getMatrix=function(p,y){this.recalcMatrix(p);var g=this.computedMatrix;if(y){for(var A=0;A<16;++A)y[A]=g[A];return y}return g},v.idle=function(p){this.center.idle(p),this.radius.idle(p),this.rotation.idle(p)},v.flush=function(p){this.center.flush(p),this.radius.flush(p),this.rotation.flush(p)},v.pan=function(p,y,g,A){y=y||0,g=g||0,A=A||0,this.recalcMatrix(p);var b=this.computedMatrix,M=b[1],w=b[5],T=b[9],_=f(M,w,T);M/=_,w/=_,T/=_;var h=b[0],L=b[4],S=b[8],k=h*M+L*w+S*T;h-=M*k,L-=w*k,S-=T*k;var P=f(h,L,S);h/=P,L/=P,S/=P,b[2],b[6],b[10];var O=h*y+M*g,F=L*y+w*g,D=S*y+T*g;this.center.move(p,O,F,D);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+A),this.radius.set(p,Math.log(R))},v.rotate=function(p,y,g,A){this.recalcMatrix(p),y=y||0,g=g||0;var b=this.computedMatrix,M=b[0],w=b[4],T=b[8],_=b[1],h=b[5],L=b[9],S=b[2],k=b[6],P=b[10],O=y*M+g*_,F=y*w+g*h,D=y*T+g*L,R=-(k*D-P*F),U=-(P*O-S*D),N=-(S*F-k*O),X=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(U,2)-Math.pow(N,2))),j=l(R,U,N,X);j>1e-6?(R/=j,U/=j,N/=j,X/=j):(R=U=N=0,X=1);var ee=this.computedRotation,q=ee[0],G=ee[1],J=ee[2],le=ee[3],fe=q*X+le*R+G*N-J*U,se=G*X+le*U+J*R-q*N,V=J*X+le*N+q*U-G*R,Y=le*X-q*R-G*U-J*N;if(A){R=S,U=k,N=P;var ne=Math.sin(A)/f(R,U,N);R*=ne,U*=ne,N*=ne,X=Math.cos(y),fe=fe*X+Y*R+se*N-V*U,se=se*X+Y*U+V*R-fe*N,V=V*X+Y*N+fe*U-se*R,Y=Y*X-fe*R-se*U-V*N}var te=l(fe,se,V,Y);te>1e-6?(fe/=te,se/=te,V/=te,Y/=te):(fe=se=V=0,Y=1),this.rotation.set(p,fe,se,V,Y)},v.lookAt=function(p,y,g,A){this.recalcMatrix(p),g=g||this.computedCenter,y=y||this.computedEye,A=A||this.computedUp;var b=this.computedMatrix;i(b,y,g,A);var M=this.computedRotation;n(M,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),o(M,M),this.rotation.set(p,M[0],M[1],M[2],M[3]);for(var w=0,T=0;T<3;++T)w+=Math.pow(g[T]-y[T],2);this.radius.set(p,.5*Math.log(Math.max(w,1e-6))),this.center.set(p,g[0],g[1],g[2])},v.translate=function(p,y,g,A){this.center.move(p,y||0,g||0,A||0)},v.setMatrix=function(p,y){var g=this.computedRotation;n(g,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),o(g,g),this.rotation.set(p,g[0],g[1],g[2],g[3]);var A=this.computedMatrix;r(A,y);var b=A[15];if(Math.abs(b)>1e-6){var M=A[12]/b,w=A[13]/b,T=A[14]/b;this.recalcMatrix(p);var _=Math.exp(this.computedRadius[0]);this.center.set(p,M-A[2]*_,w-A[6]*_,T-A[10]*_),this.radius.idle(p)}else this.center.idle(p),this.radius.idle(p)},v.setDistance=function(p,y){y>0&&this.radius.set(p,Math.log(y))},v.setDistanceLimits=function(p,y){p>0?p=Math.log(p):p=-1/0,y>0?y=Math.log(y):y=1/0,y=Math.max(y,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=y},v.getDistanceLimits=function(p){var y=this.radius.bounds;return p?(p[0]=Math.exp(y[0][0]),p[1]=Math.exp(y[1][0]),p):[Math.exp(y[0][0]),Math.exp(y[1][0])]},v.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},v.fromJSON=function(p){var y=this.lastT(),g=p.center;g&&this.center.set(y,g[0],g[1],g[2]);var A=p.rotation;A&&this.rotation.set(y,A[0],A[1],A[2],A[3]);var b=p.distance;b&&b>0&&this.radius.set(y,Math.log(b)),this.setDistanceLimits(p.zoomMin,p.zoomMax)};function d(p){p=p||{};var y=p.center||[0,0,0],g=p.rotation||[0,0,0,1],A=p.radius||1;y=[].slice.call(y,0,3),g=[].slice.call(g,0,4),o(g,g);var b=new c(g,y,Math.log(A));return b.setDistanceLimits(p.zoomMin,p.zoomMax),("eye"in p||"up"in p)&&b.lookAt(0,p.eye,p.center,p.up),b}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(s,m,x){var t=s("repeat-string");m.exports=function(a,r,n){return n=typeof n!="undefined"?n+"":" ",t(n,r)+a}},{"repeat-string":277}],265:[function(s,m,x){m.exports=function(i,a){a||(a=[0,""]),i=String(i);var r=parseFloat(i,10);return a[0]=r,a[1]=i.match(/[\d.\-\+]*\s*(.*)/)[1]||"",a}},{}],266:[function(s,m,x){m.exports=i;var t=s("compare-angle");function i(a,r){for(var n=r.length|0,f=a.length,l=[new Array(n),new Array(n)],o=0;o<n;++o)l[0][o]=[],l[1][o]=[];for(var o=0;o<f;++o){var c=a[o];l[0][c[0]].push(c),l[1][c[1]].push(c)}for(var v=[],o=0;o<n;++o)l[0][o].length+l[1][o].length===0&&v.push([o]);function d(w,T){var _=l[T][w[T]];_.splice(_.indexOf(w),1)}function p(w,T,_){for(var h,L,S,k=0;k<2;++k)if(l[k][T].length>0){h=l[k][T][0],S=k;break}L=h[S^1];for(var P=0;P<2;++P)for(var O=l[P][T],F=0;F<O.length;++F){var D=O[F],R=D[P^1],U=t(r[w],r[T],r[L],r[R]);U>0&&(h=D,L=R,S=P)}return _||h&&d(h,S),L}function y(w,T){var _=l[T][w][0],h=[w];d(_,T);for(var L=_[T^1];;){for(;L!==w;)h.push(L),L=p(h[h.length-2],L,!1);if(l[0][w].length+l[1][w].length===0)break;var S=h[h.length-1],k=w,P=h[1],O=p(S,k,!0);if(t(r[S],r[k],r[P],r[O])<0)break;h.push(w),L=p(S,k)}return h}function g(w,T){return T[1]===T[T.length-1]}for(var o=0;o<n;++o)for(var A=0;A<2;++A){for(var b=[];l[A][o].length>0;){l[0][o].length;var M=y(o,A);g(b,M)?b.push.apply(b,M):(b.length>0&&v.push(b),b=M)}b.length>0&&v.push(b)}return v}},{"compare-angle":54}],267:[function(s,m,x){m.exports=i;var t=s("edges-to-adjacency-list");function i(a,r){for(var n=t(a,r.length),f=new Array(r.length),l=new Array(r.length),o=[],c=0;c<r.length;++c){var v=n[c].length;l[c]=v,f[c]=!0,v<=1&&o.push(c)}for(;o.length>0;){var d=o.pop();f[d]=!1;for(var p=n[d],c=0;c<p.length;++c){var y=p[c];--l[y]==0&&o.push(y)}}for(var g=new Array(r.length),A=[],c=0;c<r.length;++c)if(f[c]){var d=A.length;g[c]=d,A.push(r[c])}else g[c]=-1;for(var b=[],c=0;c<a.length;++c){var M=a[c];f[M[0]]&&f[M[1]]&&b.push([g[M[0]],g[M[1]]])}return[b,A]}},{"edges-to-adjacency-list":66}],268:[function(s,m,x){m.exports=v;var t=s("edges-to-adjacency-list"),i=s("planar-dual"),a=s("point-in-big-polygon"),r=s("two-product"),n=s("robust-sum"),f=s("uniq"),l=s("./lib/trim-leaves");function o(d,p){for(var y=new Array(d),g=0;g<d;++g)y[g]=p;return y}function c(d){for(var p=new Array(d),y=0;y<d;++y)p[y]=[];return p}function v(d,p){var y=l(d,p);d=y[0],p=y[1];var g=p.length;d.length;for(var A=t(d,p.length),b=0;b<g;++b)if(A[b].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var M=i(d,p);function w(oe){for(var ue=oe.length,xe=[0],he=0;he<ue;++he){var me=p[oe[he]],be=p[oe[(he+1)%ue]],Ce=r(-me[0],me[1]),Se=r(-me[0],be[1]),Be=r(be[0],me[1]),Ye=r(be[0],be[1]);xe=n(xe,n(n(Ce,Se),n(Be,Ye)))}return xe[xe.length-1]>0}M=M.filter(w);for(var T=M.length,_=new Array(T),h=new Array(T),b=0;b<T;++b){_[b]=b;var L=new Array(T),S=M[b].map(function(ue){return p[ue]}),k=a([S]),P=0;e:for(var O=0;O<T;++O)if(L[O]=0,b!==O){for(var F=M[O],D=F.length,R=0;R<D;++R){var U=k(p[F[R]]);if(U!==0){U<0&&(L[O]=1,P+=1);continue e}}L[O]=1,P+=1}h[b]=[P,b,L]}h.sort(function(oe,ue){return ue[0]-oe[0]});for(var b=0;b<T;++b)for(var L=h[b],N=L[1],X=L[2],O=0;O<T;++O)X[O]&&(_[O]=N);for(var j=c(T),b=0;b<T;++b)j[b].push(_[b]),j[_[b]].push(b);for(var ee={},q=o(g,!1),b=0;b<T;++b)for(var F=M[b],D=F.length,O=0;O<D;++O){var G=F[O],J=F[(O+1)%D],le=Math.min(G,J)+":"+Math.max(G,J);if(le in ee){var fe=ee[le];j[fe].push(b),j[b].push(fe),q[G]=q[J]=!0}else ee[le]=b}function se(oe){for(var ue=oe.length,xe=0;xe<ue;++xe)if(!q[oe[xe]])return!1;return!0}for(var V=[],Y=o(T,-1),b=0;b<T;++b)_[b]===b&&!se(M[b])?(V.push(b),Y[b]=0):Y[b]=-1;for(var y=[];V.length>0;){var ne=V.pop(),te=j[ne];f(te,function(oe,ue){return oe-ue});var K=te.length,$=Y[ne],ae;if($===0){var F=M[ne];ae=[F]}for(var b=0;b<K;++b){var ie=te[b];if(!(Y[ie]>=0)&&(Y[ie]=$^1,V.push(ie),$===0)){var F=M[ie];se(F)||(F.reverse(),ae.push(F))}}$===0&&y.push(ae)}return y}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(s,m,x){m.exports=p;var t=s("robust-orientation")[3],i=s("slab-decomposition"),a=s("interval-tree-1d"),r=s("binary-search-bounds");function n(){return!0}function f(y){return function(g,A){var b=y[g];return b?!!b.queryPoint(A,n):!1}}function l(y){for(var g={},A=0;A<y.length;++A){var b=y[A],M=b[0][0],w=b[0][1],T=b[1][1],_=[Math.min(w,T),Math.max(w,T)];M in g?g[M].push(_):g[M]=[_]}for(var h={},L=Object.keys(g),A=0;A<L.length;++A){var S=g[L[A]];h[L[A]]=a(S)}return f(h)}function o(y,g){return function(A){var b=r.le(g,A[0]);if(b<0)return 1;var M=y[b];if(!M)if(b>0&&g[b]===A[0])M=y[b-1];else return 1;for(var w=1;M;){var T=M.key,_=t(A,T[0],T[1]);if(T[0][0]<T[1][0])if(_<0)M=M.left;else if(_>0)w=-1,M=M.right;else return 0;else if(_>0)M=M.left;else if(_<0)w=1,M=M.right;else return 0}return w}}function c(y){return 1}function v(y){return function(A){return y(A[0],A[1])?0:1}}function d(y,g){return function(b){return y(b[0],b[1])?0:g(b)}}function p(y){for(var g=y.length,A=[],b=[],M=0;M<g;++M)for(var w=y[M],T=w.length,_=T-1,h=0;h<T;_=h++){var L=w[_],S=w[h];L[0]===S[0]?b.push([L,S]):A.push([L,S])}if(A.length===0)return b.length===0?c:v(l(b));var k=i(A),P=o(k.slabs,k.coordinates);return b.length===0?P:d(l(b),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(s,m,x){var t=new Float64Array(4),i=new Float64Array(4),a=new Float64Array(4);function r(n,f,l,o,c){t.length<o.length&&(t=new Float64Array(o.length),i=new Float64Array(o.length),a=new Float64Array(o.length));for(var v=0;v<o.length;++v)t[v]=n[v]-o[v],i[v]=f[v]-n[v],a[v]=l[v]-n[v];for(var d=0,p=0,y=0,g=0,A=0,b=0,v=0;v<o.length;++v){var M=i[v],w=a[v],T=t[v];d+=M*M,p+=M*w,y+=w*w,g+=T*M,A+=T*w,b+=T*T}var _=Math.abs(d*y-p*p),h=p*A-y*g,L=p*g-d*A,S;if(h+L<=_)if(h<0)L<0&&g<0?(L=0,-g>=d?(h=1,S=d+2*g+b):(h=-g/d,S=g*h+b)):(h=0,A>=0?(L=0,S=b):-A>=y?(L=1,S=y+2*A+b):(L=-A/y,S=A*L+b));else if(L<0)L=0,g>=0?(h=0,S=b):-g>=d?(h=1,S=d+2*g+b):(h=-g/d,S=g*h+b);else{var k=1/_;h*=k,L*=k,S=h*(d*h+p*L+2*g)+L*(p*h+y*L+2*A)+b}else{var P,O,F,D;h<0?(P=p+g,O=y+A,O>P?(F=O-P,D=d-2*p+y,F>=D?(h=1,L=0,S=d+2*g+b):(h=F/D,L=1-h,S=h*(d*h+p*L+2*g)+L*(p*h+y*L+2*A)+b)):(h=0,O<=0?(L=1,S=y+2*A+b):A>=0?(L=0,S=b):(L=-A/y,S=A*L+b))):L<0?(P=p+A,O=d+g,O>P?(F=O-P,D=d-2*p+y,F>=D?(L=1,h=0,S=y+2*A+b):(L=F/D,h=1-L,S=h*(d*h+p*L+2*g)+L*(p*h+y*L+2*A)+b)):(L=0,O<=0?(h=1,S=d+2*g+b):g>=0?(h=0,S=b):(h=-g/d,S=g*h+b))):(F=y+A-p-g,F<=0?(h=0,L=1,S=y+2*A+b):(D=d-2*p+y,F>=D?(h=1,L=0,S=d+2*g+b):(h=F/D,L=1-h,S=h*(d*h+p*L+2*g)+L*(p*h+y*L+2*A)+b)))}for(var R=1-h-L,v=0;v<o.length;++v)c[v]=R*n[v]+h*f[v]+L*l[v];return S<0?0:S}m.exports=r},{}],271:[function(s,m,x){m.exports=s("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(s,m,x){var t=s("big-rat/add");m.exports=i;function i(a,r){for(var n=a.length,f=new Array(n),l=0;l<n;++l)f[l]=t(a[l],r[l]);return f}},{"big-rat/add":15}],273:[function(s,m,x){m.exports=i;var t=s("big-rat");function i(a){for(var r=new Array(a.length),n=0;n<a.length;++n)r[n]=t(a[n]);return r}},{"big-rat":18}],274:[function(s,m,x){var t=s("big-rat"),i=s("big-rat/mul");m.exports=a;function a(r,n){for(var f=t(n),l=r.length,o=new Array(l),c=0;c<l;++c)o[c]=i(r[c],f);return o}},{"big-rat":18,"big-rat/mul":27}],275:[function(s,m,x){var t=s("big-rat/sub");m.exports=i;function i(a,r){for(var n=a.length,f=new Array(n),l=0;l<n;++l)f[l]=t(a[l],r[l]);return f}},{"big-rat/sub":29}],276:[function(s,m,x){var t=s("compare-cell"),i=s("compare-oriented-cell"),a=s("cell-orientation");m.exports=r;function r(n){n.sort(i);for(var f=n.length,l=0,o=0;o<f;++o){var c=n[o],v=a(c);if(v!==0){if(l>0){var d=n[l-1];if(t(c,d)===0&&a(d)!==v){l-=1;continue}}n[l++]=c}}return n.length=l,n}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(s,m,x){var t="",i;m.exports=a;function a(r,n){if(typeof r!="string")throw new TypeError("expected a string");if(n===1)return r;if(n===2)return r+r;var f=r.length*n;if(i!==r||typeof i=="undefined")i=r,t="";else if(t.length>=f)return t.substr(0,f);for(;f>t.length&&n>1;)n&1&&(t+=r),n>>=1,r+=r;return t+=r,t=t.substr(0,f),t}},{}],278:[function(s,m,x){(function(t){(function(){m.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof u!="undefined"?u:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],279:[function(s,m,x){m.exports=t;function t(i){for(var a=i.length,r=i[i.length-1],n=a,f=a-2;f>=0;--f){var l=r,o=i[f];r=l+o;var c=r-l,v=o-c;v&&(i[--n]=r,r=v)}for(var d=0,f=n;f<a;++f){var l=i[f],o=r;r=l+o;var c=r-l,v=o-c;v&&(i[d++]=v)}return i[d++]=r,i.length=d,i}},{}],280:[function(s,m,x){var t=s("two-product"),i=s("robust-sum"),a=s("robust-scale"),r=s("robust-compress"),n=4;function f(p,y,g,A){return function(M){return A(p(g(M[0][0],M[1][1]),g(-M[0][1],M[1][0])))}}function l(p,y,g,A){return function(M){return A(p(y(p(g(M[1][1],M[2][2]),g(-M[1][2],M[2][1])),M[0][0]),p(y(p(g(M[1][0],M[2][2]),g(-M[1][2],M[2][0])),-M[0][1]),y(p(g(M[1][0],M[2][1]),g(-M[1][1],M[2][0])),M[0][2]))))}}function o(p){var y=p===2?f:p===3?l:void 0;return y(i,a,t,r)}var c=[function(){return[0]},function(y){return[y[0][0]]}];function v(p,y,g,A,b,M){return function(T){switch(T.length){case 0:return p(T);case 1:return y(T);case 2:return g(T);case 3:return A(T)}var _=b[T.length];return _||(_=b[T.length]=M(T.length)),_(T)}}function d(){for(;c.length<n;)c.push(o(c.length));m.exports=v.apply(void 0,c.concat([c,o]));for(var p=0;p<c.length;++p)m.exports[p]=c[p]}d()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(s,m,x){var t=s("two-product"),i=s("robust-sum");m.exports=a;function a(r,n){for(var f=t(r[0],n[0]),l=1;l<r.length;++l)f=i(f,t(r[l],n[l]));return f}},{"robust-sum":289,"two-product":306}],282:[function(s,m,x){var t=s("two-product"),i=s("robust-sum"),a=s("robust-subtract"),r=s("robust-scale"),n=6;function f(w){var T=w===3?v:w===4?d:w===5?p:y;return T(i,a,t,r)}function l(){return 0}function o(){return 0}function c(){return 0}function v(w,T,_,h){function L(S,k,P){var O=_(S[0],S[0]),F=h(O,k[0]),D=h(O,P[0]),R=_(k[0],k[0]),U=h(R,S[0]),N=h(R,P[0]),X=_(P[0],P[0]),j=h(X,S[0]),ee=h(X,k[0]),q=w(T(ee,N),T(U,F)),G=T(j,D),J=T(q,G);return J[J.length-1]}return L}function d(w,T,_,h){function L(S,k,P,O){var F=w(_(S[0],S[0]),_(S[1],S[1])),D=h(F,k[0]),R=h(F,P[0]),U=h(F,O[0]),N=w(_(k[0],k[0]),_(k[1],k[1])),X=h(N,S[0]),j=h(N,P[0]),ee=h(N,O[0]),q=w(_(P[0],P[0]),_(P[1],P[1])),G=h(q,S[0]),J=h(q,k[0]),le=h(q,O[0]),fe=w(_(O[0],O[0]),_(O[1],O[1])),se=h(fe,S[0]),V=h(fe,k[0]),Y=h(fe,P[0]),ne=w(w(h(T(Y,le),k[1]),w(h(T(V,ee),-P[1]),h(T(J,j),O[1]))),w(h(T(V,ee),S[1]),w(h(T(se,U),-k[1]),h(T(X,D),O[1])))),te=w(w(h(T(Y,le),S[1]),w(h(T(se,U),-P[1]),h(T(G,R),O[1]))),w(h(T(J,j),S[1]),w(h(T(G,R),-k[1]),h(T(X,D),P[1])))),K=T(ne,te);return K[K.length-1]}return L}function p(w,T,_,h){function L(S,k,P,O,F){var D=w(_(S[0],S[0]),w(_(S[1],S[1]),_(S[2],S[2]))),R=h(D,k[0]),U=h(D,P[0]),N=h(D,O[0]),X=h(D,F[0]),j=w(_(k[0],k[0]),w(_(k[1],k[1]),_(k[2],k[2]))),ee=h(j,S[0]),q=h(j,P[0]),G=h(j,O[0]),J=h(j,F[0]),le=w(_(P[0],P[0]),w(_(P[1],P[1]),_(P[2],P[2]))),fe=h(le,S[0]),se=h(le,k[0]),V=h(le,O[0]),Y=h(le,F[0]),ne=w(_(O[0],O[0]),w(_(O[1],O[1]),_(O[2],O[2]))),te=h(ne,S[0]),K=h(ne,k[0]),$=h(ne,P[0]),ae=h(ne,F[0]),ie=w(_(F[0],F[0]),w(_(F[1],F[1]),_(F[2],F[2]))),oe=h(ie,S[0]),ue=h(ie,k[0]),xe=h(ie,P[0]),he=h(ie,O[0]),me=w(w(w(h(w(h(T(he,ae),P[1]),w(h(T(xe,Y),-O[1]),h(T($,V),F[1]))),k[2]),w(h(w(h(T(he,ae),k[1]),w(h(T(ue,J),-O[1]),h(T(K,G),F[1]))),-P[2]),h(w(h(T(xe,Y),k[1]),w(h(T(ue,J),-P[1]),h(T(se,q),F[1]))),O[2]))),w(h(w(h(T($,V),k[1]),w(h(T(K,G),-P[1]),h(T(se,q),O[1]))),-F[2]),w(h(w(h(T(he,ae),k[1]),w(h(T(ue,J),-O[1]),h(T(K,G),F[1]))),S[2]),h(w(h(T(he,ae),S[1]),w(h(T(oe,X),-O[1]),h(T(te,N),F[1]))),-k[2])))),w(w(h(w(h(T(ue,J),S[1]),w(h(T(oe,X),-k[1]),h(T(ee,R),F[1]))),O[2]),w(h(w(h(T(K,G),S[1]),w(h(T(te,N),-k[1]),h(T(ee,R),O[1]))),-F[2]),h(w(h(T($,V),k[1]),w(h(T(K,G),-P[1]),h(T(se,q),O[1]))),S[2]))),w(h(w(h(T($,V),S[1]),w(h(T(te,N),-P[1]),h(T(fe,U),O[1]))),-k[2]),w(h(w(h(T(K,G),S[1]),w(h(T(te,N),-k[1]),h(T(ee,R),O[1]))),P[2]),h(w(h(T(se,q),S[1]),w(h(T(fe,U),-k[1]),h(T(ee,R),P[1]))),-O[2]))))),be=w(w(w(h(w(h(T(he,ae),P[1]),w(h(T(xe,Y),-O[1]),h(T($,V),F[1]))),S[2]),h(w(h(T(he,ae),S[1]),w(h(T(oe,X),-O[1]),h(T(te,N),F[1]))),-P[2])),w(h(w(h(T(xe,Y),S[1]),w(h(T(oe,X),-P[1]),h(T(fe,U),F[1]))),O[2]),h(w(h(T($,V),S[1]),w(h(T(te,N),-P[1]),h(T(fe,U),O[1]))),-F[2]))),w(w(h(w(h(T(xe,Y),k[1]),w(h(T(ue,J),-P[1]),h(T(se,q),F[1]))),S[2]),h(w(h(T(xe,Y),S[1]),w(h(T(oe,X),-P[1]),h(T(fe,U),F[1]))),-k[2])),w(h(w(h(T(ue,J),S[1]),w(h(T(oe,X),-k[1]),h(T(ee,R),F[1]))),P[2]),h(w(h(T(se,q),S[1]),w(h(T(fe,U),-k[1]),h(T(ee,R),P[1]))),-F[2])))),Ce=T(me,be);return Ce[Ce.length-1]}return L}function y(w,T,_,h){function L(S,k,P,O,F,D){var R=w(w(_(S[0],S[0]),_(S[1],S[1])),w(_(S[2],S[2]),_(S[3],S[3]))),U=h(R,k[0]),N=h(R,P[0]),X=h(R,O[0]),j=h(R,F[0]),ee=h(R,D[0]),q=w(w(_(k[0],k[0]),_(k[1],k[1])),w(_(k[2],k[2]),_(k[3],k[3]))),G=h(q,S[0]),J=h(q,P[0]),le=h(q,O[0]),fe=h(q,F[0]),se=h(q,D[0]),V=w(w(_(P[0],P[0]),_(P[1],P[1])),w(_(P[2],P[2]),_(P[3],P[3]))),Y=h(V,S[0]),ne=h(V,k[0]),te=h(V,O[0]),K=h(V,F[0]),$=h(V,D[0]),ae=w(w(_(O[0],O[0]),_(O[1],O[1])),w(_(O[2],O[2]),_(O[3],O[3]))),ie=h(ae,S[0]),oe=h(ae,k[0]),ue=h(ae,P[0]),xe=h(ae,F[0]),he=h(ae,D[0]),me=w(w(_(F[0],F[0]),_(F[1],F[1])),w(_(F[2],F[2]),_(F[3],F[3]))),be=h(me,S[0]),Ce=h(me,k[0]),Se=h(me,P[0]),Be=h(me,O[0]),Ye=h(me,D[0]),Xe=w(w(_(D[0],D[0]),_(D[1],D[1])),w(_(D[2],D[2]),_(D[3],D[3]))),Te=h(Xe,S[0]),Ie=h(Xe,k[0]),Ze=h(Xe,P[0]),rt=h(Xe,O[0]),Ge=h(Xe,F[0]),ze=w(w(w(h(w(w(h(w(h(T(Ge,Ye),O[1]),w(h(T(rt,he),-F[1]),h(T(Be,xe),D[1]))),P[2]),h(w(h(T(Ge,Ye),P[1]),w(h(T(Ze,$),-F[1]),h(T(Se,K),D[1]))),-O[2])),w(h(w(h(T(rt,he),P[1]),w(h(T(Ze,$),-O[1]),h(T(ue,te),D[1]))),F[2]),h(w(h(T(Be,xe),P[1]),w(h(T(Se,K),-O[1]),h(T(ue,te),F[1]))),-D[2]))),k[3]),w(h(w(w(h(w(h(T(Ge,Ye),O[1]),w(h(T(rt,he),-F[1]),h(T(Be,xe),D[1]))),k[2]),h(w(h(T(Ge,Ye),k[1]),w(h(T(Ie,se),-F[1]),h(T(Ce,fe),D[1]))),-O[2])),w(h(w(h(T(rt,he),k[1]),w(h(T(Ie,se),-O[1]),h(T(oe,le),D[1]))),F[2]),h(w(h(T(Be,xe),k[1]),w(h(T(Ce,fe),-O[1]),h(T(oe,le),F[1]))),-D[2]))),-P[3]),h(w(w(h(w(h(T(Ge,Ye),P[1]),w(h(T(Ze,$),-F[1]),h(T(Se,K),D[1]))),k[2]),h(w(h(T(Ge,Ye),k[1]),w(h(T(Ie,se),-F[1]),h(T(Ce,fe),D[1]))),-P[2])),w(h(w(h(T(Ze,$),k[1]),w(h(T(Ie,se),-P[1]),h(T(ne,J),D[1]))),F[2]),h(w(h(T(Se,K),k[1]),w(h(T(Ce,fe),-P[1]),h(T(ne,J),F[1]))),-D[2]))),O[3]))),w(w(h(w(w(h(w(h(T(rt,he),P[1]),w(h(T(Ze,$),-O[1]),h(T(ue,te),D[1]))),k[2]),h(w(h(T(rt,he),k[1]),w(h(T(Ie,se),-O[1]),h(T(oe,le),D[1]))),-P[2])),w(h(w(h(T(Ze,$),k[1]),w(h(T(Ie,se),-P[1]),h(T(ne,J),D[1]))),O[2]),h(w(h(T(ue,te),k[1]),w(h(T(oe,le),-P[1]),h(T(ne,J),O[1]))),-D[2]))),-F[3]),h(w(w(h(w(h(T(Be,xe),P[1]),w(h(T(Se,K),-O[1]),h(T(ue,te),F[1]))),k[2]),h(w(h(T(Be,xe),k[1]),w(h(T(Ce,fe),-O[1]),h(T(oe,le),F[1]))),-P[2])),w(h(w(h(T(Se,K),k[1]),w(h(T(Ce,fe),-P[1]),h(T(ne,J),F[1]))),O[2]),h(w(h(T(ue,te),k[1]),w(h(T(oe,le),-P[1]),h(T(ne,J),O[1]))),-F[2]))),D[3])),w(h(w(w(h(w(h(T(Ge,Ye),O[1]),w(h(T(rt,he),-F[1]),h(T(Be,xe),D[1]))),k[2]),h(w(h(T(Ge,Ye),k[1]),w(h(T(Ie,se),-F[1]),h(T(Ce,fe),D[1]))),-O[2])),w(h(w(h(T(rt,he),k[1]),w(h(T(Ie,se),-O[1]),h(T(oe,le),D[1]))),F[2]),h(w(h(T(Be,xe),k[1]),w(h(T(Ce,fe),-O[1]),h(T(oe,le),F[1]))),-D[2]))),S[3]),h(w(w(h(w(h(T(Ge,Ye),O[1]),w(h(T(rt,he),-F[1]),h(T(Be,xe),D[1]))),S[2]),h(w(h(T(Ge,Ye),S[1]),w(h(T(Te,ee),-F[1]),h(T(be,j),D[1]))),-O[2])),w(h(w(h(T(rt,he),S[1]),w(h(T(Te,ee),-O[1]),h(T(ie,X),D[1]))),F[2]),h(w(h(T(Be,xe),S[1]),w(h(T(be,j),-O[1]),h(T(ie,X),F[1]))),-D[2]))),-k[3])))),w(w(w(h(w(w(h(w(h(T(Ge,Ye),k[1]),w(h(T(Ie,se),-F[1]),h(T(Ce,fe),D[1]))),S[2]),h(w(h(T(Ge,Ye),S[1]),w(h(T(Te,ee),-F[1]),h(T(be,j),D[1]))),-k[2])),w(h(w(h(T(Ie,se),S[1]),w(h(T(Te,ee),-k[1]),h(T(G,U),D[1]))),F[2]),h(w(h(T(Ce,fe),S[1]),w(h(T(be,j),-k[1]),h(T(G,U),F[1]))),-D[2]))),O[3]),h(w(w(h(w(h(T(rt,he),k[1]),w(h(T(Ie,se),-O[1]),h(T(oe,le),D[1]))),S[2]),h(w(h(T(rt,he),S[1]),w(h(T(Te,ee),-O[1]),h(T(ie,X),D[1]))),-k[2])),w(h(w(h(T(Ie,se),S[1]),w(h(T(Te,ee),-k[1]),h(T(G,U),D[1]))),O[2]),h(w(h(T(oe,le),S[1]),w(h(T(ie,X),-k[1]),h(T(G,U),O[1]))),-D[2]))),-F[3])),w(h(w(w(h(w(h(T(Be,xe),k[1]),w(h(T(Ce,fe),-O[1]),h(T(oe,le),F[1]))),S[2]),h(w(h(T(Be,xe),S[1]),w(h(T(be,j),-O[1]),h(T(ie,X),F[1]))),-k[2])),w(h(w(h(T(Ce,fe),S[1]),w(h(T(be,j),-k[1]),h(T(G,U),F[1]))),O[2]),h(w(h(T(oe,le),S[1]),w(h(T(ie,X),-k[1]),h(T(G,U),O[1]))),-F[2]))),D[3]),h(w(w(h(w(h(T(rt,he),P[1]),w(h(T(Ze,$),-O[1]),h(T(ue,te),D[1]))),k[2]),h(w(h(T(rt,he),k[1]),w(h(T(Ie,se),-O[1]),h(T(oe,le),D[1]))),-P[2])),w(h(w(h(T(Ze,$),k[1]),w(h(T(Ie,se),-P[1]),h(T(ne,J),D[1]))),O[2]),h(w(h(T(ue,te),k[1]),w(h(T(oe,le),-P[1]),h(T(ne,J),O[1]))),-D[2]))),S[3]))),w(w(h(w(w(h(w(h(T(rt,he),P[1]),w(h(T(Ze,$),-O[1]),h(T(ue,te),D[1]))),S[2]),h(w(h(T(rt,he),S[1]),w(h(T(Te,ee),-O[1]),h(T(ie,X),D[1]))),-P[2])),w(h(w(h(T(Ze,$),S[1]),w(h(T(Te,ee),-P[1]),h(T(Y,N),D[1]))),O[2]),h(w(h(T(ue,te),S[1]),w(h(T(ie,X),-P[1]),h(T(Y,N),O[1]))),-D[2]))),-k[3]),h(w(w(h(w(h(T(rt,he),k[1]),w(h(T(Ie,se),-O[1]),h(T(oe,le),D[1]))),S[2]),h(w(h(T(rt,he),S[1]),w(h(T(Te,ee),-O[1]),h(T(ie,X),D[1]))),-k[2])),w(h(w(h(T(Ie,se),S[1]),w(h(T(Te,ee),-k[1]),h(T(G,U),D[1]))),O[2]),h(w(h(T(oe,le),S[1]),w(h(T(ie,X),-k[1]),h(T(G,U),O[1]))),-D[2]))),P[3])),w(h(w(w(h(w(h(T(Ze,$),k[1]),w(h(T(Ie,se),-P[1]),h(T(ne,J),D[1]))),S[2]),h(w(h(T(Ze,$),S[1]),w(h(T(Te,ee),-P[1]),h(T(Y,N),D[1]))),-k[2])),w(h(w(h(T(Ie,se),S[1]),w(h(T(Te,ee),-k[1]),h(T(G,U),D[1]))),P[2]),h(w(h(T(ne,J),S[1]),w(h(T(Y,N),-k[1]),h(T(G,U),P[1]))),-D[2]))),-O[3]),h(w(w(h(w(h(T(ue,te),k[1]),w(h(T(oe,le),-P[1]),h(T(ne,J),O[1]))),S[2]),h(w(h(T(ue,te),S[1]),w(h(T(ie,X),-P[1]),h(T(Y,N),O[1]))),-k[2])),w(h(w(h(T(oe,le),S[1]),w(h(T(ie,X),-k[1]),h(T(G,U),O[1]))),P[2]),h(w(h(T(ne,J),S[1]),w(h(T(Y,N),-k[1]),h(T(G,U),P[1]))),-O[2]))),D[3]))))),We=w(w(w(h(w(w(h(w(h(T(Ge,Ye),O[1]),w(h(T(rt,he),-F[1]),h(T(Be,xe),D[1]))),P[2]),h(w(h(T(Ge,Ye),P[1]),w(h(T(Ze,$),-F[1]),h(T(Se,K),D[1]))),-O[2])),w(h(w(h(T(rt,he),P[1]),w(h(T(Ze,$),-O[1]),h(T(ue,te),D[1]))),F[2]),h(w(h(T(Be,xe),P[1]),w(h(T(Se,K),-O[1]),h(T(ue,te),F[1]))),-D[2]))),S[3]),w(h(w(w(h(w(h(T(Ge,Ye),O[1]),w(h(T(rt,he),-F[1]),h(T(Be,xe),D[1]))),S[2]),h(w(h(T(Ge,Ye),S[1]),w(h(T(Te,ee),-F[1]),h(T(be,j),D[1]))),-O[2])),w(h(w(h(T(rt,he),S[1]),w(h(T(Te,ee),-O[1]),h(T(ie,X),D[1]))),F[2]),h(w(h(T(Be,xe),S[1]),w(h(T(be,j),-O[1]),h(T(ie,X),F[1]))),-D[2]))),-P[3]),h(w(w(h(w(h(T(Ge,Ye),P[1]),w(h(T(Ze,$),-F[1]),h(T(Se,K),D[1]))),S[2]),h(w(h(T(Ge,Ye),S[1]),w(h(T(Te,ee),-F[1]),h(T(be,j),D[1]))),-P[2])),w(h(w(h(T(Ze,$),S[1]),w(h(T(Te,ee),-P[1]),h(T(Y,N),D[1]))),F[2]),h(w(h(T(Se,K),S[1]),w(h(T(be,j),-P[1]),h(T(Y,N),F[1]))),-D[2]))),O[3]))),w(w(h(w(w(h(w(h(T(rt,he),P[1]),w(h(T(Ze,$),-O[1]),h(T(ue,te),D[1]))),S[2]),h(w(h(T(rt,he),S[1]),w(h(T(Te,ee),-O[1]),h(T(ie,X),D[1]))),-P[2])),w(h(w(h(T(Ze,$),S[1]),w(h(T(Te,ee),-P[1]),h(T(Y,N),D[1]))),O[2]),h(w(h(T(ue,te),S[1]),w(h(T(ie,X),-P[1]),h(T(Y,N),O[1]))),-D[2]))),-F[3]),h(w(w(h(w(h(T(Be,xe),P[1]),w(h(T(Se,K),-O[1]),h(T(ue,te),F[1]))),S[2]),h(w(h(T(Be,xe),S[1]),w(h(T(be,j),-O[1]),h(T(ie,X),F[1]))),-P[2])),w(h(w(h(T(Se,K),S[1]),w(h(T(be,j),-P[1]),h(T(Y,N),F[1]))),O[2]),h(w(h(T(ue,te),S[1]),w(h(T(ie,X),-P[1]),h(T(Y,N),O[1]))),-F[2]))),D[3])),w(h(w(w(h(w(h(T(Ge,Ye),P[1]),w(h(T(Ze,$),-F[1]),h(T(Se,K),D[1]))),k[2]),h(w(h(T(Ge,Ye),k[1]),w(h(T(Ie,se),-F[1]),h(T(Ce,fe),D[1]))),-P[2])),w(h(w(h(T(Ze,$),k[1]),w(h(T(Ie,se),-P[1]),h(T(ne,J),D[1]))),F[2]),h(w(h(T(Se,K),k[1]),w(h(T(Ce,fe),-P[1]),h(T(ne,J),F[1]))),-D[2]))),S[3]),h(w(w(h(w(h(T(Ge,Ye),P[1]),w(h(T(Ze,$),-F[1]),h(T(Se,K),D[1]))),S[2]),h(w(h(T(Ge,Ye),S[1]),w(h(T(Te,ee),-F[1]),h(T(be,j),D[1]))),-P[2])),w(h(w(h(T(Ze,$),S[1]),w(h(T(Te,ee),-P[1]),h(T(Y,N),D[1]))),F[2]),h(w(h(T(Se,K),S[1]),w(h(T(be,j),-P[1]),h(T(Y,N),F[1]))),-D[2]))),-k[3])))),w(w(w(h(w(w(h(w(h(T(Ge,Ye),k[1]),w(h(T(Ie,se),-F[1]),h(T(Ce,fe),D[1]))),S[2]),h(w(h(T(Ge,Ye),S[1]),w(h(T(Te,ee),-F[1]),h(T(be,j),D[1]))),-k[2])),w(h(w(h(T(Ie,se),S[1]),w(h(T(Te,ee),-k[1]),h(T(G,U),D[1]))),F[2]),h(w(h(T(Ce,fe),S[1]),w(h(T(be,j),-k[1]),h(T(G,U),F[1]))),-D[2]))),P[3]),h(w(w(h(w(h(T(Ze,$),k[1]),w(h(T(Ie,se),-P[1]),h(T(ne,J),D[1]))),S[2]),h(w(h(T(Ze,$),S[1]),w(h(T(Te,ee),-P[1]),h(T(Y,N),D[1]))),-k[2])),w(h(w(h(T(Ie,se),S[1]),w(h(T(Te,ee),-k[1]),h(T(G,U),D[1]))),P[2]),h(w(h(T(ne,J),S[1]),w(h(T(Y,N),-k[1]),h(T(G,U),P[1]))),-D[2]))),-F[3])),w(h(w(w(h(w(h(T(Se,K),k[1]),w(h(T(Ce,fe),-P[1]),h(T(ne,J),F[1]))),S[2]),h(w(h(T(Se,K),S[1]),w(h(T(be,j),-P[1]),h(T(Y,N),F[1]))),-k[2])),w(h(w(h(T(Ce,fe),S[1]),w(h(T(be,j),-k[1]),h(T(G,U),F[1]))),P[2]),h(w(h(T(ne,J),S[1]),w(h(T(Y,N),-k[1]),h(T(G,U),P[1]))),-F[2]))),D[3]),h(w(w(h(w(h(T(Be,xe),P[1]),w(h(T(Se,K),-O[1]),h(T(ue,te),F[1]))),k[2]),h(w(h(T(Be,xe),k[1]),w(h(T(Ce,fe),-O[1]),h(T(oe,le),F[1]))),-P[2])),w(h(w(h(T(Se,K),k[1]),w(h(T(Ce,fe),-P[1]),h(T(ne,J),F[1]))),O[2]),h(w(h(T(ue,te),k[1]),w(h(T(oe,le),-P[1]),h(T(ne,J),O[1]))),-F[2]))),S[3]))),w(w(h(w(w(h(w(h(T(Be,xe),P[1]),w(h(T(Se,K),-O[1]),h(T(ue,te),F[1]))),S[2]),h(w(h(T(Be,xe),S[1]),w(h(T(be,j),-O[1]),h(T(ie,X),F[1]))),-P[2])),w(h(w(h(T(Se,K),S[1]),w(h(T(be,j),-P[1]),h(T(Y,N),F[1]))),O[2]),h(w(h(T(ue,te),S[1]),w(h(T(ie,X),-P[1]),h(T(Y,N),O[1]))),-F[2]))),-k[3]),h(w(w(h(w(h(T(Be,xe),k[1]),w(h(T(Ce,fe),-O[1]),h(T(oe,le),F[1]))),S[2]),h(w(h(T(Be,xe),S[1]),w(h(T(be,j),-O[1]),h(T(ie,X),F[1]))),-k[2])),w(h(w(h(T(Ce,fe),S[1]),w(h(T(be,j),-k[1]),h(T(G,U),F[1]))),O[2]),h(w(h(T(oe,le),S[1]),w(h(T(ie,X),-k[1]),h(T(G,U),O[1]))),-F[2]))),P[3])),w(h(w(w(h(w(h(T(Se,K),k[1]),w(h(T(Ce,fe),-P[1]),h(T(ne,J),F[1]))),S[2]),h(w(h(T(Se,K),S[1]),w(h(T(be,j),-P[1]),h(T(Y,N),F[1]))),-k[2])),w(h(w(h(T(Ce,fe),S[1]),w(h(T(be,j),-k[1]),h(T(G,U),F[1]))),P[2]),h(w(h(T(ne,J),S[1]),w(h(T(Y,N),-k[1]),h(T(G,U),P[1]))),-F[2]))),-O[3]),h(w(w(h(w(h(T(ue,te),k[1]),w(h(T(oe,le),-P[1]),h(T(ne,J),O[1]))),S[2]),h(w(h(T(ue,te),S[1]),w(h(T(ie,X),-P[1]),h(T(Y,N),O[1]))),-k[2])),w(h(w(h(T(oe,le),S[1]),w(h(T(ie,X),-k[1]),h(T(G,U),O[1]))),P[2]),h(w(h(T(ne,J),S[1]),w(h(T(Y,N),-k[1]),h(T(G,U),P[1]))),-O[2]))),F[3]))))),mt=T(ze,We);return mt[mt.length-1]}return L}var g=[l,o,c];function A(w){var T=g[w.length];return T||(T=g[w.length]=f(w.length)),T.apply(void 0,w)}function b(w,T,_,h,L,S,k,P){function O(F,D,R,U,N,X){switch(arguments.length){case 0:case 1:return 0;case 2:return h(F,D);case 3:return L(F,D,R);case 4:return S(F,D,R,U);case 5:return k(F,D,R,U,N);case 6:return P(F,D,R,U,N,X)}for(var j=new Array(arguments.length),ee=0;ee<arguments.length;++ee)j[ee]=arguments[ee];return w(j)}return O}function M(){for(;g.length<=n;)g.push(f(g.length));m.exports=b.apply(void 0,[A].concat(g));for(var w=0;w<=n;++w)m.exports[w]=g[w]}M()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(s,m,x){var t=s("robust-determinant"),i=3;function a(d){var p=d===2?f:l;return d<i?p(t[d]):p(t)}function r(){return[[0]]}function n(d,p){return[[p[0]],[d[0][0]]]}function f(d){return function(y,g){return[d([[+g[0],+y[0][1]],[+g[1],+y[1][1]]]),d([[+y[0][0],+g[0]],[+y[1][0],+g[1]]]),d(y)]}}function l(d){return function(y,g){return[d([[+g[0],+y[0][1],+y[0][2]],[+g[1],+y[1][1],+y[1][2]],[+g[2],+y[2][1],+y[2][2]]]),d([[+y[0][0],+g[0],+y[0][2]],[+y[1][0],+g[1],+y[1][2]],[+y[2][0],+g[2],+y[2][2]]]),d([[+y[0][0],+y[0][1],+g[0]],[+y[1][0],+y[1][1],+g[1]],[+y[2][0],+y[2][1],+g[2]]]),d(y)]}}var o=[r,n];function c(d,p,y,g,A,b){return function(w,T){switch(w.length){case 0:return d(w,T);case 1:return p(w,T);case 2:return y(w,T);case 3:return g(w,T)}var _=A[w.length];return _||(_=A[w.length]=b(w.length)),_(w,T)}}function v(){for(;o.length<=i;)o.push(a(o.length));m.exports=c.apply(void 0,o.concat([o,a]));for(var d=0;d<i;++d)m.exports[d]=o[d]}v()},{"robust-determinant":280}],284:[function(s,m,x){var t=s("two-product"),i=s("robust-sum"),a=s("robust-scale"),r=s("robust-subtract"),n=5,f=11102230246251565e-32,l=(3+16*f)*f,o=(7+56*f)*f;function c(T,_,h,L){return function(k,P,O){var F=T(T(_(P[1],O[0]),_(-O[1],P[0])),T(_(k[1],P[0]),_(-P[1],k[0]))),D=T(_(k[1],O[0]),_(-O[1],k[0])),R=L(F,D);return R[R.length-1]}}function v(T,_,h,L){return function(k,P,O,F){var D=T(T(h(T(_(O[1],F[0]),_(-F[1],O[0])),P[2]),T(h(T(_(P[1],F[0]),_(-F[1],P[0])),-O[2]),h(T(_(P[1],O[0]),_(-O[1],P[0])),F[2]))),T(h(T(_(P[1],F[0]),_(-F[1],P[0])),k[2]),T(h(T(_(k[1],F[0]),_(-F[1],k[0])),-P[2]),h(T(_(k[1],P[0]),_(-P[1],k[0])),F[2])))),R=T(T(h(T(_(O[1],F[0]),_(-F[1],O[0])),k[2]),T(h(T(_(k[1],F[0]),_(-F[1],k[0])),-O[2]),h(T(_(k[1],O[0]),_(-O[1],k[0])),F[2]))),T(h(T(_(P[1],O[0]),_(-O[1],P[0])),k[2]),T(h(T(_(k[1],O[0]),_(-O[1],k[0])),-P[2]),h(T(_(k[1],P[0]),_(-P[1],k[0])),O[2])))),U=L(D,R);return U[U.length-1]}}function d(T,_,h,L){return function(k,P,O,F,D){var R=T(T(T(h(T(h(T(_(F[1],D[0]),_(-D[1],F[0])),O[2]),T(h(T(_(O[1],D[0]),_(-D[1],O[0])),-F[2]),h(T(_(O[1],F[0]),_(-F[1],O[0])),D[2]))),P[3]),T(h(T(h(T(_(F[1],D[0]),_(-D[1],F[0])),P[2]),T(h(T(_(P[1],D[0]),_(-D[1],P[0])),-F[2]),h(T(_(P[1],F[0]),_(-F[1],P[0])),D[2]))),-O[3]),h(T(h(T(_(O[1],D[0]),_(-D[1],O[0])),P[2]),T(h(T(_(P[1],D[0]),_(-D[1],P[0])),-O[2]),h(T(_(P[1],O[0]),_(-O[1],P[0])),D[2]))),F[3]))),T(h(T(h(T(_(O[1],F[0]),_(-F[1],O[0])),P[2]),T(h(T(_(P[1],F[0]),_(-F[1],P[0])),-O[2]),h(T(_(P[1],O[0]),_(-O[1],P[0])),F[2]))),-D[3]),T(h(T(h(T(_(F[1],D[0]),_(-D[1],F[0])),P[2]),T(h(T(_(P[1],D[0]),_(-D[1],P[0])),-F[2]),h(T(_(P[1],F[0]),_(-F[1],P[0])),D[2]))),k[3]),h(T(h(T(_(F[1],D[0]),_(-D[1],F[0])),k[2]),T(h(T(_(k[1],D[0]),_(-D[1],k[0])),-F[2]),h(T(_(k[1],F[0]),_(-F[1],k[0])),D[2]))),-P[3])))),T(T(h(T(h(T(_(P[1],D[0]),_(-D[1],P[0])),k[2]),T(h(T(_(k[1],D[0]),_(-D[1],k[0])),-P[2]),h(T(_(k[1],P[0]),_(-P[1],k[0])),D[2]))),F[3]),T(h(T(h(T(_(P[1],F[0]),_(-F[1],P[0])),k[2]),T(h(T(_(k[1],F[0]),_(-F[1],k[0])),-P[2]),h(T(_(k[1],P[0]),_(-P[1],k[0])),F[2]))),-D[3]),h(T(h(T(_(O[1],F[0]),_(-F[1],O[0])),P[2]),T(h(T(_(P[1],F[0]),_(-F[1],P[0])),-O[2]),h(T(_(P[1],O[0]),_(-O[1],P[0])),F[2]))),k[3]))),T(h(T(h(T(_(O[1],F[0]),_(-F[1],O[0])),k[2]),T(h(T(_(k[1],F[0]),_(-F[1],k[0])),-O[2]),h(T(_(k[1],O[0]),_(-O[1],k[0])),F[2]))),-P[3]),T(h(T(h(T(_(P[1],F[0]),_(-F[1],P[0])),k[2]),T(h(T(_(k[1],F[0]),_(-F[1],k[0])),-P[2]),h(T(_(k[1],P[0]),_(-P[1],k[0])),F[2]))),O[3]),h(T(h(T(_(P[1],O[0]),_(-O[1],P[0])),k[2]),T(h(T(_(k[1],O[0]),_(-O[1],k[0])),-P[2]),h(T(_(k[1],P[0]),_(-P[1],k[0])),O[2]))),-F[3]))))),U=T(T(T(h(T(h(T(_(F[1],D[0]),_(-D[1],F[0])),O[2]),T(h(T(_(O[1],D[0]),_(-D[1],O[0])),-F[2]),h(T(_(O[1],F[0]),_(-F[1],O[0])),D[2]))),k[3]),h(T(h(T(_(F[1],D[0]),_(-D[1],F[0])),k[2]),T(h(T(_(k[1],D[0]),_(-D[1],k[0])),-F[2]),h(T(_(k[1],F[0]),_(-F[1],k[0])),D[2]))),-O[3])),T(h(T(h(T(_(O[1],D[0]),_(-D[1],O[0])),k[2]),T(h(T(_(k[1],D[0]),_(-D[1],k[0])),-O[2]),h(T(_(k[1],O[0]),_(-O[1],k[0])),D[2]))),F[3]),h(T(h(T(_(O[1],F[0]),_(-F[1],O[0])),k[2]),T(h(T(_(k[1],F[0]),_(-F[1],k[0])),-O[2]),h(T(_(k[1],O[0]),_(-O[1],k[0])),F[2]))),-D[3]))),T(T(h(T(h(T(_(O[1],D[0]),_(-D[1],O[0])),P[2]),T(h(T(_(P[1],D[0]),_(-D[1],P[0])),-O[2]),h(T(_(P[1],O[0]),_(-O[1],P[0])),D[2]))),k[3]),h(T(h(T(_(O[1],D[0]),_(-D[1],O[0])),k[2]),T(h(T(_(k[1],D[0]),_(-D[1],k[0])),-O[2]),h(T(_(k[1],O[0]),_(-O[1],k[0])),D[2]))),-P[3])),T(h(T(h(T(_(P[1],D[0]),_(-D[1],P[0])),k[2]),T(h(T(_(k[1],D[0]),_(-D[1],k[0])),-P[2]),h(T(_(k[1],P[0]),_(-P[1],k[0])),D[2]))),O[3]),h(T(h(T(_(P[1],O[0]),_(-O[1],P[0])),k[2]),T(h(T(_(k[1],O[0]),_(-O[1],k[0])),-P[2]),h(T(_(k[1],P[0]),_(-P[1],k[0])),O[2]))),-D[3])))),N=L(R,U);return N[N.length-1]}}function p(T){var _=T===3?c:T===4?v:d;return _(i,t,a,r)}var y=p(3),g=p(4),A=[function(){return 0},function(){return 0},function(_,h){return h[0]-_[0]},function(_,h,L){var S=(_[1]-L[1])*(h[0]-L[0]),k=(_[0]-L[0])*(h[1]-L[1]),P=S-k,O;if(S>0){if(k<=0)return P;O=S+k}else if(S<0){if(k>=0)return P;O=-(S+k)}else return P;var F=l*O;return P>=F||P<=-F?P:y(_,h,L)},function(_,h,L,S){var k=_[0]-S[0],P=h[0]-S[0],O=L[0]-S[0],F=_[1]-S[1],D=h[1]-S[1],R=L[1]-S[1],U=_[2]-S[2],N=h[2]-S[2],X=L[2]-S[2],j=P*R,ee=O*D,q=O*F,G=k*R,J=k*D,le=P*F,fe=U*(j-ee)+N*(q-G)+X*(J-le),se=(Math.abs(j)+Math.abs(ee))*Math.abs(U)+(Math.abs(q)+Math.abs(G))*Math.abs(N)+(Math.abs(J)+Math.abs(le))*Math.abs(X),V=o*se;return fe>V||-fe>V?fe:g(_,h,L,S)}];function b(T){var _=A[T.length];return _||(_=A[T.length]=p(T.length)),_.apply(void 0,T)}function M(T,_,h,L,S,k,P){return function(F,D,R,U,N){switch(arguments.length){case 0:case 1:return 0;case 2:return L(F,D);case 3:return S(F,D,R);case 4:return k(F,D,R,U);case 5:return P(F,D,R,U,N)}for(var X=new Array(arguments.length),j=0;j<arguments.length;++j)X[j]=arguments[j];return T(X)}}function w(){for(;A.length<=n;)A.push(p(A.length));m.exports=M.apply(void 0,[b].concat(A));for(var T=0;T<=n;++T)m.exports[T]=A[T]}w()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(s,m,x){var t=s("robust-sum"),i=s("robust-scale");m.exports=a;function a(r,n){if(r.length===1)return i(n,r[0]);if(n.length===1)return i(r,n[0]);if(r.length===0||n.length===0)return[0];var f=[0];if(r.length<n.length)for(var l=0;l<r.length;++l)f=t(f,i(n,r[l]));else for(var l=0;l<n.length;++l)f=t(f,i(r,n[l]));return f}},{"robust-scale":286,"robust-sum":289}],286:[function(s,m,x){var t=s("two-product"),i=s("two-sum");m.exports=a;function a(r,n){var f=r.length;if(f===1){var l=t(r[0],n);return l[0]?l:[l[1]]}var o=new Array(2*f),c=[.1,.1],v=[.1,.1],d=0;t(r[0],n,c),c[0]&&(o[d++]=c[0]);for(var p=1;p<f;++p){t(r[p],n,v);var y=c[1];i(y,v[0],c),c[0]&&(o[d++]=c[0]);var g=v[1],A=c[1],b=g+A,M=b-g,w=A-M;c[1]=b,w&&(o[d++]=w)}return c[1]&&(o[d++]=c[1]),d===0&&(o[d++]=0),o.length=d,o}},{"two-product":306,"two-sum":307}],287:[function(s,m,x){m.exports=a;var t=s("robust-orientation")[3];function i(r,n,f,l){for(var o=0;o<2;++o){var c=r[o],v=n[o],d=Math.min(c,v),p=Math.max(c,v),y=f[o],g=l[o],A=Math.min(y,g),b=Math.max(y,g);if(b<d||p<A)return!1}return!0}function a(r,n,f,l){var o=t(r,f,l),c=t(n,f,l);if(o>0&&c>0||o<0&&c<0)return!1;var v=t(f,r,n),d=t(l,r,n);return v>0&&d>0||v<0&&d<0?!1:o===0&&c===0&&v===0&&d===0?i(r,n,f,l):!0}},{"robust-orientation":284}],288:[function(s,m,x){m.exports=i;function t(a,r){var n=a+r,f=n-a,l=n-f,o=r-f,c=a-l,v=c+o;return v?[v,n]:[n]}function i(a,r){var n=a.length|0,f=r.length|0;if(n===1&&f===1)return t(a[0],-r[0]);var l=n+f,o=new Array(l),c=0,v=0,d=0,p=Math.abs,y=a[v],g=p(y),A=-r[d],b=p(A),M,w;g<b?(w=y,v+=1,v<n&&(y=a[v],g=p(y))):(w=A,d+=1,d<f&&(A=-r[d],b=p(A))),v<n&&g<b||d>=f?(M=y,v+=1,v<n&&(y=a[v],g=p(y))):(M=A,d+=1,d<f&&(A=-r[d],b=p(A)));for(var T=M+w,_=T-M,h=w-_,L=h,S=T,k,P,O,F,D;v<n&&d<f;)g<b?(M=y,v+=1,v<n&&(y=a[v],g=p(y))):(M=A,d+=1,d<f&&(A=-r[d],b=p(A))),w=L,T=M+w,_=T-M,h=w-_,h&&(o[c++]=h),k=S+T,P=k-S,O=k-P,F=T-P,D=S-O,L=D+F,S=k;for(;v<n;)M=y,w=L,T=M+w,_=T-M,h=w-_,h&&(o[c++]=h),k=S+T,P=k-S,O=k-P,F=T-P,D=S-O,L=D+F,S=k,v+=1,v<n&&(y=a[v]);for(;d<f;)M=A,w=L,T=M+w,_=T-M,h=w-_,h&&(o[c++]=h),k=S+T,P=k-S,O=k-P,F=T-P,D=S-O,L=D+F,S=k,d+=1,d<f&&(A=-r[d]);return L&&(o[c++]=L),S&&(o[c++]=S),c||(o[c++]=0),o.length=c,o}},{}],289:[function(s,m,x){m.exports=i;function t(a,r){var n=a+r,f=n-a,l=n-f,o=r-f,c=a-l,v=c+o;return v?[v,n]:[n]}function i(a,r){var n=a.length|0,f=r.length|0;if(n===1&&f===1)return t(a[0],r[0]);var l=n+f,o=new Array(l),c=0,v=0,d=0,p=Math.abs,y=a[v],g=p(y),A=r[d],b=p(A),M,w;g<b?(w=y,v+=1,v<n&&(y=a[v],g=p(y))):(w=A,d+=1,d<f&&(A=r[d],b=p(A))),v<n&&g<b||d>=f?(M=y,v+=1,v<n&&(y=a[v],g=p(y))):(M=A,d+=1,d<f&&(A=r[d],b=p(A)));for(var T=M+w,_=T-M,h=w-_,L=h,S=T,k,P,O,F,D;v<n&&d<f;)g<b?(M=y,v+=1,v<n&&(y=a[v],g=p(y))):(M=A,d+=1,d<f&&(A=r[d],b=p(A))),w=L,T=M+w,_=T-M,h=w-_,h&&(o[c++]=h),k=S+T,P=k-S,O=k-P,F=T-P,D=S-O,L=D+F,S=k;for(;v<n;)M=y,w=L,T=M+w,_=T-M,h=w-_,h&&(o[c++]=h),k=S+T,P=k-S,O=k-P,F=T-P,D=S-O,L=D+F,S=k,v+=1,v<n&&(y=a[v]);for(;d<f;)M=A,w=L,T=M+w,_=T-M,h=w-_,h&&(o[c++]=h),k=S+T,P=k-S,O=k-P,F=T-P,D=S-O,L=D+F,S=k,d+=1,d<f&&(A=r[d]);return L&&(o[c++]=L),S&&(o[c++]=S),c||(o[c++]=0),o.length=c,o}},{}],290:[function(s,m,x){m.exports=a;var t=s("boundary-cells"),i=s("reduce-simplicial-complex");function a(r){return i(t(r))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(s,m,x){m.exports=d;var t=s("ndarray"),i=s("typedarray-pool"),a=s("ndarray-sort"),r=s("./lib/codegen");function n(p){for(var y=p.length,g=0,A=0;A<y;++A)g=Math.max(g,p[A].length)|0;return g-1}function f(p,y){for(var g=p.length,A=i.mallocUint8(g),b=0;b<g;++b)A[b]=p[b]<y|0;return A}function l(p,y){for(var g=p.length,A=y*(y+1)/2*g|0,b=i.mallocUint32(A*2),M=0,w=0;w<g;++w)for(var T=p[w],y=T.length,_=0;_<y;++_)for(var h=0;h<_;++h){var L=T[h],S=T[_];b[M++]=Math.min(L,S)|0,b[M++]=Math.max(L,S)|0}var k=M/2|0;a(t(b,[k,2]));for(var P=2,w=2;w<M;w+=2)b[w-2]===b[w]&&b[w-1]===b[w+1]||(b[P++]=b[w],b[P++]=b[w+1]);return t(b,[P/2|0,2])}function o(p,y,g,A){for(var b=p.data,M=p.shape[0],w=i.mallocDouble(M),T=0,_=0;_<M;++_){var h=b[2*_],L=b[2*_+1];if(g[h]!==g[L]){var S=y[h],k=y[L];b[2*T]=h,b[2*T+1]=L,w[T++]=(k-A)/(k-S)}}return p.shape[0]=T,t(w,[T])}function c(p,y){var g=i.mallocInt32(y*2),A=p.shape[0],b=p.data;g[0]=0;for(var M=0,w=0;w<A;++w){var T=b[2*w];if(T!==M){for(g[2*M+1]=w;++M<T;)g[2*M]=w,g[2*M+1]=w;g[2*M]=w}}for(g[2*M+1]=A;++M<y;)g[2*M]=g[2*M+1]=A;return g}function v(p){for(var y=p.shape[0]|0,g=p.data,A=new Array(y),b=0;b<y;++b)A[b]=[g[2*b],g[2*b+1]];return A}function d(p,y,g,A){g=g||0,typeof A=="undefined"&&(A=n(p));var b=p.length;if(b===0||A<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=f(y,+g),w=l(p,A),T=o(w,y,M,+g),_=c(w,y.length|0),h=r(A)(p,w.data,_,M),L=v(w),S=[].slice.call(T.data,0,T.shape[0]);return i.free(M),i.free(w.data),i.free(T.data),i.free(_),{cells:h,vertexIds:L,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(s,m,x){m.exports=i;var t=[function(){function r(n,f,l,o){for(var c=n.length,v=[],d=0;d<c;++d){var p=n[d];p.length}return v}return r},function(){function r(f,l,o,c){for(var v=Math.min(o,c)|0,d=Math.max(o,c)|0,p=f[2*v],y=f[2*v+1];p<y;){var g=p+y>>1,A=l[2*g+1];if(A===d)return g;d<A?y=g:p=g+1}return p}function n(f,l,o,c){for(var v=f.length,d=[],p=0;p<v;++p){var y=f[p],g=y.length;if(g===2){var A=(c[y[0]]<<0)+(c[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0])]);break}}}return d}return n},function(){function r(f,l,o,c){for(var v=Math.min(o,c)|0,d=Math.max(o,c)|0,p=f[2*v],y=f[2*v+1];p<y;){var g=p+y>>1,A=l[2*g+1];if(A===d)return g;d<A?y=g:p=g+1}return p}function n(f,l,o,c){for(var v=f.length,d=[],p=0;p<v;++p){var y=f[p],g=y.length;if(g===3){var A=(c[y[0]]<<0)+(c[y[1]]<<1)+(c[y[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[2]),r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0]),r(o,l,y[1],y[2])]);break;case 3:d.push([r(o,l,y[0],y[2]),r(o,l,y[1],y[2])]);break;case 4:d.push([r(o,l,y[2],y[1]),r(o,l,y[2],y[0])]);break;case 5:d.push([r(o,l,y[2],y[1]),r(o,l,y[0],y[1])]);break;case 6:d.push([r(o,l,y[1],y[0]),r(o,l,y[2],y[0])]);break}}else if(g===2){var A=(c[y[0]]<<0)+(c[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0])]);break}}}return d}return n},function(){function r(f,l,o,c){for(var v=Math.min(o,c)|0,d=Math.max(o,c)|0,p=f[2*v],y=f[2*v+1];p<y;){var g=p+y>>1,A=l[2*g+1];if(A===d)return g;d<A?y=g:p=g+1}return p}function n(f,l,o,c){for(var v=f.length,d=[],p=0;p<v;++p){var y=f[p],g=y.length;if(g===4){var A=(c[y[0]]<<0)+(c[y[1]]<<1)+(c[y[2]]<<2)+(c[y[3]]<<3);if(A===0||A===15)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[1]),r(o,l,y[0],y[2]),r(o,l,y[0],y[3])]);break;case 2:d.push([r(o,l,y[1],y[2]),r(o,l,y[1],y[0]),r(o,l,y[1],y[3])]);break;case 3:d.push([r(o,l,y[1],y[2]),r(o,l,y[0],y[2]),r(o,l,y[0],y[3])],[r(o,l,y[1],y[3]),r(o,l,y[1],y[2]),r(o,l,y[0],y[3])]);break;case 4:d.push([r(o,l,y[2],y[0]),r(o,l,y[2],y[1]),r(o,l,y[2],y[3])]);break;case 5:d.push([r(o,l,y[0],y[1]),r(o,l,y[2],y[1]),r(o,l,y[0],y[3])],[r(o,l,y[2],y[1]),r(o,l,y[2],y[3]),r(o,l,y[0],y[3])]);break;case 6:d.push([r(o,l,y[2],y[0]),r(o,l,y[1],y[0]),r(o,l,y[1],y[3])],[r(o,l,y[2],y[3]),r(o,l,y[2],y[0]),r(o,l,y[1],y[3])]);break;case 7:d.push([r(o,l,y[0],y[3]),r(o,l,y[1],y[3]),r(o,l,y[2],y[3])]);break;case 8:d.push([r(o,l,y[3],y[1]),r(o,l,y[3],y[0]),r(o,l,y[3],y[2])]);break;case 9:d.push([r(o,l,y[3],y[1]),r(o,l,y[0],y[1]),r(o,l,y[0],y[2])],[r(o,l,y[3],y[2]),r(o,l,y[3],y[1]),r(o,l,y[0],y[2])]);break;case 10:d.push([r(o,l,y[1],y[0]),r(o,l,y[3],y[0]),r(o,l,y[1],y[2])],[r(o,l,y[3],y[0]),r(o,l,y[3],y[2]),r(o,l,y[1],y[2])]);break;case 11:d.push([r(o,l,y[1],y[2]),r(o,l,y[0],y[2]),r(o,l,y[3],y[2])]);break;case 12:d.push([r(o,l,y[3],y[0]),r(o,l,y[2],y[0]),r(o,l,y[2],y[1])],[r(o,l,y[3],y[1]),r(o,l,y[3],y[0]),r(o,l,y[2],y[1])]);break;case 13:d.push([r(o,l,y[0],y[1]),r(o,l,y[2],y[1]),r(o,l,y[3],y[1])]);break;case 14:d.push([r(o,l,y[2],y[0]),r(o,l,y[1],y[0]),r(o,l,y[3],y[0])]);break}}else if(g===3){var A=(c[y[0]]<<0)+(c[y[1]]<<1)+(c[y[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[2]),r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0]),r(o,l,y[1],y[2])]);break;case 3:d.push([r(o,l,y[0],y[2]),r(o,l,y[1],y[2])]);break;case 4:d.push([r(o,l,y[2],y[1]),r(o,l,y[2],y[0])]);break;case 5:d.push([r(o,l,y[2],y[1]),r(o,l,y[0],y[1])]);break;case 6:d.push([r(o,l,y[1],y[0]),r(o,l,y[2],y[0])]);break}}else if(g===2){var A=(c[y[0]]<<0)+(c[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0])]);break}}}return d}return n}];function i(a){return t[a]()}},{}],293:[function(s,m,x){var t=s("bit-twiddle"),i=s("union-find");function a(T){for(var _=0,h=Math.max,L=0,S=T.length;L<S;++L)_=h(_,T[L].length);return _-1}x.dimension=a;function r(T){for(var _=-1,h=Math.max,L=0,S=T.length;L<S;++L)for(var k=T[L],P=0,O=k.length;P<O;++P)_=h(_,k[P]);return _+1}x.countVertices=r;function n(T){for(var _=new Array(T.length),h=0,L=T.length;h<L;++h)_[h]=T[h].slice(0);return _}x.cloneCells=n;function f(T,_){var h=T.length,L=T.length-_.length,S=Math.min;if(L)return L;switch(h){case 0:return 0;case 1:return T[0]-_[0];case 2:var k=T[0]+T[1]-_[0]-_[1];return k||S(T[0],T[1])-S(_[0],_[1]);case 3:var P=T[0]+T[1],O=_[0]+_[1];if(k=P+T[2]-(O+_[2]),k)return k;var F=S(T[0],T[1]),D=S(_[0],_[1]),k=S(F,T[2])-S(D,_[2]);return k||S(F+T[2],P)-S(D+_[2],O);default:var R=T.slice(0);R.sort();var U=_.slice(0);U.sort();for(var N=0;N<h;++N)if(L=R[N]-U[N],L)return L;return 0}}x.compareCells=f;function l(T,_){return f(T[0],_[0])}function o(T,_){if(_){for(var h=T.length,L=new Array(h),S=0;S<h;++S)L[S]=[T[S],_[S]];L.sort(l);for(var S=0;S<h;++S)T[S]=L[S][0],_[S]=L[S][1];return T}else return T.sort(f),T}x.normalize=o;function c(T){if(T.length===0)return[];for(var _=1,h=T.length,L=1;L<h;++L){var S=T[L];if(f(S,T[L-1])){if(L===_){_++;continue}T[_++]=S}}return T.length=_,T}x.unique=c;function v(T,_){for(var h=0,L=T.length-1,S=-1;h<=L;){var k=h+L>>1,P=f(T[k],_);P<=0?(P===0&&(S=k),h=k+1):P>0&&(L=k-1)}return S}x.findCell=v;function d(T,_){for(var h=new Array(T.length),L=0,S=h.length;L<S;++L)h[L]=[];for(var k=[],L=0,P=_.length;L<P;++L)for(var O=_[L],F=O.length,D=1,R=1<<F;D<R;++D){k.length=t.popCount(D);for(var U=0,N=0;N<F;++N)D&1<<N&&(k[U++]=O[N]);var X=v(T,k);if(!(X<0))for(;h[X++].push(L),!(X>=T.length||f(T[X],k)!==0););}return h}x.incidence=d;function p(T,_){if(!_)return d(c(g(T,0)),T);for(var h=new Array(_),L=0;L<_;++L)h[L]=[];for(var L=0,S=T.length;L<S;++L)for(var k=T[L],P=0,O=k.length;P<O;++P)h[k[P]].push(L);return h}x.dual=p;function y(T){for(var _=[],h=0,L=T.length;h<L;++h)for(var S=T[h],k=S.length|0,P=1,O=1<<k;P<O;++P){for(var F=[],D=0;D<k;++D)P>>>D&1&&F.push(S[D]);_.push(F)}return o(_)}x.explode=y;function g(T,_){if(_<0)return[];for(var h=[],L=(1<<_+1)-1,S=0;S<T.length;++S)for(var k=T[S],P=L;P<1<<k.length;P=t.nextCombination(P)){for(var O=new Array(_+1),F=0,D=0;D<k.length;++D)P&1<<D&&(O[F++]=k[D]);h.push(O)}return o(h)}x.skeleton=g;function A(T){for(var _=[],h=0,L=T.length;h<L;++h)for(var S=T[h],k=0,P=S.length;k<P;++k){for(var O=new Array(S.length-1),F=0,D=0;F<P;++F)F!==k&&(O[D++]=S[F]);_.push(O)}return o(_)}x.boundary=A;function b(T,_){for(var h=new i(_),L=0;L<T.length;++L)for(var S=T[L],k=0;k<S.length;++k)for(var P=k+1;P<S.length;++P)h.link(S[k],S[P]);for(var O=[],F=h.ranks,L=0;L<F.length;++L)F[L]=-1;for(var L=0;L<T.length;++L){var D=h.find(T[L][0]);F[D]<0?(F[D]=O.length,O.push([T[L].slice(0)])):O[F[D]].push(T[L].slice(0))}return O}function M(T){for(var _=c(o(g(T,0))),h=new i(_.length),L=0;L<T.length;++L)for(var S=T[L],k=0;k<S.length;++k)for(var P=v(_,[S[k]]),O=k+1;O<S.length;++O)h.link(P,v(_,[S[O]]));for(var F=[],D=h.ranks,L=0;L<D.length;++L)D[L]=-1;for(var L=0;L<T.length;++L){var R=h.find(v(_,[T[L][0]]));D[R]<0?(D[R]=F.length,F.push([T[L].slice(0)])):F[D[R]].push(T[L].slice(0))}return F}function w(T,_){return _?b(T,_):M(T)}x.connectedComponents=w},{"bit-twiddle":32,"union-find":309}],294:[function(s,m,x){arguments[4][32][0].apply(x,arguments)},{dup:32}],295:[function(s,m,x){arguments[4][293][0].apply(x,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(s,m,x){m.exports=t;function t(i){this.roots=new Array(i),this.ranks=new Array(i);for(var a=0;a<i;++a)this.roots[a]=a,this.ranks[a]=0}t.prototype.length=function(){return this.roots.length},t.prototype.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.prototype.find=function(i){for(var a=this.roots;a[i]!==i;){var r=a[i];a[i]=a[r],i=r}return i},t.prototype.link=function(i,a){var r=this.find(i),n=this.find(a);if(r!==n){var f=this.ranks,l=this.roots,o=f[r],c=f[n];o<c?l[r]=n:c<o?l[n]=r:(l[n]=r,++f[r])}}},{}],297:[function(s,m,x){m.exports=r;var t=s("robust-orientation"),i=s("simplicial-complex");function a(n,f,l){var o=Math.abs(t(n,f,l)),c=Math.sqrt(Math.pow(f[0]-l[0],2)+Math.pow(f[1]-l[1],2));return o/c}function r(n,f,l){for(var o=f.length,c=n.length,v=new Array(o),d=new Array(o),p=new Array(o),y=new Array(o),g=0;g<o;++g)v[g]=d[g]=-1,p[g]=1/0,y[g]=!1;for(var g=0;g<c;++g){var A=n[g];if(A.length!==2)throw new Error("Input must be a graph");var b=A[1],M=A[0];d[M]!==-1?d[M]=-2:d[M]=b,v[b]!==-1?v[b]=-2:v[b]=M}function w(q){if(y[q])return 1/0;var G=v[q],J=d[q];return G<0||J<0?1/0:a(f[q],f[G],f[J])}function T(q,G){var J=F[q],le=F[G];F[q]=le,F[G]=J,D[J]=G,D[le]=q}function _(q){return p[F[q]]}function h(q){return q&1?q-1>>1:(q>>1)-1}function L(q){for(var G=_(q);;){var J=G,le=2*q+1,fe=2*(q+1),se=q;if(le<U){var V=_(le);V<J&&(se=le,J=V)}if(fe<U){var Y=_(fe);Y<J&&(se=fe)}if(se===q)return q;T(q,se),q=se}}function S(q){for(var G=_(q);q>0;){var J=h(q);if(J>=0){var le=_(J);if(G<le){T(q,J),q=J;continue}}return q}}function k(){if(U>0){var q=F[0];return T(0,U-1),U-=1,L(0),q}return-1}function P(q,G){var J=F[q];return p[J]===G?q:(p[J]=-1/0,S(q),k(),p[J]=G,U+=1,S(U-1))}function O(q){if(!y[q]){y[q]=!0;var G=v[q],J=d[q];v[J]>=0&&(v[J]=G),d[G]>=0&&(d[G]=J),D[G]>=0&&P(D[G],w(G)),D[J]>=0&&P(D[J],w(J))}}for(var F=[],D=new Array(o),g=0;g<o;++g){var R=p[g]=w(g);R<1/0?(D[g]=F.length,F.push(g)):D[g]=-1}for(var U=F.length,g=U>>1;g>=0;--g)L(g);for(;;){var N=k();if(N<0||p[N]>l)break;O(N)}for(var X=[],g=0;g<o;++g)y[g]||(D[g]=X.length,X.push(f[g].slice()));X.length;function j(q,G){if(q[G]<0)return G;var J=G,le=G;do{var fe=q[le];if(!y[le]||fe<0||fe===le||(le=fe,fe=q[le],!y[le]||fe<0||fe===le))break;le=fe,J=q[J]}while(J!==le);for(var se=G;se!==le;se=q[se])q[se]=le;return le}var ee=[];return n.forEach(function(q){var G=j(v,q[0]),J=j(d,q[1]);if(G>=0&&J>=0&&G!==J){var le=D[G],fe=D[J];le!==fe&&ee.push([le,fe])}}),i.unique(i.normalize(ee)),{positions:X,edges:ee}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(s,m,x){m.exports=a;var t=s("robust-orientation");function i(r,n){var f,l;if(n[0][0]<n[1][0])f=n[0],l=n[1];else if(n[0][0]>n[1][0])f=n[1],l=n[0];else{var o=Math.min(r[0][1],r[1][1]),c=Math.max(r[0][1],r[1][1]),v=Math.min(n[0][1],n[1][1]),d=Math.max(n[0][1],n[1][1]);return c<v?c-v:o>d?o-d:c-d}var p,y;r[0][1]<r[1][1]?(p=r[0],y=r[1]):(p=r[1],y=r[0]);var g=t(l,f,p);return g||(g=t(l,f,y),g)?g:y-l}function a(r,n){var f,l;if(n[0][0]<n[1][0])f=n[0],l=n[1];else if(n[0][0]>n[1][0])f=n[1],l=n[0];else return i(n,r);var o,c;if(r[0][0]<r[1][0])o=r[0],c=r[1];else if(r[0][0]>r[1][0])o=r[1],c=r[0];else return-i(r,n);var v=t(f,l,c),d=t(f,l,o);if(v<0){if(d<=0)return v}else if(v>0){if(d>=0)return v}else if(d)return d;if(v=t(c,o,l),d=t(c,o,f),v<0){if(d<=0)return v}else if(v>0){if(d>=0)return v}else if(d)return d;return l[0]-c[0]}},{"robust-orientation":284}],299:[function(s,m,x){m.exports=d;var t=s("binary-search-bounds"),i=s("functional-red-black-tree"),a=s("robust-orientation"),r=s("./lib/order-segments");function n(p,y,g){this.slabs=p,this.coordinates=y,this.horizontal=g}var f=n.prototype;function l(p,y){return p.y-y}function o(p,y){for(var g=null;p;){var A=p.key,b,M;A[0][0]<A[1][0]?(b=A[0],M=A[1]):(b=A[1],M=A[0]);var w=a(b,M,y);if(w<0)p=p.left;else if(w>0)if(y[0]!==A[1][0])g=p,p=p.right;else{var T=o(p.right,y);if(T)return T;p=p.left}else{if(y[0]!==A[1][0])return p;var T=o(p.right,y);if(T)return T;p=p.left}}return g}f.castUp=function(p){var y=t.le(this.coordinates,p[0]);if(y<0)return-1;this.slabs[y];var g=o(this.slabs[y],p),A=-1;if(g&&(A=g.value),this.coordinates[y]===p[0]){var b=null;if(g&&(b=g.key),y>0){var M=o(this.slabs[y-1],p);M&&(b?r(M.key,b)>0&&(b=M.key,A=M.value):(A=M.value,b=M.key))}var w=this.horizontal[y];if(w.length>0){var T=t.ge(w,p[1],l);if(T<w.length){var _=w[T];if(p[1]===_.y){if(_.closed)return _.index;for(;T<w.length-1&&w[T+1].y===p[1];)if(T=T+1,_=w[T],_.closed)return _.index;if(_.y===p[1]&&!_.start){if(T=T+1,T>=w.length)return A;_=w[T]}}if(_.start)if(b){var h=a(b[0],b[1],[p[0],_.y]);b[0][0]>b[1][0]&&(h=-h),h>0&&(A=_.index)}else A=_.index;else _.y!==p[1]&&(A=_.index)}}}return A};function c(p,y,g,A){this.y=p,this.index=y,this.start=g,this.closed=A}function v(p,y,g,A){this.x=p,this.segment=y,this.create=g,this.index=A}function d(p){for(var y=p.length,g=2*y,A=new Array(g),b=0;b<y;++b){var M=p[b],w=M[0][0]<M[1][0];A[2*b]=new v(M[0][0],M,w,b),A[2*b+1]=new v(M[1][0],M,!w,b)}A.sort(function(O,F){var D=O.x-F.x;return D||(D=O.create-F.create,D)?D:Math.min(O.segment[0][1],O.segment[1][1])-Math.min(F.segment[0][1],F.segment[1][1])});for(var T=i(r),_=[],h=[],L=[],b=0;b<g;){for(var S=A[b].x,k=[];b<g;){var P=A[b];if(P.x!==S)break;b+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(k.push(new c(P.segment[0][1],P.index,!0,!0)),k.push(new c(P.segment[1][1],P.index,!1,!1))):(k.push(new c(P.segment[1][1],P.index,!0,!1)),k.push(new c(P.segment[0][1],P.index,!1,!0)))):P.create?T=T.insert(P.segment,P.index):T=T.remove(P.segment)}_.push(T.root),h.push(S),L.push(k)}return new n(_,h,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(s,m,x){var t=s("robust-dot-product"),i=s("robust-sum");m.exports=n,m.exports.positive=f,m.exports.negative=l;function a(o,c){var v=i(t(o,c),[c[c.length-1]]);return v[v.length-1]}function r(o,c,v,d){var p=d-c,y=-c/p;y<0?y=0:y>1&&(y=1);for(var g=1-y,A=o.length,b=new Array(A),M=0;M<A;++M)b[M]=y*o[M]+g*v[M];return b}function n(o,c){for(var v=[],d=[],p=a(o[o.length-1],c),y=o[o.length-1],g=o[0],A=0;A<o.length;++A,y=g){g=o[A];var b=a(g,c);if(p<0&&b>0||p>0&&b<0){var M=r(y,b,g,p);v.push(M),d.push(M.slice())}b<0?d.push(g.slice()):b>0?v.push(g.slice()):(v.push(g.slice()),d.push(g.slice())),p=b}return{positive:v,negative:d}}function f(o,c){for(var v=[],d=a(o[o.length-1],c),p=o[o.length-1],y=o[0],g=0;g<o.length;++g,p=y){y=o[g];var A=a(y,c);(d<0&&A>0||d>0&&A<0)&&v.push(r(p,A,y,d)),A>=0&&v.push(y.slice()),d=A}return v}function l(o,c){for(var v=[],d=a(o[o.length-1],c),p=o[o.length-1],y=o[0],g=0;g<o.length;++g,p=y){y=o[g];var A=a(y,c);(d<0&&A>0||d>0&&A<0)&&v.push(r(p,A,y,d)),A<=0&&v.push(y.slice()),d=A}return v}},{"robust-dot-product":281,"robust-sum":289}],301:[function(s,m,x){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(l){return r(f(l),arguments)}function a(l,o){return i.apply(null,[l].concat(o||[]))}function r(l,o){var c=1,v=l.length,d,p="",y,g,A,b,M,w,T,_;for(y=0;y<v;y++)if(typeof l[y]=="string")p+=l[y];else if(typeof l[y]=="object"){if(A=l[y],A.keys)for(d=o[c],g=0;g<A.keys.length;g++){if(d==null)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',A.keys[g],A.keys[g-1]));d=d[A.keys[g]]}else A.param_no?d=o[A.param_no]:d=o[c++];if(t.not_type.test(A.type)&&t.not_primitive.test(A.type)&&d instanceof Function&&(d=d()),t.numeric_arg.test(A.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(i("[sprintf] expecting number but found %T",d));switch(t.number.test(A.type)&&(T=d>=0),A.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,A.width?parseInt(A.width):0);break;case"e":d=A.precision?parseFloat(d).toExponential(A.precision):parseFloat(d).toExponential();break;case"f":d=A.precision?parseFloat(d).toFixed(A.precision):parseFloat(d);break;case"g":d=A.precision?String(Number(d.toPrecision(A.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=A.precision?d.substring(0,A.precision):d;break;case"t":d=String(!!d),d=A.precision?d.substring(0,A.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=A.precision?d.substring(0,A.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=A.precision?d.substring(0,A.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}t.json.test(A.type)?p+=d:(t.number.test(A.type)&&(!T||A.sign)?(_=T?"+":"-",d=d.toString().replace(t.sign,"")):_="",M=A.pad_char?A.pad_char==="0"?"0":A.pad_char.charAt(1):" ",w=A.width-(_+d).length,b=A.width&&w>0?M.repeat(w):"",p+=A.align?_+d+b:M==="0"?_+b+d:b+_+d)}return p}var n=Object.create(null);function f(l){if(n[l])return n[l];for(var o=l,c,v=[],d=0;o;){if((c=t.text.exec(o))!==null)v.push(c[0]);else if((c=t.modulo.exec(o))!==null)v.push("%");else if((c=t.placeholder.exec(o))!==null){if(c[2]){d|=1;var p=[],y=c[2],g=[];if((g=t.key.exec(y))!==null)for(p.push(g[1]);(y=y.substring(g[0].length))!=="";)if((g=t.key_access.exec(y))!==null)p.push(g[1]);else if((g=t.index_access.exec(y))!==null)p.push(g[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=p}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");v.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(c[0].length)}return n[l]=v}typeof x!="undefined"&&(x.sprintf=i,x.vsprintf=a),typeof window!="undefined"&&(window.sprintf=i,window.vsprintf=a)})()},{}],302:[function(s,m,x){m.exports=l;var t=s("ndarray-extract-contour"),i=s("zero-crossings"),a={"2d":function(o,c,v){var d=o({order:c,scalarArguments:3,getters:v==="generic"?[0]:void 0,phase:function(y,g,A,b){return y>b|0},vertex:function(y,g,A,b,M,w,T,_,h,L,S,k,P){var O=(T<<0)+(_<<1)+(h<<2)+(L<<3)|0;if(!(O===0||O===15))switch(O){case 0:S.push([y-.5,g-.5]);break;case 1:S.push([y-.25-.25*(b+A-2*P)/(A-b),g-.25-.25*(M+A-2*P)/(A-M)]);break;case 2:S.push([y-.75-.25*(-b-A+2*P)/(b-A),g-.25-.25*(w+b-2*P)/(b-w)]);break;case 3:S.push([y-.5,g-.5-.5*(M+A+w+b-4*P)/(A-M+b-w)]);break;case 4:S.push([y-.25-.25*(w+M-2*P)/(M-w),g-.75-.25*(-M-A+2*P)/(M-A)]);break;case 5:S.push([y-.5-.5*(b+A+w+M-4*P)/(A-b+M-w),g-.5]);break;case 6:S.push([y-.5-.25*(-b-A+w+M)/(b-A+M-w),g-.5-.25*(-M-A+w+b)/(M-A+b-w)]);break;case 7:S.push([y-.75-.25*(w+M-2*P)/(M-w),g-.75-.25*(w+b-2*P)/(b-w)]);break;case 8:S.push([y-.75-.25*(-w-M+2*P)/(w-M),g-.75-.25*(-w-b+2*P)/(w-b)]);break;case 9:S.push([y-.5-.25*(b+A+-w-M)/(A-b+w-M),g-.5-.25*(M+A+-w-b)/(A-M+w-b)]);break;case 10:S.push([y-.5-.5*(-b-A+-w-M+4*P)/(b-A+w-M),g-.5]);break;case 11:S.push([y-.25-.25*(-w-M+2*P)/(w-M),g-.75-.25*(M+A-2*P)/(A-M)]);break;case 12:S.push([y-.5,g-.5-.5*(-M-A+-w-b+4*P)/(M-A+w-b)]);break;case 13:S.push([y-.75-.25*(b+A-2*P)/(A-b),g-.25-.25*(-w-b+2*P)/(w-b)]);break;case 14:S.push([y-.25-.25*(-b-A+2*P)/(b-A),g-.25-.25*(-M-A+2*P)/(M-A)]);break;case 15:S.push([y-.5,g-.5]);break}},cell:function(y,g,A,b,M,w,T,_,h){M?_.push([y,g]):_.push([g,y])}});return function(p,y){var g=[],A=[];return d(p,g,A,y),{positions:g,cells:A}}}};function r(o,c){var v=o.length+"d",d=a[v];if(d)return d(t,o,c)}function n(o,c){for(var v=i(o,c),d=v.length,p=new Array(d),y=new Array(d),g=0;g<d;++g)p[g]=[v[g]],y[g]=[g];return{positions:p,cells:y}}var f={};function l(o,c){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return n(o,c);var v=o.order.join()+"-"+o.dtype,d=f[v],c=+c||0;return d||(d=f[v]=r(o.order,o.dtype)),d(o,c)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(s,m,x){(function(t){(function(){m.exports=f;var i=s("vectorize-text"),a=window||t.global||{},r=a.__TEXT_CACHE||{};a.__TEXT_CACHE={};function n(l){for(var o=l.cells,c=l.positions,v=new Float32Array(o.length*6),d=0,p=0,y=0;y<o.length;++y)for(var g=o[y],A=0;A<3;++A){var b=c[g[A]];v[d++]=b[0],v[d++]=b[1]+1.4,p=Math.max(b[0],p)}return{data:v,shape:p}}function f(l,o,c){var c=c||{},v=r[l];v||(v=r[l]={" ":{data:new Float32Array(0),shape:.2}});var d=v[o];if(!d)if(o.length<=1||!/\d/.test(o))d=v[o]=n(i(o,{triangles:!0,font:l,textAlign:c.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var p=o.split(/(\d|\s)/),y=new Array(p.length),g=0,A=0,b=0;b<p.length;++b)y[b]=f(l,p[b]),g+=y[b].data.length,A+=y[b].shape,b>0&&(A+=.02);for(var M=new Float32Array(g),w=0,T=-.5*A,b=0;b<y.length;++b){for(var _=y[b].data,h=0;h<_.length;h+=2)M[w++]=_[h]+T,M[w++]=_[h+1];T+=y[b].shape+.02}d=v[o]={data:M,shape:A}}return d}}).call(this)}).call(this,s("_process"))},{_process:5,"vectorize-text":311}],304:[function(s,m,x){var t=s("parse-unit");m.exports=n;var i=96;function a(f,l){var o=t(getComputedStyle(f).getPropertyValue(l));return o[0]*n(o[1],f)}function r(f,l){var o=document.createElement("div");o.style["font-size"]="128"+f,l.appendChild(o);var c=a(o,"font-size")/128;return l.removeChild(o),c}function n(f,l){switch(l=l||document.body,f=(f||"px").trim().toLowerCase(),(l===window||l===document)&&(l=document.body),f){case"%":return l.clientHeight/100;case"ch":case"ex":return r(f,l);case"em":return a(l,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6}return 1}},{"parse-unit":265}],305:[function(s,m,x){m.exports=y;var t=s("filtered-vector"),i=s("gl-mat4/invert"),a=s("gl-mat4/rotate"),r=s("gl-vec3/cross"),n=s("gl-vec3/normalize"),f=s("gl-vec3/dot");function l(g,A,b){return Math.sqrt(Math.pow(g,2)+Math.pow(A,2)+Math.pow(b,2))}function o(g){return Math.min(1,Math.max(-1,g))}function c(g){var A=Math.abs(g[0]),b=Math.abs(g[1]),M=Math.abs(g[2]),w=[0,0,0];A>Math.max(b,M)?w[2]=1:b>Math.max(A,M)?w[0]=1:w[1]=1;for(var T=0,_=0,h=0;h<3;++h)T+=g[h]*g[h],_+=w[h]*g[h];for(var h=0;h<3;++h)w[h]-=_/T*g[h];return n(w,w),w}function v(g,A,b,M,w,T,_,h){this.center=t(b),this.up=t(M),this.right=t(w),this.radius=t([T]),this.angle=t([_,h]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(g,A),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var d=v.prototype;d.setDistanceLimits=function(g,A){g>0?g=Math.log(g):g=-1/0,A>0?A=Math.log(A):A=1/0,A=Math.max(A,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=A},d.getDistanceLimits=function(g){var A=this.radius.bounds[0];return g?(g[0]=Math.exp(A[0][0]),g[1]=Math.exp(A[1][0]),g):[Math.exp(A[0][0]),Math.exp(A[1][0])]},d.recalcMatrix=function(g){this.center.curve(g),this.up.curve(g),this.right.curve(g),this.radius.curve(g),this.angle.curve(g);for(var A=this.computedUp,b=this.computedRight,M=0,w=0,T=0;T<3;++T)w+=A[T]*b[T],M+=A[T]*A[T];for(var _=Math.sqrt(M),h=0,T=0;T<3;++T)b[T]-=A[T]*w/M,h+=b[T]*b[T],A[T]/=_;for(var L=Math.sqrt(h),T=0;T<3;++T)b[T]/=L;var S=this.computedToward;r(S,A,b),n(S,S);for(var k=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],O=this.computedAngle[1],F=Math.cos(P),D=Math.sin(P),R=Math.cos(O),U=Math.sin(O),N=this.computedCenter,X=F*R,j=D*R,ee=U,q=-F*U,G=-D*U,J=R,le=this.computedEye,fe=this.computedMatrix,T=0;T<3;++T){var se=X*b[T]+j*S[T]+ee*A[T];fe[4*T+1]=q*b[T]+G*S[T]+J*A[T],fe[4*T+2]=se,fe[4*T+3]=0}var V=fe[1],Y=fe[5],ne=fe[9],te=fe[2],K=fe[6],$=fe[10],ae=Y*$-ne*K,ie=ne*te-V*$,oe=V*K-Y*te,ue=l(ae,ie,oe);ae/=ue,ie/=ue,oe/=ue,fe[0]=ae,fe[4]=ie,fe[8]=oe;for(var T=0;T<3;++T)le[T]=N[T]+fe[2+4*T]*k;for(var T=0;T<3;++T){for(var h=0,xe=0;xe<3;++xe)h+=fe[T+4*xe]*le[xe];fe[12+T]=-h}fe[15]=1},d.getMatrix=function(g,A){this.recalcMatrix(g);var b=this.computedMatrix;if(A){for(var M=0;M<16;++M)A[M]=b[M];return A}return b};var p=[0,0,0];d.rotate=function(g,A,b,M){if(this.angle.move(g,A,b),M){this.recalcMatrix(g);var w=this.computedMatrix;p[0]=w[2],p[1]=w[6],p[2]=w[10];for(var T=this.computedUp,_=this.computedRight,h=this.computedToward,L=0;L<3;++L)w[4*L]=T[L],w[4*L+1]=_[L],w[4*L+2]=h[L];a(w,w,M,p);for(var L=0;L<3;++L)T[L]=w[4*L],_[L]=w[4*L+1];this.up.set(g,T[0],T[1],T[2]),this.right.set(g,_[0],_[1],_[2])}},d.pan=function(g,A,b,M){A=A||0,b=b||0,M=M||0,this.recalcMatrix(g);var w=this.computedMatrix;Math.exp(this.computedRadius[0]);var T=w[1],_=w[5],h=w[9],L=l(T,_,h);T/=L,_/=L,h/=L;var S=w[0],k=w[4],P=w[8],O=S*T+k*_+P*h;S-=T*O,k-=_*O,P-=h*O;var F=l(S,k,P);S/=F,k/=F,P/=F;var D=S*A+T*b,R=k*A+_*b,U=P*A+h*b;this.center.move(g,D,R,U);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+M),this.radius.set(g,Math.log(N))},d.translate=function(g,A,b,M){this.center.move(g,A||0,b||0,M||0)},d.setMatrix=function(g,A,b,M){var w=1;typeof b=="number"&&(w=b|0),(w<0||w>3)&&(w=1);var T=(w+2)%3;A||(this.recalcMatrix(g),A=this.computedMatrix);var _=A[w],h=A[w+4],L=A[w+8];if(M){var k=Math.abs(_),P=Math.abs(h),O=Math.abs(L),F=Math.max(k,P,O);k===F?(_=_<0?-1:1,h=L=0):O===F?(L=L<0?-1:1,_=h=0):(h=h<0?-1:1,_=L=0)}else{var S=l(_,h,L);_/=S,h/=S,L/=S}var D=A[T],R=A[T+4],U=A[T+8],N=D*_+R*h+U*L;D-=_*N,R-=h*N,U-=L*N;var X=l(D,R,U);D/=X,R/=X,U/=X;var j=h*U-L*R,ee=L*D-_*U,q=_*R-h*D,G=l(j,ee,q);j/=G,ee/=G,q/=G,this.center.jump(g,Ce,Se,Be),this.radius.idle(g),this.up.jump(g,_,h,L),this.right.jump(g,D,R,U);var J,le;if(w===2){var fe=A[1],se=A[5],V=A[9],Y=fe*D+se*R+V*U,ne=fe*j+se*ee+V*q;ae<0?J=-Math.PI/2:J=Math.PI/2,le=Math.atan2(ne,Y)}else{var te=A[2],K=A[6],$=A[10],ae=te*_+K*h+$*L,ie=te*D+K*R+$*U,oe=te*j+K*ee+$*q;J=Math.asin(o(ae)),le=Math.atan2(oe,ie)}this.angle.jump(g,le,J),this.recalcMatrix(g);var ue=A[2],xe=A[6],he=A[10],me=this.computedMatrix;i(me,A);var be=me[15],Ce=me[12]/be,Se=me[13]/be,Be=me[14]/be,Ye=Math.exp(this.computedRadius[0]);this.center.jump(g,Ce-ue*Ye,Se-xe*Ye,Be-he*Ye)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(g){this.center.idle(g),this.up.idle(g),this.right.idle(g),this.radius.idle(g),this.angle.idle(g)},d.flush=function(g){this.center.flush(g),this.up.flush(g),this.right.flush(g),this.radius.flush(g),this.angle.flush(g)},d.setDistance=function(g,A){A>0&&this.radius.set(g,Math.log(A))},d.lookAt=function(g,A,b,M){this.recalcMatrix(g),A=A||this.computedEye,b=b||this.computedCenter,M=M||this.computedUp;var w=M[0],T=M[1],_=M[2],h=l(w,T,_);if(!(h<1e-6)){w/=h,T/=h,_/=h;var L=A[0]-b[0],S=A[1]-b[1],k=A[2]-b[2],P=l(L,S,k);if(!(P<1e-6)){L/=P,S/=P,k/=P;var O=this.computedRight,F=O[0],D=O[1],R=O[2],U=w*F+T*D+_*R;F-=U*w,D-=U*T,R-=U*_;var N=l(F,D,R);if(!(N<.01&&(F=T*k-_*S,D=_*L-w*k,R=w*S-T*L,N=l(F,D,R),N<1e-6))){F/=N,D/=N,R/=N,this.up.set(g,w,T,_),this.right.set(g,F,D,R),this.center.set(g,b[0],b[1],b[2]),this.radius.set(g,Math.log(P));var X=T*R-_*D,j=_*F-w*R,ee=w*D-T*F,q=l(X,j,ee);X/=q,j/=q,ee/=q;var G=w*L+T*S+_*k,J=F*L+D*S+R*k,le=X*L+j*S+ee*k,fe=Math.asin(o(G)),se=Math.atan2(le,J),V=this.angle._state,Y=V[V.length-1],ne=V[V.length-2];Y=Y%(2*Math.PI);var te=Math.abs(Y+2*Math.PI-se),K=Math.abs(Y-se),$=Math.abs(Y-2*Math.PI-se);te<K&&(Y+=2*Math.PI),$<K&&(Y-=2*Math.PI),this.angle.jump(this.angle.lastT(),Y,ne),this.angle.set(g,se,fe)}}}};function y(g){g=g||{};var A=g.center||[0,0,0],b=g.up||[0,1,0],M=g.right||c(b),w=g.radius||1,T=g.theta||0,_=g.phi||0;if(A=[].slice.call(A,0,3),b=[].slice.call(b,0,3),n(b,b),M=[].slice.call(M,0,3),n(M,M),"eye"in g){var h=g.eye,L=[h[0]-A[0],h[1]-A[1],h[2]-A[2]];r(M,L,b),l(M[0],M[1],M[2])<1e-6?M=c(b):n(M,M),w=l(L[0],L[1],L[2]);var S=f(b,L)/w,k=f(M,L)/w;_=Math.acos(S),T=Math.acos(k)}return w=Math.log(w),new v(g.zoomMin,g.zoomMax,A,b,M,w,T,_)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(s,m,x){m.exports=i;var t=+(Math.pow(2,27)+1);function i(a,r,n){var f=a*r,l=t*a,o=l-a,c=l-o,v=a-c,d=t*r,p=d-r,y=d-p,g=r-y,A=f-c*y,b=A-v*y,M=b-c*g,w=v*g-M;return n?(n[0]=w,n[1]=f,n):[w,f]}},{}],307:[function(s,m,x){m.exports=t;function t(i,a,r){var n=i+a,f=n-i,l=n-f,o=a-f,c=i-l;return r?(r[0]=c+o,r[1]=n,r):[c+o,n]}},{}],308:[function(s,m,x){(function(t){(function(){var i=s("bit-twiddle"),a=s("dup"),r=s("buffer").Buffer;t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var n=typeof Uint8ClampedArray!="undefined",f=typeof BigUint64Array!="undefined",l=typeof BigInt64Array!="undefined",o=t.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=a([32,0])),o.BIGUINT64||(o.BIGUINT64=a([32,0])),o.BIGINT64||(o.BIGINT64=a([32,0])),o.BUFFER||(o.BUFFER=a([32,0]));var c=o.DATA,v=o.BUFFER;x.free=function(D){if(r.isBuffer(D))v[i.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var R=D.length||D.byteLength,U=i.log2(R)|0;c[U].push(D)}};function d(F){if(!!F){var D=F.length||F.byteLength,R=i.log2(D);c[R].push(F)}}function p(F){d(F.buffer)}x.freeUint8=x.freeUint16=x.freeUint32=x.freeBigUint64=x.freeInt8=x.freeInt16=x.freeInt32=x.freeBigInt64=x.freeFloat32=x.freeFloat=x.freeFloat64=x.freeDouble=x.freeUint8Clamped=x.freeDataView=p,x.freeArrayBuffer=d,x.freeBuffer=function(D){v[i.log2(D.length)].push(D)},x.malloc=function(D,R){if(R===void 0||R==="arraybuffer")return y(D);switch(R){case"uint8":return g(D);case"uint16":return A(D);case"uint32":return b(D);case"int8":return M(D);case"int16":return w(D);case"int32":return T(D);case"float":case"float32":return _(D);case"double":case"float64":return h(D);case"uint8_clamped":return L(D);case"bigint64":return k(D);case"biguint64":return S(D);case"buffer":return O(D);case"data":case"dataview":return P(D);default:return null}return null};function y(F){var F=i.nextPow2(F),D=i.log2(F),R=c[D];return R.length>0?R.pop():new ArrayBuffer(F)}x.mallocArrayBuffer=y;function g(F){return new Uint8Array(y(F),0,F)}x.mallocUint8=g;function A(F){return new Uint16Array(y(2*F),0,F)}x.mallocUint16=A;function b(F){return new Uint32Array(y(4*F),0,F)}x.mallocUint32=b;function M(F){return new Int8Array(y(F),0,F)}x.mallocInt8=M;function w(F){return new Int16Array(y(2*F),0,F)}x.mallocInt16=w;function T(F){return new Int32Array(y(4*F),0,F)}x.mallocInt32=T;function _(F){return new Float32Array(y(4*F),0,F)}x.mallocFloat32=x.mallocFloat=_;function h(F){return new Float64Array(y(8*F),0,F)}x.mallocFloat64=x.mallocDouble=h;function L(F){return n?new Uint8ClampedArray(y(F),0,F):g(F)}x.mallocUint8Clamped=L;function S(F){return f?new BigUint64Array(y(8*F),0,F):null}x.mallocBigUint64=S;function k(F){return l?new BigInt64Array(y(8*F),0,F):null}x.mallocBigInt64=k;function P(F){return new DataView(y(F),0,F)}x.mallocDataView=P;function O(F){F=i.nextPow2(F);var D=i.log2(F),R=v[D];return R.length>0?R.pop():new r(F)}x.mallocBuffer=O,x.clearCache=function(){for(var D=0;D<32;++D)o.UINT8[D].length=0,o.UINT16[D].length=0,o.UINT32[D].length=0,o.INT8[D].length=0,o.INT16[D].length=0,o.INT32[D].length=0,o.FLOAT[D].length=0,o.DOUBLE[D].length=0,o.BIGUINT64[D].length=0,o.BIGINT64[D].length=0,o.UINT8C[D].length=0,c[D].length=0,v[D].length=0}}).call(this)}).call(this,typeof u!="undefined"?u:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(s,m,x){m.exports=t;function t(a){this.roots=new Array(a),this.ranks=new Array(a);for(var r=0;r<a;++r)this.roots[r]=r,this.ranks[r]=0}var i=t.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},i.find=function(a){for(var r=a,n=this.roots;n[a]!==a;)a=n[a];for(;n[r]!==a;){var f=n[r];n[r]=a,r=f}return a},i.link=function(a,r){var n=this.find(a),f=this.find(r);if(n!==f){var l=this.ranks,o=this.roots,c=l[n],v=l[f];c<v?o[n]=f:v<c?o[f]=n:(o[f]=n,++l[n])}}},{}],310:[function(s,m,x){function t(r,n){for(var f=1,l=r.length,o=r[0],c=r[0],v=1;v<l;++v)if(c=o,o=r[v],n(o,c)){if(v===f){f++;continue}r[f++]=o}return r.length=f,r}function i(r){for(var n=1,f=r.length,l=r[0],o=r[0],c=1;c<f;++c,o=l)if(o=l,l=r[c],l!==o){if(c===n){n++;continue}r[n++]=l}return r.length=n,r}function a(r,n,f){return r.length===0?r:n?(f||r.sort(n),t(r,n)):(f||r.sort(),i(r))}m.exports=a},{}],311:[function(s,m,x){m.exports=r;var t=s("./lib/vtext"),i=null,a=null;typeof document!="undefined"&&(i=document.createElement("canvas"),i.width=8192,i.height=1024,a=i.getContext("2d"));function r(n,f){return(typeof f!="object"||f===null)&&(f={}),t(n,f.canvas||i,f.context||a,f)}},{"./lib/vtext":312}],312:[function(s,m,x){m.exports=S,m.exports.processPixels=L;var t=s("surface-nets"),i=s("ndarray"),a=s("simplify-planar-graph"),r=s("clean-pslg"),n=s("cdt2d"),f=s("planar-graph-to-polyline"),l="b",o="b|",c="i",v="i|",d="sup",p="+",y="+1",g="sub",A="-",b="-1";function M(k,P,O,F){for(var D="<"+k+">",R="</"+k+">",U=D.length,N=R.length,X=P[0]===p||P[0]===A,j=0,ee=-N;j>-1&&(j=O.indexOf(D,j),!(j===-1||(ee=O.indexOf(R,j+U),ee===-1)||ee<=j));){for(var q=j;q<ee+N;++q)if(q<j+U||q>=ee)F[q]=null,O=O.substr(0,q)+" "+O.substr(q+1);else if(F[q]!==null){var G=F[q].indexOf(P[0]);G===-1?F[q]+=P:X&&(F[q]=F[q].substr(0,G+1)+(1+parseInt(F[q][G+1]))+F[q].substr(G+2))}var J=j+U,le=O.substr(J,ee-J),fe=le.indexOf(D);fe!==-1?j=fe:j=ee+N}return F}function w(k,P,O){for(var F=P.textAlign||"start",D=P.textBaseline||"alphabetic",R=[1<<30,1<<30],U=[0,0],N=k.length,X=0;X<N;++X)for(var j=k[X],ee=0;ee<2;++ee)R[ee]=Math.min(R[ee],j[ee])|0,U[ee]=Math.max(U[ee],j[ee])|0;var q=0;switch(F){case"center":q=-.5*(R[0]+U[0]);break;case"right":case"end":q=-U[0];break;case"left":case"start":q=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+F+"'")}var G=0;switch(D){case"hanging":case"top":G=-R[1];break;case"middle":G=-.5*(R[1]+U[1]);break;case"alphabetic":case"ideographic":G=-3*O;break;case"bottom":G=-U[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var J=1/O;return"lineHeight"in P?J*=+P.lineHeight:"width"in P?J=P.width/(U[0]-R[0]):"height"in P&&(J=P.height/(U[1]-R[1])),k.map(function(le){return[J*(le[0]+q),J*(le[1]+G)]})}function T(k,P,O,F,D,R){O=O.replace(/\n/g,""),R.breaklines===!0?O=O.replace(/\<br\>/g,`
`):O=O.replace(/\<br\>/g," ");var U="",N=[];for(Y=0;Y<O.length;++Y)N[Y]=U;R.bolds===!0&&(N=M(l,o,O,N)),R.italics===!0&&(N=M(c,v,O,N)),R.superscripts===!0&&(N=M(d,y,O,N)),R.subscripts===!0&&(N=M(g,b,O,N));var X=[],j="";for(Y=0;Y<O.length;++Y)N[Y]!==null&&(j+=O[Y],X.push(N[Y]));var ee=j.split(`
`),q=ee.length,G=Math.round(D*F),J=F,le=F*2,fe=0,se=q*G+le;k.height<se&&(k.height=se),P.fillStyle="#000",P.fillRect(0,0,k.width,k.height),P.fillStyle="#fff";var V,Y,ne,te,K,$=0,ae="";function ie(){if(ae!==""){var Be=P.measureText(ae).width;P.fillText(ae,J+ne,le+te),ne+=Be}}function oe(){return""+Math.round(K)+"px "}function ue(Be,Ye){var Xe=""+P.font;if(R.subscripts===!0){var Te=Be.indexOf(A),Ie=Ye.indexOf(A),Ze=Te>-1?parseInt(Be[1+Te]):0,rt=Ie>-1?parseInt(Ye[1+Ie]):0;Ze!==rt&&(Xe=Xe.replace(oe(),"?px "),K*=Math.pow(.75,rt-Ze),Xe=Xe.replace("?px ",oe())),te+=.25*G*(rt-Ze)}if(R.superscripts===!0){var Ge=Be.indexOf(p),ze=Ye.indexOf(p),We=Ge>-1?parseInt(Be[1+Ge]):0,mt=ze>-1?parseInt(Ye[1+ze]):0;We!==mt&&(Xe=Xe.replace(oe(),"?px "),K*=Math.pow(.75,mt-We),Xe=Xe.replace("?px ",oe())),te-=.25*G*(mt-We)}if(R.bolds===!0){var Ft=Be.indexOf(o)>-1,Xt=Ye.indexOf(o)>-1;!Ft&&Xt&&(Pt?Xe=Xe.replace("italic ","italic bold "):Xe="bold "+Xe),Ft&&!Xt&&(Xe=Xe.replace("bold ",""))}if(R.italics===!0){var Pt=Be.indexOf(v)>-1,Ut=Ye.indexOf(v)>-1;!Pt&&Ut&&(Xe="italic "+Xe),Pt&&!Ut&&(Xe=Xe.replace("italic ",""))}P.font=Xe}for(V=0;V<q;++V){var xe=ee[V]+`
`;for(ne=0,te=V*G,K=F,ae="",Y=0;Y<xe.length;++Y){var he=Y+$<X.length?X[Y+$]:X[X.length-1];U===he?ae+=xe[Y]:(ie(),ae=xe[Y],he!==void 0&&(ue(U,he),U=he))}ie(),$+=xe.length;var me=Math.round(ne+2*J)|0;fe<me&&(fe=me)}var be=fe,Ce=le+G*q,Se=i(P.getImageData(0,0,be,Ce).data,[Ce,be,4]);return Se.pick(-1,-1,0).transpose(1,0)}function _(k,P){var O=t(k,128);return P?a(O.cells,O.positions,.25):{edges:O.cells,positions:O.positions}}function h(k,P,O,F){var D=_(k,F),R=w(D.positions,P,O),U=D.edges,N=P.orientation==="ccw";if(r(R,U),P.polygons||P.polygon||P.polyline){for(var X=f(U,R),j=new Array(X.length),ee=0;ee<X.length;++ee){for(var q=X[ee],G=new Array(q.length),J=0;J<q.length;++J){for(var le=q[J],fe=new Array(le.length),se=0;se<le.length;++se)fe[se]=R[le[se]].slice();N&&fe.reverse(),G[J]=fe}j[ee]=G}return j}else return P.triangles||P.triangulate||P.triangle?{cells:n(R,U,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:U,positions:R}}function L(k,P,O){try{return h(k,P,O,!0)}catch{}try{return h(k,P,O,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(k,P,O,F){var D=64,R=1.25,U={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};F&&(F.size&&F.size>0&&(D=F.size),F.lineSpacing&&F.lineSpacing>0&&(R=F.lineSpacing),F.styletags&&F.styletags.breaklines&&(U.breaklines=!!F.styletags.breaklines),F.styletags&&F.styletags.bolds&&(U.bolds=!!F.styletags.bolds),F.styletags&&F.styletags.italics&&(U.italics=!!F.styletags.italics),F.styletags&&F.styletags.subscripts&&(U.subscripts=!!F.styletags.subscripts),F.styletags&&F.styletags.superscripts&&(U.superscripts=!!F.styletags.superscripts)),O.font=[F.fontStyle,F.fontVariant,F.fontWeight,D+"px",F.font].filter(function(X){return X}).join(" "),O.textAlign="start",O.textBaseline="alphabetic",O.direction="ltr";var N=T(P,O,k,D,R,U);return L(N,F,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(s,m,x){(function(){if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function i(L){L.permitHostObjects___&&L.permitHostObjects___(i)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=i);var a=!1;if(typeof WeakMap=="function"){var r=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var n=new r,f=Object.freeze({});if(n.set(f,1),n.get(f)!==1)a=!0;else{m.exports=WeakMap;return}}}var l=Object.getOwnPropertyNames,o=Object.defineProperty,c=Object.isExtensible,v="weakmap:",d=v+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var p=new ArrayBuffer(25),y=new Uint8Array(p);crypto.getRandomValues(y),d=v+"rand:"+Array.prototype.map.call(y,function(L){return(L%36).toString(36)}).join("")+"___"}function g(L){return!(L.substr(0,v.length)==v&&L.substr(L.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(S){return l(S).filter(g)}}),"getPropertyNames"in Object){var A=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(S){return A(S).filter(g)}})}function b(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var S=L[d];if(S&&S.key===L)return S;if(!!c(L)){S={key:L};try{return o(L,d,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var L=Object.freeze;o(Object,"freeze",{value:function(O){return b(O),L(O)}});var S=Object.seal;o(Object,"seal",{value:function(O){return b(O),S(O)}});var k=Object.preventExtensions;o(Object,"preventExtensions",{value:function(O){return b(O),k(O)}})})();function M(L){return L.prototype=null,Object.freeze(L)}var w=!1;function T(){!w&&typeof console!="undefined"&&(w=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var _=0,h=function(){this instanceof h||T();var L=[],S=[],k=_++;function P(R,U){var N,X=b(R);return X?k in X?X[k]:U:(N=L.indexOf(R),N>=0?S[N]:U)}function O(R){var U=b(R);return U?k in U:L.indexOf(R)>=0}function F(R,U){var N,X=b(R);return X?X[k]=U:(N=L.indexOf(R),N>=0?S[N]=U:(N=L.length,S[N]=U,L[N]=R)),this}function D(R){var U=b(R),N,X;return U?k in U&&delete U[k]:(N=L.indexOf(R),N<0?!1:(X=L.length-1,L[N]=void 0,S[N]=S[X],L[N]=L[X],L.length=X,S.length=X,!0))}return Object.create(h.prototype,{get___:{value:M(P)},has___:{value:M(O)},set___:{value:M(F)},delete___:{value:M(D)}})};h.prototype=Object.create(Object.prototype,{get:{value:function(S,k){return this.get___(S,k)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,k){return this.set___(S,k)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof r=="function"?function(){a&&typeof Proxy!="undefined"&&(Proxy=void 0);function L(){this instanceof h||T();var S=new r,k=void 0,P=!1;function O(U,N){return k?S.has(U)?S.get(U):k.get___(U,N):S.get(U,N)}function F(U){return S.has(U)||(k?k.has___(U):!1)}var D;a?D=function(U,N){return S.set(U,N),S.has(U)||(k||(k=new h),k.set(U,N)),this}:D=function(U,N){if(P)try{S.set(U,N)}catch{k||(k=new h),k.set___(U,N)}else S.set(U,N);return this};function R(U){var N=!!S.delete(U);return k&&k.delete___(U)||N}return Object.create(h.prototype,{get___:{value:M(O)},has___:{value:M(F)},set___:{value:M(D)},delete___:{value:M(R)},permitHostObjects___:{value:M(function(U){if(U===i)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=h.prototype,m.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),m.exports=h)})()},{}],314:[function(s,m,x){var t=s("./hidden-store.js");m.exports=i;function i(){var a={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var n=r.valueOf(a);return n&&n.identity===a?n:t(r,a)}}},{"./hidden-store.js":315}],315:[function(s,m,x){m.exports=t;function t(i,a){var r={identity:a},n=i.valueOf;return Object.defineProperty(i,"valueOf",{value:function(f){return f!==a?n.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(s,m,x){var t=s("./create-store.js");m.exports=i;function i(){var a=t();return{get:function(r,n){var f=a(r);return f.hasOwnProperty("value")?f.value:n},set:function(r,n){return a(r).value=n,this},has:function(r){return"value"in a(r)},delete:function(r){return delete a(r).value}}}},{"./create-store.js":314}],317:[function(s,m,x){function t(){return function(l,o,c,v,d,p){var y=l[0],g=c[0],A=[0],b=g;v|=0;var M=0,w=g;for(M=0;M<y;++M){{var T=o[v]-p,_=o[v+b]-p;T>=0!=_>=0&&d.push(A[0]+.5+.5*(T+_)/(T-_))}v+=w,++A[0]}}}function i(){return t()}var a=i;function r(l){var o={};return function(v,d,p){var y=v.dtype,g=v.order,A=[y,g.join()].join(),b=o[A];return b||(o[A]=b=l([y,g])),b(v.shape.slice(0),v.data,v.stride,v.offset|0,d,p)}}function n(l){return r(a.bind(void 0,l))}function f(l){return n({funcName:l.funcName})}m.exports=f({funcName:"zeroCrossings"})},{}],318:[function(s,m,x){m.exports=i;var t=s("./lib/zc-core");function i(a,r){var n=[];return r=+r||0,t(a.hi(a.shape[0]-1),n,r),n}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Fo!="undefined"?Fo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[27])(27)})})(V5);(function(z){Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var W=I(H5),e=I(V5.exports);function I(s){return s&&s.__esModule?s:{default:s}}var B=(0,W.default)(e.default),u=B;z.default=u})(U5);var ZC=J5(U5);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,e)=>{this.resolve=W,this.reject=e})}wrapCallback(W){return(e,I)=>{e?this.reject(e):this.resolve(I),typeof W=="function"&&(this.promise.catch(()=>{}),W.length===1?W(e):W(e,I))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6="FirebaseError";class h_ extends Error{constructor(W,e,I){super(e);this.code=W,this.customData=I,this.name=j6,Object.setPrototypeOf(this,h_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,G5.prototype.create)}}class G5{constructor(W,e,I){this.service=W,this.serviceName=e,this.errors=I}create(W,...e){const I=e[0]||{},B=`${this.service}/${W}`,u=this.errors[W],s=u?K6(u,I):"Error",m=`${this.serviceName}: ${s} (${B}).`;return new h_(B,m,I)}}function K6(z,W){return z.replace(J6,(e,I)=>{const B=W[I];return B!=null?String(B):`<${I}?>`})}const J6=/\{\$([^}]+)}/g;function v_(z,W){if(z===W)return!0;const e=Object.keys(z),I=Object.keys(W);for(const B of e){if(!I.includes(B))return!1;const u=z[B],s=W[B];if(W5(u)&&W5(s)){if(!v_(u,s))return!1}else if(u!==s)return!1}for(const B of I)if(!e.includes(B))return!1;return!0}function W5(z){return z!==null&&typeof z=="object"}class p_{constructor(W,e,I){this.name=W,this.instanceFactory=e,this.type=I,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(W,e){this.name=W,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const e=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(e)){const I=new Z6;if(this.instancesDeferred.set(e,I),this.isInitialized(e)||this.shouldAutoInitialize())try{const B=this.getOrInitializeService({instanceIdentifier:e});B&&I.resolve(B)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(W){var e;const I=this.normalizeInstanceIdentifier(W==null?void 0:W.identifier),B=(e=W==null?void 0:W.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(I)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:I})}catch(u){if(B)return null;throw u}else{if(B)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,!!this.shouldAutoInitialize()){if(q6(W))try{this.getOrInitializeService({instanceIdentifier:qv})}catch{}for(const[e,I]of this.instancesDeferred.entries()){const B=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:B});I.resolve(u)}catch{}}}}clearInstance(W=qv){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}async delete(){const W=Array.from(this.instances.values());await Promise.all([...W.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...W.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(W=qv){return this.instances.has(W)}getOptions(W=qv){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:e={}}=W,I=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(I))throw Error(`${this.name}(${I}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const B=this.getOrInitializeService({instanceIdentifier:I,options:e});for(const[u,s]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);I===m&&s.resolve(B)}return B}onInit(W,e){var I;const B=this.normalizeInstanceIdentifier(e),u=(I=this.onInitCallbacks.get(B))!==null&&I!==void 0?I:new Set;u.add(W),this.onInitCallbacks.set(B,u);const s=this.instances.get(B);return s&&W(s,B),()=>{u.delete(W)}}invokeOnInitCallbacks(W,e){const I=this.onInitCallbacks.get(e);if(!!I)for(const B of I)try{B(W,e)}catch{}}getOrInitializeService({instanceIdentifier:W,options:e={}}){let I=this.instances.get(W);if(!I&&this.component&&(I=this.component.instanceFactory(this.container,{instanceIdentifier:$6(W),options:e}),this.instances.set(W,I),this.instancesOptions.set(W,e),this.invokeOnInitCallbacks(I,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,I)}catch{}return I||null}normalizeInstanceIdentifier(W=qv){return this.component?this.component.multipleInstances?W:qv:W}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $6(z){return z===qv?void 0:z}function q6(z){return z.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const e=this.getProvider(W.name);if(e.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);e.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const e=new Q6(W,this);return this.providers.set(W,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hs;(function(z){z[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT"})(Hs||(Hs={}));const tC={debug:Hs.DEBUG,verbose:Hs.VERBOSE,info:Hs.INFO,warn:Hs.WARN,error:Hs.ERROR,silent:Hs.SILENT},rC=Hs.INFO,nC={[Hs.DEBUG]:"log",[Hs.VERBOSE]:"log",[Hs.INFO]:"info",[Hs.WARN]:"warn",[Hs.ERROR]:"error"},aC=(z,W,...e)=>{if(W<z.logLevel)return;const I=new Date().toISOString(),B=nC[W];if(B)console[B](`[${I}]  ${z.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`)};class iC{constructor(W){this.name=W,this._logLevel=rC,this._logHandler=aC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in Hs))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel=typeof W=="string"?tC[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if(typeof W!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,Hs.DEBUG,...W),this._logHandler(this,Hs.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,Hs.VERBOSE,...W),this._logHandler(this,Hs.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,Hs.INFO,...W),this._logHandler(this,Hs.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,Hs.WARN,...W),this._logHandler(this,Hs.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,Hs.ERROR,...W),this._logHandler(this,Hs.ERROR,...W)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(sC(e)){const I=e.getImmediate();return`${I.library}/${I.version}`}else return null}).filter(e=>e).join(" ")}}function sC(z){const W=z.getComponent();return(W==null?void 0:W.type)==="VERSION"}const d_="@firebase/app",Y5="0.7.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new iC("@firebase/app"),lC="@firebase/app-compat",uC="@firebase/analytics-compat",fC="@firebase/analytics",cC="@firebase/app-check-compat",hC="@firebase/app-check",vC="@firebase/auth",pC="@firebase/auth-compat",dC="@firebase/database",gC="@firebase/database-compat",yC="@firebase/functions",mC="@firebase/functions-compat",xC="@firebase/installations",bC="@firebase/installations-compat",_C="@firebase/messaging",wC="@firebase/messaging-compat",TC="@firebase/performance",AC="@firebase/performance-compat",MC="@firebase/remote-config",SC="@firebase/remote-config-compat",kC="@firebase/storage",EC="@firebase/storage-compat",CC="@firebase/firestore",LC="@firebase/firestore-compat",PC="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="[DEFAULT]",DC={[d_]:"fire-core",[lC]:"fire-core-compat",[fC]:"fire-analytics",[uC]:"fire-analytics-compat",[hC]:"fire-app-check",[cC]:"fire-app-check-compat",[vC]:"fire-auth",[pC]:"fire-auth-compat",[dC]:"fire-rtdb",[gC]:"fire-rtdb-compat",[yC]:"fire-fn",[mC]:"fire-fn-compat",[xC]:"fire-iid",[bC]:"fire-iid-compat",[_C]:"fire-fcm",[wC]:"fire-fcm-compat",[TC]:"fire-perf",[AC]:"fire-perf-compat",[MC]:"fire-rc",[SC]:"fire-rc-compat",[kC]:"fire-gcs",[EC]:"fire-gcs-compat",[CC]:"fire-fst",[LC]:"fire-fst-compat","fire-js":"fire-js",[PC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=new Map,m_=new Map;function IC(z,W){try{z.container.addComponent(W)}catch(e){g_.debug(`Component ${W.name} failed to register with FirebaseApp ${z.name}`,e)}}function X5(z){const W=z.name;if(m_.has(W))return g_.debug(`There were multiple attempts to register component ${W}.`),!1;m_.set(W,z);for(const e of y_.values())IC(e,z);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},x_=new G5("app","Firebase",zC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(W,e,I){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=I,this.container.addComponent(new p_("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw x_.create("app-deleted",{appName:this._name})}}function jC(z,W={}){typeof W!="object"&&(W={name:W});const e=Object.assign({name:RC,automaticDataCollectionEnabled:!1},W),I=e.name;if(typeof I!="string"||!I)throw x_.create("bad-app-name",{appName:String(I)});const B=y_.get(I);if(B){if(v_(z,B.options)&&v_(e,B.config))return B;throw x_.create("duplicate-app",{appName:I})}const u=new eC(I);for(const m of m_.values())u.addComponent(m);const s=new FC(z,e,u);return y_.set(I,s),s}function ym(z,W,e){var I;let B=(I=DC[z])!==null&&I!==void 0?I:z;e&&(B+=`-${e}`);const u=B.match(/\s|\//),s=W.match(/\s|\//);if(u||s){const m=[`Unable to register library "${B}" with version "${W}":`];u&&m.push(`library name "${B}" contains illegal characters (whitespace or "/")`),u&&s&&m.push("and"),s&&m.push(`version name "${W}" contains illegal characters (whitespace or "/")`),g_.warn(m.join(" "));return}X5(new p_(`${B}-version`,()=>({library:B,version:W}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(z){X5(new p_("platform-logger",W=>new oC(W),"PRIVATE")),ym(d_,Y5,z),ym(d_,Y5,"esm2017"),ym("fire-js","")}OC("");var NC="firebase",BC="9.6.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ym(NC,BC,"app");export{YC as A,ZC as P,UC as R,VC as a,W4 as b,GC as c,XC as d,HC as e,vf as f,jC as i,WC as j,tS as l};
